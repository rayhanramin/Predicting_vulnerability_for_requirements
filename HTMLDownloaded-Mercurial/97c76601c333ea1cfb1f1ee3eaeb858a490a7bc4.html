<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12819:97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4" />
<meta property="og:url" content="/comm-central/rev/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4" />
<meta property="og:description" content="Bug 900535 Remove mailnews bloat tests support. r=Callek,a=Standard8 for removing obsolete code on a CLOSED TREE so that we don't need to look at it for maintenance purposes" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">shortlog</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">files</a> |
changeset |
<a href="/comm-central/raw-rev/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">raw</a>  | <a href="/comm-central/archive/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=900535">Bug 900535</a> Remove mailnews bloat tests support. r=Callek,a=Standard8 for removing obsolete code on a CLOSED TREE so that we don't need to look at it for maintenance purposes
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#114;&#107;&#32;&#66;&#97;&#110;&#110;&#101;&#114;&#32;&#60;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#115;&#116;&#97;&#110;&#100;&#97;&#114;&#100;&#56;&#46;&#112;&#108;&#117;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 01 Aug 2013 20:53:54 +0100</td></tr>

<tr>
 <td>changeset 12819</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4</a></td>
</tr>



<tr>
<td>parent 12818</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6587da2f7b4eb909e52d1033e0f68a55e49fce9b">6587da2f7b4eb909e52d1033e0f68a55e49fce9b</a>
</td>
</tr>

<tr>
<td>child 12820</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/b7cfccc838e8d480658ddab8cba420c25b368fe7">b7cfccc838e8d480658ddab8cba420c25b368fe7</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4">9372</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 01 Aug 2013 20:19:37 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@65c33aac5dfb [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=65c33aac5dfb143ebaaf9893001f948033b27cf6">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=65c33aac5dfb143ebaaf9893001f948033b27cf6&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=65c33aac5dfb143ebaaf9893001f948033b27cf6&newProject=comm-central&newRevision=97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=65c33aac5dfb143ebaaf9893001f948033b27cf6&newProject=comm-central&newRevision=97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=65c33aac5dfb143ebaaf9893001f948033b27cf6&newProject=comm-central&newRevision=97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Callek%29&revcount=50">Callek</a>, <a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=900535">900535</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=900535">Bug 900535</a> Remove mailnews bloat tests support. r=Callek,a=Standard8 for removing obsolete code on a CLOSED TREE so that we don't need to look at it for maintenance purposes</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mail/testsuite-targets.mk">mail/testsuite-targets.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mail/testsuite-targets.mk">file</a> |
<a href="/comm-central/annotate/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mail/testsuite-targets.mk">annotate</a> |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mail/testsuite-targets.mk">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mail/testsuite-targets.mk">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mail/testsuite-targets.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/moz.build">mailnews/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/moz.build">file</a> |
<a href="/comm-central/annotate/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/moz.build">annotate</a> |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/moz.build">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/moz.build">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/Makefile.in">mailnews/test/performance/bloat/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/Makefile.in">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/Makefile.in">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.js">mailnews/test/performance/bloat/bloatAddrOverlay.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.js">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.js">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.xul">mailnews/test/performance/bloat/bloatAddrOverlay.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.xul">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.xul">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatAddrOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.js">mailnews/test/performance/bloat/bloatComposeOverlay.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.js">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.js">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.xul">mailnews/test/performance/bloat/bloatComposeOverlay.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.xul">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.xul">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatComposeOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.js">mailnews/test/performance/bloat/bloatMainOverlay.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.js">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.js">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.xul">mailnews/test/performance/bloat/bloatMainOverlay.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.xul">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.xul">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/bloatMainOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/install.rdf">mailnews/test/performance/bloat/install.rdf</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/install.rdf">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/install.rdf">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/install.rdf">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/jar.mn">mailnews/test/performance/bloat/jar.mn</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/jar.mn">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/jar.mn">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/mailnewsTestPrefs.js">mailnews/test/performance/bloat/mailnewsTestPrefs.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/mailnewsTestPrefs.js">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/mailnewsTestPrefs.js">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/mailnewsTestPrefs.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/moz.build">mailnews/test/performance/bloat/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/moz.build">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/moz.build">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/runtest.py">mailnews/test/performance/bloat/runtest.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/runtest.py">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/runtest.py">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/test/performance/bloat/runtest.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/testsuite-targets.mk">mailnews/testsuite-targets.mk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/testsuite-targets.mk">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/testsuite-targets.mk">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/mailnews/testsuite-targets.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/suite/build.mk">suite/build.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/suite/build.mk">file</a> |
<a href="/comm-central/annotate/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/suite/build.mk">annotate</a> |
<a href="/comm-central/diff/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/suite/build.mk">diff</a> |
<a href="/comm-central/comparison/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/suite/build.mk">comparison</a> |
<a href="/comm-central/log/97c76601c333ea1cfb1f1ee3eaeb858a490a7bc4/suite/build.mk">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/testsuite-targets.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/testsuite-targets.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,17 +1,12 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.5"></a><span id="l1.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.6"></a><span id="l1.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8" class="difflineminus">-# Additional mailnews targets to call automated test suites</span>
<a href="#l1.9"></a><span id="l1.9" class="difflineminus">-include $(topsrcdir)/mailnews/testsuite-targets.mk</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineminus">-</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineminus">-# Instructions below this line are for mail/ specific tests.</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-</span>
<a href="#l1.13"></a><span id="l1.13"> MOZMILLDIR=$(DEPTH)/mozilla/_tests/mozmill</span>
<a href="#l1.14"></a><span id="l1.14"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l1.15"></a><span id="l1.15"> VIRTUALENV_BIN = $(MOZMILLDIR)/../mozmill-virtualenv/Scripts</span>
<a href="#l1.16"></a><span id="l1.16"> else</span>
<a href="#l1.17"></a><span id="l1.17"> VIRTUALENV_BIN = $(MOZMILLDIR)/../mozmill-virtualenv/bin</span>
<a href="#l1.18"></a><span id="l1.18"> endif</span>
<a href="#l1.19"></a><span id="l1.19"> MOZMILLPYTHON = $(call core_abspath,$(VIRTUALENV_BIN)/python$(BIN_SUFFIX))</span>
<a href="#l1.20"></a><span id="l1.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/moz.build</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/moz.build</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -36,17 +36,16 @@ if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5">     if not CONFIG['GNU_CC']:</span>
<a href="#l2.6"></a><span id="l2.6">         PARALLEL_DIRS += [</span>
<a href="#l2.7"></a><span id="l2.7">             'import/oexpress',</span>
<a href="#l2.8"></a><span id="l2.8">             'import/winlivemail',</span>
<a href="#l2.9"></a><span id="l2.9">         ]</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11"> TEST_TOOL_DIRS += [</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    'test/performance/bloat',</span>
<a href="#l2.13"></a><span id="l2.13">     'imap/test',</span>
<a href="#l2.14"></a><span id="l2.14">     'import/test',</span>
<a href="#l2.15"></a><span id="l2.15">     'local/test',</span>
<a href="#l2.16"></a><span id="l2.16"> ]</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18"> if CONFIG['MOZ_MAPI_SUPPORT']:</span>
<a href="#l2.19"></a><span id="l2.19">     PARALLEL_DIRS += [</span>
<a href="#l2.20"></a><span id="l2.20">         'mapi/mapiDLL',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">deleted file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- a/mailnews/test/performance/bloat/Makefile.in</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ /dev/null</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -1,22 +0,0 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineminus">-</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineminus">-DEPTH		= @DEPTH@</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineminus">-topsrcdir	= @top_srcdir@</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineminus">-srcdir		= @srcdir@</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-VPATH		= @srcdir@</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-relativesrcdir = @relativesrcdir@</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-include $(DEPTH)/config/autoconf.mk</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-USE_EXTENSION_MANIFEST = 1</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-DIST_FILES = install.rdf</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-FINAL_TARGET = $(MOZDEPTH)/_tests/mailbloat/mailbloat</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-libs::</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-	$(NSINSTALL) -D $(FINAL_TARGET)/defaults/preferences</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-	$(NSINSTALL) $(srcdir)/mailnewsTestPrefs.js $(FINAL_TARGET)/defaults/preferences</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/mailnews/test/performance/bloat/bloatAddrOverlay.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,28 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">- * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">-</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineminus">-// Milliseconds. Decided on MacBook 2.4GHz Intel (Dual Core).</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineminus">-// 3s seemed a resonable time for the address book window to be displayed.</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-const kABStartup = 3000;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-var gCurrentTimeout;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-function startABTest() </span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-{</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-  removeEventListener(&quot;load&quot;, startABTest, false);</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-  // load gets called before we've finished displaying/really loading, so we</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-  // have to have a bit of a timeout to allow it to get to that stage.</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-  gCurrentTimeout = setTimeout(mainABTest, kABStartup);</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-}</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-function mainABTest()</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineminus">-{</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-  // Close the window.</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-  window.close();</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-}</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-// Add the startABTest call to the load event for the window.</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-addEventListener(&quot;load&quot;, startABTest, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/mailnews/test/performance/bloat/bloatAddrOverlay.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,10 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">-</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineminus">-</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineminus">-&lt;overlay id=&quot;bloatAddrOverlay&quot; xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  &lt;script src=&quot;chrome://mailbloat/content/bloatAddrOverlay.js&quot;/&gt;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-&lt;/overlay&gt;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/mailnews/test/performance/bloat/bloatComposeOverlay.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,30 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">- * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-// Milliseconds. Decided on MacBook 2.4GHz Intel (Dual Core).</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-// 200ms would crash, 2s seemed stable and enough time for the window to</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-// actually be displayed, so left it as 3s.</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-const kComposeStartup = 3000;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-var gCurrentTimeout;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-function startComposeTest()</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-{</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-  removeEventListener(&quot;load&quot;, startComposeTest, false);</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-  // load gets called before we've finished displaying/really loading, so we</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-  // have to have a bit of a timeout to allow it to get to that stage.</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-  gCurrentTimeout = setTimeout(handleComposeTest, kComposeStartup);</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-}</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-function handleComposeTest()</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-{</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-  // Call the correct close compose window function, this also skips the</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">-  // are you sure you want to close it prompt (bug 321783).</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-  MsgComposeCloseWindow(true);</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-}</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineminus">-// Add the startBloatTest call to the load event for the window.</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-addEventListener(&quot;load&quot;, startComposeTest, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/mailnews/test/performance/bloat/bloatComposeOverlay.xul</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,10 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">-</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-&lt;overlay id=&quot;bloatComposeOverlay&quot; xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  &lt;script src=&quot;chrome://mailbloat/content/bloatComposeOverlay.js&quot;/&gt;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-&lt;/overlay&gt;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/mailnews/test/performance/bloat/bloatMainOverlay.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,56 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">- * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-// Milliseconds. Decided on MacBook 2.4GHz Intel (Dual Core).</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-// 4s seemed a resonable time for the main window to be displayed.</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-const kMailStartup = 4000;</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-// The other two windows (compose + addrbook) are closed after 3 seconds,</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-// well close after 8 to allow a little extra time - if they get delayed, then</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-// well get a prompt for closing the compose window that we don't want.</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-// See bug 321783.</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-const kMailClose = 8000;</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-const kMailWaitTotal = kMailStartup + kMailClose;</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-function startMainTest()</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-{</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-  removeEventListener(&quot;load&quot;, startMainTest, false);</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-  setTimeout(shutdownMainWindow, kMailWaitTotal);</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-  // First thing to do is to start the address book and compose windows</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-  toOpenWindowByType(&quot;mail:addressbook&quot;,</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-                     &quot;chrome://messenger/content/addressbook/addressbook.xul&quot;);</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-  startComposeWindow();</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-}</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-function shutdownMainWindow()</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-{</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-  var window = Services.wm.getMostRecentWindow(&quot;msgcompose&quot;);</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-  // Double-check because of bug 321783</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-  if (window)</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-  {</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-    // It hasn't shutdown yet, reset the timeout</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-    dump(&quot;XXX Trying to quit too early, delaying shutdown to stop bug 321783 affecting us\n&quot;);</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-    setTimeout(shutdownMainWindow, kMailWaitTotal);</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">-    return;</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineminus">-  }</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-  goQuitApplication();</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-}</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineminus">-function startComposeWindow()</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineminus">-{</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-  // Compose a new message, format HTML, default identity</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-  MailServices.compose.OpenComposeWindow(null, null, null, 0, 1, null, null);</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-}</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineminus">-</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-// Add the startMainTest call to the load event for the window.</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-addEventListener(&quot;load&quot;, startMainTest, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/mailnews/test/performance/bloat/bloatMainOverlay.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,10 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">-</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">-</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">-&lt;overlay id=&quot;bloatMainOverlay&quot; xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  &lt;script src=&quot;chrome://mailbloat/content/bloatMainOverlay.js&quot;/&gt;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-&lt;/overlay&gt;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">deleted file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- a/mailnews/test/performance/bloat/install.rdf</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ /dev/null</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -1,20 +0,0 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">-</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">-&lt;RDF xmlns=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-     xmlns:em=&quot;http://www.mozilla.org/2004/em-rdf#&quot;&gt;</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-  &lt;Description about=&quot;urn:mozilla:install-manifest&quot;&gt;</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-    &lt;em:id&gt;mailbloat@mozilla.org&lt;/em:id&gt;</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineminus">-    &lt;em:version&gt;1.0&lt;/em:version&gt;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    &lt;em:targetApplication&gt;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-      &lt;Description&gt;</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-        &lt;em:id&gt;toolkit@mozilla.org&lt;/em:id&gt;</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-#expand        &lt;em:minVersion&gt;__MOZILLA_VERSION_U__&lt;/em:minVersion&gt;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-#expand        &lt;em:maxVersion&gt;__MOZILLA_VERSION_U__&lt;/em:maxVersion&gt;</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-      &lt;/Description&gt;</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-    &lt;/em:targetApplication&gt;</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-    &lt;!-- Front End MetaData --&gt;</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-    &lt;em:name&gt;Mail Bloat Tests&lt;/em:name&gt;</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-    &lt;em:description&gt;Run Mail Bloat Tests&lt;/em:description&gt;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineminus">-    &lt;em:creator&gt;Mark Banner&lt;/em:creator&gt;</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineminus">-  &lt;/Description&gt;</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineminus">-&lt;/RDF&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/mailnews/test/performance/bloat/jar.mn</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,11 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-mailbloat.jar:</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">-% content mailbloat %content/</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">-% overlay chrome://messenger/content/messenger.xul chrome://mailbloat/content/bloatMainOverlay.xul</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-% overlay chrome://messenger/content/addressbook/addressbook.xul chrome://mailbloat/content/bloatAddrOverlay.xul</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-% overlay chrome://messenger/content/messengercompose/messengercompose.xul chrome://mailbloat/content/bloatComposeOverlay.xul</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-  content/bloatMainOverlay.js     (bloatMainOverlay.js)</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-  content/bloatMainOverlay.xul    (bloatMainOverlay.xul)</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  content/bloatAddrOverlay.js     (bloatAddrOverlay.js)</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-  content/bloatAddrOverlay.xul    (bloatAddrOverlay.xul)</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-  content/bloatComposeOverlay.js  (bloatComposeOverlay.js)</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-  content/bloatComposeOverlay.xul (bloatComposeOverlay.xul)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">deleted file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- a/mailnews/test/performance/bloat/mailnewsTestPrefs.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ /dev/null</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -1,61 +0,0 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">-//</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">-// Common preferences.</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">-//</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineminus">-// This set of prefs is copyied over the defaults that build-seamonkey-util.pl</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineminus">-// sets up.</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-user_pref(&quot;browser.dom.window.dump.enabled&quot;, true);</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-// no slow script dialogs</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-user_pref(&quot;dom.max_chrome_script_run_time&quot;, 0);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-user_pref(&quot;dom.max_script_run_time&quot;, 0);</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-user_pref(&quot;extensions.autoDisableScopes&quot;, 10);</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-user_pref(&quot;mail.account.account1.server&quot;, &quot;server1&quot;);</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-user_pref(&quot;mail.account.account2.identities&quot;, &quot;id1&quot;);</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-user_pref(&quot;mail.account.account2.server&quot;, &quot;server2&quot;);</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-user_pref(&quot;mail.accountmanager.accounts&quot;, &quot;account1,account2&quot;);</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineminus">-user_pref(&quot;mail.accountmanager.defaultaccount&quot;, &quot;account2&quot;);</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-user_pref(&quot;mail.accountmanager.localfoldersserver&quot;, &quot;server1&quot;);</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">-user_pref(&quot;mail.identity.id1.fullName&quot;, &quot;Tinderbox&quot;);</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-user_pref(&quot;mail.identity.id1.smtpServer&quot;, &quot;smtp1&quot;);</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-user_pref(&quot;mail.identity.id1.useremail&quot;, &quot;tinderbox@foo.invalid&quot;);</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-user_pref(&quot;mail.identity.id1.valid&quot;, true);</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-user_pref(&quot;mail.root.none-rel&quot;, &quot;[ProfD]Mail&quot;);</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-user_pref(&quot;mail.root.pop3-rel&quot;, &quot;[ProfD]Mail&quot;);</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-user_pref(&quot;mail.server.server1.directory-rel&quot;, &quot;[ProfD]Mail/Local Folders&quot;);</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-user_pref(&quot;mail.server.server1.hostname&quot;, &quot;Local Folders&quot;);</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineminus">-user_pref(&quot;mail.server.server1.name&quot;, &quot;Local Folders&quot;);</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-user_pref(&quot;mail.server.server1.type&quot;, &quot;none&quot;);</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-user_pref(&quot;mail.server.server1.userName&quot;, &quot;nobody&quot;);</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-user_pref(&quot;mail.server.server2.check_new_mail&quot;, false);</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-user_pref(&quot;mail.server.server2.directory-rel&quot;, &quot;[ProfD]Mail/tinderbox&quot;);</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">-user_pref(&quot;mail.server.server2.download_on_biff&quot;, true);</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineminus">-user_pref(&quot;mail.server.server2.hostname&quot;, &quot;tinderbox&quot;);</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineminus">-user_pref(&quot;mail.server.server2.login_at_startup&quot;, false);</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-user_pref(&quot;mail.server.server2.name&quot;, &quot;tinderbox@foo.invalid&quot;);</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineminus">-user_pref(&quot;mail.server.server2.type&quot;, &quot;pop3&quot;);</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineminus">-user_pref(&quot;mail.server.server2.userName&quot;, &quot;tinderbox&quot;);</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineminus">-user_pref(&quot;mail.smtp.defaultserver&quot;, &quot;smtp1&quot;);</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-user_pref(&quot;mail.smtpserver.smtp1.hostname&quot;, &quot;tinderbox&quot;);</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineminus">-user_pref(&quot;mail.smtpserver.smtp1.username&quot;, &quot;tinderbox&quot;);</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-user_pref(&quot;mail.smtpservers&quot;, &quot;smtp1&quot;);</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-user_pref(&quot;mail.startup.enabledMailCheckOnce&quot;, true);</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineminus">-user_pref(&quot;mailnews.start_page_override.mstone&quot;, &quot;ignore&quot;);</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineminus">-user_pref(&quot;mailnews.database.global.indexer.enabled&quot;, false);</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-// Ensure OS X and Outlook/OE books are disabled</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineminus">-user_pref(&quot;ldap_2.servers.osx.position&quot;, 0);</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-user_pref(&quot;ldap_2.servers.oe.position&quot;, 0);</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-// Suppress Telemetry opt-in prompt</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineminus">-user_pref(&quot;toolkit.telemetry.prompted&quot;, 999);</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineminus">-//</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineminus">-// SeaMonkey preferences.</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineminus">-//</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineminus">-user_pref(&quot;shell.checkDefaultClient&quot;, false);</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineminus">-</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineminus">-//</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineminus">-// Thunderbird preferences.</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineminus">-//</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineminus">-user_pref(&quot;mail.shell.checkDefaultClient&quot;, false);</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineminus">-user_pref(&quot;mail.spotlight.enable&quot;, false);</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineminus">-user_pref(&quot;mail.spotlight.firstRunDone&quot;, true);</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineminus">-user_pref(&quot;mail.winsearch.enable&quot;, false);</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineminus">-user_pref(&quot;mail.winsearch.firstRunDone&quot;, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/mailnews/test/performance/bloat/moz.build</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,7 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-MODULE = 'mailbloat'</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">deleted file mode 100755</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- a/mailnews/test/performance/bloat/runtest.py</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ /dev/null</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -1,195 +0,0 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineminus">-Runs the Bloat test harness</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-import optparse</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-import sys</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-import os</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineminus">-import shutil</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineminus">-from automation import Automation</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-automation = Automation()</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-# --------------------------------------------------------------</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineminus">-# TODO: this is a hack for mozbase without virtualenv, remove with bug 849900</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-#</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-here = os.path.dirname(__file__)</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineminus">-mozbase = os.path.realpath(os.path.join(os.path.dirname(here), 'mozbase'))</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineminus">-</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineminus">-try:</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineminus">-    import mozcrash</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-except:</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-    deps = ['mozcrash',</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-            'mozlog']</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">-    for dep in deps:</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineminus">-        module = os.path.join(mozbase, dep)</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineminus">-        if module not in sys.path:</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineminus">-            sys.path.append(module)</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineminus">-    import mozcrash</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineminus">-# ---------------------------------------------------------------</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineminus">-</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineminus">-class BloatRunTestOptions(optparse.OptionParser):</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-    &quot;&quot;&quot;Parses Bloat runtest.py commandline options.&quot;&quot;&quot;</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineminus">-    def __init__(self, **kwargs):</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineminus">-        optparse.OptionParser.__init__(self, **kwargs)</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-        defaults = {}</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineminus">-</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineminus">-        self.add_option(&quot;--distdir&quot;,</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">-                        action = &quot;store&quot;, type = &quot;string&quot;, dest = &quot;distdir&quot;,</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineminus">-                        help = &quot;object directory of build to run&quot;)</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-        defaults[&quot;distdir&quot;] = &quot;distdir-tb&quot;</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineminus">-        self.add_option(&quot;--bin&quot;,</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineminus">-                        action = &quot;store&quot;, type = &quot;string&quot;, dest = &quot;bin&quot;,</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineminus">-                        help = &quot;application binary name&quot;)</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineminus">-        defaults[&quot;bin&quot;] = &quot;thunderbird&quot;</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineminus">-</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineminus">-        self.add_option(&quot;--brand&quot;,</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineminus">-                        action = &quot;store&quot;, type = &quot;string&quot;, dest = &quot;brand&quot;,</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineminus">-                        help = &quot;The current branding, including Debug if necessary&quot;)</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineminus">-        defaults[&quot;brand&quot;] = &quot;Daily&quot;</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineminus">-</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineminus">-        self.add_option(&quot;--symbols-path&quot;,</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineminus">-                        action = &quot;store&quot;, type = &quot;string&quot;, dest = &quot;symbols&quot;,</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineminus">-                        help = &quot;The path to the symbol files from build_symbols&quot;)</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineminus">-        defaults[&quot;symbols&quot;] = &quot;&quot;</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineminus">-</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineminus">-        self.add_option(&quot;--extra-startup-arg&quot;,</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineminus">-                        action = &quot;store&quot;, type = &quot;string&quot;, dest = &quot;extraArg&quot;,</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineminus">-                        help = &quot;Extra startup argument if required, at the moment this will only support one extra argument with no parameters&quot;)</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineminus">-        defaults[&quot;extraArg&quot;] = &quot;&quot;</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineminus">-</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineminus">-        self.set_defaults(**defaults);</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineminus">-</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineminus">-        usage = &quot;&quot;&quot;\</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineminus">-Usage instructions for runtest.py.</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineminus">-All arguments must be specified.</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineminus">-        self.set_usage(usage)</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineminus">-</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineminus">-</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineminus">-parser = BloatRunTestOptions()</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineminus">-options, args = parser.parse_args()</span>
<a href="#l14.82"></a><span id="l14.82" class="difflineminus">-</span>
<a href="#l14.83"></a><span id="l14.83" class="difflineminus">-if options.distdir == &quot;&quot; or options.bin == &quot;&quot; or options.brand == &quot;&quot;:</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineminus">-  parser.print_help()</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineminus">-  sys.exit(1)</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineminus">-</span>
<a href="#l14.87"></a><span id="l14.87" class="difflineminus">-DISTDIR = os.path.abspath(os.path.realpath(options.distdir))</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineminus">-print DISTDIR</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineminus">-</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineminus">-CWD = os.getcwd()</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineminus">-SCRIPTDIR = os.path.abspath(os.path.realpath(os.path.dirname(sys.argv[0])))</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineminus">-</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineminus">-if automation.IS_MAC:</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineminus">-  APPBUNDLE = options.brand + '.app'</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineminus">-  BINDIR = os.path.join(DISTDIR, APPBUNDLE, 'Contents', 'MacOS')</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineminus">-else:</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineminus">-  BINDIR = os.path.join(DISTDIR, 'bin')</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineminus">-</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineminus">-BIN = os.path.join(BINDIR, options.bin)</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineminus">-EXTENSIONDIR = os.path.join(DISTDIR, '..', '_tests', 'mailbloat', 'mailbloat')</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineminus">-PROFILE = os.path.join(DISTDIR, '..', '_tests', 'mailbloat', 'leakprofile')</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineminus">-print BIN</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineminus">-</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineminus">-# Wipe the profile</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineminus">-if os.path.exists(PROFILE):</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineminus">-  shutil.rmtree(PROFILE)</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineminus">-os.mkdir(PROFILE)</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineminus">-</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineminus">-defaultEnv = automation.environment()</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineminus">-defaultEnv['NO_EM_RESTART'] = '1'</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineminus">-if (not &quot;XPCOM_DEBUG_BREAK&quot; in defaultEnv):</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineminus">-  defaultEnv['XPCOM_DEBUG_BREAK'] = 'stack'</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineminus">-</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineminus">-defaultArgs = ['-no-remote']</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineminus">-if automation.IS_MAC:</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineminus">-  defaultArgs.append('-foreground')</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineminus">-</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineminus">-COMMANDS = [</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineminus">-  {</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineminus">-    'name': 'register',</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineminus">-    'args': ['-register'],</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineminus">-  },</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineminus">-  {</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineminus">-    'name': 'createProfile',</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineminus">-    'args': ['-CreateProfile', 'bloat ' + PROFILE],</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineminus">-  },</span>
<a href="#l14.127"></a><span id="l14.127" class="difflineminus">-  {</span>
<a href="#l14.128"></a><span id="l14.128" class="difflineminus">-    'name': 'setupProfile'</span>
<a href="#l14.129"></a><span id="l14.129" class="difflineminus">-  },</span>
<a href="#l14.130"></a><span id="l14.130" class="difflineminus">-  {</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineminus">-   'name': 'bloatTests',</span>
<a href="#l14.132"></a><span id="l14.132" class="difflineminus">-   'args': ['-profile', PROFILE],</span>
<a href="#l14.133"></a><span id="l14.133" class="difflineminus">-   'env': {'XPCOM_MEM_BLOAT_LOG': 'bloat.log'},</span>
<a href="#l14.134"></a><span id="l14.134" class="difflineminus">-  },</span>
<a href="#l14.135"></a><span id="l14.135" class="difflineminus">-  {</span>
<a href="#l14.136"></a><span id="l14.136" class="difflineminus">-   'name': 'leakTests',</span>
<a href="#l14.137"></a><span id="l14.137" class="difflineminus">-   'args': ['-profile',         PROFILE,</span>
<a href="#l14.138"></a><span id="l14.138" class="difflineminus">-            '--trace-malloc',   'malloc.log',</span>
<a href="#l14.139"></a><span id="l14.139" class="difflineminus">-            '--shutdown-leaks', 'sdleak.log',</span>
<a href="#l14.140"></a><span id="l14.140" class="difflineminus">-           ],</span>
<a href="#l14.141"></a><span id="l14.141" class="difflineminus">-   'env': {'XPCOM_MEM_BLOAT_LOG': 'trace-bloat.log'},</span>
<a href="#l14.142"></a><span id="l14.142" class="difflineminus">-  },</span>
<a href="#l14.143"></a><span id="l14.143" class="difflineminus">-]</span>
<a href="#l14.144"></a><span id="l14.144" class="difflineminus">-</span>
<a href="#l14.145"></a><span id="l14.145" class="difflineminus">-</span>
<a href="#l14.146"></a><span id="l14.146" class="difflineminus">-for cmd in COMMANDS:</span>
<a href="#l14.147"></a><span id="l14.147" class="difflineminus">-  # Some scripts rely on the cwd</span>
<a href="#l14.148"></a><span id="l14.148" class="difflineminus">-  cwd = CWD</span>
<a href="#l14.149"></a><span id="l14.149" class="difflineminus">-  if 'cwd' in cmd:</span>
<a href="#l14.150"></a><span id="l14.150" class="difflineminus">-    cwd = cmd['cwd']</span>
<a href="#l14.151"></a><span id="l14.151" class="difflineminus">-  os.chdir(cwd)</span>
<a href="#l14.152"></a><span id="l14.152" class="difflineminus">-</span>
<a href="#l14.153"></a><span id="l14.153" class="difflineminus">-  if cmd['name'] == 'setupProfile':</span>
<a href="#l14.154"></a><span id="l14.154" class="difflineminus">-      automation.installExtension(EXTENSIONDIR, PROFILE, &quot;mailbloat@mozilla.org&quot;)</span>
<a href="#l14.155"></a><span id="l14.155" class="difflineminus">-      print &quot;Hello&quot;</span>
<a href="#l14.156"></a><span id="l14.156" class="difflineminus">-      continue</span>
<a href="#l14.157"></a><span id="l14.157" class="difflineminus">-</span>
<a href="#l14.158"></a><span id="l14.158" class="difflineminus">-  # Set up the environment</span>
<a href="#l14.159"></a><span id="l14.159" class="difflineminus">-  mailnewsEnv = defaultEnv</span>
<a href="#l14.160"></a><span id="l14.160" class="difflineminus">-  if 'env' in cmd:</span>
<a href="#l14.161"></a><span id="l14.161" class="difflineminus">-    mailnewsEnv.update(cmd['env'])</span>
<a href="#l14.162"></a><span id="l14.162" class="difflineminus">-</span>
<a href="#l14.163"></a><span id="l14.163" class="difflineminus">-  # Build the command</span>
<a href="#l14.164"></a><span id="l14.164" class="difflineminus">-  binary = BIN</span>
<a href="#l14.165"></a><span id="l14.165" class="difflineminus">-  # Copy default args, using the : option.</span>
<a href="#l14.166"></a><span id="l14.166" class="difflineminus">-  args = defaultArgs[:]</span>
<a href="#l14.167"></a><span id="l14.167" class="difflineminus">-  args.extend(cmd['args'])</span>
<a href="#l14.168"></a><span id="l14.168" class="difflineminus">-</span>
<a href="#l14.169"></a><span id="l14.169" class="difflineminus">-  if options.extraArg != &quot;&quot;:</span>
<a href="#l14.170"></a><span id="l14.170" class="difflineminus">-    args.append(options.extraArg)</span>
<a href="#l14.171"></a><span id="l14.171" class="difflineminus">-</span>
<a href="#l14.172"></a><span id="l14.172" class="difflineminus">-  # Different binary implies no default args</span>
<a href="#l14.173"></a><span id="l14.173" class="difflineminus">-  if 'bin' in cmd:</span>
<a href="#l14.174"></a><span id="l14.174" class="difflineminus">-    binary = cmd['bin']</span>
<a href="#l14.175"></a><span id="l14.175" class="difflineminus">-    args = cmd['args']</span>
<a href="#l14.176"></a><span id="l14.176" class="difflineminus">-</span>
<a href="#l14.177"></a><span id="l14.177" class="difflineminus">-  print &gt;&gt; sys.stderr, 'INFO | runtest.py | Running ' + cmd['name'] + ' in ' + CWD + ' : '</span>
<a href="#l14.178"></a><span id="l14.178" class="difflineminus">-  print &gt;&gt; sys.stderr, 'INFO | runtest.py | ', binary, args</span>
<a href="#l14.179"></a><span id="l14.179" class="difflineminus">-  envkeys = mailnewsEnv.keys()</span>
<a href="#l14.180"></a><span id="l14.180" class="difflineminus">-  envkeys.sort()</span>
<a href="#l14.181"></a><span id="l14.181" class="difflineminus">-  for envkey in envkeys:</span>
<a href="#l14.182"></a><span id="l14.182" class="difflineminus">-    print &gt;&gt; sys.stderr, &quot;%s=%s&quot;%(envkey, mailnewsEnv[envkey])</span>
<a href="#l14.183"></a><span id="l14.183" class="difflineminus">-</span>
<a href="#l14.184"></a><span id="l14.184" class="difflineminus">-  proc = automation.Process([binary] + args, env = mailnewsEnv)</span>
<a href="#l14.185"></a><span id="l14.185" class="difflineminus">-</span>
<a href="#l14.186"></a><span id="l14.186" class="difflineminus">-  status = proc.wait()</span>
<a href="#l14.187"></a><span id="l14.187" class="difflineminus">-  if status != 0:</span>
<a href="#l14.188"></a><span id="l14.188" class="difflineminus">-    print &gt;&gt; sys.stderr, &quot;TEST-UNEXPECTED-FAIL | runtest.py | Exited with code %d during test run&quot;%(status)</span>
<a href="#l14.189"></a><span id="l14.189" class="difflineminus">-</span>
<a href="#l14.190"></a><span id="l14.190" class="difflineminus">-  if mozcrash.check_for_crashes(os.path.join(PROFILE, &quot;minidumps&quot;), options.symbols, cmd['name']):</span>
<a href="#l14.191"></a><span id="l14.191" class="difflineminus">-    print &gt;&gt; sys.stderr, 'TinderboxPrint: ' + cmd['name'] + '&lt;br/&gt;&lt;em class=&quot;testfail&quot;&gt;CRASH&lt;/em&gt;'</span>
<a href="#l14.192"></a><span id="l14.192" class="difflineminus">-    status = 1</span>
<a href="#l14.193"></a><span id="l14.193" class="difflineminus">-</span>
<a href="#l14.194"></a><span id="l14.194" class="difflineminus">-  if status != 0:</span>
<a href="#l14.195"></a><span id="l14.195" class="difflineminus">-    sys.exit(status)</span>
<a href="#l14.196"></a><span id="l14.196" class="difflineminus">-</span>
<a href="#l14.197"></a><span id="l14.197" class="difflineminus">-  print &gt;&gt; sys.stderr, 'INFO | runtest.py | ' + cmd['name'] + ' executed successfully.'</span>
<a href="#l14.198"></a><span id="l14.198" class="difflineminus">-</span>
<a href="#l14.199"></a><span id="l14.199" class="difflineminus">-print &gt;&gt; sys.stderr, 'INFO | runtest.py | All tests executed successfully.'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/mailnews/testsuite-targets.mk</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,23 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-APP_NAME := $(MOZ_APP_DISPLAYNAME)</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">-ifdef MOZ_DEBUG</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-APP_NAME := $(APP_NAME)Debug</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-endif</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-SYMBOLS_PATH := --symbols-path=$(DIST)/crashreporter-symbols</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-# BLOAT_EXTRA_ARG lets an application add an extra startup argument.</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-ifdef BLOAT_EXTRA_ARG</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-BLOAT_EXTRA_STARTUP_ARG := --extra-startup-arg=$(BLOAT_EXTRA_ARG)</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-endif</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-mailbloat:</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-	$(PYTHON) -u $(topsrcdir)/mozilla/config/pythonpath.py \</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">-	  -I$(DIST)/../build -I$(MOZILLA_DIR)/build \</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-	  $(topsrcdir)/mailnews/test/performance/bloat/runtest.py \</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineminus">-	    --distdir=$(DIST) --bin=$(MOZ_APP_NAME) --brand=$(APP_NAME) \</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineminus">-	    $(SYMBOLS_PATH) $(BLOAT_EXTRA_STARTUP_ARG)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/suite/build.mk</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/suite/build.mk</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -38,22 +38,9 @@ mochitest-browser-chrome:</span>
<a href="#l16.4"></a><span id="l16.4"> 	$(RUN_MOCHITEST) --browser-chrome</span>
<a href="#l16.5"></a><span id="l16.5"> 	$(CHECK_TEST_ERROR)</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7"> mochitest:: mochitest-browser-chrome</span>
<a href="#l16.8"></a><span id="l16.8"> </span>
<a href="#l16.9"></a><span id="l16.9"> .PHONY: mochitest-browser-chrome</span>
<a href="#l16.10"></a><span id="l16.10"> endif</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-else # toplevel Makefile</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-ifdef ENABLE_TESTS</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-# This part is copied from mail/testsuite-targets.mk,</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-# SeaMonkey does not need to create a suite/testsuite-targets.mk yet.</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-# &quot;-mail : Open the mail folder view&quot; (instead of &quot;a browser window&quot;).</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-BLOAT_EXTRA_ARG := -mail</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-# Additional mailnews targets to call automated test suites.</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-include $(topsrcdir)/mailnews/testsuite-targets.mk</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-endif</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-</span>
<a href="#l16.25"></a><span id="l16.25"> endif # COMM_BUILD</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

