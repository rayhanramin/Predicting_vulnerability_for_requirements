<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 17788:32e030ae725c9b365cc534cb55208ffcc54edb30</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 32e030ae725c9b365cc534cb55208ffcc54edb30" />
<meta property="og:url" content="/comm-central/rev/32e030ae725c9b365cc534cb55208ffcc54edb30" />
<meta property="og:description" content="Bug 1151476 - Remove use of expression closure from suite/. r=Neil, a=Ratty for SeaMonkey CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 32e030ae725c9b365cc534cb55208ffcc54edb30 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/32e030ae725c9b365cc534cb55208ffcc54edb30">shortlog</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/32e030ae725c9b365cc534cb55208ffcc54edb30">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30">files</a> |
changeset |
<a href="/comm-central/raw-rev/32e030ae725c9b365cc534cb55208ffcc54edb30">raw</a>  | <a href="/comm-central/archive/32e030ae725c9b365cc534cb55208ffcc54edb30.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151476">Bug 1151476</a> - Remove use of expression closure from suite/. r=Neil, a=Ratty for SeaMonkey CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#84;&#111;&#111;&#114;&#117;&#32;&#70;&#117;&#106;&#105;&#115;&#97;&#119;&#97;&#32;&#60;&#97;&#114;&#97;&#105;&#95;&#97;&#64;&#109;&#97;&#99;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 16 Apr 2015 04:11:49 +0900</td></tr>

<tr>
 <td>changeset 17788</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/32e030ae725c9b365cc534cb55208ffcc54edb30">32e030ae725c9b365cc534cb55208ffcc54edb30</a></td>
</tr>



<tr>
<td>parent 17787</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/4322a4f7e57aa5bfbfe1c8be1262261b5113ee3a">4322a4f7e57aa5bfbfe1c8be1262261b5113ee3a</a>
</td>
</tr>

<tr>
<td>child 17789</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/dfbb8638e352c7a333d11782b36a1b9f58d2af87">dfbb8638e352c7a333d11782b36a1b9f58d2af87</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=32e030ae725c9b365cc534cb55208ffcc54edb30">10939</a></td></tr>
<tr><td>push user</td><td>arai_a@mac.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 15 Apr 2015 19:13:29 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@32e030ae725c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=32e030ae725c9b365cc534cb55208ffcc54edb30">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=32e030ae725c9b365cc534cb55208ffcc54edb30&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=32e030ae725c9b365cc534cb55208ffcc54edb30&newProject=comm-central&newRevision=32e030ae725c9b365cc534cb55208ffcc54edb30&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=32e030ae725c9b365cc534cb55208ffcc54edb30&newProject=comm-central&newRevision=32e030ae725c9b365cc534cb55208ffcc54edb30&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=32e030ae725c9b365cc534cb55208ffcc54edb30&newProject=comm-central&newRevision=32e030ae725c9b365cc534cb55208ffcc54edb30&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a>, <a href="/comm-central/log?rev=reviewer%28Ratty%29&revcount=50">Ratty</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151476">1151476</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151476">Bug 1151476</a> - Remove use of expression closure from suite/. r=Neil, a=Ratty for SeaMonkey CLOSED TREE</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/navigator.js">suite/browser/navigator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/navigator.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/navigator.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/navigator.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/navigator.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/navigator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/tabbrowser.xml">suite/browser/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_ctrlTab.js">suite/browser/test/browser/browser_ctrlTab.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_ctrlTab.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_ctrlTab.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_ctrlTab.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_ctrlTab.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_ctrlTab.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_page_style_menu.js">suite/browser/test/browser/browser_page_style_menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_page_style_menu.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_page_style_menu.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_page_style_menu.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_page_style_menu.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_page_style_menu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginnotification.js">suite/browser/test/browser/browser_pluginnotification.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginnotification.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginnotification.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginnotification.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginnotification.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginnotification.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginplaypreview.js">suite/browser/test/browser/browser_pluginplaypreview.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginplaypreview.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginplaypreview.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginplaypreview.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginplaypreview.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_pluginplaypreview.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js">suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/urlbarBindings.xml">suite/browser/urlbarBindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/urlbarBindings.xml">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/urlbarBindings.xml">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/urlbarBindings.xml">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/urlbarBindings.xml">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/browser/urlbarBindings.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/aboutSessionRestore.js">suite/common/aboutSessionRestore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/aboutSessionRestore.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/aboutSessionRestore.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/aboutSessionRestore.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/aboutSessionRestore.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/aboutSessionRestore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bindings/notification.xml">suite/common/bindings/notification.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bindings/notification.xml">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bindings/notification.xml">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bindings/notification.xml">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bindings/notification.xml">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bindings/notification.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/bookmarksManager.js">suite/common/bookmarks/bookmarksManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/bookmarksManager.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/bookmarksManager.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/bookmarksManager.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/bookmarksManager.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/bookmarksManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/browser-places.js">suite/common/bookmarks/browser-places.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/browser-places.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/browser-places.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/browser-places.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/browser-places.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/browser-places.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/editBookmarkOverlay.js">suite/common/bookmarks/editBookmarkOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/editBookmarkOverlay.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/editBookmarkOverlay.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/editBookmarkOverlay.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/editBookmarkOverlay.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/bookmarks/editBookmarkOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/progressDialog.js">suite/common/downloads/progressDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/progressDialog.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/progressDialog.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/progressDialog.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/progressDialog.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/progressDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul">suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul">suite/common/downloads/tests/chrome/test_delete_key_cancels.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul">suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_multi_select.xul">suite/common/downloads/tests/chrome/test_multi_select.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_multi_select.xul">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_multi_select.xul">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_multi_select.xul">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_multi_select.xul">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_multi_select.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul">suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/treeView.js">suite/common/downloads/treeView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/treeView.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/treeView.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/treeView.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/treeView.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/downloads/treeView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/history/treeView.js">suite/common/history/treeView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/history/treeView.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/history/treeView.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/history/treeView.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/history/treeView.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/history/treeView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/browserPlacesViews.js">suite/common/places/browserPlacesViews.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/browserPlacesViews.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/browserPlacesViews.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/browserPlacesViews.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/browserPlacesViews.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/browserPlacesViews.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/controller.js">suite/common/places/controller.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/controller.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/controller.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/controller.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/controller.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/controller.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_PUIU_makeTransaction.js">suite/common/places/tests/unit/test_PUIU_makeTransaction.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_PUIU_makeTransaction.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_PUIU_makeTransaction.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_PUIU_makeTransaction.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_PUIU_makeTransaction.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_PUIU_makeTransaction.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_clearHistory_shutdown.js">suite/common/places/tests/unit/test_clearHistory_shutdown.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_clearHistory_shutdown.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_clearHistory_shutdown.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_clearHistory_shutdown.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_clearHistory_shutdown.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/tests/unit/test_clearHistory_shutdown.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/treeView.js">suite/common/places/treeView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/treeView.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/treeView.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/treeView.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/treeView.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/places/treeView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/pref/pref-applications.js">suite/common/pref/pref-applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/pref/pref-applications.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/pref/pref-applications.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/pref/pref-applications.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/pref/pref-applications.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/pref/pref-applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/search/engineManager.js">suite/common/search/engineManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/search/engineManager.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/search/engineManager.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/search/engineManager.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/search/engineManager.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/search/engineManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sidebar/sidebarOverlay.js">suite/common/sidebar/sidebarOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sidebar/sidebarOverlay.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sidebar/sidebarOverlay.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sidebar/sidebarOverlay.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sidebar/sidebarOverlay.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sidebar/sidebarOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/src/nsSessionStore.js">suite/common/src/nsSessionStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/src/nsSessionStore.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/src/nsSessionStore.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/src/nsSessionStore.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/src/nsSessionStore.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/src/nsSessionStore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncSetup.js">suite/common/sync/syncSetup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncSetup.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncSetup.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncSetup.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncSetup.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncSetup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncUI.js">suite/common/sync/syncUI.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncUI.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncUI.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncUI.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncUI.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/sync/syncUI.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_345898.js">suite/common/tests/browser/browser_345898.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_345898.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_345898.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_345898.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_345898.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_345898.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_346337.js">suite/common/tests/browser/browser_346337.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_346337.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_346337.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_346337.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_346337.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_346337.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_350525.js">suite/common/tests/browser/browser_350525.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_350525.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_350525.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_350525.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_350525.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_350525.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_354894.js">suite/common/tests/browser/browser_354894.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_354894.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_354894.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_354894.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_354894.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_354894.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_408470.js">suite/common/tests/browser/browser_408470.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_408470.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_408470.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_408470.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_408470.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_408470.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_461634.js">suite/common/tests/browser/browser_461634.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_461634.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_461634.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_461634.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_461634.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_461634.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_form_restore_events.js">suite/common/tests/browser/browser_form_restore_events.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_form_restore_events.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_form_restore_events.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_form_restore_events.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_form_restore_events.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/browser_form_restore_events.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/head.js">suite/common/tests/browser/head.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/head.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/head.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/head.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/head.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/common/tests/browser/head.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/mailnews/mailWidgets.xml">suite/mailnews/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/mailnews/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/mailnews/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/mailnews/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/mailnews/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/mailnews/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/PlacesUIUtils.jsm">suite/modules/PlacesUIUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/PlacesUIUtils.jsm">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/PlacesUIUtils.jsm">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/PlacesUIUtils.jsm">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/PlacesUIUtils.jsm">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/PlacesUIUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/Sanitizer.jsm">suite/modules/Sanitizer.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/Sanitizer.jsm">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/Sanitizer.jsm">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/Sanitizer.jsm">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/Sanitizer.jsm">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/Sanitizer.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/WindowsJumpLists.jsm">suite/modules/WindowsJumpLists.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/WindowsJumpLists.jsm">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/WindowsJumpLists.jsm">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/WindowsJumpLists.jsm">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/WindowsJumpLists.jsm">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/modules/WindowsJumpLists.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/profile/migration/src/SuiteProfileMigrator.js">suite/profile/migration/src/SuiteProfileMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/profile/migration/src/SuiteProfileMigrator.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/profile/migration/src/SuiteProfileMigrator.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/profile/migration/src/SuiteProfileMigrator.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/profile/migration/src/SuiteProfileMigrator.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/profile/migration/src/SuiteProfileMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/src/smileApplication.js">suite/smile/src/smileApplication.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/src/smileApplication.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/src/smileApplication.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/src/smileApplication.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/src/smileApplication.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/src/smileApplication.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Bookmarks.js">suite/smile/test/browser_Bookmarks.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Bookmarks.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Bookmarks.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Bookmarks.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Bookmarks.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Bookmarks.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Browser.js">suite/smile/test/browser_Browser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Browser.js">file</a> |
<a href="/comm-central/annotate/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Browser.js">annotate</a> |
<a href="/comm-central/diff/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Browser.js">diff</a> |
<a href="/comm-central/comparison/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Browser.js">comparison</a> |
<a href="/comm-central/log/32e030ae725c9b365cc534cb55208ffcc54edb30/suite/smile/test/browser_Browser.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/browser/navigator.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/browser/navigator.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -389,17 +389,17 @@ nsBrowserAccess.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">                    .getInterface(nsIWebNavigation)</span>
<a href="#l1.5"></a><span id="l1.5">                    .loadURI(uri, loadflags, referrer, null, null);</span>
<a href="#l1.6"></a><span id="l1.6">           } catch (e) {}</span>
<a href="#l1.7"></a><span id="l1.7">         }</span>
<a href="#l1.8"></a><span id="l1.8">         return aOpener;</span>
<a href="#l1.9"></a><span id="l1.9">     }</span>
<a href="#l1.10"></a><span id="l1.10">   },</span>
<a href="#l1.11"></a><span id="l1.11">   isTabContentWindow: function isTabContentWindow(aWindow) {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    return gBrowser.browsers.some(function (browser) browser.contentWindow == aWindow);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    return gBrowser.browsers.some(browser =&gt; browser.contentWindow == aWindow);</span>
<a href="#l1.14"></a><span id="l1.14">   }</span>
<a href="#l1.15"></a><span id="l1.15"> }</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17"> function HandleAppCommandEvent(aEvent)</span>
<a href="#l1.18"></a><span id="l1.18"> {</span>
<a href="#l1.19"></a><span id="l1.19">   aEvent.stopPropagation();</span>
<a href="#l1.20"></a><span id="l1.20">   switch (aEvent.command) {</span>
<a href="#l1.21"></a><span id="l1.21">     case &quot;Back&quot;:</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -1070,17 +1070,17 @@ const BrowserSearch = {</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24">     var browser = getBrowser().getBrowserForDocument(targetDoc);</span>
<a href="#l1.25"></a><span id="l1.25">     // ignore search engines from subframes (see bug 479408)</span>
<a href="#l1.26"></a><span id="l1.26">     if (!browser)</span>
<a href="#l1.27"></a><span id="l1.27">       return;</span>
<a href="#l1.28"></a><span id="l1.28"> </span>
<a href="#l1.29"></a><span id="l1.29">     // Check to see whether we've already added an engine with this title</span>
<a href="#l1.30"></a><span id="l1.30">     if (browser.engines) {</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-      if (browser.engines.some(function (e) e.title == engine.title))</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+      if (browser.engines.some(e =&gt; e.title == engine.title))</span>
<a href="#l1.33"></a><span id="l1.33">         return;</span>
<a href="#l1.34"></a><span id="l1.34">     }</span>
<a href="#l1.35"></a><span id="l1.35"> </span>
<a href="#l1.36"></a><span id="l1.36">     // Append the URI and an appropriate title to the browser data.</span>
<a href="#l1.37"></a><span id="l1.37">     // Use documentURIObject in the check so that we do the right</span>
<a href="#l1.38"></a><span id="l1.38">     // thing with about:-style error pages.  Bug 453442</span>
<a href="#l1.39"></a><span id="l1.39">     var iconURL = null;</span>
<a href="#l1.40"></a><span id="l1.40">     var aURI = targetDoc.documentURIObject;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/tabbrowser.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/tabbrowser.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -2004,17 +2004,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">       &lt;property name=&quot;selectedBrowser&quot;</span>
<a href="#l2.5"></a><span id="l2.5">                 onget=&quot;return this.mCurrentBrowser;&quot;</span>
<a href="#l2.6"></a><span id="l2.6">                 readonly=&quot;true&quot;/&gt;</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">       &lt;property name=&quot;browsers&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.9"></a><span id="l2.9">         &lt;getter&gt;</span>
<a href="#l2.10"></a><span id="l2.10">           &lt;![CDATA[</span>
<a href="#l2.11"></a><span id="l2.11">             return this._browsers ||</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                   (this._browsers = Array.map(this.tabs, function (tab) tab.linkedBrowser));</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                   (this._browsers = Array.map(this.tabs, tab =&gt; tab.linkedBrowser));</span>
<a href="#l2.14"></a><span id="l2.14">           ]]&gt;</span>
<a href="#l2.15"></a><span id="l2.15">         &lt;/getter&gt;</span>
<a href="#l2.16"></a><span id="l2.16">       &lt;/property&gt;</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18">       &lt;!-- Drag and drop observer API --&gt;</span>
<a href="#l2.19"></a><span id="l2.19">       &lt;method name=&quot;_onDragStart&quot;&gt;</span>
<a href="#l2.20"></a><span id="l2.20">         &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l2.21"></a><span id="l2.21">         &lt;body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/browser/test/browser/browser_ctrlTab.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_ctrlTab.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -128,24 +128,27 @@ function test() {</span>
<a href="#l3.4"></a><span id="l3.4">     gBrowser.removeCurrentTab();</span>
<a href="#l3.5"></a><span id="l3.5">     assertTabs(1);</span>
<a href="#l3.6"></a><span id="l3.6">     finish();</span>
<a href="#l3.7"></a><span id="l3.7">   }</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">   /* private utility functions */</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  function pressCtrlTab(aShiftKey)</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  function pressCtrlTab(aShiftKey) {</span>
<a href="#l3.14"></a><span id="l3.14">     EventUtils.synthesizeKey(&quot;VK_TAB&quot;, { ctrlKey: true, shiftKey: !!aShiftKey });</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+  }</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-  function releaseCtrl()</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+  function releaseCtrl() {</span>
<a href="#l3.19"></a><span id="l3.19">     EventUtils.synthesizeKey(&quot;VK_CONTROL&quot;, { type: &quot;keyup&quot; });</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+  }</span>
<a href="#l3.21"></a><span id="l3.21"> </span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-  function isOpen()</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-    ctrlTab.panel.state == &quot;showing&quot; || ctrlTab.panel.state == &quot;open&quot;;</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+  function isOpen() {</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+    return ctrlTab.panel.state == &quot;showing&quot; || ctrlTab.panel.state == &quot;open&quot;;</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+  }</span>
<a href="#l3.27"></a><span id="l3.27"> </span>
<a href="#l3.28"></a><span id="l3.28">   function assertTabs(aTabs) {</span>
<a href="#l3.29"></a><span id="l3.29">     var tabs = gBrowser.tabs.length;</span>
<a href="#l3.30"></a><span id="l3.30">     if (tabs != aTabs) {</span>
<a href="#l3.31"></a><span id="l3.31">       while (gBrowser.tabs.length &gt; 1)</span>
<a href="#l3.32"></a><span id="l3.32">         gBrowser.removeCurrentTab();</span>
<a href="#l3.33"></a><span id="l3.33">       throw &quot;expected &quot; + aTabs + &quot; open tabs, got &quot; + tabs;</span>
<a href="#l3.34"></a><span id="l3.34">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/browser/test/browser/browser_page_style_menu.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_page_style_menu.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -27,17 +27,17 @@ function checkPageStyleMenu() {</span>
<a href="#l4.4"></a><span id="l4.4">   Array.forEach(content.document.getElementsByTagName(&quot;link&quot;), function (link) {</span>
<a href="#l4.5"></a><span id="l4.5">     var title = link.getAttribute(&quot;title&quot;);</span>
<a href="#l4.6"></a><span id="l4.6">     var rel = link.getAttribute(&quot;rel&quot;);</span>
<a href="#l4.7"></a><span id="l4.7">     var media = link.getAttribute(&quot;media&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">     var idstring = &quot;link &quot; + (title ? title : &quot;without title and&quot;) +</span>
<a href="#l4.9"></a><span id="l4.9">                    &quot; with rel=\&quot;&quot; + rel + &quot;\&quot;&quot; +</span>
<a href="#l4.10"></a><span id="l4.10">                    (media ? &quot; and media=\&quot;&quot; + media + &quot;\&quot;&quot; : &quot;&quot;);</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    var item = items.filter(function (item) item.getAttribute(&quot;label&quot;) == title);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    var item = items.filter(item =&gt; item.getAttribute(&quot;label&quot;) == title);</span>
<a href="#l4.14"></a><span id="l4.14">     var found = item.length == 1;</span>
<a href="#l4.15"></a><span id="l4.15">     var checked = found &amp;&amp; (item[0].getAttribute(&quot;checked&quot;) == &quot;true&quot;);</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17">     switch (link.getAttribute(&quot;data-state&quot;)) {</span>
<a href="#l4.18"></a><span id="l4.18">       case &quot;0&quot;:</span>
<a href="#l4.19"></a><span id="l4.19">         ok(!found, idstring + &quot; does not show up in page style menu&quot;);</span>
<a href="#l4.20"></a><span id="l4.20">         break;</span>
<a href="#l4.21"></a><span id="l4.21">       case &quot;0-todo&quot;:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/browser/test/browser/browser_pluginnotification.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_pluginnotification.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -255,17 +255,17 @@ function test9a() {</span>
<a href="#l5.4"></a><span id="l5.4">   var rect = doc.getAnonymousElementByAttribute(plugin2, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l5.5"></a><span id="l5.5">   ok(rect.width == 200, &quot;Test 9a, Plugin with id=&quot; + plugin2.id + &quot; overlay rect should have 200px width before being clicked&quot;);</span>
<a href="#l5.6"></a><span id="l5.6">   ok(rect.height == 200, &quot;Test 9a, Plugin with id=&quot; + plugin2.id + &quot; overlay rect should have 200px height before being clicked&quot;);</span>
<a href="#l5.7"></a><span id="l5.7">   var objLoadingContent = plugin2.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.8"></a><span id="l5.8">   ok(!objLoadingContent.activated, &quot;Test 9a, Plugin with id=&quot; + plugin2.id + &quot; should not be activated&quot;);</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">   EventUtils.synthesizeMouseAtCenter(plugin1, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.11"></a><span id="l5.11">   var objLoadingContent = plugin1.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.14"></a><span id="l5.14">   waitForCondition(condition, test9b, &quot;Test 9a, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.15"></a><span id="l5.15"> }</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17"> // Tests that activating one click-to-play plugin will activate only that plugin (part 2/3)</span>
<a href="#l5.18"></a><span id="l5.18"> function test9b() {</span>
<a href="#l5.19"></a><span id="l5.19">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l5.20"></a><span id="l5.20">   ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9b, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l5.21"></a><span id="l5.21">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 9b, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -286,17 +286,17 @@ function test9b() {</span>
<a href="#l5.23"></a><span id="l5.23">   var pluginRect2 = doc.getAnonymousElementByAttribute(plugin2, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l5.24"></a><span id="l5.24">   ok(pluginRect2.width != 0, &quot;Test 9b, Plugin with id=&quot; + plugin2.id + &quot; should not have click-to-play overlay with zero width&quot;);</span>
<a href="#l5.25"></a><span id="l5.25">   ok(pluginRect2.height != 0, &quot;Test 9b, Plugin with id=&quot; + plugin2.id + &quot; should not have click-to-play overlay with zero height&quot;);</span>
<a href="#l5.26"></a><span id="l5.26">   var objLoadingContent = plugin2.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.27"></a><span id="l5.27">   ok(!objLoadingContent.activated, &quot;Test 9b, Plugin with id=&quot; + plugin2.id + &quot; should not be activated&quot;);</span>
<a href="#l5.28"></a><span id="l5.28"> </span>
<a href="#l5.29"></a><span id="l5.29">   EventUtils.synthesizeMouseAtCenter(plugin2, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.30"></a><span id="l5.30">   var objLoadingContent = plugin2.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.33"></a><span id="l5.33">   waitForCondition(condition, test9c, &quot;Test 9b, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.34"></a><span id="l5.34"> }</span>
<a href="#l5.35"></a><span id="l5.35"> </span>
<a href="#l5.36"></a><span id="l5.36"> //</span>
<a href="#l5.37"></a><span id="l5.37"> // Tests that activating one click-to-play plugin will activate only that plugin (part 3/3)</span>
<a href="#l5.38"></a><span id="l5.38"> function test9c() {</span>
<a href="#l5.39"></a><span id="l5.39">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l5.40"></a><span id="l5.40">   ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9c, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineat">@@ -330,17 +330,17 @@ function test10a() {</span>
<a href="#l5.42"></a><span id="l5.42">   ok(!notificationBox._missingPlugins, &quot;Test 10a, Should not be a missing plugin list&quot;);</span>
<a href="#l5.43"></a><span id="l5.43">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.44"></a><span id="l5.44">   ok(popupNotification, &quot;Test 10a, Should have a click-to-play notification&quot;);</span>
<a href="#l5.45"></a><span id="l5.45">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l5.46"></a><span id="l5.46">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.47"></a><span id="l5.47">   ok(!objLoadingContent.activated, &quot;Test 10a, Plugin should not be activated&quot;);</span>
<a href="#l5.48"></a><span id="l5.48"> </span>
<a href="#l5.49"></a><span id="l5.49">   popupNotification.mainAction.callback();</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.52"></a><span id="l5.52">   waitForCondition(condition, test10b, &quot;Test 10a, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.53"></a><span id="l5.53"> }</span>
<a href="#l5.54"></a><span id="l5.54"> </span>
<a href="#l5.55"></a><span id="l5.55"> // Tests that activating a hidden click-to-play plugin through the notification works (part 2/2)</span>
<a href="#l5.56"></a><span id="l5.56"> function test10b() {</span>
<a href="#l5.57"></a><span id="l5.57">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l5.58"></a><span id="l5.58">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.59"></a><span id="l5.59">   ok(objLoadingContent.activated, &quot;Test 10b, Plugin should be activated&quot;);</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineat">@@ -363,17 +363,17 @@ function test11b() {</span>
<a href="#l5.61"></a><span id="l5.61"> </span>
<a href="#l5.62"></a><span id="l5.62">   Services.obs.addObserver(test11c, &quot;PopupNotifications-updateNotShowing&quot;, false);</span>
<a href="#l5.63"></a><span id="l5.63">   gTestBrowser.contentWindow.history.back();</span>
<a href="#l5.64"></a><span id="l5.64"> }</span>
<a href="#l5.65"></a><span id="l5.65"> </span>
<a href="#l5.66"></a><span id="l5.66"> // Tests that the going back will reshow the notification for click-to-play plugins (part 3/4)</span>
<a href="#l5.67"></a><span id="l5.67"> function test11c() {</span>
<a href="#l5.68"></a><span id="l5.68">   Services.obs.removeObserver(test11c, &quot;PopupNotifications-updateNotShowing&quot;, false);</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-  var condition = function() PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+  var condition = () =&gt; PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.71"></a><span id="l5.71">   waitForCondition(condition, test11d, &quot;Test 11c, waited too long for click-to-play-plugin notification&quot;);</span>
<a href="#l5.72"></a><span id="l5.72"> }</span>
<a href="#l5.73"></a><span id="l5.73"> </span>
<a href="#l5.74"></a><span id="l5.74"> // Tests that the going back will reshow the notification for click-to-play plugins (part 4/4)</span>
<a href="#l5.75"></a><span id="l5.75"> function test11d() {</span>
<a href="#l5.76"></a><span id="l5.76">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.77"></a><span id="l5.77">   ok(popupNotification, &quot;Test 11d, Should have a click-to-play notification&quot;);</span>
<a href="#l5.78"></a><span id="l5.78">   is(gClickToPlayPluginActualEvents, gClickToPlayPluginExpectedEvents,</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineat">@@ -388,17 +388,17 @@ function test12a() {</span>
<a href="#l5.80"></a><span id="l5.80">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.81"></a><span id="l5.81">   ok(popupNotification, &quot;Test 12a, Should have a click-to-play notification&quot;);</span>
<a href="#l5.82"></a><span id="l5.82">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l5.83"></a><span id="l5.83">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.84"></a><span id="l5.84">   ok(!objLoadingContent.activated, &quot;Test 12a, Plugin should not be activated&quot;);</span>
<a href="#l5.85"></a><span id="l5.85"> </span>
<a href="#l5.86"></a><span id="l5.86">   // Simulate clicking the &quot;Allow Always&quot; button.</span>
<a href="#l5.87"></a><span id="l5.87">   popupNotification.secondaryActions[0].callback();</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.90"></a><span id="l5.90">   waitForCondition(condition, test12b, &quot;Test 12a, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.91"></a><span id="l5.91"> }</span>
<a href="#l5.92"></a><span id="l5.92"> </span>
<a href="#l5.93"></a><span id="l5.93"> // Tests that the &quot;Always&quot; permission works for click-to-play plugins (part 2/3)</span>
<a href="#l5.94"></a><span id="l5.94"> function test12b() {</span>
<a href="#l5.95"></a><span id="l5.95">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.96"></a><span id="l5.96">   ok(!popupNotification, &quot;Test 12b, Should not have a click-to-play notification&quot;);</span>
<a href="#l5.97"></a><span id="l5.97">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineat">@@ -502,17 +502,17 @@ function test13d() {</span>
<a href="#l5.99"></a><span id="l5.99">   is(objLoadingContent.pluginFallbackType, Ci.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY, &quot;Test 13d, Test plugin should be disabled&quot;);</span>
<a href="#l5.100"></a><span id="l5.100"> </span>
<a href="#l5.101"></a><span id="l5.101">   var secondtestB = gTestBrowser.contentDocument.getElementById(&quot;secondtestB&quot;);</span>
<a href="#l5.102"></a><span id="l5.102">   var objLoadingContent = secondtestB.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.103"></a><span id="l5.103">   var overlay = gTestBrowser.contentDocument.getAnonymousElementByAttribute(secondtestB, &quot;anonid&quot;, &quot;main&quot;);</span>
<a href="#l5.104"></a><span id="l5.104">   ok(overlay.style.visibility != &quot;hidden&quot;, &quot;Test 13d, Test plugin should have visible overlay&quot;);</span>
<a href="#l5.105"></a><span id="l5.105">   ok(!objLoadingContent.activated, &quot;Test 13d, Second Test plugin (B) should not be activated&quot;);</span>
<a href="#l5.106"></a><span id="l5.106"> </span>
<a href="#l5.107"></a><span id="l5.107" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.109"></a><span id="l5.109">   // &quot;click&quot; &quot;Activate All Plugins&quot;</span>
<a href="#l5.110"></a><span id="l5.110">   popupNotification.mainAction.callback();</span>
<a href="#l5.111"></a><span id="l5.111">   waitForCondition(condition, test13e, &quot;Test 13d, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.112"></a><span id="l5.112"> }</span>
<a href="#l5.113"></a><span id="l5.113"> </span>
<a href="#l5.114"></a><span id="l5.114"> // Test that clicking &quot;Activate All Plugins&quot; won't activate plugins that</span>
<a href="#l5.115"></a><span id="l5.115"> // have previously been &quot;Deny Always&quot;-ed.</span>
<a href="#l5.116"></a><span id="l5.116"> function test13e() {</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineat">@@ -561,41 +561,41 @@ function test15() {</span>
<a href="#l5.118"></a><span id="l5.118"> }</span>
<a href="#l5.119"></a><span id="l5.119"> </span>
<a href="#l5.120"></a><span id="l5.120"> // Tests that a plugin dynamically added to a page after one plugin is clicked</span>
<a href="#l5.121"></a><span id="l5.121"> // to play (which removes the notification) gets its own notification (1/4)</span>
<a href="#l5.122"></a><span id="l5.122"> function test16a() {</span>
<a href="#l5.123"></a><span id="l5.123">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.124"></a><span id="l5.124">   ok(!popupNotification, &quot;Test 16a, Should not have a click-to-play notification&quot;);</span>
<a href="#l5.125"></a><span id="l5.125">   var plugin = gTestBrowser.contentWindow.addPlugin();</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineminus">-  var condition = function() PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+  var condition = () =&gt; PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.128"></a><span id="l5.128">   waitForCondition(condition, test16b, &quot;Test 16a, Waited too long for click-to-play-plugin notification&quot;);</span>
<a href="#l5.129"></a><span id="l5.129"> }</span>
<a href="#l5.130"></a><span id="l5.130"> </span>
<a href="#l5.131"></a><span id="l5.131"> // 2/4</span>
<a href="#l5.132"></a><span id="l5.132"> function test16b() {</span>
<a href="#l5.133"></a><span id="l5.133">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.134"></a><span id="l5.134">   ok(popupNotification, &quot;Test 16b, Should have a click-to-play notification&quot;);</span>
<a href="#l5.135"></a><span id="l5.135">   var plugin = gTestBrowser.contentDocument.getElementsByTagName(&quot;embed&quot;)[0];</span>
<a href="#l5.136"></a><span id="l5.136">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.137"></a><span id="l5.137">   ok(!objLoadingContent.activated, &quot;Test 16b, Plugin should not be activated&quot;);</span>
<a href="#l5.138"></a><span id="l5.138">   EventUtils.synthesizeMouseAtCenter(plugin, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.141"></a><span id="l5.141">   waitForCondition(condition, test16c, &quot;Test 16b, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.142"></a><span id="l5.142"> }</span>
<a href="#l5.143"></a><span id="l5.143"> </span>
<a href="#l5.144"></a><span id="l5.144"> // 3/4</span>
<a href="#l5.145"></a><span id="l5.145"> function test16c() {</span>
<a href="#l5.146"></a><span id="l5.146">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.147"></a><span id="l5.147">   ok(!popupNotification, &quot;Test 16c, Should not have a click-to-play notification&quot;);</span>
<a href="#l5.148"></a><span id="l5.148">   var plugin = gTestBrowser.contentDocument.getElementsByTagName(&quot;embed&quot;)[0];</span>
<a href="#l5.149"></a><span id="l5.149">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.150"></a><span id="l5.150">   ok(objLoadingContent.activated, &quot;Test 16c, Plugin should be activated&quot;);</span>
<a href="#l5.151"></a><span id="l5.151">   var plugin = gTestBrowser.contentWindow.addPlugin();</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineminus">-  var condition = function() PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineplus">+  var condition = () =&gt; PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.154"></a><span id="l5.154">   waitForCondition(condition, test16d, &quot;Test 16c, Waited too long for click-to-play-plugin notification&quot;);</span>
<a href="#l5.155"></a><span id="l5.155"> }</span>
<a href="#l5.156"></a><span id="l5.156"> </span>
<a href="#l5.157"></a><span id="l5.157"> // 4/4</span>
<a href="#l5.158"></a><span id="l5.158"> function test16d() {</span>
<a href="#l5.159"></a><span id="l5.159">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.160"></a><span id="l5.160">   ok(popupNotification, &quot;Test 16d, Should have a click-to-play notification&quot;);</span>
<a href="#l5.161"></a><span id="l5.161">   var plugin = gTestBrowser.contentDocument.getElementsByTagName(&quot;embed&quot;)[1];</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineat">@@ -686,17 +686,17 @@ function test18c() {</span>
<a href="#l5.163"></a><span id="l5.163">   ok(!objLoadingContent.activated, &quot;Test 18c, Plugin should not be activated&quot;);</span>
<a href="#l5.164"></a><span id="l5.164">   var overlay = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;main&quot;);</span>
<a href="#l5.165"></a><span id="l5.165">   ok(overlay.style.visibility != &quot;hidden&quot;, &quot;Test 18c, Plugin overlay should exist, not be hidden&quot;);</span>
<a href="#l5.166"></a><span id="l5.166">   var updateLink = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;checkForUpdatesLink&quot;);</span>
<a href="#l5.167"></a><span id="l5.167">   ok(updateLink.style.display != &quot;block&quot;, &quot;Test 18c, Plugin should not have an update link&quot;);</span>
<a href="#l5.168"></a><span id="l5.168"> </span>
<a href="#l5.169"></a><span id="l5.169">   // check that click &quot;Always allow&quot; works with blocklisted plugins</span>
<a href="#l5.170"></a><span id="l5.170">   clickToPlayNotification.secondaryActions[0].callback();</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.173"></a><span id="l5.173">   waitForCondition(condition, test18d, &quot;Test 18d, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.174"></a><span id="l5.174"> }</span>
<a href="#l5.175"></a><span id="l5.175"> </span>
<a href="#l5.176"></a><span id="l5.176"> // continue testing &quot;Always allow&quot;</span>
<a href="#l5.177"></a><span id="l5.177"> function test18d() {</span>
<a href="#l5.178"></a><span id="l5.178">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.179"></a><span id="l5.179">   ok(!popupNotification, &quot;Test 18d, Should not have a click-to-play notification&quot;);</span>
<a href="#l5.180"></a><span id="l5.180">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l5.181"></a><span id="l5.181" class="difflineat">@@ -760,17 +760,17 @@ function test18g() {</span>
<a href="#l5.182"></a><span id="l5.182"> function test19a() {</span>
<a href="#l5.183"></a><span id="l5.183">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.184"></a><span id="l5.184">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.185"></a><span id="l5.185">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.186"></a><span id="l5.186">   ok(!objLoadingContent.activated, &quot;Test 19a, Plugin should not be activated&quot;);</span>
<a href="#l5.187"></a><span id="l5.187"> </span>
<a href="#l5.188"></a><span id="l5.188">   var icon = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;icon&quot;);</span>
<a href="#l5.189"></a><span id="l5.189">   EventUtils.synthesizeMouseAtCenter(icon, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.192"></a><span id="l5.192">   waitForCondition(condition, test19b, &quot;Test 19a, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.193"></a><span id="l5.193"> }</span>
<a href="#l5.194"></a><span id="l5.194"> </span>
<a href="#l5.195"></a><span id="l5.195"> function test19b() {</span>
<a href="#l5.196"></a><span id="l5.196">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.197"></a><span id="l5.197">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.198"></a><span id="l5.198">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.199"></a><span id="l5.199">   ok(objLoadingContent.activated, &quot;Test 19b, Plugin should be activated&quot;);</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineat">@@ -782,17 +782,17 @@ function test19b() {</span>
<a href="#l5.201"></a><span id="l5.201"> function test19c() {</span>
<a href="#l5.202"></a><span id="l5.202">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.203"></a><span id="l5.203">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.204"></a><span id="l5.204">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.205"></a><span id="l5.205">   ok(!objLoadingContent.activated, &quot;Test 19c, Plugin should not be activated&quot;);</span>
<a href="#l5.206"></a><span id="l5.206"> </span>
<a href="#l5.207"></a><span id="l5.207">   var text = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;msg msgClickToPlay&quot;);</span>
<a href="#l5.208"></a><span id="l5.208">   EventUtils.synthesizeMouseAtCenter(text, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.209"></a><span id="l5.209" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.211"></a><span id="l5.211">   waitForCondition(condition, test19d, &quot;Test 19c, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.212"></a><span id="l5.212"> }</span>
<a href="#l5.213"></a><span id="l5.213"> </span>
<a href="#l5.214"></a><span id="l5.214"> function test19d() {</span>
<a href="#l5.215"></a><span id="l5.215">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.216"></a><span id="l5.216">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.217"></a><span id="l5.217">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.218"></a><span id="l5.218">   ok(objLoadingContent.activated, &quot;Test 19d, Plugin should be activated&quot;);</span>
<a href="#l5.219"></a><span id="l5.219" class="difflineat">@@ -804,17 +804,17 @@ function test19d() {</span>
<a href="#l5.220"></a><span id="l5.220"> // (just to be thorough)</span>
<a href="#l5.221"></a><span id="l5.221"> function test19e() {</span>
<a href="#l5.222"></a><span id="l5.222">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.223"></a><span id="l5.223">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.224"></a><span id="l5.224">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.225"></a><span id="l5.225">   ok(!objLoadingContent.activated, &quot;Test 19e, Plugin should not be activated&quot;);</span>
<a href="#l5.226"></a><span id="l5.226"> </span>
<a href="#l5.227"></a><span id="l5.227">   EventUtils.synthesizeMouse(plugin, 50, 50, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.228"></a><span id="l5.228" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.229"></a><span id="l5.229" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.230"></a><span id="l5.230">   waitForCondition(condition, test19f, &quot;Test 19e, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.231"></a><span id="l5.231"> }</span>
<a href="#l5.232"></a><span id="l5.232"> </span>
<a href="#l5.233"></a><span id="l5.233"> function test19f() {</span>
<a href="#l5.234"></a><span id="l5.234">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.235"></a><span id="l5.235">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.236"></a><span id="l5.236">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.237"></a><span id="l5.237">   ok(objLoadingContent.activated, &quot;Test 19f, Plugin should be activated&quot;);</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineat">@@ -854,17 +854,17 @@ function test20b() {</span>
<a href="#l5.239"></a><span id="l5.239">   var plugin = doc.getElementById(&quot;plugin&quot;);</span>
<a href="#l5.240"></a><span id="l5.240">   var pluginRect = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l5.241"></a><span id="l5.241">   ok(pluginRect.width == 200, &quot;Test 20b, plugin should have an overlay with 200px width&quot;);</span>
<a href="#l5.242"></a><span id="l5.242">   ok(pluginRect.height == 200, &quot;Test 20b, plugin should have an overlay with 200px height&quot;);</span>
<a href="#l5.243"></a><span id="l5.243">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.244"></a><span id="l5.244">   ok(!objLoadingContent.activated, &quot;Test 20b, plugin should not be activated&quot;);</span>
<a href="#l5.245"></a><span id="l5.245"> </span>
<a href="#l5.246"></a><span id="l5.246">   EventUtils.synthesizeMouseAtCenter(plugin, {}, gTestBrowser.contentWindow);</span>
<a href="#l5.247"></a><span id="l5.247" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.248"></a><span id="l5.248" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.249"></a><span id="l5.249">   waitForCondition(condition, test20c, &quot;Test 20b, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.250"></a><span id="l5.250"> }</span>
<a href="#l5.251"></a><span id="l5.251"> </span>
<a href="#l5.252"></a><span id="l5.252"> function test20c() {</span>
<a href="#l5.253"></a><span id="l5.253">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.254"></a><span id="l5.254">   var plugin = doc.getElementById(&quot;plugin&quot;);</span>
<a href="#l5.255"></a><span id="l5.255">   var pluginRect = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l5.256"></a><span id="l5.256">   ok(pluginRect.width == 0, &quot;Test 20c, plugin should have click-to-play overlay with zero width&quot;);</span>
<a href="#l5.257"></a><span id="l5.257" class="difflineat">@@ -923,17 +923,17 @@ function test21b(type) {</span>
<a href="#l5.258"></a><span id="l5.258">   ok(centerItem, &quot;Test 21b, found center item for the Test plugin&quot;);</span>
<a href="#l5.259"></a><span id="l5.259"> </span>
<a href="#l5.260"></a><span id="l5.260">   // &quot;click&quot; the button to activate the Test plugin</span>
<a href="#l5.261"></a><span id="l5.261">   centerItem.runCallback.apply(centerItem);</span>
<a href="#l5.262"></a><span id="l5.262"> </span>
<a href="#l5.263"></a><span id="l5.263">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.264"></a><span id="l5.264">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l5.265"></a><span id="l5.265">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.266"></a><span id="l5.266" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.267"></a><span id="l5.267" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.268"></a><span id="l5.268">   waitForCondition(condition, test21c, &quot;Test 21b, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.269"></a><span id="l5.269"> }</span>
<a href="#l5.270"></a><span id="l5.270"> </span>
<a href="#l5.271"></a><span id="l5.271"> function test21c() {</span>
<a href="#l5.272"></a><span id="l5.272">   var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.273"></a><span id="l5.273">   ok(notification, &quot;Test 21c, Should have a click-to-play notification&quot;);</span>
<a href="#l5.274"></a><span id="l5.274">   ok(notification.options.centerActions.length == 1, &quot;Test 21c, Should have one type of plugin in the notification&quot;);</span>
<a href="#l5.275"></a><span id="l5.275"> </span>
<a href="#l5.276"></a><span id="l5.276" class="difflineat">@@ -986,17 +986,17 @@ function test21d(type) {</span>
<a href="#l5.277"></a><span id="l5.277">   ok(centerItem, &quot;Test 21d, found center item for the Second Test plugin&quot;);</span>
<a href="#l5.278"></a><span id="l5.278"> </span>
<a href="#l5.279"></a><span id="l5.279">   // &quot;click&quot; the button to activate the Second Test plugins</span>
<a href="#l5.280"></a><span id="l5.280">   centerItem.runCallback.apply(centerItem);</span>
<a href="#l5.281"></a><span id="l5.281"> </span>
<a href="#l5.282"></a><span id="l5.282">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l5.283"></a><span id="l5.283">   var plugin = doc.getElementById(&quot;secondtestA&quot;);</span>
<a href="#l5.284"></a><span id="l5.284">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l5.285"></a><span id="l5.285" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l5.286"></a><span id="l5.286" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l5.287"></a><span id="l5.287">   waitForCondition(condition, test21e, &quot;Test 21d, Waited too long for plugin to activate&quot;);</span>
<a href="#l5.288"></a><span id="l5.288"> }</span>
<a href="#l5.289"></a><span id="l5.289"> </span>
<a href="#l5.290"></a><span id="l5.290"> function test21e() {</span>
<a href="#l5.291"></a><span id="l5.291">   var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l5.292"></a><span id="l5.292">   ok(!notification, &quot;Test 21e, Should not have a click-to-play notification&quot;);</span>
<a href="#l5.293"></a><span id="l5.293"> </span>
<a href="#l5.294"></a><span id="l5.294">   var doc = gTestBrowser.contentDocument;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/browser/test/browser/browser_pluginplaypreview.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_pluginplaypreview.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -209,17 +209,17 @@ function test1a() {</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">   var rect = iframe.getBoundingClientRect();</span>
<a href="#l6.6"></a><span id="l6.6">   ok(rect.width == 200, &quot;Test 1a, Plugin with id=&quot; + plugin.id + &quot; overlay rect should have 200px width before being replaced by actual plugin&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">   ok(rect.height == 200, &quot;Test 1a, Plugin with id=&quot; + plugin.id + &quot; overlay rect should have 200px height before being replaced by actual plugin&quot;);</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9">   var e = overlay.ownerDocument.createEvent(&quot;CustomEvent&quot;);</span>
<a href="#l6.10"></a><span id="l6.10">   e.initCustomEvent(&quot;MozPlayPlugin&quot;, true, true, null);</span>
<a href="#l6.11"></a><span id="l6.11">   overlay.dispatchEvent(e);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l6.14"></a><span id="l6.14">   waitForCondition(condition, test1b, &quot;Test 1a, Waited too long for plugin to stop play preview&quot;);</span>
<a href="#l6.15"></a><span id="l6.15"> }</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17"> // Tests that activating via MozPlayPlugin through the notification works (part 2/2)</span>
<a href="#l6.18"></a><span id="l6.18"> function test1b() {</span>
<a href="#l6.19"></a><span id="l6.19">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l6.20"></a><span id="l6.20">   var objLoadingContent = plugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l6.21"></a><span id="l6.21">   ok(objLoadingContent.activated, &quot;Test 1b, Plugin should be activated&quot;);</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -265,17 +265,17 @@ function test4a() {</span>
<a href="#l6.23"></a><span id="l6.23">   ok(!objLoadingContent.activated, &quot;Test 4a, Plugin should not be activated&quot;);</span>
<a href="#l6.24"></a><span id="l6.24"> </span>
<a href="#l6.25"></a><span id="l6.25">   var overlay = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;previewPluginContent&quot;);</span>
<a href="#l6.26"></a><span id="l6.26">   ok(overlay, &quot;Test 4a, the overlay div is expected&quot;);</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28">   var e = overlay.ownerDocument.createEvent(&quot;CustomEvent&quot;);</span>
<a href="#l6.29"></a><span id="l6.29">   e.initCustomEvent(&quot;MozPlayPlugin&quot;, true, true, true);</span>
<a href="#l6.30"></a><span id="l6.30">   overlay.dispatchEvent(e);</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-  var condition = function() objLoadingContent.pluginFallbackType == Components.interfaces.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  var condition = () =&gt; objLoadingContent.pluginFallbackType == Components.interfaces.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY;</span>
<a href="#l6.33"></a><span id="l6.33">   waitForCondition(condition, test4b, &quot;Test 4a, Waited too long for plugin to stop play preview&quot;);</span>
<a href="#l6.34"></a><span id="l6.34"> }</span>
<a href="#l6.35"></a><span id="l6.35"> </span>
<a href="#l6.36"></a><span id="l6.36"> function test4b() {</span>
<a href="#l6.37"></a><span id="l6.37">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l6.38"></a><span id="l6.38">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l6.39"></a><span id="l6.39">   var objLoadingContent = plugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l6.40"></a><span id="l6.40">   ok(objLoadingContent.pluginFallbackType != Components.interfaces.nsIObjectLoadingContent.PLUGIN_PLAY_PREVIEW, &quot;Test 4b, plugin fallback type should not be PLUGIN_PLAY_PREVIEW&quot;);</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineat">@@ -293,17 +293,17 @@ function test5a() {</span>
<a href="#l6.42"></a><span id="l6.42">   ok(!objLoadingContent.activated, &quot;Test 5a, Plugin should not be activated&quot;);</span>
<a href="#l6.43"></a><span id="l6.43"> </span>
<a href="#l6.44"></a><span id="l6.44">   var overlay = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;previewPluginContent&quot;);</span>
<a href="#l6.45"></a><span id="l6.45">   ok(overlay, &quot;Test 5a, the overlay div is expected&quot;);</span>
<a href="#l6.46"></a><span id="l6.46"> </span>
<a href="#l6.47"></a><span id="l6.47">   var e = overlay.ownerDocument.createEvent(&quot;CustomEvent&quot;);</span>
<a href="#l6.48"></a><span id="l6.48">   e.initCustomEvent(&quot;MozPlayPlugin&quot;, true, true, false);</span>
<a href="#l6.49"></a><span id="l6.49">   overlay.dispatchEvent(e);</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-  var condition = function() objLoadingContent.activated;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+  var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l6.52"></a><span id="l6.52">   waitForCondition(condition, test5b, &quot;Test 5a, Waited too long for plugin to stop play preview&quot;);</span>
<a href="#l6.53"></a><span id="l6.53"> }</span>
<a href="#l6.54"></a><span id="l6.54"> </span>
<a href="#l6.55"></a><span id="l6.55"> function test5b() {</span>
<a href="#l6.56"></a><span id="l6.56">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l6.57"></a><span id="l6.57">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l6.58"></a><span id="l6.58">   var objLoadingContent = plugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l6.59"></a><span id="l6.59">   ok(objLoadingContent.activated, &quot;Test 5b, Plugin should be activated&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_privatebrowsing_protocolhandler.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -37,17 +37,17 @@ function test() {</span>
<a href="#l7.4"></a><span id="l7.4">   }</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6">   function testOnWindow(aOptions, aCallback) {</span>
<a href="#l7.7"></a><span id="l7.7">     whenNewWindowLoaded(aOptions, function(aWin) {</span>
<a href="#l7.8"></a><span id="l7.8">       windowsToClose.push(aWin);</span>
<a href="#l7.9"></a><span id="l7.9">       // execute should only be called when need, like when you are opening</span>
<a href="#l7.10"></a><span id="l7.10">       // web pages on the test. If calling executeSoon() is not necesary, then</span>
<a href="#l7.11"></a><span id="l7.11">       // call whenNewWindowLoaded() instead of testOnWindow() on your test.</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      executeSoon(function() aCallback(aWin));</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+      executeSoon(() =&gt; aCallback(aWin));</span>
<a href="#l7.14"></a><span id="l7.14">     });</span>
<a href="#l7.15"></a><span id="l7.15">   };</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17">    // this function is called after calling finish() on the test.</span>
<a href="#l7.18"></a><span id="l7.18">   registerCleanupFunction(function() {</span>
<a href="#l7.19"></a><span id="l7.19">     windowsToClose.forEach(function(aWin) {</span>
<a href="#l7.20"></a><span id="l7.20">       aWin.close();</span>
<a href="#l7.21"></a><span id="l7.21">     });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/suite/browser/urlbarBindings.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/suite/browser/urlbarBindings.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -245,17 +245,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">               try {</span>
<a href="#l8.5"></a><span id="l8.5">                 uri = makeURI(val);</span>
<a href="#l8.6"></a><span id="l8.6">               } catch (e) {}</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">               if (uri &amp;&amp; !uri.schemeIs(&quot;javascript&quot;) &amp;&amp; !uri.schemeIs(&quot;data&quot;)) {</span>
<a href="#l8.9"></a><span id="l8.9">                 val = uri.spec;</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11">                 // Parentheses are known to confuse third-party applications (bug 458565).</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-                val = val.replace(/[()]/g, function (c) escape(c));</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+                val = val.replace(/[()]/g, c =&gt; escape(c));</span>
<a href="#l8.14"></a><span id="l8.14">               }</span>
<a href="#l8.15"></a><span id="l8.15">             }</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17">             return val;</span>
<a href="#l8.18"></a><span id="l8.18">           ]]&gt;</span>
<a href="#l8.19"></a><span id="l8.19">         &lt;/body&gt;</span>
<a href="#l8.20"></a><span id="l8.20">       &lt;/method&gt;</span>
<a href="#l8.21"></a><span id="l8.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/common/aboutSessionRestore.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/common/aboutSessionRestore.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -84,17 +84,17 @@ function restoreSession() {</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5">   // remove all unselected tabs from the state before restoring it</span>
<a href="#l9.6"></a><span id="l9.6">   var ix = gStateObject.windows.length - 1;</span>
<a href="#l9.7"></a><span id="l9.7">   for (var t = gTreeData.length - 1; t &gt;= 0; t--) {</span>
<a href="#l9.8"></a><span id="l9.8">     if (treeView.isContainer(t)) {</span>
<a href="#l9.9"></a><span id="l9.9">       if (gTreeData[t].checked === 0)</span>
<a href="#l9.10"></a><span id="l9.10">         // this window will be restored partially</span>
<a href="#l9.11"></a><span id="l9.11">         gStateObject.windows[ix].tabs =</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-          gStateObject.windows[ix].tabs.filter(function(aTabData, aIx)</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+          gStateObject.windows[ix].tabs.filter((aTabData, aIx) =&gt;</span>
<a href="#l9.14"></a><span id="l9.14">                                                  gTreeData[t].tabs[aIx].checked);</span>
<a href="#l9.15"></a><span id="l9.15">       else if (!gTreeData[t].checked)</span>
<a href="#l9.16"></a><span id="l9.16">         // this window won't be restored at all</span>
<a href="#l9.17"></a><span id="l9.17">         gStateObject.windows.splice(ix, 1);</span>
<a href="#l9.18"></a><span id="l9.18">       ix--;</span>
<a href="#l9.19"></a><span id="l9.19">     }</span>
<a href="#l9.20"></a><span id="l9.20">   }</span>
<a href="#l9.21"></a><span id="l9.21">   var stateString = JSON.stringify(gStateObject);</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -165,17 +165,19 @@ function getBrowserWindow() {</span>
<a href="#l9.23"></a><span id="l9.23">                .QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow);</span>
<a href="#l9.24"></a><span id="l9.24"> }</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26"> function toggleRowChecked(aIx) {</span>
<a href="#l9.27"></a><span id="l9.27">   var item = gTreeData[aIx];</span>
<a href="#l9.28"></a><span id="l9.28">   item.checked = !item.checked;</span>
<a href="#l9.29"></a><span id="l9.29">   treeView.treeBox.invalidateRow(aIx);</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  function isChecked(aItem) aItem.checked;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  function isChecked(aItem) {</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+    return aItem.checked;</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+  }</span>
<a href="#l9.35"></a><span id="l9.35"> </span>
<a href="#l9.36"></a><span id="l9.36">   if (treeView.isContainer(aIx)) {</span>
<a href="#l9.37"></a><span id="l9.37">     // (un)check all tabs of this window as well</span>
<a href="#l9.38"></a><span id="l9.38">     for (var tab of item.tabs) {</span>
<a href="#l9.39"></a><span id="l9.39">       tab.checked = item.checked;</span>
<a href="#l9.40"></a><span id="l9.40">       treeView.treeBox.invalidateRow(gTreeData.indexOf(tab));</span>
<a href="#l9.41"></a><span id="l9.41">     }</span>
<a href="#l9.42"></a><span id="l9.42">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/suite/common/bindings/notification.xml</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/suite/common/bindings/notification.xml</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1776,17 +1776,17 @@</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5">             var notificationName = &quot;addon-install-complete&quot;</span>
<a href="#l10.6"></a><span id="l10.6">             var addonNotification = this.getNotificationWithValue(notificationName);</span>
<a href="#l10.7"></a><span id="l10.7">             if (addonNotification)</span>
<a href="#l10.8"></a><span id="l10.8">               this.removeNotification(addonNotification);</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">             var buttons = [];</span>
<a href="#l10.11"></a><span id="l10.11">             var messageString;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-            if (installInfo.installs.some(function(install)</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+            if (installInfo.installs.some(install =&gt;</span>
<a href="#l10.14"></a><span id="l10.14">                   install.addon.pendingOperations &amp;</span>
<a href="#l10.15"></a><span id="l10.15">                   tmp.AddonManager.PENDING_INSTALL)) {</span>
<a href="#l10.16"></a><span id="l10.16">               messageString = this._stringBundle.GetStringFromName(&quot;addonsInstalledNeedsRestart&quot;);</span>
<a href="#l10.17"></a><span id="l10.17">               buttons.push({</span>
<a href="#l10.18"></a><span id="l10.18">                 label: this._stringBundle.GetStringFromName(&quot;addonInstallRestartButton&quot;),</span>
<a href="#l10.19"></a><span id="l10.19">                 accessKey: this._stringBundle.GetStringFromName(&quot;addonInstallRestartButton.accesskey&quot;),</span>
<a href="#l10.20"></a><span id="l10.20">                 callback: function () {</span>
<a href="#l10.21"></a><span id="l10.21">                   Application.restart();</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -2986,17 +2986,17 @@</span>
<a href="#l10.23"></a><span id="l10.23">                 label: this._stringBundle.GetStringFromName(&quot;addonInstallManageButton&quot;),</span>
<a href="#l10.24"></a><span id="l10.24">                 accessKey: this._stringBundle.GetStringFromName(&quot;addonInstallManageButton.accesskey&quot;),</span>
<a href="#l10.25"></a><span id="l10.25">                 callback: function() {</span>
<a href="#l10.26"></a><span id="l10.26">                   window.toEM(&quot;addons://list/extension&quot;);</span>
<a href="#l10.27"></a><span id="l10.27">                 }</span>
<a href="#l10.28"></a><span id="l10.28">               };</span>
<a href="#l10.29"></a><span id="l10.29">             }</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-            if (installInfo.installs.some(function(install)</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+            if (installInfo.installs.some(install =&gt;</span>
<a href="#l10.33"></a><span id="l10.33">                   install.addon.pendingOperations &amp;</span>
<a href="#l10.34"></a><span id="l10.34">                   tmp.AddonManager.PENDING_INSTALL)) {</span>
<a href="#l10.35"></a><span id="l10.35">               messageString = this._stringBundle.GetStringFromName(&quot;addonsInstalledNeedsRestart&quot;);</span>
<a href="#l10.36"></a><span id="l10.36">               if (mainAction)</span>
<a href="#l10.37"></a><span id="l10.37">                 secondaryActions = [mainAction];</span>
<a href="#l10.38"></a><span id="l10.38">               mainAction = {</span>
<a href="#l10.39"></a><span id="l10.39">                 label: this._stringBundle.GetStringFromName(&quot;addonInstallRestartButton&quot;),</span>
<a href="#l10.40"></a><span id="l10.40">                 accessKey: this._stringBundle.GetStringFromName(&quot;addonInstallRestartButton.accesskey&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/suite/common/bookmarks/bookmarksManager.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/suite/common/bookmarks/bookmarksManager.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -512,17 +512,17 @@ var PlacesOrganizer = {</span>
<a href="#l11.4"></a><span id="l11.4">       infoBox.removeAttribute(&quot;minimal&quot;);</span>
<a href="#l11.5"></a><span id="l11.5">       infoBoxExpanderWrapper.hidden = true;</span>
<a href="#l11.6"></a><span id="l11.6">     }</span>
<a href="#l11.7"></a><span id="l11.7">     else {</span>
<a href="#l11.8"></a><span id="l11.8">       if (infoBox.getAttribute(&quot;wasminimal&quot;) == &quot;true&quot;)</span>
<a href="#l11.9"></a><span id="l11.9">         infoBox.setAttribute(&quot;minimal&quot;, &quot;true&quot;);</span>
<a href="#l11.10"></a><span id="l11.10">       infoBox.removeAttribute(&quot;wasminimal&quot;);</span>
<a href="#l11.11"></a><span id="l11.11">       infoBoxExpanderWrapper.hidden =</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-        this._additionalInfoFields.every(function (id)</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+        this._additionalInfoFields.every(id =&gt;</span>
<a href="#l11.14"></a><span id="l11.14">           document.getElementById(id).collapsed);</span>
<a href="#l11.15"></a><span id="l11.15">     }</span>
<a href="#l11.16"></a><span id="l11.16">     additionalInfoBroadcaster.hidden = infoBox.getAttribute(&quot;minimal&quot;) == &quot;true&quot;;</span>
<a href="#l11.17"></a><span id="l11.17">   },</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19">   // NOT YET USED</span>
<a href="#l11.20"></a><span id="l11.20">   updateThumbnailProportions: function PO_updateThumbnailProportions() {</span>
<a href="#l11.21"></a><span id="l11.21">     var previewBox = document.getElementById(&quot;previewBox&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/common/bookmarks/browser-places.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/common/bookmarks/browser-places.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -22,17 +22,17 @@ var StarUI = {</span>
<a href="#l12.4"></a><span id="l12.4">     element.addEventListener(&quot;keypress&quot;, this, false);</span>
<a href="#l12.5"></a><span id="l12.5">     return this.panel = element;</span>
<a href="#l12.6"></a><span id="l12.6">   },</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8">   // Array of command elements to disable when the panel is opened.</span>
<a href="#l12.9"></a><span id="l12.9">   get _blockedCommands() {</span>
<a href="#l12.10"></a><span id="l12.10">     delete this._blockedCommands;</span>
<a href="#l12.11"></a><span id="l12.11">     return this._blockedCommands =</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-      [&quot;cmd_close&quot;, &quot;cmd_closeWindow&quot;].map(function (id) this._element(id), this);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+      [&quot;cmd_close&quot;, &quot;cmd_closeWindow&quot;].map(id =&gt; this._element(id));</span>
<a href="#l12.14"></a><span id="l12.14">   },</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16">   _blockCommands: function SU__blockCommands() {</span>
<a href="#l12.17"></a><span id="l12.17">     this._blockedCommands.forEach(function (elt) {</span>
<a href="#l12.18"></a><span id="l12.18">       // make sure not to permanently disable this item (see bug 409155)</span>
<a href="#l12.19"></a><span id="l12.19">       if (elt.hasAttribute(&quot;wasDisabled&quot;))</span>
<a href="#l12.20"></a><span id="l12.20">         return;</span>
<a href="#l12.21"></a><span id="l12.21">       if (elt.getAttribute(&quot;disabled&quot;) == &quot;true&quot;) {</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -731,17 +731,17 @@ var PlacesStarButton = {</span>
<a href="#l12.23"></a><span id="l12.23">         Components.utils.reportError(&quot;PlacesStarButton did not receive current URI&quot;);</span>
<a href="#l12.24"></a><span id="l12.24">         return;</span>
<a href="#l12.25"></a><span id="l12.25">       }</span>
<a href="#l12.26"></a><span id="l12.26"> </span>
<a href="#l12.27"></a><span id="l12.27">       // It's possible that onItemAdded gets called before the async statement</span>
<a href="#l12.28"></a><span id="l12.28">       // calls back.  For such an edge case, retain all unique entries from both</span>
<a href="#l12.29"></a><span id="l12.29">       // arrays.</span>
<a href="#l12.30"></a><span id="l12.30">       this._itemIds = this._itemIds.filter(</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-        function (id) aItemIds.indexOf(id) == -1</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+        id =&gt; aItemIds.indexOf(id) == -1</span>
<a href="#l12.33"></a><span id="l12.33">       ).concat(aItemIds);</span>
<a href="#l12.34"></a><span id="l12.34">       this._updateStateInternal();</span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36">       // Start observing bookmarks if needed.</span>
<a href="#l12.37"></a><span id="l12.37">       if (!this._hasBookmarksObserver) {</span>
<a href="#l12.38"></a><span id="l12.38">         try {</span>
<a href="#l12.39"></a><span id="l12.39">           PlacesUtils.bookmarks.addObserver(this, false);</span>
<a href="#l12.40"></a><span id="l12.40">           this._hasBookmarksObserver = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/suite/common/bookmarks/editBookmarkOverlay.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/suite/common/bookmarks/editBookmarkOverlay.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -211,19 +211,19 @@ var gEditItemOverlay = {</span>
<a href="#l13.4"></a><span id="l13.4">    * Finds tags that are in common among this._tags entries that track tags</span>
<a href="#l13.5"></a><span id="l13.5">    * for each selected uri.</span>
<a href="#l13.6"></a><span id="l13.6">    * The tags arrays should be kept up-to-date for this to work properly.</span>
<a href="#l13.7"></a><span id="l13.7">    *</span>
<a href="#l13.8"></a><span id="l13.8">    * @return array of common tags for the selected uris.</span>
<a href="#l13.9"></a><span id="l13.9">    */</span>
<a href="#l13.10"></a><span id="l13.10">   _getCommonTags: function() {</span>
<a href="#l13.11"></a><span id="l13.11">     return this._tags[0].filter(</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      function (aTag) this._tags.every(</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-        function (aTags) aTags.indexOf(aTag) != -1</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-      ), this</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+      aTag =&gt; this._tags.every(</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+        aTags =&gt; aTags.indexOf(aTag) != -1</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+      )</span>
<a href="#l13.18"></a><span id="l13.18">     );</span>
<a href="#l13.19"></a><span id="l13.19">   },</span>
<a href="#l13.20"></a><span id="l13.20"> </span>
<a href="#l13.21"></a><span id="l13.21">   _initTextField: function(aTextFieldId, aValue, aReadOnly) {</span>
<a href="#l13.22"></a><span id="l13.22">     var field = this._element(aTextFieldId);</span>
<a href="#l13.23"></a><span id="l13.23">     field.readOnly = aReadOnly !== undefined ? aReadOnly : this._readOnly;</span>
<a href="#l13.24"></a><span id="l13.24"> </span>
<a href="#l13.25"></a><span id="l13.25">     if (field.value != aValue) {</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineat">@@ -643,17 +643,17 @@ var gEditItemOverlay = {</span>
<a href="#l13.27"></a><span id="l13.27">     if (aEvent.target.id == &quot;editBMPanel_chooseFolderMenuItem&quot;) {</span>
<a href="#l13.28"></a><span id="l13.28">       // reset the selection back to where it was and expand the tree</span>
<a href="#l13.29"></a><span id="l13.29">       // (this menu-item is hidden when the tree is already visible</span>
<a href="#l13.30"></a><span id="l13.30">       var container = PlacesUtils.bookmarks.getFolderIdForItem(this._itemId);</span>
<a href="#l13.31"></a><span id="l13.31">       var item = this._getFolderMenuItem(container);</span>
<a href="#l13.32"></a><span id="l13.32">       this._folderMenuList.selectedItem = item;</span>
<a href="#l13.33"></a><span id="l13.33">       // XXXmano HACK: setTimeout 100, otherwise focus goes back to the</span>
<a href="#l13.34"></a><span id="l13.34">       // menulist right away</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-      setTimeout(function(self) self.toggleFolderTreeVisibility(), 100, this);</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+      setTimeout(() =&gt; this.toggleFolderTreeVisibility(), 100);</span>
<a href="#l13.37"></a><span id="l13.37">       return;</span>
<a href="#l13.38"></a><span id="l13.38">     }</span>
<a href="#l13.39"></a><span id="l13.39"> </span>
<a href="#l13.40"></a><span id="l13.40">     // Move the item</span>
<a href="#l13.41"></a><span id="l13.41">     var container = this._getFolderIdFromMenuList();</span>
<a href="#l13.42"></a><span id="l13.42">     if (PlacesUtils.bookmarks.getFolderIdForItem(this._itemId) != container) {</span>
<a href="#l13.43"></a><span id="l13.43">       var txn = new PlacesMoveItemTransaction(this._itemId,</span>
<a href="#l13.44"></a><span id="l13.44">                                               container,</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineat">@@ -787,17 +787,17 @@ var gEditItemOverlay = {</span>
<a href="#l13.46"></a><span id="l13.46">    * Splits &quot;tagsField&quot; element value, returning an array of valid tag strings.</span>
<a href="#l13.47"></a><span id="l13.47">    *</span>
<a href="#l13.48"></a><span id="l13.48">    * @return Array of tag strings found in the field value.</span>
<a href="#l13.49"></a><span id="l13.49">    */</span>
<a href="#l13.50"></a><span id="l13.50">   _getTagsArrayFromTagField: function EIO__getTagsArrayFromTagField() {</span>
<a href="#l13.51"></a><span id="l13.51">     let tags = this._element(&quot;tagsField&quot;).value;</span>
<a href="#l13.52"></a><span id="l13.52">     return tags.trim()</span>
<a href="#l13.53"></a><span id="l13.53">                .split(/\s*,\s*/) // Split on commas and remove spaces.</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineminus">-               .filter(function (tag) tag.length &gt; 0); // Kill empty tags.</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineplus">+               .filter(tag =&gt; tag.length &gt; 0); // Kill empty tags.</span>
<a href="#l13.56"></a><span id="l13.56">   },</span>
<a href="#l13.57"></a><span id="l13.57"> </span>
<a href="#l13.58"></a><span id="l13.58">   newFolder: function EIO_newFolder() {</span>
<a href="#l13.59"></a><span id="l13.59">     var ip = this._folderTree.insertionPoint;</span>
<a href="#l13.60"></a><span id="l13.60"> </span>
<a href="#l13.61"></a><span id="l13.61">     // default to the bookmarks menu folder</span>
<a href="#l13.62"></a><span id="l13.62">     if (!ip || ip.itemId == PlacesUIUtils.allBookmarksFolderId) {</span>
<a href="#l13.63"></a><span id="l13.63">         ip = new InsertionPoint(PlacesUtils.bookmarksMenuFolderId,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/suite/common/downloads/progressDialog.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/suite/common/downloads/progressDialog.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -86,17 +86,17 @@ function progressStartup() {</span>
<a href="#l14.4"></a><span id="l14.4">   gDownloadListener = new DlProgressListener();</span>
<a href="#l14.5"></a><span id="l14.5">   gDownloadManager.addPrivacyAwareListener(gDownloadListener);</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">   updateDownload();</span>
<a href="#l14.8"></a><span id="l14.8">   updateButtons();</span>
<a href="#l14.9"></a><span id="l14.9">   window.updateCommands(&quot;dlstate-change&quot;);</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">   // Send a notification that we finished</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  setTimeout(function()</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  setTimeout(() =&gt;</span>
<a href="#l14.14"></a><span id="l14.14">     Services.obs.notifyObservers(window, &quot;download-manager-ui-done&quot;, null), 0);</span>
<a href="#l14.15"></a><span id="l14.15"> }</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17"> function progressShutdown() {</span>
<a href="#l14.18"></a><span id="l14.18">   gDownloadManager.removeListener(gDownloadListener);</span>
<a href="#l14.19"></a><span id="l14.19">   window.controllers.removeController(ProgressDlgController);</span>
<a href="#l14.20"></a><span id="l14.20">   if (!gCloseWhenDone.hidden)</span>
<a href="#l14.21"></a><span id="l14.21">     Services.prefs.setBoolPref(&quot;browser.download.progress.closeWhenDone&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_action_keys_respect_focus.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -66,21 +66,21 @@ var testedFunctions = {</span>
<a href="#l15.4"></a><span id="l15.4">   removeDownload : null,</span>
<a href="#l15.5"></a><span id="l15.5">   resumeDownload : null</span>
<a href="#l15.6"></a><span id="l15.6"> };</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8"> function getCounter(aFn)</span>
<a href="#l15.9"></a><span id="l15.9"> {</span>
<a href="#l15.10"></a><span id="l15.10">   switch (aFn) {</span>
<a href="#l15.11"></a><span id="l15.11">     case &quot;openDownload&quot;:</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      return function() openInvokeCount++;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+      return () =&gt; openInvokeCount++;</span>
<a href="#l15.14"></a><span id="l15.14">     case &quot;removeDownload&quot;:</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-      return function() removeInvokeCount++;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+      return () =&gt; removeInvokeCount++;</span>
<a href="#l15.17"></a><span id="l15.17">     case &quot;resumeDownload&quot;:</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-      return function() resumeInvokeCount++;</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineplus">+      return () =&gt; resumeInvokeCount++;</span>
<a href="#l15.20"></a><span id="l15.20">   }</span>
<a href="#l15.21"></a><span id="l15.21"> }</span>
<a href="#l15.22"></a><span id="l15.22"> </span>
<a href="#l15.23"></a><span id="l15.23"> function backupTestedFunction(aFn, aWin)</span>
<a href="#l15.24"></a><span id="l15.24"> {</span>
<a href="#l15.25"></a><span id="l15.25">   ok(true, &quot;(info) backupTestedFunction('&quot; + aFn + &quot;')&quot;);</span>
<a href="#l15.26"></a><span id="l15.26"> </span>
<a href="#l15.27"></a><span id="l15.27">   [testedFunctions[aFn], aWin[aFn]] = [aWin[aFn], getCounter(aFn)];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_delete_key_cancels.xul</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -76,17 +76,17 @@ dlObs.prototype = {</span>
<a href="#l16.4"></a><span id="l16.4">     }</span>
<a href="#l16.5"></a><span id="l16.5">   },</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7">   onDownloadStateChange: function(aState, aDownload)</span>
<a href="#l16.8"></a><span id="l16.8">   {</span>
<a href="#l16.9"></a><span id="l16.9">     if (aDownload.state == Components.interfaces.nsIDownloadManager.DOWNLOAD_DOWNLOADING &amp;&amp;</span>
<a href="#l16.10"></a><span id="l16.10">         !this.wasPaused) {</span>
<a href="#l16.11"></a><span id="l16.11">       // Make a copy of the cancelDownload function and replace it with a test</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-      var counter = function() invokeCount++;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+      var counter = () =&gt; invokeCount++;</span>
<a href="#l16.14"></a><span id="l16.14">       [cancelDownload, this.mWin[&quot;cancelDownload&quot;]] = [this.mWin[&quot;cancelDownload&quot;], counter];</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16">       synthesizeKey(&quot;VK_DELETE&quot;, {}, this.mWin);</span>
<a href="#l16.17"></a><span id="l16.17">       is(invokeCount, 1, &quot;Delete canceled the active download&quot;);</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">       this.wasPaused = true;</span>
<a href="#l16.20"></a><span id="l16.20">       this.mWin.pauseDownload(aDownload.id);</span>
<a href="#l16.21"></a><span id="l16.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_enter_dblclick_opens.xul</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -76,17 +76,17 @@ dlObs.prototype = {</span>
<a href="#l17.4"></a><span id="l17.4">   observe: function(aSubject, aTopic, aData)</span>
<a href="#l17.5"></a><span id="l17.5">   {</span>
<a href="#l17.6"></a><span id="l17.6">     if (&quot;timer-callback&quot; == aTopic) {</span>
<a href="#l17.7"></a><span id="l17.7">       var downloadTree = this.mWin.document.getElementById(&quot;downloadTree&quot;);</span>
<a href="#l17.8"></a><span id="l17.8">       var downloadView = downloadTree.view;</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10">       // Default test/check for invocations</span>
<a href="#l17.11"></a><span id="l17.11">       var invokeCount = 0;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      var counter = function() invokeCount++;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      var counter = () =&gt; invokeCount++;</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15">       // Run tests</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17">       // Make a copy of the openDownload function and replace it with a test</span>
<a href="#l17.18"></a><span id="l17.18">       let copy;</span>
<a href="#l17.19"></a><span id="l17.19">       [copy, this.mWin[&quot;openDownload&quot;]] = [this.mWin[&quot;openDownload&quot;], counter];</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">       // Select the first (paused) download for not calling openDownload</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_multi_select.xul</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_multi_select.xul</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -79,21 +79,21 @@ function test()</span>
<a href="#l18.4"></a><span id="l18.4">     }</span>
<a href="#l18.5"></a><span id="l18.5">   };</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7">   function continueTest(win) {</span>
<a href="#l18.8"></a><span id="l18.8">     var downloadView = win.document.getElementById(&quot;downloadTree&quot;).view;</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10">     // Default test/check for invocations</span>
<a href="#l18.11"></a><span id="l18.11">     var invokeCount = 0;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    var counter = function() invokeCount++;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    var counter = () =&gt; invokeCount++;</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15">     // Accessors for returning a value for various properties</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-    var getItems = function() downloadView.rowCount;</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-    var getSelected = function() downloadView.selection.count;</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineplus">+    var getItems = () =&gt; downloadView.rowCount;</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineplus">+    var getSelected = () =&gt; downloadView.selection.count;</span>
<a href="#l18.20"></a><span id="l18.20">     var getClipboard = function() {</span>
<a href="#l18.21"></a><span id="l18.21">       var clip = Components.classes[&quot;@mozilla.org/widget/clipboard;1&quot;]</span>
<a href="#l18.22"></a><span id="l18.22">                            .getService(Components.interfaces.nsIClipboard);</span>
<a href="#l18.23"></a><span id="l18.23">       var trans = Components.classes[&quot;@mozilla.org/widget/transferable;1&quot;]</span>
<a href="#l18.24"></a><span id="l18.24">                             .createInstance(Components.interfaces.nsITransferable);</span>
<a href="#l18.25"></a><span id="l18.25"> </span>
<a href="#l18.26"></a><span id="l18.26">       trans.init(null);</span>
<a href="#l18.27"></a><span id="l18.27">       trans.addDataFlavor(&quot;text/unicode&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_ui_stays_open_on_alert_clickback.xul</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -59,17 +59,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l19.4"></a><span id="l19.4"> function test()</span>
<a href="#l19.5"></a><span id="l19.5"> {</span>
<a href="#l19.6"></a><span id="l19.6">   var dm = Components.classes[&quot;@mozilla.org/download-manager;1&quot;]</span>
<a href="#l19.7"></a><span id="l19.7">                      .getService(Components.interfaces.nsIDownloadManager);</span>
<a href="#l19.8"></a><span id="l19.8"> </span>
<a href="#l19.9"></a><span id="l19.9">   // Empty any old downloads</span>
<a href="#l19.10"></a><span id="l19.10">   dm.DBConnection.executeSimpleSQL(&quot;DELETE FROM moz_downloads&quot;);</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  var setClose = function(aVal)</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  var setClose = aVal =&gt;</span>
<a href="#l19.14"></a><span id="l19.14">     Services.prefs.setBoolPref(&quot;browser.download.manager.closeWhenDone&quot;, aVal);</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16">   // Close the UI if necessary</span>
<a href="#l19.17"></a><span id="l19.17">   var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l19.18"></a><span id="l19.18">                      .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l19.19"></a><span id="l19.19">   var win = wm.getMostRecentWindow(&quot;Download:Manager&quot;);</span>
<a href="#l19.20"></a><span id="l19.20">   if (win) win.close();</span>
<a href="#l19.21"></a><span id="l19.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/suite/common/downloads/treeView.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/suite/common/downloads/treeView.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -459,17 +459,17 @@ DownloadTreeView.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">     window.updateCommands(&quot;tree-select&quot;);</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6">     // ask for nsIDownload objects for finished downloads</span>
<a href="#l20.7"></a><span id="l20.7">     for (let dl of this._dlList)</span>
<a href="#l20.8"></a><span id="l20.8">       if (!dl.dld)</span>
<a href="#l20.9"></a><span id="l20.9">         this._dm.getDownloadByGUID(dl.guid, this);</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11">     // Send a notification that we finished</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    setTimeout(function()</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    setTimeout(() =&gt;</span>
<a href="#l20.14"></a><span id="l20.14">       Services.obs.notifyObservers(window, &quot;download-manager-ui-done&quot;, null), 0);</span>
<a href="#l20.15"></a><span id="l20.15">   },</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17">   handleResult: function(aStatus, aDownload) {</span>
<a href="#l20.18"></a><span id="l20.18">     if (aDownload)</span>
<a href="#l20.19"></a><span id="l20.19">       this._dlMap[aDownload.guid].dld = aDownload;</span>
<a href="#l20.20"></a><span id="l20.20">   },</span>
<a href="#l20.21"></a><span id="l20.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/suite/common/history/treeView.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/suite/common/history/treeView.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -955,17 +955,19 @@ PlacesTreeView.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">         return true;</span>
<a href="#l21.5"></a><span id="l21.5">       if (nextLevel &lt; thisLevel)</span>
<a href="#l21.6"></a><span id="l21.6">         break;</span>
<a href="#l21.7"></a><span id="l21.7">     }</span>
<a href="#l21.8"></a><span id="l21.8"> </span>
<a href="#l21.9"></a><span id="l21.9">     return false;</span>
<a href="#l21.10"></a><span id="l21.10">   },</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  getLevel: function(aRow) this._getNodeForRow(aRow).indentLevel,</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  getLevel: function(aRow) {</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+    return this._getNodeForRow(aRow).indentLevel;</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+  },</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17">   getImageSrc: function PTV_getImageSrc(aRow, aColumn) {</span>
<a href="#l21.18"></a><span id="l21.18">     // Only the title column has an image.</span>
<a href="#l21.19"></a><span id="l21.19">     if (aColumn.id != &quot;Name&quot;)</span>
<a href="#l21.20"></a><span id="l21.20">       return &quot;&quot;;</span>
<a href="#l21.21"></a><span id="l21.21"> </span>
<a href="#l21.22"></a><span id="l21.22">     return this._getNodeForRow(aRow).icon;</span>
<a href="#l21.23"></a><span id="l21.23">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/suite/common/places/browserPlacesViews.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/suite/common/places/browserPlacesViews.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -13,50 +13,58 @@ function PlacesViewBase(aPlace) {</span>
<a href="#l22.4"></a><span id="l22.4">   this.place = aPlace;</span>
<a href="#l22.5"></a><span id="l22.5">   this._controller = new PlacesController(this);</span>
<a href="#l22.6"></a><span id="l22.6">   this._viewElt.controllers.appendController(this._controller);</span>
<a href="#l22.7"></a><span id="l22.7"> }</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9"> PlacesViewBase.prototype = {</span>
<a href="#l22.10"></a><span id="l22.10">   // The xul element that holds the entire view.</span>
<a href="#l22.11"></a><span id="l22.11">   _viewElt: null,</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  get viewElt() this._viewElt,</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  get viewElt() {</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+    return this._viewElt;</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+  },</span>
<a href="#l22.16"></a><span id="l22.16"> </span>
<a href="#l22.17"></a><span id="l22.17" class="difflineminus">-  get controllers() this._viewElt.controllers,</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+  get controllers() {</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+    return this._viewElt.controllers;</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+  },</span>
<a href="#l22.21"></a><span id="l22.21"> </span>
<a href="#l22.22"></a><span id="l22.22">   // The xul element that represents the root container.</span>
<a href="#l22.23"></a><span id="l22.23">   _rootElt: null,</span>
<a href="#l22.24"></a><span id="l22.24"> </span>
<a href="#l22.25"></a><span id="l22.25">   // Set to true for views that are represented by native widgets (i.e.</span>
<a href="#l22.26"></a><span id="l22.26">   // the native mac menu).</span>
<a href="#l22.27"></a><span id="l22.27">   _nativeView: false,</span>
<a href="#l22.28"></a><span id="l22.28"> </span>
<a href="#l22.29"></a><span id="l22.29">   QueryInterface: XPCOMUtils.generateQI(</span>
<a href="#l22.30"></a><span id="l22.30">     [Components.interfaces.nsINavHistoryResultObserver,</span>
<a href="#l22.31"></a><span id="l22.31">      Components.interfaces.nsISupportsWeakReference]),</span>
<a href="#l22.32"></a><span id="l22.32"> </span>
<a href="#l22.33"></a><span id="l22.33">   _place: &quot;&quot;,</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">-  get place() this._place,</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineplus">+  get place() {</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineplus">+    return this._place;</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineplus">+  },</span>
<a href="#l22.38"></a><span id="l22.38">   set place(val) {</span>
<a href="#l22.39"></a><span id="l22.39">     this._place = val;</span>
<a href="#l22.40"></a><span id="l22.40"> </span>
<a href="#l22.41"></a><span id="l22.41">     let history = PlacesUtils.history;</span>
<a href="#l22.42"></a><span id="l22.42">     let queries = { }, options = { };</span>
<a href="#l22.43"></a><span id="l22.43">     history.queryStringToQueries(val, queries, { }, options);</span>
<a href="#l22.44"></a><span id="l22.44">     if (!queries.value.length)</span>
<a href="#l22.45"></a><span id="l22.45">       queries.value = [history.getNewQuery()];</span>
<a href="#l22.46"></a><span id="l22.46"> </span>
<a href="#l22.47"></a><span id="l22.47">     let result = history.executeQueries(queries.value, queries.value.length,</span>
<a href="#l22.48"></a><span id="l22.48">                                         options.value);</span>
<a href="#l22.49"></a><span id="l22.49">     result.addObserver(this, false);</span>
<a href="#l22.50"></a><span id="l22.50">     return val;</span>
<a href="#l22.51"></a><span id="l22.51">   },</span>
<a href="#l22.52"></a><span id="l22.52"> </span>
<a href="#l22.53"></a><span id="l22.53">   _result: null,</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineminus">-  get result() this._result,</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineplus">+  get result() {</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineplus">+    return this._result;</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineplus">+  },</span>
<a href="#l22.58"></a><span id="l22.58">   set result(val) {</span>
<a href="#l22.59"></a><span id="l22.59">     if (this._result == val)</span>
<a href="#l22.60"></a><span id="l22.60">       return val;</span>
<a href="#l22.61"></a><span id="l22.61"> </span>
<a href="#l22.62"></a><span id="l22.62">     if (this._result) {</span>
<a href="#l22.63"></a><span id="l22.63">       this._result.removeObserver(this);</span>
<a href="#l22.64"></a><span id="l22.64">       this._resultNode.containerOpen = false;</span>
<a href="#l22.65"></a><span id="l22.65">     }</span>
<a href="#l22.66"></a><span id="l22.66" class="difflineat">@@ -94,31 +102,37 @@ PlacesViewBase.prototype = {</span>
<a href="#l22.67"></a><span id="l22.67">     let node = this._domNodes.get(aPlacesNode, null);</span>
<a href="#l22.68"></a><span id="l22.68">     if (!node) {</span>
<a href="#l22.69"></a><span id="l22.69">       throw new Error(&quot;No DOM node set for aPlacesNode.\nnode.type: &quot; +</span>
<a href="#l22.70"></a><span id="l22.70">                       aPlacesNode.type + &quot;. node.parent: &quot; + aPlacesNode);</span>
<a href="#l22.71"></a><span id="l22.71">     }</span>
<a href="#l22.72"></a><span id="l22.72">     return node;</span>
<a href="#l22.73"></a><span id="l22.73">   },</span>
<a href="#l22.74"></a><span id="l22.74"> </span>
<a href="#l22.75"></a><span id="l22.75" class="difflineminus">-  get controller() this._controller,</span>
<a href="#l22.76"></a><span id="l22.76" class="difflineplus">+  get controller() {</span>
<a href="#l22.77"></a><span id="l22.77" class="difflineplus">+    return this._controller;</span>
<a href="#l22.78"></a><span id="l22.78" class="difflineplus">+  },</span>
<a href="#l22.79"></a><span id="l22.79"> </span>
<a href="#l22.80"></a><span id="l22.80" class="difflineminus">-  get selType() &quot;single&quot;,</span>
<a href="#l22.81"></a><span id="l22.81" class="difflineplus">+  get selType() {</span>
<a href="#l22.82"></a><span id="l22.82" class="difflineplus">+    return &quot;single&quot;;</span>
<a href="#l22.83"></a><span id="l22.83" class="difflineplus">+  },</span>
<a href="#l22.84"></a><span id="l22.84">   selectItems: function() { },</span>
<a href="#l22.85"></a><span id="l22.85">   selectAll: function() { },</span>
<a href="#l22.86"></a><span id="l22.86"> </span>
<a href="#l22.87"></a><span id="l22.87">   get selectedNode() {</span>
<a href="#l22.88"></a><span id="l22.88">     if (this._contextMenuShown) {</span>
<a href="#l22.89"></a><span id="l22.89">       let popup = document.popupNode;</span>
<a href="#l22.90"></a><span id="l22.90">       return popup._placesNode || popup.parentNode._placesNode || null;</span>
<a href="#l22.91"></a><span id="l22.91">     }</span>
<a href="#l22.92"></a><span id="l22.92">     return null;</span>
<a href="#l22.93"></a><span id="l22.93">   },</span>
<a href="#l22.94"></a><span id="l22.94"> </span>
<a href="#l22.95"></a><span id="l22.95" class="difflineminus">-  get hasSelection() this.selectedNode != null,</span>
<a href="#l22.96"></a><span id="l22.96" class="difflineplus">+  get hasSelection() {</span>
<a href="#l22.97"></a><span id="l22.97" class="difflineplus">+    return this.selectedNode != null;</span>
<a href="#l22.98"></a><span id="l22.98" class="difflineplus">+  },</span>
<a href="#l22.99"></a><span id="l22.99"> </span>
<a href="#l22.100"></a><span id="l22.100">   get selectedNodes() {</span>
<a href="#l22.101"></a><span id="l22.101">     let selectedNode = this.selectedNode;</span>
<a href="#l22.102"></a><span id="l22.102">     return selectedNode ? [selectedNode] : [];</span>
<a href="#l22.103"></a><span id="l22.103">   },</span>
<a href="#l22.104"></a><span id="l22.104"> </span>
<a href="#l22.105"></a><span id="l22.105">   get removableSelectionRanges() {</span>
<a href="#l22.106"></a><span id="l22.106">     // On static content the current selectedNode would be the selection's</span>
<a href="#l22.107"></a><span id="l22.107" class="difflineat">@@ -126,17 +140,19 @@ PlacesViewBase.prototype = {</span>
<a href="#l22.108"></a><span id="l22.108">     // selection is not explicit.</span>
<a href="#l22.109"></a><span id="l22.109">     if (document.popupNode &amp;&amp;</span>
<a href="#l22.110"></a><span id="l22.110">         (document.popupNode == &quot;menupopup&quot; || !document.popupNode._placesNode))</span>
<a href="#l22.111"></a><span id="l22.111">       return [];</span>
<a href="#l22.112"></a><span id="l22.112"> </span>
<a href="#l22.113"></a><span id="l22.113">     return [this.selectedNodes];</span>
<a href="#l22.114"></a><span id="l22.114">   },</span>
<a href="#l22.115"></a><span id="l22.115"> </span>
<a href="#l22.116"></a><span id="l22.116" class="difflineminus">-  get draggableSelection() [this._draggedElt],</span>
<a href="#l22.117"></a><span id="l22.117" class="difflineplus">+  get draggableSelection() {</span>
<a href="#l22.118"></a><span id="l22.118" class="difflineplus">+    return [this._draggedElt];</span>
<a href="#l22.119"></a><span id="l22.119" class="difflineplus">+  },</span>
<a href="#l22.120"></a><span id="l22.120"> </span>
<a href="#l22.121"></a><span id="l22.121">   get insertionPoint() {</span>
<a href="#l22.122"></a><span id="l22.122">     // There is no insertion point for history queries, so bail out now and</span>
<a href="#l22.123"></a><span id="l22.123">     // save a lot of work when updating commands.</span>
<a href="#l22.124"></a><span id="l22.124">     let resultNode = this._resultNode;</span>
<a href="#l22.125"></a><span id="l22.125">     if (PlacesUtils.nodeIsQuery(resultNode) &amp;&amp;</span>
<a href="#l22.126"></a><span id="l22.126">         PlacesUtils.asQuery(resultNode).queryOptions.queryType ==</span>
<a href="#l22.127"></a><span id="l22.127">           Components.interfaces.nsINavHistoryQueryOptions.QUERY_TYPE_HISTORY)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/suite/common/places/controller.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/suite/common/places/controller.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1297,28 +1297,30 @@ PlacesController.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4"> </span>
<a href="#l23.5"></a><span id="l23.5">   /**</span>
<a href="#l23.6"></a><span id="l23.6">    * Returns whether or not there's cached mozILivemarkInfo object for a node.</span>
<a href="#l23.7"></a><span id="l23.7">    * @param aNode</span>
<a href="#l23.8"></a><span id="l23.8">    *        a places result node.</span>
<a href="#l23.9"></a><span id="l23.9">    * @return true if there's a cached mozILivemarkInfo object for</span>
<a href="#l23.10"></a><span id="l23.10">    * aNode, false otherwise.</span>
<a href="#l23.11"></a><span id="l23.11">    */</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  hasCachedLivemarkInfo: function PC_hasCachedLivemarkInfo(aNode)</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-    this._cachedLivemarkInfoObjects.has(aNode),</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+  hasCachedLivemarkInfo: function PC_hasCachedLivemarkInfo(aNode) {</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+    return this._cachedLivemarkInfoObjects.has(aNode);</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+  },</span>
<a href="#l23.17"></a><span id="l23.17"> </span>
<a href="#l23.18"></a><span id="l23.18">   /**</span>
<a href="#l23.19"></a><span id="l23.19">    * Returns the cached livemark info for a node, if set by cacheLivemarkInfo,</span>
<a href="#l23.20"></a><span id="l23.20">    * null otherwise.</span>
<a href="#l23.21"></a><span id="l23.21">    * @param aNode</span>
<a href="#l23.22"></a><span id="l23.22">    *        a places result node.</span>
<a href="#l23.23"></a><span id="l23.23">    * @return the mozILivemarkInfo object for aNode, if set, null otherwise.</span>
<a href="#l23.24"></a><span id="l23.24">    */</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-  getCachedLivemarkInfo: function PC_getCachedLivemarkInfo(aNode)</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-    this._cachedLivemarkInfoObjects.get(aNode, null)</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+  getCachedLivemarkInfo: function PC_getCachedLivemarkInfo(aNode) {</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+    return this._cachedLivemarkInfoObjects.get(aNode, null);</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineplus">+  }</span>
<a href="#l23.30"></a><span id="l23.30"> };</span>
<a href="#l23.31"></a><span id="l23.31"> </span>
<a href="#l23.32"></a><span id="l23.32"> /**</span>
<a href="#l23.33"></a><span id="l23.33">  * Handles drag and drop operations for views. Note that this is view agnostic!</span>
<a href="#l23.34"></a><span id="l23.34">  * You should not use PlacesController._view within these methods, since</span>
<a href="#l23.35"></a><span id="l23.35">  * the view that the item(s) have been dropped on was not necessarily active.</span>
<a href="#l23.36"></a><span id="l23.36">  * Drop functions are passed the view that is being dropped on.</span>
<a href="#l23.37"></a><span id="l23.37">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/suite/common/places/tests/unit/test_PUIU_makeTransaction.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/suite/common/places/tests/unit/test_PUIU_makeTransaction.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -10,47 +10,51 @@ function waitForBookmarkNotification(aNo</span>
<a href="#l24.4"></a><span id="l24.4">           (!aProperty || aProperty == aData.property)) {</span>
<a href="#l24.5"></a><span id="l24.5">         PlacesUtils.bookmarks.removeObserver(this);</span>
<a href="#l24.6"></a><span id="l24.6">         aCallback(aData);</span>
<a href="#l24.7"></a><span id="l24.7">       }</span>
<a href="#l24.8"></a><span id="l24.8">     },</span>
<a href="#l24.9"></a><span id="l24.9"> </span>
<a href="#l24.10"></a><span id="l24.10">     // nsINavBookmarkObserver</span>
<a href="#l24.11"></a><span id="l24.11">     QueryInterface: XPCOMUtils.generateQI([Ci.nsINavBookmarkObserver]),</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    onBeginUpdateBatch: function onBeginUpdateBatch()</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-      this.validate(arguments.callee.name, arguments),</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-    onEndUpdateBatch: function onEndUpdateBatch()</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineminus">-      this.validate(arguments.callee.name, arguments),</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+    onBeginUpdateBatch: function onBeginUpdateBatch() {</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+      return this.validate(arguments.callee.name, arguments);</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineplus">+    },</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineplus">+    onEndUpdateBatch: function onEndUpdateBatch() {</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineplus">+      return this.validate(arguments.callee.name, arguments);</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineplus">+    },</span>
<a href="#l24.22"></a><span id="l24.22">     onItemAdded: function onItemAdded(aItemId, aParentId, aIndex, aItemType,</span>
<a href="#l24.23"></a><span id="l24.23">                                       aURI, aTitle)</span>
<a href="#l24.24"></a><span id="l24.24">     {</span>
<a href="#l24.25"></a><span id="l24.25">       return this.validate(arguments.callee.name, { id: aItemId,</span>
<a href="#l24.26"></a><span id="l24.26">                                                     index: aIndex,</span>
<a href="#l24.27"></a><span id="l24.27">                                                     type: aItemType,</span>
<a href="#l24.28"></a><span id="l24.28">                                                     url: aURI ? aURI.spec : null,</span>
<a href="#l24.29"></a><span id="l24.29">                                                     title: aTitle });</span>
<a href="#l24.30"></a><span id="l24.30">     },</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-    onItemRemoved: function onItemRemoved()</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineminus">-      this.validate(arguments.callee.name, arguments),</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineplus">+    onItemRemoved: function onItemRemoved() {</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineplus">+      return this.validate(arguments.callee.name, arguments);</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineplus">+    },</span>
<a href="#l24.36"></a><span id="l24.36">     onItemChanged: function onItemChanged(aItemId, aProperty, aIsAnno,</span>
<a href="#l24.37"></a><span id="l24.37">                                           aNewValue, aLastModified, aItemType)</span>
<a href="#l24.38"></a><span id="l24.38">     {</span>
<a href="#l24.39"></a><span id="l24.39">       return this.validate(arguments.callee.name,</span>
<a href="#l24.40"></a><span id="l24.40">                            { id: aItemId,</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-                             get index() PlacesUtils.bookmarks.getItemIndex(this.id),</span>
<a href="#l24.42"></a><span id="l24.42" class="difflineplus">+                             get index() { return PlacesUtils.bookmarks.getItemIndex(this.id); },</span>
<a href="#l24.43"></a><span id="l24.43">                              type: aItemType,</span>
<a href="#l24.44"></a><span id="l24.44">                              property: aProperty,</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineminus">-                             get url() aItemType == PlacesUtils.bookmarks.TYPE_BOOKMARK ?</span>
<a href="#l24.46"></a><span id="l24.46" class="difflineplus">+                             get url() { return aItemType == PlacesUtils.bookmarks.TYPE_BOOKMARK ?</span>
<a href="#l24.47"></a><span id="l24.47">                                                 PlacesUtils.bookmarks.getBookmarkURI(this.id).spec :</span>
<a href="#l24.48"></a><span id="l24.48" class="difflineminus">-                                                null,</span>
<a href="#l24.49"></a><span id="l24.49" class="difflineminus">-                             get title() PlacesUtils.bookmarks.getItemTitle(this.id),</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineplus">+                                                null; },</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineplus">+                             get title() { return PlacesUtils.bookmarks.getItemTitle(this.id); },</span>
<a href="#l24.52"></a><span id="l24.52">                            });</span>
<a href="#l24.53"></a><span id="l24.53">     },</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineminus">-    onItemVisited: function onItemVisited()</span>
<a href="#l24.55"></a><span id="l24.55" class="difflineminus">-      this.validate(arguments.callee.name, arguments),</span>
<a href="#l24.56"></a><span id="l24.56" class="difflineplus">+    onItemVisited: function onItemVisited() {</span>
<a href="#l24.57"></a><span id="l24.57" class="difflineplus">+      return this.validate(arguments.callee.name, arguments);</span>
<a href="#l24.58"></a><span id="l24.58" class="difflineplus">+    },</span>
<a href="#l24.59"></a><span id="l24.59">     onItemMoved: function onItemMoved(aItemId, aOldParentId, aOldIndex,</span>
<a href="#l24.60"></a><span id="l24.60">                                       aNewParentId, aNewIndex, aItemType)</span>
<a href="#l24.61"></a><span id="l24.61">     {</span>
<a href="#l24.62"></a><span id="l24.62">       this.validate(arguments.callee.name, { id: aItemId,</span>
<a href="#l24.63"></a><span id="l24.63">                                              index: aNewIndex,</span>
<a href="#l24.64"></a><span id="l24.64">                                              type: aItemType });</span>
<a href="#l24.65"></a><span id="l24.65">     }</span>
<a href="#l24.66"></a><span id="l24.66">   }, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/suite/common/places/tests/unit/test_clearHistory_shutdown.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/suite/common/places/tests/unit/test_clearHistory_shutdown.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -41,17 +41,17 @@ let notificationsObserver = {</span>
<a href="#l25.4"></a><span id="l25.4">     if (EXPECTED_NOTIFICATIONS[notificationIndex] != aTopic)</span>
<a href="#l25.5"></a><span id="l25.5">       notificationIndex++;</span>
<a href="#l25.6"></a><span id="l25.6">     do_check_eq(EXPECTED_NOTIFICATIONS[notificationIndex], aTopic);</span>
<a href="#l25.7"></a><span id="l25.7"> </span>
<a href="#l25.8"></a><span id="l25.8">     if (aTopic != TOPIC_CONNECTION_CLOSED)</span>
<a href="#l25.9"></a><span id="l25.9">       return;</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11">     getDistinctNotifications().forEach(</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-      function (topic) Services.obs.removeObserver(notificationsObserver, topic)</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+      topic =&gt; Services.obs.removeObserver(notificationsObserver, topic)</span>
<a href="#l25.14"></a><span id="l25.14">     );</span>
<a href="#l25.15"></a><span id="l25.15"> </span>
<a href="#l25.16"></a><span id="l25.16">     print(&quot;Looking for uncleared stuff.&quot;);</span>
<a href="#l25.17"></a><span id="l25.17"> </span>
<a href="#l25.18"></a><span id="l25.18">     let stmt = DBConn().createStatement(</span>
<a href="#l25.19"></a><span id="l25.19">       &quot;SELECT id FROM moz_places WHERE url = :page_url &quot;</span>
<a href="#l25.20"></a><span id="l25.20">     );</span>
<a href="#l25.21"></a><span id="l25.21"> </span>
<a href="#l25.22"></a><span id="l25.22" class="difflineat">@@ -107,17 +107,17 @@ add_task(function test_execute() {</span>
<a href="#l25.23"></a><span id="l25.23">   print(&quot;Add cache.&quot;);</span>
<a href="#l25.24"></a><span id="l25.24">   storeCache(URL, &quot;testData&quot;);</span>
<a href="#l25.25"></a><span id="l25.25"> });</span>
<a href="#l25.26"></a><span id="l25.26"> </span>
<a href="#l25.27"></a><span id="l25.27"> function run_test_continue()</span>
<a href="#l25.28"></a><span id="l25.28"> {</span>
<a href="#l25.29"></a><span id="l25.29">   print(&quot;Simulate and wait shutdown.&quot;);</span>
<a href="#l25.30"></a><span id="l25.30">   getDistinctNotifications().forEach(</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">-    function (topic)</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+    topic =&gt;</span>
<a href="#l25.33"></a><span id="l25.33">       Services.obs.addObserver(notificationsObserver, topic, false)</span>
<a href="#l25.34"></a><span id="l25.34">   );</span>
<a href="#l25.35"></a><span id="l25.35"> </span>
<a href="#l25.36"></a><span id="l25.36">   // Simulate an exit so that Sanitizer's init method checkSettings() is called.</span>
<a href="#l25.37"></a><span id="l25.37">   print(&quot;Simulate 'quit-application-granted' too for SeaMonkey.&quot;);</span>
<a href="#l25.38"></a><span id="l25.38">   Services.obs.notifyObservers(null, &quot;quit-application-granted&quot;, null);</span>
<a href="#l25.39"></a><span id="l25.39"> </span>
<a href="#l25.40"></a><span id="l25.40">   shutdownPlaces();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/suite/common/places/treeView.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/suite/common/places/treeView.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1356,17 +1356,19 @@ PlacesTreeView.prototype = {</span>
<a href="#l26.4"></a><span id="l26.4">         return true;</span>
<a href="#l26.5"></a><span id="l26.5">       if (nextLevel &lt; thisLevel)</span>
<a href="#l26.6"></a><span id="l26.6">         break;</span>
<a href="#l26.7"></a><span id="l26.7">     }</span>
<a href="#l26.8"></a><span id="l26.8"> </span>
<a href="#l26.9"></a><span id="l26.9">     return false;</span>
<a href="#l26.10"></a><span id="l26.10">   },</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  getLevel: function(aRow) this._getNodeForRow(aRow).indentLevel,</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  getLevel: function(aRow) {</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+    return this._getNodeForRow(aRow).indentLevel;</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+  },</span>
<a href="#l26.16"></a><span id="l26.16"> </span>
<a href="#l26.17"></a><span id="l26.17">   getImageSrc: function PTV_getImageSrc(aRow, aColumn) {</span>
<a href="#l26.18"></a><span id="l26.18">     // Only the title column has an image.</span>
<a href="#l26.19"></a><span id="l26.19">     if (this._getColumnType(aColumn) != this.COLUMN_TYPE_TITLE)</span>
<a href="#l26.20"></a><span id="l26.20">       return &quot;&quot;;</span>
<a href="#l26.21"></a><span id="l26.21"> </span>
<a href="#l26.22"></a><span id="l26.22">     return this._getNodeForRow(aRow).icon;</span>
<a href="#l26.23"></a><span id="l26.23">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/suite/common/pref/pref-applications.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/suite/common/pref/pref-applications.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -378,17 +378,17 @@ HandlerInfoWrapper.prototype = {</span>
<a href="#l27.4"></a><span id="l27.4">                                           this.type,</span>
<a href="#l27.5"></a><span id="l27.5">                                           false);</span>
<a href="#l27.6"></a><span id="l27.6">   },</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8">   enablePluginType: function() {</span>
<a href="#l27.9"></a><span id="l27.9">     var disabledPluginTypes = this._getDisabledPluginTypes();</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11">     var type = this.type;</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    disabledPluginTypes = disabledPluginTypes.filter(function(v) v != type);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    disabledPluginTypes = disabledPluginTypes.filter(v =&gt; v != type);</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15">     Services.prefs.setCharPref(PREF_DISABLED_PLUGIN_TYPES,</span>
<a href="#l27.16"></a><span id="l27.16">                                disabledPluginTypes.join(&quot;,&quot;));</span>
<a href="#l27.17"></a><span id="l27.17"> </span>
<a href="#l27.18"></a><span id="l27.18">     // Update the category manager so existing browser windows update.</span>
<a href="#l27.19"></a><span id="l27.19">     categoryMgr.</span>
<a href="#l27.20"></a><span id="l27.20">       addCategoryEntry(&quot;Gecko-Content-Viewers&quot;,</span>
<a href="#l27.21"></a><span id="l27.21">                        this.type,</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -1418,17 +1418,17 @@ var gApplicationsPane = {</span>
<a href="#l27.23"></a><span id="l27.23">     // ask flag is set, it overrides the preferred action.  Otherwise we pick</span>
<a href="#l27.24"></a><span id="l27.24">     // the item identified by the preferred action (when the preferred action</span>
<a href="#l27.25"></a><span id="l27.25">     // is to use a helper app, we have to pick the specific helper app item).</span>
<a href="#l27.26"></a><span id="l27.26">     if (handlerInfo.alwaysAskBeforeHandling)</span>
<a href="#l27.27"></a><span id="l27.27">       menu.value = nsIHandlerInfo.alwaysAsk;</span>
<a href="#l27.28"></a><span id="l27.28">     else if (handlerInfo.preferredAction == nsIHandlerInfo.useHelperApp &amp;&amp;</span>
<a href="#l27.29"></a><span id="l27.29">              preferredApp)</span>
<a href="#l27.30"></a><span id="l27.30">       menu.selectedItem = </span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-        possibleAppMenuItems.filter(function(v) v.handlerApp.equals(preferredApp))[0];</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+        possibleAppMenuItems.filter(v =&gt; v.handlerApp.equals(preferredApp))[0];</span>
<a href="#l27.33"></a><span id="l27.33">     else</span>
<a href="#l27.34"></a><span id="l27.34">       menu.value = handlerInfo.preferredAction;</span>
<a href="#l27.35"></a><span id="l27.35">   },</span>
<a href="#l27.36"></a><span id="l27.36"> </span>
<a href="#l27.37"></a><span id="l27.37"> </span>
<a href="#l27.38"></a><span id="l27.38">   //**************************************************************************//</span>
<a href="#l27.39"></a><span id="l27.39">   // Sorting &amp; Filtering</span>
<a href="#l27.40"></a><span id="l27.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/suite/common/search/engineManager.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/suite/common/search/engineManager.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -266,17 +266,17 @@ EngineChangeOp.prototype = {</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> function EngineStore() {</span>
<a href="#l28.6"></a><span id="l28.6">   this._engines = Services.search.getVisibleEngines().map(this._cloneEngine);</span>
<a href="#l28.7"></a><span id="l28.7">   this._defaultEngines = Services.search.getDefaultEngines().map(this._cloneEngine);</span>
<a href="#l28.8"></a><span id="l28.8"> </span>
<a href="#l28.9"></a><span id="l28.9">   this._ops = [];</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">   // check if we need to disable the restore defaults button</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  var someHidden = this._defaultEngines.some(function (e) e.hidden);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  var someHidden = this._defaultEngines.some(e =&gt; e.hidden);</span>
<a href="#l28.14"></a><span id="l28.14">   gEngineManagerDialog.showRestoreDefaults(someHidden);</span>
<a href="#l28.15"></a><span id="l28.15"> }</span>
<a href="#l28.16"></a><span id="l28.16"> EngineStore.prototype = {</span>
<a href="#l28.17"></a><span id="l28.17">   _engines: null,</span>
<a href="#l28.18"></a><span id="l28.18">   _defaultEngines: null,</span>
<a href="#l28.19"></a><span id="l28.19">   _ops: null,</span>
<a href="#l28.20"></a><span id="l28.20"> </span>
<a href="#l28.21"></a><span id="l28.21">   get engines() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/suite/common/sidebar/sidebarOverlay.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/suite/common/sidebar/sidebarOverlay.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -1456,17 +1456,17 @@ function SidebarCleanUpExpandCollapse() </span>
<a href="#l29.4"></a><span id="l29.4">   // XXX Mini hack. Persist isn't working too well. Force the persist,</span>
<a href="#l29.5"></a><span id="l29.5">   // but wait until the change has commited.</span>
<a href="#l29.6"></a><span id="l29.6">   if (gMustInit) {</span>
<a href="#l29.7"></a><span id="l29.7">     gAboutToUncollapse = true;</span>
<a href="#l29.8"></a><span id="l29.8">     sidebar_overlay_init();</span>
<a href="#l29.9"></a><span id="l29.9">   }</span>
<a href="#l29.10"></a><span id="l29.10"> </span>
<a href="#l29.11"></a><span id="l29.11">   setTimeout(Persist, 100, &quot;sidebar-box&quot;, &quot;collapsed&quot;);</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  setTimeout(function() sidebarObj.panels.refresh(), 100);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  setTimeout(() =&gt; sidebarObj.panels.refresh(), 100);</span>
<a href="#l29.14"></a><span id="l29.14"> }</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16"> function PersistHeight() {</span>
<a href="#l29.17"></a><span id="l29.17">   // XXX Mini hack. Persist isn't working too well. Force the persist,</span>
<a href="#l29.18"></a><span id="l29.18">   // but wait until the last drag has been committed.</span>
<a href="#l29.19"></a><span id="l29.19">   // May want to do something smarter here like only force it if the</span>
<a href="#l29.20"></a><span id="l29.20">   // height has really changed.</span>
<a href="#l29.21"></a><span id="l29.21">   setTimeout(Persist, 100, &quot;sidebar-panels-splitter-box&quot;, &quot;height&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/suite/common/src/nsSessionStore.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/suite/common/src/nsSessionStore.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -1909,17 +1909,17 @@ SessionStoreService.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4">       else {</span>
<a href="#l30.5"></a><span id="l30.5">         // &lt;select&gt;s with the multiple attribute are easier to determine the</span>
<a href="#l30.6"></a><span id="l30.6">         // default value since each &lt;option&gt; has a defaultSelected</span>
<a href="#l30.7"></a><span id="l30.7">         let options = Array.map(node.options, function(aOpt, aIx) {</span>
<a href="#l30.8"></a><span id="l30.8">           let oSelected = aOpt.selected;</span>
<a href="#l30.9"></a><span id="l30.9">           hasDefaultValue = hasDefaultValue &amp;&amp; (oSelected == aOpt.defaultSelected);</span>
<a href="#l30.10"></a><span id="l30.10">           return oSelected ? aIx : -1;</span>
<a href="#l30.11"></a><span id="l30.11">         });</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-        value = options.filter(function(aIx) aIx &gt;= 0);</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+        value = options.filter(aIx =&gt; aIx &gt;= 0);</span>
<a href="#l30.14"></a><span id="l30.14">       }</span>
<a href="#l30.15"></a><span id="l30.15">       // In order to reduce XPath generation (which is slow), we only save data</span>
<a href="#l30.16"></a><span id="l30.16">       // for form fields that have been changed. (cf. bug 537289)</span>
<a href="#l30.17"></a><span id="l30.17">       if (!hasDefaultValue) {</span>
<a href="#l30.18"></a><span id="l30.18">         if (nId) {</span>
<a href="#l30.19"></a><span id="l30.19">           data[&quot;#&quot; + nId] = value;</span>
<a href="#l30.20"></a><span id="l30.20">         }</span>
<a href="#l30.21"></a><span id="l30.21">         else {</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -2914,18 +2914,19 @@ SessionStoreService.prototype = {</span>
<a href="#l30.23"></a><span id="l30.23">    */</span>
<a href="#l30.24"></a><span id="l30.24">   restoreDocument: function sss_restoreDocument(aWindow, aBrowser, aEvent) {</span>
<a href="#l30.25"></a><span id="l30.25">     // wait for the top frame to be loaded completely</span>
<a href="#l30.26"></a><span id="l30.26">     if (!aEvent || !aEvent.originalTarget || !aEvent.originalTarget.defaultView || aEvent.originalTarget.defaultView != aEvent.originalTarget.defaultView.top) {</span>
<a href="#l30.27"></a><span id="l30.27">       return;</span>
<a href="#l30.28"></a><span id="l30.28">     }</span>
<a href="#l30.29"></a><span id="l30.29"> </span>
<a href="#l30.30"></a><span id="l30.30">     // always call this before injecting content into a document!</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-    function hasExpectedURL(aDocument, aURL)</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineminus">-      !aURL || aURL.replace(/#.*/, &quot;&quot;) == aDocument.location.href.replace(/#.*/, &quot;&quot;);</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineplus">+    function hasExpectedURL(aDocument, aURL) {</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineplus">+      return !aURL || aURL.replace(/#.*/, &quot;&quot;) == aDocument.location.href.replace(/#.*/, &quot;&quot;);</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineplus">+    }</span>
<a href="#l30.36"></a><span id="l30.36"> </span>
<a href="#l30.37"></a><span id="l30.37">     function restoreFormData(aDocument, aData, aURL) {</span>
<a href="#l30.38"></a><span id="l30.38">       for (let key in aData) {</span>
<a href="#l30.39"></a><span id="l30.39">         if (!hasExpectedURL(aDocument, aURL))</span>
<a href="#l30.40"></a><span id="l30.40">           return;</span>
<a href="#l30.41"></a><span id="l30.41"> </span>
<a href="#l30.42"></a><span id="l30.42">         let node = key.charAt(0) == &quot;#&quot; ? aDocument.getElementById(key.slice(1)) :</span>
<a href="#l30.43"></a><span id="l30.43">                                           XPathHelper.resolve(aDocument, key);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/suite/common/sync/syncSetup.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/suite/common/sync/syncSetup.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -40,17 +40,19 @@ var gSyncSetup = {</span>
<a href="#l31.4"></a><span id="l31.4">   _disabledSites: [],</span>
<a href="#l31.5"></a><span id="l31.5"> </span>
<a href="#l31.6"></a><span id="l31.6">   status: {</span>
<a href="#l31.7"></a><span id="l31.7">     password: false,</span>
<a href="#l31.8"></a><span id="l31.8">     email: false,</span>
<a href="#l31.9"></a><span id="l31.9">     server: true</span>
<a href="#l31.10"></a><span id="l31.10">   },</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  get _remoteSites() [Weave.Service.serverURL, RECAPTCHA_DOMAIN],</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  get _remoteSites() {</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineplus">+    return [Weave.Service.serverURL, RECAPTCHA_DOMAIN];</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineplus">+  },</span>
<a href="#l31.16"></a><span id="l31.16"> </span>
<a href="#l31.17"></a><span id="l31.17">   get _usingMainServers() {</span>
<a href="#l31.18"></a><span id="l31.18">     if (this._settingUpNew)</span>
<a href="#l31.19"></a><span id="l31.19">       return document.getElementById(&quot;server&quot;).selectedIndex == 0;</span>
<a href="#l31.20"></a><span id="l31.20">     return document.getElementById(&quot;existingServer&quot;).selectedIndex == 0;</span>
<a href="#l31.21"></a><span id="l31.21">   },</span>
<a href="#l31.22"></a><span id="l31.22"> </span>
<a href="#l31.23"></a><span id="l31.23">   init: function () {</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineat">@@ -68,17 +70,17 @@ var gSyncSetup = {</span>
<a href="#l31.25"></a><span id="l31.25">         //        of `this`. Fix in a followup. (bug 583347)</span>
<a href="#l31.26"></a><span id="l31.26">         if (add)</span>
<a href="#l31.27"></a><span id="l31.27">           Weave.Svc.Obs.add(topic, self[func], self);</span>
<a href="#l31.28"></a><span id="l31.28">         else</span>
<a href="#l31.29"></a><span id="l31.29">           Weave.Svc.Obs.remove(topic, self[func], self);</span>
<a href="#l31.30"></a><span id="l31.30">       });</span>
<a href="#l31.31"></a><span id="l31.31">     };</span>
<a href="#l31.32"></a><span id="l31.32">     addRem(true);</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineminus">-    window.addEventListener(&quot;unload&quot;, function() addRem(false), false);</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineplus">+    window.addEventListener(&quot;unload&quot;, () =&gt; addRem(false), false);</span>
<a href="#l31.35"></a><span id="l31.35"> </span>
<a href="#l31.36"></a><span id="l31.36">     setTimeout(function () {</span>
<a href="#l31.37"></a><span id="l31.37">       // Force Service to be loaded so that engines are registered.</span>
<a href="#l31.38"></a><span id="l31.38">       // See Bug 670082.</span>
<a href="#l31.39"></a><span id="l31.39">       Weave.Service;</span>
<a href="#l31.40"></a><span id="l31.40">     }, 0);</span>
<a href="#l31.41"></a><span id="l31.41"> </span>
<a href="#l31.42"></a><span id="l31.42">     this.captchaBrowser = document.getElementById(&quot;captcha&quot;);</span>
<a href="#l31.43"></a><span id="l31.43" class="difflineat">@@ -766,19 +768,20 @@ var gSyncSetup = {</span>
<a href="#l31.44"></a><span id="l31.44">     else</span>
<a href="#l31.45"></a><span id="l31.45">       Weave.Svc.Prefs.reset(&quot;serverURL&quot;);</span>
<a href="#l31.46"></a><span id="l31.46"> </span>
<a href="#l31.47"></a><span id="l31.47">     return valid;</span>
<a href="#l31.48"></a><span id="l31.48">   },</span>
<a href="#l31.49"></a><span id="l31.49"> </span>
<a href="#l31.50"></a><span id="l31.50">   _handleSuccess: function() {</span>
<a href="#l31.51"></a><span id="l31.51">     let self = this;</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineminus">-    function fill(id, string)</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineplus">+    function fill(id, string) {</span>
<a href="#l31.54"></a><span id="l31.54">       document.getElementById(id).textContent =</span>
<a href="#l31.55"></a><span id="l31.55">         string ? self._stringBundle.GetStringFromName(string) : &quot;&quot;;</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineplus">+    }</span>
<a href="#l31.57"></a><span id="l31.57"> </span>
<a href="#l31.58"></a><span id="l31.58">     fill(&quot;firstSyncAction&quot;, &quot;&quot;);</span>
<a href="#l31.59"></a><span id="l31.59">     fill(&quot;firstSyncActionWarning&quot;, &quot;&quot;);</span>
<a href="#l31.60"></a><span id="l31.60">     if (this._settingUpNew) {</span>
<a href="#l31.61"></a><span id="l31.61">       fill(&quot;firstSyncAction&quot;, &quot;newAccount.action.label&quot;);</span>
<a href="#l31.62"></a><span id="l31.62">       fill(&quot;firstSyncActionChange&quot;, &quot;newAccount.change.label&quot;);</span>
<a href="#l31.63"></a><span id="l31.63">       return;</span>
<a href="#l31.64"></a><span id="l31.64">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/suite/common/sync/syncUI.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/suite/common/sync/syncUI.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -230,17 +230,17 @@ let gSyncUI = {</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5">   openServerStatus: function () {</span>
<a href="#l32.6"></a><span id="l32.6">     let statusURL = Services.prefs.getCharPref(&quot;services.sync.statusURL&quot;);</span>
<a href="#l32.7"></a><span id="l32.7">     openUILinkIn(statusURL, &quot;tab&quot;);</span>
<a href="#l32.8"></a><span id="l32.8">   },</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10">   // Commands</span>
<a href="#l32.11"></a><span id="l32.11">   doSync: function SUI_doSync() {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-    setTimeout(function() Weave.Service.errorHandler.syncAndReportErrors(), 0);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+    setTimeout(() =&gt; Weave.Service.errorHandler.syncAndReportErrors(), 0);</span>
<a href="#l32.14"></a><span id="l32.14">   },</span>
<a href="#l32.15"></a><span id="l32.15"> </span>
<a href="#l32.16"></a><span id="l32.16">   handleToolbarButton: function SUI_handleToolbarButton() {</span>
<a href="#l32.17"></a><span id="l32.17">     if (this._needsSetup())</span>
<a href="#l32.18"></a><span id="l32.18">       this.openSetup();</span>
<a href="#l32.19"></a><span id="l32.19">     else</span>
<a href="#l32.20"></a><span id="l32.20">       this.doSync();</span>
<a href="#l32.21"></a><span id="l32.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/suite/common/tests/browser/browser_345898.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_345898.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -11,35 +11,35 @@ function test() {</span>
<a href="#l33.4"></a><span id="l33.4">       return false;</span>
<a href="#l33.5"></a><span id="l33.5">     }</span>
<a href="#l33.6"></a><span id="l33.6">     catch (ex) {</span>
<a href="#l33.7"></a><span id="l33.7">       return ex.name == &quot;NS_ERROR_ILLEGAL_VALUE&quot;;</span>
<a href="#l33.8"></a><span id="l33.8">     }</span>
<a href="#l33.9"></a><span id="l33.9">   }</span>
<a href="#l33.10"></a><span id="l33.10">   </span>
<a href="#l33.11"></a><span id="l33.11">   // all of the following calls with illegal arguments should throw NS_ERROR_ILLEGAL_VALUE</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  ok(test(function() ss.getWindowState({})),</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  ok(test(() =&gt; ss.getWindowState({})),</span>
<a href="#l33.14"></a><span id="l33.14">      &quot;Invalid window for getWindowState throws&quot;);</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineminus">-  ok(test(function() ss.setWindowState({}, &quot;&quot;, false)),</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineplus">+  ok(test(() =&gt; ss.setWindowState({}, &quot;&quot;, false)),</span>
<a href="#l33.17"></a><span id="l33.17">      &quot;Invalid window for setWindowState throws&quot;);</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineminus">-  ok(test(function() ss.getTabState({})),</span>
<a href="#l33.19"></a><span id="l33.19" class="difflineplus">+  ok(test(() =&gt; ss.getTabState({})),</span>
<a href="#l33.20"></a><span id="l33.20">      &quot;Invalid tab for getTabState throws&quot;);</span>
<a href="#l33.21"></a><span id="l33.21" class="difflineminus">-  ok(test(function() ss.setTabState({}, &quot;{}&quot;)),</span>
<a href="#l33.22"></a><span id="l33.22" class="difflineplus">+  ok(test(() =&gt; ss.setTabState({}, &quot;{}&quot;)),</span>
<a href="#l33.23"></a><span id="l33.23">      &quot;Invalid tab state for setTabState throws&quot;);</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineminus">-  ok(test(function() ss.setTabState({}, '{ &quot;entries&quot;: [] }')),</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineplus">+  ok(test(() =&gt; ss.setTabState({}, '{ &quot;entries&quot;: [] }')),</span>
<a href="#l33.26"></a><span id="l33.26">      &quot;Invalid tab for setTabState throws&quot;);</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineminus">-  ok(test(function() ss.duplicateTab({}, {})),</span>
<a href="#l33.28"></a><span id="l33.28" class="difflineplus">+  ok(test(() =&gt; ss.duplicateTab({}, {})),</span>
<a href="#l33.29"></a><span id="l33.29">      &quot;Invalid tab for duplicateTab throws&quot;);</span>
<a href="#l33.30"></a><span id="l33.30" class="difflineminus">-  ok(test(function() ss.duplicateTab({}, getBrowser().selectedTab)),</span>
<a href="#l33.31"></a><span id="l33.31" class="difflineplus">+  ok(test(() =&gt; ss.duplicateTab({}, getBrowser().selectedTab)),</span>
<a href="#l33.32"></a><span id="l33.32">      &quot;Invalid window for duplicateTab throws&quot;);</span>
<a href="#l33.33"></a><span id="l33.33" class="difflineminus">-  ok(test(function() ss.getClosedTabData({})),</span>
<a href="#l33.34"></a><span id="l33.34" class="difflineplus">+  ok(test(() =&gt; ss.getClosedTabData({})),</span>
<a href="#l33.35"></a><span id="l33.35">      &quot;Invalid window for getClosedTabData throws&quot;);</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineminus">-  ok(test(function() ss.undoCloseTab({}, 0)),</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineplus">+  ok(test(() =&gt; ss.undoCloseTab({}, 0)),</span>
<a href="#l33.38"></a><span id="l33.38">      &quot;Invalid window for undoCloseTab throws&quot;);</span>
<a href="#l33.39"></a><span id="l33.39" class="difflineminus">-  ok(test(function() ss.undoCloseTab(window, -1)),</span>
<a href="#l33.40"></a><span id="l33.40" class="difflineplus">+  ok(test(() =&gt; ss.undoCloseTab(window, -1)),</span>
<a href="#l33.41"></a><span id="l33.41">      &quot;Invalid index for undoCloseTab throws&quot;);</span>
<a href="#l33.42"></a><span id="l33.42" class="difflineminus">-  ok(test(function() ss.getWindowValue({}, &quot;&quot;)),</span>
<a href="#l33.43"></a><span id="l33.43" class="difflineplus">+  ok(test(() =&gt; ss.getWindowValue({}, &quot;&quot;)),</span>
<a href="#l33.44"></a><span id="l33.44">      &quot;Invalid window for getWindowValue throws&quot;);</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-  ok(test(function() ss.getWindowValue({}, &quot;&quot;)),</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineplus">+  ok(test(() =&gt; ss.getWindowValue({}, &quot;&quot;)),</span>
<a href="#l33.47"></a><span id="l33.47">      &quot;Invalid window for getWindowValue throws&quot;);</span>
<a href="#l33.48"></a><span id="l33.48" class="difflineminus">-  ok(test(function() ss.getWindowValue({}, &quot;&quot;, &quot;&quot;)),</span>
<a href="#l33.49"></a><span id="l33.49" class="difflineplus">+  ok(test(() =&gt; ss.getWindowValue({}, &quot;&quot;, &quot;&quot;)),</span>
<a href="#l33.50"></a><span id="l33.50">      &quot;Invalid window for setWindowValue throws&quot;);</span>
<a href="#l33.51"></a><span id="l33.51"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/suite/common/tests/browser/browser_346337.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_346337.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -46,38 +46,38 @@ function test() {</span>
<a href="#l34.4"></a><span id="l34.4">       node.value = aValue;</span>
<a href="#l34.5"></a><span id="l34.5">     else if (typeof aValue == &quot;boolean&quot;)</span>
<a href="#l34.6"></a><span id="l34.6">       node.checked = aValue;</span>
<a href="#l34.7"></a><span id="l34.7">     else if (typeof aValue == &quot;number&quot;)</span>
<a href="#l34.8"></a><span id="l34.8">       node.selectedIndex = aValue;</span>
<a href="#l34.9"></a><span id="l34.9">     else if (node instanceof Components.interfaces.nsIDOMHTMLInputElement &amp;&amp; node.type == &quot;file&quot;)</span>
<a href="#l34.10"></a><span id="l34.10">       node.mozSetFileNameArray(aValue, aValue.length);</span>
<a href="#l34.11"></a><span id="l34.11">     else</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-      Array.forEach(node.options, function(aOpt, aIx)</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+      Array.forEach(node.options, (aOpt, aIx) =&gt;</span>
<a href="#l34.14"></a><span id="l34.14">                                     (aOpt.selected = aValue.indexOf(aIx) &gt; -1));</span>
<a href="#l34.15"></a><span id="l34.15">   }</span>
<a href="#l34.16"></a><span id="l34.16"> </span>
<a href="#l34.17"></a><span id="l34.17">   function compareFormValue(aTab, aQuery, aValue) {</span>
<a href="#l34.18"></a><span id="l34.18">     let node = getElementByXPath(aTab, aQuery);</span>
<a href="#l34.19"></a><span id="l34.19">     if (!node)</span>
<a href="#l34.20"></a><span id="l34.20">       return false;</span>
<a href="#l34.21"></a><span id="l34.21">     if (node instanceof Components.interfaces.nsIDOMHTMLInputElement) {</span>
<a href="#l34.22"></a><span id="l34.22">       if (node.type == &quot;file&quot;) {</span>
<a href="#l34.23"></a><span id="l34.23">         let fileNames = node.mozGetFileNameArray();</span>
<a href="#l34.24"></a><span id="l34.24">         return fileNames.length == aValue.length &amp;&amp;</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineminus">-               Array.every(fileNames, function(aFile) aValue.indexOf(aFile) &gt;= 0);</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineplus">+               Array.every(fileNames, aFile =&gt; aValue.indexOf(aFile) &gt;= 0);</span>
<a href="#l34.27"></a><span id="l34.27">       }</span>
<a href="#l34.28"></a><span id="l34.28">       return aValue == (node.type == &quot;checkbox&quot; || node.type == &quot;radio&quot; ?</span>
<a href="#l34.29"></a><span id="l34.29">                         node.checked : node.value);</span>
<a href="#l34.30"></a><span id="l34.30">     }</span>
<a href="#l34.31"></a><span id="l34.31">     if (node instanceof Components.interfaces.nsIDOMHTMLTextAreaElement)</span>
<a href="#l34.32"></a><span id="l34.32">       return aValue == node.value;</span>
<a href="#l34.33"></a><span id="l34.33">     if (!node.multiple)</span>
<a href="#l34.34"></a><span id="l34.34">       return aValue == node.selectedIndex;</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-    return Array.every(node.options, function(aOpt, aIx)</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineplus">+    return Array.every(node.options, (aOpt, aIx) =&gt;</span>
<a href="#l34.37"></a><span id="l34.37">                                        (aValue.indexOf(aIx) &gt; -1) == aOpt.selected);</span>
<a href="#l34.38"></a><span id="l34.38">   }</span>
<a href="#l34.39"></a><span id="l34.39"> </span>
<a href="#l34.40"></a><span id="l34.40">   // test setup</span>
<a href="#l34.41"></a><span id="l34.41">   let tabbrowser = getBrowser();</span>
<a href="#l34.42"></a><span id="l34.42">   waitForExplicitFinish();</span>
<a href="#l34.43"></a><span id="l34.43"> </span>
<a href="#l34.44"></a><span id="l34.44">   // make sure we don't save form data at all (except for tab duplication)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/suite/common/tests/browser/browser_350525.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_350525.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -13,51 +13,51 @@ function test() {</span>
<a href="#l35.4"></a><span id="l35.4">   </span>
<a href="#l35.5"></a><span id="l35.5">   ////////////////////////////</span>
<a href="#l35.6"></a><span id="l35.6">   // setWindowValue, et al. //</span>
<a href="#l35.7"></a><span id="l35.7">   ////////////////////////////</span>
<a href="#l35.8"></a><span id="l35.8">   let key = &quot;Unique name: &quot; + Date.now();</span>
<a href="#l35.9"></a><span id="l35.9">   let value = &quot;Unique value: &quot; + Math.random();</span>
<a href="#l35.10"></a><span id="l35.10">   </span>
<a href="#l35.11"></a><span id="l35.11">   // test adding</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-  ok(test(function() ss.setWindowValue(window, key, value)), &quot;set a window value&quot;);</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  ok(test(() =&gt; ss.setWindowValue(window, key, value)), &quot;set a window value&quot;);</span>
<a href="#l35.14"></a><span id="l35.14">   </span>
<a href="#l35.15"></a><span id="l35.15">   // test retrieving</span>
<a href="#l35.16"></a><span id="l35.16">   is(ss.getWindowValue(window, key), value, &quot;stored window value matches original&quot;);</span>
<a href="#l35.17"></a><span id="l35.17">   </span>
<a href="#l35.18"></a><span id="l35.18">   // test deleting </span>
<a href="#l35.19"></a><span id="l35.19" class="difflineminus">-  ok(test(function() ss.deleteWindowValue(window, key)), &quot;delete the window value&quot;);</span>
<a href="#l35.20"></a><span id="l35.20" class="difflineplus">+  ok(test(() =&gt; ss.deleteWindowValue(window, key)), &quot;delete the window value&quot;);</span>
<a href="#l35.21"></a><span id="l35.21">   </span>
<a href="#l35.22"></a><span id="l35.22">   // value should not exist post-delete</span>
<a href="#l35.23"></a><span id="l35.23">   is(ss.getWindowValue(window, key), &quot;&quot;, &quot;window value was deleted&quot;);</span>
<a href="#l35.24"></a><span id="l35.24">   </span>
<a href="#l35.25"></a><span id="l35.25">   // test deleting a non-existent value</span>
<a href="#l35.26"></a><span id="l35.26" class="difflineminus">-  ok(test(function() ss.deleteWindowValue(window, key)), &quot;delete non-existent window value&quot;);</span>
<a href="#l35.27"></a><span id="l35.27" class="difflineplus">+  ok(test(() =&gt; ss.deleteWindowValue(window, key)), &quot;delete non-existent window value&quot;);</span>
<a href="#l35.28"></a><span id="l35.28">   </span>
<a href="#l35.29"></a><span id="l35.29">   /////////////////////////</span>
<a href="#l35.30"></a><span id="l35.30">   // setTabValue, et al. //</span>
<a href="#l35.31"></a><span id="l35.31">   /////////////////////////</span>
<a href="#l35.32"></a><span id="l35.32">   key = &quot;Unique name: &quot; + Math.random();</span>
<a href="#l35.33"></a><span id="l35.33">   value = &quot;Unique value: &quot; + Date.now();</span>
<a href="#l35.34"></a><span id="l35.34">   let tab = getBrowser().addTab();</span>
<a href="#l35.35"></a><span id="l35.35">   tab.linkedBrowser.stop();</span>
<a href="#l35.36"></a><span id="l35.36">   </span>
<a href="#l35.37"></a><span id="l35.37">   // test adding</span>
<a href="#l35.38"></a><span id="l35.38" class="difflineminus">-  ok(test(function() ss.setTabValue(tab, key, value)), &quot;store a tab value&quot;);</span>
<a href="#l35.39"></a><span id="l35.39" class="difflineplus">+  ok(test(() =&gt; ss.setTabValue(tab, key, value)), &quot;store a tab value&quot;);</span>
<a href="#l35.40"></a><span id="l35.40">   </span>
<a href="#l35.41"></a><span id="l35.41">   // test retrieving</span>
<a href="#l35.42"></a><span id="l35.42">   is(ss.getTabValue(tab, key), value, &quot;stored tab value match original&quot;);</span>
<a href="#l35.43"></a><span id="l35.43">   </span>
<a href="#l35.44"></a><span id="l35.44">   // test deleting </span>
<a href="#l35.45"></a><span id="l35.45" class="difflineminus">-  ok(test(function() ss.deleteTabValue(tab, key)), &quot;delete the tab value&quot;);</span>
<a href="#l35.46"></a><span id="l35.46" class="difflineplus">+  ok(test(() =&gt; ss.deleteTabValue(tab, key)), &quot;delete the tab value&quot;);</span>
<a href="#l35.47"></a><span id="l35.47">   // value should not exist post-delete</span>
<a href="#l35.48"></a><span id="l35.48">   is(ss.getTabValue(tab, key), &quot;&quot;, &quot;tab value was deleted&quot;);</span>
<a href="#l35.49"></a><span id="l35.49">   </span>
<a href="#l35.50"></a><span id="l35.50">   // test deleting a non-existent value</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineminus">-  ok(test(function() ss.deleteTabValue(tab, key)), &quot;delete non-existent tab value&quot;);</span>
<a href="#l35.52"></a><span id="l35.52" class="difflineplus">+  ok(test(() =&gt; ss.deleteTabValue(tab, key)), &quot;delete non-existent tab value&quot;);</span>
<a href="#l35.53"></a><span id="l35.53">   </span>
<a href="#l35.54"></a><span id="l35.54">   // clean up</span>
<a href="#l35.55"></a><span id="l35.55">   getBrowser().removeTab(tab);</span>
<a href="#l35.56"></a><span id="l35.56">   </span>
<a href="#l35.57"></a><span id="l35.57">   /////////////////////////////////////</span>
<a href="#l35.58"></a><span id="l35.58">   // getClosedTabCount, undoCloseTab //</span>
<a href="#l35.59"></a><span id="l35.59">   /////////////////////////////////////</span>
<a href="#l35.60"></a><span id="l35.60">   </span>
<a href="#l35.61"></a><span id="l35.61" class="difflineat">@@ -78,17 +78,17 @@ function test() {</span>
<a href="#l35.62"></a><span id="l35.62">     // remove tab</span>
<a href="#l35.63"></a><span id="l35.63">     getBrowser().removeTab(tab);</span>
<a href="#l35.64"></a><span id="l35.64">     </span>
<a href="#l35.65"></a><span id="l35.65">     // getClosedTabCount</span>
<a href="#l35.66"></a><span id="l35.66">     var newcount = ss.getClosedTabCount(window);</span>
<a href="#l35.67"></a><span id="l35.67">     ok(newcount &gt; count, &quot;after closing a tab, getClosedTabCount has been incremented&quot;);</span>
<a href="#l35.68"></a><span id="l35.68">     </span>
<a href="#l35.69"></a><span id="l35.69">     // undoCloseTab</span>
<a href="#l35.70"></a><span id="l35.70" class="difflineminus">-    tab = test(function() ss.undoCloseTab(window, 0));</span>
<a href="#l35.71"></a><span id="l35.71" class="difflineplus">+    tab = test(() =&gt; ss.undoCloseTab(window, 0));</span>
<a href="#l35.72"></a><span id="l35.72">     ok(tab, &quot;undoCloseTab doesn't throw&quot;)</span>
<a href="#l35.73"></a><span id="l35.73">     </span>
<a href="#l35.74"></a><span id="l35.74">     tab.linkedBrowser.addEventListener(&quot;load&quot;, function testTabLBLoad2(aEvent) {</span>
<a href="#l35.75"></a><span id="l35.75">       this.removeEventListener(&quot;load&quot;, testTabLBLoad2, true);</span>
<a href="#l35.76"></a><span id="l35.76">       is(this.currentURI.spec, testURL, &quot;correct tab was reopened&quot;);</span>
<a href="#l35.77"></a><span id="l35.77">       </span>
<a href="#l35.78"></a><span id="l35.78">       // clean up</span>
<a href="#l35.79"></a><span id="l35.79">       if (Services.prefs.prefHasUserValue(&quot;browser.sessionstore.max_tabs_undo&quot;))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/suite/common/tests/browser/browser_354894.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_354894.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -190,17 +190,17 @@ function test() {</span>
<a href="#l36.4"></a><span id="l36.4">     newWin.addEventListener(&quot;load&quot;, function loadListener1(aEvent) {</span>
<a href="#l36.5"></a><span id="l36.5">       newWin.removeEventListener(&quot;load&quot;, loadListener1, false);</span>
<a href="#l36.6"></a><span id="l36.6">       newWin.getBrowser().addEventListener(&quot;pageshow&quot;, function pageshowListener2(aEvent) {</span>
<a href="#l36.7"></a><span id="l36.7">         newWin.getBrowser().removeEventListener(&quot;pageshow&quot;, pageshowListener2, true);</span>
<a href="#l36.8"></a><span id="l36.8">         for each (let url in TEST_URLS) {</span>
<a href="#l36.9"></a><span id="l36.9">           newWin.getBrowser().addTab(url);</span>
<a href="#l36.10"></a><span id="l36.10">         }</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-        executeSoon(function() testFn(newWin));</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+        executeSoon(() =&gt; testFn(newWin));</span>
<a href="#l36.14"></a><span id="l36.14">       }, true);</span>
<a href="#l36.15"></a><span id="l36.15">     }, false);</span>
<a href="#l36.16"></a><span id="l36.16">   }</span>
<a href="#l36.17"></a><span id="l36.17"> </span>
<a href="#l36.18"></a><span id="l36.18">   /**</span>
<a href="#l36.19"></a><span id="l36.19">    * Test 1: Normal in-session restore</span>
<a href="#l36.20"></a><span id="l36.20">    * @note: Non-Mac only</span>
<a href="#l36.21"></a><span id="l36.21">    */</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineat">@@ -410,17 +410,17 @@ function test() {</span>
<a href="#l36.23"></a><span id="l36.23">         ok(!newWin.closed, &quot;First close attempt denied&quot;);</span>
<a href="#l36.24"></a><span id="l36.24">         if (!newWin.closed) {</span>
<a href="#l36.25"></a><span id="l36.25">           newWin.BrowserTryToCloseWindow();</span>
<a href="#l36.26"></a><span id="l36.26">           ok(newWin.closed, &quot;Second close attempt granted&quot;);</span>
<a href="#l36.27"></a><span id="l36.27">         }</span>
<a href="#l36.28"></a><span id="l36.28">       }</span>
<a href="#l36.29"></a><span id="l36.29"> </span>
<a href="#l36.30"></a><span id="l36.30">       if (iteration &lt; NOTIFICATIONS_EXPECTED - 1) {</span>
<a href="#l36.31"></a><span id="l36.31" class="difflineminus">-        executeSoon(function() testMacNotifications(nextFn, ++iteration));</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineplus">+        executeSoon(() =&gt; testMacNotifications(nextFn, ++iteration));</span>
<a href="#l36.33"></a><span id="l36.33">       }</span>
<a href="#l36.34"></a><span id="l36.34">       else {</span>
<a href="#l36.35"></a><span id="l36.35">         executeSoon(nextFn);</span>
<a href="#l36.36"></a><span id="l36.36">       }</span>
<a href="#l36.37"></a><span id="l36.37">     });</span>
<a href="#l36.38"></a><span id="l36.38">   }</span>
<a href="#l36.39"></a><span id="l36.39"> </span>
<a href="#l36.40"></a><span id="l36.40">   // Execution starts here</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/suite/common/tests/browser/browser_408470.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_408470.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -20,17 +20,17 @@ function test() {</span>
<a href="#l37.4"></a><span id="l37.4">       pendingCount++;</span>
<a href="#l37.5"></a><span id="l37.5">       let ssTitle = aSS.title;</span>
<a href="#l37.6"></a><span id="l37.6">       stylesheetSwitchAll(tab.linkedBrowser.contentWindow, ssTitle);</span>
<a href="#l37.7"></a><span id="l37.7">       </span>
<a href="#l37.8"></a><span id="l37.8">       let newTab = ss.duplicateTab(window,tab);</span>
<a href="#l37.9"></a><span id="l37.9">       newTab.linkedBrowser.addEventListener(&quot;load&quot;, function loadListener2(aEvent) {</span>
<a href="#l37.10"></a><span id="l37.10">         newTab.linkedBrowser.removeEventListener(&quot;load&quot;, loadListener2, true);</span>
<a href="#l37.11"></a><span id="l37.11">         let states = Array.map(newTab.linkedBrowser.contentDocument.styleSheets,</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-                               function(aSS) !aSS.disabled);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+                               aSS =&gt; !aSS.disabled);</span>
<a href="#l37.14"></a><span id="l37.14">         let correct = states.indexOf(true) == aIx &amp;&amp; states.indexOf(true, aIx + 1) == -1;</span>
<a href="#l37.15"></a><span id="l37.15">         </span>
<a href="#l37.16"></a><span id="l37.16">         if (/^fail_/.test(ssTitle))</span>
<a href="#l37.17"></a><span id="l37.17">           ok(!correct, &quot;didn't restore stylesheet &quot; + ssTitle);</span>
<a href="#l37.18"></a><span id="l37.18">         else</span>
<a href="#l37.19"></a><span id="l37.19">           ok(correct, &quot;restored stylesheet &quot; + ssTitle);</span>
<a href="#l37.20"></a><span id="l37.20">         </span>
<a href="#l37.21"></a><span id="l37.21">         getBrowser().removeTab(newTab);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/suite/common/tests/browser/browser_461634.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_461634.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -22,18 +22,19 @@ function test() {</span>
<a href="#l38.4"></a><span id="l38.4">   let test_state = { windows: [{ &quot;tabs&quot;: [{ &quot;entries&quot;: [] }], _closedTabs: [</span>
<a href="#l38.5"></a><span id="l38.5">     { state: { entries: [{ url: &quot;http://www.example.net/&quot; }] }, title: FORGET },</span>
<a href="#l38.6"></a><span id="l38.6">     { state: { entries: [{ url: &quot;http://www.example.net/&quot; }] }, title: REMEMBER },</span>
<a href="#l38.7"></a><span id="l38.7">     { state: { entries: [{ url: &quot;http://www.example.net/&quot; }] }, title: FORGET },</span>
<a href="#l38.8"></a><span id="l38.8">     { state: { entries: [{ url: &quot;http://www.example.net/&quot; }] }, title: REMEMBER },</span>
<a href="#l38.9"></a><span id="l38.9">   ] }] };</span>
<a href="#l38.10"></a><span id="l38.10">   let remember_count = 2;</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  function countByTitle(aClosedTabList, aTitle)</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-    aClosedTabList.filter(function(aData) aData.title == aTitle).length;</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+  function countByTitle(aClosedTabList, aTitle) {</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+    return aClosedTabList.filter(aData =&gt; aData.title == aTitle).length;</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineplus">+  }</span>
<a href="#l38.17"></a><span id="l38.17"> </span>
<a href="#l38.18"></a><span id="l38.18">   function testForError(aFunction) {</span>
<a href="#l38.19"></a><span id="l38.19">     try {</span>
<a href="#l38.20"></a><span id="l38.20">       aFunction();</span>
<a href="#l38.21"></a><span id="l38.21">       return false;</span>
<a href="#l38.22"></a><span id="l38.22">     }</span>
<a href="#l38.23"></a><span id="l38.23">     catch (ex) {</span>
<a href="#l38.24"></a><span id="l38.24">       return ex.name == &quot;NS_ERROR_ILLEGAL_VALUE&quot;;</span>
<a href="#l38.25"></a><span id="l38.25" class="difflineat">@@ -54,21 +55,21 @@ function test() {</span>
<a href="#l38.26"></a><span id="l38.26">        &quot;Closed tab list has the expected length&quot;);</span>
<a href="#l38.27"></a><span id="l38.27">     is(countByTitle(closedTabs, FORGET),</span>
<a href="#l38.28"></a><span id="l38.28">        test_state.windows[0]._closedTabs.length - remember_count,</span>
<a href="#l38.29"></a><span id="l38.29">        &quot;The correct amout of tabs are to be forgotten&quot;);</span>
<a href="#l38.30"></a><span id="l38.30">     is(countByTitle(closedTabs, REMEMBER), remember_count,</span>
<a href="#l38.31"></a><span id="l38.31">        &quot;Everything is set up.&quot;);</span>
<a href="#l38.32"></a><span id="l38.32"> </span>
<a href="#l38.33"></a><span id="l38.33">     // all of the following calls with illegal arguments should throw NS_ERROR_ILLEGAL_VALUE</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineminus">-    ok(testForError(function() ss.forgetClosedTab({}, 0)),</span>
<a href="#l38.35"></a><span id="l38.35" class="difflineplus">+    ok(testForError(() =&gt; ss.forgetClosedTab({}, 0)),</span>
<a href="#l38.36"></a><span id="l38.36">        &quot;Invalid window for forgetClosedTab throws&quot;);</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineminus">-    ok(testForError(function() ss.forgetClosedTab(newWin, -1)),</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineplus">+    ok(testForError(() =&gt; ss.forgetClosedTab(newWin, -1)),</span>
<a href="#l38.39"></a><span id="l38.39">        &quot;Invalid tab for forgetClosedTab throws&quot;);</span>
<a href="#l38.40"></a><span id="l38.40" class="difflineminus">-    ok(testForError(function() ss.forgetClosedTab(newWin, test_state.windows[0]._closedTabs.length + 1)),</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineplus">+    ok(testForError(() =&gt; ss.forgetClosedTab(newWin, test_state.windows[0]._closedTabs.length + 1)),</span>
<a href="#l38.42"></a><span id="l38.42">        &quot;Invalid tab for forgetClosedTab throws&quot;);</span>
<a href="#l38.43"></a><span id="l38.43"> </span>
<a href="#l38.44"></a><span id="l38.44">     // Remove third tab, then first tab</span>
<a href="#l38.45"></a><span id="l38.45">     ss.forgetClosedTab(newWin, 2);</span>
<a href="#l38.46"></a><span id="l38.46">     ss.forgetClosedTab(newWin, null);</span>
<a href="#l38.47"></a><span id="l38.47"> </span>
<a href="#l38.48"></a><span id="l38.48">     closedTabs = JSON.parse(ss.getClosedTabData(newWin));</span>
<a href="#l38.49"></a><span id="l38.49">     is(closedTabs.length, remember_count,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/suite/common/tests/browser/browser_form_restore_events.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_form_restore_events.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -28,17 +28,17 @@ function test() {</span>
<a href="#l39.4"></a><span id="l39.4">     doc.getElementById(&quot;modify04&quot;).value += &quot; &quot; + Date.now();</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6">     // file</span>
<a href="#l39.7"></a><span id="l39.7">     doc.getElementById(&quot;modify05&quot;).value = file.path;</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9">     // select</span>
<a href="#l39.10"></a><span id="l39.10">     doc.getElementById(&quot;modify06&quot;).selectedIndex = 1;</span>
<a href="#l39.11"></a><span id="l39.11">     var multipleChange = doc.getElementById(&quot;modify07&quot;);</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    Array.forEach(multipleChange.options, function(option) option.selected = true);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+    Array.forEach(multipleChange.options, option =&gt; option.selected = true);</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15">     // checkbox</span>
<a href="#l39.16"></a><span id="l39.16">     doc.getElementById(&quot;modify08&quot;).checked = true;</span>
<a href="#l39.17"></a><span id="l39.17">     doc.getElementById(&quot;modify09&quot;).checked = false;</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19">     // radio</span>
<a href="#l39.20"></a><span id="l39.20">     // select one then another in the same group - only last one should get event on restore</span>
<a href="#l39.21"></a><span id="l39.21">     doc.getElementById(&quot;modify10&quot;).checked = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/suite/common/tests/browser/head.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/suite/common/tests/browser/head.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -32,17 +32,17 @@ function waitForBrowserState(aState, aSe</span>
<a href="#l40.4"></a><span id="l40.4">   let windows = [window];</span>
<a href="#l40.5"></a><span id="l40.5">   let tabsRestored = 0;</span>
<a href="#l40.6"></a><span id="l40.6">   let expectedTabsRestored = 0;</span>
<a href="#l40.7"></a><span id="l40.7">   let expectedWindows = aState.windows.length;</span>
<a href="#l40.8"></a><span id="l40.8">   let windowsOpen = 1;</span>
<a href="#l40.9"></a><span id="l40.9">   let listening = false;</span>
<a href="#l40.10"></a><span id="l40.10">   let windowObserving = false;</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-  aState.windows.forEach(function(winState) expectedTabsRestored += winState.tabs.length);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+  aState.windows.forEach(winState =&gt; expectedTabsRestored += winState.tabs.length);</span>
<a href="#l40.14"></a><span id="l40.14"> </span>
<a href="#l40.15"></a><span id="l40.15">   function onSSTabRestored(aEvent) {</span>
<a href="#l40.16"></a><span id="l40.16">     if (++tabsRestored == expectedTabsRestored) {</span>
<a href="#l40.17"></a><span id="l40.17">       // Remove the event listener from each window</span>
<a href="#l40.18"></a><span id="l40.18">       windows.forEach(function(win) {</span>
<a href="#l40.19"></a><span id="l40.19">         win.getBrowser().tabContainer.removeEventListener(&quot;SSTabRestored&quot;, onSSTabRestored, true);</span>
<a href="#l40.20"></a><span id="l40.20">       });</span>
<a href="#l40.21"></a><span id="l40.21">       listening = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/suite/mailnews/mailWidgets.xml</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/suite/mailnews/mailWidgets.xml</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l41.4"></a><span id="l41.4">   &lt;!-- dummy widget to force this file to load --&gt;</span>
<a href="#l41.5"></a><span id="l41.5">   &lt;binding id=&quot;dummy&quot; extends=&quot;xul:box&quot;/&gt;</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7">   &lt;!-- temporary holding place for horizontal list --&gt;</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9">   &lt;binding id=&quot;extdescription&quot; extends=&quot;chrome://global/content/bindings/listbox.xml#listbox-base&quot;&gt;</span>
<a href="#l41.10"></a><span id="l41.10">     &lt;implementation&gt;</span>
<a href="#l41.11"></a><span id="l41.11">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-          this.children.filter(function(aChild) aChild.getAttribute(&quot;selected&quot;) == &quot;true&quot;)</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+          this.children.filter(aChild =&gt; aChild.getAttribute(&quot;selected&quot;) == &quot;true&quot;)</span>
<a href="#l41.14"></a><span id="l41.14">                        .forEach(this.selectedItems.push, this.selectedItems);</span>
<a href="#l41.15"></a><span id="l41.15">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l41.16"></a><span id="l41.16"> </span>
<a href="#l41.17"></a><span id="l41.17">       &lt;!-- ///////////////// public members ///////////////// --&gt;</span>
<a href="#l41.18"></a><span id="l41.18"> </span>
<a href="#l41.19"></a><span id="l41.19">       &lt;property name=&quot;itemCount&quot; readonly=&quot;true&quot;</span>
<a href="#l41.20"></a><span id="l41.20">                 onget=&quot;return this.children.length;&quot;/&gt;</span>
<a href="#l41.21"></a><span id="l41.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/suite/modules/PlacesUIUtils.jsm</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/suite/modules/PlacesUIUtils.jsm</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -1333,82 +1333,102 @@ XPCOMUtils.defineLazyServiceGetter(this,</span>
<a href="#l42.4"></a><span id="l42.4">  *</span>
<a href="#l42.5"></a><span id="l42.5">  * This object will be removed once enough users are converted to the new API.</span>
<a href="#l42.6"></a><span id="l42.6">  */</span>
<a href="#l42.7"></a><span id="l42.7"> XPCOMUtils.defineLazyGetter(PlacesUIUtils, &quot;ptm&quot;, function() {</span>
<a href="#l42.8"></a><span id="l42.8">   // Ensure PlacesUtils is imported in scope.</span>
<a href="#l42.9"></a><span id="l42.9">   PlacesUtils;</span>
<a href="#l42.10"></a><span id="l42.10"> </span>
<a href="#l42.11"></a><span id="l42.11">   return {</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-    aggregateTransactions: function(aName, aTransactions)</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineminus">-      new PlacesAggregatedTransaction(aName, aTransactions),</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineplus">+    aggregateTransactions: function(aName, aTransactions) {</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineplus">+      return new PlacesAggregatedTransaction(aName, aTransactions);</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineplus">+    },</span>
<a href="#l42.17"></a><span id="l42.17"> </span>
<a href="#l42.18"></a><span id="l42.18">     createFolder: function(aName, aContainer, aIndex, aAnnotations,</span>
<a href="#l42.19"></a><span id="l42.19" class="difflineminus">-                           aChildItemsTransactions)</span>
<a href="#l42.20"></a><span id="l42.20" class="difflineminus">-      new PlacesCreateFolderTransaction(aName, aContainer, aIndex, aAnnotations,</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineminus">-                                        aChildItemsTransactions),</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineplus">+                           aChildItemsTransactions) {</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineplus">+      return new PlacesCreateFolderTransaction(aName, aContainer, aIndex, aAnnotations,</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineplus">+                                               aChildItemsTransactions);</span>
<a href="#l42.25"></a><span id="l42.25" class="difflineplus">+    },</span>
<a href="#l42.26"></a><span id="l42.26"> </span>
<a href="#l42.27"></a><span id="l42.27">     createItem: function(aURI, aContainer, aIndex, aTitle, aKeyword,</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineminus">-                         aAnnotations, aChildTransactions)</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineminus">-      new PlacesCreateBookmarkTransaction(aURI, aContainer, aIndex, aTitle,</span>
<a href="#l42.30"></a><span id="l42.30" class="difflineminus">-                                          aKeyword, aAnnotations,</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-                                          aChildTransactions),</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+                         aAnnotations, aChildTransactions) {</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineplus">+      return new PlacesCreateBookmarkTransaction(aURI, aContainer, aIndex, aTitle,</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineplus">+                                                 aKeyword, aAnnotations,</span>
<a href="#l42.35"></a><span id="l42.35" class="difflineplus">+                                                 aChildTransactions);</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineplus">+    },</span>
<a href="#l42.37"></a><span id="l42.37"> </span>
<a href="#l42.38"></a><span id="l42.38" class="difflineminus">-    createSeparator: function(aContainer, aIndex)</span>
<a href="#l42.39"></a><span id="l42.39" class="difflineminus">-      new PlacesCreateSeparatorTransaction(aContainer, aIndex),</span>
<a href="#l42.40"></a><span id="l42.40" class="difflineplus">+    createSeparator: function(aContainer, aIndex) {</span>
<a href="#l42.41"></a><span id="l42.41" class="difflineplus">+      return new PlacesCreateSeparatorTransaction(aContainer, aIndex);</span>
<a href="#l42.42"></a><span id="l42.42" class="difflineplus">+    },</span>
<a href="#l42.43"></a><span id="l42.43"> </span>
<a href="#l42.44"></a><span id="l42.44">     createLivemark: function(aFeedURI, aSiteURI, aName, aContainer, aIndex,</span>
<a href="#l42.45"></a><span id="l42.45" class="difflineminus">-                             aAnnotations)</span>
<a href="#l42.46"></a><span id="l42.46" class="difflineminus">-      new PlacesCreateLivemarkTransaction(aFeedURI, aSiteURI, aName, aContainer,</span>
<a href="#l42.47"></a><span id="l42.47" class="difflineminus">-                                          aIndex, aAnnotations),</span>
<a href="#l42.48"></a><span id="l42.48" class="difflineplus">+                             aAnnotations) {</span>
<a href="#l42.49"></a><span id="l42.49" class="difflineplus">+      return new PlacesCreateLivemarkTransaction(aFeedURI, aSiteURI, aName, aContainer,</span>
<a href="#l42.50"></a><span id="l42.50" class="difflineplus">+                                                 aIndex, aAnnotations);</span>
<a href="#l42.51"></a><span id="l42.51" class="difflineplus">+    },</span>
<a href="#l42.52"></a><span id="l42.52"> </span>
<a href="#l42.53"></a><span id="l42.53" class="difflineminus">-    moveItem: function(aItemId, aNewContainer, aNewIndex)</span>
<a href="#l42.54"></a><span id="l42.54" class="difflineminus">-      new PlacesMoveItemTransaction(aItemId, aNewContainer, aNewIndex),</span>
<a href="#l42.55"></a><span id="l42.55" class="difflineplus">+    moveItem: function(aItemId, aNewContainer, aNewIndex) {</span>
<a href="#l42.56"></a><span id="l42.56" class="difflineplus">+      return new PlacesMoveItemTransaction(aItemId, aNewContainer, aNewIndex);</span>
<a href="#l42.57"></a><span id="l42.57" class="difflineplus">+    },</span>
<a href="#l42.58"></a><span id="l42.58"> </span>
<a href="#l42.59"></a><span id="l42.59" class="difflineminus">-    removeItem: function(aItemId)</span>
<a href="#l42.60"></a><span id="l42.60" class="difflineminus">-      new PlacesRemoveItemTransaction(aItemId),</span>
<a href="#l42.61"></a><span id="l42.61" class="difflineplus">+    removeItem: function(aItemId) {</span>
<a href="#l42.62"></a><span id="l42.62" class="difflineplus">+      return new PlacesRemoveItemTransaction(aItemId);</span>
<a href="#l42.63"></a><span id="l42.63" class="difflineplus">+    },</span>
<a href="#l42.64"></a><span id="l42.64"> </span>
<a href="#l42.65"></a><span id="l42.65" class="difflineminus">-    editItemTitle: function(aItemId, aNewTitle)</span>
<a href="#l42.66"></a><span id="l42.66" class="difflineminus">-      new PlacesEditItemTitleTransaction(aItemId, aNewTitle),</span>
<a href="#l42.67"></a><span id="l42.67" class="difflineplus">+    editItemTitle: function(aItemId, aNewTitle) {</span>
<a href="#l42.68"></a><span id="l42.68" class="difflineplus">+      return new PlacesEditItemTitleTransaction(aItemId, aNewTitle);</span>
<a href="#l42.69"></a><span id="l42.69" class="difflineplus">+    },</span>
<a href="#l42.70"></a><span id="l42.70"> </span>
<a href="#l42.71"></a><span id="l42.71" class="difflineminus">-    editBookmarkURI: function(aItemId, aNewURI)</span>
<a href="#l42.72"></a><span id="l42.72" class="difflineminus">-      new PlacesEditBookmarkURITransaction(aItemId, aNewURI),</span>
<a href="#l42.73"></a><span id="l42.73" class="difflineplus">+    editBookmarkURI: function(aItemId, aNewURI) {</span>
<a href="#l42.74"></a><span id="l42.74" class="difflineplus">+      return new PlacesEditBookmarkURITransaction(aItemId, aNewURI);</span>
<a href="#l42.75"></a><span id="l42.75" class="difflineplus">+    },</span>
<a href="#l42.76"></a><span id="l42.76"> </span>
<a href="#l42.77"></a><span id="l42.77" class="difflineminus">-    setItemAnnotation: function(aItemId, aAnnotationObject)</span>
<a href="#l42.78"></a><span id="l42.78" class="difflineminus">-      new PlacesSetItemAnnotationTransaction(aItemId, aAnnotationObject),</span>
<a href="#l42.79"></a><span id="l42.79" class="difflineplus">+    setItemAnnotation: function(aItemId, aAnnotationObject) {</span>
<a href="#l42.80"></a><span id="l42.80" class="difflineplus">+      return new PlacesSetItemAnnotationTransaction(aItemId, aAnnotationObject);</span>
<a href="#l42.81"></a><span id="l42.81" class="difflineplus">+    },</span>
<a href="#l42.82"></a><span id="l42.82"> </span>
<a href="#l42.83"></a><span id="l42.83" class="difflineminus">-    setPageAnnotation: function(aURI, aAnnotationObject)</span>
<a href="#l42.84"></a><span id="l42.84" class="difflineminus">-      new PlacesSetPageAnnotationTransaction(aURI, aAnnotationObject),</span>
<a href="#l42.85"></a><span id="l42.85" class="difflineplus">+    setPageAnnotation: function(aURI, aAnnotationObject) {</span>
<a href="#l42.86"></a><span id="l42.86" class="difflineplus">+      return new PlacesSetPageAnnotationTransaction(aURI, aAnnotationObject);</span>
<a href="#l42.87"></a><span id="l42.87" class="difflineplus">+    },</span>
<a href="#l42.88"></a><span id="l42.88"> </span>
<a href="#l42.89"></a><span id="l42.89" class="difflineminus">-    editBookmarkKeyword: function(aItemId, aNewKeyword)</span>
<a href="#l42.90"></a><span id="l42.90" class="difflineminus">-      new PlacesEditBookmarkKeywordTransaction(aItemId, aNewKeyword),</span>
<a href="#l42.91"></a><span id="l42.91" class="difflineplus">+    editBookmarkKeyword: function(aItemId, aNewKeyword) {</span>
<a href="#l42.92"></a><span id="l42.92" class="difflineplus">+      return new PlacesEditBookmarkKeywordTransaction(aItemId, aNewKeyword);</span>
<a href="#l42.93"></a><span id="l42.93" class="difflineplus">+    },</span>
<a href="#l42.94"></a><span id="l42.94"> </span>
<a href="#l42.95"></a><span id="l42.95" class="difflineminus">-    editBookmarkPostData: function(aItemId, aPostData)</span>
<a href="#l42.96"></a><span id="l42.96" class="difflineminus">-      new PlacesEditBookmarkPostDataTransaction(aItemId, aPostData),</span>
<a href="#l42.97"></a><span id="l42.97" class="difflineplus">+    editBookmarkPostData: function(aItemId, aPostData) {</span>
<a href="#l42.98"></a><span id="l42.98" class="difflineplus">+      return new PlacesEditBookmarkPostDataTransaction(aItemId, aPostData);</span>
<a href="#l42.99"></a><span id="l42.99" class="difflineplus">+    },</span>
<a href="#l42.100"></a><span id="l42.100"> </span>
<a href="#l42.101"></a><span id="l42.101" class="difflineminus">-    editLivemarkSiteURI: function(aLivemarkId, aSiteURI)</span>
<a href="#l42.102"></a><span id="l42.102" class="difflineminus">-      new PlacesEditLivemarkSiteURITransaction(aLivemarkId, aSiteURI),</span>
<a href="#l42.103"></a><span id="l42.103" class="difflineplus">+    editLivemarkSiteURI: function(aLivemarkId, aSiteURI) {</span>
<a href="#l42.104"></a><span id="l42.104" class="difflineplus">+      return new PlacesEditLivemarkSiteURITransaction(aLivemarkId, aSiteURI);</span>
<a href="#l42.105"></a><span id="l42.105" class="difflineplus">+    },</span>
<a href="#l42.106"></a><span id="l42.106"> </span>
<a href="#l42.107"></a><span id="l42.107" class="difflineminus">-    editLivemarkFeedURI: function(aLivemarkId, aFeedURI)</span>
<a href="#l42.108"></a><span id="l42.108" class="difflineminus">-      new PlacesEditLivemarkFeedURITransaction(aLivemarkId, aFeedURI),</span>
<a href="#l42.109"></a><span id="l42.109" class="difflineplus">+    editLivemarkFeedURI: function(aLivemarkId, aFeedURI) {</span>
<a href="#l42.110"></a><span id="l42.110" class="difflineplus">+      return new PlacesEditLivemarkFeedURITransaction(aLivemarkId, aFeedURI);</span>
<a href="#l42.111"></a><span id="l42.111" class="difflineplus">+    },</span>
<a href="#l42.112"></a><span id="l42.112"> </span>
<a href="#l42.113"></a><span id="l42.113" class="difflineminus">-    editItemDateAdded: function(aItemId, aNewDateAdded)</span>
<a href="#l42.114"></a><span id="l42.114" class="difflineminus">-      new PlacesEditItemDateAddedTransaction(aItemId, aNewDateAdded),</span>
<a href="#l42.115"></a><span id="l42.115" class="difflineplus">+    editItemDateAdded: function(aItemId, aNewDateAdded) {</span>
<a href="#l42.116"></a><span id="l42.116" class="difflineplus">+      return new PlacesEditItemDateAddedTransaction(aItemId, aNewDateAdded);</span>
<a href="#l42.117"></a><span id="l42.117" class="difflineplus">+    },</span>
<a href="#l42.118"></a><span id="l42.118"> </span>
<a href="#l42.119"></a><span id="l42.119" class="difflineminus">-    editItemLastModified: function(aItemId, aNewLastModified)</span>
<a href="#l42.120"></a><span id="l42.120" class="difflineminus">-      new PlacesEditItemLastModifiedTransaction(aItemId, aNewLastModified),</span>
<a href="#l42.121"></a><span id="l42.121" class="difflineplus">+    editItemLastModified: function(aItemId, aNewLastModified) {</span>
<a href="#l42.122"></a><span id="l42.122" class="difflineplus">+      return new PlacesEditItemLastModifiedTransaction(aItemId, aNewLastModified);</span>
<a href="#l42.123"></a><span id="l42.123" class="difflineplus">+    },</span>
<a href="#l42.124"></a><span id="l42.124"> </span>
<a href="#l42.125"></a><span id="l42.125" class="difflineminus">-    sortFolderByName: function(aFolderId)</span>
<a href="#l42.126"></a><span id="l42.126" class="difflineminus">-      new PlacesSortFolderByNameTransaction(aFolderId),</span>
<a href="#l42.127"></a><span id="l42.127" class="difflineplus">+    sortFolderByName: function(aFolderId) {</span>
<a href="#l42.128"></a><span id="l42.128" class="difflineplus">+      return new PlacesSortFolderByNameTransaction(aFolderId);</span>
<a href="#l42.129"></a><span id="l42.129" class="difflineplus">+    },</span>
<a href="#l42.130"></a><span id="l42.130"> </span>
<a href="#l42.131"></a><span id="l42.131" class="difflineminus">-    tagURI: function(aURI, aTags)</span>
<a href="#l42.132"></a><span id="l42.132" class="difflineminus">-      new PlacesTagURITransaction(aURI, aTags),</span>
<a href="#l42.133"></a><span id="l42.133" class="difflineplus">+    tagURI: function(aURI, aTags) {</span>
<a href="#l42.134"></a><span id="l42.134" class="difflineplus">+      return new PlacesTagURITransaction(aURI, aTags);</span>
<a href="#l42.135"></a><span id="l42.135" class="difflineplus">+    },</span>
<a href="#l42.136"></a><span id="l42.136"> </span>
<a href="#l42.137"></a><span id="l42.137" class="difflineminus">-    untagURI: function(aURI, aTags)</span>
<a href="#l42.138"></a><span id="l42.138" class="difflineminus">-      new PlacesUntagURITransaction(aURI, aTags),</span>
<a href="#l42.139"></a><span id="l42.139" class="difflineplus">+    untagURI: function(aURI, aTags) {</span>
<a href="#l42.140"></a><span id="l42.140" class="difflineplus">+      return new PlacesUntagURITransaction(aURI, aTags);</span>
<a href="#l42.141"></a><span id="l42.141" class="difflineplus">+    },</span>
<a href="#l42.142"></a><span id="l42.142"> </span>
<a href="#l42.143"></a><span id="l42.143">    /**</span>
<a href="#l42.144"></a><span id="l42.144">     * Transaction for editing the description of a bookmark or a folder.</span>
<a href="#l42.145"></a><span id="l42.145">     *</span>
<a href="#l42.146"></a><span id="l42.146">     * @param aItemId</span>
<a href="#l42.147"></a><span id="l42.147">     *        id of the item to edit.</span>
<a href="#l42.148"></a><span id="l42.148">     * @param aDescription</span>
<a href="#l42.149"></a><span id="l42.149">     *        new description.</span>
<a href="#l42.150"></a><span id="l42.150" class="difflineat">@@ -1422,60 +1442,76 @@ XPCOMUtils.defineLazyGetter(PlacesUIUtil</span>
<a href="#l42.151"></a><span id="l42.151">                       value: aDescription,</span>
<a href="#l42.152"></a><span id="l42.152">                       expires: Components.interfaces.nsIAnnotationService.EXPIRE_NEVER };</span>
<a href="#l42.153"></a><span id="l42.153">       return new PlacesSetItemAnnotationTransaction(aItemId, annoObj);</span>
<a href="#l42.154"></a><span id="l42.154">     },</span>
<a href="#l42.155"></a><span id="l42.155"> </span>
<a href="#l42.156"></a><span id="l42.156">     ////////////////////////////////////////////////////////////////////////////</span>
<a href="#l42.157"></a><span id="l42.157">     //// nsITransactionManager forwarders.</span>
<a href="#l42.158"></a><span id="l42.158"> </span>
<a href="#l42.159"></a><span id="l42.159" class="difflineminus">-    beginBatch: function()</span>
<a href="#l42.160"></a><span id="l42.160" class="difflineminus">-      PlacesUtils.transactionManager.beginBatch(null),</span>
<a href="#l42.161"></a><span id="l42.161" class="difflineplus">+    beginBatch: function() {</span>
<a href="#l42.162"></a><span id="l42.162" class="difflineplus">+      PlacesUtils.transactionManager.beginBatch(null);</span>
<a href="#l42.163"></a><span id="l42.163" class="difflineplus">+    },</span>
<a href="#l42.164"></a><span id="l42.164"> </span>
<a href="#l42.165"></a><span id="l42.165" class="difflineminus">-    endBatch: function()</span>
<a href="#l42.166"></a><span id="l42.166" class="difflineminus">-      PlacesUtils.transactionManager.endBatch(false),</span>
<a href="#l42.167"></a><span id="l42.167" class="difflineplus">+    endBatch: function() {</span>
<a href="#l42.168"></a><span id="l42.168" class="difflineplus">+      PlacesUtils.transactionManager.endBatch(false);</span>
<a href="#l42.169"></a><span id="l42.169" class="difflineplus">+    },</span>
<a href="#l42.170"></a><span id="l42.170"> </span>
<a href="#l42.171"></a><span id="l42.171" class="difflineminus">-    doTransaction: function(txn)</span>
<a href="#l42.172"></a><span id="l42.172" class="difflineminus">-      PlacesUtils.transactionManager.doTransaction(txn),</span>
<a href="#l42.173"></a><span id="l42.173" class="difflineplus">+    doTransaction: function(txn) {</span>
<a href="#l42.174"></a><span id="l42.174" class="difflineplus">+      PlacesUtils.transactionManager.doTransaction(txn);</span>
<a href="#l42.175"></a><span id="l42.175" class="difflineplus">+    },</span>
<a href="#l42.176"></a><span id="l42.176"> </span>
<a href="#l42.177"></a><span id="l42.177" class="difflineminus">-    undoTransaction: function()</span>
<a href="#l42.178"></a><span id="l42.178" class="difflineminus">-      PlacesUtils.transactionManager.undoTransaction(),</span>
<a href="#l42.179"></a><span id="l42.179" class="difflineplus">+    undoTransaction: function() {</span>
<a href="#l42.180"></a><span id="l42.180" class="difflineplus">+      PlacesUtils.transactionManager.undoTransaction();</span>
<a href="#l42.181"></a><span id="l42.181" class="difflineplus">+    },</span>
<a href="#l42.182"></a><span id="l42.182"> </span>
<a href="#l42.183"></a><span id="l42.183" class="difflineminus">-    redoTransaction: function()</span>
<a href="#l42.184"></a><span id="l42.184" class="difflineminus">-      PlacesUtils.transactionManager.redoTransaction(),</span>
<a href="#l42.185"></a><span id="l42.185" class="difflineplus">+    redoTransaction: function() {</span>
<a href="#l42.186"></a><span id="l42.186" class="difflineplus">+      PlacesUtils.transactionManager.redoTransaction();</span>
<a href="#l42.187"></a><span id="l42.187" class="difflineplus">+    },</span>
<a href="#l42.188"></a><span id="l42.188"> </span>
<a href="#l42.189"></a><span id="l42.189" class="difflineminus">-    get numberOfUndoItems()</span>
<a href="#l42.190"></a><span id="l42.190" class="difflineminus">-      PlacesUtils.transactionManager.numberOfUndoItems,</span>
<a href="#l42.191"></a><span id="l42.191" class="difflineminus">-    get numberOfRedoItems()</span>
<a href="#l42.192"></a><span id="l42.192" class="difflineminus">-      PlacesUtils.transactionManager.numberOfRedoItems,</span>
<a href="#l42.193"></a><span id="l42.193" class="difflineminus">-    get maxTransactionCount()</span>
<a href="#l42.194"></a><span id="l42.194" class="difflineminus">-      PlacesUtils.transactionManager.maxTransactionCount,</span>
<a href="#l42.195"></a><span id="l42.195" class="difflineminus">-    set maxTransactionCount(val)</span>
<a href="#l42.196"></a><span id="l42.196" class="difflineminus">-      PlacesUtils.transactionManager.maxTransactionCount = val,</span>
<a href="#l42.197"></a><span id="l42.197" class="difflineplus">+    get numberOfUndoItems() {</span>
<a href="#l42.198"></a><span id="l42.198" class="difflineplus">+      return PlacesUtils.transactionManager.numberOfUndoItems;</span>
<a href="#l42.199"></a><span id="l42.199" class="difflineplus">+    },</span>
<a href="#l42.200"></a><span id="l42.200" class="difflineplus">+    get numberOfRedoItems() {</span>
<a href="#l42.201"></a><span id="l42.201" class="difflineplus">+      return PlacesUtils.transactionManager.numberOfRedoItems;</span>
<a href="#l42.202"></a><span id="l42.202" class="difflineplus">+    },</span>
<a href="#l42.203"></a><span id="l42.203" class="difflineplus">+    get maxTransactionCount() {</span>
<a href="#l42.204"></a><span id="l42.204" class="difflineplus">+      return PlacesUtils.transactionManager.maxTransactionCount;</span>
<a href="#l42.205"></a><span id="l42.205" class="difflineplus">+    },</span>
<a href="#l42.206"></a><span id="l42.206" class="difflineplus">+    set maxTransactionCount(val) {</span>
<a href="#l42.207"></a><span id="l42.207" class="difflineplus">+      return PlacesUtils.transactionManager.maxTransactionCount = val;</span>
<a href="#l42.208"></a><span id="l42.208" class="difflineplus">+    },</span>
<a href="#l42.209"></a><span id="l42.209"> </span>
<a href="#l42.210"></a><span id="l42.210" class="difflineminus">-    clear: function()</span>
<a href="#l42.211"></a><span id="l42.211" class="difflineminus">-      PlacesUtils.transactionManager.clear(),</span>
<a href="#l42.212"></a><span id="l42.212" class="difflineminus">-</span>
<a href="#l42.213"></a><span id="l42.213" class="difflineminus">-    peekUndoStack: function()</span>
<a href="#l42.214"></a><span id="l42.214" class="difflineminus">-      PlacesUtils.transactionManager.peekUndoStack(),</span>
<a href="#l42.215"></a><span id="l42.215" class="difflineplus">+    clear: function() {</span>
<a href="#l42.216"></a><span id="l42.216" class="difflineplus">+      PlacesUtils.transactionManager.clear();</span>
<a href="#l42.217"></a><span id="l42.217" class="difflineplus">+    },</span>
<a href="#l42.218"></a><span id="l42.218"> </span>
<a href="#l42.219"></a><span id="l42.219" class="difflineminus">-    peekRedoStack: function()</span>
<a href="#l42.220"></a><span id="l42.220" class="difflineminus">-      PlacesUtils.transactionManager.peekRedoStack(),</span>
<a href="#l42.221"></a><span id="l42.221" class="difflineplus">+    peekUndoStack: function() {</span>
<a href="#l42.222"></a><span id="l42.222" class="difflineplus">+      return PlacesUtils.transactionManager.peekUndoStack();</span>
<a href="#l42.223"></a><span id="l42.223" class="difflineplus">+    },</span>
<a href="#l42.224"></a><span id="l42.224"> </span>
<a href="#l42.225"></a><span id="l42.225" class="difflineminus">-    getUndoStack: function()</span>
<a href="#l42.226"></a><span id="l42.226" class="difflineminus">-      PlacesUtils.transactionManager.getUndoStack(),</span>
<a href="#l42.227"></a><span id="l42.227" class="difflineplus">+    peekRedoStack: function() {</span>
<a href="#l42.228"></a><span id="l42.228" class="difflineplus">+      return PlacesUtils.transactionManager.peekRedoStack();</span>
<a href="#l42.229"></a><span id="l42.229" class="difflineplus">+    },</span>
<a href="#l42.230"></a><span id="l42.230" class="difflineplus">+</span>
<a href="#l42.231"></a><span id="l42.231" class="difflineplus">+    getUndoStack: function() {</span>
<a href="#l42.232"></a><span id="l42.232" class="difflineplus">+      return PlacesUtils.transactionManager.getUndoStack();</span>
<a href="#l42.233"></a><span id="l42.233" class="difflineplus">+    },</span>
<a href="#l42.234"></a><span id="l42.234"> </span>
<a href="#l42.235"></a><span id="l42.235" class="difflineminus">-    getRedoStack: function()</span>
<a href="#l42.236"></a><span id="l42.236" class="difflineminus">-      PlacesUtils.transactionManager.getRedoStack(),</span>
<a href="#l42.237"></a><span id="l42.237" class="difflineplus">+    getRedoStack: function() {</span>
<a href="#l42.238"></a><span id="l42.238" class="difflineplus">+      return PlacesUtils.transactionManager.getRedoStack();</span>
<a href="#l42.239"></a><span id="l42.239" class="difflineplus">+    },</span>
<a href="#l42.240"></a><span id="l42.240"> </span>
<a href="#l42.241"></a><span id="l42.241" class="difflineminus">-    AddListener: function(aListener)</span>
<a href="#l42.242"></a><span id="l42.242" class="difflineminus">-      PlacesUtils.transactionManager.AddListener(aListener),</span>
<a href="#l42.243"></a><span id="l42.243" class="difflineplus">+    AddListener: function(aListener) {</span>
<a href="#l42.244"></a><span id="l42.244" class="difflineplus">+      PlacesUtils.transactionManager.AddListener(aListener);</span>
<a href="#l42.245"></a><span id="l42.245" class="difflineplus">+    },</span>
<a href="#l42.246"></a><span id="l42.246"> </span>
<a href="#l42.247"></a><span id="l42.247" class="difflineminus">-    RemoveListener: function(aListener)</span>
<a href="#l42.248"></a><span id="l42.248" class="difflineminus">-      PlacesUtils.transactionManager.RemoveListener(aListener)</span>
<a href="#l42.249"></a><span id="l42.249" class="difflineplus">+    RemoveListener: function(aListener) {</span>
<a href="#l42.250"></a><span id="l42.250" class="difflineplus">+      PlacesUtils.transactionManager.RemoveListener(aListener);</span>
<a href="#l42.251"></a><span id="l42.251" class="difflineplus">+    }</span>
<a href="#l42.252"></a><span id="l42.252">   }</span>
<a href="#l42.253"></a><span id="l42.253"> });</span>
<a href="#l42.254"></a><span id="l42.254"> </span>
<a href="#l42.255"></a><span id="l42.255"> XPCOMUtils.defineLazyGetter(PlacesUIUtils, &quot;_copyableAnnotations&quot;, function() {</span>
<a href="#l42.256"></a><span id="l42.256">   return [this.DESCRIPTION_ANNO,</span>
<a href="#l42.257"></a><span id="l42.257">           this.LOAD_IN_SIDEBAR_ANNO,</span>
<a href="#l42.258"></a><span id="l42.258">           PlacesUtils.POST_DATA_ANNO,</span>
<a href="#l42.259"></a><span id="l42.259">           PlacesUtils.READ_ONLY_ANNO]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/suite/modules/Sanitizer.jsm</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/suite/modules/Sanitizer.jsm</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -78,19 +78,23 @@ var Sanitizer = {</span>
<a href="#l43.4"></a><span id="l43.4">     if (this.items[aItemName].canClear)</span>
<a href="#l43.5"></a><span id="l43.5">       this.items[aItemName].clear();</span>
<a href="#l43.6"></a><span id="l43.6">   },</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8">   setClearItem: function(aItemName, aWillClear) {</span>
<a href="#l43.9"></a><span id="l43.9">     this.items[aItemName].willClear = aWillClear;</span>
<a href="#l43.10"></a><span id="l43.10">   },</span>
<a href="#l43.11"></a><span id="l43.11"> </span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  willClearItem: function(aItemName) this.items[aItemName].willClear,</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+  willClearItem: function(aItemName) {</span>
<a href="#l43.14"></a><span id="l43.14" class="difflineplus">+    return this.items[aItemName].willClear;</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineplus">+  },</span>
<a href="#l43.16"></a><span id="l43.16"> </span>
<a href="#l43.17"></a><span id="l43.17" class="difflineminus">-  canClearItem: function(aItemName) this.items[aItemName].canClear,</span>
<a href="#l43.18"></a><span id="l43.18" class="difflineplus">+  canClearItem: function(aItemName) {</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineplus">+    return this.items[aItemName].canClear;</span>
<a href="#l43.20"></a><span id="l43.20" class="difflineplus">+  },</span>
<a href="#l43.21"></a><span id="l43.21"> </span>
<a href="#l43.22"></a><span id="l43.22">   // this is called on startup and shutdown, to perform pending sanitizations</span>
<a href="#l43.23"></a><span id="l43.23">   checkSettings: function() {</span>
<a href="#l43.24"></a><span id="l43.24">     if (this._prefs.getBoolPref(&quot;sanitizeOnShutdown&quot;) &amp;&amp;</span>
<a href="#l43.25"></a><span id="l43.25">         !this._prefs.prefHasUserValue(&quot;didShutdownSanitize&quot;))</span>
<a href="#l43.26"></a><span id="l43.26">       this.readSettings();</span>
<a href="#l43.27"></a><span id="l43.27">     else</span>
<a href="#l43.28"></a><span id="l43.28">       this.clearSettings();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/suite/modules/WindowsJumpLists.jsm</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/suite/modules/WindowsJumpLists.jsm</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -94,85 +94,85 @@ var tasksCfg = [</span>
<a href="#l44.4"></a><span id="l44.4">    * args        - Command line args to invoke the task.</span>
<a href="#l44.5"></a><span id="l44.5">    * iconIndex   - Optional win icon index into the main application for the</span>
<a href="#l44.6"></a><span id="l44.6">    *               list item.</span>
<a href="#l44.7"></a><span id="l44.7">    * open        - Boolean indicates if the command should be visible after the browser opens.</span>
<a href="#l44.8"></a><span id="l44.8">    * close       - Boolean indicates if the command should be visible after the browser closes.</span>
<a href="#l44.9"></a><span id="l44.9">    */</span>
<a href="#l44.10"></a><span id="l44.10">   // Open new tab</span>
<a href="#l44.11"></a><span id="l44.11">   {</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.newTab.label&quot;),</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.newTab.description&quot;),</span>
<a href="#l44.14"></a><span id="l44.14" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.newTab.label&quot;); },</span>
<a href="#l44.15"></a><span id="l44.15" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.newTab.description&quot;); },</span>
<a href="#l44.16"></a><span id="l44.16">     args:             &quot;-new-tab about:blank&quot;,</span>
<a href="#l44.17"></a><span id="l44.17">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.18"></a><span id="l44.18">     open:             true,</span>
<a href="#l44.19"></a><span id="l44.19">     close:            true, // The jump list already has an app launch icon, but</span>
<a href="#l44.20"></a><span id="l44.20">                             // we don't always update the list on shutdown.</span>
<a href="#l44.21"></a><span id="l44.21">                             // Thus true for consistency.</span>
<a href="#l44.22"></a><span id="l44.22">   },</span>
<a href="#l44.23"></a><span id="l44.23"> </span>
<a href="#l44.24"></a><span id="l44.24">   // Open new window</span>
<a href="#l44.25"></a><span id="l44.25">   {</span>
<a href="#l44.26"></a><span id="l44.26" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.newWindow.label&quot;),</span>
<a href="#l44.27"></a><span id="l44.27" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.newWindow.description&quot;),</span>
<a href="#l44.28"></a><span id="l44.28" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.newWindow.label&quot;); },</span>
<a href="#l44.29"></a><span id="l44.29" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.newWindow.description&quot;); },</span>
<a href="#l44.30"></a><span id="l44.30">     args:             &quot;-browser&quot;,</span>
<a href="#l44.31"></a><span id="l44.31">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.32"></a><span id="l44.32">     open:             true,</span>
<a href="#l44.33"></a><span id="l44.33">     close:            true, // No point, but we don't always update the list on</span>
<a href="#l44.34"></a><span id="l44.34">                             //  shutdown.  Thus true for consistency.</span>
<a href="#l44.35"></a><span id="l44.35">   },</span>
<a href="#l44.36"></a><span id="l44.36"> </span>
<a href="#l44.37"></a><span id="l44.37">   // Open private window</span>
<a href="#l44.38"></a><span id="l44.38">   {</span>
<a href="#l44.39"></a><span id="l44.39" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.newPrivate.label&quot;),</span>
<a href="#l44.40"></a><span id="l44.40" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.newPrivate.description&quot;),</span>
<a href="#l44.41"></a><span id="l44.41" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.newPrivate.label&quot;); },</span>
<a href="#l44.42"></a><span id="l44.42" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.newPrivate.description&quot;); },</span>
<a href="#l44.43"></a><span id="l44.43">     args:             &quot;-private&quot;,</span>
<a href="#l44.44"></a><span id="l44.44">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.45"></a><span id="l44.45">     open:             true,</span>
<a href="#l44.46"></a><span id="l44.46">     close:            true, // No point, but we don't always update the list on</span>
<a href="#l44.47"></a><span id="l44.47">                             //  shutdown.  Thus true for consistency.</span>
<a href="#l44.48"></a><span id="l44.48">   },</span>
<a href="#l44.49"></a><span id="l44.49"> </span>
<a href="#l44.50"></a><span id="l44.50">   // Open mailnews</span>
<a href="#l44.51"></a><span id="l44.51">   {</span>
<a href="#l44.52"></a><span id="l44.52" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.mailWindow.label&quot;),</span>
<a href="#l44.53"></a><span id="l44.53" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.mailWindow.description&quot;),</span>
<a href="#l44.54"></a><span id="l44.54" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.mailWindow.label&quot;); },</span>
<a href="#l44.55"></a><span id="l44.55" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.mailWindow.description&quot;); },</span>
<a href="#l44.56"></a><span id="l44.56">     args:             &quot;-mail&quot;,</span>
<a href="#l44.57"></a><span id="l44.57">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.58"></a><span id="l44.58">     open:             true,</span>
<a href="#l44.59"></a><span id="l44.59">     close:            true, // No point, but we don't always update the list on</span>
<a href="#l44.60"></a><span id="l44.60">                             //  shutdown.  Thus true for consistency.</span>
<a href="#l44.61"></a><span id="l44.61">   },</span>
<a href="#l44.62"></a><span id="l44.62"> </span>
<a href="#l44.63"></a><span id="l44.63">   // Compose Message</span>
<a href="#l44.64"></a><span id="l44.64">   {</span>
<a href="#l44.65"></a><span id="l44.65" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.composeMessage.label&quot;),</span>
<a href="#l44.66"></a><span id="l44.66" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.composeMessage.description&quot;),</span>
<a href="#l44.67"></a><span id="l44.67" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.composeMessage.label&quot;); },</span>
<a href="#l44.68"></a><span id="l44.68" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.composeMessage.description&quot;); },</span>
<a href="#l44.69"></a><span id="l44.69">     args:             &quot;-compose&quot;,</span>
<a href="#l44.70"></a><span id="l44.70">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.71"></a><span id="l44.71">     open:             true,</span>
<a href="#l44.72"></a><span id="l44.72">     close:            true, // No point, but we don't always update the list on</span>
<a href="#l44.73"></a><span id="l44.73">                             //  shutdown.  Thus true for consistency.</span>
<a href="#l44.74"></a><span id="l44.74">   },</span>
<a href="#l44.75"></a><span id="l44.75"> </span>
<a href="#l44.76"></a><span id="l44.76">   // Address Book</span>
<a href="#l44.77"></a><span id="l44.77">   {</span>
<a href="#l44.78"></a><span id="l44.78" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.openAddressBook.label&quot;),</span>
<a href="#l44.79"></a><span id="l44.79" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.openAddressBook.description&quot;),</span>
<a href="#l44.80"></a><span id="l44.80" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.openAddressBook.label&quot;); },</span>
<a href="#l44.81"></a><span id="l44.81" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.openAddressBook.description&quot;); },</span>
<a href="#l44.82"></a><span id="l44.82">     args:             &quot;-addressbook&quot;,</span>
<a href="#l44.83"></a><span id="l44.83">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.84"></a><span id="l44.84">     open:             true,</span>
<a href="#l44.85"></a><span id="l44.85">     close:            true, // No point, but we don't always update the list on</span>
<a href="#l44.86"></a><span id="l44.86">                             //  shutdown.  Thus true for consistency.</span>
<a href="#l44.87"></a><span id="l44.87">   },</span>
<a href="#l44.88"></a><span id="l44.88"> </span>
<a href="#l44.89"></a><span id="l44.89">   // Composer</span>
<a href="#l44.90"></a><span id="l44.90">   {</span>
<a href="#l44.91"></a><span id="l44.91" class="difflineminus">-    get title()       _getString(&quot;taskbar.tasks.openEditor.label&quot;),</span>
<a href="#l44.92"></a><span id="l44.92" class="difflineminus">-    get description() _getString(&quot;taskbar.tasks.openEditor.description&quot;),</span>
<a href="#l44.93"></a><span id="l44.93" class="difflineplus">+    get title()       { return _getString(&quot;taskbar.tasks.openEditor.label&quot;); },</span>
<a href="#l44.94"></a><span id="l44.94" class="difflineplus">+    get description() { return _getString(&quot;taskbar.tasks.openEditor.description&quot;); },</span>
<a href="#l44.95"></a><span id="l44.95">     args:             &quot;-edit&quot;,</span>
<a href="#l44.96"></a><span id="l44.96">     iconIndex:        0, // SeaMonkey app icon</span>
<a href="#l44.97"></a><span id="l44.97">     open:             true,</span>
<a href="#l44.98"></a><span id="l44.98">     close:            true, // No point, but we don't always update the list on</span>
<a href="#l44.99"></a><span id="l44.99">                             //  shutdown.  Thus true for consistency.</span>
<a href="#l44.100"></a><span id="l44.100">   },</span>
<a href="#l44.101"></a><span id="l44.101"> ];</span>
<a href="#l44.102"></a><span id="l44.102"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/suite/profile/migration/src/SuiteProfileMigrator.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/suite/profile/migration/src/SuiteProfileMigrator.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -110,17 +110,17 @@ ProfileMigrator.prototype = {</span>
<a href="#l45.4"></a><span id="l45.4">       Components.utils.reportError(&quot;Could not retrieve default browser: &quot; + ex);</span>
<a href="#l45.5"></a><span id="l45.5">     }</span>
<a href="#l45.6"></a><span id="l45.6"> #endif</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8">     // If we found the default browser and we have support for that browser,</span>
<a href="#l45.9"></a><span id="l45.9">     // make sure to check it before any other browser, by moving it to the head</span>
<a href="#l45.10"></a><span id="l45.10">     // of the array.</span>
<a href="#l45.11"></a><span id="l45.11">     if (defaultBrowser)</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-      migratorsOrdered.sort(function(a, b) b == defaultBrowser ? 1 : 0);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+      migratorsOrdered.sort((a, b) =&gt; b == defaultBrowser ? 1 : 0);</span>
<a href="#l45.14"></a><span id="l45.14"> #endif</span>
<a href="#l45.15"></a><span id="l45.15">     for (let key of migratorsOrdered) {</span>
<a href="#l45.16"></a><span id="l45.16">       let migrator = this._getMigratorIfSourceExists(key);</span>
<a href="#l45.17"></a><span id="l45.17">       if (migrator)</span>
<a href="#l45.18"></a><span id="l45.18">         return [key, migrator];</span>
<a href="#l45.19"></a><span id="l45.19">     }</span>
<a href="#l45.20"></a><span id="l45.20"> </span>
<a href="#l45.21"></a><span id="l45.21">     return [&quot;&quot;, null];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/suite/smile/src/smileApplication.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/suite/smile/src/smileApplication.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -12,47 +12,47 @@ const APPLICATION_CONTRACTID = &quot;@mozilla</span>
<a href="#l46.4"></a><span id="l46.4"> </span>
<a href="#l46.5"></a><span id="l46.5"> //=================================================</span>
<a href="#l46.6"></a><span id="l46.6"> // Singleton that holds services and utilities</span>
<a href="#l46.7"></a><span id="l46.7"> var Utilities = {</span>
<a href="#l46.8"></a><span id="l46.8">   get bookmarks() {</span>
<a href="#l46.9"></a><span id="l46.9">     let bookmarks =</span>
<a href="#l46.10"></a><span id="l46.10">       Components.classes[&quot;@mozilla.org/browser/nav-bookmarks-service;1&quot;]</span>
<a href="#l46.11"></a><span id="l46.11">                 .getService(Components.interfaces.nsINavBookmarksService);</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-    this.__defineGetter__(&quot;bookmarks&quot;, function() bookmarks);</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+    this.__defineGetter__(&quot;bookmarks&quot;, () =&gt; bookmarks);</span>
<a href="#l46.14"></a><span id="l46.14">     return this.bookmarks;</span>
<a href="#l46.15"></a><span id="l46.15">   },</span>
<a href="#l46.16"></a><span id="l46.16"> </span>
<a href="#l46.17"></a><span id="l46.17">   get bookmarksObserver() {</span>
<a href="#l46.18"></a><span id="l46.18">     let bookmarksObserver = new BookmarksObserver();</span>
<a href="#l46.19"></a><span id="l46.19" class="difflineminus">-    this.__defineGetter__(&quot;bookmarksObserver&quot;, function() bookmarksObserver);</span>
<a href="#l46.20"></a><span id="l46.20" class="difflineplus">+    this.__defineGetter__(&quot;bookmarksObserver&quot;, () =&gt; bookmarksObserver);</span>
<a href="#l46.21"></a><span id="l46.21">     return this.bookmarksObserver;</span>
<a href="#l46.22"></a><span id="l46.22">   },</span>
<a href="#l46.23"></a><span id="l46.23"> </span>
<a href="#l46.24"></a><span id="l46.24">   get annotations() {</span>
<a href="#l46.25"></a><span id="l46.25">     let annotations =</span>
<a href="#l46.26"></a><span id="l46.26">       Components.classes[&quot;@mozilla.org/browser/annotation-service;1&quot;]</span>
<a href="#l46.27"></a><span id="l46.27">                 .getService(Components.interfaces.nsIAnnotationService);</span>
<a href="#l46.28"></a><span id="l46.28" class="difflineminus">-    this.__defineGetter__(&quot;annotations&quot;, function() annotations);</span>
<a href="#l46.29"></a><span id="l46.29" class="difflineplus">+    this.__defineGetter__(&quot;annotations&quot;, () =&gt; annotations);</span>
<a href="#l46.30"></a><span id="l46.30">     return this.annotations;</span>
<a href="#l46.31"></a><span id="l46.31">   },</span>
<a href="#l46.32"></a><span id="l46.32"> </span>
<a href="#l46.33"></a><span id="l46.33">   get history() {</span>
<a href="#l46.34"></a><span id="l46.34">     let history =</span>
<a href="#l46.35"></a><span id="l46.35">       Components.classes[&quot;@mozilla.org/browser/nav-history-service;1&quot;]</span>
<a href="#l46.36"></a><span id="l46.36">                 .getService(Components.interfaces.nsINavHistoryService);</span>
<a href="#l46.37"></a><span id="l46.37" class="difflineminus">-    this.__defineGetter__(&quot;history&quot;, function() history);</span>
<a href="#l46.38"></a><span id="l46.38" class="difflineplus">+    this.__defineGetter__(&quot;history&quot;, () =&gt; history);</span>
<a href="#l46.39"></a><span id="l46.39">     return this.history;</span>
<a href="#l46.40"></a><span id="l46.40">   },</span>
<a href="#l46.41"></a><span id="l46.41"> </span>
<a href="#l46.42"></a><span id="l46.42">   get windowMediator() {</span>
<a href="#l46.43"></a><span id="l46.43">     let windowMediator =</span>
<a href="#l46.44"></a><span id="l46.44">       Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l46.45"></a><span id="l46.45">                 .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l46.46"></a><span id="l46.46" class="difflineminus">-    this.__defineGetter__(&quot;windowMediator&quot;, function() windowMediator);</span>
<a href="#l46.47"></a><span id="l46.47" class="difflineplus">+    this.__defineGetter__(&quot;windowMediator&quot;, () =&gt; windowMediator);</span>
<a href="#l46.48"></a><span id="l46.48">     return this.windowMediator;</span>
<a href="#l46.49"></a><span id="l46.49">   },</span>
<a href="#l46.50"></a><span id="l46.50"> </span>
<a href="#l46.51"></a><span id="l46.51">   makeURI: function smileutil_makeURI(aSpec) {</span>
<a href="#l46.52"></a><span id="l46.52">     if (!aSpec)</span>
<a href="#l46.53"></a><span id="l46.53">       return null;</span>
<a href="#l46.54"></a><span id="l46.54">     var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l46.55"></a><span id="l46.55">                         .getService(Components.interfaces.nsIIOService);</span>
<a href="#l46.56"></a><span id="l46.56" class="difflineat">@@ -771,17 +771,17 @@ Application.prototype = {</span>
<a href="#l46.57"></a><span id="l46.57">       this._obs.removeObserver(this, &quot;xpcom-shutdown&quot;);</span>
<a href="#l46.58"></a><span id="l46.58">       delete this.bookmarks;</span>
<a href="#l46.59"></a><span id="l46.59">       Utilities.free();</span>
<a href="#l46.60"></a><span id="l46.60">     }</span>
<a href="#l46.61"></a><span id="l46.61">   },</span>
<a href="#l46.62"></a><span id="l46.62"> </span>
<a href="#l46.63"></a><span id="l46.63">   get bookmarks() {</span>
<a href="#l46.64"></a><span id="l46.64">     let bookmarks = new BookmarkRoots();</span>
<a href="#l46.65"></a><span id="l46.65" class="difflineminus">-    this.__defineGetter__(&quot;bookmarks&quot;, function() bookmarks);</span>
<a href="#l46.66"></a><span id="l46.66" class="difflineplus">+    this.__defineGetter__(&quot;bookmarks&quot;, () =&gt; bookmarks);</span>
<a href="#l46.67"></a><span id="l46.67">     return this.bookmarks;</span>
<a href="#l46.68"></a><span id="l46.68">   },</span>
<a href="#l46.69"></a><span id="l46.69"> </span>
<a href="#l46.70"></a><span id="l46.70">   get windows() {</span>
<a href="#l46.71"></a><span id="l46.71">     var win = [];</span>
<a href="#l46.72"></a><span id="l46.72">     var browserEnum = Utilities.windowMediator.getEnumerator(&quot;navigator:browser&quot;);</span>
<a href="#l46.73"></a><span id="l46.73"> </span>
<a href="#l46.74"></a><span id="l46.74">     while (browserEnum.hasMoreElements())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/suite/smile/test/browser_Bookmarks.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/suite/smile/test/browser_Bookmarks.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -131,20 +131,20 @@ function test() {</span>
<a href="#l47.4"></a><span id="l47.4">   testBookmark.annotations.set(&quot;testing/bookmark/double&quot;, 3.333, 0);</span>
<a href="#l47.5"></a><span id="l47.5">   ok(testBookmark.annotations.has(&quot;testing/bookmark/double&quot;), &quot;Checking existence of added double annotation&quot;);</span>
<a href="#l47.6"></a><span id="l47.6">   is(testBookmark.annotations.get(&quot;testing/bookmark/double&quot;), 3.333, &quot;Checking value of added double annotation&quot;);</span>
<a href="#l47.7"></a><span id="l47.7">   is(gLastBookmarkAction, &quot;testing/bookmark/double&quot;, &quot;Check event handler for setting annotation&quot;);</span>
<a href="#l47.8"></a><span id="l47.8">   gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l47.9"></a><span id="l47.9"> </span>
<a href="#l47.10"></a><span id="l47.10">   // test names array - NOTE: &quot;bookmarkProperties/description&quot; is an annotation too</span>
<a href="#l47.11"></a><span id="l47.11">   var names = testBookmark.annotations.names;</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-  ok(names.some(function (f) f == &quot;bookmarkProperties/description&quot;), &quot;Checking for description annotation&quot;);</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineminus">-  ok(names.some(function (f) f == &quot;testing/bookmark/string&quot;), &quot;Checking for string test annotation&quot;);</span>
<a href="#l47.14"></a><span id="l47.14" class="difflineminus">-  ok(names.some(function (f) f == &quot;testing/bookmark/int&quot;), &quot;Checking for int test annotation&quot;);</span>
<a href="#l47.15"></a><span id="l47.15" class="difflineminus">-  ok(names.some(function (f) f == &quot;testing/bookmark/double&quot;), &quot;Checking for double test annotation&quot;);</span>
<a href="#l47.16"></a><span id="l47.16" class="difflineplus">+  ok(names.some(f =&gt; f == &quot;bookmarkProperties/description&quot;), &quot;Checking for description annotation&quot;);</span>
<a href="#l47.17"></a><span id="l47.17" class="difflineplus">+  ok(names.some(f =&gt; f == &quot;testing/bookmark/string&quot;), &quot;Checking for string test annotation&quot;);</span>
<a href="#l47.18"></a><span id="l47.18" class="difflineplus">+  ok(names.some(f =&gt; f == &quot;testing/bookmark/int&quot;), &quot;Checking for int test annotation&quot;);</span>
<a href="#l47.19"></a><span id="l47.19" class="difflineplus">+  ok(names.some(f =&gt; f == &quot;testing/bookmark/double&quot;), &quot;Checking for double test annotation&quot;);</span>
<a href="#l47.20"></a><span id="l47.20"> </span>
<a href="#l47.21"></a><span id="l47.21">   // test adding a separator</span>
<a href="#l47.22"></a><span id="l47.22">   var testSeparator = testFolder.addSeparator();</span>
<a href="#l47.23"></a><span id="l47.23">   ok(testSeparator, &quot;Check bookmark creation&quot;);</span>
<a href="#l47.24"></a><span id="l47.24">   ok(testSeparator.parent, &quot;Check parent after separator creation&quot;);</span>
<a href="#l47.25"></a><span id="l47.25">   is(gLastFolderAction, &quot;addchild&quot;, &quot;Check event handler for adding a child separator to a folder&quot;);</span>
<a href="#l47.26"></a><span id="l47.26">   is(testSeparator.type, &quot;separator&quot;, &quot;Check 'bookmark.type' after separator creation&quot;);</span>
<a href="#l47.27"></a><span id="l47.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/suite/smile/test/browser_Browser.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/suite/smile/test/browser_Browser.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -79,20 +79,20 @@ function test() {</span>
<a href="#l48.4"></a><span id="l48.4">         const complete = Ci.nsIWebProgressListener.STATE_IS_WINDOW +</span>
<a href="#l48.5"></a><span id="l48.5">                          Ci.nsIWebProgressListener.STATE_IS_NETWORK +</span>
<a href="#l48.6"></a><span id="l48.6">                          Ci.nsIWebProgressListener.STATE_STOP;</span>
<a href="#l48.7"></a><span id="l48.7">         if ((stateFlags &amp; complete) == complete) {</span>
<a href="#l48.8"></a><span id="l48.8">           gBrowser.removeProgressListener(this);</span>
<a href="#l48.9"></a><span id="l48.9">           onPageBLoadComplete();</span>
<a href="#l48.10"></a><span id="l48.10">         }</span>
<a href="#l48.11"></a><span id="l48.11">       },</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-      onLocationChange: function () 0,</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineminus">-      onProgressChange: function () 0,</span>
<a href="#l48.14"></a><span id="l48.14" class="difflineminus">-      onStatusChange: function () 0,</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineminus">-      onSecurityChange: function () 0</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineplus">+      onLocationChange: function() {},</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineplus">+      onProgressChange: function() {},</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineplus">+      onStatusChange: function() {},</span>
<a href="#l48.19"></a><span id="l48.19" class="difflineplus">+      onSecurityChange: function() {}</span>
<a href="#l48.20"></a><span id="l48.20">     });</span>
<a href="#l48.21"></a><span id="l48.21"> </span>
<a href="#l48.22"></a><span id="l48.22">     // test loading new content with a frame into a tab</span>
<a href="#l48.23"></a><span id="l48.23">     // the event will be checked in onPageBLoadComplete</span>
<a href="#l48.24"></a><span id="l48.24">     gPageB.events.addListener(&quot;load&quot;, onPageBLoadWithFrames);</span>
<a href="#l48.25"></a><span id="l48.25">     gPageB.load(makeURI(CHROMEROOT + &quot;ContentWithFrames.html&quot;));</span>
<a href="#l48.26"></a><span id="l48.26">   }</span>
<a href="#l48.27"></a><span id="l48.27"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

