<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22525:5b6e551a23fb5004ca8ff16dcb5913abde78f33d</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 5b6e551a23fb5004ca8ff16dcb5913abde78f33d" />
<meta property="og:url" content="/comm-central/rev/5b6e551a23fb5004ca8ff16dcb5913abde78f33d" />
<meta property="og:description" content="Bug 663695 - Implement 'Reorder Attachments' functionality, UI, and keyboard shortcuts; fix focus/selection issues. r=aceman, ui-r=bwinton,paenglab" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 5b6e551a23fb5004ca8ff16dcb5913abde78f33d 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/5b6e551a23fb5004ca8ff16dcb5913abde78f33d">shortlog</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/5b6e551a23fb5004ca8ff16dcb5913abde78f33d">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d">files</a> |
changeset |
<a href="/comm-central/raw-rev/5b6e551a23fb5004ca8ff16dcb5913abde78f33d">raw</a>  | <a href="/comm-central/archive/5b6e551a23fb5004ca8ff16dcb5913abde78f33d.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=663695">Bug 663695</a> - Implement 'Reorder Attachments' functionality, UI, and keyboard shortcuts; fix focus/selection issues. r=aceman, ui-r=bwinton,paenglab
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#84;&#104;&#111;&#109;&#97;&#115;&#32;&#68;&#117;&#101;&#108;&#108;&#109;&#97;&#110;&#110;&#32;&#60;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#50;&#48;&#48;&#55;&#64;&#100;&#117;&#101;&#108;&#108;&#109;&#97;&#110;&#110;&#50;&#52;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 10 Oct 2017 13:08:45 +0200</td></tr>

<tr>
 <td>changeset 22525</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/5b6e551a23fb5004ca8ff16dcb5913abde78f33d">5b6e551a23fb5004ca8ff16dcb5913abde78f33d</a></td>
</tr>



<tr>
<td>parent 22524</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6c8dea328d6d4b6cac2785eb6065078f5b9a86c4">6c8dea328d6d4b6cac2785eb6065078f5b9a86c4</a>
</td>
</tr>

<tr>
<td>child 22526</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/01bc9dc1e659d125ee31b95ec588befeccbff70e">01bc9dc1e659d125ee31b95ec588befeccbff70e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=5b6e551a23fb5004ca8ff16dcb5913abde78f33d">13735</a></td></tr>
<tr><td>push user</td><td>acelists@atlas.sk</td></tr>
<tr><td>push date</td><td class="date age">Sat, 11 Nov 2017 13:23:27 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@5b6e551a23fb [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5b6e551a23fb5004ca8ff16dcb5913abde78f33d">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5b6e551a23fb5004ca8ff16dcb5913abde78f33d&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5b6e551a23fb5004ca8ff16dcb5913abde78f33d&newProject=comm-central&newRevision=6c8dea328d6d4b6cac2785eb6065078f5b9a86c4&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5b6e551a23fb5004ca8ff16dcb5913abde78f33d&newProject=comm-central&newRevision=6c8dea328d6d4b6cac2785eb6065078f5b9a86c4&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5b6e551a23fb5004ca8ff16dcb5913abde78f33d&newProject=comm-central&newRevision=6c8dea328d6d4b6cac2785eb6065078f5b9a86c4&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28aceman%29&revcount=50">aceman</a>, <a href="/comm-central/log?rev=reviewer%28bwinton%29&revcount=50">bwinton</a>, <a href="/comm-central/log?rev=reviewer%28paenglab%29&revcount=50">paenglab</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=663695">663695</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=663695">Bug 663695</a> - Implement 'Reorder Attachments' functionality, UI, and keyboard shortcuts; fix focus/selection issues. r=aceman, ui-r=bwinton,paenglab</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/messengercompose.xul">mail/components/compose/content/messengercompose.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/messengercompose.xul">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/messengercompose.xul">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/messengercompose.xul">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/messengercompose.xul">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/components/compose/content/messengercompose.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd">mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/compose/messengercompose.css">mail/themes/linux/mail/compose/messengercompose.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/compose/messengercompose.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/compose/messengercompose.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/compose/messengercompose.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/compose/messengercompose.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/compose/messengercompose.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/messenger.css">mail/themes/linux/mail/messenger.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/messenger.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/messenger.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/messenger.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/messenger.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/linux/mail/messenger.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/compose/messengercompose.css">mail/themes/osx/mail/compose/messengercompose.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/compose/messengercompose.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/compose/messengercompose.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/compose/messengercompose.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/compose/messengercompose.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/compose/messengercompose.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/messenger.css">mail/themes/osx/mail/messenger.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/messenger.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/messenger.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/messenger.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/messenger.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/osx/mail/messenger.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/jar.inc.mn">mail/themes/shared/jar.inc.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/jar.inc.mn">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/jar.inc.mn">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/jar.inc.mn">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/jar.inc.mn">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/jar.inc.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-bottom.svg">mail/themes/shared/mail/icons/move-bottom.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-bottom.svg">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-bottom.svg">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-bottom.svg">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-bottom.svg">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-bottom.svg">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-down.svg">mail/themes/shared/mail/icons/move-down.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-down.svg">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-down.svg">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-down.svg">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-down.svg">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-down.svg">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-together.svg">mail/themes/shared/mail/icons/move-together.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-together.svg">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-together.svg">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-together.svg">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-together.svg">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-together.svg">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-top.svg">mail/themes/shared/mail/icons/move-top.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-top.svg">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-top.svg">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-top.svg">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-top.svg">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-top.svg">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-up.svg">mail/themes/shared/mail/icons/move-up.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-up.svg">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-up.svg">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-up.svg">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-up.svg">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/move-up.svg">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/sort.svg">mail/themes/shared/mail/icons/sort.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/sort.svg">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/sort.svg">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/sort.svg">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/sort.svg">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/icons/sort.svg">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/messenger.css">mail/themes/shared/mail/messenger.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/messenger.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/messenger.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/messenger.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/messenger.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/shared/mail/messenger.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/compose/messengercompose.css">mail/themes/windows/mail/compose/messengercompose.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/compose/messengercompose.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/compose/messengercompose.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/compose/messengercompose.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/compose/messengercompose.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/compose/messengercompose.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/messenger.css">mail/themes/windows/mail/messenger.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/messenger.css">file</a> |
<a href="/comm-central/annotate/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/messenger.css">annotate</a> |
<a href="/comm-central/diff/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/messenger.css">diff</a> |
<a href="/comm-central/comparison/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/messenger.css">comparison</a> |
<a href="/comm-central/log/5b6e551a23fb5004ca8ff16dcb5913abde78f33d/mail/themes/windows/mail/messenger.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -18,16 +18,18 @@ Components.utils.import(&quot;resource:///mod</span>
<a href="#l1.4"></a><span id="l1.4"> Components.utils.import(&quot;resource:///modules/MailUtils.js&quot;);</span>
<a href="#l1.5"></a><span id="l1.5"> Components.utils.import(&quot;resource://gre/modules/InlineSpellChecker.jsm&quot;);</span>
<a href="#l1.6"></a><span id="l1.6"> Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l1.7"></a><span id="l1.7"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.8"></a><span id="l1.8"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l1.9"></a><span id="l1.9"> Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> XPCOMUtils.defineLazyModuleGetter(this, &quot;OS&quot;, &quot;resource://gre/modules/osfile.jsm&quot;);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;ShortcutUtils&quot;,</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+                                  &quot;resource://gre/modules/ShortcutUtils.jsm&quot;);</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> /**</span>
<a href="#l1.16"></a><span id="l1.16">  * interfaces</span>
<a href="#l1.17"></a><span id="l1.17">  */</span>
<a href="#l1.18"></a><span id="l1.18"> var nsIMsgCompDeliverMode = Components.interfaces.nsIMsgCompDeliverMode;</span>
<a href="#l1.19"></a><span id="l1.19"> var nsIMsgCompSendFormat = Components.interfaces.nsIMsgCompSendFormat;</span>
<a href="#l1.20"></a><span id="l1.20"> var nsIMsgCompConvertible = Components.interfaces.nsIMsgCompConvertible;</span>
<a href="#l1.21"></a><span id="l1.21"> var nsIMsgCompType = Components.interfaces.nsIMsgCompType;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -157,16 +159,26 @@ function ReleaseGlobalVariables()</span>
<a href="#l1.23"></a><span id="l1.23">   gMessenger = null;</span>
<a href="#l1.24"></a><span id="l1.24">   gDisableAttachmentReminder = false;</span>
<a href="#l1.25"></a><span id="l1.25">   _gComposeBundle = null;</span>
<a href="#l1.26"></a><span id="l1.26">   MailServices.mailSession.RemoveMsgWindow(msgWindow);</span>
<a href="#l1.27"></a><span id="l1.27">   msgWindow = null;</span>
<a href="#l1.28"></a><span id="l1.28"> }</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30"> /**</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+ * Get a pretty, human-readable shortcut key string from a given &lt;key&gt; id.</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+ *</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+ * @param aKeyId   the ID of a &lt;key&gt; element</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineplus">+ * @return string  pretty, human-readable shortcut key string from the &lt;key&gt;</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+ */</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+function getPrettyKey(aKeyId) {</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+  return ShortcutUtils.prettifyShortcut(document.getElementById(aKeyId));</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+}</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineplus">+/**</span>
<a href="#l1.41"></a><span id="l1.41">  * Disables or enables editable elements in the window.</span>
<a href="#l1.42"></a><span id="l1.42">  * The elements to operate on are marked with the &quot;disableonsend&quot; attribute.</span>
<a href="#l1.43"></a><span id="l1.43">  * This includes elements like the address list, attachment list, subject</span>
<a href="#l1.44"></a><span id="l1.44">  * and message body.</span>
<a href="#l1.45"></a><span id="l1.45">  *</span>
<a href="#l1.46"></a><span id="l1.46">  * @param aDisable  true = disable items. false = enable items.</span>
<a href="#l1.47"></a><span id="l1.47">  */</span>
<a href="#l1.48"></a><span id="l1.48"> function updateEditableFields(aDisable)</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineat">@@ -934,16 +946,146 @@ var attachmentBucketController = {</span>
<a href="#l1.50"></a><span id="l1.50">       isEnabled: function() {</span>
<a href="#l1.51"></a><span id="l1.51">         return MessageGetNumSelectedAttachments() == 1;</span>
<a href="#l1.52"></a><span id="l1.52">       },</span>
<a href="#l1.53"></a><span id="l1.53">       doCommand: function() {</span>
<a href="#l1.54"></a><span id="l1.54">         RenameSelectedAttachment();</span>
<a href="#l1.55"></a><span id="l1.55">       }</span>
<a href="#l1.56"></a><span id="l1.56">     },</span>
<a href="#l1.57"></a><span id="l1.57"> </span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+    cmd_reorderAttachments: {</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineplus">+        if (attachmentsCount() == 0) {</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+          let reorderAttachmentsPanel =</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+            document.getElementById(&quot;reorderAttachmentsPanel&quot;);</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineplus">+          if (reorderAttachmentsPanel.state == &quot;open&quot;) {</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineplus">+            // When the panel is open and all attachments get deleted,</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineplus">+            // we get notified here and want to close the panel.</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineplus">+            reorderAttachmentsPanel.hidePopup();</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineplus">+          }</span>
<a href="#l1.68"></a><span id="l1.68" class="difflineplus">+        }</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineplus">+        return (attachmentsCount() &gt; 1);</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineplus">+      },</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineplus">+        showReorderAttachmentsPanel();</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineplus">+      }</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineplus">+    },</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineplus">+</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineplus">+    cmd_moveAttachmentUp: {</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineplus">+        return attachmentsSelectedCount &gt; 0 &amp;&amp;</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineplus">+               attachmentsSelectedCount != attachmentsCount() &amp;&amp;</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineplus">+               !attachmentsSelectionIsBlock(&quot;top&quot;);</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineplus">+      },</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+        moveSelectedAttachments(&quot;up&quot;);</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineplus">+      }</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+    },</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+    cmd_moveAttachmentDown: {</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.90"></a><span id="l1.90" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineplus">+        return attachmentsSelectedCount &gt; 0 &amp;&amp;</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineplus">+               attachmentsSelectedCount != attachmentsCount() &amp;&amp;</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineplus">+               !attachmentsSelectionIsBlock(&quot;bottom&quot;);</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineplus">+      },</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineplus">+        moveSelectedAttachments(&quot;down&quot;);</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineplus">+      }</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineplus">+    },</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineplus">+</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineplus">+    cmd_moveAttachmentBundleUp: {</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.102"></a><span id="l1.102" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.103"></a><span id="l1.103" class="difflineplus">+        return attachmentsSelectedCount &gt; 1 &amp;&amp;</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineplus">+               !attachmentsSelectionIsBlock();</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+      },</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineplus">+        moveSelectedAttachments(&quot;bundleUp&quot;);</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineplus">+      }</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineplus">+    },</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineplus">+</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineplus">+    cmd_moveAttachmentBundleDown: {</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineplus">+        return attachmentsSelectedCount &gt; 1 &amp;&amp;</span>
<a href="#l1.115"></a><span id="l1.115" class="difflineplus">+               !attachmentsSelectionIsBlock();</span>
<a href="#l1.116"></a><span id="l1.116" class="difflineplus">+      },</span>
<a href="#l1.117"></a><span id="l1.117" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.118"></a><span id="l1.118" class="difflineplus">+        moveSelectedAttachments(&quot;bundleDown&quot;);</span>
<a href="#l1.119"></a><span id="l1.119" class="difflineplus">+      }</span>
<a href="#l1.120"></a><span id="l1.120" class="difflineplus">+    },</span>
<a href="#l1.121"></a><span id="l1.121" class="difflineplus">+</span>
<a href="#l1.122"></a><span id="l1.122" class="difflineplus">+    cmd_moveAttachmentTop: {</span>
<a href="#l1.123"></a><span id="l1.123" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.124"></a><span id="l1.124" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.125"></a><span id="l1.125" class="difflineplus">+        return attachmentsSelectedCount &gt; 0 &amp;&amp;</span>
<a href="#l1.126"></a><span id="l1.126" class="difflineplus">+               attachmentsSelectedCount != attachmentsCount() &amp;&amp;</span>
<a href="#l1.127"></a><span id="l1.127" class="difflineplus">+               !attachmentsSelectionIsBlock(&quot;top&quot;);</span>
<a href="#l1.128"></a><span id="l1.128" class="difflineplus">+      },</span>
<a href="#l1.129"></a><span id="l1.129" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.130"></a><span id="l1.130" class="difflineplus">+        moveSelectedAttachments(&quot;top&quot;);</span>
<a href="#l1.131"></a><span id="l1.131" class="difflineplus">+      }</span>
<a href="#l1.132"></a><span id="l1.132" class="difflineplus">+    },</span>
<a href="#l1.133"></a><span id="l1.133" class="difflineplus">+</span>
<a href="#l1.134"></a><span id="l1.134" class="difflineplus">+    cmd_moveAttachmentBottom: {</span>
<a href="#l1.135"></a><span id="l1.135" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.136"></a><span id="l1.136" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.137"></a><span id="l1.137" class="difflineplus">+        return attachmentsSelectedCount &gt; 0 &amp;&amp;</span>
<a href="#l1.138"></a><span id="l1.138" class="difflineplus">+               attachmentsSelectedCount != attachmentsCount() &amp;&amp;</span>
<a href="#l1.139"></a><span id="l1.139" class="difflineplus">+               !attachmentsSelectionIsBlock(&quot;bottom&quot;);</span>
<a href="#l1.140"></a><span id="l1.140" class="difflineplus">+      },</span>
<a href="#l1.141"></a><span id="l1.141" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.142"></a><span id="l1.142" class="difflineplus">+        moveSelectedAttachments(&quot;bottom&quot;);</span>
<a href="#l1.143"></a><span id="l1.143" class="difflineplus">+      }</span>
<a href="#l1.144"></a><span id="l1.144" class="difflineplus">+    },</span>
<a href="#l1.145"></a><span id="l1.145" class="difflineplus">+</span>
<a href="#l1.146"></a><span id="l1.146" class="difflineplus">+    cmd_sortAttachmentsToggle: {</span>
<a href="#l1.147"></a><span id="l1.147" class="difflineplus">+      isEnabled: function() {</span>
<a href="#l1.148"></a><span id="l1.148" class="difflineplus">+        let attachmentsSelectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.149"></a><span id="l1.149" class="difflineplus">+        let currSortOrder = attachmentsSelectionGetSortOrder();</span>
<a href="#l1.150"></a><span id="l1.150" class="difflineplus">+        let isBlock = attachmentsSelectionIsBlock();</span>
<a href="#l1.151"></a><span id="l1.151" class="difflineplus">+        // If current sorting is ascending AND it's a block; OR</span>
<a href="#l1.152"></a><span id="l1.152" class="difflineplus">+        // if current sorting is descending AND it's NOT a block yet:</span>
<a href="#l1.153"></a><span id="l1.153" class="difflineplus">+        // Offer toggle button face to sort descending.</span>
<a href="#l1.154"></a><span id="l1.154" class="difflineplus">+        // In all other cases, offer toggle button face to sort ascending.</span>
<a href="#l1.155"></a><span id="l1.155" class="difflineplus">+        let btnAscending = !((currSortOrder == &quot;ascending&quot;) &amp;&amp; isBlock ||</span>
<a href="#l1.156"></a><span id="l1.156" class="difflineplus">+                             (currSortOrder == &quot;descending&quot;) &amp;&amp; !isBlock);</span>
<a href="#l1.157"></a><span id="l1.157" class="difflineplus">+</span>
<a href="#l1.158"></a><span id="l1.158" class="difflineplus">+        let toggleCmd = document.getElementById(&quot;cmd_sortAttachmentsToggle&quot;);</span>
<a href="#l1.159"></a><span id="l1.159" class="difflineplus">+        let toggleBtn = document.getElementById(&quot;btn_sortAttachmentsToggle&quot;);</span>
<a href="#l1.160"></a><span id="l1.160" class="difflineplus">+        let sortDirection;</span>
<a href="#l1.161"></a><span id="l1.161" class="difflineplus">+        let btnLabelAttr;</span>
<a href="#l1.162"></a><span id="l1.162" class="difflineplus">+        let btnAccKeyAttr;</span>
<a href="#l1.163"></a><span id="l1.163" class="difflineplus">+        // Set sortDirection for toggleCmd, and respective button face.</span>
<a href="#l1.164"></a><span id="l1.164" class="difflineplus">+        if (btnAscending) {</span>
<a href="#l1.165"></a><span id="l1.165" class="difflineplus">+          sortDirection = &quot;ascending&quot;;</span>
<a href="#l1.166"></a><span id="l1.166" class="difflineplus">+          btnLabelAttr = &quot;data-labelAZ&quot;;</span>
<a href="#l1.167"></a><span id="l1.167" class="difflineplus">+          btnAccKeyAttr = &quot;data-accesskeyAZ&quot;;</span>
<a href="#l1.168"></a><span id="l1.168" class="difflineplus">+        } else {</span>
<a href="#l1.169"></a><span id="l1.169" class="difflineplus">+          sortDirection = &quot;descending&quot;;</span>
<a href="#l1.170"></a><span id="l1.170" class="difflineplus">+          btnLabelAttr = &quot;data-labelZA&quot;;</span>
<a href="#l1.171"></a><span id="l1.171" class="difflineplus">+          btnAccKeyAttr = &quot;data-accesskeyZA&quot;;</span>
<a href="#l1.172"></a><span id="l1.172" class="difflineplus">+        }</span>
<a href="#l1.173"></a><span id="l1.173" class="difflineplus">+        // Set the sort direction for toggleCmd.</span>
<a href="#l1.174"></a><span id="l1.174" class="difflineplus">+        toggleCmd.setAttribute(&quot;data-sortdirection&quot;, sortDirection);</span>
<a href="#l1.175"></a><span id="l1.175" class="difflineplus">+        // The button's icon is set dynamically via CSS involving the button's</span>
<a href="#l1.176"></a><span id="l1.176" class="difflineplus">+        // data-sortdirection attribute, which is forwarded by the command.</span>
<a href="#l1.177"></a><span id="l1.177" class="difflineplus">+        toggleBtn.setAttribute(&quot;label&quot;, toggleBtn.getAttribute(btnLabelAttr));</span>
<a href="#l1.178"></a><span id="l1.178" class="difflineplus">+        toggleBtn.setAttribute(&quot;accesskey&quot;, toggleBtn.getAttribute(btnAccKeyAttr));</span>
<a href="#l1.179"></a><span id="l1.179" class="difflineplus">+</span>
<a href="#l1.180"></a><span id="l1.180" class="difflineplus">+        return attachmentsSelectedCount &gt; 1 &amp;&amp;</span>
<a href="#l1.181"></a><span id="l1.181" class="difflineplus">+               !(currSortOrder == &quot;equivalent&quot; &amp;&amp; isBlock);</span>
<a href="#l1.182"></a><span id="l1.182" class="difflineplus">+      },</span>
<a href="#l1.183"></a><span id="l1.183" class="difflineplus">+      doCommand: function() {</span>
<a href="#l1.184"></a><span id="l1.184" class="difflineplus">+        moveSelectedAttachments(&quot;toggleSort&quot;);</span>
<a href="#l1.185"></a><span id="l1.185" class="difflineplus">+      }</span>
<a href="#l1.186"></a><span id="l1.186" class="difflineplus">+    },</span>
<a href="#l1.187"></a><span id="l1.187" class="difflineplus">+</span>
<a href="#l1.188"></a><span id="l1.188">     cmd_convertCloud: {</span>
<a href="#l1.189"></a><span id="l1.189">       isEnabled: function() {</span>
<a href="#l1.190"></a><span id="l1.190">         // Hide the command entirely if Filelink is disabled, or if there are</span>
<a href="#l1.191"></a><span id="l1.191">         // no cloud accounts.</span>
<a href="#l1.192"></a><span id="l1.192">         let cmd = document.getElementById(&quot;cmd_convertCloud&quot;);</span>
<a href="#l1.193"></a><span id="l1.193"> </span>
<a href="#l1.194"></a><span id="l1.194">         cmd.hidden = (!Services.prefs.getBoolPref(&quot;mail.cloud_files.enabled&quot;) ||</span>
<a href="#l1.195"></a><span id="l1.195">                       cloudFileAccounts.accounts.length == 0) ||</span>
<a href="#l1.196"></a><span id="l1.196" class="difflineat">@@ -1246,36 +1388,49 @@ function openEditorContextMenu(popup)</span>
<a href="#l1.197"></a><span id="l1.197"> </span>
<a href="#l1.198"></a><span id="l1.198"> function updateEditItems()</span>
<a href="#l1.199"></a><span id="l1.199"> {</span>
<a href="#l1.200"></a><span id="l1.200">   goUpdateCommand(&quot;cmd_paste&quot;);</span>
<a href="#l1.201"></a><span id="l1.201">   goUpdateCommand(&quot;cmd_pasteNoFormatting&quot;);</span>
<a href="#l1.202"></a><span id="l1.202">   goUpdateCommand(&quot;cmd_pasteQuote&quot;);</span>
<a href="#l1.203"></a><span id="l1.203">   goUpdateCommand(&quot;cmd_delete&quot;);</span>
<a href="#l1.204"></a><span id="l1.204">   goUpdateCommand(&quot;cmd_renameAttachment&quot;);</span>
<a href="#l1.205"></a><span id="l1.205" class="difflineplus">+  goUpdateCommand(&quot;cmd_reorderAttachments&quot;);</span>
<a href="#l1.206"></a><span id="l1.206">   goUpdateCommand(&quot;cmd_selectAll&quot;);</span>
<a href="#l1.207"></a><span id="l1.207">   goUpdateCommand(&quot;cmd_openAttachment&quot;);</span>
<a href="#l1.208"></a><span id="l1.208">   goUpdateCommand(&quot;cmd_findReplace&quot;);</span>
<a href="#l1.209"></a><span id="l1.209">   goUpdateCommand(&quot;cmd_find&quot;);</span>
<a href="#l1.210"></a><span id="l1.210">   goUpdateCommand(&quot;cmd_findNext&quot;);</span>
<a href="#l1.211"></a><span id="l1.211">   goUpdateCommand(&quot;cmd_findPrev&quot;);</span>
<a href="#l1.212"></a><span id="l1.212"> }</span>
<a href="#l1.213"></a><span id="l1.213"> </span>
<a href="#l1.214"></a><span id="l1.214"> function updateAttachmentItems()</span>
<a href="#l1.215"></a><span id="l1.215"> {</span>
<a href="#l1.216"></a><span id="l1.216">   goUpdateCommand(&quot;cmd_attachCloud&quot;);</span>
<a href="#l1.217"></a><span id="l1.217">   goUpdateCommand(&quot;cmd_convertCloud&quot;);</span>
<a href="#l1.218"></a><span id="l1.218">   goUpdateCommand(&quot;cmd_convertAttachment&quot;);</span>
<a href="#l1.219"></a><span id="l1.219">   goUpdateCommand(&quot;cmd_cancelUpload&quot;);</span>
<a href="#l1.220"></a><span id="l1.220">   goUpdateCommand(&quot;cmd_delete&quot;);</span>
<a href="#l1.221"></a><span id="l1.221">   goUpdateCommand(&quot;cmd_renameAttachment&quot;);</span>
<a href="#l1.222"></a><span id="l1.222" class="difflineplus">+  updateReorderAttachmentsItems();</span>
<a href="#l1.223"></a><span id="l1.223">   goUpdateCommand(&quot;cmd_selectAll&quot;);</span>
<a href="#l1.224"></a><span id="l1.224">   goUpdateCommand(&quot;cmd_openAttachment&quot;);</span>
<a href="#l1.225"></a><span id="l1.225"> }</span>
<a href="#l1.226"></a><span id="l1.226"> </span>
<a href="#l1.227"></a><span id="l1.227" class="difflineplus">+function updateReorderAttachmentsItems() {</span>
<a href="#l1.228"></a><span id="l1.228" class="difflineplus">+  goUpdateCommand(&quot;cmd_reorderAttachments&quot;);</span>
<a href="#l1.229"></a><span id="l1.229" class="difflineplus">+  goUpdateCommand(&quot;cmd_moveAttachmentUp&quot;);</span>
<a href="#l1.230"></a><span id="l1.230" class="difflineplus">+  goUpdateCommand(&quot;cmd_moveAttachmentDown&quot;);</span>
<a href="#l1.231"></a><span id="l1.231" class="difflineplus">+  goUpdateCommand(&quot;cmd_moveAttachmentBundleUp&quot;);</span>
<a href="#l1.232"></a><span id="l1.232" class="difflineplus">+  goUpdateCommand(&quot;cmd_moveAttachmentBundleDown&quot;);</span>
<a href="#l1.233"></a><span id="l1.233" class="difflineplus">+  goUpdateCommand(&quot;cmd_moveAttachmentTop&quot;);</span>
<a href="#l1.234"></a><span id="l1.234" class="difflineplus">+  goUpdateCommand(&quot;cmd_moveAttachmentBottom&quot;);</span>
<a href="#l1.235"></a><span id="l1.235" class="difflineplus">+  goUpdateCommand(&quot;cmd_sortAttachmentsToggle&quot;);</span>
<a href="#l1.236"></a><span id="l1.236" class="difflineplus">+}</span>
<a href="#l1.237"></a><span id="l1.237" class="difflineplus">+</span>
<a href="#l1.238"></a><span id="l1.238"> /**</span>
<a href="#l1.239"></a><span id="l1.239">  * Update all the commands for sending a message to reflect their current state.</span>
<a href="#l1.240"></a><span id="l1.240">  */</span>
<a href="#l1.241"></a><span id="l1.241"> function updateSendCommands(aHaveController)</span>
<a href="#l1.242"></a><span id="l1.242"> {</span>
<a href="#l1.243"></a><span id="l1.243">   updateSendLock();</span>
<a href="#l1.244"></a><span id="l1.244">   if (aHaveController) {</span>
<a href="#l1.245"></a><span id="l1.245">     goUpdateCommand(&quot;cmd_sendButton&quot;);</span>
<a href="#l1.246"></a><span id="l1.246" class="difflineat">@@ -2175,16 +2330,17 @@ attachmentWorker.onmessage = function(ev</span>
<a href="#l1.247"></a><span id="l1.247">     manageAttachmentNotification(true);</span>
<a href="#l1.248"></a><span id="l1.248"> };</span>
<a href="#l1.249"></a><span id="l1.249"> </span>
<a href="#l1.250"></a><span id="l1.250"> /**</span>
<a href="#l1.251"></a><span id="l1.251">  * Called when number of attachments changes.</span>
<a href="#l1.252"></a><span id="l1.252">  */</span>
<a href="#l1.253"></a><span id="l1.253"> function AttachmentsChanged() {</span>
<a href="#l1.254"></a><span id="l1.254">   manageAttachmentNotification(true);</span>
<a href="#l1.255"></a><span id="l1.255" class="difflineplus">+  updateAttachmentItems();</span>
<a href="#l1.256"></a><span id="l1.256"> }</span>
<a href="#l1.257"></a><span id="l1.257"> </span>
<a href="#l1.258"></a><span id="l1.258"> /**</span>
<a href="#l1.259"></a><span id="l1.259">  * This functions returns a valid spellcheck language. It checks that a</span>
<a href="#l1.260"></a><span id="l1.260">  * dictionary exists for the language passed in, if any. It also retrieves the</span>
<a href="#l1.261"></a><span id="l1.261">  * corresponding preference and ensures that a dictionary exists. If not, it</span>
<a href="#l1.262"></a><span id="l1.262">  * adjusts the preference accordingly.</span>
<a href="#l1.263"></a><span id="l1.263">  * When the nominated dictionary does not exist, the effects are very confusing</span>
<a href="#l1.264"></a><span id="l1.264" class="difflineat">@@ -4277,22 +4433,108 @@ function AddAttachments(aAttachments, aC</span>
<a href="#l1.265"></a><span id="l1.265">     UpdateAttachmentBucket(true);</span>
<a href="#l1.266"></a><span id="l1.266">     dispatchAttachmentBucketEvent(&quot;attachments-added&quot;, addedAttachments);</span>
<a href="#l1.267"></a><span id="l1.267">     AttachmentsChanged();</span>
<a href="#l1.268"></a><span id="l1.268">   }</span>
<a href="#l1.269"></a><span id="l1.269"> </span>
<a href="#l1.270"></a><span id="l1.270">   return items;</span>
<a href="#l1.271"></a><span id="l1.271"> }</span>
<a href="#l1.272"></a><span id="l1.272"> </span>
<a href="#l1.273"></a><span id="l1.273" class="difflineplus">+/**</span>
<a href="#l1.274"></a><span id="l1.274" class="difflineplus">+ * Get the number of all attachments of the message.</span>
<a href="#l1.275"></a><span id="l1.275" class="difflineplus">+ *</span>
<a href="#l1.276"></a><span id="l1.276" class="difflineplus">+ * @return the number of all attachment items in attachmentBucket;</span>
<a href="#l1.277"></a><span id="l1.277" class="difflineplus">+ *         0 if attachmentBucket not found or no attachments in the list.</span>
<a href="#l1.278"></a><span id="l1.278" class="difflineplus">+ */</span>
<a href="#l1.279"></a><span id="l1.279" class="difflineplus">+function attachmentsCount()</span>
<a href="#l1.280"></a><span id="l1.280" class="difflineplus">+{</span>
<a href="#l1.281"></a><span id="l1.281" class="difflineplus">+  let bucketList = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.282"></a><span id="l1.282" class="difflineplus">+  return (bucketList) ? bucketList.itemCount : 0;</span>
<a href="#l1.283"></a><span id="l1.283" class="difflineplus">+}</span>
<a href="#l1.284"></a><span id="l1.284" class="difflineplus">+</span>
<a href="#l1.285"></a><span id="l1.285"> function MessageGetNumSelectedAttachments()</span>
<a href="#l1.286"></a><span id="l1.286"> {</span>
<a href="#l1.287"></a><span id="l1.287" class="difflineminus">-  var bucketList = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.288"></a><span id="l1.288" class="difflineplus">+  let bucketList = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.289"></a><span id="l1.289">   return (bucketList) ? bucketList.selectedCount : 0;</span>
<a href="#l1.290"></a><span id="l1.290"> }</span>
<a href="#l1.291"></a><span id="l1.291"> </span>
<a href="#l1.292"></a><span id="l1.292" class="difflineplus">+/**</span>
<a href="#l1.293"></a><span id="l1.293" class="difflineplus">+ * Returns a sorted-by-index, &quot;non-live&quot; array of selected attachment list items.</span>
<a href="#l1.294"></a><span id="l1.294" class="difflineplus">+ *</span>
<a href="#l1.295"></a><span id="l1.295" class="difflineplus">+ * @param aAscending  true (default): sort return array ascending</span>
<a href="#l1.296"></a><span id="l1.296" class="difflineplus">+ *                    false         : sort return array descending</span>
<a href="#l1.297"></a><span id="l1.297" class="difflineplus">+ * @return {array}    an array of selected listitem elements in attachmentBucket</span>
<a href="#l1.298"></a><span id="l1.298" class="difflineplus">+ *                    listbox, &quot;non-live&quot; and sorted by their index in the list;</span>
<a href="#l1.299"></a><span id="l1.299" class="difflineplus">+ *                    [] if no attachments selected</span>
<a href="#l1.300"></a><span id="l1.300" class="difflineplus">+ */</span>
<a href="#l1.301"></a><span id="l1.301" class="difflineplus">+function attachmentsSelectedItemsGetSortedArray(aAscending = true)</span>
<a href="#l1.302"></a><span id="l1.302" class="difflineplus">+{</span>
<a href="#l1.303"></a><span id="l1.303" class="difflineplus">+  if (!MessageGetNumSelectedAttachments())</span>
<a href="#l1.304"></a><span id="l1.304" class="difflineplus">+    return [];</span>
<a href="#l1.305"></a><span id="l1.305" class="difflineplus">+</span>
<a href="#l1.306"></a><span id="l1.306" class="difflineplus">+  let bucketList = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.307"></a><span id="l1.307" class="difflineplus">+  // bucketList.selectedItems is a &quot;live&quot; and &quot;unordered&quot; node list (items get</span>
<a href="#l1.308"></a><span id="l1.308" class="difflineplus">+  // added in the order they were added to the selection). But we want a stable</span>
<a href="#l1.309"></a><span id="l1.309" class="difflineplus">+  // (&quot;non-live&quot;) array of selected items, sorted by their index in the list.</span>
<a href="#l1.310"></a><span id="l1.310" class="difflineplus">+  let selItems = [...bucketList.selectedItems];</span>
<a href="#l1.311"></a><span id="l1.311" class="difflineplus">+  if (aAscending) {</span>
<a href="#l1.312"></a><span id="l1.312" class="difflineplus">+    selItems.sort(</span>
<a href="#l1.313"></a><span id="l1.313" class="difflineplus">+      (a, b) =&gt; bucketList.getIndexOfItem(a) - bucketList.getIndexOfItem(b));</span>
<a href="#l1.314"></a><span id="l1.314" class="difflineplus">+  } else { // descending</span>
<a href="#l1.315"></a><span id="l1.315" class="difflineplus">+    selItems.sort(</span>
<a href="#l1.316"></a><span id="l1.316" class="difflineplus">+      (a, b) =&gt; bucketList.getIndexOfItem(b) - bucketList.getIndexOfItem(a));</span>
<a href="#l1.317"></a><span id="l1.317" class="difflineplus">+  }</span>
<a href="#l1.318"></a><span id="l1.318" class="difflineplus">+  return selItems;</span>
<a href="#l1.319"></a><span id="l1.319" class="difflineplus">+}</span>
<a href="#l1.320"></a><span id="l1.320" class="difflineplus">+</span>
<a href="#l1.321"></a><span id="l1.321" class="difflineplus">+/**</span>
<a href="#l1.322"></a><span id="l1.322" class="difflineplus">+ * Return true if the selected attachment items are a coherent block in the list,</span>
<a href="#l1.323"></a><span id="l1.323" class="difflineplus">+ * otherwise false.</span>
<a href="#l1.324"></a><span id="l1.324" class="difflineplus">+ *</span>
<a href="#l1.325"></a><span id="l1.325" class="difflineplus">+ * @param aListPosition (optional)  &quot;top&quot;   : Return true only if the block is</span>
<a href="#l1.326"></a><span id="l1.326" class="difflineplus">+ *                                            at the top of the list.</span>
<a href="#l1.327"></a><span id="l1.327" class="difflineplus">+ *                                  &quot;bottom&quot;: Return true only if the block is</span>
<a href="#l1.328"></a><span id="l1.328" class="difflineplus">+ *                                            at the bottom of the list.</span>
<a href="#l1.329"></a><span id="l1.329" class="difflineplus">+ * @return {boolean} true : The selected attachment items are a coherent block</span>
<a href="#l1.330"></a><span id="l1.330" class="difflineplus">+ *                          (at the list edge if/as specified by 'aListPosition'),</span>
<a href="#l1.331"></a><span id="l1.331" class="difflineplus">+ *                          or only 1 item selected.</span>
<a href="#l1.332"></a><span id="l1.332" class="difflineplus">+ *                   false: The selected attachment items are NOT a coherent block</span>
<a href="#l1.333"></a><span id="l1.333" class="difflineplus">+ *                          (at the list edge if/as specified by 'aListPosition'),</span>
<a href="#l1.334"></a><span id="l1.334" class="difflineplus">+ *                          or no attachments selected, or no attachments,</span>
<a href="#l1.335"></a><span id="l1.335" class="difflineplus">+ *                          or no attachmentBucket.</span>
<a href="#l1.336"></a><span id="l1.336" class="difflineplus">+ */</span>
<a href="#l1.337"></a><span id="l1.337" class="difflineplus">+function attachmentsSelectionIsBlock(aListPosition)</span>
<a href="#l1.338"></a><span id="l1.338" class="difflineplus">+{</span>
<a href="#l1.339"></a><span id="l1.339" class="difflineplus">+  let selectedCount = MessageGetNumSelectedAttachments();</span>
<a href="#l1.340"></a><span id="l1.340" class="difflineplus">+  if (selectedCount &lt; 1)</span>
<a href="#l1.341"></a><span id="l1.341" class="difflineplus">+    // No attachments selected, no attachments, or no attachmentBucket.</span>
<a href="#l1.342"></a><span id="l1.342" class="difflineplus">+    return false;</span>
<a href="#l1.343"></a><span id="l1.343" class="difflineplus">+</span>
<a href="#l1.344"></a><span id="l1.344" class="difflineplus">+  let bucketList = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.345"></a><span id="l1.345" class="difflineplus">+  let selItems = attachmentsSelectedItemsGetSortedArray();</span>
<a href="#l1.346"></a><span id="l1.346" class="difflineplus">+  let indexFirstSelAttachment =</span>
<a href="#l1.347"></a><span id="l1.347" class="difflineplus">+    bucketList.getIndexOfItem(selItems[0]);</span>
<a href="#l1.348"></a><span id="l1.348" class="difflineplus">+  let indexLastSelAttachment =</span>
<a href="#l1.349"></a><span id="l1.349" class="difflineplus">+    bucketList.getIndexOfItem(selItems[selectedCount - 1]);</span>
<a href="#l1.350"></a><span id="l1.350" class="difflineplus">+  let isBlock = ((indexFirstSelAttachment) ==</span>
<a href="#l1.351"></a><span id="l1.351" class="difflineplus">+                 (indexLastSelAttachment + 1 - selectedCount));</span>
<a href="#l1.352"></a><span id="l1.352" class="difflineplus">+</span>
<a href="#l1.353"></a><span id="l1.353" class="difflineplus">+  switch (aListPosition) {</span>
<a href="#l1.354"></a><span id="l1.354" class="difflineplus">+  case &quot;top&quot;:</span>
<a href="#l1.355"></a><span id="l1.355" class="difflineplus">+    // True if selection is a coherent block at the top of the list.</span>
<a href="#l1.356"></a><span id="l1.356" class="difflineplus">+    return (indexFirstSelAttachment == 0) &amp;&amp; isBlock;</span>
<a href="#l1.357"></a><span id="l1.357" class="difflineplus">+  case &quot;bottom&quot;:</span>
<a href="#l1.358"></a><span id="l1.358" class="difflineplus">+    // True if selection is a coherent block at the bottom of the list.</span>
<a href="#l1.359"></a><span id="l1.359" class="difflineplus">+    return (indexLastSelAttachment == (attachmentsCount() - 1)) &amp;&amp; isBlock;</span>
<a href="#l1.360"></a><span id="l1.360" class="difflineplus">+  default:</span>
<a href="#l1.361"></a><span id="l1.361" class="difflineplus">+    // True if selection is a coherent block.</span>
<a href="#l1.362"></a><span id="l1.362" class="difflineplus">+    return isBlock;</span>
<a href="#l1.363"></a><span id="l1.363" class="difflineplus">+  }</span>
<a href="#l1.364"></a><span id="l1.364" class="difflineplus">+}</span>
<a href="#l1.365"></a><span id="l1.365" class="difflineplus">+</span>
<a href="#l1.366"></a><span id="l1.366"> function AttachPage()</span>
<a href="#l1.367"></a><span id="l1.367"> {</span>
<a href="#l1.368"></a><span id="l1.368">   let result = {value:&quot;http://&quot;};</span>
<a href="#l1.369"></a><span id="l1.369">   if (Services.prompt.prompt(window,</span>
<a href="#l1.370"></a><span id="l1.370">                       getComposeBundle().getString(&quot;attachPageDlogTitle&quot;),</span>
<a href="#l1.371"></a><span id="l1.371">                       getComposeBundle().getString(&quot;attachPageDlogMessage&quot;),</span>
<a href="#l1.372"></a><span id="l1.372">                       result,</span>
<a href="#l1.373"></a><span id="l1.373">                       null,</span>
<a href="#l1.374"></a><span id="l1.374" class="difflineat">@@ -4358,16 +4600,21 @@ function RemoveAllAttachments()</span>
<a href="#l1.375"></a><span id="l1.375"> </span>
<a href="#l1.376"></a><span id="l1.376">     removedAttachments.appendElement(child.attachment);</span>
<a href="#l1.377"></a><span id="l1.377">     // Let's release the attachment object hold by the node else it won't go</span>
<a href="#l1.378"></a><span id="l1.378">     // away until the window is destroyed</span>
<a href="#l1.379"></a><span id="l1.379">     child.attachment = null;</span>
<a href="#l1.380"></a><span id="l1.380">   }</span>
<a href="#l1.381"></a><span id="l1.381"> </span>
<a href="#l1.382"></a><span id="l1.382">   if (removedAttachments.length &gt; 0) {</span>
<a href="#l1.383"></a><span id="l1.383" class="difflineplus">+    // Bug workaround: Force update of selectedCount and selectedItem.</span>
<a href="#l1.384"></a><span id="l1.384" class="difflineplus">+    bucket.clearSelection();</span>
<a href="#l1.385"></a><span id="l1.385" class="difflineplus">+</span>
<a href="#l1.386"></a><span id="l1.386" class="difflineplus">+    gContentChanged = true;</span>
<a href="#l1.387"></a><span id="l1.387" class="difflineplus">+</span>
<a href="#l1.388"></a><span id="l1.388">     dispatchAttachmentBucketEvent(&quot;attachments-removed&quot;, removedAttachments);</span>
<a href="#l1.389"></a><span id="l1.389">     UpdateAttachmentBucket(false);</span>
<a href="#l1.390"></a><span id="l1.390">     AttachmentsChanged();</span>
<a href="#l1.391"></a><span id="l1.391">   }</span>
<a href="#l1.392"></a><span id="l1.392"> }</span>
<a href="#l1.393"></a><span id="l1.393"> </span>
<a href="#l1.394"></a><span id="l1.394"> /**</span>
<a href="#l1.395"></a><span id="l1.395">  * Display/hide and update the content of the attachment bucket (specifically</span>
<a href="#l1.396"></a><span id="l1.396" class="difflineat">@@ -4391,16 +4638,19 @@ function UpdateAttachmentBucket(aShowBuc</span>
<a href="#l1.397"></a><span id="l1.397">   document.getElementById(&quot;attachments-box&quot;).collapsed = !aShowBucket;</span>
<a href="#l1.398"></a><span id="l1.398">   document.getElementById(&quot;attachmentbucket-sizer&quot;).collapsed = !aShowBucket;</span>
<a href="#l1.399"></a><span id="l1.399"> }</span>
<a href="#l1.400"></a><span id="l1.400"> </span>
<a href="#l1.401"></a><span id="l1.401"> function RemoveSelectedAttachment()</span>
<a href="#l1.402"></a><span id="l1.402"> {</span>
<a href="#l1.403"></a><span id="l1.403">   let bucket = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.404"></a><span id="l1.404">   if (bucket.selectedItems.length &gt; 0) {</span>
<a href="#l1.405"></a><span id="l1.405" class="difflineplus">+    // Remember the current focus index so we can try to restore it when done.</span>
<a href="#l1.406"></a><span id="l1.406" class="difflineplus">+    let focusIndex = bucket.currentIndex;</span>
<a href="#l1.407"></a><span id="l1.407" class="difflineplus">+</span>
<a href="#l1.408"></a><span id="l1.408">     let fileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l1.409"></a><span id="l1.409">                               .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l1.410"></a><span id="l1.410">     let removedAttachments = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l1.411"></a><span id="l1.411">                                        .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l1.412"></a><span id="l1.412"> </span>
<a href="#l1.413"></a><span id="l1.413">     for (let i = bucket.selectedCount - 1; i &gt;= 0; i--) {</span>
<a href="#l1.414"></a><span id="l1.414">       let item = bucket.removeItemAt(bucket.getIndexOfItem(bucket.getSelectedItem(i)));</span>
<a href="#l1.415"></a><span id="l1.415">       if (item.attachment.size != -1) {</span>
<a href="#l1.416"></a><span id="l1.416" class="difflineat">@@ -4421,17 +4671,29 @@ function RemoveSelectedAttachment()</span>
<a href="#l1.417"></a><span id="l1.417">       }</span>
<a href="#l1.418"></a><span id="l1.418"> </span>
<a href="#l1.419"></a><span id="l1.419">       removedAttachments.appendElement(item.attachment);</span>
<a href="#l1.420"></a><span id="l1.420">       // Let's release the attachment object held by the node else it won't go</span>
<a href="#l1.421"></a><span id="l1.421">       // away until the window is destroyed</span>
<a href="#l1.422"></a><span id="l1.422">       item.attachment = null;</span>
<a href="#l1.423"></a><span id="l1.423">     }</span>
<a href="#l1.424"></a><span id="l1.424"> </span>
<a href="#l1.425"></a><span id="l1.425" class="difflineplus">+    // Bug workaround: Force update of selectedCount and selectedItem, both wrong</span>
<a href="#l1.426"></a><span id="l1.426" class="difflineplus">+    // after item removal, to avoid confusion for listening command controllers.</span>
<a href="#l1.427"></a><span id="l1.427" class="difflineplus">+    bucket.clearSelection();</span>
<a href="#l1.428"></a><span id="l1.428" class="difflineplus">+</span>
<a href="#l1.429"></a><span id="l1.429" class="difflineplus">+    // Try to restore original focus or somewhere close by.</span>
<a href="#l1.430"></a><span id="l1.430" class="difflineplus">+    bucket.currentIndex = (focusIndex &lt; bucket.itemCount) ?   // If possible,</span>
<a href="#l1.431"></a><span id="l1.431" class="difflineplus">+                          focusIndex   // restore focus at original position;</span>
<a href="#l1.432"></a><span id="l1.432" class="difflineplus">+                        : ( (bucket.itemCount &gt; 0) ? // else: if attachments exist,</span>
<a href="#l1.433"></a><span id="l1.433" class="difflineplus">+                            (bucket.itemCount - 1)   // focus last item;</span>
<a href="#l1.434"></a><span id="l1.434" class="difflineplus">+                          : -1)                      // else: nothing to focus.</span>
<a href="#l1.435"></a><span id="l1.435" class="difflineplus">+</span>
<a href="#l1.436"></a><span id="l1.436">     gContentChanged = true;</span>
<a href="#l1.437"></a><span id="l1.437" class="difflineplus">+</span>
<a href="#l1.438"></a><span id="l1.438">     dispatchAttachmentBucketEvent(&quot;attachments-removed&quot;, removedAttachments);</span>
<a href="#l1.439"></a><span id="l1.439">     AttachmentsChanged();</span>
<a href="#l1.440"></a><span id="l1.440">   }</span>
<a href="#l1.441"></a><span id="l1.441"> }</span>
<a href="#l1.442"></a><span id="l1.442"> </span>
<a href="#l1.443"></a><span id="l1.443"> function RenameSelectedAttachment()</span>
<a href="#l1.444"></a><span id="l1.444"> {</span>
<a href="#l1.445"></a><span id="l1.445">   let bucket = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.446"></a><span id="l1.446" class="difflineat">@@ -4456,16 +4718,335 @@ function RenameSelectedAttachment()</span>
<a href="#l1.447"></a><span id="l1.447">     item.setAttribute(&quot;name&quot;, attachmentName.value);</span>
<a href="#l1.448"></a><span id="l1.448"> </span>
<a href="#l1.449"></a><span id="l1.449">     gContentChanged = true;</span>
<a href="#l1.450"></a><span id="l1.450"> </span>
<a href="#l1.451"></a><span id="l1.451">     let event = document.createEvent(&quot;CustomEvent&quot;);</span>
<a href="#l1.452"></a><span id="l1.452">     event.initCustomEvent(&quot;attachment-renamed&quot;, true, true, originalName);</span>
<a href="#l1.453"></a><span id="l1.453">     item.dispatchEvent(event);</span>
<a href="#l1.454"></a><span id="l1.454">   }</span>
<a href="#l1.455"></a><span id="l1.455" class="difflineplus">+</span>
<a href="#l1.456"></a><span id="l1.456" class="difflineplus">+  let reorderAttachmentsPanel = document.getElementById(&quot;reorderAttachmentsPanel&quot;);</span>
<a href="#l1.457"></a><span id="l1.457" class="difflineplus">+  let attachmentBucket = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.458"></a><span id="l1.458" class="difflineplus">+  if (reorderAttachmentsPanel.state == &quot;open&quot;) {</span>
<a href="#l1.459"></a><span id="l1.459" class="difflineplus">+    // Hack to ensure that reorderAttachmentsPanel does not get closed as we exit.</span>
<a href="#l1.460"></a><span id="l1.460" class="difflineplus">+    attachmentBucket.setAttribute(&quot;data-ignorenextblur&quot;, &quot;true&quot;);</span>
<a href="#l1.461"></a><span id="l1.461" class="difflineplus">+  }</span>
<a href="#l1.462"></a><span id="l1.462" class="difflineplus">+}</span>
<a href="#l1.463"></a><span id="l1.463" class="difflineplus">+</span>
<a href="#l1.464"></a><span id="l1.464" class="difflineplus">+/**</span>
<a href="#l1.465"></a><span id="l1.465" class="difflineplus">+ * Move selected attachment(s) within the attachment list.</span>
<a href="#l1.466"></a><span id="l1.466" class="difflineplus">+ *</span>
<a href="#l1.467"></a><span id="l1.467" class="difflineplus">+ * @param aDirection  &quot;up&quot;        : Move attachments up in the list.</span>
<a href="#l1.468"></a><span id="l1.468" class="difflineplus">+ *                    &quot;down&quot;      : Move attachments down in the list.</span>
<a href="#l1.469"></a><span id="l1.469" class="difflineplus">+ *                    &quot;top&quot;       : Move attachments to the top of the list.</span>
<a href="#l1.470"></a><span id="l1.470" class="difflineplus">+ *                    &quot;bottom&quot;    : Move attachments to the bottom of the list.</span>
<a href="#l1.471"></a><span id="l1.471" class="difflineplus">+ *                    &quot;bundleUp&quot;  : Move attachments together (upwards).</span>
<a href="#l1.472"></a><span id="l1.472" class="difflineplus">+ *                    &quot;bundleDown&quot;: Move attachments together (downwards).</span>
<a href="#l1.473"></a><span id="l1.473" class="difflineplus">+ *                    &quot;toggleSort&quot;: Sort attachments alphabetically (toggle).</span>
<a href="#l1.474"></a><span id="l1.474" class="difflineplus">+ */</span>
<a href="#l1.475"></a><span id="l1.475" class="difflineplus">+function moveSelectedAttachments(aDirection)</span>
<a href="#l1.476"></a><span id="l1.476" class="difflineplus">+{</span>
<a href="#l1.477"></a><span id="l1.477" class="difflineplus">+  // Command controllers will bail out if no or all attachments are selected,</span>
<a href="#l1.478"></a><span id="l1.478" class="difflineplus">+  // or if block selections can't be moved, or if other direction-specific</span>
<a href="#l1.479"></a><span id="l1.479" class="difflineplus">+  // adverse circumstances prevent the intended movement.</span>
<a href="#l1.480"></a><span id="l1.480" class="difflineplus">+</span>
<a href="#l1.481"></a><span id="l1.481" class="difflineplus">+  if (!aDirection)</span>
<a href="#l1.482"></a><span id="l1.482" class="difflineplus">+    return;</span>
<a href="#l1.483"></a><span id="l1.483" class="difflineplus">+</span>
<a href="#l1.484"></a><span id="l1.484" class="difflineplus">+  let bucket = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.485"></a><span id="l1.485" class="difflineplus">+</span>
<a href="#l1.486"></a><span id="l1.486" class="difflineplus">+  // Ensure focus on bucket when we're coming from 'Reorder Attachments' panel.</span>
<a href="#l1.487"></a><span id="l1.487" class="difflineplus">+  bucket.focus();</span>
<a href="#l1.488"></a><span id="l1.488" class="difflineplus">+</span>
<a href="#l1.489"></a><span id="l1.489" class="difflineplus">+  // Get a sorted and &quot;non-live&quot; array of bucket.selectedItems.</span>
<a href="#l1.490"></a><span id="l1.490" class="difflineplus">+  let selItems = attachmentsSelectedItemsGetSortedArray();</span>
<a href="#l1.491"></a><span id="l1.491" class="difflineplus">+</span>
<a href="#l1.492"></a><span id="l1.492" class="difflineplus">+  let visibleIndex = bucket.currentIndex; // In case of misspelled aDirection.</span>
<a href="#l1.493"></a><span id="l1.493" class="difflineplus">+  // Keep track of the item we had focused originally. Deselect it though,</span>
<a href="#l1.494"></a><span id="l1.494" class="difflineplus">+  // since listbox gets confused if you move its focused item around.</span>
<a href="#l1.495"></a><span id="l1.495" class="difflineplus">+  let focusItem = bucket.currentItem;</span>
<a href="#l1.496"></a><span id="l1.496" class="difflineplus">+  bucket.currentItem = null;</span>
<a href="#l1.497"></a><span id="l1.497" class="difflineplus">+  let upwards;</span>
<a href="#l1.498"></a><span id="l1.498" class="difflineplus">+  let targetItem;</span>
<a href="#l1.499"></a><span id="l1.499" class="difflineplus">+</span>
<a href="#l1.500"></a><span id="l1.500" class="difflineplus">+  switch (aDirection) {</span>
<a href="#l1.501"></a><span id="l1.501" class="difflineplus">+    case &quot;up&quot;:</span>
<a href="#l1.502"></a><span id="l1.502" class="difflineplus">+    case &quot;down&quot;:</span>
<a href="#l1.503"></a><span id="l1.503" class="difflineplus">+      // Move selected attachments upwards/downwards.</span>
<a href="#l1.504"></a><span id="l1.504" class="difflineplus">+      upwards = (aDirection == &quot;up&quot;) ? true : false;</span>
<a href="#l1.505"></a><span id="l1.505" class="difflineplus">+      let blockItems = [];</span>
<a href="#l1.506"></a><span id="l1.506" class="difflineplus">+</span>
<a href="#l1.507"></a><span id="l1.507" class="difflineplus">+      for (let item of selItems) {</span>
<a href="#l1.508"></a><span id="l1.508" class="difflineplus">+        // Handle adjacent selected items en block, via blockItems array.</span>
<a href="#l1.509"></a><span id="l1.509" class="difflineplus">+        blockItems.push(item); // Add current selItem to blockItems.</span>
<a href="#l1.510"></a><span id="l1.510" class="difflineplus">+        let nextItem = item.nextSibling;</span>
<a href="#l1.511"></a><span id="l1.511" class="difflineplus">+        if (!nextItem || !nextItem.selected) {</span>
<a href="#l1.512"></a><span id="l1.512" class="difflineplus">+          // If current selItem is the last blockItem, check out its adjacent</span>
<a href="#l1.513"></a><span id="l1.513" class="difflineplus">+          // item in the intended direction to see if there's room for moving.</span>
<a href="#l1.514"></a><span id="l1.514" class="difflineplus">+          // Note that the block might contain one or more items.</span>
<a href="#l1.515"></a><span id="l1.515" class="difflineplus">+          let checkItem = upwards ?</span>
<a href="#l1.516"></a><span id="l1.516" class="difflineplus">+                          blockItems[0].previousSibling</span>
<a href="#l1.517"></a><span id="l1.517" class="difflineplus">+                        : nextItem;</span>
<a href="#l1.518"></a><span id="l1.518" class="difflineplus">+          // If block-adjacent checkItem exists (and is not selected because</span>
<a href="#l1.519"></a><span id="l1.519" class="difflineplus">+          // then it would be part of the block), we can move the block to the</span>
<a href="#l1.520"></a><span id="l1.520" class="difflineplus">+          // right position.</span>
<a href="#l1.521"></a><span id="l1.521" class="difflineplus">+          if (checkItem) {</span>
<a href="#l1.522"></a><span id="l1.522" class="difflineplus">+            targetItem = upwards ?</span>
<a href="#l1.523"></a><span id="l1.523" class="difflineplus">+                         // Upwards: Insert block items before checkItem,</span>
<a href="#l1.524"></a><span id="l1.524" class="difflineplus">+                         // i.e. before previousSibling of block.</span>
<a href="#l1.525"></a><span id="l1.525" class="difflineplus">+                         checkItem</span>
<a href="#l1.526"></a><span id="l1.526" class="difflineplus">+                         // Downwards: Insert block items *after* checkItem,</span>
<a href="#l1.527"></a><span id="l1.527" class="difflineplus">+                         // i.e. *before* nextSibling.nextSibling of block,</span>
<a href="#l1.528"></a><span id="l1.528" class="difflineplus">+                         // which works according to spec even if that's null.</span>
<a href="#l1.529"></a><span id="l1.529" class="difflineplus">+                       : checkItem.nextSibling;</span>
<a href="#l1.530"></a><span id="l1.530" class="difflineplus">+            // Move current blockItems.</span>
<a href="#l1.531"></a><span id="l1.531" class="difflineplus">+            for (let blockItem of blockItems) {</span>
<a href="#l1.532"></a><span id="l1.532" class="difflineplus">+              bucket.insertBefore(blockItem, targetItem);</span>
<a href="#l1.533"></a><span id="l1.533" class="difflineplus">+            }</span>
<a href="#l1.534"></a><span id="l1.534" class="difflineplus">+          }</span>
<a href="#l1.535"></a><span id="l1.535" class="difflineplus">+          // Else if checkItem doesn't exist, the block is already at the edge</span>
<a href="#l1.536"></a><span id="l1.536" class="difflineplus">+          // of the list, so we can't move it in the intended direction.</span>
<a href="#l1.537"></a><span id="l1.537" class="difflineplus">+          blockItems.length = 0; // Either way, we're done with the current block.</span>
<a href="#l1.538"></a><span id="l1.538" class="difflineplus">+        }</span>
<a href="#l1.539"></a><span id="l1.539" class="difflineplus">+        // Else if current selItem is NOT the end of the current block, proceed:</span>
<a href="#l1.540"></a><span id="l1.540" class="difflineplus">+        // Add next selItem to the block and see if that's the end of the block.</span>
<a href="#l1.541"></a><span id="l1.541" class="difflineplus">+      } // Next selItem.</span>
<a href="#l1.542"></a><span id="l1.542" class="difflineplus">+</span>
<a href="#l1.543"></a><span id="l1.543" class="difflineplus">+      // Ensure helpful visibility of moved items (scroll into view if needed):</span>
<a href="#l1.544"></a><span id="l1.544" class="difflineplus">+      // If first item of selection is now at the top, first list item.</span>
<a href="#l1.545"></a><span id="l1.545" class="difflineplus">+      // Else if last item of selection is now at the bottom, last list item.</span>
<a href="#l1.546"></a><span id="l1.546" class="difflineplus">+      // Otherwise, let's see where we are going by ensuring visibility of the</span>
<a href="#l1.547"></a><span id="l1.547" class="difflineplus">+      // nearest unselected sibling of selection according to direction of move.</span>
<a href="#l1.548"></a><span id="l1.548" class="difflineplus">+      visibleIndex = (bucket.getIndexOfItem(selItems[0]) == 0) ? 0</span>
<a href="#l1.549"></a><span id="l1.549" class="difflineplus">+                   : ((bucket.getIndexOfItem(selItems[selItems.length - 1]) ==</span>
<a href="#l1.550"></a><span id="l1.550" class="difflineplus">+                       (bucket.itemCount - 1)) ?</span>
<a href="#l1.551"></a><span id="l1.551" class="difflineplus">+                       (bucket.itemCount - 1)</span>
<a href="#l1.552"></a><span id="l1.552" class="difflineplus">+                     : (upwards ? bucket.getIndexOfItem(selItems[0].previousSibling)</span>
<a href="#l1.553"></a><span id="l1.553" class="difflineplus">+                       : bucket.getIndexOfItem(selItems[selItems.length - 1].nextSibling)</span>
<a href="#l1.554"></a><span id="l1.554" class="difflineplus">+                       )</span>
<a href="#l1.555"></a><span id="l1.555" class="difflineplus">+                     );</span>
<a href="#l1.556"></a><span id="l1.556" class="difflineplus">+      break;</span>
<a href="#l1.557"></a><span id="l1.557" class="difflineplus">+</span>
<a href="#l1.558"></a><span id="l1.558" class="difflineplus">+    case &quot;top&quot;:</span>
<a href="#l1.559"></a><span id="l1.559" class="difflineplus">+    case &quot;bottom&quot;:</span>
<a href="#l1.560"></a><span id="l1.560" class="difflineplus">+    case &quot;bundleUp&quot;:</span>
<a href="#l1.561"></a><span id="l1.561" class="difflineplus">+    case &quot;bundleDown&quot;:</span>
<a href="#l1.562"></a><span id="l1.562" class="difflineplus">+      // Bundle selected attachments to top/bottom of the list or upwards/downwards.</span>
<a href="#l1.563"></a><span id="l1.563" class="difflineplus">+</span>
<a href="#l1.564"></a><span id="l1.564" class="difflineplus">+      upwards = ([&quot;top&quot;, &quot;bundleUp&quot;].includes(aDirection)) ? true : false;</span>
<a href="#l1.565"></a><span id="l1.565" class="difflineplus">+      // Downwards: Reverse order of selItems so we can use the same algorithm.</span>
<a href="#l1.566"></a><span id="l1.566" class="difflineplus">+      if (!upwards)</span>
<a href="#l1.567"></a><span id="l1.567" class="difflineplus">+        selItems.reverse();</span>
<a href="#l1.568"></a><span id="l1.568" class="difflineplus">+</span>
<a href="#l1.569"></a><span id="l1.569" class="difflineplus">+      if ([&quot;top&quot;, &quot;bottom&quot;].includes(aDirection)) {</span>
<a href="#l1.570"></a><span id="l1.570" class="difflineplus">+        let listEdgeItem = bucket.getItemAtIndex(upwards ? 0 : bucket.itemCount - 1);</span>
<a href="#l1.571"></a><span id="l1.571" class="difflineplus">+        let selEdgeItem = selItems[0];</span>
<a href="#l1.572"></a><span id="l1.572" class="difflineplus">+        if (selEdgeItem != listEdgeItem) {</span>
<a href="#l1.573"></a><span id="l1.573" class="difflineplus">+          // Top/Bottom: Move the first/last selected item to the edge of the list</span>
<a href="#l1.574"></a><span id="l1.574" class="difflineplus">+          // so that we always have an initial anchor target block in the right</span>
<a href="#l1.575"></a><span id="l1.575" class="difflineplus">+          // place, so we can use the same algorithm for top/bottom and</span>
<a href="#l1.576"></a><span id="l1.576" class="difflineplus">+          // inner bundling.</span>
<a href="#l1.577"></a><span id="l1.577" class="difflineplus">+          targetItem = upwards ?</span>
<a href="#l1.578"></a><span id="l1.578" class="difflineplus">+                       // Upwards: Insert before first list item.</span>
<a href="#l1.579"></a><span id="l1.579" class="difflineplus">+                       listEdgeItem</span>
<a href="#l1.580"></a><span id="l1.580" class="difflineplus">+                       // Downwards: Insert after last list item, i.e.</span>
<a href="#l1.581"></a><span id="l1.581" class="difflineplus">+                       // *before* non-existing listEdgeItem.nextSibling,</span>
<a href="#l1.582"></a><span id="l1.582" class="difflineplus">+                       // which is null. It works because it's a feature.</span>
<a href="#l1.583"></a><span id="l1.583" class="difflineplus">+                     : null;</span>
<a href="#l1.584"></a><span id="l1.584" class="difflineplus">+          bucket.insertBefore(selEdgeItem, targetItem);</span>
<a href="#l1.585"></a><span id="l1.585" class="difflineplus">+        }</span>
<a href="#l1.586"></a><span id="l1.586" class="difflineplus">+      }</span>
<a href="#l1.587"></a><span id="l1.587" class="difflineplus">+      // We now have a selected block (at least one item) at the target position.</span>
<a href="#l1.588"></a><span id="l1.588" class="difflineplus">+      // Let's find the end (inner edge) of that block and move only the</span>
<a href="#l1.589"></a><span id="l1.589" class="difflineplus">+      // remaining selected items to avoid unnecessary moves.</span>
<a href="#l1.590"></a><span id="l1.590" class="difflineplus">+      targetItem = null;</span>
<a href="#l1.591"></a><span id="l1.591" class="difflineplus">+      for (let item of selItems) {</span>
<a href="#l1.592"></a><span id="l1.592" class="difflineplus">+        if (targetItem) {</span>
<a href="#l1.593"></a><span id="l1.593" class="difflineplus">+          // We know where to move it, so move it!</span>
<a href="#l1.594"></a><span id="l1.594" class="difflineplus">+          bucket.insertBefore(item, targetItem);</span>
<a href="#l1.595"></a><span id="l1.595" class="difflineplus">+          if (!upwards) {</span>
<a href="#l1.596"></a><span id="l1.596" class="difflineplus">+          // Downwards: As selItems are reversed, and there's no insertAfter()</span>
<a href="#l1.597"></a><span id="l1.597" class="difflineplus">+          // method to insert *after* a stable target, we need to insert</span>
<a href="#l1.598"></a><span id="l1.598" class="difflineplus">+          // *before* the first item of the target block at target position,</span>
<a href="#l1.599"></a><span id="l1.599" class="difflineplus">+          // which is the current selItem which we've just moved onto the block.</span>
<a href="#l1.600"></a><span id="l1.600" class="difflineplus">+          targetItem = item;</span>
<a href="#l1.601"></a><span id="l1.601" class="difflineplus">+          }</span>
<a href="#l1.602"></a><span id="l1.602" class="difflineplus">+        } else {</span>
<a href="#l1.603"></a><span id="l1.603" class="difflineplus">+          // If there's no targetItem yet, find the inner edge of the target block.</span>
<a href="#l1.604"></a><span id="l1.604" class="difflineplus">+          let nextItem = upwards ? item.nextSibling : item.previousSibling;</span>
<a href="#l1.605"></a><span id="l1.605" class="difflineplus">+          if (!nextItem.selected) {</span>
<a href="#l1.606"></a><span id="l1.606" class="difflineplus">+            // If nextItem is not selected, current selItem is the inner edge of</span>
<a href="#l1.607"></a><span id="l1.607" class="difflineplus">+            // the initial anchor target block, so we can set targetItem.</span>
<a href="#l1.608"></a><span id="l1.608" class="difflineplus">+            targetItem = upwards ?</span>
<a href="#l1.609"></a><span id="l1.609" class="difflineplus">+                         // Upwards: set stable targetItem.</span>
<a href="#l1.610"></a><span id="l1.610" class="difflineplus">+                         nextItem</span>
<a href="#l1.611"></a><span id="l1.611" class="difflineplus">+                         // Downwards: set initial targetItem.</span>
<a href="#l1.612"></a><span id="l1.612" class="difflineplus">+                       : item;</span>
<a href="#l1.613"></a><span id="l1.613" class="difflineplus">+          }</span>
<a href="#l1.614"></a><span id="l1.614" class="difflineplus">+          // Else if nextItem is selected, it is still part of initial anchor</span>
<a href="#l1.615"></a><span id="l1.615" class="difflineplus">+          // target block, so just proceed to look for the edge of that block.</span>
<a href="#l1.616"></a><span id="l1.616" class="difflineplus">+        }</span>
<a href="#l1.617"></a><span id="l1.617" class="difflineplus">+      } // next selItem</span>
<a href="#l1.618"></a><span id="l1.618" class="difflineplus">+</span>
<a href="#l1.619"></a><span id="l1.619" class="difflineplus">+      // Ensure visibility of first/last selected item after the move.</span>
<a href="#l1.620"></a><span id="l1.620" class="difflineplus">+      visibleIndex = bucket.getIndexOfItem(selItems[0]);</span>
<a href="#l1.621"></a><span id="l1.621" class="difflineplus">+      break;</span>
<a href="#l1.622"></a><span id="l1.622" class="difflineplus">+</span>
<a href="#l1.623"></a><span id="l1.623" class="difflineplus">+    case &quot;toggleSort&quot;:</span>
<a href="#l1.624"></a><span id="l1.624" class="difflineplus">+      // Sort the selected attachments alphabetically after moving them together.</span>
<a href="#l1.625"></a><span id="l1.625" class="difflineplus">+      // The command updater of cmd_sortAttachmentsToggle toggles the sorting</span>
<a href="#l1.626"></a><span id="l1.626" class="difflineplus">+      // direction based on the current sorting and block status of the selection.</span>
<a href="#l1.627"></a><span id="l1.627" class="difflineplus">+</span>
<a href="#l1.628"></a><span id="l1.628" class="difflineplus">+      let toggleCmd = document.getElementById(&quot;cmd_sortAttachmentsToggle&quot;);</span>
<a href="#l1.629"></a><span id="l1.629" class="difflineplus">+      let sortDirection = toggleCmd.getAttribute(&quot;data-sortdirection&quot;) || &quot;ascending&quot;;</span>
<a href="#l1.630"></a><span id="l1.630" class="difflineplus">+      // Move selected attachments together before sorting as a block.</span>
<a href="#l1.631"></a><span id="l1.631" class="difflineplus">+      goDoCommand(&quot;cmd_moveAttachmentBundleUp&quot;);</span>
<a href="#l1.632"></a><span id="l1.632" class="difflineplus">+</span>
<a href="#l1.633"></a><span id="l1.633" class="difflineplus">+      // Find the end of the selected block to find our targetItem.</span>
<a href="#l1.634"></a><span id="l1.634" class="difflineplus">+      for (let item of selItems) {</span>
<a href="#l1.635"></a><span id="l1.635" class="difflineplus">+        let nextItem = item.nextSibling;</span>
<a href="#l1.636"></a><span id="l1.636" class="difflineplus">+        if (!nextItem || !nextItem.selected) {</span>
<a href="#l1.637"></a><span id="l1.637" class="difflineplus">+          // If there's no nextItem (block at list bottom), or nextItem is</span>
<a href="#l1.638"></a><span id="l1.638" class="difflineplus">+          // not selected, we've reached the end of the block.</span>
<a href="#l1.639"></a><span id="l1.639" class="difflineplus">+          // Set the block's nextSibling as targetItem and exit loop.</span>
<a href="#l1.640"></a><span id="l1.640" class="difflineplus">+          // Works by definition even if nextSibling aka nextItem is null.</span>
<a href="#l1.641"></a><span id="l1.641" class="difflineplus">+          targetItem = nextItem;</span>
<a href="#l1.642"></a><span id="l1.642" class="difflineplus">+          break;</span>
<a href="#l1.643"></a><span id="l1.643" class="difflineplus">+        }</span>
<a href="#l1.644"></a><span id="l1.644" class="difflineplus">+        // else if (nextItem &amp;&amp; nextItem.selected), nextItem is still part of</span>
<a href="#l1.645"></a><span id="l1.645" class="difflineplus">+        // the block, so proceed with checking its nextSibling.</span>
<a href="#l1.646"></a><span id="l1.646" class="difflineplus">+      } // next selItem</span>
<a href="#l1.647"></a><span id="l1.647" class="difflineplus">+</span>
<a href="#l1.648"></a><span id="l1.648" class="difflineplus">+      // Now let's sort our selItems according to sortDirection.</span>
<a href="#l1.649"></a><span id="l1.649" class="difflineplus">+      if (sortDirection == &quot;ascending&quot;) {</span>
<a href="#l1.650"></a><span id="l1.650" class="difflineplus">+        selItems.sort(</span>
<a href="#l1.651"></a><span id="l1.651" class="difflineplus">+          (a, b) =&gt; a.attachment.name.localeCompare(b.attachment.name));</span>
<a href="#l1.652"></a><span id="l1.652" class="difflineplus">+      } else { // &quot;descending&quot;</span>
<a href="#l1.653"></a><span id="l1.653" class="difflineplus">+        selItems.sort(</span>
<a href="#l1.654"></a><span id="l1.654" class="difflineplus">+          (a, b) =&gt; b.attachment.name.localeCompare(a.attachment.name));</span>
<a href="#l1.655"></a><span id="l1.655" class="difflineplus">+      }</span>
<a href="#l1.656"></a><span id="l1.656" class="difflineplus">+</span>
<a href="#l1.657"></a><span id="l1.657" class="difflineplus">+      // Insert selItems in new order before the nextSibling of the block.</span>
<a href="#l1.658"></a><span id="l1.658" class="difflineplus">+      for (let item of selItems) {</span>
<a href="#l1.659"></a><span id="l1.659" class="difflineplus">+        bucket.insertBefore(item, targetItem);</span>
<a href="#l1.660"></a><span id="l1.660" class="difflineplus">+      }</span>
<a href="#l1.661"></a><span id="l1.661" class="difflineplus">+</span>
<a href="#l1.662"></a><span id="l1.662" class="difflineplus">+      // Ensure visibility of first block item after sorting.</span>
<a href="#l1.663"></a><span id="l1.663" class="difflineplus">+      visibleIndex = bucket.getIndexOfItem(selItems[0]);</span>
<a href="#l1.664"></a><span id="l1.664" class="difflineplus">+      break;</span>
<a href="#l1.665"></a><span id="l1.665" class="difflineplus">+  } // end switch (aDirection)</span>
<a href="#l1.666"></a><span id="l1.666" class="difflineplus">+</span>
<a href="#l1.667"></a><span id="l1.667" class="difflineplus">+  // Restore original focus.</span>
<a href="#l1.668"></a><span id="l1.668" class="difflineplus">+  bucket.currentItem = focusItem;</span>
<a href="#l1.669"></a><span id="l1.669" class="difflineplus">+  // Ensure smart visibility of a relevant item according to direction.</span>
<a href="#l1.670"></a><span id="l1.670" class="difflineplus">+  bucket.ensureIndexIsVisible(visibleIndex);</span>
<a href="#l1.671"></a><span id="l1.671" class="difflineplus">+</span>
<a href="#l1.672"></a><span id="l1.672" class="difflineplus">+  // Moving selected items around does not trigger auto-updating of our command</span>
<a href="#l1.673"></a><span id="l1.673" class="difflineplus">+  // handlers, so we must do it now as the position of selected items has changed.</span>
<a href="#l1.674"></a><span id="l1.674" class="difflineplus">+  updateReorderAttachmentsItems();</span>
<a href="#l1.675"></a><span id="l1.675" class="difflineplus">+}</span>
<a href="#l1.676"></a><span id="l1.676" class="difflineplus">+</span>
<a href="#l1.677"></a><span id="l1.677" class="difflineplus">+function showReorderAttachmentsPanel() {</span>
<a href="#l1.678"></a><span id="l1.678" class="difflineplus">+    document.getElementById(&quot;reorderAttachmentsPanel&quot;)</span>
<a href="#l1.679"></a><span id="l1.679" class="difflineplus">+            .openPopup(document.getElementById(&quot;attachmentBucket&quot;),</span>
<a href="#l1.680"></a><span id="l1.680" class="difflineplus">+                       &quot;after_start&quot;, 15, 0, true);</span>
<a href="#l1.681"></a><span id="l1.681" class="difflineplus">+    // Focus attachmentBucket so that keyboard operation for</span>
<a href="#l1.682"></a><span id="l1.682" class="difflineplus">+    // selecting and moving attachment items works;</span>
<a href="#l1.683"></a><span id="l1.683" class="difflineplus">+    // the panel helpfully presents the keyboard shortcuts</span>
<a href="#l1.684"></a><span id="l1.684" class="difflineplus">+    // for moving things around.</span>
<a href="#l1.685"></a><span id="l1.685" class="difflineplus">+    document.getElementById(&quot;attachmentBucket&quot;).focus();</span>
<a href="#l1.686"></a><span id="l1.686" class="difflineplus">+}</span>
<a href="#l1.687"></a><span id="l1.687" class="difflineplus">+</span>
<a href="#l1.688"></a><span id="l1.688" class="difflineplus">+/**</span>
<a href="#l1.689"></a><span id="l1.689" class="difflineplus">+ * Returns a string representing the current sort order of selected attachment</span>
<a href="#l1.690"></a><span id="l1.690" class="difflineplus">+ * items by their names. We don't check if selected items form a coherent block</span>
<a href="#l1.691"></a><span id="l1.691" class="difflineplus">+ * or not; use attachmentsSelectionIsBlock() to check on that.</span>
<a href="#l1.692"></a><span id="l1.692" class="difflineplus">+ *</span>
<a href="#l1.693"></a><span id="l1.693" class="difflineplus">+ * @return {string} &quot;ascending&quot; : Sort order is ascending.</span>
<a href="#l1.694"></a><span id="l1.694" class="difflineplus">+ *                  &quot;descending&quot;: Sort order is descending.</span>
<a href="#l1.695"></a><span id="l1.695" class="difflineplus">+ *                  &quot;equivalent&quot;: The names of all selected items are equivalent.</span>
<a href="#l1.696"></a><span id="l1.696" class="difflineplus">+ *                  &quot;&quot;          : There's no sort order, or only 1 item selected,</span>
<a href="#l1.697"></a><span id="l1.697" class="difflineplus">+ *                                or no items selected, or no attachments,</span>
<a href="#l1.698"></a><span id="l1.698" class="difflineplus">+ *                                or no attachmentBucket.</span>
<a href="#l1.699"></a><span id="l1.699" class="difflineplus">+ */</span>
<a href="#l1.700"></a><span id="l1.700" class="difflineplus">+function attachmentsSelectionGetSortOrder()</span>
<a href="#l1.701"></a><span id="l1.701" class="difflineplus">+{</span>
<a href="#l1.702"></a><span id="l1.702" class="difflineplus">+  if (MessageGetNumSelectedAttachments() &lt;= 1)</span>
<a href="#l1.703"></a><span id="l1.703" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l1.704"></a><span id="l1.704" class="difflineplus">+</span>
<a href="#l1.705"></a><span id="l1.705" class="difflineplus">+  let selItems = attachmentsSelectedItemsGetSortedArray();</span>
<a href="#l1.706"></a><span id="l1.706" class="difflineplus">+  // We're comparing each item to the next item, so exclude the last item.</span>
<a href="#l1.707"></a><span id="l1.707" class="difflineplus">+  let selItems1 = selItems.slice(0, -1);</span>
<a href="#l1.708"></a><span id="l1.708" class="difflineplus">+  let someAscending;</span>
<a href="#l1.709"></a><span id="l1.709" class="difflineplus">+  let someDescending;</span>
<a href="#l1.710"></a><span id="l1.710" class="difflineplus">+</span>
<a href="#l1.711"></a><span id="l1.711" class="difflineplus">+  // Check if some adjacent items are sorted ascending.</span>
<a href="#l1.712"></a><span id="l1.712" class="difflineplus">+  someAscending = selItems1.some((item, index) =&gt;</span>
<a href="#l1.713"></a><span id="l1.713" class="difflineplus">+    item.attachment.name.localeCompare(selItems[index + 1].attachment.name) &lt; 0);</span>
<a href="#l1.714"></a><span id="l1.714" class="difflineplus">+</span>
<a href="#l1.715"></a><span id="l1.715" class="difflineplus">+  // Check if some adjacent items are sorted descending.</span>
<a href="#l1.716"></a><span id="l1.716" class="difflineplus">+  someDescending = selItems1.some((item, index) =&gt;</span>
<a href="#l1.717"></a><span id="l1.717" class="difflineplus">+    item.attachment.name.localeCompare(selItems[index + 1].attachment.name) &gt; 0);</span>
<a href="#l1.718"></a><span id="l1.718" class="difflineplus">+</span>
<a href="#l1.719"></a><span id="l1.719" class="difflineplus">+  // Unsorted (but not all equivalent in sort order)</span>
<a href="#l1.720"></a><span id="l1.720" class="difflineplus">+  if (someAscending &amp;&amp; someDescending)</span>
<a href="#l1.721"></a><span id="l1.721" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l1.722"></a><span id="l1.722" class="difflineplus">+</span>
<a href="#l1.723"></a><span id="l1.723" class="difflineplus">+  if (someAscending &amp;&amp; !someDescending)</span>
<a href="#l1.724"></a><span id="l1.724" class="difflineplus">+    return &quot;ascending&quot;;</span>
<a href="#l1.725"></a><span id="l1.725" class="difflineplus">+</span>
<a href="#l1.726"></a><span id="l1.726" class="difflineplus">+  if (someDescending &amp;&amp; !someAscending)</span>
<a href="#l1.727"></a><span id="l1.727" class="difflineplus">+    return &quot;descending&quot;;</span>
<a href="#l1.728"></a><span id="l1.728" class="difflineplus">+</span>
<a href="#l1.729"></a><span id="l1.729" class="difflineplus">+  // No ascending pairs, no descending pairs, so all equivalent in sort order.</span>
<a href="#l1.730"></a><span id="l1.730" class="difflineplus">+  // if (!someAscending &amp;&amp; !someDescending)</span>
<a href="#l1.731"></a><span id="l1.731" class="difflineplus">+  return &quot;equivalent&quot;;</span>
<a href="#l1.732"></a><span id="l1.732" class="difflineplus">+}</span>
<a href="#l1.733"></a><span id="l1.733" class="difflineplus">+</span>
<a href="#l1.734"></a><span id="l1.734" class="difflineplus">+function reorderAttachmentsPanelOnPopupShowing() {</span>
<a href="#l1.735"></a><span id="l1.735" class="difflineplus">+  let panel = document.getElementById(&quot;reorderAttachmentsPanel&quot;);</span>
<a href="#l1.736"></a><span id="l1.736" class="difflineplus">+  let buttonsNodeList = panel.querySelectorAll(&quot;.panelButton&quot;);</span>
<a href="#l1.737"></a><span id="l1.737" class="difflineplus">+  let buttons = [...buttonsNodeList]; // convert NodeList to Array</span>
<a href="#l1.738"></a><span id="l1.738" class="difflineplus">+  // Let's add some pretty keyboard shortcuts to the buttons.</span>
<a href="#l1.739"></a><span id="l1.739" class="difflineplus">+  buttons.forEach(btn =&gt; {</span>
<a href="#l1.740"></a><span id="l1.740" class="difflineplus">+    if (btn.hasAttribute(&quot;key&quot;)) {</span>
<a href="#l1.741"></a><span id="l1.741" class="difflineplus">+      btn.setAttribute(&quot;prettykey&quot;, getPrettyKey(btn.getAttribute(&quot;key&quot;)));</span>
<a href="#l1.742"></a><span id="l1.742" class="difflineplus">+    }</span>
<a href="#l1.743"></a><span id="l1.743" class="difflineplus">+  })</span>
<a href="#l1.744"></a><span id="l1.744" class="difflineplus">+  // This depends on the fact that the command handlers of cmd_moveAttachment*</span>
<a href="#l1.745"></a><span id="l1.745" class="difflineplus">+  // and cmd_sortAttachmentsToggle do not require focus in attachmentBucket as</span>
<a href="#l1.746"></a><span id="l1.746" class="difflineplus">+  // they just check for selected attachments. Otherwise updating these commands</span>
<a href="#l1.747"></a><span id="l1.747" class="difflineplus">+  // would need to happen *after* the panel is shown.</span>
<a href="#l1.748"></a><span id="l1.748" class="difflineplus">+  updateReorderAttachmentsItems();</span>
<a href="#l1.749"></a><span id="l1.749" class="difflineplus">+}</span>
<a href="#l1.750"></a><span id="l1.750" class="difflineplus">+</span>
<a href="#l1.751"></a><span id="l1.751" class="difflineplus">+function attachmentBucketOnBlur() {</span>
<a href="#l1.752"></a><span id="l1.752" class="difflineplus">+  // Ensure that reorderAttachmentsPanel remains open while we're focused</span>
<a href="#l1.753"></a><span id="l1.753" class="difflineplus">+  // on attachmentBucket or the panel, otherwise hide it.</span>
<a href="#l1.754"></a><span id="l1.754" class="difflineplus">+  let attachmentBucket = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.755"></a><span id="l1.755" class="difflineplus">+  if (attachmentBucket.getAttribute(&quot;data-ignorenextblur&quot;) == &quot;true&quot;) {</span>
<a href="#l1.756"></a><span id="l1.756" class="difflineplus">+    // Hack to prevent the panel from hiding after RenameSelectedAttachment()</span>
<a href="#l1.757"></a><span id="l1.757" class="difflineplus">+    attachmentBucket.setAttribute(&quot;data-ignorenextblur&quot;, &quot;false&quot;);</span>
<a href="#l1.758"></a><span id="l1.758" class="difflineplus">+    return;</span>
<a href="#l1.759"></a><span id="l1.759" class="difflineplus">+  }</span>
<a href="#l1.760"></a><span id="l1.760" class="difflineplus">+  let reorderAttachmentsPanel = document.getElementById(&quot;reorderAttachmentsPanel&quot;);</span>
<a href="#l1.761"></a><span id="l1.761" class="difflineplus">+  if (document.activeElement.id != &quot;attachmentBucket&quot; ||</span>
<a href="#l1.762"></a><span id="l1.762" class="difflineplus">+      document.activeElement.id != &quot;reorderAttachmentsPanel&quot;)</span>
<a href="#l1.763"></a><span id="l1.763" class="difflineplus">+    reorderAttachmentsPanel.hidePopup();</span>
<a href="#l1.764"></a><span id="l1.764" class="difflineplus">+}</span>
<a href="#l1.765"></a><span id="l1.765" class="difflineplus">+</span>
<a href="#l1.766"></a><span id="l1.766" class="difflineplus">+function attachmentBucketOnKeyUp(aEvent) {</span>
<a href="#l1.767"></a><span id="l1.767" class="difflineplus">+  // When ESC is pressed, close reorderAttachmentsPanel.</span>
<a href="#l1.768"></a><span id="l1.768" class="difflineplus">+  if (aEvent.key == &quot;Escape&quot;) {</span>
<a href="#l1.769"></a><span id="l1.769" class="difflineplus">+    let reorderAttachmentsPanel = document.getElementById(&quot;reorderAttachmentsPanel&quot;);</span>
<a href="#l1.770"></a><span id="l1.770" class="difflineplus">+    if (reorderAttachmentsPanel.state == &quot;open&quot;) {</span>
<a href="#l1.771"></a><span id="l1.771" class="difflineplus">+      reorderAttachmentsPanel.hidePopup();</span>
<a href="#l1.772"></a><span id="l1.772" class="difflineplus">+    }</span>
<a href="#l1.773"></a><span id="l1.773" class="difflineplus">+  }</span>
<a href="#l1.774"></a><span id="l1.774"> }</span>
<a href="#l1.775"></a><span id="l1.775"> </span>
<a href="#l1.776"></a><span id="l1.776"> function AttachmentElementHasItems()</span>
<a href="#l1.777"></a><span id="l1.777"> {</span>
<a href="#l1.778"></a><span id="l1.778">   var element = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l1.779"></a><span id="l1.779">   return element ? (element.getRowCount() &gt; 0) : false;</span>
<a href="#l1.780"></a><span id="l1.780"> }</span>
<a href="#l1.781"></a><span id="l1.781"> </span>
<a href="#l1.782"></a><span id="l1.782" class="difflineat">@@ -4836,17 +5417,17 @@ function fromKeyPress(event)</span>
<a href="#l1.783"></a><span id="l1.783"> </span>
<a href="#l1.784"></a><span id="l1.784"> function subjectKeyPress(event)</span>
<a href="#l1.785"></a><span id="l1.785"> {</span>
<a href="#l1.786"></a><span id="l1.786">   gSubjectChanged = true;</span>
<a href="#l1.787"></a><span id="l1.787">   if (event.keyCode == KeyEvent.DOM_VK_RETURN)</span>
<a href="#l1.788"></a><span id="l1.788">     SetMsgBodyFrameFocus();</span>
<a href="#l1.789"></a><span id="l1.789"> }</span>
<a href="#l1.790"></a><span id="l1.790"> </span>
<a href="#l1.791"></a><span id="l1.791" class="difflineminus">-function AttachmentBucketClicked(event)</span>
<a href="#l1.792"></a><span id="l1.792" class="difflineplus">+function AttachmentBucketDoubleClicked(event)</span>
<a href="#l1.793"></a><span id="l1.793"> {</span>
<a href="#l1.794"></a><span id="l1.794">   let boundTarget = document.getBindingParent(event.originalTarget);</span>
<a href="#l1.795"></a><span id="l1.795">   if (event.button == 0 &amp;&amp; boundTarget &amp;&amp; boundTarget.localName == &quot;scrollbox&quot;)</span>
<a href="#l1.796"></a><span id="l1.796">     goDoCommand('cmd_attachFile');</span>
<a href="#l1.797"></a><span id="l1.797"> }</span>
<a href="#l1.798"></a><span id="l1.798"> </span>
<a href="#l1.799"></a><span id="l1.799"> // we can drag and drop addresses, files, messages and urls into the compose envelope</span>
<a href="#l1.800"></a><span id="l1.800"> var envelopeDragObserver = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/compose/content/messengercompose.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/compose/content/messengercompose.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -124,24 +124,53 @@</span>
<a href="#l2.4"></a><span id="l2.4">   &lt;!--command id=&quot;cmd_find&quot;/--&gt;</span>
<a href="#l2.5"></a><span id="l2.5">   &lt;!--command id=&quot;cmd_findNext&quot;/--&gt;</span>
<a href="#l2.6"></a><span id="l2.6">   &lt;command id=&quot;cmd_undo&quot; oncommand=&quot;goDoCommand('cmd_undo')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.7"></a><span id="l2.7">   &lt;command id=&quot;cmd_redo&quot; oncommand=&quot;goDoCommand('cmd_redo')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.8"></a><span id="l2.8">   &lt;command id=&quot;cmd_cut&quot; oncommand=&quot;goDoCommand('cmd_cut')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.9"></a><span id="l2.9">   &lt;command id=&quot;cmd_copy&quot; oncommand=&quot;goDoCommand('cmd_copy')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.10"></a><span id="l2.10">   &lt;command id=&quot;cmd_paste&quot; oncommand=&quot;goDoCommand('cmd_paste')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.11"></a><span id="l2.11">   &lt;command id=&quot;cmd_rewrap&quot; oncommand=&quot;goDoCommand('cmd_rewrap')&quot;/&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  &lt;command id=&quot;cmd_delete&quot; oncommand=&quot;goDoCommand('cmd_delete')&quot; valueDefault=&quot;&amp;deleteCmd.label;&quot; valueDefaultAccessKey=&quot;&amp;deleteCmd.accesskey;&quot; valueRemoveAttachmentAccessKey=&quot;&amp;removeAttachment.accesskey;&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-  &lt;command id=&quot;cmd_selectAll&quot; oncommand=&quot;goDoCommand('cmd_selectAll')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-  &lt;command id=&quot;cmd_openAttachment&quot; oncommand=&quot;goDoCommand('cmd_openAttachment')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-  &lt;command id=&quot;cmd_renameAttachment&quot; oncommand=&quot;goDoCommand('cmd_renameAttachment')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-  &lt;command id=&quot;cmd_account&quot; oncommand=&quot;goDoCommand('cmd_account')&quot;/&gt;</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+  &lt;command id=&quot;cmd_delete&quot;</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_delete')&quot;</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+           valueDefault=&quot;&amp;deleteCmd.label;&quot;</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+           valueDefaultAccessKey=&quot;&amp;deleteCmd.accesskey;&quot;</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+           valueRemoveAttachmentAccessKey=&quot;&amp;removeAttachment.accesskey;&quot;</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+           disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+  &lt;command id=&quot;cmd_selectAll&quot;</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_selectAll')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+  &lt;command id=&quot;cmd_openAttachment&quot;</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_openAttachment')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+  &lt;command id=&quot;cmd_renameAttachment&quot;</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_renameAttachment')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+  &lt;command id=&quot;cmd_reorderAttachments&quot;</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_reorderAttachments')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+  &lt;command id=&quot;cmd_account&quot;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_account')&quot;/&gt;</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+  &lt;!-- Reorder Attachments Panel --&gt;</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+  &lt;command id=&quot;cmd_moveAttachmentUp&quot;</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_moveAttachmentUp')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+  &lt;command id=&quot;cmd_moveAttachmentDown&quot;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_moveAttachmentDown')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+  &lt;command id=&quot;cmd_moveAttachmentBundleUp&quot;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_moveAttachmentBundleUp')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+  &lt;command id=&quot;cmd_moveAttachmentBundleDown&quot;</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_moveAttachmentBundleDown')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+  &lt;command id=&quot;cmd_moveAttachmentTop&quot;</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_moveAttachmentTop')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+  &lt;command id=&quot;cmd_moveAttachmentBottom&quot;</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_moveAttachmentBottom')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+  &lt;command id=&quot;cmd_sortAttachmentsToggle&quot;</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+           data-sortdirection=&quot;ascending&quot;</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_sortAttachmentsToggle')&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.50"></a><span id="l2.50"> </span>
<a href="#l2.51"></a><span id="l2.51">   &lt;!-- View Menu --&gt;</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-  &lt;command id=&quot;cmd_showFormatToolbar&quot; oncommand=&quot;goDoCommand('cmd_showFormatToolbar')&quot;/&gt;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+  &lt;command id=&quot;cmd_showFormatToolbar&quot;</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+           oncommand=&quot;goDoCommand('cmd_showFormatToolbar')&quot;/&gt;</span>
<a href="#l2.55"></a><span id="l2.55"> </span>
<a href="#l2.56"></a><span id="l2.56">   &lt;commandset id=&quot;viewZoomCommands&quot;</span>
<a href="#l2.57"></a><span id="l2.57">               commandupdater=&quot;false&quot;</span>
<a href="#l2.58"></a><span id="l2.58">               events=&quot;create-menu-view&quot;</span>
<a href="#l2.59"></a><span id="l2.59">               oncommandupdate=&quot;goUpdateMailMenuItems(this);&quot;&gt;</span>
<a href="#l2.60"></a><span id="l2.60">     &lt;command id=&quot;cmd_fullZoomReduce&quot;</span>
<a href="#l2.61"></a><span id="l2.61">              oncommand=&quot;goDoCommand('cmd_fullZoomReduce');&quot;/&gt;</span>
<a href="#l2.62"></a><span id="l2.62">     &lt;command id=&quot;cmd_fullZoomEnlarge&quot;</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineat">@@ -219,30 +248,66 @@</span>
<a href="#l2.64"></a><span id="l2.64">   &lt;key id=&quot;pastequotationkb&quot; key=&quot;&amp;pasteAsQuotationCmd.key;&quot;</span>
<a href="#l2.65"></a><span id="l2.65">        observes=&quot;cmd_pasteQuote&quot; modifiers=&quot;accel, shift&quot;/&gt;</span>
<a href="#l2.66"></a><span id="l2.66">   &lt;key id=&quot;pastenoformattingkb&quot; key=&quot;&amp;pasteNoFormattingCmd.key;&quot;</span>
<a href="#l2.67"></a><span id="l2.67">        modifiers=&quot;accel, shift&quot; observes=&quot;cmd_pasteNoFormatting&quot;/&gt;</span>
<a href="#l2.68"></a><span id="l2.68">   &lt;key id=&quot;key_rewrap&quot; key=&quot;&amp;editRewrapCmd.key;&quot; command=&quot;cmd_rewrap&quot; modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.69"></a><span id="l2.69"> #ifdef XP_MACOSX</span>
<a href="#l2.70"></a><span id="l2.70">   &lt;key id=&quot;key_delete&quot; keycode=&quot;VK_BACK&quot; command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l2.71"></a><span id="l2.71">   &lt;key id=&quot;key_delete2&quot; keycode=&quot;VK_DELETE&quot; command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+  &lt;key id=&quot;key_reorderAttachments&quot;</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineplus">+       key=&quot;&amp;reorderAttachmentsCmd.key;&quot; modifiers=&quot;control&quot;</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineplus">+       command=&quot;cmd_reorderAttachments&quot;/&gt;</span>
<a href="#l2.75"></a><span id="l2.75"> #else</span>
<a href="#l2.76"></a><span id="l2.76">   &lt;key id=&quot;key_delete&quot; keycode=&quot;VK_DELETE&quot; command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-  &lt;key id=&quot;key_renameAttachment&quot; keycode=&quot;VK_F2&quot; oncommand=&quot;goDoCommand('cmd_renameAttachment');&quot;/&gt;</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+  &lt;key id=&quot;key_renameAttachment&quot; keycode=&quot;VK_F2&quot;</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+       command=&quot;cmd_renameAttachment&quot;/&gt;</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+  &lt;key id=&quot;key_reorderAttachments&quot;</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+       key=&quot;&amp;reorderAttachmentsCmd.key;&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+       command=&quot;cmd_reorderAttachments&quot;/&gt;</span>
<a href="#l2.83"></a><span id="l2.83"> #endif</span>
<a href="#l2.84"></a><span id="l2.84">   &lt;key id=&quot;key_selectAll&quot; key=&quot;&amp;selectAllCmd.key;&quot; modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.85"></a><span id="l2.85">   &lt;key id=&quot;key_find&quot; key=&quot;&amp;findBarCmd.key;&quot; command=&quot;cmd_find&quot; modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.86"></a><span id="l2.86"> #ifndef XP_MACOSX</span>
<a href="#l2.87"></a><span id="l2.87">   &lt;key id=&quot;key_findReplace&quot; key=&quot;&amp;findReplaceCmd.key;&quot; command=&quot;cmd_findReplace&quot; modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.88"></a><span id="l2.88"> #endif</span>
<a href="#l2.89"></a><span id="l2.89">   &lt;key id=&quot;key_findNext&quot; key=&quot;&amp;findAgainCmd.key;&quot; command=&quot;cmd_findNext&quot; modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.90"></a><span id="l2.90">   &lt;key id=&quot;key_findPrev&quot; key=&quot;&amp;findPrevCmd.key;&quot; command=&quot;cmd_findPrev&quot; modifiers=&quot;accel, shift&quot;/&gt;</span>
<a href="#l2.91"></a><span id="l2.91">   &lt;key keycode=&quot;&amp;findAgainCmd.key2;&quot; command=&quot;cmd_findNext&quot;/&gt;</span>
<a href="#l2.92"></a><span id="l2.92">   &lt;key keycode=&quot;&amp;findPrevCmd.key2;&quot;  command=&quot;cmd_findPrev&quot; modifiers=&quot;shift&quot;/&gt;</span>
<a href="#l2.93"></a><span id="l2.93"> </span>
<a href="#l2.94"></a><span id="l2.94" class="difflineplus">+  &lt;!-- Reorder Attachments Panel --&gt;</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentUp&quot; keycode=&quot;VK_UP&quot; modifiers=&quot;accel&quot;</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+       command=&quot;cmd_moveAttachmentUp&quot;/&gt;</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentDown&quot; keycode=&quot;VK_DOWN&quot; modifiers=&quot;accel&quot;</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineplus">+       command=&quot;cmd_moveAttachmentDown&quot;/&gt;</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentBundleUp&quot; keycode=&quot;VK_LEFT&quot; modifiers=&quot;accel alt&quot;</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineplus">+       command=&quot;cmd_moveAttachmentBundleUp&quot;/&gt;</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentBundleDown&quot; keycode=&quot;VK_RIGHT&quot; modifiers=&quot;accel alt&quot;</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineplus">+       command=&quot;cmd_moveAttachmentBundleDown&quot;/&gt;</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentTop&quot; keycode=&quot;VK_UP&quot; modifiers=&quot;accel alt&quot;</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineplus">+       command=&quot;cmd_moveAttachmentTop&quot;/&gt;</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentBottom&quot; keycode=&quot;VK_DOWN&quot; modifiers=&quot;accel alt&quot;</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+       command=&quot;cmd_moveAttachmentBottom&quot;/&gt;</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+#else</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentUp&quot; keycode=&quot;VK_UP&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineplus">+       command=&quot;cmd_moveAttachmentUp&quot;/&gt;</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentDown&quot; keycode=&quot;VK_DOWN&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineplus">+       command=&quot;cmd_moveAttachmentDown&quot;/&gt;</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentBundleUp&quot; keycode=&quot;VK_LEFT&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+       command=&quot;cmd_moveAttachmentBundleUp&quot;/&gt;</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentBundleDown&quot; keycode=&quot;VK_RIGHT&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+       command=&quot;cmd_moveAttachmentBundleDown&quot;/&gt;</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentTop&quot; keycode=&quot;VK_Home&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineplus">+       command=&quot;cmd_moveAttachmentTop&quot;/&gt;</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineplus">+  &lt;key id=&quot;key_moveAttachmentBottom&quot; keycode=&quot;VK_End&quot; modifiers=&quot;alt&quot;</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineplus">+       command=&quot;cmd_moveAttachmentBottom&quot;/&gt;</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineplus">+#endif</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineplus">+</span>
<a href="#l2.123"></a><span id="l2.123">   &lt;!-- View Menu --&gt;</span>
<a href="#l2.124"></a><span id="l2.124">   &lt;key id=&quot;key_addressSidebar&quot; keycode=&quot;VK_F9&quot; oncommand=&quot;toggleAddressPicker();&quot;/&gt;</span>
<a href="#l2.125"></a><span id="l2.125"> </span>
<a href="#l2.126"></a><span id="l2.126">   &lt;keyset id=&quot;viewZoomKeys&quot;&gt;</span>
<a href="#l2.127"></a><span id="l2.127">     &lt;key id=&quot;key_fullZoomReduce&quot;  key=&quot;&amp;fullZoomReduceCmd.commandkey;&quot;</span>
<a href="#l2.128"></a><span id="l2.128">          command=&quot;cmd_fullZoomReduce&quot;  modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.129"></a><span id="l2.129">     &lt;key                          key=&quot;&amp;fullZoomReduceCmd.commandkey2;&quot;</span>
<a href="#l2.130"></a><span id="l2.130">          command=&quot;cmd_fullZoomReduce&quot;  modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l2.131"></a><span id="l2.131" class="difflineat">@@ -287,16 +352,67 @@</span>
<a href="#l2.132"></a><span id="l2.132"> </span>
<a href="#l2.133"></a><span id="l2.133">   &lt;key keycode=&quot;VK_ESCAPE&quot; oncommand=&quot;handleEsc();&quot;/&gt;</span>
<a href="#l2.134"></a><span id="l2.134"> &lt;/keyset&gt;</span>
<a href="#l2.135"></a><span id="l2.135"> </span>
<a href="#l2.136"></a><span id="l2.136"> &lt;keyset id=&quot;baseMenuKeyset&quot;/&gt;</span>
<a href="#l2.137"></a><span id="l2.137"> </span>
<a href="#l2.138"></a><span id="l2.138"> &lt;keyset id=&quot;editorKeys&quot;/&gt;</span>
<a href="#l2.139"></a><span id="l2.139"> </span>
<a href="#l2.140"></a><span id="l2.140" class="difflineplus">+&lt;!-- Reorder Attachments Panel --&gt;</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineplus">+&lt;panel id=&quot;reorderAttachmentsPanel&quot;</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineplus">+       backdrag=&quot;true&quot;</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineplus">+       orient=&quot;vertical&quot;</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineplus">+       type=&quot;arrow&quot;</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineplus">+       flip=&quot;slide&quot;</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineplus">+       onpopupshowing=&quot;reorderAttachmentsPanelOnPopupShowing();&quot;</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineplus">+       consumeoutsideclicks=&quot;false&quot;</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineplus">+       noautohide=&quot;true&quot;&gt;</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineplus">+  &lt;description class=&quot;panelTitle&quot;&gt;&amp;reorderAttachmentsPanel.label;&lt;/description&gt;</span>
<a href="#l2.150"></a><span id="l2.150" class="difflineplus">+  &lt;toolbarbutton id=&quot;btn_moveAttachmentTop&quot;</span>
<a href="#l2.151"></a><span id="l2.151" class="difflineplus">+                 class=&quot;panelButton&quot;</span>
<a href="#l2.152"></a><span id="l2.152" class="difflineplus">+                 label=&quot;&amp;moveAttachmentTopPanelBtn.label;&quot;</span>
<a href="#l2.153"></a><span id="l2.153" class="difflineplus">+                 accesskey=&quot;&amp;moveAttachmentTopPanelBtn.accesskey;&quot;</span>
<a href="#l2.154"></a><span id="l2.154" class="difflineplus">+                 key=&quot;key_moveAttachmentTop&quot;</span>
<a href="#l2.155"></a><span id="l2.155" class="difflineplus">+                 command=&quot;cmd_moveAttachmentTop&quot;/&gt;</span>
<a href="#l2.156"></a><span id="l2.156" class="difflineplus">+  &lt;toolbarbutton id=&quot;btn_moveAttachmentUp&quot;</span>
<a href="#l2.157"></a><span id="l2.157" class="difflineplus">+                 class=&quot;panelButton&quot;</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineplus">+                 label=&quot;&amp;moveAttachmentUpPanelBtn.label;&quot;</span>
<a href="#l2.159"></a><span id="l2.159" class="difflineplus">+                 accesskey=&quot;&amp;moveAttachmentUpPanelBtn.accesskey;&quot;</span>
<a href="#l2.160"></a><span id="l2.160" class="difflineplus">+                 key=&quot;key_moveAttachmentUp&quot;</span>
<a href="#l2.161"></a><span id="l2.161" class="difflineplus">+                 command=&quot;cmd_moveAttachmentUp&quot;/&gt;</span>
<a href="#l2.162"></a><span id="l2.162" class="difflineplus">+  &lt;toolbarbutton id=&quot;btn_moveAttachmentBundleUp&quot;</span>
<a href="#l2.163"></a><span id="l2.163" class="difflineplus">+                 class=&quot;panelButton&quot;</span>
<a href="#l2.164"></a><span id="l2.164" class="difflineplus">+                 label=&quot;&amp;moveAttachmentBundleUpPanelBtn.label;&quot;</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineplus">+                 accesskey=&quot;&amp;moveAttachmentBundleUpPanelBtn.accesskey;&quot;</span>
<a href="#l2.166"></a><span id="l2.166" class="difflineplus">+                 key=&quot;key_moveAttachmentBundleUp&quot;</span>
<a href="#l2.167"></a><span id="l2.167" class="difflineplus">+                 command=&quot;cmd_moveAttachmentBundleUp&quot;/&gt;</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineplus">+  &lt;toolbarbutton id=&quot;btn_moveAttachmentDown&quot;</span>
<a href="#l2.169"></a><span id="l2.169" class="difflineplus">+                 class=&quot;panelButton&quot;</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineplus">+                 label=&quot;&amp;moveAttachmentDownPanelBtn.label;&quot;</span>
<a href="#l2.171"></a><span id="l2.171" class="difflineplus">+                 accesskey=&quot;&amp;moveAttachmentDownPanelBtn.accesskey;&quot;</span>
<a href="#l2.172"></a><span id="l2.172" class="difflineplus">+                 key=&quot;key_moveAttachmentDown&quot;</span>
<a href="#l2.173"></a><span id="l2.173" class="difflineplus">+                 command=&quot;cmd_moveAttachmentDown&quot;/&gt;</span>
<a href="#l2.174"></a><span id="l2.174" class="difflineplus">+  &lt;toolbarbutton id=&quot;btn_moveAttachmentBottom&quot;</span>
<a href="#l2.175"></a><span id="l2.175" class="difflineplus">+                 class=&quot;panelButton&quot;</span>
<a href="#l2.176"></a><span id="l2.176" class="difflineplus">+                 label=&quot;&amp;moveAttachmentBottomPanelBtn.label;&quot;</span>
<a href="#l2.177"></a><span id="l2.177" class="difflineplus">+                 accesskey=&quot;&amp;moveAttachmentBottomPanelBtn.accesskey;&quot;</span>
<a href="#l2.178"></a><span id="l2.178" class="difflineplus">+                 key=&quot;key_moveAttachmentBottom&quot;</span>
<a href="#l2.179"></a><span id="l2.179" class="difflineplus">+                 command=&quot;cmd_moveAttachmentBottom&quot;/&gt;</span>
<a href="#l2.180"></a><span id="l2.180" class="difflineplus">+  &lt;toolbarbutton id=&quot;btn_sortAttachmentsToggle&quot;</span>
<a href="#l2.181"></a><span id="l2.181" class="difflineplus">+                 class=&quot;panelButton&quot;</span>
<a href="#l2.182"></a><span id="l2.182" class="difflineplus">+                 label=&quot;&amp;sortAttachmentsTogglePanelBtn.AZ.label;&quot;</span>
<a href="#l2.183"></a><span id="l2.183" class="difflineplus">+                 accesskey=&quot;&amp;sortAttachmentsTogglePanelBtn.AZ.accesskey;&quot;</span>
<a href="#l2.184"></a><span id="l2.184" class="difflineplus">+                 data-labelAZ=&quot;&amp;sortAttachmentsTogglePanelBtn.AZ.label;&quot;</span>
<a href="#l2.185"></a><span id="l2.185" class="difflineplus">+                 data-accesskeyAZ=&quot;&amp;sortAttachmentsTogglePanelBtn.AZ.accesskey;&quot;</span>
<a href="#l2.186"></a><span id="l2.186" class="difflineplus">+                 data-labelZA=&quot;&amp;sortAttachmentsTogglePanelBtn.ZA.label;&quot;</span>
<a href="#l2.187"></a><span id="l2.187" class="difflineplus">+                 data-accesskeyZA=&quot;&amp;sortAttachmentsTogglePanelBtn.ZA.accesskey;&quot;</span>
<a href="#l2.188"></a><span id="l2.188" class="difflineplus">+                 command=&quot;cmd_sortAttachmentsToggle&quot;/&gt;</span>
<a href="#l2.189"></a><span id="l2.189" class="difflineplus">+&lt;/panel&gt;</span>
<a href="#l2.190"></a><span id="l2.190" class="difflineplus">+</span>
<a href="#l2.191"></a><span id="l2.191"> &lt;menupopup id=&quot;msgComposeContext&quot;</span>
<a href="#l2.192"></a><span id="l2.192">            onpopupshowing=&quot;if (event.target != this) return true; openEditorContextMenu(this);&quot;&gt;</span>
<a href="#l2.193"></a><span id="l2.193"> </span>
<a href="#l2.194"></a><span id="l2.194">   &lt;!-- Spellchecking menu items --&gt;</span>
<a href="#l2.195"></a><span id="l2.195">   &lt;menuitem id=&quot;spellCheckNoSuggestions&quot; label=&quot;&amp;spellNoSuggestions.label;&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.196"></a><span id="l2.196">   &lt;menuseparator id=&quot;spellCheckAddSep&quot; /&gt;</span>
<a href="#l2.197"></a><span id="l2.197">   &lt;menuitem id=&quot;spellCheckAddToDictionary&quot; label=&quot;&amp;spellAddToDictionary.label;&quot; accesskey=&quot;&amp;spellAddToDictionary.accesskey;&quot;</span>
<a href="#l2.198"></a><span id="l2.198">             oncommand=&quot;gSpellChecker.addToDictionary();&quot;/&gt;</span>
<a href="#l2.199"></a><span id="l2.199" class="difflineat">@@ -340,24 +456,29 @@</span>
<a href="#l2.200"></a><span id="l2.200"> &lt;/menupopup&gt;</span>
<a href="#l2.201"></a><span id="l2.201"> </span>
<a href="#l2.202"></a><span id="l2.202"> &lt;menupopup id=&quot;msgComposeAttachmentItemContext&quot;</span>
<a href="#l2.203"></a><span id="l2.203">            onpopupshowing=&quot;updateAttachmentItems();&quot;&gt;</span>
<a href="#l2.204"></a><span id="l2.204">   &lt;menuitem id=&quot;composeAttachmentContext_openItem&quot;</span>
<a href="#l2.205"></a><span id="l2.205">             label=&quot;&amp;openAttachment.label;&quot;</span>
<a href="#l2.206"></a><span id="l2.206">             accesskey=&quot;&amp;openAttachment.accesskey;&quot;</span>
<a href="#l2.207"></a><span id="l2.207">             command=&quot;cmd_openAttachment&quot;/&gt;</span>
<a href="#l2.208"></a><span id="l2.208" class="difflineplus">+  &lt;menuitem id=&quot;composeAttachmentContext_renameItem&quot;</span>
<a href="#l2.209"></a><span id="l2.209" class="difflineplus">+            label=&quot;&amp;renameAttachment.label;&quot;</span>
<a href="#l2.210"></a><span id="l2.210" class="difflineplus">+            accesskey=&quot;&amp;renameAttachment.accesskey;&quot;</span>
<a href="#l2.211"></a><span id="l2.211" class="difflineplus">+            command=&quot;cmd_renameAttachment&quot;/&gt;</span>
<a href="#l2.212"></a><span id="l2.212" class="difflineplus">+  &lt;menuitem id=&quot;composeAttachmentContext_reorderItem&quot;</span>
<a href="#l2.213"></a><span id="l2.213" class="difflineplus">+            label=&quot;&amp;reorderAttachments.label;&quot;</span>
<a href="#l2.214"></a><span id="l2.214" class="difflineplus">+            accesskey=&quot;&amp;reorderAttachments.accesskey;&quot;</span>
<a href="#l2.215"></a><span id="l2.215" class="difflineplus">+            command=&quot;cmd_reorderAttachments&quot;/&gt;</span>
<a href="#l2.216"></a><span id="l2.216" class="difflineplus">+  &lt;menuseparator id=&quot;composeAttachmentContext_beforeRemoveSeparator&quot;/&gt;</span>
<a href="#l2.217"></a><span id="l2.217">   &lt;menuitem id=&quot;composeAttachmentContext_deleteItem&quot;</span>
<a href="#l2.218"></a><span id="l2.218">             label=&quot;&amp;removeAttachment.label;&quot;</span>
<a href="#l2.219"></a><span id="l2.219">             accesskey=&quot;&amp;removeAttachment.accesskey;&quot;</span>
<a href="#l2.220"></a><span id="l2.220">             command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l2.221"></a><span id="l2.221" class="difflineminus">-  &lt;menuitem id=&quot;composeAttachmentContext_renameItem&quot;</span>
<a href="#l2.222"></a><span id="l2.222" class="difflineminus">-            label=&quot;&amp;renameAttachment.label;&quot;</span>
<a href="#l2.223"></a><span id="l2.223" class="difflineminus">-            accesskey=&quot;&amp;renameAttachment.accesskey;&quot;</span>
<a href="#l2.224"></a><span id="l2.224" class="difflineminus">-            command=&quot;cmd_renameAttachment&quot;/&gt;</span>
<a href="#l2.225"></a><span id="l2.225">   &lt;menu id=&quot;composeAttachmentContext_convertCloudMenu&quot;</span>
<a href="#l2.226"></a><span id="l2.226">         label=&quot;&amp;convertCloud.label;&quot;</span>
<a href="#l2.227"></a><span id="l2.227">         accesskey=&quot;&amp;convertCloud.accesskey;&quot;</span>
<a href="#l2.228"></a><span id="l2.228">         command=&quot;cmd_convertCloud&quot;&gt;</span>
<a href="#l2.229"></a><span id="l2.229">     &lt;menupopup id=&quot;convertCloudMenuItems_popup&quot;</span>
<a href="#l2.230"></a><span id="l2.230">                onpopupshowing=&quot;addConvertCloudMenuItems(this, 'convertCloudSeparator', 'context_convertCloud');&quot;&gt;</span>
<a href="#l2.231"></a><span id="l2.231">       &lt;menuitem id=&quot;convertCloudMenuItems_popup_convertAttachment&quot;</span>
<a href="#l2.232"></a><span id="l2.232">                 type=&quot;radio&quot; name=&quot;context_convertCloud&quot;</span>
<a href="#l2.233"></a><span id="l2.233" class="difflineat">@@ -400,16 +521,20 @@</span>
<a href="#l2.234"></a><span id="l2.234">             accesskey=&quot;&amp;attachPage.accesskey;&quot;</span>
<a href="#l2.235"></a><span id="l2.235">             command=&quot;cmd_attachPage&quot;/&gt;</span>
<a href="#l2.236"></a><span id="l2.236">   &lt;menuseparator id=&quot;attachmentListContext_remindLaterSeparator&quot;/&gt;</span>
<a href="#l2.237"></a><span id="l2.237">   &lt;menuitem id=&quot;attachmentListContext_remindLaterItem&quot;</span>
<a href="#l2.238"></a><span id="l2.238">             type=&quot;checkbox&quot;</span>
<a href="#l2.239"></a><span id="l2.239">             label=&quot;&amp;remindLater.label;&quot;</span>
<a href="#l2.240"></a><span id="l2.240">             accesskey=&quot;&amp;remindLater.accesskey;&quot;</span>
<a href="#l2.241"></a><span id="l2.241">             command=&quot;cmd_remindLater&quot;/&gt;</span>
<a href="#l2.242"></a><span id="l2.242" class="difflineplus">+  &lt;menuitem id=&quot;attachmentListContext_reorderItem&quot;</span>
<a href="#l2.243"></a><span id="l2.243" class="difflineplus">+            label=&quot;&amp;reorderAttachments.label;&quot;</span>
<a href="#l2.244"></a><span id="l2.244" class="difflineplus">+            accesskey=&quot;&amp;reorderAttachments.accesskey;&quot;</span>
<a href="#l2.245"></a><span id="l2.245" class="difflineplus">+            command=&quot;cmd_reorderAttachments&quot;/&gt;</span>
<a href="#l2.246"></a><span id="l2.246"> &lt;/menupopup&gt;</span>
<a href="#l2.247"></a><span id="l2.247"> </span>
<a href="#l2.248"></a><span id="l2.248"> &lt;menupopup id=&quot;toolbar-context-menu&quot;</span>
<a href="#l2.249"></a><span id="l2.249">            onpopupshowing=&quot;onViewToolbarsPopupShowing(event, 'compose-toolbox');&quot;&gt;</span>
<a href="#l2.250"></a><span id="l2.250">   &lt;menuseparator/&gt;</span>
<a href="#l2.251"></a><span id="l2.251">   &lt;menuitem id=&quot;CustomizeComposeToolbar&quot;</span>
<a href="#l2.252"></a><span id="l2.252">             command=&quot;cmd_CustomizeComposeToolbar&quot;</span>
<a href="#l2.253"></a><span id="l2.253">             label=&quot;&amp;customizeToolbar.label;&quot;</span>
<a href="#l2.254"></a><span id="l2.254" class="difflineat">@@ -536,25 +661,43 @@</span>
<a href="#l2.255"></a><span id="l2.255">           &lt;menuitem id=&quot;menu_redo&quot; label=&quot;&amp;redoCmd.label;&quot; key=&quot;key_redo&quot; accesskey=&quot;&amp;redoCmd.accesskey;&quot; command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l2.256"></a><span id="l2.256">           &lt;menuseparator/&gt;</span>
<a href="#l2.257"></a><span id="l2.257">           &lt;menuitem id=&quot;menu_cut&quot; label=&quot;&amp;cutCmd.label;&quot; key=&quot;key_cut&quot; accesskey=&quot;&amp;cutCmd.accesskey;&quot; command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l2.258"></a><span id="l2.258">           &lt;menuitem id=&quot;menu_copy&quot; label=&quot;&amp;copyCmd.label;&quot; key=&quot;key_copy&quot; accesskey=&quot;&amp;copyCmd.accesskey;&quot; command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l2.259"></a><span id="l2.259">           &lt;menuitem id=&quot;menu_paste&quot; label=&quot;&amp;pasteCmd.label;&quot; key=&quot;key_paste&quot; accesskey=&quot;&amp;pasteCmd.accesskey;&quot; command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l2.260"></a><span id="l2.260">           &lt;menuitem id=&quot;menu_pasteNoFormatting&quot; command=&quot;cmd_pasteNoFormatting&quot;</span>
<a href="#l2.261"></a><span id="l2.261">                     key=&quot;pastenoformattingkb&quot;/&gt;</span>
<a href="#l2.262"></a><span id="l2.262">           &lt;menuitem id=&quot;menu_pasteQuote&quot;/&gt;</span>
<a href="#l2.263"></a><span id="l2.263" class="difflineminus">-          &lt;menuitem id=&quot;menu_delete&quot; label=&quot;&amp;deleteCmd.label;&quot; key=&quot;key_delete&quot; accesskey=&quot;&amp;deleteCmd.accesskey;&quot; command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l2.264"></a><span id="l2.264" class="difflineplus">+          &lt;menuitem id=&quot;menu_delete&quot;</span>
<a href="#l2.265"></a><span id="l2.265" class="difflineplus">+                    label=&quot;&amp;deleteCmd.label;&quot;</span>
<a href="#l2.266"></a><span id="l2.266" class="difflineplus">+                    accesskey=&quot;&amp;deleteCmd.accesskey;&quot;</span>
<a href="#l2.267"></a><span id="l2.267" class="difflineplus">+                    key=&quot;key_delete&quot;</span>
<a href="#l2.268"></a><span id="l2.268" class="difflineplus">+                    command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l2.269"></a><span id="l2.269">           &lt;menuseparator/&gt;</span>
<a href="#l2.270"></a><span id="l2.270" class="difflineminus">-          &lt;menuitem id=&quot;menu_rewrap&quot; label=&quot;&amp;editRewrapCmd.label;&quot; key=&quot;key_rewrap&quot; accesskey=&quot;&amp;editRewrapCmd.accesskey;&quot; command=&quot;cmd_rewrap&quot;/&gt;</span>
<a href="#l2.271"></a><span id="l2.271" class="difflineplus">+          &lt;menuitem id=&quot;menu_rewrap&quot;</span>
<a href="#l2.272"></a><span id="l2.272" class="difflineplus">+                    label=&quot;&amp;editRewrapCmd.label;&quot;</span>
<a href="#l2.273"></a><span id="l2.273" class="difflineplus">+                    accesskey=&quot;&amp;editRewrapCmd.accesskey;&quot;</span>
<a href="#l2.274"></a><span id="l2.274" class="difflineplus">+                    key=&quot;key_rewrap&quot;</span>
<a href="#l2.275"></a><span id="l2.275" class="difflineplus">+                    command=&quot;cmd_rewrap&quot;/&gt;</span>
<a href="#l2.276"></a><span id="l2.276">           &lt;menuitem id=&quot;menu_RenameAttachment&quot;</span>
<a href="#l2.277"></a><span id="l2.277">                     label=&quot;&amp;renameAttachmentCmd.label;&quot;</span>
<a href="#l2.278"></a><span id="l2.278">                     accesskey=&quot;&amp;renameAttachmentCmd.accesskey;&quot;</span>
<a href="#l2.279"></a><span id="l2.279" class="difflineminus">-                    key=&quot;key_renameAttachment&quot; command=&quot;cmd_renameAttachment&quot;/&gt;</span>
<a href="#l2.280"></a><span id="l2.280" class="difflineplus">+                    key=&quot;key_renameAttachment&quot;</span>
<a href="#l2.281"></a><span id="l2.281" class="difflineplus">+                    command=&quot;cmd_renameAttachment&quot;/&gt;</span>
<a href="#l2.282"></a><span id="l2.282" class="difflineplus">+          &lt;menuitem id=&quot;menu_reorderAttachments&quot;</span>
<a href="#l2.283"></a><span id="l2.283" class="difflineplus">+                    label=&quot;&amp;reorderAttachmentsCmd.label;&quot;</span>
<a href="#l2.284"></a><span id="l2.284" class="difflineplus">+                    accesskey=&quot;&amp;reorderAttachmentsCmd.accesskey;&quot;</span>
<a href="#l2.285"></a><span id="l2.285" class="difflineplus">+                    key=&quot;key_reorderAttachments&quot;</span>
<a href="#l2.286"></a><span id="l2.286" class="difflineplus">+                    command=&quot;cmd_reorderAttachments&quot;/&gt;</span>
<a href="#l2.287"></a><span id="l2.287">           &lt;menuseparator/&gt;</span>
<a href="#l2.288"></a><span id="l2.288" class="difflineminus">-          &lt;menuitem id=&quot;menu_selectAll&quot; label=&quot;&amp;selectAllCmd.label;&quot; key=&quot;key_selectAll&quot; accesskey=&quot;&amp;selectAllCmd.accesskey;&quot; command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l2.289"></a><span id="l2.289" class="difflineplus">+          &lt;menuitem id=&quot;menu_selectAll&quot;</span>
<a href="#l2.290"></a><span id="l2.290" class="difflineplus">+                    label=&quot;&amp;selectAllCmd.label;&quot;</span>
<a href="#l2.291"></a><span id="l2.291" class="difflineplus">+                    accesskey=&quot;&amp;selectAllCmd.accesskey;&quot;</span>
<a href="#l2.292"></a><span id="l2.292" class="difflineplus">+                    key=&quot;key_selectAll&quot;</span>
<a href="#l2.293"></a><span id="l2.293" class="difflineplus">+                    command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l2.294"></a><span id="l2.294">           &lt;menuseparator/&gt;</span>
<a href="#l2.295"></a><span id="l2.295">           &lt;menuitem id=&quot;menu_findBar&quot;</span>
<a href="#l2.296"></a><span id="l2.296">                     label=&quot;&amp;findBarCmd.label;&quot;</span>
<a href="#l2.297"></a><span id="l2.297">                     accesskey=&quot;&amp;findBarCmd.accesskey;&quot;</span>
<a href="#l2.298"></a><span id="l2.298">                     key=&quot;key_find&quot;</span>
<a href="#l2.299"></a><span id="l2.299">                     command=&quot;cmd_find&quot;/&gt;</span>
<a href="#l2.300"></a><span id="l2.300"> #ifndef XP_MACOSX</span>
<a href="#l2.301"></a><span id="l2.301">           &lt;menuitem id=&quot;menu_findReplace&quot;</span>
<a href="#l2.302"></a><span id="l2.302" class="difflineat">@@ -994,19 +1137,21 @@</span>
<a href="#l2.303"></a><span id="l2.303">                    crop=&quot;right&quot; accesskey=&quot;&amp;attachments.accesskey;&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l2.304"></a><span id="l2.304">             &lt;label id=&quot;attachmentBucketSize&quot;/&gt;</span>
<a href="#l2.305"></a><span id="l2.305">           &lt;/hbox&gt;</span>
<a href="#l2.306"></a><span id="l2.306">           &lt;attachmentlist orient=&quot;vertical&quot; id=&quot;attachmentBucket&quot;</span>
<a href="#l2.307"></a><span id="l2.307">                           disableonsend=&quot;true&quot;</span>
<a href="#l2.308"></a><span id="l2.308">                           seltype=&quot;multiple&quot; flex=&quot;1&quot; height=&quot;0&quot;</span>
<a href="#l2.309"></a><span id="l2.309">                           context=&quot;msgComposeAttachmentListContext&quot;</span>
<a href="#l2.310"></a><span id="l2.310">                           itemcontext=&quot;msgComposeAttachmentItemContext&quot;</span>
<a href="#l2.311"></a><span id="l2.311" class="difflineminus">-                          onclick=&quot;AttachmentBucketClicked(event);&quot;</span>
<a href="#l2.312"></a><span id="l2.312" class="difflineplus">+                          ondblclick=&quot;AttachmentBucketDoubleClicked(event);&quot;</span>
<a href="#l2.313"></a><span id="l2.313" class="difflineplus">+                          onkeyup=&quot;attachmentBucketOnKeyUp(event);&quot;</span>
<a href="#l2.314"></a><span id="l2.314">                           onselect=&quot;updateAttachmentItems();&quot;</span>
<a href="#l2.315"></a><span id="l2.315" class="difflineminus">-                          ondragstart=&quot;nsDragAndDrop.startDrag(event, attachmentBucketDNDObserver);&quot;/&gt;</span>
<a href="#l2.316"></a><span id="l2.316" class="difflineplus">+                          ondragstart=&quot;nsDragAndDrop.startDrag(event, attachmentBucketDNDObserver);&quot;</span>
<a href="#l2.317"></a><span id="l2.317" class="difflineplus">+                          onblur=&quot;attachmentBucketOnBlur();&quot;/&gt;</span>
<a href="#l2.318"></a><span id="l2.318">         &lt;/vbox&gt;</span>
<a href="#l2.319"></a><span id="l2.319">       &lt;/hbox&gt;</span>
<a href="#l2.320"></a><span id="l2.320">     &lt;/toolbar&gt;</span>
<a href="#l2.321"></a><span id="l2.321"> </span>
<a href="#l2.322"></a><span id="l2.322">     &lt;!-- These toolbar items get filled out from the editorOverlay --&gt;</span>
<a href="#l2.323"></a><span id="l2.323">     &lt;toolbox id=&quot;FormatToolbox&quot; mode=&quot;icons&quot;&gt;</span>
<a href="#l2.324"></a><span id="l2.324">       &lt;toolbar class=&quot;chromeclass-toolbar&quot; id=&quot;FormatToolbar&quot; persist=&quot;collapsed&quot;</span>
<a href="#l2.325"></a><span id="l2.325">                customizable=&quot;true&quot; nowindowdrag=&quot;true&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/messengercompose/messengercompose.dtd</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -80,16 +80,19 @@</span>
<a href="#l3.4"></a><span id="l3.4"> &lt;!ENTITY pasteAsQuotationCmd.key &quot;o&quot;&gt;</span>
<a href="#l3.5"></a><span id="l3.5"> &lt;!ENTITY editRewrapCmd.accesskey &quot;w&quot;&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> &lt;!ENTITY deleteCmd.label &quot;Delete&quot;&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> &lt;!ENTITY deleteCmd.accesskey &quot;d&quot;&gt;</span>
<a href="#l3.8"></a><span id="l3.8"> &lt;!ENTITY editRewrapCmd.label &quot;Rewrap&quot;&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> &lt;!ENTITY editRewrapCmd.key &quot;R&quot;&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;!ENTITY renameAttachmentCmd.label &quot;Rename Attachment…&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;!ENTITY renameAttachmentCmd.accesskey &quot;e&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+&lt;!ENTITY reorderAttachmentsCmd.label &quot;Reorder Attachments…&quot;&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+&lt;!ENTITY reorderAttachmentsCmd.accesskey &quot;s&quot;&gt;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+&lt;!ENTITY reorderAttachmentsCmd.key &quot;x&quot;&gt;</span>
<a href="#l3.15"></a><span id="l3.15"> &lt;!ENTITY selectAllCmd.label &quot;Select All&quot;&gt;</span>
<a href="#l3.16"></a><span id="l3.16"> &lt;!ENTITY selectAllCmd.key &quot;A&quot;&gt;</span>
<a href="#l3.17"></a><span id="l3.17"> &lt;!ENTITY selectAllCmd.accesskey &quot;a&quot;&gt;</span>
<a href="#l3.18"></a><span id="l3.18"> &lt;!ENTITY findBarCmd.label &quot;Find…&quot;&gt;</span>
<a href="#l3.19"></a><span id="l3.19"> &lt;!ENTITY findBarCmd.accesskey &quot;F&quot;&gt;</span>
<a href="#l3.20"></a><span id="l3.20"> &lt;!ENTITY findBarCmd.key &quot;F&quot;&gt;</span>
<a href="#l3.21"></a><span id="l3.21"> &lt;!ENTITY findReplaceCmd.label &quot;Find and Replace…&quot;&gt;</span>
<a href="#l3.22"></a><span id="l3.22"> &lt;!ENTITY findReplaceCmd.accesskey &quot;l&quot;&gt;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineat">@@ -98,16 +101,40 @@</span>
<a href="#l3.24"></a><span id="l3.24"> &lt;!ENTITY findAgainCmd.accesskey &quot;g&quot;&gt;</span>
<a href="#l3.25"></a><span id="l3.25"> &lt;!ENTITY findAgainCmd.key &quot;G&quot;&gt;</span>
<a href="#l3.26"></a><span id="l3.26"> &lt;!ENTITY findAgainCmd.key2 &quot;VK_F3&quot;&gt;</span>
<a href="#l3.27"></a><span id="l3.27"> &lt;!ENTITY findPrevCmd.label &quot;Find Previous&quot;&gt;</span>
<a href="#l3.28"></a><span id="l3.28"> &lt;!ENTITY findPrevCmd.accesskey &quot;v&quot;&gt;</span>
<a href="#l3.29"></a><span id="l3.29"> &lt;!ENTITY findPrevCmd.key &quot;G&quot;&gt;</span>
<a href="#l3.30"></a><span id="l3.30"> &lt;!ENTITY findPrevCmd.key2 &quot;VK_F3&quot;&gt;</span>
<a href="#l3.31"></a><span id="l3.31"> </span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+&lt;!-- Reorder Attachment Panel --&gt;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+&lt;!ENTITY reorderAttachmentsPanel.label &quot;Reorder Attachments&quot;&gt;</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+&lt;!ENTITY moveAttachmentTopPanelBtn.label &quot;Move to Top&quot;&gt;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+&lt;!ENTITY moveAttachmentTopPanelBtn.accesskey &quot;T&quot;&gt;</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+&lt;!ENTITY moveAttachmentUpPanelBtn.label &quot;Move Up&quot;&gt;</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+&lt;!ENTITY moveAttachmentUpPanelBtn.accesskey &quot;U&quot;&gt;</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+&lt;!ENTITY moveAttachmentBundleUpPanelBtn.label &quot;Move together&quot;&gt;</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+&lt;!ENTITY moveAttachmentBundleUpPanelBtn.accesskey &quot;v&quot;&gt;</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+&lt;!ENTITY moveAttachmentDownPanelBtn.label &quot;Move Down&quot;&gt;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+&lt;!ENTITY moveAttachmentDownPanelBtn.accesskey &quot;D&quot;&gt;</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+&lt;!ENTITY moveAttachmentBottomPanelBtn.label &quot;Move to Bottom&quot;&gt;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+&lt;!ENTITY moveAttachmentBottomPanelBtn.accesskey &quot;B&quot;&gt;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+&lt;!-- LOCALIZATION NOTE (sortAttachmentsTogglePanelBtn.AZ.label):</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+     Please ensure that this translation matches</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+     sortAttachmentsTogglePanelBtn.ZA.label, except for the sort direction. --&gt;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+&lt;!ENTITY sortAttachmentsTogglePanelBtn.AZ.label &quot;Sort Selection: A - Z&quot;&gt;</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+&lt;!-- LOCALIZATION NOTE (sortAttachmentsTogglePanelBtn.AZ.accesskey):</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+     This accesskey should be the same like</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+     sortAttachmentsTogglePanelBtn.ZA.accesskey, and it should be taken from</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+     the &quot;Sort Selection:&quot; part of the label, not from the sort direction part. --&gt;</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+&lt;!ENTITY sortAttachmentsTogglePanelBtn.AZ.accesskey &quot;o&quot;&gt;</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+&lt;!ENTITY sortAttachmentsTogglePanelBtn.ZA.label &quot;Sort Selection: Z - A&quot;&gt;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+&lt;!ENTITY sortAttachmentsTogglePanelBtn.ZA.accesskey &quot;o&quot;&gt;</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+</span>
<a href="#l3.56"></a><span id="l3.56"> &lt;!-- View Menu --&gt;</span>
<a href="#l3.57"></a><span id="l3.57"> &lt;!ENTITY viewMenu.label &quot;View&quot;&gt;</span>
<a href="#l3.58"></a><span id="l3.58"> &lt;!ENTITY viewMenu.accesskey &quot;v&quot;&gt;</span>
<a href="#l3.59"></a><span id="l3.59"> &lt;!ENTITY viewToolbarsMenuNew.label &quot;Toolbars&quot;&gt;</span>
<a href="#l3.60"></a><span id="l3.60"> &lt;!ENTITY viewToolbarsMenuNew.accesskey &quot;T&quot;&gt;</span>
<a href="#l3.61"></a><span id="l3.61"> &lt;!ENTITY menubarCmd.label &quot;Menu Bar&quot;&gt;</span>
<a href="#l3.62"></a><span id="l3.62"> &lt;!ENTITY menubarCmd.accesskey &quot;M&quot;&gt;</span>
<a href="#l3.63"></a><span id="l3.63"> &lt;!ENTITY showCompositionToolbarCmd.label &quot;Composition Toolbar&quot;&gt;</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineat">@@ -278,16 +305,18 @@</span>
<a href="#l3.65"></a><span id="l3.65"> &lt;!ENTITY openAttachment.label &quot;Open&quot;&gt;</span>
<a href="#l3.66"></a><span id="l3.66"> &lt;!ENTITY openAttachment.accesskey &quot;O&quot;&gt;</span>
<a href="#l3.67"></a><span id="l3.67"> &lt;!ENTITY delete.label &quot;Delete&quot;&gt;</span>
<a href="#l3.68"></a><span id="l3.68"> &lt;!ENTITY delete.accesskey &quot;D&quot;&gt;</span>
<a href="#l3.69"></a><span id="l3.69"> &lt;!ENTITY removeAttachment.label &quot;Remove Attachment&quot;&gt;</span>
<a href="#l3.70"></a><span id="l3.70"> &lt;!ENTITY removeAttachment.accesskey &quot;M&quot;&gt;</span>
<a href="#l3.71"></a><span id="l3.71"> &lt;!ENTITY renameAttachment.label &quot;Rename…&quot;&gt;</span>
<a href="#l3.72"></a><span id="l3.72"> &lt;!ENTITY renameAttachment.accesskey &quot;R&quot;&gt;</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+&lt;!ENTITY reorderAttachments.label &quot;Reorder Attachments…&quot;&gt;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+&lt;!ENTITY reorderAttachments.accesskey &quot;s&quot;&gt;</span>
<a href="#l3.75"></a><span id="l3.75"> &lt;!ENTITY selectAll.label &quot;Select All&quot;&gt;</span>
<a href="#l3.76"></a><span id="l3.76"> &lt;!ENTITY selectAll.accesskey &quot;A&quot;&gt;</span>
<a href="#l3.77"></a><span id="l3.77"> &lt;!ENTITY attachFile.label &quot;Attach File(s)…&quot;&gt;</span>
<a href="#l3.78"></a><span id="l3.78"> &lt;!ENTITY attachFile.accesskey &quot;F&quot;&gt;</span>
<a href="#l3.79"></a><span id="l3.79"> &lt;!ENTITY attachCloud.label &quot;Filelink…&quot;&gt;</span>
<a href="#l3.80"></a><span id="l3.80"> &lt;!ENTITY attachCloud.accesskey &quot;i&quot;&gt;</span>
<a href="#l3.81"></a><span id="l3.81"> &lt;!ENTITY convertCloud.label &quot;Convert to…&quot;&gt;</span>
<a href="#l3.82"></a><span id="l3.82"> &lt;!ENTITY convertCloud.accesskey &quot;C&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/themes/linux/mail/compose/messengercompose.css</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/themes/linux/mail/compose/messengercompose.css</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -821,8 +821,42 @@ toolbarbutton.formatting-button {</span>
<a href="#l4.4"></a><span id="l4.4"> }</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6"> menu[command=&quot;cmd_attachCloud&quot;] .menu-iconic-left,</span>
<a href="#l4.7"></a><span id="l4.7"> menu[command=&quot;cmd_convertCloud&quot;] .menu-iconic-left {</span>
<a href="#l4.8"></a><span id="l4.8">   /* Ensure that the provider icons are visible even if the Gnome theme says</span>
<a href="#l4.9"></a><span id="l4.9">      menus shouldn't have icons. */</span>
<a href="#l4.10"></a><span id="l4.10">   visibility: visible;</span>
<a href="#l4.11"></a><span id="l4.11"> }</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+/* ::::: Reorder Attachments Panel ::::: */</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+#reorderAttachmentsPanel &gt; .panel-arrowcontainer &gt; .panel-arrowcontent {</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+  --arrowpanel-padding: 4px;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+}</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+#btn_moveAttachmentTop {</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-top.svg&quot;);</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+}</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+#btn_moveAttachmentUp {</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-up.svg&quot;);</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+}</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+#btn_moveAttachmentDown {</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-down.svg&quot;);</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+}</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+#btn_moveAttachmentBottom {</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-bottom.svg&quot;);</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+}</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+#btn_moveAttachmentBundleUp {</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-together.svg&quot;);</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+}</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+#btn_sortAttachmentsToggle {</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/sort.svg&quot;);</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+}</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+#btn_sortAttachmentsToggle[data-sortdirection=&quot;descending&quot;] &gt; .toolbarbutton-icon {</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+  transform: scaleY(-1);</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/themes/linux/mail/messenger.css</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/themes/linux/mail/messenger.css</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -34,16 +34,18 @@</span>
<a href="#l5.4"></a><span id="l5.4">   --toolbarbutton-active-background: rgba(154, 154, 154, .5) linear-gradient(rgba(255, 255, 255, .7), rgba(255, 255, 255, .4));</span>
<a href="#l5.5"></a><span id="l5.5">   --toolbarbutton-active-bordercolor: rgba(0, 0, 0, .3);</span>
<a href="#l5.6"></a><span id="l5.6">   --toolbarbutton-active-boxshadow: 0 1px 1px rgba(0, 0, 0, .1) inset, 0 0 1px rgba(0, 0, 0, .3) inset;</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8">   --toolbarbutton-checkedhover-backgroundcolor: rgba(200, 200, 200, .5);</span>
<a href="#l5.9"></a><span id="l5.9">   --toolbarbutton-icon-fill-attention: #0a84ff;</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">   --lwt-header-image: none;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+  --arrowpanel-dimmed: hsla(0, 0%, 80%, .3);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  --arrowpanel-dimmed-further: hsla(0, 0%, 80%, .45);</span>
<a href="#l5.14"></a><span id="l5.14"> }</span>
<a href="#l5.15"></a><span id="l5.15"> </span>
<a href="#l5.16"></a><span id="l5.16"> :root:-moz-lwtheme {</span>
<a href="#l5.17"></a><span id="l5.17">   --toolbar-bgcolor: rgba(255,255,255,.4);</span>
<a href="#l5.18"></a><span id="l5.18">   --toolbar-bgimage: none;</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20">   --toolbarbutton-icon-fill-opacity: 1;</span>
<a href="#l5.21"></a><span id="l5.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/themes/osx/mail/compose/messengercompose.css</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/themes/osx/mail/compose/messengercompose.css</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1215,8 +1215,42 @@ toolbarbutton.toolbarbutton-1 &gt; .toolbar</span>
<a href="#l6.4"></a><span id="l6.4"> #msgcomposeWindow[sizemode=&quot;fullscreen&quot;] &gt; #titlebar {</span>
<a href="#l6.5"></a><span id="l6.5">   display: none;</span>
<a href="#l6.6"></a><span id="l6.6"> }</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> #titlebar-buttonbox-container {</span>
<a href="#l6.9"></a><span id="l6.9">   margin-top: 3px;</span>
<a href="#l6.10"></a><span id="l6.10">   margin-inline-start: 7px;</span>
<a href="#l6.11"></a><span id="l6.11"> }</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+/* ::::: Reorder Attachments Panel ::::: */</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+#reorderAttachmentsPanel &gt; .panel-arrowcontainer &gt; .panel-arrowcontent {</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+  --arrowpanel-padding: 4px;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+}</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+#btn_moveAttachmentTop {</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-top.svg&quot;);</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+}</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+#btn_moveAttachmentUp {</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-up.svg&quot;);</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+}</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+#btn_moveAttachmentDown {</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-down.svg&quot;);</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+}</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+#btn_moveAttachmentBottom {</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-bottom.svg&quot;);</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+}</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+#btn_moveAttachmentBundleUp {</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-together.svg&quot;);</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+}</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+#btn_sortAttachmentsToggle {</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/sort.svg&quot;);</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+}</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+#btn_sortAttachmentsToggle[data-sortdirection=&quot;descending&quot;] &gt; .toolbarbutton-icon {</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+  transform: scaleY(-1);</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/themes/osx/mail/messenger.css</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/themes/osx/mail/messenger.css</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -39,16 +39,18 @@</span>
<a href="#l7.4"></a><span id="l7.4">                                     0 1px 0 hsla(0, 0%, 0%, .05) inset,</span>
<a href="#l7.5"></a><span id="l7.5">                                     0 1px 1px hsla(0, 0%, 0%, .2) inset;</span>
<a href="#l7.6"></a><span id="l7.6">   --toolbarbutton-inactive-bordercolor: rgba(0, 0, 0, 0.1);</span>
<a href="#l7.7"></a><span id="l7.7">   --toolbarbutton-inactive-boxshadow: 0 1px 0 hsla(0, 0%, 0%, .05) inset;</span>
<a href="#l7.8"></a><span id="l7.8">   --toolbarbutton-checkedhover-backgroundcolor: hsla(0, 0%, 0%, .09);</span>
<a href="#l7.9"></a><span id="l7.9">   --toolbarbutton-icon-fill-attention: #0a84ff;</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">   --lwt-header-image: none;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+  --arrowpanel-dimmed: hsla(210, 4%, 10%, .07);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  --arrowpanel-dimmed-further: hsla(210, 4%, 10%, .12);</span>
<a href="#l7.14"></a><span id="l7.14"> }</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16"> :root:-moz-window-inactive {</span>
<a href="#l7.17"></a><span id="l7.17">   --toolbar-bgcolor: -moz-mac-chrome-inactive;</span>
<a href="#l7.18"></a><span id="l7.18"> }</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20"> :root:-moz-lwtheme {</span>
<a href="#l7.21"></a><span id="l7.21">   --toolbar-bgcolor: rgba(255,255,255,.4);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/themes/shared/jar.inc.mn</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/themes/shared/jar.inc.mn</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -36,16 +36,21 @@</span>
<a href="#l8.4"></a><span id="l8.4">   skin/classic/messenger/icons/forward.svg                    (../shared/mail/icons/forward.svg)</span>
<a href="#l8.5"></a><span id="l8.5">   skin/classic/messenger/icons/getmsg.svg                     (../shared/mail/icons/getmsg.svg)</span>
<a href="#l8.6"></a><span id="l8.6">   skin/classic/messenger/icons/goback.svg                     (../shared/mail/icons/goback.svg)</span>
<a href="#l8.7"></a><span id="l8.7">   skin/classic/messenger/icons/goforward.svg                  (../shared/mail/icons/goforward.svg)</span>
<a href="#l8.8"></a><span id="l8.8">   skin/classic/messenger/icons/join.svg                       (../shared/mail/icons/join.svg)</span>
<a href="#l8.9"></a><span id="l8.9">   skin/classic/messenger/icons/junk.svg                       (../shared/mail/icons/junk.svg)</span>
<a href="#l8.10"></a><span id="l8.10">   skin/classic/messenger/icons/mark.svg                       (../shared/mail/icons/mark.svg)</span>
<a href="#l8.11"></a><span id="l8.11">   skin/classic/messenger/icons/message.svg                    (../shared/mail/icons/message.svg)</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+  skin/classic/messenger/icons/move-bottom.svg                (../shared/mail/icons/move-bottom.svg)</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  skin/classic/messenger/icons/move-down.svg                  (../shared/mail/icons/move-down.svg)</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+  skin/classic/messenger/icons/move-together.svg              (../shared/mail/icons/move-together.svg)</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+  skin/classic/messenger/icons/move-top.svg                   (../shared/mail/icons/move-top.svg)</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+  skin/classic/messenger/icons/move-up.svg                    (../shared/mail/icons/move-up.svg)</span>
<a href="#l8.17"></a><span id="l8.17">   skin/classic/messenger/icons/newmsg.svg                     (../shared/mail/icons/newmsg.svg)</span>
<a href="#l8.18"></a><span id="l8.18">   skin/classic/messenger/icons/nextmsg.svg                    (../shared/mail/icons/nextmsg.svg)</span>
<a href="#l8.19"></a><span id="l8.19">   skin/classic/messenger/icons/nextunread.svg                 (../shared/mail/icons/nextunread.svg)</span>
<a href="#l8.20"></a><span id="l8.20">   skin/classic/messenger/icons/overflow-indicator.png         (../shared/mail/icons/overflow-indicator.png)</span>
<a href="#l8.21"></a><span id="l8.21">   skin/classic/messenger/icons/paste.svg                      (../shared/mail/icons/paste.svg)</span>
<a href="#l8.22"></a><span id="l8.22">   skin/classic/messenger/icons/pluginBlocked.svg              (../shared/mail/icons/pluginBlocked.svg)</span>
<a href="#l8.23"></a><span id="l8.23">   skin/classic/messenger/icons/previousmsg.svg                (../shared/mail/icons/previousmsg.svg)</span>
<a href="#l8.24"></a><span id="l8.24">   skin/classic/messenger/icons/previousunread.svg             (../shared/mail/icons/previousunread.svg)</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineat">@@ -54,16 +59,17 @@</span>
<a href="#l8.26"></a><span id="l8.26">   skin/classic/messenger/icons/remote-blocked.svg             (../shared/mail/icons/remote-blocked.svg)</span>
<a href="#l8.27"></a><span id="l8.27">   skin/classic/messenger/icons/reply.svg                      (../shared/mail/icons/reply.svg)</span>
<a href="#l8.28"></a><span id="l8.28">   skin/classic/messenger/icons/replyall.svg                   (../shared/mail/icons/replyall.svg)</span>
<a href="#l8.29"></a><span id="l8.29">   skin/classic/messenger/icons/replylist.svg                  (../shared/mail/icons/replylist.svg)</span>
<a href="#l8.30"></a><span id="l8.30">   skin/classic/messenger/icons/search-glass.svg               (../shared/mail/icons/search-glass.svg)</span>
<a href="#l8.31"></a><span id="l8.31">   skin/classic/messenger/icons/save.svg                       (../shared/mail/icons/save.svg)</span>
<a href="#l8.32"></a><span id="l8.32">   skin/classic/messenger/icons/security.svg                   (../shared/mail/icons/security.svg)</span>
<a href="#l8.33"></a><span id="l8.33">   skin/classic/messenger/icons/send.svg                       (../shared/mail/icons/send.svg)</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+  skin/classic/messenger/icons/sort.svg                       (../shared/mail/icons/sort.svg)</span>
<a href="#l8.35"></a><span id="l8.35">   skin/classic/messenger/icons/spelling.svg                   (../shared/mail/icons/spelling.svg)</span>
<a href="#l8.36"></a><span id="l8.36">   skin/classic/messenger/icons/star.svg                       (../shared/mail/icons/star.svg)</span>
<a href="#l8.37"></a><span id="l8.37">   skin/classic/messenger/icons/sticky.svg                     (../shared/mail/icons/sticky.svg)</span>
<a href="#l8.38"></a><span id="l8.38">   skin/classic/messenger/icons/stop.svg                       (../shared/mail/icons/stop.svg)</span>
<a href="#l8.39"></a><span id="l8.39">   skin/classic/messenger/icons/tag.svg                        (../shared/mail/icons/tag.svg)</span>
<a href="#l8.40"></a><span id="l8.40">   skin/classic/messenger/icons/toolbarbutton-arrow.svg        (../shared/mail/icons/toolbarbutton-arrow.svg)</span>
<a href="#l8.41"></a><span id="l8.41">   skin/classic/messenger/shared/accountProvisioner.css        (../shared/mail/accountProvisioner.css)</span>
<a href="#l8.42"></a><span id="l8.42">   skin/classic/messenger/shared/addressbook.css               (../shared/mail/addressbook.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- /dev/null</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/move-bottom.svg</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M3.7 3.3c-.94-.88-2.3.47-1.4 1.4l5 5.02c.38.4 1.02.4 1.4 0l5-5c.9-.95-.47-2.3-1.4-1.42L8 7.6zM13 11a1 1 0 1 1 0 2H3a1 1 0 1 1 0-2z&quot;/&gt;</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/move-down.svg</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M3.7 4.7c-.94-.88-2.3.47-1.4 1.4l5 5.02c.38.4 1.02.4 1.4 0l5-5c.9-.95-.47-2.3-1.4-1.42L8 9z&quot;/&gt;</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/move-together.svg</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M2 4h4c1.3-.04 1.3-1.96 0-2H2C.7 2.04.7 3.96 2 4zm4 3H2C.67 7 .67 9 2 9h4c1.33 0 1.33-2 0-2zm0 5H2c-1.33 0-1.33 2 0 2h4c1.33 0 1.33-2 0-2zM10 6h4c1.3-.04 1.3-1.96 0-2h-4c-1.3.04-1.3 1.96 0 2zm4 1h-4c-1.34 0-1.34 2 0 2h4c1.33 0 1.33-2 0-2zm0 3h-4c-1.33 0-1.33 2 0 2h4c1.33 0 1.33-2 0-2z&quot;/&gt;</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/move-top.svg</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M3.7 12.7c-.94.9-2.3-.46-1.4-1.4l5-5c.38-.4 1.02-.4 1.4 0l5 5c.9.94-.47 2.3-1.4 1.4L8 8.43zM13 5a1 1 0 1 0 0-2H3a1 1 0 1 0 0 2z&quot;/&gt;</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/move-up.svg</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M3.7 11.3c-.94.88-2.3-.47-1.4-1.4l5-5.02c.38-.4 1.02-.4 1.4 0l5 5c.9.95-.47 2.3-1.4 1.42L8 7z&quot;/&gt;</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- /dev/null</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/sort.svg</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M13 13c1.33 0 1.33-2 0-2H3c-1.33 0-1.33 2 0 2zm-2-4c1.33 0 1.33-2 0-2H5C3.67 7 3.67 9 5 9zM9 5c1.33 0 1.33-2 0-2H7C5.67 3 5.67 5 7 5z&quot;/&gt;</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/themes/shared/mail/messenger.css</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/themes/shared/mail/messenger.css</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -101,8 +101,51 @@ notification[type=&quot;warning&quot;] {</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5"> .abMenuItem[AddrBook=&quot;true&quot;][IsRemote=&quot;true&quot;] {</span>
<a href="#l15.6"></a><span id="l15.6">   list-style-image: url(&quot;chrome://messenger/skin/addressbook/icons/remote-addrbook.png&quot;);</span>
<a href="#l15.7"></a><span id="l15.7"> }</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9"> .abMenuItem[AddrBook=&quot;true&quot;][IsRemote=&quot;true&quot;][IsSecure=&quot;true&quot;] {</span>
<a href="#l15.10"></a><span id="l15.10">   list-style-image: url(&quot;chrome://messenger/skin/addressbook/icons/secure-remote-addrbook.png&quot;);</span>
<a href="#l15.11"></a><span id="l15.11"> }</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+/* ::::: Panel toolbarbuttons ::::: */</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+.panelTitle {</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+  margin-top: 8px;</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+  margin-inline-start: 7px;</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineplus">+  margin-bottom: 6px;</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineplus">+}</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineplus">+</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineplus">+.panelButton {</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineplus">+  min-height: 24px;</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineplus">+  padding: 4px 6px;</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineplus">+  background-color: transparent;</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+  -moz-context-properties: fill, fill-opacity;</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineplus">+  fill: currentColor;</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineplus">+  fill-opacity: var(--toolbarbutton-icon-fill-opacity);</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineplus">+}</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineplus">+</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineplus">+.panelButton:focus {</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+  outline: 0;</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineplus">+}</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+.panelButton:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+  background-color: var(--arrowpanel-dimmed);</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineplus">+}</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineplus">+</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineplus">+.panelButton:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineplus">+  background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineplus">+  box-shadow: 0 1px 0 hsla(210, 4%, 10%, .03) inset;</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineplus">+}</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineplus">+</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineplus">+.panelButton &gt; .toolbarbutton-text {</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineplus">+  text-align: start;</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineplus">+  padding-inline-start: 6px;</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineplus">+  padding-inline-end: 6px;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineplus">+}</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineplus">+</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineplus">+.panelButton[prettykey]::after {</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineplus">+  content: attr(prettykey);</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineplus">+  float: right;</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineplus">+  color: GrayText;</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/themes/windows/mail/compose/messengercompose.css</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/themes/windows/mail/compose/messengercompose.css</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1009,8 +1009,42 @@ treechildren::-moz-tree-image(subscribed</span>
<a href="#l16.4"></a><span id="l16.4">   #headers-box {</span>
<a href="#l16.5"></a><span id="l16.5">     border-bottom-color: #aabccf;</span>
<a href="#l16.6"></a><span id="l16.6">   }</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8">   #composeContentBox {</span>
<a href="#l16.9"></a><span id="l16.9">     background-image: url(&quot;chrome://messenger/skin/messengercompose/noise.png&quot;);</span>
<a href="#l16.10"></a><span id="l16.10">   }</span>
<a href="#l16.11"></a><span id="l16.11"> }</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+/* ::::: Reorder Attachments Panel ::::: */</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+#reorderAttachmentsPanel &gt; .panel-arrowcontainer &gt; .panel-arrowcontent {</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+  --arrowpanel-padding: 4px;</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+}</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineplus">+#btn_moveAttachmentTop {</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-top.svg&quot;);</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+}</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineplus">+#btn_moveAttachmentUp {</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-up.svg&quot;);</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineplus">+}</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+#btn_moveAttachmentDown {</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-down.svg&quot;);</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+}</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineplus">+</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineplus">+#btn_moveAttachmentBottom {</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-bottom.svg&quot;);</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+}</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineplus">+#btn_moveAttachmentBundleUp {</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/move-together.svg&quot;);</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineplus">+}</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineplus">+</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineplus">+#btn_sortAttachmentsToggle {</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/sort.svg&quot;);</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineplus">+}</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineplus">+</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineplus">+#btn_sortAttachmentsToggle[data-sortdirection=&quot;descending&quot;] &gt; .toolbarbutton-icon {</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineplus">+  transform: scaleY(-1);</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/themes/windows/mail/messenger.css</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/themes/windows/mail/messenger.css</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -31,16 +31,18 @@</span>
<a href="#l17.4"></a><span id="l17.4">   --toolbarbutton-active-background: rgba(0, 0, 0, .15);</span>
<a href="#l17.5"></a><span id="l17.5">   --toolbarbutton-active-bordercolor: rgba(0, 0, 0, .15);</span>
<a href="#l17.6"></a><span id="l17.6">   --toolbarbutton-active-boxshadow: 0 0 0 1px rgba(0, 0, 0, .15) inset;</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8">   --toolbarbutton-checkedhover-backgroundcolor: rgba(0, 0, 0, .2);</span>
<a href="#l17.9"></a><span id="l17.9">   --toolbarbutton-icon-fill-attention: #0a84ff;</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">   --lwt-header-image: none;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+  --arrowpanel-dimmed: hsla(0, 0%, 80%, .3);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  --arrowpanel-dimmed-further: hsla(0, 0%, 80%, .45);</span>
<a href="#l17.14"></a><span id="l17.14"> }</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16"> @media (-moz-windows-default-theme) {</span>
<a href="#l17.17"></a><span id="l17.17">   :root {</span>
<a href="#l17.18"></a><span id="l17.18">     --tabs-border-color: rgba(0,0,0,.3);</span>
<a href="#l17.19"></a><span id="l17.19">     --tab-line-color: #0a84ff;</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">     --toolbar-non-lwt-bgcolor: #f9f9fa;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

