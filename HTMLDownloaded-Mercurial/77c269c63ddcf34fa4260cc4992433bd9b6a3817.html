<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28876:77c269c63ddcf34fa4260cc4992433bd9b6a3817</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 77c269c63ddcf34fa4260cc4992433bd9b6a3817" />
<meta property="og:url" content="/comm-central/rev/77c269c63ddcf34fa4260cc4992433bd9b6a3817" />
<meta property="og:description" content="Bug 1617786 - Avoid using 'ltn' prefix outside calendar directory. r=darktrojan" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 77c269c63ddcf34fa4260cc4992433bd9b6a3817 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/77c269c63ddcf34fa4260cc4992433bd9b6a3817">shortlog</a> |
<a href="/comm-central/log/77c269c63ddcf34fa4260cc4992433bd9b6a3817">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/77c269c63ddcf34fa4260cc4992433bd9b6a3817">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/77c269c63ddcf34fa4260cc4992433bd9b6a3817">files</a> |
changeset |
<a href="/comm-central/raw-rev/77c269c63ddcf34fa4260cc4992433bd9b6a3817">raw</a>  | <a href="/comm-central/archive/77c269c63ddcf34fa4260cc4992433bd9b6a3817.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1617786">Bug 1617786</a> - Avoid using 'ltn' prefix outside calendar directory. r=darktrojan
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#97;&#117;&#108;&#32;&#77;&#111;&#114;&#114;&#105;&#115;&#32;&#60;&#112;&#97;&#117;&#108;&#64;&#116;&#104;&#117;&#110;&#100;&#101;&#114;&#98;&#105;&#114;&#100;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 28 Feb 2020 15:38:37 -0500</td></tr>

<tr>
 <td>changeset 28876</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/77c269c63ddcf34fa4260cc4992433bd9b6a3817">77c269c63ddcf34fa4260cc4992433bd9b6a3817</a></td>
</tr>



<tr>
<td>parent 28875</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e0e05018f705af08c3b98472483c02c69d25d9ec">e0e05018f705af08c3b98472483c02c69d25d9ec</a>
</td>
</tr>

<tr>
<td>child 28877</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/46b1f5963bc766e3ce036c5a17374fa94039db25">46b1f5963bc766e3ce036c5a17374fa94039db25</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=77c269c63ddcf34fa4260cc4992433bd9b6a3817">17088</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Mon, 02 Mar 2020 22:09:17 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@46b1f5963bc7 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=46b1f5963bc766e3ce036c5a17374fa94039db25">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=46b1f5963bc766e3ce036c5a17374fa94039db25&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=46b1f5963bc766e3ce036c5a17374fa94039db25&newProject=comm-central&newRevision=77c269c63ddcf34fa4260cc4992433bd9b6a3817&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=46b1f5963bc766e3ce036c5a17374fa94039db25&newProject=comm-central&newRevision=77c269c63ddcf34fa4260cc4992433bd9b6a3817&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=46b1f5963bc766e3ce036c5a17374fa94039db25&newProject=comm-central&newRevision=77c269c63ddcf34fa4260cc4992433bd9b6a3817&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28darktrojan%29&revcount=50">darktrojan</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1617786">1617786</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1617786">Bug 1617786</a> - Avoid using 'ltn' prefix outside calendar directory. r=darktrojan

Eventually it would be good to convert all uses of 'ltn' prefix
but at least we can avoid it outside of the calendar directory
to make it easier to identify calendar UI elements by giving
them a consistent id prefix, namely &quot;calendar-&quot;.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/lightning-item-panel.js">calendar/lightning/content/lightning-item-panel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/lightning-item-panel.js">file</a> |
<a href="/comm-central/annotate/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/lightning-item-panel.js">annotate</a> |
<a href="/comm-central/diff/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/lightning-item-panel.js">diff</a> |
<a href="/comm-central/comparison/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/lightning-item-panel.js">comparison</a> |
<a href="/comm-central/log/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/lightning-item-panel.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/77c269c63ddcf34fa4260cc4992433bd9b6a3817/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/77c269c63ddcf34fa4260cc4992433bd9b6a3817/mail/base/content/mainNavigationToolbox.inc.xhtml">mail/base/content/mainNavigationToolbox.inc.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/77c269c63ddcf34fa4260cc4992433bd9b6a3817/mail/base/content/mainNavigationToolbox.inc.xhtml">file</a> |
<a href="/comm-central/annotate/77c269c63ddcf34fa4260cc4992433bd9b6a3817/mail/base/content/mainNavigationToolbox.inc.xhtml">annotate</a> |
<a href="/comm-central/diff/77c269c63ddcf34fa4260cc4992433bd9b6a3817/mail/base/content/mainNavigationToolbox.inc.xhtml">diff</a> |
<a href="/comm-central/comparison/77c269c63ddcf34fa4260cc4992433bd9b6a3817/mail/base/content/mainNavigationToolbox.inc.xhtml">comparison</a> |
<a href="/comm-central/log/77c269c63ddcf34fa4260cc4992433bd9b6a3817/mail/base/content/mainNavigationToolbox.inc.xhtml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1093,20 +1093,21 @@ function attachFileByAccountKey(aAccount</span>
<a href="#l1.4"></a><span id="l1.4"> function updateSaveControls(aSendNotSave) {</span>
<a href="#l1.5"></a><span id="l1.5">   if (window.calItemSaveControls &amp;&amp; window.calItemSaveControls.state == aSendNotSave) {</span>
<a href="#l1.6"></a><span id="l1.6">     return;</span>
<a href="#l1.7"></a><span id="l1.7">   }</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">   let saveBtn = document.getElementById(&quot;button-save&quot;);</span>
<a href="#l1.10"></a><span id="l1.10">   let saveandcloseBtn = document.getElementById(&quot;button-saveandclose&quot;);</span>
<a href="#l1.11"></a><span id="l1.11">   let saveMenu =</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    document.getElementById(&quot;item-save-menuitem&quot;) || document.getElementById(&quot;ltnSave&quot;);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    document.getElementById(&quot;item-save-menuitem&quot;) ||</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    document.getElementById(&quot;calendar-save-menuitem&quot;);</span>
<a href="#l1.15"></a><span id="l1.15">   let saveandcloseMenu =</span>
<a href="#l1.16"></a><span id="l1.16">     document.getElementById(&quot;item-saveandclose-menuitem&quot;) ||</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-    document.getElementById(&quot;ltnSaveAndClose&quot;);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+    document.getElementById(&quot;calendar-save-and-close-menuitem&quot;);</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">   // we store the initial label and tooltip values to be able to reset later</span>
<a href="#l1.21"></a><span id="l1.21">   if (!window.calItemSaveControls) {</span>
<a href="#l1.22"></a><span id="l1.22">     window.calItemSaveControls = {</span>
<a href="#l1.23"></a><span id="l1.23">       state: false,</span>
<a href="#l1.24"></a><span id="l1.24">       saveMenu: { label: saveMenu.label },</span>
<a href="#l1.25"></a><span id="l1.25">       saveandcloseMenu: { label: saveandcloseMenu.label },</span>
<a href="#l1.26"></a><span id="l1.26">       saveBtn: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -40,18 +40,18 @@ var calendarTabMonitor = {</span>
<a href="#l2.4"></a><span id="l2.4">     }</span>
<a href="#l2.5"></a><span id="l2.5">     // we reset the save menu controls when moving away (includes closing)</span>
<a href="#l2.6"></a><span id="l2.6">     // from an event or task editor tab</span>
<a href="#l2.7"></a><span id="l2.7">     if (aNewTab.mode.name == &quot;calendarEvent&quot; || aNewTab.mode.name == &quot;calendarTask&quot;) {</span>
<a href="#l2.8"></a><span id="l2.8">       sendMessage({ command: &quot;triggerUpdateSaveControls&quot; });</span>
<a href="#l2.9"></a><span id="l2.9">     } else if (window.calItemSaveControls) {</span>
<a href="#l2.10"></a><span id="l2.10">       // we need to reset the labels of the menu controls for saving if we</span>
<a href="#l2.11"></a><span id="l2.11">       // are not switching to an item tab and displayed an item tab before</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-      let saveMenu = document.getElementById(&quot;ltnSave&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-      let saveandcloseMenu = document.getElementById(&quot;ltnSaveAndClose&quot;);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+      let saveMenu = document.getElementById(&quot;calendar-save-menuitem&quot;);</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+      let saveandcloseMenu = document.getElementById(&quot;calendar-save-and-close-menuitem&quot;);</span>
<a href="#l2.16"></a><span id="l2.16">       saveMenu.label = window.calItemSaveControls.saveMenu.label;</span>
<a href="#l2.17"></a><span id="l2.17">       saveandcloseMenu.label = window.calItemSaveControls.saveandcloseMenu.label;</span>
<a href="#l2.18"></a><span id="l2.18">     }</span>
<a href="#l2.19"></a><span id="l2.19"> </span>
<a href="#l2.20"></a><span id="l2.20">     // Change the mode (gCurrentMode) to match the new tab.</span>
<a href="#l2.21"></a><span id="l2.21">     switch (aNewTab.mode.name) {</span>
<a href="#l2.22"></a><span id="l2.22">       case &quot;calendar&quot;:</span>
<a href="#l2.23"></a><span id="l2.23">         calSwitchToCalendarMode();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/mainNavigationToolbox.inc.xhtml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/mainNavigationToolbox.inc.xhtml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -111,35 +111,35 @@</span>
<a href="#l3.4"></a><span id="l3.4">                 label=&quot;&amp;openMenuCmd.label;&quot;</span>
<a href="#l3.5"></a><span id="l3.5">                 accesskey=&quot;&amp;openMenuCmd.accesskey;&quot;&gt;</span>
<a href="#l3.6"></a><span id="l3.6">             &lt;menupopup id=&quot;menu_OpenPopup&quot;&gt;</span>
<a href="#l3.7"></a><span id="l3.7">               &lt;menuitem id=&quot;openMessageFileMenuitem&quot;</span>
<a href="#l3.8"></a><span id="l3.8">                         label=&quot;&amp;openMessageFileCmd.label;&quot;</span>
<a href="#l3.9"></a><span id="l3.9">                         class=&quot;menuitem-iconic&quot;</span>
<a href="#l3.10"></a><span id="l3.10">                         accesskey=&quot;&amp;openMessageFileCmd.accesskey;&quot;</span>
<a href="#l3.11"></a><span id="l3.11">                         oncommand=&quot;MsgOpenFromFile();&quot;/&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-              &lt;menuitem id=&quot;ltnOpenCalendarFileMenuitem&quot;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+              &lt;menuitem id=&quot;calendar-open-calendar-file-menuitem&quot;</span>
<a href="#l3.14"></a><span id="l3.14">                         label=&quot;&amp;lightning.menupopup.open.calendar.label;&quot;</span>
<a href="#l3.15"></a><span id="l3.15">                         accesskey=&quot;&amp;lightning.menupopup.open.calendar.accesskey;&quot;</span>
<a href="#l3.16"></a><span id="l3.16">                         oncommand=&quot;openLocalCalendar();&quot;/&gt;</span>
<a href="#l3.17"></a><span id="l3.17">             &lt;/menupopup&gt;</span>
<a href="#l3.18"></a><span id="l3.18">           &lt;/menu&gt;</span>
<a href="#l3.19"></a><span id="l3.19">           &lt;menuitem id=&quot;menu_close&quot;</span>
<a href="#l3.20"></a><span id="l3.20">                     label=&quot;&amp;closeCmd.label;&quot;</span>
<a href="#l3.21"></a><span id="l3.21">                     key=&quot;key_close&quot;</span>
<a href="#l3.22"></a><span id="l3.22">                     accesskey=&quot;&amp;closeCmd.accesskey;&quot;</span>
<a href="#l3.23"></a><span id="l3.23">                     command=&quot;cmd_close&quot;</span>
<a href="#l3.24"></a><span id="l3.24">                     class=&quot;menuitem-iconic&quot;/&gt;</span>
<a href="#l3.25"></a><span id="l3.25">           &lt;menuseparator id=&quot;fileMenuAfterCloseSeparator&quot;/&gt;</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-          &lt;menuitem id=&quot;ltnSave&quot;</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+          &lt;menuitem id=&quot;calendar-save-menuitem&quot;</span>
<a href="#l3.28"></a><span id="l3.28">                     label=&quot;&amp;event.menu.item.save.label;&quot;</span>
<a href="#l3.29"></a><span id="l3.29">                     accesskey=&quot;&amp;event.menu.item.save.tab.accesskey;&quot;</span>
<a href="#l3.30"></a><span id="l3.30">                     key=&quot;save-key&quot;</span>
<a href="#l3.31"></a><span id="l3.31">                     command=&quot;cmd_save&quot;/&gt;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-          &lt;menuitem id=&quot;ltnSaveAndClose&quot;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+          &lt;menuitem id=&quot;calendar-save-and-close-menuitem&quot;</span>
<a href="#l3.34"></a><span id="l3.34">                     label=&quot;&amp;event.menu.item.saveandclose.label;&quot;</span>
<a href="#l3.35"></a><span id="l3.35">                     accesskey=&quot;&amp;event.menu.item.saveandclose.tab.accesskey;&quot;</span>
<a href="#l3.36"></a><span id="l3.36">                     command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l3.37"></a><span id="l3.37">           &lt;menu id=&quot;menu_saveAs&quot; class=&quot;menu-iconic menuitem-iconic&quot;</span>
<a href="#l3.38"></a><span id="l3.38">                 label=&quot;&amp;saveAsMenu.label;&quot; accesskey=&quot;&amp;saveAsMenu.accesskey;&quot;&gt;</span>
<a href="#l3.39"></a><span id="l3.39">             &lt;menupopup id=&quot;menu_SavePopup&quot;&gt;</span>
<a href="#l3.40"></a><span id="l3.40">               &lt;menuitem id=&quot;menu_saveAsFile&quot; label=&quot;&amp;saveAsFileCmd.label;&quot;</span>
<a href="#l3.41"></a><span id="l3.41">                accesskey=&quot;&amp;saveAsFileCmd.accesskey;&quot;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

