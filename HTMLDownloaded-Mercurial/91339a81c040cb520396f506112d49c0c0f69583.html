<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27444:91339a81c040cb520396f506112d49c0c0f69583</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 91339a81c040cb520396f506112d49c0c0f69583" />
<meta property="og:url" content="/comm-central/rev/91339a81c040cb520396f506112d49c0c0f69583" />
<meta property="og:description" content="Bug 1577606 - Fix 'no-useless-concat' eslint errors. r=darktrojan" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 91339a81c040cb520396f506112d49c0c0f69583 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/91339a81c040cb520396f506112d49c0c0f69583">shortlog</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/91339a81c040cb520396f506112d49c0c0f69583">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583">files</a> |
changeset |
<a href="/comm-central/raw-rev/91339a81c040cb520396f506112d49c0c0f69583">raw</a>  | <a href="/comm-central/archive/91339a81c040cb520396f506112d49c0c0f69583.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1577606">Bug 1577606</a> - Fix 'no-useless-concat' eslint errors. r=darktrojan
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#97;&#117;&#108;&#32;&#77;&#111;&#114;&#114;&#105;&#115;&#32;&#60;&#112;&#97;&#117;&#108;&#64;&#116;&#104;&#117;&#110;&#100;&#101;&#114;&#98;&#105;&#114;&#100;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 29 Aug 2019 16:13:25 -0400</td></tr>

<tr>
 <td>changeset 27444</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/91339a81c040cb520396f506112d49c0c0f69583">91339a81c040cb520396f506112d49c0c0f69583</a></td>
</tr>



<tr>
<td>parent 27443</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/22388fb0b676c69a08a098471c7532d45d73afa7">22388fb0b676c69a08a098471c7532d45d73afa7</a>
</td>
</tr>

<tr>
<td>child 27445</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ba6c06d9ea3aa653a33b104e2b84dd8afac23106">ba6c06d9ea3aa653a33b104e2b84dd8afac23106</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=91339a81c040cb520396f506112d49c0c0f69583">16347</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Sun, 01 Sep 2019 16:57:59 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@8e5b49be96e3 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8e5b49be96e386fd28cea47291bf932f8ce4e8af">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8e5b49be96e386fd28cea47291bf932f8ce4e8af&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8e5b49be96e386fd28cea47291bf932f8ce4e8af&newProject=comm-central&newRevision=1660b26d3a84984864673c22938bba2ab56cd8d8&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8e5b49be96e386fd28cea47291bf932f8ce4e8af&newProject=comm-central&newRevision=1660b26d3a84984864673c22938bba2ab56cd8d8&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8e5b49be96e386fd28cea47291bf932f8ce4e8af&newProject=comm-central&newRevision=1660b26d3a84984864673c22938bba2ab56cd8d8&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28darktrojan%29&revcount=50">darktrojan</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1577606">1577606</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1577606">Bug 1577606</a> - Fix 'no-useless-concat' eslint errors. r=darktrojan</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/backend/icaljs/calICSService.js">calendar/base/backend/icaljs/calICSService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/backend/icaljs/calICSService.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/backend/icaljs/calICSService.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/backend/icaljs/calICSService.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/backend/icaljs/calICSService.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/backend/icaljs/calICSService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/itip/calItipEmailTransport.js">calendar/itip/calItipEmailTransport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/itip/calItipEmailTransport.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/itip/calItipEmailTransport.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/itip/calItipEmailTransport.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/itip/calItipEmailTransport.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/itip/calItipEmailTransport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataRequest.jsm">calendar/providers/gdata/modules/gdataRequest.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataRequest.jsm">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataRequest.jsm">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataRequest.jsm">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataRequest.jsm">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataRequest.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataSession.jsm">calendar/providers/gdata/modules/gdataSession.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataSession.jsm">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataSession.jsm">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataSession.jsm">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataSession.jsm">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/gdata/modules/gdataSession.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageUpgrade.jsm">calendar/providers/storage/calStorageUpgrade.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageUpgrade.jsm">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageUpgrade.jsm">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageUpgrade.jsm">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageUpgrade.jsm">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/storage/calStorageUpgrade.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/wcap/calWcapCalendarItems.js">calendar/providers/wcap/calWcapCalendarItems.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/wcap/calWcapCalendarItems.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/wcap/calWcapCalendarItems.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/wcap/calWcapCalendarItems.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/wcap/calWcapCalendarItems.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/providers/wcap/calWcapCalendarItems.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_attachment.js">calendar/test/unit/test_attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_attachment.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_attachment.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_attachment.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_attachment.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_attachment.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_ics_service.js">calendar/test/unit/test_ics_service.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_ics_service.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_ics_service.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_ics_service.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_ics_service.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_ics_service.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_providers.js">calendar/test/unit/test_providers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_providers.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_providers.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_providers.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_providers.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_providers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_recur.js">calendar/test/unit/test_recur.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_recur.js">file</a> |
<a href="/comm-central/annotate/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_recur.js">annotate</a> |
<a href="/comm-central/diff/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_recur.js">diff</a> |
<a href="/comm-central/comparison/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_recur.js">comparison</a> |
<a href="/comm-central/log/91339a81c040cb520396f506112d49c0c0f69583/calendar/test/unit/test_recur.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calICSService.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calICSService.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -186,17 +186,17 @@ calIcalProperty.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">       }</span>
<a href="#l1.5"></a><span id="l1.5">     } else {</span>
<a href="#l1.6"></a><span id="l1.6">       this.innerObject.removeParameter(name.toLowerCase());</span>
<a href="#l1.7"></a><span id="l1.7">     }</span>
<a href="#l1.8"></a><span id="l1.8">   },</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10">   clearXParameters: function() {</span>
<a href="#l1.11"></a><span id="l1.11">     cal.WARN(</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-      &quot;calIICSService::clearXParameters is no longer implemented, &quot; + &quot;please use removeParameter&quot;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      &quot;calIICSService::clearXParameters is no longer implemented, please use removeParameter&quot;</span>
<a href="#l1.14"></a><span id="l1.14">     );</span>
<a href="#l1.15"></a><span id="l1.15">   },</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17">   paramIterator: null,</span>
<a href="#l1.18"></a><span id="l1.18">   getFirstParameterName: function() {</span>
<a href="#l1.19"></a><span id="l1.19">     let innerObject = this.innerObject;</span>
<a href="#l1.20"></a><span id="l1.20">     this.paramIterator = (function*() {</span>
<a href="#l1.21"></a><span id="l1.21">       let defaultType = innerObject.getDefaultType();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -333,17 +333,17 @@ function guessSystemTimezone() {</span>
<a href="#l2.4"></a><span id="l2.4">   const offsetRegex = /[+-]\d{4}/;</span>
<a href="#l2.5"></a><span id="l2.5">   const offsetJun = dateJun.match(offsetRegex)[0];</span>
<a href="#l2.6"></a><span id="l2.6">   const offsetDec = dateDec.match(offsetRegex)[0];</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">   const tzSvc = cal.getTimezoneService();</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10">   let continent = &quot;Africa|America|Antarctica|Asia|Australia|Europe&quot;;</span>
<a href="#l2.11"></a><span id="l2.11">   let ocean = &quot;Arctic|Atlantic|Indian|Pacific&quot;;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  let tzRegex = new RegExp(&quot;.*((?:&quot; + continent + &quot;|&quot; + ocean + &quot;)&quot; + &quot;(?:[/][-A-Z_a-z]+)+)&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  let tzRegex = new RegExp(&quot;.*((?:&quot; + continent + &quot;|&quot; + ocean + &quot;)(?:[/][-A-Z_a-z]+)+)&quot;);</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15">   function getIcalString(component, property) {</span>
<a href="#l2.16"></a><span id="l2.16">     let prop = component &amp;&amp; component.getFirstProperty(property);</span>
<a href="#l2.17"></a><span id="l2.17">     return prop ? prop.valueAsIcalString : null;</span>
<a href="#l2.18"></a><span id="l2.18">   }</span>
<a href="#l2.19"></a><span id="l2.19"> </span>
<a href="#l2.20"></a><span id="l2.20">   // Check if Olson ZoneInfo timezone matches OS/JSDate timezone properties:</span>
<a href="#l2.21"></a><span id="l2.21">   // * standard offset and daylight/summer offset if present (longitude),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/itip/calItipEmailTransport.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/itip/calItipEmailTransport.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -309,17 +309,17 @@ calItipEmailTransport.prototype = {</span>
<a href="#l3.4"></a><span id="l3.4">       case Ci.calIItipItem.NONE: {</span>
<a href="#l3.5"></a><span id="l3.5">         // we shouldn't get here, as we stopped processing in this case</span>
<a href="#l3.6"></a><span id="l3.6">         // earlier in checkAndSend in calItipUtils.jsm</span>
<a href="#l3.7"></a><span id="l3.7">         cal.LOG(&quot;sendXpcomMail: Found NONE autoResponse type.&quot;);</span>
<a href="#l3.8"></a><span id="l3.8">         break;</span>
<a href="#l3.9"></a><span id="l3.9">       }</span>
<a href="#l3.10"></a><span id="l3.10">       default: {</span>
<a href="#l3.11"></a><span id="l3.11">         // Also of this case should have been taken care at the same place</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        throw new Error(&quot;sendXpcomMail: &quot; + &quot;Unknown autoResponse type: &quot; + aItipItem.autoResponse);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+        throw new Error(&quot;sendXpcomMail: Unknown autoResponse type: &quot; + aItipItem.autoResponse);</span>
<a href="#l3.14"></a><span id="l3.14">       }</span>
<a href="#l3.15"></a><span id="l3.15">     }</span>
<a href="#l3.16"></a><span id="l3.16">     return false;</span>
<a href="#l3.17"></a><span id="l3.17">   },</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">   _createTempImipFile: function(aToList, aSubject, aBody, aItipItem, aIdentity, aMessageId) {</span>
<a href="#l3.20"></a><span id="l3.20">     try {</span>
<a href="#l3.21"></a><span id="l3.21">       let itemList = aItipItem.getItemList({});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -499,17 +499,17 @@ function onAccept() {</span>
<a href="#l4.4"></a><span id="l4.4">  *</span>
<a href="#l4.5"></a><span id="l4.5">  * @return    Returns true if the window should be closed.</span>
<a href="#l4.6"></a><span id="l4.6">  */</span>
<a href="#l4.7"></a><span id="l4.7"> function onCommandCancel() {</span>
<a href="#l4.8"></a><span id="l4.8">   if (gNewItemUI) {</span>
<a href="#l4.9"></a><span id="l4.9">     // saving is not supported yet for gNewItemUI, return true to</span>
<a href="#l4.10"></a><span id="l4.10">     // allow the tab to close</span>
<a href="#l4.11"></a><span id="l4.11">     console.log(</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-      &quot;Saving changes is not yet supported with the HTML &quot; + &quot;UI for editing events and tasks.&quot;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+      &quot;Saving changes is not yet supported with the HTML UI for editing events and tasks.&quot;</span>
<a href="#l4.14"></a><span id="l4.14">     );</span>
<a href="#l4.15"></a><span id="l4.15">     return true;</span>
<a href="#l4.16"></a><span id="l4.16">   }</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18">   // Allow closing if the item has not changed and no warning dialog has to be showed.</span>
<a href="#l4.19"></a><span id="l4.19">   if (!isItemChanged() &amp;&amp; !gWarning) {</span>
<a href="#l4.20"></a><span id="l4.20">     return true;</span>
<a href="#l4.21"></a><span id="l4.21">   }</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -2324,17 +2324,17 @@ function uploadCloudAttachment(attachmen</span>
<a href="#l4.23"></a><span id="l4.23">       listItem.setAttribute(&quot;label&quot;, file.leafName);</span>
<a href="#l4.24"></a><span id="l4.24">       gAttachMap[attachment.hashId] = attachment;</span>
<a href="#l4.25"></a><span id="l4.25">       listItem.setAttribute(&quot;image&quot;, cloudFileAccount.iconURL);</span>
<a href="#l4.26"></a><span id="l4.26">       listItem.attachCloudFileUpload = upload;</span>
<a href="#l4.27"></a><span id="l4.27">       updateAttachment();</span>
<a href="#l4.28"></a><span id="l4.28">     },</span>
<a href="#l4.29"></a><span id="l4.29">     statusCode =&gt; {</span>
<a href="#l4.30"></a><span id="l4.30">       cal.ERROR(</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-        &quot;[calendar-event-dialog] Uploading cloud attachment &quot; + &quot;failed. Status code: &quot; + statusCode</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+        &quot;[calendar-event-dialog] Uploading cloud attachment failed. Status code: &quot; + statusCode</span>
<a href="#l4.33"></a><span id="l4.33">       );</span>
<a href="#l4.34"></a><span id="l4.34"> </span>
<a href="#l4.35"></a><span id="l4.35">       // Uploading failed. First of all, show an error icon. Also,</span>
<a href="#l4.36"></a><span id="l4.36">       // delete it from the attach map now, this will make sure it is</span>
<a href="#l4.37"></a><span id="l4.37">       // not serialized if the user saves.</span>
<a href="#l4.38"></a><span id="l4.38">       listItem.setAttribute(&quot;image&quot;, &quot;chrome://messenger/skin/icons/error.png&quot;);</span>
<a href="#l4.39"></a><span id="l4.39">       delete gAttachMap[attachment.hashId];</span>
<a href="#l4.40"></a><span id="l4.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -937,17 +937,17 @@ calDavCalendar.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">       eventUri = this.makeUri(this.mItemInfoCache[aItem.id].locationPath, this.mInboxUrl);</span>
<a href="#l5.5"></a><span id="l5.5">     } else {</span>
<a href="#l5.6"></a><span id="l5.6">       eventUri = this.makeUri(this.mItemInfoCache[aItem.id].locationPath);</span>
<a href="#l5.7"></a><span id="l5.7">     }</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">     if (eventUri.pathQueryRef == this.calendarUri.pathQueryRef) {</span>
<a href="#l5.10"></a><span id="l5.10">       notifyListener(</span>
<a href="#l5.11"></a><span id="l5.11">         Cr.NS_ERROR_FAILURE,</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        &quot;eventUri and calendarUri paths are the same, &quot; + &quot;will not go on to delete entire calendar&quot;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        &quot;eventUri and calendarUri paths are the same, will not go on to delete entire calendar&quot;</span>
<a href="#l5.14"></a><span id="l5.14">       );</span>
<a href="#l5.15"></a><span id="l5.15">       return;</span>
<a href="#l5.16"></a><span id="l5.16">     }</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18">     let self = this;</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20">     let delListener = {</span>
<a href="#l5.21"></a><span id="l5.21">       onStreamComplete: function(aLoader, aContext, aStatus, aResultLength, aResult) {</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -1493,21 +1493,21 @@ calDavCalendar.prototype = {</span>
<a href="#l5.23"></a><span id="l5.23">         multistatus,</span>
<a href="#l5.24"></a><span id="l5.24">         &quot;/D:multistatus/D:response/D:propstat/D:prop/CS:getctag/text()&quot;</span>
<a href="#l5.25"></a><span id="l5.25">       );</span>
<a href="#l5.26"></a><span id="l5.26">       if (!ctag || ctag != self.mCtag) {</span>
<a href="#l5.27"></a><span id="l5.27">         // ctag mismatch, need to fetch calendar-data</span>
<a href="#l5.28"></a><span id="l5.28">         self.mProposedCtag = ctag;</span>
<a href="#l5.29"></a><span id="l5.29">         self.getUpdatedItems(self.calendarUri, aChangeLogListener);</span>
<a href="#l5.30"></a><span id="l5.30">         if (self.verboseLogging()) {</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-          cal.LOG(&quot;CalDAV: ctag mismatch on refresh, fetching data for &quot; + &quot;calendar &quot; + self.name);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+          cal.LOG(&quot;CalDAV: ctag mismatch on refresh, fetching data for calendar &quot; + self.name);</span>
<a href="#l5.33"></a><span id="l5.33">         }</span>
<a href="#l5.34"></a><span id="l5.34">       } else {</span>
<a href="#l5.35"></a><span id="l5.35">         if (self.verboseLogging()) {</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-          cal.LOG(&quot;CalDAV: ctag matches, no need to fetch data for &quot; + &quot;calendar &quot; + self.name);</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+          cal.LOG(&quot;CalDAV: ctag matches, no need to fetch data for calendar &quot; + self.name);</span>
<a href="#l5.38"></a><span id="l5.38">         }</span>
<a href="#l5.39"></a><span id="l5.39"> </span>
<a href="#l5.40"></a><span id="l5.40">         // Notify the listener, but don't return just yet...</span>
<a href="#l5.41"></a><span id="l5.41">         notifyListener(Cr.NS_OK);</span>
<a href="#l5.42"></a><span id="l5.42"> </span>
<a href="#l5.43"></a><span id="l5.43">         // ...we may still need to poll the inbox</span>
<a href="#l5.44"></a><span id="l5.44">         if (self.firstInRealm()) {</span>
<a href="#l5.45"></a><span id="l5.45">           self.pollInbox();</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineat">@@ -2666,24 +2666,24 @@ calDavCalendar.prototype = {</span>
<a href="#l5.47"></a><span id="l5.47">         }</span>
<a href="#l5.48"></a><span id="l5.48"> </span>
<a href="#l5.49"></a><span id="l5.49">         let status = caldavXPathFirst(</span>
<a href="#l5.50"></a><span id="l5.50">           fbResult,</span>
<a href="#l5.51"></a><span id="l5.51">           &quot;/C:schedule-response/C:response/C:request-status/text()&quot;</span>
<a href="#l5.52"></a><span id="l5.52">         );</span>
<a href="#l5.53"></a><span id="l5.53">         if (!status || status.substr(0, 1) != &quot;2&quot;) {</span>
<a href="#l5.54"></a><span id="l5.54">           cal.LOG(</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineminus">-            &quot;CalDAV: Got status &quot; + status + &quot; in response to &quot; + &quot;freebusy query for &quot; + self.name</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+            &quot;CalDAV: Got status &quot; + status + &quot; in response to freebusy query for &quot; + self.name</span>
<a href="#l5.57"></a><span id="l5.57">           );</span>
<a href="#l5.58"></a><span id="l5.58">           aListener.onResult(null, null);</span>
<a href="#l5.59"></a><span id="l5.59">           return;</span>
<a href="#l5.60"></a><span id="l5.60">         }</span>
<a href="#l5.61"></a><span id="l5.61">         if (status.substr(0, 3) != &quot;2.0&quot;) {</span>
<a href="#l5.62"></a><span id="l5.62">           cal.LOG(</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineminus">-            &quot;CalDAV: Got status &quot; + status + &quot; in response to &quot; + &quot;freebusy query for&quot; + self.name</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+            &quot;CalDAV: Got status &quot; + status + &quot; in response to freebusy query for&quot; + self.name</span>
<a href="#l5.65"></a><span id="l5.65">           );</span>
<a href="#l5.66"></a><span id="l5.66">         }</span>
<a href="#l5.67"></a><span id="l5.67"> </span>
<a href="#l5.68"></a><span id="l5.68">         let caldata = caldavXPathFirst(</span>
<a href="#l5.69"></a><span id="l5.69">           fbResult,</span>
<a href="#l5.70"></a><span id="l5.70">           &quot;/C:schedule-response/C:response/C:calendar-data/text()&quot;</span>
<a href="#l5.71"></a><span id="l5.71">         );</span>
<a href="#l5.72"></a><span id="l5.72">         try {</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineat">@@ -2896,17 +2896,17 @@ calDavCalendar.prototype = {</span>
<a href="#l5.74"></a><span id="l5.74">     modListener.QueryInterface = ChromeUtils.generateQI([Ci.calIOperationListener]);</span>
<a href="#l5.75"></a><span id="l5.75">     modListener.onOperationComplete = function(</span>
<a href="#l5.76"></a><span id="l5.76">       aCalendar,</span>
<a href="#l5.77"></a><span id="l5.77">       aStatus,</span>
<a href="#l5.78"></a><span id="l5.78">       aOperationType,</span>
<a href="#l5.79"></a><span id="l5.79">       aItemId,</span>
<a href="#l5.80"></a><span id="l5.80">       aDetail</span>
<a href="#l5.81"></a><span id="l5.81">     ) {</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineminus">-      cal.LOG(&quot;CalDAV: status &quot; + aStatus + &quot; while processing iTIP REPLY &quot; + &quot; for &quot; + self.name);</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineplus">+      cal.LOG(&quot;CalDAV: status &quot; + aStatus + &quot; while processing iTIP REPLY for &quot; + self.name);</span>
<a href="#l5.84"></a><span id="l5.84">       // don't delete the REPLY item from inbox unless modifying the master</span>
<a href="#l5.85"></a><span id="l5.85">       // item was successful</span>
<a href="#l5.86"></a><span id="l5.86">       if (aStatus == 0) {</span>
<a href="#l5.87"></a><span id="l5.87">         // aStatus undocumented; 0 seems to indicate no error</span>
<a href="#l5.88"></a><span id="l5.88">         let delUri = self.calendarUri</span>
<a href="#l5.89"></a><span id="l5.89">           .mutate()</span>
<a href="#l5.90"></a><span id="l5.90">           .setPathQueryRef(self.ensureEncodedPath(aPath))</span>
<a href="#l5.91"></a><span id="l5.91">           .finalize();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataRequest.jsm</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataRequest.jsm</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -369,17 +369,17 @@ calGoogleRequest.prototype = {</span>
<a href="#l6.4"></a><span id="l6.4">     let objData;</span>
<a href="#l6.5"></a><span id="l6.5">     try {</span>
<a href="#l6.6"></a><span id="l6.6">       if (result.length) {</span>
<a href="#l6.7"></a><span id="l6.7">         objData = JSON.parse(result);</span>
<a href="#l6.8"></a><span id="l6.8">       } else {</span>
<a href="#l6.9"></a><span id="l6.9">         objData = { status: &quot;No Content&quot; };</span>
<a href="#l6.10"></a><span id="l6.10">       }</span>
<a href="#l6.11"></a><span id="l6.11">     } catch (e) {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-      cal.ERROR(&quot;[calGoogleCalendar] Could not parse API response as &quot; + &quot;JSON: &quot; + result);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+      cal.ERROR(&quot;[calGoogleCalendar] Could not parse API response as JSON: &quot; + result);</span>
<a href="#l6.14"></a><span id="l6.14">       this.fail(Cr.NS_ERROR_FAILURE, result);</span>
<a href="#l6.15"></a><span id="l6.15">     }</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">     // Calculate Google Clock Skew</span>
<a href="#l6.18"></a><span id="l6.18">     let serverDate = new Date(httpChannel.getResponseHeader(&quot;Date&quot;));</span>
<a href="#l6.19"></a><span id="l6.19">     let curDate = new Date();</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">     // The utility function getCorrectedDate in calGoogleUtils.js receives</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataSession.jsm</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataSession.jsm</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -267,17 +267,17 @@ calGoogleSession.prototype = {</span>
<a href="#l7.4"></a><span id="l7.4">     let deferred = PromiseUtils.defer();</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6">     try {</span>
<a href="#l7.7"></a><span id="l7.7">       // Start logging in</span>
<a href="#l7.8"></a><span id="l7.8">       cal.LOG(&quot;[calGoogleCalendar] Logging in session &quot; + this.mId);</span>
<a href="#l7.9"></a><span id="l7.9">       let accessToken = this.accessToken;</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">       let authSuccess = function() {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-        cal.LOG(&quot;[calGoogleCalendar] Successfully acquired a new&quot; + &quot; OAuth token for &quot; + this.mId);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+        cal.LOG(&quot;[calGoogleCalendar] Successfully acquired a new OAuth token for &quot; + this.mId);</span>
<a href="#l7.14"></a><span id="l7.14">         deferred.resolve(this.accessToken);</span>
<a href="#l7.15"></a><span id="l7.15">       }.bind(this);</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17">       let authFailed = function(aData) {</span>
<a href="#l7.18"></a><span id="l7.18">         cal.LOG(</span>
<a href="#l7.19"></a><span id="l7.19">           &quot;[calGoogleCalendar] Failed to acquire a new&quot; +</span>
<a href="#l7.20"></a><span id="l7.20">             &quot; OAuth token for &quot; +</span>
<a href="#l7.21"></a><span id="l7.21">             this.mId +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -354,17 +354,17 @@ calICSCalendar.prototype = {</span>
<a href="#l8.4"></a><span id="l8.4">           }</span>
<a href="#l8.5"></a><span id="l8.5">         } catch (ex) {</span>
<a href="#l8.6"></a><span id="l8.6">           if (inLastWindowClosingSurvivalArea) {</span>
<a href="#l8.7"></a><span id="l8.7">             Services.startup.exitLastWindowClosingSurvivalArea();</span>
<a href="#l8.8"></a><span id="l8.8">           }</span>
<a href="#l8.9"></a><span id="l8.9">           self.mObserver.onError(</span>
<a href="#l8.10"></a><span id="l8.10">             self.superCalendar,</span>
<a href="#l8.11"></a><span id="l8.11">             ex.result,</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-            &quot;The calendar could not be saved; there &quot; + &quot;was a failure: 0x&quot; + ex.result.toString(16)</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+            &quot;The calendar could not be saved; there was a failure: 0x&quot; + ex.result.toString(16)</span>
<a href="#l8.14"></a><span id="l8.14">           );</span>
<a href="#l8.15"></a><span id="l8.15">           self.mObserver.onError(self.superCalendar, calIErrors.MODIFICATION_FAILED, &quot;&quot;);</span>
<a href="#l8.16"></a><span id="l8.16">           self.unlock(calIErrors.MODIFICATION_FAILED);</span>
<a href="#l8.17"></a><span id="l8.17">           self.forceRefresh();</span>
<a href="#l8.18"></a><span id="l8.18">         }</span>
<a href="#l8.19"></a><span id="l8.19">       },</span>
<a href="#l8.20"></a><span id="l8.20">       onGetResult: function(aCalendar, aStatus, aItemType, aDetail, aCount, aItems) {</span>
<a href="#l8.21"></a><span id="l8.21">         this.serializer.addItems(aItems, aCount);</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -1034,18 +1034,17 @@ httpHooks.prototype = {</span>
<a href="#l8.23"></a><span id="l8.23">         }</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25">         self.mEtag = icsXPathFirst(</span>
<a href="#l8.26"></a><span id="l8.26">           multistatus,</span>
<a href="#l8.27"></a><span id="l8.27">           &quot;/D:propfind/D:response/D:propstat/D:prop/D:getetag&quot;</span>
<a href="#l8.28"></a><span id="l8.28">         );</span>
<a href="#l8.29"></a><span id="l8.29">         aRespFunc();</span>
<a href="#l8.30"></a><span id="l8.30">       };</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-      let queryXml =</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-        '&lt;D:propfind xmlns:D=&quot;DAV:&quot;&gt;' + &quot;&lt;D:prop&gt;&quot; + &quot;&lt;D:getetag/&gt;&quot; + &quot;&lt;/D:prop&gt;&quot; + &quot;&lt;/D:propfind&gt;&quot;;</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+      let queryXml = '&lt;D:propfind xmlns:D=&quot;DAV:&quot;&gt;&lt;D:prop&gt;&lt;D:getetag/&gt;&lt;/D:prop&gt;&lt;/D:propfind&gt;';</span>
<a href="#l8.34"></a><span id="l8.34"> </span>
<a href="#l8.35"></a><span id="l8.35">       let etagChannel = cal.provider.prepHttpChannel(</span>
<a href="#l8.36"></a><span id="l8.36">         aChannel.URI,</span>
<a href="#l8.37"></a><span id="l8.37">         queryXml,</span>
<a href="#l8.38"></a><span id="l8.38">         &quot;text/xml; charset=utf-8&quot;,</span>
<a href="#l8.39"></a><span id="l8.39">         this</span>
<a href="#l8.40"></a><span id="l8.40">       );</span>
<a href="#l8.41"></a><span id="l8.41">       etagChannel.setRequestHeader(&quot;Depth&quot;, &quot;0&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1161,17 +1161,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l9.4"></a><span id="l9.4">       this.mSelectPropertiesForItemWithRecurrenceId = this.mDB.createStatement(</span>
<a href="#l9.5"></a><span id="l9.5">         &quot;SELECT * FROM cal_properties &quot; +</span>
<a href="#l9.6"></a><span id="l9.6">           &quot;WHERE item_id = :item_id AND cal_id = :cal_id&quot; +</span>
<a href="#l9.7"></a><span id="l9.7">           &quot;  AND recurrence_id = :recurrence_id&quot; +</span>
<a href="#l9.8"></a><span id="l9.8">           &quot;  AND recurrence_id_tz = :recurrence_id_tz&quot;</span>
<a href="#l9.9"></a><span id="l9.9">       );</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">       this.mSelectRecurrenceForItem = this.mDB.createStatement(</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        &quot;SELECT * FROM cal_recurrence &quot; + &quot;WHERE item_id = :item_id AND cal_id = :cal_id&quot;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+        &quot;SELECT * FROM cal_recurrence WHERE item_id = :item_id AND cal_id = :cal_id&quot;</span>
<a href="#l9.14"></a><span id="l9.14">       );</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16">       this.mSelectAttachmentsForItem = this.mDB.createStatement(</span>
<a href="#l9.17"></a><span id="l9.17">         &quot;SELECT * FROM cal_attachments &quot; +</span>
<a href="#l9.18"></a><span id="l9.18">           &quot;WHERE item_id = :item_id AND cal_id = :cal_id&quot; +</span>
<a href="#l9.19"></a><span id="l9.19">           &quot; AND recurrence_id IS NULL&quot;</span>
<a href="#l9.20"></a><span id="l9.20">       );</span>
<a href="#l9.21"></a><span id="l9.21">       this.mSelectAttachmentsForItemWithRecurrenceId = this.mDB.createStatement(</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -1189,21 +1189,21 @@ calStorageCalendar.prototype = {</span>
<a href="#l9.23"></a><span id="l9.23">       this.mSelectRelationsForItemWithRecurrenceId = this.mDB.createStatement(</span>
<a href="#l9.24"></a><span id="l9.24">         &quot;SELECT * FROM cal_relations&quot; +</span>
<a href="#l9.25"></a><span id="l9.25">           &quot; WHERE item_id = :item_id AND cal_id = :cal_id&quot; +</span>
<a href="#l9.26"></a><span id="l9.26">           &quot; AND recurrence_id = :recurrence_id&quot; +</span>
<a href="#l9.27"></a><span id="l9.27">           &quot; AND recurrence_id_tz = :recurrence_id_tz&quot;</span>
<a href="#l9.28"></a><span id="l9.28">       );</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30">       this.mSelectMetaData = this.mDB.createStatement(</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-        &quot;SELECT * FROM cal_metadata&quot; + &quot; WHERE item_id = :item_id AND cal_id = :cal_id&quot;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+        &quot;SELECT * FROM cal_metadata WHERE item_id = :item_id AND cal_id = :cal_id&quot;</span>
<a href="#l9.33"></a><span id="l9.33">       );</span>
<a href="#l9.34"></a><span id="l9.34"> </span>
<a href="#l9.35"></a><span id="l9.35">       this.mSelectAllMetaData = this.mDB.createStatement(</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">-        &quot;SELECT * FROM cal_metadata&quot; + &quot; WHERE cal_id = :cal_id&quot;</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+        &quot;SELECT * FROM cal_metadata WHERE cal_id = :cal_id&quot;</span>
<a href="#l9.38"></a><span id="l9.38">       );</span>
<a href="#l9.39"></a><span id="l9.39"> </span>
<a href="#l9.40"></a><span id="l9.40">       this.mSelectAlarmsForItem = this.mDB.createStatement(</span>
<a href="#l9.41"></a><span id="l9.41">         &quot;SELECT icalString FROM cal_alarms&quot; +</span>
<a href="#l9.42"></a><span id="l9.42">           &quot; WHERE item_id = :item_id AND cal_id = :cal_id&quot; +</span>
<a href="#l9.43"></a><span id="l9.43">           &quot; AND recurrence_id IS NULL&quot;</span>
<a href="#l9.44"></a><span id="l9.44">       );</span>
<a href="#l9.45"></a><span id="l9.45"> </span>
<a href="#l9.46"></a><span id="l9.46" class="difflineat">@@ -1354,17 +1354,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l9.47"></a><span id="l9.47">       this.mDeleteAllEvents = this.mDB.createStatement(</span>
<a href="#l9.48"></a><span id="l9.48">         &quot;DELETE from cal_events WHERE cal_id = :cal_id&quot;</span>
<a href="#l9.49"></a><span id="l9.49">       );</span>
<a href="#l9.50"></a><span id="l9.50">       this.mDeleteAllTodos = this.mDB.createStatement(</span>
<a href="#l9.51"></a><span id="l9.51">         &quot;DELETE from cal_todos WHERE cal_id = :cal_id&quot;</span>
<a href="#l9.52"></a><span id="l9.52">       );</span>
<a href="#l9.53"></a><span id="l9.53"> </span>
<a href="#l9.54"></a><span id="l9.54">       this.mDeleteAllMetaData = this.mDB.createStatement(</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-        &quot;DELETE FROM cal_metadata&quot; + &quot; WHERE cal_id = :cal_id&quot;</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+        &quot;DELETE FROM cal_metadata WHERE cal_id = :cal_id&quot;</span>
<a href="#l9.57"></a><span id="l9.57">       );</span>
<a href="#l9.58"></a><span id="l9.58">     } catch (e) {</span>
<a href="#l9.59"></a><span id="l9.59">       this.logError(&quot;Error initializing statements.&quot;, e);</span>
<a href="#l9.60"></a><span id="l9.60">     }</span>
<a href="#l9.61"></a><span id="l9.61">   },</span>
<a href="#l9.62"></a><span id="l9.62"> </span>
<a href="#l9.63"></a><span id="l9.63">   shutdownDB: function() {</span>
<a href="#l9.64"></a><span id="l9.64">     try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -160,17 +160,17 @@ function getSqlTable(schemaVersion) {</span>
<a href="#l10.4"></a><span id="l10.4">  */</span>
<a href="#l10.5"></a><span id="l10.5"> function getVersion(db) {</span>
<a href="#l10.6"></a><span id="l10.6">   let selectSchemaVersion;</span>
<a href="#l10.7"></a><span id="l10.7">   let version = null;</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">   try {</span>
<a href="#l10.10"></a><span id="l10.10">     selectSchemaVersion = createStatement(</span>
<a href="#l10.11"></a><span id="l10.11">       db,</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      &quot;SELECT version FROM &quot; + &quot;cal_calendar_schema_version LIMIT 1&quot;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+      &quot;SELECT version FROM cal_calendar_schema_version LIMIT 1&quot;</span>
<a href="#l10.14"></a><span id="l10.14">     );</span>
<a href="#l10.15"></a><span id="l10.15">     if (selectSchemaVersion.executeStep()) {</span>
<a href="#l10.16"></a><span id="l10.16">       version = selectSchemaVersion.row.version;</span>
<a href="#l10.17"></a><span id="l10.17">     }</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">     if (version !== null) {</span>
<a href="#l10.20"></a><span id="l10.20">       // This is the only place to leave this function gracefully.</span>
<a href="#l10.21"></a><span id="l10.21">       return version;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -873,17 +873,17 @@ upgrade.v2 = upgrade.v1 = function(db, v</span>
<a href="#l10.23"></a><span id="l10.23">  * fix, r=shaver, p=vlad</span>
<a href="#l10.24"></a><span id="l10.24">  * p=vlad</span>
<a href="#l10.25"></a><span id="l10.25">  */</span>
<a href="#l10.26"></a><span id="l10.26"> // eslint-disable-next-line id-length</span>
<a href="#l10.27"></a><span id="l10.27"> upgrade.v3 = function(db, version) {</span>
<a href="#l10.28"></a><span id="l10.28">   function updateSql(tbl, field) {</span>
<a href="#l10.29"></a><span id="l10.29">     executeSimpleSQL(</span>
<a href="#l10.30"></a><span id="l10.30">       db,</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-      &quot;UPDATE &quot; + tbl + &quot; SET &quot; + field + &quot;_tz='UTC'&quot; + &quot; WHERE &quot; + field + &quot; IS NOT NULL&quot;</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+      &quot;UPDATE &quot; + tbl + &quot; SET &quot; + field + &quot;_tz='UTC' WHERE &quot; + field + &quot; IS NOT NULL&quot;</span>
<a href="#l10.33"></a><span id="l10.33">     );</span>
<a href="#l10.34"></a><span id="l10.34">   }</span>
<a href="#l10.35"></a><span id="l10.35"> </span>
<a href="#l10.36"></a><span id="l10.36">   let tbl = upgrade.v2(version &lt; 2 &amp;&amp; db, version);</span>
<a href="#l10.37"></a><span id="l10.37">   LOGdb(db, &quot;Storage: Upgrading to v3&quot;);</span>
<a href="#l10.38"></a><span id="l10.38"> </span>
<a href="#l10.39"></a><span id="l10.39">   beginTransaction(db);</span>
<a href="#l10.40"></a><span id="l10.40">   try {</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -1216,17 +1216,17 @@ upgrade.v13 = function(db, version) {</span>
<a href="#l10.42"></a><span id="l10.42">             calIds[itemId] +</span>
<a href="#l10.43"></a><span id="l10.43">             &quot; WHERE item_id = '&quot; +</span>
<a href="#l10.44"></a><span id="l10.44">             itemId +</span>
<a href="#l10.45"></a><span id="l10.45">             &quot;'&quot;</span>
<a href="#l10.46"></a><span id="l10.46">         );</span>
<a href="#l10.47"></a><span id="l10.47">       }</span>
<a href="#l10.48"></a><span id="l10.48">     }</span>
<a href="#l10.49"></a><span id="l10.49"> </span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-    executeSimpleSQL(db, &quot;DROP INDEX IF EXISTS&quot; + &quot; idx_cal_properies_item_id&quot;);</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+    executeSimpleSQL(db, &quot;DROP INDEX IF EXISTS idx_cal_properies_item_id&quot;);</span>
<a href="#l10.52"></a><span id="l10.52">     executeSimpleSQL(</span>
<a href="#l10.53"></a><span id="l10.53">       db,</span>
<a href="#l10.54"></a><span id="l10.54">       &quot;CREATE INDEX IF NOT EXISTS&quot; +</span>
<a href="#l10.55"></a><span id="l10.55">         &quot; idx_cal_properies_item_id&quot; +</span>
<a href="#l10.56"></a><span id="l10.56">         &quot; ON cal_properties(cal_id, item_id);&quot;</span>
<a href="#l10.57"></a><span id="l10.57">     );</span>
<a href="#l10.58"></a><span id="l10.58">     setDbVersionAndCommit(db, 13);</span>
<a href="#l10.59"></a><span id="l10.59">   } catch (e) {</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineat">@@ -1346,18 +1346,17 @@ upgrade.v16 = function(db, version) {</span>
<a href="#l10.61"></a><span id="l10.61">         recurrence_id: &quot;INTEGER&quot;,</span>
<a href="#l10.62"></a><span id="l10.62">         recurrence_id_tz: &quot;TEXT&quot;,</span>
<a href="#l10.63"></a><span id="l10.63">         icalString: &quot;TEXT&quot;,</span>
<a href="#l10.64"></a><span id="l10.64">       },</span>
<a href="#l10.65"></a><span id="l10.65">       db</span>
<a href="#l10.66"></a><span id="l10.66">     );</span>
<a href="#l10.67"></a><span id="l10.67"> </span>
<a href="#l10.68"></a><span id="l10.68">     let copyDataOver = function(tblName) {</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">-      const transAlarm =</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineminus">-        &quot;translateAlarm(alarm_offset, &quot; + &quot;alarm_related, &quot; + &quot;alarm_time, &quot; + &quot;alarm_time_tz)&quot;;</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+      const transAlarm = &quot;translateAlarm(alarm_offset, alarm_related, alarm_time, alarm_time_tz)&quot;;</span>
<a href="#l10.72"></a><span id="l10.72">       executeSimpleSQL(</span>
<a href="#l10.73"></a><span id="l10.73">         db,</span>
<a href="#l10.74"></a><span id="l10.74">         &quot;INSERT INTO cal_alarms (cal_id, item_id,&quot; +</span>
<a href="#l10.75"></a><span id="l10.75">           &quot;                        recurrence_id, &quot; +</span>
<a href="#l10.76"></a><span id="l10.76">           &quot;                        recurrence_id_tz, &quot; +</span>
<a href="#l10.77"></a><span id="l10.77">           &quot;                        icalString)&quot; +</span>
<a href="#l10.78"></a><span id="l10.78">           &quot; SELECT cal_id, id, recurrence_id,&quot; +</span>
<a href="#l10.79"></a><span id="l10.79">           &quot;        recurrence_id_tz, &quot; +</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineat">@@ -1428,17 +1427,17 @@ upgrade.v17 = function(db, version) {</span>
<a href="#l10.81"></a><span id="l10.81">       let stmt;</span>
<a href="#l10.82"></a><span id="l10.82">       try {</span>
<a href="#l10.83"></a><span id="l10.83">         // Stepping this statement will fail if the columns don't exist.</span>
<a href="#l10.84"></a><span id="l10.84">         // We don't use the delegate here since it would show an error to</span>
<a href="#l10.85"></a><span id="l10.85">         // the user, even through we expect the error. If the db is null,</span>
<a href="#l10.86"></a><span id="l10.86">         // then swallowing the error is ok too since the cols will</span>
<a href="#l10.87"></a><span id="l10.87">         // already be added in v16.</span>
<a href="#l10.88"></a><span id="l10.88">         stmt = db.createStatement(</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineminus">-          &quot;SELECT recurrence_id_tz,&quot; + &quot;       recurrence_id&quot; + &quot;  FROM cal_&quot; + tblName + &quot; LIMIT 1&quot;</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineplus">+          &quot;SELECT recurrence_id_tz, recurrence_id FROM cal_&quot; + tblName + &quot; LIMIT 1&quot;</span>
<a href="#l10.91"></a><span id="l10.91">         );</span>
<a href="#l10.92"></a><span id="l10.92">         stmt.executeStep();</span>
<a href="#l10.93"></a><span id="l10.93">       } catch (e) {</span>
<a href="#l10.94"></a><span id="l10.94">         // An error happened, which means the cols don't exist</span>
<a href="#l10.95"></a><span id="l10.95">         hasColumns = false;</span>
<a href="#l10.96"></a><span id="l10.96">       } finally {</span>
<a href="#l10.97"></a><span id="l10.97">         if (stmt) {</span>
<a href="#l10.98"></a><span id="l10.98">           stmt.finalize();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1502,17 +1502,17 @@ calWcapCalendar.prototype.replayChangesO</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5">     // assure being logged in to calc server times:</span>
<a href="#l11.6"></a><span id="l11.6">     this.session.getSessionId(request, (err, sessionId) =&gt; {</span>
<a href="#l11.7"></a><span id="l11.7">       try {</span>
<a href="#l11.8"></a><span id="l11.8">         if (err) {</span>
<a href="#l11.9"></a><span id="l11.9">           throw err;</span>
<a href="#l11.10"></a><span id="l11.10">         }</span>
<a href="#l11.11"></a><span id="l11.11">         let params =</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-          &quot;&amp;relativealarm=1&amp;compressed=1&amp;recurring=1&quot; + &quot;&amp;emailorcalid=1&amp;fmt-out=text%2Fcalendar&quot;;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+          &quot;&amp;relativealarm=1&amp;compressed=1&amp;recurring=1&amp;emailorcalid=1&amp;fmt-out=text%2Fcalendar&quot;;</span>
<a href="#l11.14"></a><span id="l11.14">         if (dtFrom) {</span>
<a href="#l11.15"></a><span id="l11.15">           dtFrom = this.session.getServerTime(dtFrom);</span>
<a href="#l11.16"></a><span id="l11.16">         }</span>
<a href="#l11.17"></a><span id="l11.17">         params += &quot;&amp;dtstart=&quot; + getIcalUTC(dtFrom);</span>
<a href="#l11.18"></a><span id="l11.18">         params += &quot;&amp;dtend=&quot; + getIcalUTC(this.session.getServerTime(now));</span>
<a href="#l11.19"></a><span id="l11.19"> </span>
<a href="#l11.20"></a><span id="l11.20">         log(&quot;replayChangesOn(): getting last modifications...&quot;, this);</span>
<a href="#l11.21"></a><span id="l11.21">         this.issueNetworkRequest(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/test/unit/test_attachment.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/test/unit/test_attachment.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -32,16 +32,17 @@ function test_hashes() {</span>
<a href="#l12.4"></a><span id="l12.4">   equal(attach.getParameter(&quot;VALUE&quot;), null);</span>
<a href="#l12.5"></a><span id="l12.5"> }</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> function test_uriattach() {</span>
<a href="#l12.8"></a><span id="l12.8">   let attach = cal.createAttachment();</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10">   // Attempt to set a property and check its values</span>
<a href="#l12.11"></a><span id="l12.11">   let e = cal.createEvent();</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+  // eslint-disable-next-line no-useless-concat</span>
<a href="#l12.13"></a><span id="l12.13">   e.icalString = &quot;BEGIN:VEVENT\r\n&quot; + &quot;ATTACH;FMTTYPE=x-moz/test:http://hello\r\n&quot; + &quot;END:VEVENT&quot;;</span>
<a href="#l12.14"></a><span id="l12.14">   let prop = e.icalComponent.getFirstProperty(&quot;ATTACH&quot;);</span>
<a href="#l12.15"></a><span id="l12.15">   attach.icalProperty = prop;</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17">   notEqual(attach.getParameter(&quot;VALUE&quot;), &quot;BINARY&quot;);</span>
<a href="#l12.18"></a><span id="l12.18">   equal(attach.formatType, &quot;x-moz/test&quot;);</span>
<a href="#l12.19"></a><span id="l12.19">   equal(attach.getParameter(&quot;FMTTYPE&quot;), &quot;x-moz/test&quot;);</span>
<a href="#l12.20"></a><span id="l12.20">   equal(attach.uri.spec, Services.io.newURI(&quot;http://hello&quot;).spec);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/test/unit/test_ics_service.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/test/unit/test_ics_service.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -259,16 +259,17 @@ function test_iterator() {</span>
<a href="#l13.4"></a><span id="l13.4">   }</span>
<a href="#l13.5"></a><span id="l13.5">   propNames = [&quot;X-ONE&quot;, &quot;X-TWO&quot;];</span>
<a href="#l13.6"></a><span id="l13.6">   for (let prop = comp.getNextProperty(&quot;ANY&quot;); prop; prop = comp.getNextProperty(&quot;ANY&quot;)) {</span>
<a href="#l13.7"></a><span id="l13.7">     equal(prop.propertyName, propNames.shift());</span>
<a href="#l13.8"></a><span id="l13.8">     equal(prop.parent.toString(), comp.toString());</span>
<a href="#l13.9"></a><span id="l13.9">   }</span>
<a href="#l13.10"></a><span id="l13.10"> </span>
<a href="#l13.11"></a><span id="l13.11">   // Property iterator with multiple values</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+  // eslint-disable-next-line no-useless-concat</span>
<a href="#l13.13"></a><span id="l13.13">   comp = svc.parseICS(&quot;BEGIN:VEVENT\r\n&quot; + &quot;CATEGORIES:a,b,c\r\n&quot; + &quot;END:VEVENT&quot;, null);</span>
<a href="#l13.14"></a><span id="l13.14">   let propValues = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];</span>
<a href="#l13.15"></a><span id="l13.15">   for (</span>
<a href="#l13.16"></a><span id="l13.16">     let prop = comp.getFirstProperty(&quot;CATEGORIES&quot;);</span>
<a href="#l13.17"></a><span id="l13.17">     prop;</span>
<a href="#l13.18"></a><span id="l13.18">     prop = comp.getNextProperty(&quot;CATEGORIES&quot;)</span>
<a href="#l13.19"></a><span id="l13.19">   ) {</span>
<a href="#l13.20"></a><span id="l13.20">     equal(prop.propertyName, &quot;CATEGORIES&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/test/unit/test_providers.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/test/unit/test_providers.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,12 +1,14 @@</span>
<a href="#l14.4"></a><span id="l14.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.5"></a><span id="l14.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.6"></a><span id="l14.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+/* eslint no-useless-concat: &quot;off&quot; */</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+</span>
<a href="#l14.10"></a><span id="l14.10"> var icalStringArray = [</span>
<a href="#l14.11"></a><span id="l14.11">   // Comments refer to the range defined in testGetItems().</span>
<a href="#l14.12"></a><span id="l14.12">   // 1: one-hour event</span>
<a href="#l14.13"></a><span id="l14.13">   &quot;BEGIN:VEVENT\n&quot; + &quot;DTSTART:20020402T114500Z\n&quot; + &quot;DTEND:20020402T124500Z\n&quot; + &quot;END:VEVENT\n&quot;,</span>
<a href="#l14.14"></a><span id="l14.14">   // 2: Test a zero-length event with DTSTART and DTEND</span>
<a href="#l14.15"></a><span id="l14.15">   &quot;BEGIN:VEVENT\n&quot; + &quot;DTSTART:20020402T000000Z\n&quot; + &quot;DTEND:20020402T000000Z\n&quot; + &quot;END:VEVENT\n&quot;,</span>
<a href="#l14.16"></a><span id="l14.16">   // 3: Test a zero-length event with DTSTART and no DTEND</span>
<a href="#l14.17"></a><span id="l14.17">   &quot;BEGIN:VEVENT\n&quot; + &quot;DTSTART:20020402T000000Z\n&quot; + &quot;END:VEVENT\n&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/test/unit/test_recur.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/test/unit/test_recur.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -873,16 +873,17 @@ function test_interface() {</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5">   // isFinite = true</span>
<a href="#l15.6"></a><span id="l15.6">   ok(rinfo.isFinite);</span>
<a href="#l15.7"></a><span id="l15.7">   rinfo.appendRecurrenceItem(ritems[0]);</span>
<a href="#l15.8"></a><span id="l15.8">   ok(rinfo.isFinite);</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">   // isFinite = false</span>
<a href="#l15.11"></a><span id="l15.11">   let item2 = makeEvent(</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+    // eslint-disable-next-line no-useless-concat</span>
<a href="#l15.13"></a><span id="l15.13">     &quot;DTSTART:20020402T114500Z\n&quot; + &quot;DTEND:20020402T124500Z\n&quot; + &quot;RRULE:FREQ=WEEKLY;BYDAY=TU,WE\n&quot;</span>
<a href="#l15.14"></a><span id="l15.14">   );</span>
<a href="#l15.15"></a><span id="l15.15">   ok(!item2.recurrenceInfo.isFinite);</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17">   // removeOccurrenceAt/restoreOccurreceAt</span>
<a href="#l15.18"></a><span id="l15.18">   let occDate1 = cal.createDateTime(&quot;20020403T114500Z&quot;);</span>
<a href="#l15.19"></a><span id="l15.19">   let occDate2 = cal.createDateTime(&quot;20020404T114500Z&quot;);</span>
<a href="#l15.20"></a><span id="l15.20">   rinfo.removeOccurrenceAt(occDate1);</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineat">@@ -970,20 +971,22 @@ function test_rrule_interface() {</span>
<a href="#l15.22"></a><span id="l15.22">   rrule.untilDate = untilDate;</span>
<a href="#l15.23"></a><span id="l15.23">   ok(!rrule.isByCount);</span>
<a href="#l15.24"></a><span id="l15.24">   throws(() =&gt; rrule.count, /0x80004005/);</span>
<a href="#l15.25"></a><span id="l15.25">   equal(rrule.untilDate.icalString, untilDate.icalString);</span>
<a href="#l15.26"></a><span id="l15.26"> }</span>
<a href="#l15.27"></a><span id="l15.27"> </span>
<a href="#l15.28"></a><span id="l15.28"> function test_startdate_change() {</span>
<a href="#l15.29"></a><span id="l15.29">   // Setting a start date if its missing shouldn't throw</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineplus">+  // eslint-disable-next-line no-useless-concat</span>
<a href="#l15.31"></a><span id="l15.31">   let item = makeEvent(&quot;DTEND:20020402T124500Z\r\n&quot; + &quot;RRULE:FREQ=DAILY\r\n&quot;);</span>
<a href="#l15.32"></a><span id="l15.32">   item.startDate = cal.createDateTime(&quot;20020502T114500Z&quot;);</span>
<a href="#l15.33"></a><span id="l15.33"> </span>
<a href="#l15.34"></a><span id="l15.34">   function makeRecEvent(str) {</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+    // eslint-disable-next-line no-useless-concat</span>
<a href="#l15.36"></a><span id="l15.36">     return makeEvent(&quot;DTSTART:20020402T114500Z\r\n&quot; + &quot;DTEND:20020402T134500Z\r\n&quot; + str);</span>
<a href="#l15.37"></a><span id="l15.37">   }</span>
<a href="#l15.38"></a><span id="l15.38"> </span>
<a href="#l15.39"></a><span id="l15.39">   function changeBy(changeItem, dur) {</span>
<a href="#l15.40"></a><span id="l15.40">     let newDate = changeItem.startDate.clone();</span>
<a href="#l15.41"></a><span id="l15.41">     newDate.addDuration(cal.createDuration(dur));</span>
<a href="#l15.42"></a><span id="l15.42">     changeItem.startDate = newDate;</span>
<a href="#l15.43"></a><span id="l15.43">   }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

