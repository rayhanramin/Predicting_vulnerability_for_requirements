<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20062:c4a3561ecc3f9a5e8db41c904c144d71362007fa</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c4a3561ecc3f9a5e8db41c904c144d71362007fa" />
<meta property="og:url" content="/comm-central/rev/c4a3561ecc3f9a5e8db41c904c144d71362007fa" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - enable space-before-blocks rule. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c4a3561ecc3f9a5e8db41c904c144d71362007fa 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c4a3561ecc3f9a5e8db41c904c144d71362007fa">shortlog</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c4a3561ecc3f9a5e8db41c904c144d71362007fa">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa">files</a> |
changeset |
<a href="/comm-central/raw-rev/c4a3561ecc3f9a5e8db41c904c144d71362007fa">raw</a>  | <a href="/comm-central/archive/c4a3561ecc3f9a5e8db41c904c144d71362007fa.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable space-before-blocks rule. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 14:02:30 +0200</td></tr>

<tr>
 <td>changeset 20062</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c4a3561ecc3f9a5e8db41c904c144d71362007fa">c4a3561ecc3f9a5e8db41c904c144d71362007fa</a></td>
</tr>



<tr>
<td>parent 20061</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/622481dcc6bb520691e757d77c03602016198553">622481dcc6bb520691e757d77c03602016198553</a>
</td>
</tr>

<tr>
<td>child 20063</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7ed5fb322056a2fde371c4f1fd3b0d81b168f02e">7ed5fb322056a2fde371c4f1fd3b0d81b168f02e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c4a3561ecc3f9a5e8db41c904c144d71362007fa">12301</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Fri, 16 Sep 2016 20:42:08 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@c4a3561ecc3f [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c4a3561ecc3f9a5e8db41c904c144d71362007fa">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c4a3561ecc3f9a5e8db41c904c144d71362007fa&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c4a3561ecc3f9a5e8db41c904c144d71362007fa&newProject=comm-central&newRevision=096b191f8462122f21500bd9343d7a66aabe5ab7&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c4a3561ecc3f9a5e8db41c904c144d71362007fa&newProject=comm-central&newRevision=096b191f8462122f21500bd9343d7a66aabe5ab7&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c4a3561ecc3f9a5e8db41c904c144d71362007fa&newProject=comm-central&newRevision=096b191f8462122f21500bd9343d7a66aabe5ab7&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable space-before-blocks rule. r=MakeMyDay

MozReview-Commit-ID: CQCesKXdgR9</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/agenda-listbox.js">calendar/base/content/agenda-listbox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/agenda-listbox.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/agenda-listbox.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/agenda-listbox.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/agenda-listbox.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/agenda-listbox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-management.js">calendar/base/content/calendar-management.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-management.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-management.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-management.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-management.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-management.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-month-view.xml">calendar/base/content/calendar-month-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-month-view.xml">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-month-view.xml">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-month-view.xml">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-month-view.xml">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-month-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-statusbar.js">calendar/base/content/calendar-statusbar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-statusbar.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-statusbar.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-statusbar.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-statusbar.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-statusbar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-editing.js">calendar/base/content/calendar-task-editing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-editing.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-editing.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-editing.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-editing.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-editing.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/calendar-widgets.xml">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/calendar-widgets.xml">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/minimonth.xml">calendar/base/content/widgets/minimonth.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/minimonth.xml">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/minimonth.xml">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/minimonth.xml">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/minimonth.xml">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/content/widgets/minimonth.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/modules/calUtils.jsm">calendar/base/modules/calUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/modules/calUtils.jsm">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/modules/calUtils.jsm">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/modules/calUtils.jsm">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/modules/calUtils.jsm">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/modules/calUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calCachedCalendar.js">calendar/base/src/calCachedCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calCachedCalendar.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calCachedCalendar.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calCachedCalendar.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calCachedCalendar.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calCachedCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/composite/calCompositeCalendar.js">calendar/providers/composite/calCompositeCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/composite/calCompositeCalendar.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/composite/calCompositeCalendar.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/composite/calCompositeCalendar.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/composite/calCompositeCalendar.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/providers/composite/calCompositeCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/resources/content/datetimepickers/datetimepickers.xml">calendar/resources/content/datetimepickers/datetimepickers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/resources/content/datetimepickers/datetimepickers.xml">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/resources/content/datetimepickers/datetimepickers.xml">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/resources/content/datetimepickers/datetimepickers.xml">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/resources/content/datetimepickers/datetimepickers.xml">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/resources/content/datetimepickers/datetimepickers.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/eventDialog/testEventDialog.js">calendar/test/mozmill/eventDialog/testEventDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/eventDialog/testEventDialog.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/eventDialog/testEventDialog.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/eventDialog/testEventDialog.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/eventDialog/testEventDialog.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/eventDialog/testEventDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">calendar/test/mozmill/recurrence/testAnnualRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testDailyRecurrence.js">calendar/test/mozmill/recurrence/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testDailyRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testDailyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/shared-modules/calendar-utils.js">calendar/test/mozmill/shared-modules/calendar-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/shared-modules/calendar-utils.js">file</a> |
<a href="/comm-central/annotate/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/shared-modules/calendar-utils.js">annotate</a> |
<a href="/comm-central/diff/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/shared-modules/calendar-utils.js">diff</a> |
<a href="/comm-central/comparison/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/shared-modules/calendar-utils.js">comparison</a> |
<a href="/comm-central/log/c4a3561ecc3f9a5e8db41c904c144d71362007fa/calendar/test/mozmill/shared-modules/calendar-utils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -345,19 +345,21 @@</span>
<a href="#l1.4"></a><span id="l1.4">     &quot;no-caller&quot;: 2,</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     // Disallow Case Statement Fallthrough</span>
<a href="#l1.7"></a><span id="l1.7">     &quot;no-fallthrough&quot;: 2,</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     // Disallow Floating Decimals</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;no-floating-decimal&quot;: 2,</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Require Space Before Blocks</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    &quot;space-before-blocks&quot;: 2,</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+</span>
<a href="#l1.15"></a><span id="l1.15">     // Will enable these rules later</span>
<a href="#l1.16"></a><span id="l1.16">     &quot;block-spacing&quot;: 0,</span>
<a href="#l1.17"></a><span id="l1.17">     &quot;no-lonely-if&quot;: 0,</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-    &quot;space-before-blocks&quot;: 0,</span>
<a href="#l1.19"></a><span id="l1.19">     &quot;computed-property-spacing&quot;: 0,</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21">     // The following rules will not be enabled currently, but are kept here for</span>
<a href="#l1.22"></a><span id="l1.22">     // easier updates in the future.</span>
<a href="#l1.23"></a><span id="l1.23">     &quot;no-else-return&quot;: 0,</span>
<a href="#l1.24"></a><span id="l1.24">   }</span>
<a href="#l1.25"></a><span id="l1.25"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/agenda-listbox.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/agenda-listbox.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -240,32 +240,32 @@ function findPeriodsForItem(aItem) {</span>
<a href="#l2.4"></a><span id="l2.4">     }</span>
<a href="#l2.5"></a><span id="l2.5">     return retPeriods;</span>
<a href="#l2.6"></a><span id="l2.6"> };</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> /**</span>
<a href="#l2.9"></a><span id="l2.9">  * Gets the start of the earliest period shown in the agenda listbox</span>
<a href="#l2.10"></a><span id="l2.10">  */</span>
<a href="#l2.11"></a><span id="l2.11"> agendaListbox.getStart =</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-function getStart(){</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+function getStart() {</span>
<a href="#l2.14"></a><span id="l2.14">     let retStart = null;</span>
<a href="#l2.15"></a><span id="l2.15">     for (let i = 0; i &lt; this.periods.length; i++) {</span>
<a href="#l2.16"></a><span id="l2.16">         if (this.periods[i].open) {</span>
<a href="#l2.17"></a><span id="l2.17">             retStart = this.periods[i].start;</span>
<a href="#l2.18"></a><span id="l2.18">             break;</span>
<a href="#l2.19"></a><span id="l2.19">         }</span>
<a href="#l2.20"></a><span id="l2.20">     }</span>
<a href="#l2.21"></a><span id="l2.21">     return retStart;</span>
<a href="#l2.22"></a><span id="l2.22"> };</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24"> /**</span>
<a href="#l2.25"></a><span id="l2.25">  * Gets the end of the latest period shown in the agenda listbox</span>
<a href="#l2.26"></a><span id="l2.26">  */</span>
<a href="#l2.27"></a><span id="l2.27"> agendaListbox.getEnd =</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-function getEnd(){</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+function getEnd() {</span>
<a href="#l2.30"></a><span id="l2.30">     let retEnd = null;</span>
<a href="#l2.31"></a><span id="l2.31">     for (let i = this.periods.length - 1; i &gt;= 0; i--) {</span>
<a href="#l2.32"></a><span id="l2.32">         if (this.periods[i].open) {</span>
<a href="#l2.33"></a><span id="l2.33">             retEnd = this.periods[i].end;</span>
<a href="#l2.34"></a><span id="l2.34">             break;</span>
<a href="#l2.35"></a><span id="l2.35">         }</span>
<a href="#l2.36"></a><span id="l2.36">     }</span>
<a href="#l2.37"></a><span id="l2.37">     return retEnd;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineat">@@ -466,17 +466,17 @@ function getListItems(aItem, aPeriod) {</span>
<a href="#l2.39"></a><span id="l2.39">         for (let i = 0; i &lt; periods.length; i++) {</span>
<a href="#l2.40"></a><span id="l2.40">             let period = periods[i];</span>
<a href="#l2.41"></a><span id="l2.41">             let complistItem = period.listItem;</span>
<a href="#l2.42"></a><span id="l2.42">             let leaveloop;</span>
<a href="#l2.43"></a><span id="l2.43">             do {</span>
<a href="#l2.44"></a><span id="l2.44">                 complistItem = complistItem.nextSibling;</span>
<a href="#l2.45"></a><span id="l2.45">                 leaveloop = (!this.isEventListItem(complistItem));</span>
<a href="#l2.46"></a><span id="l2.46">                 if (!leaveloop) {</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-                    if (this.isSameEvent(aItem, complistItem.occurrence)){</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+                    if (this.isSameEvent(aItem, complistItem.occurrence)) {</span>
<a href="#l2.49"></a><span id="l2.49">                         retlistItems.push(complistItem);</span>
<a href="#l2.50"></a><span id="l2.50">                         break;</span>
<a href="#l2.51"></a><span id="l2.51">                     }</span>
<a href="#l2.52"></a><span id="l2.52">                 }</span>
<a href="#l2.53"></a><span id="l2.53">             } while (!leaveloop);</span>
<a href="#l2.54"></a><span id="l2.54">         }</span>
<a href="#l2.55"></a><span id="l2.55">     }</span>
<a href="#l2.56"></a><span id="l2.56">     return retlistItems;</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineat">@@ -575,17 +575,17 @@ function deleteSelectedItem(aDoNotConfir</span>
<a href="#l2.58"></a><span id="l2.58"> /**</span>
<a href="#l2.59"></a><span id="l2.59">  * If a Period item is targeted by the passed DOM event, opens the event dialog</span>
<a href="#l2.60"></a><span id="l2.60">  * with the period's start date prefilled.</span>
<a href="#l2.61"></a><span id="l2.61">  *</span>
<a href="#l2.62"></a><span id="l2.62">  * @param aEvent            The DOM event that targets the period.</span>
<a href="#l2.63"></a><span id="l2.63">  */</span>
<a href="#l2.64"></a><span id="l2.64"> agendaListbox.createNewEvent =</span>
<a href="#l2.65"></a><span id="l2.65"> function createNewEvent(aEvent) {</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-    if (!this.isEventListItem(aEvent.target)){</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+    if (!this.isEventListItem(aEvent.target)) {</span>
<a href="#l2.68"></a><span id="l2.68">         // Create new event for the date currently displayed in the agenda. Setting</span>
<a href="#l2.69"></a><span id="l2.69">         // isDate = true automatically makes the start time be the next full hour.</span>
<a href="#l2.70"></a><span id="l2.70">         let eventStart = agendaListbox.today.start.clone();</span>
<a href="#l2.71"></a><span id="l2.71">         eventStart.isDate = true;</span>
<a href="#l2.72"></a><span id="l2.72">         if (calendarController.isCommandEnabled(&quot;calendar_new_event_command&quot;)) {</span>
<a href="#l2.73"></a><span id="l2.73">             createEventWithDialog(getSelectedCalendar(), eventStart);</span>
<a href="#l2.74"></a><span id="l2.74">         }</span>
<a href="#l2.75"></a><span id="l2.75">     }</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineat">@@ -715,17 +715,17 @@ function setupCalendar() {</span>
<a href="#l2.77"></a><span id="l2.77">     if (this.calendar == null) {</span>
<a href="#l2.78"></a><span id="l2.78">         this.calendar = getCompositeCalendar();</span>
<a href="#l2.79"></a><span id="l2.79">     }</span>
<a href="#l2.80"></a><span id="l2.80">     if (this.calendar) {</span>
<a href="#l2.81"></a><span id="l2.81">         // XXX This always gets called, does that happen on purpose?</span>
<a href="#l2.82"></a><span id="l2.82">         this.calendar.removeObserver(this.calendarObserver);</span>
<a href="#l2.83"></a><span id="l2.83">     }</span>
<a href="#l2.84"></a><span id="l2.84">     this.calendar.addObserver(this.calendarObserver);</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineminus">-    if (this.mListener){</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineplus">+    if (this.mListener) {</span>
<a href="#l2.87"></a><span id="l2.87">         this.mListener.updatePeriod();</span>
<a href="#l2.88"></a><span id="l2.88">     }</span>
<a href="#l2.89"></a><span id="l2.89"> };</span>
<a href="#l2.90"></a><span id="l2.90"> </span>
<a href="#l2.91"></a><span id="l2.91"> /**</span>
<a href="#l2.92"></a><span id="l2.92">  * Refreshes the period dates, especially when a period is showing &quot;today&quot;.</span>
<a href="#l2.93"></a><span id="l2.93">  * Usually called at midnight to update the agenda pane. Also retrieves the</span>
<a href="#l2.94"></a><span id="l2.94">  * items from the calendar.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -78,17 +78,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">                 this.calView.refresh();</span>
<a href="#l3.5"></a><span id="l3.5">             },</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">             onAddItem: function onAddItem(aItem) {</span>
<a href="#l3.8"></a><span id="l3.8">                 if (cal.isToDo(aItem)) {</span>
<a href="#l3.9"></a><span id="l3.9">                     if (!aItem.entryDate &amp;&amp; !aItem.dueDate) {</span>
<a href="#l3.10"></a><span id="l3.10">                         return;</span>
<a href="#l3.11"></a><span id="l3.11">                     }</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                    if (!this.calView.mTasksInView){</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+                    if (!this.calView.mTasksInView) {</span>
<a href="#l3.14"></a><span id="l3.14">                         return;</span>
<a href="#l3.15"></a><span id="l3.15">                     }</span>
<a href="#l3.16"></a><span id="l3.16">                     if (aItem.isCompleted &amp;&amp; !this.calView.mShowCompleted) {</span>
<a href="#l3.17"></a><span id="l3.17">                         return;</span>
<a href="#l3.18"></a><span id="l3.18">                     }</span>
<a href="#l3.19"></a><span id="l3.19">                 }</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21">                 let occs = aItem.getOccurrencesBetween(this.calView.startDate,</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -775,24 +775,24 @@</span>
<a href="#l3.23"></a><span id="l3.23">                 break;</span>
<a href="#l3.24"></a><span id="l3.24">             case kKE.DOM_VK_PAGE_DOWN:</span>
<a href="#l3.25"></a><span id="l3.25">                 this.moveView(1);</span>
<a href="#l3.26"></a><span id="l3.26">                 break;</span>
<a href="#l3.27"></a><span id="l3.27">         }</span>
<a href="#l3.28"></a><span id="l3.28">       ]]&gt;&lt;/handler&gt;</span>
<a href="#l3.29"></a><span id="l3.29">       &lt;handler event=&quot;wheel&quot;&gt;&lt;![CDATA[</span>
<a href="#l3.30"></a><span id="l3.30">         const pixelThreshold = 150;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-        if (event.shiftKey &amp;&amp; Preferences.get('calendar.view.mousescroll', true)){</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+        if (event.shiftKey &amp;&amp; Preferences.get('calendar.view.mousescroll', true)) {</span>
<a href="#l3.33"></a><span id="l3.33">             if (event.deltaMode == event.DOM_DELTA_LINE) {</span>
<a href="#l3.34"></a><span id="l3.34">                 if (event.deltaY != 0) {</span>
<a href="#l3.35"></a><span id="l3.35">                     deltaView = event.deltaY &lt; 0 ? -1 : 1;</span>
<a href="#l3.36"></a><span id="l3.36">                 }</span>
<a href="#l3.37"></a><span id="l3.37">             } else if (event.deltaMode == event.DOM_DELTA_PIXEL) {</span>
<a href="#l3.38"></a><span id="l3.38">                 this.mPixelScrollDelta += event.deltaY;</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-                if (this.mPixelScrollDelta &gt; pixelThreshold){</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+                if (this.mPixelScrollDelta &gt; pixelThreshold) {</span>
<a href="#l3.41"></a><span id="l3.41">                     deltaView = 1;</span>
<a href="#l3.42"></a><span id="l3.42">                     this.mPixelScrollDelta = 0;</span>
<a href="#l3.43"></a><span id="l3.43">                 } else if (this.mPixelScrollDelta &lt; -pixelThreshold) {</span>
<a href="#l3.44"></a><span id="l3.44">                     deltaView = -1;</span>
<a href="#l3.45"></a><span id="l3.45">                     this.mPixelScrollDelta = 0;</span>
<a href="#l3.46"></a><span id="l3.46">                 }</span>
<a href="#l3.47"></a><span id="l3.47">             }</span>
<a href="#l3.48"></a><span id="l3.48"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-management.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-management.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -167,17 +167,17 @@ function updateSortOrderPref(event) {</span>
<a href="#l4.4"></a><span id="l4.4">  * @param event     The DOM event provoked by the tooltip showing.</span>
<a href="#l4.5"></a><span id="l4.5">  */</span>
<a href="#l4.6"></a><span id="l4.6"> function calendarListTooltipShowing(event) {</span>
<a href="#l4.7"></a><span id="l4.7">     let tree = document.getElementById(&quot;calendar-list-tree-widget&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">     let calendar = tree.getCalendarFromEvent(event);</span>
<a href="#l4.9"></a><span id="l4.9">     let tooltipText = false;</span>
<a href="#l4.10"></a><span id="l4.10">     if (calendar) {</span>
<a href="#l4.11"></a><span id="l4.11">         let currentStatus = calendar.getProperty(&quot;currentStatus&quot;);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-        if (!Components.isSuccessCode(currentStatus)){</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+        if (!Components.isSuccessCode(currentStatus)) {</span>
<a href="#l4.14"></a><span id="l4.14">             tooltipText = calGetString(&quot;calendar&quot;, &quot;tooltipCalendarDisabled&quot;, [calendar.name]);</span>
<a href="#l4.15"></a><span id="l4.15">         } else if (calendar.readOnly) {</span>
<a href="#l4.16"></a><span id="l4.16">             tooltipText = calGetString(&quot;calendar&quot;, &quot;tooltipCalendarReadOnly&quot;, [calendar.name]);</span>
<a href="#l4.17"></a><span id="l4.17">         }</span>
<a href="#l4.18"></a><span id="l4.18">     }</span>
<a href="#l4.19"></a><span id="l4.19">     setElementValue(&quot;calendar-list-tooltip&quot;, tooltipText, &quot;label&quot;);</span>
<a href="#l4.20"></a><span id="l4.20">     return (tooltipText != false);</span>
<a href="#l4.21"></a><span id="l4.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-month-view.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-view.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1121,17 +1121,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">             // is pressed.</span>
<a href="#l5.5"></a><span id="l5.5">             let deltaView = 0;</span>
<a href="#l5.6"></a><span id="l5.6">             if (event.deltaMode == event.DOM_DELTA_LINE) {</span>
<a href="#l5.7"></a><span id="l5.7">                 if (event.deltaY != 0) {</span>
<a href="#l5.8"></a><span id="l5.8">                     deltaView = event.deltaY &lt; 0 ? -1 : 1;</span>
<a href="#l5.9"></a><span id="l5.9">                 }</span>
<a href="#l5.10"></a><span id="l5.10">             } else if (event.deltaMode == event.DOM_DELTA_PIXEL) {</span>
<a href="#l5.11"></a><span id="l5.11">                 this.mPixelScrollDelta += event.deltaY;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                if (this.mPixelScrollDelta &gt; pixelThreshold){</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                if (this.mPixelScrollDelta &gt; pixelThreshold) {</span>
<a href="#l5.14"></a><span id="l5.14">                     deltaView = 1;</span>
<a href="#l5.15"></a><span id="l5.15">                     this.mPixelScrollDelta = 0;</span>
<a href="#l5.16"></a><span id="l5.16">                 } else if (this.mPixelScrollDelta &lt; -pixelThreshold) {</span>
<a href="#l5.17"></a><span id="l5.17">                     deltaView = -1;</span>
<a href="#l5.18"></a><span id="l5.18">                     this.mPixelScrollDelta = 0;</span>
<a href="#l5.19"></a><span id="l5.19">                 }</span>
<a href="#l5.20"></a><span id="l5.20">             }</span>
<a href="#l5.21"></a><span id="l5.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-statusbar.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-statusbar.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -31,17 +31,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l6.4"></a><span id="l6.4">             this.mStatusText = this.mWindow.document.getElementById(&quot;statusText&quot;);</span>
<a href="#l6.5"></a><span id="l6.5">             this.mStatusBar = this.mWindow.document.getElementById(&quot;statusbar-icon&quot;);</span>
<a href="#l6.6"></a><span id="l6.6">             this.mStatusProgressPanel = this.mWindow.document.getElementById(&quot;statusbar-progresspanel&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">             this.mThrobber = this.mWindow.document.getElementById(&quot;navigator-throbber&quot;);</span>
<a href="#l6.8"></a><span id="l6.8">             this.mInitialized = true;</span>
<a href="#l6.9"></a><span id="l6.9">         }</span>
<a href="#l6.10"></a><span id="l6.10">      },</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-     showStatusString: function cStObs_showStatusString(status){</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+     showStatusString: function cStObs_showStatusString(status) {</span>
<a href="#l6.14"></a><span id="l6.14">          this.mStatusText.setAttribute(&quot;label&quot;, status);</span>
<a href="#l6.15"></a><span id="l6.15">      },</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">      get spinning() {</span>
<a href="#l6.18"></a><span id="l6.18">          return this.mProgressMode;</span>
<a href="#l6.19"></a><span id="l6.19">      },</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">      startMeteors: function cStObs_startMeteors(aProgressMode, aCalendarCount) {</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -98,14 +98,14 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l6.23"></a><span id="l6.23">                      this.mCalendars[aCalendar.id] = true;</span>
<a href="#l6.24"></a><span id="l6.24">                      this.mStatusBar.value = parseInt(this.mStatusBar.value, 10) + this.mCalendarStep;</span>
<a href="#l6.25"></a><span id="l6.25">                      this.mCurIndex++;</span>
<a href="#l6.26"></a><span id="l6.26">                      let curStatus = calGetString(&quot;calendar&quot;, &quot;gettingCalendarInfoDetail&quot;,</span>
<a href="#l6.27"></a><span id="l6.27">                                                   [this.mCurIndex, this.mCalendarCount]);</span>
<a href="#l6.28"></a><span id="l6.28">                      this.showStatusString(curStatus);</span>
<a href="#l6.29"></a><span id="l6.29">                  }</span>
<a href="#l6.30"></a><span id="l6.30">              }</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-             if (this.mThrobber){</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+             if (this.mThrobber) {</span>
<a href="#l6.33"></a><span id="l6.33">                  this.mThrobber.setAttribute(&quot;busy&quot;, true);</span>
<a href="#l6.34"></a><span id="l6.34">              }</span>
<a href="#l6.35"></a><span id="l6.35">          }</span>
<a href="#l6.36"></a><span id="l6.36">      }</span>
<a href="#l6.37"></a><span id="l6.37">  };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-task-editing.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-editing.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -98,17 +98,17 @@ var taskEdit = {</span>
<a href="#l7.4"></a><span id="l7.4">         }</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6">         let calendar = getSelectedCalendar();</span>
<a href="#l7.7"></a><span id="l7.7">         if (!calendar) {</span>
<a href="#l7.8"></a><span id="l7.8">             // this must be a first run, we don't have a calendar yet</span>
<a href="#l7.9"></a><span id="l7.9">             return;</span>
<a href="#l7.10"></a><span id="l7.10">         }</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-        if (calendar.getProperty(&quot;capabilities.tasks.supported&quot;) === false){</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+        if (calendar.getProperty(&quot;capabilities.tasks.supported&quot;) === false) {</span>
<a href="#l7.14"></a><span id="l7.14">             taskEdit.setupTaskField(edit,</span>
<a href="#l7.15"></a><span id="l7.15">                                     true,</span>
<a href="#l7.16"></a><span id="l7.16">                                     calGetString(&quot;calendar&quot;, &quot;taskEditInstructionsCapability&quot;));</span>
<a href="#l7.17"></a><span id="l7.17">         } else if (!isCalendarWritable(calendar)) {</span>
<a href="#l7.18"></a><span id="l7.18">             taskEdit.setupTaskField(edit,</span>
<a href="#l7.19"></a><span id="l7.19">                                     true,</span>
<a href="#l7.20"></a><span id="l7.20">                                     calGetString(&quot;calendar&quot;, &quot;taskEditInstructionsReadonly&quot;));</span>
<a href="#l7.21"></a><span id="l7.21">         } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -287,17 +287,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">           this.mTextFilterField = val;</span>
<a href="#l8.5"></a><span id="l8.5">           return val;</span>
<a href="#l8.6"></a><span id="l8.6">         ]]&gt;&lt;/setter&gt;</span>
<a href="#l8.7"></a><span id="l8.7">       &lt;/property&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9">       &lt;method name=&quot;duration&quot;&gt;</span>
<a href="#l8.10"></a><span id="l8.10">         &lt;parameter name=&quot;aTask&quot;/&gt;</span>
<a href="#l8.11"></a><span id="l8.11">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-          if (aTask &amp;&amp; aTask.dueDate &amp;&amp; aTask.dueDate.isValid){</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+          if (aTask &amp;&amp; aTask.dueDate &amp;&amp; aTask.dueDate.isValid) {</span>
<a href="#l8.14"></a><span id="l8.14">               let dur = aTask.dueDate.subtractDate(cal.now());</span>
<a href="#l8.15"></a><span id="l8.15">               if (!dur.isNegative) {</span>
<a href="#l8.16"></a><span id="l8.16">                   let minutes = Math.ceil(dur.inSeconds / 60);</span>
<a href="#l8.17"></a><span id="l8.17">                   if (minutes &gt;= 1440) { // 1 day or more</span>
<a href="#l8.18"></a><span id="l8.18">                       let dueIn = PluralForm.get(dur.days, calGetString(&quot;calendar&quot;, &quot;dueInDays&quot;));</span>
<a href="#l8.19"></a><span id="l8.19">                       return dueIn.replace(&quot;#1&quot;, dur.days);</span>
<a href="#l8.20"></a><span id="l8.20">                   } else if (minutes &gt;= 60) { // 1 hour or more</span>
<a href="#l8.21"></a><span id="l8.21">                       let dueIn = PluralForm.get(dur.hours, calGetString(&quot;calendar&quot;, &quot;dueInHours&quot;));</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -567,17 +567,17 @@</span>
<a href="#l8.23"></a><span id="l8.23">               } else {</span>
<a href="#l8.24"></a><span id="l8.24">                   this.sortDirection = &quot;descending&quot;;</span>
<a href="#l8.25"></a><span id="l8.25">               }</span>
<a href="#l8.26"></a><span id="l8.26">               this.selectedColumn = aCol.element;</span>
<a href="#l8.27"></a><span id="l8.27">               let selectedItems = this.binding.selectedTasks;</span>
<a href="#l8.28"></a><span id="l8.28">               this.binding.sortItems();</span>
<a href="#l8.29"></a><span id="l8.29">               if (selectedItems != undefined) {</span>
<a href="#l8.30"></a><span id="l8.30">                   this.tree.view.selection.clearSelection();</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-                  for (let item of selectedItems){</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+                  for (let item of selectedItems) {</span>
<a href="#l8.33"></a><span id="l8.33">                       let index = this.binding.mHash2Index[item.hashId];</span>
<a href="#l8.34"></a><span id="l8.34">                       this.tree.view.selection.toggleSelect(index);</span>
<a href="#l8.35"></a><span id="l8.35">                   }</span>
<a href="#l8.36"></a><span id="l8.36">               }</span>
<a href="#l8.37"></a><span id="l8.37">           },</span>
<a href="#l8.38"></a><span id="l8.38"> </span>
<a href="#l8.39"></a><span id="l8.39">           // The text for a given cell. If a column consists only of an</span>
<a href="#l8.40"></a><span id="l8.40">           // image, then the empty string is returned.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -298,17 +298,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">       &lt;field name=&quot;mControlHandler&quot;&gt;null&lt;/field&gt;;</span>
<a href="#l9.5"></a><span id="l9.5">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l9.6"></a><span id="l9.6">         if (this.hasAttribute(&quot;broadcaster&quot;)) {</span>
<a href="#l9.7"></a><span id="l9.7">             this.setAttribute(&quot;broadcaster&quot;, this.getAttribute(&quot;broadcaster&quot;));</span>
<a href="#l9.8"></a><span id="l9.8">         }</span>
<a href="#l9.9"></a><span id="l9.9">         if (this.hasAttribute(&quot;refcontrol&quot;)) {</span>
<a href="#l9.10"></a><span id="l9.10">             this.mRefControl = document.getElementById(this.getAttribute(&quot;refcontrol&quot;));</span>
<a href="#l9.11"></a><span id="l9.11">             if (this.mRefControl &amp;&amp; ((this.mRefControl.localName == &quot;treenode-checkbox&quot;) ||</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-                                  (this.mRefControl.localName == &quot;checkbox&quot;))){</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                                  (this.mRefControl.localName == &quot;checkbox&quot;))) {</span>
<a href="#l9.14"></a><span id="l9.14">                 this.mControlHandler = {</span>
<a href="#l9.15"></a><span id="l9.15">                     binding: this,</span>
<a href="#l9.16"></a><span id="l9.16">                     handleEvent: function(aEvent, aHandled) {</span>
<a href="#l9.17"></a><span id="l9.17">                         return this.binding.onCheckboxStateChange(aEvent, this.binding);</span>
<a href="#l9.18"></a><span id="l9.18">                     }</span>
<a href="#l9.19"></a><span id="l9.19">                 };</span>
<a href="#l9.20"></a><span id="l9.20">                 this.mRefControl.addEventListener(&quot;CheckboxStateChange&quot;, this.mControlHandler, true);</span>
<a href="#l9.21"></a><span id="l9.21">             }</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -389,17 +389,17 @@</span>
<a href="#l9.23"></a><span id="l9.23">             let modeIndex = -1;</span>
<a href="#l9.24"></a><span id="l9.24">             let display = aVisible;</span>
<a href="#l9.25"></a><span id="l9.25">             let collapsedInMode = false;</span>
<a href="#l9.26"></a><span id="l9.26">             if (this.hasAttribute(&quot;collapsedinmodes&quot;)) {</span>
<a href="#l9.27"></a><span id="l9.27">                 collapsedModes = this.getAttribute(&quot;collapsedinmodes&quot;).split(&quot;,&quot;);</span>
<a href="#l9.28"></a><span id="l9.28">                 modeIndex = collapsedModes.indexOf(this.currentMode);</span>
<a href="#l9.29"></a><span id="l9.29">                 collapsedInMode = (modeIndex &gt; -1);</span>
<a href="#l9.30"></a><span id="l9.30">             }</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-            if ((aVisible === true) &amp;&amp; (pushModeCollapsedAttribute == false)){</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+            if ((aVisible === true) &amp;&amp; (pushModeCollapsedAttribute == false)) {</span>
<a href="#l9.33"></a><span id="l9.33">                 display = (aVisible === true) &amp;&amp; (!collapsedInMode);</span>
<a href="#l9.34"></a><span id="l9.34">             }</span>
<a href="#l9.35"></a><span id="l9.35"> </span>
<a href="#l9.36"></a><span id="l9.36">             setBooleanAttribute(this, &quot;collapsed&quot;, (!display || !this.isVisibleInMode()));</span>
<a href="#l9.37"></a><span id="l9.37">             if (pushModeCollapsedAttribute) {</span>
<a href="#l9.38"></a><span id="l9.38">                 if (!display) {</span>
<a href="#l9.39"></a><span id="l9.39">                     if (modeIndex == -1) {</span>
<a href="#l9.40"></a><span id="l9.40">                         collapsedModes.push(this.currentMode);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -750,17 +750,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">               // 1. Compute the minLength of the day name abbreviations.</span>
<a href="#l10.5"></a><span id="l10.5">               let minLength = dayList[0].length;</span>
<a href="#l10.6"></a><span id="l10.6">               for (i = 1; i &lt; dayList.length; i++) {</span>
<a href="#l10.7"></a><span id="l10.7">                   minLength = Math.min(minLength, dayList[i].length);</span>
<a href="#l10.8"></a><span id="l10.8">               }</span>
<a href="#l10.9"></a><span id="l10.9">               // 2. If some day name abbrev. is longer than 2 chars (not Catalan),</span>
<a href="#l10.10"></a><span id="l10.10">               //    and ALL localized day names share same prefix (as in Chinese),</span>
<a href="#l10.11"></a><span id="l10.11">               //    then trim shared &quot;day-&quot; prefix.</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-              if (dayList.some(function(dayAbbr){ return dayAbbr.length &gt; 2; })) {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+              if (dayList.some(dayAbbr =&gt; dayAbbr.length &gt; 2)) {</span>
<a href="#l10.14"></a><span id="l10.14">                   for (let endPrefix = 0; endPrefix &lt; minLength; endPrefix++) {</span>
<a href="#l10.15"></a><span id="l10.15">                       let c = dayList[0][endPrefix];</span>
<a href="#l10.16"></a><span id="l10.16">                       if (dayList.some(dayAbbr =&gt; dayAbbr[endPrefix] != c)) {</span>
<a href="#l10.17"></a><span id="l10.17">                           if (endPrefix &gt; 0) {</span>
<a href="#l10.18"></a><span id="l10.18">                               for (i = 0; i &lt; dayList.length; i++) { // trim prefix chars.</span>
<a href="#l10.19"></a><span id="l10.19">                                   dayList[i] = dayList[i].substring(endPrefix);</span>
<a href="#l10.20"></a><span id="l10.20">                               }</span>
<a href="#l10.21"></a><span id="l10.21">                           }</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -1173,17 +1173,17 @@</span>
<a href="#l10.23"></a><span id="l10.23">                   deltaView = 1;</span>
<a href="#l10.24"></a><span id="l10.24">                   this.mPixelScrollDelta = 0;</span>
<a href="#l10.25"></a><span id="l10.25">               } else if (this.mPixelScrollDelta &lt; -pixelThreshold) {</span>
<a href="#l10.26"></a><span id="l10.26">                   deltaView = -1;</span>
<a href="#l10.27"></a><span id="l10.27">                   this.mPixelScrollDelta = 0;</span>
<a href="#l10.28"></a><span id="l10.28">               }</span>
<a href="#l10.29"></a><span id="l10.29">           }</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-          if (deltaView != 0){</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+          if (deltaView != 0) {</span>
<a href="#l10.33"></a><span id="l10.33">               this.advanceMonth(deltaView);</span>
<a href="#l10.34"></a><span id="l10.34">           }</span>
<a href="#l10.35"></a><span id="l10.35"> </span>
<a href="#l10.36"></a><span id="l10.36">           event.stopPropagation();</span>
<a href="#l10.37"></a><span id="l10.37">           event.preventDefault();</span>
<a href="#l10.38"></a><span id="l10.38">         ]]&gt;</span>
<a href="#l10.39"></a><span id="l10.39">       &lt;/handler&gt;</span>
<a href="#l10.40"></a><span id="l10.40">     &lt;/handlers&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/modules/calUtils.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/modules/calUtils.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -779,17 +779,17 @@ var cal = {</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5">     /**</span>
<a href="#l11.6"></a><span id="l11.6">      * sets the 'isDate' property of an item</span>
<a href="#l11.7"></a><span id="l11.7">      *</span>
<a href="#l11.8"></a><span id="l11.8">      * @param aItem         The Item to be modified</span>
<a href="#l11.9"></a><span id="l11.9">      * @param aIsDate       True or false indicating the new value of 'isDate'</span>
<a href="#l11.10"></a><span id="l11.10">      * @return              The modified item</span>
<a href="#l11.11"></a><span id="l11.11">      */</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    setItemToAllDay: function cal_setItemToAllDay(aItem, aIsDate){</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    setItemToAllDay: function cal_setItemToAllDay(aItem, aIsDate) {</span>
<a href="#l11.14"></a><span id="l11.14">         let start = aItem[calGetStartDateProp(aItem)];</span>
<a href="#l11.15"></a><span id="l11.15">         let end = aItem[calGetEndDateProp(aItem)];</span>
<a href="#l11.16"></a><span id="l11.16">         if (start || end) {</span>
<a href="#l11.17"></a><span id="l11.17">             let item = aItem.clone();</span>
<a href="#l11.18"></a><span id="l11.18">             if (start &amp;&amp; (start.isDate != aIsDate)) {</span>
<a href="#l11.19"></a><span id="l11.19">                start = start.clone();</span>
<a href="#l11.20"></a><span id="l11.20">                start.isDate = aIsDate;</span>
<a href="#l11.21"></a><span id="l11.21">                item[calGetStartDateProp(item)] = start;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/src/calCachedCalendar.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/src/calCachedCalendar.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -442,18 +442,18 @@ calCachedCalendar.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">                     });</span>
<a href="#l12.5"></a><span id="l12.5">                 } else {</span>
<a href="#l12.6"></a><span id="l12.6">                     this_.playbackOfflineItems(function() {this_.mCachedObserver.onLoad(this_.mCachedCalendar);});</span>
<a href="#l12.7"></a><span id="l12.7">                     emptyQueue(aStatus);</span>
<a href="#l12.8"></a><span id="l12.8">                 }</span>
<a href="#l12.9"></a><span id="l12.9">             }</span>
<a href="#l12.10"></a><span id="l12.10">         };</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        this.getOfflineAddedItems(function(){</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-            this_.mPendingSync = this_.mUncachedCalendar.getItems(Components.interfaces.calICalendar.ITEM_FILTER_ALL_ITEMS,</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+        this.getOfflineAddedItems(() =&gt; {</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+            this.mPendingSync = this.mUncachedCalendar.getItems(Components.interfaces.calICalendar.ITEM_FILTER_ALL_ITEMS,</span>
<a href="#l12.16"></a><span id="l12.16">                                                                     0, null, null, completeListener);</span>
<a href="#l12.17"></a><span id="l12.17">         });</span>
<a href="#l12.18"></a><span id="l12.18">         return this.mPendingSync;</span>
<a href="#l12.19"></a><span id="l12.19">     },</span>
<a href="#l12.20"></a><span id="l12.20"> </span>
<a href="#l12.21"></a><span id="l12.21">     onOfflineStatusChanged: function cCC_onOfflineStatusChanged(aNewState) {</span>
<a href="#l12.22"></a><span id="l12.22">         if (aNewState) {</span>
<a href="#l12.23"></a><span id="l12.23">             // Going offline: (XXX get items before going offline?) =&gt; we may ask the user to stay online a bit longer</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1414,17 +1414,17 @@ function calSetProdidVersion(aIcalCompon</span>
<a href="#l13.4"></a><span id="l13.4">  * @param aValue The value of the attribute</span>
<a href="#l13.5"></a><span id="l13.5">  */</span>
<a href="#l13.6"></a><span id="l13.6"> function applyAttributeToMenuChildren(aElement, aAttributeName, aValue) {</span>
<a href="#l13.7"></a><span id="l13.7">    let sibling = aElement.firstChild;</span>
<a href="#l13.8"></a><span id="l13.8">    do {</span>
<a href="#l13.9"></a><span id="l13.9">        if (sibling) {</span>
<a href="#l13.10"></a><span id="l13.10">            let domObject = sibling;</span>
<a href="#l13.11"></a><span id="l13.11">            let commandName = null;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-           if (sibling.hasAttribute(&quot;command&quot;)){</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+           if (sibling.hasAttribute(&quot;command&quot;)) {</span>
<a href="#l13.14"></a><span id="l13.14">                commandName = sibling.getAttribute(&quot;command&quot;);</span>
<a href="#l13.15"></a><span id="l13.15">            }</span>
<a href="#l13.16"></a><span id="l13.16">            if (commandName) {</span>
<a href="#l13.17"></a><span id="l13.17">                let command = document.getElementById(commandName);</span>
<a href="#l13.18"></a><span id="l13.18">                if (command) {</span>
<a href="#l13.19"></a><span id="l13.19">                    domObject = command;</span>
<a href="#l13.20"></a><span id="l13.20">                }</span>
<a href="#l13.21"></a><span id="l13.21">            }</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -1886,17 +1886,17 @@ function getCompositeCalendar() {</span>
<a href="#l13.23"></a><span id="l13.23">     return getCompositeCalendar.mObject;</span>
<a href="#l13.24"></a><span id="l13.24"> }</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26"> /**</span>
<a href="#l13.27"></a><span id="l13.27">  * Search for already open item dialog.</span>
<a href="#l13.28"></a><span id="l13.28">  *</span>
<a href="#l13.29"></a><span id="l13.29">  * @param aItem     The item of the dialog to search for.</span>
<a href="#l13.30"></a><span id="l13.30">  */</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-function findItemWindow(aItem){</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+function findItemWindow(aItem) {</span>
<a href="#l13.33"></a><span id="l13.33">     let list = Services.wm.getEnumerator(&quot;Calendar:EventDialog&quot;);</span>
<a href="#l13.34"></a><span id="l13.34">     while (list.hasMoreElements()) {</span>
<a href="#l13.35"></a><span id="l13.35">         let dlg = list.getNext();</span>
<a href="#l13.36"></a><span id="l13.36">         if (dlg.calendarItem &amp;&amp;</span>
<a href="#l13.37"></a><span id="l13.37">             dlg.mode == &quot;modify&quot; &amp;&amp;</span>
<a href="#l13.38"></a><span id="l13.38">             dlg.calendarItem.hashId == aItem.hashId) {</span>
<a href="#l13.39"></a><span id="l13.39">             return dlg;</span>
<a href="#l13.40"></a><span id="l13.40">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -739,17 +739,17 @@ calDavCalendar.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">     /**</span>
<a href="#l14.5"></a><span id="l14.5">      * Modifies existing item in CalDAV store.</span>
<a href="#l14.6"></a><span id="l14.6">      *</span>
<a href="#l14.7"></a><span id="l14.7">      * @param aItem       item to check</span>
<a href="#l14.8"></a><span id="l14.8">      * @param aOldItem    previous version of item to be modified</span>
<a href="#l14.9"></a><span id="l14.9">      * @param aListener   listener from original request</span>
<a href="#l14.10"></a><span id="l14.10">      * @param aIgnoreEtag ignore item etag</span>
<a href="#l14.11"></a><span id="l14.11">      */</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    doModifyItem: function caldav_doModifyItem(aNewItem, aOldItem, aListener, aIgnoreEtag){</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    doModifyItem: function caldav_doModifyItem(aNewItem, aOldItem, aListener, aIgnoreEtag) {</span>
<a href="#l14.14"></a><span id="l14.14">         let notifyListener = (status, detail, pure=false) =&gt; {</span>
<a href="#l14.15"></a><span id="l14.15">             let method = pure ? &quot;notifyPureOperationComplete&quot; : &quot;notifyOperationComplete&quot;;</span>
<a href="#l14.16"></a><span id="l14.16">             this[method](aListener, status, cIOL.MODIFY, aNewItem.id, detail);</span>
<a href="#l14.17"></a><span id="l14.17">         };</span>
<a href="#l14.18"></a><span id="l14.18">         if (aNewItem.id == null) {</span>
<a href="#l14.19"></a><span id="l14.19">             notifyListener(Components.results.NS_ERROR_FAILURE,</span>
<a href="#l14.20"></a><span id="l14.20">                            &quot;ID for modifyItem doesn't exist or is null&quot;);</span>
<a href="#l14.21"></a><span id="l14.21">             return;</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -864,17 +864,17 @@ calDavCalendar.prototype = {</span>
<a href="#l14.23"></a><span id="l14.23">      * Deletes item from CalDAV store.</span>
<a href="#l14.24"></a><span id="l14.24">      *</span>
<a href="#l14.25"></a><span id="l14.25">      * @param aItem       item to delete</span>
<a href="#l14.26"></a><span id="l14.26">      * @param aListener   listener for method completion</span>
<a href="#l14.27"></a><span id="l14.27">      * @param aIgnoreEtag ignore item etag</span>
<a href="#l14.28"></a><span id="l14.28">      * @param aFromInbox  delete from inbox rather than calendar</span>
<a href="#l14.29"></a><span id="l14.29">      * @param aUri        uri of item to delete</span>
<a href="#l14.30"></a><span id="l14.30">      * */</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-    doDeleteItem: function caldav_doDeleteItem(aItem, aListener, aIgnoreEtag, aFromInbox, aUri){</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+    doDeleteItem: function caldav_doDeleteItem(aItem, aListener, aIgnoreEtag, aFromInbox, aUri) {</span>
<a href="#l14.33"></a><span id="l14.33">         let notifyListener = (status, detail, pure=false) =&gt; {</span>
<a href="#l14.34"></a><span id="l14.34">             let method = pure ? &quot;notifyPureOperationComplete&quot; : &quot;notifyOperationComplete&quot;;</span>
<a href="#l14.35"></a><span id="l14.35">             this[method](aListener, status, cIOL.DELETE, aItem.id, detail);</span>
<a href="#l14.36"></a><span id="l14.36">         };</span>
<a href="#l14.37"></a><span id="l14.37"> </span>
<a href="#l14.38"></a><span id="l14.38">         if (aItem.id == null) {</span>
<a href="#l14.39"></a><span id="l14.39">             notifyListener(Components.results.NS_ERROR_FAILURE,</span>
<a href="#l14.40"></a><span id="l14.40">                            &quot;ID doesn't exist for deleteItem&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -413,24 +413,24 @@ calCompositeCalendar.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">     startBatch: function() {</span>
<a href="#l15.5"></a><span id="l15.5">         this.mCompositeObservers.notify(&quot;onStartBatch&quot;);</span>
<a href="#l15.6"></a><span id="l15.6">     },</span>
<a href="#l15.7"></a><span id="l15.7">     endBatch: function() {</span>
<a href="#l15.8"></a><span id="l15.8">         this.mCompositeObservers.notify(&quot;onEndBatch&quot;);</span>
<a href="#l15.9"></a><span id="l15.9">     },</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">     get statusDisplayed() {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-        if (!this.mStatusObserver){</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+        if (!this.mStatusObserver) {</span>
<a href="#l15.14"></a><span id="l15.14">             return false;</span>
<a href="#l15.15"></a><span id="l15.15">         } else {</span>
<a href="#l15.16"></a><span id="l15.16">             return this.mStatusObserver.spinning != Components.interfaces.calIStatusObserver.NO_PROGRESS;</span>
<a href="#l15.17"></a><span id="l15.17">         }</span>
<a href="#l15.18"></a><span id="l15.18">     },</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-    setStatusObserver: function(aStatusObserver, aWindow){</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineplus">+    setStatusObserver: function(aStatusObserver, aWindow) {</span>
<a href="#l15.22"></a><span id="l15.22">         this.mStatusObserver = aStatusObserver;</span>
<a href="#l15.23"></a><span id="l15.23">         if (this.mStatusObserver) {</span>
<a href="#l15.24"></a><span id="l15.24">             this.mStatusObserver.initialize(aWindow);</span>
<a href="#l15.25"></a><span id="l15.25">         }</span>
<a href="#l15.26"></a><span id="l15.26">     }</span>
<a href="#l15.27"></a><span id="l15.27"> };</span>
<a href="#l15.28"></a><span id="l15.28"> </span>
<a href="#l15.29"></a><span id="l15.29"> // composite listener helper</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1934,17 +1934,17 @@</span>
<a href="#l16.4"></a><span id="l16.4">             }</span>
<a href="#l16.5"></a><span id="l16.5">             // International formats ([roman, cyrillic]|arabic|chinese/kanji characters)</span>
<a href="#l16.6"></a><span id="l16.6">             // covering languages of U.N. (en,fr,sp,ru,ar,zh) and G8 (en,fr,de,it,ru,ja).</span>
<a href="#l16.7"></a><span id="l16.7">             // See examples at parseTimeOfDay.</span>
<a href="#l16.8"></a><span id="l16.8">             let amExpr =</span>
<a href="#l16.9"></a><span id="l16.9">               &quot;[Aa\u0410\u0430][. ]?[Mm\u041c\u043c][. ]?|\u0635|\u4e0a\u5348|\u5348\u524d&quot;;</span>
<a href="#l16.10"></a><span id="l16.10">             let pmExpr =</span>
<a href="#l16.11"></a><span id="l16.11">               &quot;[Pp\u0420\u0440][. ]?[Mm\u041c\u043c][. ]?|\u0645|\u4e0b\u5348|\u5348\u5f8c&quot;;</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-            if (this.ampmIndex){</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+            if (this.ampmIndex) {</span>
<a href="#l16.14"></a><span id="l16.14">               amExpr = amFormatExpr + &quot;|&quot; + amExpr;</span>
<a href="#l16.15"></a><span id="l16.15">               pmExpr = pmFormatExpr + &quot;|&quot; + pmExpr;</span>
<a href="#l16.16"></a><span id="l16.16">             }</span>
<a href="#l16.17"></a><span id="l16.17">             let ampmExpr = amExpr + &quot;|&quot; + pmExpr;</span>
<a href="#l16.18"></a><span id="l16.18">             // Must build am/pm formats into parse time regexp so that it can</span>
<a href="#l16.19"></a><span id="l16.19">             // match them without mistaking the initial char for an optional divider.</span>
<a href="#l16.20"></a><span id="l16.20">             // (For example, want to be able to parse both &quot;12:34pm&quot; and</span>
<a href="#l16.21"></a><span id="l16.21">             // &quot;12H34M56Spm&quot; for any characters H,M,S and any language's &quot;pm&quot;.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -162,18 +162,18 @@ var testEventDialog = function() {</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5">   controller.assertNode(new elementslib.Lookup(controller.window.document,</span>
<a href="#l17.6"></a><span id="l17.6">     eventBox.replace(&quot;rowNumber&quot;, &quot;0&quot;).replace(&quot;columnNumber&quot;, &quot;6&quot;)));</span>
<a href="#l17.7"></a><span id="l17.7">   checkIcon(eventBox, &quot;0&quot;, &quot;6&quot;);</span>
<a href="#l17.8"></a><span id="l17.8">   checkTooltip(monthView, &quot;0&quot;, &quot;6&quot;, &quot;3&quot;, startTime, endTime);</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10">   // 31st of January is Saturday so there's four more full rows to check</span>
<a href="#l17.11"></a><span id="l17.11">   let date = 4;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  for (row = 1; row &lt; 5; row++){</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-    for (col = 0; col &lt; 7; col++){</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineplus">+  for (row = 1; row &lt; 5; row++) {</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineplus">+    for (col = 0; col &lt; 7; col++) {</span>
<a href="#l17.16"></a><span id="l17.16">         controller.assertNode(new elementslib.Lookup(controller.window.document,</span>
<a href="#l17.17"></a><span id="l17.17">           eventBox.replace(&quot;rowNumber&quot;, row).replace(&quot;columnNumber&quot;, col)));</span>
<a href="#l17.18"></a><span id="l17.18">         checkIcon(eventBox, row, col);</span>
<a href="#l17.19"></a><span id="l17.19">         checkTooltip(monthView, row, col, date, startTime, endTime);</span>
<a href="#l17.20"></a><span id="l17.20">         date++;</span>
<a href="#l17.21"></a><span id="l17.21">     }</span>
<a href="#l17.22"></a><span id="l17.22">   }</span>
<a href="#l17.23"></a><span id="l17.23"> </span>
<a href="#l17.24"></a><span id="l17.24" class="difflineat">@@ -217,36 +217,36 @@ var testEventDialog = function() {</span>
<a href="#l17.25"></a><span id="l17.25">   for (row = 1; row &lt; 5; row++) {</span>
<a href="#l17.26"></a><span id="l17.26">     for (col = 0; col &lt; 7; col++) {</span>
<a href="#l17.27"></a><span id="l17.27">         controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document,</span>
<a href="#l17.28"></a><span id="l17.28">           eventBox.replace(&quot;rowNumber&quot;, row).replace(&quot;columnNumber&quot;, col)));</span>
<a href="#l17.29"></a><span id="l17.29">     }</span>
<a href="#l17.30"></a><span id="l17.30">   }</span>
<a href="#l17.31"></a><span id="l17.31"> };</span>
<a href="#l17.32"></a><span id="l17.32"> </span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-function handleAttendees(attendees){</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineplus">+function handleAttendees(attendees) {</span>
<a href="#l17.35"></a><span id="l17.35">   let input = new elementslib.Lookup(attendees.window.document,</span>
<a href="#l17.36"></a><span id="l17.36">     '/id(&quot;calendar-event-dialog-attendees-v2&quot;)/[6]/[0]/id(&quot;attendees-list&quot;)/'</span>
<a href="#l17.37"></a><span id="l17.37">     + 'anon({&quot;anonid&quot;:&quot;listbox&quot;})/[1]/[1]/anon({&quot;anonid&quot;:&quot;input&quot;})/'</span>
<a href="#l17.38"></a><span id="l17.38">     + 'anon({&quot;class&quot;:&quot;autocomplete-textbox-container&quot;})/'</span>
<a href="#l17.39"></a><span id="l17.39">     + '{&quot;class&quot;:&quot;textbox-input-box&quot;}/anon({&quot;anonid&quot;:&quot;input&quot;})');</span>
<a href="#l17.40"></a><span id="l17.40">   attendees.waitForElement(input);</span>
<a href="#l17.41"></a><span id="l17.41">   attendees.type(input, attendee);</span>
<a href="#l17.42"></a><span id="l17.42">   attendees.click(new elementslib.Lookup(attendees.window.document,</span>
<a href="#l17.43"></a><span id="l17.43">     '/id(&quot;calendar-event-dialog-attendees-v2&quot;)/anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l17.44"></a><span id="l17.44"> }</span>
<a href="#l17.45"></a><span id="l17.45"> </span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-function checkIcon(eventBox, row, col){</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineplus">+function checkIcon(eventBox, row, col) {</span>
<a href="#l17.48"></a><span id="l17.48">   let icon = new elementslib.Lookup(controller.window.document,</span>
<a href="#l17.49"></a><span id="l17.49">     (eventBox + '/anon({&quot;anonid&quot;:&quot;category-box-stack&quot;})/anon({&quot;align&quot;: &quot;right&quot;})/anon({&quot;class&quot;:&quot;alarm-icons-box&quot;})/anon({&quot;class&quot;: &quot;reminder-icon&quot;})')</span>
<a href="#l17.50"></a><span id="l17.50">     .replace(&quot;rowNumber&quot;, row).replace(&quot;columnNumber&quot;, col));</span>
<a href="#l17.51"></a><span id="l17.51">   controller.assertJS(icon.getNode().getAttribute(&quot;value&quot;) == &quot;DISPLAY&quot;);</span>
<a href="#l17.52"></a><span id="l17.52"> }</span>
<a href="#l17.53"></a><span id="l17.53"> </span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">-function checkTooltip(monthView, row, col, date, startTime, endTime){</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineplus">+function checkTooltip(monthView, row, col, date, startTime, endTime) {</span>
<a href="#l17.56"></a><span id="l17.56">   let mouseOverItem = monthView + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;monthgrid&quot;})/'</span>
<a href="#l17.57"></a><span id="l17.57">     + 'anon({&quot;anonid&quot;:&quot;monthgridrows&quot;})/[rowNumber]/[columnNumber]/'</span>
<a href="#l17.58"></a><span id="l17.58">     + '{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l17.59"></a><span id="l17.59">   controller.mouseOver(new elementslib.Lookup(controller.window.document,</span>
<a href="#l17.60"></a><span id="l17.60">           mouseOverItem.replace(&quot;rowNumber&quot;, row).replace(&quot;columnNumber&quot;, col)));</span>
<a href="#l17.61"></a><span id="l17.61"> </span>
<a href="#l17.62"></a><span id="l17.62">   // check title</span>
<a href="#l17.63"></a><span id="l17.63">   let eventName = new elementslib.Lookup(controller.window.document,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testAnnualRecurrence.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testAnnualRecurrence.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -32,17 +32,17 @@ var testAnnualRecurrence = function() {</span>
<a href="#l18.4"></a><span id="l18.4">   event.sleep(sleep);</span>
<a href="#l18.5"></a><span id="l18.5">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined,</span>
<a href="#l18.6"></a><span id="l18.6">     &quot;yearly&quot;);</span>
<a href="#l18.7"></a><span id="l18.7">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l18.8"></a><span id="l18.8">   controller.sleep(sleep);</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10">   let checkYears = [startYear, startYear + 1, epoch - 1, epoch, epoch + 1];</span>
<a href="#l18.11"></a><span id="l18.11">   let box = &quot;&quot;;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  for (let i = 0; i &lt; checkYears.length; i++){</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  for (let i = 0; i &lt; checkYears.length; i++) {</span>
<a href="#l18.14"></a><span id="l18.14">     calUtils.goToDate(controller, checkYears[i], 1, 1);</span>
<a href="#l18.15"></a><span id="l18.15">     let date = new Date(checkYears[i], 0, 1);</span>
<a href="#l18.16"></a><span id="l18.16">     let column = date.getDay() + 1;</span>
<a href="#l18.17"></a><span id="l18.17"> </span>
<a href="#l18.18"></a><span id="l18.18">     // day view</span>
<a href="#l18.19"></a><span id="l18.19">     calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l18.20"></a><span id="l18.20">     box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.ALLDAY, undefined, 1, undefined)</span>
<a href="#l18.21"></a><span id="l18.21">       + eventPath;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -30,38 +30,38 @@ var testBiweeklyRecurrence = function() </span>
<a href="#l19.4"></a><span id="l19.4">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined, &quot;bi.weekly&quot;);</span>
<a href="#l19.5"></a><span id="l19.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l19.6"></a><span id="l19.6">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0;});</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l19.9"></a><span id="l19.9">     + eventPath;</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">   // check day view</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  for (let i = 0; i &lt; 4; i++){</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  for (let i = 0; i &lt; 4; i++) {</span>
<a href="#l19.14"></a><span id="l19.14">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l19.15"></a><span id="l19.15">     calUtils.forward(controller, 14);</span>
<a href="#l19.16"></a><span id="l19.16">   }</span>
<a href="#l19.17"></a><span id="l19.17"> </span>
<a href="#l19.18"></a><span id="l19.18">   // check week view</span>
<a href="#l19.19"></a><span id="l19.19">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l19.20"></a><span id="l19.20">   calUtils.goToDate(controller, 2009, 1, 31);</span>
<a href="#l19.21"></a><span id="l19.21"> </span>
<a href="#l19.22"></a><span id="l19.22">   box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 7, hour)</span>
<a href="#l19.23"></a><span id="l19.23">     + eventPath;</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-  for (let i = 0; i &lt; 4; i++){</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineplus">+  for (let i = 0; i &lt; 4; i++) {</span>
<a href="#l19.26"></a><span id="l19.26">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l19.27"></a><span id="l19.27">     calUtils.forward(controller, 2);</span>
<a href="#l19.28"></a><span id="l19.28">   }</span>
<a href="#l19.29"></a><span id="l19.29"> </span>
<a href="#l19.30"></a><span id="l19.30">   // check multiweek view</span>
<a href="#l19.31"></a><span id="l19.31">   calUtils.switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l19.32"></a><span id="l19.32">   calUtils.goToDate(controller, 2009, 1, 31);</span>
<a href="#l19.33"></a><span id="l19.33"> </span>
<a href="#l19.34"></a><span id="l19.34">   // always two occurrences in view, 1st and 3rd or 2nd and 4th week</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-  for (let i = 0; i &lt; 5; i++){</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineplus">+  for (let i = 0; i &lt; 5; i++) {</span>
<a href="#l19.37"></a><span id="l19.37">     box = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i % 2 + 1, 7,</span>
<a href="#l19.38"></a><span id="l19.38">       undefined) + eventPath;</span>
<a href="#l19.39"></a><span id="l19.39">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l19.40"></a><span id="l19.40">     box = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i % 2 + 3, 7,</span>
<a href="#l19.41"></a><span id="l19.41">       undefined) + eventPath;</span>
<a href="#l19.42"></a><span id="l19.42">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l19.43"></a><span id="l19.43">     calUtils.forward(controller, 1);</span>
<a href="#l19.44"></a><span id="l19.44">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testDailyRecurrence.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testDailyRecurrence.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -32,69 +32,69 @@ var testDailyRecurrence = function() {</span>
<a href="#l20.4"></a><span id="l20.4">     &quot;daily&quot;);</span>
<a href="#l20.5"></a><span id="l20.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l20.6"></a><span id="l20.6"> </span>
<a href="#l20.7"></a><span id="l20.7">   // check day view for 7 days</span>
<a href="#l20.8"></a><span id="l20.8">   let daybox = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour, undefined)</span>
<a href="#l20.9"></a><span id="l20.9">     + eventPath;</span>
<a href="#l20.10"></a><span id="l20.10">   controller.waitForElement(new elementslib.Lookup(controller.window.document, daybox));</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l20.14"></a><span id="l20.14">     controller.assertNode(new elementslib.Lookup(controller.window.document, daybox));</span>
<a href="#l20.15"></a><span id="l20.15">     calUtils.forward(controller, 1);</span>
<a href="#l20.16"></a><span id="l20.16">   }</span>
<a href="#l20.17"></a><span id="l20.17"> </span>
<a href="#l20.18"></a><span id="l20.18">   // check week view for 2 weeks</span>
<a href="#l20.19"></a><span id="l20.19">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l20.20"></a><span id="l20.20">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l20.21"></a><span id="l20.21"> </span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-  for (let day = 5; day &lt;= 7; day++){</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+  for (let day = 5; day &lt;= 7; day++) {</span>
<a href="#l20.24"></a><span id="l20.24">     let weekbox = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, 1, day, hour)</span>
<a href="#l20.25"></a><span id="l20.25">       + eventPath;</span>
<a href="#l20.26"></a><span id="l20.26">     controller.assertNode(new elementslib.Lookup(controller.window.document, weekbox));</span>
<a href="#l20.27"></a><span id="l20.27">   }</span>
<a href="#l20.28"></a><span id="l20.28"> </span>
<a href="#l20.29"></a><span id="l20.29">   calUtils.forward(controller, 1);</span>
<a href="#l20.30"></a><span id="l20.30"> </span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-  for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+  for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l20.33"></a><span id="l20.33">     let weekbox = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, 2, day, hour)</span>
<a href="#l20.34"></a><span id="l20.34">       + eventPath;</span>
<a href="#l20.35"></a><span id="l20.35">     controller.assertNode(new elementslib.Lookup(controller.window.document, weekbox));</span>
<a href="#l20.36"></a><span id="l20.36">   }</span>
<a href="#l20.37"></a><span id="l20.37"> </span>
<a href="#l20.38"></a><span id="l20.38">   // check multiweek view for 4 weeks</span>
<a href="#l20.39"></a><span id="l20.39">   calUtils.switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l20.40"></a><span id="l20.40">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l20.41"></a><span id="l20.41"> </span>
<a href="#l20.42"></a><span id="l20.42" class="difflineminus">-  for (let day = 5; day &lt;= 7; day++){</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineplus">+  for (let day = 5; day &lt;= 7; day++) {</span>
<a href="#l20.44"></a><span id="l20.44">     let mweekbox = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, 1, day, hour)</span>
<a href="#l20.45"></a><span id="l20.45">       + eventPath;</span>
<a href="#l20.46"></a><span id="l20.46">     controller.assertNode(new elementslib.Lookup(controller.window.document, mweekbox));</span>
<a href="#l20.47"></a><span id="l20.47">   }</span>
<a href="#l20.48"></a><span id="l20.48"> </span>
<a href="#l20.49"></a><span id="l20.49" class="difflineminus">-  for (let week = 2; week &lt;= 4; week++){</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-    for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineplus">+  for (let week = 2; week &lt;= 4; week++) {</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineplus">+    for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l20.53"></a><span id="l20.53">       let mweekbox = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, week, day, hour)</span>
<a href="#l20.54"></a><span id="l20.54">         + eventPath;</span>
<a href="#l20.55"></a><span id="l20.55">       controller.assertNode(new elementslib.Lookup(controller.window.document, mweekbox));</span>
<a href="#l20.56"></a><span id="l20.56">     }</span>
<a href="#l20.57"></a><span id="l20.57">   }</span>
<a href="#l20.58"></a><span id="l20.58"> </span>
<a href="#l20.59"></a><span id="l20.59">   // check month view for all 5 weeks</span>
<a href="#l20.60"></a><span id="l20.60">   calUtils.switchToView(controller, &quot;month&quot;);</span>
<a href="#l20.61"></a><span id="l20.61">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l20.62"></a><span id="l20.62"> </span>
<a href="#l20.63"></a><span id="l20.63" class="difflineminus">-  for (let day = 5; day &lt;= 7; day++){</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineplus">+  for (let day = 5; day &lt;= 7; day++) {</span>
<a href="#l20.65"></a><span id="l20.65">     let mbox = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, day, undefined)</span>
<a href="#l20.66"></a><span id="l20.66">       + eventPath;</span>
<a href="#l20.67"></a><span id="l20.67">     controller.assertNode(new elementslib.Lookup(controller.window.document, mbox));</span>
<a href="#l20.68"></a><span id="l20.68">   }</span>
<a href="#l20.69"></a><span id="l20.69"> </span>
<a href="#l20.70"></a><span id="l20.70" class="difflineminus">-  for (let week = 2; week &lt;= 5; week++){</span>
<a href="#l20.71"></a><span id="l20.71" class="difflineminus">-    for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineplus">+  for (let week = 2; week &lt;= 5; week++) {</span>
<a href="#l20.73"></a><span id="l20.73" class="difflineplus">+    for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l20.74"></a><span id="l20.74">       let mbox = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, week, day, undefined)</span>
<a href="#l20.75"></a><span id="l20.75">         + eventPath;</span>
<a href="#l20.76"></a><span id="l20.76">       controller.assertNode(new elementslib.Lookup(controller.window.document, mbox));</span>
<a href="#l20.77"></a><span id="l20.77">     }</span>
<a href="#l20.78"></a><span id="l20.78">   }</span>
<a href="#l20.79"></a><span id="l20.79"> </span>
<a href="#l20.80"></a><span id="l20.80">   // delete 3rd January occurrence</span>
<a href="#l20.81"></a><span id="l20.81">   let saturday = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, 7, undefined)</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineat">@@ -140,53 +140,53 @@ var testDailyRecurrence = function() {</span>
<a href="#l20.83"></a><span id="l20.83">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l20.84"></a><span id="l20.84">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0;});</span>
<a href="#l20.85"></a><span id="l20.85"> </span>
<a href="#l20.86"></a><span id="l20.86">   // check day view for 7 days</span>
<a href="#l20.87"></a><span id="l20.87">   let day = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, undefined)</span>
<a href="#l20.88"></a><span id="l20.88">     + eventPath;</span>
<a href="#l20.89"></a><span id="l20.89">   let dates = [[2009, 1, 3],</span>
<a href="#l20.90"></a><span id="l20.90">                [2009, 1, 4]];</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineminus">-  for (let i = 0; i &lt; dates.length; i++){</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineplus">+  for (let i = 0; i &lt; dates.length; i++) {</span>
<a href="#l20.93"></a><span id="l20.93">     calUtils.goToDate(controller, dates[i][0], dates[i][1], dates[i][2]);</span>
<a href="#l20.94"></a><span id="l20.94">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l20.95"></a><span id="l20.95">   }</span>
<a href="#l20.96"></a><span id="l20.96"> </span>
<a href="#l20.97"></a><span id="l20.97">   // check week view for 2 weeks</span>
<a href="#l20.98"></a><span id="l20.98">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l20.99"></a><span id="l20.99">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l20.100"></a><span id="l20.100"> </span>
<a href="#l20.101"></a><span id="l20.101" class="difflineminus">-  for (let i = 0; i &lt;= 1; i++){</span>
<a href="#l20.102"></a><span id="l20.102" class="difflineplus">+  for (let i = 0; i &lt;= 1; i++) {</span>
<a href="#l20.103"></a><span id="l20.103">     let weekday = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 1, undefined)</span>
<a href="#l20.104"></a><span id="l20.104">       + eventPath;</span>
<a href="#l20.105"></a><span id="l20.105">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, weekday));</span>
<a href="#l20.106"></a><span id="l20.106">     weekday = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 7, undefined)</span>
<a href="#l20.107"></a><span id="l20.107">       + eventPath;</span>
<a href="#l20.108"></a><span id="l20.108">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, weekday));</span>
<a href="#l20.109"></a><span id="l20.109">     calUtils.forward(controller, 1);</span>
<a href="#l20.110"></a><span id="l20.110">   }</span>
<a href="#l20.111"></a><span id="l20.111"> </span>
<a href="#l20.112"></a><span id="l20.112">   // check multiweek view for 4 weeks</span>
<a href="#l20.113"></a><span id="l20.113">   calUtils.switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l20.114"></a><span id="l20.114">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l20.115"></a><span id="l20.115"> </span>
<a href="#l20.116"></a><span id="l20.116" class="difflineminus">-  for (let i = 1; i &lt;= 4; i++){</span>
<a href="#l20.117"></a><span id="l20.117" class="difflineplus">+  for (let i = 1; i &lt;= 4; i++) {</span>
<a href="#l20.118"></a><span id="l20.118">     let mweekday = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i, 1, undefined)</span>
<a href="#l20.119"></a><span id="l20.119">       + eventPath;</span>
<a href="#l20.120"></a><span id="l20.120">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mweekday));</span>
<a href="#l20.121"></a><span id="l20.121">     mweekday = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i, 7, undefined)</span>
<a href="#l20.122"></a><span id="l20.122">       + eventPath;</span>
<a href="#l20.123"></a><span id="l20.123">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mweekday));</span>
<a href="#l20.124"></a><span id="l20.124">   }</span>
<a href="#l20.125"></a><span id="l20.125"> </span>
<a href="#l20.126"></a><span id="l20.126">   // check month view for all 5 weeks</span>
<a href="#l20.127"></a><span id="l20.127">   calUtils.switchToView(controller, &quot;month&quot;);</span>
<a href="#l20.128"></a><span id="l20.128">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l20.129"></a><span id="l20.129"> </span>
<a href="#l20.130"></a><span id="l20.130" class="difflineminus">-  for (let i = 1; i &lt;= 5; i++){</span>
<a href="#l20.131"></a><span id="l20.131" class="difflineplus">+  for (let i = 1; i &lt;= 5; i++) {</span>
<a href="#l20.132"></a><span id="l20.132">     let mday = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, i, 1, undefined)</span>
<a href="#l20.133"></a><span id="l20.133">       + eventPath;</span>
<a href="#l20.134"></a><span id="l20.134">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mday));</span>
<a href="#l20.135"></a><span id="l20.135">     mday = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, i, 7, undefined)</span>
<a href="#l20.136"></a><span id="l20.136">       + eventPath;</span>
<a href="#l20.137"></a><span id="l20.137">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mday));</span>
<a href="#l20.138"></a><span id="l20.138">   }</span>
<a href="#l20.139"></a><span id="l20.139"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -50,17 +50,17 @@ var testLastDayOfMonthRecurrence = funct</span>
<a href="#l21.4"></a><span id="l21.4">                       [2008, 11, 30, 6],</span>
<a href="#l21.5"></a><span id="l21.5">                       [2008, 12, 31, 5],</span>
<a href="#l21.6"></a><span id="l21.6">                       [2009, 1, 31, 5],</span>
<a href="#l21.7"></a><span id="l21.7">                       [2009, 2, 28, 4],</span>
<a href="#l21.8"></a><span id="l21.8">                       [2009, 3, 31, 5]];</span>
<a href="#l21.9"></a><span id="l21.9">   let box = &quot;&quot;;</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">   // check all dates</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  for (let i = 0; i &lt; checkingData.length; i++){</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  for (let i = 0; i &lt; checkingData.length; i++) {</span>
<a href="#l21.14"></a><span id="l21.14">     calUtils.goToDate(controller, checkingData[i][0], checkingData[i][1], checkingData[i][2]);</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16">     // day view</span>
<a href="#l21.17"></a><span id="l21.17">     calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l21.18"></a><span id="l21.18">     box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l21.19"></a><span id="l21.19">       + eventPath;</span>
<a href="#l21.20"></a><span id="l21.20">     controller.waitForElement(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l21.21"></a><span id="l21.21"> </span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -92,17 +92,17 @@ var testLastDayOfMonthRecurrence = funct</span>
<a href="#l21.23"></a><span id="l21.23">     undefined, 1, hour) + eventPath;</span>
<a href="#l21.24"></a><span id="l21.24">   calUtils.handleParentDeletion(controller, false);</span>
<a href="#l21.25"></a><span id="l21.25">   controller.waitThenClick(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l21.26"></a><span id="l21.26">   controller.keypress(new elementslib.ID(controller.window.document, &quot;day-view&quot;),</span>
<a href="#l21.27"></a><span id="l21.27">     &quot;VK_DELETE&quot;, {});</span>
<a href="#l21.28"></a><span id="l21.28">   controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l21.29"></a><span id="l21.29"> };</span>
<a href="#l21.30"></a><span id="l21.30"> </span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l21.33"></a><span id="l21.33">   recurrence.sleep(sleep);</span>
<a href="#l21.34"></a><span id="l21.34"> </span>
<a href="#l21.35"></a><span id="l21.35">   // monthly</span>
<a href="#l21.36"></a><span id="l21.36">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined,</span>
<a href="#l21.37"></a><span id="l21.37">     undefined, &quot;2&quot;);</span>
<a href="#l21.38"></a><span id="l21.38"> </span>
<a href="#l21.39"></a><span id="l21.39">   // last day of month</span>
<a href="#l21.40"></a><span id="l21.40">   recurrence.click(new elementslib.ID(recurrence.window.document, &quot;montly-period-relative-date-radio&quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -34,30 +34,30 @@ var testWeeklyNRecurrence = function() {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l22.6"></a><span id="l22.6"> </span>
<a href="#l22.7"></a><span id="l22.7">   // check day view</span>
<a href="#l22.8"></a><span id="l22.8">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l22.9"></a><span id="l22.9">     + eventPath;</span>
<a href="#l22.10"></a><span id="l22.10"> </span>
<a href="#l22.11"></a><span id="l22.11">   // Monday, Tuesday, Wednesday, Thursday</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  for (let i = 0; i &lt; 4; i++){</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  for (let i = 0; i &lt; 4; i++) {</span>
<a href="#l22.14"></a><span id="l22.14">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l22.15"></a><span id="l22.15">     calUtils.forward(controller, 1);</span>
<a href="#l22.16"></a><span id="l22.16">   }</span>
<a href="#l22.17"></a><span id="l22.17"> </span>
<a href="#l22.18"></a><span id="l22.18">   // Saturday</span>
<a href="#l22.19"></a><span id="l22.19">   calUtils.forward(controller, 1);</span>
<a href="#l22.20"></a><span id="l22.20">   controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l22.21"></a><span id="l22.21"> </span>
<a href="#l22.22"></a><span id="l22.22">   // check week view</span>
<a href="#l22.23"></a><span id="l22.23">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l22.24"></a><span id="l22.24"> </span>
<a href="#l22.25"></a><span id="l22.25">   // Monday, Tuesday, Wednesday, Thursday</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineminus">-  for (let i = 2; i &lt; 6; i++){</span>
<a href="#l22.27"></a><span id="l22.27" class="difflineplus">+  for (let i = 2; i &lt; 6; i++) {</span>
<a href="#l22.28"></a><span id="l22.28">     box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, i, hour)</span>
<a href="#l22.29"></a><span id="l22.29">       + eventPath;</span>
<a href="#l22.30"></a><span id="l22.30">     controller.waitForElement(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l22.31"></a><span id="l22.31">   }</span>
<a href="#l22.32"></a><span id="l22.32"> </span>
<a href="#l22.33"></a><span id="l22.33">   // Saturday</span>
<a href="#l22.34"></a><span id="l22.34">   box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 7, hour)</span>
<a href="#l22.35"></a><span id="l22.35">     + eventPath;</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineat">@@ -76,17 +76,17 @@ var testWeeklyNRecurrence = function() {</span>
<a href="#l22.37"></a><span id="l22.37">     + eventPath;</span>
<a href="#l22.38"></a><span id="l22.38">   controller.click(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l22.39"></a><span id="l22.39">   calUtils.handleParentDeletion(controller, false);</span>
<a href="#l22.40"></a><span id="l22.40">   controller.keypress(new elementslib.ID(controller.window.document, &quot;month-view&quot;),</span>
<a href="#l22.41"></a><span id="l22.41">     &quot;VK_DELETE&quot;, {});</span>
<a href="#l22.42"></a><span id="l22.42">   controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l22.43"></a><span id="l22.43"> };</span>
<a href="#l22.44"></a><span id="l22.44"> </span>
<a href="#l22.45"></a><span id="l22.45" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l22.47"></a><span id="l22.47">   // weekly</span>
<a href="#l22.48"></a><span id="l22.48">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l22.49"></a><span id="l22.49">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l22.50"></a><span id="l22.50">   recurrence.sleep(sleep);</span>
<a href="#l22.51"></a><span id="l22.51"> </span>
<a href="#l22.52"></a><span id="l22.52">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l22.53"></a><span id="l22.53">   let tue = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.3.Mmm&quot;);</span>
<a href="#l22.54"></a><span id="l22.54">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineat">@@ -114,26 +114,26 @@ function setRecurrence(recurrence){</span>
<a href="#l22.56"></a><span id="l22.56">   recurrence.keypress(new elementslib.Lookup(recurrence.window.document, input), &quot;a&quot;, { ctrlKey: true });</span>
<a href="#l22.57"></a><span id="l22.57">   recurrence.type(new elementslib.Lookup(recurrence.window.document, input), &quot;4&quot;);</span>
<a href="#l22.58"></a><span id="l22.58"> </span>
<a href="#l22.59"></a><span id="l22.59">   // close dialog</span>
<a href="#l22.60"></a><span id="l22.60">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l22.61"></a><span id="l22.61">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l22.62"></a><span id="l22.62"> }</span>
<a href="#l22.63"></a><span id="l22.63"> </span>
<a href="#l22.64"></a><span id="l22.64" class="difflineminus">-function checkMultiWeekView(view){</span>
<a href="#l22.65"></a><span id="l22.65" class="difflineplus">+function checkMultiWeekView(view) {</span>
<a href="#l22.66"></a><span id="l22.66">   let week = 1;</span>
<a href="#l22.67"></a><span id="l22.67"> </span>
<a href="#l22.68"></a><span id="l22.68">   // in month view event starts from 2nd row</span>
<a href="#l22.69"></a><span id="l22.69">   if (view == &quot;month&quot;) {</span>
<a href="#l22.70"></a><span id="l22.70">     week++;</span>
<a href="#l22.71"></a><span id="l22.71">   }</span>
<a href="#l22.72"></a><span id="l22.72"> </span>
<a href="#l22.73"></a><span id="l22.73">   // Monday, Tuesday, Wednesday, Thursday</span>
<a href="#l22.74"></a><span id="l22.74" class="difflineminus">-  for (let i = 2; i &lt; 6; i++){</span>
<a href="#l22.75"></a><span id="l22.75" class="difflineplus">+  for (let i = 2; i &lt; 6; i++) {</span>
<a href="#l22.76"></a><span id="l22.76">     let box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, i, undefined)</span>
<a href="#l22.77"></a><span id="l22.77">       + eventPath;</span>
<a href="#l22.78"></a><span id="l22.78">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l22.79"></a><span id="l22.79">   }</span>
<a href="#l22.80"></a><span id="l22.80"> </span>
<a href="#l22.81"></a><span id="l22.81">   // Saturday</span>
<a href="#l22.82"></a><span id="l22.82">   let box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, 7, undefined)</span>
<a href="#l22.83"></a><span id="l22.83">     + eventPath;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -36,17 +36,17 @@ var testWeeklyUntilRecurrence = function</span>
<a href="#l23.4"></a><span id="l23.4"> </span>
<a href="#l23.5"></a><span id="l23.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l23.6"></a><span id="l23.6">   controller.waitFor(() =&gt; mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0);</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l23.9"></a><span id="l23.9">     + eventPath;</span>
<a href="#l23.10"></a><span id="l23.10"> </span>
<a href="#l23.11"></a><span id="l23.11">   // check day view</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  for (let week = 0; week &lt; 3; week++){</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  for (let week = 0; week &lt; 3; week++) {</span>
<a href="#l23.14"></a><span id="l23.14">     // Monday</span>
<a href="#l23.15"></a><span id="l23.15">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.16"></a><span id="l23.16">     calUtils.forward(controller, 2);</span>
<a href="#l23.17"></a><span id="l23.17">     // Wednesday</span>
<a href="#l23.18"></a><span id="l23.18">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.19"></a><span id="l23.19">     calUtils.forward(controller, 2);</span>
<a href="#l23.20"></a><span id="l23.20">     // Friday</span>
<a href="#l23.21"></a><span id="l23.21">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -58,17 +58,17 @@ var testWeeklyUntilRecurrence = function</span>
<a href="#l23.23"></a><span id="l23.23">   calUtils.forward(controller, 2);</span>
<a href="#l23.24"></a><span id="l23.24">   // Wednesday</span>
<a href="#l23.25"></a><span id="l23.25">   controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.26"></a><span id="l23.26">   calUtils.forward(controller, 2);</span>
<a href="#l23.27"></a><span id="l23.27"> </span>
<a href="#l23.28"></a><span id="l23.28">   // check week view</span>
<a href="#l23.29"></a><span id="l23.29">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l23.30"></a><span id="l23.30">   calUtils.goToDate(controller, 2009, 1, 5);</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-  for (let week = 0; week &lt; 3; week++){</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+  for (let week = 0; week &lt; 3; week++) {</span>
<a href="#l23.33"></a><span id="l23.33">     // Monday</span>
<a href="#l23.34"></a><span id="l23.34">     box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 2, hour)</span>
<a href="#l23.35"></a><span id="l23.35">       + eventPath;</span>
<a href="#l23.36"></a><span id="l23.36">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.37"></a><span id="l23.37">     // Wednesday</span>
<a href="#l23.38"></a><span id="l23.38">     box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 4, hour)</span>
<a href="#l23.39"></a><span id="l23.39">       + eventPath;</span>
<a href="#l23.40"></a><span id="l23.40">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineat">@@ -104,17 +104,17 @@ var testWeeklyUntilRecurrence = function</span>
<a href="#l23.42"></a><span id="l23.42">     + eventPath;</span>
<a href="#l23.43"></a><span id="l23.43">   controller.click(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.44"></a><span id="l23.44">   calUtils.handleParentDeletion(controller, false);</span>
<a href="#l23.45"></a><span id="l23.45">   controller.keypress(new elementslib.ID(controller.window.document, &quot;month-view&quot;),</span>
<a href="#l23.46"></a><span id="l23.46">     &quot;VK_DELETE&quot;, {});</span>
<a href="#l23.47"></a><span id="l23.47">   controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.48"></a><span id="l23.48"> };</span>
<a href="#l23.49"></a><span id="l23.49"> </span>
<a href="#l23.50"></a><span id="l23.50" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l23.52"></a><span id="l23.52">   // weekly</span>
<a href="#l23.53"></a><span id="l23.53">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l23.54"></a><span id="l23.54">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l23.55"></a><span id="l23.55">   recurrence.sleep(sleep);</span>
<a href="#l23.56"></a><span id="l23.56"> </span>
<a href="#l23.57"></a><span id="l23.57">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l23.58"></a><span id="l23.58">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l23.59"></a><span id="l23.59">   let fri = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.6.Mmm&quot;);</span>
<a href="#l23.60"></a><span id="l23.60" class="difflineat">@@ -145,25 +145,25 @@ function setRecurrence(recurrence){</span>
<a href="#l23.61"></a><span id="l23.61">                                              endDate.getFullYear(), endDate.getMonth() + 1, endDate.getDate());</span>
<a href="#l23.62"></a><span id="l23.62">   recurrence.type(new elementslib.Lookup(recurrence.window.document, input), endDateString);</span>
<a href="#l23.63"></a><span id="l23.63"> </span>
<a href="#l23.64"></a><span id="l23.64">   // close dialog</span>
<a href="#l23.65"></a><span id="l23.65">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l23.66"></a><span id="l23.66">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l23.67"></a><span id="l23.67"> }</span>
<a href="#l23.68"></a><span id="l23.68"> </span>
<a href="#l23.69"></a><span id="l23.69" class="difflineminus">-function checkMultiWeekView(view){</span>
<a href="#l23.70"></a><span id="l23.70" class="difflineplus">+function checkMultiWeekView(view) {</span>
<a href="#l23.71"></a><span id="l23.71">   let startWeek = 1;</span>
<a href="#l23.72"></a><span id="l23.72"> </span>
<a href="#l23.73"></a><span id="l23.73">   // in month view event starts from 2nd row</span>
<a href="#l23.74"></a><span id="l23.74">   if (view == &quot;month&quot;) {</span>
<a href="#l23.75"></a><span id="l23.75">     startWeek++;</span>
<a href="#l23.76"></a><span id="l23.76">   }</span>
<a href="#l23.77"></a><span id="l23.77"> </span>
<a href="#l23.78"></a><span id="l23.78" class="difflineminus">-  for (let week = startWeek; week &lt; startWeek + 3; week++){</span>
<a href="#l23.79"></a><span id="l23.79" class="difflineplus">+  for (let week = startWeek; week &lt; startWeek + 3; week++) {</span>
<a href="#l23.80"></a><span id="l23.80">     // Monday</span>
<a href="#l23.81"></a><span id="l23.81">     let box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, 2, undefined)</span>
<a href="#l23.82"></a><span id="l23.82">       + eventPath;</span>
<a href="#l23.83"></a><span id="l23.83">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l23.84"></a><span id="l23.84">     // Wednesday</span>
<a href="#l23.85"></a><span id="l23.85">     box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, 4, undefined)</span>
<a href="#l23.86"></a><span id="l23.86">       + eventPath;</span>
<a href="#l23.87"></a><span id="l23.87">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -197,17 +197,17 @@ var testWeeklyWithExceptionRecurrence = </span>
<a href="#l24.4"></a><span id="l24.4">     + eventPath;</span>
<a href="#l24.5"></a><span id="l24.5">   controller.click(new elementslib.Lookup(controller.window.document, path));</span>
<a href="#l24.6"></a><span id="l24.6">   calUtils.handleParentDeletion(controller, false);</span>
<a href="#l24.7"></a><span id="l24.7">   controller.keypress(new elementslib.ID(controller.window.document, &quot;day-view&quot;),</span>
<a href="#l24.8"></a><span id="l24.8">     &quot;VK_DELETE&quot;, {});</span>
<a href="#l24.9"></a><span id="l24.9">   controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document, path));</span>
<a href="#l24.10"></a><span id="l24.10"> };</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l24.14"></a><span id="l24.14">   // weekly</span>
<a href="#l24.15"></a><span id="l24.15">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l24.16"></a><span id="l24.16">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l24.17"></a><span id="l24.17">   recurrence.sleep(sleep);</span>
<a href="#l24.18"></a><span id="l24.18"> </span>
<a href="#l24.19"></a><span id="l24.19">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l24.20"></a><span id="l24.20">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l24.21"></a><span id="l24.21">   let fri = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.6.Mmm&quot;);</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -222,17 +222,17 @@ function setRecurrence(recurrence){</span>
<a href="#l24.23"></a><span id="l24.23">   recurrence.click(new elementslib.Lookup(recurrence.window.document, days + '{&quot;label&quot;:&quot;' + wed + '&quot;}'));</span>
<a href="#l24.24"></a><span id="l24.24">   recurrence.click(new elementslib.Lookup(recurrence.window.document, days + '{&quot;label&quot;:&quot;' + fri + '&quot;}'));</span>
<a href="#l24.25"></a><span id="l24.25"> </span>
<a href="#l24.26"></a><span id="l24.26">   // close dialog</span>
<a href="#l24.27"></a><span id="l24.27">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l24.28"></a><span id="l24.28">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l24.29"></a><span id="l24.29"> }</span>
<a href="#l24.30"></a><span id="l24.30"> </span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-function changeRecurrence(recurrence){</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+function changeRecurrence(recurrence) {</span>
<a href="#l24.33"></a><span id="l24.33">   // weekly</span>
<a href="#l24.34"></a><span id="l24.34">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l24.35"></a><span id="l24.35">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l24.36"></a><span id="l24.36">   recurrence.sleep(sleep);</span>
<a href="#l24.37"></a><span id="l24.37"> </span>
<a href="#l24.38"></a><span id="l24.38">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l24.39"></a><span id="l24.39">   let tue = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.3.Mmm&quot;);</span>
<a href="#l24.40"></a><span id="l24.40">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineat">@@ -250,17 +250,17 @@ function changeRecurrence(recurrence){</span>
<a href="#l24.42"></a><span id="l24.42">   // check Tuesday</span>
<a href="#l24.43"></a><span id="l24.43">   recurrence.click(new elementslib.Lookup(recurrence.window.document, days + '{&quot;label&quot;:&quot;' + tue + '&quot;}'));</span>
<a href="#l24.44"></a><span id="l24.44"> </span>
<a href="#l24.45"></a><span id="l24.45">   // close dialog</span>
<a href="#l24.46"></a><span id="l24.46">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l24.47"></a><span id="l24.47">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l24.48"></a><span id="l24.48"> }</span>
<a href="#l24.49"></a><span id="l24.49"> </span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-function checkMultiWeekView(view){</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineplus">+function checkMultiWeekView(view) {</span>
<a href="#l24.52"></a><span id="l24.52">   let startWeek = view == &quot;multiweek&quot; ? 1 : 2;</span>
<a href="#l24.53"></a><span id="l24.53"> </span>
<a href="#l24.54"></a><span id="l24.54">   let path = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, startWeek, 2, hour);</span>
<a href="#l24.55"></a><span id="l24.55">   controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, path + eventPath));</span>
<a href="#l24.56"></a><span id="l24.56">   // assert exactly two</span>
<a href="#l24.57"></a><span id="l24.57">   path = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, startWeek, 3, hour);</span>
<a href="#l24.58"></a><span id="l24.58">   controller.assertNode(new elementslib.Lookup(controller.window.document, path + '/[0]'));</span>
<a href="#l24.59"></a><span id="l24.59">   path = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, startWeek, 3, hour);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -37,17 +37,17 @@ var testAnnualRecurrence = function() {</span>
<a href="#l25.4"></a><span id="l25.4">   event.sleep(sleep);</span>
<a href="#l25.5"></a><span id="l25.5">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined,</span>
<a href="#l25.6"></a><span id="l25.6">     &quot;yearly&quot;);</span>
<a href="#l25.7"></a><span id="l25.7">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l25.8"></a><span id="l25.8">   controller.sleep(sleep);</span>
<a href="#l25.9"></a><span id="l25.9"> </span>
<a href="#l25.10"></a><span id="l25.10">   let checkYears = [startYear, startYear + 1, epoch - 1, epoch, epoch + 1];</span>
<a href="#l25.11"></a><span id="l25.11">   let box = &quot;&quot;;</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  for (let i = 0; i &lt; checkYears.length; i++){</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  for (let i = 0; i &lt; checkYears.length; i++) {</span>
<a href="#l25.14"></a><span id="l25.14">     calUtils.goToDate(controller, checkYears[i], 1, 1);</span>
<a href="#l25.15"></a><span id="l25.15">     let date = new Date(checkYears[i], 0, 1);</span>
<a href="#l25.16"></a><span id="l25.16">     let column = date.getDay() + 1;</span>
<a href="#l25.17"></a><span id="l25.17"> </span>
<a href="#l25.18"></a><span id="l25.18">     // day view</span>
<a href="#l25.19"></a><span id="l25.19">     calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l25.20"></a><span id="l25.20">     box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.ALLDAY, undefined, 1, undefined)</span>
<a href="#l25.21"></a><span id="l25.21">       + eventPath;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -37,38 +37,38 @@ var testBiweeklyRecurrence = function() </span>
<a href="#l26.4"></a><span id="l26.4">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined, &quot;bi.weekly&quot;);</span>
<a href="#l26.5"></a><span id="l26.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l26.6"></a><span id="l26.6">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0;});</span>
<a href="#l26.7"></a><span id="l26.7"> </span>
<a href="#l26.8"></a><span id="l26.8">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l26.9"></a><span id="l26.9">     + eventPath;</span>
<a href="#l26.10"></a><span id="l26.10"> </span>
<a href="#l26.11"></a><span id="l26.11">   // check day view</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  for (let i = 0; i &lt; 4; i++){</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  for (let i = 0; i &lt; 4; i++) {</span>
<a href="#l26.14"></a><span id="l26.14">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l26.15"></a><span id="l26.15">     calUtils.forward(controller, 14);</span>
<a href="#l26.16"></a><span id="l26.16">   }</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18">   // check week view</span>
<a href="#l26.19"></a><span id="l26.19">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l26.20"></a><span id="l26.20">   calUtils.goToDate(controller, 2009, 1, 31);</span>
<a href="#l26.21"></a><span id="l26.21"> </span>
<a href="#l26.22"></a><span id="l26.22">   box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 7, hour)</span>
<a href="#l26.23"></a><span id="l26.23">     + eventPath;</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineminus">-  for (let i = 0; i &lt; 4; i++){</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+  for (let i = 0; i &lt; 4; i++) {</span>
<a href="#l26.26"></a><span id="l26.26">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l26.27"></a><span id="l26.27">     calUtils.forward(2);</span>
<a href="#l26.28"></a><span id="l26.28">   }</span>
<a href="#l26.29"></a><span id="l26.29"> </span>
<a href="#l26.30"></a><span id="l26.30">   // check multiweek view</span>
<a href="#l26.31"></a><span id="l26.31">   calUtils.switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l26.32"></a><span id="l26.32">   calUtils.goToDate(controller, 2009, 1, 31);</span>
<a href="#l26.33"></a><span id="l26.33"> </span>
<a href="#l26.34"></a><span id="l26.34">   // always two occurrences in view, 1st and 3rd or 2nd and 4th week</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineminus">-  for (let i = 0; i &lt; 5; i++){</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineplus">+  for (let i = 0; i &lt; 5; i++) {</span>
<a href="#l26.37"></a><span id="l26.37">     box = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i % 2 + 1, 7,</span>
<a href="#l26.38"></a><span id="l26.38">       undefined) + eventPath;</span>
<a href="#l26.39"></a><span id="l26.39">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l26.40"></a><span id="l26.40">     box = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i % 2 + 3, 7,</span>
<a href="#l26.41"></a><span id="l26.41">       undefined) + eventPath;</span>
<a href="#l26.42"></a><span id="l26.42">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l26.43"></a><span id="l26.43">     calUtils.forward(controller, 1);</span>
<a href="#l26.44"></a><span id="l26.44">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -39,69 +39,69 @@ var testDailyRecurrence = function() {</span>
<a href="#l27.4"></a><span id="l27.4">     &quot;daily&quot;);</span>
<a href="#l27.5"></a><span id="l27.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7">   // check day view for 7 days</span>
<a href="#l27.8"></a><span id="l27.8">   let daybox = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour, undefined)</span>
<a href="#l27.9"></a><span id="l27.9">     + eventPath;</span>
<a href="#l27.10"></a><span id="l27.10">   controller.waitForElement(new elementslib.Lookup(controller.window.document, daybox));</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l27.14"></a><span id="l27.14">     controller.assertNode(new elementslib.Lookup(controller.window.document, daybox));</span>
<a href="#l27.15"></a><span id="l27.15">     calUtils.forward(controller, 1);</span>
<a href="#l27.16"></a><span id="l27.16">   }</span>
<a href="#l27.17"></a><span id="l27.17"> </span>
<a href="#l27.18"></a><span id="l27.18">   // check week view for 2 weeks</span>
<a href="#l27.19"></a><span id="l27.19">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l27.20"></a><span id="l27.20">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l27.21"></a><span id="l27.21"> </span>
<a href="#l27.22"></a><span id="l27.22" class="difflineminus">-  for (let day = 5; day &lt;= 7; day++){</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineplus">+  for (let day = 5; day &lt;= 7; day++) {</span>
<a href="#l27.24"></a><span id="l27.24">     let weekbox = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, 1, day, hour)</span>
<a href="#l27.25"></a><span id="l27.25">       + eventPath;</span>
<a href="#l27.26"></a><span id="l27.26">     controller.assertNode(new elementslib.Lookup(controller.window.document, weekbox));</span>
<a href="#l27.27"></a><span id="l27.27">   }</span>
<a href="#l27.28"></a><span id="l27.28"> </span>
<a href="#l27.29"></a><span id="l27.29">   calUtils.forward(controller, 1);</span>
<a href="#l27.30"></a><span id="l27.30"> </span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-  for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+  for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l27.33"></a><span id="l27.33">     let weekbox = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, 2, day, hour)</span>
<a href="#l27.34"></a><span id="l27.34">       + eventPath;</span>
<a href="#l27.35"></a><span id="l27.35">     controller.assertNode(new elementslib.Lookup(controller.window.document, weekbox));</span>
<a href="#l27.36"></a><span id="l27.36">   }</span>
<a href="#l27.37"></a><span id="l27.37"> </span>
<a href="#l27.38"></a><span id="l27.38">   // check multiweek view for 4 weeks</span>
<a href="#l27.39"></a><span id="l27.39">   calUtils.switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l27.40"></a><span id="l27.40">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l27.41"></a><span id="l27.41"> </span>
<a href="#l27.42"></a><span id="l27.42" class="difflineminus">-  for (let day = 5; day &lt;= 7; day++){</span>
<a href="#l27.43"></a><span id="l27.43" class="difflineplus">+  for (let day = 5; day &lt;= 7; day++) {</span>
<a href="#l27.44"></a><span id="l27.44">     let mweekbox = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, 1, day, hour)</span>
<a href="#l27.45"></a><span id="l27.45">       + eventPath;</span>
<a href="#l27.46"></a><span id="l27.46">     controller.assertNode(new elementslib.Lookup(controller.window.document, mweekbox));</span>
<a href="#l27.47"></a><span id="l27.47">   }</span>
<a href="#l27.48"></a><span id="l27.48"> </span>
<a href="#l27.49"></a><span id="l27.49" class="difflineminus">-  for (let week = 2; week &lt;= 4; week++){</span>
<a href="#l27.50"></a><span id="l27.50" class="difflineminus">-    for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineplus">+  for (let week = 2; week &lt;= 4; week++) {</span>
<a href="#l27.52"></a><span id="l27.52" class="difflineplus">+    for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l27.53"></a><span id="l27.53">       let mweekbox = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, week, day, hour)</span>
<a href="#l27.54"></a><span id="l27.54">         + eventPath;</span>
<a href="#l27.55"></a><span id="l27.55">       controller.assertNode(new elementslib.Lookup(controller.window.document, mweekbox));</span>
<a href="#l27.56"></a><span id="l27.56">     }</span>
<a href="#l27.57"></a><span id="l27.57">   }</span>
<a href="#l27.58"></a><span id="l27.58"> </span>
<a href="#l27.59"></a><span id="l27.59">   // check month view for all 5 weeks</span>
<a href="#l27.60"></a><span id="l27.60">   calUtils.switchToView(controller, &quot;month&quot;);</span>
<a href="#l27.61"></a><span id="l27.61">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l27.62"></a><span id="l27.62"> </span>
<a href="#l27.63"></a><span id="l27.63" class="difflineminus">-  for (let day = 5; day &lt;= 7; day++){</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineplus">+  for (let day = 5; day &lt;= 7; day++) {</span>
<a href="#l27.65"></a><span id="l27.65">     let mbox = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, day, undefined)</span>
<a href="#l27.66"></a><span id="l27.66">       + eventPath;</span>
<a href="#l27.67"></a><span id="l27.67">     controller.assertNode(new elementslib.Lookup(controller.window.document, mbox));</span>
<a href="#l27.68"></a><span id="l27.68">   }</span>
<a href="#l27.69"></a><span id="l27.69"> </span>
<a href="#l27.70"></a><span id="l27.70" class="difflineminus">-  for (let week = 2; week &lt;= 5; week++){</span>
<a href="#l27.71"></a><span id="l27.71" class="difflineminus">-    for (let day = 1; day &lt;= 7; day++){</span>
<a href="#l27.72"></a><span id="l27.72" class="difflineplus">+  for (let week = 2; week &lt;= 5; week++) {</span>
<a href="#l27.73"></a><span id="l27.73" class="difflineplus">+    for (let day = 1; day &lt;= 7; day++) {</span>
<a href="#l27.74"></a><span id="l27.74">       let mbox = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, week, day, undefined)</span>
<a href="#l27.75"></a><span id="l27.75">         + eventPath;</span>
<a href="#l27.76"></a><span id="l27.76">       controller.assertNode(new elementslib.Lookup(controller.window.document, mbox));</span>
<a href="#l27.77"></a><span id="l27.77">     }</span>
<a href="#l27.78"></a><span id="l27.78">   }</span>
<a href="#l27.79"></a><span id="l27.79"> </span>
<a href="#l27.80"></a><span id="l27.80">   // delete 3rd January occurrence</span>
<a href="#l27.81"></a><span id="l27.81">   let saturday = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, 7, undefined)</span>
<a href="#l27.82"></a><span id="l27.82" class="difflineat">@@ -147,53 +147,53 @@ var testDailyRecurrence = function() {</span>
<a href="#l27.83"></a><span id="l27.83">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l27.84"></a><span id="l27.84">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0;});</span>
<a href="#l27.85"></a><span id="l27.85"> </span>
<a href="#l27.86"></a><span id="l27.86">   // check day view for 7 days</span>
<a href="#l27.87"></a><span id="l27.87">   let day = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, undefined)</span>
<a href="#l27.88"></a><span id="l27.88">     + eventPath;</span>
<a href="#l27.89"></a><span id="l27.89">   let dates = [[2009, 1, 3],</span>
<a href="#l27.90"></a><span id="l27.90">                [2009, 1, 4]];</span>
<a href="#l27.91"></a><span id="l27.91" class="difflineminus">-  for (let i = 0; i &lt; dates.length; i++){</span>
<a href="#l27.92"></a><span id="l27.92" class="difflineplus">+  for (let i = 0; i &lt; dates.length; i++) {</span>
<a href="#l27.93"></a><span id="l27.93">     calUtils.goToDate(controller, dates[i][0], dates[i][1], dates[i][2]);</span>
<a href="#l27.94"></a><span id="l27.94">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l27.95"></a><span id="l27.95">   }</span>
<a href="#l27.96"></a><span id="l27.96"> </span>
<a href="#l27.97"></a><span id="l27.97">   // check week view for 2 weeks</span>
<a href="#l27.98"></a><span id="l27.98">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l27.99"></a><span id="l27.99">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l27.100"></a><span id="l27.100"> </span>
<a href="#l27.101"></a><span id="l27.101" class="difflineminus">-  for (let i = 0; i &lt;= 1; i++){</span>
<a href="#l27.102"></a><span id="l27.102" class="difflineplus">+  for (let i = 0; i &lt;= 1; i++) {</span>
<a href="#l27.103"></a><span id="l27.103">     let weekday = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 1, undefined)</span>
<a href="#l27.104"></a><span id="l27.104">       + eventPath;</span>
<a href="#l27.105"></a><span id="l27.105">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, weekday));</span>
<a href="#l27.106"></a><span id="l27.106">     weekday = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 7, undefined)</span>
<a href="#l27.107"></a><span id="l27.107">       + eventPath;</span>
<a href="#l27.108"></a><span id="l27.108">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, weekday));</span>
<a href="#l27.109"></a><span id="l27.109">     calUtils.forward(controller, 1);</span>
<a href="#l27.110"></a><span id="l27.110">   }</span>
<a href="#l27.111"></a><span id="l27.111"> </span>
<a href="#l27.112"></a><span id="l27.112">   // check multiweek view for 4 weeks</span>
<a href="#l27.113"></a><span id="l27.113">   calUtils.switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l27.114"></a><span id="l27.114">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l27.115"></a><span id="l27.115"> </span>
<a href="#l27.116"></a><span id="l27.116" class="difflineminus">-  for (let i = 1; i &lt;= 4; i++){</span>
<a href="#l27.117"></a><span id="l27.117" class="difflineplus">+  for (let i = 1; i &lt;= 4; i++) {</span>
<a href="#l27.118"></a><span id="l27.118">     let mweekday = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i, 1, undefined)</span>
<a href="#l27.119"></a><span id="l27.119">       + eventPath;</span>
<a href="#l27.120"></a><span id="l27.120">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mweekday));</span>
<a href="#l27.121"></a><span id="l27.121">     mweekday = calUtils.getEventBoxPath(controller, &quot;multiweek&quot;, calUtils.EVENT_BOX, i, 7, undefined)</span>
<a href="#l27.122"></a><span id="l27.122">       + eventPath;</span>
<a href="#l27.123"></a><span id="l27.123">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mweekday));</span>
<a href="#l27.124"></a><span id="l27.124">   }</span>
<a href="#l27.125"></a><span id="l27.125"> </span>
<a href="#l27.126"></a><span id="l27.126">   // check month view for all 5 weeks</span>
<a href="#l27.127"></a><span id="l27.127">   calUtils.switchToView(controller, &quot;month&quot;);</span>
<a href="#l27.128"></a><span id="l27.128">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l27.129"></a><span id="l27.129"> </span>
<a href="#l27.130"></a><span id="l27.130" class="difflineminus">-  for (let i = 1; i &lt;= 5; i++){</span>
<a href="#l27.131"></a><span id="l27.131" class="difflineplus">+  for (let i = 1; i &lt;= 5; i++) {</span>
<a href="#l27.132"></a><span id="l27.132">     let mday = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, i, 1, undefined)</span>
<a href="#l27.133"></a><span id="l27.133">       + eventPath;</span>
<a href="#l27.134"></a><span id="l27.134">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mday));</span>
<a href="#l27.135"></a><span id="l27.135">     mday = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, i, 7, undefined)</span>
<a href="#l27.136"></a><span id="l27.136">       + eventPath;</span>
<a href="#l27.137"></a><span id="l27.137">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, mday));</span>
<a href="#l27.138"></a><span id="l27.138">   }</span>
<a href="#l27.139"></a><span id="l27.139"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -58,17 +58,17 @@ var testLastDayOfMonthRecurrence = funct</span>
<a href="#l28.4"></a><span id="l28.4">                       [2008, 11, 30, 6],</span>
<a href="#l28.5"></a><span id="l28.5">                       [2008, 12, 31, 5],</span>
<a href="#l28.6"></a><span id="l28.6">                       [2009, 1, 31, 5],</span>
<a href="#l28.7"></a><span id="l28.7">                       [2009, 2, 28, 4],</span>
<a href="#l28.8"></a><span id="l28.8">                       [2009, 3, 31, 5]];</span>
<a href="#l28.9"></a><span id="l28.9">   let box = &quot;&quot;;</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">   // check all dates</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  for (let i = 0; i &lt; checkingData.length; i++){</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  for (let i = 0; i &lt; checkingData.length; i++) {</span>
<a href="#l28.14"></a><span id="l28.14">     calUtils.goToDate(controller, checkingData[i][0], checkingData[i][1], checkingData[i][2]);</span>
<a href="#l28.15"></a><span id="l28.15"> </span>
<a href="#l28.16"></a><span id="l28.16">     // day view</span>
<a href="#l28.17"></a><span id="l28.17">     calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l28.18"></a><span id="l28.18">     box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l28.19"></a><span id="l28.19">       + eventPath;</span>
<a href="#l28.20"></a><span id="l28.20">     controller.waitForElement(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l28.21"></a><span id="l28.21"> </span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -107,17 +107,17 @@ var testLastDayOfMonthRecurrence = funct</span>
<a href="#l28.23"></a><span id="l28.23">   // reset view</span>
<a href="#l28.24"></a><span id="l28.24">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l28.25"></a><span id="l28.25">   controller.waitFor(function() {</span>
<a href="#l28.26"></a><span id="l28.26">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span>
<a href="#l28.27"></a><span id="l28.27">     return view.orient == &quot;vertical&quot;;</span>
<a href="#l28.28"></a><span id="l28.28">   });</span>
<a href="#l28.29"></a><span id="l28.29"> };</span>
<a href="#l28.30"></a><span id="l28.30"> </span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l28.33"></a><span id="l28.33">   recurrence.sleep(sleep);</span>
<a href="#l28.34"></a><span id="l28.34"> </span>
<a href="#l28.35"></a><span id="l28.35">   // monthly</span>
<a href="#l28.36"></a><span id="l28.36">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined,</span>
<a href="#l28.37"></a><span id="l28.37">     undefined, &quot;2&quot;);</span>
<a href="#l28.38"></a><span id="l28.38"> </span>
<a href="#l28.39"></a><span id="l28.39">   // last day of month</span>
<a href="#l28.40"></a><span id="l28.40">   recurrence.click(new elementslib.ID(recurrence.window.document, &quot;montly-period-relative-date-radio&quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -41,30 +41,30 @@ var testWeeklyNRecurrence = function() {</span>
<a href="#l29.4"></a><span id="l29.4"> </span>
<a href="#l29.5"></a><span id="l29.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l29.6"></a><span id="l29.6"> </span>
<a href="#l29.7"></a><span id="l29.7">   // check day view</span>
<a href="#l29.8"></a><span id="l29.8">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l29.9"></a><span id="l29.9">     + eventPath;</span>
<a href="#l29.10"></a><span id="l29.10"> </span>
<a href="#l29.11"></a><span id="l29.11">   // Monday, Tuesday, Wednesday, Thursday</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  for (let i = 0; i &lt; 4; i++){</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  for (let i = 0; i &lt; 4; i++) {</span>
<a href="#l29.14"></a><span id="l29.14">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l29.15"></a><span id="l29.15">     calUtils.forward(controller, 1);</span>
<a href="#l29.16"></a><span id="l29.16">   }</span>
<a href="#l29.17"></a><span id="l29.17"> </span>
<a href="#l29.18"></a><span id="l29.18">   // Saturday</span>
<a href="#l29.19"></a><span id="l29.19">   calUtils.forward(controller, 1);</span>
<a href="#l29.20"></a><span id="l29.20">   controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l29.21"></a><span id="l29.21"> </span>
<a href="#l29.22"></a><span id="l29.22">   // check week view</span>
<a href="#l29.23"></a><span id="l29.23">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l29.24"></a><span id="l29.24"> </span>
<a href="#l29.25"></a><span id="l29.25">   // Monday, Tuesday, Wednesday, Thursday</span>
<a href="#l29.26"></a><span id="l29.26" class="difflineminus">-  for (let i = 2; i &lt; 6; i++){</span>
<a href="#l29.27"></a><span id="l29.27" class="difflineplus">+  for (let i = 2; i &lt; 6; i++) {</span>
<a href="#l29.28"></a><span id="l29.28">     box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, i, hour)</span>
<a href="#l29.29"></a><span id="l29.29">       + eventPath;</span>
<a href="#l29.30"></a><span id="l29.30">     controller.waitForElement(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l29.31"></a><span id="l29.31">   }</span>
<a href="#l29.32"></a><span id="l29.32"> </span>
<a href="#l29.33"></a><span id="l29.33">   // Saturday</span>
<a href="#l29.34"></a><span id="l29.34">   box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 7, hour)</span>
<a href="#l29.35"></a><span id="l29.35">     + eventPath;</span>
<a href="#l29.36"></a><span id="l29.36" class="difflineat">@@ -91,17 +91,17 @@ var testWeeklyNRecurrence = function() {</span>
<a href="#l29.37"></a><span id="l29.37">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l29.38"></a><span id="l29.38">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l29.39"></a><span id="l29.39">   controller.waitFor(function() {</span>
<a href="#l29.40"></a><span id="l29.40">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span>
<a href="#l29.41"></a><span id="l29.41">     return view.orient == &quot;vertical&quot;;</span>
<a href="#l29.42"></a><span id="l29.42">   });</span>
<a href="#l29.43"></a><span id="l29.43"> };</span>
<a href="#l29.44"></a><span id="l29.44"> </span>
<a href="#l29.45"></a><span id="l29.45" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l29.46"></a><span id="l29.46" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l29.47"></a><span id="l29.47">   // weekly</span>
<a href="#l29.48"></a><span id="l29.48">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l29.49"></a><span id="l29.49">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l29.50"></a><span id="l29.50">   recurrence.sleep(sleep);</span>
<a href="#l29.51"></a><span id="l29.51"> </span>
<a href="#l29.52"></a><span id="l29.52">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l29.53"></a><span id="l29.53">   let tue = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.3.Mmm&quot;);</span>
<a href="#l29.54"></a><span id="l29.54">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l29.55"></a><span id="l29.55" class="difflineat">@@ -129,26 +129,26 @@ function setRecurrence(recurrence){</span>
<a href="#l29.56"></a><span id="l29.56">   recurrence.keypress(new elementslib.Lookup(recurrence.window.document, input), &quot;a&quot;, { ctrlKey: true });</span>
<a href="#l29.57"></a><span id="l29.57">   recurrence.type(new elementslib.Lookup(recurrence.window.document, input), &quot;4&quot;);</span>
<a href="#l29.58"></a><span id="l29.58"> </span>
<a href="#l29.59"></a><span id="l29.59">   // close dialog</span>
<a href="#l29.60"></a><span id="l29.60">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l29.61"></a><span id="l29.61">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l29.62"></a><span id="l29.62"> }</span>
<a href="#l29.63"></a><span id="l29.63"> </span>
<a href="#l29.64"></a><span id="l29.64" class="difflineminus">-function checkMultiWeekView(view){</span>
<a href="#l29.65"></a><span id="l29.65" class="difflineplus">+function checkMultiWeekView(view) {</span>
<a href="#l29.66"></a><span id="l29.66">   let week = 1;</span>
<a href="#l29.67"></a><span id="l29.67"> </span>
<a href="#l29.68"></a><span id="l29.68">   // in month view event starts from 2nd row</span>
<a href="#l29.69"></a><span id="l29.69">   if (view == &quot;month&quot;) {</span>
<a href="#l29.70"></a><span id="l29.70">     week++;</span>
<a href="#l29.71"></a><span id="l29.71">   }</span>
<a href="#l29.72"></a><span id="l29.72"> </span>
<a href="#l29.73"></a><span id="l29.73">   // Monday, Tuesday, Wednesday, Thursday</span>
<a href="#l29.74"></a><span id="l29.74" class="difflineminus">-  for (let i = 2; i &lt; 6; i++){</span>
<a href="#l29.75"></a><span id="l29.75" class="difflineplus">+  for (let i = 2; i &lt; 6; i++) {</span>
<a href="#l29.76"></a><span id="l29.76">     let box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, i, undefined)</span>
<a href="#l29.77"></a><span id="l29.77">       + eventPath;</span>
<a href="#l29.78"></a><span id="l29.78">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l29.79"></a><span id="l29.79">   }</span>
<a href="#l29.80"></a><span id="l29.80"> </span>
<a href="#l29.81"></a><span id="l29.81">   // Saturday</span>
<a href="#l29.82"></a><span id="l29.82">   let box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, 7, undefined)</span>
<a href="#l29.83"></a><span id="l29.83">     + eventPath;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -42,17 +42,17 @@ var testWeeklyUntilRecurrence = function</span>
<a href="#l30.4"></a><span id="l30.4"> </span>
<a href="#l30.5"></a><span id="l30.5">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l30.6"></a><span id="l30.6">   controller.waitFor(() =&gt; mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0);</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l30.9"></a><span id="l30.9">     + eventPath;</span>
<a href="#l30.10"></a><span id="l30.10"> </span>
<a href="#l30.11"></a><span id="l30.11">   // check day view</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-  for (let week = 0; week &lt; 3; week++){</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+  for (let week = 0; week &lt; 3; week++) {</span>
<a href="#l30.14"></a><span id="l30.14">     // Monday</span>
<a href="#l30.15"></a><span id="l30.15">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.16"></a><span id="l30.16">     calUtils.forward(controller, 2);</span>
<a href="#l30.17"></a><span id="l30.17">     // Wednesday</span>
<a href="#l30.18"></a><span id="l30.18">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.19"></a><span id="l30.19">     calUtils.forward(controller, 2);</span>
<a href="#l30.20"></a><span id="l30.20">     // Friday</span>
<a href="#l30.21"></a><span id="l30.21">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -64,17 +64,17 @@ var testWeeklyUntilRecurrence = function</span>
<a href="#l30.23"></a><span id="l30.23">   calUtils.forward(controller, 2);</span>
<a href="#l30.24"></a><span id="l30.24">   // Wednesday</span>
<a href="#l30.25"></a><span id="l30.25">   controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.26"></a><span id="l30.26">   calUtils.forward(controller, 2);</span>
<a href="#l30.27"></a><span id="l30.27"> </span>
<a href="#l30.28"></a><span id="l30.28">   // check week view</span>
<a href="#l30.29"></a><span id="l30.29">   calUtils.switchToView(controller, &quot;week&quot;);</span>
<a href="#l30.30"></a><span id="l30.30">   calUtils.goToDate(controller, 2009, 1, 5);</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-  for (let week = 0; week &lt; 3; week++){</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+  for (let week = 0; week &lt; 3; week++) {</span>
<a href="#l30.33"></a><span id="l30.33">     // Monday</span>
<a href="#l30.34"></a><span id="l30.34">     box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 2, hour)</span>
<a href="#l30.35"></a><span id="l30.35">       + eventPath;</span>
<a href="#l30.36"></a><span id="l30.36">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.37"></a><span id="l30.37">     // Wednesday</span>
<a href="#l30.38"></a><span id="l30.38">     box = calUtils.getEventBoxPath(controller, &quot;week&quot;, calUtils.EVENT_BOX, undefined, 4, hour)</span>
<a href="#l30.39"></a><span id="l30.39">       + eventPath;</span>
<a href="#l30.40"></a><span id="l30.40">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineat">@@ -118,17 +118,17 @@ var testWeeklyUntilRecurrence = function</span>
<a href="#l30.42"></a><span id="l30.42">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l30.43"></a><span id="l30.43">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l30.44"></a><span id="l30.44">   controller.waitFor(function() {</span>
<a href="#l30.45"></a><span id="l30.45">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span>
<a href="#l30.46"></a><span id="l30.46">     return view.orient == &quot;vertical&quot;;</span>
<a href="#l30.47"></a><span id="l30.47">   });</span>
<a href="#l30.48"></a><span id="l30.48"> };</span>
<a href="#l30.49"></a><span id="l30.49"> </span>
<a href="#l30.50"></a><span id="l30.50" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l30.52"></a><span id="l30.52">   // weekly</span>
<a href="#l30.53"></a><span id="l30.53">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l30.54"></a><span id="l30.54">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l30.55"></a><span id="l30.55">   recurrence.sleep(sleep);</span>
<a href="#l30.56"></a><span id="l30.56"> </span>
<a href="#l30.57"></a><span id="l30.57">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l30.58"></a><span id="l30.58">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l30.59"></a><span id="l30.59">   let fri = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.6.Mmm&quot;);</span>
<a href="#l30.60"></a><span id="l30.60" class="difflineat">@@ -160,25 +160,25 @@ function setRecurrence(recurrence){</span>
<a href="#l30.61"></a><span id="l30.61"> </span>
<a href="#l30.62"></a><span id="l30.62">   recurrence.type(new elementslib.Lookup(recurrence.window.document, input), endDateString);</span>
<a href="#l30.63"></a><span id="l30.63"> </span>
<a href="#l30.64"></a><span id="l30.64">   // close dialog</span>
<a href="#l30.65"></a><span id="l30.65">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l30.66"></a><span id="l30.66">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l30.67"></a><span id="l30.67"> }</span>
<a href="#l30.68"></a><span id="l30.68"> </span>
<a href="#l30.69"></a><span id="l30.69" class="difflineminus">-function checkMultiWeekView(view){</span>
<a href="#l30.70"></a><span id="l30.70" class="difflineplus">+function checkMultiWeekView(view) {</span>
<a href="#l30.71"></a><span id="l30.71">   let startWeek = 1;</span>
<a href="#l30.72"></a><span id="l30.72"> </span>
<a href="#l30.73"></a><span id="l30.73">   // in month view event starts from 2nd row</span>
<a href="#l30.74"></a><span id="l30.74">   if (view == &quot;month&quot;) {</span>
<a href="#l30.75"></a><span id="l30.75">     startWeek++;</span>
<a href="#l30.76"></a><span id="l30.76">   }</span>
<a href="#l30.77"></a><span id="l30.77"> </span>
<a href="#l30.78"></a><span id="l30.78" class="difflineminus">-  for (let week = startWeek; week &lt; startWeek + 3; week++){</span>
<a href="#l30.79"></a><span id="l30.79" class="difflineplus">+  for (let week = startWeek; week &lt; startWeek + 3; week++) {</span>
<a href="#l30.80"></a><span id="l30.80">     // Monday</span>
<a href="#l30.81"></a><span id="l30.81">     let box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, 2, undefined)</span>
<a href="#l30.82"></a><span id="l30.82">       + eventPath;</span>
<a href="#l30.83"></a><span id="l30.83">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span>
<a href="#l30.84"></a><span id="l30.84">     // Wednesday</span>
<a href="#l30.85"></a><span id="l30.85">     box = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, week, 4, undefined)</span>
<a href="#l30.86"></a><span id="l30.86">       + eventPath;</span>
<a href="#l30.87"></a><span id="l30.87">     controller.assertNode(new elementslib.Lookup(controller.window.document, box));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -210,17 +210,17 @@ var testWeeklyWithExceptionRecurrence = </span>
<a href="#l31.4"></a><span id="l31.4">   // reset view</span>
<a href="#l31.5"></a><span id="l31.5">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l31.6"></a><span id="l31.6">   controller.waitFor(function() {</span>
<a href="#l31.7"></a><span id="l31.7">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span>
<a href="#l31.8"></a><span id="l31.8">     return view.orient == &quot;vertical&quot;;</span>
<a href="#l31.9"></a><span id="l31.9">   });</span>
<a href="#l31.10"></a><span id="l31.10"> };</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-function setRecurrence(recurrence){</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+function setRecurrence(recurrence) {</span>
<a href="#l31.14"></a><span id="l31.14">   // weekly</span>
<a href="#l31.15"></a><span id="l31.15">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l31.16"></a><span id="l31.16">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l31.17"></a><span id="l31.17">   recurrence.sleep(sleep);</span>
<a href="#l31.18"></a><span id="l31.18"> </span>
<a href="#l31.19"></a><span id="l31.19">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l31.20"></a><span id="l31.20">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l31.21"></a><span id="l31.21">   let fri = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.6.Mmm&quot;);</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineat">@@ -235,17 +235,17 @@ function setRecurrence(recurrence){</span>
<a href="#l31.23"></a><span id="l31.23">   recurrence.click(new elementslib.Lookup(recurrence.window.document, days + '{&quot;label&quot;:&quot;' + wed + '&quot;}'));</span>
<a href="#l31.24"></a><span id="l31.24">   recurrence.click(new elementslib.Lookup(recurrence.window.document, days + '{&quot;label&quot;:&quot;' + fri + '&quot;}'));</span>
<a href="#l31.25"></a><span id="l31.25"> </span>
<a href="#l31.26"></a><span id="l31.26">   // close dialog</span>
<a href="#l31.27"></a><span id="l31.27">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l31.28"></a><span id="l31.28">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l31.29"></a><span id="l31.29"> }</span>
<a href="#l31.30"></a><span id="l31.30"> </span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-function changeRecurrence(recurrence){</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+function changeRecurrence(recurrence) {</span>
<a href="#l31.33"></a><span id="l31.33">   // weekly</span>
<a href="#l31.34"></a><span id="l31.34">   recurrence.waitForElement(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;));</span>
<a href="#l31.35"></a><span id="l31.35">   recurrence.select(new elementslib.ID(recurrence.window.document, &quot;period-list&quot;), undefined, undefined, &quot;1&quot;);</span>
<a href="#l31.36"></a><span id="l31.36">   recurrence.sleep(sleep);</span>
<a href="#l31.37"></a><span id="l31.37"> </span>
<a href="#l31.38"></a><span id="l31.38">   let mon = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.2.Mmm&quot;);</span>
<a href="#l31.39"></a><span id="l31.39">   let tue = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.3.Mmm&quot;);</span>
<a href="#l31.40"></a><span id="l31.40">   let wed = utils.getProperty(&quot;chrome://calendar/locale/dateFormat.properties&quot;, &quot;day.4.Mmm&quot;);</span>
<a href="#l31.41"></a><span id="l31.41" class="difflineat">@@ -263,17 +263,17 @@ function changeRecurrence(recurrence){</span>
<a href="#l31.42"></a><span id="l31.42">   // check Tuesday</span>
<a href="#l31.43"></a><span id="l31.43">   recurrence.click(new elementslib.Lookup(recurrence.window.document, days + '{&quot;label&quot;:&quot;' + tue + '&quot;}'));</span>
<a href="#l31.44"></a><span id="l31.44"> </span>
<a href="#l31.45"></a><span id="l31.45">   // close dialog</span>
<a href="#l31.46"></a><span id="l31.46">   recurrence.click(new elementslib.Lookup(recurrence.window.document, '/id(&quot;calendar-event-dialog-recurrence&quot;)/'</span>
<a href="#l31.47"></a><span id="l31.47">     + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l31.48"></a><span id="l31.48"> }</span>
<a href="#l31.49"></a><span id="l31.49"> </span>
<a href="#l31.50"></a><span id="l31.50" class="difflineminus">-function checkMultiWeekView(view){</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineplus">+function checkMultiWeekView(view) {</span>
<a href="#l31.52"></a><span id="l31.52">   let startWeek = view == &quot;multiweek&quot; ? 1 : 2;</span>
<a href="#l31.53"></a><span id="l31.53"> </span>
<a href="#l31.54"></a><span id="l31.54">   let path = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, startWeek, 2, hour);</span>
<a href="#l31.55"></a><span id="l31.55">   controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, path + eventPath));</span>
<a href="#l31.56"></a><span id="l31.56">   // assert exactly two</span>
<a href="#l31.57"></a><span id="l31.57">   path = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, startWeek, 3, hour);</span>
<a href="#l31.58"></a><span id="l31.58">   controller.assertNode(new elementslib.Lookup(controller.window.document, path + '/[0]'));</span>
<a href="#l31.59"></a><span id="l31.59">   path = calUtils.getEventBoxPath(controller, view, calUtils.EVENT_BOX, startWeek, 3, hour);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/test/mozmill/shared-modules/calendar-utils.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/test/mozmill/shared-modules/calendar-utils.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -62,51 +62,51 @@ function handleOccurrenceDeletion(contro</span>
<a href="#l32.4"></a><span id="l32.4">   });</span>
<a href="#l32.5"></a><span id="l32.5"> }</span>
<a href="#l32.6"></a><span id="l32.6"> </span>
<a href="#l32.7"></a><span id="l32.7"> /**</span>
<a href="#l32.8"></a><span id="l32.8">  *  Choose to delete all occurrences of a repeating event</span>
<a href="#l32.9"></a><span id="l32.9">  *  @param controller - Mozmill window controller</span>
<a href="#l32.10"></a><span id="l32.10">  *  @param attendees - whether there are attendees that can be notified or not</span>
<a href="#l32.11"></a><span id="l32.11">  */</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-function handleParentDeletion(controller, attendees){</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+function handleParentDeletion(controller, attendees) {</span>
<a href="#l32.14"></a><span id="l32.14">   let md = new modalDialog.modalDialog(controller.window);</span>
<a href="#l32.15"></a><span id="l32.15">   md.start((dialog) =&gt; {</span>
<a href="#l32.16"></a><span id="l32.16">     if (attendees) {</span>
<a href="#l32.17"></a><span id="l32.17">       acceptSendingNotificationMail();</span>
<a href="#l32.18"></a><span id="l32.18">     }</span>
<a href="#l32.19"></a><span id="l32.19">     dialog.waitThenClick(new elementslib.ID(dialog.window.document, &quot;accept-parent-button&quot;));</span>
<a href="#l32.20"></a><span id="l32.20">   });</span>
<a href="#l32.21"></a><span id="l32.21"> }</span>
<a href="#l32.22"></a><span id="l32.22"> </span>
<a href="#l32.23"></a><span id="l32.23"> /**</span>
<a href="#l32.24"></a><span id="l32.24">  *  Choose to modify just one occurrence of a repeating event</span>
<a href="#l32.25"></a><span id="l32.25">  *  @param controller - Mozmill window controller</span>
<a href="#l32.26"></a><span id="l32.26">  *  @param attendees - whether there are attendees that can be notified or not</span>
<a href="#l32.27"></a><span id="l32.27">  */</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineminus">-function handleOccurrenceModification(controller, attendees){</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineplus">+function handleOccurrenceModification(controller, attendees) {</span>
<a href="#l32.30"></a><span id="l32.30">   handleOccurrenceDeletion(controller, attendees);</span>
<a href="#l32.31"></a><span id="l32.31"> }</span>
<a href="#l32.32"></a><span id="l32.32"> </span>
<a href="#l32.33"></a><span id="l32.33"> /**</span>
<a href="#l32.34"></a><span id="l32.34">  *  Choose to modify all occurrences of a repeating event</span>
<a href="#l32.35"></a><span id="l32.35">  *  @param controller - Mozmill window controller</span>
<a href="#l32.36"></a><span id="l32.36">  *  @param attendees - whether there are attendees that can be notified or not</span>
<a href="#l32.37"></a><span id="l32.37">  */</span>
<a href="#l32.38"></a><span id="l32.38" class="difflineminus">-function handleParentModification(controller, attendees){</span>
<a href="#l32.39"></a><span id="l32.39" class="difflineplus">+function handleParentModification(controller, attendees) {</span>
<a href="#l32.40"></a><span id="l32.40">   handleParentDeletion(controller, attendees);</span>
<a href="#l32.41"></a><span id="l32.41"> }</span>
<a href="#l32.42"></a><span id="l32.42"> </span>
<a href="#l32.43"></a><span id="l32.43"> /**</span>
<a href="#l32.44"></a><span id="l32.44">  *  Switch to a view</span>
<a href="#l32.45"></a><span id="l32.45">  *  @param controller - Mozmill window controller</span>
<a href="#l32.46"></a><span id="l32.46">  *  @param view - day, week, multiweek or month</span>
<a href="#l32.47"></a><span id="l32.47">  */</span>
<a href="#l32.48"></a><span id="l32.48" class="difflineminus">-function switchToView(controller, view){</span>
<a href="#l32.49"></a><span id="l32.49" class="difflineminus">-  switch (view){</span>
<a href="#l32.50"></a><span id="l32.50" class="difflineplus">+function switchToView(controller, view) {</span>
<a href="#l32.51"></a><span id="l32.51" class="difflineplus">+  switch (view) {</span>
<a href="#l32.52"></a><span id="l32.52">     case &quot;week&quot;:</span>
<a href="#l32.53"></a><span id="l32.53">       controller.waitThenClick(new elementslib.ID(controller.window.document,</span>
<a href="#l32.54"></a><span id="l32.54">         &quot;calendar-week-view-button&quot;));</span>
<a href="#l32.55"></a><span id="l32.55">       controller.waitFor(function() {</span>
<a href="#l32.56"></a><span id="l32.56">         let button = (new elementslib.ID(controller.window.document,</span>
<a href="#l32.57"></a><span id="l32.57">         &quot;calendar-week-view-button&quot;));</span>
<a href="#l32.58"></a><span id="l32.58">         return button.getNode().selected == true;</span>
<a href="#l32.59"></a><span id="l32.59">       });</span>
<a href="#l32.60"></a><span id="l32.60" class="difflineat">@@ -142,17 +142,17 @@ function switchToView(controller, view){</span>
<a href="#l32.61"></a><span id="l32.61"> </span>
<a href="#l32.62"></a><span id="l32.62"> /**</span>
<a href="#l32.63"></a><span id="l32.63">  *  Go to a specific date using minimonth</span>
<a href="#l32.64"></a><span id="l32.64">  *  @param controller - main window controller</span>
<a href="#l32.65"></a><span id="l32.65">  *  @param year - four-digit year</span>
<a href="#l32.66"></a><span id="l32.66">  *  @param month - 1-based index of a month</span>
<a href="#l32.67"></a><span id="l32.67">  *  @param day - 1-based index of a day</span>
<a href="#l32.68"></a><span id="l32.68">  */</span>
<a href="#l32.69"></a><span id="l32.69" class="difflineminus">-function goToDate(controller, year, month, day){</span>
<a href="#l32.70"></a><span id="l32.70" class="difflineplus">+function goToDate(controller, year, month, day) {</span>
<a href="#l32.71"></a><span id="l32.71">   let miniMonth = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l32.72"></a><span id="l32.72">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l32.73"></a><span id="l32.73">     + 'id(&quot;minimonth-pane&quot;)/{&quot;align&quot;:&quot;center&quot;}/id(&quot;calMinimonthBox&quot;)/id(&quot;calMinimonth&quot;)/';</span>
<a href="#l32.74"></a><span id="l32.74">   let activeYear = (new elementslib.Lookup(controller.window.document, miniMonth</span>
<a href="#l32.75"></a><span id="l32.75">     + 'anon({&quot;anonid&quot;:&quot;minimonth-header&quot;})/anon({&quot;anonid&quot;:&quot;minmonth-popupset&quot;})/'</span>
<a href="#l32.76"></a><span id="l32.76">     + 'anon({&quot;anonid&quot;:&quot;years-popup&quot;})/[0]/{&quot;current&quot;:&quot;true&quot;}')).getNode().getAttribute(&quot;value&quot;);</span>
<a href="#l32.77"></a><span id="l32.77">   let activeMonth = (new elementslib.Lookup(controller.window.document, miniMonth</span>
<a href="#l32.78"></a><span id="l32.78">     + 'anon({&quot;anonid&quot;:&quot;minimonth-header&quot;})/anon({&quot;anonid&quot;:&quot;minmonth-popupset&quot;})/'</span>
<a href="#l32.79"></a><span id="l32.79" class="difflineat">@@ -169,17 +169,17 @@ function goToDate(controller, year, mont</span>
<a href="#l32.80"></a><span id="l32.80">         + 'anon({&quot;anonid&quot;:&quot;minimonth-header&quot;})/anon({&quot;anonid&quot;:&quot;minmonth-popupset&quot;})/'</span>
<a href="#l32.81"></a><span id="l32.81">         + 'anon({&quot;anonid&quot;:&quot;years-popup&quot;})/[0]/{&quot;class&quot;:&quot;autorepeatbutton-down&quot;}')).getNode();</span>
<a href="#l32.82"></a><span id="l32.82"> </span>
<a href="#l32.83"></a><span id="l32.83">     // pick year</span>
<a href="#l32.84"></a><span id="l32.84">     controller.click(new elementslib.Lookup(controller.window.document, miniMonth</span>
<a href="#l32.85"></a><span id="l32.85">       + 'anon({&quot;anonid&quot;:&quot;minimonth-header&quot;})/anon({&quot;anonid&quot;:&quot;yearcell&quot;})'));</span>
<a href="#l32.86"></a><span id="l32.86">     controller.sleep(500);</span>
<a href="#l32.87"></a><span id="l32.87"> </span>
<a href="#l32.88"></a><span id="l32.88" class="difflineminus">-    for (let i = 0; i &lt; Math.abs(yearDifference); i++){</span>
<a href="#l32.89"></a><span id="l32.89" class="difflineplus">+    for (let i = 0; i &lt; Math.abs(yearDifference); i++) {</span>
<a href="#l32.90"></a><span id="l32.90">       scrollArrow.doCommand();</span>
<a href="#l32.91"></a><span id="l32.91">       controller.sleep(100);</span>
<a href="#l32.92"></a><span id="l32.92">     }</span>
<a href="#l32.93"></a><span id="l32.93"> </span>
<a href="#l32.94"></a><span id="l32.94">     controller.click(new elementslib.Lookup(controller.window.document, miniMonth</span>
<a href="#l32.95"></a><span id="l32.95">       + 'anon({&quot;anonid&quot;:&quot;minimonth-header&quot;})/anon({&quot;anonid&quot;:&quot;minmonth-popupset&quot;})/'</span>
<a href="#l32.96"></a><span id="l32.96">       + 'anon({&quot;anonid&quot;:&quot;years-popup&quot;})/[0]/{&quot;value&quot;:&quot;' + year + '&quot;}'));</span>
<a href="#l32.97"></a><span id="l32.97">     controller.sleep(500);</span>
<a href="#l32.98"></a><span id="l32.98" class="difflineat">@@ -212,27 +212,27 @@ function goToDate(controller, year, mont</span>
<a href="#l32.99"></a><span id="l32.99">  *  @param controller - main window controller</span>
<a href="#l32.100"></a><span id="l32.100">  *  @param view - day, week, multiweek or month</span>
<a href="#l32.101"></a><span id="l32.101">  *  @param option - bg for creating event, fg for checking</span>
<a href="#l32.102"></a><span id="l32.102">  *  @param row - only used in multiweek and month view, 1-based index of a row</span>
<a href="#l32.103"></a><span id="l32.103">  *  @param column - 1-based index of a column</span>
<a href="#l32.104"></a><span id="l32.104">  *  @param hour - index of hour box</span>
<a href="#l32.105"></a><span id="l32.105">  *  @returns path string</span>
<a href="#l32.106"></a><span id="l32.106">  */</span>
<a href="#l32.107"></a><span id="l32.107" class="difflineminus">-function getEventBoxPath(controller, view, option, row, column, hour){</span>
<a href="#l32.108"></a><span id="l32.108" class="difflineplus">+function getEventBoxPath(controller, view, option, row, column, hour) {</span>
<a href="#l32.109"></a><span id="l32.109">   let viewDeck = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l32.110"></a><span id="l32.110">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span>
<a href="#l32.111"></a><span id="l32.111">     + 'id(&quot;calendarDisplayDeck&quot;)/id(&quot;calendar-view-box&quot;)/id(&quot;view-deck&quot;)';</span>
<a href="#l32.112"></a><span id="l32.112">   let dayView = viewDeck + '/id(&quot;day-view&quot;)';</span>
<a href="#l32.113"></a><span id="l32.113">   let weekView = viewDeck + '/id(&quot;week-view&quot;)';</span>
<a href="#l32.114"></a><span id="l32.114">   let multiweekView = viewDeck + '/id(&quot;multiweek-view&quot;)';</span>
<a href="#l32.115"></a><span id="l32.115">   let monthView = viewDeck + '/id(&quot;month-view&quot;)';</span>
<a href="#l32.116"></a><span id="l32.116"> </span>
<a href="#l32.117"></a><span id="l32.117">   let path = '';</span>
<a href="#l32.118"></a><span id="l32.118" class="difflineminus">-  switch (view){</span>
<a href="#l32.119"></a><span id="l32.119" class="difflineplus">+  switch (view) {</span>
<a href="#l32.120"></a><span id="l32.120">     case &quot;week&quot;:</span>
<a href="#l32.121"></a><span id="l32.121">       path += weekView;</span>
<a href="#l32.122"></a><span id="l32.122">       break;</span>
<a href="#l32.123"></a><span id="l32.123">     case &quot;multiweek&quot;:</span>
<a href="#l32.124"></a><span id="l32.124">       path += multiweekView;</span>
<a href="#l32.125"></a><span id="l32.125">       break;</span>
<a href="#l32.126"></a><span id="l32.126">     case &quot;month&quot;:</span>
<a href="#l32.127"></a><span id="l32.127">       path += monthView;</span>
<a href="#l32.128"></a><span id="l32.128" class="difflineat">@@ -268,40 +268,40 @@ function getEventBoxPath(controller, vie</span>
<a href="#l32.129"></a><span id="l32.129">     return path;</span>
<a href="#l32.130"></a><span id="l32.130">   }</span>
<a href="#l32.131"></a><span id="l32.131"> }</span>
<a href="#l32.132"></a><span id="l32.132"> </span>
<a href="#l32.133"></a><span id="l32.133"> /**</span>
<a href="#l32.134"></a><span id="l32.134">  * @param controller - Mozmill window controller</span>
<a href="#l32.135"></a><span id="l32.135">  * @param n - how many times next button in view is clicked</span>
<a href="#l32.136"></a><span id="l32.136">  */</span>
<a href="#l32.137"></a><span id="l32.137" class="difflineminus">-function forward(controller, n){</span>
<a href="#l32.138"></a><span id="l32.138" class="difflineminus">-  for (let i = 0; i &lt; n; i++){</span>
<a href="#l32.139"></a><span id="l32.139" class="difflineplus">+function forward(controller, n) {</span>
<a href="#l32.140"></a><span id="l32.140" class="difflineplus">+  for (let i = 0; i &lt; n; i++) {</span>
<a href="#l32.141"></a><span id="l32.141">     controller.click(new elementslib.ID(controller.window.document, &quot;next-view-button&quot;));</span>
<a href="#l32.142"></a><span id="l32.142">     controller.sleep(100);</span>
<a href="#l32.143"></a><span id="l32.143">   }</span>
<a href="#l32.144"></a><span id="l32.144"> }</span>
<a href="#l32.145"></a><span id="l32.145"> </span>
<a href="#l32.146"></a><span id="l32.146"> /**</span>
<a href="#l32.147"></a><span id="l32.147">  * @param controller - Mozmill window controller</span>
<a href="#l32.148"></a><span id="l32.148">  * @param n - how many times previous button in view is clicked</span>
<a href="#l32.149"></a><span id="l32.149">  */</span>
<a href="#l32.150"></a><span id="l32.150" class="difflineminus">-function back(controller, n){</span>
<a href="#l32.151"></a><span id="l32.151" class="difflineminus">-  for (let i = 0; i &lt; n; i++){</span>
<a href="#l32.152"></a><span id="l32.152" class="difflineplus">+function back(controller, n) {</span>
<a href="#l32.153"></a><span id="l32.153" class="difflineplus">+  for (let i = 0; i &lt; n; i++) {</span>
<a href="#l32.154"></a><span id="l32.154">     controller.click(new elementslib.ID(controller.window.document, &quot;previous-view-button&quot;));</span>
<a href="#l32.155"></a><span id="l32.155">     controller.sleep(100);</span>
<a href="#l32.156"></a><span id="l32.156">   }</span>
<a href="#l32.157"></a><span id="l32.157"> }</span>
<a href="#l32.158"></a><span id="l32.158"> </span>
<a href="#l32.159"></a><span id="l32.159"> /**</span>
<a href="#l32.160"></a><span id="l32.160">  * Deletes all calendars with given name</span>
<a href="#l32.161"></a><span id="l32.161">  * @param controller - Mozmill window controller</span>
<a href="#l32.162"></a><span id="l32.162">  * @param name - calendar name</span>
<a href="#l32.163"></a><span id="l32.163">  */</span>
<a href="#l32.164"></a><span id="l32.164" class="difflineminus">-function deleteCalendars(controller, name){</span>
<a href="#l32.165"></a><span id="l32.165" class="difflineplus">+function deleteCalendars(controller, name) {</span>
<a href="#l32.166"></a><span id="l32.166">   let defaultView = (new elementslib.ID(controller.window.document, &quot;messengerWindow&quot;))</span>
<a href="#l32.167"></a><span id="l32.167">                     .getNode().ownerDocument.defaultView;</span>
<a href="#l32.168"></a><span id="l32.168">   let manager = defaultView.getCalendarManager();</span>
<a href="#l32.169"></a><span id="l32.169">   let cals = manager.getCalendars({});</span>
<a href="#l32.170"></a><span id="l32.170"> </span>
<a href="#l32.171"></a><span id="l32.171">   for (let i = 0; i &lt; cals.length; i++) {</span>
<a href="#l32.172"></a><span id="l32.172">     if (cals[i].name == name) {</span>
<a href="#l32.173"></a><span id="l32.173">         manager.removeCalendar(cals[i]);</span>
<a href="#l32.174"></a><span id="l32.174" class="difflineat">@@ -309,17 +309,17 @@ function deleteCalendars(controller, nam</span>
<a href="#l32.175"></a><span id="l32.175">   }</span>
<a href="#l32.176"></a><span id="l32.176"> }</span>
<a href="#l32.177"></a><span id="l32.177"> </span>
<a href="#l32.178"></a><span id="l32.178"> /**</span>
<a href="#l32.179"></a><span id="l32.179">  * Creates local calendar with given name and select it in calendars list</span>
<a href="#l32.180"></a><span id="l32.180">  * @param controller - Mozmill window controller</span>
<a href="#l32.181"></a><span id="l32.181">  * @param name - calendar name</span>
<a href="#l32.182"></a><span id="l32.182">  */</span>
<a href="#l32.183"></a><span id="l32.183" class="difflineminus">-function createCalendar(controller, name){</span>
<a href="#l32.184"></a><span id="l32.184" class="difflineplus">+function createCalendar(controller, name) {</span>
<a href="#l32.185"></a><span id="l32.185">   let defaultView = (new elementslib.ID(controller.window.document, &quot;messengerWindow&quot;))</span>
<a href="#l32.186"></a><span id="l32.186">                     .getNode().ownerDocument.defaultView;</span>
<a href="#l32.187"></a><span id="l32.187">   let manager = defaultView.getCalendarManager();</span>
<a href="#l32.188"></a><span id="l32.188"> </span>
<a href="#l32.189"></a><span id="l32.189">   let url = defaultView.makeURL(&quot;moz-storage-calendar://&quot;);</span>
<a href="#l32.190"></a><span id="l32.190">   let calendar = manager.createCalendar(&quot;storage&quot;, url);</span>
<a href="#l32.191"></a><span id="l32.191">   calendar.name = name;</span>
<a href="#l32.192"></a><span id="l32.192">   manager.registerCalendar(calendar);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

