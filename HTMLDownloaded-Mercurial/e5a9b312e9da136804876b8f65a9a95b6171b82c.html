<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 16816:e5a9b312e9da136804876b8f65a9a95b6171b82c</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ e5a9b312e9da136804876b8f65a9a95b6171b82c" />
<meta property="og:url" content="/comm-central/rev/e5a9b312e9da136804876b8f65a9a95b6171b82c" />
<meta property="og:description" content="Bug 1054357 Part 2 Update c-c to address non-backward compatible changes to JS let semantics after bug 1001090 landed in m-c. r=Standard8 CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / e5a9b312e9da136804876b8f65a9a95b6171b82c 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/e5a9b312e9da136804876b8f65a9a95b6171b82c">shortlog</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/e5a9b312e9da136804876b8f65a9a95b6171b82c">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c">files</a> |
changeset |
<a href="/comm-central/raw-rev/e5a9b312e9da136804876b8f65a9a95b6171b82c">raw</a>  | <a href="/comm-central/archive/e5a9b312e9da136804876b8f65a9a95b6171b82c.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1054357">Bug 1054357</a> Part 2 Update c-c to address non-backward compatible changes to JS let semantics after <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1001090">bug 1001090</a> landed in m-c. r=Standard8 CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 17 Sep 2014 09:20:49 +0200</td></tr>

<tr>
 <td>changeset 16816</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/e5a9b312e9da136804876b8f65a9a95b6171b82c">e5a9b312e9da136804876b8f65a9a95b6171b82c</a></td>
</tr>



<tr>
<td>parent 16815</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/507a692b707c73939072ba86dd442e437f454d4c">507a692b707c73939072ba86dd442e437f454d4c</a>
</td>
</tr>

<tr>
<td>child 16817</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f1e58fccab148fbde9367ea349aeb21d9baaa0a0">f1e58fccab148fbde9367ea349aeb21d9baaa0a0</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=e5a9b312e9da136804876b8f65a9a95b6171b82c">10463</a></td></tr>
<tr><td>push user</td><td>mbanner@mozilla.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 17 Sep 2014 07:33:22 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@e5a9b312e9da [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e5a9b312e9da136804876b8f65a9a95b6171b82c">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e5a9b312e9da136804876b8f65a9a95b6171b82c&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e5a9b312e9da136804876b8f65a9a95b6171b82c&newProject=comm-central&newRevision=507a692b707c73939072ba86dd442e437f454d4c&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e5a9b312e9da136804876b8f65a9a95b6171b82c&newProject=comm-central&newRevision=507a692b707c73939072ba86dd442e437f454d4c&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e5a9b312e9da136804876b8f65a9a95b6171b82c&newProject=comm-central&newRevision=507a692b707c73939072ba86dd442e437f454d4c&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1054357">1054357</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1001090">1001090</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1054357">Bug 1054357</a> Part 2 Update c-c to address non-backward compatible changes to JS let semantics after <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1001090">bug 1001090</a> landed in m-c. r=Standard8 CLOSED TREE</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testDailyRecurrence.js">calendar/test/mozmill/recurrence/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testDailyRecurrence.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testDailyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/testTodayPane.js">calendar/test/mozmill/testTodayPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/testTodayPane.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/testTodayPane.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/testTodayPane.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/testTodayPane.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/calendar/test/mozmill/testTodayPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/base/content/tabmail.xml">mail/base/content/tabmail.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/base/content/tabmail.xml">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/base/content/tabmail.xml">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/base/content/tabmail.xml">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/base/content/tabmail.xml">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/base/content/tabmail.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/composition/test-attachment-reminder.js">mail/test/mozmill/composition/test-attachment-reminder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/composition/test-attachment-reminder.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/composition/test-attachment-reminder.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/composition/test-attachment-reminder.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/composition/test-attachment-reminder.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/composition/test-attachment-reminder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-policy/test-general-content-policy.js">mail/test/mozmill/content-policy/test-general-content-policy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-policy/test-general-content-policy.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-policy/test-general-content-policy.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-policy/test-general-content-policy.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-policy/test-general-content-policy.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-policy/test-general-content-policy.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-tabs/test-content-tab.js">mail/test/mozmill/content-tabs/test-content-tab.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-tabs/test-content-tab.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-tabs/test-content-tab.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-tabs/test-content-tab.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-tabs/test-content-tab.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/content-tabs/test-content-tab.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-message-commands.js">mail/test/mozmill/folder-display/test-message-commands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-message-commands.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-message-commands.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-message-commands.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-message-commands.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-message-commands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-recent-menu.js">mail/test/mozmill/folder-display/test-recent-menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-recent-menu.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-recent-menu.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-recent-menu.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-recent-menu.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-recent-menu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-summarization.js">mail/test/mozmill/folder-display/test-summarization.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-summarization.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-summarization.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-summarization.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-summarization.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/folder-display/test-summarization.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/message-header/test-message-header.js">mail/test/mozmill/message-header/test-message-header.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/message-header/test-message-header.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/message-header/test-message-header.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/message-header/test-message-header.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/message-header/test-message-header.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/message-header/test-message-header.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/newmailaccount/test-newmailaccount.js">mail/test/mozmill/newmailaccount/test-newmailaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/newmailaccount/test-newmailaccount.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/newmailaccount/test-newmailaccount.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/newmailaccount/test-newmailaccount.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/newmailaccount/test-newmailaccount.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/newmailaccount/test-newmailaccount.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/session-store/test-session-store.js">mail/test/mozmill/session-store/test-session-store.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/session-store/test-session-store.js">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/session-store/test-session-store.js">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/session-store/test-session-store.js">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/session-store/test-session-store.js">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mail/test/mozmill/session-store/test-session-store.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mailnews/base/content/folderWidgets.xml">mailnews/base/content/folderWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e5a9b312e9da136804876b8f65a9a95b6171b82c/mailnews/base/content/folderWidgets.xml">file</a> |
<a href="/comm-central/annotate/e5a9b312e9da136804876b8f65a9a95b6171b82c/mailnews/base/content/folderWidgets.xml">annotate</a> |
<a href="/comm-central/diff/e5a9b312e9da136804876b8f65a9a95b6171b82c/mailnews/base/content/folderWidgets.xml">diff</a> |
<a href="/comm-central/comparison/e5a9b312e9da136804876b8f65a9a95b6171b82c/mailnews/base/content/folderWidgets.xml">comparison</a> |
<a href="/comm-central/log/e5a9b312e9da136804876b8f65a9a95b6171b82c/mailnews/base/content/folderWidgets.xml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testDailyRecurrence.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testDailyRecurrence.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -126,17 +126,17 @@ var testDailyRecurrence = function () {</span>
<a href="#l1.4"></a><span id="l1.4">   calUtils.back(controller, 1);</span>
<a href="#l1.5"></a><span id="l1.5">   </span>
<a href="#l1.6"></a><span id="l1.6">   calUtils.handleParentModification(controller, false);</span>
<a href="#l1.7"></a><span id="l1.7">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l1.8"></a><span id="l1.8">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l1.9"></a><span id="l1.9">       + eventPath));</span>
<a href="#l1.10"></a><span id="l1.10">   </span>
<a href="#l1.11"></a><span id="l1.11">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  let event = new mozmill.controller.MozMillController(mozmill.utils</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  event = new mozmill.controller.MozMillController(mozmill.utils</span>
<a href="#l1.14"></a><span id="l1.14">     .getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l1.15"></a><span id="l1.15">   </span>
<a href="#l1.16"></a><span id="l1.16">   event.waitForElement(new elementslib.ID(event.window.document, &quot;item-repeat&quot;));</span>
<a href="#l1.17"></a><span id="l1.17">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined,</span>
<a href="#l1.18"></a><span id="l1.18">     &quot;every.weekday&quot;);</span>
<a href="#l1.19"></a><span id="l1.19">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l1.20"></a><span id="l1.20">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l1.21"></a><span id="l1.21">   </span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -186,17 +186,17 @@ var testDailyRecurrence = function () {</span>
<a href="#l1.23"></a><span id="l1.23">       + eventPath;</span>
<a href="#l1.24"></a><span id="l1.24">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l1.25"></a><span id="l1.25">     day = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, i, 7, undefined)</span>
<a href="#l1.26"></a><span id="l1.26">       + eventPath;</span>
<a href="#l1.27"></a><span id="l1.27">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l1.28"></a><span id="l1.28">   }</span>
<a href="#l1.29"></a><span id="l1.29">   </span>
<a href="#l1.30"></a><span id="l1.30">   // delete event</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-  let day = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, 5, undefined)</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+  day = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, 5, undefined)</span>
<a href="#l1.33"></a><span id="l1.33">     + eventPath;</span>
<a href="#l1.34"></a><span id="l1.34">   controller.click(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l1.35"></a><span id="l1.35">   calUtils.handleParentDeletion(controller, false);</span>
<a href="#l1.36"></a><span id="l1.36">   controller.keypress(new elementslib.ID(controller.window.document, &quot;month-view&quot;),</span>
<a href="#l1.37"></a><span id="l1.37">     &quot;VK_DELETE&quot;, {});</span>
<a href="#l1.38"></a><span id="l1.38">   controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l1.39"></a><span id="l1.39"> }</span>
<a href="#l1.40"></a><span id="l1.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -74,17 +74,17 @@ var testWeeklyWithExceptionRecurrence = </span>
<a href="#l2.4"></a><span id="l2.4">   calUtils.goToDate(controller, 2009, 1, 7);</span>
<a href="#l2.5"></a><span id="l2.5">   calUtils.handleParentModification(controller, false);</span>
<a href="#l2.6"></a><span id="l2.6">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l2.7"></a><span id="l2.7">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l2.8"></a><span id="l2.8">       + eventPath));</span>
<a href="#l2.9"></a><span id="l2.9">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l2.10"></a><span id="l2.10">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l2.11"></a><span id="l2.11">   </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  let md = new modalDialog.modalDialog(event.window);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  md = new modalDialog.modalDialog(event.window);</span>
<a href="#l2.14"></a><span id="l2.14">   md.start(changeRecurrence);</span>
<a href="#l2.15"></a><span id="l2.15">   event.waitForElement(new elementslib.ID(event.window.document, &quot;item-repeat&quot;));</span>
<a href="#l2.16"></a><span id="l2.16">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined, &quot;custom&quot;);</span>
<a href="#l2.17"></a><span id="l2.17">   </span>
<a href="#l2.18"></a><span id="l2.18">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l2.19"></a><span id="l2.19">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l2.20"></a><span id="l2.20">   </span>
<a href="#l2.21"></a><span id="l2.21">   // check two weeks</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -132,17 +132,17 @@ var testDailyRecurrence = function () {</span>
<a href="#l3.4"></a><span id="l3.4">   calUtils.back(controller, 1);</span>
<a href="#l3.5"></a><span id="l3.5">   </span>
<a href="#l3.6"></a><span id="l3.6">   calUtils.handleParentModification(controller, false);</span>
<a href="#l3.7"></a><span id="l3.7">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l3.8"></a><span id="l3.8">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l3.9"></a><span id="l3.9">       + eventPath));</span>
<a href="#l3.10"></a><span id="l3.10">   </span>
<a href="#l3.11"></a><span id="l3.11">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  let event = new mozmill.controller.MozMillController(mozmill.utils</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  event = new mozmill.controller.MozMillController(mozmill.utils</span>
<a href="#l3.14"></a><span id="l3.14">     .getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l3.15"></a><span id="l3.15">   </span>
<a href="#l3.16"></a><span id="l3.16">   event.waitForElement(new elementslib.ID(event.window.document, &quot;item-repeat&quot;));</span>
<a href="#l3.17"></a><span id="l3.17">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined,</span>
<a href="#l3.18"></a><span id="l3.18">     &quot;every.weekday&quot;);</span>
<a href="#l3.19"></a><span id="l3.19">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l3.20"></a><span id="l3.20">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l3.21"></a><span id="l3.21">   </span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -192,17 +192,17 @@ var testDailyRecurrence = function () {</span>
<a href="#l3.23"></a><span id="l3.23">       + eventPath;</span>
<a href="#l3.24"></a><span id="l3.24">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l3.25"></a><span id="l3.25">     day = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, i, 7, undefined)</span>
<a href="#l3.26"></a><span id="l3.26">       + eventPath;</span>
<a href="#l3.27"></a><span id="l3.27">     controller.assertNodeNotExist(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l3.28"></a><span id="l3.28">   }</span>
<a href="#l3.29"></a><span id="l3.29">   </span>
<a href="#l3.30"></a><span id="l3.30">   // delete event</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-  let day = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, 5, undefined)</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+  day = calUtils.getEventBoxPath(controller, &quot;month&quot;, calUtils.EVENT_BOX, 1, 5, undefined)</span>
<a href="#l3.33"></a><span id="l3.33">     + eventPath</span>
<a href="#l3.34"></a><span id="l3.34">   controller.click(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l3.35"></a><span id="l3.35">   calUtils.handleParentDeletion(controller, false);</span>
<a href="#l3.36"></a><span id="l3.36">   controller.keypress(new elementslib.ID(controller.window.document, &quot;month-view&quot;),</span>
<a href="#l3.37"></a><span id="l3.37">     &quot;VK_DELETE&quot;, {});</span>
<a href="#l3.38"></a><span id="l3.38">   controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document, day));</span>
<a href="#l3.39"></a><span id="l3.39">   </span>
<a href="#l3.40"></a><span id="l3.40">   // reset view</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -79,17 +79,17 @@ var testWeeklyWithExceptionRecurrence = </span>
<a href="#l4.4"></a><span id="l4.4">   calUtils.goToDate(controller, 2009, 1, 7);</span>
<a href="#l4.5"></a><span id="l4.5">   calUtils.handleParentModification(controller, false);</span>
<a href="#l4.6"></a><span id="l4.6">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l4.7"></a><span id="l4.7">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l4.8"></a><span id="l4.8">       + eventPath));</span>
<a href="#l4.9"></a><span id="l4.9">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l4.10"></a><span id="l4.10">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l4.11"></a><span id="l4.11">   </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  let md = new modalDialog.modalDialog(event.window);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  md = new modalDialog.modalDialog(event.window);</span>
<a href="#l4.14"></a><span id="l4.14">   md.start(changeRecurrence);</span>
<a href="#l4.15"></a><span id="l4.15">   event.waitForElement(new elementslib.ID(event.window.document, &quot;item-repeat&quot;));</span>
<a href="#l4.16"></a><span id="l4.16">   event.select(new elementslib.ID(event.window.document, &quot;item-repeat&quot;), undefined, undefined, &quot;custom&quot;);</span>
<a href="#l4.17"></a><span id="l4.17">   </span>
<a href="#l4.18"></a><span id="l4.18">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l4.19"></a><span id="l4.19">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l4.20"></a><span id="l4.20">   </span>
<a href="#l4.21"></a><span id="l4.21">   // check two weeks</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -213,17 +213,17 @@ var testTodayPane = function () {</span>
<a href="#l5.4"></a><span id="l5.4">     + 'anon({&quot;class&quot;:&quot;checkbox-check&quot;})'));</span>
<a href="#l5.5"></a><span id="l5.5">   controller.click(new elementslib.Lookup(controller.window.document, '/id(&quot;messengerWindow&quot;)/'</span>
<a href="#l5.6"></a><span id="l5.6">     + 'id(&quot;tabmail-container&quot;)/id(&quot;today-pane-panel&quot;)/[1]/id(&quot;agenda-panel&quot;)/[3]/'</span>
<a href="#l5.7"></a><span id="l5.7">     + 'id(&quot;agenda-listbox&quot;)/id(&quot;nextweek-header&quot;)/anon({&quot;anonid&quot;:&quot;agenda-checkbox-widget&quot;})/'</span>
<a href="#l5.8"></a><span id="l5.8">     + 'anon({&quot;class&quot;:&quot;checkbox-check&quot;})'));</span>
<a href="#l5.9"></a><span id="l5.9">   controller.sleep(WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">   // verify tomorrow and soon collapsed</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  let tomorrow = (new elementslib.Lookup(controller.window.document,</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  tomorrow = (new elementslib.Lookup(controller.window.document,</span>
<a href="#l5.14"></a><span id="l5.14">     '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;today-pane-panel&quot;)/[1]/id(&quot;agenda-panel&quot;)/'</span>
<a href="#l5.15"></a><span id="l5.15">     + '{&quot;flex&quot;:&quot;1&quot;}/id(&quot;agenda-listbox&quot;)/[1]/anon({&quot;class&quot;:&quot;agenda-checkbox&quot;})')).getNode();</span>
<a href="#l5.16"></a><span id="l5.16">   let soon = (new elementslib.Lookup(controller.window.document,</span>
<a href="#l5.17"></a><span id="l5.17">     '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;today-pane-panel&quot;)/[1]/id(&quot;agenda-panel&quot;)/'</span>
<a href="#l5.18"></a><span id="l5.18">     + '{&quot;flex&quot;:&quot;1&quot;}/id(&quot;agenda-listbox&quot;)/[2]/anon({&quot;class&quot;:&quot;agenda-checkbox&quot;})')).getNode();</span>
<a href="#l5.19"></a><span id="l5.19"> // TODO This is failing, which might actually be an error in our code!</span>
<a href="#l5.20"></a><span id="l5.20"> //  controller.assertJS(!tomorrow.hasAttribute(&quot;checked&quot;)</span>
<a href="#l5.21"></a><span id="l5.21"> //    || tomorrow.getAttribute(&quot;checked&quot;) != &quot;true&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/tabmail.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/tabmail.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -2083,17 +2083,17 @@</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">         ctx.drawWindow(window,</span>
<a href="#l6.6"></a><span id="l6.6">                 panel.boxObject.screenX - window.mozInnerScreenX,</span>
<a href="#l6.7"></a><span id="l6.7">                 panel.boxObject.screenY - window.mozInnerScreenY,</span>
<a href="#l6.8"></a><span id="l6.8">                 snippetWidth,</span>
<a href="#l6.9"></a><span id="l6.9">                 snippetWidth * 0.5625,</span>
<a href="#l6.10"></a><span id="l6.10">                 &quot;rgb(255,255,255)&quot;);</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-        var dt = event.dataTransfer;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+        dt = event.dataTransfer;</span>
<a href="#l6.14"></a><span id="l6.14">         dt.setDragImage(thumbnail, 0, 0);</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16">         event.stopPropagation();</span>
<a href="#l6.17"></a><span id="l6.17">       ]]&gt;&lt;/handler&gt;</span>
<a href="#l6.18"></a><span id="l6.18">       &lt;handler event=&quot;dragover&quot;&gt;&lt;![CDATA[</span>
<a href="#l6.19"></a><span id="l6.19">         let dt = event.dataTransfer;</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">         if (dt.mozItemCount == 0)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-attachment-reminder.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-attachment-reminder.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -257,17 +257,17 @@ function test_manual_attachment_reminder</span>
<a href="#l7.4"></a><span id="l7.4">   assert_automatic_reminder_state(cwc, false);</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6">   // Now close the message with saving it as draft.</span>
<a href="#l7.7"></a><span id="l7.7">   plan_for_modal_dialog(&quot;commonDialog&quot;, click_save_message);</span>
<a href="#l7.8"></a><span id="l7.8">   cwc.window.goDoCommand(&quot;cmd_close&quot;);</span>
<a href="#l7.9"></a><span id="l7.9">   wait_for_modal_dialog(&quot;commonDialog&quot;);</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">   // Open another blank compose window.</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  let cwc = open_compose_new_mail();</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  cwc = open_compose_new_mail();</span>
<a href="#l7.14"></a><span id="l7.14">   // This one should have the reminder disabled.</span>
<a href="#l7.15"></a><span id="l7.15">   assert_manual_reminder_state(cwc, false);</span>
<a href="#l7.16"></a><span id="l7.16">   // There should be no attachment notification.</span>
<a href="#l7.17"></a><span id="l7.17">   assert_automatic_reminder_state(cwc, false);</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19">   close_compose_window(cwc);</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21">   // The draft message was saved into Local Folders/Drafts.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/mozmill/content-policy/test-general-content-policy.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/mozmill/content-policy/test-general-content-policy.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -318,17 +318,17 @@ function checkAllowForHostsWithPerms(tes</span>
<a href="#l8.4"></a><span id="l8.4">   let uri = Services.io.newURI(src, null, null);</span>
<a href="#l8.5"></a><span id="l8.5">   Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l8.6"></a><span id="l8.6">   assert_true(Services.perms.testPermission(uri, &quot;image&quot;) ==</span>
<a href="#l8.7"></a><span id="l8.7">               Services.perms.ALLOW_ACTION);</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9">   // Click back one msg, then the original again, which should now allow loading.</span>
<a href="#l8.10"></a><span id="l8.10">   select_click_row(gMsgNo - 1);</span>
<a href="#l8.11"></a><span id="l8.11">   // Select the newly created message.</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  let msgHdr = select_click_row(gMsgNo);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  msgHdr = select_click_row(gMsgNo);</span>
<a href="#l8.14"></a><span id="l8.14">   assert_equals(msgDbHdr, msgHdr);</span>
<a href="#l8.15"></a><span id="l8.15">   assert_selected_and_displayed(gMsgNo);</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17">   // Now check that the content hasn't been blocked.</span>
<a href="#l8.18"></a><span id="l8.18">   if (!test.checkForAllowed(mozmill.getMail3PaneController()</span>
<a href="#l8.19"></a><span id="l8.19">            .window.content.document.getElementById(&quot;testelement&quot;)))</span>
<a href="#l8.20"></a><span id="l8.20">     throw new Error(test.type + &quot; has been unexpectedly blocked for url=&quot; +</span>
<a href="#l8.21"></a><span id="l8.21">                     uri.spec);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-content-tab.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-content-tab.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -84,17 +84,17 @@ function test_spellcheck_in_content_tabs</span>
<a href="#l9.4"></a><span id="l9.4">   let suggestions = mc.window.document.getElementsByClassName(&quot;spell-suggestion&quot;);</span>
<a href="#l9.5"></a><span id="l9.5">   assert_true(suggestions.length &gt; 0, &quot;What, is zombocom a registered word now?&quot;);</span>
<a href="#l9.6"></a><span id="l9.6">   mc.click(mc.eid(&quot;mailContext-spell-add-to-dictionary&quot;));</span>
<a href="#l9.7"></a><span id="l9.7">   close_popup(mc, eidMailContext);</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9">   // Now check we don't have any suggestionss</span>
<a href="#l9.10"></a><span id="l9.10">   EventUtils.synthesizeMouse(textarea, 5, 5,</span>
<a href="#l9.11"></a><span id="l9.11">                              {type: &quot;contextmenu&quot;, button: 2}, w);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  let suggestions = mc.window.document.getElementsByClassName(&quot;spell-suggestion&quot;);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  suggestions = mc.window.document.getElementsByClassName(&quot;spell-suggestion&quot;);</span>
<a href="#l9.14"></a><span id="l9.14">   assert_true(suggestions.length == 0, &quot;But I just taught you this word!&quot;);</span>
<a href="#l9.15"></a><span id="l9.15">   close_popup(mc, eidMailContext);</span>
<a href="#l9.16"></a><span id="l9.16"> }</span>
<a href="#l9.17"></a><span id="l9.17"> // XXX Currently the spellcheck test has focus issues on non-Mac</span>
<a href="#l9.18"></a><span id="l9.18"> test_spellcheck_in_content_tabs.EXCLUDED_PLATFORMS = ['winnt', 'linux'];</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20"> function test_content_tab_context_menu() {</span>
<a href="#l9.21"></a><span id="l9.21">   let tabmail = mc.tabmail;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-message-commands.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-message-commands.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -483,18 +483,18 @@ function test_disabled_archive() {</span>
<a href="#l10.4"></a><span id="l10.4">   // test message summaries with &quot;large&quot; selection</span>
<a href="#l10.5"></a><span id="l10.5">   mc.folderDisplay.MAX_COUNT_FOR_CAN_ARCHIVE_CHECK = 1;</span>
<a href="#l10.6"></a><span id="l10.6">   select_click_row(0);</span>
<a href="#l10.7"></a><span id="l10.7">   current = select_shift_click_row(2);</span>
<a href="#l10.8"></a><span id="l10.8">   mc.keypress(null, &quot;a&quot;, {});</span>
<a href="#l10.9"></a><span id="l10.9">   assert_selected_and_displayed(current);</span>
<a href="#l10.10"></a><span id="l10.10">   mc.folderDisplay.MAX_COUNT_FOR_CAN_ARCHIVE_CHECK = 100;</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  let htmlframe = mc.e(&quot;multimessage&quot;);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-  let archiveBtn = htmlframe.contentDocument.getElementById(&quot;hdrArchiveButton&quot;);</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+  htmlframe = mc.e(&quot;multimessage&quot;);</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+  archiveBtn = htmlframe.contentDocument.getElementById(&quot;hdrArchiveButton&quot;);</span>
<a href="#l10.16"></a><span id="l10.16">   assert_true(archiveBtn.collapsed,</span>
<a href="#l10.17"></a><span id="l10.17">               &quot;Multi-message archive button should be disabled when &quot; +</span>
<a href="#l10.18"></a><span id="l10.18">               &quot;archiving is disabled!&quot;);</span>
<a href="#l10.19"></a><span id="l10.19"> }</span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21"> function check_tag_in_message(message, tag, isSet) {</span>
<a href="#l10.22"></a><span id="l10.22">   let tagSet = message.getStringProperty(&quot;keywords&quot;).split(&quot; &quot;)</span>
<a href="#l10.23"></a><span id="l10.23">                       .indexOf(tag.key) != -1;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -69,17 +69,17 @@ function test_move_message() {</span>
<a href="#l11.4"></a><span id="l11.4">   mc.waitFor(function () copyListener.copyDone,</span>
<a href="#l11.5"></a><span id="l11.5">              &quot;Timeout waiting for copy to complete&quot;, 10000, 100);</span>
<a href="#l11.6"></a><span id="l11.6">   // We've moved a message to aaafolder2 - it should appear in recent list now.</span>
<a href="#l11.7"></a><span id="l11.7">   // Clicking the menuitem by label is not localizable, but Recent doesn't have an</span>
<a href="#l11.8"></a><span id="l11.8">   // id we can use.</span>
<a href="#l11.9"></a><span id="l11.9">   popups = mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;),</span>
<a href="#l11.10"></a><span id="l11.10">                                       [{id: &quot;mailContext-moveMenu&quot;},</span>
<a href="#l11.11"></a><span id="l11.11">                                        {label: &quot;Recent&quot;}], true);</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  let recentMenu = mc.eid(&quot;mailContext-moveMenu&quot;)</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  recentMenu = mc.eid(&quot;mailContext-moveMenu&quot;)</span>
<a href="#l11.14"></a><span id="l11.14">                      .node.querySelector('[label=&quot;Recent&quot;]');</span>
<a href="#l11.15"></a><span id="l11.15">   let recentChildren = recentMenu.menupopup.children;</span>
<a href="#l11.16"></a><span id="l11.16">   assert_equals(recentChildren.length, gInitRecentMenuCount + 1,</span>
<a href="#l11.17"></a><span id="l11.17">                 &quot;recent menu should have one more child after move&quot;);</span>
<a href="#l11.18"></a><span id="l11.18">   assert_equals(recentChildren[0].label, &quot;aaafolder2&quot;,</span>
<a href="#l11.19"></a><span id="l11.19">                 &quot;recent menu child should be aaafolder2 after move&quot;);</span>
<a href="#l11.20"></a><span id="l11.20">   mc.close_popup_sequence(popups);</span>
<a href="#l11.21"></a><span id="l11.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-summarization.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-summarization.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -292,17 +292,17 @@ function test_summary_when_multiple_iden</span>
<a href="#l12.4"></a><span id="l12.4">   select_click_row(0);</span>
<a href="#l12.5"></a><span id="l12.5">   assert_messages_summarized(mc, mc.folderDisplay.selectedMessages);</span>
<a href="#l12.6"></a><span id="l12.6">   // Thread summary shows a date, while multimessage summary shows a subject.</span>
<a href="#l12.7"></a><span id="l12.7">   assert_summary_contains_N_elts('.item_header &gt; .subject', 0);</span>
<a href="#l12.8"></a><span id="l12.8">   assert_summary_contains_N_elts('.item_header &gt; .date', 2);</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10">   // Second half of the test, makes sure MultiMessageSummary groups messages</span>
<a href="#l12.11"></a><span id="l12.11">   // according to their view thread id</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  let thread1 = create_thread(1);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  thread1 = create_thread(1);</span>
<a href="#l12.14"></a><span id="l12.14">   add_sets_to_folders([folder1], [thread1]);</span>
<a href="#l12.15"></a><span id="l12.15">   be_in_folder(folderVirtual);</span>
<a href="#l12.16"></a><span id="l12.16">   select_shift_click_row(1);</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18">   assert_summary_contains_N_elts('.item_header &gt; .subject', 2);</span>
<a href="#l12.19"></a><span id="l12.19"> }</span>
<a href="#l12.20"></a><span id="l12.20"> </span>
<a href="#l12.21"></a><span id="l12.21"> function extract_first_address(thread)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -480,17 +480,17 @@ function test_more_widget() {</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5">   let showNLinesPref = Services.prefs.getIntPref(&quot;mailnews.headers.show_n_lines_before_more&quot;);</span>
<a href="#l13.6"></a><span id="l13.6">   Services.prefs.clearUserPref(&quot;mailnews.headers.show_n_lines_before_more&quot;);</span>
<a href="#l13.7"></a><span id="l13.7">   change_to_header_normal_mode();</span>
<a href="#l13.8"></a><span id="l13.8">   be_in_folder(folderMore);</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10">   // first test a message with so many addresses that they don't fit in the</span>
<a href="#l13.11"></a><span id="l13.11">   // more widget's tooltip text</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  let msg = select_click_row(0);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  msg = select_click_row(0);</span>
<a href="#l13.14"></a><span id="l13.14">   wait_for_message_display_completion(mc);</span>
<a href="#l13.15"></a><span id="l13.15">   assert_selected_and_displayed(mc, msg);</span>
<a href="#l13.16"></a><span id="l13.16">   subtest_more_button_tooltip(msg);</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18">   // then test a message with so many addresses that they do fit in the</span>
<a href="#l13.19"></a><span id="l13.19">   // more widget's tooltip text</span>
<a href="#l13.20"></a><span id="l13.20">   msg = select_click_row(1);</span>
<a href="#l13.21"></a><span id="l13.21">   wait_for_message_display_completion(mc);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -28,12 +28,12 @@ function setupModule(module) {</span>
<a href="#l14.4"></a><span id="l14.4"> function test_qfb_button_moved() {</span>
<a href="#l14.5"></a><span id="l14.5">   let currentSet = mc.e(&quot;tabbar-toolbar&quot;).currentSet;</span>
<a href="#l14.6"></a><span id="l14.6">   assert_equals(-1, currentSet.indexOf(&quot;qfb-show-filter-bar&quot;),</span>
<a href="#l14.7"></a><span id="l14.7">                 &quot;We found the QFB filter toggle where we shouldn't have.&quot;);</span>
<a href="#l14.8"></a><span id="l14.8"> </span>
<a href="#l14.9"></a><span id="l14.9">   // Now make sure that we've got the QFB filter toggle in the mail bar,</span>
<a href="#l14.10"></a><span id="l14.10">   // and that it is placed before the gloda-search and any spring, spacer,</span>
<a href="#l14.11"></a><span id="l14.11">   // or separator items.</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  let currentSet = mc.e(&quot;mail-bar3&quot;).currentSet;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  currentSet = mc.e(&quot;mail-bar3&quot;).currentSet;</span>
<a href="#l14.14"></a><span id="l14.14">   assert_not_equals(-1, currentSet.indexOf(&quot;button-tag,qfb-show-filter-bar,spring&quot;),</span>
<a href="#l14.15"></a><span id="l14.15">                 &quot;We didn't find the QFB filter toggle where we should have.&quot;);</span>
<a href="#l14.16"></a><span id="l14.16"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -814,17 +814,17 @@ function test_can_pref_off_account_provi</span>
<a href="#l15.4"></a><span id="l15.4">     return !mc.eid(&quot;newCreateEmailAccountMenuItem&quot;).getNode().hidden;</span>
<a href="#l15.5"></a><span id="l15.5">   }, &quot;Timed out waiting for the Account Provisioner menuitem to appear&quot;);</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">   // Open up the Existing Account wizard</span>
<a href="#l15.8"></a><span id="l15.8">   plan_for_new_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l15.9"></a><span id="l15.9">   mc.click(newMailAccountMenuitem);</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">   // Ensure that the existing email account wizard opened.</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  let wizard = wait_for_new_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  wizard = wait_for_new_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">   // Make sure that the button to open the Account Provisioner dialog is</span>
<a href="#l15.16"></a><span id="l15.16">   // NOT hidden.</span>
<a href="#l15.17"></a><span id="l15.17">   assert_false(wizard.eid(&quot;provisioner_button&quot;).getNode().hidden);</span>
<a href="#l15.18"></a><span id="l15.18"> </span>
<a href="#l15.19"></a><span id="l15.19">   // Alright, close up.</span>
<a href="#l15.20"></a><span id="l15.20">   close_window(wizard);</span>
<a href="#l15.21"></a><span id="l15.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/test/mozmill/session-store/test-session-store.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/test/mozmill/session-store/test-session-store.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -233,17 +233,17 @@ function test_message_pane_height_persis</span>
<a href="#l16.4"></a><span id="l16.4">   // Wait for window close async session write to finish.</span>
<a href="#l16.5"></a><span id="l16.5">   controller.sleep(sessionStoreManager._sessionAutoSaveTimerIntervalMS +</span>
<a href="#l16.6"></a><span id="l16.6">                    asyncFileWriteDelayMS);</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8">   mc = open3PaneWindow();</span>
<a href="#l16.9"></a><span id="l16.9">   be_in_folder(folderA);</span>
<a href="#l16.10"></a><span id="l16.10">   assert_message_pane_visible();</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  let actualHeight = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.height;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+  actualHeight = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.height;</span>
<a href="#l16.14"></a><span id="l16.14"> </span>
<a href="#l16.15"></a><span id="l16.15">   assert_equals(newHeight, actualHeight,</span>
<a href="#l16.16"></a><span id="l16.16">     &quot;The message pane height should be &quot; + newHeight + &quot;, but is actually &quot; +</span>
<a href="#l16.17"></a><span id="l16.17">     actualHeight + &quot;. The oldHeight was: &quot; + oldHeight);</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">   // The old height is restored.</span>
<a href="#l16.20"></a><span id="l16.20">   _move_splitter(mc.e(&quot;threadpane-splitter&quot;), 0, -diffHeight);</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -252,17 +252,17 @@ function test_message_pane_height_persis</span>
<a href="#l16.23"></a><span id="l16.23">   // Wait for window close async session write to finish.</span>
<a href="#l16.24"></a><span id="l16.24">   controller.sleep(sessionStoreManager._sessionAutoSaveTimerIntervalMS +</span>
<a href="#l16.25"></a><span id="l16.25">                    asyncFileWriteDelayMS);</span>
<a href="#l16.26"></a><span id="l16.26"> </span>
<a href="#l16.27"></a><span id="l16.27">   mc = open3PaneWindow();</span>
<a href="#l16.28"></a><span id="l16.28">   be_in_folder(folderA);</span>
<a href="#l16.29"></a><span id="l16.29">   assert_message_pane_visible();</span>
<a href="#l16.30"></a><span id="l16.30"> </span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-  let actualHeight = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.height;</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+  actualHeight = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.height;</span>
<a href="#l16.33"></a><span id="l16.33">   assert_equals(oldHeight, actualHeight,</span>
<a href="#l16.34"></a><span id="l16.34">     &quot;The message pane height should be &quot; + oldHeight + &quot;, but is actually &quot; +</span>
<a href="#l16.35"></a><span id="l16.35">     actualHeight);</span>
<a href="#l16.36"></a><span id="l16.36"> </span>
<a href="#l16.37"></a><span id="l16.37">   // We don't need the address book window any more.</span>
<a href="#l16.38"></a><span id="l16.38">   plan_for_window_close(abwc);</span>
<a href="#l16.39"></a><span id="l16.39">   abwc.window.close();</span>
<a href="#l16.40"></a><span id="l16.40">   wait_for_window_close();</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineat">@@ -314,23 +314,23 @@ function test_message_pane_width_persist</span>
<a href="#l16.42"></a><span id="l16.42">   controller.sleep(sessionStoreManager._sessionAutoSaveTimerIntervalMS +</span>
<a href="#l16.43"></a><span id="l16.43">                    asyncFileWriteDelayMS);</span>
<a href="#l16.44"></a><span id="l16.44"> </span>
<a href="#l16.45"></a><span id="l16.45">   mc = open3PaneWindow();</span>
<a href="#l16.46"></a><span id="l16.46">   be_in_folder(folderA);</span>
<a href="#l16.47"></a><span id="l16.47">   assert_message_pane_visible();</span>
<a href="#l16.48"></a><span id="l16.48">   assert_pane_layout(kVerticalMailLayout);</span>
<a href="#l16.49"></a><span id="l16.49"> </span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-  let actualWidth = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.width;</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+  actualWidth = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.width;</span>
<a href="#l16.52"></a><span id="l16.52">   assert_equals(newWidth, actualWidth, &quot;The message pane width should be &quot; +</span>
<a href="#l16.53"></a><span id="l16.53">     newWidth + &quot;, but is actually &quot; + actualWidth);</span>
<a href="#l16.54"></a><span id="l16.54"> </span>
<a href="#l16.55"></a><span id="l16.55">   // The old width is restored.</span>
<a href="#l16.56"></a><span id="l16.56">   _move_splitter(mc.e(&quot;threadpane-splitter&quot;), -diffWidth, 0);</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineminus">-  let actualWidth = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.width;</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+  actualWidth = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.width;</span>
<a href="#l16.59"></a><span id="l16.59"> </span>
<a href="#l16.60"></a><span id="l16.60">   // FIXME: For whatever reasons the new width is off by two pixels on Mac OSX</span>
<a href="#l16.61"></a><span id="l16.61">   // But this test case is not for testing moving around a splitter but for</span>
<a href="#l16.62"></a><span id="l16.62">   // persistency. Therefore it is enough if the actual width is equal to the</span>
<a href="#l16.63"></a><span id="l16.63">   // the requested width plus/minus two pixels.</span>
<a href="#l16.64"></a><span id="l16.64">   assert_equals_fuzzy(oldWidth, actualWidth, 2,</span>
<a href="#l16.65"></a><span id="l16.65">     &quot;The message pane width should be &quot; + oldWidth + &quot;, but is actually &quot; +</span>
<a href="#l16.66"></a><span id="l16.66">     actualWidth);</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineat">@@ -342,17 +342,17 @@ function test_message_pane_width_persist</span>
<a href="#l16.68"></a><span id="l16.68">   controller.sleep(sessionStoreManager._sessionAutoSaveTimerIntervalMS +</span>
<a href="#l16.69"></a><span id="l16.69">                    asyncFileWriteDelayMS);</span>
<a href="#l16.70"></a><span id="l16.70"> </span>
<a href="#l16.71"></a><span id="l16.71">   mc = open3PaneWindow();</span>
<a href="#l16.72"></a><span id="l16.72">   be_in_folder(folderA);</span>
<a href="#l16.73"></a><span id="l16.73">   assert_message_pane_visible();</span>
<a href="#l16.74"></a><span id="l16.74">   assert_pane_layout(kVerticalMailLayout);</span>
<a href="#l16.75"></a><span id="l16.75"> </span>
<a href="#l16.76"></a><span id="l16.76" class="difflineminus">-  let actualWidth = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.width;</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineplus">+  actualWidth = mc.e(&quot;messagepaneboxwrapper&quot;).boxObject.width;</span>
<a href="#l16.78"></a><span id="l16.78">   assert_equals(oldWidth, actualWidth, &quot;The message pane width should be &quot; +</span>
<a href="#l16.79"></a><span id="l16.79">     oldWidth + &quot;, but is actually &quot; + actualWidth);</span>
<a href="#l16.80"></a><span id="l16.80"> </span>
<a href="#l16.81"></a><span id="l16.81">   // The layout is reset to classical mail layout.</span>
<a href="#l16.82"></a><span id="l16.82">   set_pane_layout(kClassicMailLayout);</span>
<a href="#l16.83"></a><span id="l16.83">   assert_pane_layout(kClassicMailLayout);</span>
<a href="#l16.84"></a><span id="l16.84"> </span>
<a href="#l16.85"></a><span id="l16.85">   // We don't need the address book window any more.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/content/folderWidgets.xml</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/content/folderWidgets.xml</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -569,17 +569,17 @@</span>
<a href="#l17.4"></a><span id="l17.4">           allFolders = allFolders.filter(function (f) f.canFileMessages);</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6">           let recentFolders = this.getMostRecentFolders(allFolders,</span>
<a href="#l17.7"></a><span id="l17.7">                                                         this._MAXRECENT,</span>
<a href="#l17.8"></a><span id="l17.8">                                                         &quot;MRMTime&quot;);</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10">           // Cache the pretty names so that they do not need to be fetched</span>
<a href="#l17.11"></a><span id="l17.11">           // _MAXRECENT^2 times later.</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-          let recentFolders = recentFolders.map(</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+          recentFolders = recentFolders.map(</span>
<a href="#l17.14"></a><span id="l17.14">             function (f) { return { folder: f, name: f.prettyName } });</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16">           // Because we're scanning across multiple accounts, we can end up with</span>
<a href="#l17.17"></a><span id="l17.17">           // several folders with the same name. Find those dupes.</span>
<a href="#l17.18"></a><span id="l17.18">           let dupeNames = new Set();</span>
<a href="#l17.19"></a><span id="l17.19">           for (let i = 0; i &lt; recentFolders.length; i++) {</span>
<a href="#l17.20"></a><span id="l17.20">             for (let j = i + 1; j &lt; recentFolders.length; j++) {</span>
<a href="#l17.21"></a><span id="l17.21">               if (recentFolders[i].name == recentFolders[j].name)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

