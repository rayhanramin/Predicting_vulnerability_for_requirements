<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22414:dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079" />
<meta property="og:url" content="/comm-central/rev/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079" />
<meta property="og:description" content="Bug 1411069 - Port bug 1313150 to mailnews: Remove |weak| parameter from nsIMutableArray methods (JS part). rs=bustage-fix" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">shortlog</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">files</a> |
changeset |
<a href="/comm-central/raw-rev/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">raw</a>  | <a href="/comm-central/archive/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1411069">Bug 1411069</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1313150">bug 1313150</a> to mailnews: Remove |weak| parameter from nsIMutableArray methods (JS part). rs=bustage-fix
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 24 Oct 2017 01:30:40 +0200</td></tr>

<tr>
 <td>changeset 22414</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079</a></td>
</tr>



<tr>
<td>parent 22413</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c38974cf236ed69bd7d45c938ec39a4f955233be">c38974cf236ed69bd7d45c938ec39a4f955233be</a>
</td>
</tr>

<tr>
<td>child 22415</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6f2de28da2f15e964cc0c587da7c9535de864c49">6f2de28da2f15e964cc0c587da7c9535de864c49</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">13664</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 23 Oct 2017 23:40:33 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@dd1d559aeb26 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079&newProject=comm-central&newRevision=c38974cf236ed69bd7d45c938ec39a4f955233be&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079&newProject=comm-central&newRevision=c38974cf236ed69bd7d45c938ec39a4f955233be&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079&newProject=comm-central&newRevision=c38974cf236ed69bd7d45c938ec39a4f955233be&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bustage-fix%29&revcount=50">bustage-fix</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1411069">1411069</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1313150">1313150</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1411069">Bug 1411069</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1313150">bug 1313150</a> to mailnews: Remove |weak| parameter from nsIMutableArray methods (JS part). rs=bustage-fix</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/calendar/base/content/calendar-dnd-listener.js">calendar/base/content/calendar-dnd-listener.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/calendar/base/content/calendar-dnd-listener.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/calendar/base/content/calendar-dnd-listener.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/calendar/base/content/calendar-dnd-listener.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/calendar/base/content/calendar-dnd-listener.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/calendar/base/content/calendar-dnd-listener.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/preferences/applications.js">im/content/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/tabbrowser.xml">im/content/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/im/content/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/FilterListDialog.js">mail/base/content/FilterListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/FilterListDialog.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/FilterListDialog.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/FilterListDialog.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/FilterListDialog.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/FilterListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/editContactOverlay.js">mail/base/content/editContactOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/editContactOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/editContactOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/editContactOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/editContactOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/editContactOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/folderPane.js">mail/base/content/folderPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/folderPane.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/folderPane.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/folderPane.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/folderPane.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/folderPane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCardOverlay.js">mail/components/addrbook/content/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCommon.js">mail/components/addrbook/content/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCommon.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCommon.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCommon.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCommon.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/addrbook/content/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/search/content/searchCommon.js">mail/components/search/content/searchCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/search/content/searchCommon.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/search/content/searchCommon.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/search/content/searchCommon.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/search/content/searchCommon.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/components/search/content/searchCommon.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/addrbook/test-update-mailing-list.js">mail/test/mozmill/addrbook/test-update-mailing-list.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/addrbook/test-update-mailing-list.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/addrbook/test-update-mailing-list.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/addrbook/test-update-mailing-list.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/addrbook/test-update-mailing-list.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/addrbook/test-update-mailing-list.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/folder-display/test-recent-menu.js">mail/test/mozmill/folder-display/test-recent-menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/folder-display/test-recent-menu.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/folder-display/test-recent-menu.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/folder-display/test-recent-menu.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/folder-display/test-recent-menu.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/folder-display/test-recent-menu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-header/test-message-header.js">mail/test/mozmill/message-header/test-message-header.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-header/test-message-header.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-header/test-message-header.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-header/test-message-header.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-header/test-message-header.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-header/test-message-header.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-window/test-commands.js">mail/test/mozmill/message-window/test-commands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-window/test-commands.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-window/test-commands.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-window/test-commands.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-window/test-commands.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/message-window/test-commands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/shared-modules/test-address-book-helpers.js">mail/test/mozmill/shared-modules/test-address-book-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/shared-modules/test-address-book-helpers.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/shared-modules/test-address-book-helpers.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/shared-modules/test-address-book-helpers.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/shared-modules/test-address-book-helpers.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mail/test/mozmill/shared-modules/test-address-book-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abDragDrop.js">mailnews/addrbook/content/abDragDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abDragDrop.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abDragDrop.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abDragDrop.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abDragDrop.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abDragDrop.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abMailListDialog.js">mailnews/addrbook/content/abMailListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abMailListDialog.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abMailListDialog.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abMailListDialog.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abMailListDialog.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/content/abMailListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_collection.js">mailnews/addrbook/test/unit/test_collection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_collection.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_collection.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_collection.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_collection.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_collection.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_notifications.js">mailnews/addrbook/test/unit/test_notifications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_notifications.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_notifications.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_notifications.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_notifications.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_notifications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_uuid.js">mailnews/addrbook/test/unit/test_uuid.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_uuid.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_uuid.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_uuid.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_uuid.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/addrbook/test/unit/test_uuid.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/junkCommands.js">mailnews/base/content/junkCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/junkCommands.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/junkCommands.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/junkCommands.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/junkCommands.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/junkCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/markByDate.js">mailnews/base/content/markByDate.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/markByDate.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/markByDate.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/markByDate.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/markByDate.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/content/markByDate.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/search/content/searchTermOverlay.js">mailnews/base/search/content/searchTermOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/search/content/searchTermOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/search/content/searchTermOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/search/content/searchTermOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/search/content/searchTermOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/search/content/searchTermOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug428427.js">mailnews/base/test/unit/test_bug428427.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug428427.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug428427.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug428427.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug428427.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug428427.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug471682.js">mailnews/base/test/unit/test_bug471682.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug471682.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug471682.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug471682.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug471682.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_bug471682.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_compactColumnSave.js">mailnews/base/test/unit/test_compactColumnSave.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_compactColumnSave.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_compactColumnSave.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_compactColumnSave.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_compactColumnSave.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_compactColumnSave.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyChaining.js">mailnews/base/test/unit/test_copyChaining.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyChaining.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyChaining.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyChaining.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyChaining.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyChaining.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyThenMoveManual.js">mailnews/base/test/unit/test_copyThenMoveManual.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyThenMoveManual.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyThenMoveManual.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyThenMoveManual.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyThenMoveManual.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyThenMoveManual.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyToInvalidDB.js">mailnews/base/test/unit/test_copyToInvalidDB.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyToInvalidDB.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyToInvalidDB.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyToInvalidDB.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyToInvalidDB.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_copyToInvalidDB.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_emptyTrash.js">mailnews/base/test/unit/test_emptyTrash.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_emptyTrash.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_emptyTrash.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_emptyTrash.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_emptyTrash.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_emptyTrash.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_folderCompact.js">mailnews/base/test/unit/test_folderCompact.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_folderCompact.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_folderCompact.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_folderCompact.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_folderCompact.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_folderCompact.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_quarantineFilterMove.js">mailnews/base/test/unit/test_quarantineFilterMove.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_quarantineFilterMove.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_quarantineFilterMove.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_quarantineFilterMove.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_quarantineFilterMove.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/base/test/unit/test_quarantineFilterMove.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/compose/test/unit/head_compose.js">mailnews/compose/test/unit/head_compose.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/compose/test/unit/head_compose.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/compose/test/unit/head_compose.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/compose/test/unit/head_compose.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/compose/test/unit/head_compose.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/compose/test/unit/head_compose.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/modules/index_msg.js">mailnews/db/gloda/modules/index_msg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/modules/index_msg.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/modules/index_msg.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/modules/index_msg.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/modules/index_msg.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/modules/index_msg.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/test/unit/test_index_addressbook.js">mailnews/db/gloda/test/unit/test_index_addressbook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/test/unit/test_index_addressbook.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/test/unit/test_index_addressbook.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/test/unit/test_index_addressbook.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/test/unit/test_index_addressbook.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/gloda/test/unit/test_index_addressbook.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">mailnews/db/msgdb/test/unit/test_filter_enumerator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/newsblog/content/FeedItem.js">mailnews/extensions/newsblog/content/FeedItem.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/newsblog/content/FeedItem.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/newsblog/content/FeedItem.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/newsblog/content/FeedItem.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/newsblog/content/FeedItem.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/newsblog/content/FeedItem.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js">mailnews/extensions/smime/content/msgReadSMIMEOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_compactOfflineStore.js">mailnews/imap/test/unit/test_compactOfflineStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_compactOfflineStore.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_compactOfflineStore.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_compactOfflineStore.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_compactOfflineStore.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_compactOfflineStore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapAutoSync.js">mailnews/imap/test/unit/test_imapAutoSync.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapAutoSync.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapAutoSync.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapAutoSync.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapAutoSync.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapAutoSync.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapCopyTimeout.js">mailnews/imap/test/unit/test_imapCopyTimeout.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapCopyTimeout.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapCopyTimeout.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapCopyTimeout.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapCopyTimeout.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapCopyTimeout.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapHighWater.js">mailnews/imap/test/unit/test_imapHighWater.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapHighWater.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapHighWater.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapHighWater.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapHighWater.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapHighWater.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapMove.js">mailnews/imap/test/unit/test_imapMove.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapMove.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapMove.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapMove.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapMove.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapMove.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapUndo.js">mailnews/imap/test/unit/test_imapUndo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapUndo.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapUndo.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapUndo.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapUndo.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_imapUndo.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineCopy.js">mailnews/imap/test/unit/test_offlineCopy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineCopy.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineCopy.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineCopy.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineCopy.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineCopy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlinePlayback.js">mailnews/imap/test/unit/test_offlinePlayback.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlinePlayback.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlinePlayback.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlinePlayback.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlinePlayback.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlinePlayback.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineStoreLocking.js">mailnews/imap/test/unit/test_offlineStoreLocking.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineStoreLocking.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineStoreLocking.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineStoreLocking.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineStoreLocking.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_offlineStoreLocking.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_preserveDataOnMove.js">mailnews/imap/test/unit/test_preserveDataOnMove.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_preserveDataOnMove.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_preserveDataOnMove.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_preserveDataOnMove.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_preserveDataOnMove.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_preserveDataOnMove.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_trustSpamAssassin.js">mailnews/imap/test/unit/test_trustSpamAssassin.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_trustSpamAssassin.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_trustSpamAssassin.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_trustSpamAssassin.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_trustSpamAssassin.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/imap/test/unit/test_trustSpamAssassin.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/import/test/unit/resources/TestMailImporter.js">mailnews/import/test/unit/resources/TestMailImporter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/import/test/unit/resources/TestMailImporter.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/import/test/unit/resources/TestMailImporter.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/import/test/unit/resources/TestMailImporter.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/import/test/unit/resources/TestMailImporter.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/import/test/unit/resources/TestMailImporter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_duplicateKey.js">mailnews/local/test/unit/test_duplicateKey.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_duplicateKey.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_duplicateKey.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_duplicateKey.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_duplicateKey.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_duplicateKey.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over2GBMailboxes.js">mailnews/local/test/unit/test_over2GBMailboxes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over2GBMailboxes.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over2GBMailboxes.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over2GBMailboxes.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over2GBMailboxes.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over2GBMailboxes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over4GBMailboxes.js">mailnews/local/test/unit/test_over4GBMailboxes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over4GBMailboxes.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over4GBMailboxes.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over4GBMailboxes.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over4GBMailboxes.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_over4GBMailboxes.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy.js">mailnews/local/test/unit/test_pop3MultiCopy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy2.js">mailnews/local/test/unit/test_pop3MultiCopy2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy2.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy2.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy2.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy2.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_pop3MultiCopy2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_undoDelete.js">mailnews/local/test/unit/test_undoDelete.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_undoDelete.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_undoDelete.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_undoDelete.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_undoDelete.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/mailnews/local/test/unit/test_undoDelete.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/browser/nsBrowserContentHandler.js">suite/browser/nsBrowserContentHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/browser/nsBrowserContentHandler.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/browser/nsBrowserContentHandler.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/browser/nsBrowserContentHandler.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/browser/nsBrowserContentHandler.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/browser/nsBrowserContentHandler.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/directory/directory.js">suite/common/directory/directory.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/directory/directory.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/directory/directory.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/directory/directory.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/directory/directory.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/directory/directory.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/pref/pref-applications.js">suite/common/pref/pref-applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/pref/pref-applications.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/pref/pref-applications.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/pref/pref-applications.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/pref/pref-applications.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/pref/pref-applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/profile/profileSelection.js">suite/common/profile/profileSelection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/profile/profileSelection.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/profile/profileSelection.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/profile/profileSelection.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/profile/profileSelection.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/profile/profileSelection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteDownloadManagerUI.js">suite/common/src/nsSuiteDownloadManagerUI.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteDownloadManagerUI.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteDownloadManagerUI.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteDownloadManagerUI.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteDownloadManagerUI.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteDownloadManagerUI.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteGlue.js">suite/common/src/nsSuiteGlue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteGlue.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteGlue.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteGlue.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteGlue.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/src/nsSuiteGlue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/tests/preferences/browser_bug410900.js">suite/common/tests/preferences/browser_bug410900.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/tests/preferences/browser_bug410900.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/tests/preferences/browser_bug410900.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/tests/preferences/browser_bug410900.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/tests/preferences/browser_bug410900.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/common/tests/preferences/browser_bug410900.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/feeds/src/WebContentConverter.js">suite/feeds/src/WebContentConverter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/feeds/src/WebContentConverter.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/feeds/src/WebContentConverter.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/feeds/src/WebContentConverter.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/feeds/src/WebContentConverter.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/feeds/src/WebContentConverter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/addrbook/abCardOverlay.js">suite/mailnews/addrbook/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/addrbook/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/addrbook/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/addrbook/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/addrbook/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/addrbook/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/commandglue.js">suite/mailnews/commandglue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/commandglue.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/commandglue.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/commandglue.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/commandglue.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/commandglue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/compose/MsgComposeCommands.js">suite/mailnews/compose/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/compose/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/compose/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/compose/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/compose/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/compose/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mail3PaneWindowCommands.js">suite/mailnews/mail3PaneWindowCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mail3PaneWindowCommands.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mail3PaneWindowCommands.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mail3PaneWindowCommands.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mail3PaneWindowCommands.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mail3PaneWindowCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailCommands.js">suite/mailnews/mailCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailCommands.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailCommands.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailCommands.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailCommands.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailWindowOverlay.js">suite/mailnews/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/messengerdnd.js">suite/mailnews/messengerdnd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/messengerdnd.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/messengerdnd.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/messengerdnd.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/messengerdnd.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/messengerdnd.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/msgViewPickerOverlay.js">suite/mailnews/msgViewPickerOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/msgViewPickerOverlay.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/msgViewPickerOverlay.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/msgViewPickerOverlay.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/msgViewPickerOverlay.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/msgViewPickerOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/search/FilterListDialog.js">suite/mailnews/search/FilterListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/search/FilterListDialog.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/search/FilterListDialog.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/search/FilterListDialog.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/search/FilterListDialog.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/search/FilterListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/searchBar.js">suite/mailnews/searchBar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/searchBar.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/searchBar.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/searchBar.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/searchBar.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/mailnews/searchBar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/profile/migration/src/SuiteProfileMigrator.js">suite/profile/migration/src/SuiteProfileMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/profile/migration/src/SuiteProfileMigrator.js">file</a> |
<a href="/comm-central/annotate/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/profile/migration/src/SuiteProfileMigrator.js">annotate</a> |
<a href="/comm-central/diff/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/profile/migration/src/SuiteProfileMigrator.js">diff</a> |
<a href="/comm-central/comparison/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/profile/migration/src/SuiteProfileMigrator.js">comparison</a> |
<a href="/comm-central/log/dd1d559aeb262e3aac32d5da7d2ff5b31e7b3079/suite/profile/migration/src/SuiteProfileMigrator.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-dnd-listener.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-dnd-listener.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -577,17 +577,17 @@ function invokeEventDragSession(aItem, a</span>
<a href="#l1.4"></a><span id="l1.4">                          .createInstance(Components.interfaces.nsISupportsString);</span>
<a href="#l1.5"></a><span id="l1.5">     supportsString.data = serializer.serializeToString();</span>
<a href="#l1.6"></a><span id="l1.6">     transfer.setTransferData(&quot;text/calendar&quot;, supportsString, supportsString.data.length * 2);</span>
<a href="#l1.7"></a><span id="l1.7">     transfer.setTransferData(&quot;text/unicode&quot;, supportsString, supportsString.data.length * 2);</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     let action = Components.interfaces.nsIDragService.DRAGDROP_ACTION_MOVE;</span>
<a href="#l1.10"></a><span id="l1.10">     let mutArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l1.11"></a><span id="l1.11">                    .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    mutArray.appendElement(transfer, /* weak = */ false);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    mutArray.appendElement(transfer);</span>
<a href="#l1.14"></a><span id="l1.14">     aXULBox.sourceObject = aItem;</span>
<a href="#l1.15"></a><span id="l1.15">     try {</span>
<a href="#l1.16"></a><span id="l1.16">         cal.getDragService().invokeDragSession(aXULBox, mutArray, null, action);</span>
<a href="#l1.17"></a><span id="l1.17">     } catch (error) {</span>
<a href="#l1.18"></a><span id="l1.18">         // Nothing done here because we only have to catch an exception that occurs when dragging</span>
<a href="#l1.19"></a><span id="l1.19">         // is cancelled with ESC. This is an odd behaviour of the nativeDragService which we have</span>
<a href="#l1.20"></a><span id="l1.20">         // have to cover.</span>
<a href="#l1.21"></a><span id="l1.21">         // Therefore the DND API for calendar should be changed to the new DOM driven DND-API</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/im/content/preferences/applications.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/im/content/preferences/applications.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -173,17 +173,17 @@ HandlerInfoWrapper.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">   },</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6">   addPossibleApplicationHandler: function(aNewHandler) {</span>
<a href="#l2.7"></a><span id="l2.7">     var possibleApps = this.possibleApplicationHandlers.enumerate();</span>
<a href="#l2.8"></a><span id="l2.8">     while (possibleApps.hasMoreElements()) {</span>
<a href="#l2.9"></a><span id="l2.9">       if (possibleApps.getNext().equals(aNewHandler))</span>
<a href="#l2.10"></a><span id="l2.10">         return;</span>
<a href="#l2.11"></a><span id="l2.11">     }</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    this.possibleApplicationHandlers.appendElement(aNewHandler, false);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    this.possibleApplicationHandlers.appendElement(aNewHandler);</span>
<a href="#l2.14"></a><span id="l2.14">   },</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">   removePossibleApplicationHandler: function(aHandler) {</span>
<a href="#l2.17"></a><span id="l2.17">     var defaultApp = this.preferredApplicationHandler;</span>
<a href="#l2.18"></a><span id="l2.18">     if (defaultApp &amp;&amp; aHandler.equals(defaultApp)) {</span>
<a href="#l2.19"></a><span id="l2.19">       // If the app we remove was the default app, we must make sure</span>
<a href="#l2.20"></a><span id="l2.20">       // it won't be used anymore</span>
<a href="#l2.21"></a><span id="l2.21">       this.alwaysAskBeforeHandling = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/im/content/tabbrowser.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/im/content/tabbrowser.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1192,17 +1192,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">         &lt;parameter name=&quot;aTabs&quot;/&gt;</span>
<a href="#l3.5"></a><span id="l3.5">         &lt;body&gt;</span>
<a href="#l3.6"></a><span id="l3.6">           &lt;![CDATA[</span>
<a href="#l3.7"></a><span id="l3.7">             if (this.mTabs.length == 1)</span>
<a href="#l3.8"></a><span id="l3.8">               return null;</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">             var ma = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l3.11"></a><span id="l3.11">                                .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-            aTabs.forEach(function(aTab) { ma.appendElement(aTab, /* weak = */ false); });</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+            aTabs.forEach(function(aTab) { ma.appendElement(aTab); });</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15">             // tell a new window to take the &quot;dropped&quot; tab</span>
<a href="#l3.16"></a><span id="l3.16">             return Services.ww.openWindow(window,</span>
<a href="#l3.17"></a><span id="l3.17">                                           getConvWindowURL(),</span>
<a href="#l3.18"></a><span id="l3.18">                                           null,</span>
<a href="#l3.19"></a><span id="l3.19">                                           &quot;chrome,dialog=no,all&quot;,</span>
<a href="#l3.20"></a><span id="l3.20">                                           ma);</span>
<a href="#l3.21"></a><span id="l3.21">           ]]&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/FilterListDialog.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/FilterListDialog.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -609,17 +609,17 @@ function runSelectedFilters()</span>
<a href="#l4.4"></a><span id="l4.4">     return;</span>
<a href="#l4.5"></a><span id="l4.5">   }</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7">   var folder = gRunFiltersFolder._folder || gRunFiltersFolder.selectedItem._folder;</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">   let filterList = MailServices.filters.getTempFilterList(folder);</span>
<a href="#l4.10"></a><span id="l4.10">   let folders = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l4.11"></a><span id="l4.11">                           .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  folders.appendElement(folder, false);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  folders.appendElement(folder);</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15">   // make sure the tmp filter list uses the real filter list log stream</span>
<a href="#l4.16"></a><span id="l4.16">   filterList.logStream = gCurrentFilterList.logStream;</span>
<a href="#l4.17"></a><span id="l4.17">   filterList.loggingEnabled = gCurrentFilterList.loggingEnabled;</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">   let index = 0;</span>
<a href="#l4.20"></a><span id="l4.20">   for (let item of gFilterListbox.selectedItems) {</span>
<a href="#l4.21"></a><span id="l4.21">     filterList.insertFilterAt(index++, item._filter);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/editContactOverlay.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/editContactOverlay.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -187,17 +187,17 @@ var editContactInlineUI = {</span>
<a href="#l5.4"></a><span id="l5.4">     var bundle = document.getElementById(&quot;bundle_editContact&quot;);</span>
<a href="#l5.5"></a><span id="l5.5">     if (!Services.prompt.confirm(window,</span>
<a href="#l5.6"></a><span id="l5.6">                                  bundle.getString(&quot;deleteContactTitle&quot;),</span>
<a href="#l5.7"></a><span id="l5.7">                                  bundle.getString(&quot;deleteContactMessage&quot;)))</span>
<a href="#l5.8"></a><span id="l5.8">       return;  /* XXX would be nice to bring the popup back up here */</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">     let cardArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l5.11"></a><span id="l5.11">                               .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    cardArray.appendElement(this._cardDetails.card, false);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+    cardArray.appendElement(this._cardDetails.card);</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15">     MailServices.ab.getDirectory(this._cardDetails.book.URI).deleteCards(cardArray);</span>
<a href="#l5.16"></a><span id="l5.16">   },</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18">   saveChanges: function() {</span>
<a href="#l5.19"></a><span id="l5.19">     // If we're a popup dialog, just hide the popup and return</span>
<a href="#l5.20"></a><span id="l5.20">     if (!this._writeable) {</span>
<a href="#l5.21"></a><span id="l5.21">       this.panel.hidePopup();</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -227,15 +227,15 @@ var editContactInlineUI = {</span>
<a href="#l5.23"></a><span id="l5.23">       // We changed address books for the card.</span>
<a href="#l5.24"></a><span id="l5.24"> </span>
<a href="#l5.25"></a><span id="l5.25">       // Add it to the chosen address book...</span>
<a href="#l5.26"></a><span id="l5.26">       this._cardDetails.book.addCard(this._cardDetails.card);</span>
<a href="#l5.27"></a><span id="l5.27"> </span>
<a href="#l5.28"></a><span id="l5.28">       // ...and delete it from the old place.</span>
<a href="#l5.29"></a><span id="l5.29">       let cardArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l5.30"></a><span id="l5.30">                               .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-      cardArray.appendElement(this._cardDetails.card, false);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+      cardArray.appendElement(this._cardDetails.card);</span>
<a href="#l5.33"></a><span id="l5.33">       originalBook.deleteCards(cardArray);</span>
<a href="#l5.34"></a><span id="l5.34">     }</span>
<a href="#l5.35"></a><span id="l5.35"> </span>
<a href="#l5.36"></a><span id="l5.36">     this.panel.hidePopup();</span>
<a href="#l5.37"></a><span id="l5.37">   }</span>
<a href="#l5.38"></a><span id="l5.38"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/folderPane.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/folderPane.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -824,17 +824,17 @@ var gFolderTreeView = {</span>
<a href="#l6.4"></a><span id="l6.4">       let array = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l6.5"></a><span id="l6.5">                     .createInstance(Ci.nsIMutableArray);</span>
<a href="#l6.6"></a><span id="l6.6">       let sourceFolder;</span>
<a href="#l6.7"></a><span id="l6.7">       let messenger = Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance(Ci.nsIMessenger);</span>
<a href="#l6.8"></a><span id="l6.8">       for (let i = 0; i &lt; count; i++) {</span>
<a href="#l6.9"></a><span id="l6.9">         let msgHdr = messenger.msgHdrFromURI(dt.mozGetDataAt(&quot;text/x-moz-message&quot;, i));</span>
<a href="#l6.10"></a><span id="l6.10">         if (!i)</span>
<a href="#l6.11"></a><span id="l6.11">           sourceFolder = msgHdr.folder;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-        array.appendElement(msgHdr, false);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+        array.appendElement(msgHdr);</span>
<a href="#l6.14"></a><span id="l6.14">       }</span>
<a href="#l6.15"></a><span id="l6.15">       let prefBranch = Services.prefs.getBranch(&quot;mail.&quot;);</span>
<a href="#l6.16"></a><span id="l6.16">       let isMove = Cc[&quot;@mozilla.org/widget/dragservice;1&quot;]</span>
<a href="#l6.17"></a><span id="l6.17">                       .getService(Ci.nsIDragService).getCurrentSession()</span>
<a href="#l6.18"></a><span id="l6.18">                       .dragAction == Ci.nsIDragService.DRAGDROP_ACTION_MOVE;</span>
<a href="#l6.19"></a><span id="l6.19">       if (!sourceFolder.canDeleteMessages)</span>
<a href="#l6.20"></a><span id="l6.20">         isMove = false;</span>
<a href="#l6.21"></a><span id="l6.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -851,17 +851,17 @@ function RemoveAllMessageTags()</span>
<a href="#l7.4"></a><span id="l7.4">     msgHdr.label = 0; // remove legacy label</span>
<a href="#l7.5"></a><span id="l7.5">     if (prevHdrFolder != msgHdr.folder)</span>
<a href="#l7.6"></a><span id="l7.6">     {</span>
<a href="#l7.7"></a><span id="l7.7">       if (prevHdrFolder)</span>
<a href="#l7.8"></a><span id="l7.8">         prevHdrFolder.removeKeywordsFromMessages(messages, allKeys);</span>
<a href="#l7.9"></a><span id="l7.9">       messages.clear();</span>
<a href="#l7.10"></a><span id="l7.10">       prevHdrFolder = msgHdr.folder;</span>
<a href="#l7.11"></a><span id="l7.11">     }</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    messages.appendElement(msgHdr, false);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    messages.appendElement(msgHdr);</span>
<a href="#l7.14"></a><span id="l7.14">   }</span>
<a href="#l7.15"></a><span id="l7.15">   if (prevHdrFolder)</span>
<a href="#l7.16"></a><span id="l7.16">     prevHdrFolder.removeKeywordsFromMessages(messages, allKeys);</span>
<a href="#l7.17"></a><span id="l7.17">   OnTagsChange();</span>
<a href="#l7.18"></a><span id="l7.18"> }</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20"> /**</span>
<a href="#l7.21"></a><span id="l7.21">  * Toggle the state of a message tag on the selected messages (based on the</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -913,28 +913,28 @@ function ToggleMessageTag(key, addKey)</span>
<a href="#l7.23"></a><span id="l7.23">   {</span>
<a href="#l7.24"></a><span id="l7.24">     var msgHdr = selectedMessages[i];</span>
<a href="#l7.25"></a><span id="l7.25">     if (msgHdr.label)</span>
<a href="#l7.26"></a><span id="l7.26">     {</span>
<a href="#l7.27"></a><span id="l7.27">       // Since we touch all these messages anyway, migrate the label now.</span>
<a href="#l7.28"></a><span id="l7.28">       // If we don't, the thread tree won't always show the correct tag state,</span>
<a href="#l7.29"></a><span id="l7.29">       // because resetting a label doesn't update the tree anymore...</span>
<a href="#l7.30"></a><span id="l7.30">       msg.clear();</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-      msg.appendElement(msgHdr, false);</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+      msg.appendElement(msgHdr);</span>
<a href="#l7.33"></a><span id="l7.33">       msgHdr.folder.addKeywordsToMessages(msg, &quot;$label&quot; + msgHdr.label);</span>
<a href="#l7.34"></a><span id="l7.34">       msgHdr.label = 0; // remove legacy label</span>
<a href="#l7.35"></a><span id="l7.35">     }</span>
<a href="#l7.36"></a><span id="l7.36">     if (prevHdrFolder != msgHdr.folder)</span>
<a href="#l7.37"></a><span id="l7.37">     {</span>
<a href="#l7.38"></a><span id="l7.38">       if (prevHdrFolder)</span>
<a href="#l7.39"></a><span id="l7.39">         prevHdrFolder[toggler](messages, key);</span>
<a href="#l7.40"></a><span id="l7.40">       messages.clear();</span>
<a href="#l7.41"></a><span id="l7.41">       prevHdrFolder = msgHdr.folder;</span>
<a href="#l7.42"></a><span id="l7.42">     }</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-    messages.appendElement(msgHdr, false);</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+    messages.appendElement(msgHdr);</span>
<a href="#l7.45"></a><span id="l7.45">   }</span>
<a href="#l7.46"></a><span id="l7.46">   if (prevHdrFolder)</span>
<a href="#l7.47"></a><span id="l7.47">     prevHdrFolder[toggler](messages, key);</span>
<a href="#l7.48"></a><span id="l7.48">   OnTagsChange();</span>
<a href="#l7.49"></a><span id="l7.49"> }</span>
<a href="#l7.50"></a><span id="l7.50"> </span>
<a href="#l7.51"></a><span id="l7.51"> function AddTag()</span>
<a href="#l7.52"></a><span id="l7.52"> {</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineat">@@ -1772,17 +1772,17 @@ BatchMessageMover.prototype = {</span>
<a href="#l7.54"></a><span id="l7.54">   },</span>
<a href="#l7.55"></a><span id="l7.55"> </span>
<a href="#l7.56"></a><span id="l7.56">   filterBatch: function () {</span>
<a href="#l7.57"></a><span id="l7.57">     let batch = this._currentBatch;</span>
<a href="#l7.58"></a><span id="l7.58"> </span>
<a href="#l7.59"></a><span id="l7.59">     let filterArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l7.60"></a><span id="l7.60">                                 .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l7.61"></a><span id="l7.61">     for (let message of batch.messages) {</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-      filterArray.appendElement(message, false);</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+      filterArray.appendElement(message);</span>
<a href="#l7.64"></a><span id="l7.64">     }</span>
<a href="#l7.65"></a><span id="l7.65"> </span>
<a href="#l7.66"></a><span id="l7.66">     // Apply filters to this batch.</span>
<a href="#l7.67"></a><span id="l7.67">     MailServices.filters.applyFilters(</span>
<a href="#l7.68"></a><span id="l7.68">       Components.interfaces.nsMsgFilterType.Archive,</span>
<a href="#l7.69"></a><span id="l7.69">       filterArray, batch.srcFolder, msgWindow, this);</span>
<a href="#l7.70"></a><span id="l7.70">     return; // continues with onStopOperation</span>
<a href="#l7.71"></a><span id="l7.71">   },</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineat">@@ -1809,17 +1809,17 @@ BatchMessageMover.prototype = {</span>
<a href="#l7.73"></a><span id="l7.73"> </span>
<a href="#l7.74"></a><span id="l7.74">       let moveArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l7.75"></a><span id="l7.75">                                 .createInstance(Ci.nsIMutableArray);</span>
<a href="#l7.76"></a><span id="l7.76">       // Don't move any items that the filter moves or deleted</span>
<a href="#l7.77"></a><span id="l7.77">       for (let item of batch.messages) {</span>
<a href="#l7.78"></a><span id="l7.78">         if (srcFolder.msgDatabase.ContainsKey(item.messageKey) &amp;&amp;</span>
<a href="#l7.79"></a><span id="l7.79">             !(srcFolder.getProcessingFlags(item.messageKey) &amp;</span>
<a href="#l7.80"></a><span id="l7.80">               Components.interfaces.nsMsgProcessingFlags.FilterToMove)) {</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-          moveArray.appendElement(item, false);</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+          moveArray.appendElement(item);</span>
<a href="#l7.83"></a><span id="l7.83">         }</span>
<a href="#l7.84"></a><span id="l7.84">       }</span>
<a href="#l7.85"></a><span id="l7.85"> </span>
<a href="#l7.86"></a><span id="l7.86">       if (moveArray.length == 0)</span>
<a href="#l7.87"></a><span id="l7.87">         return this.processNextBatch(); // continue processing</span>
<a href="#l7.88"></a><span id="l7.88"> </span>
<a href="#l7.89"></a><span id="l7.89">       // For folders on some servers (e.g. IMAP), we need to create the</span>
<a href="#l7.90"></a><span id="l7.90">       // sub-folders asynchronously, so we chain the urls using the listener</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineat">@@ -2457,17 +2457,17 @@ function MsgFilters(emailAddress, folder</span>
<a href="#l7.92"></a><span id="l7.92">   }</span>
<a href="#l7.93"></a><span id="l7.93"> }</span>
<a href="#l7.94"></a><span id="l7.94"> </span>
<a href="#l7.95"></a><span id="l7.95"> function MsgApplyFilters()</span>
<a href="#l7.96"></a><span id="l7.96"> {</span>
<a href="#l7.97"></a><span id="l7.97">   let preselectedFolder = GetFirstSelectedMsgFolder();</span>
<a href="#l7.98"></a><span id="l7.98">   let selectedFolders = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l7.99"></a><span id="l7.99">                                   .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineminus">-  selectedFolders.appendElement(preselectedFolder, false);</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+  selectedFolders.appendElement(preselectedFolder);</span>
<a href="#l7.102"></a><span id="l7.102"> </span>
<a href="#l7.103"></a><span id="l7.103">   let curFilterList = preselectedFolder.getFilterList(msgWindow);</span>
<a href="#l7.104"></a><span id="l7.104">   // create a new filter list and copy over the enabled filters to it.</span>
<a href="#l7.105"></a><span id="l7.105">   // We do this instead of having the filter after the fact code ignore</span>
<a href="#l7.106"></a><span id="l7.106">   // disabled filters because the Filter Dialog filter after the fact</span>
<a href="#l7.107"></a><span id="l7.107">   // code would have to clone filters to allow disabled filters to run,</span>
<a href="#l7.108"></a><span id="l7.108">   // and we don't support cloning filters currently.</span>
<a href="#l7.109"></a><span id="l7.109">   let tempFilterList = MailServices.filters.getTempFilterList(preselectedFolder);</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineat">@@ -3360,17 +3360,17 @@ function setMsgHdrPropertyAndReload(aPro</span>
<a href="#l7.111"></a><span id="l7.111">  * Mark a specified message as read.</span>
<a href="#l7.112"></a><span id="l7.112">  * @param msgHdr header (nsIMsgDBHdr) of the message to mark as read</span>
<a href="#l7.113"></a><span id="l7.113">  */</span>
<a href="#l7.114"></a><span id="l7.114"> function MarkMessageAsRead(msgHdr)</span>
<a href="#l7.115"></a><span id="l7.115"> {</span>
<a href="#l7.116"></a><span id="l7.116">   ClearPendingReadTimer();</span>
<a href="#l7.117"></a><span id="l7.117">   var headers = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l7.118"></a><span id="l7.118">                           .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineminus">-  headers.appendElement(msgHdr, false);</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+  headers.appendElement(msgHdr);</span>
<a href="#l7.121"></a><span id="l7.121">   msgHdr.folder.markMessagesRead(headers, true);</span>
<a href="#l7.122"></a><span id="l7.122"> }</span>
<a href="#l7.123"></a><span id="l7.123"> </span>
<a href="#l7.124"></a><span id="l7.124"> function ClearPendingReadTimer()</span>
<a href="#l7.125"></a><span id="l7.125"> {</span>
<a href="#l7.126"></a><span id="l7.126">   if (gMarkViewedMessageAsReadTimer)</span>
<a href="#l7.127"></a><span id="l7.127">   {</span>
<a href="#l7.128"></a><span id="l7.128">     clearTimeout(gMarkViewedMessageAsReadTimer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -215,17 +215,17 @@ function EditCardOKButton()</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5">   directory.modifyCard(gEditCard.card);</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7">   while (foundDirectories.length) {</span>
<a href="#l8.8"></a><span id="l8.8">     // Update the addressLists item for this card</span>
<a href="#l8.9"></a><span id="l8.9">     let foundItem = foundDirectories.pop();</span>
<a href="#l8.10"></a><span id="l8.10">     foundItem.directory</span>
<a href="#l8.11"></a><span id="l8.11">              .addressLists</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-             .replaceElementAt(gEditCard.card, foundItem.cardIndex, false);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+             .replaceElementAt(gEditCard.card, foundItem.cardIndex);</span>
<a href="#l8.14"></a><span id="l8.14">   }</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16">   NotifySaveListeners(directory);</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18">   // callback to allow caller to update</span>
<a href="#l8.19"></a><span id="l8.19">   if (gOkCallback)</span>
<a href="#l8.20"></a><span id="l8.20">     gOkCallback();</span>
<a href="#l8.21"></a><span id="l8.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/addrbook/content/abCommon.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCommon.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -460,17 +460,17 @@ function AbDelete()</span>
<a href="#l9.4"></a><span id="l9.4">     for (let i = 0; i &lt; cards.length; i++) {</span>
<a href="#l9.5"></a><span id="l9.5">       let dirId = cards[i].directoryId</span>
<a href="#l9.6"></a><span id="l9.6">                           .substring(0, cards[i].directoryId.indexOf(&quot;&amp;&quot;));</span>
<a href="#l9.7"></a><span id="l9.7">       let directory = MailServices.ab.getDirectoryFromId(dirId);</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9">       let cardArray =</span>
<a href="#l9.10"></a><span id="l9.10">         Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l9.11"></a><span id="l9.11">                   .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-      cardArray.appendElement(cards[i], false);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+      cardArray.appendElement(cards[i]);</span>
<a href="#l9.14"></a><span id="l9.14">       if (directory)</span>
<a href="#l9.15"></a><span id="l9.15">         directory.deleteCards(cardArray);</span>
<a href="#l9.16"></a><span id="l9.16">     }</span>
<a href="#l9.17"></a><span id="l9.17">     SetAbView(kAllDirectoryRoot + &quot;?&quot;);</span>
<a href="#l9.18"></a><span id="l9.18">   } else {</span>
<a href="#l9.19"></a><span id="l9.19">     // Delete cards from address books or mailing lists.</span>
<a href="#l9.20"></a><span id="l9.20">     gAbView.deleteSelectedCards();</span>
<a href="#l9.21"></a><span id="l9.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1600,17 +1600,17 @@ function convertListItemsToCloudAttachme</span>
<a href="#l10.4"></a><span id="l10.4">       item.cloudProvider.deleteFile(</span>
<a href="#l10.5"></a><span id="l10.5">         file, new deletionListener(item.attachment, item.cloudProvider));</span>
<a href="#l10.6"></a><span id="l10.6">     }</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8">     try {</span>
<a href="#l10.9"></a><span id="l10.9">       let listener = new uploadListener(item.attachment, file,</span>
<a href="#l10.10"></a><span id="l10.10">                                         aProvider);</span>
<a href="#l10.11"></a><span id="l10.11">       aProvider.uploadFile(file, listener);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      convertedAttachments.appendElement(item.attachment, false);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+      convertedAttachments.appendElement(item.attachment);</span>
<a href="#l10.14"></a><span id="l10.14">     }</span>
<a href="#l10.15"></a><span id="l10.15">     catch (ex) {</span>
<a href="#l10.16"></a><span id="l10.16">       listener.onStopRequest(null, null, ex.result);</span>
<a href="#l10.17"></a><span id="l10.17">     }</span>
<a href="#l10.18"></a><span id="l10.18">   }</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">   if (convertedAttachments.length &gt; 0) {</span>
<a href="#l10.21"></a><span id="l10.21">     dispatchAttachmentBucketEvent(&quot;attachments-converted&quot;, convertedAttachments);</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -1681,17 +1681,17 @@ function convertListItemsToRegularAttach</span>
<a href="#l10.23"></a><span id="l10.23">     item.attachment.url = item.originalUrl;</span>
<a href="#l10.24"></a><span id="l10.24">     item.setAttribute(&quot;tooltiptext&quot;, item.attachment.url);</span>
<a href="#l10.25"></a><span id="l10.25">     item.attachment.sendViaCloud = false;</span>
<a href="#l10.26"></a><span id="l10.26"> </span>
<a href="#l10.27"></a><span id="l10.27">     delete item.cloudProvider;</span>
<a href="#l10.28"></a><span id="l10.28">     delete item.originalUrl;</span>
<a href="#l10.29"></a><span id="l10.29">     item.image = null;</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-    convertedAttachments.appendElement(item.attachment, false);</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+    convertedAttachments.appendElement(item.attachment);</span>
<a href="#l10.33"></a><span id="l10.33">   }</span>
<a href="#l10.34"></a><span id="l10.34"> </span>
<a href="#l10.35"></a><span id="l10.35">   dispatchAttachmentBucketEvent(&quot;attachments-converted&quot;, convertedAttachments);</span>
<a href="#l10.36"></a><span id="l10.36">   Services.obs.notifyObservers(convertedAttachments,</span>
<a href="#l10.37"></a><span id="l10.37">                                &quot;mail:attachmentsConverted&quot;, null);</span>
<a href="#l10.38"></a><span id="l10.38"> </span>
<a href="#l10.39"></a><span id="l10.39">   // We leave the content location in for the notifications because</span>
<a href="#l10.40"></a><span id="l10.40">   // it may be needed to identify the attachment. But clear it out now.</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -4080,17 +4080,17 @@ function RemoveDraft()</span>
<a href="#l10.42"></a><span id="l10.42"> </span>
<a href="#l10.43"></a><span id="l10.43">     var folder = rdf.GetResource(gMsgCompose.savedFolderURI)</span>
<a href="#l10.44"></a><span id="l10.44">                     .QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l10.45"></a><span id="l10.45">     try {</span>
<a href="#l10.46"></a><span id="l10.46">       if (folder.flags &amp; Components.interfaces.nsMsgFolderFlags.Drafts)</span>
<a href="#l10.47"></a><span id="l10.47">       {</span>
<a href="#l10.48"></a><span id="l10.48">         var msgs = Components.classes[&quot;@mozilla.org/array;1&quot;].</span>
<a href="#l10.49"></a><span id="l10.49">             createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-        msgs.appendElement(folder.GetMessageHeader(msgKey), false);</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+        msgs.appendElement(folder.GetMessageHeader(msgKey));</span>
<a href="#l10.52"></a><span id="l10.52">         folder.deleteMessages(msgs, null, true, false, null, false);</span>
<a href="#l10.53"></a><span id="l10.53">       }</span>
<a href="#l10.54"></a><span id="l10.54">     }</span>
<a href="#l10.55"></a><span id="l10.55">     catch (ex) // couldn't find header - perhaps an imap folder.</span>
<a href="#l10.56"></a><span id="l10.56">     {</span>
<a href="#l10.57"></a><span id="l10.57">       var imapFolder = folder.QueryInterface(Components.interfaces.nsIMsgImapMailFolder);</span>
<a href="#l10.58"></a><span id="l10.58">       var keyArray = new Array;</span>
<a href="#l10.59"></a><span id="l10.59">       keyArray[0] = msgKey;</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineat">@@ -4223,17 +4223,17 @@ function AddAttachments(aAttachments, aC</span>
<a href="#l10.61"></a><span id="l10.61">     // or hostname.</span>
<a href="#l10.62"></a><span id="l10.62">     if (/^mailbox-message:|^imap-message:|^news-message:/i.test(attachment.name))</span>
<a href="#l10.63"></a><span id="l10.63">       attachment.name = getComposeBundle().getString(&quot;messageAttachmentSafeName&quot;);</span>
<a href="#l10.64"></a><span id="l10.64">     // Don't allow file or mail/news protocol uris to leak out either.</span>
<a href="#l10.65"></a><span id="l10.65">     else if (/^file:|^mailbox:|^imap:|^s?news:/i.test(attachment.name))</span>
<a href="#l10.66"></a><span id="l10.66">       attachment.name = getComposeBundle().getString(&quot;partAttachmentSafeName&quot;);</span>
<a href="#l10.67"></a><span id="l10.67"> </span>
<a href="#l10.68"></a><span id="l10.68">     let item = bucket.appendItem(attachment);</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">-    addedAttachments.appendElement(attachment, false);</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+    addedAttachments.appendElement(attachment);</span>
<a href="#l10.71"></a><span id="l10.71"> </span>
<a href="#l10.72"></a><span id="l10.72">     if (attachment.size != -1)</span>
<a href="#l10.73"></a><span id="l10.73">       gAttachmentsSize += attachment.size;</span>
<a href="#l10.74"></a><span id="l10.74"> </span>
<a href="#l10.75"></a><span id="l10.75">     try {</span>
<a href="#l10.76"></a><span id="l10.76">       item.setAttribute(&quot;tooltiptext&quot;, decodeURI(attachment.url));</span>
<a href="#l10.77"></a><span id="l10.77">     }</span>
<a href="#l10.78"></a><span id="l10.78">     catch(e) {</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineat">@@ -4351,17 +4351,17 @@ function RemoveAllAttachments()</span>
<a href="#l10.80"></a><span id="l10.80">   let bucket = document.getElementById(&quot;attachmentBucket&quot;);</span>
<a href="#l10.81"></a><span id="l10.81">   let removedAttachments = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l10.82"></a><span id="l10.82">                                      .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l10.83"></a><span id="l10.83"> </span>
<a href="#l10.84"></a><span id="l10.84">   while (bucket.getRowCount())</span>
<a href="#l10.85"></a><span id="l10.85">   {</span>
<a href="#l10.86"></a><span id="l10.86">     let child = bucket.removeItemAt(bucket.getRowCount() - 1);</span>
<a href="#l10.87"></a><span id="l10.87"> </span>
<a href="#l10.88"></a><span id="l10.88" class="difflineminus">-    removedAttachments.appendElement(child.attachment, false);</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineplus">+    removedAttachments.appendElement(child.attachment);</span>
<a href="#l10.90"></a><span id="l10.90">     // Let's release the attachment object hold by the node else it won't go</span>
<a href="#l10.91"></a><span id="l10.91">     // away until the window is destroyed</span>
<a href="#l10.92"></a><span id="l10.92">     child.attachment = null;</span>
<a href="#l10.93"></a><span id="l10.93">   }</span>
<a href="#l10.94"></a><span id="l10.94"> </span>
<a href="#l10.95"></a><span id="l10.95">   if (removedAttachments.length &gt; 0) {</span>
<a href="#l10.96"></a><span id="l10.96">     dispatchAttachmentBucketEvent(&quot;attachments-removed&quot;, removedAttachments);</span>
<a href="#l10.97"></a><span id="l10.97">     UpdateAttachmentBucket(false);</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineat">@@ -4415,17 +4415,17 @@ function RemoveSelectedAttachment()</span>
<a href="#l10.99"></a><span id="l10.99">         let file = fileHandler.getFileFromURLSpec(originalUrl);</span>
<a href="#l10.100"></a><span id="l10.100">         if (item.uploading)</span>
<a href="#l10.101"></a><span id="l10.101">           item.cloudProvider.cancelFileUpload(file);</span>
<a href="#l10.102"></a><span id="l10.102">         else</span>
<a href="#l10.103"></a><span id="l10.103">           item.cloudProvider.deleteFile(file,</span>
<a href="#l10.104"></a><span id="l10.104">             new deletionListener(item.attachment, item.cloudProvider));</span>
<a href="#l10.105"></a><span id="l10.105">       }</span>
<a href="#l10.106"></a><span id="l10.106"> </span>
<a href="#l10.107"></a><span id="l10.107" class="difflineminus">-      removedAttachments.appendElement(item.attachment, false);</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineplus">+      removedAttachments.appendElement(item.attachment);</span>
<a href="#l10.109"></a><span id="l10.109">       // Let's release the attachment object held by the node else it won't go</span>
<a href="#l10.110"></a><span id="l10.110">       // away until the window is destroyed</span>
<a href="#l10.111"></a><span id="l10.111">       item.attachment = null;</span>
<a href="#l10.112"></a><span id="l10.112">     }</span>
<a href="#l10.113"></a><span id="l10.113"> </span>
<a href="#l10.114"></a><span id="l10.114">     gContentChanged = true;</span>
<a href="#l10.115"></a><span id="l10.115">     dispatchAttachmentBucketEvent(&quot;attachments-removed&quot;, removedAttachments);</span>
<a href="#l10.116"></a><span id="l10.116">     AttachmentsChanged();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -165,17 +165,17 @@ HandlerInfoWrapper.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">     return this.wrappedHandlerInfo.possibleApplicationHandlers;</span>
<a href="#l11.5"></a><span id="l11.5">   },</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7">   addPossibleApplicationHandler: function(aNewHandler) {</span>
<a href="#l11.8"></a><span id="l11.8">     try {</span>
<a href="#l11.9"></a><span id="l11.9">       if (this.possibleApplicationHandlers.indexOf(0, aNewHandler) != -1)</span>
<a href="#l11.10"></a><span id="l11.10">         return;</span>
<a href="#l11.11"></a><span id="l11.11">     } catch (e) { }</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    this.possibleApplicationHandlers.appendElement(aNewHandler, false);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    this.possibleApplicationHandlers.appendElement(aNewHandler);</span>
<a href="#l11.14"></a><span id="l11.14">   },</span>
<a href="#l11.15"></a><span id="l11.15"> </span>
<a href="#l11.16"></a><span id="l11.16">   removePossibleApplicationHandler: function(aHandler) {</span>
<a href="#l11.17"></a><span id="l11.17">     var defaultApp = this.preferredApplicationHandler;</span>
<a href="#l11.18"></a><span id="l11.18">     if (defaultApp &amp;&amp; aHandler.equals(defaultApp)) {</span>
<a href="#l11.19"></a><span id="l11.19">       // If the app we remove was the default app, we must make sure</span>
<a href="#l11.20"></a><span id="l11.20">       // it won't be used anymore</span>
<a href="#l11.21"></a><span id="l11.21">       this.alwaysAskBeforeHandling = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/components/search/content/searchCommon.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/components/search/content/searchCommon.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -396,17 +396,17 @@ var SearchSupport =</span>
<a href="#l12.4"></a><span id="l12.4">         searchTerm.booleanAnd = false; // actually don't care here</span>
<a href="#l12.5"></a><span id="l12.5">         searchTerm.attrib = nsMsgSearchAttrib.Uint32HdrProperty;</span>
<a href="#l12.6"></a><span id="l12.6">         searchTerm.op = nsMsgSearchOp.IsLessThan;</span>
<a href="#l12.7"></a><span id="l12.7">         value = searchTerm.value;</span>
<a href="#l12.8"></a><span id="l12.8">         value.attrib = searchTerm.attrib;</span>
<a href="#l12.9"></a><span id="l12.9">         searchTerm.hdrProperty = this._hdrIndexedProperty;</span>
<a href="#l12.10"></a><span id="l12.10">         value.status = reindexTime;</span>
<a href="#l12.11"></a><span id="l12.11">         searchTerm.value = value;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        searchTerms.appendElement(searchTerm, false);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+        searchTerms.appendElement(searchTerm);</span>
<a href="#l12.14"></a><span id="l12.14">         this._headerEnumerator = this._currentFolderToIndex.msgDatabase</span>
<a href="#l12.15"></a><span id="l12.15">                                  .getFilterEnumerator(searchTerms);</span>
<a href="#l12.16"></a><span id="l12.16">       }</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18">       // iterate over the folder finding the next message to index</span>
<a href="#l12.19"></a><span id="l12.19">       while (this._headerEnumerator.hasMoreElements())</span>
<a href="#l12.20"></a><span id="l12.20">       {</span>
<a href="#l12.21"></a><span id="l12.21">         let msgHdr = this._headerEnumerator.getNext()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/test/mozmill/addrbook/test-update-mailing-list.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/test/mozmill/addrbook/test-update-mailing-list.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -28,17 +28,17 @@ function test_contact_in_mailing_list_up</span>
<a href="#l13.4"></a><span id="l13.4">   let ab = create_mork_address_book(&quot;Some Address Book&quot;);</span>
<a href="#l13.5"></a><span id="l13.5">   // And a contact...</span>
<a href="#l13.6"></a><span id="l13.6">   let contact = create_contact(kOldAddress, &quot;Some Contact&quot;, true);</span>
<a href="#l13.7"></a><span id="l13.7">   // And our mailing list.</span>
<a href="#l13.8"></a><span id="l13.8">   let ml = create_mailing_list(&quot;Some Mailing List&quot;);</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10">   // Add the mailing list to the address book, and then the card to the</span>
<a href="#l13.11"></a><span id="l13.11">   // address book, and finally, the card to the mailing list.</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  ml.addressLists.appendElement(contact, false);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  ml.addressLists.appendElement(contact);</span>
<a href="#l13.14"></a><span id="l13.14">   ml = ab.addMailList(ml);</span>
<a href="#l13.15"></a><span id="l13.15"> </span>
<a href="#l13.16"></a><span id="l13.16">   contact = ml.addressLists.queryElementAt(0, Ci.nsIAbCard);</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18">   // Open the address book, select our contact...</span>
<a href="#l13.19"></a><span id="l13.19">   let abw = open_address_book_window(mc);</span>
<a href="#l13.20"></a><span id="l13.20">   select_address_book(ab);</span>
<a href="#l13.21"></a><span id="l13.21">   select_contact(contact);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -48,17 +48,17 @@ function test_move_message() {</span>
<a href="#l14.4"></a><span id="l14.4">   let recentMenu = popups[popups.length - 1]</span>
<a href="#l14.5"></a><span id="l14.5">                          .querySelector('[label=&quot;Recent&quot;]');</span>
<a href="#l14.6"></a><span id="l14.6">   assert_equals(recentMenu.getAttribute(&quot;disabled&quot;), &quot;true&quot;);</span>
<a href="#l14.7"></a><span id="l14.7">   gInitRecentMenuCount = recentMenu.itemCount;</span>
<a href="#l14.8"></a><span id="l14.8">   assert_equals(gInitRecentMenuCount, 0);</span>
<a href="#l14.9"></a><span id="l14.9">   mc.close_popup_sequence(popups);</span>
<a href="#l14.10"></a><span id="l14.10">   let array = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l14.11"></a><span id="l14.11">                 .createInstance(Ci.nsIMutableArray);</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  array.appendElement(msgHdr, false);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  array.appendElement(msgHdr);</span>
<a href="#l14.14"></a><span id="l14.14">   let copyListener = {</span>
<a href="#l14.15"></a><span id="l14.15">     copyDone: false,</span>
<a href="#l14.16"></a><span id="l14.16">     OnStartCopy: function() {},</span>
<a href="#l14.17"></a><span id="l14.17">     OnProgress: function(aProgress, aProgressMax) {},</span>
<a href="#l14.18"></a><span id="l14.18">     SetMessageKey: function(aKey) { },</span>
<a href="#l14.19"></a><span id="l14.19">     SetMessageId: function(aMessageId) {},</span>
<a href="#l14.20"></a><span id="l14.20">     OnStopCopy: function(aStatus) {</span>
<a href="#l14.21"></a><span id="l14.21">       this.copyDone = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -499,17 +499,17 @@ function test_address_book_switch_disabl</span>
<a href="#l15.4"></a><span id="l15.4">   let ml = create_mailing_list(MAILING_LIST_DIRNAME);</span>
<a href="#l15.5"></a><span id="l15.5">   ab.addMailList(ml);</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">   // Now we have to retrieve the mailing list from</span>
<a href="#l15.8"></a><span id="l15.8">   // the address book, in order for us to add and</span>
<a href="#l15.9"></a><span id="l15.9">   // delete cards from it.</span>
<a href="#l15.10"></a><span id="l15.10">   ml = get_mailing_list_from_address_book(ab, MAILING_LIST_DIRNAME);</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  ml.addressLists.appendElement(card, false);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  ml.addressLists.appendElement(card);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">   // Re-open the inline contact editing panel</span>
<a href="#l15.16"></a><span id="l15.16">   mc.click(mc.aid(lastAddr, {class: 'emailStar'}));</span>
<a href="#l15.17"></a><span id="l15.17">   mc.waitFor(() =&gt; contactPanel.state == &quot;open&quot;,</span>
<a href="#l15.18"></a><span id="l15.18">              &quot;Timeout waiting for contactPanel to open; state=&quot; +</span>
<a href="#l15.19"></a><span id="l15.19">              contactPanel.state);</span>
<a href="#l15.20"></a><span id="l15.20"> </span>
<a href="#l15.21"></a><span id="l15.21">   // The dropdown should be disabled now</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -520,17 +520,17 @@ function test_address_book_switch_disabl</span>
<a href="#l15.23"></a><span id="l15.23">   contactPanel.hidePopup();</span>
<a href="#l15.24"></a><span id="l15.24"> </span>
<a href="#l15.25"></a><span id="l15.25">   // And if we remove the contact from the mailing list, the</span>
<a href="#l15.26"></a><span id="l15.26">   // warning should be gone and the address book switching</span>
<a href="#l15.27"></a><span id="l15.27">   // menu re-enabled.</span>
<a href="#l15.28"></a><span id="l15.28"> </span>
<a href="#l15.29"></a><span id="l15.29">   let cardArray = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l15.30"></a><span id="l15.30">                   .createInstance(Ci.nsIMutableArray);</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-  cardArray.appendElement(card, false);</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+  cardArray.appendElement(card);</span>
<a href="#l15.33"></a><span id="l15.33">   ml.deleteCards(cardArray);</span>
<a href="#l15.34"></a><span id="l15.34"> </span>
<a href="#l15.35"></a><span id="l15.35">   // Re-open the inline contact editing panel</span>
<a href="#l15.36"></a><span id="l15.36">   mc.click(mc.aid(lastAddr, {class: 'emailStar'}));</span>
<a href="#l15.37"></a><span id="l15.37">   mc.waitFor(() =&gt; contactPanel.state == &quot;open&quot;,</span>
<a href="#l15.38"></a><span id="l15.38">              &quot;Timeout waiting for contactPanel to open; state=&quot; +</span>
<a href="#l15.39"></a><span id="l15.39">              contactPanel.state);</span>
<a href="#l15.40"></a><span id="l15.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/test/mozmill/message-window/test-commands.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/test/mozmill/message-window/test-commands.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -29,17 +29,17 @@ var setupModule = function(module) {</span>
<a href="#l16.4"></a><span id="l16.4"> function test_copy_eml_message() {</span>
<a href="#l16.5"></a><span id="l16.5">   // First, copy an email to a folder and delete it immediately just so it shows</span>
<a href="#l16.6"></a><span id="l16.6">   // up in the recent folders list. This simplifies navigation of the copy</span>
<a href="#l16.7"></a><span id="l16.7">   // context menu.</span>
<a href="#l16.8"></a><span id="l16.8">   be_in_folder(folder1);</span>
<a href="#l16.9"></a><span id="l16.9">   let message = select_click_row(0);</span>
<a href="#l16.10"></a><span id="l16.10">   let array = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l16.11"></a><span id="l16.11">                 .createInstance(Ci.nsIMutableArray);</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  array.appendElement(message, false);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+  array.appendElement(message);</span>
<a href="#l16.14"></a><span id="l16.14">   MailServices.copy.CopyMessages(folder1, array, folder2, true,</span>
<a href="#l16.15"></a><span id="l16.15">                                  null, mc.window.msgWindow, true);</span>
<a href="#l16.16"></a><span id="l16.16">   be_in_folder(folder2);</span>
<a href="#l16.17"></a><span id="l16.17">   select_click_row(0);</span>
<a href="#l16.18"></a><span id="l16.18">   press_delete(mc);</span>
<a href="#l16.19"></a><span id="l16.19"> </span>
<a href="#l16.20"></a><span id="l16.20">   // Now, open a .eml file and copy it to our folder.</span>
<a href="#l16.21"></a><span id="l16.21">   let thisFilePath = os.getFileForPath(__file__);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-address-book-helpers.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-address-book-helpers.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -95,17 +95,17 @@ function ensure_no_card_exists(emailAddr</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5">   while (books.hasMoreElements()) {</span>
<a href="#l17.6"></a><span id="l17.6">     var ab = books.getNext().QueryInterface(Ci.nsIAbDirectory);</span>
<a href="#l17.7"></a><span id="l17.7">     try {</span>
<a href="#l17.8"></a><span id="l17.8">       var card = ab.cardForEmailAddress(emailAddress);</span>
<a href="#l17.9"></a><span id="l17.9">       if (card) {</span>
<a href="#l17.10"></a><span id="l17.10">         let cardArray = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l17.11"></a><span id="l17.11">                           .createInstance(Ci.nsIMutableArray);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-        cardArray.appendElement(card, false);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+        cardArray.appendElement(card);</span>
<a href="#l17.14"></a><span id="l17.14">         ab.deleteCards(cardArray);</span>
<a href="#l17.15"></a><span id="l17.15">       }</span>
<a href="#l17.16"></a><span id="l17.16">     }</span>
<a href="#l17.17"></a><span id="l17.17">     catch (ex) { }</span>
<a href="#l17.18"></a><span id="l17.18">   }</span>
<a href="#l17.19"></a><span id="l17.19"> }</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/addrbook/content/abDragDrop.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/addrbook/content/abDragDrop.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -288,17 +288,17 @@ var abDirTreeObserver = {</span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5">         directory.dropCard(card, needToCopyCard);</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7">         // This is true only if srcURI is &quot;All ABs&quot; and action is moving.</span>
<a href="#l18.8"></a><span id="l18.8">         if (srcDirectory) {</span>
<a href="#l18.9"></a><span id="l18.9">           let cardArray =</span>
<a href="#l18.10"></a><span id="l18.10">             Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l18.11"></a><span id="l18.11">                       .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-          cardArray.appendElement(card, false);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+          cardArray.appendElement(card);</span>
<a href="#l18.14"></a><span id="l18.14">           srcDirectory.deleteCards(cardArray);</span>
<a href="#l18.15"></a><span id="l18.15">         }</span>
<a href="#l18.16"></a><span id="l18.16">       }</span>
<a href="#l18.17"></a><span id="l18.17">     }</span>
<a href="#l18.18"></a><span id="l18.18"> </span>
<a href="#l18.19"></a><span id="l18.19">     var cardsTransferredText;</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21">     // If we are moving, but not moving to a directory, then delete the</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/addrbook/content/abMailListDialog.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/addrbook/content/abMailListDialog.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -121,17 +121,17 @@ function GetListValue(mailList, doAdd)</span>
<a href="#l19.4"></a><span id="l19.4">           {</span>
<a href="#l19.5"></a><span id="l19.5">             cardproperty = Components.classes[&quot;@mozilla.org/addressbook/cardproperty;1&quot;].createInstance();</span>
<a href="#l19.6"></a><span id="l19.6">             cardproperty = cardproperty.QueryInterface(Components.interfaces.nsIAbCard);</span>
<a href="#l19.7"></a><span id="l19.7">           }</span>
<a href="#l19.8"></a><span id="l19.8">           cardproperty.primaryEmail = addrObjects[j].email;</span>
<a href="#l19.9"></a><span id="l19.9">           cardproperty.displayName = addrObjects[j].name || addrObjects[j].email;</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">           if (doAdd || (doAdd == false &amp;&amp; pos &gt;= oldTotal))</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-            mailList.addressLists.appendElement(cardproperty, false);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+            mailList.addressLists.appendElement(cardproperty);</span>
<a href="#l19.14"></a><span id="l19.14">         }</span>
<a href="#l19.15"></a><span id="l19.15">         pos++;</span>
<a href="#l19.16"></a><span id="l19.16">       }</span>
<a href="#l19.17"></a><span id="l19.17">     }</span>
<a href="#l19.18"></a><span id="l19.18">     i++;</span>
<a href="#l19.19"></a><span id="l19.19">   }</span>
<a href="#l19.20"></a><span id="l19.20"> </span>
<a href="#l19.21"></a><span id="l19.21">   --i;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_collection.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_collection.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -297,17 +297,17 @@ function run_test()</span>
<a href="#l20.4"></a><span id="l20.4"> </span>
<a href="#l20.5"></a><span id="l20.5">   // Test - Do all emails at the same time.</span>
<a href="#l20.6"></a><span id="l20.6"> </span>
<a href="#l20.7"></a><span id="l20.7">   // First delete all existing cards</span>
<a href="#l20.8"></a><span id="l20.8">   var childCards = collectChecker.AB.childCards;</span>
<a href="#l20.9"></a><span id="l20.9">   var cardsToDelete = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l20.10"></a><span id="l20.10">                                 .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l20.11"></a><span id="l20.11">   while (childCards.hasMoreElements()) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    cardsToDelete.appendElement(childCards.getNext(), false);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    cardsToDelete.appendElement(childCards.getNext());</span>
<a href="#l20.14"></a><span id="l20.14">   }</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16">   collectChecker.AB.deleteCards(cardsToDelete);</span>
<a href="#l20.17"></a><span id="l20.17"> </span>
<a href="#l20.18"></a><span id="l20.18">   // Null these directly, so gc() will purge them</span>
<a href="#l20.19"></a><span id="l20.19">   childCards = null;</span>
<a href="#l20.20"></a><span id="l20.20">   cardsToDelete = null;</span>
<a href="#l20.21"></a><span id="l20.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_notifications.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_notifications.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -70,17 +70,17 @@ function run_test() {</span>
<a href="#l21.4"></a><span id="l21.4">   do_check_eq(abListener.result[0][4], null);</span>
<a href="#l21.5"></a><span id="l21.5">   abListener.result = [];</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7">   // Test - delete a card</span>
<a href="#l21.8"></a><span id="l21.8"> </span>
<a href="#l21.9"></a><span id="l21.9">   var cardsToDelete = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l21.10"></a><span id="l21.10">                         .createInstance(Ci.nsIMutableArray);</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  cardsToDelete.appendElement(newCard, false);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  cardsToDelete.appendElement(newCard);</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">   AB.deleteCards(cardsToDelete);</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17">   do_check_eq(abListener.result[0][0], &quot;onItemRemoved&quot;);</span>
<a href="#l21.18"></a><span id="l21.18">   do_check_eq(abListener.result[0][1], AB);</span>
<a href="#l21.19"></a><span id="l21.19">   do_check_eq(abListener.result[0][2], newCard);</span>
<a href="#l21.20"></a><span id="l21.20">   abListener.result = [];</span>
<a href="#l21.21"></a><span id="l21.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_uuid.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_uuid.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -73,26 +73,26 @@ function check_directory(directory) {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">   newCard = directory.addCard(newCard);</span>
<a href="#l22.6"></a><span id="l22.6">   do_check_eq(newCard.directoryId, prefId);</span>
<a href="#l22.7"></a><span id="l22.7">   do_check_neq(newCard.localId, &quot;&quot;);</span>
<a href="#l22.8"></a><span id="l22.8">   do_check_eq(seenIds.indexOf(newCard.localId), -1);</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10">   // Remove the new card to be stable!</span>
<a href="#l22.11"></a><span id="l22.11">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  array.appendElement(newCard, false);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  array.appendElement(newCard);</span>
<a href="#l22.14"></a><span id="l22.14">   directory.deleteCards(array);</span>
<a href="#l22.15"></a><span id="l22.15"> </span>
<a href="#l22.16"></a><span id="l22.16">   // We need to iterate over the array of cards to avoid any problems if someone</span>
<a href="#l22.17"></a><span id="l22.17">   // makes the childCards enumerator reflect changes to directory...</span>
<a href="#l22.18"></a><span id="l22.18">   for (var card of cards) {</span>
<a href="#l22.19"></a><span id="l22.19">     // Question 5.1: Does deleting a card properly set the uids?</span>
<a href="#l22.20"></a><span id="l22.20">     var localId = card.localId;</span>
<a href="#l22.21"></a><span id="l22.21">     array.clear();</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineminus">-    array.appendElement(card, false);</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineplus">+    array.appendElement(card);</span>
<a href="#l22.24"></a><span id="l22.24">     directory.deleteCards(array);</span>
<a href="#l22.25"></a><span id="l22.25">     do_check_eq(card.directoryId, &quot;&quot;);</span>
<a href="#l22.26"></a><span id="l22.26">     do_check_eq(card.localId, localId);</span>
<a href="#l22.27"></a><span id="l22.27"> </span>
<a href="#l22.28"></a><span id="l22.28">     // Question 5.2: Does readding a card try to best-fit the uid?</span>
<a href="#l22.29"></a><span id="l22.29">     card = directory.addCard(card);</span>
<a href="#l22.30"></a><span id="l22.30">     do_check_eq(card.directoryId, prefId);</span>
<a href="#l22.31"></a><span id="l22.31">     do_check_eq(card.localId, localId);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/base/content/junkCommands.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/base/content/junkCommands.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -172,17 +172,17 @@ MessageClassifier.prototype =</span>
<a href="#l23.4"></a><span id="l23.4">     // check whitelisting</span>
<a href="#l23.5"></a><span id="l23.5">     if (aSpamSettings.checkWhiteList(aMsgHdr))</span>
<a href="#l23.6"></a><span id="l23.6">     {</span>
<a href="#l23.7"></a><span id="l23.7">       // message is ham from whitelist</span>
<a href="#l23.8"></a><span id="l23.8">       var db = aMsgHdr.folder.msgDatabase;</span>
<a href="#l23.9"></a><span id="l23.9">       db.setStringProperty(aMsgHdr.messageKey, &quot;junkscore&quot;,</span>
<a href="#l23.10"></a><span id="l23.10">                            Components.interfaces.nsIJunkMailPlugin.IS_HAM_SCORE);</span>
<a href="#l23.11"></a><span id="l23.11">       db.setStringProperty(aMsgHdr.messageKey, &quot;junkscoreorigin&quot;, &quot;whitelist&quot;);</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-      this.mGoodMsgHdrs.appendElement(aMsgHdr, false);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+      this.mGoodMsgHdrs.appendElement(aMsgHdr);</span>
<a href="#l23.14"></a><span id="l23.14">       return;</span>
<a href="#l23.15"></a><span id="l23.15">     }</span>
<a href="#l23.16"></a><span id="l23.16"> </span>
<a href="#l23.17"></a><span id="l23.17">     var messageURI = aMsgHdr.folder.generateMessageURI(aMsgHdr.messageKey) + &quot;?fetchCompleteMessage=true&quot;;</span>
<a href="#l23.18"></a><span id="l23.18">     this.mMessages[messageURI] = aMsgHdr;</span>
<a href="#l23.19"></a><span id="l23.19">     if (this.firstMessage)</span>
<a href="#l23.20"></a><span id="l23.20">     {</span>
<a href="#l23.21"></a><span id="l23.21">       this.firstMessage = false;</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -219,19 +219,19 @@ MessageClassifier.prototype =</span>
<a href="#l23.23"></a><span id="l23.23">     //</span>
<a href="#l23.24"></a><span id="l23.24">     var msgHdr = this.mMessages[aClassifiedMsgURI];</span>
<a href="#l23.25"></a><span id="l23.25">     var db = msgHdr.folder.msgDatabase;</span>
<a href="#l23.26"></a><span id="l23.26">     db.setStringProperty(msgHdr.messageKey, &quot;junkscore&quot;, score);</span>
<a href="#l23.27"></a><span id="l23.27">     db.setStringProperty(msgHdr.messageKey, &quot;junkscoreorigin&quot;, &quot;plugin&quot;);</span>
<a href="#l23.28"></a><span id="l23.28">     db.setStringProperty(msgHdr.messageKey, &quot;junkpercent&quot;, aJunkPercent);</span>
<a href="#l23.29"></a><span id="l23.29"> </span>
<a href="#l23.30"></a><span id="l23.30">     if (aClassification == nsIJunkMailPlugin.JUNK)</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-      this.mJunkMsgHdrs.appendElement(msgHdr, false);</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+      this.mJunkMsgHdrs.appendElement(msgHdr);</span>
<a href="#l23.33"></a><span id="l23.33">     else if (aClassification == nsIJunkMailPlugin.GOOD)</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineminus">-      this.mGoodMsgHdrs.appendElement(msgHdr, false);</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineplus">+      this.mGoodMsgHdrs.appendElement(msgHdr);</span>
<a href="#l23.36"></a><span id="l23.36"> </span>
<a href="#l23.37"></a><span id="l23.37">     var nextMsgURI = this.mMessageQueue.shift();</span>
<a href="#l23.38"></a><span id="l23.38">     if (nextMsgURI)</span>
<a href="#l23.39"></a><span id="l23.39">     {</span>
<a href="#l23.40"></a><span id="l23.40">       ++this.mProcessedMessages;</span>
<a href="#l23.41"></a><span id="l23.41">       if (Date.now() &gt; this.lastStatusTime + statusDisplayInterval)</span>
<a href="#l23.42"></a><span id="l23.42">       {</span>
<a href="#l23.43"></a><span id="l23.43">         this.lastStatusTime = Date.now();</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineat">@@ -382,17 +382,17 @@ function deleteJunkInFolder()</span>
<a href="#l23.45"></a><span id="l23.45">     var junkMsgHdrs = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l23.46"></a><span id="l23.46">                                 .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l23.47"></a><span id="l23.47">     var enumerator = gDBView.msgFolder.messages;</span>
<a href="#l23.48"></a><span id="l23.48">     while (enumerator.hasMoreElements())</span>
<a href="#l23.49"></a><span id="l23.49">     {</span>
<a href="#l23.50"></a><span id="l23.50">       var msgHdr = enumerator.getNext().QueryInterface(Components.interfaces.nsIMsgDBHdr);</span>
<a href="#l23.51"></a><span id="l23.51">       var junkScore = msgHdr.getStringProperty(&quot;junkscore&quot;);</span>
<a href="#l23.52"></a><span id="l23.52">       if (junkScore == Components.interfaces.nsIJunkMailPlugin.IS_SPAM_SCORE)</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineminus">-        junkMsgHdrs.appendElement(msgHdr, false);</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineplus">+        junkMsgHdrs.appendElement(msgHdr);</span>
<a href="#l23.55"></a><span id="l23.55">     }</span>
<a href="#l23.56"></a><span id="l23.56"> </span>
<a href="#l23.57"></a><span id="l23.57">     if (junkMsgHdrs.length)</span>
<a href="#l23.58"></a><span id="l23.58">       gDBView.msgFolder.deleteMessages(junkMsgHdrs, msgWindow, false, false, null, true);</span>
<a href="#l23.59"></a><span id="l23.59">     return junkMsgHdrs.length;</span>
<a href="#l23.60"></a><span id="l23.60">   }</span>
<a href="#l23.61"></a><span id="l23.61"> </span>
<a href="#l23.62"></a><span id="l23.62">   // Folder is virtual, let the view do the work (but we lose selection)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/base/content/markByDate.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/base/content/markByDate.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -95,29 +95,29 @@ function markInDatabase( lower, upper )</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">   var searchTerm = searchSession.createTerm();</span>
<a href="#l24.6"></a><span id="l24.6">   searchTerm.attrib = nsMsgSearchAttrib.Date;</span>
<a href="#l24.7"></a><span id="l24.7">   searchTerm.op = nsMsgSearchOp.IsBefore;</span>
<a href="#l24.8"></a><span id="l24.8">   var value = searchTerm.value;</span>
<a href="#l24.9"></a><span id="l24.9">   value.attrib = nsMsgSearchAttrib.Date;</span>
<a href="#l24.10"></a><span id="l24.10">   value.date = upper;</span>
<a href="#l24.11"></a><span id="l24.11">   searchTerm.value = value;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  searchTerms.appendElement( searchTerm, false );</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  searchTerms.appendElement( searchTerm );</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15">   if ( lower )</span>
<a href="#l24.16"></a><span id="l24.16">   {</span>
<a href="#l24.17"></a><span id="l24.17">     searchTerm = searchSession.createTerm();</span>
<a href="#l24.18"></a><span id="l24.18">     searchTerm.booleanAnd = true;</span>
<a href="#l24.19"></a><span id="l24.19">     searchTerm.attrib = nsMsgSearchAttrib.Date;</span>
<a href="#l24.20"></a><span id="l24.20">     searchTerm.op = nsMsgSearchOp.IsAfter;</span>
<a href="#l24.21"></a><span id="l24.21">     value = searchTerm.value;</span>
<a href="#l24.22"></a><span id="l24.22">     value.attrib = nsMsgSearchAttrib.Date;</span>
<a href="#l24.23"></a><span id="l24.23">     value.date = lower;</span>
<a href="#l24.24"></a><span id="l24.24">     searchTerm.value = value;</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineminus">-    searchTerms.appendElement( searchTerm, false );</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineplus">+    searchTerms.appendElement( searchTerm );</span>
<a href="#l24.27"></a><span id="l24.27">   }</span>
<a href="#l24.28"></a><span id="l24.28"> </span>
<a href="#l24.29"></a><span id="l24.29">   var filterEnumerator = messageDatabase.getFilterEnumerator( searchTerms );</span>
<a href="#l24.30"></a><span id="l24.30">   </span>
<a href="#l24.31"></a><span id="l24.31">   if ( filterEnumerator )</span>
<a href="#l24.32"></a><span id="l24.32">   {</span>
<a href="#l24.33"></a><span id="l24.33">     var keepGoing;</span>
<a href="#l24.34"></a><span id="l24.34">     var numMatches = {};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/base/search/content/searchTermOverlay.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/base/search/content/searchTermOverlay.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -509,17 +509,17 @@ function saveSearchTerms(searchTerms, te</span>
<a href="#l25.4"></a><span id="l25.4">             } else {</span>
<a href="#l25.5"></a><span id="l25.5">                 // need to create a new searchTerm, and somehow save it to that</span>
<a href="#l25.6"></a><span id="l25.6">                 searchTerm = termOwner.createTerm();</span>
<a href="#l25.7"></a><span id="l25.7">                 gSearchTerms[i].obj.saveTo(searchTerm);</span>
<a href="#l25.8"></a><span id="l25.8">                 // this might not be the right place for the term,</span>
<a href="#l25.9"></a><span id="l25.9">                 // but we need to make the array longer anyway</span>
<a href="#l25.10"></a><span id="l25.10">                 termOwner.appendTerm(searchTerm);</span>
<a href="#l25.11"></a><span id="l25.11">             }</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-            searchTerms.replaceElementAt(searchTerm, i, /* weak */ false);</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+            searchTerms.replaceElementAt(searchTerm, i);</span>
<a href="#l25.14"></a><span id="l25.14">         } catch (ex) {</span>
<a href="#l25.15"></a><span id="l25.15">             dump(&quot;** Error saving element &quot; + i + &quot;: &quot; + ex + &quot;\n&quot;);</span>
<a href="#l25.16"></a><span id="l25.16">         }</span>
<a href="#l25.17"></a><span id="l25.17">     }</span>
<a href="#l25.18"></a><span id="l25.18"> }</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20"> function onReset(event)</span>
<a href="#l25.21"></a><span id="l25.21"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug428427.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug428427.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -65,28 +65,28 @@ var numUnreadMessages;</span>
<a href="#l26.4"></a><span id="l26.4"> function setupVirtualFolder()</span>
<a href="#l26.5"></a><span id="l26.5"> {</span>
<a href="#l26.6"></a><span id="l26.6">   // add as valid tag tag1, though probably not really necessary</span>
<a href="#l26.7"></a><span id="l26.7">   MailServices.tags.addTagForKey(tag1, tag1, null, null);</span>
<a href="#l26.8"></a><span id="l26.8">   </span>
<a href="#l26.9"></a><span id="l26.9">   // add tag1 to 4 messages</span>
<a href="#l26.10"></a><span id="l26.10">   var messages0to3 = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l26.11"></a><span id="l26.11">   for (var i = 0; i &lt;= 3; i++)</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-    messages0to3.appendElement(hdrs[i], false);</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+    messages0to3.appendElement(hdrs[i]);</span>
<a href="#l26.14"></a><span id="l26.14">   localAccountUtils.inboxFolder.addKeywordsToMessages(messages0to3, tag1);</span>
<a href="#l26.15"></a><span id="l26.15"> </span>
<a href="#l26.16"></a><span id="l26.16">   // set 3 messages unread, 2 messages read</span>
<a href="#l26.17"></a><span id="l26.17">   var messages0to2 = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l26.18"></a><span id="l26.18">   for (i = 0; i &lt;= 2; i++)</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineminus">-    messages0to2.appendElement(hdrs[i], false);</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineplus">+    messages0to2.appendElement(hdrs[i]);</span>
<a href="#l26.21"></a><span id="l26.21">   localAccountUtils.inboxFolder.markMessagesRead(messages0to2, false);</span>
<a href="#l26.22"></a><span id="l26.22"> </span>
<a href="#l26.23"></a><span id="l26.23">   var messages3to4 = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l26.24"></a><span id="l26.24">   for (i = 3; i &lt;= 4; i++)</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineminus">-    messages3to4.appendElement(hdrs[i], false);</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineplus">+    messages3to4.appendElement(hdrs[i]);</span>
<a href="#l26.27"></a><span id="l26.27">   localAccountUtils.inboxFolder.markMessagesRead(messages3to4, true);</span>
<a href="#l26.28"></a><span id="l26.28"> </span>
<a href="#l26.29"></a><span id="l26.29">   // search will look for tag tag1 in the inbox folder</span>
<a href="#l26.30"></a><span id="l26.30">   var searchTerm = makeSearchTerm(localAccountUtils.inboxFolder, tag1,</span>
<a href="#l26.31"></a><span id="l26.31">     Ci.nsMsgSearchAttrib.Keywords, Ci.nsMsgSearchOp.Contains);</span>
<a href="#l26.32"></a><span id="l26.32">     </span>
<a href="#l26.33"></a><span id="l26.33">   dump(&quot;creating virtual folder\n&quot;);</span>
<a href="#l26.34"></a><span id="l26.34">   var rootFolder = localAccountUtils.incomingServer.rootMsgFolder;</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineat">@@ -143,27 +143,27 @@ function testVirtualFolder()</span>
<a href="#l26.36"></a><span id="l26.36">   // total messages matching search</span>
<a href="#l26.37"></a><span id="l26.37">   do_check_eq(4, virtualFolder.getTotalMessages(false));</span>
<a href="#l26.38"></a><span id="l26.38">   </span>
<a href="#l26.39"></a><span id="l26.39">   // total unread messages in search</span>
<a href="#l26.40"></a><span id="l26.40">   do_check_eq(3, virtualFolder.getNumUnread(false));</span>
<a href="#l26.41"></a><span id="l26.41"> </span>
<a href="#l26.42"></a><span id="l26.42">   // change unread of one item in search to decrease count</span>
<a href="#l26.43"></a><span id="l26.43">   var message0 = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l26.44"></a><span id="l26.44" class="difflineminus">-  message0.appendElement(hdrs[0], false);</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineplus">+  message0.appendElement(hdrs[0]);</span>
<a href="#l26.46"></a><span id="l26.46">   localAccountUtils.inboxFolder.markMessagesRead(message0, true);</span>
<a href="#l26.47"></a><span id="l26.47">   virtualFolder.updateSummaryTotals(true);</span>
<a href="#l26.48"></a><span id="l26.48"> </span>
<a href="#l26.49"></a><span id="l26.49">   do_check_eq(2, virtualFolder.getNumUnread(false));</span>
<a href="#l26.50"></a><span id="l26.50">   </span>
<a href="#l26.51"></a><span id="l26.51">   /*** failures fixed in this bug ***/</span>
<a href="#l26.52"></a><span id="l26.52">    </span>
<a href="#l26.53"></a><span id="l26.53">   // remove tag from one item to decrease count</span>
<a href="#l26.54"></a><span id="l26.54">   var message1 = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineminus">-  message1.appendElement(hdrs[1], false);</span>
<a href="#l26.56"></a><span id="l26.56" class="difflineplus">+  message1.appendElement(hdrs[1]);</span>
<a href="#l26.57"></a><span id="l26.57"> </span>
<a href="#l26.58"></a><span id="l26.58">   localAccountUtils.inboxFolder.removeKeywordsFromMessages(message1, tag1);</span>
<a href="#l26.59"></a><span id="l26.59">   virtualFolder.updateSummaryTotals(true);</span>
<a href="#l26.60"></a><span id="l26.60">   do_check_eq(3, virtualFolder.getTotalMessages(false));</span>
<a href="#l26.61"></a><span id="l26.61">   do_check_eq(1, virtualFolder.getNumUnread(false));</span>
<a href="#l26.62"></a><span id="l26.62"> </span>
<a href="#l26.63"></a><span id="l26.63">   // End of test, so release our header references</span>
<a href="#l26.64"></a><span id="l26.64">   hdrs = null;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug471682.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug471682.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -45,17 +45,17 @@ var step2 =</span>
<a href="#l27.4"></a><span id="l27.4">     gHdr = localAccountUtils.inboxFolder.GetMessageHeader(aKey);</span>
<a href="#l27.5"></a><span id="l27.5">   },</span>
<a href="#l27.6"></a><span id="l27.6">   SetMessageId: function(aMessageId) {},</span>
<a href="#l27.7"></a><span id="l27.7">   OnStopCopy: function(aStatus)</span>
<a href="#l27.8"></a><span id="l27.8">   {</span>
<a href="#l27.9"></a><span id="l27.9">     do_check_neq(gHdr, null);</span>
<a href="#l27.10"></a><span id="l27.10">     // copy the message into the subfolder</span>
<a href="#l27.11"></a><span id="l27.11">     var messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    messages.appendElement(gHdr, false);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    messages.appendElement(gHdr);</span>
<a href="#l27.14"></a><span id="l27.14">     MailServices.copy.CopyMessages(localAccountUtils.inboxFolder, messages, gSubfolder,</span>
<a href="#l27.15"></a><span id="l27.15">                                    false, step3, null, false);</span>
<a href="#l27.16"></a><span id="l27.16">   }</span>
<a href="#l27.17"></a><span id="l27.17"> };</span>
<a href="#l27.18"></a><span id="l27.18"> </span>
<a href="#l27.19"></a><span id="l27.19"> // step 3: after the copy, delay to allow copy to complete and allow possible</span>
<a href="#l27.20"></a><span id="l27.20"> //         file error time</span>
<a href="#l27.21"></a><span id="l27.21"> // nsIMsgCopyServiceListener implementation</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -70,17 +70,17 @@ var step3 =</span>
<a href="#l27.23"></a><span id="l27.23">     do_timeout(2000, step4);</span>
<a href="#l27.24"></a><span id="l27.24">   }</span>
<a href="#l27.25"></a><span id="l27.25"> }</span>
<a href="#l27.26"></a><span id="l27.26"> </span>
<a href="#l27.27"></a><span id="l27.27"> // step 4: start a second copy</span>
<a href="#l27.28"></a><span id="l27.28"> function step4()</span>
<a href="#l27.29"></a><span id="l27.29"> {</span>
<a href="#l27.30"></a><span id="l27.30">   var messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-  messages.appendElement(gHdr, false);</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+  messages.appendElement(gHdr);</span>
<a href="#l27.33"></a><span id="l27.33">   MailServices.copy.CopyMessages(localAccountUtils.inboxFolder, messages, gSubfolder,</span>
<a href="#l27.34"></a><span id="l27.34">                                  false, step5, null, false);</span>
<a href="#l27.35"></a><span id="l27.35"> }</span>
<a href="#l27.36"></a><span id="l27.36"> </span>
<a href="#l27.37"></a><span id="l27.37"> // step 5:  actual tests of file size and date</span>
<a href="#l27.38"></a><span id="l27.38"> // nsIMsgCopyServiceListener implementation</span>
<a href="#l27.39"></a><span id="l27.39"> var step5 = </span>
<a href="#l27.40"></a><span id="l27.40"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/base/test/unit/test_compactColumnSave.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_compactColumnSave.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -103,17 +103,17 @@ function copyFileMessage(file, destFolde</span>
<a href="#l28.4"></a><span id="l28.4"> {</span>
<a href="#l28.5"></a><span id="l28.5">   MailServices.copy.CopyFileMessage(file, destFolder, null, isDraftOrTemplate, 0, &quot;&quot;, copyListener, null);</span>
<a href="#l28.6"></a><span id="l28.6"> }</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8"> function deleteMessages(srcFolder, items)</span>
<a href="#l28.9"></a><span id="l28.9"> {</span>
<a href="#l28.10"></a><span id="l28.10">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l28.11"></a><span id="l28.11">   items.forEach(function (item) {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l28.14"></a><span id="l28.14">   });</span>
<a href="#l28.15"></a><span id="l28.15">   </span>
<a href="#l28.16"></a><span id="l28.16">   srcFolder.deleteMessages(array, null, false, true, copyListener, true);</span>
<a href="#l28.17"></a><span id="l28.17"> }</span>
<a href="#l28.18"></a><span id="l28.18"> </span>
<a href="#l28.19"></a><span id="l28.19"> /*</span>
<a href="#l28.20"></a><span id="l28.20">  * TESTS</span>
<a href="#l28.21"></a><span id="l28.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/base/test/unit/test_copyChaining.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_copyChaining.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -35,17 +35,17 @@ var gTestArray =</span>
<a href="#l29.4"></a><span id="l29.4"> ];</span>
<a href="#l29.5"></a><span id="l29.5"> </span>
<a href="#l29.6"></a><span id="l29.6"> function CopyNextMessage()</span>
<a href="#l29.7"></a><span id="l29.7"> {</span>
<a href="#l29.8"></a><span id="l29.8">   if (gMsgEnumerator.hasMoreElements()) {</span>
<a href="#l29.9"></a><span id="l29.9">     let msgHdr = gMsgEnumerator.getNext().QueryInterface(</span>
<a href="#l29.10"></a><span id="l29.10">       Components.interfaces.nsIMsgDBHdr);</span>
<a href="#l29.11"></a><span id="l29.11">     var messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-    messages.appendElement(msgHdr, false);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+    messages.appendElement(msgHdr);</span>
<a href="#l29.14"></a><span id="l29.14">     MailServices.copy.CopyMessages(gCopySource, messages, gCopyDest, true,</span>
<a href="#l29.15"></a><span id="l29.15">                                    copyListener, null, false);</span>
<a href="#l29.16"></a><span id="l29.16">   }</span>
<a href="#l29.17"></a><span id="l29.17">   else</span>
<a href="#l29.18"></a><span id="l29.18">     do_throw ('TEST FAILED - out of messages');</span>
<a href="#l29.19"></a><span id="l29.19"> }</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21"> function run_test()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/base/test/unit/test_copyThenMoveManual.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_copyThenMoveManual.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -40,17 +40,17 @@ var gTestArray =</span>
<a href="#l30.4"></a><span id="l30.4">   function *getLocalMessages1() {</span>
<a href="#l30.5"></a><span id="l30.5">     gPOP3Pump.files = gFiles;</span>
<a href="#l30.6"></a><span id="l30.6">     yield gPOP3Pump.run();</span>
<a href="#l30.7"></a><span id="l30.7">   },</span>
<a href="#l30.8"></a><span id="l30.8">   // test applying filters to a message header</span>
<a href="#l30.9"></a><span id="l30.9">   function *applyFilters() {</span>
<a href="#l30.10"></a><span id="l30.10">     let messages = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l30.11"></a><span id="l30.11">                      .createInstance(Ci.nsIMutableArray);</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    messages.appendElement(localAccountUtils.inboxFolder.firstNewMessage, false);</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    messages.appendElement(localAccountUtils.inboxFolder.firstNewMessage);</span>
<a href="#l30.14"></a><span id="l30.14">     let promiseFolderEvent =</span>
<a href="#l30.15"></a><span id="l30.15">       PromiseTestUtils.promiseFolderEvent(localAccountUtils.inboxFolder,</span>
<a href="#l30.16"></a><span id="l30.16">                                           &quot;DeleteOrMoveMsgCompleted&quot;);</span>
<a href="#l30.17"></a><span id="l30.17">     MailServices.filters.applyFilters(Ci.nsMsgFilterType.Manual,</span>
<a href="#l30.18"></a><span id="l30.18">                                       messages, localAccountUtils.inboxFolder, null);</span>
<a href="#l30.19"></a><span id="l30.19">     yield promiseFolderEvent;</span>
<a href="#l30.20"></a><span id="l30.20">   },</span>
<a href="#l30.21"></a><span id="l30.21">   function verifyFolders1() {</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -65,17 +65,17 @@ var gTestArray =</span>
<a href="#l30.23"></a><span id="l30.23">   function *getLocalMessages2() {</span>
<a href="#l30.24"></a><span id="l30.24">     gPOP3Pump.files = gFiles;</span>
<a href="#l30.25"></a><span id="l30.25">     yield gPOP3Pump.run();</span>
<a href="#l30.26"></a><span id="l30.26">   },</span>
<a href="#l30.27"></a><span id="l30.27">   // use the alternate call into the filter service</span>
<a href="#l30.28"></a><span id="l30.28">   function *applyFiltersToFolders() {</span>
<a href="#l30.29"></a><span id="l30.29">     let folders = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l30.30"></a><span id="l30.30">                     .createInstance(Ci.nsIMutableArray);</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-    folders.appendElement(localAccountUtils.inboxFolder, false);</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+    folders.appendElement(localAccountUtils.inboxFolder);</span>
<a href="#l30.33"></a><span id="l30.33">     let promiseFolderEvent =</span>
<a href="#l30.34"></a><span id="l30.34">       PromiseTestUtils.promiseFolderEvent(localAccountUtils.inboxFolder,</span>
<a href="#l30.35"></a><span id="l30.35">                                           &quot;DeleteOrMoveMsgCompleted&quot;);</span>
<a href="#l30.36"></a><span id="l30.36">     MailServices.filters.applyFiltersToFolders(gFilterList, folders, null);</span>
<a href="#l30.37"></a><span id="l30.37">     yield promiseFolderEvent;</span>
<a href="#l30.38"></a><span id="l30.38">   },</span>
<a href="#l30.39"></a><span id="l30.39">   function verifyFolders2() {</span>
<a href="#l30.40"></a><span id="l30.40">     // Copy and Move should each now have 2 message in them.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/base/test/unit/test_copyToInvalidDB.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_copyToInvalidDB.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -51,17 +51,17 @@ function* actually_run_test() {</span>
<a href="#l31.4"></a><span id="l31.4">   let dbPath = gTestFolder2.filePath;</span>
<a href="#l31.5"></a><span id="l31.5">   dbPath.leafName = dbPath.leafName + &quot;.msf&quot;;</span>
<a href="#l31.6"></a><span id="l31.6">   dbPath.remove(false);</span>
<a href="#l31.7"></a><span id="l31.7">   gTestFolder2.msgDatabase = null;</span>
<a href="#l31.8"></a><span id="l31.8"> </span>
<a href="#l31.9"></a><span id="l31.9">   let msgHdr = mailTestUtils.firstMsgHdr(gTestFolder);</span>
<a href="#l31.10"></a><span id="l31.10">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l31.11"></a><span id="l31.11">   gMsgId1 = msgHdr.messageId;</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  messages.appendElement(msgHdr, false);</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  messages.appendElement(msgHdr);</span>
<a href="#l31.14"></a><span id="l31.14">   MailServices.copy.CopyMessages(gTestFolder, messages, gTestFolder2, true,</span>
<a href="#l31.15"></a><span id="l31.15">                            asyncCopyListener, null, false);</span>
<a href="#l31.16"></a><span id="l31.16">   yield false;</span>
<a href="#l31.17"></a><span id="l31.17">   try {</span>
<a href="#l31.18"></a><span id="l31.18">     gTestFolder2.getDatabaseWithReparse(asyncUrlListener, null);</span>
<a href="#l31.19"></a><span id="l31.19">   } catch (ex) {</span>
<a href="#l31.20"></a><span id="l31.20">     do_check_true(ex.result == Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l31.21"></a><span id="l31.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/base/test/unit/test_emptyTrash.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_emptyTrash.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -69,17 +69,17 @@ function copyFileMessage(file, destFolde</span>
<a href="#l32.4"></a><span id="l32.4"> {</span>
<a href="#l32.5"></a><span id="l32.5">   MailServices.copy.CopyFileMessage(file, destFolder, null, isDraftOrTemplate, 0, &quot;&quot;, copyListener, null);</span>
<a href="#l32.6"></a><span id="l32.6"> }</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> function deleteMessages(srcFolder, items)</span>
<a href="#l32.9"></a><span id="l32.9"> {</span>
<a href="#l32.10"></a><span id="l32.10">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l32.11"></a><span id="l32.11">   items.forEach(function (item) {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l32.14"></a><span id="l32.14">   });</span>
<a href="#l32.15"></a><span id="l32.15">   </span>
<a href="#l32.16"></a><span id="l32.16">   srcFolder.deleteMessages(array, null, false, true, copyListener, true);</span>
<a href="#l32.17"></a><span id="l32.17"> }</span>
<a href="#l32.18"></a><span id="l32.18"> </span>
<a href="#l32.19"></a><span id="l32.19"> /*</span>
<a href="#l32.20"></a><span id="l32.20">  * TESTS</span>
<a href="#l32.21"></a><span id="l32.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/base/test/unit/test_folderCompact.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_folderCompact.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -84,27 +84,27 @@ function copyFileMessage(file, destFolde</span>
<a href="#l33.4"></a><span id="l33.4">   return listener.promise;</span>
<a href="#l33.5"></a><span id="l33.5"> }</span>
<a href="#l33.6"></a><span id="l33.6"> </span>
<a href="#l33.7"></a><span id="l33.7"> function copyMessages(items, isMove, srcFolder, destFolder)</span>
<a href="#l33.8"></a><span id="l33.8"> {</span>
<a href="#l33.9"></a><span id="l33.9">   let listener = new PromiseTestUtils.PromiseCopyListener(copyListenerWrap);</span>
<a href="#l33.10"></a><span id="l33.10">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l33.11"></a><span id="l33.11">   items.forEach(function (item) {</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l33.14"></a><span id="l33.14">   });</span>
<a href="#l33.15"></a><span id="l33.15">   MailServices.copy.CopyMessages(srcFolder, array, destFolder, isMove, listener, null, true);</span>
<a href="#l33.16"></a><span id="l33.16">   return listener.promise;</span>
<a href="#l33.17"></a><span id="l33.17"> }</span>
<a href="#l33.18"></a><span id="l33.18"> </span>
<a href="#l33.19"></a><span id="l33.19"> function deleteMessages(srcFolder, items)</span>
<a href="#l33.20"></a><span id="l33.20"> {</span>
<a href="#l33.21"></a><span id="l33.21">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l33.22"></a><span id="l33.22">   items.forEach(function (item) {</span>
<a href="#l33.23"></a><span id="l33.23" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l33.25"></a><span id="l33.25">   });</span>
<a href="#l33.26"></a><span id="l33.26">   </span>
<a href="#l33.27"></a><span id="l33.27">   let listener = new PromiseTestUtils.PromiseCopyListener(copyListenerWrap);</span>
<a href="#l33.28"></a><span id="l33.28">   srcFolder.deleteMessages(array, null, false, true, listener, true);</span>
<a href="#l33.29"></a><span id="l33.29">   return listener.promise;</span>
<a href="#l33.30"></a><span id="l33.30"> }</span>
<a href="#l33.31"></a><span id="l33.31"> </span>
<a href="#l33.32"></a><span id="l33.32"> function calculateFolderSize(folder)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -57,45 +57,45 @@ function copyFileMessage(file, destFolde</span>
<a href="#l34.4"></a><span id="l34.4">   if (gCurrStatus == kStatus.everythingDone)</span>
<a href="#l34.5"></a><span id="l34.5">     resetStatusAndProceed();</span>
<a href="#l34.6"></a><span id="l34.6"> }</span>
<a href="#l34.7"></a><span id="l34.7"> </span>
<a href="#l34.8"></a><span id="l34.8"> function copyMessages(items, isMove, srcFolder, destFolder)</span>
<a href="#l34.9"></a><span id="l34.9"> {</span>
<a href="#l34.10"></a><span id="l34.10">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l34.11"></a><span id="l34.11">   items.forEach(function (item) {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l34.14"></a><span id="l34.14">   });</span>
<a href="#l34.15"></a><span id="l34.15">   gExpectedEvents = [</span>
<a href="#l34.16"></a><span id="l34.16">     [gMFNService.msgsMoveCopyCompleted, isMove, items, destFolder, true]];</span>
<a href="#l34.17"></a><span id="l34.17">   gCopyService.CopyMessages(srcFolder, array, destFolder, isMove, copyListener,</span>
<a href="#l34.18"></a><span id="l34.18">                             null, true);</span>
<a href="#l34.19"></a><span id="l34.19">   gCurrStatus |= kStatus.functionCallDone;</span>
<a href="#l34.20"></a><span id="l34.20">   if (gCurrStatus == kStatus.everythingDone)</span>
<a href="#l34.21"></a><span id="l34.21">     resetStatusAndProceed();</span>
<a href="#l34.22"></a><span id="l34.22"> }</span>
<a href="#l34.23"></a><span id="l34.23"> </span>
<a href="#l34.24"></a><span id="l34.24"> function copyFolders(items, isMove, destFolder)</span>
<a href="#l34.25"></a><span id="l34.25"> {</span>
<a href="#l34.26"></a><span id="l34.26">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l34.27"></a><span id="l34.27">   items.forEach(function (item) {</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l34.29"></a><span id="l34.29" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l34.30"></a><span id="l34.30">   });</span>
<a href="#l34.31"></a><span id="l34.31">   gExpectedEvents = [[gMFNService.folderMoveCopyCompleted, isMove, items, destFolder]];</span>
<a href="#l34.32"></a><span id="l34.32">   gCopyService.CopyFolders(array, destFolder, isMove, copyListener, null);</span>
<a href="#l34.33"></a><span id="l34.33">   gCurrStatus |= kStatus.functionCallDone;</span>
<a href="#l34.34"></a><span id="l34.34">   if (gCurrStatus == kStatus.everythingDone)</span>
<a href="#l34.35"></a><span id="l34.35">     resetStatusAndProceed();</span>
<a href="#l34.36"></a><span id="l34.36"> }</span>
<a href="#l34.37"></a><span id="l34.37"> </span>
<a href="#l34.38"></a><span id="l34.38"> function deleteMessages(srcFolder, items, deleteStorage, isMove)</span>
<a href="#l34.39"></a><span id="l34.39"> {</span>
<a href="#l34.40"></a><span id="l34.40">   var array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l34.41"></a><span id="l34.41">   items.forEach(function (item) {</span>
<a href="#l34.42"></a><span id="l34.42" class="difflineminus">-    array.appendElement(item, false);</span>
<a href="#l34.43"></a><span id="l34.43" class="difflineplus">+    array.appendElement(item);</span>
<a href="#l34.44"></a><span id="l34.44">   });</span>
<a href="#l34.45"></a><span id="l34.45">   // We should only get the delete notification only if we are not moving, and are deleting from</span>
<a href="#l34.46"></a><span id="l34.46">   // the storage/trash. We should get only the move/copy notification if we aren't.</span>
<a href="#l34.47"></a><span id="l34.47">   var isTrashFolder = srcFolder.getFlag(Ci.nsMsgFolderFlags.Trash);</span>
<a href="#l34.48"></a><span id="l34.48">   if (!isMove &amp;&amp; (deleteStorage || isTrashFolder))</span>
<a href="#l34.49"></a><span id="l34.49">   {</span>
<a href="#l34.50"></a><span id="l34.50">     // We won't be getting any OnStopCopy notification in this case</span>
<a href="#l34.51"></a><span id="l34.51">     gCurrStatus = kStatus.onStopCopyDone;</span>
<a href="#l34.52"></a><span id="l34.52" class="difflineat">@@ -121,17 +121,17 @@ function renameFolder(folder, newName)</span>
<a href="#l34.53"></a><span id="l34.53">   if (gCurrStatus == kStatus.everythingDone)</span>
<a href="#l34.54"></a><span id="l34.54">     resetStatusAndProceed();</span>
<a href="#l34.55"></a><span id="l34.55"> }</span>
<a href="#l34.56"></a><span id="l34.56"> </span>
<a href="#l34.57"></a><span id="l34.57"> function deleteFolder(folder, child)</span>
<a href="#l34.58"></a><span id="l34.58"> {</span>
<a href="#l34.59"></a><span id="l34.59">   var array = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l34.60"></a><span id="l34.60">                 .createInstance(Ci.nsIMutableArray);</span>
<a href="#l34.61"></a><span id="l34.61" class="difflineminus">-  array.appendElement(folder, false);</span>
<a href="#l34.62"></a><span id="l34.62" class="difflineplus">+  array.appendElement(folder);</span>
<a href="#l34.63"></a><span id="l34.63">   // We won't be getting any OnStopCopy notification at all</span>
<a href="#l34.64"></a><span id="l34.64">   // XXX delete to trash should get one, but we'll need to pass the listener</span>
<a href="#l34.65"></a><span id="l34.65">   // somehow to deleteSubFolders</span>
<a href="#l34.66"></a><span id="l34.66">   gCurrStatus = kStatus.onStopCopyDone;</span>
<a href="#l34.67"></a><span id="l34.67">   // If ancestor is trash, expect a folderDeleted, otherwise expect</span>
<a href="#l34.68"></a><span id="l34.68">   // a folderMoveCopyCompleted.</span>
<a href="#l34.69"></a><span id="l34.69">   if (gLocalTrashFolder.isAncestorOf(folder))</span>
<a href="#l34.70"></a><span id="l34.70">     if (child)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/base/test/unit/test_quarantineFilterMove.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_quarantineFilterMove.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -56,18 +56,18 @@ var gTestArray =</span>
<a href="#l35.4"></a><span id="l35.4">     messageContent = getContentFromMessage(secondMsgHdr);</span>
<a href="#l35.5"></a><span id="l35.5">     do_check_true(messageContent.includes(&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=436880&quot;));</span>
<a href="#l35.6"></a><span id="l35.6">   },</span>
<a href="#l35.7"></a><span id="l35.7">   function* copyMovedMessages() {</span>
<a href="#l35.8"></a><span id="l35.8">     let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l35.9"></a><span id="l35.9">     let enumerator = gMoveFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l35.10"></a><span id="l35.10">     let firstMsgHdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l35.11"></a><span id="l35.11">     let secondMsgHdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-    messages.appendElement(firstMsgHdr, false);</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineminus">-    messages.appendElement(secondMsgHdr, false);</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineplus">+    messages.appendElement(firstMsgHdr);</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineplus">+    messages.appendElement(secondMsgHdr);</span>
<a href="#l35.16"></a><span id="l35.16">     let promiseCopyListener = new PromiseTestUtils.PromiseCopyListener();</span>
<a href="#l35.17"></a><span id="l35.17">     MailServices.copy.CopyMessages(gMoveFolder, messages, gMoveFolder2, false,</span>
<a href="#l35.18"></a><span id="l35.18">                                    promiseCopyListener, null, false);</span>
<a href="#l35.19"></a><span id="l35.19">     let promiseMoveMsg =</span>
<a href="#l35.20"></a><span id="l35.20">       PromiseTestUtils.promiseFolderEvent(gMoveFolder, &quot;DeleteOrMoveMsgCompleted&quot;);</span>
<a href="#l35.21"></a><span id="l35.21">     yield Promise.all([promiseCopyListener.promise, promiseMoveMsg]);</span>
<a href="#l35.22"></a><span id="l35.22">   },</span>
<a href="#l35.23"></a><span id="l35.23">   function verifyFolders2() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -165,17 +165,17 @@ function richCreateMessage(fields, attac</span>
<a href="#l36.4"></a><span id="l36.4">   } catch (e) {</span>
<a href="#l36.5"></a><span id="l36.5">     // we don't have to remove the folder because it doen't exist yet</span>
<a href="#l36.6"></a><span id="l36.6">     gDraftFolder = rootFolder.createLocalSubfolder(&quot;Drafts&quot;);</span>
<a href="#l36.7"></a><span id="l36.7">   }</span>
<a href="#l36.8"></a><span id="l36.8">   // Clear all messages</span>
<a href="#l36.9"></a><span id="l36.9">   let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l36.10"></a><span id="l36.10">   let enumerator = gDraftFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l36.11"></a><span id="l36.11">   while (enumerator.hasMoreElements())</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    array.appendElement(enumerator.getNext(), false);</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+    array.appendElement(enumerator.getNext());</span>
<a href="#l36.14"></a><span id="l36.14">   if (array.length)</span>
<a href="#l36.15"></a><span id="l36.15">     gDraftFolder.deleteMessages(array, null, true, false, null, false);</span>
<a href="#l36.16"></a><span id="l36.16"> </span>
<a href="#l36.17"></a><span id="l36.17">   // Set attachment</span>
<a href="#l36.18"></a><span id="l36.18">   fields.removeAttachments();</span>
<a href="#l36.19"></a><span id="l36.19">   for (let attachment of attachments)</span>
<a href="#l36.20"></a><span id="l36.20">     fields.addAttachment(attachment);</span>
<a href="#l36.21"></a><span id="l36.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/db/gloda/modules/index_msg.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/index_msg.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -738,83 +738,83 @@ var GlodaMsgIndexer = {</span>
<a href="#l37.4"></a><span id="l37.4">       searchTerm.beginsGrouping = true;</span>
<a href="#l37.5"></a><span id="l37.5">       searchTerm.attrib = nsMsgSearchAttrib.Uint32HdrProperty;</span>
<a href="#l37.6"></a><span id="l37.6">       searchTerm.op = nsMsgSearchOp.Is;</span>
<a href="#l37.7"></a><span id="l37.7">       let value = searchTerm.value;</span>
<a href="#l37.8"></a><span id="l37.8">       value.attrib = searchTerm.attrib;</span>
<a href="#l37.9"></a><span id="l37.9">       value.status = 0;</span>
<a href="#l37.10"></a><span id="l37.10">       searchTerm.value = value;</span>
<a href="#l37.11"></a><span id="l37.11">       searchTerm.hdrProperty = GLODA_MESSAGE_ID_PROPERTY;</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-      searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+      searchTerms.appendElement(searchTerm);</span>
<a href="#l37.14"></a><span id="l37.14"> </span>
<a href="#l37.15"></a><span id="l37.15">       // second term: || GLODA_MESSAGE_ID_PROPERTY Is GLODA_OLD_BAD_MESSAGE_ID</span>
<a href="#l37.16"></a><span id="l37.16">       searchTerm = searchSession.createTerm();</span>
<a href="#l37.17"></a><span id="l37.17">       searchTerm.booleanAnd = false; // OR</span>
<a href="#l37.18"></a><span id="l37.18">       searchTerm.attrib = nsMsgSearchAttrib.Uint32HdrProperty;</span>
<a href="#l37.19"></a><span id="l37.19">       searchTerm.op = nsMsgSearchOp.Is;</span>
<a href="#l37.20"></a><span id="l37.20">       value = searchTerm.value;</span>
<a href="#l37.21"></a><span id="l37.21">       value.attrib = searchTerm.attrib;</span>
<a href="#l37.22"></a><span id="l37.22">       value.status = GLODA_OLD_BAD_MESSAGE_ID;</span>
<a href="#l37.23"></a><span id="l37.23">       searchTerm.value = value;</span>
<a href="#l37.24"></a><span id="l37.24">       searchTerm.hdrProperty = GLODA_MESSAGE_ID_PROPERTY;</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineminus">-      searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.26"></a><span id="l37.26" class="difflineplus">+      searchTerms.appendElement(searchTerm);</span>
<a href="#l37.27"></a><span id="l37.27"> </span>
<a href="#l37.28"></a><span id="l37.28">       //  third term: || GLODA_DIRTY_PROPERTY Isnt 0 )</span>
<a href="#l37.29"></a><span id="l37.29">       searchTerm = searchSession.createTerm();</span>
<a href="#l37.30"></a><span id="l37.30">       searchTerm.booleanAnd = false;</span>
<a href="#l37.31"></a><span id="l37.31">       searchTerm.endsGrouping = true;</span>
<a href="#l37.32"></a><span id="l37.32">       searchTerm.attrib = nsMsgSearchAttrib.Uint32HdrProperty;</span>
<a href="#l37.33"></a><span id="l37.33">       searchTerm.op = nsMsgSearchOp.Isnt;</span>
<a href="#l37.34"></a><span id="l37.34">       value = searchTerm.value;</span>
<a href="#l37.35"></a><span id="l37.35">       value.attrib = searchTerm.attrib;</span>
<a href="#l37.36"></a><span id="l37.36">       value.status = 0;</span>
<a href="#l37.37"></a><span id="l37.37">       searchTerm.value = value;</span>
<a href="#l37.38"></a><span id="l37.38">       searchTerm.hdrProperty = GLODA_DIRTY_PROPERTY;</span>
<a href="#l37.39"></a><span id="l37.39" class="difflineminus">-      searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.40"></a><span id="l37.40" class="difflineplus">+      searchTerms.appendElement(searchTerm);</span>
<a href="#l37.41"></a><span id="l37.41"> </span>
<a href="#l37.42"></a><span id="l37.42">       // JUNK_SCORE_PROPERTY Isnt 100</span>
<a href="#l37.43"></a><span id="l37.43">       // For symmetry with our event-driven stuff, we just directly deal with</span>
<a href="#l37.44"></a><span id="l37.44">       //  the header property.</span>
<a href="#l37.45"></a><span id="l37.45">       searchTerm = searchSession.createTerm();</span>
<a href="#l37.46"></a><span id="l37.46">       searchTerm.booleanAnd = true;</span>
<a href="#l37.47"></a><span id="l37.47">       searchTerm.attrib = nsMsgSearchAttrib.HdrProperty;</span>
<a href="#l37.48"></a><span id="l37.48">       searchTerm.op = nsMsgSearchOp.Isnt;</span>
<a href="#l37.49"></a><span id="l37.49">       value = searchTerm.value;</span>
<a href="#l37.50"></a><span id="l37.50">       value.attrib = searchTerm.attrib;</span>
<a href="#l37.51"></a><span id="l37.51">       value.str = JUNK_SPAM_SCORE_STR;</span>
<a href="#l37.52"></a><span id="l37.52">       searchTerm.value = value;</span>
<a href="#l37.53"></a><span id="l37.53">       searchTerm.hdrProperty = JUNK_SCORE_PROPERTY;</span>
<a href="#l37.54"></a><span id="l37.54" class="difflineminus">-      searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.55"></a><span id="l37.55" class="difflineplus">+      searchTerms.appendElement(searchTerm);</span>
<a href="#l37.56"></a><span id="l37.56"> </span>
<a href="#l37.57"></a><span id="l37.57">       if (!isLocal)</span>
<a href="#l37.58"></a><span id="l37.58">       {</span>
<a href="#l37.59"></a><span id="l37.59">         // If the folder is offline, then the message should be too</span>
<a href="#l37.60"></a><span id="l37.60">         if (this._indexingFolder.flags &amp; Ci.nsMsgFolderFlags.Offline) {</span>
<a href="#l37.61"></a><span id="l37.61">           // third term: &amp;&amp; Status Is nsMsgMessageFlags.Offline</span>
<a href="#l37.62"></a><span id="l37.62">           searchTerm = searchSession.createTerm();</span>
<a href="#l37.63"></a><span id="l37.63">           searchTerm.booleanAnd = true;</span>
<a href="#l37.64"></a><span id="l37.64">           searchTerm.attrib = nsMsgSearchAttrib.MsgStatus;</span>
<a href="#l37.65"></a><span id="l37.65">           searchTerm.op = nsMsgSearchOp.Is;</span>
<a href="#l37.66"></a><span id="l37.66">           value = searchTerm.value;</span>
<a href="#l37.67"></a><span id="l37.67">           value.attrib = searchTerm.attrib;</span>
<a href="#l37.68"></a><span id="l37.68">           value.status = nsMsgMessageFlags.Offline;</span>
<a href="#l37.69"></a><span id="l37.69">           searchTerm.value = value;</span>
<a href="#l37.70"></a><span id="l37.70" class="difflineminus">-          searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.71"></a><span id="l37.71" class="difflineplus">+          searchTerms.appendElement(searchTerm);</span>
<a href="#l37.72"></a><span id="l37.72">         }</span>
<a href="#l37.73"></a><span id="l37.73"> </span>
<a href="#l37.74"></a><span id="l37.74">         // fourth term: &amp;&amp; Status Isnt nsMsgMessageFlags.Expunged</span>
<a href="#l37.75"></a><span id="l37.75">         searchTerm = searchSession.createTerm();</span>
<a href="#l37.76"></a><span id="l37.76">         searchTerm.booleanAnd = true;</span>
<a href="#l37.77"></a><span id="l37.77">         searchTerm.attrib = nsMsgSearchAttrib.MsgStatus;</span>
<a href="#l37.78"></a><span id="l37.78">         searchTerm.op = nsMsgSearchOp.Isnt;</span>
<a href="#l37.79"></a><span id="l37.79">         value = searchTerm.value;</span>
<a href="#l37.80"></a><span id="l37.80">         value.attrib = searchTerm.attrib;</span>
<a href="#l37.81"></a><span id="l37.81">         value.status = nsMsgMessageFlags.Expunged;</span>
<a href="#l37.82"></a><span id="l37.82">         searchTerm.value = value;</span>
<a href="#l37.83"></a><span id="l37.83" class="difflineminus">-        searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.84"></a><span id="l37.84" class="difflineplus">+        searchTerms.appendElement(searchTerm);</span>
<a href="#l37.85"></a><span id="l37.85">       }</span>
<a href="#l37.86"></a><span id="l37.86"> </span>
<a href="#l37.87"></a><span id="l37.87">       this._indexingEnumerator =</span>
<a href="#l37.88"></a><span id="l37.88">         this._indexingDatabase.getFilterEnumerator(searchTerms, true);</span>
<a href="#l37.89"></a><span id="l37.89">     }</span>
<a href="#l37.90"></a><span id="l37.90">     else if (aEnumKind == this.kEnumIndexedMsgs) {</span>
<a href="#l37.91"></a><span id="l37.91">       // Enumerate only messages that are already indexed.  This comes out to:</span>
<a href="#l37.92"></a><span id="l37.92">       //  ((GLODA_MESSAGE_ID_PROPERTY &gt; GLODA_FIRST_VALID_MESSAGE_ID-1) &amp;&amp;</span>
<a href="#l37.93"></a><span id="l37.93" class="difflineat">@@ -843,30 +843,30 @@ var GlodaMsgIndexer = {</span>
<a href="#l37.94"></a><span id="l37.94">       // use != 0 if we're allow pre-bad ids.</span>
<a href="#l37.95"></a><span id="l37.95">       searchTerm.op = aAllowPreBadIds ? nsMsgSearchOp.Isnt</span>
<a href="#l37.96"></a><span id="l37.96">                                       : nsMsgSearchOp.IsGreaterThan;</span>
<a href="#l37.97"></a><span id="l37.97">       let value = searchTerm.value;</span>
<a href="#l37.98"></a><span id="l37.98">       value.attrib = searchTerm.attrib;</span>
<a href="#l37.99"></a><span id="l37.99">       value.status = aAllowPreBadIds ? 0 : (GLODA_FIRST_VALID_MESSAGE_ID - 1);</span>
<a href="#l37.100"></a><span id="l37.100">       searchTerm.value = value;</span>
<a href="#l37.101"></a><span id="l37.101">       searchTerm.hdrProperty = GLODA_MESSAGE_ID_PROPERTY;</span>
<a href="#l37.102"></a><span id="l37.102" class="difflineminus">-      searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.103"></a><span id="l37.103" class="difflineplus">+      searchTerms.appendElement(searchTerm);</span>
<a href="#l37.104"></a><span id="l37.104"> </span>
<a href="#l37.105"></a><span id="l37.105">       //  second term: &amp;&amp; GLODA_DIRTY_PROPERTY Isnt kMessageFilthy)</span>
<a href="#l37.106"></a><span id="l37.106">       searchTerm = searchSession.createTerm();</span>
<a href="#l37.107"></a><span id="l37.107">       searchTerm.booleanAnd = true;</span>
<a href="#l37.108"></a><span id="l37.108">       searchTerm.endsGrouping = true;</span>
<a href="#l37.109"></a><span id="l37.109">       searchTerm.attrib = nsMsgSearchAttrib.Uint32HdrProperty;</span>
<a href="#l37.110"></a><span id="l37.110">       searchTerm.op = nsMsgSearchOp.Isnt;</span>
<a href="#l37.111"></a><span id="l37.111">       value = searchTerm.value;</span>
<a href="#l37.112"></a><span id="l37.112">       value.attrib = searchTerm.attrib;</span>
<a href="#l37.113"></a><span id="l37.113">       value.status = this.kMessageFilthy;</span>
<a href="#l37.114"></a><span id="l37.114">       searchTerm.value = value;</span>
<a href="#l37.115"></a><span id="l37.115">       searchTerm.hdrProperty = GLODA_DIRTY_PROPERTY;</span>
<a href="#l37.116"></a><span id="l37.116" class="difflineminus">-      searchTerms.appendElement(searchTerm, false);</span>
<a href="#l37.117"></a><span id="l37.117" class="difflineplus">+      searchTerms.appendElement(searchTerm);</span>
<a href="#l37.118"></a><span id="l37.118"> </span>
<a href="#l37.119"></a><span id="l37.119">       // The use-case of already indexed messages does not want them reversed;</span>
<a href="#l37.120"></a><span id="l37.120">       //  we care about seeing the message keys in order.</span>
<a href="#l37.121"></a><span id="l37.121">       this._indexingEnumerator =</span>
<a href="#l37.122"></a><span id="l37.122">         this._indexingDatabase.getFilterEnumerator(searchTerms, false);</span>
<a href="#l37.123"></a><span id="l37.123">     }</span>
<a href="#l37.124"></a><span id="l37.124">     else if (aEnumKind == this.kEnumAllMsgs) {</span>
<a href="#l37.125"></a><span id="l37.125">       this._indexingEnumerator =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_index_addressbook.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_index_addressbook.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -32,17 +32,17 @@ function get_card_for_email(aEmailAddres</span>
<a href="#l38.4"></a><span id="l38.4">   return [null, null];</span>
<a href="#l38.5"></a><span id="l38.5"> }</span>
<a href="#l38.6"></a><span id="l38.6"> </span>
<a href="#l38.7"></a><span id="l38.7"> function delete_card(aEmailAddress) {</span>
<a href="#l38.8"></a><span id="l38.8">   let [book, card] = get_card_for_email(aEmailAddress);</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10">   let cardArray = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l38.11"></a><span id="l38.11">                     .createInstance(Ci.nsIMutableArray);</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  cardArray.appendElement(card, false);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+  cardArray.appendElement(card);</span>
<a href="#l38.14"></a><span id="l38.14"> </span>
<a href="#l38.15"></a><span id="l38.15">   MailServices.ab.getDirectory(book.URI)</span>
<a href="#l38.16"></a><span id="l38.16">               .deleteCards(cardArray);</span>
<a href="#l38.17"></a><span id="l38.17"> }</span>
<a href="#l38.18"></a><span id="l38.18"> </span>
<a href="#l38.19"></a><span id="l38.19"> function get_cached_gloda_identity_for_email(aEmailAddress) {</span>
<a href="#l38.20"></a><span id="l38.20">   return GlodaCollectionManager.cacheLookupOneByUniqueValue(</span>
<a href="#l38.21"></a><span id="l38.21">     Gloda.NOUN_IDENTITY, &quot;email@&quot; + aEmailAddress.toLowerCase());</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_filter_enumerator.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_filter_enumerator.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -53,39 +53,39 @@ function run_test() {</span>
<a href="#l39.4"></a><span id="l39.4">   searchTerm.beginsGrouping = true;</span>
<a href="#l39.5"></a><span id="l39.5">   searchTerm.booleanAnd = true;</span>
<a href="#l39.6"></a><span id="l39.6">   searchTerm.attrib = nsMsgSearchAttrib.FolderFlag;</span>
<a href="#l39.7"></a><span id="l39.7">   searchTerm.op = nsMsgSearchOp.Is;</span>
<a href="#l39.8"></a><span id="l39.8">   let value = searchTerm.value;</span>
<a href="#l39.9"></a><span id="l39.9">   value.status = nsMsgFolderFlags.Mail;</span>
<a href="#l39.10"></a><span id="l39.10">   value.attrib = nsMsgSearchAttrib.FolderFlag;</span>
<a href="#l39.11"></a><span id="l39.11">   searchTerm.value = value;</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-  searchTerms.appendElement(searchTerm, false);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+  searchTerms.appendElement(searchTerm);</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15">   searchTerm = searchSession.createTerm();</span>
<a href="#l39.16"></a><span id="l39.16">   searchTerm.booleanAnd = true;</span>
<a href="#l39.17"></a><span id="l39.17">   searchTerm.attrib = nsMsgSearchAttrib.FolderFlag;</span>
<a href="#l39.18"></a><span id="l39.18">   searchTerm.op = nsMsgSearchOp.Isnt;</span>
<a href="#l39.19"></a><span id="l39.19">   value = searchTerm.value;</span>
<a href="#l39.20"></a><span id="l39.20">   value.status = nsMsgFolderFlags.ImapBox;</span>
<a href="#l39.21"></a><span id="l39.21">   value.attrib = nsMsgSearchAttrib.FolderFlag;</span>
<a href="#l39.22"></a><span id="l39.22">   searchTerm.value = value;</span>
<a href="#l39.23"></a><span id="l39.23">   searchTerm.endsGrouping = true;</span>
<a href="#l39.24"></a><span id="l39.24" class="difflineminus">-  searchTerms.appendElement(searchTerm, false);</span>
<a href="#l39.25"></a><span id="l39.25" class="difflineplus">+  searchTerms.appendElement(searchTerm);</span>
<a href="#l39.26"></a><span id="l39.26"> </span>
<a href="#l39.27"></a><span id="l39.27">   searchTerm = searchSession.createTerm();</span>
<a href="#l39.28"></a><span id="l39.28">   searchTerm.booleanAnd = true;</span>
<a href="#l39.29"></a><span id="l39.29">   searchTerm.attrib = nsMsgSearchAttrib.HdrProperty;</span>
<a href="#l39.30"></a><span id="l39.30">   searchTerm.hdrProperty = &quot;gloda-id&quot;;</span>
<a href="#l39.31"></a><span id="l39.31">   searchTerm.op = nsMsgSearchOp.IsEmpty;</span>
<a href="#l39.32"></a><span id="l39.32">   value = searchTerm.value;</span>
<a href="#l39.33"></a><span id="l39.33">   value.str = &quot;gloda-id&quot;;</span>
<a href="#l39.34"></a><span id="l39.34">   value.attrib = nsMsgSearchAttrib.HdrProperty;</span>
<a href="#l39.35"></a><span id="l39.35">   searchTerm.value = value;</span>
<a href="#l39.36"></a><span id="l39.36" class="difflineminus">-  searchTerms.appendElement(searchTerm, false);</span>
<a href="#l39.37"></a><span id="l39.37" class="difflineplus">+  searchTerms.appendElement(searchTerm);</span>
<a href="#l39.38"></a><span id="l39.38"> </span>
<a href="#l39.39"></a><span id="l39.39">   let filterEnumerator = inboxDB.getFilterEnumerator(searchTerms);</span>
<a href="#l39.40"></a><span id="l39.40">   let numMatches = {};</span>
<a href="#l39.41"></a><span id="l39.41">   let keepGoing = inboxDB.nextMatchingHdrs(filterEnumerator, 100, 100, null, numMatches);</span>
<a href="#l39.42"></a><span id="l39.42">   do_check_eq(kNumExpectedMatches, numMatches.value);</span>
<a href="#l39.43"></a><span id="l39.43">   do_check_false(keepGoing);</span>
<a href="#l39.44"></a><span id="l39.44">   filterEnumerator = inboxDB.getFilterEnumerator(searchTerms);</span>
<a href="#l39.45"></a><span id="l39.45">   let matchingHdrs = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/FeedItem.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/FeedItem.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -373,17 +373,17 @@ FeedItem.prototype =</span>
<a href="#l40.4"></a><span id="l40.4">  */</span>
<a href="#l40.5"></a><span id="l40.5">   tagItem: function(aMsgDBHdr, aKeywords)</span>
<a href="#l40.6"></a><span id="l40.6">   {</span>
<a href="#l40.7"></a><span id="l40.7">     let category = this.feed.options.category;</span>
<a href="#l40.8"></a><span id="l40.8">     if (!aKeywords.length || !category.enabled)</span>
<a href="#l40.9"></a><span id="l40.9">       return;</span>
<a href="#l40.10"></a><span id="l40.10"> </span>
<a href="#l40.11"></a><span id="l40.11">     let msgArray = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-    msgArray.appendElement(aMsgDBHdr, false);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+    msgArray.appendElement(aMsgDBHdr);</span>
<a href="#l40.14"></a><span id="l40.14"> </span>
<a href="#l40.15"></a><span id="l40.15">     let prefix = category.prefixEnabled ? category.prefix : &quot;&quot;;</span>
<a href="#l40.16"></a><span id="l40.16">     let rtl = Services.prefs.getIntPref(&quot;bidi.direction&quot;) == 2;</span>
<a href="#l40.17"></a><span id="l40.17"> </span>
<a href="#l40.18"></a><span id="l40.18">     let keys = [];</span>
<a href="#l40.19"></a><span id="l40.19">     for (let keyword of aKeywords)</span>
<a href="#l40.20"></a><span id="l40.20">     {</span>
<a href="#l40.21"></a><span id="l40.21">       keyword = rtl ? keyword + prefix : prefix + keyword;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -47,18 +47,18 @@ function showMessageReadSecurityInfo()</span>
<a href="#l41.4"></a><span id="l41.4">     return;</span>
<a href="#l41.5"></a><span id="l41.5">   }</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7">   let params = Components.classes[&quot;@mozilla.org/embedcomp/dialogparam;1&quot;]</span>
<a href="#l41.8"></a><span id="l41.8">     .createInstance(Components.interfaces.nsIDialogParamBlock);</span>
<a href="#l41.9"></a><span id="l41.9">   params.objects = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l41.10"></a><span id="l41.10">     .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l41.11"></a><span id="l41.11">   // Append even if null... the receiver must handle that.</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  params.objects.appendElement(gSignerCert, false);</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineminus">-  params.objects.appendElement(gEncryptionCert, false);</span>
<a href="#l41.14"></a><span id="l41.14" class="difflineplus">+  params.objects.appendElement(gSignerCert);</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineplus">+  params.objects.appendElement(gEncryptionCert);</span>
<a href="#l41.16"></a><span id="l41.16"> </span>
<a href="#l41.17"></a><span id="l41.17">   // int array starts with index 0, but that is used for window exit status</span>
<a href="#l41.18"></a><span id="l41.18">   params.SetInt(1, gSignatureStatus);</span>
<a href="#l41.19"></a><span id="l41.19">   params.SetInt(2, gEncryptionStatus);</span>
<a href="#l41.20"></a><span id="l41.20"> </span>
<a href="#l41.21"></a><span id="l41.21">   window.openDialog(&quot;chrome://messenger-smime/content/msgReadSecurityInfo.xul&quot;,</span>
<a href="#l41.22"></a><span id="l41.22">                     &quot;&quot;, &quot;chrome,resizable,modal,dialog,centerscreen&quot;, params);</span>
<a href="#l41.23"></a><span id="l41.23"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_compactOfflineStore.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_compactOfflineStore.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -91,17 +91,17 @@ var tests = [</span>
<a href="#l42.4"></a><span id="l42.4">     IMAPPump.inbox.downloadAllForOffline(asyncUrlListener, null);</span>
<a href="#l42.5"></a><span id="l42.5">     yield false;</span>
<a href="#l42.6"></a><span id="l42.6">   },</span>
<a href="#l42.7"></a><span id="l42.7">   function* markOneMsgDeleted() {</span>
<a href="#l42.8"></a><span id="l42.8">     // mark a message deleted, and then do a compact of just</span>
<a href="#l42.9"></a><span id="l42.9">     // that folder.</span>
<a href="#l42.10"></a><span id="l42.10">     let msgHdr = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId5);</span>
<a href="#l42.11"></a><span id="l42.11">     let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-    array.appendElement(msgHdr, false);</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+    array.appendElement(msgHdr);</span>
<a href="#l42.14"></a><span id="l42.14">     // store the deleted flag</span>
<a href="#l42.15"></a><span id="l42.15">     IMAPPump.inbox.storeImapFlags(0x0008, true, [msgHdr.messageKey], 1, asyncUrlListener);</span>
<a href="#l42.16"></a><span id="l42.16">     yield false;</span>
<a href="#l42.17"></a><span id="l42.17">   },</span>
<a href="#l42.18"></a><span id="l42.18">   function* compactOneFolder() {</span>
<a href="#l42.19"></a><span id="l42.19">     IMAPPump.incomingServer.deleteModel = Ci.nsMsgImapDeleteModels.IMAPDelete;</span>
<a href="#l42.20"></a><span id="l42.20">     // asyncUrlListener will get called when both expunge and offline store</span>
<a href="#l42.21"></a><span id="l42.21">     // compaction are finished. dummyMsgWindow is required to make the backend</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineat">@@ -113,17 +113,17 @@ var tests = [</span>
<a href="#l42.23"></a><span id="l42.23">     // check that nstmp file has been cleaned up.</span>
<a href="#l42.24"></a><span id="l42.24">     let tmpFile = gRootFolder.filePath;</span>
<a href="#l42.25"></a><span id="l42.25">     tmpFile.append(&quot;nstmp&quot;);</span>
<a href="#l42.26"></a><span id="l42.26">     do_check_false(tmpFile.exists());</span>
<a href="#l42.27"></a><span id="l42.27">     dump(&quot;deleting one message\n&quot;);</span>
<a href="#l42.28"></a><span id="l42.28">     IMAPPump.incomingServer.deleteModel = Ci.nsMsgImapDeleteModels.MoveToTrash;</span>
<a href="#l42.29"></a><span id="l42.29">     let msgHdr = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId1);</span>
<a href="#l42.30"></a><span id="l42.30">     let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-    array.appendElement(msgHdr, false);</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+    array.appendElement(msgHdr);</span>
<a href="#l42.33"></a><span id="l42.33">     IMAPPump.inbox.deleteMessages(array, null, false, true, CopyListener, false);</span>
<a href="#l42.34"></a><span id="l42.34">     let trashFolder = gRootFolder.getChildNamed(&quot;Trash&quot;);</span>
<a href="#l42.35"></a><span id="l42.35">     // hack to force uid validity to get initialized for trash.</span>
<a href="#l42.36"></a><span id="l42.36">     trashFolder.updateFolder(null);</span>
<a href="#l42.37"></a><span id="l42.37">     yield false;</span>
<a href="#l42.38"></a><span id="l42.38">   },</span>
<a href="#l42.39"></a><span id="l42.39">   function* compactOfflineStore() {</span>
<a href="#l42.40"></a><span id="l42.40">     dump(&quot;compacting offline store\n&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapAutoSync.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapAutoSync.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -91,17 +91,17 @@ function* test_moveMessageToTargetFolder</span>
<a href="#l43.4"></a><span id="l43.4">   let observer = gAutoSyncManager.QueryInterface(Ci.nsIObserver);</span>
<a href="#l43.5"></a><span id="l43.5">   observer.observe(null, &quot;mail:appIdle&quot;, &quot;back&quot;);</span>
<a href="#l43.6"></a><span id="l43.6">   let msgHdr = mailTestUtils.firstMsgHdr(IMAPPump.inbox);</span>
<a href="#l43.7"></a><span id="l43.7">   do_check_true(msgHdr !== null);</span>
<a href="#l43.8"></a><span id="l43.8"> </span>
<a href="#l43.9"></a><span id="l43.9">   // Now move this message to the target folder.</span>
<a href="#l43.10"></a><span id="l43.10">   let messages = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l43.11"></a><span id="l43.11">                    .createInstance(Ci.nsIMutableArray);</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  messages.appendElement(msgHdr, false);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+  messages.appendElement(msgHdr);</span>
<a href="#l43.14"></a><span id="l43.14">   MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gTargetFolder, true,</span>
<a href="#l43.15"></a><span id="l43.15">                                  asyncCopyListener, null, false);</span>
<a href="#l43.16"></a><span id="l43.16">   yield false;</span>
<a href="#l43.17"></a><span id="l43.17"> }</span>
<a href="#l43.18"></a><span id="l43.18"> </span>
<a href="#l43.19"></a><span id="l43.19"> function* test_waitForTargetUpdate()</span>
<a href="#l43.20"></a><span id="l43.20"> {</span>
<a href="#l43.21"></a><span id="l43.21">   // After the copy, now we expect to get notified of the gTargetFolder</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapCopyTimeout.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapCopyTimeout.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -86,17 +86,17 @@ function* loadImapMessage()</span>
<a href="#l44.4"></a><span id="l44.4"> // move the message to a diffent folder</span>
<a href="#l44.5"></a><span id="l44.5"> function* moveMessageToTargetFolder()</span>
<a href="#l44.6"></a><span id="l44.6"> {</span>
<a href="#l44.7"></a><span id="l44.7">   let msgHdr = mailTestUtils.firstMsgHdr(IMAPPump.inbox);</span>
<a href="#l44.8"></a><span id="l44.8"> </span>
<a href="#l44.9"></a><span id="l44.9">   // Now move this message to the target folder.</span>
<a href="#l44.10"></a><span id="l44.10">   var messages = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l44.11"></a><span id="l44.11">                    .createInstance(Ci.nsIMutableArray);</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-  messages.appendElement(msgHdr, false);</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+  messages.appendElement(msgHdr);</span>
<a href="#l44.14"></a><span id="l44.14">   // This should cause the move to be done as an offline imap operation</span>
<a href="#l44.15"></a><span id="l44.15">   // that's played back immediately.</span>
<a href="#l44.16"></a><span id="l44.16">   MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gTargetFolder, true,</span>
<a href="#l44.17"></a><span id="l44.17">                                  CopyListener, gDummyMsgWindow, true);</span>
<a href="#l44.18"></a><span id="l44.18">   yield false;</span>
<a href="#l44.19"></a><span id="l44.19"> }</span>
<a href="#l44.20"></a><span id="l44.20"> </span>
<a href="#l44.21"></a><span id="l44.21"> function* waitForOfflinePlayback()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -102,17 +102,17 @@ function* doMoves() {</span>
<a href="#l45.4"></a><span id="l45.4">   // get five messages to move from Inbox to folder 1.</span>
<a href="#l45.5"></a><span id="l45.5">   let headers1 = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l45.6"></a><span id="l45.6">                    .createInstance(Ci.nsIMutableArray);</span>
<a href="#l45.7"></a><span id="l45.7">   let msgEnumerator = gIMAPInbox.msgDatabase.EnumerateMessages();</span>
<a href="#l45.8"></a><span id="l45.8">   for (let i = 0; i &lt; 5 &amp;&amp; msgEnumerator.hasMoreElements(); i++)</span>
<a href="#l45.9"></a><span id="l45.9">   {</span>
<a href="#l45.10"></a><span id="l45.10">     let header = msgEnumerator.getNext();</span>
<a href="#l45.11"></a><span id="l45.11">     if (header instanceof Components.interfaces.nsIMsgDBHdr)</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-      headers1.appendElement(header, false);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+      headers1.appendElement(header);</span>
<a href="#l45.14"></a><span id="l45.14">   }</span>
<a href="#l45.15"></a><span id="l45.15">   // this will add dummy headers with keys &gt; 0xffffff80</span>
<a href="#l45.16"></a><span id="l45.16">   MailServices.copy.CopyMessages(gIMAPInbox, headers1, gFolder1, true,</span>
<a href="#l45.17"></a><span id="l45.17">                                  CopyListener, gDummyMsgWindow, true);</span>
<a href="#l45.18"></a><span id="l45.18">   yield false;</span>
<a href="#l45.19"></a><span id="l45.19">   gIMAPInbox.updateFolderWithListener(null, UrlListener);</span>
<a href="#l45.20"></a><span id="l45.20">   yield false;</span>
<a href="#l45.21"></a><span id="l45.21">   gFolder1.updateFolderWithListener(gDummyMsgWindow, UrlListener);</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -122,17 +122,17 @@ function* doMoves() {</span>
<a href="#l45.23"></a><span id="l45.23">   do_check_eq(gFolder1.msgDatabase.dBFolderInfo.highWater, 6);</span>
<a href="#l45.24"></a><span id="l45.24">   headers1 = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l45.25"></a><span id="l45.25">                 .createInstance(Ci.nsIMutableArray);</span>
<a href="#l45.26"></a><span id="l45.26">   msgEnumerator = gIMAPInbox.msgDatabase.EnumerateMessages();</span>
<a href="#l45.27"></a><span id="l45.27">   for (let i = 0; i &lt; 5 &amp;&amp; msgEnumerator.hasMoreElements(); i++)</span>
<a href="#l45.28"></a><span id="l45.28">   {</span>
<a href="#l45.29"></a><span id="l45.29">     let header = msgEnumerator.getNext();</span>
<a href="#l45.30"></a><span id="l45.30">     if (header instanceof Components.interfaces.nsIMsgDBHdr)</span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-      headers1.appendElement(header, false);</span>
<a href="#l45.32"></a><span id="l45.32" class="difflineplus">+      headers1.appendElement(header);</span>
<a href="#l45.33"></a><span id="l45.33">   }</span>
<a href="#l45.34"></a><span id="l45.34">   // Check that CopyMessages will handle having a high highwater mark.</span>
<a href="#l45.35"></a><span id="l45.35">   // It will thrown an exception if it can't.</span>
<a href="#l45.36"></a><span id="l45.36">   let msgHdr = gFolder1.msgDatabase.CreateNewHdr(0xfffffffd);</span>
<a href="#l45.37"></a><span id="l45.37">   gFolder1.msgDatabase.AddNewHdrToDB(msgHdr, false);</span>
<a href="#l45.38"></a><span id="l45.38">   MailServices.copy.CopyMessages(gIMAPInbox, headers1, gFolder1, true,</span>
<a href="#l45.39"></a><span id="l45.39">                                  CopyListener, gDummyMsgWindow, true);</span>
<a href="#l45.40"></a><span id="l45.40">   yield false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapMove.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapMove.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -42,17 +42,17 @@ function *startTest()</span>
<a href="#l46.4"></a><span id="l46.4"> }</span>
<a href="#l46.5"></a><span id="l46.5"> </span>
<a href="#l46.6"></a><span id="l46.6"> function *doMove() {</span>
<a href="#l46.7"></a><span id="l46.7">   var messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l46.8"></a><span id="l46.8">   let rootFolder = IMAPPump.incomingServer.rootFolder;</span>
<a href="#l46.9"></a><span id="l46.9">   gFolder1 = rootFolder.getChildNamed(&quot;folder 1&quot;)</span>
<a href="#l46.10"></a><span id="l46.10">                        .QueryInterface(Ci.nsIMsgImapMailFolder);</span>
<a href="#l46.11"></a><span id="l46.11">   let msg = IMAPPump.inbox.msgDatabase.GetMsgHdrForKey(IMAPPump.mailbox.uidnext - 1);</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-  messages.appendElement(msg, false);</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+  messages.appendElement(msg);</span>
<a href="#l46.14"></a><span id="l46.14">   IMAPPump.server._test = true;</span>
<a href="#l46.15"></a><span id="l46.15">   let listener = new PromiseTestUtils.PromiseCopyListener();</span>
<a href="#l46.16"></a><span id="l46.16">   MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gFolder1, true,</span>
<a href="#l46.17"></a><span id="l46.17">                                  listener, null, false);</span>
<a href="#l46.18"></a><span id="l46.18">   IMAPPump.server.performTest(&quot;UID MOVE&quot;);</span>
<a href="#l46.19"></a><span id="l46.19">   yield listener.promise;</span>
<a href="#l46.20"></a><span id="l46.20"> }</span>
<a href="#l46.21"></a><span id="l46.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapUndo.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapUndo.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -67,17 +67,17 @@ alertListener.prototype = {</span>
<a href="#l47.4"></a><span id="l47.4"> var tests = [</span>
<a href="#l47.5"></a><span id="l47.5">   setup,</span>
<a href="#l47.6"></a><span id="l47.6">   function* updateFolder() {</span>
<a href="#l47.7"></a><span id="l47.7">     IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l47.8"></a><span id="l47.8">     yield false;</span>
<a href="#l47.9"></a><span id="l47.9">   },</span>
<a href="#l47.10"></a><span id="l47.10">   function* deleteMessage() {</span>
<a href="#l47.11"></a><span id="l47.11">     let msgToDelete = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId1);</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-    gMessages.appendElement(msgToDelete, false);</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+    gMessages.appendElement(msgToDelete);</span>
<a href="#l47.14"></a><span id="l47.14">     IMAPPump.inbox.deleteMessages(gMessages, gMsgWindow, false, true, asyncCopyListener, true);</span>
<a href="#l47.15"></a><span id="l47.15">     yield false;</span>
<a href="#l47.16"></a><span id="l47.16">   },</span>
<a href="#l47.17"></a><span id="l47.17">   function* expunge() {</span>
<a href="#l47.18"></a><span id="l47.18">     IMAPPump.inbox.expunge(asyncUrlListener, gMsgWindow);</span>
<a href="#l47.19"></a><span id="l47.19">     yield false;</span>
<a href="#l47.20"></a><span id="l47.20"> </span>
<a href="#l47.21"></a><span id="l47.21">     // Ensure that the message has been surely deleted.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -122,17 +122,17 @@ function addMessagesToServer(messages, m</span>
<a href="#l48.4"></a><span id="l48.4">   doUpdateFolder(gTest);</span>
<a href="#l48.5"></a><span id="l48.5"> }</span>
<a href="#l48.6"></a><span id="l48.6"> </span>
<a href="#l48.7"></a><span id="l48.7"> function copyMessages(messages, isMove, srcFolder, destFolder)</span>
<a href="#l48.8"></a><span id="l48.8"> {</span>
<a href="#l48.9"></a><span id="l48.9">   let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l48.10"></a><span id="l48.10">   messages.forEach(function (message)</span>
<a href="#l48.11"></a><span id="l48.11">   {</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    array.appendElement(message, false);</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+    array.appendElement(message);</span>
<a href="#l48.14"></a><span id="l48.14">   });</span>
<a href="#l48.15"></a><span id="l48.15">   gExpectedEvents = [[gMFNService.msgsMoveCopyCompleted, isMove, messages, destFolder, true]];</span>
<a href="#l48.16"></a><span id="l48.16">   // We'll also get the msgAdded events when we go and update the destination</span>
<a href="#l48.17"></a><span id="l48.17">   // folder</span>
<a href="#l48.18"></a><span id="l48.18">   messages.forEach(function (message)</span>
<a href="#l48.19"></a><span id="l48.19">   {</span>
<a href="#l48.20"></a><span id="l48.20">     // We can't use the headers directly, because the notifications we'll</span>
<a href="#l48.21"></a><span id="l48.21">     // receive are for message headers in the destination folder</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlineCopy.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlineCopy.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -124,37 +124,37 @@ var tests = [</span>
<a href="#l49.4"></a><span id="l49.4">     }</span>
<a href="#l49.5"></a><span id="l49.5">     Assert.equal(count, 4);</span>
<a href="#l49.6"></a><span id="l49.6">   },</span>
<a href="#l49.7"></a><span id="l49.7">   function copyMessagesToSubfolder() {</span>
<a href="#l49.8"></a><span id="l49.8">     //  a message created from IMAP download</span>
<a href="#l49.9"></a><span id="l49.9">     let db = IMAPPump.inbox.msgDatabase;</span>
<a href="#l49.10"></a><span id="l49.10">     let msg1 = db.getMsgHdrForMessageID(gMsgId1);</span>
<a href="#l49.11"></a><span id="l49.11">     let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-    messages.appendElement(msg1, false);</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+    messages.appendElement(msg1);</span>
<a href="#l49.14"></a><span id="l49.14">     // this is sync, I believe?</span>
<a href="#l49.15"></a><span id="l49.15">     MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gFolder1, false,</span>
<a href="#l49.16"></a><span id="l49.16">                                    null, null, true);</span>
<a href="#l49.17"></a><span id="l49.17"> </span>
<a href="#l49.18"></a><span id="l49.18">     // two messages originally created from file copies (like in Send)</span>
<a href="#l49.19"></a><span id="l49.19">     let msg3 = db.getMsgHdrForMessageID(gMsg3Id);</span>
<a href="#l49.20"></a><span id="l49.20">     Assert.ok(msg3 instanceof Ci.nsIMsgDBHdr);</span>
<a href="#l49.21"></a><span id="l49.21">     messages.clear();</span>
<a href="#l49.22"></a><span id="l49.22" class="difflineminus">-    messages.appendElement(msg3, false);</span>
<a href="#l49.23"></a><span id="l49.23" class="difflineplus">+    messages.appendElement(msg3);</span>
<a href="#l49.24"></a><span id="l49.24">     MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gFolder1, false,</span>
<a href="#l49.25"></a><span id="l49.25">                                    null, null, true);</span>
<a href="#l49.26"></a><span id="l49.26"> </span>
<a href="#l49.27"></a><span id="l49.27">     let msg4 = db.getMsgHdrForMessageID(gMsg4Id);</span>
<a href="#l49.28"></a><span id="l49.28">     Assert.ok(msg4 instanceof Ci.nsIMsgDBHdr);</span>
<a href="#l49.29"></a><span id="l49.29"> </span>
<a href="#l49.30"></a><span id="l49.30">     // because bug 790912 created messages with correct storeToken but messageOffset=0,</span>
<a href="#l49.31"></a><span id="l49.31">     //  these messages may not copy correctly. Make sure that they do, as fixed in bug 790912</span>
<a href="#l49.32"></a><span id="l49.32">     msg4.messageOffset = 0;</span>
<a href="#l49.33"></a><span id="l49.33">     messages.clear();</span>
<a href="#l49.34"></a><span id="l49.34" class="difflineminus">-    messages.appendElement(msg4, false);</span>
<a href="#l49.35"></a><span id="l49.35" class="difflineplus">+    messages.appendElement(msg4);</span>
<a href="#l49.36"></a><span id="l49.36">     MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gFolder1, false,</span>
<a href="#l49.37"></a><span id="l49.37">                                    null, null, true);</span>
<a href="#l49.38"></a><span id="l49.38"> </span>
<a href="#l49.39"></a><span id="l49.39">     // test the db headers in folder1</span>
<a href="#l49.40"></a><span id="l49.40">     db = gFolder1.msgDatabase;</span>
<a href="#l49.41"></a><span id="l49.41">     let enumerator = db.EnumerateMessages();</span>
<a href="#l49.42"></a><span id="l49.42">     let count = 0;</span>
<a href="#l49.43"></a><span id="l49.43">     while (enumerator.hasMoreElements())</span>
<a href="#l49.44"></a><span id="l49.44" class="difflineat">@@ -189,17 +189,17 @@ var tests = [</span>
<a href="#l49.45"></a><span id="l49.45">     }</span>
<a href="#l49.46"></a><span id="l49.46">   },</span>
<a href="#l49.47"></a><span id="l49.47">   function moveMessagesToSubfolder() {</span>
<a href="#l49.48"></a><span id="l49.48">     let db = IMAPPump.inbox.msgDatabase;</span>
<a href="#l49.49"></a><span id="l49.49">     let enumerator = db.EnumerateMessages();</span>
<a href="#l49.50"></a><span id="l49.50">     Assert.ok(enumerator.hasMoreElements());</span>
<a href="#l49.51"></a><span id="l49.51">     let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l49.52"></a><span id="l49.52">     while (enumerator.hasMoreElements())</span>
<a href="#l49.53"></a><span id="l49.53" class="difflineminus">-      messages.appendElement(enumerator.getNext(), false);</span>
<a href="#l49.54"></a><span id="l49.54" class="difflineplus">+      messages.appendElement(enumerator.getNext());</span>
<a href="#l49.55"></a><span id="l49.55">     // this is sync, I believe?</span>
<a href="#l49.56"></a><span id="l49.56">     MailServices.copy.CopyMessages(IMAPPump.inbox, messages, gFolder1, true,</span>
<a href="#l49.57"></a><span id="l49.57">                                    null, null, true);</span>
<a href="#l49.58"></a><span id="l49.58"> </span>
<a href="#l49.59"></a><span id="l49.59">     // the inbox should now be empty</span>
<a href="#l49.60"></a><span id="l49.60">     enumerator = db.EnumerateMessages();</span>
<a href="#l49.61"></a><span id="l49.61">     Assert.ok(!enumerator.hasMoreElements());</span>
<a href="#l49.62"></a><span id="l49.62"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlinePlayback.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlinePlayback.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -38,18 +38,18 @@ var tests = [</span>
<a href="#l50.4"></a><span id="l50.4">     // Flag the two messages, and then copy them to different folders. Since</span>
<a href="#l50.5"></a><span id="l50.5">     // we're offline, these operations are synchronous.</span>
<a href="#l50.6"></a><span id="l50.6">     let msgHdr1 = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gSynthMessage1.messageId);</span>
<a href="#l50.7"></a><span id="l50.7">     let msgHdr2 = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gSynthMessage2.messageId);</span>
<a href="#l50.8"></a><span id="l50.8">     let headers1 = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l50.9"></a><span id="l50.9">                      .createInstance(Ci.nsIMutableArray);</span>
<a href="#l50.10"></a><span id="l50.10">     let headers2 = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l50.11"></a><span id="l50.11">                      .createInstance(Ci.nsIMutableArray);</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-    headers1.appendElement(msgHdr1, false);</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineminus">-    headers2.appendElement(msgHdr2, false);</span>
<a href="#l50.14"></a><span id="l50.14" class="difflineplus">+    headers1.appendElement(msgHdr1);</span>
<a href="#l50.15"></a><span id="l50.15" class="difflineplus">+    headers2.appendElement(msgHdr2);</span>
<a href="#l50.16"></a><span id="l50.16">     msgHdr1.folder.markMessagesFlagged(headers1, true);</span>
<a href="#l50.17"></a><span id="l50.17">     msgHdr2.folder.markMessagesFlagged(headers2, true);</span>
<a href="#l50.18"></a><span id="l50.18">     let promiseCopyListener1 = new PromiseTestUtils.PromiseCopyListener();</span>
<a href="#l50.19"></a><span id="l50.19">     MailServices.copy.CopyMessages(IMAPPump.inbox, headers1, gSecondFolder, true,</span>
<a href="#l50.20"></a><span id="l50.20">                                    promiseCopyListener1, null, true);</span>
<a href="#l50.21"></a><span id="l50.21">     let promiseCopyListener2 = new PromiseTestUtils.PromiseCopyListener();</span>
<a href="#l50.22"></a><span id="l50.22">     MailServices.copy.CopyMessages(IMAPPump.inbox, headers2, gThirdFolder, true,</span>
<a href="#l50.23"></a><span id="l50.23">                                    promiseCopyListener2, null, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlineStoreLocking.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlineStoreLocking.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -65,17 +65,17 @@ var tests = [</span>
<a href="#l51.4"></a><span id="l51.4">     dump(&quot;Downloading for offline use\n&quot;);</span>
<a href="#l51.5"></a><span id="l51.5">     IMAPPump.inbox.downloadAllForOffline(asyncUrlListener, null);</span>
<a href="#l51.6"></a><span id="l51.6">     yield false;</span>
<a href="#l51.7"></a><span id="l51.7">   },</span>
<a href="#l51.8"></a><span id="l51.8">   function* deleteOneMsg() {</span>
<a href="#l51.9"></a><span id="l51.9">     let enumerator = IMAPPump.inbox.msgDatabase.EnumerateMessages();</span>
<a href="#l51.10"></a><span id="l51.10">     let msgHdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l51.11"></a><span id="l51.11">     let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-    array.appendElement(msgHdr, false);</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+    array.appendElement(msgHdr);</span>
<a href="#l51.14"></a><span id="l51.14">     IMAPPump.inbox.deleteMessages(array, null, false, true, CopyListener, false);</span>
<a href="#l51.15"></a><span id="l51.15">     yield false;</span>
<a href="#l51.16"></a><span id="l51.16">   },</span>
<a href="#l51.17"></a><span id="l51.17">   function* compactOneFolder() {</span>
<a href="#l51.18"></a><span id="l51.18">     let enumerator = IMAPPump.inbox.msgDatabase.EnumerateMessages();</span>
<a href="#l51.19"></a><span id="l51.19">     let msgHdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l51.20"></a><span id="l51.20">     gStreamedHdr = msgHdr;</span>
<a href="#l51.21"></a><span id="l51.21">     // mark the message as not being offline, and then we'll make sure that</span>
<a href="#l51.22"></a><span id="l51.22" class="difflineat">@@ -101,17 +101,17 @@ var tests = [</span>
<a href="#l51.23"></a><span id="l51.23">     do_check_false(gStreamedHdr.flags &amp; Ci.nsMsgMessageFlags.Offline);</span>
<a href="#l51.24"></a><span id="l51.24"> </span>
<a href="#l51.25"></a><span id="l51.25">     yield false;</span>
<a href="#l51.26"></a><span id="l51.26">   },</span>
<a href="#l51.27"></a><span id="l51.27">   function* deleteAnOtherMsg() {</span>
<a href="#l51.28"></a><span id="l51.28">     let enumerator = IMAPPump.inbox.msgDatabase.EnumerateMessages();</span>
<a href="#l51.29"></a><span id="l51.29">     let msgHdr = enumerator.getNext();</span>
<a href="#l51.30"></a><span id="l51.30">     let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l51.31"></a><span id="l51.31" class="difflineminus">-    array.appendElement(msgHdr, false);</span>
<a href="#l51.32"></a><span id="l51.32" class="difflineplus">+    array.appendElement(msgHdr);</span>
<a href="#l51.33"></a><span id="l51.33">     IMAPPump.inbox.deleteMessages(array, null, false, true, CopyListener, false);</span>
<a href="#l51.34"></a><span id="l51.34">     yield false;</span>
<a href="#l51.35"></a><span id="l51.35">   },</span>
<a href="#l51.36"></a><span id="l51.36">   function* updateTrash() {</span>
<a href="#l51.37"></a><span id="l51.37">     gIMAPTrashFolder = IMAPPump.incomingServer.rootFolder.getChildNamed(&quot;Trash&quot;)</span>
<a href="#l51.38"></a><span id="l51.38">                          .QueryInterface(Ci.nsIMsgImapMailFolder);</span>
<a href="#l51.39"></a><span id="l51.39">     // hack to force uid validity to get initialized for trash.</span>
<a href="#l51.40"></a><span id="l51.40">     gIMAPTrashFolder.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l51.41"></a><span id="l51.41" class="difflineat">@@ -130,17 +130,17 @@ var tests = [</span>
<a href="#l51.42"></a><span id="l51.42">     // hard to test because of the half-second delay.</span>
<a href="#l51.43"></a><span id="l51.43">     IMAPPump.server.stop();</span>
<a href="#l51.44"></a><span id="l51.44">     Services.io.offline = true;</span>
<a href="#l51.45"></a><span id="l51.45">     let trashHdr;</span>
<a href="#l51.46"></a><span id="l51.46">     let enumerator = gIMAPTrashFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l51.47"></a><span id="l51.47">     let msgHdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l51.48"></a><span id="l51.48">     gMovedMsgId = msgHdr.messageId;</span>
<a href="#l51.49"></a><span id="l51.49">     let array = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l51.50"></a><span id="l51.50" class="difflineminus">-    array.appendElement(msgHdr, false);</span>
<a href="#l51.51"></a><span id="l51.51" class="difflineplus">+    array.appendElement(msgHdr);</span>
<a href="#l51.52"></a><span id="l51.52">     IMAPPump.inbox.compact(asyncUrlListener, gDummyMsgWindow);</span>
<a href="#l51.53"></a><span id="l51.53">     MailServices.copy.CopyMessages(gIMAPTrashFolder, array, IMAPPump.inbox, true,</span>
<a href="#l51.54"></a><span id="l51.54">                                    CopyListener, null, true);</span>
<a href="#l51.55"></a><span id="l51.55">   },</span>
<a href="#l51.56"></a><span id="l51.56">   function* verifyNoOfflineMsg() {</span>
<a href="#l51.57"></a><span id="l51.57">     try {</span>
<a href="#l51.58"></a><span id="l51.58">     let movedMsg = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMovedMsgId);</span>
<a href="#l51.59"></a><span id="l51.59">     do_check_false(movedMsg.flags &amp; Ci.nsMsgMessageFlags.Offline);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_preserveDataOnMove.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_preserveDataOnMove.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -60,17 +60,17 @@ function* loadImapMessage()</span>
<a href="#l52.4"></a><span id="l52.4"> // move the message to a subfolder</span>
<a href="#l52.5"></a><span id="l52.5"> function* moveMessageToSubfolder()</span>
<a href="#l52.6"></a><span id="l52.6"> {</span>
<a href="#l52.7"></a><span id="l52.7">   let msgHdr = mailTestUtils.firstMsgHdr(IMAPPump.inbox);</span>
<a href="#l52.8"></a><span id="l52.8"> </span>
<a href="#l52.9"></a><span id="l52.9">   // Now move this message to the subfolder.</span>
<a href="#l52.10"></a><span id="l52.10">   var messages = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l52.11"></a><span id="l52.11">                    .createInstance(Ci.nsIMutableArray);</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-  messages.appendElement(msgHdr, false);</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+  messages.appendElement(msgHdr);</span>
<a href="#l52.14"></a><span id="l52.14">   /*</span>
<a href="#l52.15"></a><span id="l52.15">   void CopyMessages(in nsIMsgFolder srcFolder,</span>
<a href="#l52.16"></a><span id="l52.16">                     in nsIArray messages,</span>
<a href="#l52.17"></a><span id="l52.17">                     in nsIMsgFolder dstFolder,</span>
<a href="#l52.18"></a><span id="l52.18">                     in boolean isMove,</span>
<a href="#l52.19"></a><span id="l52.19">                     in nsIMsgCopyServiceListener listener,</span>
<a href="#l52.20"></a><span id="l52.20">                     in nsIMsgWindow msgWindow,</span>
<a href="#l52.21"></a><span id="l52.21">                     in boolean allowUndo);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -52,17 +52,17 @@ function* setup_messages() {</span>
<a href="#l53.4"></a><span id="l53.4"> </span>
<a href="#l53.5"></a><span id="l53.5">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l53.6"></a><span id="l53.6">   yield false;</span>
<a href="#l53.7"></a><span id="l53.7"> }</span>
<a href="#l53.8"></a><span id="l53.8"> </span>
<a href="#l53.9"></a><span id="l53.9"> function* move_messages() {</span>
<a href="#l53.10"></a><span id="l53.10">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l53.11"></a><span id="l53.11">   let msg = IMAPPump.inbox.msgDatabase.GetMsgHdrForKey(IMAPPump.mailbox.uidnext - 1);</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-  messages.appendElement(msg, false);</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+  messages.appendElement(msg);</span>
<a href="#l53.14"></a><span id="l53.14">   MailServices.copy.CopyMessages(IMAPPump.inbox, messages, localAccountUtils.inboxFolder,</span>
<a href="#l53.15"></a><span id="l53.15">                                  true, asyncCopyListener, null, false);</span>
<a href="#l53.16"></a><span id="l53.16">   yield false;</span>
<a href="#l53.17"></a><span id="l53.17"> }</span>
<a href="#l53.18"></a><span id="l53.18"> </span>
<a href="#l53.19"></a><span id="l53.19"> function* check_messages() {</span>
<a href="#l53.20"></a><span id="l53.20">   do_check_eq(IMAPPump.inbox.getTotalMessages(false), 1);</span>
<a href="#l53.21"></a><span id="l53.21">   do_check_eq(localAccountUtils.inboxFolder.getTotalMessages(false), 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_trustSpamAssassin.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_trustSpamAssassin.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -91,17 +91,17 @@ function* markMessageAsGood()</span>
<a href="#l54.4"></a><span id="l54.4"> </span>
<a href="#l54.5"></a><span id="l54.5">   /*</span>
<a href="#l54.6"></a><span id="l54.6">    * Now move this message to the inbox. In bug 540385, the message just</span>
<a href="#l54.7"></a><span id="l54.7">    *  gets moved back to the junk folder again. We'll test that we</span>
<a href="#l54.8"></a><span id="l54.8">    *  are now preventing that.</span>
<a href="#l54.9"></a><span id="l54.9">    */</span>
<a href="#l54.10"></a><span id="l54.10">   let messages = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l54.11"></a><span id="l54.11">                    .createInstance(Ci.nsIMutableArray);</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-  messages.appendElement(msgHdr, false);</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+  messages.appendElement(msgHdr);</span>
<a href="#l54.14"></a><span id="l54.14">   /*</span>
<a href="#l54.15"></a><span id="l54.15">   void CopyMessages(in nsIMsgFolder srcFolder,</span>
<a href="#l54.16"></a><span id="l54.16">                     in nsIArray messages,</span>
<a href="#l54.17"></a><span id="l54.17">                     in nsIMsgFolder dstFolder,</span>
<a href="#l54.18"></a><span id="l54.18">                     in boolean isMove,</span>
<a href="#l54.19"></a><span id="l54.19">                     in nsIMsgCopyServiceListener listener,</span>
<a href="#l54.20"></a><span id="l54.20">                     in nsIMsgWindow msgWindow,</span>
<a href="#l54.21"></a><span id="l54.21">                     in boolean allowUndo);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/import/test/unit/resources/TestMailImporter.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/import/test/unit/resources/TestMailImporter.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -58,17 +58,17 @@ TestMailImpoter.prototype = {</span>
<a href="#l55.4"></a><span id="l55.4"> </span>
<a href="#l55.5"></a><span id="l55.5">     return descriptor;</span>
<a href="#l55.6"></a><span id="l55.6">   },</span>
<a href="#l55.7"></a><span id="l55.7"> </span>
<a href="#l55.8"></a><span id="l55.8">   _collectMailboxesInDirectory: function(directory, depth, result) {</span>
<a href="#l55.9"></a><span id="l55.9">     let descriptor = this._createMailboxDescriptor(directory.path,</span>
<a href="#l55.10"></a><span id="l55.10">                                                    directory.leafName,</span>
<a href="#l55.11"></a><span id="l55.11">                                                    depth);</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-    result.appendElement(descriptor, false);</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+    result.appendElement(descriptor);</span>
<a href="#l55.14"></a><span id="l55.14">     let entries = directory.directoryEntries;</span>
<a href="#l55.15"></a><span id="l55.15">     while (entries.hasMoreElements()) {</span>
<a href="#l55.16"></a><span id="l55.16">       let entry = entries.getNext().QueryInterface(Ci.nsIFile);</span>
<a href="#l55.17"></a><span id="l55.17">       if (entry.isDirectory())</span>
<a href="#l55.18"></a><span id="l55.18">         this._collectMailboxesInDirectory(entry, depth + 1, result);</span>
<a href="#l55.19"></a><span id="l55.19">     }</span>
<a href="#l55.20"></a><span id="l55.20">   },</span>
<a href="#l55.21"></a><span id="l55.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/local/test/unit/test_duplicateKey.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_duplicateKey.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -19,18 +19,18 @@ add_task(function* runPump() {</span>
<a href="#l56.4"></a><span id="l56.4">   yield gPOP3Pump.run();</span>
<a href="#l56.5"></a><span id="l56.5"> </span>
<a href="#l56.6"></a><span id="l56.6">   // get message headers for the inbox folder</span>
<a href="#l56.7"></a><span id="l56.7">   var hdrs = showMessages(localAccountUtils.inboxFolder);</span>
<a href="#l56.8"></a><span id="l56.8">   Assert.equal(hdrs.length, 5, &quot;Check initial db count&quot;);</span>
<a href="#l56.9"></a><span id="l56.9"> </span>
<a href="#l56.10"></a><span id="l56.10">   // Deletes 2 middle messages.</span>
<a href="#l56.11"></a><span id="l56.11">   let deletes = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-  deletes.appendElement(hdrs[1], false);</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineminus">-  deletes.appendElement(hdrs[2], false);</span>
<a href="#l56.14"></a><span id="l56.14" class="difflineplus">+  deletes.appendElement(hdrs[1]);</span>
<a href="#l56.15"></a><span id="l56.15" class="difflineplus">+  deletes.appendElement(hdrs[2]);</span>
<a href="#l56.16"></a><span id="l56.16"> </span>
<a href="#l56.17"></a><span id="l56.17">   // Note the listener won't work because this is a sync delete,</span>
<a href="#l56.18"></a><span id="l56.18">   // but it should!</span>
<a href="#l56.19"></a><span id="l56.19">   localAccountUtils.inboxFolder</span>
<a href="#l56.20"></a><span id="l56.20">                    .deleteMessages(deletes, // in nsIArray messages,</span>
<a href="#l56.21"></a><span id="l56.21">                                    null, //in nsIMsgWindow msgWindow,</span>
<a href="#l56.22"></a><span id="l56.22">                                    true, // in boolean deleteStorage,</span>
<a href="#l56.23"></a><span id="l56.23">                                    true, // in boolean isMove,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/local/test/unit/test_over2GBMailboxes.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_over2GBMailboxes.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -77,17 +77,17 @@ function copyMessages()</span>
<a href="#l57.4"></a><span id="l57.4">   // Make sure inbox file grew (i.e., we were not writing over data).</span>
<a href="#l57.5"></a><span id="l57.5">   let localInboxSize = localAccountUtils.inboxFolder.filePath.fileSize;</span>
<a href="#l57.6"></a><span id="l57.6">   do_print(&quot;Local inbox size (after copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l57.7"></a><span id="l57.7">            localInboxSize);</span>
<a href="#l57.8"></a><span id="l57.8">   do_check_true(localInboxSize &gt; gLocalInboxSize);</span>
<a href="#l57.9"></a><span id="l57.9"> </span>
<a href="#l57.10"></a><span id="l57.10">   // Copy the message into the subfolder.</span>
<a href="#l57.11"></a><span id="l57.11">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-  messages.appendElement(getMessageHdr(), false);</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+  messages.appendElement(getMessageHdr());</span>
<a href="#l57.14"></a><span id="l57.14">   MailServices.copy.CopyMessages(localAccountUtils.inboxFolder, messages,</span>
<a href="#l57.15"></a><span id="l57.15">                                  gLocalTrashFolder,</span>
<a href="#l57.16"></a><span id="l57.16">                                  false, copyListener2, null, false);</span>
<a href="#l57.17"></a><span id="l57.17"> }</span>
<a href="#l57.18"></a><span id="l57.18"> </span>
<a href="#l57.19"></a><span id="l57.19"> var copyListener2 = {</span>
<a href="#l57.20"></a><span id="l57.20">   OnStartCopy : function() {},</span>
<a href="#l57.21"></a><span id="l57.21">   OnProgress: function(aProgress, aProgressMax) {},</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/local/test/unit/test_over4GBMailboxes.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_over4GBMailboxes.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -408,17 +408,17 @@ function compactOver4GiB()</span>
<a href="#l58.4"></a><span id="l58.4">   do_check_eq(gInbox.expungedBytes, 0);</span>
<a href="#l58.5"></a><span id="l58.5">   // Delete the last small message at folder end.</span>
<a href="#l58.6"></a><span id="l58.6">   let enumerator = gInbox.messages;</span>
<a href="#l58.7"></a><span id="l58.7">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l58.8"></a><span id="l58.8">   let sizeToExpunge = 0;</span>
<a href="#l58.9"></a><span id="l58.9">   while (enumerator.hasMoreElements()) {</span>
<a href="#l58.10"></a><span id="l58.10">     let header = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l58.11"></a><span id="l58.11">     if (!enumerator.hasMoreElements()) {</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-      messages.appendElement(header, false);</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+      messages.appendElement(header);</span>
<a href="#l58.14"></a><span id="l58.14">       sizeToExpunge = header.messageSize;</span>
<a href="#l58.15"></a><span id="l58.15">     }</span>
<a href="#l58.16"></a><span id="l58.16">   }</span>
<a href="#l58.17"></a><span id="l58.17">   gInbox.deleteMessages(messages, null, true, false, null, false);</span>
<a href="#l58.18"></a><span id="l58.18">   do_check_eq(gInbox.expungedBytes, sizeToExpunge);</span>
<a href="#l58.19"></a><span id="l58.19"> </span>
<a href="#l58.20"></a><span id="l58.20">   /* Unfortunately, the compaction now would kill the sparse markings in the file</span>
<a href="#l58.21"></a><span id="l58.21">    * so it will really take 4GiB of space in the filesystem and may be slow</span>
<a href="#l58.22"></a><span id="l58.22" class="difflineat">@@ -460,17 +460,17 @@ function compactUnder4GiB()</span>
<a href="#l58.23"></a><span id="l58.23">   // Very last header in folder is retained,</span>
<a href="#l58.24"></a><span id="l58.24">   // but all other preceding headers are marked as deleted.</span>
<a href="#l58.25"></a><span id="l58.25">   let enumerator = gInbox.messages;</span>
<a href="#l58.26"></a><span id="l58.26">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l58.27"></a><span id="l58.27">   let sizeToExpunge = gInbox.expungedBytes; // If compact in compactOver4GB was skipped, this is not 0.</span>
<a href="#l58.28"></a><span id="l58.28">   while (enumerator.hasMoreElements()) {</span>
<a href="#l58.29"></a><span id="l58.29">     let header = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l58.30"></a><span id="l58.30">     if (enumerator.hasMoreElements()) {</span>
<a href="#l58.31"></a><span id="l58.31" class="difflineminus">-      messages.appendElement(header, false);</span>
<a href="#l58.32"></a><span id="l58.32" class="difflineplus">+      messages.appendElement(header);</span>
<a href="#l58.33"></a><span id="l58.33">       sizeToExpunge += header.messageSize;</span>
<a href="#l58.34"></a><span id="l58.34">     }</span>
<a href="#l58.35"></a><span id="l58.35">   }</span>
<a href="#l58.36"></a><span id="l58.36">   gInbox.deleteMessages(messages, null, true, false, null, false);</span>
<a href="#l58.37"></a><span id="l58.37"> </span>
<a href="#l58.38"></a><span id="l58.38">   // Bug 894012: size of messages to expunge is now higher than 4GB.</span>
<a href="#l58.39"></a><span id="l58.39">   // Only the small 1MiB message remains.</span>
<a href="#l58.40"></a><span id="l58.40">   do_check_eq(gInbox.expungedBytes, sizeToExpunge);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MultiCopy.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MultiCopy.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -36,17 +36,17 @@ add_task(function* runPump() {</span>
<a href="#l59.4"></a><span id="l59.4"> </span>
<a href="#l59.5"></a><span id="l59.5">   // Accumulate messages to copy.</span>
<a href="#l59.6"></a><span id="l59.6">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l59.7"></a><span id="l59.7">   let enumerator = inbox.msgDatabase.EnumerateMessages();</span>
<a href="#l59.8"></a><span id="l59.8">   let msgCount = 0;</span>
<a href="#l59.9"></a><span id="l59.9">   while (enumerator.hasMoreElements()) {</span>
<a href="#l59.10"></a><span id="l59.10">     msgCount++;</span>
<a href="#l59.11"></a><span id="l59.11">     let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-    messages.appendElement(hdr, false);</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+    messages.appendElement(hdr);</span>
<a href="#l59.14"></a><span id="l59.14">     do_check_eq(hdr.subject, testSubjects[msgCount - 1]);</span>
<a href="#l59.15"></a><span id="l59.15">   }</span>
<a href="#l59.16"></a><span id="l59.16">   do_check_eq(messages.length, 2);</span>
<a href="#l59.17"></a><span id="l59.17"> </span>
<a href="#l59.18"></a><span id="l59.18">   // Create a test folder on the Local Folders account.</span>
<a href="#l59.19"></a><span id="l59.19">   let testFolder = localAccountUtils.rootFolder</span>
<a href="#l59.20"></a><span id="l59.20">                                     .QueryInterface(Ci.nsIMsgLocalMailFolder)</span>
<a href="#l59.21"></a><span id="l59.21">                                     .createLocalSubfolder(&quot;test&quot;);</span>
<a href="#l59.22"></a><span id="l59.22" class="difflineat">@@ -61,17 +61,17 @@ add_task(function* runPump() {</span>
<a href="#l59.23"></a><span id="l59.23">   // Check the destination headers.</span>
<a href="#l59.24"></a><span id="l59.24">   messages.clear();</span>
<a href="#l59.25"></a><span id="l59.25">   enumerator = testFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l59.26"></a><span id="l59.26">   msgCount = 0;</span>
<a href="#l59.27"></a><span id="l59.27">   let subjects = [];</span>
<a href="#l59.28"></a><span id="l59.28">   while (enumerator.hasMoreElements()) {</span>
<a href="#l59.29"></a><span id="l59.29">     msgCount++;</span>
<a href="#l59.30"></a><span id="l59.30">     let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l59.31"></a><span id="l59.31" class="difflineminus">-    messages.appendElement(hdr, false);</span>
<a href="#l59.32"></a><span id="l59.32" class="difflineplus">+    messages.appendElement(hdr);</span>
<a href="#l59.33"></a><span id="l59.33">     dump(&quot;Subject: &quot; + hdr.subject + &quot;\n&quot;);</span>
<a href="#l59.34"></a><span id="l59.34">     subjects.push(hdr.subject);</span>
<a href="#l59.35"></a><span id="l59.35">   }</span>
<a href="#l59.36"></a><span id="l59.36">   do_check_eq(messages.length, 2);</span>
<a href="#l59.37"></a><span id="l59.37"> </span>
<a href="#l59.38"></a><span id="l59.38">   // Check for subjects. maildir order for messages may not match</span>
<a href="#l59.39"></a><span id="l59.39">   // order for creation, hence the array.includes.</span>
<a href="#l59.40"></a><span id="l59.40">   for (let subject of testSubjects) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MultiCopy2.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MultiCopy2.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -43,33 +43,33 @@ add_task(function* maildirToMbox() {</span>
<a href="#l60.4"></a><span id="l60.4">                           .getFolderWithFlags(Ci.nsMsgFolderFlags.Inbox);</span>
<a href="#l60.5"></a><span id="l60.5">   dump(&quot;inbox is at &quot; + gInboxFolder.filePath.path + &quot;\n&quot;);</span>
<a href="#l60.6"></a><span id="l60.6"> </span>
<a href="#l60.7"></a><span id="l60.7">   // Accumulate messages to copy.</span>
<a href="#l60.8"></a><span id="l60.8">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l60.9"></a><span id="l60.9">   let enumerator = gInboxFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l60.10"></a><span id="l60.10">   while (enumerator.hasMoreElements()) {</span>
<a href="#l60.11"></a><span id="l60.11">     let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-    messages.appendElement(hdr, false);</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+    messages.appendElement(hdr);</span>
<a href="#l60.14"></a><span id="l60.14">   }</span>
<a href="#l60.15"></a><span id="l60.15">   do_check_eq(messages.length, 2);</span>
<a href="#l60.16"></a><span id="l60.16"> </span>
<a href="#l60.17"></a><span id="l60.17">   // Move messages to mbox test folder.</span>
<a href="#l60.18"></a><span id="l60.18">   let promiseCopyListener = new PromiseTestUtils.PromiseCopyListener();</span>
<a href="#l60.19"></a><span id="l60.19">   MailServices.copy.CopyMessages(gInboxFolder, messages, gTestFolder, true,</span>
<a href="#l60.20"></a><span id="l60.20">                                  promiseCopyListener, null, false);</span>
<a href="#l60.21"></a><span id="l60.21">   yield promiseCopyListener.promise;</span>
<a href="#l60.22"></a><span id="l60.22"> </span>
<a href="#l60.23"></a><span id="l60.23">   // Check the destination headers.</span>
<a href="#l60.24"></a><span id="l60.24">   messages.clear();</span>
<a href="#l60.25"></a><span id="l60.25">   enumerator = gTestFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l60.26"></a><span id="l60.26">   let subjects = [];</span>
<a href="#l60.27"></a><span id="l60.27">   while (enumerator.hasMoreElements()) {</span>
<a href="#l60.28"></a><span id="l60.28">     let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l60.29"></a><span id="l60.29" class="difflineminus">-    messages.appendElement(hdr, false);</span>
<a href="#l60.30"></a><span id="l60.30" class="difflineplus">+    messages.appendElement(hdr);</span>
<a href="#l60.31"></a><span id="l60.31">     dump(&quot;Subject: &quot; + hdr.subject + &quot;\n&quot;);</span>
<a href="#l60.32"></a><span id="l60.32">     subjects.push(hdr.subject);</span>
<a href="#l60.33"></a><span id="l60.33">   }</span>
<a href="#l60.34"></a><span id="l60.34">   do_check_eq(messages.length, 2);</span>
<a href="#l60.35"></a><span id="l60.35"> </span>
<a href="#l60.36"></a><span id="l60.36">   // messages should be missing from source</span>
<a href="#l60.37"></a><span id="l60.37">   do_check_eq(gInboxFolder.getTotalMessages(false), 0);</span>
<a href="#l60.38"></a><span id="l60.38"> </span>
<a href="#l60.39"></a><span id="l60.39" class="difflineat">@@ -91,33 +91,33 @@ add_task(function* maildirToMbox() {</span>
<a href="#l60.40"></a><span id="l60.40"> add_task(function* mboxToMaildir() {</span>
<a href="#l60.41"></a><span id="l60.41">   // Test for multiple message copy for mbox-&gt;maildir.</span>
<a href="#l60.42"></a><span id="l60.42"> </span>
<a href="#l60.43"></a><span id="l60.43">   // Accumulate messages to copy.</span>
<a href="#l60.44"></a><span id="l60.44">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l60.45"></a><span id="l60.45">   let enumerator = gTestFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l60.46"></a><span id="l60.46">   while (enumerator.hasMoreElements()) {</span>
<a href="#l60.47"></a><span id="l60.47">     let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l60.48"></a><span id="l60.48" class="difflineminus">-    messages.appendElement(hdr, false);</span>
<a href="#l60.49"></a><span id="l60.49" class="difflineplus">+    messages.appendElement(hdr);</span>
<a href="#l60.50"></a><span id="l60.50">   }</span>
<a href="#l60.51"></a><span id="l60.51">   do_check_eq(messages.length, 2);</span>
<a href="#l60.52"></a><span id="l60.52"> </span>
<a href="#l60.53"></a><span id="l60.53">   // Move messages to inbox folder.</span>
<a href="#l60.54"></a><span id="l60.54">   let promiseCopyListener = new PromiseTestUtils.PromiseCopyListener();</span>
<a href="#l60.55"></a><span id="l60.55">   MailServices.copy.CopyMessages(gTestFolder, messages, gInboxFolder, true,</span>
<a href="#l60.56"></a><span id="l60.56">                                  promiseCopyListener, null, false);</span>
<a href="#l60.57"></a><span id="l60.57">   yield promiseCopyListener.promise;</span>
<a href="#l60.58"></a><span id="l60.58"> </span>
<a href="#l60.59"></a><span id="l60.59">   // Check the destination headers.</span>
<a href="#l60.60"></a><span id="l60.60">   messages.clear();</span>
<a href="#l60.61"></a><span id="l60.61">   enumerator = gInboxFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l60.62"></a><span id="l60.62">   let subjects = [];</span>
<a href="#l60.63"></a><span id="l60.63">   while (enumerator.hasMoreElements()) {</span>
<a href="#l60.64"></a><span id="l60.64">     let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l60.65"></a><span id="l60.65" class="difflineminus">-    messages.appendElement(hdr, false);</span>
<a href="#l60.66"></a><span id="l60.66" class="difflineplus">+    messages.appendElement(hdr);</span>
<a href="#l60.67"></a><span id="l60.67">     dump(&quot;Subject: &quot; + hdr.subject + &quot;\n&quot;);</span>
<a href="#l60.68"></a><span id="l60.68">     subjects.push(hdr.subject);</span>
<a href="#l60.69"></a><span id="l60.69">   }</span>
<a href="#l60.70"></a><span id="l60.70">   do_check_eq(messages.length, 2);</span>
<a href="#l60.71"></a><span id="l60.71"> </span>
<a href="#l60.72"></a><span id="l60.72">   // messages should be missing from source</span>
<a href="#l60.73"></a><span id="l60.73">   do_check_eq(gTestFolder.getTotalMessages(false), 0);</span>
<a href="#l60.74"></a><span id="l60.74"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mailnews/local/test/unit/test_undoDelete.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_undoDelete.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -19,17 +19,17 @@ load(&quot;../../../resources/messageModifier</span>
<a href="#l61.4"></a><span id="l61.4"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l61.5"></a><span id="l61.5"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l61.6"></a><span id="l61.6"> </span>
<a href="#l61.7"></a><span id="l61.7"> var gTestArray =</span>
<a href="#l61.8"></a><span id="l61.8"> [</span>
<a href="#l61.9"></a><span id="l61.9">   function deleteMessage() {</span>
<a href="#l61.10"></a><span id="l61.10">     let msgToDelete = mailTestUtils.firstMsgHdr(gTestFolder);</span>
<a href="#l61.11"></a><span id="l61.11">     gMsgId1 = msgToDelete.messageId;</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-    gMessages.appendElement(msgToDelete, false);</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+    gMessages.appendElement(msgToDelete);</span>
<a href="#l61.14"></a><span id="l61.14">     gTestFolder.deleteMessages(gMessages, gMsgWindow, false, true, CopyListener,</span>
<a href="#l61.15"></a><span id="l61.15">                                true);</span>
<a href="#l61.16"></a><span id="l61.16">   },</span>
<a href="#l61.17"></a><span id="l61.17">   function undoDelete() {</span>
<a href="#l61.18"></a><span id="l61.18">     gMsgWindow.transactionManager.undoTransaction();</span>
<a href="#l61.19"></a><span id="l61.19">     // There's no listener for this, so we'll just have to wait a little.</span>
<a href="#l61.20"></a><span id="l61.20">     do_timeout(1500, function(){doTest(++gCurTestNum);});</span>
<a href="#l61.21"></a><span id="l61.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/suite/browser/nsBrowserContentHandler.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/suite/browser/nsBrowserContentHandler.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -213,20 +213,20 @@ function doSearch(aSearchTerm, aFeatures</span>
<a href="#l62.4"></a><span id="l62.4">   // fill our nsIMutableArray with uri-as-wstring, null, null, postData</span>
<a href="#l62.5"></a><span id="l62.5">   var sa = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l62.6"></a><span id="l62.6">                      .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l62.7"></a><span id="l62.7"> </span>
<a href="#l62.8"></a><span id="l62.8">   var uristring = Components.classes[&quot;@mozilla.org/supports-string;1&quot;]</span>
<a href="#l62.9"></a><span id="l62.9">                             .createInstance(nsISupportsString);</span>
<a href="#l62.10"></a><span id="l62.10">   uristring.data = submission.uri.spec;</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-  sa.appendElement(uristring, false);</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineminus">-  sa.appendElement(null, false);</span>
<a href="#l62.14"></a><span id="l62.14" class="difflineminus">-  sa.appendElement(null, false);</span>
<a href="#l62.15"></a><span id="l62.15" class="difflineminus">-  sa.appendElement(submission.postData, false);</span>
<a href="#l62.16"></a><span id="l62.16" class="difflineplus">+  sa.appendElement(uristring);</span>
<a href="#l62.17"></a><span id="l62.17" class="difflineplus">+  sa.appendElement(null);</span>
<a href="#l62.18"></a><span id="l62.18" class="difflineplus">+  sa.appendElement(null);</span>
<a href="#l62.19"></a><span id="l62.19" class="difflineplus">+  sa.appendElement(submission.postData);</span>
<a href="#l62.20"></a><span id="l62.20"> </span>
<a href="#l62.21"></a><span id="l62.21">   // XXXbsmedberg: use handURIToExistingBrowser to obey tabbed-browsing</span>
<a href="#l62.22"></a><span id="l62.22">   // preferences, but need nsIBrowserDOMWindow extensions</span>
<a href="#l62.23"></a><span id="l62.23">   return Services.ww.openWindow(null, getBrowserURL(), &quot;_blank&quot;, aFeatures,</span>
<a href="#l62.24"></a><span id="l62.24">                                 sa);</span>
<a href="#l62.25"></a><span id="l62.25"> }</span>
<a href="#l62.26"></a><span id="l62.26"> </span>
<a href="#l62.27"></a><span id="l62.27"> var nsBrowserContentHandler = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/suite/common/directory/directory.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/suite/common/directory/directory.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -243,17 +243,17 @@ function BeginDragTree (event)</span>
<a href="#l63.4"></a><span id="l63.4">     transferable.setTransferData(&quot;text/html&quot;, genDataHTML, genDataHTML.data.length * 2);</span>
<a href="#l63.5"></a><span id="l63.5">     transferable.setTransferData(&quot;text/unicode&quot;, genData, genData.data.length * 2);</span>
<a href="#l63.6"></a><span id="l63.6"> </span>
<a href="#l63.7"></a><span id="l63.7">     var transArray =</span>
<a href="#l63.8"></a><span id="l63.8">       Components.classes[ARRAY_CONTRACTID].createInstance(nsIMutableArray);</span>
<a href="#l63.9"></a><span id="l63.9"> </span>
<a href="#l63.10"></a><span id="l63.10">     // put it into the transferable as an |nsISupports|</span>
<a href="#l63.11"></a><span id="l63.11">     var genTrans = transferable.QueryInterface(Components.interfaces.nsISupports);</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-    transArray.appendElement(genTrans, /* weak = */ false);</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+    transArray.appendElement(genTrans);</span>
<a href="#l63.14"></a><span id="l63.14"> </span>
<a href="#l63.15"></a><span id="l63.15">     var dragService =</span>
<a href="#l63.16"></a><span id="l63.16">       Components.classes[DRAGSERVICE_CONTRACTID].getService(nsIDragService);</span>
<a href="#l63.17"></a><span id="l63.17"> </span>
<a href="#l63.18"></a><span id="l63.18">     dragService.invokeDragSession(event.target, transArray, null, nsIDragService.DRAGDROP_ACTION_COPY +</span>
<a href="#l63.19"></a><span id="l63.19">                                   nsIDragService.DRAGDROP_ACTION_MOVE);</span>
<a href="#l63.20"></a><span id="l63.20"> </span>
<a href="#l63.21"></a><span id="l63.21">     dragStarted = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/suite/common/pref/pref-applications.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/suite/common/pref/pref-applications.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -215,17 +215,17 @@ HandlerInfoWrapper.prototype = {</span>
<a href="#l64.4"></a><span id="l64.4">   },</span>
<a href="#l64.5"></a><span id="l64.5"> </span>
<a href="#l64.6"></a><span id="l64.6">   addPossibleApplicationHandler: function(aNewHandler) {</span>
<a href="#l64.7"></a><span id="l64.7">     try {</span>
<a href="#l64.8"></a><span id="l64.8">       if (this.possibleApplicationHandlers.indexOf(0, aNewHandler) != -1)</span>
<a href="#l64.9"></a><span id="l64.9">         return;</span>
<a href="#l64.10"></a><span id="l64.10">     } catch (e) {</span>
<a href="#l64.11"></a><span id="l64.11">     }</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-    this.possibleApplicationHandlers.appendElement(aNewHandler, false);</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+    this.possibleApplicationHandlers.appendElement(aNewHandler);</span>
<a href="#l64.14"></a><span id="l64.14">   },</span>
<a href="#l64.15"></a><span id="l64.15"> </span>
<a href="#l64.16"></a><span id="l64.16">   removePossibleApplicationHandler: function(aHandler) {</span>
<a href="#l64.17"></a><span id="l64.17">     var defaultApp = this.preferredApplicationHandler;</span>
<a href="#l64.18"></a><span id="l64.18">     if (defaultApp &amp;&amp; aHandler.equals(defaultApp)) {</span>
<a href="#l64.19"></a><span id="l64.19">       // If the app we remove was the default app, we must make sure</span>
<a href="#l64.20"></a><span id="l64.20">       // it won't be used anymore</span>
<a href="#l64.21"></a><span id="l64.21">       this.alwaysAskBeforeHandling = true;</span>
<a href="#l64.22"></a><span id="l64.22" class="difflineat">@@ -562,24 +562,24 @@ FeedHandlerInfo.prototype = {</span>
<a href="#l64.23"></a><span id="l64.23">     // only a single path.  But we display all the local apps the user chooses</span>
<a href="#l64.24"></a><span id="l64.24">     // while the prefpane is open, only dropping the list when the user closes</span>
<a href="#l64.25"></a><span id="l64.25">     // the prefpane, for maximum usability and consistency with other types.</span>
<a href="#l64.26"></a><span id="l64.26">     var preferredAppFile = document.getElementById(this._prefSelectedApp).value;</span>
<a href="#l64.27"></a><span id="l64.27">     if (preferredAppFile) {</span>
<a href="#l64.28"></a><span id="l64.28">       let preferredApp = getLocalHandlerApp(preferredAppFile);</span>
<a href="#l64.29"></a><span id="l64.29">       let defaultApp = this._defaultApplicationHandler;</span>
<a href="#l64.30"></a><span id="l64.30">       if (!defaultApp || !defaultApp.equals(preferredApp))</span>
<a href="#l64.31"></a><span id="l64.31" class="difflineminus">-        this._possibleApplicationHandlers.appendElement(preferredApp, false);</span>
<a href="#l64.32"></a><span id="l64.32" class="difflineplus">+        this._possibleApplicationHandlers.appendElement(preferredApp);</span>
<a href="#l64.33"></a><span id="l64.33">     }</span>
<a href="#l64.34"></a><span id="l64.34"> </span>
<a href="#l64.35"></a><span id="l64.35">     if (converterSvc) {</span>
<a href="#l64.36"></a><span id="l64.36">       // Add the registered web handlers.  There can be any number of these.</span>
<a href="#l64.37"></a><span id="l64.37">       var webHandlers = converterSvc.getContentHandlers(this.type, {});</span>
<a href="#l64.38"></a><span id="l64.38">       for (let webHandler of webHandlers)</span>
<a href="#l64.39"></a><span id="l64.39" class="difflineminus">-        this._possibleApplicationHandlers.appendElement(webHandler, false);</span>
<a href="#l64.40"></a><span id="l64.40" class="difflineplus">+        this._possibleApplicationHandlers.appendElement(webHandler);</span>
<a href="#l64.41"></a><span id="l64.41">     }</span>
<a href="#l64.42"></a><span id="l64.42"> </span>
<a href="#l64.43"></a><span id="l64.43">     return this._possibleApplicationHandlers;</span>
<a href="#l64.44"></a><span id="l64.44">   },</span>
<a href="#l64.45"></a><span id="l64.45"> </span>
<a href="#l64.46"></a><span id="l64.46">   __defaultApplicationHandler: undefined,</span>
<a href="#l64.47"></a><span id="l64.47">   get _defaultApplicationHandler() {</span>
<a href="#l64.48"></a><span id="l64.48">     if (this.__defaultApplicationHandler !== undefined)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/suite/common/profile/profileSelection.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/suite/common/profile/profileSelection.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -103,17 +103,17 @@ function AcceptDialog()</span>
<a href="#l65.4"></a><span id="l65.4">   }</span>
<a href="#l65.5"></a><span id="l65.5"> </span>
<a href="#l65.6"></a><span id="l65.6">   try {</span>
<a href="#l65.7"></a><span id="l65.7">     var profileLock = selected.profile.lock({});</span>
<a href="#l65.8"></a><span id="l65.8">     gProfileService.selectedProfile = selected.profile;</span>
<a href="#l65.9"></a><span id="l65.9">     gProfileService.defaultProfile = selected.profile;</span>
<a href="#l65.10"></a><span id="l65.10">     gProfileService.flush();</span>
<a href="#l65.11"></a><span id="l65.11">     if (gDialogParams.objects) {</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-      gDialogParams.objects.insertElementAt(profileLock, 0, false);</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+      gDialogParams.objects.insertElementAt(profileLock, 0);</span>
<a href="#l65.14"></a><span id="l65.14">       gProfileService.startOffline = document.getElementById(&quot;offlineState&quot;).checked;</span>
<a href="#l65.15"></a><span id="l65.15">       gDialogParams.SetInt(0, 1);</span>
<a href="#l65.16"></a><span id="l65.16">       gDialogParams.SetString(0, selected.profile.name);</span>
<a href="#l65.17"></a><span id="l65.17">       return true;</span>
<a href="#l65.18"></a><span id="l65.18">     }</span>
<a href="#l65.19"></a><span id="l65.19">     profileLock.unlock();</span>
<a href="#l65.20"></a><span id="l65.20">   } catch (e) {</span>
<a href="#l65.21"></a><span id="l65.21">     var brandName = gBrandBundle.getString(&quot;brandShortName&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/suite/common/src/nsSuiteDownloadManagerUI.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/suite/common/src/nsSuiteDownloadManagerUI.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -94,23 +94,23 @@ nsDownloadManagerUI.prototype = {</span>
<a href="#l66.4"></a><span id="l66.4">     try {</span>
<a href="#l66.5"></a><span id="l66.5">       if (aWindowContext)</span>
<a href="#l66.6"></a><span id="l66.6">         parent = aWindowContext.getInterface(Ci.nsIDOMWindow);</span>
<a href="#l66.7"></a><span id="l66.7">     } catch (e) { /* it's OK to not have a parent window */ }</span>
<a href="#l66.8"></a><span id="l66.8"> </span>
<a href="#l66.9"></a><span id="l66.9">     // We pass the download manager and the nsIDownload we want selected (if any)</span>
<a href="#l66.10"></a><span id="l66.10">     var params = Cc[&quot;@mozilla.org/array;1&quot;].</span>
<a href="#l66.11"></a><span id="l66.11">                  createInstance(Ci.nsIMutableArray);</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-    params.appendElement(aDownload, false);</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+    params.appendElement(aDownload);</span>
<a href="#l66.14"></a><span id="l66.14"> </span>
<a href="#l66.15"></a><span id="l66.15">     // Pass in the reason as well</span>
<a href="#l66.16"></a><span id="l66.16">     let reason = Cc[&quot;@mozilla.org/supports-PRInt16;1&quot;].</span>
<a href="#l66.17"></a><span id="l66.17">                  createInstance(Ci.nsISupportsPRInt16);</span>
<a href="#l66.18"></a><span id="l66.18">     reason.data = aReason;</span>
<a href="#l66.19"></a><span id="l66.19" class="difflineminus">-    params.appendElement(reason, false);</span>
<a href="#l66.20"></a><span id="l66.20" class="difflineplus">+    params.appendElement(reason);</span>
<a href="#l66.21"></a><span id="l66.21"> </span>
<a href="#l66.22"></a><span id="l66.22">     var manager = DOWNLOAD_MANAGER_URL;</span>
<a href="#l66.23"></a><span id="l66.23">     try {</span>
<a href="#l66.24"></a><span id="l66.24">       if (Services.prefs.getBoolPref(PREF_FORCE_TOOLKIT_UI))</span>
<a href="#l66.25"></a><span id="l66.25">         manager = TOOLKIT_MANAGER_URL;</span>
<a href="#l66.26"></a><span id="l66.26">     } catch(ex) {}</span>
<a href="#l66.27"></a><span id="l66.27"> </span>
<a href="#l66.28"></a><span id="l66.28">     Services.ww.openWindow(parent,</span>
<a href="#l66.29"></a><span id="l66.29" class="difflineat">@@ -131,23 +131,23 @@ nsDownloadManagerUI.prototype = {</span>
<a href="#l66.30"></a><span id="l66.30">     // the progress window will close immediately after opening if the pref</span>
<a href="#l66.31"></a><span id="l66.31">     // browser.download.manager.closeWhenDone is set to true.</span>
<a href="#l66.32"></a><span id="l66.32">     try {</span>
<a href="#l66.33"></a><span id="l66.33">       if (aWindowContext)</span>
<a href="#l66.34"></a><span id="l66.34">         parent = aWindowContext.getInterface(Ci.nsIDOMWindow);</span>
<a href="#l66.35"></a><span id="l66.35">     } catch (e) { /* it's OK to not have a parent window */ }</span>
<a href="#l66.36"></a><span id="l66.36"> </span>
<a href="#l66.37"></a><span id="l66.37">     var params = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l66.38"></a><span id="l66.38" class="difflineminus">-    params.appendElement(aDownload, false);</span>
<a href="#l66.39"></a><span id="l66.39" class="difflineplus">+    params.appendElement(aDownload);</span>
<a href="#l66.40"></a><span id="l66.40"> </span>
<a href="#l66.41"></a><span id="l66.41">     // Pass in the reason as well</span>
<a href="#l66.42"></a><span id="l66.42">     let reason = Cc[&quot;@mozilla.org/supports-PRInt16;1&quot;].</span>
<a href="#l66.43"></a><span id="l66.43">                  createInstance(Ci.nsISupportsPRInt16);</span>
<a href="#l66.44"></a><span id="l66.44">     reason.data = aReason;</span>
<a href="#l66.45"></a><span id="l66.45" class="difflineminus">-    params.appendElement(reason, false);</span>
<a href="#l66.46"></a><span id="l66.46" class="difflineplus">+    params.appendElement(reason);</span>
<a href="#l66.47"></a><span id="l66.47"> </span>
<a href="#l66.48"></a><span id="l66.48">     Services.ww.openWindow(parent,</span>
<a href="#l66.49"></a><span id="l66.49">       &quot;chrome://communicator/content/downloads/progressDialog.xul&quot;,</span>
<a href="#l66.50"></a><span id="l66.50">       null,</span>
<a href="#l66.51"></a><span id="l66.51">       &quot;chrome,titlebar,centerscreen,minimizable=yes,dialog=no&quot;,</span>
<a href="#l66.52"></a><span id="l66.52">       params);</span>
<a href="#l66.53"></a><span id="l66.53">   },</span>
<a href="#l66.54"></a><span id="l66.54">   //////////////////////////////////////////////////////////////////////////////</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/suite/common/src/nsSuiteGlue.js</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/suite/common/src/nsSuiteGlue.js</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -685,21 +685,21 @@ SuiteGlue.prototype = {</span>
<a href="#l67.4"></a><span id="l67.4"> </span>
<a href="#l67.5"></a><span id="l67.5">     if (!Services.prefs.prefHasUserValue(PREF_EM_NEW_ADDONS_LIST))</span>
<a href="#l67.6"></a><span id="l67.6">       return;</span>
<a href="#l67.7"></a><span id="l67.7"> </span>
<a href="#l67.8"></a><span id="l67.8">     const args = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l67.9"></a><span id="l67.9">                            .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l67.10"></a><span id="l67.10">     let str = Components.classes[&quot;@mozilla.org/supports-string;1&quot;]</span>
<a href="#l67.11"></a><span id="l67.11">                         .createInstance(Components.interfaces.nsISupportsString);</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-    args.appendElement(str, false);</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+    args.appendElement(str);</span>
<a href="#l67.14"></a><span id="l67.14">     str = Components.classes[&quot;@mozilla.org/supports-string;1&quot;]</span>
<a href="#l67.15"></a><span id="l67.15">                     .createInstance(Components.interfaces.nsISupportsString);</span>
<a href="#l67.16"></a><span id="l67.16">     str.data = Services.prefs.getCharPref(PREF_EM_NEW_ADDONS_LIST);</span>
<a href="#l67.17"></a><span id="l67.17" class="difflineminus">-    args.appendElement(str, false);</span>
<a href="#l67.18"></a><span id="l67.18" class="difflineplus">+    args.appendElement(str);</span>
<a href="#l67.19"></a><span id="l67.19">     const EMURL = &quot;chrome://mozapps/content/extensions/extensions.xul&quot;;</span>
<a href="#l67.20"></a><span id="l67.20">     // This window is the &quot;first&quot; to open.</span>
<a href="#l67.21"></a><span id="l67.21">     // 'alwaysRaised' makes sure it stays in the foreground (though unfocused)</span>
<a href="#l67.22"></a><span id="l67.22">     //   so it is noticed.</span>
<a href="#l67.23"></a><span id="l67.23">     const EMFEATURES = &quot;all,dialog=no,alwaysRaised&quot;;</span>
<a href="#l67.24"></a><span id="l67.24">     Services.ww.openWindow(null, EMURL, &quot;_blank&quot;, EMFEATURES, args);</span>
<a href="#l67.25"></a><span id="l67.25"> </span>
<a href="#l67.26"></a><span id="l67.26">     Services.prefs.clearUserPref(PREF_EM_NEW_ADDONS_LIST);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/suite/common/tests/preferences/browser_bug410900.js</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/suite/common/tests/preferences/browser_bug410900.js</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -5,17 +5,17 @@ function test() {</span>
<a href="#l68.4"></a><span id="l68.4">   var handler = Components.classes[&quot;@mozilla.org/uriloader/web-handler-app;1&quot;]</span>
<a href="#l68.5"></a><span id="l68.5">                           .createInstance(Components.interfaces.nsIWebHandlerApp);</span>
<a href="#l68.6"></a><span id="l68.6">   handler.name = &quot;App pane alive test&quot;;</span>
<a href="#l68.7"></a><span id="l68.7">   handler.uriTemplate = &quot;http://test.mozilla.org/%s&quot;;</span>
<a href="#l68.8"></a><span id="l68.8"> </span>
<a href="#l68.9"></a><span id="l68.9">   var extps = Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l68.10"></a><span id="l68.10">                         .getService(Components.interfaces.nsIExternalProtocolService);</span>
<a href="#l68.11"></a><span id="l68.11">   var info = extps.getProtocolHandlerInfo(&quot;apppanetest&quot;);</span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-  info.possibleApplicationHandlers.appendElement(handler, false);</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+  info.possibleApplicationHandlers.appendElement(handler);</span>
<a href="#l68.14"></a><span id="l68.14"> </span>
<a href="#l68.15"></a><span id="l68.15">   var hserv = Components.classes[&quot;@mozilla.org/uriloader/handler-service;1&quot;]</span>
<a href="#l68.16"></a><span id="l68.16">                         .getService(Components.interfaces.nsIHandlerService);</span>
<a href="#l68.17"></a><span id="l68.17">   hserv.store(info);</span>
<a href="#l68.18"></a><span id="l68.18"> </span>
<a href="#l68.19"></a><span id="l68.19">   var obs = Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l68.20"></a><span id="l68.20">                       .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l68.21"></a><span id="l68.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/suite/feeds/src/WebContentConverter.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/suite/feeds/src/WebContentConverter.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -421,17 +421,17 @@ WebContentConverterRegistrar.prototype =</span>
<a href="#l69.4"></a><span id="l69.4">           var handler = Components.classes[&quot;@mozilla.org/uriloader/web-handler-app;1&quot;]</span>
<a href="#l69.5"></a><span id="l69.5">                                   .createInstance(Components.interfaces.nsIWebHandlerApp);</span>
<a href="#l69.6"></a><span id="l69.6">           handler.name = name;</span>
<a href="#l69.7"></a><span id="l69.7">           handler.uriTemplate = uri;</span>
<a href="#l69.8"></a><span id="l69.8"> </span>
<a href="#l69.9"></a><span id="l69.9">           var eps = Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l69.10"></a><span id="l69.10">                               .getService(Components.interfaces.nsIExternalProtocolService);</span>
<a href="#l69.11"></a><span id="l69.11">           var handlerInfo = eps.getProtocolHandlerInfo(protocol);</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-          handlerInfo.possibleApplicationHandlers.appendElement(handler, false);</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+          handlerInfo.possibleApplicationHandlers.appendElement(handler);</span>
<a href="#l69.14"></a><span id="l69.14"> </span>
<a href="#l69.15"></a><span id="l69.15">           // Since the user has agreed to add a new handler, chances are good</span>
<a href="#l69.16"></a><span id="l69.16">           // that the next time they see a handler of this type, they're going</span>
<a href="#l69.17"></a><span id="l69.17">           // to want to use it.  Reset the handlerInfo to ask before the next</span>
<a href="#l69.18"></a><span id="l69.18">           // use.</span>
<a href="#l69.19"></a><span id="l69.19">           handlerInfo.alwaysAskBeforeHandling = true;</span>
<a href="#l69.20"></a><span id="l69.20"> </span>
<a href="#l69.21"></a><span id="l69.21">           var hs = Components.classes[&quot;@mozilla.org/uriloader/handler-service;1&quot;]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/suite/mailnews/addrbook/abCardOverlay.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/suite/mailnews/addrbook/abCardOverlay.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -192,17 +192,17 @@ function EditCardOKButton()</span>
<a href="#l70.4"></a><span id="l70.4">   CheckAndSetCardValues(gEditCard.card, document, false);</span>
<a href="#l70.5"></a><span id="l70.5"> </span>
<a href="#l70.6"></a><span id="l70.6">   directory.modifyCard(gEditCard.card);</span>
<a href="#l70.7"></a><span id="l70.7"> </span>
<a href="#l70.8"></a><span id="l70.8">   while (foundDirectories.length)</span>
<a href="#l70.9"></a><span id="l70.9">   {</span>
<a href="#l70.10"></a><span id="l70.10">     // Update the addressLists item for this card</span>
<a href="#l70.11"></a><span id="l70.11">     let foundItem = foundDirectories.pop();</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-    foundItem.directory.addressLists.replaceElementAt(gEditCard.card, foundItem.cardIndex, false);</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+    foundItem.directory.addressLists.replaceElementAt(gEditCard.card, foundItem.cardIndex);</span>
<a href="#l70.14"></a><span id="l70.14">   }</span>
<a href="#l70.15"></a><span id="l70.15"> </span>
<a href="#l70.16"></a><span id="l70.16">   NotifySaveListeners(directory);</span>
<a href="#l70.17"></a><span id="l70.17"> </span>
<a href="#l70.18"></a><span id="l70.18">   // callback to allow caller to update</span>
<a href="#l70.19"></a><span id="l70.19">   if (gOkCallback)</span>
<a href="#l70.20"></a><span id="l70.20">     gOkCallback();</span>
<a href="#l70.21"></a><span id="l70.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/suite/mailnews/commandglue.js</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/suite/mailnews/commandglue.js</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -1019,17 +1019,17 @@ function CreateGroupedSearchTerms(search</span>
<a href="#l71.4"></a><span id="l71.4">     if (i == 0)</span>
<a href="#l71.5"></a><span id="l71.5">       searchTermForQS.beginsGrouping = true;</span>
<a href="#l71.6"></a><span id="l71.6">     else if (i == numEntries - 1)</span>
<a href="#l71.7"></a><span id="l71.7">       searchTermForQS.endsGrouping = true;</span>
<a href="#l71.8"></a><span id="l71.8"> </span>
<a href="#l71.9"></a><span id="l71.9">     // turn the first term to true to work with quick search...</span>
<a href="#l71.10"></a><span id="l71.10">     searchTermForQS.booleanAnd = i ? searchTerm.booleanAnd : true;</span>
<a href="#l71.11"></a><span id="l71.11"> </span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-    searchTermsArrayForQS.appendElement(searchTermForQS, /* weak = */ false);</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+    searchTermsArrayForQS.appendElement(searchTermForQS);</span>
<a href="#l71.14"></a><span id="l71.14">   }</span>
<a href="#l71.15"></a><span id="l71.15">   return searchTermsArrayForQS;</span>
<a href="#l71.16"></a><span id="l71.16"> }</span>
<a href="#l71.17"></a><span id="l71.17"> </span>
<a href="#l71.18"></a><span id="l71.18"> function OnLeavingFolder(aFolder)</span>
<a href="#l71.19"></a><span id="l71.19"> {</span>
<a href="#l71.20"></a><span id="l71.20">   try</span>
<a href="#l71.21"></a><span id="l71.21">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/suite/mailnews/compose/MsgComposeCommands.js</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/suite/mailnews/compose/MsgComposeCommands.js</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -2354,17 +2354,17 @@ function RemoveDraft()</span>
<a href="#l72.4"></a><span id="l72.4">     var draftId = gMsgCompose.compFields.draftId;</span>
<a href="#l72.5"></a><span id="l72.5">     var msgKey = draftId.substr(draftId.indexOf('#') + 1);</span>
<a href="#l72.6"></a><span id="l72.6">     var folder = sRDF.GetResource(gMsgCompose.savedFolderURI);</span>
<a href="#l72.7"></a><span id="l72.7">     try {</span>
<a href="#l72.8"></a><span id="l72.8">       if (folder instanceof Components.interfaces.nsIMsgFolder)</span>
<a href="#l72.9"></a><span id="l72.9">       {</span>
<a href="#l72.10"></a><span id="l72.10">         var msgs = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l72.11"></a><span id="l72.11">                              .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-        msgs.appendElement(folder.GetMessageHeader(msgKey), false);</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+        msgs.appendElement(folder.GetMessageHeader(msgKey));</span>
<a href="#l72.14"></a><span id="l72.14">         folder.deleteMessages(msgs, null, true, false, null, false);</span>
<a href="#l72.15"></a><span id="l72.15">       }</span>
<a href="#l72.16"></a><span id="l72.16">     }</span>
<a href="#l72.17"></a><span id="l72.17">     catch (ex) // couldn't find header - perhaps an imap folder.</span>
<a href="#l72.18"></a><span id="l72.18">     {</span>
<a href="#l72.19"></a><span id="l72.19">       if (folder instanceof Components.interfaces.nsIMsgImapMailFolder)</span>
<a href="#l72.20"></a><span id="l72.20">       {</span>
<a href="#l72.21"></a><span id="l72.21">         const kImapMsgDeletedFlag = 0x0008;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/suite/mailnews/mail3PaneWindowCommands.js</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/suite/mailnews/mail3PaneWindowCommands.js</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -954,17 +954,17 @@ function MsgDeleteFolder()</span>
<a href="#l73.4"></a><span id="l73.4">                                   prompt.BUTTON_TITLE_CANCEL * prompt.BUTTON_POS_1;</span>
<a href="#l73.5"></a><span id="l73.5">                 if (prompt.confirmEx(window, title, confirmation, buttonFlags, buttonTitle,</span>
<a href="#l73.6"></a><span id="l73.6">                                      &quot;&quot;, &quot;&quot;, &quot;&quot;, {}) != 0) /* the yes button is in position 0 */</span>
<a href="#l73.7"></a><span id="l73.7">                     continue;</span>
<a href="#l73.8"></a><span id="l73.8">                 if (gCurrentVirtualFolderUri == selectedFolder.URI)</span>
<a href="#l73.9"></a><span id="l73.9">                   gCurrentVirtualFolderUri = null;</span>
<a href="#l73.10"></a><span id="l73.10">                 var array = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l73.11"></a><span id="l73.11">                                       .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-                array.appendElement(folder, false);</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+                array.appendElement(folder);</span>
<a href="#l73.14"></a><span id="l73.14">                 folder.parent.deleteSubFolders(array, msgWindow);</span>
<a href="#l73.15"></a><span id="l73.15">                 continue;</span>
<a href="#l73.16"></a><span id="l73.16">             }</span>
<a href="#l73.17"></a><span id="l73.17"> </span>
<a href="#l73.18"></a><span id="l73.18">             if (isNewsURI(selectedFolder.URI))</span>
<a href="#l73.19"></a><span id="l73.19">             {</span>
<a href="#l73.20"></a><span id="l73.20">                 var unsubscribe = ConfirmUnsubscribe(selectedFolder);</span>
<a href="#l73.21"></a><span id="l73.21">                 if (unsubscribe)</span>
<a href="#l73.22"></a><span id="l73.22" class="difflineat">@@ -972,17 +972,17 @@ function MsgDeleteFolder()</span>
<a href="#l73.23"></a><span id="l73.23">             }</span>
<a href="#l73.24"></a><span id="l73.24">             else if (specialFolder == &quot;Junk&quot; ?</span>
<a href="#l73.25"></a><span id="l73.25">                      CanRenameDeleteJunkMail(folder.URI) : folder.deletable)</span>
<a href="#l73.26"></a><span id="l73.26">             {</span>
<a href="#l73.27"></a><span id="l73.27">                 // We can delete this folder.</span>
<a href="#l73.28"></a><span id="l73.28"> </span>
<a href="#l73.29"></a><span id="l73.29">                 var array = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l73.30"></a><span id="l73.30">                                       .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l73.31"></a><span id="l73.31" class="difflineminus">-                array.appendElement(selectedFolder, false);</span>
<a href="#l73.32"></a><span id="l73.32" class="difflineplus">+                array.appendElement(selectedFolder);</span>
<a href="#l73.33"></a><span id="l73.33">                 try</span>
<a href="#l73.34"></a><span id="l73.34">                 {</span>
<a href="#l73.35"></a><span id="l73.35">                     selectedFolder.parent.deleteSubFolders(array, msgWindow);</span>
<a href="#l73.36"></a><span id="l73.36">                 }</span>
<a href="#l73.37"></a><span id="l73.37">                 // Ignore known errors from canceled warning dialogs.</span>
<a href="#l73.38"></a><span id="l73.38">                 catch (ex if (ex.result == NS_MSG_ERROR_COPY_FOLDER_ABORTED)) {}</span>
<a href="#l73.39"></a><span id="l73.39">             }</span>
<a href="#l73.40"></a><span id="l73.40">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/suite/mailnews/mailCommands.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/suite/mailnews/mailCommands.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -499,13 +499,13 @@ function deleteAllInFolder(commandName)</span>
<a href="#l74.4"></a><span id="l74.4">     folder.propagateDelete(iter.getNext(), true, msgWindow);</span>
<a href="#l74.5"></a><span id="l74.5"> </span>
<a href="#l74.6"></a><span id="l74.6">   var children = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l74.7"></a><span id="l74.7">                   .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l74.8"></a><span id="l74.8"> </span>
<a href="#l74.9"></a><span id="l74.9">   // Delete messages.</span>
<a href="#l74.10"></a><span id="l74.10">   iter = folder.messages;</span>
<a href="#l74.11"></a><span id="l74.11">   while (iter.hasMoreElements()) {</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-    children.appendElement(iter.getNext(), false);</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+    children.appendElement(iter.getNext());</span>
<a href="#l74.14"></a><span id="l74.14">   }</span>
<a href="#l74.15"></a><span id="l74.15">   folder.deleteMessages(children, msgWindow, true, false, null, false);</span>
<a href="#l74.16"></a><span id="l74.16">   children.clear();</span>
<a href="#l74.17"></a><span id="l74.17"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/suite/mailnews/mailWindowOverlay.js</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/suite/mailnews/mailWindowOverlay.js</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -530,17 +530,17 @@ function RemoveAllMessageTags()</span>
<a href="#l75.4"></a><span id="l75.4">     msgHdr.label = 0; // remove legacy label</span>
<a href="#l75.5"></a><span id="l75.5">     if (prevHdrFolder != msgHdr.folder)</span>
<a href="#l75.6"></a><span id="l75.6">     {</span>
<a href="#l75.7"></a><span id="l75.7">       if (prevHdrFolder)</span>
<a href="#l75.8"></a><span id="l75.8">         prevHdrFolder.removeKeywordsFromMessages(messages, allKeys);</span>
<a href="#l75.9"></a><span id="l75.9">       messages.clear();</span>
<a href="#l75.10"></a><span id="l75.10">       prevHdrFolder = msgHdr.folder;</span>
<a href="#l75.11"></a><span id="l75.11">     }</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-    messages.appendElement(msgHdr, false);</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+    messages.appendElement(msgHdr);</span>
<a href="#l75.14"></a><span id="l75.14">   }</span>
<a href="#l75.15"></a><span id="l75.15">   if (prevHdrFolder)</span>
<a href="#l75.16"></a><span id="l75.16">     prevHdrFolder.removeKeywordsFromMessages(messages, allKeys);</span>
<a href="#l75.17"></a><span id="l75.17">   OnTagsChange();</span>
<a href="#l75.18"></a><span id="l75.18"> }</span>
<a href="#l75.19"></a><span id="l75.19"> </span>
<a href="#l75.20"></a><span id="l75.20"> function InitNewMsgMenu(aPopup)</span>
<a href="#l75.21"></a><span id="l75.21"> {</span>
<a href="#l75.22"></a><span id="l75.22" class="difflineat">@@ -641,28 +641,28 @@ function ToggleMessageTag(key, addKey)</span>
<a href="#l75.23"></a><span id="l75.23">   {</span>
<a href="#l75.24"></a><span id="l75.24">     var msgHdr = selectedMessages[i];</span>
<a href="#l75.25"></a><span id="l75.25">     if (msgHdr.label)</span>
<a href="#l75.26"></a><span id="l75.26">     {</span>
<a href="#l75.27"></a><span id="l75.27">       // Since we touch all these messages anyway, migrate the label now.</span>
<a href="#l75.28"></a><span id="l75.28">       // If we don't, the thread tree won't always show the correct tag state,</span>
<a href="#l75.29"></a><span id="l75.29">       // because resetting a label doesn't update the tree anymore...</span>
<a href="#l75.30"></a><span id="l75.30">       msg.clear();</span>
<a href="#l75.31"></a><span id="l75.31" class="difflineminus">-      msg.appendElement(msgHdr, false);</span>
<a href="#l75.32"></a><span id="l75.32" class="difflineplus">+      msg.appendElement(msgHdr);</span>
<a href="#l75.33"></a><span id="l75.33">       msgHdr.folder.addKeywordsToMessages(msg, &quot;$label&quot; + msgHdr.label);</span>
<a href="#l75.34"></a><span id="l75.34">       msgHdr.label = 0; // remove legacy label</span>
<a href="#l75.35"></a><span id="l75.35">     }</span>
<a href="#l75.36"></a><span id="l75.36">     if (prevHdrFolder != msgHdr.folder)</span>
<a href="#l75.37"></a><span id="l75.37">     {</span>
<a href="#l75.38"></a><span id="l75.38">       if (prevHdrFolder)</span>
<a href="#l75.39"></a><span id="l75.39">         prevHdrFolder[toggler](messages, key);</span>
<a href="#l75.40"></a><span id="l75.40">       messages.clear();</span>
<a href="#l75.41"></a><span id="l75.41">       prevHdrFolder = msgHdr.folder;</span>
<a href="#l75.42"></a><span id="l75.42">     }</span>
<a href="#l75.43"></a><span id="l75.43" class="difflineminus">-    messages.appendElement(msgHdr, false);</span>
<a href="#l75.44"></a><span id="l75.44" class="difflineplus">+    messages.appendElement(msgHdr);</span>
<a href="#l75.45"></a><span id="l75.45">   }</span>
<a href="#l75.46"></a><span id="l75.46">   if (prevHdrFolder)</span>
<a href="#l75.47"></a><span id="l75.47">     prevHdrFolder[toggler](messages, key);</span>
<a href="#l75.48"></a><span id="l75.48">   OnTagsChange();</span>
<a href="#l75.49"></a><span id="l75.49"> }</span>
<a href="#l75.50"></a><span id="l75.50"> </span>
<a href="#l75.51"></a><span id="l75.51"> function SetMessageTagLabel(menuitem, index, name)</span>
<a href="#l75.52"></a><span id="l75.52"> {</span>
<a href="#l75.53"></a><span id="l75.53" class="difflineat">@@ -1193,17 +1193,17 @@ BatchMessageMover.prototype =</span>
<a href="#l75.54"></a><span id="l75.54">   filterBatch: function()</span>
<a href="#l75.55"></a><span id="l75.55">   {</span>
<a href="#l75.56"></a><span id="l75.56">     let batch = this._currentBatch;</span>
<a href="#l75.57"></a><span id="l75.57">     let msgs = batch.slice(6);</span>
<a href="#l75.58"></a><span id="l75.58"> </span>
<a href="#l75.59"></a><span id="l75.59">     let filterArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l75.60"></a><span id="l75.60">                                 .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l75.61"></a><span id="l75.61">     for (let message of msgs) {</span>
<a href="#l75.62"></a><span id="l75.62" class="difflineminus">-      filterArray.appendElement(message, false);</span>
<a href="#l75.63"></a><span id="l75.63" class="difflineplus">+      filterArray.appendElement(message);</span>
<a href="#l75.64"></a><span id="l75.64">     }</span>
<a href="#l75.65"></a><span id="l75.65"> </span>
<a href="#l75.66"></a><span id="l75.66">     // Apply filters to this batch.</span>
<a href="#l75.67"></a><span id="l75.67">     let srcFolder = batch[0];</span>
<a href="#l75.68"></a><span id="l75.68">     MailServices.filters.applyFilters(</span>
<a href="#l75.69"></a><span id="l75.69">       Components.interfaces.nsMsgFilterType.Archive,</span>
<a href="#l75.70"></a><span id="l75.70">       filterArray, srcFolder, msgWindow, this);</span>
<a href="#l75.71"></a><span id="l75.71">     return; // continues with onStopOperation</span>
<a href="#l75.72"></a><span id="l75.72" class="difflineat">@@ -1230,17 +1230,17 @@ BatchMessageMover.prototype =</span>
<a href="#l75.73"></a><span id="l75.73"> </span>
<a href="#l75.74"></a><span id="l75.74">     let moveArray = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l75.75"></a><span id="l75.75">                               .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l75.76"></a><span id="l75.76">     // Don't move any items that the filter moves or deleted</span>
<a href="#l75.77"></a><span id="l75.77">     for (let item of msgs) {</span>
<a href="#l75.78"></a><span id="l75.78">       if (srcFolder.msgDatabase.ContainsKey(item.messageKey) &amp;&amp;</span>
<a href="#l75.79"></a><span id="l75.79">           !(srcFolder.getProcessingFlags(item.messageKey) &amp;</span>
<a href="#l75.80"></a><span id="l75.80">             Components.interfaces.nsMsgProcessingFlags.FilterToMove)) {</span>
<a href="#l75.81"></a><span id="l75.81" class="difflineminus">-        moveArray.appendElement(item, false);</span>
<a href="#l75.82"></a><span id="l75.82" class="difflineplus">+        moveArray.appendElement(item);</span>
<a href="#l75.83"></a><span id="l75.83">       }</span>
<a href="#l75.84"></a><span id="l75.84">     }</span>
<a href="#l75.85"></a><span id="l75.85"> </span>
<a href="#l75.86"></a><span id="l75.86">     if (moveArray.length == 0)</span>
<a href="#l75.87"></a><span id="l75.87">       return this.processNextBatch(); // continue processing</span>
<a href="#l75.88"></a><span id="l75.88"> </span>
<a href="#l75.89"></a><span id="l75.89">     let archiveFolder = GetMsgFolderFromUri(archiveFolderUri, false);</span>
<a href="#l75.90"></a><span id="l75.90">     let dstFolder = archiveFolder;</span>
<a href="#l75.91"></a><span id="l75.91" class="difflineat">@@ -1876,17 +1876,17 @@ function MsgFilters(emailAddress, folder</span>
<a href="#l75.92"></a><span id="l75.92"> function MsgApplyFilters()</span>
<a href="#l75.93"></a><span id="l75.93"> {</span>
<a href="#l75.94"></a><span id="l75.94">   var filterService = Components.classes[&quot;@mozilla.org/messenger/services/filters;1&quot;]</span>
<a href="#l75.95"></a><span id="l75.95">                                 .getService(Components.interfaces.nsIMsgFilterService);</span>
<a href="#l75.96"></a><span id="l75.96"> </span>
<a href="#l75.97"></a><span id="l75.97">   var preselectedFolder = GetFirstSelectedMsgFolder();</span>
<a href="#l75.98"></a><span id="l75.98">   var selectedFolders = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l75.99"></a><span id="l75.99">                                   .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l75.100"></a><span id="l75.100" class="difflineminus">-  selectedFolders.appendElement(preselectedFolder, false);</span>
<a href="#l75.101"></a><span id="l75.101" class="difflineplus">+  selectedFolders.appendElement(preselectedFolder);</span>
<a href="#l75.102"></a><span id="l75.102"> </span>
<a href="#l75.103"></a><span id="l75.103">   var curFilterList = preselectedFolder.getFilterList(msgWindow);</span>
<a href="#l75.104"></a><span id="l75.104">   // create a new filter list and copy over the enabled filters to it.</span>
<a href="#l75.105"></a><span id="l75.105">   // We do this instead of having the filter after the fact code ignore</span>
<a href="#l75.106"></a><span id="l75.106">   // disabled filters because the Filter Dialog filter after the fact</span>
<a href="#l75.107"></a><span id="l75.107">   // code would have to clone filters to allow disabled filters to run,</span>
<a href="#l75.108"></a><span id="l75.108">   // and we don't support cloning filters currently.</span>
<a href="#l75.109"></a><span id="l75.109">   var tempFilterList = filterService.getTempFilterList(preselectedFolder);</span>
<a href="#l75.110"></a><span id="l75.110" class="difflineat">@@ -1925,17 +1925,17 @@ function MsgApplyFiltersToSelection()</span>
<a href="#l75.111"></a><span id="l75.111">       try</span>
<a href="#l75.112"></a><span id="l75.112">       {</span>
<a href="#l75.113"></a><span id="l75.113">         // Getting the URI will tell us if the item is real or a dummy header</span>
<a href="#l75.114"></a><span id="l75.114">         var uri = gDBView.getURIForViewIndex(indices[i]);</span>
<a href="#l75.115"></a><span id="l75.115">         if (uri)</span>
<a href="#l75.116"></a><span id="l75.116">         {</span>
<a href="#l75.117"></a><span id="l75.117">           var msgHdr = folder.GetMessageHeader(gDBView.getKeyAt(indices[i]));</span>
<a href="#l75.118"></a><span id="l75.118">           if (msgHdr)</span>
<a href="#l75.119"></a><span id="l75.119" class="difflineminus">-            selectedMsgs.appendElement(msgHdr, false);</span>
<a href="#l75.120"></a><span id="l75.120" class="difflineplus">+            selectedMsgs.appendElement(msgHdr);</span>
<a href="#l75.121"></a><span id="l75.121">         }</span>
<a href="#l75.122"></a><span id="l75.122">       } catch (ex) {}</span>
<a href="#l75.123"></a><span id="l75.123">     }</span>
<a href="#l75.124"></a><span id="l75.124"> </span>
<a href="#l75.125"></a><span id="l75.125">     filterService.applyFilters(Components.interfaces.nsMsgFilterType.Manual,</span>
<a href="#l75.126"></a><span id="l75.126">                                selectedMsgs,</span>
<a href="#l75.127"></a><span id="l75.127">                                folder,</span>
<a href="#l75.128"></a><span id="l75.128">                                msgWindow);</span>
<a href="#l75.129"></a><span id="l75.129" class="difflineat">@@ -2863,17 +2863,17 @@ function checkMsgHdrPropertyIsNot(aPrope</span>
<a href="#l75.130"></a><span id="l75.130">  * Mark a specified message as read.</span>
<a href="#l75.131"></a><span id="l75.131">  * @param msgHdr header (nsIMsgDBHdr) of the message to mark as read</span>
<a href="#l75.132"></a><span id="l75.132">  */</span>
<a href="#l75.133"></a><span id="l75.133"> function MarkMessageAsRead(msgHdr)</span>
<a href="#l75.134"></a><span id="l75.134"> {</span>
<a href="#l75.135"></a><span id="l75.135">   ClearPendingReadTimer();</span>
<a href="#l75.136"></a><span id="l75.136">   var headers = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l75.137"></a><span id="l75.137">                           .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l75.138"></a><span id="l75.138" class="difflineminus">-  headers.appendElement(msgHdr, false);</span>
<a href="#l75.139"></a><span id="l75.139" class="difflineplus">+  headers.appendElement(msgHdr);</span>
<a href="#l75.140"></a><span id="l75.140">   msgHdr.folder.markMessagesRead(headers, true);</span>
<a href="#l75.141"></a><span id="l75.141"> }</span>
<a href="#l75.142"></a><span id="l75.142"> </span>
<a href="#l75.143"></a><span id="l75.143"> function ClearPendingReadTimer()</span>
<a href="#l75.144"></a><span id="l75.144"> {</span>
<a href="#l75.145"></a><span id="l75.145">   if (gMarkViewedMessageAsReadTimer)</span>
<a href="#l75.146"></a><span id="l75.146">   {</span>
<a href="#l75.147"></a><span id="l75.147">     clearTimeout(gMarkViewedMessageAsReadTimer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/suite/mailnews/messengerdnd.js</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/suite/mailnews/messengerdnd.js</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -159,17 +159,17 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l76.4"></a><span id="l76.4">     const NS_MSG_FOLDER_EXISTS = 0x80550013;</span>
<a href="#l76.5"></a><span id="l76.5">     const NS_MSG_ERROR_COPY_FOLDER_ABORTED = 0x8055001a;</span>
<a href="#l76.6"></a><span id="l76.6"> </span>
<a href="#l76.7"></a><span id="l76.7">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l76.8"></a><span id="l76.8">     {</span>
<a href="#l76.9"></a><span id="l76.9">       let folder = dt.mozGetDataAt(&quot;text/x-moz-folder&quot;, i);</span>
<a href="#l76.10"></a><span id="l76.10">       let array = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l76.11"></a><span id="l76.11">                             .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-      array.appendElement(folder, false);</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+      array.appendElement(folder);</span>
<a href="#l76.14"></a><span id="l76.14">       try</span>
<a href="#l76.15"></a><span id="l76.15">       {</span>
<a href="#l76.16"></a><span id="l76.16">         gCopyService.CopyFolders(array,</span>
<a href="#l76.17"></a><span id="l76.17">                                  targetFolder,</span>
<a href="#l76.18"></a><span id="l76.18">                                  (folder.server == targetFolder.server),</span>
<a href="#l76.19"></a><span id="l76.19">                                  null,</span>
<a href="#l76.20"></a><span id="l76.20">                                  msgWindow);</span>
<a href="#l76.21"></a><span id="l76.21">       }</span>
<a href="#l76.22"></a><span id="l76.22" class="difflineat">@@ -210,17 +210,17 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l76.23"></a><span id="l76.23">     let array = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l76.24"></a><span id="l76.24">                           .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l76.25"></a><span id="l76.25">     let sourceFolder;</span>
<a href="#l76.26"></a><span id="l76.26">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l76.27"></a><span id="l76.27">     {</span>
<a href="#l76.28"></a><span id="l76.28">       let msgHdr = messenger.msgHdrFromURI(dt.mozGetDataAt(&quot;text/x-moz-message&quot;, i));</span>
<a href="#l76.29"></a><span id="l76.29">       if (!sourceFolder)</span>
<a href="#l76.30"></a><span id="l76.30">         sourceFolder = msgHdr.folder;</span>
<a href="#l76.31"></a><span id="l76.31" class="difflineminus">-      array.appendElement(msgHdr, false);</span>
<a href="#l76.32"></a><span id="l76.32" class="difflineplus">+      array.appendElement(msgHdr);</span>
<a href="#l76.33"></a><span id="l76.33">     }</span>
<a href="#l76.34"></a><span id="l76.34">     let isMove = dragSession.dragAction == nsIDragService.DRAGDROP_ACTION_MOVE;</span>
<a href="#l76.35"></a><span id="l76.35">     if (!sourceFolder.canDeleteMessages)</span>
<a href="#l76.36"></a><span id="l76.36">       isMove = false;</span>
<a href="#l76.37"></a><span id="l76.37"> </span>
<a href="#l76.38"></a><span id="l76.38">     Services.prefs.setCharPref(&quot;mail.last_msg_movecopy_target_uri&quot;, targetFolder.URI);</span>
<a href="#l76.39"></a><span id="l76.39">     Services.prefs.setBoolPref(&quot;mail.last_msg_movecopy_was_move&quot;, isMove);</span>
<a href="#l76.40"></a><span id="l76.40">     // ### ugh, so this won't work with cross-folder views. We would</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/suite/mailnews/msgViewPickerOverlay.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/suite/mailnews/msgViewPickerOverlay.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -217,17 +217,17 @@ function ViewTagKeyword(keyword)</span>
<a href="#l77.4"></a><span id="l77.4"> </span>
<a href="#l77.5"></a><span id="l77.5">   value.str = keyword;</span>
<a href="#l77.6"></a><span id="l77.6">   value.attrib = nsMsgSearchAttrib.Keywords;</span>
<a href="#l77.7"></a><span id="l77.7">   term.value = value;</span>
<a href="#l77.8"></a><span id="l77.8">   term.attrib = nsMsgSearchAttrib.Keywords;</span>
<a href="#l77.9"></a><span id="l77.9">   term.op = nsMsgSearchOp.Contains;</span>
<a href="#l77.10"></a><span id="l77.10">   term.booleanAnd = true;</span>
<a href="#l77.11"></a><span id="l77.11"> </span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-  searchTermsArray.appendElement(term, /* weak = */ false);</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+  searchTermsArray.appendElement(term);</span>
<a href="#l77.14"></a><span id="l77.14">   AddVirtualFolderTerms(searchTermsArray);</span>
<a href="#l77.15"></a><span id="l77.15">   createSearchTermsWithList(searchTermsArray);</span>
<a href="#l77.16"></a><span id="l77.16">   gDefaultSearchViewTerms = searchTermsArray;</span>
<a href="#l77.17"></a><span id="l77.17"> }</span>
<a href="#l77.18"></a><span id="l77.18"> </span>
<a href="#l77.19"></a><span id="l77.19"> </span>
<a href="#l77.20"></a><span id="l77.20"> function ViewNewMail()</span>
<a href="#l77.21"></a><span id="l77.21"> {</span>
<a href="#l77.22"></a><span id="l77.22" class="difflineat">@@ -240,17 +240,17 @@ function ViewNewMail()</span>
<a href="#l77.23"></a><span id="l77.23">   var value = term.value;</span>
<a href="#l77.24"></a><span id="l77.24"> </span>
<a href="#l77.25"></a><span id="l77.25">   value.status = 1;</span>
<a href="#l77.26"></a><span id="l77.26">   value.attrib = nsMsgSearchAttrib.MsgStatus;</span>
<a href="#l77.27"></a><span id="l77.27">   term.value = value;</span>
<a href="#l77.28"></a><span id="l77.28">   term.attrib = nsMsgSearchAttrib.MsgStatus;</span>
<a href="#l77.29"></a><span id="l77.29">   term.op = nsMsgSearchOp.Isnt;</span>
<a href="#l77.30"></a><span id="l77.30">   term.booleanAnd = true;</span>
<a href="#l77.31"></a><span id="l77.31" class="difflineminus">-  searchTermsArray.appendElement(term, /* weak = */ false);</span>
<a href="#l77.32"></a><span id="l77.32" class="difflineplus">+  searchTermsArray.appendElement(term);</span>
<a href="#l77.33"></a><span id="l77.33"> </span>
<a href="#l77.34"></a><span id="l77.34">   AddVirtualFolderTerms(searchTermsArray);</span>
<a href="#l77.35"></a><span id="l77.35"> </span>
<a href="#l77.36"></a><span id="l77.36">   createSearchTermsWithList(searchTermsArray);</span>
<a href="#l77.37"></a><span id="l77.37">   // not quite right - these want to be just the view terms...but it might not matter.</span>
<a href="#l77.38"></a><span id="l77.38">   gDefaultSearchViewTerms = searchTermsArray;</span>
<a href="#l77.39"></a><span id="l77.39"> }</span>
<a href="#l77.40"></a><span id="l77.40"> </span>
<a href="#l77.41"></a><span id="l77.41" class="difflineat">@@ -266,17 +266,17 @@ function ViewNotDeletedMail()</span>
<a href="#l77.42"></a><span id="l77.42">   var value = term.value;</span>
<a href="#l77.43"></a><span id="l77.43"> </span>
<a href="#l77.44"></a><span id="l77.44">   value.status = 0x00200000;</span>
<a href="#l77.45"></a><span id="l77.45">   value.attrib = nsMsgSearchAttrib.MsgStatus;</span>
<a href="#l77.46"></a><span id="l77.46">   term.value = value;</span>
<a href="#l77.47"></a><span id="l77.47">   term.attrib = nsMsgSearchAttrib.MsgStatus;</span>
<a href="#l77.48"></a><span id="l77.48">   term.op = nsMsgSearchOp.Isnt;</span>
<a href="#l77.49"></a><span id="l77.49">   term.booleanAnd = true;</span>
<a href="#l77.50"></a><span id="l77.50" class="difflineminus">-  searchTermsArray.appendElement(term, /* weak = */ false);</span>
<a href="#l77.51"></a><span id="l77.51" class="difflineplus">+  searchTermsArray.appendElement(term);</span>
<a href="#l77.52"></a><span id="l77.52"> </span>
<a href="#l77.53"></a><span id="l77.53">   AddVirtualFolderTerms(searchTermsArray);</span>
<a href="#l77.54"></a><span id="l77.54"> </span>
<a href="#l77.55"></a><span id="l77.55">   createSearchTermsWithList(searchTermsArray);</span>
<a href="#l77.56"></a><span id="l77.56">   // not quite right - these want to be just the view terms...but it might not matter.</span>
<a href="#l77.57"></a><span id="l77.57">   gDefaultSearchViewTerms = searchTermsArray;</span>
<a href="#l77.58"></a><span id="l77.58"> }</span>
<a href="#l77.59"></a><span id="l77.59"> </span>
<a href="#l77.60"></a><span id="l77.60" class="difflineat">@@ -285,17 +285,17 @@ function AddVirtualFolderTerms(searchTer</span>
<a href="#l77.61"></a><span id="l77.61"> {</span>
<a href="#l77.62"></a><span id="l77.62">   // add in any virtual folder terms</span>
<a href="#l77.63"></a><span id="l77.63">   var virtualFolderSearchTerms = (gVirtualFolderTerms || gXFVirtualFolderTerms);</span>
<a href="#l77.64"></a><span id="l77.64">   if (virtualFolderSearchTerms)</span>
<a href="#l77.65"></a><span id="l77.65">   {</span>
<a href="#l77.66"></a><span id="l77.66">     for (let i = 0; i &lt; termsArray.length; i++)</span>
<a href="#l77.67"></a><span id="l77.67">     {</span>
<a href="#l77.68"></a><span id="l77.68">       let searchTerm = virtualFolderSearchTerms.queryElementAt(i, Components.interfaces.nsIMsgSearchTerm);</span>
<a href="#l77.69"></a><span id="l77.69" class="difflineminus">-      searchTermsArray.appendElement(searchTerm, /* weak = */ false);</span>
<a href="#l77.70"></a><span id="l77.70" class="difflineplus">+      searchTermsArray.appendElement(searchTerm);</span>
<a href="#l77.71"></a><span id="l77.71">     }</span>
<a href="#l77.72"></a><span id="l77.72">   }</span>
<a href="#l77.73"></a><span id="l77.73"> }</span>
<a href="#l77.74"></a><span id="l77.74"> </span>
<a href="#l77.75"></a><span id="l77.75"> </span>
<a href="#l77.76"></a><span id="l77.76"> function PrepareForViewChange()</span>
<a href="#l77.77"></a><span id="l77.77"> {</span>
<a href="#l77.78"></a><span id="l77.78">   // this is a problem - it saves the current view in gPreQuickSearchView</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/suite/mailnews/search/FilterListDialog.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/suite/mailnews/search/FilterListDialog.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -407,17 +407,17 @@ function runSelectedFilters()</span>
<a href="#l78.4"></a><span id="l78.4">     gFilterListMsgWindow.StopUrls();</span>
<a href="#l78.5"></a><span id="l78.5">     return;</span>
<a href="#l78.6"></a><span id="l78.6">   }</span>
<a href="#l78.7"></a><span id="l78.7"> </span>
<a href="#l78.8"></a><span id="l78.8">   var msgFolder = gRunFiltersFolderPicker._folder || gRunFiltersFolderPicker.selectedItem._folder;</span>
<a href="#l78.9"></a><span id="l78.9">   var filterList = MailServices.filters.getTempFilterList(msgFolder);</span>
<a href="#l78.10"></a><span id="l78.10">   var folders = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l78.11"></a><span id="l78.11">                           .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-  folders.appendElement(msgFolder, false);</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+  folders.appendElement(msgFolder);</span>
<a href="#l78.14"></a><span id="l78.14"> </span>
<a href="#l78.15"></a><span id="l78.15">   // make sure the tmp filter list uses the real filter list log stream</span>
<a href="#l78.16"></a><span id="l78.16">   filterList.logStream = currentFilterList().logStream;</span>
<a href="#l78.17"></a><span id="l78.17">   filterList.loggingEnabled = currentFilterList().loggingEnabled;</span>
<a href="#l78.18"></a><span id="l78.18">   var index = 0, sel = gFilterTree.view.selection;</span>
<a href="#l78.19"></a><span id="l78.19">   for (var i = 0; i &lt; sel.getRangeCount(); i++) {</span>
<a href="#l78.20"></a><span id="l78.20">     var start = {}, end = {};</span>
<a href="#l78.21"></a><span id="l78.21">     sel.getRangeAt(i, start, end);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/suite/mailnews/searchBar.js</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/suite/mailnews/searchBar.js</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -351,39 +351,39 @@ function createSearchTerms()</span>
<a href="#l79.4"></a><span id="l79.4">     // create, fill, and append the subject term</span>
<a href="#l79.5"></a><span id="l79.5">     var term = gSearchSession.createTerm();</span>
<a href="#l79.6"></a><span id="l79.6">     var value = term.value;</span>
<a href="#l79.7"></a><span id="l79.7">     value.str = termList[i];</span>
<a href="#l79.8"></a><span id="l79.8">     term.value = value;</span>
<a href="#l79.9"></a><span id="l79.9">     term.attrib = nsMsgSearchAttrib.Subject;</span>
<a href="#l79.10"></a><span id="l79.10">     term.op = nsMsgSearchOp.Contains;</span>
<a href="#l79.11"></a><span id="l79.11">     term.booleanAnd = false;</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-    searchTermsArray.appendElement(term, /* weak = */ false);</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+    searchTermsArray.appendElement(term);</span>
<a href="#l79.14"></a><span id="l79.14"> </span>
<a href="#l79.15"></a><span id="l79.15">     // create, fill, and append the AllAddresses term</span>
<a href="#l79.16"></a><span id="l79.16">     term = gSearchSession.createTerm();</span>
<a href="#l79.17"></a><span id="l79.17">     value = term.value;</span>
<a href="#l79.18"></a><span id="l79.18">     value.str = termList[i];</span>
<a href="#l79.19"></a><span id="l79.19">     term.value = value;</span>
<a href="#l79.20"></a><span id="l79.20">     term.attrib = nsMsgSearchAttrib.AllAddresses;</span>
<a href="#l79.21"></a><span id="l79.21">     term.op = nsMsgSearchOp.Contains;</span>
<a href="#l79.22"></a><span id="l79.22">     term.booleanAnd = false;</span>
<a href="#l79.23"></a><span id="l79.23" class="difflineminus">-    searchTermsArray.appendElement(term, /* weak = */ false);</span>
<a href="#l79.24"></a><span id="l79.24" class="difflineplus">+    searchTermsArray.appendElement(term);</span>
<a href="#l79.25"></a><span id="l79.25">   }</span>
<a href="#l79.26"></a><span id="l79.26"> </span>
<a href="#l79.27"></a><span id="l79.27">   // now append the default view or virtual folder criteria to the quick search</span>
<a href="#l79.28"></a><span id="l79.28">   // so we don't lose any default view information</span>
<a href="#l79.29"></a><span id="l79.29">   viewDebug(&quot;gDefaultSearchViewTerms = &quot; + gDefaultSearchViewTerms + &quot;gVirtualFolderTerms = &quot; + gVirtualFolderTerms +</span>
<a href="#l79.30"></a><span id="l79.30">     &quot;gXFVirtualFolderTerms = &quot; + gXFVirtualFolderTerms + &quot;\n&quot;);</span>
<a href="#l79.31"></a><span id="l79.31">   var defaultSearchTerms = (gDefaultSearchViewTerms || gVirtualFolderTerms || gXFVirtualFolderTerms);</span>
<a href="#l79.32"></a><span id="l79.32">   if (defaultSearchTerms)</span>
<a href="#l79.33"></a><span id="l79.33">   {</span>
<a href="#l79.34"></a><span id="l79.34">     for (let searchTerm of fixIterator(defaultSearchTerms, Components.interfaces.nsIMsgSearchTerm))</span>
<a href="#l79.35"></a><span id="l79.35">     {</span>
<a href="#l79.36"></a><span id="l79.36" class="difflineminus">-      searchTermsArray.appendElement(searchTerm, /* weak = */ false);</span>
<a href="#l79.37"></a><span id="l79.37" class="difflineplus">+      searchTermsArray.appendElement(searchTerm);</span>
<a href="#l79.38"></a><span id="l79.38">     }</span>
<a href="#l79.39"></a><span id="l79.39">   }</span>
<a href="#l79.40"></a><span id="l79.40"> </span>
<a href="#l79.41"></a><span id="l79.41">   createSearchTermsWithList(searchTermsArray);</span>
<a href="#l79.42"></a><span id="l79.42"> </span>
<a href="#l79.43"></a><span id="l79.43">   // now that we've added the terms, clear out our input array</span>
<a href="#l79.44"></a><span id="l79.44">   searchTermsArray.clear();</span>
<a href="#l79.45"></a><span id="l79.45"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/suite/profile/migration/src/SuiteProfileMigrator.js</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/suite/profile/migration/src/SuiteProfileMigrator.js</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -16,19 +16,19 @@ ProfileMigrator.prototype = {</span>
<a href="#l80.4"></a><span id="l80.4">     // By opening the wizard with a supplied migrator, it will automatically</span>
<a href="#l80.5"></a><span id="l80.5">     // migrate from it.</span>
<a href="#l80.6"></a><span id="l80.6">     let [key, migrator] = this._getDefaultMigrator();</span>
<a href="#l80.7"></a><span id="l80.7">     if (!key)</span>
<a href="#l80.8"></a><span id="l80.8">         return;</span>
<a href="#l80.9"></a><span id="l80.9"> </span>
<a href="#l80.10"></a><span id="l80.10">     let params = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l80.11"></a><span id="l80.11">                            .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-    params.appendElement(this._toString(key), false);</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineminus">-    params.appendElement(migrator, false);</span>
<a href="#l80.14"></a><span id="l80.14" class="difflineminus">-    params.appendElement(aStartup, false);</span>
<a href="#l80.15"></a><span id="l80.15" class="difflineplus">+    params.appendElement(this._toString(key));</span>
<a href="#l80.16"></a><span id="l80.16" class="difflineplus">+    params.appendElement(migrator);</span>
<a href="#l80.17"></a><span id="l80.17" class="difflineplus">+    params.appendElement(aStartup);</span>
<a href="#l80.18"></a><span id="l80.18"> </span>
<a href="#l80.19"></a><span id="l80.19">     Services.ww.openWindow(null,</span>
<a href="#l80.20"></a><span id="l80.20">                            &quot;chrome://communicator/content/migration/migration.xul&quot;,</span>
<a href="#l80.21"></a><span id="l80.21">                            &quot;_blank&quot;,</span>
<a href="#l80.22"></a><span id="l80.22">                            &quot;chrome,dialog,modal,centerscreen,titlebar&quot;,</span>
<a href="#l80.23"></a><span id="l80.23">                            params);</span>
<a href="#l80.24"></a><span id="l80.24">   },</span>
<a href="#l80.25"></a><span id="l80.25"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

