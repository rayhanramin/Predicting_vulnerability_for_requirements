<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 862:1d843f143347c4076cc1dcce6c2c2db99f7d2764</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 1d843f143347c4076cc1dcce6c2c2db99f7d2764" />
<meta property="og:url" content="/comm-central/rev/1d843f143347c4076cc1dcce6c2c2db99f7d2764" />
<meta property="og:description" content="make actions parameterizable by the attribute they were invoked in the service" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 1d843f143347c4076cc1dcce6c2c2db99f7d2764 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/1d843f143347c4076cc1dcce6c2c2db99f7d2764">shortlog</a> |
<a href="/comm-central/log/1d843f143347c4076cc1dcce6c2c2db99f7d2764">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/1d843f143347c4076cc1dcce6c2c2db99f7d2764">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/1d843f143347c4076cc1dcce6c2c2db99f7d2764">files</a> |
changeset |
<a href="/comm-central/raw-rev/1d843f143347c4076cc1dcce6c2c2db99f7d2764">raw</a>  | <a href="/comm-central/archive/1d843f143347c4076cc1dcce6c2c2db99f7d2764.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
make actions parameterizable by the attribute they were invoked in the service
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#65;&#110;&#100;&#114;&#101;&#119;&#32;&#83;&#117;&#116;&#104;&#101;&#114;&#108;&#97;&#110;&#100;&#32;&#60;&#97;&#115;&#117;&#116;&#104;&#101;&#114;&#108;&#97;&#110;&#100;&#64;&#97;&#115;&#117;&#116;&#104;&#101;&#114;&#108;&#97;&#110;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 27 Jul 2008 16:02:20 -0700</td></tr>

<tr>
 <td>changeset 862</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/1d843f143347c4076cc1dcce6c2c2db99f7d2764">1d843f143347c4076cc1dcce6c2c2db99f7d2764</a></td>
</tr>



<tr>
<td>parent 861</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c339d7bfdef97450c1476260ec56a31c0bacfb4a">c339d7bfdef97450c1476260ec56a31c0bacfb4a</a>
</td>
</tr>

<tr>
<td>child 863</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/869be89032fb85941b689f592af83df73db52ca1">869be89032fb85941b689f592af83df73db52ca1</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=1d843f143347c4076cc1dcce6c2c2db99f7d2764">743</a></td></tr>
<tr><td>push user</td><td>dmosedale@mozilla.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 04 Nov 2008 20:01:44 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@a79b923a9cba [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a79b923a9cba395cb3911b27c9599ffb8c997caf">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a79b923a9cba395cb3911b27c9599ffb8c997caf&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a79b923a9cba395cb3911b27c9599ffb8c997caf&newProject=comm-central&newRevision=d32b4cc6f46d1195ae66fd0cf8395c60b9259ca6&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a79b923a9cba395cb3911b27c9599ffb8c997caf&newProject=comm-central&newRevision=d32b4cc6f46d1195ae66fd0cf8395c60b9259ca6&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a79b923a9cba395cb3911b27c9599ffb8c997caf&newProject=comm-central&newRevision=d32b4cc6f46d1195ae66fd0cf8395c60b9259ca6&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>






</table></div>

<div class="page_body description">make actions parameterizable by the attribute they were invoked in the service
of.  (This is mainly useful for nouns like 'boolean' where there is no
correlation whatsoever between the noun and the attribute.  For something like
identity, the &quot;from&quot; action strictly implies the &quot;from&quot; attribute, and it
doesn't matter how we got the noun in the first place.)</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/fundattr.js">modules/fundattr.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/fundattr.js">file</a> |
<a href="/comm-central/annotate/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/fundattr.js">annotate</a> |
<a href="/comm-central/diff/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/fundattr.js">diff</a> |
<a href="/comm-central/comparison/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/fundattr.js">comparison</a> |
<a href="/comm-central/log/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/fundattr.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/gloda.js">modules/gloda.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/gloda.js">file</a> |
<a href="/comm-central/annotate/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/gloda.js">annotate</a> |
<a href="/comm-central/diff/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/gloda.js">diff</a> |
<a href="/comm-central/comparison/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/gloda.js">comparison</a> |
<a href="/comm-central/log/1d843f143347c4076cc1dcce6c2c2db99f7d2764/modules/gloda.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/modules/fundattr.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/modules/fundattr.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -120,31 +120,31 @@ let GlodaFundAttr = {</span>
<a href="#l1.4"></a><span id="l1.4">                         parameterNoun: null,</span>
<a href="#l1.5"></a><span id="l1.5">                         explanation: this._strBundle.getString(</span>
<a href="#l1.6"></a><span id="l1.6">                                        &quot;attrCcExplanation&quot;),</span>
<a href="#l1.7"></a><span id="l1.7">                         });</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     Gloda.defineNounAction(Gloda.NOUN_IDENTITY, {actionType: &quot;filter&quot;,</span>
<a href="#l1.10"></a><span id="l1.10">       actionTarget: Gloda.NOUN_MESSAGE,</span>
<a href="#l1.11"></a><span id="l1.11">       shortName: &quot;from&quot;,</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-      makeConstraint: function(aIdentity) {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      makeConstraint: function(aAttrDef, aIdentity) {</span>
<a href="#l1.14"></a><span id="l1.14">         return [GlodaFundAttr._attrFrom, null, aIdentity.id];</span>
<a href="#l1.15"></a><span id="l1.15">       },</span>
<a href="#l1.16"></a><span id="l1.16">       });</span>
<a href="#l1.17"></a><span id="l1.17">     Gloda.defineNounAction(Gloda.NOUN_IDENTITY, {actionType: &quot;filter&quot;,</span>
<a href="#l1.18"></a><span id="l1.18">       actionTarget: Gloda.NOUN_MESSAGE,</span>
<a href="#l1.19"></a><span id="l1.19">       shortName: &quot;to&quot;,</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-      makeConstraint: function(aIdentity) {</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+      makeConstraint: function(aAttrDef, aIdentity) {</span>
<a href="#l1.22"></a><span id="l1.22">         return [GlodaFundAttr._attrTo, null, aIdentity.id];</span>
<a href="#l1.23"></a><span id="l1.23">       },</span>
<a href="#l1.24"></a><span id="l1.24">       });</span>
<a href="#l1.25"></a><span id="l1.25">     Gloda.defineNounAction(Gloda.NOUN_IDENTITY, {actionType: &quot;filter&quot;,</span>
<a href="#l1.26"></a><span id="l1.26">       actionTarget: Gloda.NOUN_MESSAGE,</span>
<a href="#l1.27"></a><span id="l1.27">       shortName: &quot;cc&quot;,</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-      makeConstraint: function(aIdentity) {</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+      makeConstraint: function(aAttrDef, aIdentity) {</span>
<a href="#l1.30"></a><span id="l1.30">         return [GlodaFundAttr._attrCc, null, aIdentity.id];</span>
<a href="#l1.31"></a><span id="l1.31">       },</span>
<a href="#l1.32"></a><span id="l1.32">       });</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34">     // Date</span>
<a href="#l1.35"></a><span id="l1.35">     this._attrDate = Gloda.defineAttribute({</span>
<a href="#l1.36"></a><span id="l1.36">                         provider: this,</span>
<a href="#l1.37"></a><span id="l1.37">                         extensionName: Gloda.BUILT_IN,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/modules/gloda.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/modules/gloda.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -268,16 +268,33 @@ let Gloda = {</span>
<a href="#l2.4"></a><span id="l2.4">       }};</span>
<a href="#l2.5"></a><span id="l2.5">     this._nounIDToMeta[this.NOUN_IDENTITY] = {class: GlodaIdentity,</span>
<a href="#l2.6"></a><span id="l2.6">       firstClass: false, actions: [],</span>
<a href="#l2.7"></a><span id="l2.7">       fromAttributeValue: function(aID) {</span>
<a href="#l2.8"></a><span id="l2.8">         return GlodaDatastore.getIdentityByID(aID);</span>
<a href="#l2.9"></a><span id="l2.9">       }};</span>
<a href="#l2.10"></a><span id="l2.10">   </span>
<a href="#l2.11"></a><span id="l2.11">     GlodaDatastore.getAllAttributes();</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    /* boolean actions, these are parameterized by the attribute they operate</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+       in the context of.  They are also (not coincidentally), ugly. */</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+    Gloda.defineNounAction(Gloda.NOUN_BOOLEAN, {actionType: &quot;filter&quot;,</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+      actionTarget: Gloda.NOUN_MESSAGE,</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+      shortName: &quot;true&quot;,</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+      makeConstraint: function(aAttrDef, aIdentity) {</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+        return [aAttrDef, null, 1];</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+      },</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+      });</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+    Gloda.defineNounAction(Gloda.NOUN_BOOLEAN, {actionType: &quot;filter&quot;,</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+      actionTarget: Gloda.NOUN_MESSAGE,</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+      shortName: &quot;false&quot;,</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+      makeConstraint: function(aAttrDef, aIdentity) {</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+        return [aAttrDef, null, 0];</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+      },</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+      });</span>
<a href="#l2.29"></a><span id="l2.29">   },</span>
<a href="#l2.30"></a><span id="l2.30">   </span>
<a href="#l2.31"></a><span id="l2.31">   </span>
<a href="#l2.32"></a><span id="l2.32">   _bindAttribute: function gloda_ns_bindAttr(aAttr, aSubjectType, aObjectType,</span>
<a href="#l2.33"></a><span id="l2.33">                                              aSingular, aBindName) {</span>
<a href="#l2.34"></a><span id="l2.34">     if (!(aSubjectType in this._nounIDToMeta))</span>
<a href="#l2.35"></a><span id="l2.35">       throw Error(&quot;Invalid subject type: &quot; + aSubjectType);</span>
<a href="#l2.36"></a><span id="l2.36">     </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

