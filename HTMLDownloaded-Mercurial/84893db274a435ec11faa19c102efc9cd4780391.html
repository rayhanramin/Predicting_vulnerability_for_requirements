<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22325:84893db274a435ec11faa19c102efc9cd4780391</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 84893db274a435ec11faa19c102efc9cd4780391" />
<meta property="og:url" content="/comm-central/rev/84893db274a435ec11faa19c102efc9cd4780391" />
<meta property="og:description" content="Bug 1366607 - Allow building with m-c as topsrcdir. r=frg,tomprince" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 84893db274a435ec11faa19c102efc9cd4780391 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/84893db274a435ec11faa19c102efc9cd4780391">shortlog</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/84893db274a435ec11faa19c102efc9cd4780391">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391">files</a> |
changeset |
<a href="/comm-central/raw-rev/84893db274a435ec11faa19c102efc9cd4780391">raw</a>  | <a href="/comm-central/archive/84893db274a435ec11faa19c102efc9cd4780391.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1366607">Bug 1366607</a> - Allow building with m-c as topsrcdir. r=frg,tomprince
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#104;&#105;&#108;&#105;&#112;&#112;&#32;&#75;&#101;&#119;&#105;&#115;&#99;&#104;&#32;&#60;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 26 Feb 2017 16:45:39 +0100</td></tr>

<tr>
 <td>changeset 22325</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/84893db274a435ec11faa19c102efc9cd4780391">84893db274a435ec11faa19c102efc9cd4780391</a></td>
</tr>



<tr>
<td>parent 22324</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1eba18865abe74b489994d30156078aa58f16002">1eba18865abe74b489994d30156078aa58f16002</a>
</td>
</tr>

<tr>
<td>child 22326</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/18c81073537a36ba78bd68adb45a3cf5f1976a9b">18c81073537a36ba78bd68adb45a3cf5f1976a9b</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=84893db274a435ec11faa19c102efc9cd4780391">13605</a></td></tr>
<tr><td>push user</td><td>mozilla@hocat.ca</td></tr>
<tr><td>push date</td><td class="date age">Tue, 10 Oct 2017 22:47:54 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@84893db274a4 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=84893db274a435ec11faa19c102efc9cd4780391">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=84893db274a435ec11faa19c102efc9cd4780391&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=84893db274a435ec11faa19c102efc9cd4780391&newProject=comm-central&newRevision=84893db274a435ec11faa19c102efc9cd4780391&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=84893db274a435ec11faa19c102efc9cd4780391&newProject=comm-central&newRevision=84893db274a435ec11faa19c102efc9cd4780391&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=84893db274a435ec11faa19c102efc9cd4780391&newProject=comm-central&newRevision=84893db274a435ec11faa19c102efc9cd4780391&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28frg%29&revcount=50">frg</a>, <a href="/comm-central/log?rev=reviewer%28tomprince%29&revcount=50">tomprince</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1366607">1366607</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1366607">Bug 1366607</a> - Allow building with m-c as topsrcdir. r=frg,tomprince

MozReview-Commit-ID: DhZnUDM0EyZ</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/.eslintrc.js">calendar/.eslintrc.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/.eslintrc.js">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/.eslintrc.js">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/.eslintrc.js">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/.eslintrc.js">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/.eslintrc.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/libical/src/libical/Makefile.in">calendar/libical/src/libical/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/libical/src/libical/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/libical/src/libical/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/libical/src/libical/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/libical/src/libical/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/libical/src/libical/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/Makefile.in">calendar/lightning/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/jar.mn">calendar/lightning/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/jar.mn">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/jar.mn">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/jar.mn">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/jar.mn">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-packager.mk">calendar/lightning/lightning-packager.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-packager.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-packager.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-packager.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-packager.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-packager.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-tests.mk">calendar/lightning/lightning-tests.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-tests.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-tests.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-tests.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-tests.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/lightning-tests.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/locales/Makefile.in">calendar/lightning/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/versions.mk">calendar/lightning/versions.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/versions.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/versions.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/versions.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/versions.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/lightning/versions.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/Makefile.in">calendar/providers/gdata/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/locales/Makefile.in">calendar/providers/gdata/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/providers/gdata/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/test/mozmill/Makefile.in">calendar/test/mozmill/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/test/mozmill/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/test/mozmill/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/test/mozmill/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/test/mozmill/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/test/mozmill/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/timezones/Makefile.in">calendar/timezones/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/calendar/timezones/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/calendar/timezones/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/calendar/timezones/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/calendar/timezones/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/calendar/timezones/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/comm-confvars.sh">comm-confvars.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/comm-confvars.sh">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/comm-confvars.sh">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/comm-confvars.sh">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/comm-confvars.sh">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/comm-confvars.sh">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/Makefile.in">im/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app-config.mk">im/app-config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/app-config.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/app-config.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app-config.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/app-config.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/app-config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app.mozbuild">im/app.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/app.mozbuild">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/app.mozbuild">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app.mozbuild">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/app.mozbuild">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/app.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app/Makefile.in">im/app/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/app/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/app/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/app/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/app/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app/moz.build">im/app/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/app/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/app/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/app/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/app/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/app/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/branding/halloween/Makefile.in">im/branding/halloween/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/branding/halloween/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/branding/halloween/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/branding/halloween/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/branding/halloween/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/branding/halloween/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/branding/nightly/Makefile.in">im/branding/nightly/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/branding/nightly/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/branding/nightly/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/branding/nightly/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/branding/nightly/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/branding/nightly/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/build.mk">im/build.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/build.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/build.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/build.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/build.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/build.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/configure.in">im/configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/configure.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/configure.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/configure.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/configure.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/confvars.sh">im/confvars.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/confvars.sh">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/confvars.sh">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/confvars.sh">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/confvars.sh">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/confvars.sh">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/content/jar.mn">im/content/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/content/jar.mn">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/content/jar.mn">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/content/jar.mn">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/content/jar.mn">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/content/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/content/moz.build">im/content/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/content/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/content/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/content/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/content/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/content/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/installer/Makefile.in">im/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/installer/windows/Makefile.in">im/installer/windows/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/installer/windows/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/installer/windows/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/installer/windows/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/installer/windows/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/installer/windows/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/locales/Makefile.in">im/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/im/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/im/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/im/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/im/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/im/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/liblber/moz.build">ldap/c-sdk/libraries/liblber/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/liblber/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/liblber/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/liblber/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/liblber/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/liblber/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldap/moz.build">ldap/c-sdk/libraries/libldap/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldap/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldap/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldap/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldap/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldap/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldif/moz.build">ldap/c-sdk/libraries/libldif/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldif/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldif/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldif/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldif/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libldif/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libprldap/moz.build">ldap/c-sdk/libraries/libprldap/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libprldap/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libprldap/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libprldap/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libprldap/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/ldap/c-sdk/libraries/libprldap/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/xpcom/src/moz.build">ldap/xpcom/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/ldap/xpcom/src/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/ldap/xpcom/src/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/ldap/xpcom/src/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/ldap/xpcom/src/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/ldap/xpcom/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/Makefile.in">mail/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app-config.mk">mail/app-config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/app-config.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/app-config.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app-config.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/app-config.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/app-config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app.mozbuild">mail/app.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/app.mozbuild">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/app.mozbuild">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app.mozbuild">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/app.mozbuild">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/app.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app/Makefile.in">mail/app/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/app/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/app/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/app/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/app/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app/moz.build">mail/app/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/app/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/app/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/app/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/app/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app/profile/extensions/Makefile.in">mail/app/profile/extensions/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/app/profile/extensions/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/app/profile/extensions/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/app/profile/extensions/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/app/profile/extensions/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/app/profile/extensions/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/base/jar.mn">mail/base/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/base/jar.mn">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/base/jar.mn">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/base/jar.mn">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/base/jar.mn">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/base/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/base/moz.build">mail/base/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/base/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/base/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/base/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/base/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/base/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/aurora/Makefile.in">mail/branding/aurora/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/aurora/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/aurora/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/aurora/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/aurora/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/aurora/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/nightly/Makefile.in">mail/branding/nightly/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/nightly/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/nightly/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/nightly/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/nightly/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/branding/nightly/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/build.mk">mail/build.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/build.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/build.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/build.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/build.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/build.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/components/search/mdimporter/Makefile.in">mail/components/search/mdimporter/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/components/search/mdimporter/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/components/search/mdimporter/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/components/search/mdimporter/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/components/search/mdimporter/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/components/search/mdimporter/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/configure.in">mail/configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/configure.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/configure.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/configure.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/configure.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/confvars.sh">mail/confvars.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/confvars.sh">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/confvars.sh">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/confvars.sh">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/confvars.sh">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/confvars.sh">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/extensions/smime/jar.mn">mail/extensions/smime/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/extensions/smime/jar.mn">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/extensions/smime/jar.mn">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/extensions/smime/jar.mn">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/extensions/smime/jar.mn">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/extensions/smime/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/Makefile.in">mail/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/windows/Makefile.in">mail/installer/windows/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/windows/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/windows/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/windows/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/windows/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/installer/windows/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/locales/Makefile.in">mail/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/moz.build">mail/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/Makefile.in">mail/test/mozmill/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/moz.build">mail/test/mozmill/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/testsuite-targets.mk">mail/testsuite-targets.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mail/testsuite-targets.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mail/testsuite-targets.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mail/testsuite-targets.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mail/testsuite-targets.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mail/testsuite-targets.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/src/moz.build">mailnews/base/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/src/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/src/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/src/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/src/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/test/moz.build">mailnews/base/test/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/test/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/test/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/test/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/test/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/test/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/util/moz.build">mailnews/base/util/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/util/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/util/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/util/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/util/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/base/util/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/build/moz.build">mailnews/build/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/build/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/build/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/build/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/build/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/build/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/extensions/smime/src/moz.build">mailnews/extensions/smime/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/extensions/smime/src/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/extensions/smime/src/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/extensions/smime/src/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/extensions/smime/src/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/extensions/smime/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/imap/test/moz.build">mailnews/imap/test/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/imap/test/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/imap/test/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/imap/test/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/imap/test/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/imap/test/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/intl/moz.build">mailnews/intl/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/intl/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/intl/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/intl/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/intl/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/intl/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/jsaccount/test/idl/moz.build">mailnews/jsaccount/test/idl/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/jsaccount/test/idl/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/jsaccount/test/idl/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/jsaccount/test/idl/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/jsaccount/test/idl/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/jsaccount/test/idl/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mailnews.mozbuild">mailnews/mailnews.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mailnews.mozbuild">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mailnews.mozbuild">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mailnews.mozbuild">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mailnews.mozbuild">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mailnews.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mime/src/moz.build">mailnews/mime/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mime/src/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mime/src/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mime/src/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mime/src/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/mime/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/moz.build">mailnews/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/mailnews/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/mailnews/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/mailnews/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/mailnews/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/mailnews/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/Makefile.in">suite/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app-config.mk">suite/app-config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/app-config.mk">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/app-config.mk">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app-config.mk">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/app-config.mk">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/app-config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app.mozbuild">suite/app.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/app.mozbuild">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/app.mozbuild">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app.mozbuild">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/app.mozbuild">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/app.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app/Makefile.in">suite/app/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/app/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/app/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/app/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/app/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app/moz.build">suite/app/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/app/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/app/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/app/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/app/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/app/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/branding/nightly/Makefile.in">suite/branding/nightly/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/branding/nightly/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/branding/nightly/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/branding/nightly/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/branding/nightly/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/branding/nightly/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/browser/Makefile.in">suite/browser/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/browser/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/browser/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/browser/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/browser/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/browser/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/build/Makefile.in">suite/build/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/build/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/build/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/build/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/build/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/build/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/build/moz.build">suite/build/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/build/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/build/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/build/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/build/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/build/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/common/jar.mn">suite/common/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/common/jar.mn">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/common/jar.mn">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/common/jar.mn">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/common/jar.mn">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/common/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/common/moz.build">suite/common/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/common/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/common/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/common/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/common/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/common/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/configure.in">suite/configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/configure.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/configure.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/configure.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/configure.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/configure.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/confvars.sh">suite/confvars.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/confvars.sh">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/confvars.sh">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/confvars.sh">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/confvars.sh">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/confvars.sh">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/Makefile.in">suite/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/windows/Makefile.in">suite/installer/windows/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/windows/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/windows/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/windows/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/windows/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/installer/windows/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/locales/Makefile.in">suite/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/moz.build">suite/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/themes/modern/moz.build">suite/themes/modern/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/84893db274a435ec11faa19c102efc9cd4780391/suite/themes/modern/moz.build">file</a> |
<a href="/comm-central/annotate/84893db274a435ec11faa19c102efc9cd4780391/suite/themes/modern/moz.build">annotate</a> |
<a href="/comm-central/diff/84893db274a435ec11faa19c102efc9cd4780391/suite/themes/modern/moz.build">diff</a> |
<a href="/comm-central/comparison/84893db274a435ec11faa19c102efc9cd4780391/suite/themes/modern/moz.build">comparison</a> |
<a href="/comm-central/log/84893db274a435ec11faa19c102efc9cd4780391/suite/themes/modern/moz.build">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,11 +1,14 @@</span>
<a href="#l1.4"></a><span id="l1.4"> &quot;use strict&quot;;</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> module.exports = {</span>
<a href="#l1.7"></a><span id="l1.7" class="difflineplus">+    &quot;extends&quot;: [</span>
<a href="#l1.8"></a><span id="l1.8" class="difflineplus">+        &quot;../../toolkit/.eslintrc.js&quot;</span>
<a href="#l1.9"></a><span id="l1.9" class="difflineplus">+    ],</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;rules&quot;: {</span>
<a href="#l1.11"></a><span id="l1.11">         // Enforce one true brace style (opening brace on the same line)</span>
<a href="#l1.12"></a><span id="l1.12">         // Allow single line (for now) because of the vast number of changes needed</span>
<a href="#l1.13"></a><span id="l1.13">         &quot;brace-style&quot;: [2, &quot;1tbs&quot;, { allowSingleLine: true }],</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15">         // Enforce newline at the end of file, with no multiple empty lines.</span>
<a href="#l1.16"></a><span id="l1.16">         &quot;eol-last&quot;: 2,</span>
<a href="#l1.17"></a><span id="l1.17"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/libical/src/libical/Makefile.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/libical/src/libical/Makefile.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -49,17 +49,17 @@ ical_TARGET := export</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> CSRCS += \</span>
<a href="#l2.6"></a><span id="l2.6"> 	icalderivedparameter.c \</span>
<a href="#l2.7"></a><span id="l2.7"> 	icalderivedproperty.c \</span>
<a href="#l2.8"></a><span id="l2.8"> 	icalderivedvalue.c \</span>
<a href="#l2.9"></a><span id="l2.9"> 	icalrestriction.c \</span>
<a href="#l2.10"></a><span id="l2.10"> 	$(NULL)</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15"> ######################################################################</span>
<a href="#l2.16"></a><span id="l2.16"> #</span>
<a href="#l2.17"></a><span id="l2.17"> # Generate files that are automatically generated (*.h.in and *.c.in)</span>
<a href="#l2.18"></a><span id="l2.18"> # and ical.h</span>
<a href="#l2.19"></a><span id="l2.19"> #</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21"> DESIGNDATA = $(srcdir)/../../design-data</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/lightning/Makefile.in</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/lightning/Makefile.in</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -10,39 +10,39 @@ XPI_VERSION = $(LIGHTNING_VERSION)</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> XPI_EM_ID = {e2fda1a4-762b-4020-b5ad-a41df1933103}</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> ifneq (,$(findstring a,$(LIGHTNING_VERSION)))</span>
<a href="#l3.8"></a><span id="l3.8"> DEFINES += -DLIGHTNING_PRERELEASE_VERSION=1</span>
<a href="#l3.9"></a><span id="l3.9"> endif</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11"> # Gecko milestone</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-GRE_MILESTONE = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+GRE_MILESTONE = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l3.14"></a><span id="l3.14"> ifdef GRE_MILESTONE</span>
<a href="#l3.15"></a><span id="l3.15"> DEFINES += -DGRE_MILESTONE=$(GRE_MILESTONE)</span>
<a href="#l3.16"></a><span id="l3.16"> endif</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18"> # comm-central source repo and stamp</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-SOURCE_STAMP ?= $(firstword $(shell hg -R $(topsrcdir) parent --template='{node}\n' 2&gt;/dev/null))</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+SOURCE_STAMP ?= $(firstword $(shell hg -R $(commtopsrcdir) parent --template='{node}\n' 2&gt;/dev/null))</span>
<a href="#l3.21"></a><span id="l3.21"> ifdef SOURCE_STAMP</span>
<a href="#l3.22"></a><span id="l3.22"> DEFINES += -DSOURCE_STAMP='$(SOURCE_STAMP)'</span>
<a href="#l3.23"></a><span id="l3.23"> endif</span>
<a href="#l3.24"></a><span id="l3.24"> </span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-SOURCE_REPO := $(shell hg -R $(topsrcdir) showconfig paths.default 2&gt;/dev/null | sed -e 's/^ssh:/http:/')</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+SOURCE_REPO := $(shell hg -R $(commtopsrcdir) showconfig paths.default 2&gt;/dev/null | sed -e 's/^ssh:/http:/')</span>
<a href="#l3.27"></a><span id="l3.27"> ifdef SOURCE_REPO</span>
<a href="#l3.28"></a><span id="l3.28"> DEFINES += -DSOURCE_REPO='$(SOURCE_REPO)'</span>
<a href="#l3.29"></a><span id="l3.29"> endif</span>
<a href="#l3.30"></a><span id="l3.30"> </span>
<a href="#l3.31"></a><span id="l3.31"> # Mozilla source repo and stamps</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-MOZ_SOURCE_STAMP = $(firstword $(shell hg -R $(MOZILLA_SRCDIR) parent --template='{node}\n' 2&gt;/dev/null))</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+MOZ_SOURCE_STAMP = $(firstword $(shell hg -R $(moztopsrcdir) parent --template='{node}\n' 2&gt;/dev/null))</span>
<a href="#l3.34"></a><span id="l3.34"> ifdef MOZ_SOURCE_STAMP</span>
<a href="#l3.35"></a><span id="l3.35"> DEFINES += -DMOZ_SOURCE_STAMP='$(MOZ_SOURCE_STAMP)'</span>
<a href="#l3.36"></a><span id="l3.36"> endif</span>
<a href="#l3.37"></a><span id="l3.37"> </span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-MOZ_SOURCE_REPO := $(shell hg -R $(MOZILLA_SRCDIR) showconfig paths.default 2&gt;/dev/null | sed -e 's/^ssh:/http:/')</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+MOZ_SOURCE_REPO := $(shell hg -R $(moztopsrcdir) showconfig paths.default 2&gt;/dev/null | sed -e 's/^ssh:/http:/')</span>
<a href="#l3.40"></a><span id="l3.40"> ifdef MOZ_SOURCE_REPO</span>
<a href="#l3.41"></a><span id="l3.41"> DEFINES += -DMOZ_SOURCE_REPO='$(MOZ_SOURCE_REPO)'</span>
<a href="#l3.42"></a><span id="l3.42"> endif</span>
<a href="#l3.43"></a><span id="l3.43"> </span>
<a href="#l3.44"></a><span id="l3.44"> ifdef NIGHTLY_BUILD</span>
<a href="#l3.45"></a><span id="l3.45"> # On nightly builds, install as a global extension in</span>
<a href="#l3.46"></a><span id="l3.46"> # dist/bin/extensions/</span>
<a href="#l3.47"></a><span id="l3.47"> XPI_INSTALL_EXTENSION = $(XPI_EM_ID)</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineat">@@ -55,34 +55,34 @@ endif</span>
<a href="#l3.49"></a><span id="l3.49"> DEFINES += -DTHUNDERBIRD_VERSION=$(THUNDERBIRD_VERSION) \</span>
<a href="#l3.50"></a><span id="l3.50">            -DTHUNDERBIRD_MAXVERSION=$(THUNDERBIRD_MAXVERSION) \</span>
<a href="#l3.51"></a><span id="l3.51">            -DSEAMONKEY_VERSION=$(SEAMONKEY_VERSION) \</span>
<a href="#l3.52"></a><span id="l3.52">            -DSEAMONKEY_MAXVERSION=$(SEAMONKEY_MAXVERSION) \</span>
<a href="#l3.53"></a><span id="l3.53">            -DLIGHTNING_VERSION=$(LIGHTNING_VERSION) \</span>
<a href="#l3.54"></a><span id="l3.54">            -DXPI_EM_ID=&quot;$(XPI_EM_ID)&quot; \</span>
<a href="#l3.55"></a><span id="l3.55">            $(NULL)</span>
<a href="#l3.56"></a><span id="l3.56"> </span>
<a href="#l3.57"></a><span id="l3.57" class="difflineminus">-MOZ_BUILDID = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(DIST)/bin/application.ini App BuildID)</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+MOZ_BUILDID = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/application.ini App BuildID)</span>
<a href="#l3.59"></a><span id="l3.59"> DEFINES += -DMOZ_BUILDID=$(MOZ_BUILDID)</span>
<a href="#l3.60"></a><span id="l3.60"> </span>
<a href="#l3.61"></a><span id="l3.61" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l3.63"></a><span id="l3.63"> include $(srcdir)/versions.mk</span>
<a href="#l3.64"></a><span id="l3.64"> include $(srcdir)/lightning-packager.mk</span>
<a href="#l3.65"></a><span id="l3.65"> include $(srcdir)/lightning-tests.mk</span>
<a href="#l3.66"></a><span id="l3.66"> </span>
<a href="#l3.67"></a><span id="l3.67"> # For Lightning, we also need to preprocess the l10n prefs. Pull in the en-US</span>
<a href="#l3.68"></a><span id="l3.68"> # copy if the files doesn't exist.</span>
<a href="#l3.69"></a><span id="l3.69"> repack-process-extrafiles: lightning-extrafiles</span>
<a href="#l3.70"></a><span id="l3.70"> lightning-extrafiles: LTN_ABCD_L10NJS=$(call EXPAND_LOCALE_SRCDIR,calendar/locales)/lightning-l10n.js</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-lightning-extrafiles: LTN_ANY_L10NJS=$(if $(wildcard $(LTN_ABCD_L10NJS)),$(LTN_ABCD_L10NJS),$(topsrcdir)/calendar/locales/en-US/lightning-l10n.js)</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+lightning-extrafiles: LTN_ANY_L10NJS=$(if $(wildcard $(LTN_ABCD_L10NJS)),$(LTN_ABCD_L10NJS),$(commtopsrcdir)/calendar/locales/en-US/lightning-l10n.js)</span>
<a href="#l3.73"></a><span id="l3.73"> lightning-extrafiles:</span>
<a href="#l3.74"></a><span id="l3.74"> 	$(call py_action,preprocessor,$(PREF_PPFLAGS) $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) $(LTN_ANY_L10NJS) -o $(DIST)/xpi-stage/$(L10N_XPI_NAME)/$(PREF_DIR)/lightning-l10n.js)</span>
<a href="#l3.75"></a><span id="l3.75"> </span>
<a href="#l3.76"></a><span id="l3.76"> ident:</span>
<a href="#l3.77"></a><span id="l3.77"> 	@printf 'comm_revision '</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l3.80"></a><span id="l3.80"> 	    $(FINAL_TARGET)/app.ini App SourceStamp</span>
<a href="#l3.81"></a><span id="l3.81"> 	@printf 'moz_revision '</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l3.84"></a><span id="l3.84"> 	    $(FINAL_TARGET)/app.ini Build SourceStamp</span>
<a href="#l3.85"></a><span id="l3.85"> 	@printf 'buildid '</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l3.88"></a><span id="l3.88"> 	    $(FINAL_TARGET)/app.ini App BuildID</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/lightning/jar.mn</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/lightning/jar.mn</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -99,23 +99,23 @@ lightning.jar:</span>
<a href="#l4.4"></a><span id="l4.4">     ../skin/windows/lightning/imip.css                        (themes/windows/imip.css)</span>
<a href="#l4.5"></a><span id="l4.5">     ../skin/windows/lightning/lightning.css                   (themes/windows/lightning.css)</span>
<a href="#l4.6"></a><span id="l4.6">     ../skin/windows/lightning/lightning-toolbar.css           (themes/windows/lightning-toolbar.css)</span>
<a href="#l4.7"></a><span id="l4.7">     ../skin/windows/lightning/lightning-widgets.css           (themes/windows/lightning-widgets.css)</span>
<a href="#l4.8"></a><span id="l4.8">     ../skin/windows/lightning/mode-switch-icons-aero.png      (themes/windows/images/mode-switch-icons-aero.png)</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11"> calendar.jar:</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    content/calendar/calendarCreation.xul                  (/calendar/resources/content/calendarCreation.xul)</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-    content/calendar/calendarCreation.js                   (/calendar/resources/content/calendarCreation.js)</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-    content/calendar/datetimepickers/datetimepickers.css   (/calendar/resources/content/datetimepickers/datetimepickers.css)</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-    content/calendar/datetimepickers/datetimepickers.xml   (/calendar/resources/content/datetimepickers/datetimepickers.xml)</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-    content/calendar/mouseoverPreviews.js                  (/calendar/resources/content/mouseoverPreviews.js)</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-    content/calendar/publish.js                            (/calendar/resources/content/publish.js)</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-    content/calendar/publishDialog.js                      (/calendar/resources/content/publishDialog.js)</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-    content/calendar/publishDialog.xul                     (/calendar/resources/content/publishDialog.xul)</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-    content/calendar/sound.wav                             (/calendar/resources/content/sound.wav)</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-    ../skin/lightning-common/datetimepickers.css           (/calendar/resources/skin/datetimepickers.css)</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-    ../skin/lightning-common/dialogOverlay.css             (/calendar/resources/skin/dialogOverlay.css)</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+    content/calendar/calendarCreation.xul                  (../resources/content/calendarCreation.xul)</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+    content/calendar/calendarCreation.js                   (../resources/content/calendarCreation.js)</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+    content/calendar/datetimepickers/datetimepickers.css   (../resources/content/datetimepickers/datetimepickers.css)</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+    content/calendar/datetimepickers/datetimepickers.xml   (../resources/content/datetimepickers/datetimepickers.xml)</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+    content/calendar/mouseoverPreviews.js                  (../resources/content/mouseoverPreviews.js)</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+    content/calendar/publish.js                            (../resources/content/publish.js)</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+    content/calendar/publishDialog.js                      (../resources/content/publishDialog.js)</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+    content/calendar/publishDialog.xul                     (../resources/content/publishDialog.xul)</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+    content/calendar/sound.wav                             (../resources/content/sound.wav)</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+    ../skin/lightning-common/datetimepickers.css           (../resources/skin/datetimepickers.css)</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+    ../skin/lightning-common/dialogOverlay.css             (../resources/skin/dialogOverlay.css)</span>
<a href="#l4.34"></a><span id="l4.34">     ../skin/lightning-common/imip.css                      (themes/common/imip.css)</span>
<a href="#l4.35"></a><span id="l4.35">     ../skin/lightning-common/lightning.css                 (themes/common/lightning.css)</span>
<a href="#l4.36"></a><span id="l4.36">     ../skin/lightning-common/lightning-toolbar.css         (themes/common/lightning-toolbar.css)</span>
<a href="#l4.37"></a><span id="l4.37">     ../skin/lightning-common/html-item-editing.css         (themes/common/html-item-editing.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/lightning/lightning-packager.mk</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/lightning/lightning-packager.mk</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -12,17 +12,17 @@</span>
<a href="#l5.4"></a><span id="l5.4"> #   XPI_NAME = lightning # The extension path name</span>
<a href="#l5.5"></a><span id="l5.5"> #   XPI_PKGNAME = lightning-2.2.en-US.mac # The extension package name</span>
<a href="#l5.6"></a><span id="l5.6"> #   XPI_VERSION = 2.2 # The extension version</span>
<a href="#l5.7"></a><span id="l5.7"> #</span>
<a href="#l5.8"></a><span id="l5.8"> # For the upload target to work, you also need to set:</span>
<a href="#l5.9"></a><span id="l5.9"> #   LIGHTNING_VERSION = 2.2  # Will be used to replace the Thunderbird version</span>
<a href="#l5.10"></a><span id="l5.10"> #   						 # in POST_UPLOAD_CMD</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15"> XPI_STAGE_PATH = $(DIST)/xpi-stage</span>
<a href="#l5.16"></a><span id="l5.16"> _ABS_XPI_STAGE_PATH = $(ABS_DIST)/xpi-stage</span>
<a href="#l5.17"></a><span id="l5.17"> ENUS_PKGNAME=$(subst .$(AB_CD),.en-US,$(XPI_PKGNAME))</span>
<a href="#l5.18"></a><span id="l5.18"> XPI_ZIP_IN=$(_ABS_XPI_STAGE_PATH)/$(ENUS_PKGNAME).xpi</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21"> # This variable is to allow the wget-en-US target to know which ftp server to download from</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -53,17 +53,17 @@ endif</span>
<a href="#l5.23"></a><span id="l5.23"> 	mkdir -p $@</span>
<a href="#l5.24"></a><span id="l5.24"> </span>
<a href="#l5.25"></a><span id="l5.25"> $(XPI_ZIP_IN): ensure-stage-dir</span>
<a href="#l5.26"></a><span id="l5.26"> </span>
<a href="#l5.27"></a><span id="l5.27"> # Target Directory used for the l10n files</span>
<a href="#l5.28"></a><span id="l5.28"> L10N_TARGET = $(XPI_STAGE_PATH)/$(XPI_NAME)-$(AB_CD)</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30"> # function print_ltnconfig(section,configname)</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-print_ltnconfig = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(XPI_STAGE_PATH)/$(XPI_NAME)/app.ini $1 $2)</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+print_ltnconfig = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(XPI_STAGE_PATH)/$(XPI_NAME)/app.ini $1 $2)</span>
<a href="#l5.33"></a><span id="l5.33"> </span>
<a href="#l5.34"></a><span id="l5.34"> wget-en-US:</span>
<a href="#l5.35"></a><span id="l5.35"> ifeq (thunderbird,$(MOZ_APP_NAME))</span>
<a href="#l5.36"></a><span id="l5.36"> FINAL_BINARY_URL = $(subst thunderbird,calendar/lightning,$(EN_US_BINARY_URL))</span>
<a href="#l5.37"></a><span id="l5.37"> else</span>
<a href="#l5.38"></a><span id="l5.38"> FINAL_BINARY_URL = $(subst seamonkey,calendar/lightning,$(subst latest-comm-central-trunk,latest-comm-central,$(EN_US_BINARY_URL)))</span>
<a href="#l5.39"></a><span id="l5.39"> endif</span>
<a href="#l5.40"></a><span id="l5.40"> wget-en-US: $(XPI_STAGE_PATH)</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineat">@@ -83,19 +83,19 @@ unpack: $(XPI_ZIP_IN)</span>
<a href="#l5.42"></a><span id="l5.42"> </span>
<a href="#l5.43"></a><span id="l5.43"> # Nothing to package for en-US, its just the usual english xpi</span>
<a href="#l5.44"></a><span id="l5.44"> langpack-en-US:</span>
<a href="#l5.45"></a><span id="l5.45"> 	@echo &quot;Skipping $@ as en-US is the default&quot;</span>
<a href="#l5.46"></a><span id="l5.46"> </span>
<a href="#l5.47"></a><span id="l5.47"> merge-%: AB_CD=$*</span>
<a href="#l5.48"></a><span id="l5.48"> merge-%:</span>
<a href="#l5.49"></a><span id="l5.49"> 	$(RM) -rf $(REAL_LOCALE_MERGEDIR)/calendar</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-	$(MOZILLA_SRCDIR)/mach compare-locales \</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+	$(moztopsrcdir)/mach compare-locales \</span>
<a href="#l5.52"></a><span id="l5.52"> 	    --merge $(REAL_LOCALE_MERGEDIR)/.. \</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-	    $(topsrcdir)/calendar/locales/l10n.toml \</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+	    $(commtopsrcdir)/calendar/locales/l10n.toml \</span>
<a href="#l5.55"></a><span id="l5.55"> 	    $(L10NBASEDIR) \</span>
<a href="#l5.56"></a><span id="l5.56"> 	    $*</span>
<a href="#l5.57"></a><span id="l5.57"> </span>
<a href="#l5.58"></a><span id="l5.58"> 	# This file requires a bugfix with string changes, see bug 1154448</span>
<a href="#l5.59"></a><span id="l5.59"> 	[ -f $(L10NBASEDIR)/$*/calendar/chrome/calendar/calendar-extract.properties ] &amp;&amp; \</span>
<a href="#l5.60"></a><span id="l5.60"> 	  $(RM) $(REAL_LOCALE_MERGEDIR)/calendar/chrome/calendar/calendar-extract.properties \</span>
<a href="#l5.61"></a><span id="l5.61"> 	  || true</span>
<a href="#l5.62"></a><span id="l5.62"> </span>
<a href="#l5.63"></a><span id="l5.63" class="difflineat">@@ -162,17 +162,17 @@ recreate-platformini: $(DIST)/bin/platfo</span>
<a href="#l5.64"></a><span id="l5.64"> # Lightning uses Thunderbird's build machinery, so we need to hack the post</span>
<a href="#l5.65"></a><span id="l5.65"> # upload command to use Lightning's directories and version.</span>
<a href="#l5.66"></a><span id="l5.66"> upload: upload-$(AB_CD)</span>
<a href="#l5.67"></a><span id="l5.67"> </span>
<a href="#l5.68"></a><span id="l5.68"> upload-%: AB_CD=$*</span>
<a href="#l5.69"></a><span id="l5.69"> upload-%: LTN_UPLOAD_CMD := $(patsubst $(THUNDERBIRD_VERSION)%,$(LIGHTNING_VERSION),$(subst thunderbird,calendar/lightning,$(POST_UPLOAD_CMD)))</span>
<a href="#l5.70"></a><span id="l5.70"> upload-%: stage-upload-%</span>
<a href="#l5.71"></a><span id="l5.71"> 	POST_UPLOAD_CMD=&quot;$(LTN_UPLOAD_CMD)&quot; \</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineminus">-	  $(PYTHON) $(MOZILLA_DIR)/build/upload.py --base-path $(DIST) \</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+	  $(PYTHON) $(moztopsrcdir)/build/upload.py --base-path $(DIST) \</span>
<a href="#l5.74"></a><span id="l5.74"> 	  --properties-file $(DIST)/$(XPI_NAME)_build_properties.json \</span>
<a href="#l5.75"></a><span id="l5.75"> 	  &quot;$(DIST)/$(MOZ_PKG_PLATFORM)/$(XPI_PKGNAME).xpi&quot;</span>
<a href="#l5.76"></a><span id="l5.76"> </span>
<a href="#l5.77"></a><span id="l5.77"> stage-upload-%: AB_CD=$*</span>
<a href="#l5.78"></a><span id="l5.78"> stage-upload-%:</span>
<a href="#l5.79"></a><span id="l5.79"> 	$(NSINSTALL) -D $(DIST)/$(MOZ_PKG_PLATFORM)</span>
<a href="#l5.80"></a><span id="l5.80"> 	$(call install_cmd,$(IFLAGS1) $(XPI_STAGE_PATH)/$(XPI_PKGNAME).xpi $(DIST)/$(MOZ_PKG_PLATFORM))</span>
<a href="#l5.81"></a><span id="l5.81"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/lightning/lightning-tests.mk</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/lightning/lightning-tests.mk</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -13,11 +13,11 @@ stage-extension:</span>
<a href="#l6.4"></a><span id="l6.4"> 	$(NSINSTALL) -D $(PKG_STAGE)/extensions/$(XPI_EM_ID)</span>
<a href="#l6.5"></a><span id="l6.5"> 	(cd $(FINAL_TARGET) &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/extensions/$(XPI_EM_ID) &amp;&amp; tar -xf -)</span>
<a href="#l6.6"></a><span id="l6.6"> 	grep -v em:targetPlatform $(FINAL_TARGET)/install.rdf &gt; $(PKG_STAGE)/extensions/$(XPI_EM_ID)/install.rdf</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> # stage mozmill tests and shared modules. Cross your fingers that there are no</span>
<a href="#l6.9"></a><span id="l6.9"> # name conflicts between calendar/ and mail/</span>
<a href="#l6.10"></a><span id="l6.10"> stage-mozmill:</span>
<a href="#l6.11"></a><span id="l6.11"> 	$(NSINSTALL) -D $(PKG_STAGE)/mozmill/shared-modules</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-	(cd $(topsrcdir)/calendar/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - `cat $(topsrcdir)/calendar/test/mozmill/mozmilltests.list`) | (cd $(PKG_STAGE)/mozmill &amp;&amp; tar -xf -)</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-	(cd $(topsrcdir)/calendar/test/mozmill/shared-modules &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/shared-modules &amp;&amp; tar -xf -)</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-	$(call py_action,buildlist,$(PKG_STAGE)/mozmill/mozmilltests.list $(shell cat $(topsrcdir)/calendar/test/mozmill/mozmilltests.list))</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+	(cd $(commtopsrcdir)/calendar/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - `cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list`) | (cd $(PKG_STAGE)/mozmill &amp;&amp; tar -xf -)</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+	(cd $(commtopsrcdir)/calendar/test/mozmill/shared-modules &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/shared-modules &amp;&amp; tar -xf -)</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+	$(call py_action,buildlist,$(PKG_STAGE)/mozmill/mozmilltests.list $(shell cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/lightning/locales/Makefile.in</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/lightning/locales/Makefile.in</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,11 +1,11 @@</span>
<a href="#l7.4"></a><span id="l7.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.5"></a><span id="l7.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.6"></a><span id="l7.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8"> # Setting this to calendar/locales sets up LOCALE_SRCDIR to the correct locale</span>
<a href="#l7.9"></a><span id="l7.9"> # directory</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-relativesrcdir = calendar/locales</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+relativesrcdir = $(commreltopsrcdir)/calendar/locales</span>
<a href="#l7.12"></a><span id="l7.12"> </span>
<a href="#l7.13"></a><span id="l7.13"> DEFINES += -DTHEME=$(THEME) \</span>
<a href="#l7.14"></a><span id="l7.14">            -DLOCALE_SRCDIR=$(LOCALE_SRCDIR) \</span>
<a href="#l7.15"></a><span id="l7.15">            $(NULL)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/lightning/versions.mk</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/lightning/versions.mk</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,23 +1,23 @@</span>
<a href="#l8.4"></a><span id="l8.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.5"></a><span id="l8.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.6"></a><span id="l8.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8"> # Lighting version number</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-THUNDERBIRD_VERSION := $(shell cat $(topsrcdir)/mail/config/version.txt)</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-SEAMONKEY_VERSION := $(shell cat $(topsrcdir)/suite/config/version.txt)</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+THUNDERBIRD_VERSION := $(shell cat $(commtopsrcdir)/mail/config/version.txt)</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+SEAMONKEY_VERSION := $(shell cat $(commtopsrcdir)/suite/config/version.txt)</span>
<a href="#l8.13"></a><span id="l8.13"> </span>
<a href="#l8.14"></a><span id="l8.14"> ifdef MOZ_SUITE</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-LIGHTNING_VERSION := $(shell $(PYTHON) $(topsrcdir)/calendar/lightning/build/makeversion.py $(THUNDERBIRD_VERSION))</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+LIGHTNING_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/lightning/build/makeversion.py $(THUNDERBIRD_VERSION))</span>
<a href="#l8.17"></a><span id="l8.17"> else</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-LIGHTNING_VERSION := $(shell $(PYTHON) $(topsrcdir)/calendar/lightning/build/makeversion.py $(word 1,$(MOZ_PKG_VERSION) $(THUNDERBIRD_VERSION)))</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+LIGHTNING_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/lightning/build/makeversion.py $(word 1,$(MOZ_PKG_VERSION) $(THUNDERBIRD_VERSION)))</span>
<a href="#l8.20"></a><span id="l8.20"> endif</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-GDATA_VERSION := $(shell $(PYTHON) $(topsrcdir)/calendar/providers/gdata/makeversion.py $(LIGHTNING_VERSION))</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+GDATA_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/providers/gdata/makeversion.py $(LIGHTNING_VERSION))</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25"> # For extensions we require a max version that is compatible across security releases.</span>
<a href="#l8.26"></a><span id="l8.26"> # THUNDERBIRD_MAXVERSION and SEAMONKEY_MAXVERSION is our method for doing that.</span>
<a href="#l8.27"></a><span id="l8.27"> # Alpha versions 10.0a1 and 10.0a2 aren't affected</span>
<a href="#l8.28"></a><span id="l8.28"> # For Seamonkey, 2.17 becomes 2.17.*, 2.17.1 becomes 2.17.*</span>
<a href="#l8.29"></a><span id="l8.29"> # For Thunderbird, 10.0 becomes 10.*, 10.0.1 becomes 10.*</span>
<a href="#l8.30"></a><span id="l8.30"> THUNDERBIRD_MAXVERSION := $(THUNDERBIRD_VERSION)</span>
<a href="#l8.31"></a><span id="l8.31"> ifneq (a,$(findstring a,$(THUNDERBIRD_VERSION)))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/providers/gdata/Makefile.in</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/providers/gdata/Makefile.in</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -23,11 +23,11 @@ endif</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5"> # stage the extension for use in packaged tests</span>
<a href="#l9.6"></a><span id="l9.6"> PKG_STAGE = $(DIST)/test-stage</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> stage-package:</span>
<a href="#l9.9"></a><span id="l9.9"> 	$(NSINSTALL) -D $(PKG_STAGE)/extensions/$(XPI_EM_ID)</span>
<a href="#l9.10"></a><span id="l9.10"> 	(cd $(FINAL_TARGET) &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/extensions/$(XPI_EM_ID) &amp;&amp; tar -xf -)</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-include $(topsrcdir)/calendar/lightning/versions.mk</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-include $(topsrcdir)/calendar/lightning/lightning-packager.mk</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+include $(commtopsrcdir)/calendar/lightning/versions.mk</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+include $(commtopsrcdir)/calendar/lightning/lightning-packager.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/providers/gdata/locales/Makefile.in</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/providers/gdata/locales/Makefile.in</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1,9 +1,9 @@</span>
<a href="#l10.4"></a><span id="l10.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.5"></a><span id="l10.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.6"></a><span id="l10.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8"> # Setting this to calendar/locales sets up LOCALE_SRCDIR to the correct locale</span>
<a href="#l10.9"></a><span id="l10.9"> # directory</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-relativesrcdir = calendar/locales</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+relativesrcdir = $(commreltopsrcdir)/calendar/locales</span>
<a href="#l10.12"></a><span id="l10.12"> </span>
<a href="#l10.13"></a><span id="l10.13"> DEFINES += -DLOCALE_SRCDIR=$(LOCALE_SRCDIR)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/test/mozmill/Makefile.in</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/test/mozmill/Makefile.in</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -20,30 +20,30 @@ MOZMILLPROGRAM = $(ABS_DIST)/$(APP_NAME)</span>
<a href="#l11.4"></a><span id="l11.4"> else</span>
<a href="#l11.5"></a><span id="l11.5"> # Non-mac options</span>
<a href="#l11.6"></a><span id="l11.6"> MOZMILLPROGRAM = $(ABS_DIST)/bin/thunderbird$(BIN_SUFFIX)</span>
<a href="#l11.7"></a><span id="l11.7"> endif</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9"> check-no-solo = $(foreach solo,SOLO_TEST SOLO_FILE,$(if $($(solo)),$(error $(subst SOLOVAR,$(solo),$(1)))))</span>
<a href="#l11.10"></a><span id="l11.10"> find-solo-test = $(if $(and $(SOLO_TEST),$(SOLO_FILE)),$(error Both SOLO_TEST and SOLO_FILE are specified. You may only specify one.),$(if $(SOLO_TEST),$(SOLO_TEST),$(if $(SOLO_FILE),$(SOLO_FILE),$(error SOLO_TEST or SOLO_FILE needs to be specified.))))</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> # Calendar uses both its own shared modules and those from Thunderbird. Since</span>
<a href="#l11.16"></a><span id="l11.16"> # the build system and mozmill is not set up to include files from two different</span>
<a href="#l11.17"></a><span id="l11.17"> # locations, we have to stuff them into the same directory. There might be</span>
<a href="#l11.18"></a><span id="l11.18"> # problems if the names are the same, but I propose we boycott those modules!</span>
<a href="#l11.19"></a><span id="l11.19"> mozmill-stage: MOZMILL_STAGE=$(MOZMILLDIR)/stage</span>
<a href="#l11.20"></a><span id="l11.20"> mozmill-stage: MOZMILL_STAGE_SHARED=$(MOZMILL_STAGE)/shared-modules</span>
<a href="#l11.21"></a><span id="l11.21"> mozmill-stage: $(MOZMILL_SHARED)</span>
<a href="#l11.22"></a><span id="l11.22"> 	$(INSTALL) -D $(MOZMILL_STAGE)</span>
<a href="#l11.23"></a><span id="l11.23"> 	$(INSTALL) -D $(MOZMILL_STAGE_SHARED)</span>
<a href="#l11.24"></a><span id="l11.24"> 	$(INSTALL) $(addprefix $(srcdir)/,$(shell cat $(srcdir)/mozmilltests.list)) $(MOZMILL_STAGE)</span>
<a href="#l11.25"></a><span id="l11.25"> </span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-	$(INSTALL) $(wildcard $(topsrcdir)/mail/test/mozmill/shared-modules/*.js) $(MOZMILL_STAGE_SHARED)</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+	$(INSTALL) $(wildcard $(commtopsrcdir)/mail/test/mozmill/shared-modules/*.js) $(MOZMILL_STAGE_SHARED)</span>
<a href="#l11.28"></a><span id="l11.28"> 	$(INSTALL) $(wildcard $(srcdir)/shared-modules/*.js) $(MOZMILL_STAGE_SHARED)</span>
<a href="#l11.29"></a><span id="l11.29"> </span>
<a href="#l11.30"></a><span id="l11.30"> mozmill: mozmill-stage</span>
<a href="#l11.31"></a><span id="l11.31"> 	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; unset MACOSX_DEPLOYMENT_TARGET &amp;&amp; \</span>
<a href="#l11.32"></a><span id="l11.32"> 	$(MOZMILLPYTHON) runtestlist.py --list=$(srcdir)/mozmilltests.list \</span>
<a href="#l11.33"></a><span id="l11.33"> 	--binary=$(MOZMILLPROGRAM) \</span>
<a href="#l11.34"></a><span id="l11.34"> 	--dir=$(abspath $(MOZMILLDIR))/stage \</span>
<a href="#l11.35"></a><span id="l11.35"> 	--symbols-path=$(ABS_DIST)/crashreporter-symbols \</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/timezones/Makefile.in</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/timezones/Makefile.in</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -1,20 +1,20 @@</span>
<a href="#l12.4"></a><span id="l12.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.5"></a><span id="l12.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.6"></a><span id="l12.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> XPI_PKGNAME = calendar-timezones-$(TIMEZONES_VERSION)</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-THUNDERBIRD_VERSION := $(shell cat $(topsrcdir)/mail/config/version.txt)</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-SEAMONKEY_VERSION := $(shell cat $(topsrcdir)/suite/config/version.txt)</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-CALENDAR_VERSION := $(shell $(PYTHON) $(topsrcdir)/calendar/lightning/build/makeversion.py $(word 1,$(MOZ_PKG_VERSION) $(THUNDERBIRD_VERSION)))</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+THUNDERBIRD_VERSION := $(shell cat $(commtopsrcdir)/mail/config/version.txt)</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+SEAMONKEY_VERSION := $(shell cat $(commtopsrcdir)/suite/config/version.txt)</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+CALENDAR_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/lightning/build/makeversion.py $(word 1,$(MOZ_PKG_VERSION) $(THUNDERBIRD_VERSION)))</span>
<a href="#l12.16"></a><span id="l12.16"> TIMEZONES_VERSION := $(shell $(PYTHON) $(srcdir)/version.py)</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-relativesrcdir = calendar/locales</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+relativesrcdir = $(commreltopsrcdir)/calendar/locales</span>
<a href="#l12.20"></a><span id="l12.20"> </span>
<a href="#l12.21"></a><span id="l12.21"> DEFINES += -DTHUNDERBIRD_VERSION=$(THUNDERBIRD_VERSION) \</span>
<a href="#l12.22"></a><span id="l12.22">            -DSEAMONKEY_VERSION=$(SEAMONKEY_VERSION) \</span>
<a href="#l12.23"></a><span id="l12.23">            -DCALENDAR_VERSION=$(CALENDAR_VERSION) \</span>
<a href="#l12.24"></a><span id="l12.24">            -DTIMEZONES_VERSION=$(TIMEZONES_VERSION) \</span>
<a href="#l12.25"></a><span id="l12.25">            $(NULL)</span>
<a href="#l12.26"></a><span id="l12.26"> </span>
<a href="#l12.27"></a><span id="l12.27"> libs-%:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/comm-confvars.sh</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,20 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+#!/bin/sh</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+if [[ &quot;$MOZ_BUILD_APP&quot; == *comm* ]]</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+then</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+  # we are building with comm/ as the subdirectory</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+  # $srcdir is the mozilla repo, comm is in the subdir</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+  moztopsrcdir=$srcdir</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+  commtopsrcdir=$srcdir/comm</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+  mozreltopsrcdir=.</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+  commreltopsrcdir=comm</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+else</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+  # we are building with mozilla/ as the subdirectory</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+  # $srcdir is still the mozilla repo, so use the parent for comm</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+  moztopsrcdir=$srcdir</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+  commtopsrcdir=$srcdir/..</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+  mozreltopsrcdir=mozilla</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+  commreltopsrcdir=.</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/im/Makefile.in</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/im/Makefile.in</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,25 +1,25 @@</span>
<a href="#l14.4"></a><span id="l14.4"> #</span>
<a href="#l14.5"></a><span id="l14.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.6"></a><span id="l14.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.7"></a><span id="l14.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l14.8"></a><span id="l14.8"> </span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12"> ifdef MAKENSISU</span>
<a href="#l14.13"></a><span id="l14.13"> # For Windows build the uninstaller during the application build since the</span>
<a href="#l14.14"></a><span id="l14.14"> # uninstaller is included with the application for mar file generation.</span>
<a href="#l14.15"></a><span id="l14.15"> libs::</span>
<a href="#l14.16"></a><span id="l14.16"> 	$(MAKE) -C installer/windows uninstaller</span>
<a href="#l14.17"></a><span id="l14.17"> endif</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20"> # As a fallout from bug 1247162, the sourcestamp in application.ini and</span>
<a href="#l14.21"></a><span id="l14.21"> # platform.ini are the same, which isn't a problem for Firefox, but</span>
<a href="#l14.22"></a><span id="l14.22"> # it's not right for anything else. So we correct platform.ini here.</span>
<a href="#l14.23"></a><span id="l14.23"> </span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-MOZ_REV=$(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; parent --template=&quot;{node}&quot; 2&gt;/dev/null)</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+MOZ_REV=$(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}&quot; 2&gt;/dev/null)</span>
<a href="#l14.26"></a><span id="l14.26"> </span>
<a href="#l14.27"></a><span id="l14.27"> libs:: $(DIST)/bin/platform.ini</span>
<a href="#l14.28"></a><span id="l14.28"> 	sed -e &quot;s/^\(SourceStamp=\).*/\1$(MOZ_REV)/&quot; $(DIST)/bin/platform.ini \</span>
<a href="#l14.29"></a><span id="l14.29"> 		&gt; $(DIST)/bin/platform.ini~</span>
<a href="#l14.30"></a><span id="l14.30"> 	mv -f $(DIST)/bin/platform.ini~ $(DIST)/bin/platform.ini</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">new file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- /dev/null</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ b/im/app-config.mk</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -0,0 +1,9 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineplus">+</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineplus">+ifeq ($(findstring comm,$(MOZ_BUILD_APP)),)</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+COMMDEPTH = $(DEPTH)</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineplus">+else</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+COMMDEPTH = $(DEPTH)/comm</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/im/app.mozbuild</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/im/app.mozbuild</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l16.4"></a><span id="l16.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.5"></a><span id="l16.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.6"></a><span id="l16.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8"> include('/toolkit/toolkit.mozbuild')</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> DIRS += [</span>
<a href="#l16.11"></a><span id="l16.11">     '/%s' % CONFIG['MOZ_BRANDING_DIRECTORY'],</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    '/chat',</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    '/%s/chat' % CONFIG['commreltopsrcdir']</span>
<a href="#l16.14"></a><span id="l16.14"> ]</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16"> # Ensure extensions are built after chat/ so purplexpcom can build.</span>
<a href="#l16.17"></a><span id="l16.17"> if CONFIG['MOZ_EXTENSIONS']:</span>
<a href="#l16.18"></a><span id="l16.18">     DIRS += ['/extensions']</span>
<a href="#l16.19"></a><span id="l16.19"> </span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-DIRS += ['/im']</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+DIRS += ['/%s/im' % CONFIG['commreltopsrcdir']]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/im/app/Makefile.in</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/im/app/Makefile.in</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -1,18 +1,18 @@</span>
<a href="#l17.4"></a><span id="l17.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l17.5"></a><span id="l17.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l17.6"></a><span id="l17.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8"> AB_CD = $(MOZ_UI_LOCALE)</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-GRE_MILESTONE = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-MOZ_BUILDID = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build BuildID)</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+GRE_MILESTONE = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+MOZ_BUILDID = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build BuildID)</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-LICENSE_TXT_FILE = $(topsrcdir)/im/LICENSE.txt</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+LICENSE_TXT_FILE = $(commtopsrcdir)/im/LICENSE.txt</span>
<a href="#l17.17"></a><span id="l17.17"> </span>
<a href="#l17.18"></a><span id="l17.18"> DEFINES += \</span>
<a href="#l17.19"></a><span id="l17.19">   -DINSTANTBIRD_ICO=\&quot;$(DIST)/branding/instantbird.ico\&quot; \</span>
<a href="#l17.20"></a><span id="l17.20">    $(NULL)</span>
<a href="#l17.21"></a><span id="l17.21"> </span>
<a href="#l17.22"></a><span id="l17.22"> # Build a binary bootstrapping with XRE_main</span>
<a href="#l17.23"></a><span id="l17.23"> </span>
<a href="#l17.24"></a><span id="l17.24"> ifndef MOZ_WINCONSOLE</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineat">@@ -22,53 +22,53 @@ else</span>
<a href="#l17.26"></a><span id="l17.26"> MOZ_WINCONSOLE = 0</span>
<a href="#l17.27"></a><span id="l17.27"> endif</span>
<a href="#l17.28"></a><span id="l17.28"> endif</span>
<a href="#l17.29"></a><span id="l17.29"> </span>
<a href="#l17.30"></a><span id="l17.30"> # This switches $(INSTALL) to copy mode, like $(SYSINSTALL), so things that</span>
<a href="#l17.31"></a><span id="l17.31"> # shouldn't get 755 perms need $(IFLAGS1) for either way of calling nsinstall.</span>
<a href="#l17.32"></a><span id="l17.32"> NSDISTMODE = copy</span>
<a href="#l17.33"></a><span id="l17.33"> </span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l17.36"></a><span id="l17.36"> </span>
<a href="#l17.37"></a><span id="l17.37"> # If we are trying to show an error dialog about the lack of SSE2 support,</span>
<a href="#l17.38"></a><span id="l17.38"> # make sure that code itself doesn't use SSE2.</span>
<a href="#l17.39"></a><span id="l17.39"> ifdef MOZ_LINUX_32_SSE2_STARTUP_ERROR</span>
<a href="#l17.40"></a><span id="l17.40"> CXXFLAGS := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXXFLAGS))</span>
<a href="#l17.41"></a><span id="l17.41"> CXX := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXX))</span>
<a href="#l17.42"></a><span id="l17.42"> CXXFLAGS += -mno-sse -mno-sse2 -mfpmath=387</span>
<a href="#l17.43"></a><span id="l17.43"> CXX += -march=pentiumpro</span>
<a href="#l17.44"></a><span id="l17.44"> endif</span>
<a href="#l17.45"></a><span id="l17.45"> </span>
<a href="#l17.46"></a><span id="l17.46"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l17.47"></a><span id="l17.47"> # png to ico converter. The function takes 5 arguments, in order: source png</span>
<a href="#l17.48"></a><span id="l17.48"> # file, left, top, size, output ico file.</span>
<a href="#l17.49"></a><span id="l17.49"> png2ico = $(PYTHON) $(srcdir)/png2ico.py $(1) $(2) $(3) $(4) $(5)</span>
<a href="#l17.50"></a><span id="l17.50"> </span>
<a href="#l17.51"></a><span id="l17.51"> # Extract the icons we care about embedding into the EXE</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">-available-16.ico: $(topsrcdir)/chat/themes/available-16.png $(srcdir)/png2ico.py</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">-	$(call png2ico,$(topsrcdir)/chat/themes/available-16.png,0,0,16,available-16.ico)</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineplus">+available-16.ico: $(commtopsrcdir)/chat/themes/available-16.png $(srcdir)/png2ico.py</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineplus">+	$(call png2ico,$(commtopsrcdir)/chat/themes/available-16.png,0,0,16,available-16.ico)</span>
<a href="#l17.56"></a><span id="l17.56"> </span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-away-16.ico: $(topsrcdir)/chat/themes/away-16.png $(srcdir)/png2ico.py</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-	$(call png2ico,$(topsrcdir)/chat/themes/away-16.png,0,0,16,away-16.ico)</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineplus">+away-16.ico: $(commtopsrcdir)/chat/themes/away-16.png $(srcdir)/png2ico.py</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineplus">+	$(call png2ico,$(commtopsrcdir)/chat/themes/away-16.png,0,0,16,away-16.ico)</span>
<a href="#l17.61"></a><span id="l17.61"> </span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-offline-16.ico: $(topsrcdir)/chat/themes/offline-16.png $(srcdir)/png2ico.py</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-	$(call png2ico,$(topsrcdir)/chat/themes/offline-16.png,0,0,16,offline-16.ico)</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineplus">+offline-16.ico: $(commtopsrcdir)/chat/themes/offline-16.png $(srcdir)/png2ico.py</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineplus">+	$(call png2ico,$(commtopsrcdir)/chat/themes/offline-16.png,0,0,16,offline-16.ico)</span>
<a href="#l17.66"></a><span id="l17.66"> </span>
<a href="#l17.67"></a><span id="l17.67"> embedded-icons:: available-16.ico away-16.ico offline-16.ico</span>
<a href="#l17.68"></a><span id="l17.68"> GARBAGE += available-16.ico away-16.ico offline-16.ico</span>
<a href="#l17.69"></a><span id="l17.69"> </span>
<a href="#l17.70"></a><span id="l17.70"> # Rebuild instantbird.exe if the manifest changes - it's included by splash.rc.</span>
<a href="#l17.71"></a><span id="l17.71"> # (this dependency should really be just for instantbird.exe, not other targets)</span>
<a href="#l17.72"></a><span id="l17.72"> # Note the manifest file exists in the tree, so we use the explicit filename</span>
<a href="#l17.73"></a><span id="l17.73"> # here.</span>
<a href="#l17.74"></a><span id="l17.74"> EXTRA_DEPS += instantbird.exe.manifest</span>
<a href="#l17.75"></a><span id="l17.75"> endif</span>
<a href="#l17.76"></a><span id="l17.76"> </span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l17.79"></a><span id="l17.79"> </span>
<a href="#l17.80"></a><span id="l17.80"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l17.81"></a><span id="l17.81"> </span>
<a href="#l17.82"></a><span id="l17.82"> $(RESFILE): embedded-icons</span>
<a href="#l17.83"></a><span id="l17.83"> </span>
<a href="#l17.84"></a><span id="l17.84"> endif</span>
<a href="#l17.85"></a><span id="l17.85"> </span>
<a href="#l17.86"></a><span id="l17.86"> ifneq ($(OS_ARCH),WINNT)</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineat">@@ -169,21 +169,21 @@ GARBAGE += module.ver</span>
<a href="#l17.88"></a><span id="l17.88"> libs:: $(srcdir)/profile/prefs.js</span>
<a href="#l17.89"></a><span id="l17.89"> 	$(INSTALL) $(IFLAGS1) $^ $(DIST)/bin/defaults/profile</span>
<a href="#l17.90"></a><span id="l17.90"> </span>
<a href="#l17.91"></a><span id="l17.91"> ifdef ENABLE_TESTS</span>
<a href="#l17.92"></a><span id="l17.92"> # XXX This is a hack to ensure that we get the right xpcshell.ini for our tests.</span>
<a href="#l17.93"></a><span id="l17.93"> # mozilla-central does this in testing/xpcshell-tests which means that it is very</span>
<a href="#l17.94"></a><span id="l17.94"> # hard for anyone to specify anything else.</span>
<a href="#l17.95"></a><span id="l17.95"> libs::</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineminus">-	$(INSTALL) $(IFLAGS1) $(topsrcdir)/im/test/xpcshell.ini $(DEPTH)/_tests/xpcshell</span>
<a href="#l17.97"></a><span id="l17.97" class="difflineminus">-	cp $(topsrcdir)/im/test/xpcshell.ini $(DEPTH)/_tests/xpcshell/all-test-dirs.list</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(commtopsrcdir)/im/test/xpcshell.ini $(DEPTH)/_tests/xpcshell</span>
<a href="#l17.99"></a><span id="l17.99" class="difflineplus">+	cp $(commtopsrcdir)/im/test/xpcshell.ini $(DEPTH)/_tests/xpcshell/all-test-dirs.list</span>
<a href="#l17.100"></a><span id="l17.100"> endif</span>
<a href="#l17.101"></a><span id="l17.101"> </span>
<a href="#l17.102"></a><span id="l17.102" class="difflineminus">-libs:: $(topsrcdir)/mail/app/blocklist.xml</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineplus">+libs:: $(commtopsrcdir)/mail/app/blocklist.xml</span>
<a href="#l17.104"></a><span id="l17.104"> 	$(INSTALL) $(IFLAGS1) $^ $(DIST)/bin</span>
<a href="#l17.105"></a><span id="l17.105"> </span>
<a href="#l17.106"></a><span id="l17.106"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l17.107"></a><span id="l17.107"> </span>
<a href="#l17.108"></a><span id="l17.108"> MAC_APP_NAME = $(MOZ_APP_DISPLAYNAME)</span>
<a href="#l17.109"></a><span id="l17.109"> </span>
<a href="#l17.110"></a><span id="l17.110"> ifdef MOZ_DEBUG</span>
<a href="#l17.111"></a><span id="l17.111"> MAC_APP_NAME := $(MAC_APP_NAME)Debug</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/im/app/moz.build</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/im/app/moz.build</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -5,36 +5,36 @@</span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5"> DIRS += ['profile']</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7"> GeckoProgram(CONFIG['MOZ_APP_NAME'])</span>
<a href="#l18.8"></a><span id="l18.8"> USE_LIBS += ['mozglue']</span>
<a href="#l18.9"></a><span id="l18.9"> SOURCES += ['nsMain.cpp']</span>
<a href="#l18.10"></a><span id="l18.10"> LOCAL_INCLUDES += [</span>
<a href="#l18.11"></a><span id="l18.11">     '!/build',</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    '/mozilla/toolkit/xre',</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-    '/mozilla/xpcom/base',</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-    '/mozilla/xpcom/build',</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+    '/%s/toolkit/xre' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+    '/%s/xpcom/base' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+    '/%s/xpcom/build' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.18"></a><span id="l18.18"> ]</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20"> if CONFIG['LIBFUZZER']:</span>
<a href="#l18.21"></a><span id="l18.21">     USE_LIBS += [ 'fuzzer' ]</span>
<a href="#l18.22"></a><span id="l18.22">     LOCAL_INCLUDES += [</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-        '/mozilla/tools/fuzzing/libfuzzer',</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineplus">+        '/%s/tools/fuzzing/libfuzzer' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.25"></a><span id="l18.25">     ]</span>
<a href="#l18.26"></a><span id="l18.26"> </span>
<a href="#l18.27"></a><span id="l18.27"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l18.28"></a><span id="l18.28">     RCINCLUDE = 'splash.rc'</span>
<a href="#l18.29"></a><span id="l18.29">     DEFINES['MOZ_INSTANTBIRD'] = True</span>
<a href="#l18.30"></a><span id="l18.30"> </span>
<a href="#l18.31"></a><span id="l18.31"> if CONFIG['MOZ_SANDBOX'] and CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l18.32"></a><span id="l18.32">     # For sandbox includes and the include dependencies those have</span>
<a href="#l18.33"></a><span id="l18.33">     LOCAL_INCLUDES += [</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-        '/mozilla/security/sandbox/chromium',</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineminus">-        '/mozilla/security/sandbox/chromium-shim',</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineplus">+        '/%s/security/sandbox/chromium' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineplus">+        '/%s/security/sandbox/chromium-shim' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.38"></a><span id="l18.38">     ]</span>
<a href="#l18.39"></a><span id="l18.39"> </span>
<a href="#l18.40"></a><span id="l18.40">     USE_LIBS += [</span>
<a href="#l18.41"></a><span id="l18.41">         'sandbox_s',</span>
<a href="#l18.42"></a><span id="l18.42">     ]</span>
<a href="#l18.43"></a><span id="l18.43"> </span>
<a href="#l18.44"></a><span id="l18.44">     DELAYLOAD_DLLS += [</span>
<a href="#l18.45"></a><span id="l18.45">         'winmm.dll',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/im/branding/halloween/Makefile.in</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/im/branding/halloween/Makefile.in</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l19.4"></a><span id="l19.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l19.5"></a><span id="l19.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.6"></a><span id="l19.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> # Branding Makefile for nightlies/unofficial branding</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l19.12"></a><span id="l19.12"> </span>
<a href="#l19.13"></a><span id="l19.13"> export::</span>
<a href="#l19.14"></a><span id="l19.14"> 	$(NSINSTALL) -D $(DIST)/branding</span>
<a href="#l19.15"></a><span id="l19.15"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l19.16"></a><span id="l19.16"> 	cp $(srcdir)/instantbird.ico   $(DIST)/branding/instantbird.ico</span>
<a href="#l19.17"></a><span id="l19.17"> 	cp $(srcdir)/instantbird.ico   $(DIST)/branding/app.ico</span>
<a href="#l19.18"></a><span id="l19.18"> 	cp $(srcdir)/branding.nsi      $(DIST)/branding/branding.nsi</span>
<a href="#l19.19"></a><span id="l19.19"> 	cp $(srcdir)/../nightly/wizHeader.bmp     $(DIST)/branding/wizHeader.bmp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/im/branding/nightly/Makefile.in</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/im/branding/nightly/Makefile.in</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l20.4"></a><span id="l20.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l20.5"></a><span id="l20.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l20.6"></a><span id="l20.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l20.7"></a><span id="l20.7"> </span>
<a href="#l20.8"></a><span id="l20.8"> # Branding Makefile for nightlies/unofficial branding</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l20.12"></a><span id="l20.12"> </span>
<a href="#l20.13"></a><span id="l20.13"> export::</span>
<a href="#l20.14"></a><span id="l20.14"> 	$(NSINSTALL) -D $(DIST)/branding</span>
<a href="#l20.15"></a><span id="l20.15"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l20.16"></a><span id="l20.16"> 	cp $(srcdir)/instantbird.ico   $(DIST)/branding/instantbird.ico</span>
<a href="#l20.17"></a><span id="l20.17"> 	cp $(srcdir)/instantbird.ico   $(DIST)/branding/app.ico</span>
<a href="#l20.18"></a><span id="l20.18"> 	cp $(srcdir)/branding.nsi      $(DIST)/branding/branding.nsi</span>
<a href="#l20.19"></a><span id="l20.19"> 	cp $(srcdir)/wizHeader.bmp     $(DIST)/branding/wizHeader.bmp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/im/build.mk</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/im/build.mk</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1,19 +1,19 @@</span>
<a href="#l21.4"></a><span id="l21.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l21.5"></a><span id="l21.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l21.6"></a><span id="l21.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> ifndef COMM_BUILD</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10"> ifndef MOZILLA_DIR</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">-MOZILLA_DIR = $(topsrcdir)</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+MOZILLA_DIR = $(moztopsrcdir)</span>
<a href="#l21.13"></a><span id="l21.13"> endif</span>
<a href="#l21.14"></a><span id="l21.14"> # included to get $(BUILDID), which needs $(MOZILLA_DIR)</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-include $(topsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18"> BUILD_YEAR = $(shell echo $(BUILDID) | cut -c 1-4)</span>
<a href="#l21.19"></a><span id="l21.19"> BUILD_MONTH = $(shell echo $(BUILDID) | cut -c 5-6)</span>
<a href="#l21.20"></a><span id="l21.20"> BUILD_DAY = $(shell echo $(BUILDID) | cut -c 7-8)</span>
<a href="#l21.21"></a><span id="l21.21"> BUILD_HOUR = $(shell echo $(BUILDID) | cut -c 9-10)</span>
<a href="#l21.22"></a><span id="l21.22"> </span>
<a href="#l21.23"></a><span id="l21.23"> ifndef PKG_SUFFIX</span>
<a href="#l21.24"></a><span id="l21.24"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineat">@@ -66,17 +66,17 @@ FORCE_UPDATE := components/components.li</span>
<a href="#l21.26"></a><span id="l21.26"> </span>
<a href="#l21.27"></a><span id="l21.27"> #If there's a symbol server:</span>
<a href="#l21.28"></a><span id="l21.28"> # SYMBOL_SERVER_HOST=symbols.instantbird.org</span>
<a href="#l21.29"></a><span id="l21.29"> # SYMBOL_SERVER_PATH=/www/instantbird/socorro/symbols</span>
<a href="#l21.30"></a><span id="l21.30"> # SYMBOL_SERVER_PORT=22</span>
<a href="#l21.31"></a><span id="l21.31"> # SYMBOL_SERVER_USER=buildbot</span>
<a href="#l21.32"></a><span id="l21.32"> </span>
<a href="#l21.33"></a><span id="l21.33"> distribution:</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">-	@$(MAKE) MAKE_SYM_STORE_PATH=$(MAKE_SYM_STORE_PATH) SYM_STORE_SOURCE_DIRS='$(topsrcdir)/mozilla/extensions/purple $(topsrcdir)/mozilla $(topsrcdir)' buildsymbols</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineplus">+	@$(MAKE) MAKE_SYM_STORE_PATH=$(MAKE_SYM_STORE_PATH) SYM_STORE_SOURCE_DIRS='$(moztopsrcdir)/extensions/purple $(moztopsrcdir) $(commtopsrcdir)' buildsymbols</span>
<a href="#l21.36"></a><span id="l21.36"> 	@$(MAKE) -C im/installer libs installer</span>
<a href="#l21.37"></a><span id="l21.37"> ifdef ENABLE_TESTS</span>
<a href="#l21.38"></a><span id="l21.38"> 	$(MAKE) xpcshell-tests</span>
<a href="#l21.39"></a><span id="l21.39"> endif</span>
<a href="#l21.40"></a><span id="l21.40"> 	$(MAKE) -C tools/update-packaging complete-patch PKG_INST_PATH=</span>
<a href="#l21.41"></a><span id="l21.41"> ifdef L10NBASEDIR</span>
<a href="#l21.42"></a><span id="l21.42"> 	$(foreach locale,$(SHIPPED_LOCALES),$(MAKE) -C im/locales/ repack-$(locale) LOCALE_MERGEDIR=mergedir MOZ_MAKE_COMPLETE_MAR=1 ;)</span>
<a href="#l21.43"></a><span id="l21.43"> endif</span>
<a href="#l21.44"></a><span id="l21.44" class="difflineat">@@ -86,29 +86,29 @@ ifdef LIST_PREVIOUS_MAR_CMD</span>
<a href="#l21.45"></a><span id="l21.45"> 	touch $(PATCH_FILE)</span>
<a href="#l21.46"></a><span id="l21.46"> 	$(foreach marline,$(shell $(LIST_PREVIOUS_MAR_CMD)),\</span>
<a href="#l21.47"></a><span id="l21.47"> 	  $(foreach MAR_FILE_SRC,$(shell echo $(marline) |cut -d : -f 3),\</span>
<a href="#l21.48"></a><span id="l21.48"> 	    $(foreach AB_CD,$(filter $(shell echo $(marline) |cut -d : -f 2),$(AB_CD) $(SHIPPED_LOCALES)),\</span>
<a href="#l21.49"></a><span id="l21.49"> 	      $(foreach buildid,$(shell echo $(marline) |cut -d : -f 1),\</span>
<a href="#l21.50"></a><span id="l21.50"> 		mkdir -p $(PREVIOUS_MAR_DIR)/$(buildid) ; \</span>
<a href="#l21.51"></a><span id="l21.51"> 	        $(DOWNLOAD_MAR_CMD) ; \</span>
<a href="#l21.52"></a><span id="l21.52"> 		echo &quot;$(MAR_FILE_DEST),$(DIST)/$(COMPLETE_MAR),$(DIST)/$(PKG_UPDATE_PATH)$(PKG_UPDATE_BASENAME).partial.from-$(buildid).mar,$(FORCE_UPDATE)&quot; &gt;&gt; $(PATCH_FILE) ;))))</span>
<a href="#l21.53"></a><span id="l21.53" class="difflineminus">-	PATH=&quot;$(realpath $(DIST)/host/bin):$(PATH)&quot; $(PYTHON) $(topsrcdir)/tools/update-packaging/make_incremental_updates.py -f $(PATCH_FILE)</span>
<a href="#l21.54"></a><span id="l21.54" class="difflineplus">+	PATH=&quot;$(realpath $(DIST)/host/bin):$(PATH)&quot; $(PYTHON) $(moztopsrcdir)/tools/update-packaging/make_incremental_updates.py -f $(PATCH_FILE)</span>
<a href="#l21.55"></a><span id="l21.55"> endif</span>
<a href="#l21.56"></a><span id="l21.56"> ifdef SYMBOL_SERVER_HOST</span>
<a href="#l21.57"></a><span id="l21.57"> 	@$(MAKE) uploadsymbols</span>
<a href="#l21.58"></a><span id="l21.58"> endif</span>
<a href="#l21.59"></a><span id="l21.59"> ifdef UPLOAD_CMD</span>
<a href="#l21.60"></a><span id="l21.60"> 	$(MAKE) upload</span>
<a href="#l21.61"></a><span id="l21.61"> endif</span>
<a href="#l21.62"></a><span id="l21.62"> </span>
<a href="#l21.63"></a><span id="l21.63"> installer:</span>
<a href="#l21.64"></a><span id="l21.64"> 	@$(MAKE) -C im/installer installer</span>
<a href="#l21.65"></a><span id="l21.65"> </span>
<a href="#l21.66"></a><span id="l21.66" class="difflineminus">-SHIPPED_LOCALES_FILE = $(topsrcdir)/im/locales/shipped-locales</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineplus">+SHIPPED_LOCALES_FILE = $(commtopsrcdir)/im/locales/shipped-locales</span>
<a href="#l21.68"></a><span id="l21.68"> SHIPPED_LOCALES := $(shell if test -f $(SHIPPED_LOCALES_FILE); then cat $(SHIPPED_LOCALES_FILE); fi)</span>
<a href="#l21.69"></a><span id="l21.69"> </span>
<a href="#l21.70"></a><span id="l21.70"> package:</span>
<a href="#l21.71"></a><span id="l21.71"> 	@$(MAKE) -C im/installer</span>
<a href="#l21.72"></a><span id="l21.72"> </span>
<a href="#l21.73"></a><span id="l21.73"> install::</span>
<a href="#l21.74"></a><span id="l21.74"> 	@$(MAKE) -C im/installer install</span>
<a href="#l21.75"></a><span id="l21.75"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/im/configure.in</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/im/configure.in</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -2,16 +2,22 @@ dnl -*- Mode: Autoconf; tab-width: 2; in</span>
<a href="#l22.4"></a><span id="l22.4"> dnl vi: set tabstop=2 shiftwidth=2 expandtab:</span>
<a href="#l22.5"></a><span id="l22.5"> dnl This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l22.6"></a><span id="l22.6"> dnl License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.7"></a><span id="l22.7"> dnl file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9"> dnl Things we need to carry from confvars.sh</span>
<a href="#l22.10"></a><span id="l22.10"> AC_SUBST(INSTANTBIRD_VERSION)</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+dnl More things we need to carry from confvars.sh</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+AC_SUBST(moztopsrcdir)</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+AC_SUBST(commtopsrcdir)</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+AC_SUBST(mozreltopsrcdir)</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+AC_SUBST(commreltopsrcdir)</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+</span>
<a href="#l22.18"></a><span id="l22.18"> if test `echo &quot;$MOZ_EXTENSIONS&quot; | grep -c purple` -ne 0; then</span>
<a href="#l22.19"></a><span id="l22.19">     MOZ_PURPLE=1</span>
<a href="#l22.20"></a><span id="l22.20">     AC_SUBST(MOZ_PURPLE)</span>
<a href="#l22.21"></a><span id="l22.21"> fi</span>
<a href="#l22.22"></a><span id="l22.22"> </span>
<a href="#l22.23"></a><span id="l22.23"> if test -n &quot;$MOZ_PURPLE&quot;; then</span>
<a href="#l22.24"></a><span id="l22.24">   tmpscript=`$PYTHON -c 'import os, tempfile; print tempfile.mktemp(prefix=&quot;subscript.&quot;).replace(os.sep, &quot;/&quot;)'` || exit 1</span>
<a href="#l22.25"></a><span id="l22.25">   m4 &quot;${srcdir}/build/autoconf/subconfigure.m4&quot; \</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/im/confvars.sh</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/im/confvars.sh</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,27 +1,30 @@</span>
<a href="#l23.4"></a><span id="l23.4"> #! /bin/sh</span>
<a href="#l23.5"></a><span id="l23.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.6"></a><span id="l23.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.7"></a><span id="l23.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9" class="difflineplus">+source ${_topsrcdir}/$MOZ_BUILD_APP/../comm-confvars.sh</span>
<a href="#l23.10"></a><span id="l23.10" class="difflineplus">+</span>
<a href="#l23.11"></a><span id="l23.11"> MOZ_APP_BASENAME=Instantbird</span>
<a href="#l23.12"></a><span id="l23.12"> MOZ_APP_NAME=instantbird</span>
<a href="#l23.13"></a><span id="l23.13"> MOZ_APP_STATIC_INI=1</span>
<a href="#l23.14"></a><span id="l23.14"> MOZ_XUL_APP=1</span>
<a href="#l23.15"></a><span id="l23.15"> MOZ_ENABLE_LIBXUL=1</span>
<a href="#l23.16"></a><span id="l23.16"> MOZ_DISABLE_EXPORT_JS=1</span>
<a href="#l23.17"></a><span id="l23.17"> MOZ_UPDATER=1</span>
<a href="#l23.18"></a><span id="l23.18"> MOZ_MATHML=</span>
<a href="#l23.19"></a><span id="l23.19"> MOZ_BINARY_EXTENSIONS=1</span>
<a href="#l23.20"></a><span id="l23.20"> </span>
<a href="#l23.21"></a><span id="l23.21"> MOZ_APP_VERSION_TXT=${_topsrcdir}/$MOZ_BUILD_APP/config/version.txt</span>
<a href="#l23.22"></a><span id="l23.22"> MOZ_APP_VERSION=`cat $MOZ_APP_VERSION_TXT`</span>
<a href="#l23.23"></a><span id="l23.23"> INSTANTBIRD_VERSION=$MOZ_APP_VERSION</span>
<a href="#l23.24"></a><span id="l23.24"> </span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-MOZ_BRANDING_DIRECTORY=im/branding/nightly</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-MOZ_OFFICIAL_BRANDING_DIRECTORY=other-licenses/branding/instantbird</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+MOZ_BRANDING_DIRECTORY=$commreltopsrcdir/im/branding/nightly</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+MOZ_OFFICIAL_BRANDING_DIRECTORY=$commreltopsrcdir/other-licenses/branding/instantbird</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineplus">+</span>
<a href="#l23.30"></a><span id="l23.30"> MOZ_APP_ID={33cb9019-c295-46dd-be21-8c4936574bee}</span>
<a href="#l23.31"></a><span id="l23.31"> # Enable generational GC on desktop.</span>
<a href="#l23.32"></a><span id="l23.32"> JSGC_GENERATIONAL=1</span>
<a href="#l23.33"></a><span id="l23.33"> NSS_EXTRA_SYMBOLS_FILE=../../chat/nss-purple.symbols</span>
<a href="#l23.34"></a><span id="l23.34"> </span>
<a href="#l23.35"></a><span id="l23.35"> MOZ_DEVTOOLS=all</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/im/content/jar.mn</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/im/content/jar.mn</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -1,12 +1,14 @@</span>
<a href="#l24.4"></a><span id="l24.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l24.5"></a><span id="l24.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l24.6"></a><span id="l24.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8" class="difflineplus">+#filter substitution</span>
<a href="#l24.9"></a><span id="l24.9" class="difflineplus">+</span>
<a href="#l24.10"></a><span id="l24.10"> instantbird.jar:</span>
<a href="#l24.11"></a><span id="l24.11"> % content instantbird %content/instantbird/</span>
<a href="#l24.12"></a><span id="l24.12"> #ifdef XP_MACOSX</span>
<a href="#l24.13"></a><span id="l24.13"> % overlay chrome://global/content/console.xul chrome://instantbird/content/jsConsoleOverlay.xul</span>
<a href="#l24.14"></a><span id="l24.14"> % overlay chrome://mozapps/content/update/updates.xul chrome://instantbird/content/softwareUpdateOverlay.xul</span>
<a href="#l24.15"></a><span id="l24.15"> #endif</span>
<a href="#l24.16"></a><span id="l24.16"> 	content/instantbird/aboutDialog.css</span>
<a href="#l24.17"></a><span id="l24.17"> *	content/instantbird/aboutDialog.xul</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineat">@@ -92,17 +94,17 @@ instantbird.jar:</span>
<a href="#l24.19"></a><span id="l24.19"> 	content/instantbird/preferences/themes.js               (preferences/themes.js)</span>
<a href="#l24.20"></a><span id="l24.20"> 	content/instantbird/preferences/tabs.xul                (preferences/tabs.xul)</span>
<a href="#l24.21"></a><span id="l24.21"> 	content/instantbird/preferences/tabs.js                 (preferences/tabs.js)</span>
<a href="#l24.22"></a><span id="l24.22"> 	content/instantbird/preferences/messagestyle.js	        (preferences/messagestyle.js)</span>
<a href="#l24.23"></a><span id="l24.23"> 	content/instantbird/preferences/smileys.js		(preferences/smileys.js)</span>
<a href="#l24.24"></a><span id="l24.24"> 	content/instantbird/preferences/smiley.css		(preferences/smiley.css)</span>
<a href="#l24.25"></a><span id="l24.25"> 	content/instantbird/preferences/smiley.xml		(preferences/smiley.xml)</span>
<a href="#l24.26"></a><span id="l24.26"> # override the toolkit license.html file</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineminus">-* 	content/instantbird/license.html                        (/mozilla/toolkit/content/license.html)</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineplus">+* 	content/instantbird/license.html                        (/@mozreltopsrcdir@/toolkit/content/license.html)</span>
<a href="#l24.29"></a><span id="l24.29"> % override chrome://global/content/license.html chrome://instantbird/content/license.html</span>
<a href="#l24.30"></a><span id="l24.30"> </span>
<a href="#l24.31"></a><span id="l24.31"> toolkit.jar:</span>
<a href="#l24.32"></a><span id="l24.32"> # toolkit dropped nsDragAndDrop.js in bug 1162050, ship a copy until we can remove it.</span>
<a href="#l24.33"></a><span id="l24.33"> 	content/global/nsDragAndDrop.js 			(../../mail/base/content/nsDragAndDrop.js)</span>
<a href="#l24.34"></a><span id="l24.34"> </span>
<a href="#l24.35"></a><span id="l24.35"> #ifdef DEBUG</span>
<a href="#l24.36"></a><span id="l24.36"> debug.jar:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/im/content/moz.build</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/im/content/moz.build</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1,18 +1,19 @@</span>
<a href="#l25.4"></a><span id="l25.4"> # vim: set filetype=python:</span>
<a href="#l25.5"></a><span id="l25.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l25.6"></a><span id="l25.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l25.7"></a><span id="l25.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l25.8"></a><span id="l25.8"> </span>
<a href="#l25.9"></a><span id="l25.9"> JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11" class="difflineminus">-# defines used for preference window files</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-for var in ('MOZ_APP_NAME', 'MOZ_MACBUNDLE_NAME'):</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+# defines used for preference window files and license</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+for var in ('MOZ_APP_NAME', 'MOZ_MACBUNDLE_NAME', 'mozreltopsrcdir'):</span>
<a href="#l25.15"></a><span id="l25.15">     DEFINES[var] = CONFIG[var]</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17"> #if CONFIG['MOZ_WIDGET_TOOLKIT'] in ('windows', 'gtk2', 'gtk3', 'mac', 'cocoa'):</span>
<a href="#l25.18"></a><span id="l25.18"> #    DEFINES['HAVE_SHELL_SERVICE'] = 1</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20"> if CONFIG['MOZ_UPDATER']:</span>
<a href="#l25.21"></a><span id="l25.21">     DEFINES['MOZ_UPDATER'] = 1</span>
<a href="#l25.22"></a><span id="l25.22"> </span>
<a href="#l25.23"></a><span id="l25.23"> DEFINES['APP_LICENSE_BLOCK'] = '%s/overrides/app-license.html' % SRCDIR</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/im/installer/Makefile.in</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/im/installer/Makefile.in</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1,27 +1,27 @@</span>
<a href="#l26.4"></a><span id="l26.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l26.5"></a><span id="l26.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l26.6"></a><span id="l26.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l26.7"></a><span id="l26.7"> </span>
<a href="#l26.8"></a><span id="l26.8"> STANDALONE_MAKEFILE := 1</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l26.12"></a><span id="l26.12"> </span>
<a href="#l26.13"></a><span id="l26.13"> MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in</span>
<a href="#l26.14"></a><span id="l26.14"> </span>
<a href="#l26.15"></a><span id="l26.15"> MOZ_PKG_MANIFEST_P = $(srcdir)/package-manifest.in</span>
<a href="#l26.16"></a><span id="l26.16"> # Some files have been already bundled with xulrunner</span>
<a href="#l26.17"></a><span id="l26.17"> ifndef SYSTEM_LIBXUL</span>
<a href="#l26.18"></a><span id="l26.18"> MOZ_PKG_FATAL_WARNINGS = 1</span>
<a href="#l26.19"></a><span id="l26.19"> endif</span>
<a href="#l26.20"></a><span id="l26.20"> MOZ_PKG_DUPEFLAGS = \</span>
<a href="#l26.21"></a><span id="l26.21"> 	-f $(srcdir)/allowed-dupes.mn \</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineminus">-	-f $(topsrcdir)/mail/installer/allowed-dupes.mn \</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineminus">-	-f $(MOZILLA_DIR)/browser/installer/allowed-dupes.mn \</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineplus">+	-f $(commtopsrcdir)/mail/installer/allowed-dupes.mn \</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+	-f $(moztopsrcdir)/browser/installer/allowed-dupes.mn \</span>
<a href="#l26.26"></a><span id="l26.26"> 	$(NULL)</span>
<a href="#l26.27"></a><span id="l26.27"> </span>
<a href="#l26.28"></a><span id="l26.28"> MOZ_NONLOCALIZED_PKG_LIST = \</span>
<a href="#l26.29"></a><span id="l26.29"> 	xpcom \</span>
<a href="#l26.30"></a><span id="l26.30"> 	im \</span>
<a href="#l26.31"></a><span id="l26.31"> 	$(NULL)</span>
<a href="#l26.32"></a><span id="l26.32"> </span>
<a href="#l26.33"></a><span id="l26.33"> MOZ_LOCALIZED_PKG_LIST = $(AB_CD)</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineat">@@ -113,18 +113,18 @@ MOZ_PKG_MAC_BACKGROUND=branding/backgrou</span>
<a href="#l26.35"></a><span id="l26.35"> MOZ_PKG_MAC_ICON=branding/disk.icns</span>
<a href="#l26.36"></a><span id="l26.36"> MOZ_PKG_MAC_EXTRA=--symlink &quot;/Applications:/ &quot;</span>
<a href="#l26.37"></a><span id="l26.37"> endif</span>
<a href="#l26.38"></a><span id="l26.38"> </span>
<a href="#l26.39"></a><span id="l26.39"> NON_OMNIJAR_FILES =</span>
<a href="#l26.40"></a><span id="l26.40"> </span>
<a href="#l26.41"></a><span id="l26.41"> GENERATE_CACHE=1</span>
<a href="#l26.42"></a><span id="l26.42"> </span>
<a href="#l26.43"></a><span id="l26.43" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/signing.mk</span>
<a href="#l26.44"></a><span id="l26.44" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/packager.mk</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/signing.mk</span>
<a href="#l26.46"></a><span id="l26.46" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/packager.mk</span>
<a href="#l26.47"></a><span id="l26.47"> </span>
<a href="#l26.48"></a><span id="l26.48"> ifeq (bundle, $(MOZ_FS_LAYOUT))</span>
<a href="#l26.49"></a><span id="l26.49"> BINPATH = $(_BINPATH)</span>
<a href="#l26.50"></a><span id="l26.50"> DEFINES += -DAPPNAME=$(_APPNAME)</span>
<a href="#l26.51"></a><span id="l26.51"> else</span>
<a href="#l26.52"></a><span id="l26.52"> # Every other platform just winds up in dist/bin</span>
<a href="#l26.53"></a><span id="l26.53"> BINPATH = bin</span>
<a href="#l26.54"></a><span id="l26.54"> endif</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineat">@@ -184,12 +184,12 @@ ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l26.56"></a><span id="l26.56"> endif</span>
<a href="#l26.57"></a><span id="l26.57"> </span>
<a href="#l26.58"></a><span id="l26.58"> installer::</span>
<a href="#l26.59"></a><span id="l26.59"> ifdef INSTALLER_DIR</span>
<a href="#l26.60"></a><span id="l26.60"> 	$(MAKE) -C $(INSTALLER_DIR)</span>
<a href="#l26.61"></a><span id="l26.61"> endif</span>
<a href="#l26.62"></a><span id="l26.62"> </span>
<a href="#l26.63"></a><span id="l26.63"> # The comm-* source stamp is already there.</span>
<a href="#l26.64"></a><span id="l26.64" class="difflineminus">-PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; parent --template=&quot;{node}\n&quot; 2&gt;/dev/null))</span>
<a href="#l26.65"></a><span id="l26.65" class="difflineminus">-PLATFORM_SOURCE_REPO = $(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/https:/&quot;)</span>
<a href="#l26.66"></a><span id="l26.66" class="difflineplus">+PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}\n&quot; 2&gt;/dev/null))</span>
<a href="#l26.67"></a><span id="l26.67" class="difflineplus">+PLATFORM_SOURCE_REPO = $(shell hg -R &quot;$(moztopsrcdir)&quot; showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/https:/&quot;)</span>
<a href="#l26.68"></a><span id="l26.68"> make-sourcestamp-file::</span>
<a href="#l26.69"></a><span id="l26.69"> 	@echo &quot;$(PLATFORM_SOURCE_REPO)/rev/$(PLATFORM_SOURCE_STAMP)&quot; &gt;&gt; $(MOZ_SOURCESTAMP_FILE)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/im/installer/windows/Makefile.in</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/im/installer/windows/Makefile.in</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -1,19 +1,19 @@</span>
<a href="#l27.4"></a><span id="l27.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l27.5"></a><span id="l27.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l27.6"></a><span id="l27.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l27.9"></a><span id="l27.9" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11"> PKG_INST_PATH =</span>
<a href="#l27.12"></a><span id="l27.12"> CONFIG_DIR = instgen</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-SFX_MODULE = $(topsrcdir)/other-licenses/7zstub/instantbird/7zSD.sfx</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineplus">+SFX_MODULE = $(commtopsrcdir)/other-licenses/7zstub/instantbird/7zSD.sfx</span>
<a href="#l27.15"></a><span id="l27.15"> DEFINES += -DMOZ_APP_VERSION=$(MOZ_APP_VERSION)</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-PRE_RELEASE_SUFFIX := $(shell $(PYTHON) $(topsrcdir)/mozilla/config/printprereleasesuffix.py $(MOZ_APP_VERSION))</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+PRE_RELEASE_SUFFIX := $(shell $(PYTHON) $(moztopsrcdir)/config/printprereleasesuffix.py $(MOZ_APP_VERSION))</span>
<a href="#l27.18"></a><span id="l27.18"> DEFINES += -DPRE_RELEASE_SUFFIX=&quot;$(PRE_RELEASE_SUFFIX)&quot;</span>
<a href="#l27.19"></a><span id="l27.19"> </span>
<a href="#l27.20"></a><span id="l27.20"> ifdef MOZ_UPDATER</span>
<a href="#l27.21"></a><span id="l27.21"> DEFINES += -DMOZ_UPDATER=1</span>
<a href="#l27.22"></a><span id="l27.22"> endif</span>
<a href="#l27.23"></a><span id="l27.23"> </span>
<a href="#l27.24"></a><span id="l27.24"> INSTALLER_FILES = \</span>
<a href="#l27.25"></a><span id="l27.25"> 	app.tag \</span>
<a href="#l27.26"></a><span id="l27.26" class="difflineat">@@ -30,39 +30,39 @@ BRANDING_FILES = \</span>
<a href="#l27.27"></a><span id="l27.27"> 	$(NULL)</span>
<a href="#l27.28"></a><span id="l27.28"> </span>
<a href="#l27.29"></a><span id="l27.29"> DEFINES += \</span>
<a href="#l27.30"></a><span id="l27.30"> 	-DMOZ_APP_NAME=$(MOZ_APP_NAME) \</span>
<a href="#l27.31"></a><span id="l27.31"> 	-DMOZ_APP_DISPLAYNAME=${MOZ_APP_DISPLAYNAME} \</span>
<a href="#l27.32"></a><span id="l27.32"> 	-DMOZILLA_VERSION=${MOZILLA_VERSION} \</span>
<a href="#l27.33"></a><span id="l27.33"> 	$(NULL)</span>
<a href="#l27.34"></a><span id="l27.34"> </span>
<a href="#l27.35"></a><span id="l27.35" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l27.36"></a><span id="l27.36" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l27.37"></a><span id="l27.37"> </span>
<a href="#l27.38"></a><span id="l27.38"> OVERRIDE_DEFAULT_GOAL := installer</span>
<a href="#l27.39"></a><span id="l27.39"> installer::</span>
<a href="#l27.40"></a><span id="l27.40"> 	$(MAKE) -C .. installer-stage</span>
<a href="#l27.41"></a><span id="l27.41"> 	$(MAKE) $(CONFIG_DIR)/setup.exe</span>
<a href="#l27.42"></a><span id="l27.42"> </span>
<a href="#l27.43"></a><span id="l27.43"> # For building the uninstaller during the application build so it can be</span>
<a href="#l27.44"></a><span id="l27.44"> # included for mar file generation.</span>
<a href="#l27.45"></a><span id="l27.45"> uninstaller::</span>
<a href="#l27.46"></a><span id="l27.46"> 	$(RM) -rf $(CONFIG_DIR) &amp;&amp; mkdir $(CONFIG_DIR)</span>
<a href="#l27.47"></a><span id="l27.47"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l27.48"></a><span id="l27.48"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l27.49"></a><span id="l27.49"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l27.50"></a><span id="l27.50"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l27.52"></a><span id="l27.52" class="difflineminus">-          --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l27.53"></a><span id="l27.53" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l27.54"></a><span id="l27.54" class="difflineplus">+          --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l27.55"></a><span id="l27.55"> 	  $(call EXPAND_LOCALE_SRCDIR,im/locales)/installer $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l27.56"></a><span id="l27.56"> </span>
<a href="#l27.57"></a><span id="l27.57"> $(CONFIG_DIR)/setup.exe::</span>
<a href="#l27.58"></a><span id="l27.58"> 	$(RM) -rf $(CONFIG_DIR) &amp;&amp; mkdir $(CONFIG_DIR)</span>
<a href="#l27.59"></a><span id="l27.59"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l27.60"></a><span id="l27.60"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l27.61"></a><span id="l27.61"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l27.62"></a><span id="l27.62"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l27.63"></a><span id="l27.63" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineminus">-	  --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l27.65"></a><span id="l27.65" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l27.66"></a><span id="l27.66" class="difflineplus">+	  --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l27.67"></a><span id="l27.67"> 	  $(call EXPAND_LOCALE_SRCDIR,im/locales)/installer $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l27.68"></a><span id="l27.68"> </span>
<a href="#l27.69"></a><span id="l27.69" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l27.70"></a><span id="l27.70" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/makensis.mk</span>
<a href="#l27.71"></a><span id="l27.71" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l27.72"></a><span id="l27.72" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/makensis.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/im/locales/Makefile.in</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/im/locales/Makefile.in</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l28.4"></a><span id="l28.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l28.5"></a><span id="l28.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l28.6"></a><span id="l28.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l28.9"></a><span id="l28.9" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11" class="difflineminus">-_ABS_SRCDIR := $(abspath $(topsrcdir))</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+_ABS_SRCDIR := $(abspath $(commtopsrcdir))</span>
<a href="#l28.13"></a><span id="l28.13"> </span>
<a href="#l28.14"></a><span id="l28.14"> ifndef MOZ_BRANDING_DIRECTORY</span>
<a href="#l28.15"></a><span id="l28.15"> MOZ_BRANDING_DIRECTORY = im/branding/nightly</span>
<a href="#l28.16"></a><span id="l28.16"> endif</span>
<a href="#l28.17"></a><span id="l28.17"> </span>
<a href="#l28.18"></a><span id="l28.18"> SUBMAKEFILES += \</span>
<a href="#l28.19"></a><span id="l28.19"> 	$(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/Makefile \</span>
<a href="#l28.20"></a><span id="l28.20"> 	$(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/locales/Makefile \</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineat">@@ -35,18 +35,18 @@ PP_TARGETS += L10N_PREF_JS_EXPORTS</span>
<a href="#l28.22"></a><span id="l28.22"> </span>
<a href="#l28.23"></a><span id="l28.23"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l28.24"></a><span id="l28.24"> MOZ_PKG_MAC_DSSTORE=$(ABS_DIST)/branding/dsstore</span>
<a href="#l28.25"></a><span id="l28.25"> MOZ_PKG_MAC_BACKGROUND=$(ABS_DIST)/branding/background.png</span>
<a href="#l28.26"></a><span id="l28.26"> MOZ_PKG_MAC_ICON=$(ABS_DIST)/branding/disk.icns</span>
<a href="#l28.27"></a><span id="l28.27"> MOZ_PKG_MAC_EXTRA=--symlink &quot;/Applications:/ &quot;</span>
<a href="#l28.28"></a><span id="l28.28"> endif</span>
<a href="#l28.29"></a><span id="l28.29"> </span>
<a href="#l28.30"></a><span id="l28.30" class="difflineminus">-MOZ_SFX_PACKAGE=$(topsrcdir)/other-licenses/7zstub/instantbird/7zSD.sfx</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-MOZ_INSTALLER_PATH=$(topsrcdir)/im/installer/windows</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+MOZ_SFX_PACKAGE=$(commtopsrcdir)/other-licenses/7zstub/instantbird/7zSD.sfx</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+MOZ_INSTALLER_PATH=$(commtopsrcdir)/im/installer/windows</span>
<a href="#l28.34"></a><span id="l28.34"> </span>
<a href="#l28.35"></a><span id="l28.35"> ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l28.36"></a><span id="l28.36"> UNINSTALLER_PACKAGE_HOOK = $(RM) -r $(STAGEDIST)/uninstall; \</span>
<a href="#l28.37"></a><span id="l28.37">     $(NSINSTALL) -D $(STAGEDIST)/uninstall; \</span>
<a href="#l28.38"></a><span id="l28.38">     cp ../installer/windows/l10ngen/helper.exe $(STAGEDIST)/uninstall; \</span>
<a href="#l28.39"></a><span id="l28.39">     $(RM) $(ABS_DIST)/l10n-stage/setup.exe; \</span>
<a href="#l28.40"></a><span id="l28.40">     cp ../installer/windows/l10ngen/setup.exe $(ABS_DIST)/l10n-stage; \</span>
<a href="#l28.41"></a><span id="l28.41">     $(NULL)</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineat">@@ -62,19 +62,19 @@ SEARCHPLUGINS := $(foreach plugin,$(adds</span>
<a href="#l28.43"></a><span id="l28.43"> SEARCHPLUGINS_FLAGS := --silence-missing-directive-warnings</span>
<a href="#l28.44"></a><span id="l28.44"> PP_TARGETS += SEARCHPLUGINS</span>
<a href="#l28.45"></a><span id="l28.45"> </span>
<a href="#l28.46"></a><span id="l28.46"> list-txt = $(SEARCHPLUGINS_PATH)/list.txt</span>
<a href="#l28.47"></a><span id="l28.47"> GARBAGE += $(list-txt)</span>
<a href="#l28.48"></a><span id="l28.48"> </span>
<a href="#l28.49"></a><span id="l28.49"> libs:: searchplugins</span>
<a href="#l28.50"></a><span id="l28.50"> </span>
<a href="#l28.51"></a><span id="l28.51" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l28.52"></a><span id="l28.52" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l28.53"></a><span id="l28.53"> </span>
<a href="#l28.54"></a><span id="l28.54" class="difflineminus">-include $(topsrcdir)/mozilla/toolkit/locales/l10n.mk</span>
<a href="#l28.55"></a><span id="l28.55" class="difflineplus">+include $(moztopsrcdir)/toolkit/locales/l10n.mk</span>
<a href="#l28.56"></a><span id="l28.56"> </span>
<a href="#l28.57"></a><span id="l28.57"> $(list-txt): $(call mkdir_deps,$(SEARCHPLUGINS_PATH)) $(if $(IS_LANGUAGE_REPACK),FORCE)</span>
<a href="#l28.58"></a><span id="l28.58"> 	$(RM) $(list-txt)</span>
<a href="#l28.59"></a><span id="l28.59"> 	$(foreach plugin,$(SEARCHPLUGINS_NAMES),printf '$(plugin)\n' &gt;&gt; $(list-txt);)</span>
<a href="#l28.60"></a><span id="l28.60"> searchplugins:: $(list-txt)</span>
<a href="#l28.61"></a><span id="l28.61"> </span>
<a href="#l28.62"></a><span id="l28.62"> # Remove installer/sea/ from installer paths.</span>
<a href="#l28.63"></a><span id="l28.63"> PKG_INST_PATH =</span>
<a href="#l28.64"></a><span id="l28.64" class="difflineat">@@ -145,23 +145,23 @@ else</span>
<a href="#l28.65"></a><span id="l28.65"> 	  sed -e &quot;s/^InfoText=/Info=/&quot; -e &quot;s/^TitleText=/Title=/&quot; | \</span>
<a href="#l28.66"></a><span id="l28.66"> 	  sed -e &quot;s/%MOZ_APP_DISPLAYNAME%/$(MOZ_APP_DISPLAYNAME)/&quot; &gt; \</span>
<a href="#l28.67"></a><span id="l28.67"> 	  $(FINAL_TARGET)/updater.ini</span>
<a href="#l28.68"></a><span id="l28.68"> endif</span>
<a href="#l28.69"></a><span id="l28.69"> endif</span>
<a href="#l28.70"></a><span id="l28.70"> </span>
<a href="#l28.71"></a><span id="l28.71"> ident:</span>
<a href="#l28.72"></a><span id="l28.72"> 	@printf &quot;ib_revision &quot;</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l28.74"></a><span id="l28.74" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l28.75"></a><span id="l28.75"> 	    $(STAGEDIST)/application.ini App SourceStamp</span>
<a href="#l28.76"></a><span id="l28.76"> 	@printf &quot;moz_revision &quot;</span>
<a href="#l28.77"></a><span id="l28.77" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l28.78"></a><span id="l28.78" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l28.79"></a><span id="l28.79"> 	    $(STAGEDIST)/platform.ini Build SourceStamp</span>
<a href="#l28.80"></a><span id="l28.80"> 	@printf &quot;buildid &quot;</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l28.82"></a><span id="l28.82" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l28.83"></a><span id="l28.83"> 	    $(STAGEDIST)/application.ini App BuildID</span>
<a href="#l28.84"></a><span id="l28.84"> </span>
<a href="#l28.85"></a><span id="l28.85"> #These make targets call prepare-repackages by setting different UPLOAD_DIR</span>
<a href="#l28.86"></a><span id="l28.86"> prepare-upload-latest-%:</span>
<a href="#l28.87"></a><span id="l28.87"> 	@$(MAKE) prepare-repackages-$* UPLOAD_DIR=$(DIST)/upload/latest</span>
<a href="#l28.88"></a><span id="l28.88"> </span>
<a href="#l28.89"></a><span id="l28.89"> prepare-upload-dated-%:</span>
<a href="#l28.90"></a><span id="l28.90"> 	@$(MAKE) prepare-repackages-$* UPLOAD_DIR=$(DIST)/upload/`date &quot;+%Y-%m-%d-%H&quot;`-$(MOZ_PKG_APPNAME)$(MOZ_APP_VERSION)-l10n</span>
<a href="#l28.91"></a><span id="l28.91" class="difflineat">@@ -200,16 +200,16 @@ ifdef LOCALE_MERGEDIR</span>
<a href="#l28.92"></a><span id="l28.92"> endif</span>
<a href="#l28.93"></a><span id="l28.93"> 	@echo</span>
<a href="#l28.94"></a><span id="l28.94"> </span>
<a href="#l28.95"></a><span id="l28.95"> IB_L10N_REPO_BASE = https://hg.instantbird.org/l10n</span>
<a href="#l28.96"></a><span id="l28.96"> MOZ_L10N_REPO_BASE = https://hg.mozilla.org/releases/l10n-mozilla-2.0</span>
<a href="#l28.97"></a><span id="l28.97"> </span>
<a href="#l28.98"></a><span id="l28.98"> checkout-%: AB_CD=$*</span>
<a href="#l28.99"></a><span id="l28.99"> checkout-%:</span>
<a href="#l28.100"></a><span id="l28.100" class="difflineminus">-	mkdir -p $(topsrcdir)/$(L10NBASEDIR)</span>
<a href="#l28.101"></a><span id="l28.101" class="difflineminus">-	$(PYTHON) $(topsrcdir)/client.py checkout-l10n --skip-instantbird --clean --l10n-base-dir $(L10NBASEDIR) --locale $(AB_CD)</span>
<a href="#l28.102"></a><span id="l28.102" class="difflineplus">+	mkdir -p $(commtopsrcdir)/$(L10NBASEDIR)</span>
<a href="#l28.103"></a><span id="l28.103" class="difflineplus">+	$(PYTHON) $(commtopsrcdir)/client.py checkout-l10n --skip-instantbird --clean --l10n-base-dir $(L10NBASEDIR) --locale $(AB_CD)</span>
<a href="#l28.104"></a><span id="l28.104"> </span>
<a href="#l28.105"></a><span id="l28.105"> repack-%: AB_CD=$*</span>
<a href="#l28.106"></a><span id="l28.106"> repack-%:</span>
<a href="#l28.107"></a><span id="l28.107"> 	make checkout-$(AB_CD)</span>
<a href="#l28.108"></a><span id="l28.108"> 	make merge-$(AB_CD)</span>
<a href="#l28.109"></a><span id="l28.109"> 	make installers-$(AB_CD)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/ldap/c-sdk/libraries/liblber/moz.build</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/liblber/moz.build</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -1,23 +1,23 @@</span>
<a href="#l29.4"></a><span id="l29.4"> # vim: set filetype=python:</span>
<a href="#l29.5"></a><span id="l29.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l29.6"></a><span id="l29.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l29.7"></a><span id="l29.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l29.8"></a><span id="l29.8"> </span>
<a href="#l29.9"></a><span id="l29.9" class="difflineminus">-include('/ldap/ldap-sdk.mozbuild')</span>
<a href="#l29.10"></a><span id="l29.10" class="difflineplus">+include('/%s/ldap/ldap-sdk.mozbuild' % CONFIG['commreltopsrcdir'])</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12"> Library('lber60')</span>
<a href="#l29.13"></a><span id="l29.13"> </span>
<a href="#l29.14"></a><span id="l29.14"> SOURCES += [</span>
<a href="#l29.15"></a><span id="l29.15">     'bprint.c',</span>
<a href="#l29.16"></a><span id="l29.16">     'decode.c',</span>
<a href="#l29.17"></a><span id="l29.17">     'encode.c',</span>
<a href="#l29.18"></a><span id="l29.18">     'io.c',</span>
<a href="#l29.19"></a><span id="l29.19"> ]</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21"> DEFINES['USE_WAITPID'] = True</span>
<a href="#l29.22"></a><span id="l29.22"> DEFINES['NEEDPROTOS'] = True</span>
<a href="#l29.23"></a><span id="l29.23"> </span>
<a href="#l29.24"></a><span id="l29.24"> LOCAL_INCLUDES += [</span>
<a href="#l29.25"></a><span id="l29.25" class="difflineminus">-    '/ldap/c-sdk/include'</span>
<a href="#l29.26"></a><span id="l29.26" class="difflineplus">+    '../../include'</span>
<a href="#l29.27"></a><span id="l29.27"> ]</span>
<a href="#l29.28"></a><span id="l29.28"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/ldap/c-sdk/libraries/libldap/moz.build</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/libldap/moz.build</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l30.4"></a><span id="l30.4"> # vim: set filetype=python:</span>
<a href="#l30.5"></a><span id="l30.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l30.6"></a><span id="l30.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l30.7"></a><span id="l30.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9" class="difflineminus">-include('/ldap/ldap-sdk.mozbuild')</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineplus">+include('/%s/ldap/ldap-sdk.mozbuild' % CONFIG['commreltopsrcdir'])</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12"> SharedLibrary('ldap60')</span>
<a href="#l30.13"></a><span id="l30.13"> </span>
<a href="#l30.14"></a><span id="l30.14"> SOURCES += [</span>
<a href="#l30.15"></a><span id="l30.15">     'abandon.c',</span>
<a href="#l30.16"></a><span id="l30.16">     'add.c',</span>
<a href="#l30.17"></a><span id="l30.17">     'authzidctrl.c',</span>
<a href="#l30.18"></a><span id="l30.18">     'bind.c',</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineat">@@ -77,12 +77,12 @@ if CONFIG['OS_TARGET'] == 'WINNT':</span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21"> if CONFIG['OS_TARGET'] != 'WINNT':</span>
<a href="#l30.22"></a><span id="l30.22">     DEFINES['USE_WAITPID'] = True</span>
<a href="#l30.23"></a><span id="l30.23">     DEFINES['USE_PTHREADS'] = True</span>
<a href="#l30.24"></a><span id="l30.24"> </span>
<a href="#l30.25"></a><span id="l30.25"> DEFINES['NEEDPROTOS'] = True</span>
<a href="#l30.26"></a><span id="l30.26"> </span>
<a href="#l30.27"></a><span id="l30.27"> LOCAL_INCLUDES += [</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineminus">-    '/ldap/c-sdk/include'</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineplus">+    '../../include'</span>
<a href="#l30.30"></a><span id="l30.30"> ]</span>
<a href="#l30.31"></a><span id="l30.31"> </span>
<a href="#l30.32"></a><span id="l30.32"> USE_LIBS += ['lber60']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/ldap/c-sdk/libraries/libldif/moz.build</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/libldif/moz.build</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -1,23 +1,22 @@</span>
<a href="#l31.4"></a><span id="l31.4"> # vim: set filetype=python:</span>
<a href="#l31.5"></a><span id="l31.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l31.6"></a><span id="l31.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l31.7"></a><span id="l31.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l31.8"></a><span id="l31.8"> </span>
<a href="#l31.9"></a><span id="l31.9" class="difflineminus">-include('/ldap/ldap-sdk.mozbuild')</span>
<a href="#l31.10"></a><span id="l31.10" class="difflineplus">+include('/%s/ldap/ldap-sdk.mozbuild' % CONFIG['commreltopsrcdir'])</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12"> SharedLibrary('ldif60')</span>
<a href="#l31.13"></a><span id="l31.13"> </span>
<a href="#l31.14"></a><span id="l31.14"> SOURCES += [</span>
<a href="#l31.15"></a><span id="l31.15">     'line64.c'</span>
<a href="#l31.16"></a><span id="l31.16"> ]</span>
<a href="#l31.17"></a><span id="l31.17"> </span>
<a href="#l31.18"></a><span id="l31.18"> LOCAL_INCLUDES += [</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-    '/ldap/c-sdk/include'</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineplus">+    '../../include'</span>
<a href="#l31.21"></a><span id="l31.21"> ]</span>
<a href="#l31.22"></a><span id="l31.22"> </span>
<a href="#l31.23"></a><span id="l31.23"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l31.24"></a><span id="l31.24">     DEFFILE = SRCDIR + '/libldif.def'</span>
<a href="#l31.25"></a><span id="l31.25"> </span>
<a href="#l31.26"></a><span id="l31.26"> DEFINES['USE_WAITPID'] = True</span>
<a href="#l31.27"></a><span id="l31.27"> DEFINES['NEEDPROTOS'] = True</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/ldap/c-sdk/libraries/libprldap/moz.build</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/libprldap/moz.build</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l32.4"></a><span id="l32.4"> # vim: set filetype=python:</span>
<a href="#l32.5"></a><span id="l32.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l32.6"></a><span id="l32.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l32.7"></a><span id="l32.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l32.8"></a><span id="l32.8"> </span>
<a href="#l32.9"></a><span id="l32.9" class="difflineminus">-include('/ldap/ldap-sdk.mozbuild')</span>
<a href="#l32.10"></a><span id="l32.10" class="difflineplus">+include('/%s/ldap/ldap-sdk.mozbuild' % CONFIG['commreltopsrcdir'])</span>
<a href="#l32.11"></a><span id="l32.11"> </span>
<a href="#l32.12"></a><span id="l32.12"> SharedLibrary('prldap60')</span>
<a href="#l32.13"></a><span id="l32.13"> </span>
<a href="#l32.14"></a><span id="l32.14"> SOURCES += [</span>
<a href="#l32.15"></a><span id="l32.15">     'ldappr-dns.c',</span>
<a href="#l32.16"></a><span id="l32.16">     'ldappr-error.c',</span>
<a href="#l32.17"></a><span id="l32.17">     'ldappr-io.c',</span>
<a href="#l32.18"></a><span id="l32.18">     'ldappr-public.c',</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineat">@@ -17,15 +17,15 @@ SOURCES += [</span>
<a href="#l32.20"></a><span id="l32.20"> </span>
<a href="#l32.21"></a><span id="l32.21"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l32.22"></a><span id="l32.22">     DEFFILE = SRCDIR + '/libprldap.def'</span>
<a href="#l32.23"></a><span id="l32.23"> </span>
<a href="#l32.24"></a><span id="l32.24"> DEFINES['USE_WAITPID'] = True</span>
<a href="#l32.25"></a><span id="l32.25"> DEFINES['NEEDPROTOS'] = True</span>
<a href="#l32.26"></a><span id="l32.26"> </span>
<a href="#l32.27"></a><span id="l32.27"> LOCAL_INCLUDES += [</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineminus">-    '/ldap/c-sdk/include'</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineplus">+    '../../include'</span>
<a href="#l32.30"></a><span id="l32.30"> ]</span>
<a href="#l32.31"></a><span id="l32.31"> </span>
<a href="#l32.32"></a><span id="l32.32"> USE_LIBS += [</span>
<a href="#l32.33"></a><span id="l32.33">     'ldap60',</span>
<a href="#l32.34"></a><span id="l32.34">     'nspr'</span>
<a href="#l32.35"></a><span id="l32.35"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/ldap/xpcom/src/moz.build</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/ldap/xpcom/src/moz.build</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -30,11 +30,11 @@ EXTRA_COMPONENTS += [</span>
<a href="#l33.4"></a><span id="l33.4"> USE_LIBS += [</span>
<a href="#l33.5"></a><span id="l33.5">     'ldapsdks',</span>
<a href="#l33.6"></a><span id="l33.6"> ]</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8"> Library('mozldap')</span>
<a href="#l33.9"></a><span id="l33.9"> FINAL_LIBRARY = 'xul'</span>
<a href="#l33.10"></a><span id="l33.10"> </span>
<a href="#l33.11"></a><span id="l33.11"> LOCAL_INCLUDES += [</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-    '/ldap/c-sdk/include',</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+    '../../c-sdk/include',</span>
<a href="#l33.14"></a><span id="l33.14"> ]</span>
<a href="#l33.15"></a><span id="l33.15"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/Makefile.in</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/Makefile.in</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -1,41 +1,40 @@</span>
<a href="#l34.4"></a><span id="l34.4" class="difflineminus">-#</span>
<a href="#l34.5"></a><span id="l34.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l34.6"></a><span id="l34.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l34.7"></a><span id="l34.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l34.8"></a><span id="l34.8"> </span>
<a href="#l34.9"></a><span id="l34.9" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l34.10"></a><span id="l34.10" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12"> ifdef ENABLE_TESTS</span>
<a href="#l34.13"></a><span id="l34.13"> </span>
<a href="#l34.14"></a><span id="l34.14"> check-sync-dirs::</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineminus">-	@$(PYTHON) $(topsrcdir)/mail/check-sync-dirs.py \</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-	   $(topsrcdir)/build $(MOZILLA_SRCDIR)/build</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineminus">-	@$(PYTHON) $(topsrcdir)/mail/check-sync-dirs.py \</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineminus">-	   $(srcdir)/config/tooltool-manifests $(MOZILLA_SRCDIR)/browser/config/tooltool-manifests</span>
<a href="#l34.19"></a><span id="l34.19" class="difflineplus">+	@$(PYTHON) $(commtopsrcdir)/mail/check-sync-dirs.py \</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineplus">+	   $(topsrcdir)/build $(moztopsrcdir)/build</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineplus">+	@$(PYTHON) $(commtopsrcdir)/mail/check-sync-dirs.py \</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineplus">+	   $(srcdir)/config/tooltool-manifests $(moztopsrcdir)/browser/config/tooltool-manifests</span>
<a href="#l34.23"></a><span id="l34.23"> </span>
<a href="#l34.24"></a><span id="l34.24"> check:: check-sync-dirs</span>
<a href="#l34.25"></a><span id="l34.25"> endif</span>
<a href="#l34.26"></a><span id="l34.26"> </span>
<a href="#l34.27"></a><span id="l34.27" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l34.29"></a><span id="l34.29"> </span>
<a href="#l34.30"></a><span id="l34.30"> ifdef MAKENSISU</span>
<a href="#l34.31"></a><span id="l34.31"> # For Windows build the uninstaller during the application build since the</span>
<a href="#l34.32"></a><span id="l34.32"> # uninstaller is included with the application for mar file generation.</span>
<a href="#l34.33"></a><span id="l34.33"> libs::</span>
<a href="#l34.34"></a><span id="l34.34"> 	$(MAKE) -C installer/windows uninstaller</span>
<a href="#l34.35"></a><span id="l34.35"> ifdef MOZ_MAINTENANCE_SERVICE</span>
<a href="#l34.36"></a><span id="l34.36"> 	$(MAKE) -C installer/windows maintenanceservice_installer</span>
<a href="#l34.37"></a><span id="l34.37"> endif</span>
<a href="#l34.38"></a><span id="l34.38"> endif</span>
<a href="#l34.39"></a><span id="l34.39"> </span>
<a href="#l34.40"></a><span id="l34.40"> </span>
<a href="#l34.41"></a><span id="l34.41"> # As a fallout from bug 1247162, the sourcestamp in application.ini and</span>
<a href="#l34.42"></a><span id="l34.42"> # platform.ini are the same, which isn't a problem for Firefox, but</span>
<a href="#l34.43"></a><span id="l34.43"> # it's not right for anything else. So we correct platform.ini here.</span>
<a href="#l34.44"></a><span id="l34.44"> </span>
<a href="#l34.45"></a><span id="l34.45" class="difflineminus">-MOZ_REV=$(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; parent --template=&quot;{node}&quot; 2&gt;/dev/null)</span>
<a href="#l34.46"></a><span id="l34.46" class="difflineplus">+MOZ_REV=$(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}&quot; 2&gt;/dev/null)</span>
<a href="#l34.47"></a><span id="l34.47"> </span>
<a href="#l34.48"></a><span id="l34.48"> libs:: $(DIST)/bin/platform.ini</span>
<a href="#l34.49"></a><span id="l34.49"> 	sed -e &quot;s/^\(SourceStamp=\).*/\1$(MOZ_REV)/&quot; $(DIST)/bin/platform.ini \</span>
<a href="#l34.50"></a><span id="l34.50"> 		&gt; $(DIST)/bin/platform.ini~</span>
<a href="#l34.51"></a><span id="l34.51"> 	mv -f $(DIST)/bin/platform.ini~ $(DIST)/bin/platform.ini</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">new file mode 100644</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineminus">--- /dev/null</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineplus">+++ b/mail/app-config.mk</span>
<a href="#l35.4"></a><span id="l35.4" class="difflineat">@@ -0,0 +1,9 @@</span>
<a href="#l35.5"></a><span id="l35.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l35.6"></a><span id="l35.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l35.7"></a><span id="l35.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l35.8"></a><span id="l35.8" class="difflineplus">+</span>
<a href="#l35.9"></a><span id="l35.9" class="difflineplus">+ifeq ($(findstring comm,$(MOZ_BUILD_APP)),)</span>
<a href="#l35.10"></a><span id="l35.10" class="difflineplus">+COMMDEPTH = $(DEPTH)</span>
<a href="#l35.11"></a><span id="l35.11" class="difflineplus">+else</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineplus">+COMMDEPTH = $(DEPTH)/comm</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/app.mozbuild</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/app.mozbuild</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -1,29 +1,32 @@</span>
<a href="#l36.4"></a><span id="l36.4"> # vim: set filetype=python:</span>
<a href="#l36.5"></a><span id="l36.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l36.6"></a><span id="l36.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l36.7"></a><span id="l36.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l36.8"></a><span id="l36.8"> </span>
<a href="#l36.9"></a><span id="l36.9" class="difflineminus">-include('/mailnews/mailnews.mozbuild')</span>
<a href="#l36.10"></a><span id="l36.10" class="difflineplus">+# Note that paths in this file are relative to the top directory, which may be</span>
<a href="#l36.11"></a><span id="l36.11" class="difflineplus">+# m-c or c-c.</span>
<a href="#l36.12"></a><span id="l36.12"> </span>
<a href="#l36.13"></a><span id="l36.13" class="difflineminus">-DIRS += ['/mail/components']</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineplus">+include('../mailnews/mailnews.mozbuild')</span>
<a href="#l36.15"></a><span id="l36.15"> </span>
<a href="#l36.16"></a><span id="l36.16" class="difflineminus">-include('/toolkit/toolkit.mozbuild')</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineplus">+DIRS += ['/%s/mail/components' % CONFIG['commreltopsrcdir']]</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineplus">+</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineplus">+include('/%s/toolkit/toolkit.mozbuild' % CONFIG['mozreltopsrcdir'])</span>
<a href="#l36.20"></a><span id="l36.20"> </span>
<a href="#l36.21"></a><span id="l36.21"> if CONFIG['MOZ_EXTENSIONS']:</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineminus">-    DIRS += ['/extensions']</span>
<a href="#l36.23"></a><span id="l36.23" class="difflineplus">+    DIRS += ['/%s/extensions' % CONFIG['mozreltopsrcdir']]</span>
<a href="#l36.24"></a><span id="l36.24"> </span>
<a href="#l36.25"></a><span id="l36.25"> DIRS += ['/%s' % CONFIG['MOZ_BRANDING_DIRECTORY']]</span>
<a href="#l36.26"></a><span id="l36.26"> </span>
<a href="#l36.27"></a><span id="l36.27"> if CONFIG['MOZ_COMPOSER']:</span>
<a href="#l36.28"></a><span id="l36.28" class="difflineminus">-    DIRS += ['/editor/ui']</span>
<a href="#l36.29"></a><span id="l36.29" class="difflineplus">+    DIRS += ['/%s/editor/ui' % CONFIG['commreltopsrcdir']]</span>
<a href="#l36.30"></a><span id="l36.30"> </span>
<a href="#l36.31"></a><span id="l36.31"> if CONFIG['MOZ_CALENDAR']:</span>
<a href="#l36.32"></a><span id="l36.32">     DIRS += [</span>
<a href="#l36.33"></a><span id="l36.33" class="difflineminus">-        '/calendar/lightning',</span>
<a href="#l36.34"></a><span id="l36.34" class="difflineminus">-        '/calendar/timezones'</span>
<a href="#l36.35"></a><span id="l36.35" class="difflineplus">+        '/%s/calendar/lightning' % CONFIG['commreltopsrcdir'],</span>
<a href="#l36.36"></a><span id="l36.36" class="difflineplus">+        '/%s/calendar/timezones' % CONFIG['commreltopsrcdir']</span>
<a href="#l36.37"></a><span id="l36.37">     ]</span>
<a href="#l36.38"></a><span id="l36.38"> </span>
<a href="#l36.39"></a><span id="l36.39"> DIRS += [</span>
<a href="#l36.40"></a><span id="l36.40" class="difflineminus">-    '/chat',</span>
<a href="#l36.41"></a><span id="l36.41" class="difflineminus">-    '/mail',</span>
<a href="#l36.42"></a><span id="l36.42" class="difflineplus">+    '/%s/chat' % CONFIG['commreltopsrcdir'],</span>
<a href="#l36.43"></a><span id="l36.43" class="difflineplus">+    '/%s/mail' % CONFIG['commreltopsrcdir'],</span>
<a href="#l36.44"></a><span id="l36.44"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/app/Makefile.in</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/app/Makefile.in</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l37.4"></a><span id="l37.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l37.5"></a><span id="l37.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l37.6"></a><span id="l37.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l37.7"></a><span id="l37.7"> </span>
<a href="#l37.8"></a><span id="l37.8"> AB_CD = $(MOZ_UI_LOCALE)</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10" class="difflineminus">-GRE_MILESTONE = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l37.11"></a><span id="l37.11" class="difflineminus">-MOZ_BUILDID = $(shell $(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build BuildID)</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineplus">+GRE_MILESTONE = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+MOZ_BUILDID = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build BuildID)</span>
<a href="#l37.14"></a><span id="l37.14"> </span>
<a href="#l37.15"></a><span id="l37.15"> DEFINES += \</span>
<a href="#l37.16"></a><span id="l37.16">   -DTHUNDERBIRD_ICO='&quot;$(DIST)/branding/thunderbird.ico&quot;' \</span>
<a href="#l37.17"></a><span id="l37.17">    $(NULL)</span>
<a href="#l37.18"></a><span id="l37.18"> </span>
<a href="#l37.19"></a><span id="l37.19"> # Build a binary bootstrapping with XRE_main</span>
<a href="#l37.20"></a><span id="l37.20"> </span>
<a href="#l37.21"></a><span id="l37.21"> ifndef MOZ_WINCONSOLE</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineat">@@ -20,30 +20,30 @@ else</span>
<a href="#l37.23"></a><span id="l37.23"> MOZ_WINCONSOLE = 0</span>
<a href="#l37.24"></a><span id="l37.24"> endif</span>
<a href="#l37.25"></a><span id="l37.25"> endif</span>
<a href="#l37.26"></a><span id="l37.26"> </span>
<a href="#l37.27"></a><span id="l37.27"> # This switches $(INSTALL) to copy mode, like $(SYSINSTALL), so things that</span>
<a href="#l37.28"></a><span id="l37.28"> # shouldn't get 755 perms need $(IFLAGS1) for either way of calling nsinstall.</span>
<a href="#l37.29"></a><span id="l37.29"> NSDISTMODE = copy</span>
<a href="#l37.30"></a><span id="l37.30"> </span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l37.33"></a><span id="l37.33"> </span>
<a href="#l37.34"></a><span id="l37.34"> # If we are trying to show an error dialog about the lack of SSE2 support,</span>
<a href="#l37.35"></a><span id="l37.35"> # make sure that code itself doesn't use SSE2.</span>
<a href="#l37.36"></a><span id="l37.36"> ifdef MOZ_LINUX_32_SSE2_STARTUP_ERROR</span>
<a href="#l37.37"></a><span id="l37.37"> CXXFLAGS := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXXFLAGS))</span>
<a href="#l37.38"></a><span id="l37.38"> CXX := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXX))</span>
<a href="#l37.39"></a><span id="l37.39"> CXXFLAGS += -mno-sse -mno-sse2 -mfpmath=387</span>
<a href="#l37.40"></a><span id="l37.40"> CXX += -march=pentiumpro</span>
<a href="#l37.41"></a><span id="l37.41"> endif</span>
<a href="#l37.42"></a><span id="l37.42"> </span>
<a href="#l37.43"></a><span id="l37.43"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l37.44"></a><span id="l37.44"> # Extract the icons we care about embedding into the EXE</span>
<a href="#l37.45"></a><span id="l37.45" class="difflineminus">-mailtoolbar = $(topsrcdir)/mail/themes/windows/mail/icons/jumplist.png</span>
<a href="#l37.46"></a><span id="l37.46" class="difflineplus">+mailtoolbar = $(commtopsrcdir)/mail/themes/windows/mail/icons/jumplist.png</span>
<a href="#l37.47"></a><span id="l37.47"> </span>
<a href="#l37.48"></a><span id="l37.48"> # png to ico converter. The function takes 5 arguments, in order: source png</span>
<a href="#l37.49"></a><span id="l37.49"> # file, left, top, size, output ico file.</span>
<a href="#l37.50"></a><span id="l37.50"> png2ico = $(PYTHON) $(srcdir)/png2ico.py $(1) $(2) $(3) $(4) $(5)</span>
<a href="#l37.51"></a><span id="l37.51"> </span>
<a href="#l37.52"></a><span id="l37.52"> # Each icon is 18x18 in the toolbar, and we want a 16x16 icon here, so we cut</span>
<a href="#l37.53"></a><span id="l37.53"> # off a pixel at each end.</span>
<a href="#l37.54"></a><span id="l37.54"> write-message.ico: $(mailtoolbar) $(srcdir)/png2ico.py</span>
<a href="#l37.55"></a><span id="l37.55" class="difflineat">@@ -57,17 +57,17 @@ GARBAGE += write-message.ico address-boo</span>
<a href="#l37.56"></a><span id="l37.56"> </span>
<a href="#l37.57"></a><span id="l37.57"> # Rebuild thunderbird.exe if the manifest changes - it's included by splash.rc.</span>
<a href="#l37.58"></a><span id="l37.58"> # (this dependency should really be just for thunderbird.exe, not other targets)</span>
<a href="#l37.59"></a><span id="l37.59"> # Note the manifest file exists in the tree, so we use the explicit filename</span>
<a href="#l37.60"></a><span id="l37.60"> # here.</span>
<a href="#l37.61"></a><span id="l37.61"> EXTRA_DEPS += thunderbird.exe.manifest</span>
<a href="#l37.62"></a><span id="l37.62"> endif</span>
<a href="#l37.63"></a><span id="l37.63"> </span>
<a href="#l37.64"></a><span id="l37.64" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l37.65"></a><span id="l37.65" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l37.66"></a><span id="l37.66"> </span>
<a href="#l37.67"></a><span id="l37.67"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l37.68"></a><span id="l37.68"> </span>
<a href="#l37.69"></a><span id="l37.69"> $(RESFILE): embedded-icons</span>
<a href="#l37.70"></a><span id="l37.70"> </span>
<a href="#l37.71"></a><span id="l37.71"> endif</span>
<a href="#l37.72"></a><span id="l37.72"> </span>
<a href="#l37.73"></a><span id="l37.73"> ifneq ($(OS_ARCH),WINNT)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/app/moz.build</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/app/moz.build</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -5,36 +5,36 @@</span>
<a href="#l38.4"></a><span id="l38.4"> </span>
<a href="#l38.5"></a><span id="l38.5"> DIRS += ['profile']</span>
<a href="#l38.6"></a><span id="l38.6"> </span>
<a href="#l38.7"></a><span id="l38.7"> GeckoProgram(CONFIG['MOZ_APP_NAME'])</span>
<a href="#l38.8"></a><span id="l38.8"> USE_LIBS += ['mozglue']</span>
<a href="#l38.9"></a><span id="l38.9"> SOURCES += ['nsMailApp.cpp']</span>
<a href="#l38.10"></a><span id="l38.10"> LOCAL_INCLUDES += [</span>
<a href="#l38.11"></a><span id="l38.11">     '!/build',</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-    '/mozilla/toolkit/xre',</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-    '/mozilla/xpcom/base',</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineminus">-    '/mozilla/xpcom/build',</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+    '/%s/toolkit/xre' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineplus">+    '/%s/xpcom/base' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineplus">+    '/%s/xpcom/build' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l38.18"></a><span id="l38.18"> ]</span>
<a href="#l38.19"></a><span id="l38.19"> </span>
<a href="#l38.20"></a><span id="l38.20"> if CONFIG['LIBFUZZER']:</span>
<a href="#l38.21"></a><span id="l38.21">     USE_LIBS += [ 'fuzzer' ]</span>
<a href="#l38.22"></a><span id="l38.22">     LOCAL_INCLUDES += [</span>
<a href="#l38.23"></a><span id="l38.23" class="difflineminus">-        '/mozilla/tools/fuzzing/libfuzzer',</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineplus">+        '/%s/tools/fuzzing/libfuzzer' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l38.25"></a><span id="l38.25">     ]</span>
<a href="#l38.26"></a><span id="l38.26"> </span>
<a href="#l38.27"></a><span id="l38.27"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l38.28"></a><span id="l38.28">     RCINCLUDE = 'splash.rc'</span>
<a href="#l38.29"></a><span id="l38.29">     DEFINES['MOZ_THUNDERBIRD'] = True</span>
<a href="#l38.30"></a><span id="l38.30"> </span>
<a href="#l38.31"></a><span id="l38.31"> if CONFIG['MOZ_SANDBOX'] and CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l38.32"></a><span id="l38.32">     # For sandbox includes and the include dependencies those have</span>
<a href="#l38.33"></a><span id="l38.33">     LOCAL_INCLUDES += [</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineminus">-        '/mozilla/security/sandbox/chromium',</span>
<a href="#l38.35"></a><span id="l38.35" class="difflineminus">-        '/mozilla/security/sandbox/chromium-shim',</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineplus">+        '/%s/security/sandbox/chromium' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineplus">+        '/%s/security/sandbox/chromium-shim' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l38.38"></a><span id="l38.38">     ]</span>
<a href="#l38.39"></a><span id="l38.39"> </span>
<a href="#l38.40"></a><span id="l38.40">     USE_LIBS += [</span>
<a href="#l38.41"></a><span id="l38.41">         'sandbox_s',</span>
<a href="#l38.42"></a><span id="l38.42">     ]</span>
<a href="#l38.43"></a><span id="l38.43"> </span>
<a href="#l38.44"></a><span id="l38.44">     DELAYLOAD_DLLS += [</span>
<a href="#l38.45"></a><span id="l38.45">         'winmm.dll',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/app/profile/extensions/Makefile.in</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/app/profile/extensions/Makefile.in</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l39.4"></a><span id="l39.4"> #</span>
<a href="#l39.5"></a><span id="l39.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l39.6"></a><span id="l39.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l39.7"></a><span id="l39.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9"> DISTROEXT = $(ABS_DIST)/bin/distribution/extensions</span>
<a href="#l39.10"></a><span id="l39.10"> </span>
<a href="#l39.11"></a><span id="l39.11" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l39.13"></a><span id="l39.13"> </span>
<a href="#l39.14"></a><span id="l39.14"> # If adding extra extensions here, check that EXTRA_ARGS defined below won't</span>
<a href="#l39.15"></a><span id="l39.15"> # affect them unintentionally.</span>
<a href="#l39.16"></a><span id="l39.16"> EXTENSIONS = \</span>
<a href="#l39.17"></a><span id="l39.17">   $(NULL)</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19"> # We are in release mode, we don't want to ship the debug file.</span>
<a href="#l39.20"></a><span id="l39.20"> ifndef MOZ_DEBUG</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/base/jar.mn</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/base/jar.mn</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -1,8 +1,10 @@</span>
<a href="#l40.4"></a><span id="l40.4" class="difflineplus">+#filter substitution</span>
<a href="#l40.5"></a><span id="l40.5" class="difflineplus">+</span>
<a href="#l40.6"></a><span id="l40.6"> messenger.jar:</span>
<a href="#l40.7"></a><span id="l40.7"> % content messagebody %content/messagebody/ contentaccessible=yes</span>
<a href="#l40.8"></a><span id="l40.8"> % content messenger %content/messenger/</span>
<a href="#l40.9"></a><span id="l40.9"> % override chrome://global/content/nsDragAndDrop.js chrome://messenger/content/nsDragAndDrop.js</span>
<a href="#l40.10"></a><span id="l40.10"> % override chrome://messagebody/skin/messageBody.css chrome://messenger/skin/messageBody.css</span>
<a href="#l40.11"></a><span id="l40.11"> % overlay chrome://global/content/viewSource.xul chrome://messenger/content/viewSourceOverlay.xul</span>
<a href="#l40.12"></a><span id="l40.12"> % overlay chrome://global/content/config.xul chrome://messenger/content/configEditorOverlay.xul</span>
<a href="#l40.13"></a><span id="l40.13"> % overlay chrome://editor/content/EdSpellCheck.xul chrome://messenger/content/EdSpellCheckOverlay.xul</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineat">@@ -110,25 +112,25 @@ messenger.jar:</span>
<a href="#l40.15"></a><span id="l40.15"> *   content/messenger/safeMode.xul                  (content/safeMode.xul)</span>
<a href="#l40.16"></a><span id="l40.16">     content/messenger/safeMode.js                   (content/safeMode.js)</span>
<a href="#l40.17"></a><span id="l40.17">     content/messenger/sanitize.xul                  (content/sanitize.xul)</span>
<a href="#l40.18"></a><span id="l40.18">     content/messenger/sanitize.js                   (content/sanitize.js)</span>
<a href="#l40.19"></a><span id="l40.19">     content/messenger/sanitizeDialog.css            (content/sanitizeDialog.css)</span>
<a href="#l40.20"></a><span id="l40.20">     content/messenger/sanitizeDialog.js             (content/sanitizeDialog.js)</span>
<a href="#l40.21"></a><span id="l40.21"> *   content/messenger/toolbarIconColor.js           (content/toolbarIconColor.js)</span>
<a href="#l40.22"></a><span id="l40.22"> # the following files are mail-specific overrides</span>
<a href="#l40.23"></a><span id="l40.23" class="difflineminus">-*   content/messenger/license.html                  (/mozilla/toolkit/content/license.html)</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineplus">+*   content/messenger/license.html                  (/@mozreltopsrcdir@/toolkit/content/license.html)</span>
<a href="#l40.25"></a><span id="l40.25"> % override chrome://global/content/license.html chrome://messenger/content/license.html</span>
<a href="#l40.26"></a><span id="l40.26"> # L10n resource overrides</span>
<a href="#l40.27"></a><span id="l40.27"> % override chrome://mozapps/locale/downloads/settingsChange.dtd chrome://messenger/locale/downloads/settingsChange.dtd</span>
<a href="#l40.28"></a><span id="l40.28"> % override chrome://global/locale/netError.dtd chrome://messenger/locale/netError.dtd</span>
<a href="#l40.29"></a><span id="l40.29"> </span>
<a href="#l40.30"></a><span id="l40.30"> comm.jar:</span>
<a href="#l40.31"></a><span id="l40.31"> % content communicator %content/communicator/</span>
<a href="#l40.32"></a><span id="l40.32">    content/communicator/charsetOverlay.xul          (content/charsetOverlay.xul)</span>
<a href="#l40.33"></a><span id="l40.33">    content/communicator/contentAreaClick.js         (content/contentAreaClick.js)</span>
<a href="#l40.34"></a><span id="l40.34" class="difflineminus">-   content/communicator/labelsencodings.properties  (/mozilla/dom/encoding/labelsencodings.properties)</span>
<a href="#l40.35"></a><span id="l40.35" class="difflineplus">+   content/communicator/labelsencodings.properties  (/@mozreltopsrcdir@/dom/encoding/labelsencodings.properties)</span>
<a href="#l40.36"></a><span id="l40.36"> *  content/communicator/utilityOverlay.xul          (content/utilityOverlay.xul)</span>
<a href="#l40.37"></a><span id="l40.37">    content/communicator/utilityOverlay.js           (content/utilityOverlay.js)</span>
<a href="#l40.38"></a><span id="l40.38"> </span>
<a href="#l40.39"></a><span id="l40.39"> toolkit.jar:</span>
<a href="#l40.40"></a><span id="l40.40"> % overlay chrome://global/content/customizeToolbar.xul chrome://messenger/content/customizeToolbarOverlay.xul</span>
<a href="#l40.41"></a><span id="l40.41"> % overlay chrome://mozapps/content/downloads/downloads.xul chrome://messenger/content/downloadsOverlay.xul</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mail/base/moz.build</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mail/base/moz.build</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -7,16 +7,17 @@ DIRS += ['modules']</span>
<a href="#l41.4"></a><span id="l41.4"> </span>
<a href="#l41.5"></a><span id="l41.5"> TEST_DIRS += ['test']</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7"> JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9"> DEFINES['PRE_RELEASE_SUFFIX'] = ''</span>
<a href="#l41.10"></a><span id="l41.10"> DEFINES['MOZ_APP_VERSION'] = CONFIG['MOZ_APP_VERSION']</span>
<a href="#l41.11"></a><span id="l41.11"> DEFINES['MOZ_APP_VERSION_DISPLAY'] = CONFIG['MOZ_APP_VERSION_DISPLAY']</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineplus">+DEFINES['mozreltopsrcdir'] = CONFIG['mozreltopsrcdir']</span>
<a href="#l41.13"></a><span id="l41.13"> DEFINES['APP_LICENSE_BLOCK'] = '%s/content/overrides/app-license.html' % SRCDIR</span>
<a href="#l41.14"></a><span id="l41.14"> </span>
<a href="#l41.15"></a><span id="l41.15"> if CONFIG['MOZILLA_OFFICIAL']:</span>
<a href="#l41.16"></a><span id="l41.16">     DEFINES['OFFICIAL_BUILD'] = 1</span>
<a href="#l41.17"></a><span id="l41.17"> </span>
<a href="#l41.18"></a><span id="l41.18"> if CONFIG['MOZ_WIDGET_TOOLKIT'] in ('windows', 'gtk2', 'gtk3', 'cocoa'):</span>
<a href="#l41.19"></a><span id="l41.19">     DEFINES['HAVE_SHELL_SERVICE'] = 1</span>
<a href="#l41.20"></a><span id="l41.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mail/branding/aurora/Makefile.in</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mail/branding/aurora/Makefile.in</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l42.4"></a><span id="l42.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l42.5"></a><span id="l42.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l42.6"></a><span id="l42.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l42.7"></a><span id="l42.7"> </span>
<a href="#l42.8"></a><span id="l42.8"> # Branding Makefile for nightlies/unofficial branding</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l42.11"></a><span id="l42.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l42.12"></a><span id="l42.12"> </span>
<a href="#l42.13"></a><span id="l42.13"> export::</span>
<a href="#l42.14"></a><span id="l42.14"> 	$(NSINSTALL) -D $(DIST)/branding</span>
<a href="#l42.15"></a><span id="l42.15"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l42.16"></a><span id="l42.16"> 	cp $(srcdir)/thunderbird.ico   $(DIST)/branding/thunderbird.ico</span>
<a href="#l42.17"></a><span id="l42.17"> 	cp $(srcdir)/branding.nsi      $(DIST)/branding/branding.nsi</span>
<a href="#l42.18"></a><span id="l42.18"> 	cp $(srcdir)/wizHeader.bmp     $(DIST)/branding/wizHeader.bmp</span>
<a href="#l42.19"></a><span id="l42.19"> 	cp $(srcdir)/wizHeaderRTL.bmp  $(DIST)/branding/wizHeaderRTL.bmp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mail/branding/nightly/Makefile.in</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mail/branding/nightly/Makefile.in</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l43.4"></a><span id="l43.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l43.5"></a><span id="l43.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l43.6"></a><span id="l43.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8"> # Branding Makefile for nightlies/unofficial branding</span>
<a href="#l43.9"></a><span id="l43.9"> </span>
<a href="#l43.10"></a><span id="l43.10" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l43.11"></a><span id="l43.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l43.12"></a><span id="l43.12"> </span>
<a href="#l43.13"></a><span id="l43.13"> export::</span>
<a href="#l43.14"></a><span id="l43.14"> 	$(NSINSTALL) -D $(DIST)/branding</span>
<a href="#l43.15"></a><span id="l43.15"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l43.16"></a><span id="l43.16"> 	cp $(srcdir)/thunderbird.ico   $(DIST)/branding/thunderbird.ico</span>
<a href="#l43.17"></a><span id="l43.17"> 	cp $(srcdir)/branding.nsi      $(DIST)/branding/branding.nsi</span>
<a href="#l43.18"></a><span id="l43.18"> 	cp $(srcdir)/wizHeader.bmp     $(DIST)/branding/wizHeader.bmp</span>
<a href="#l43.19"></a><span id="l43.19"> 	cp $(srcdir)/wizHeaderRTL.bmp  $(DIST)/branding/wizHeaderRTL.bmp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mail/build.mk</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mail/build.mk</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -1,51 +1,51 @@</span>
<a href="#l44.4"></a><span id="l44.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l44.5"></a><span id="l44.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l44.6"></a><span id="l44.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l44.7"></a><span id="l44.7"> </span>
<a href="#l44.8"></a><span id="l44.8"> ifndef COMM_BUILD</span>
<a href="#l44.9"></a><span id="l44.9"> installer:</span>
<a href="#l44.10"></a><span id="l44.10" class="difflineminus">-	@$(MAKE) -C mail/installer installer</span>
<a href="#l44.11"></a><span id="l44.11" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer installer</span>
<a href="#l44.12"></a><span id="l44.12"> </span>
<a href="#l44.13"></a><span id="l44.13"> package:</span>
<a href="#l44.14"></a><span id="l44.14" class="difflineminus">-	@$(MAKE) -C mail/installer</span>
<a href="#l44.15"></a><span id="l44.15" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer</span>
<a href="#l44.16"></a><span id="l44.16"> </span>
<a href="#l44.17"></a><span id="l44.17"> package-compare:</span>
<a href="#l44.18"></a><span id="l44.18" class="difflineminus">-	@$(MAKE) -C mail/installer package-compare</span>
<a href="#l44.19"></a><span id="l44.19" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer package-compare</span>
<a href="#l44.20"></a><span id="l44.20"> </span>
<a href="#l44.21"></a><span id="l44.21"> stage-package:</span>
<a href="#l44.22"></a><span id="l44.22" class="difflineminus">-	@$(MAKE) -C mail/installer stage-package</span>
<a href="#l44.23"></a><span id="l44.23" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer stage-package</span>
<a href="#l44.24"></a><span id="l44.24"> </span>
<a href="#l44.25"></a><span id="l44.25"> install::</span>
<a href="#l44.26"></a><span id="l44.26" class="difflineminus">-	@$(MAKE) -C mail/installer install</span>
<a href="#l44.27"></a><span id="l44.27" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer install</span>
<a href="#l44.28"></a><span id="l44.28"> </span>
<a href="#l44.29"></a><span id="l44.29"> source-package::</span>
<a href="#l44.30"></a><span id="l44.30" class="difflineminus">-	@$(MAKE) -C mail/installer source-package</span>
<a href="#l44.31"></a><span id="l44.31" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer source-package</span>
<a href="#l44.32"></a><span id="l44.32"> </span>
<a href="#l44.33"></a><span id="l44.33"> upload::</span>
<a href="#l44.34"></a><span id="l44.34" class="difflineminus">-	@$(MAKE) -C mail/installer upload</span>
<a href="#l44.35"></a><span id="l44.35" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer upload</span>
<a href="#l44.36"></a><span id="l44.36"> ifdef MOZ_CALENDAR</span>
<a href="#l44.37"></a><span id="l44.37" class="difflineminus">-	@$(MAKE) -C calendar/lightning upload</span>
<a href="#l44.38"></a><span id="l44.38" class="difflineminus">-	@$(MAKE) -C calendar/providers/gdata upload</span>
<a href="#l44.39"></a><span id="l44.39" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/calendar/lightning upload</span>
<a href="#l44.40"></a><span id="l44.40" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/calendar/providers/gdata upload</span>
<a href="#l44.41"></a><span id="l44.41"> endif</span>
<a href="#l44.42"></a><span id="l44.42"> </span>
<a href="#l44.43"></a><span id="l44.43"> source-upload::</span>
<a href="#l44.44"></a><span id="l44.44" class="difflineminus">-	@$(MAKE) -C mail/installer source-upload</span>
<a href="#l44.45"></a><span id="l44.45" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer source-upload</span>
<a href="#l44.46"></a><span id="l44.46"> </span>
<a href="#l44.47"></a><span id="l44.47"> hg-bundle::</span>
<a href="#l44.48"></a><span id="l44.48" class="difflineminus">-	@$(MAKE) -C mail/installer hg-bundle</span>
<a href="#l44.49"></a><span id="l44.49" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/installer hg-bundle</span>
<a href="#l44.50"></a><span id="l44.50"> </span>
<a href="#l44.51"></a><span id="l44.51"> l10n-check::</span>
<a href="#l44.52"></a><span id="l44.52" class="difflineminus">-	@$(MAKE) -C mail/locales l10n-check</span>
<a href="#l44.53"></a><span id="l44.53" class="difflineplus">+	@$(MAKE) -C $(COMMDEPTH)/mail/locales l10n-check</span>
<a href="#l44.54"></a><span id="l44.54"> </span>
<a href="#l44.55"></a><span id="l44.55"> wget-en-US:</span>
<a href="#l44.56"></a><span id="l44.56" class="difflineminus">-	$(MAKE) -C mail/locales wget-en-US</span>
<a href="#l44.57"></a><span id="l44.57" class="difflineplus">+	$(MAKE) -C $(COMMDEPTH)/mail/locales wget-en-US</span>
<a href="#l44.58"></a><span id="l44.58"> </span>
<a href="#l44.59"></a><span id="l44.59"> # make -j1 because dependencies in l10n build targets don't work</span>
<a href="#l44.60"></a><span id="l44.60"> # with parallel builds</span>
<a href="#l44.61"></a><span id="l44.61"> merge-% installers-% langpack-% chrome-%:</span>
<a href="#l44.62"></a><span id="l44.62" class="difflineminus">-	$(MAKE) -j1 -C mail/locales $@</span>
<a href="#l44.63"></a><span id="l44.63" class="difflineplus">+	$(MAKE) -j1 -C $(COMMDEPTH)/mail/locales $@</span>
<a href="#l44.64"></a><span id="l44.64"> </span>
<a href="#l44.65"></a><span id="l44.65"> ifdef ENABLE_TESTS</span>
<a href="#l44.66"></a><span id="l44.66" class="difflineminus">-include $(topsrcdir)/../mail/testsuite-targets.mk</span>
<a href="#l44.67"></a><span id="l44.67" class="difflineplus">+include $(commtopsrcdir)/mail/testsuite-targets.mk</span>
<a href="#l44.68"></a><span id="l44.68"> endif</span>
<a href="#l44.69"></a><span id="l44.69"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mail/components/search/mdimporter/Makefile.in</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mail/components/search/mdimporter/Makefile.in</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -17,13 +17,13 @@ INSTALL_TARGETS += SCHEMA</span>
<a href="#l45.4"></a><span id="l45.4"> PLIST_FILES := Info.plist</span>
<a href="#l45.5"></a><span id="l45.5"> PLIST_DEST := $(FRAMEWORK_DIR)/Contents</span>
<a href="#l45.6"></a><span id="l45.6"> INSTALL_TARGETS += PLIST</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8"> CFLAGS += -mmacosx-version-min=$(MACOSX_DEPLOYMENT_TARGET)</span>
<a href="#l45.9"></a><span id="l45.9"> # We don't need mozglue</span>
<a href="#l45.10"></a><span id="l45.10"> WRAP_LDFLAGS :=</span>
<a href="#l45.11"></a><span id="l45.11"> </span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l45.14"></a><span id="l45.14"> </span>
<a href="#l45.15"></a><span id="l45.15"> # We're also a bundle.</span>
<a href="#l45.16"></a><span id="l45.16"> LDFLAGS += -bundle</span>
<a href="#l45.17"></a><span id="l45.17"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mail/configure.in</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mail/configure.in</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -7,16 +7,22 @@ dnl file, You can obtain one at http://m</span>
<a href="#l46.4"></a><span id="l46.4"> dnl Things we need to carry from confvars.sh</span>
<a href="#l46.5"></a><span id="l46.5"> AC_DEFINE(MOZ_THUNDERBIRD)</span>
<a href="#l46.6"></a><span id="l46.6"> AC_SUBST(MOZ_THUNDERBIRD)</span>
<a href="#l46.7"></a><span id="l46.7"> AC_SUBST(MOZ_COMPOSER)</span>
<a href="#l46.8"></a><span id="l46.8"> AC_SUBST(THUNDERBIRD_VERSION)</span>
<a href="#l46.9"></a><span id="l46.9"> AC_DEFINE(MOZ_SEPARATE_MANIFEST_FOR_THEME_OVERRIDES)</span>
<a href="#l46.10"></a><span id="l46.10"> AC_SUBST(MOZ_BUNDLED_FONTS)</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineplus">+dnl More things we need to carry from confvars.sh</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+AC_SUBST(moztopsrcdir)</span>
<a href="#l46.14"></a><span id="l46.14" class="difflineplus">+AC_SUBST(commtopsrcdir)</span>
<a href="#l46.15"></a><span id="l46.15" class="difflineplus">+AC_SUBST(mozreltopsrcdir)</span>
<a href="#l46.16"></a><span id="l46.16" class="difflineplus">+AC_SUBST(commreltopsrcdir)</span>
<a href="#l46.17"></a><span id="l46.17" class="difflineplus">+</span>
<a href="#l46.18"></a><span id="l46.18"> dnl Optional parts of the build.</span>
<a href="#l46.19"></a><span id="l46.19"> AC_SUBST(MOZ_MORK)</span>
<a href="#l46.20"></a><span id="l46.20"> if test &quot;$MOZ_MORK&quot;; then</span>
<a href="#l46.21"></a><span id="l46.21">   AC_DEFINE(MOZ_MORK)</span>
<a href="#l46.22"></a><span id="l46.22"> fi</span>
<a href="#l46.23"></a><span id="l46.23"> if test &quot;$OS_ARCH&quot; != &quot;WINNT&quot;; then</span>
<a href="#l46.24"></a><span id="l46.24">   MOZ_MOVEMAIL=1</span>
<a href="#l46.25"></a><span id="l46.25">   HAVE_MOVEMAIL=1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mail/confvars.sh</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mail/confvars.sh</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -1,13 +1,15 @@</span>
<a href="#l47.4"></a><span id="l47.4"> #! /bin/sh</span>
<a href="#l47.5"></a><span id="l47.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l47.6"></a><span id="l47.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l47.7"></a><span id="l47.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l47.8"></a><span id="l47.8"> </span>
<a href="#l47.9"></a><span id="l47.9" class="difflineplus">+source ${_topsrcdir}/$MOZ_BUILD_APP/../comm-confvars.sh</span>
<a href="#l47.10"></a><span id="l47.10" class="difflineplus">+</span>
<a href="#l47.11"></a><span id="l47.11"> MOZ_APP_BASENAME=Thunderbird</span>
<a href="#l47.12"></a><span id="l47.12"> MOZ_APP_NAME=thunderbird</span>
<a href="#l47.13"></a><span id="l47.13"> MOZ_UPDATER=1</span>
<a href="#l47.14"></a><span id="l47.14"> MOZ_THUNDERBIRD=1</span>
<a href="#l47.15"></a><span id="l47.15"> MOZ_LDAP_XPCOM=1</span>
<a href="#l47.16"></a><span id="l47.16"> MOZ_COMPOSER=1</span>
<a href="#l47.17"></a><span id="l47.17"> MOZ_ALLOW_LEGACY_EXTENSIONS=1</span>
<a href="#l47.18"></a><span id="l47.18"> </span>
<a href="#l47.19"></a><span id="l47.19" class="difflineat">@@ -26,18 +28,19 @@ fi</span>
<a href="#l47.20"></a><span id="l47.20"> MOZ_MORK=1</span>
<a href="#l47.21"></a><span id="l47.21"> </span>
<a href="#l47.22"></a><span id="l47.22"> MOZ_APP_VERSION_TXT=${_topsrcdir}/$MOZ_BUILD_APP/config/version.txt</span>
<a href="#l47.23"></a><span id="l47.23"> MOZ_APP_VERSION=`cat $MOZ_APP_VERSION_TXT`</span>
<a href="#l47.24"></a><span id="l47.24"> MOZ_APP_VERSION_DISPLAY_TXT=${_topsrcdir}/$MOZ_BUILD_APP/config/version_display.txt</span>
<a href="#l47.25"></a><span id="l47.25"> MOZ_APP_VERSION_DISPLAY=`cat $MOZ_APP_VERSION_DISPLAY_TXT`</span>
<a href="#l47.26"></a><span id="l47.26"> THUNDERBIRD_VERSION=$MOZ_APP_VERSION</span>
<a href="#l47.27"></a><span id="l47.27"> </span>
<a href="#l47.28"></a><span id="l47.28" class="difflineminus">-MOZ_BRANDING_DIRECTORY=mail/branding/nightly</span>
<a href="#l47.29"></a><span id="l47.29" class="difflineminus">-MOZ_OFFICIAL_BRANDING_DIRECTORY=other-licenses/branding/thunderbird</span>
<a href="#l47.30"></a><span id="l47.30" class="difflineplus">+MOZ_BRANDING_DIRECTORY=$commreltopsrcdir/mail/branding/nightly</span>
<a href="#l47.31"></a><span id="l47.31" class="difflineplus">+MOZ_OFFICIAL_BRANDING_DIRECTORY=$commreltopsrcdir/other-licenses/branding/thunderbird</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineplus">+</span>
<a href="#l47.33"></a><span id="l47.33"> MOZ_APP_ID={3550f703-e582-4d05-9a08-453d09bdfdc6}</span>
<a href="#l47.34"></a><span id="l47.34"> # This should usually be the same as the value MAR_CHANNEL_ID.</span>
<a href="#l47.35"></a><span id="l47.35"> # If more than one ID is needed, then you should use a comma separated list</span>
<a href="#l47.36"></a><span id="l47.36"> # of values.</span>
<a href="#l47.37"></a><span id="l47.37"> ACCEPTED_MAR_CHANNEL_IDS=thunderbird-comm-central</span>
<a href="#l47.38"></a><span id="l47.38"> # The MAR_CHANNEL_ID must not contain the following 3 characters: &quot;,\t &quot;</span>
<a href="#l47.39"></a><span id="l47.39"> MAR_CHANNEL_ID=thunderbird-comm-central</span>
<a href="#l47.40"></a><span id="l47.40"> MOZ_PROFILE_MIGRATOR=1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mail/extensions/smime/jar.mn</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mail/extensions/smime/jar.mn</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -9,21 +9,21 @@ messenger.jar:</span>
<a href="#l48.4"></a><span id="l48.4"> % overlay chrome://messenger/content/messenger.xul chrome://messenger-smime/content/msgReadSMIMEOverlay.xul</span>
<a href="#l48.5"></a><span id="l48.5"> % overlay chrome://messenger/content/messageWindow.xul chrome://messenger-smime/content/msgReadSMIMEOverlay.xul</span>
<a href="#l48.6"></a><span id="l48.6"> % overlay chrome://messenger/content/am-identity-edit.xul chrome://messenger/content/am-smimeIdentityEditOverlay.xul</span>
<a href="#l48.7"></a><span id="l48.7">    content/messenger-smime/msgReadSMIMEOverlay.xul                  (content/msgReadSMIMEOverlay.xul)</span>
<a href="#l48.8"></a><span id="l48.8">    content/messenger-smime/msgCompSMIMEOverlay.xul                  (content/msgCompSMIMEOverlay.xul)</span>
<a href="#l48.9"></a><span id="l48.9">    content/messenger-smime/msgCompSMIMEOverlay.js                   (content/msgCompSMIMEOverlay.js)</span>
<a href="#l48.10"></a><span id="l48.10">    content/messenger-smime/msgHdrViewSMIMEOverlay.js                (content/msgHdrViewSMIMEOverlay.js)</span>
<a href="#l48.11"></a><span id="l48.11">    content/messenger-smime/msgHdrViewSMIMEOverlay.xul               (content/msgHdrViewSMIMEOverlay.xul)</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-   content/messenger/am-smime.xul                                   (/mailnews/extensions/smime/content/am-smime.xul)</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineminus">-   content/messenger/am-smime.js                                    (/mailnews/extensions/smime/content/am-smime.js)</span>
<a href="#l48.14"></a><span id="l48.14" class="difflineminus">-   content/messenger/am-smimeIdentityEditOverlay.xul                (/mailnews/extensions/smime/content/am-smimeIdentityEditOverlay.xul)</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineminus">-   content/messenger/am-smimeOverlay.xul                            (/mailnews/extensions/smime/content/am-smimeOverlay.xul)</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineminus">-   content/messenger/certpicker.js                                  (/mailnews/extensions/smime/content/certpicker.js)</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineminus">-   content/messenger/certpicker.xul                                 (/mailnews/extensions/smime/content/certpicker.xul)</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineminus">-   content/messenger-smime/msgReadSMIMEOverlay.js                   (/mailnews/extensions/smime/content/msgReadSMIMEOverlay.js)</span>
<a href="#l48.19"></a><span id="l48.19" class="difflineminus">-   content/messenger-smime/msgCompSecurityInfo.js                   (/mailnews/extensions/smime/content/msgCompSecurityInfo.js)</span>
<a href="#l48.20"></a><span id="l48.20" class="difflineminus">-   content/messenger-smime/msgCompSecurityInfo.xul                  (/mailnews/extensions/smime/content/msgCompSecurityInfo.xul)</span>
<a href="#l48.21"></a><span id="l48.21" class="difflineminus">-   content/messenger-smime/msgReadSecurityInfo.xul                  (/mailnews/extensions/smime/content/msgReadSecurityInfo.xul)</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineminus">-   content/messenger-smime/msgReadSecurityInfo.js                   (/mailnews/extensions/smime/content/msgReadSecurityInfo.js)</span>
<a href="#l48.23"></a><span id="l48.23" class="difflineminus">-   content/messenger-smime/certFetchingStatus.xul                   (/mailnews/extensions/smime/content/certFetchingStatus.xul)</span>
<a href="#l48.24"></a><span id="l48.24" class="difflineminus">-   content/messenger-smime/certFetchingStatus.js                    (/mailnews/extensions/smime/content/certFetchingStatus.js)</span>
<a href="#l48.25"></a><span id="l48.25" class="difflineplus">+   content/messenger/am-smime.xul                                   (../../../mailnews/extensions/smime/content/am-smime.xul)</span>
<a href="#l48.26"></a><span id="l48.26" class="difflineplus">+   content/messenger/am-smime.js                                    (../../../mailnews/extensions/smime/content/am-smime.js)</span>
<a href="#l48.27"></a><span id="l48.27" class="difflineplus">+   content/messenger/am-smimeIdentityEditOverlay.xul                (../../../mailnews/extensions/smime/content/am-smimeIdentityEditOverlay.xul)</span>
<a href="#l48.28"></a><span id="l48.28" class="difflineplus">+   content/messenger/am-smimeOverlay.xul                            (../../../mailnews/extensions/smime/content/am-smimeOverlay.xul)</span>
<a href="#l48.29"></a><span id="l48.29" class="difflineplus">+   content/messenger/certpicker.js                                  (../../../mailnews/extensions/smime/content/certpicker.js)</span>
<a href="#l48.30"></a><span id="l48.30" class="difflineplus">+   content/messenger/certpicker.xul                                 (../../../mailnews/extensions/smime/content/certpicker.xul)</span>
<a href="#l48.31"></a><span id="l48.31" class="difflineplus">+   content/messenger-smime/msgReadSMIMEOverlay.js                   (../../../mailnews/extensions/smime/content/msgReadSMIMEOverlay.js)</span>
<a href="#l48.32"></a><span id="l48.32" class="difflineplus">+   content/messenger-smime/msgCompSecurityInfo.js                   (../../../mailnews/extensions/smime/content/msgCompSecurityInfo.js)</span>
<a href="#l48.33"></a><span id="l48.33" class="difflineplus">+   content/messenger-smime/msgCompSecurityInfo.xul                  (../../../mailnews/extensions/smime/content/msgCompSecurityInfo.xul)</span>
<a href="#l48.34"></a><span id="l48.34" class="difflineplus">+   content/messenger-smime/msgReadSecurityInfo.xul                  (../../../mailnews/extensions/smime/content/msgReadSecurityInfo.xul)</span>
<a href="#l48.35"></a><span id="l48.35" class="difflineplus">+   content/messenger-smime/msgReadSecurityInfo.js                   (../../../mailnews/extensions/smime/content/msgReadSecurityInfo.js)</span>
<a href="#l48.36"></a><span id="l48.36" class="difflineplus">+   content/messenger-smime/certFetchingStatus.xul                   (../../../mailnews/extensions/smime/content/certFetchingStatus.xul)</span>
<a href="#l48.37"></a><span id="l48.37" class="difflineplus">+   content/messenger-smime/certFetchingStatus.js                    (../../../mailnews/extensions/smime/content/certFetchingStatus.js)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mail/installer/Makefile.in</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mail/installer/Makefile.in</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -1,27 +1,30 @@</span>
<a href="#l49.4"></a><span id="l49.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l49.5"></a><span id="l49.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l49.6"></a><span id="l49.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l49.7"></a><span id="l49.7"> </span>
<a href="#l49.8"></a><span id="l49.8"> STANDALONE_MAKEFILE := 1</span>
<a href="#l49.9"></a><span id="l49.9"> # DIST_SUBDIR := mail  # Not sure why TB is not using this</span>
<a href="#l49.10"></a><span id="l49.10"> </span>
<a href="#l49.11"></a><span id="l49.11" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineplus">+# Since STANDALONE_MAKEFILE is defined we need to manually include our config</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+include $(commtopsrcdir)/mail/app-config.mk</span>
<a href="#l49.14"></a><span id="l49.14" class="difflineplus">+</span>
<a href="#l49.15"></a><span id="l49.15" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l49.16"></a><span id="l49.16"> </span>
<a href="#l49.17"></a><span id="l49.17"> MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in</span>
<a href="#l49.18"></a><span id="l49.18"> </span>
<a href="#l49.19"></a><span id="l49.19"> MOZ_PKG_MANIFEST_P = $(srcdir)/package-manifest.in</span>
<a href="#l49.20"></a><span id="l49.20"> # Some files have been already bundled with xulrunner</span>
<a href="#l49.21"></a><span id="l49.21"> ifndef SYSTEM_LIBXUL</span>
<a href="#l49.22"></a><span id="l49.22"> MOZ_PKG_FATAL_WARNINGS = 1</span>
<a href="#l49.23"></a><span id="l49.23"> endif</span>
<a href="#l49.24"></a><span id="l49.24"> MOZ_PKG_DUPEFLAGS = \</span>
<a href="#l49.25"></a><span id="l49.25"> 	-f $(srcdir)/allowed-dupes.mn \</span>
<a href="#l49.26"></a><span id="l49.26" class="difflineminus">-	-f $(MOZILLA_DIR)/browser/installer/allowed-dupes.mn \</span>
<a href="#l49.27"></a><span id="l49.27" class="difflineplus">+	-f $(moztopsrcdir)/browser/installer/allowed-dupes.mn \</span>
<a href="#l49.28"></a><span id="l49.28"> 	$(NULL)</span>
<a href="#l49.29"></a><span id="l49.29"> </span>
<a href="#l49.30"></a><span id="l49.30"> MOZ_NONLOCALIZED_PKG_LIST = \</span>
<a href="#l49.31"></a><span id="l49.31"> 	xpcom \</span>
<a href="#l49.32"></a><span id="l49.32"> 	mail \</span>
<a href="#l49.33"></a><span id="l49.33"> 	newsblog \</span>
<a href="#l49.34"></a><span id="l49.34"> 	offline \</span>
<a href="#l49.35"></a><span id="l49.35"> 	$(NULL)</span>
<a href="#l49.36"></a><span id="l49.36" class="difflineat">@@ -127,18 +130,18 @@ ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l49.37"></a><span id="l49.37"> MOZ_PKG_MAC_DSSTORE=branding/dsstore</span>
<a href="#l49.38"></a><span id="l49.38"> MOZ_PKG_MAC_BACKGROUND=branding/background.png</span>
<a href="#l49.39"></a><span id="l49.39"> MOZ_PKG_MAC_ICON=branding/disk.icns</span>
<a href="#l49.40"></a><span id="l49.40"> MOZ_PKG_MAC_EXTRA=--symlink '/Applications:/ '</span>
<a href="#l49.41"></a><span id="l49.41"> endif</span>
<a href="#l49.42"></a><span id="l49.42"> </span>
<a href="#l49.43"></a><span id="l49.43"> NON_OMNIJAR_FILES = defaults/messenger/mailViews.dat</span>
<a href="#l49.44"></a><span id="l49.44"> </span>
<a href="#l49.45"></a><span id="l49.45" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/signing.mk</span>
<a href="#l49.46"></a><span id="l49.46" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/packager.mk</span>
<a href="#l49.47"></a><span id="l49.47" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/signing.mk</span>
<a href="#l49.48"></a><span id="l49.48" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/packager.mk</span>
<a href="#l49.49"></a><span id="l49.49"> </span>
<a href="#l49.50"></a><span id="l49.50"> ifeq (bundle, $(MOZ_FS_LAYOUT))</span>
<a href="#l49.51"></a><span id="l49.51"> BINPATH = $(_BINPATH)</span>
<a href="#l49.52"></a><span id="l49.52"> DEFINES += -DAPPNAME=$(_APPNAME)</span>
<a href="#l49.53"></a><span id="l49.53"> else</span>
<a href="#l49.54"></a><span id="l49.54"> # Every other platform just winds up in dist/bin</span>
<a href="#l49.55"></a><span id="l49.55"> BINPATH = bin</span>
<a href="#l49.56"></a><span id="l49.56"> endif</span>
<a href="#l49.57"></a><span id="l49.57" class="difflineat">@@ -171,17 +174,17 @@ DEFINES += -DICU_DATA_FILE=$(ICU_DATA_FI</span>
<a href="#l49.58"></a><span id="l49.58"> ifdef CLANG_CXX</span>
<a href="#l49.59"></a><span id="l49.59"> DEFINES += -DCLANG_CXX</span>
<a href="#l49.60"></a><span id="l49.60"> endif</span>
<a href="#l49.61"></a><span id="l49.61"> ifdef CLANG_CL</span>
<a href="#l49.62"></a><span id="l49.62"> DEFINES += -DCLANG_CL</span>
<a href="#l49.63"></a><span id="l49.63"> endif</span>
<a href="#l49.64"></a><span id="l49.64"> </span>
<a href="#l49.65"></a><span id="l49.65"> libs::</span>
<a href="#l49.66"></a><span id="l49.66" class="difflineminus">-	$(MAKE) -C $(DEPTH)/mail/locales langpack</span>
<a href="#l49.67"></a><span id="l49.67" class="difflineplus">+	$(MAKE) -C $(COMMDEPTH)/mail/locales langpack</span>
<a href="#l49.68"></a><span id="l49.68"> </span>
<a href="#l49.69"></a><span id="l49.69"> ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l49.70"></a><span id="l49.70"> PKGCOMP_FIND_OPTS =</span>
<a href="#l49.71"></a><span id="l49.71"> else</span>
<a href="#l49.72"></a><span id="l49.72"> PKGCOMP_FIND_OPTS = -L</span>
<a href="#l49.73"></a><span id="l49.73"> endif</span>
<a href="#l49.74"></a><span id="l49.74"> ifeq (Darwin, $(OS_ARCH))</span>
<a href="#l49.75"></a><span id="l49.75"> FINDPATH = $(_APPNAME)/Contents/MacOS</span>
<a href="#l49.76"></a><span id="l49.76" class="difflineat">@@ -198,12 +201,12 @@ ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l49.77"></a><span id="l49.77"> endif</span>
<a href="#l49.78"></a><span id="l49.78"> </span>
<a href="#l49.79"></a><span id="l49.79"> installer::</span>
<a href="#l49.80"></a><span id="l49.80"> ifdef INSTALLER_DIR</span>
<a href="#l49.81"></a><span id="l49.81"> 	$(MAKE) -C $(INSTALLER_DIR)</span>
<a href="#l49.82"></a><span id="l49.82"> endif</span>
<a href="#l49.83"></a><span id="l49.83"> </span>
<a href="#l49.84"></a><span id="l49.84"> # The comm-* source stamp is already there.</span>
<a href="#l49.85"></a><span id="l49.85" class="difflineminus">-PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; parent --template=&quot;{node}\n&quot; 2&gt;/dev/null))</span>
<a href="#l49.86"></a><span id="l49.86" class="difflineminus">-PLATFORM_SOURCE_REPO = $(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/https:/&quot;)</span>
<a href="#l49.87"></a><span id="l49.87" class="difflineplus">+PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}\n&quot; 2&gt;/dev/null))</span>
<a href="#l49.88"></a><span id="l49.88" class="difflineplus">+PLATFORM_SOURCE_REPO = $(shell hg -R &quot;$(moztopsrcdir)&quot; showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/https:/&quot;)</span>
<a href="#l49.89"></a><span id="l49.89"> make-sourcestamp-file::</span>
<a href="#l49.90"></a><span id="l49.90"> 	@echo &quot;$(PLATFORM_SOURCE_REPO)/rev/$(PLATFORM_SOURCE_STAMP)&quot; &gt;&gt; $(MOZ_SOURCESTAMP_FILE)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mail/installer/windows/Makefile.in</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mail/installer/windows/Makefile.in</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l50.4"></a><span id="l50.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l50.5"></a><span id="l50.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l50.6"></a><span id="l50.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l50.7"></a><span id="l50.7"> </span>
<a href="#l50.8"></a><span id="l50.8" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l50.9"></a><span id="l50.9" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l50.10"></a><span id="l50.10"> </span>
<a href="#l50.11"></a><span id="l50.11"> CONFIG_DIR = instgen</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-SFX_MODULE = $(topsrcdir)/other-licenses/7zstub/thunderbird/7zSD.sfx</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+SFX_MODULE = $(commtopsrcdir)/other-licenses/7zstub/thunderbird/7zSD.sfx</span>
<a href="#l50.14"></a><span id="l50.14"> </span>
<a href="#l50.15"></a><span id="l50.15"> DEFINES += -DMOZ_APP_VERSION=$(MOZ_APP_VERSION)</span>
<a href="#l50.16"></a><span id="l50.16"> PRE_RELEASE_SUFFIX := &quot;&quot;</span>
<a href="#l50.17"></a><span id="l50.17"> DEFINES += -DPRE_RELEASE_SUFFIX=&quot;$(PRE_RELEASE_SUFFIX)&quot;</span>
<a href="#l50.18"></a><span id="l50.18"> </span>
<a href="#l50.19"></a><span id="l50.19"> ifdef MOZ_UPDATER</span>
<a href="#l50.20"></a><span id="l50.20"> DEFINES += -DMOZ_UPDATER=1</span>
<a href="#l50.21"></a><span id="l50.21"> endif</span>
<a href="#l50.22"></a><span id="l50.22" class="difflineat">@@ -37,23 +37,23 @@ BRANDING_FILES = \</span>
<a href="#l50.23"></a><span id="l50.23"> 	$(NULL)</span>
<a href="#l50.24"></a><span id="l50.24"> </span>
<a href="#l50.25"></a><span id="l50.25"> DEFINES += \</span>
<a href="#l50.26"></a><span id="l50.26"> 	-DMOZ_APP_NAME=$(MOZ_APP_NAME) \</span>
<a href="#l50.27"></a><span id="l50.27"> 	-DMOZ_APP_DISPLAYNAME='${MOZ_APP_DISPLAYNAME}' \</span>
<a href="#l50.28"></a><span id="l50.28"> 	-DMOZILLA_VERSION=${MOZILLA_VERSION} \</span>
<a href="#l50.29"></a><span id="l50.29"> 	$(NULL)</span>
<a href="#l50.30"></a><span id="l50.30"> </span>
<a href="#l50.31"></a><span id="l50.31" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l50.32"></a><span id="l50.32" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l50.33"></a><span id="l50.33"> </span>
<a href="#l50.34"></a><span id="l50.34"> ifdef LOCALE_MERGEDIR</span>
<a href="#l50.35"></a><span id="l50.35"> PPL_LOCALE_ARGS = \</span>
<a href="#l50.36"></a><span id="l50.36">   --l10n-dir=$(LOCALE_MERGEDIR)/mail/installer \</span>
<a href="#l50.37"></a><span id="l50.37">   --l10n-dir=$(call EXPAND_LOCALE_SRCDIR,mail/locales)/installer \</span>
<a href="#l50.38"></a><span id="l50.38" class="difflineminus">-  --l10n-dir=$(topsrcdir)/mail/locales/en-US/installer \</span>
<a href="#l50.39"></a><span id="l50.39" class="difflineplus">+  --l10n-dir=$(commtopsrcdir)/mail/locales/en-US/installer \</span>
<a href="#l50.40"></a><span id="l50.40">   $(NULL)</span>
<a href="#l50.41"></a><span id="l50.41"> else</span>
<a href="#l50.42"></a><span id="l50.42"> PPL_LOCALE_ARGS=$(call EXPAND_LOCALE_SRCDIR,mail/locales)/installer</span>
<a href="#l50.43"></a><span id="l50.43"> endif</span>
<a href="#l50.44"></a><span id="l50.44"> </span>
<a href="#l50.45"></a><span id="l50.45"> OVERRIDE_DEFAULT_GOAL := installer</span>
<a href="#l50.46"></a><span id="l50.46"> installer::</span>
<a href="#l50.47"></a><span id="l50.47"> 	$(MAKE) -C .. installer-stage</span>
<a href="#l50.48"></a><span id="l50.48" class="difflineat">@@ -62,35 +62,35 @@ installer::</span>
<a href="#l50.49"></a><span id="l50.49"> # For building the uninstaller during the application build so it can be</span>
<a href="#l50.50"></a><span id="l50.50"> # included for mar file generation.</span>
<a href="#l50.51"></a><span id="l50.51"> uninstaller::</span>
<a href="#l50.52"></a><span id="l50.52"> 	$(RM) -r $(CONFIG_DIR) &amp;&amp; mkdir $(CONFIG_DIR)</span>
<a href="#l50.53"></a><span id="l50.53"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l50.54"></a><span id="l50.54"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l50.55"></a><span id="l50.55"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l50.56"></a><span id="l50.56"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l50.57"></a><span id="l50.57" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l50.58"></a><span id="l50.58" class="difflineminus">-	  --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l50.59"></a><span id="l50.59" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l50.60"></a><span id="l50.60" class="difflineplus">+	  --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l50.61"></a><span id="l50.61"> 	  $(PPL_LOCALE_ARGS) $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l50.62"></a><span id="l50.62"> </span>
<a href="#l50.63"></a><span id="l50.63"> # For building the maintenanceservice installer</span>
<a href="#l50.64"></a><span id="l50.64"> ifdef MOZ_MAINTENANCE_SERVICE</span>
<a href="#l50.65"></a><span id="l50.65"> maintenanceservice_installer::</span>
<a href="#l50.66"></a><span id="l50.66"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l50.67"></a><span id="l50.67"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l50.68"></a><span id="l50.68"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l50.69"></a><span id="l50.69" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l50.70"></a><span id="l50.70" class="difflineminus">-	  --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l50.71"></a><span id="l50.71" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l50.72"></a><span id="l50.72" class="difflineplus">+	  --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l50.73"></a><span id="l50.73"> 	  $(PPL_LOCALE_ARGS) $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l50.74"></a><span id="l50.74"> endif</span>
<a href="#l50.75"></a><span id="l50.75"> </span>
<a href="#l50.76"></a><span id="l50.76"> $(CONFIG_DIR)/setup.exe::</span>
<a href="#l50.77"></a><span id="l50.77"> 	$(RM) -r $(CONFIG_DIR) &amp;&amp; mkdir $(CONFIG_DIR)</span>
<a href="#l50.78"></a><span id="l50.78"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l50.79"></a><span id="l50.79"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l50.80"></a><span id="l50.80"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l50.81"></a><span id="l50.81"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l50.82"></a><span id="l50.82" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l50.83"></a><span id="l50.83" class="difflineminus">-	  --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l50.84"></a><span id="l50.84" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l50.85"></a><span id="l50.85" class="difflineplus">+	  --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l50.86"></a><span id="l50.86"> 	  $(PPL_LOCALE_ARGS) $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l50.87"></a><span id="l50.87"> </span>
<a href="#l50.88"></a><span id="l50.88" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l50.89"></a><span id="l50.89" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/makensis.mk</span>
<a href="#l50.90"></a><span id="l50.90" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l50.91"></a><span id="l50.91" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/makensis.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/locales/Makefile.in</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/locales/Makefile.in</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l51.4"></a><span id="l51.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l51.5"></a><span id="l51.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l51.6"></a><span id="l51.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l51.9"></a><span id="l51.9" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l51.10"></a><span id="l51.10"> </span>
<a href="#l51.11"></a><span id="l51.11" class="difflineminus">-_ABS_SRCDIR := $(abspath $(topsrcdir))</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineplus">+_ABS_SRCDIR := $(abspath $(commtopsrcdir))</span>
<a href="#l51.13"></a><span id="l51.13"> </span>
<a href="#l51.14"></a><span id="l51.14"> SUBMAKEFILES += \</span>
<a href="#l51.15"></a><span id="l51.15"> 	$(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/Makefile \</span>
<a href="#l51.16"></a><span id="l51.16"> 	$(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/locales/Makefile \</span>
<a href="#l51.17"></a><span id="l51.17"> 	$(NULL)</span>
<a href="#l51.18"></a><span id="l51.18"> </span>
<a href="#l51.19"></a><span id="l51.19"> # This makefile uses variable overrides from the libs-% target to</span>
<a href="#l51.20"></a><span id="l51.20"> # build non-default locales to non-default dist/ locations. Be aware!</span>
<a href="#l51.21"></a><span id="l51.21" class="difflineat">@@ -35,18 +35,18 @@ PP_TARGETS += L10N_PREF_JS_EXPORTS</span>
<a href="#l51.22"></a><span id="l51.22"> </span>
<a href="#l51.23"></a><span id="l51.23"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l51.24"></a><span id="l51.24"> MOZ_PKG_MAC_DSSTORE=$(ABS_DIST)/branding/dsstore</span>
<a href="#l51.25"></a><span id="l51.25"> MOZ_PKG_MAC_BACKGROUND=$(ABS_DIST)/branding/background.png</span>
<a href="#l51.26"></a><span id="l51.26"> MOZ_PKG_MAC_ICON=$(ABS_DIST)/branding/disk.icns</span>
<a href="#l51.27"></a><span id="l51.27"> MOZ_PKG_MAC_EXTRA=--symlink '/Applications:/ '</span>
<a href="#l51.28"></a><span id="l51.28"> endif</span>
<a href="#l51.29"></a><span id="l51.29"> </span>
<a href="#l51.30"></a><span id="l51.30" class="difflineminus">-MOZ_SFX_PACKAGE=$(topsrcdir)/other-licenses/7zstub/thunderbird/7zSD.sfx</span>
<a href="#l51.31"></a><span id="l51.31" class="difflineminus">-MOZ_INSTALLER_PATH=$(topsrcdir)/mail/installer/windows</span>
<a href="#l51.32"></a><span id="l51.32" class="difflineplus">+MOZ_SFX_PACKAGE=$(commtopsrcdir)/other-licenses/7zstub/thunderbird/7zSD.sfx</span>
<a href="#l51.33"></a><span id="l51.33" class="difflineplus">+MOZ_INSTALLER_PATH=$(commtopsrcdir)/mail/installer/windows</span>
<a href="#l51.34"></a><span id="l51.34"> </span>
<a href="#l51.35"></a><span id="l51.35"> ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l51.36"></a><span id="l51.36"> UNINSTALLER_PACKAGE_HOOK = $(RM) -r $(STAGEDIST)/uninstall; \</span>
<a href="#l51.37"></a><span id="l51.37">     $(NSINSTALL) -D $(STAGEDIST)/uninstall; \</span>
<a href="#l51.38"></a><span id="l51.38">     cp ../installer/windows/l10ngen/helper.exe $(STAGEDIST)/uninstall; \</span>
<a href="#l51.39"></a><span id="l51.39">     $(RM) $(ABS_DIST)/l10n-stage/setup.exe; \</span>
<a href="#l51.40"></a><span id="l51.40">     cp ../installer/windows/l10ngen/setup.exe $(ABS_DIST)/l10n-stage; \</span>
<a href="#l51.41"></a><span id="l51.41">     $(NULL)</span>
<a href="#l51.42"></a><span id="l51.42" class="difflineat">@@ -67,19 +67,19 @@ list-json = $(SEARCHPLUGINS_PATH)/list.j</span>
<a href="#l51.43"></a><span id="l51.43"> GARBAGE += $(list-json)</span>
<a href="#l51.44"></a><span id="l51.44"> </span>
<a href="#l51.45"></a><span id="l51.45"> libs:: searchplugins</span>
<a href="#l51.46"></a><span id="l51.46"> </span>
<a href="#l51.47"></a><span id="l51.47"> # Required for l10n.mk - defines a list of app sub dirs that should</span>
<a href="#l51.48"></a><span id="l51.48"> # be included in langpack xpis.</span>
<a href="#l51.49"></a><span id="l51.49"> DIST_SUBDIRS = $(DIST_SUBDIR)</span>
<a href="#l51.50"></a><span id="l51.50"> </span>
<a href="#l51.51"></a><span id="l51.51" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l51.52"></a><span id="l51.52" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l51.53"></a><span id="l51.53"> </span>
<a href="#l51.54"></a><span id="l51.54" class="difflineminus">-include $(topsrcdir)/mozilla/toolkit/locales/l10n.mk</span>
<a href="#l51.55"></a><span id="l51.55" class="difflineplus">+include $(moztopsrcdir)/toolkit/locales/l10n.mk</span>
<a href="#l51.56"></a><span id="l51.56"> </span>
<a href="#l51.57"></a><span id="l51.57"> $(list-json): $(call mkdir_deps,$(SEARCHPLUGINS_PATH)) $(if $(IS_LANGUAGE_REPACK),FORCE)</span>
<a href="#l51.58"></a><span id="l51.58"> 	$(call py_action,generate_searchjson,$(srcdir)/search/list.json $(AB_CD) $(list-json))</span>
<a href="#l51.59"></a><span id="l51.59"> searchplugins:: $(list-json)</span>
<a href="#l51.60"></a><span id="l51.60"> </span>
<a href="#l51.61"></a><span id="l51.61"> $(DIST)/branding:</span>
<a href="#l51.62"></a><span id="l51.62"> 	$(NSINSTALL) -D $@</span>
<a href="#l51.63"></a><span id="l51.63"> </span>
<a href="#l51.64"></a><span id="l51.64" class="difflineat">@@ -142,23 +142,23 @@ else</span>
<a href="#l51.65"></a><span id="l51.65"> 	  sed -e 's/^InfoText=/Info=/' -e 's/^TitleText=/Title=/' | \</span>
<a href="#l51.66"></a><span id="l51.66"> 	  sed -e 's/%MOZ_APP_DISPLAYNAME%/$(MOZ_APP_DISPLAYNAME)/' &gt; \</span>
<a href="#l51.67"></a><span id="l51.67"> 	  $(FINAL_TARGET)/updater.ini</span>
<a href="#l51.68"></a><span id="l51.68"> endif</span>
<a href="#l51.69"></a><span id="l51.69"> endif</span>
<a href="#l51.70"></a><span id="l51.70"> </span>
<a href="#l51.71"></a><span id="l51.71"> ident:</span>
<a href="#l51.72"></a><span id="l51.72"> 	@printf 'comm_revision '</span>
<a href="#l51.73"></a><span id="l51.73" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l51.74"></a><span id="l51.74" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l51.75"></a><span id="l51.75"> 	    $(STAGEDIST)/application.ini App SourceStamp</span>
<a href="#l51.76"></a><span id="l51.76"> 	@printf 'moz_revision '</span>
<a href="#l51.77"></a><span id="l51.77" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l51.78"></a><span id="l51.78" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l51.79"></a><span id="l51.79"> 	    $(STAGEDIST)/platform.ini Build SourceStamp</span>
<a href="#l51.80"></a><span id="l51.80"> 	@printf 'buildid '</span>
<a href="#l51.81"></a><span id="l51.81" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l51.82"></a><span id="l51.82" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l51.83"></a><span id="l51.83"> 	    $(STAGEDIST)/application.ini App BuildID</span>
<a href="#l51.84"></a><span id="l51.84"> </span>
<a href="#l51.85"></a><span id="l51.85"> #These make targets call prepare-repackages by setting different UPLOAD_DIR</span>
<a href="#l51.86"></a><span id="l51.86"> prepare-upload-latest-%:</span>
<a href="#l51.87"></a><span id="l51.87"> 	@$(MAKE) prepare-repackages-$* UPLOAD_DIR=$(DIST)/upload/latest</span>
<a href="#l51.88"></a><span id="l51.88"> </span>
<a href="#l51.89"></a><span id="l51.89"> prepare-upload-dated-%:</span>
<a href="#l51.90"></a><span id="l51.90"> 	@$(MAKE) prepare-repackages-$* UPLOAD_DIR=$(DIST)/upload/`date &quot;+%Y-%m-%d-%H&quot;`-$(MOZ_PKG_APPNAME)$(MOZ_APP_VERSION)-l10n</span>
<a href="#l51.91"></a><span id="l51.91" class="difflineat">@@ -194,18 +194,18 @@ endif</span>
<a href="#l51.92"></a><span id="l51.92"> # try to repack x-test, with just toolkit/defines.inc being there</span>
<a href="#l51.93"></a><span id="l51.93"> l10n-check::</span>
<a href="#l51.94"></a><span id="l51.94"> 	$(RM) -rf x-test</span>
<a href="#l51.95"></a><span id="l51.95"> 	$(NSINSTALL) -D x-test/toolkit</span>
<a href="#l51.96"></a><span id="l51.96"> 	echo '#define MOZ_LANG_TITLE Just testing' &gt; x-test/toolkit/defines.inc</span>
<a href="#l51.97"></a><span id="l51.97"> 	$(MAKE) installers-x-test L10NBASEDIR='$(PWD)'</span>
<a href="#l51.98"></a><span id="l51.98"> </span>
<a href="#l51.99"></a><span id="l51.99"> ifdef MOZ_CALENDAR</span>
<a href="#l51.100"></a><span id="l51.100" class="difflineminus">-LIGHTNING_PATH=$(DEPTH)/calendar/lightning</span>
<a href="#l51.101"></a><span id="l51.101" class="difflineminus">-GDATA_PATH=$(DEPTH)/calendar/providers/gdata</span>
<a href="#l51.102"></a><span id="l51.102" class="difflineplus">+LIGHTNING_PATH=$(COMMDEPTH)/calendar/lightning</span>
<a href="#l51.103"></a><span id="l51.103" class="difflineplus">+GDATA_PATH=$(COMMDEPTH)/calendar/providers/gdata</span>
<a href="#l51.104"></a><span id="l51.104"> </span>
<a href="#l51.105"></a><span id="l51.105"> define run-calendar-rule</span>
<a href="#l51.106"></a><span id="l51.106"> $(MAKE) -C $(LIGHTNING_PATH) $(subst calendar-,,$@) AB_CD=$(AB_CD)</span>
<a href="#l51.107"></a><span id="l51.107"> $(MAKE) -C $(GDATA_PATH) $(subst calendar-,,$@) AB_CD=$(AB_CD)</span>
<a href="#l51.108"></a><span id="l51.108"> endef</span>
<a href="#l51.109"></a><span id="l51.109"> </span>
<a href="#l51.110"></a><span id="l51.110"> # Add calendar targets for pattern rules. Unfortunately multiple pattern rules</span>
<a href="#l51.111"></a><span id="l51.111"> # on the left hand side do something different with make, therefore we need to</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mail/moz.build</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mail/moz.build</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -13,12 +13,12 @@ DIRS += [</span>
<a href="#l52.4"></a><span id="l52.4">     'themes',</span>
<a href="#l52.5"></a><span id="l52.5">     'app',</span>
<a href="#l52.6"></a><span id="l52.6"> ]</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> if CONFIG['MAKENSISU']:</span>
<a href="#l52.9"></a><span id="l52.9">     DIRS += ['installer/windows']</span>
<a href="#l52.10"></a><span id="l52.10"> </span>
<a href="#l52.11"></a><span id="l52.11"> if CONFIG['MOZ_BUNDLED_FONTS']:</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    DIRS += ['/mozilla/browser/fonts']</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+    DIRS += ['/%s/browser/fonts' % CONFIG['mozreltopsrcdir']]</span>
<a href="#l52.14"></a><span id="l52.14"> </span>
<a href="#l52.15"></a><span id="l52.15"> TEST_DIRS += ['test/mozmill']</span>
<a href="#l52.16"></a><span id="l52.16"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mail/test/mozmill/Makefile.in</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mail/test/mozmill/Makefile.in</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -1,35 +1,35 @@</span>
<a href="#l53.4"></a><span id="l53.4"> #</span>
<a href="#l53.5"></a><span id="l53.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l53.6"></a><span id="l53.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l53.7"></a><span id="l53.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l53.8"></a><span id="l53.8"> </span>
<a href="#l53.9"></a><span id="l53.9" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l53.10"></a><span id="l53.10" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l53.11"></a><span id="l53.11"> </span>
<a href="#l53.12"></a><span id="l53.12"> # We're installing to _tests/mozmill</span>
<a href="#l53.13"></a><span id="l53.13"> _DEST_DIR = $(DEPTH)/_tests/mozmill</span>
<a href="#l53.14"></a><span id="l53.14"> </span>
<a href="#l53.15"></a><span id="l53.15"> $(_DEST_DIR):</span>
<a href="#l53.16"></a><span id="l53.16"> 	$(NSINSTALL) -D $@</span>
<a href="#l53.17"></a><span id="l53.17"> </span>
<a href="#l53.18"></a><span id="l53.18"> </span>
<a href="#l53.19"></a><span id="l53.19"> # Copy MozMill and its dependencies over, and set up a virtualenv. The</span>
<a href="#l53.20"></a><span id="l53.20"> # virtualenv directory is outside because we don't want to bundle it up during</span>
<a href="#l53.21"></a><span id="l53.21"> # stage-package.</span>
<a href="#l53.22"></a><span id="l53.22"> VIRTUALENV_DIR = $(_DEST_DIR)/../mozmill-virtualenv</span>
<a href="#l53.23"></a><span id="l53.23"> mozmill-virtualenv: NSDISTMODE=copy</span>
<a href="#l53.24"></a><span id="l53.24"> mozmill-virtualenv: $(_DEST_DIR)</span>
<a href="#l53.25"></a><span id="l53.25" class="difflineminus">-	$(INSTALL) $(topsrcdir)/mail/test/resources $(_DEST_DIR)</span>
<a href="#l53.26"></a><span id="l53.26" class="difflineminus">-	$(INSTALL) $(topsrcdir)/mozilla/third_party/python/virtualenv $(_DEST_DIR)/resources/</span>
<a href="#l53.27"></a><span id="l53.27" class="difflineplus">+	$(INSTALL) $(commtopsrcdir)/mail/test/resources $(_DEST_DIR)</span>
<a href="#l53.28"></a><span id="l53.28" class="difflineplus">+	$(INSTALL) $(moztopsrcdir)/third_party/python/virtualenv $(_DEST_DIR)/resources/</span>
<a href="#l53.29"></a><span id="l53.29"> 	rm -rf $(VIRTUALENV_DIR) &amp;&amp; \</span>
<a href="#l53.30"></a><span id="l53.30"> 	mkdir $(VIRTUALENV_DIR) &amp;&amp; \</span>
<a href="#l53.31"></a><span id="l53.31"> 	unset MACOSX_DEPLOYMENT_TARGET &amp;&amp; \</span>
<a href="#l53.32"></a><span id="l53.32" class="difflineminus">-	$(PYTHON) $(_DEST_DIR)/resources/installmozmill.py $(VIRTUALENV_DIR) $(MOZILLA_DIR)/testing/mozbase</span>
<a href="#l53.33"></a><span id="l53.33" class="difflineplus">+	$(PYTHON) $(_DEST_DIR)/resources/installmozmill.py $(VIRTUALENV_DIR) $(moztopsrcdir)/testing/mozbase</span>
<a href="#l53.34"></a><span id="l53.34"> </span>
<a href="#l53.35"></a><span id="l53.35"> libs:: mozmill-virtualenv</span>
<a href="#l53.36"></a><span id="l53.36"> </span>
<a href="#l53.37"></a><span id="l53.37"> PKG_STAGE = $(DIST)/test-stage</span>
<a href="#l53.38"></a><span id="l53.38"> </span>
<a href="#l53.39"></a><span id="l53.39"> stage-package:</span>
<a href="#l53.40"></a><span id="l53.40"> 	$(NSINSTALL) -D $(PKG_STAGE)/mozmill/</span>
<a href="#l53.41"></a><span id="l53.41" class="difflineminus">-	@(cd $(topsrcdir)/mail/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/ &amp;&amp; tar -xf -)</span>
<a href="#l53.42"></a><span id="l53.42" class="difflineplus">+	@(cd $(commtopsrcdir)/mail/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/ &amp;&amp; tar -xf -)</span>
<a href="#l53.43"></a><span id="l53.43"> 	@(cd $(DEPTH)/_tests/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/ &amp;&amp; tar -xf -)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mail/test/mozmill/moz.build</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mail/test/mozmill/moz.build</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -5,13 +5,12 @@</span>
<a href="#l54.4"></a><span id="l54.4"> </span>
<a href="#l54.5"></a><span id="l54.5"> TEST_HARNESS_FILES.mozmill += [</span>
<a href="#l54.6"></a><span id="l54.6">     'mozmilltests.list',</span>
<a href="#l54.7"></a><span id="l54.7">     'runtest.py',</span>
<a href="#l54.8"></a><span id="l54.8">     'runtestlist.py',</span>
<a href="#l54.9"></a><span id="l54.9"> ]</span>
<a href="#l54.10"></a><span id="l54.10"> </span>
<a href="#l54.11"></a><span id="l54.11"> TEST_HARNESS_FILES.mozmill.resources += [</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-    '/mail/base/test/unit/resources/**',</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineminus">-    '/mailnews/test/fakeserver/**',</span>
<a href="#l54.14"></a><span id="l54.14" class="difflineminus">-    '/mailnews/test/resources/**',</span>
<a href="#l54.15"></a><span id="l54.15" class="difflineplus">+    '/%s/mail/base/test/unit/resources/**' % CONFIG['commreltopsrcdir'],</span>
<a href="#l54.16"></a><span id="l54.16" class="difflineplus">+    '/%s/mailnews/test/fakeserver/**' % CONFIG['commreltopsrcdir'],</span>
<a href="#l54.17"></a><span id="l54.17" class="difflineplus">+    '/%s/mailnews/test/resources/**' % CONFIG['commreltopsrcdir']</span>
<a href="#l54.18"></a><span id="l54.18"> ]</span>
<a href="#l54.19"></a><span id="l54.19" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -2890,17 +2890,17 @@ function load_via_src_path(aPath, aModul</span>
<a href="#l55.4"></a><span id="l55.4">       }</span>
<a href="#l55.5"></a><span id="l55.5">       catch (ex) {</span>
<a href="#l55.6"></a><span id="l55.6">         throw new Error(&quot;Unable to load file: &quot; + fullPath + &quot; exception: &quot; + ex);</span>
<a href="#l55.7"></a><span id="l55.7">       }</span>
<a href="#l55.8"></a><span id="l55.8">     }</span>
<a href="#l55.9"></a><span id="l55.9">   }</span>
<a href="#l55.10"></a><span id="l55.10"> </span>
<a href="#l55.11"></a><span id="l55.11">   // If we've got this far, then we weren't successful, fail out.</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-  throw new Error(&quot;Could not find &quot; + aModule + &quot; in available paths&quot;);</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+  throw new Error(&quot;Could not find &quot; + aPath + &quot; in available paths&quot;);</span>
<a href="#l55.14"></a><span id="l55.14"> }</span>
<a href="#l55.15"></a><span id="l55.15"> </span>
<a href="#l55.16"></a><span id="l55.16"> function assert_equals(a, b, comment)</span>
<a href="#l55.17"></a><span id="l55.17"> {</span>
<a href="#l55.18"></a><span id="l55.18">   if (!comment)</span>
<a href="#l55.19"></a><span id="l55.19">     comment = &quot;a != b&quot;;</span>
<a href="#l55.20"></a><span id="l55.20">   assert_true(a == b, comment + &quot;: '&quot;+ a + &quot;' != '&quot; + b + &quot;'.&quot;);</span>
<a href="#l55.21"></a><span id="l55.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mail/testsuite-targets.mk</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mail/testsuite-targets.mk</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -26,41 +26,41 @@ check-no-solo = $(foreach solo,SOLO_TEST</span>
<a href="#l56.4"></a><span id="l56.4"> find-solo-test = $(if $(and $(SOLO_TEST),$(SOLO_FILE)),$(error Both SOLO_TEST and SOLO_FILE are specified. You may only specify one.),$(if $(SOLO_TEST),$(SOLO_TEST),$(if $(SOLO_FILE),$(SOLO_FILE),$(error SOLO_TEST or SOLO_FILE needs to be specified.))))</span>
<a href="#l56.5"></a><span id="l56.5"> </span>
<a href="#l56.6"></a><span id="l56.6"> # PYTHONHOME messes very badly with virtualenv setups, so unset it.</span>
<a href="#l56.7"></a><span id="l56.7"> mozmill:</span>
<a href="#l56.8"></a><span id="l56.8"> 	$(call check-no-solo,SOLOVAR is specified. Perhaps you meant mozmill-one.)</span>
<a href="#l56.9"></a><span id="l56.9"> 	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; MACOSX_DEPLOYMENT_TARGET= \</span>
<a href="#l56.10"></a><span id="l56.10"> 	$(MOZMILLPYTHON) runtestlist.py --list=mozmilltests.list \</span>
<a href="#l56.11"></a><span id="l56.11"> 	--binary=$(abspath $(BINARY)) \</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-	--dir=$(abspath $(topsrcdir))/../mail/test/mozmill \</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+	--dir=$(commtopsrcdir)/mail/test/mozmill \</span>
<a href="#l56.14"></a><span id="l56.14"> 	--symbols-path=$(ABS_DIST)/crashreporter-symbols \</span>
<a href="#l56.15"></a><span id="l56.15"> 	--plugins-path=$(ABS_DIST)/plugins \</span>
<a href="#l56.16"></a><span id="l56.16"> 	--testing-modules-dir=$(topobjdir)/_tests/modules \</span>
<a href="#l56.17"></a><span id="l56.17"> 	$(MOZMILL_EXTRA)</span>
<a href="#l56.18"></a><span id="l56.18"> </span>
<a href="#l56.19"></a><span id="l56.19"> mozmill-one: solo-test = $(find-solo-test)</span>
<a href="#l56.20"></a><span id="l56.20"> mozmill-one:</span>
<a href="#l56.21"></a><span id="l56.21"> 	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; MACOSX_DEPLOYMENT_TARGET= \</span>
<a href="#l56.22"></a><span id="l56.22"> 	$(MOZMILLPYTHON) runtest.py \</span>
<a href="#l56.23"></a><span id="l56.23" class="difflineminus">-	--test=$(abspath $(topsrcdir))/../mail/test/mozmill/$(solo-test) \</span>
<a href="#l56.24"></a><span id="l56.24" class="difflineplus">+	--test=$(commtopsrcdir)/mail/test/mozmill/$(solo-test) \</span>
<a href="#l56.25"></a><span id="l56.25"> 	--binary=$(abspath $(BINARY)) \</span>
<a href="#l56.26"></a><span id="l56.26"> 	--symbols-path=$(ABS_DIST)/crashreporter-symbols \</span>
<a href="#l56.27"></a><span id="l56.27"> 	--plugins-path=$(ABS_DIST)/plugins \</span>
<a href="#l56.28"></a><span id="l56.28"> 	--testing-modules-dir=$(topobjdir)/_tests/modules \</span>
<a href="#l56.29"></a><span id="l56.29"> 	$(MOZMILL_EXTRA)</span>
<a href="#l56.30"></a><span id="l56.30"> </span>
<a href="#l56.31"></a><span id="l56.31"> # We need to add the mozmill tests to the package for tests.</span>
<a href="#l56.32"></a><span id="l56.32"> # If Lightning is enabled, also stage the lightning extension</span>
<a href="#l56.33"></a><span id="l56.33"> ifdef MOZ_CALENDAR</span>
<a href="#l56.34"></a><span id="l56.34"> package-tests: stage-mozmill stage-calendar</span>
<a href="#l56.35"></a><span id="l56.35"> else</span>
<a href="#l56.36"></a><span id="l56.36"> package-tests: stage-mozmill</span>
<a href="#l56.37"></a><span id="l56.37"> endif</span>
<a href="#l56.38"></a><span id="l56.38"> </span>
<a href="#l56.39"></a><span id="l56.39"> stage-mozmill: make-stage-dir</span>
<a href="#l56.40"></a><span id="l56.40" class="difflineminus">-	$(MAKE) -C $(DEPTH)/mail/test/mozmill stage-package</span>
<a href="#l56.41"></a><span id="l56.41" class="difflineplus">+	$(MAKE) -C $(COMMDEPTH)/mail/test/mozmill stage-package</span>
<a href="#l56.42"></a><span id="l56.42"> </span>
<a href="#l56.43"></a><span id="l56.43"> stage-calendar: make-stage-dir</span>
<a href="#l56.44"></a><span id="l56.44" class="difflineminus">-	$(MAKE) -C $(DEPTH)/calendar/lightning stage-package</span>
<a href="#l56.45"></a><span id="l56.45" class="difflineminus">-	$(MAKE) -C $(DEPTH)/calendar/providers/gdata stage-package</span>
<a href="#l56.46"></a><span id="l56.46" class="difflineplus">+	$(MAKE) -C $(COMMDEPTH)/calendar/lightning stage-package</span>
<a href="#l56.47"></a><span id="l56.47" class="difflineplus">+	$(MAKE) -C $(COMMDEPTH)/calendar/providers/gdata stage-package</span>
<a href="#l56.48"></a><span id="l56.48"> </span>
<a href="#l56.49"></a><span id="l56.49"> .PHONY: stage-mozmill stage-calendar</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/base/src/moz.build</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/base/src/moz.build</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -73,13 +73,13 @@ EXTRA_COMPONENTS += [</span>
<a href="#l57.4"></a><span id="l57.4">     'newMailNotificationService.js',</span>
<a href="#l57.5"></a><span id="l57.5">     'nsMailNewsCommandLineHandler.js',</span>
<a href="#l57.6"></a><span id="l57.6"> ]</span>
<a href="#l57.7"></a><span id="l57.7"> </span>
<a href="#l57.8"></a><span id="l57.8"> EXTRA_JS_MODULES += [</span>
<a href="#l57.9"></a><span id="l57.9">     'virtualFolderWrapper.js',</span>
<a href="#l57.10"></a><span id="l57.10"> ]</span>
<a href="#l57.11"></a><span id="l57.11"> LOCAL_INCLUDES += [</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-  '/mozilla/dom/base'</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+  '/%s/dom/base' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l57.14"></a><span id="l57.14"> ]</span>
<a href="#l57.15"></a><span id="l57.15"> </span>
<a href="#l57.16"></a><span id="l57.16"> FINAL_LIBRARY = 'mail'</span>
<a href="#l57.17"></a><span id="l57.17"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/base/test/moz.build</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/base/test/moz.build</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -7,11 +7,11 @@ XPCSHELL_TESTS_MANIFESTS += ['unit/xpcsh</span>
<a href="#l58.4"></a><span id="l58.4"> </span>
<a href="#l58.5"></a><span id="l58.5"> FINAL_LIBRARY = 'xul-gtest'</span>
<a href="#l58.6"></a><span id="l58.6"> </span>
<a href="#l58.7"></a><span id="l58.7"> UNIFIED_SOURCES += [</span>
<a href="#l58.8"></a><span id="l58.8">     'TestMailCookie.cpp',</span>
<a href="#l58.9"></a><span id="l58.9"> ]</span>
<a href="#l58.10"></a><span id="l58.10"> </span>
<a href="#l58.11"></a><span id="l58.11"> LOCAL_INCLUDES += [</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-    '/mozilla/netwerk/test',</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineminus">-    '/mozilla/xpcom/tests',</span>
<a href="#l58.14"></a><span id="l58.14" class="difflineplus">+    '/%s/netwerk/test' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l58.15"></a><span id="l58.15" class="difflineplus">+    '/%s/xpcom/tests' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l58.16"></a><span id="l58.16"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/base/util/moz.build</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/base/util/moz.build</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -62,16 +62,16 @@ EXTRA_JS_MODULES += [</span>
<a href="#l59.4"></a><span id="l59.4">     'OAuth2.jsm',</span>
<a href="#l59.5"></a><span id="l59.5">     'OAuth2Providers.jsm',</span>
<a href="#l59.6"></a><span id="l59.6">     'StringBundle.js',</span>
<a href="#l59.7"></a><span id="l59.7">     'templateUtils.js',</span>
<a href="#l59.8"></a><span id="l59.8">     'traceHelper.js',</span>
<a href="#l59.9"></a><span id="l59.9"> ]</span>
<a href="#l59.10"></a><span id="l59.10"> </span>
<a href="#l59.11"></a><span id="l59.11"> LOCAL_INCLUDES += [</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-  '/mozilla/netwerk/base'</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+  '/%s/netwerk/base' % CONFIG['mozreltopsrcdir']</span>
<a href="#l59.14"></a><span id="l59.14"> ]</span>
<a href="#l59.15"></a><span id="l59.15"> </span>
<a href="#l59.16"></a><span id="l59.16"> FINAL_LIBRARY = 'mail'</span>
<a href="#l59.17"></a><span id="l59.17"> </span>
<a href="#l59.18"></a><span id="l59.18"> Library('msgbsutl_s')</span>
<a href="#l59.19"></a><span id="l59.19"> </span>
<a href="#l59.20"></a><span id="l59.20"> DEFINES['_IMPL_NS_MSG_BASE'] = True</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mailnews/build/moz.build</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mailnews/build/moz.build</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -27,28 +27,28 @@ if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l60.4"></a><span id="l60.4"> else:</span>
<a href="#l60.5"></a><span id="l60.5">     OS_LIBS += CONFIG['MOZ_ZLIB_LIBS']</span>
<a href="#l60.6"></a><span id="l60.6"> </span>
<a href="#l60.7"></a><span id="l60.7"> if CONFIG['MOZ_WIDGET_TOOLKIT'] == 'cocoa':</span>
<a href="#l60.8"></a><span id="l60.8">     OS_LIBS += CONFIG['TK_LIBS']</span>
<a href="#l60.9"></a><span id="l60.9">     OS_LIBS += ['-framework Cocoa']</span>
<a href="#l60.10"></a><span id="l60.10"> </span>
<a href="#l60.11"></a><span id="l60.11"> LOCAL_INCLUDES += [</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-    '/mailnews/addrbook/src',</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineminus">-    '/mailnews/base/search/src',</span>
<a href="#l60.14"></a><span id="l60.14" class="difflineminus">-    '/mailnews/base/src',</span>
<a href="#l60.15"></a><span id="l60.15" class="difflineminus">-    '/mailnews/base/util',</span>
<a href="#l60.16"></a><span id="l60.16" class="difflineminus">-    '/mailnews/compose/src',</span>
<a href="#l60.17"></a><span id="l60.17" class="difflineminus">-    '/mailnews/extensions/bayesian-spam-filter/src',</span>
<a href="#l60.18"></a><span id="l60.18" class="difflineminus">-    '/mailnews/extensions/fts3/src',</span>
<a href="#l60.19"></a><span id="l60.19" class="difflineminus">-    '/mailnews/extensions/mailviews/src',</span>
<a href="#l60.20"></a><span id="l60.20" class="difflineminus">-    '/mailnews/extensions/mdn/src',</span>
<a href="#l60.21"></a><span id="l60.21" class="difflineminus">-    '/mailnews/extensions/smime/src',</span>
<a href="#l60.22"></a><span id="l60.22" class="difflineminus">-    '/mailnews/imap/src',</span>
<a href="#l60.23"></a><span id="l60.23" class="difflineminus">-    '/mailnews/intl',</span>
<a href="#l60.24"></a><span id="l60.24" class="difflineminus">-    '/mailnews/local/src',</span>
<a href="#l60.25"></a><span id="l60.25" class="difflineminus">-    '/mailnews/mime/emitters',</span>
<a href="#l60.26"></a><span id="l60.26" class="difflineminus">-    '/mailnews/mime/src',</span>
<a href="#l60.27"></a><span id="l60.27" class="difflineminus">-    '/mailnews/news/src',</span>
<a href="#l60.28"></a><span id="l60.28" class="difflineplus">+    '../addrbook/src',</span>
<a href="#l60.29"></a><span id="l60.29" class="difflineplus">+    '../base/search/src',</span>
<a href="#l60.30"></a><span id="l60.30" class="difflineplus">+    '../base/src',</span>
<a href="#l60.31"></a><span id="l60.31" class="difflineplus">+    '../base/util',</span>
<a href="#l60.32"></a><span id="l60.32" class="difflineplus">+    '../compose/src',</span>
<a href="#l60.33"></a><span id="l60.33" class="difflineplus">+    '../extensions/bayesian-spam-filter/src',</span>
<a href="#l60.34"></a><span id="l60.34" class="difflineplus">+    '../extensions/fts3/src',</span>
<a href="#l60.35"></a><span id="l60.35" class="difflineplus">+    '../extensions/mailviews/src',</span>
<a href="#l60.36"></a><span id="l60.36" class="difflineplus">+    '../extensions/mdn/src',</span>
<a href="#l60.37"></a><span id="l60.37" class="difflineplus">+    '../extensions/smime/src',</span>
<a href="#l60.38"></a><span id="l60.38" class="difflineplus">+    '../imap/src',</span>
<a href="#l60.39"></a><span id="l60.39" class="difflineplus">+    '../intl',</span>
<a href="#l60.40"></a><span id="l60.40" class="difflineplus">+    '../local/src',</span>
<a href="#l60.41"></a><span id="l60.41" class="difflineplus">+    '../mime/emitters',</span>
<a href="#l60.42"></a><span id="l60.42" class="difflineplus">+    '../mime/src',</span>
<a href="#l60.43"></a><span id="l60.43" class="difflineplus">+    '../news/src',</span>
<a href="#l60.44"></a><span id="l60.44"> ]</span>
<a href="#l60.45"></a><span id="l60.45"> </span>
<a href="#l60.46"></a><span id="l60.46"> if CONFIG['MOZ_LDAP_XPCOM']:</span>
<a href="#l60.47"></a><span id="l60.47">     DEFINES['MOZ_LDAP_XPCOM'] = True</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mailnews/extensions/smime/src/moz.build</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mailnews/extensions/smime/src/moz.build</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -13,11 +13,11 @@ SOURCES += [</span>
<a href="#l61.4"></a><span id="l61.4"> EXTRA_COMPONENTS += [</span>
<a href="#l61.5"></a><span id="l61.5">     'smime-service.js',</span>
<a href="#l61.6"></a><span id="l61.6">     'smime-service.manifest',</span>
<a href="#l61.7"></a><span id="l61.7"> ]</span>
<a href="#l61.8"></a><span id="l61.8"> </span>
<a href="#l61.9"></a><span id="l61.9"> FINAL_LIBRARY = 'mail'</span>
<a href="#l61.10"></a><span id="l61.10"> </span>
<a href="#l61.11"></a><span id="l61.11"> LOCAL_INCLUDES += [</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-    '/mozilla/security/manager/pki',</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineminus">-    '/mozilla/security/pkix/include'</span>
<a href="#l61.14"></a><span id="l61.14" class="difflineplus">+    '/%s/security/manager/pki' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l61.15"></a><span id="l61.15" class="difflineplus">+    '/%s/security/pkix/include' % CONFIG['mozreltopsrcdir']</span>
<a href="#l61.16"></a><span id="l61.16"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mailnews/imap/test/moz.build</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mailnews/imap/test/moz.build</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -1,19 +1,19 @@</span>
<a href="#l62.4"></a><span id="l62.4"> # vim: set filetype=python:</span>
<a href="#l62.5"></a><span id="l62.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l62.6"></a><span id="l62.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l62.7"></a><span id="l62.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l62.8"></a><span id="l62.8"> </span>
<a href="#l62.9"></a><span id="l62.9"> XPCSHELL_TESTS_MANIFESTS += ['unit/xpcshell.ini']</span>
<a href="#l62.10"></a><span id="l62.10"> </span>
<a href="#l62.11"></a><span id="l62.11"> LOCAL_INCLUDES += [</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineplus">+   '../../base/util',</span>
<a href="#l62.13"></a><span id="l62.13">    '../src',</span>
<a href="#l62.14"></a><span id="l62.14" class="difflineminus">-   '/mailnews/base/util',</span>
<a href="#l62.15"></a><span id="l62.15" class="difflineminus">-   '/mozilla/xpcom/tests',</span>
<a href="#l62.16"></a><span id="l62.16" class="difflineplus">+   '/%s/xpcom/tests' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l62.17"></a><span id="l62.17"> ]</span>
<a href="#l62.18"></a><span id="l62.18"> </span>
<a href="#l62.19"></a><span id="l62.19"> USE_LIBS += [</span>
<a href="#l62.20"></a><span id="l62.20">     'msgbsutl_s',</span>
<a href="#l62.21"></a><span id="l62.21">     'msgimap_s',</span>
<a href="#l62.22"></a><span id="l62.22">     'nspr',</span>
<a href="#l62.23"></a><span id="l62.23">     'xpcomglue_s',</span>
<a href="#l62.24"></a><span id="l62.24">     'xul',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mailnews/intl/moz.build</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mailnews/intl/moz.build</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -15,24 +15,24 @@ UNIFIED_SOURCES += [</span>
<a href="#l63.4"></a><span id="l63.4">     'nsUnicodeToMUTF7.cpp',</span>
<a href="#l63.5"></a><span id="l63.5">     'nsUnicodeToUTF7.cpp',</span>
<a href="#l63.6"></a><span id="l63.6">     'nsUTF7ToUnicode.cpp',</span>
<a href="#l63.7"></a><span id="l63.7"> ]</span>
<a href="#l63.8"></a><span id="l63.8"> </span>
<a href="#l63.9"></a><span id="l63.9"> XPIDL_MODULE = 'commuconv'</span>
<a href="#l63.10"></a><span id="l63.10"> </span>
<a href="#l63.11"></a><span id="l63.11"> LOCAL_INCLUDES += [</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-    '/mozilla/intl/locale',</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+    '/%s/intl/locale' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l63.14"></a><span id="l63.14"> ]</span>
<a href="#l63.15"></a><span id="l63.15"> </span>
<a href="#l63.16"></a><span id="l63.16"> GENERATED_FILES += [</span>
<a href="#l63.17"></a><span id="l63.17">     'charsetalias.properties.h',</span>
<a href="#l63.18"></a><span id="l63.18"> ]</span>
<a href="#l63.19"></a><span id="l63.19"> charsetalias = GENERATED_FILES['charsetalias.properties.h']</span>
<a href="#l63.20"></a><span id="l63.20" class="difflineminus">-charsetalias.script = '../../mozilla/intl/locale/props2arrays.py'</span>
<a href="#l63.21"></a><span id="l63.21" class="difflineplus">+charsetalias.script = '/%s/intl/locale/props2arrays.py' % CONFIG['mozreltopsrcdir']</span>
<a href="#l63.22"></a><span id="l63.22"> charsetalias.inputs = ['charsetalias.properties']</span>
<a href="#l63.23"></a><span id="l63.23"> </span>
<a href="#l63.24"></a><span id="l63.24"> FINAL_LIBRARY = 'mail'</span>
<a href="#l63.25"></a><span id="l63.25"> </span>
<a href="#l63.26"></a><span id="l63.26"> # Tests need more attention before they can be enabled.</span>
<a href="#l63.27"></a><span id="l63.27"> TEST_DIRS += ['test']</span>
<a href="#l63.28"></a><span id="l63.28"> </span>
<a href="#l63.29"></a><span id="l63.29"> JAR_MANIFESTS += ['jar.mn']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mailnews/jsaccount/test/idl/moz.build</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mailnews/jsaccount/test/idl/moz.build</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -4,11 +4,16 @@</span>
<a href="#l64.4"></a><span id="l64.4"> # http://creativecommons.org/publicdomain/zero/1.0/</span>
<a href="#l64.5"></a><span id="l64.5"> </span>
<a href="#l64.6"></a><span id="l64.6"> XPIDL_SOURCES += [</span>
<a href="#l64.7"></a><span id="l64.7">   'msgIFooUrl.idl',</span>
<a href="#l64.8"></a><span id="l64.8"> ]</span>
<a href="#l64.9"></a><span id="l64.9"> </span>
<a href="#l64.10"></a><span id="l64.10"> XPIDL_MODULE = 'testJsAccount'</span>
<a href="#l64.11"></a><span id="l64.11"> </span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-TEST_HARNESS_FILES.xpcshell.mailnews.jsaccount.test.unit.resources += [</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+if 'comm' in CONFIG['MOZ_BUILD_APP']:</span>
<a href="#l64.14"></a><span id="l64.14" class="difflineplus">+  test_harness_base = TEST_HARNESS_FILES.xpcshell.comm</span>
<a href="#l64.15"></a><span id="l64.15" class="difflineplus">+else:</span>
<a href="#l64.16"></a><span id="l64.16" class="difflineplus">+  test_harness_base = TEST_HARNESS_FILES.xpcshell</span>
<a href="#l64.17"></a><span id="l64.17" class="difflineplus">+</span>
<a href="#l64.18"></a><span id="l64.18" class="difflineplus">+test_harness_base.mailnews.jsaccount.test.unit.resources += [</span>
<a href="#l64.19"></a><span id="l64.19">     '!/dist/bin/components/testJsAccount.xpt',</span>
<a href="#l64.20"></a><span id="l64.20"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mailnews/mailnews.mozbuild</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mailnews/mailnews.mozbuild</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -1,16 +1,15 @@</span>
<a href="#l65.4"></a><span id="l65.4"> # vim: set filetype=python:</span>
<a href="#l65.5"></a><span id="l65.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l65.6"></a><span id="l65.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l65.7"></a><span id="l65.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l65.8"></a><span id="l65.8"> </span>
<a href="#l65.9"></a><span id="l65.9"> if CONFIG['MOZ_LDAP_XPCOM']:</span>
<a href="#l65.10"></a><span id="l65.10">     DIRS += [</span>
<a href="#l65.11"></a><span id="l65.11" class="difflineminus">-        '/ldap',</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-        '/ldap/xpcom',</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+        '/%s/ldap' % CONFIG['commreltopsrcdir'],</span>
<a href="#l65.14"></a><span id="l65.14" class="difflineplus">+        '/%s/ldap/xpcom' % CONFIG['commreltopsrcdir'],</span>
<a href="#l65.15"></a><span id="l65.15">     ]</span>
<a href="#l65.16"></a><span id="l65.16"> </span>
<a href="#l65.17"></a><span id="l65.17"> if CONFIG['MOZ_MORK']:</span>
<a href="#l65.18"></a><span id="l65.18" class="difflineminus">-    DIRS += ['/db']</span>
<a href="#l65.19"></a><span id="l65.19" class="difflineplus">+    DIRS += ['/%s/db' % CONFIG['commreltopsrcdir']]</span>
<a href="#l65.20"></a><span id="l65.20"> </span>
<a href="#l65.21"></a><span id="l65.21" class="difflineminus">-DIRS += ['/mailnews']</span>
<a href="#l65.22"></a><span id="l65.22" class="difflineminus">-</span>
<a href="#l65.23"></a><span id="l65.23" class="difflineplus">+DIRS += ['/%s/mailnews' % CONFIG['commreltopsrcdir']]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mailnews/mime/src/moz.build</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mailnews/mime/src/moz.build</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -65,19 +65,19 @@ SOURCES += [</span>
<a href="#l66.4"></a><span id="l66.4">     'nsCMS.cpp',</span>
<a href="#l66.5"></a><span id="l66.5">     'nsCMSSecureMessage.cpp',</span>
<a href="#l66.6"></a><span id="l66.6">     'nsMimeObjectClassAccess.cpp',</span>
<a href="#l66.7"></a><span id="l66.7">     'nsSimpleMimeConverterStub.cpp',</span>
<a href="#l66.8"></a><span id="l66.8">     'nsStreamConverter.cpp',</span>
<a href="#l66.9"></a><span id="l66.9"> ]</span>
<a href="#l66.10"></a><span id="l66.10"> </span>
<a href="#l66.11"></a><span id="l66.11"> LOCAL_INCLUDES += [</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-     '/mozilla/security/certverifier',</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineminus">-     '/mozilla/security/manager/ssl',</span>
<a href="#l66.14"></a><span id="l66.14" class="difflineminus">-     '/mozilla/security/pkix/include',</span>
<a href="#l66.15"></a><span id="l66.15" class="difflineplus">+     '/%s/security/certverifier' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l66.16"></a><span id="l66.16" class="difflineplus">+     '/%s/security/manager/ssl' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l66.17"></a><span id="l66.17" class="difflineplus">+     '/%s/security/pkix/include' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l66.18"></a><span id="l66.18"> ]</span>
<a href="#l66.19"></a><span id="l66.19"> </span>
<a href="#l66.20"></a><span id="l66.20"> EXTRA_COMPONENTS += [</span>
<a href="#l66.21"></a><span id="l66.21">     'mimeJSComponents.js',</span>
<a href="#l66.22"></a><span id="l66.22">     'msgMime.manifest',</span>
<a href="#l66.23"></a><span id="l66.23"> ]</span>
<a href="#l66.24"></a><span id="l66.24"> </span>
<a href="#l66.25"></a><span id="l66.25"> EXTRA_JS_MODULES += [</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mailnews/moz.build</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mailnews/moz.build</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -72,19 +72,24 @@ TESTING_JS_MODULES.mailnews += [</span>
<a href="#l67.4"></a><span id="l67.4">     'test/resources/IMAPpump.js',</span>
<a href="#l67.5"></a><span id="l67.5">     'test/resources/localAccountUtils.js',</span>
<a href="#l67.6"></a><span id="l67.6">     'test/resources/mailTestUtils.js',</span>
<a href="#l67.7"></a><span id="l67.7">     'test/resources/MockFactory.js',</span>
<a href="#l67.8"></a><span id="l67.8">     'test/resources/NetworkTestUtils.jsm',</span>
<a href="#l67.9"></a><span id="l67.9">     'test/resources/PromiseTestUtils.jsm',</span>
<a href="#l67.10"></a><span id="l67.10"> ]</span>
<a href="#l67.11"></a><span id="l67.11"> </span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-TEST_HARNESS_FILES.xpcshell.mailnews.data += [</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineminus">-    '/mailnews/test/data/**',</span>
<a href="#l67.14"></a><span id="l67.14" class="difflineplus">+if 'comm' in CONFIG['MOZ_BUILD_APP']:</span>
<a href="#l67.15"></a><span id="l67.15" class="difflineplus">+  test_harness_base = TEST_HARNESS_FILES.xpcshell.comm</span>
<a href="#l67.16"></a><span id="l67.16" class="difflineplus">+else:</span>
<a href="#l67.17"></a><span id="l67.17" class="difflineplus">+  test_harness_base = TEST_HARNESS_FILES.xpcshell</span>
<a href="#l67.18"></a><span id="l67.18" class="difflineplus">+</span>
<a href="#l67.19"></a><span id="l67.19" class="difflineplus">+test_harness_base.mailnews.data += [</span>
<a href="#l67.20"></a><span id="l67.20" class="difflineplus">+    '/%s/mailnews/test/data/**' % CONFIG['commreltopsrcdir'],</span>
<a href="#l67.21"></a><span id="l67.21"> ]</span>
<a href="#l67.22"></a><span id="l67.22"> </span>
<a href="#l67.23"></a><span id="l67.23" class="difflineminus">-TEST_HARNESS_FILES.xpcshell.mailnews.resources += [</span>
<a href="#l67.24"></a><span id="l67.24" class="difflineminus">-    '/mailnews/test/resources/**',</span>
<a href="#l67.25"></a><span id="l67.25" class="difflineplus">+test_harness_base.mailnews.resources += [</span>
<a href="#l67.26"></a><span id="l67.26" class="difflineplus">+    '/%s/mailnews/test/resources/**' % CONFIG['commreltopsrcdir'],</span>
<a href="#l67.27"></a><span id="l67.27"> ]</span>
<a href="#l67.28"></a><span id="l67.28"> </span>
<a href="#l67.29"></a><span id="l67.29"> JS_PREFERENCE_PP_FILES += [</span>
<a href="#l67.30"></a><span id="l67.30">     'mailnews.js',</span>
<a href="#l67.31"></a><span id="l67.31"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/suite/Makefile.in</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/suite/Makefile.in</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -1,25 +1,25 @@</span>
<a href="#l68.4"></a><span id="l68.4"> #</span>
<a href="#l68.5"></a><span id="l68.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l68.6"></a><span id="l68.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l68.7"></a><span id="l68.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l68.8"></a><span id="l68.8"> </span>
<a href="#l68.9"></a><span id="l68.9" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l68.10"></a><span id="l68.10" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l68.11"></a><span id="l68.11"> </span>
<a href="#l68.12"></a><span id="l68.12"> ifdef MAKENSISU</span>
<a href="#l68.13"></a><span id="l68.13"> # For Windows build the uninstaller during the application build since the</span>
<a href="#l68.14"></a><span id="l68.14"> # uninstaller is included with the application for mar file generation.</span>
<a href="#l68.15"></a><span id="l68.15"> libs::</span>
<a href="#l68.16"></a><span id="l68.16"> 	$(MAKE) -C installer/windows uninstaller</span>
<a href="#l68.17"></a><span id="l68.17"> endif</span>
<a href="#l68.18"></a><span id="l68.18"> </span>
<a href="#l68.19"></a><span id="l68.19"> </span>
<a href="#l68.20"></a><span id="l68.20"> # As a fallout from bug 1247162, the sourcestamp in application.ini and</span>
<a href="#l68.21"></a><span id="l68.21"> # platform.ini are the same, which isn't a problem for Firefox, but</span>
<a href="#l68.22"></a><span id="l68.22"> # it's not right for anything else. So we correct platform.ini here.</span>
<a href="#l68.23"></a><span id="l68.23"> </span>
<a href="#l68.24"></a><span id="l68.24" class="difflineminus">-MOZ_REV=$(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; parent --template=&quot;{node}&quot; 2&gt;/dev/null)</span>
<a href="#l68.25"></a><span id="l68.25" class="difflineplus">+MOZ_REV=$(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}&quot; 2&gt;/dev/null)</span>
<a href="#l68.26"></a><span id="l68.26"> </span>
<a href="#l68.27"></a><span id="l68.27"> libs:: $(DIST)/bin/platform.ini</span>
<a href="#l68.28"></a><span id="l68.28"> 	sed -e &quot;s/^\(SourceStamp=\).*/\1$(MOZ_REV)/&quot; $(DIST)/bin/platform.ini \</span>
<a href="#l68.29"></a><span id="l68.29"> 		&gt; $(DIST)/bin/platform.ini~</span>
<a href="#l68.30"></a><span id="l68.30"> 	mv -f $(DIST)/bin/platform.ini~ $(DIST)/bin/platform.ini</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1">new file mode 100644</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineminus">--- /dev/null</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineplus">+++ b/suite/app-config.mk</span>
<a href="#l69.4"></a><span id="l69.4" class="difflineat">@@ -0,0 +1,9 @@</span>
<a href="#l69.5"></a><span id="l69.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l69.6"></a><span id="l69.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l69.7"></a><span id="l69.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l69.8"></a><span id="l69.8" class="difflineplus">+</span>
<a href="#l69.9"></a><span id="l69.9" class="difflineplus">+ifeq ($(findstring comm,$(MOZ_BUILD_APP)),)</span>
<a href="#l69.10"></a><span id="l69.10" class="difflineplus">+COMMDEPTH = $(DEPTH)</span>
<a href="#l69.11"></a><span id="l69.11" class="difflineplus">+else</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineplus">+COMMDEPTH = $(DEPTH)/comm</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/suite/app.mozbuild</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/suite/app.mozbuild</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -1,27 +1,27 @@</span>
<a href="#l70.4"></a><span id="l70.4"> # vim: set filetype=python:</span>
<a href="#l70.5"></a><span id="l70.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l70.6"></a><span id="l70.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l70.7"></a><span id="l70.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l70.8"></a><span id="l70.8"> </span>
<a href="#l70.9"></a><span id="l70.9" class="difflineminus">-include('/mailnews/mailnews.mozbuild')</span>
<a href="#l70.10"></a><span id="l70.10" class="difflineplus">+include('/%s/mailnews/mailnews.mozbuild' % CONFIG['commreltopsrcdir'])</span>
<a href="#l70.11"></a><span id="l70.11"> </span>
<a href="#l70.12"></a><span id="l70.12"> include('/toolkit/toolkit.mozbuild')</span>
<a href="#l70.13"></a><span id="l70.13"> </span>
<a href="#l70.14"></a><span id="l70.14"> if CONFIG['MOZ_EXTENSIONS']:</span>
<a href="#l70.15"></a><span id="l70.15">     DIRS += ['/extensions']</span>
<a href="#l70.16"></a><span id="l70.16"> </span>
<a href="#l70.17"></a><span id="l70.17"> if CONFIG['MOZ_COMPOSER']:</span>
<a href="#l70.18"></a><span id="l70.18" class="difflineminus">-    DIRS += ['/editor/ui']</span>
<a href="#l70.19"></a><span id="l70.19" class="difflineplus">+    DIRS += ['/%s/editor/ui' % CONFIG['commreltopsrcdir']]</span>
<a href="#l70.20"></a><span id="l70.20"> </span>
<a href="#l70.21"></a><span id="l70.21"> DIRS += ['/%s' % CONFIG['MOZ_BRANDING_DIRECTORY']]</span>
<a href="#l70.22"></a><span id="l70.22"> </span>
<a href="#l70.23"></a><span id="l70.23"> if CONFIG['MOZ_CALENDAR']:</span>
<a href="#l70.24"></a><span id="l70.24">     DIRS += [</span>
<a href="#l70.25"></a><span id="l70.25" class="difflineminus">-        '/calendar/lightning',</span>
<a href="#l70.26"></a><span id="l70.26" class="difflineminus">-        '/calendar/timezones'</span>
<a href="#l70.27"></a><span id="l70.27" class="difflineplus">+        '/%s/calendar/lightning' % CONFIG['commreltopsrcdir'],</span>
<a href="#l70.28"></a><span id="l70.28" class="difflineplus">+        '/%s/calendar/timezones' % CONFIG['commreltopsrcdir']</span>
<a href="#l70.29"></a><span id="l70.29">     ]</span>
<a href="#l70.30"></a><span id="l70.30"> </span>
<a href="#l70.31"></a><span id="l70.31"> DIRS += [</span>
<a href="#l70.32"></a><span id="l70.32">     '/xpfe/components/autocomplete',</span>
<a href="#l70.33"></a><span id="l70.33" class="difflineminus">-    '/suite',</span>
<a href="#l70.34"></a><span id="l70.34" class="difflineplus">+    '/%s/suite' % CONFIG['commreltopsrcdir'],</span>
<a href="#l70.35"></a><span id="l70.35"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/suite/app/Makefile.in</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/suite/app/Makefile.in</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -18,17 +18,17 @@ else</span>
<a href="#l71.4"></a><span id="l71.4"> MOZ_WINCONSOLE = 0</span>
<a href="#l71.5"></a><span id="l71.5"> endif</span>
<a href="#l71.6"></a><span id="l71.6"> endif</span>
<a href="#l71.7"></a><span id="l71.7"> </span>
<a href="#l71.8"></a><span id="l71.8"> # This switches $(INSTALL) to copy mode, like $(SYSINSTALL), so things that</span>
<a href="#l71.9"></a><span id="l71.9"> # shouldn't get 755 perms need $(IFLAGS1) for either way of calling nsinstall.</span>
<a href="#l71.10"></a><span id="l71.10"> NSDISTMODE = copy</span>
<a href="#l71.11"></a><span id="l71.11"> </span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l71.14"></a><span id="l71.14"> </span>
<a href="#l71.15"></a><span id="l71.15"> # If we are trying to show an error dialog about the lack of SSE2 support,</span>
<a href="#l71.16"></a><span id="l71.16"> # make sure that code itself doesn't use SSE2.</span>
<a href="#l71.17"></a><span id="l71.17"> ifdef MOZ_LINUX_32_SSE2_STARTUP_ERROR</span>
<a href="#l71.18"></a><span id="l71.18"> CXXFLAGS := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXXFLAGS))</span>
<a href="#l71.19"></a><span id="l71.19"> CXX := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXX))</span>
<a href="#l71.20"></a><span id="l71.20"> CXXFLAGS += -mno-sse -mno-sse2 -mfpmath=387</span>
<a href="#l71.21"></a><span id="l71.21"> CXX += -march=pentiumpro</span>
<a href="#l71.22"></a><span id="l71.22" class="difflineat">@@ -37,24 +37,24 @@ endif</span>
<a href="#l71.23"></a><span id="l71.23"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l71.24"></a><span id="l71.24"> # Rebuild seamonkey.exe if the manifest changes - it's included by splash.rc.</span>
<a href="#l71.25"></a><span id="l71.25"> # (this dependency should really be just for seamonkey.exe, not other targets)</span>
<a href="#l71.26"></a><span id="l71.26"> # Note the manifest file exists in the tree, so we use the explicit filename</span>
<a href="#l71.27"></a><span id="l71.27"> # here.</span>
<a href="#l71.28"></a><span id="l71.28"> EXTRA_DEPS += seamonkey.exe.manifest</span>
<a href="#l71.29"></a><span id="l71.29"> endif</span>
<a href="#l71.30"></a><span id="l71.30"> </span>
<a href="#l71.31"></a><span id="l71.31" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l71.32"></a><span id="l71.32" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l71.33"></a><span id="l71.33"> </span>
<a href="#l71.34"></a><span id="l71.34"> libs::</span>
<a href="#l71.35"></a><span id="l71.35"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l71.36"></a><span id="l71.36"> 	$(EXIT_ON_ERROR) \</span>
<a href="#l71.37"></a><span id="l71.37" class="difflineminus">-	$(PERL) -pe 's/(?&lt;!\r)\n/\r\n/g;' &lt; $(topsrcdir)/suite/installer/license.txt &gt; $(DIST)/bin/license.txt</span>
<a href="#l71.38"></a><span id="l71.38" class="difflineplus">+	$(PERL) -pe 's/(?&lt;!\r)\n/\r\n/g;' &lt; $(commtopsrcdir)/suite/installer/license.txt &gt; $(DIST)/bin/license.txt</span>
<a href="#l71.39"></a><span id="l71.39"> else</span>
<a href="#l71.40"></a><span id="l71.40" class="difflineminus">-	$(INSTALL) $(IFLAGS1) $(topsrcdir)/suite/installer/license.txt $(DIST)/bin/</span>
<a href="#l71.41"></a><span id="l71.41" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(commtopsrcdir)/suite/installer/license.txt $(DIST)/bin/</span>
<a href="#l71.42"></a><span id="l71.42"> endif</span>
<a href="#l71.43"></a><span id="l71.43"> </span>
<a href="#l71.44"></a><span id="l71.44"> ifneq ($(OS_ARCH),WINNT)</span>
<a href="#l71.45"></a><span id="l71.45"> </span>
<a href="#l71.46"></a><span id="l71.46"> libs:: </span>
<a href="#l71.47"></a><span id="l71.47"> 	cp -p $(MOZ_APP_NAME)$(BIN_SUFFIX) $(DIST)/bin/$(MOZ_APP_NAME)-bin$(BIN_SUFFIX)</span>
<a href="#l71.48"></a><span id="l71.48"> </span>
<a href="#l71.49"></a><span id="l71.49"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/suite/app/moz.build</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/suite/app/moz.build</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -3,41 +3,41 @@</span>
<a href="#l72.4"></a><span id="l72.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l72.5"></a><span id="l72.5"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l72.6"></a><span id="l72.6"> </span>
<a href="#l72.7"></a><span id="l72.7"> GeckoProgram(CONFIG['MOZ_APP_NAME'])</span>
<a href="#l72.8"></a><span id="l72.8"> USE_LIBS += ['mozglue']</span>
<a href="#l72.9"></a><span id="l72.9"> SOURCES += ['nsSuiteApp.cpp']</span>
<a href="#l72.10"></a><span id="l72.10"> LOCAL_INCLUDES += [</span>
<a href="#l72.11"></a><span id="l72.11">     '!/build',</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-    '/mozilla/toolkit/xre',</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineminus">-    '/mozilla/xpcom/base',</span>
<a href="#l72.14"></a><span id="l72.14" class="difflineminus">-    '/mozilla/xpcom/build',</span>
<a href="#l72.15"></a><span id="l72.15" class="difflineplus">+    '/%s/toolkit/xre' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l72.16"></a><span id="l72.16" class="difflineplus">+    '/%s/xpcom/base' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l72.17"></a><span id="l72.17" class="difflineplus">+    '/%s/xpcom/build' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l72.18"></a><span id="l72.18"> ]</span>
<a href="#l72.19"></a><span id="l72.19"> </span>
<a href="#l72.20"></a><span id="l72.20"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l72.21"></a><span id="l72.21">     RCINCLUDE = 'splash.rc'</span>
<a href="#l72.22"></a><span id="l72.22">     DEFINES['MOZ_SUITE'] = True</span>
<a href="#l72.23"></a><span id="l72.23"> </span>
<a href="#l72.24"></a><span id="l72.24"> if CONFIG['LIBFUZZER']:</span>
<a href="#l72.25"></a><span id="l72.25">     USE_LIBS += [ 'fuzzer' ]</span>
<a href="#l72.26"></a><span id="l72.26">     LOCAL_INCLUDES += [</span>
<a href="#l72.27"></a><span id="l72.27" class="difflineminus">-        '/mozilla//tools/fuzzing/libfuzzer',</span>
<a href="#l72.28"></a><span id="l72.28" class="difflineplus">+        '/%s/tools/fuzzing/libfuzzer' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l72.29"></a><span id="l72.29">     ]</span>
<a href="#l72.30"></a><span id="l72.30"> </span>
<a href="#l72.31"></a><span id="l72.31"> if CONFIG['_MSC_VER']:</span>
<a href="#l72.32"></a><span id="l72.32">     # Always enter a Windows program through wmain, whether or not we're</span>
<a href="#l72.33"></a><span id="l72.33">     # a console application.</span>
<a href="#l72.34"></a><span id="l72.34">     WIN32_EXE_LDFLAGS += ['-ENTRY:wmainCRTStartup']</span>
<a href="#l72.35"></a><span id="l72.35"> </span>
<a href="#l72.36"></a><span id="l72.36"> if CONFIG['MOZ_SANDBOX'] and CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l72.37"></a><span id="l72.37">     # For sandbox includes and the include dependencies those have</span>
<a href="#l72.38"></a><span id="l72.38">     LOCAL_INCLUDES += [</span>
<a href="#l72.39"></a><span id="l72.39" class="difflineminus">-        '/mozilla/security/sandbox/chromium',</span>
<a href="#l72.40"></a><span id="l72.40" class="difflineminus">-        '/mozilla/security/sandbox/chromium-shim',</span>
<a href="#l72.41"></a><span id="l72.41" class="difflineplus">+        '/%s/security/sandbox/chromium' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l72.42"></a><span id="l72.42" class="difflineplus">+        '/%s/security/sandbox/chromium-shim' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l72.43"></a><span id="l72.43">     ]</span>
<a href="#l72.44"></a><span id="l72.44"> </span>
<a href="#l72.45"></a><span id="l72.45">     USE_LIBS += [</span>
<a href="#l72.46"></a><span id="l72.46">         'sandbox_s',</span>
<a href="#l72.47"></a><span id="l72.47">     ]</span>
<a href="#l72.48"></a><span id="l72.48"> </span>
<a href="#l72.49"></a><span id="l72.49">     DELAYLOAD_DLLS += [</span>
<a href="#l72.50"></a><span id="l72.50">         'winmm.dll',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/suite/branding/nightly/Makefile.in</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/suite/branding/nightly/Makefile.in</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l73.4"></a><span id="l73.4"> #</span>
<a href="#l73.5"></a><span id="l73.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l73.6"></a><span id="l73.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l73.7"></a><span id="l73.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l73.8"></a><span id="l73.8"> </span>
<a href="#l73.9"></a><span id="l73.9"> # Note: mac icons are handled in /suite/app during the final application</span>
<a href="#l73.10"></a><span id="l73.10"> # packaging</span>
<a href="#l73.11"></a><span id="l73.11"> </span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l73.14"></a><span id="l73.14"> </span>
<a href="#l73.15"></a><span id="l73.15"> export::</span>
<a href="#l73.16"></a><span id="l73.16"> 	$(NSINSTALL) -D $(DIST)/branding</span>
<a href="#l73.17"></a><span id="l73.17"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l73.18"></a><span id="l73.18"> 	cp $(srcdir)/icons/windows/seamonkey.ico      $(DIST)/branding/seamonkey.ico</span>
<a href="#l73.19"></a><span id="l73.19"> 	cp $(srcdir)/icons/windows/html-file.ico      $(DIST)/branding/html-file.ico</span>
<a href="#l73.20"></a><span id="l73.20"> 	cp $(srcdir)/package/windows/branding.nsi     $(DIST)/branding/branding.nsi</span>
<a href="#l73.21"></a><span id="l73.21"> 	cp $(srcdir)/package/windows/wizHeader.bmp    $(DIST)/branding/wizHeader.bmp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/suite/browser/Makefile.in</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/suite/browser/Makefile.in</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l74.4"></a><span id="l74.4"> #</span>
<a href="#l74.5"></a><span id="l74.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l74.6"></a><span id="l74.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l74.7"></a><span id="l74.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l74.8"></a><span id="l74.8"> </span>
<a href="#l74.9"></a><span id="l74.9" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l74.10"></a><span id="l74.10" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l74.11"></a><span id="l74.11"> </span>
<a href="#l74.12"></a><span id="l74.12"> # channel-prefs.js is handled separate from other prefs due to bug 756325.</span>
<a href="#l74.13"></a><span id="l74.13"> libs:: $(srcdir)/channel-prefs.js</span>
<a href="#l74.14"></a><span id="l74.14"> 	$(call py_action,preprocessor,-Fsubstitution $(PREF_PPFLAGS) $(ACDEFINES) $^ -o $(DIST)/bin/defaults/pref/channel-prefs.js)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/suite/build/Makefile.in</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/suite/build/Makefile.in</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -1,8 +1,8 @@</span>
<a href="#l75.4"></a><span id="l75.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l75.5"></a><span id="l75.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l75.6"></a><span id="l75.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l75.7"></a><span id="l75.7"> </span>
<a href="#l75.8"></a><span id="l75.8" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l75.9"></a><span id="l75.9" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l75.10"></a><span id="l75.10"> </span>
<a href="#l75.11"></a><span id="l75.11"> # Ensure that we don't embed a manifest referencing the CRT.</span>
<a href="#l75.12"></a><span id="l75.12"> EMBED_MANIFEST_AT =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/suite/build/moz.build</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/suite/build/moz.build</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -10,13 +10,13 @@ EXPORTS += [</span>
<a href="#l76.4"></a><span id="l76.4"> SOURCES += [</span>
<a href="#l76.5"></a><span id="l76.5">     'nsSuiteModule.cpp',</span>
<a href="#l76.6"></a><span id="l76.6"> ]</span>
<a href="#l76.7"></a><span id="l76.7"> </span>
<a href="#l76.8"></a><span id="l76.8"> Library('suite')</span>
<a href="#l76.9"></a><span id="l76.9"> FINAL_LIBRARY = 'xul'</span>
<a href="#l76.10"></a><span id="l76.10"> </span>
<a href="#l76.11"></a><span id="l76.11"> LOCAL_INCLUDES += [</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-    '/suite/feeds/src',</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineminus">-    '/suite/profile',</span>
<a href="#l76.14"></a><span id="l76.14" class="difflineminus">-    '/suite/profile/migration/src',</span>
<a href="#l76.15"></a><span id="l76.15" class="difflineminus">-    '/suite/shell/src',</span>
<a href="#l76.16"></a><span id="l76.16" class="difflineplus">+    '../feeds/src',</span>
<a href="#l76.17"></a><span id="l76.17" class="difflineplus">+    '../profile',</span>
<a href="#l76.18"></a><span id="l76.18" class="difflineplus">+    '../profile/migration/src',</span>
<a href="#l76.19"></a><span id="l76.19" class="difflineplus">+    '../shell/src',</span>
<a href="#l76.20"></a><span id="l76.20"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/suite/common/jar.mn</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/suite/common/jar.mn</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -1,8 +1,10 @@</span>
<a href="#l77.4"></a><span id="l77.4" class="difflineplus">+#filter substitution</span>
<a href="#l77.5"></a><span id="l77.5" class="difflineplus">+</span>
<a href="#l77.6"></a><span id="l77.6"> comm.jar:</span>
<a href="#l77.7"></a><span id="l77.7"> % content communicator %content/communicator/ contentaccessible=yes</span>
<a href="#l77.8"></a><span id="l77.8"> % content help %content/communicator/helpviewer/</span>
<a href="#l77.9"></a><span id="l77.9"> % override chrome://global/content/license.html chrome://communicator/content/license.html</span>
<a href="#l77.10"></a><span id="l77.10"> % override chrome://mozapps/content/profile/profileSelection.xul chrome://communicator/content/profile/profileSelection.xul</span>
<a href="#l77.11"></a><span id="l77.11"> % overlay chrome://global/content/viewSource.xul chrome://communicator/content/viewSourceOverlay.xul</span>
<a href="#l77.12"></a><span id="l77.12"> % overlay chrome://global/content/viewPartialSource.xul chrome://communicator/content/viewSourceOverlay.xul</span>
<a href="#l77.13"></a><span id="l77.13"> % overlay chrome://editor/content/EdAdvancedEdit.xul chrome://communicator/content/helpEditorOverlay.xul</span>
<a href="#l77.14"></a><span id="l77.14" class="difflineat">@@ -66,19 +68,19 @@ comm.jar:</span>
<a href="#l77.15"></a><span id="l77.15">    content/communicator/defaultClientDialog.js</span>
<a href="#l77.16"></a><span id="l77.16">    content/communicator/defaultClientDialog.xul</span>
<a href="#l77.17"></a><span id="l77.17">    content/communicator/findUtils.js</span>
<a href="#l77.18"></a><span id="l77.18">    content/communicator/fullscreen-video.xhtml</span>
<a href="#l77.19"></a><span id="l77.19">    content/communicator/gopherAddon.xhtml</span>
<a href="#l77.20"></a><span id="l77.20">    content/communicator/helpEditorOverlay.xul</span>
<a href="#l77.21"></a><span id="l77.21">    content/communicator/helpMessengerOverlay.xul</span>
<a href="#l77.22"></a><span id="l77.22">    content/communicator/helpSecurityOverlay.xul</span>
<a href="#l77.23"></a><span id="l77.23" class="difflineminus">-   content/communicator/labelsencodings.properties                  (/mozilla/dom/encoding/labelsencodings.properties)</span>
<a href="#l77.24"></a><span id="l77.24" class="difflineplus">+   content/communicator/labelsencodings.properties                  (/@mozreltopsrcdir@/dom/encoding/labelsencodings.properties)</span>
<a href="#l77.25"></a><span id="l77.25"> # the following file is a suite-specific override of the generic license.html, using suite/common/app-license.html as input:</span>
<a href="#l77.26"></a><span id="l77.26" class="difflineminus">-*  content/communicator/license.html                                (/mozilla/toolkit/content/license.html)</span>
<a href="#l77.27"></a><span id="l77.27" class="difflineplus">+*  content/communicator/license.html                                (/@mozreltopsrcdir@/toolkit/content/license.html)</span>
<a href="#l77.28"></a><span id="l77.28">    content/communicator/nsContextMenu.js</span>
<a href="#l77.29"></a><span id="l77.29">    content/communicator/openLocation.js</span>
<a href="#l77.30"></a><span id="l77.30">    content/communicator/openLocation.xul</span>
<a href="#l77.31"></a><span id="l77.31">    content/communicator/passwordManager.xul</span>
<a href="#l77.32"></a><span id="l77.32">    content/communicator/safeMode.js</span>
<a href="#l77.33"></a><span id="l77.33">    content/communicator/safeMode.xul</span>
<a href="#l77.34"></a><span id="l77.34">    content/communicator/sanitize.xul</span>
<a href="#l77.35"></a><span id="l77.35">    content/communicator/setDesktopBackground.js</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/suite/common/moz.build</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/suite/common/moz.build</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -36,10 +36,10 @@ XPCSHELL_TESTS_MANIFESTS += [</span>
<a href="#l78.4"></a><span id="l78.4"> JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l78.5"></a><span id="l78.5"> </span>
<a href="#l78.6"></a><span id="l78.6"> # DEFINES for preprocessing</span>
<a href="#l78.7"></a><span id="l78.7"> # Use suite/common/app-license.html as input when generating </span>
<a href="#l78.8"></a><span id="l78.8"> # chrome://content/communicator/license.html to override </span>
<a href="#l78.9"></a><span id="l78.9"> # chrome://global/content/license.html (about:license)</span>
<a href="#l78.10"></a><span id="l78.10"> DEFINES['APP_LICENSE_BLOCK'] = '%s/app-license.html' % SRCDIR</span>
<a href="#l78.11"></a><span id="l78.11"> </span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-for var in ('MOZ_APP_NAME', 'MOZ_MACBUNDLE_NAME'):</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+for var in ('MOZ_APP_NAME', 'MOZ_MACBUNDLE_NAME', 'mozreltopsrcdir'):</span>
<a href="#l78.14"></a><span id="l78.14">     DEFINES[var] = CONFIG[var]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/suite/configure.in</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/suite/configure.in</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -7,16 +7,22 @@ dnl file, You can obtain one at http://m</span>
<a href="#l79.4"></a><span id="l79.4"> dnl Things we need to carry from confvars.sh</span>
<a href="#l79.5"></a><span id="l79.5"> AC_DEFINE(MOZ_SUITE)</span>
<a href="#l79.6"></a><span id="l79.6"> AC_SUBST(MOZ_SUITE)</span>
<a href="#l79.7"></a><span id="l79.7"> AC_SUBST(MOZ_COMPOSER)</span>
<a href="#l79.8"></a><span id="l79.8"> AC_SUBST(SEAMONKEY_VERSION)</span>
<a href="#l79.9"></a><span id="l79.9"> AC_DEFINE(MOZ_SEPARATE_MANIFEST_FOR_THEME_OVERRIDES)</span>
<a href="#l79.10"></a><span id="l79.10"> AC_SUBST(MOZ_BUNDLED_FONTS)</span>
<a href="#l79.11"></a><span id="l79.11"> </span>
<a href="#l79.12"></a><span id="l79.12" class="difflineplus">+dnl More things we need to carry from confvars.sh</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+AC_SUBST(moztopsrcdir)</span>
<a href="#l79.14"></a><span id="l79.14" class="difflineplus">+AC_SUBST(commtopsrcdir)</span>
<a href="#l79.15"></a><span id="l79.15" class="difflineplus">+AC_SUBST(mozreltopsrcdir)</span>
<a href="#l79.16"></a><span id="l79.16" class="difflineplus">+AC_SUBST(commreltopsrcdir)</span>
<a href="#l79.17"></a><span id="l79.17" class="difflineplus">+</span>
<a href="#l79.18"></a><span id="l79.18"> dnl Optional parts of the build.</span>
<a href="#l79.19"></a><span id="l79.19"> AC_SUBST(MOZ_MORK)</span>
<a href="#l79.20"></a><span id="l79.20"> if test &quot;$MOZ_MORK&quot;; then</span>
<a href="#l79.21"></a><span id="l79.21">   AC_DEFINE(MOZ_MORK)</span>
<a href="#l79.22"></a><span id="l79.22"> fi</span>
<a href="#l79.23"></a><span id="l79.23"> if test &quot;$OS_ARCH&quot; != &quot;WINNT&quot;; then</span>
<a href="#l79.24"></a><span id="l79.24">   MOZ_MOVEMAIL=1</span>
<a href="#l79.25"></a><span id="l79.25">   HAVE_MOVEMAIL=1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/suite/confvars.sh</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/suite/confvars.sh</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -1,22 +1,24 @@</span>
<a href="#l80.4"></a><span id="l80.4"> #! /bin/sh</span>
<a href="#l80.5"></a><span id="l80.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l80.6"></a><span id="l80.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l80.7"></a><span id="l80.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l80.8"></a><span id="l80.8"> </span>
<a href="#l80.9"></a><span id="l80.9" class="difflineplus">+source ${_topsrcdir}/$MOZ_BUILD_APP/../comm-confvars.sh</span>
<a href="#l80.10"></a><span id="l80.10" class="difflineplus">+</span>
<a href="#l80.11"></a><span id="l80.11"> MOZ_APP_BASENAME=SeaMonkey</span>
<a href="#l80.12"></a><span id="l80.12"> MOZ_APP_VENDOR=Mozilla</span>
<a href="#l80.13"></a><span id="l80.13"> MOZ_APP_NAME=seamonkey</span>
<a href="#l80.14"></a><span id="l80.14"> MOZ_APP_DISPLAYNAME=SeaMonkey</span>
<a href="#l80.15"></a><span id="l80.15"> MOZ_LDAP_XPCOM=1</span>
<a href="#l80.16"></a><span id="l80.16"> MOZ_COMPOSER=1</span>
<a href="#l80.17"></a><span id="l80.17"> MOZ_SUITE=1</span>
<a href="#l80.18"></a><span id="l80.18" class="difflineminus">-MOZ_BRANDING_DIRECTORY=suite/branding/nightly</span>
<a href="#l80.19"></a><span id="l80.19" class="difflineminus">-MOZ_OFFICIAL_BRANDING_DIRECTORY=suite/branding/nightly</span>
<a href="#l80.20"></a><span id="l80.20" class="difflineplus">+MOZ_BRANDING_DIRECTORY=$commreltopsrcdir/suite/branding/nightly</span>
<a href="#l80.21"></a><span id="l80.21" class="difflineplus">+MOZ_OFFICIAL_BRANDING_DIRECTORY=$commreltopsrcdir/suite/branding/nightly</span>
<a href="#l80.22"></a><span id="l80.22"> MOZ_EXTENSIONS_DEFAULT=&quot; inspector irc&quot;</span>
<a href="#l80.23"></a><span id="l80.23"> MOZ_UPDATER=1</span>
<a href="#l80.24"></a><span id="l80.24"> # This should usually be the same as the value MAR_CHANNEL_ID.</span>
<a href="#l80.25"></a><span id="l80.25"> # If more than one ID is needed, then you should use a comma separated list</span>
<a href="#l80.26"></a><span id="l80.26"> # of values.</span>
<a href="#l80.27"></a><span id="l80.27"> ACCEPTED_MAR_CHANNEL_IDS=seamonkey-comm-central</span>
<a href="#l80.28"></a><span id="l80.28"> # The MAR_CHANNEL_ID must not contain the following 3 characters: &quot;,\t &quot;</span>
<a href="#l80.29"></a><span id="l80.29"> MAR_CHANNEL_ID=seamonkey-comm-central</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/suite/installer/Makefile.in</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/suite/installer/Makefile.in</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -1,28 +1,28 @@</span>
<a href="#l81.4"></a><span id="l81.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l81.5"></a><span id="l81.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l81.6"></a><span id="l81.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l81.7"></a><span id="l81.7"> </span>
<a href="#l81.8"></a><span id="l81.8"> STANDALONE_MAKEFILE := 1</span>
<a href="#l81.9"></a><span id="l81.9"> </span>
<a href="#l81.10"></a><span id="l81.10" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l81.11"></a><span id="l81.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l81.12"></a><span id="l81.12"> </span>
<a href="#l81.13"></a><span id="l81.13"> MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in</span>
<a href="#l81.14"></a><span id="l81.14"> </span>
<a href="#l81.15"></a><span id="l81.15"> MOZ_PKG_MANIFEST_P = $(srcdir)/package-manifest.in</span>
<a href="#l81.16"></a><span id="l81.16"> # Be fatal, except when building with XULRunner which already bundles some files.</span>
<a href="#l81.17"></a><span id="l81.17"> ifndef SYSTEM_LIBXUL</span>
<a href="#l81.18"></a><span id="l81.18"> MOZ_PKG_FATAL_WARNINGS = 1</span>
<a href="#l81.19"></a><span id="l81.19"> endif</span>
<a href="#l81.20"></a><span id="l81.20"> </span>
<a href="#l81.21"></a><span id="l81.21"> MOZ_PKG_DUPEFLAGS = \</span>
<a href="#l81.22"></a><span id="l81.22"> 	-w \</span>
<a href="#l81.23"></a><span id="l81.23"> 	-f $(srcdir)/allowed-dupes.mn \</span>
<a href="#l81.24"></a><span id="l81.24" class="difflineminus">-	-f $(MOZILLA_DIR)/browser/installer/allowed-dupes.mn \</span>
<a href="#l81.25"></a><span id="l81.25" class="difflineplus">+	-f $(moztopsrcdir)/browser/installer/allowed-dupes.mn \</span>
<a href="#l81.26"></a><span id="l81.26"> 	$(NULL)</span>
<a href="#l81.27"></a><span id="l81.27"> </span>
<a href="#l81.28"></a><span id="l81.28"> MOZ_NONLOCALIZED_PKG_LIST = \</span>
<a href="#l81.29"></a><span id="l81.29"> 	xpcom \</span>
<a href="#l81.30"></a><span id="l81.30"> 	browser \</span>
<a href="#l81.31"></a><span id="l81.31"> 	mail \</span>
<a href="#l81.32"></a><span id="l81.32"> 	$(NULL)</span>
<a href="#l81.33"></a><span id="l81.33"> </span>
<a href="#l81.34"></a><span id="l81.34" class="difflineat">@@ -153,17 +153,17 @@ endif</span>
<a href="#l81.35"></a><span id="l81.35"> NON_OMNIJAR_FILES = \</span>
<a href="#l81.36"></a><span id="l81.36"> 	defaults/messenger/mailViews.dat \</span>
<a href="#l81.37"></a><span id="l81.37"> 	defaults/profile/panels.rdf \</span>
<a href="#l81.38"></a><span id="l81.38"> 	defaults/profile/mimeTypes.rdf \</span>
<a href="#l81.39"></a><span id="l81.39"> 	defaults/profile/chrome/userChrome-example.css \</span>
<a href="#l81.40"></a><span id="l81.40"> 	defaults/profile/chrome/userContent-example.css \</span>
<a href="#l81.41"></a><span id="l81.41"> 	$(NULL)</span>
<a href="#l81.42"></a><span id="l81.42"> </span>
<a href="#l81.43"></a><span id="l81.43" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/packager.mk</span>
<a href="#l81.44"></a><span id="l81.44" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/packager.mk</span>
<a href="#l81.45"></a><span id="l81.45"> </span>
<a href="#l81.46"></a><span id="l81.46"> ifeq (Darwin, $(OS_ARCH))</span>
<a href="#l81.47"></a><span id="l81.47"> BINPATH = $(_BINPATH)</span>
<a href="#l81.48"></a><span id="l81.48"> DEFINES += -DAPPNAME=$(_APPNAME)</span>
<a href="#l81.49"></a><span id="l81.49"> else</span>
<a href="#l81.50"></a><span id="l81.50"> BINPATH = bin</span>
<a href="#l81.51"></a><span id="l81.51"> endif</span>
<a href="#l81.52"></a><span id="l81.52"> DEFINES += -DBINPATH=$(BINPATH)</span>
<a href="#l81.53"></a><span id="l81.53" class="difflineat">@@ -226,12 +226,12 @@ ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l81.54"></a><span id="l81.54"> endif</span>
<a href="#l81.55"></a><span id="l81.55"> </span>
<a href="#l81.56"></a><span id="l81.56"> installer:</span>
<a href="#l81.57"></a><span id="l81.57"> ifdef INSTALLER_DIR</span>
<a href="#l81.58"></a><span id="l81.58"> 	$(MAKE) -C $(INSTALLER_DIR)</span>
<a href="#l81.59"></a><span id="l81.59"> endif</span>
<a href="#l81.60"></a><span id="l81.60"> </span>
<a href="#l81.61"></a><span id="l81.61"> # The comm-* source stamp is already there.</span>
<a href="#l81.62"></a><span id="l81.62" class="difflineminus">-PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; parent --template=&quot;{node|short}\n&quot; 2&gt;/dev/null))</span>
<a href="#l81.63"></a><span id="l81.63" class="difflineminus">-PLATFORM_SOURCE_REPO = $(shell hg -R &quot;$(MOZILLA_SRCDIR)&quot; showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/https:/&quot;)</span>
<a href="#l81.64"></a><span id="l81.64" class="difflineplus">+PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node|short}\n&quot; 2&gt;/dev/null))</span>
<a href="#l81.65"></a><span id="l81.65" class="difflineplus">+PLATFORM_SOURCE_REPO = $(shell hg -R &quot;$(moztopsrcdir)&quot; showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/https:/&quot;)</span>
<a href="#l81.66"></a><span id="l81.66"> make-sourcestamp-file::</span>
<a href="#l81.67"></a><span id="l81.67"> 	@echo &quot;$(PLATFORM_SOURCE_REPO)/rev/$(PLATFORM_SOURCE_STAMP)&quot; &gt;&gt; $(MOZ_SOURCESTAMP_FILE)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/suite/installer/windows/Makefile.in</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/suite/installer/windows/Makefile.in</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l82.4"></a><span id="l82.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l82.5"></a><span id="l82.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l82.6"></a><span id="l82.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l82.7"></a><span id="l82.7"> </span>
<a href="#l82.8"></a><span id="l82.8" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l82.9"></a><span id="l82.9" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l82.10"></a><span id="l82.10"> </span>
<a href="#l82.11"></a><span id="l82.11"> CONFIG_DIR = instgen</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-SFX_MODULE = $(topsrcdir)/other-licenses/7zstub/seamonkey/7zSD.sfx</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+SFX_MODULE = $(commtopsrcdir)/other-licenses/7zstub/seamonkey/7zSD.sfx</span>
<a href="#l82.14"></a><span id="l82.14"> </span>
<a href="#l82.15"></a><span id="l82.15"> INSTALLER_FILES = \</span>
<a href="#l82.16"></a><span id="l82.16"> 	app.tag \</span>
<a href="#l82.17"></a><span id="l82.17"> 	nsis/installer.nsi \</span>
<a href="#l82.18"></a><span id="l82.18"> 	nsis/uninstaller.nsi \</span>
<a href="#l82.19"></a><span id="l82.19"> 	nsis/shared.nsh \</span>
<a href="#l82.20"></a><span id="l82.20"> 	nsis/custom.nsi \</span>
<a href="#l82.21"></a><span id="l82.21"> 	$(NULL)</span>
<a href="#l82.22"></a><span id="l82.22" class="difflineat">@@ -21,41 +21,41 @@ BRANDING_FILES = \</span>
<a href="#l82.23"></a><span id="l82.23"> 	wizHeaderRTL.bmp \</span>
<a href="#l82.24"></a><span id="l82.24"> 	wizWatermark.bmp \</span>
<a href="#l82.25"></a><span id="l82.25"> 	$(NULL)</span>
<a href="#l82.26"></a><span id="l82.26"> </span>
<a href="#l82.27"></a><span id="l82.27"> ifdef MOZ_UPDATER</span>
<a href="#l82.28"></a><span id="l82.28"> DEFINES += -DMOZ_UPDATER=1</span>
<a href="#l82.29"></a><span id="l82.29"> endif</span>
<a href="#l82.30"></a><span id="l82.30"> </span>
<a href="#l82.31"></a><span id="l82.31" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l82.32"></a><span id="l82.32" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l82.33"></a><span id="l82.33"> </span>
<a href="#l82.34"></a><span id="l82.34"> OVERRIDE_DEFAULT_GOAL := installer</span>
<a href="#l82.35"></a><span id="l82.35"> installer::</span>
<a href="#l82.36"></a><span id="l82.36"> 	$(MAKE) -C .. installer-stage</span>
<a href="#l82.37"></a><span id="l82.37"> 	$(MAKE) $(CONFIG_DIR)/setup.exe</span>
<a href="#l82.38"></a><span id="l82.38"> </span>
<a href="#l82.39"></a><span id="l82.39"> # For building the uninstaller during the application build so it can be</span>
<a href="#l82.40"></a><span id="l82.40"> # included for mar file generation.</span>
<a href="#l82.41"></a><span id="l82.41"> uninstaller::</span>
<a href="#l82.42"></a><span id="l82.42"> 	$(RM) -r $(CONFIG_DIR) &amp;&amp; mkdir $(CONFIG_DIR)</span>
<a href="#l82.43"></a><span id="l82.43"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l82.44"></a><span id="l82.44"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l82.45"></a><span id="l82.45"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l82.46"></a><span id="l82.46"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l82.47"></a><span id="l82.47" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l82.48"></a><span id="l82.48" class="difflineminus">-	  --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l82.49"></a><span id="l82.49" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l82.50"></a><span id="l82.50" class="difflineplus">+	  --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l82.51"></a><span id="l82.51"> 	  $(call EXPAND_LOCALE_SRCDIR,suite/locales)/installer/windows $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l82.52"></a><span id="l82.52"> </span>
<a href="#l82.53"></a><span id="l82.53"> $(CONFIG_DIR)/setup.exe::</span>
<a href="#l82.54"></a><span id="l82.54"> 	$(RM) -r $(CONFIG_DIR) &amp;&amp; mkdir $(CONFIG_DIR)</span>
<a href="#l82.55"></a><span id="l82.55"> 	$(INSTALL) $(addprefix $(srcdir)/,$(INSTALLER_FILES)) $(CONFIG_DIR)</span>
<a href="#l82.56"></a><span id="l82.56"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l82.57"></a><span id="l82.57" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l82.58"></a><span id="l82.58" class="difflineminus">-	  --convert-utf8-utf16le $(topsrcdir)/suite/installer/license.txt $(CONFIG_DIR)/license.txt</span>
<a href="#l82.59"></a><span id="l82.59" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l82.60"></a><span id="l82.60" class="difflineplus">+	  --convert-utf8-utf16le $(commtopsrcdir)/suite/installer/license.txt $(CONFIG_DIR)/license.txt</span>
<a href="#l82.61"></a><span id="l82.61"> 	$(call py_action,preprocessor,-Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l82.62"></a><span id="l82.62"> 	  $(srcdir)/nsis/defines.nsi.in -o $(CONFIG_DIR)/defines.nsi)</span>
<a href="#l82.63"></a><span id="l82.63" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l82.64"></a><span id="l82.64" class="difflineminus">-	  --preprocess-locale $(MOZILLA_SRCDIR) \</span>
<a href="#l82.65"></a><span id="l82.65" class="difflineplus">+	$(PYTHON) $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.py \</span>
<a href="#l82.66"></a><span id="l82.66" class="difflineplus">+	  --preprocess-locale $(moztopsrcdir) \</span>
<a href="#l82.67"></a><span id="l82.67"> 	  $(call EXPAND_LOCALE_SRCDIR,suite/locales)/installer/windows $(AB_CD) $(CONFIG_DIR)</span>
<a href="#l82.68"></a><span id="l82.68"> </span>
<a href="#l82.69"></a><span id="l82.69" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l82.70"></a><span id="l82.70" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/makensis.mk</span>
<a href="#l82.71"></a><span id="l82.71" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l82.72"></a><span id="l82.72" class="difflineplus">+include $(moztopsrcdir)/toolkit/mozapps/installer/windows/nsis/makensis.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/suite/locales/Makefile.in</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/suite/locales/Makefile.in</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l83.4"></a><span id="l83.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l83.5"></a><span id="l83.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l83.6"></a><span id="l83.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l83.7"></a><span id="l83.7"> </span>
<a href="#l83.8"></a><span id="l83.8" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l83.9"></a><span id="l83.9" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l83.10"></a><span id="l83.10"> </span>
<a href="#l83.11"></a><span id="l83.11" class="difflineminus">-_ABS_SRCDIR := $(abspath $(topsrcdir))</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineplus">+_ABS_SRCDIR := $(abspath $(commtopsrcdir))</span>
<a href="#l83.13"></a><span id="l83.13"> </span>
<a href="#l83.14"></a><span id="l83.14"> vpath %.xml @srcdir@/en-US/searchplugins</span>
<a href="#l83.15"></a><span id="l83.15"> vpath %.xml $(LOCALE_SRCDIR)/searchplugins</span>
<a href="#l83.16"></a><span id="l83.16"> </span>
<a href="#l83.17"></a><span id="l83.17"> SUBMAKEFILES += \</span>
<a href="#l83.18"></a><span id="l83.18"> 	$(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/Makefile \</span>
<a href="#l83.19"></a><span id="l83.19"> 	$(NULL)</span>
<a href="#l83.20"></a><span id="l83.20"> </span>
<a href="#l83.21"></a><span id="l83.21" class="difflineat">@@ -33,18 +33,18 @@ PP_TARGETS += L10N_PREF_JS_EXPORTS</span>
<a href="#l83.22"></a><span id="l83.22"> </span>
<a href="#l83.23"></a><span id="l83.23"> ifeq ($(MOZ_WIDGET_TOOLKIT),cocoa)</span>
<a href="#l83.24"></a><span id="l83.24"> MOZ_PKG_MAC_DSSTORE=$(ABS_DIST)/branding/dsstore</span>
<a href="#l83.25"></a><span id="l83.25"> MOZ_PKG_MAC_BACKGROUND=$(ABS_DIST)/branding/background.png</span>
<a href="#l83.26"></a><span id="l83.26"> MOZ_PKG_MAC_ICON=$(ABS_DIST)/branding/disk.icns</span>
<a href="#l83.27"></a><span id="l83.27"> MOZ_PKG_MAC_EXTRA=--symlink '/Applications:/ '</span>
<a href="#l83.28"></a><span id="l83.28"> endif</span>
<a href="#l83.29"></a><span id="l83.29"> </span>
<a href="#l83.30"></a><span id="l83.30" class="difflineminus">-MOZ_SFX_PACKAGE=$(topsrcdir)/other-licenses/7zstub/seamonkey/7zSD.sfx</span>
<a href="#l83.31"></a><span id="l83.31" class="difflineminus">-MOZ_INSTALLER_PATH=$(topsrcdir)/suite/installer/windows</span>
<a href="#l83.32"></a><span id="l83.32" class="difflineplus">+MOZ_SFX_PACKAGE=$(commtopsrcdir)/other-licenses/7zstub/seamonkey/7zSD.sfx</span>
<a href="#l83.33"></a><span id="l83.33" class="difflineplus">+MOZ_INSTALLER_PATH=$(commtopsrcdir)/suite/installer/windows</span>
<a href="#l83.34"></a><span id="l83.34"> </span>
<a href="#l83.35"></a><span id="l83.35"> ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l83.36"></a><span id="l83.36"> UNINSTALLER_PACKAGE_HOOK = $(RM) -r $(STAGEDIST)/uninstall; \</span>
<a href="#l83.37"></a><span id="l83.37"> 	$(NSINSTALL) -D $(STAGEDIST)/uninstall; \</span>
<a href="#l83.38"></a><span id="l83.38"> 	cp ../installer/windows/l10ngen/helper.exe $(STAGEDIST)/uninstall; \</span>
<a href="#l83.39"></a><span id="l83.39"> 	$(RM) $(ABS_DIST)/l10n-stage/setup.exe; \</span>
<a href="#l83.40"></a><span id="l83.40"> 	cp ../installer/windows/l10ngen/setup.exe $(ABS_DIST)/l10n-stage; \</span>
<a href="#l83.41"></a><span id="l83.41"> 	$(NULL)</span>
<a href="#l83.42"></a><span id="l83.42" class="difflineat">@@ -63,19 +63,19 @@ SEARCH_PLUGINS_PATH := $(FINAL_TARGET)/s</span>
<a href="#l83.43"></a><span id="l83.43"> .PHONY: searchplugins</span>
<a href="#l83.44"></a><span id="l83.44"> SEARCH_PLUGINS_TARGET := libs searchplugins</span>
<a href="#l83.45"></a><span id="l83.45"> SEARCH_PLUGINS := $(foreach plugin,$(addsuffix .xml,$(SEARCH_PLUGINS_NAMES)),$(or $(wildcard $(call MERGE_FILE,searchplugins/$(plugin))),$(info Missing searchplugin: $(plugin))))</span>
<a href="#l83.46"></a><span id="l83.46"> # Some locale-specific search plugins may have preprocessor directives, but the</span>
<a href="#l83.47"></a><span id="l83.47"> # default en-US ones do not.</span>
<a href="#l83.48"></a><span id="l83.48"> SEARCH_PLUGINS_FLAGS := --silence-missing-directive-warnings </span>
<a href="#l83.49"></a><span id="l83.49"> PP_TARGETS += SEARCH_PLUGINS</span>
<a href="#l83.50"></a><span id="l83.50"> </span>
<a href="#l83.51"></a><span id="l83.51" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l83.52"></a><span id="l83.52" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l83.53"></a><span id="l83.53"> </span>
<a href="#l83.54"></a><span id="l83.54" class="difflineminus">-include $(topsrcdir)/mozilla/toolkit/locales/l10n.mk</span>
<a href="#l83.55"></a><span id="l83.55" class="difflineplus">+include $(moztopsrcdir)/toolkit/locales/l10n.mk</span>
<a href="#l83.56"></a><span id="l83.56"> </span>
<a href="#l83.57"></a><span id="l83.57"> $(DIST)/branding:</span>
<a href="#l83.58"></a><span id="l83.58"> 	$(NSINSTALL) -D $@</span>
<a href="#l83.59"></a><span id="l83.59"> </span>
<a href="#l83.60"></a><span id="l83.60"> PROFILE_CHROME = userChrome-example.css userContent-example.css</span>
<a href="#l83.61"></a><span id="l83.61"> </span>
<a href="#l83.62"></a><span id="l83.62"> NO_JA_JP_MAC_AB_CD := $(if $(filter ja-JP-mac, $(AB_CD)),ja,$(AB_CD))</span>
<a href="#l83.63"></a><span id="l83.63"> </span>
<a href="#l83.64"></a><span id="l83.64" class="difflineat">@@ -178,29 +178,29 @@ endif</span>
<a href="#l83.65"></a><span id="l83.65"> </span>
<a href="#l83.66"></a><span id="l83.66"> ifdef MOZ_CRASHREPORTER</span>
<a href="#l83.67"></a><span id="l83.67"> libs:: $(call MERGE_FILE,crashreporter/crashreporter-override.ini)</span>
<a href="#l83.68"></a><span id="l83.68"> 	$(SYSINSTALL) $(IFLAGS1) $^ $(FINAL_TARGET)</span>
<a href="#l83.69"></a><span id="l83.69"> endif</span>
<a href="#l83.70"></a><span id="l83.70"> </span>
<a href="#l83.71"></a><span id="l83.71"> ident:</span>
<a href="#l83.72"></a><span id="l83.72"> 	@printf 'comm_revision '</span>
<a href="#l83.73"></a><span id="l83.73" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l83.74"></a><span id="l83.74" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l83.75"></a><span id="l83.75"> 	    $(STAGEDIST)/application.ini App SourceStamp</span>
<a href="#l83.76"></a><span id="l83.76"> 	@printf 'moz_revision '</span>
<a href="#l83.77"></a><span id="l83.77" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l83.78"></a><span id="l83.78" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l83.79"></a><span id="l83.79"> 	    $(STAGEDIST)/platform.ini Build SourceStamp</span>
<a href="#l83.80"></a><span id="l83.80"> 	@printf 'buildid '</span>
<a href="#l83.81"></a><span id="l83.81" class="difflineminus">-	@$(PYTHON) $(MOZILLA_SRCDIR)/config/printconfigsetting.py \</span>
<a href="#l83.82"></a><span id="l83.82" class="difflineplus">+	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l83.83"></a><span id="l83.83"> 	    $(STAGEDIST)/application.ini App BuildID</span>
<a href="#l83.84"></a><span id="l83.84"> </span>
<a href="#l83.85"></a><span id="l83.85"> merge-%:</span>
<a href="#l83.86"></a><span id="l83.86"> ifdef LOCALE_MERGEDIR</span>
<a href="#l83.87"></a><span id="l83.87"> 	$(RM) -rf $(LOCALE_MERGEDIR)</span>
<a href="#l83.88"></a><span id="l83.88" class="difflineminus">-	$(topsrcdir)/mozilla/mach compare-locales --merge-dir $(LOCALE_MERGEDIR) --l10n-ini $(srcdir)/l10n.ini $*</span>
<a href="#l83.89"></a><span id="l83.89" class="difflineplus">+	$(moztopsrcdir)/mach compare-locales --merge-dir $(LOCALE_MERGEDIR) --l10n-ini $(srcdir)/l10n.ini $*</span>
<a href="#l83.90"></a><span id="l83.90"> endif</span>
<a href="#l83.91"></a><span id="l83.91"> 	@echo</span>
<a href="#l83.92"></a><span id="l83.92"> </span>
<a href="#l83.93"></a><span id="l83.93"> .PHONY: repackage-extensions</span>
<a href="#l83.94"></a><span id="l83.94"> </span>
<a href="#l83.95"></a><span id="l83.95"> MOZ_PKG_EXTRAL10N += extensions/langpack-$(AB_CD)@chatzilla.mozilla.org=$(DIST)/xpi-stage/chatzilla-$(AB_CD)</span>
<a href="#l83.96"></a><span id="l83.96"> </span>
<a href="#l83.97"></a><span id="l83.97"> ifdef MOZ_CALENDAR</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/suite/moz.build</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/suite/moz.build</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -25,16 +25,16 @@ DIRS += [</span>
<a href="#l84.4"></a><span id="l84.4">     'shell/src',</span>
<a href="#l84.5"></a><span id="l84.5">     'smile',</span>
<a href="#l84.6"></a><span id="l84.6"> ]</span>
<a href="#l84.7"></a><span id="l84.7"> </span>
<a href="#l84.8"></a><span id="l84.8"> if CONFIG['MAKENSISU']:</span>
<a href="#l84.9"></a><span id="l84.9">     DIRS += ['installer/windows']</span>
<a href="#l84.10"></a><span id="l84.10"> </span>
<a href="#l84.11"></a><span id="l84.11"> if CONFIG['MOZ_BUNDLED_FONTS']:</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-    DIRS += ['/mozilla/browser/fonts']</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+    DIRS += ['/%s/browser/fonts' % CONFIG['mozreltopsrcdir']]</span>
<a href="#l84.14"></a><span id="l84.14"> </span>
<a href="#l84.15"></a><span id="l84.15"> # app is always last as it packages up the built files on mac.</span>
<a href="#l84.16"></a><span id="l84.16"> DIRS += [</span>
<a href="#l84.17"></a><span id="l84.17">     'build',</span>
<a href="#l84.18"></a><span id="l84.18">     'app',</span>
<a href="#l84.19"></a><span id="l84.19"> ]</span>
<a href="#l84.20"></a><span id="l84.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/suite/themes/modern/moz.build</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/suite/themes/modern/moz.build</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -7,13 +7,14 @@ FINAL_TARGET_PP_FILES += ['install.rdf']</span>
<a href="#l85.4"></a><span id="l85.4"> </span>
<a href="#l85.5"></a><span id="l85.5"> DIST_SUBDIR = 'extensions/modern@themes.mozilla.org'</span>
<a href="#l85.6"></a><span id="l85.6"> </span>
<a href="#l85.7"></a><span id="l85.7"> JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l85.8"></a><span id="l85.8"> </span>
<a href="#l85.9"></a><span id="l85.9"> USE_EXTENSION_MANIFEST = True</span>
<a href="#l85.10"></a><span id="l85.10"> </span>
<a href="#l85.11"></a><span id="l85.11"> DEFINES['SEAMONKEY_VERSION'] = CONFIG['SEAMONKEY_VERSION']</span>
<a href="#l85.12"></a><span id="l85.12" class="difflineplus">+DEFINES['mozreltopsrcdir'] = CONFIG['mozreltopsrcdir']</span>
<a href="#l85.13"></a><span id="l85.13"> </span>
<a href="#l85.14"></a><span id="l85.14"> FINAL_TARGET_FILES += [</span>
<a href="#l85.15"></a><span id="l85.15">     'icon.png',</span>
<a href="#l85.16"></a><span id="l85.16">     'preview.png',</span>
<a href="#l85.17"></a><span id="l85.17"> ]</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

