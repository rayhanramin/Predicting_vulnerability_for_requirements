<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 19883:341f2588de6410bb151926249dd334317785a0d7</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 341f2588de6410bb151926249dd334317785a0d7" />
<meta property="og:url" content="/comm-central/rev/341f2588de6410bb151926249dd334317785a0d7" />
<meta property="og:description" content="Bug 1277972 - Let event/task dialog open in a tab. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 341f2588de6410bb151926249dd334317785a0d7 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/341f2588de6410bb151926249dd334317785a0d7">shortlog</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/341f2588de6410bb151926249dd334317785a0d7">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7">files</a> |
changeset |
<a href="/comm-central/raw-rev/341f2588de6410bb151926249dd334317785a0d7">raw</a>  | <a href="/comm-central/archive/341f2588de6410bb151926249dd334317785a0d7.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1277972">Bug 1277972</a> - Let event/task dialog open in a tab. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#97;&#117;&#108;&#32;&#77;&#111;&#114;&#114;&#105;&#115;&#32;&#60;&#112;&#97;&#117;&#108;&#64;&#112;&#97;&#117;&#108;&#119;&#109;&#111;&#114;&#114;&#105;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 21 Jul 2016 23:20:10 -0400</td></tr>

<tr>
 <td>changeset 19883</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/341f2588de6410bb151926249dd334317785a0d7">341f2588de6410bb151926249dd334317785a0d7</a></td>
</tr>



<tr>
<td>parent 19882</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7f35b399aa0050d2cdc1f83e7aac54230b9d03e1">7f35b399aa0050d2cdc1f83e7aac54230b9d03e1</a>
</td>
</tr>

<tr>
<td>child 19884</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/79420fdeab5bd6b9ab8c1fb69dd818572182aa54">79420fdeab5bd6b9ab8c1fb69dd818572182aa54</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=341f2588de6410bb151926249dd334317785a0d7">12178</a></td></tr>
<tr><td>push user</td><td>aleth@instantbird.org</td></tr>
<tr><td>push date</td><td class="date age">Sun, 14 Aug 2016 20:46:47 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@341f2588de64 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=341f2588de6410bb151926249dd334317785a0d7">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=341f2588de6410bb151926249dd334317785a0d7&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=341f2588de6410bb151926249dd334317785a0d7&newProject=comm-central&newRevision=341f2588de6410bb151926249dd334317785a0d7&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=341f2588de6410bb151926249dd334317785a0d7&newProject=comm-central&newRevision=341f2588de6410bb151926249dd334317785a0d7&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=341f2588de6410bb151926249dd334317785a0d7&newProject=comm-central&newRevision=341f2588de6410bb151926249dd334317785a0d7&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1277972">1277972</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1277972">Bug 1277972</a> - Let event/task dialog open in a tab. r=MakeMyDay</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-chrome-startup.js">calendar/base/content/calendar-chrome-startup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-chrome-startup.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-chrome-startup.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-chrome-startup.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-chrome-startup.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-chrome-startup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-item-editing.js">calendar/base/content/calendar-item-editing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-item-editing.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-item-editing.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-item-editing.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-item-editing.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/calendar-item-editing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-dialog-utils.js">calendar/base/content/dialogs/calendar-dialog-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-dialog-utils.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-dialog-utils.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-dialog-utils.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-dialog-utils.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-dialog-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.js">calendar/base/content/dialogs/calendar-event-dialog.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.xul">calendar/base/content/dialogs/calendar-event-dialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.xul">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.xul">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.xul">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.xul">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/content/dialogs/calendar-event-dialog.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/jar.mn">calendar/base/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/jar.mn">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/jar.mn">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/jar.mn">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/jar.mn">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/calendar-attendees.css">calendar/base/themes/common/calendar-attendees.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/calendar-attendees.css">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/calendar-attendees.css">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/calendar-attendees.css">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/calendar-attendees.css">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/calendar-attendees.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/calendar-event-dialog.css">calendar/base/themes/common/dialogs/calendar-event-dialog.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/calendar-event-dialog.css">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/calendar-event-dialog.css">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/calendar-event-dialog.css">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/calendar-event-dialog.css">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/calendar-event-dialog.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-event-tab.png">calendar/base/themes/common/dialogs/images/calendar-event-tab.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-event-tab.png">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-event-tab.png">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-event-tab.png">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-event-tab.png">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-event-tab.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-task-tab.png">calendar/base/themes/common/dialogs/images/calendar-task-tab.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-task-tab.png">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-task-tab.png">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-task-tab.png">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-task-tab.png">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/base/themes/common/dialogs/images/calendar-task-tab.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.xul">calendar/lightning/content/lightning-item-iframe.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.xul">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.xul">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.xul">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.xul">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-iframe.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.js">calendar/lightning/content/lightning-item-panel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.xul">calendar/lightning/content/lightning-item-panel.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.xul">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.xul">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.xul">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.xul">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-panel.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-toolbar.xul">calendar/lightning/content/lightning-item-toolbar.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-toolbar.xul">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-toolbar.xul">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-toolbar.xul">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-toolbar.xul">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning-item-toolbar.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning.js">calendar/lightning/content/lightning.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/lightning.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.xul">calendar/lightning/content/messenger-overlay-sidebar.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.xul">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.xul">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.xul">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.xul">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/content/messenger-overlay-sidebar.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/jar.mn">calendar/lightning/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/jar.mn">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/jar.mn">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/jar.mn">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/jar.mn">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/themes/linux/lightning.css">calendar/lightning/themes/linux/lightning.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/themes/linux/lightning.css">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/themes/linux/lightning.css">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/themes/linux/lightning.css">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/themes/linux/lightning.css">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/lightning/themes/linux/lightning.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testLocalICS.js">calendar/test/mozmill/testLocalICS.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testLocalICS.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testLocalICS.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testLocalICS.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testLocalICS.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testLocalICS.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testTodayPane.js">calendar/test/mozmill/testTodayPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testTodayPane.js">file</a> |
<a href="/comm-central/annotate/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testTodayPane.js">annotate</a> |
<a href="/comm-central/diff/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testTodayPane.js">diff</a> |
<a href="/comm-central/comparison/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testTodayPane.js">comparison</a> |
<a href="/comm-central/log/341f2588de6410bb151926249dd334317785a0d7/calendar/test/mozmill/testTodayPane.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -143,29 +143,53 @@ var calendarWindowPrefs = {</span>
<a href="#l1.4"></a><span id="l1.4">     }</span>
<a href="#l1.5"></a><span id="l1.5"> }</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> /**</span>
<a href="#l1.8"></a><span id="l1.8">  * Migrate calendar UI. This function is called at each startup and can be used</span>
<a href="#l1.9"></a><span id="l1.9">  * to change UI items that require js code intervention</span>
<a href="#l1.10"></a><span id="l1.10">  */</span>
<a href="#l1.11"></a><span id="l1.11"> function migrateCalendarUI() {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    const UI_VERSION = 1;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    const UI_VERSION = 2;</span>
<a href="#l1.14"></a><span id="l1.14">     let currentUIVersion = Preferences.get(&quot;calendar.ui.version&quot;);</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-</span>
<a href="#l1.16"></a><span id="l1.16">     if (currentUIVersion &gt;= UI_VERSION) {</span>
<a href="#l1.17"></a><span id="l1.17">         return;</span>
<a href="#l1.18"></a><span id="l1.18">     }</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">     try {</span>
<a href="#l1.21"></a><span id="l1.21">         if (currentUIVersion &lt; 1) {</span>
<a href="#l1.22"></a><span id="l1.22">             let calbar = document.getElementById(&quot;calendar-toolbar2&quot;);</span>
<a href="#l1.23"></a><span id="l1.23">             calbar.insertItem(&quot;calendar-appmenu-button&quot;);</span>
<a href="#l1.24"></a><span id="l1.24">             let taskbar = document.getElementById(&quot;task-toolbar2&quot;);</span>
<a href="#l1.25"></a><span id="l1.25">             taskbar.insertItem(&quot;task-appmenu-button&quot;);</span>
<a href="#l1.26"></a><span id="l1.26">         }</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+        if (currentUIVersion &lt; 2) {</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+            // If the user has customized the event/task window dialog toolbar,</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+            // we copy that custom set of toolbar items to the event/task tab</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+            // toolbar and add the app menu button and a spring for alignment.</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+            let xulStore = Components.classes[&quot;@mozilla.org/xul/xulstore;1&quot;]</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+                                     .getService(Components.interfaces.nsIXULStore);</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+            let uri = &quot;chrome://calendar/content/calendar-event-dialog.xul&quot;;</span>
<a href="#l1.34"></a><span id="l1.34"> </span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+            if (xulStore.hasValue(uri, &quot;event-toolbar&quot;, &quot;currentset&quot;)) {</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+                let windowSet = xulStore.getValue(uri, &quot;event-toolbar&quot;, &quot;currentset&quot;);</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+                let items = &quot;calendar-item-appmenu-button&quot;;</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+                if (!windowSet.includes(&quot;spring&quot;)) {</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+                    items = &quot;spring,&quot; + items;</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineplus">+                }</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineplus">+                let previousSet = windowSet == &quot;__empty&quot; ? &quot;&quot; : windowSet + &quot;,&quot;;</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+                let tabSet = previousSet + items;</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+                let tabBar = document.getElementById(&quot;event-tab-toolbar&quot;);</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineplus">+</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineplus">+                tabBar.currentSet = tabSet;</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineplus">+                // For some reason we also have to do the following,</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineplus">+                // presumably because the toolbar has already been</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineplus">+                // loaded into the DOM so the toolbar's currentset</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+                // attribute does not yet match the new currentSet.</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineplus">+                tabBar.setAttribute(&quot;currentset&quot;, tabSet);</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+            }</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+        }</span>
<a href="#l1.53"></a><span id="l1.53">         Preferences.set(&quot;calendar.ui.version&quot;, UI_VERSION);</span>
<a href="#l1.54"></a><span id="l1.54">     } catch (e) {</span>
<a href="#l1.55"></a><span id="l1.55">         cal.ERROR(&quot;Error upgrading UI from &quot; + currentUIVersion + &quot; to &quot; +</span>
<a href="#l1.56"></a><span id="l1.56">                   UI_VERSION + &quot;: &quot; + e);</span>
<a href="#l1.57"></a><span id="l1.57">     }</span>
<a href="#l1.58"></a><span id="l1.58"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/calendar-item-editing.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/calendar-item-editing.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -437,16 +437,17 @@ function openEventDialog(calendarItem, c</span>
<a href="#l2.4"></a><span id="l2.4">     // Setup the window arguments</span>
<a href="#l2.5"></a><span id="l2.5">     var args = new Object();</span>
<a href="#l2.6"></a><span id="l2.6">     args.calendarEvent = calendarItem;</span>
<a href="#l2.7"></a><span id="l2.7">     args.calendar = calendar;</span>
<a href="#l2.8"></a><span id="l2.8">     args.mode = mode;</span>
<a href="#l2.9"></a><span id="l2.9">     args.onOk = callback;</span>
<a href="#l2.10"></a><span id="l2.10">     args.job = job;</span>
<a href="#l2.11"></a><span id="l2.11">     args.initialStartDateValue = (initialDate || getDefaultStartDate());</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+    args.inTab = Preferences.get(&quot;calendar.item.editInTab&quot;, false);</span>
<a href="#l2.13"></a><span id="l2.13"> </span>
<a href="#l2.14"></a><span id="l2.14">     // this will be called if file-&gt;new has been selected from within the dialog</span>
<a href="#l2.15"></a><span id="l2.15">     args.onNewEvent = function(calendar) {</span>
<a href="#l2.16"></a><span id="l2.16">         createEventWithDialog(calendar, null, null);</span>
<a href="#l2.17"></a><span id="l2.17">     };</span>
<a href="#l2.18"></a><span id="l2.18">     args.onNewTodo = function(calendar) {</span>
<a href="#l2.19"></a><span id="l2.19">         createTodoWithDialog(calendar);</span>
<a href="#l2.20"></a><span id="l2.20">     };</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -457,37 +458,51 @@ function openEventDialog(calendarItem, c</span>
<a href="#l2.22"></a><span id="l2.22">     // ask the provide if this item is an invitation. if this is the case</span>
<a href="#l2.23"></a><span id="l2.23">     // we'll open the summary dialog since the user is not allowed to change</span>
<a href="#l2.24"></a><span id="l2.24">     // the details of the item.</span>
<a href="#l2.25"></a><span id="l2.25">     let wrappedCalendar = cal.wrapInstance(calendar, Components.interfaces.calISchedulingSupport);</span>
<a href="#l2.26"></a><span id="l2.26">     let isInvitation = wrappedCalendar &amp;&amp; wrappedCalendar.isInvitation(calendarItem);</span>
<a href="#l2.27"></a><span id="l2.27"> </span>
<a href="#l2.28"></a><span id="l2.28">     // open the dialog modeless</span>
<a href="#l2.29"></a><span id="l2.29">     let url;</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-    if (isCalendarWritable(calendar)</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-        &amp;&amp; (mode == &quot;new&quot;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-            || (mode == &quot;modify&quot; &amp;&amp; !isInvitation &amp;&amp; userCanModifyItem((calendarItem))))) {</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-        url = &quot;chrome://calendar/content/calendar-event-dialog.xul&quot;;</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+    let isEditable = mode == &quot;modify&quot; &amp;&amp; !isInvitation &amp;&amp; userCanModifyItem(calendarItem);</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+    if (isCalendarWritable(calendar) &amp;&amp; (mode == &quot;new&quot; || isEditable)) {</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+        if (args.inTab) {</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+            url = &quot;chrome://lightning/content/lightning-item-iframe.xul&quot;;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+        } else {</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+            url = &quot;chrome://calendar/content/calendar-event-dialog.xul&quot;;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+        }</span>
<a href="#l2.41"></a><span id="l2.41">     } else {</span>
<a href="#l2.42"></a><span id="l2.42">         url = &quot;chrome://calendar/content/calendar-summary-dialog.xul&quot;;</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+        args.inTab = false;</span>
<a href="#l2.44"></a><span id="l2.44">     }</span>
<a href="#l2.45"></a><span id="l2.45"> </span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-    // reminder: event dialog should not be modal (cf bug 122671)</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-    var features;</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-    // keyword &quot;dependent&quot; should not be used (cf bug 752206)</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-    if (Services.appinfo.OS == &quot;WINNT&quot;) {</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-        features = &quot;chrome,titlebar,resizable&quot;;</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-    } else if (Services.appinfo.OS == &quot;Darwin&quot;) {</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-        features = &quot;chrome,titlebar,resizable,minimizable=no&quot;;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+    if (args.inTab) {</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+        // open in a tab, currently the read-only summary dialog is</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+        // never opened in a tab</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+        args.url = url;</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+        let tabmail = document.getElementById('tabmail');</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+        let tabtype = cal.isEvent(args.calendarEvent) ? 'calendarEvent' : 'calendarTask';</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+        tabmail.openTab(tabtype, args);</span>
<a href="#l2.60"></a><span id="l2.60">     } else {</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-        // All other targets, mostly Linux flavors using gnome.</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-        features = &quot;chrome,titlebar,resizable,minimizable=no,dialog=no&quot;;</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineplus">+        // open in a window</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineplus">+</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+        // reminder: event dialog should not be modal (cf bug 122671)</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+        let features;</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+        // keyword &quot;dependent&quot; should not be used (cf bug 752206)</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+        if (Services.appinfo.OS == &quot;WINNT&quot;) {</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+            features = &quot;chrome,titlebar,resizable&quot;;</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+        } else if (Services.appinfo.OS == &quot;Darwin&quot;) {</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineplus">+            features = &quot;chrome,titlebar,resizable,minimizable=no&quot;;</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+        } else {</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineplus">+            // All other targets, mostly Linux flavors using gnome.</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineplus">+            features = &quot;chrome,titlebar,resizable,minimizable=no,dialog=no&quot;;</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineplus">+        }</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineplus">+        openDialog(url, &quot;_blank&quot;, features, args);</span>
<a href="#l2.77"></a><span id="l2.77">     }</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineminus">-</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineminus">-    openDialog(url, &quot;_blank&quot;, features, args);</span>
<a href="#l2.80"></a><span id="l2.80"> }</span>
<a href="#l2.81"></a><span id="l2.81"> </span>
<a href="#l2.82"></a><span id="l2.82"> /**</span>
<a href="#l2.83"></a><span id="l2.83">  * Prompts the user how the passed item should be modified. If the item is an</span>
<a href="#l2.84"></a><span id="l2.84">  * exception or already a parent item, the item is returned without prompting.</span>
<a href="#l2.85"></a><span id="l2.85">  * If &quot;all occurrences&quot; is specified, the parent item is returned. If &quot;this</span>
<a href="#l2.86"></a><span id="l2.86">  * occurrence only&quot; is specified, then aItem is returned. If &quot;this and following</span>
<a href="#l2.87"></a><span id="l2.87">  * occurrences&quot; is selected, aItem's parentItem is modified so that the</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -5,16 +5,35 @@</span>
<a href="#l3.4"></a><span id="l3.4"> Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l3.5"></a><span id="l3.5"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.6"></a><span id="l3.6"> Components.utils.import(&quot;resource://gre/modules/iteratorUtils.jsm&quot;);</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> Components.utils.import(&quot;resource://calendar/modules/calAlarmUtils.jsm&quot;);</span>
<a href="#l3.9"></a><span id="l3.9"> Components.utils.import(&quot;resource://calendar/modules/calIteratorUtils.jsm&quot;);</span>
<a href="#l3.10"></a><span id="l3.10"> Components.utils.import(&quot;resource://calendar/modules/calRecurrenceUtils.jsm&quot;);</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+// Variables related to whether we are in a tab or a window dialog.</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+var gInTab = false;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+var gMainWindow = null;</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+var gTabmail = null;</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+/**</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+ * Initialize variables for tab vs window.</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+ */</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+function intializeTabOrWindowVariables() {</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+    let args = window.arguments[0];</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+    gInTab = args.inTab;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+    if (gInTab) {</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+        gTabmail = parent.document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+        gMainWindow = parent;</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+    } else {</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+        gMainWindow = parent.opener;</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+    }</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+}</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+</span>
<a href="#l3.31"></a><span id="l3.31"> /**</span>
<a href="#l3.32"></a><span id="l3.32">  * Dispose of controlling operations of this event dialog. Uses</span>
<a href="#l3.33"></a><span id="l3.33">  * window.arguments[0].job.dispose()</span>
<a href="#l3.34"></a><span id="l3.34">  */</span>
<a href="#l3.35"></a><span id="l3.35"> function dispose() {</span>
<a href="#l3.36"></a><span id="l3.36">     var args = window.arguments[0];</span>
<a href="#l3.37"></a><span id="l3.37">     if (args.job &amp;&amp; args.job.dispose) {</span>
<a href="#l3.38"></a><span id="l3.38">         args.job.dispose();</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineat">@@ -470,22 +489,22 @@ function commonUpdateReminder(aSuppressD</span>
<a href="#l3.40"></a><span id="l3.40">                     updateDueDate();</span>
<a href="#l3.41"></a><span id="l3.41">                 }</span>
<a href="#l3.42"></a><span id="l3.42"> </span>
<a href="#l3.43"></a><span id="l3.43">                 // Disable the checkbox to indicate that we need the entry-date.</span>
<a href="#l3.44"></a><span id="l3.44">                 disableElementWithLock(&quot;todo-has-duedate&quot;, &quot;reminder-lock&quot;);</span>
<a href="#l3.45"></a><span id="l3.45">             }</span>
<a href="#l3.46"></a><span id="l3.46">         }</span>
<a href="#l3.47"></a><span id="l3.47">     }</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-</span>
<a href="#l3.49"></a><span id="l3.49">     updateReminderDetails();</span>
<a href="#l3.50"></a><span id="l3.50"> }</span>
<a href="#l3.51"></a><span id="l3.51"> </span>
<a href="#l3.52"></a><span id="l3.52"> /**</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">- * Updates the related link on the dialog</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+ * Updates the related link on the dialog. Currently only used by the</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+ * read-only summary dialog.</span>
<a href="#l3.56"></a><span id="l3.56">  */</span>
<a href="#l3.57"></a><span id="l3.57"> function updateLink() {</span>
<a href="#l3.58"></a><span id="l3.58">     var itemUrlString = window.calendarItem.getProperty(&quot;URL&quot;) || &quot;&quot;;</span>
<a href="#l3.59"></a><span id="l3.59">     var linkCommand = document.getElementById(&quot;cmd_toggle_link&quot;);</span>
<a href="#l3.60"></a><span id="l3.60"> </span>
<a href="#l3.61"></a><span id="l3.61">     function hideOrShow(aBool) {</span>
<a href="#l3.62"></a><span id="l3.62">         setElementValue(&quot;event-grid-link-row&quot;, !aBool &amp;&amp; &quot;true&quot;, &quot;hidden&quot;);</span>
<a href="#l3.63"></a><span id="l3.63">         var separator = document.getElementById(&quot;event-grid-link-separator&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -19,1388 +19,626 @@</span>
<a href="#l4.4"></a><span id="l4.4">     &lt;!ENTITY % calendarDTD SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot;&gt;</span>
<a href="#l4.5"></a><span id="l4.5">     &lt;!ENTITY % eventDialogDTD SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt;</span>
<a href="#l4.6"></a><span id="l4.6">     %brandDTD;</span>
<a href="#l4.7"></a><span id="l4.7">     %globalDTD;</span>
<a href="#l4.8"></a><span id="l4.8">     %calendarDTD;</span>
<a href="#l4.9"></a><span id="l4.9">     %eventDialogDTD;</span>
<a href="#l4.10"></a><span id="l4.10"> ]&gt;</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+&lt;?xul-overlay href=&quot;chrome://lightning/content/lightning-item-toolbar.xul&quot;?&gt;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+</span>
<a href="#l4.14"></a><span id="l4.14"> &lt;!-- Dialog id is changed during excution to allow different Window-icons</span>
<a href="#l4.15"></a><span id="l4.15">      on this dialog. document.loadOverlay() will not work on this one. --&gt;</span>
<a href="#l4.16"></a><span id="l4.16"> &lt;dialog id=&quot;calendar-event-dialog&quot;</span>
<a href="#l4.17"></a><span id="l4.17">         title=&quot;&amp;event.title.label;&quot;</span>
<a href="#l4.18"></a><span id="l4.18">         windowtype=&quot;Calendar:EventDialog&quot;</span>
<a href="#l4.19"></a><span id="l4.19">         onload=&quot;onLoad();&quot;</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-        onunload=&quot;onEventDialogUnload();&quot;</span>
<a href="#l4.21"></a><span id="l4.21">         ondialogaccept=&quot;return onAccept();&quot;</span>
<a href="#l4.22"></a><span id="l4.22">         ondialogcancel=&quot;return onCancel();&quot;</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-        onresize=&quot;rearrangeAttendees();&quot;</span>
<a href="#l4.24"></a><span id="l4.24">         persist=&quot;screenX screenY width height&quot;</span>
<a href="#l4.25"></a><span id="l4.25">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l4.26"></a><span id="l4.26"> </span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-    &lt;stringbundleset id=&quot;stringbundleset&quot;&gt;</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-      &lt;stringbundle id=&quot;languageBundle&quot;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-                    src=&quot;chrome://global/locale/languageNames.properties&quot;/&gt;</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-    &lt;/stringbundleset&gt;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+  &lt;!-- Javascript includes --&gt;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+          src=&quot;chrome://lightning/content/lightning-item-panel.js&quot;/&gt;</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+          src=&quot;chrome://calendar/content/calendar-dialog-utils.js&quot;/&gt;</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+          src=&quot;chrome://calendar/content/calendar-ui-utils.js&quot;/&gt;</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+          src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+  &lt;stringbundleset id=&quot;stringbundleset&quot;&gt;</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+    &lt;stringbundle id=&quot;languageBundle&quot;</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+                  src=&quot;chrome://global/locale/languageNames.properties&quot;/&gt;</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+  &lt;/stringbundleset&gt;</span>
<a href="#l4.45"></a><span id="l4.45"> </span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-    &lt;!-- Javascript includes --&gt;</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-            src=&quot;chrome://calendar/content/calendar-event-dialog.js&quot;/&gt;</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-            src=&quot;chrome://calendar/content/calendar-dialog-utils.js&quot;/&gt;</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-            src=&quot;chrome://calendar/content/calendar-ui-utils.js&quot;/&gt;</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-            src=&quot;chrome://calendar/content/calUtils.js&quot;/&gt;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-            src=&quot;chrome://calendar/content/calApplicationUtils.js&quot;/&gt;</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineminus">-            src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-            src=&quot;chrome://global/content/printUtils.js&quot;/&gt;</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineminus">-            src=&quot;chrome://calendar/content/calendar-statusbar.js&quot;/&gt;</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineminus">-            src=&quot;chrome://messenger/content/toolbarIconColor.js&quot;/&gt;</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+  &lt;!-- Command updater --&gt;</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineplus">+  &lt;commandset id=&quot;globalEditMenuItems&quot;</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineplus">+              commandupdater=&quot;true&quot;</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+              events=&quot;focus&quot;</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+              oncommandupdate=&quot;goUpdateGlobalEditMenuItems()&quot;/&gt;</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+  &lt;commandset id=&quot;selectEditMenuItems&quot;</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+              commandupdater=&quot;true&quot;</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+              events=&quot;select&quot;</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+              oncommandupdate=&quot;goUpdateSelectEditMenuItems()&quot;/&gt;</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+  &lt;commandset id=&quot;undoEditMenuItems&quot;</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+              commandupdater=&quot;true&quot;</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+              events=&quot;undo&quot;</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+              oncommandupdate=&quot;goUpdateUndoEditMenuItems()&quot;/&gt;</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineplus">+  &lt;commandset id=&quot;clipboardEditMenuItems&quot;</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+              commandupdater=&quot;true&quot;</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+              events=&quot;clipboard&quot;</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+              oncommandupdate=&quot;goUpdatePasteMenuItems()&quot;/&gt;</span>
<a href="#l4.82"></a><span id="l4.82"> </span>
<a href="#l4.83"></a><span id="l4.83" class="difflineminus">-    &lt;!-- Command updater --&gt;</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineminus">-    &lt;commandset id=&quot;globalEditMenuItems&quot;</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-                commandupdater=&quot;true&quot;</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineminus">-                events=&quot;focus&quot;</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-                oncommandupdate=&quot;goUpdateGlobalEditMenuItems()&quot;/&gt;</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-    &lt;commandset id=&quot;selectEditMenuItems&quot;</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineminus">-                commandupdater=&quot;true&quot;</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineminus">-                events=&quot;select&quot;</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineminus">-                oncommandupdate=&quot;goUpdateSelectEditMenuItems()&quot;/&gt;</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineminus">-    &lt;commandset id=&quot;undoEditMenuItems&quot;</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineminus">-                commandupdater=&quot;true&quot;</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineminus">-                events=&quot;undo&quot;</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineminus">-                oncommandupdate=&quot;goUpdateUndoEditMenuItems()&quot;/&gt;</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineminus">-    &lt;commandset id=&quot;clipboardEditMenuItems&quot;</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineminus">-                commandupdater=&quot;true&quot;</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineminus">-                events=&quot;clipboard&quot;</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineminus">-                oncommandupdate=&quot;goUpdatePasteMenuItems()&quot;/&gt;</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineminus">-</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineminus">-    &lt;!-- Commands --&gt;</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineminus">-    &lt;commandset id=&quot;itemCommands&quot;&gt;</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineplus">+  &lt;!-- Commands --&gt;</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineplus">+  &lt;commandset id=&quot;itemCommands&quot;&gt;</span>
<a href="#l4.105"></a><span id="l4.105"> </span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-        &lt;!-- Item menu --&gt;</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-        &lt;command id=&quot;cmd_item_new_event&quot;</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineminus">-                 oncommand=&quot;openNewEvent()&quot;/&gt;</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineminus">-        &lt;command id=&quot;cmd_item_new_task&quot;</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineminus">-                 oncommand=&quot;openNewTask()&quot;/&gt;</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineminus">-        &lt;command id=&quot;cmd_item_new_message&quot;</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineminus">-                 oncommand=&quot;openNewMessage()&quot;/&gt;</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineminus">-        &lt;command id=&quot;cmd_item_new_card&quot;</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineminus">-                 oncommand=&quot;openNewCardDialog()&quot;/&gt;</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineminus">-        &lt;command id=&quot;cmd_item_close&quot;</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineminus">-                 oncommand=&quot;cancelDialog()&quot;/&gt;</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineminus">-        &lt;command id=&quot;cmd_save&quot;</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineminus">-                 oncommand=&quot;onCommandSave()&quot;/&gt;</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-        &lt;command id=&quot;cmd_item_delete&quot;</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineminus">-                 oncommand=&quot;onCommandDeleteItem()&quot;/&gt;</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-        &lt;command id=&quot;cmd_printSetup&quot;</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineminus">-                 oncommand=&quot;PrintUtils.showPageSetup()&quot;/&gt;</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineminus">-        &lt;command id=&quot;cmd_print&quot;</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-                 oncommand=&quot;calPrint()&quot;/&gt;</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineplus">+    &lt;!-- Item menu --&gt;</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineplus">+    &lt;command id=&quot;cmd_item_new_event&quot;</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineplus">+             oncommand=&quot;openNewEvent()&quot;/&gt;</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineplus">+    &lt;command id=&quot;cmd_item_new_task&quot;</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineplus">+             oncommand=&quot;openNewTask()&quot;/&gt;</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineplus">+    &lt;command id=&quot;cmd_item_new_message&quot;</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineplus">+             oncommand=&quot;openNewMessage()&quot;/&gt;</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineplus">+    &lt;command id=&quot;cmd_item_new_card&quot;</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineplus">+             oncommand=&quot;openNewCardDialog()&quot;/&gt;</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineplus">+    &lt;command id=&quot;cmd_item_close&quot;</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineplus">+             oncommand=&quot;cancelDialog()&quot;/&gt;</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineplus">+    &lt;command id=&quot;cmd_save&quot;</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.141"></a><span id="l4.141" class="difflineplus">+             oncommand=&quot;onCommandSave()&quot;/&gt;</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineplus">+    &lt;command id=&quot;cmd_item_delete&quot;</span>
<a href="#l4.143"></a><span id="l4.143" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineplus">+             oncommand=&quot;onCommandDeleteItem()&quot;/&gt;</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineplus">+    &lt;command id=&quot;cmd_printSetup&quot;</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineplus">+             oncommand=&quot;PrintUtils.showPageSetup()&quot;/&gt;</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineplus">+    &lt;command id=&quot;cmd_print&quot;</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.149"></a><span id="l4.149" class="difflineplus">+             oncommand=&quot;calPrint()&quot;/&gt;</span>
<a href="#l4.150"></a><span id="l4.150"> </span>
<a href="#l4.151"></a><span id="l4.151" class="difflineminus">-        &lt;!-- Edit menu --&gt;</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineminus">-        &lt;command id=&quot;cmd_undo&quot;</span>
<a href="#l4.153"></a><span id="l4.153" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.154"></a><span id="l4.154" class="difflineminus">-                 oncommand=&quot;goDoCommand('cmd_undo')&quot;/&gt;</span>
<a href="#l4.155"></a><span id="l4.155" class="difflineminus">-        &lt;command id=&quot;cmd_redo&quot;</span>
<a href="#l4.156"></a><span id="l4.156" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineminus">-                 oncommand=&quot;goDoCommand('cmd_redo')&quot;/&gt;</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineminus">-        &lt;command id=&quot;cmd_cut&quot;</span>
<a href="#l4.159"></a><span id="l4.159" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.160"></a><span id="l4.160" class="difflineminus">-                 oncommand=&quot;goDoCommand('cmd_cut')&quot;/&gt;</span>
<a href="#l4.161"></a><span id="l4.161" class="difflineminus">-        &lt;command id=&quot;cmd_copy&quot;</span>
<a href="#l4.162"></a><span id="l4.162" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.163"></a><span id="l4.163" class="difflineminus">-                 oncommand=&quot;goDoCommand('cmd_copy')&quot;/&gt;</span>
<a href="#l4.164"></a><span id="l4.164" class="difflineminus">-        &lt;command id=&quot;cmd_paste&quot;</span>
<a href="#l4.165"></a><span id="l4.165" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineminus">-                 oncommand=&quot;goDoCommand('cmd_paste')&quot;/&gt;</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineminus">-        &lt;command id=&quot;cmd_selectAll&quot;</span>
<a href="#l4.168"></a><span id="l4.168" class="difflineminus">-                 disabled=&quot;true&quot;</span>
<a href="#l4.169"></a><span id="l4.169" class="difflineminus">-                 oncommand=&quot;goDoCommand('cmd_selectAll')&quot;/&gt;</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineplus">+    &lt;!-- Edit menu --&gt;</span>
<a href="#l4.171"></a><span id="l4.171" class="difflineplus">+    &lt;command id=&quot;cmd_undo&quot;</span>
<a href="#l4.172"></a><span id="l4.172" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.173"></a><span id="l4.173" class="difflineplus">+             oncommand=&quot;goDoCommand('cmd_undo')&quot;/&gt;</span>
<a href="#l4.174"></a><span id="l4.174" class="difflineplus">+    &lt;command id=&quot;cmd_redo&quot;</span>
<a href="#l4.175"></a><span id="l4.175" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.176"></a><span id="l4.176" class="difflineplus">+             oncommand=&quot;goDoCommand('cmd_redo')&quot;/&gt;</span>
<a href="#l4.177"></a><span id="l4.177" class="difflineplus">+    &lt;command id=&quot;cmd_cut&quot;</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.179"></a><span id="l4.179" class="difflineplus">+             oncommand=&quot;goDoCommand('cmd_cut')&quot;/&gt;</span>
<a href="#l4.180"></a><span id="l4.180" class="difflineplus">+    &lt;command id=&quot;cmd_copy&quot;</span>
<a href="#l4.181"></a><span id="l4.181" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.182"></a><span id="l4.182" class="difflineplus">+             oncommand=&quot;goDoCommand('cmd_copy')&quot;/&gt;</span>
<a href="#l4.183"></a><span id="l4.183" class="difflineplus">+    &lt;command id=&quot;cmd_paste&quot;</span>
<a href="#l4.184"></a><span id="l4.184" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.185"></a><span id="l4.185" class="difflineplus">+             oncommand=&quot;goDoCommand('cmd_paste')&quot;/&gt;</span>
<a href="#l4.186"></a><span id="l4.186" class="difflineplus">+    &lt;command id=&quot;cmd_selectAll&quot;</span>
<a href="#l4.187"></a><span id="l4.187" class="difflineplus">+             disabled=&quot;true&quot;</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineplus">+             oncommand=&quot;goDoCommand('cmd_selectAll')&quot;/&gt;</span>
<a href="#l4.189"></a><span id="l4.189"> </span>
<a href="#l4.190"></a><span id="l4.190" class="difflineminus">-        &lt;!-- View menu --&gt;</span>
<a href="#l4.191"></a><span id="l4.191" class="difflineminus">-        &lt;command id=&quot;cmd_toolbar&quot;</span>
<a href="#l4.192"></a><span id="l4.192" class="difflineminus">-                 oncommand=&quot;onCommandViewToolbar('event-toolbar',</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineminus">-                                                 'view-toolbars-event-menuitem')&quot;/&gt;</span>
<a href="#l4.194"></a><span id="l4.194" class="difflineminus">-        &lt;command id=&quot;cmd_customize&quot;</span>
<a href="#l4.195"></a><span id="l4.195" class="difflineminus">-                 oncommand=&quot;onCommandCustomize()&quot;/&gt;</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineminus">-        &lt;command id=&quot;cmd_toggle_link&quot;</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineminus">-                 persist=&quot;checked&quot;</span>
<a href="#l4.198"></a><span id="l4.198" class="difflineminus">-                 oncommand=&quot;toggleLink()&quot;/&gt;</span>
<a href="#l4.199"></a><span id="l4.199" class="difflineplus">+    &lt;!-- View menu --&gt;</span>
<a href="#l4.200"></a><span id="l4.200" class="difflineplus">+    &lt;command id=&quot;cmd_toolbar&quot;</span>
<a href="#l4.201"></a><span id="l4.201" class="difflineplus">+             oncommand=&quot;onCommandViewToolbar('event-toolbar',</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineplus">+                                             'view-toolbars-event-menuitem')&quot;/&gt;</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineplus">+    &lt;command id=&quot;cmd_customize&quot;</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineplus">+             oncommand=&quot;onCommandCustomize()&quot;/&gt;</span>
<a href="#l4.205"></a><span id="l4.205" class="difflineplus">+    &lt;command id=&quot;cmd_toggle_link&quot;</span>
<a href="#l4.206"></a><span id="l4.206" class="difflineplus">+             persist=&quot;checked&quot;</span>
<a href="#l4.207"></a><span id="l4.207" class="difflineplus">+             oncommand=&quot;toggleLink()&quot;/&gt;</span>
<a href="#l4.208"></a><span id="l4.208"> </span>
<a href="#l4.209"></a><span id="l4.209" class="difflineminus">-        &lt;!-- Toolbar commands --&gt;</span>
<a href="#l4.210"></a><span id="l4.210" class="difflineminus">-        &lt;command id=&quot;cmd_accept&quot;</span>
<a href="#l4.211"></a><span id="l4.211" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.212"></a><span id="l4.212" class="difflineminus">-                 oncommand=&quot;acceptDialog();&quot;/&gt;</span>
<a href="#l4.213"></a><span id="l4.213" class="difflineminus">-        &lt;command id=&quot;cmd_recurrence&quot;</span>
<a href="#l4.214"></a><span id="l4.214" class="difflineminus">-                 oncommand=&quot;editRepeat();&quot;/&gt;</span>
<a href="#l4.215"></a><span id="l4.215" class="difflineminus">-        &lt;command id=&quot;cmd_attendees&quot;</span>
<a href="#l4.216"></a><span id="l4.216" class="difflineminus">-                 oncommand=&quot;editAttendees();&quot;/&gt;</span>
<a href="#l4.217"></a><span id="l4.217" class="difflineminus">-        &lt;command id=&quot;cmd_email&quot;</span>
<a href="#l4.218"></a><span id="l4.218" class="difflineminus">-                 oncommand=&quot;sendMailToAttendees(window.attendees);&quot;/&gt;</span>
<a href="#l4.219"></a><span id="l4.219" class="difflineminus">-        &lt;command id=&quot;cmd_email_undecided&quot;</span>
<a href="#l4.220"></a><span id="l4.220" class="difflineminus">-                 oncommand=&quot;sendMailToUndecidedAttendees(window.attendees);&quot;/&gt;</span>
<a href="#l4.221"></a><span id="l4.221" class="difflineminus">-        &lt;command id=&quot;cmd_status_none&quot;</span>
<a href="#l4.222"></a><span id="l4.222" class="difflineminus">-                 oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineminus">-                 hidden=&quot;true&quot;</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineminus">-                 value=&quot;NONE&quot;/&gt;</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineminus">-        &lt;command id=&quot;cmd_status_tentative&quot;</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineminus">-                 oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineminus">-                 value=&quot;TENTATIVE&quot;/&gt;</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineminus">-        &lt;command id=&quot;cmd_status_confirmed&quot;</span>
<a href="#l4.229"></a><span id="l4.229" class="difflineminus">-                 oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.230"></a><span id="l4.230" class="difflineminus">-                 value=&quot;CONFIRMED&quot;/&gt;</span>
<a href="#l4.231"></a><span id="l4.231" class="difflineminus">-        &lt;command id=&quot;cmd_status_cancelled&quot;</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineminus">-                 oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.233"></a><span id="l4.233" class="difflineminus">-                 value=&quot;CANCELLED&quot;/&gt;</span>
<a href="#l4.234"></a><span id="l4.234" class="difflineminus">-        &lt;command id=&quot;cmd_priority_none&quot;</span>
<a href="#l4.235"></a><span id="l4.235" class="difflineminus">-                 oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.236"></a><span id="l4.236" class="difflineminus">-                 value=&quot;0&quot;/&gt;</span>
<a href="#l4.237"></a><span id="l4.237" class="difflineminus">-        &lt;command id=&quot;cmd_priority_low&quot;</span>
<a href="#l4.238"></a><span id="l4.238" class="difflineminus">-                 oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.239"></a><span id="l4.239" class="difflineminus">-                 value=&quot;9&quot;/&gt;</span>
<a href="#l4.240"></a><span id="l4.240" class="difflineminus">-        &lt;command id=&quot;cmd_priority_normal&quot;</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineminus">-                 oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineminus">-                 value=&quot;5&quot;/&gt;</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineminus">-        &lt;command id=&quot;cmd_priority_high&quot;</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineminus">-                 oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.245"></a><span id="l4.245" class="difflineminus">-                 value=&quot;1&quot;/&gt;</span>
<a href="#l4.246"></a><span id="l4.246" class="difflineminus">-        &lt;command id=&quot;cmd_showtimeas_busy&quot;</span>
<a href="#l4.247"></a><span id="l4.247" class="difflineminus">-                 oncommand=&quot;editShowTimeAs(event.target)&quot;</span>
<a href="#l4.248"></a><span id="l4.248" class="difflineminus">-                 value=&quot;OPAQUE&quot;/&gt;</span>
<a href="#l4.249"></a><span id="l4.249" class="difflineminus">-        &lt;command id=&quot;cmd_showtimeas_free&quot;</span>
<a href="#l4.250"></a><span id="l4.250" class="difflineminus">-                 oncommand=&quot;editShowTimeAs(event.target)&quot;</span>
<a href="#l4.251"></a><span id="l4.251" class="difflineminus">-                 value=&quot;TRANSPARENT&quot;/&gt;</span>
<a href="#l4.252"></a><span id="l4.252" class="difflineminus">-        &lt;command id=&quot;cmd_attach_url&quot;</span>
<a href="#l4.253"></a><span id="l4.253" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.254"></a><span id="l4.254" class="difflineminus">-                 oncommand=&quot;attachURL()&quot;/&gt;</span>
<a href="#l4.255"></a><span id="l4.255" class="difflineminus">-        &lt;command id=&quot;cmd_attach_cloud&quot;</span>
<a href="#l4.256"></a><span id="l4.256" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.257"></a><span id="l4.257" class="difflineminus">-        &lt;command id=&quot;cmd_openAttachment&quot;</span>
<a href="#l4.258"></a><span id="l4.258" class="difflineminus">-                 oncommand=&quot;openAttachment()&quot;/&gt;</span>
<a href="#l4.259"></a><span id="l4.259" class="difflineminus">-        &lt;command id=&quot;cmd_copyAttachment&quot;</span>
<a href="#l4.260"></a><span id="l4.260" class="difflineminus">-                 oncommand=&quot;copyAttachment()&quot;/&gt;</span>
<a href="#l4.261"></a><span id="l4.261" class="difflineminus">-        &lt;command id=&quot;cmd_deleteAttachment&quot;</span>
<a href="#l4.262"></a><span id="l4.262" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.263"></a><span id="l4.263" class="difflineminus">-                 oncommand=&quot;deleteAttachment()&quot;/&gt;</span>
<a href="#l4.264"></a><span id="l4.264" class="difflineminus">-        &lt;command id=&quot;cmd_deleteAllAttachments&quot;</span>
<a href="#l4.265"></a><span id="l4.265" class="difflineminus">-                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.266"></a><span id="l4.266" class="difflineminus">-                 oncommand=&quot;deleteAllAttachments()&quot;/&gt;</span>
<a href="#l4.267"></a><span id="l4.267" class="difflineminus">-        &lt;command id=&quot;cmd_timezone&quot;</span>
<a href="#l4.268"></a><span id="l4.268" class="difflineminus">-                 persist=&quot;checked&quot;</span>
<a href="#l4.269"></a><span id="l4.269" class="difflineminus">-                 checked=&quot;false&quot;</span>
<a href="#l4.270"></a><span id="l4.270" class="difflineminus">-                 oncommand=&quot;toggleTimezoneLinks()&quot;/&gt;</span>
<a href="#l4.271"></a><span id="l4.271" class="difflineminus">-    &lt;/commandset&gt;</span>
<a href="#l4.272"></a><span id="l4.272" class="difflineplus">+    &lt;!-- status --&gt;</span>
<a href="#l4.273"></a><span id="l4.273" class="difflineplus">+    &lt;command id=&quot;cmd_status_none&quot;</span>
<a href="#l4.274"></a><span id="l4.274" class="difflineplus">+             oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.275"></a><span id="l4.275" class="difflineplus">+             hidden=&quot;true&quot;</span>
<a href="#l4.276"></a><span id="l4.276" class="difflineplus">+             value=&quot;NONE&quot;/&gt;</span>
<a href="#l4.277"></a><span id="l4.277" class="difflineplus">+    &lt;command id=&quot;cmd_status_tentative&quot;</span>
<a href="#l4.278"></a><span id="l4.278" class="difflineplus">+             oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.279"></a><span id="l4.279" class="difflineplus">+             value=&quot;TENTATIVE&quot;/&gt;</span>
<a href="#l4.280"></a><span id="l4.280" class="difflineplus">+    &lt;command id=&quot;cmd_status_confirmed&quot;</span>
<a href="#l4.281"></a><span id="l4.281" class="difflineplus">+             oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.282"></a><span id="l4.282" class="difflineplus">+             value=&quot;CONFIRMED&quot;/&gt;</span>
<a href="#l4.283"></a><span id="l4.283" class="difflineplus">+    &lt;command id=&quot;cmd_status_cancelled&quot;</span>
<a href="#l4.284"></a><span id="l4.284" class="difflineplus">+             oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l4.285"></a><span id="l4.285" class="difflineplus">+             value=&quot;CANCELLED&quot;/&gt;</span>
<a href="#l4.286"></a><span id="l4.286" class="difflineplus">+</span>
<a href="#l4.287"></a><span id="l4.287" class="difflineplus">+    &lt;!-- priority --&gt;</span>
<a href="#l4.288"></a><span id="l4.288" class="difflineplus">+    &lt;command id=&quot;cmd_priority_none&quot;</span>
<a href="#l4.289"></a><span id="l4.289" class="difflineplus">+             oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.290"></a><span id="l4.290" class="difflineplus">+             value=&quot;0&quot;/&gt;</span>
<a href="#l4.291"></a><span id="l4.291" class="difflineplus">+    &lt;command id=&quot;cmd_priority_low&quot;</span>
<a href="#l4.292"></a><span id="l4.292" class="difflineplus">+             oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.293"></a><span id="l4.293" class="difflineplus">+             value=&quot;9&quot;/&gt;</span>
<a href="#l4.294"></a><span id="l4.294" class="difflineplus">+    &lt;command id=&quot;cmd_priority_normal&quot;</span>
<a href="#l4.295"></a><span id="l4.295" class="difflineplus">+             oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.296"></a><span id="l4.296" class="difflineplus">+             value=&quot;5&quot;/&gt;</span>
<a href="#l4.297"></a><span id="l4.297" class="difflineplus">+    &lt;command id=&quot;cmd_priority_high&quot;</span>
<a href="#l4.298"></a><span id="l4.298" class="difflineplus">+             oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l4.299"></a><span id="l4.299" class="difflineplus">+             value=&quot;1&quot;/&gt;</span>
<a href="#l4.300"></a><span id="l4.300" class="difflineplus">+</span>
<a href="#l4.301"></a><span id="l4.301" class="difflineplus">+    &lt;!-- freebusy --&gt;</span>
<a href="#l4.302"></a><span id="l4.302" class="difflineplus">+    &lt;command id=&quot;cmd_showtimeas_busy&quot;</span>
<a href="#l4.303"></a><span id="l4.303" class="difflineplus">+             oncommand=&quot;editShowTimeAs(event.target)&quot;</span>
<a href="#l4.304"></a><span id="l4.304" class="difflineplus">+             value=&quot;OPAQUE&quot;/&gt;</span>
<a href="#l4.305"></a><span id="l4.305" class="difflineplus">+    &lt;command id=&quot;cmd_showtimeas_free&quot;</span>
<a href="#l4.306"></a><span id="l4.306" class="difflineplus">+             oncommand=&quot;editShowTimeAs(event.target)&quot;</span>
<a href="#l4.307"></a><span id="l4.307" class="difflineplus">+             value=&quot;TRANSPARENT&quot;/&gt;</span>
<a href="#l4.308"></a><span id="l4.308" class="difflineplus">+</span>
<a href="#l4.309"></a><span id="l4.309" class="difflineplus">+    &lt;!-- attendees --&gt;</span>
<a href="#l4.310"></a><span id="l4.310" class="difflineplus">+    &lt;command id=&quot;cmd_attendees&quot;</span>
<a href="#l4.311"></a><span id="l4.311" class="difflineplus">+             oncommand=&quot;editAttendees();&quot;/&gt;</span>
<a href="#l4.312"></a><span id="l4.312" class="difflineplus">+    &lt;command id=&quot;cmd_email&quot;</span>
<a href="#l4.313"></a><span id="l4.313" class="difflineplus">+             oncommand=&quot;sendMailToAttendees(window.attendees);&quot;/&gt;</span>
<a href="#l4.314"></a><span id="l4.314" class="difflineplus">+    &lt;command id=&quot;cmd_email_undecided&quot;</span>
<a href="#l4.315"></a><span id="l4.315" class="difflineplus">+             oncommand=&quot;sendMailToUndecidedAttendees(window.attendees);&quot;/&gt;</span>
<a href="#l4.316"></a><span id="l4.316" class="difflineplus">+</span>
<a href="#l4.317"></a><span id="l4.317" class="difflineplus">+    &lt;!-- accept, attachments, timezone --&gt;</span>
<a href="#l4.318"></a><span id="l4.318" class="difflineplus">+    &lt;command id=&quot;cmd_accept&quot;</span>
<a href="#l4.319"></a><span id="l4.319" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.320"></a><span id="l4.320" class="difflineplus">+             oncommand=&quot;acceptDialog();&quot;/&gt;</span>
<a href="#l4.321"></a><span id="l4.321" class="difflineplus">+    &lt;command id=&quot;cmd_attach_url&quot;</span>
<a href="#l4.322"></a><span id="l4.322" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.323"></a><span id="l4.323" class="difflineplus">+             oncommand=&quot;attachURL()&quot;/&gt;</span>
<a href="#l4.324"></a><span id="l4.324" class="difflineplus">+    &lt;command id=&quot;cmd_timezone&quot;</span>
<a href="#l4.325"></a><span id="l4.325" class="difflineplus">+             persist=&quot;checked&quot;</span>
<a href="#l4.326"></a><span id="l4.326" class="difflineplus">+             checked=&quot;false&quot;</span>
<a href="#l4.327"></a><span id="l4.327" class="difflineplus">+             oncommand=&quot;toggleTimezoneLinks()&quot;/&gt;</span>
<a href="#l4.328"></a><span id="l4.328" class="difflineplus">+  &lt;/commandset&gt;</span>
<a href="#l4.329"></a><span id="l4.329"> </span>
<a href="#l4.330"></a><span id="l4.330" class="difflineminus">-    &lt;keyset id=&quot;calendar-event-dialog-keyset&quot;&gt;</span>
<a href="#l4.331"></a><span id="l4.331" class="difflineminus">-        &lt;key id=&quot;new-event-key&quot;</span>
<a href="#l4.332"></a><span id="l4.332" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.333"></a><span id="l4.333" class="difflineminus">-             key=&quot;&amp;event.dialog.new.event.key2;&quot;</span>
<a href="#l4.334"></a><span id="l4.334" class="difflineminus">-             command=&quot;cmd_item_new_event&quot;/&gt;</span>
<a href="#l4.335"></a><span id="l4.335" class="difflineminus">-        &lt;key id=&quot;new-task-key&quot;</span>
<a href="#l4.336"></a><span id="l4.336" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.337"></a><span id="l4.337" class="difflineminus">-             key=&quot;&amp;event.dialog.new.task.key2;&quot;</span>
<a href="#l4.338"></a><span id="l4.338" class="difflineminus">-             command=&quot;cmd_item_new_task&quot;/&gt;</span>
<a href="#l4.339"></a><span id="l4.339" class="difflineminus">-        &lt;key id=&quot;new-message-key&quot;</span>
<a href="#l4.340"></a><span id="l4.340" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.341"></a><span id="l4.341" class="difflineminus">-             key=&quot;&amp;event.dialog.new.message.key2;&quot;</span>
<a href="#l4.342"></a><span id="l4.342" class="difflineminus">-             command=&quot;cmd_item_new_message&quot;/&gt;</span>
<a href="#l4.343"></a><span id="l4.343" class="difflineminus">-        &lt;key id=&quot;close-key&quot;</span>
<a href="#l4.344"></a><span id="l4.344" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.345"></a><span id="l4.345" class="difflineminus">-             key=&quot;&amp;event.dialog.close.key;&quot;</span>
<a href="#l4.346"></a><span id="l4.346" class="difflineminus">-             command=&quot;cmd_item_close&quot;/&gt;</span>
<a href="#l4.347"></a><span id="l4.347" class="difflineminus">-        &lt;key id=&quot;save-key&quot;</span>
<a href="#l4.348"></a><span id="l4.348" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.349"></a><span id="l4.349" class="difflineminus">-             key=&quot;&amp;event.dialog.save.key;&quot;</span>
<a href="#l4.350"></a><span id="l4.350" class="difflineminus">-             command=&quot;cmd_save&quot;/&gt;</span>
<a href="#l4.351"></a><span id="l4.351" class="difflineminus">-        &lt;key id=&quot;saveandclose-key&quot;</span>
<a href="#l4.352"></a><span id="l4.352" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.353"></a><span id="l4.353" class="difflineminus">-             key=&quot;&amp;event.dialog.saveandclose.key;&quot;</span>
<a href="#l4.354"></a><span id="l4.354" class="difflineminus">-             command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.355"></a><span id="l4.355" class="difflineminus">-        &lt;key id=&quot;saveandclose-key2&quot;</span>
<a href="#l4.356"></a><span id="l4.356" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.357"></a><span id="l4.357" class="difflineminus">-             keycode=&quot;VK_RETURN&quot;</span>
<a href="#l4.358"></a><span id="l4.358" class="difflineminus">-             command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.359"></a><span id="l4.359" class="difflineminus">-        &lt;key id=&quot;print-key&quot;</span>
<a href="#l4.360"></a><span id="l4.360" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.361"></a><span id="l4.361" class="difflineminus">-             key=&quot;&amp;event.dialog.print.key;&quot;</span>
<a href="#l4.362"></a><span id="l4.362" class="difflineminus">-             command=&quot;cmd_print&quot;/&gt;</span>
<a href="#l4.363"></a><span id="l4.363" class="difflineminus">-        &lt;key id=&quot;undo-key&quot;</span>
<a href="#l4.364"></a><span id="l4.364" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.365"></a><span id="l4.365" class="difflineminus">-             key=&quot;&amp;event.dialog.undo.key;&quot;</span>
<a href="#l4.366"></a><span id="l4.366" class="difflineminus">-             command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l4.367"></a><span id="l4.367" class="difflineminus">-        &lt;key id=&quot;redo-key&quot;</span>
<a href="#l4.368"></a><span id="l4.368" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.369"></a><span id="l4.369" class="difflineminus">-             key=&quot;&amp;event.dialog.redo.key;&quot;</span>
<a href="#l4.370"></a><span id="l4.370" class="difflineminus">-             command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l4.371"></a><span id="l4.371" class="difflineminus">-        &lt;key id=&quot;cut-key&quot;</span>
<a href="#l4.372"></a><span id="l4.372" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.373"></a><span id="l4.373" class="difflineminus">-             key=&quot;&amp;event.dialog.cut.key;&quot;</span>
<a href="#l4.374"></a><span id="l4.374" class="difflineminus">-             command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l4.375"></a><span id="l4.375" class="difflineminus">-        &lt;key id=&quot;copy-key&quot;</span>
<a href="#l4.376"></a><span id="l4.376" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.377"></a><span id="l4.377" class="difflineminus">-             key=&quot;&amp;event.dialog.copy.key;&quot;</span>
<a href="#l4.378"></a><span id="l4.378" class="difflineminus">-             command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l4.379"></a><span id="l4.379" class="difflineminus">-        &lt;key id=&quot;paste-key&quot;</span>
<a href="#l4.380"></a><span id="l4.380" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.381"></a><span id="l4.381" class="difflineminus">-             key=&quot;&amp;event.dialog.paste.key;&quot;</span>
<a href="#l4.382"></a><span id="l4.382" class="difflineminus">-             command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l4.383"></a><span id="l4.383" class="difflineminus">-        &lt;key id=&quot;select-all-key&quot;</span>
<a href="#l4.384"></a><span id="l4.384" class="difflineminus">-             modifiers=&quot;accel&quot;</span>
<a href="#l4.385"></a><span id="l4.385" class="difflineminus">-             key=&quot;&amp;event.dialog.select.all.key;&quot;</span>
<a href="#l4.386"></a><span id="l4.386" class="difflineminus">-             command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l4.387"></a><span id="l4.387" class="difflineminus">-    &lt;/keyset&gt;</span>
<a href="#l4.388"></a><span id="l4.388" class="difflineplus">+  &lt;keyset id=&quot;calendar-event-dialog-keyset&quot;&gt;</span>
<a href="#l4.389"></a><span id="l4.389" class="difflineplus">+    &lt;key id=&quot;new-event-key&quot;</span>
<a href="#l4.390"></a><span id="l4.390" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.391"></a><span id="l4.391" class="difflineplus">+         key=&quot;&amp;event.dialog.new.event.key2;&quot;</span>
<a href="#l4.392"></a><span id="l4.392" class="difflineplus">+         command=&quot;cmd_item_new_event&quot;/&gt;</span>
<a href="#l4.393"></a><span id="l4.393" class="difflineplus">+    &lt;key id=&quot;new-task-key&quot;</span>
<a href="#l4.394"></a><span id="l4.394" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.395"></a><span id="l4.395" class="difflineplus">+         key=&quot;&amp;event.dialog.new.task.key2;&quot;</span>
<a href="#l4.396"></a><span id="l4.396" class="difflineplus">+         command=&quot;cmd_item_new_task&quot;/&gt;</span>
<a href="#l4.397"></a><span id="l4.397" class="difflineplus">+    &lt;key id=&quot;new-message-key&quot;</span>
<a href="#l4.398"></a><span id="l4.398" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.399"></a><span id="l4.399" class="difflineplus">+         key=&quot;&amp;event.dialog.new.message.key2;&quot;</span>
<a href="#l4.400"></a><span id="l4.400" class="difflineplus">+         command=&quot;cmd_item_new_message&quot;/&gt;</span>
<a href="#l4.401"></a><span id="l4.401" class="difflineplus">+    &lt;key id=&quot;close-key&quot;</span>
<a href="#l4.402"></a><span id="l4.402" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.403"></a><span id="l4.403" class="difflineplus">+         key=&quot;&amp;event.dialog.close.key;&quot;</span>
<a href="#l4.404"></a><span id="l4.404" class="difflineplus">+         command=&quot;cmd_item_close&quot;/&gt;</span>
<a href="#l4.405"></a><span id="l4.405" class="difflineplus">+    &lt;key id=&quot;save-key&quot;</span>
<a href="#l4.406"></a><span id="l4.406" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.407"></a><span id="l4.407" class="difflineplus">+         key=&quot;&amp;event.dialog.save.key;&quot;</span>
<a href="#l4.408"></a><span id="l4.408" class="difflineplus">+         command=&quot;cmd_save&quot;/&gt;</span>
<a href="#l4.409"></a><span id="l4.409" class="difflineplus">+    &lt;key id=&quot;saveandclose-key&quot;</span>
<a href="#l4.410"></a><span id="l4.410" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.411"></a><span id="l4.411" class="difflineplus">+         key=&quot;&amp;event.dialog.saveandclose.key;&quot;</span>
<a href="#l4.412"></a><span id="l4.412" class="difflineplus">+         command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.413"></a><span id="l4.413" class="difflineplus">+    &lt;key id=&quot;saveandclose-key2&quot;</span>
<a href="#l4.414"></a><span id="l4.414" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.415"></a><span id="l4.415" class="difflineplus">+         keycode=&quot;VK_RETURN&quot;</span>
<a href="#l4.416"></a><span id="l4.416" class="difflineplus">+         command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.417"></a><span id="l4.417" class="difflineplus">+    &lt;key id=&quot;print-key&quot;</span>
<a href="#l4.418"></a><span id="l4.418" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.419"></a><span id="l4.419" class="difflineplus">+         key=&quot;&amp;event.dialog.print.key;&quot;</span>
<a href="#l4.420"></a><span id="l4.420" class="difflineplus">+         command=&quot;cmd_print&quot;/&gt;</span>
<a href="#l4.421"></a><span id="l4.421" class="difflineplus">+    &lt;key id=&quot;undo-key&quot;</span>
<a href="#l4.422"></a><span id="l4.422" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.423"></a><span id="l4.423" class="difflineplus">+         key=&quot;&amp;event.dialog.undo.key;&quot;</span>
<a href="#l4.424"></a><span id="l4.424" class="difflineplus">+         command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l4.425"></a><span id="l4.425" class="difflineplus">+    &lt;key id=&quot;redo-key&quot;</span>
<a href="#l4.426"></a><span id="l4.426" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.427"></a><span id="l4.427" class="difflineplus">+         key=&quot;&amp;event.dialog.redo.key;&quot;</span>
<a href="#l4.428"></a><span id="l4.428" class="difflineplus">+         command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l4.429"></a><span id="l4.429" class="difflineplus">+    &lt;key id=&quot;cut-key&quot;</span>
<a href="#l4.430"></a><span id="l4.430" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.431"></a><span id="l4.431" class="difflineplus">+         key=&quot;&amp;event.dialog.cut.key;&quot;</span>
<a href="#l4.432"></a><span id="l4.432" class="difflineplus">+         command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l4.433"></a><span id="l4.433" class="difflineplus">+    &lt;key id=&quot;copy-key&quot;</span>
<a href="#l4.434"></a><span id="l4.434" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.435"></a><span id="l4.435" class="difflineplus">+         key=&quot;&amp;event.dialog.copy.key;&quot;</span>
<a href="#l4.436"></a><span id="l4.436" class="difflineplus">+         command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l4.437"></a><span id="l4.437" class="difflineplus">+    &lt;key id=&quot;paste-key&quot;</span>
<a href="#l4.438"></a><span id="l4.438" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.439"></a><span id="l4.439" class="difflineplus">+         key=&quot;&amp;event.dialog.paste.key;&quot;</span>
<a href="#l4.440"></a><span id="l4.440" class="difflineplus">+         command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l4.441"></a><span id="l4.441" class="difflineplus">+    &lt;key id=&quot;select-all-key&quot;</span>
<a href="#l4.442"></a><span id="l4.442" class="difflineplus">+         modifiers=&quot;accel&quot;</span>
<a href="#l4.443"></a><span id="l4.443" class="difflineplus">+         key=&quot;&amp;event.dialog.select.all.key;&quot;</span>
<a href="#l4.444"></a><span id="l4.444" class="difflineplus">+         command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l4.445"></a><span id="l4.445" class="difflineplus">+  &lt;/keyset&gt;</span>
<a href="#l4.446"></a><span id="l4.446"> </span>
<a href="#l4.447"></a><span id="l4.447">   &lt;menupopup id=&quot;event-dialog-toolbar-context-menu&quot;&gt;</span>
<a href="#l4.448"></a><span id="l4.448">     &lt;menuitem id=&quot;CustomizeDialogToolbar&quot;</span>
<a href="#l4.449"></a><span id="l4.449">               label=&quot;&amp;event.menu.view.toolbars.customize.label;&quot;</span>
<a href="#l4.450"></a><span id="l4.450">               command=&quot;cmd_customize&quot;/&gt;</span>
<a href="#l4.451"></a><span id="l4.451">   &lt;/menupopup&gt;</span>
<a href="#l4.452"></a><span id="l4.452"> </span>
<a href="#l4.453"></a><span id="l4.453" class="difflineminus">-  &lt;!-- Toolbox contains the toolbar and menubar --&gt;</span>
<a href="#l4.454"></a><span id="l4.454" class="difflineminus">-    &lt;toolbox id=&quot;event-toolbox&quot;</span>
<a href="#l4.455"></a><span id="l4.455" class="difflineminus">-             class=&quot;toolbox-top&quot;</span>
<a href="#l4.456"></a><span id="l4.456" class="difflineminus">-             mode=&quot;full&quot;</span>
<a href="#l4.457"></a><span id="l4.457" class="difflineminus">-             defaultmode=&quot;full&quot;</span>
<a href="#l4.458"></a><span id="l4.458" class="difflineplus">+  &lt;!-- Toolbox contains the menubar --&gt;</span>
<a href="#l4.459"></a><span id="l4.459" class="difflineplus">+  &lt;toolbox id=&quot;event-toolbox&quot;</span>
<a href="#l4.460"></a><span id="l4.460" class="difflineplus">+           class=&quot;mail-toolbox&quot;</span>
<a href="#l4.461"></a><span id="l4.461" class="difflineplus">+           mode=&quot;full&quot;</span>
<a href="#l4.462"></a><span id="l4.462" class="difflineplus">+           defaultmode=&quot;full&quot;</span>
<a href="#l4.463"></a><span id="l4.463"> #ifdef XP_MACOSX</span>
<a href="#l4.464"></a><span id="l4.464" class="difflineminus">-             iconsize=&quot;small&quot;</span>
<a href="#l4.465"></a><span id="l4.465" class="difflineminus">-             defaulticonsize=&quot;small&quot;</span>
<a href="#l4.466"></a><span id="l4.466" class="difflineplus">+           iconsize=&quot;small&quot;</span>
<a href="#l4.467"></a><span id="l4.467" class="difflineplus">+           defaulticonsize=&quot;small&quot;</span>
<a href="#l4.468"></a><span id="l4.468"> #endif</span>
<a href="#l4.469"></a><span id="l4.469" class="difflineminus">-             labelalign=&quot;end&quot;</span>
<a href="#l4.470"></a><span id="l4.470" class="difflineminus">-             defaultlabelalign=&quot;end&quot;&gt;</span>
<a href="#l4.471"></a><span id="l4.471" class="difflineminus">-</span>
<a href="#l4.472"></a><span id="l4.472" class="difflineminus">-        &lt;!-- Menubar --&gt;</span>
<a href="#l4.473"></a><span id="l4.473" class="difflineminus">-        &lt;menubar id=&quot;event-menubar&quot;&gt;</span>
<a href="#l4.474"></a><span id="l4.474" class="difflineplus">+           labelalign=&quot;end&quot;</span>
<a href="#l4.475"></a><span id="l4.475" class="difflineplus">+           defaultlabelalign=&quot;end&quot;&gt;</span>
<a href="#l4.476"></a><span id="l4.476"> </span>
<a href="#l4.477"></a><span id="l4.477" class="difflineminus">-            &lt;!-- Item menu --&gt;</span>
<a href="#l4.478"></a><span id="l4.478" class="difflineminus">-                  &lt;!-- These 2 Strings are placeholders, values are set at runtime --&gt;</span>
<a href="#l4.479"></a><span id="l4.479" class="difflineminus">-            &lt;menu label=&quot;Item&quot;</span>
<a href="#l4.480"></a><span id="l4.480" class="difflineminus">-                  accesskey=&quot;I&quot;</span>
<a href="#l4.481"></a><span id="l4.481" class="difflineminus">-                  id=&quot;item-menu&quot;&gt;</span>
<a href="#l4.482"></a><span id="l4.482" class="difflineminus">-                &lt;menupopup id=&quot;item-menupopup&quot;&gt;</span>
<a href="#l4.483"></a><span id="l4.483" class="difflineminus">-                    &lt;menu id=&quot;item-new-menu&quot;</span>
<a href="#l4.484"></a><span id="l4.484" class="difflineminus">-                          label=&quot;&amp;event.menu.item.new.label;&quot;</span>
<a href="#l4.485"></a><span id="l4.485" class="difflineminus">-                          accesskey=&quot;&amp;event.menu.item.new.accesskey;&quot;&gt;</span>
<a href="#l4.486"></a><span id="l4.486" class="difflineminus">-                        &lt;menupopup id=&quot;item-new-menupopup&quot;&gt;</span>
<a href="#l4.487"></a><span id="l4.487" class="difflineminus">-                            &lt;menuitem id=&quot;item-new-message-menuitem&quot;</span>
<a href="#l4.488"></a><span id="l4.488" class="difflineminus">-                                      label=&quot;&amp;event.menu.item.new.message.label;&quot;</span>
<a href="#l4.489"></a><span id="l4.489" class="difflineminus">-                                      accesskey=&quot;&amp;event.menu.item.new.message.accesskey;&quot;</span>
<a href="#l4.490"></a><span id="l4.490" class="difflineminus">-                                      key=&quot;new-message-key&quot;</span>
<a href="#l4.491"></a><span id="l4.491" class="difflineminus">-                                      command=&quot;cmd_item_new_message&quot;</span>
<a href="#l4.492"></a><span id="l4.492" class="difflineminus">-                                      disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.493"></a><span id="l4.493" class="difflineminus">-                            &lt;menuitem id=&quot;item-new-event-menuitem&quot;</span>
<a href="#l4.494"></a><span id="l4.494" class="difflineminus">-                                      label=&quot;&amp;event.menu.item.new.event.label;&quot;</span>
<a href="#l4.495"></a><span id="l4.495" class="difflineminus">-                                      accesskey=&quot;&amp;event.menu.item.new.event.accesskey;&quot;</span>
<a href="#l4.496"></a><span id="l4.496" class="difflineminus">-                                      key=&quot;new-event-key&quot;</span>
<a href="#l4.497"></a><span id="l4.497" class="difflineminus">-                                      command=&quot;cmd_item_new_event&quot;</span>
<a href="#l4.498"></a><span id="l4.498" class="difflineminus">-                                      disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.499"></a><span id="l4.499" class="difflineminus">-                            &lt;menuitem id=&quot;item-new-task-menuitem&quot;</span>
<a href="#l4.500"></a><span id="l4.500" class="difflineminus">-                                      label=&quot;&amp;event.menu.item.new.task.label;&quot;</span>
<a href="#l4.501"></a><span id="l4.501" class="difflineminus">-                                      accesskey=&quot;&amp;event.menu.item.new.task.accesskey;&quot;</span>
<a href="#l4.502"></a><span id="l4.502" class="difflineminus">-                                      key=&quot;new-task-key&quot;</span>
<a href="#l4.503"></a><span id="l4.503" class="difflineminus">-                                      command=&quot;cmd_item_new_task&quot;</span>
<a href="#l4.504"></a><span id="l4.504" class="difflineminus">-                                      disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.505"></a><span id="l4.505" class="difflineminus">-                            &lt;menuseparator id=&quot;item-new-menuseparator1&quot;/&gt;</span>
<a href="#l4.506"></a><span id="l4.506" class="difflineminus">-                            &lt;menuitem id=&quot;item-new-address-menuitem&quot;</span>
<a href="#l4.507"></a><span id="l4.507" class="difflineminus">-                                      label=&quot;&amp;event.menu.item.new.contact.label;&quot;</span>
<a href="#l4.508"></a><span id="l4.508" class="difflineminus">-                                      accesskey=&quot;&amp;event.menu.item.new.contact.accesskey;&quot;</span>
<a href="#l4.509"></a><span id="l4.509" class="difflineminus">-                                      command=&quot;cmd_item_new_card&quot;</span>
<a href="#l4.510"></a><span id="l4.510" class="difflineminus">-                                      disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.511"></a><span id="l4.511" class="difflineminus">-                        &lt;/menupopup&gt;</span>
<a href="#l4.512"></a><span id="l4.512" class="difflineminus">-                    &lt;/menu&gt;</span>
<a href="#l4.513"></a><span id="l4.513" class="difflineminus">-                    &lt;menuseparator id=&quot;item-menuseparator1&quot;/&gt;</span>
<a href="#l4.514"></a><span id="l4.514" class="difflineminus">-                    &lt;menuitem id=&quot;item-save-menuitem&quot;</span>
<a href="#l4.515"></a><span id="l4.515" class="difflineminus">-                              label=&quot;&amp;event.menu.item.save.label;&quot;</span>
<a href="#l4.516"></a><span id="l4.516" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.item.save.accesskey;&quot;</span>
<a href="#l4.517"></a><span id="l4.517" class="difflineminus">-                              key=&quot;save-key&quot;</span>
<a href="#l4.518"></a><span id="l4.518" class="difflineminus">-                              command=&quot;cmd_save&quot;/&gt;</span>
<a href="#l4.519"></a><span id="l4.519" class="difflineminus">-                    &lt;menuitem id=&quot;item-saveandclose-menuitem&quot;</span>
<a href="#l4.520"></a><span id="l4.520" class="difflineminus">-                              label=&quot;&amp;event.menu.item.saveandclose.label;&quot;</span>
<a href="#l4.521"></a><span id="l4.521" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.item.saveandclose.accesskey;&quot;</span>
<a href="#l4.522"></a><span id="l4.522" class="difflineminus">-                              key=&quot;saveandclose-key&quot;</span>
<a href="#l4.523"></a><span id="l4.523" class="difflineminus">-                              command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.524"></a><span id="l4.524" class="difflineminus">-                    &lt;menuitem id=&quot;item-delete-menuitem&quot;</span>
<a href="#l4.525"></a><span id="l4.525" class="difflineminus">-                              label=&quot;&amp;event.menu.item.delete.label;&quot;</span>
<a href="#l4.526"></a><span id="l4.526" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.item.delete.accesskey;&quot;</span>
<a href="#l4.527"></a><span id="l4.527" class="difflineminus">-                              command=&quot;cmd_item_delete&quot;</span>
<a href="#l4.528"></a><span id="l4.528" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.529"></a><span id="l4.529" class="difflineminus">-                    &lt;menuitem id=&quot;item-pagesetup-menuitem&quot;</span>
<a href="#l4.530"></a><span id="l4.530" class="difflineminus">-                              label=&quot;&amp;event.menu.item.page.setup.label;&quot;</span>
<a href="#l4.531"></a><span id="l4.531" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.item.page.setup.accesskey;&quot;</span>
<a href="#l4.532"></a><span id="l4.532" class="difflineminus">-                              command=&quot;cmd_printSetup&quot;</span>
<a href="#l4.533"></a><span id="l4.533" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.534"></a><span id="l4.534" class="difflineminus">-                    &lt;menuitem id=&quot;item-print-menuitem&quot;</span>
<a href="#l4.535"></a><span id="l4.535" class="difflineminus">-                              label=&quot;&amp;event.menu.item.print.label;&quot;</span>
<a href="#l4.536"></a><span id="l4.536" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.item.print.accesskey;&quot;</span>
<a href="#l4.537"></a><span id="l4.537" class="difflineminus">-                              key=&quot;print-key&quot;</span>
<a href="#l4.538"></a><span id="l4.538" class="difflineminus">-                              command=&quot;cmd_print&quot;</span>
<a href="#l4.539"></a><span id="l4.539" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.540"></a><span id="l4.540" class="difflineminus">-                    &lt;menuseparator id=&quot;item-menuseparator1&quot;/&gt;</span>
<a href="#l4.541"></a><span id="l4.541" class="difflineminus">-                    &lt;menuitem id=&quot;item-close-menuitem&quot;</span>
<a href="#l4.542"></a><span id="l4.542" class="difflineminus">-                              label=&quot;&amp;event.menu.item.close.label;&quot;</span>
<a href="#l4.543"></a><span id="l4.543" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.item.close.accesskey;&quot;</span>
<a href="#l4.544"></a><span id="l4.544" class="difflineminus">-                              key=&quot;close-key&quot;</span>
<a href="#l4.545"></a><span id="l4.545" class="difflineminus">-                              command=&quot;cmd_item_close&quot;</span>
<a href="#l4.546"></a><span id="l4.546" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.547"></a><span id="l4.547" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.548"></a><span id="l4.548" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l4.549"></a><span id="l4.549" class="difflineminus">-</span>
<a href="#l4.550"></a><span id="l4.550" class="difflineminus">-            &lt;!-- Edit menu --&gt;</span>
<a href="#l4.551"></a><span id="l4.551" class="difflineminus">-            &lt;menu id=&quot;edit-menu&quot;</span>
<a href="#l4.552"></a><span id="l4.552" class="difflineminus">-                  label=&quot;&amp;event.menu.edit.label;&quot;</span>
<a href="#l4.553"></a><span id="l4.553" class="difflineminus">-                  accesskey=&quot;&amp;event.menu.edit.accesskey;&quot;</span>
<a href="#l4.554"></a><span id="l4.554" class="difflineminus">-                  collapse-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.555"></a><span id="l4.555" class="difflineminus">-                &lt;menupopup id=&quot;edit-menupopup&quot;&gt;</span>
<a href="#l4.556"></a><span id="l4.556" class="difflineminus">-                    &lt;menuitem id=&quot;edit-undo-menuitem&quot;</span>
<a href="#l4.557"></a><span id="l4.557" class="difflineminus">-                              label=&quot;&amp;event.menu.edit.undo.label;&quot;</span>
<a href="#l4.558"></a><span id="l4.558" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.edit.undo.accesskey;&quot;</span>
<a href="#l4.559"></a><span id="l4.559" class="difflineminus">-                              key=&quot;undo-key&quot;</span>
<a href="#l4.560"></a><span id="l4.560" class="difflineminus">-                              command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l4.561"></a><span id="l4.561" class="difflineminus">-                    &lt;menuitem id=&quot;edit-redo-menuitem&quot;</span>
<a href="#l4.562"></a><span id="l4.562" class="difflineminus">-                              label=&quot;&amp;event.menu.edit.redo.label;&quot;</span>
<a href="#l4.563"></a><span id="l4.563" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.edit.redo.accesskey;&quot;</span>
<a href="#l4.564"></a><span id="l4.564" class="difflineminus">-                              key=&quot;redo-key&quot;</span>
<a href="#l4.565"></a><span id="l4.565" class="difflineminus">-                              command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l4.566"></a><span id="l4.566" class="difflineminus">-                    &lt;menuseparator id=&quot;edit-menuseparator1&quot;/&gt;</span>
<a href="#l4.567"></a><span id="l4.567" class="difflineminus">-                    &lt;menuitem id=&quot;edit-cut-menuitem&quot;</span>
<a href="#l4.568"></a><span id="l4.568" class="difflineminus">-                              label=&quot;&amp;event.menu.edit.cut.label;&quot;</span>
<a href="#l4.569"></a><span id="l4.569" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.edit.cut.accesskey;&quot;</span>
<a href="#l4.570"></a><span id="l4.570" class="difflineminus">-                              key=&quot;cut-key&quot;</span>
<a href="#l4.571"></a><span id="l4.571" class="difflineminus">-                              command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l4.572"></a><span id="l4.572" class="difflineminus">-                    &lt;menuitem id=&quot;edit-copy-menuitem&quot;</span>
<a href="#l4.573"></a><span id="l4.573" class="difflineminus">-                              label=&quot;&amp;event.menu.edit.copy.label;&quot;</span>
<a href="#l4.574"></a><span id="l4.574" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.edit.copy.accesskey;&quot;</span>
<a href="#l4.575"></a><span id="l4.575" class="difflineminus">-                              key=&quot;copy-key&quot;</span>
<a href="#l4.576"></a><span id="l4.576" class="difflineminus">-                              command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l4.577"></a><span id="l4.577" class="difflineminus">-                    &lt;menuitem id=&quot;edit-paste-menuitem&quot;</span>
<a href="#l4.578"></a><span id="l4.578" class="difflineminus">-                              label=&quot;&amp;event.menu.edit.paste.label;&quot;</span>
<a href="#l4.579"></a><span id="l4.579" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.edit.paste.accesskey;&quot;</span>
<a href="#l4.580"></a><span id="l4.580" class="difflineminus">-                              key=&quot;paste-key&quot;</span>
<a href="#l4.581"></a><span id="l4.581" class="difflineminus">-                              command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l4.582"></a><span id="l4.582" class="difflineminus">-                    &lt;menuseparator id=&quot;edit-menuseparator2&quot;/&gt;</span>
<a href="#l4.583"></a><span id="l4.583" class="difflineminus">-                    &lt;menuitem id=&quot;edit-selectall-menuitem&quot;</span>
<a href="#l4.584"></a><span id="l4.584" class="difflineminus">-                              label=&quot;&amp;event.menu.edit.select.all.label;&quot;</span>
<a href="#l4.585"></a><span id="l4.585" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.edit.select.all.accesskey;&quot;</span>
<a href="#l4.586"></a><span id="l4.586" class="difflineminus">-                              key=&quot;select-all-key&quot;</span>
<a href="#l4.587"></a><span id="l4.587" class="difflineminus">-                              command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l4.588"></a><span id="l4.588" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.589"></a><span id="l4.589" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l4.590"></a><span id="l4.590" class="difflineminus">-</span>
<a href="#l4.591"></a><span id="l4.591" class="difflineminus">-            &lt;!-- View menu --&gt;</span>
<a href="#l4.592"></a><span id="l4.592" class="difflineminus">-            &lt;menu id=&quot;view-menu&quot;</span>
<a href="#l4.593"></a><span id="l4.593" class="difflineminus">-                  label=&quot;&amp;event.menu.view.label;&quot;</span>
<a href="#l4.594"></a><span id="l4.594" class="difflineminus">-                  accesskey=&quot;&amp;event.menu.view.accesskey;&quot;</span>
<a href="#l4.595"></a><span id="l4.595" class="difflineminus">-                  collapse-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.596"></a><span id="l4.596" class="difflineminus">-                &lt;menupopup id=&quot;view-menupopup&quot;&gt;</span>
<a href="#l4.597"></a><span id="l4.597" class="difflineminus">-                    &lt;menu id=&quot;view-toolbars-menu&quot;</span>
<a href="#l4.598"></a><span id="l4.598" class="difflineminus">-                          label=&quot;&amp;event.menu.view.toolbars.label;&quot;</span>
<a href="#l4.599"></a><span id="l4.599" class="difflineminus">-                          accesskey=&quot;&amp;event.menu.view.toolbars.accesskey;&quot;&gt;</span>
<a href="#l4.600"></a><span id="l4.600" class="difflineminus">-                        &lt;menupopup id=&quot;view-toolbars-menupopup&quot;&gt;</span>
<a href="#l4.601"></a><span id="l4.601" class="difflineminus">-                            &lt;menuitem id=&quot;view-toolbars-event-menuitem&quot;</span>
<a href="#l4.602"></a><span id="l4.602" class="difflineminus">-                                      label=&quot;&amp;event.menu.view.toolbars.event.label;&quot;</span>
<a href="#l4.603"></a><span id="l4.603" class="difflineminus">-                                      accesskey=&quot;&amp;event.menu.view.toolbars.event.accesskey;&quot;</span>
<a href="#l4.604"></a><span id="l4.604" class="difflineminus">-                                      type=&quot;checkbox&quot;</span>
<a href="#l4.605"></a><span id="l4.605" class="difflineminus">-                                      checked=&quot;true&quot;</span>
<a href="#l4.606"></a><span id="l4.606" class="difflineminus">-                                      command=&quot;cmd_toolbar&quot;/&gt;</span>
<a href="#l4.607"></a><span id="l4.607" class="difflineminus">-                            &lt;menuseparator id=&quot;view-toolbars-menuseparator1&quot;/&gt;</span>
<a href="#l4.608"></a><span id="l4.608" class="difflineminus">-                            &lt;menuitem id=&quot;view-toolbars-customize-menuitem&quot;</span>
<a href="#l4.609"></a><span id="l4.609" class="difflineminus">-                                      label=&quot;&amp;event.menu.view.toolbars.customize.label;&quot;</span>
<a href="#l4.610"></a><span id="l4.610" class="difflineminus">-                                      accesskey=&quot;&amp;event.menu.view.toolbars.customize.accesskey;&quot;</span>
<a href="#l4.611"></a><span id="l4.611" class="difflineminus">-                                      command=&quot;cmd_customize&quot;/&gt;</span>
<a href="#l4.612"></a><span id="l4.612" class="difflineminus">-                        &lt;/menupopup&gt;</span>
<a href="#l4.613"></a><span id="l4.613" class="difflineminus">-                    &lt;/menu&gt;</span>
<a href="#l4.614"></a><span id="l4.614" class="difflineminus">-                    &lt;menuseparator id=&quot;view-menu-toolbars-separator&quot;/&gt;</span>
<a href="#l4.615"></a><span id="l4.615" class="difflineminus">-                    &lt;menuitem id=&quot;view-show-link-menuitem&quot;</span>
<a href="#l4.616"></a><span id="l4.616" class="difflineminus">-                              label=&quot;&amp;event.menu.view.showlink.label;&quot;</span>
<a href="#l4.617"></a><span id="l4.617" class="difflineminus">-                              accesskey=&quot;&amp;event.menu.view.showlink.accesskey;&quot;</span>
<a href="#l4.618"></a><span id="l4.618" class="difflineminus">-                              type=&quot;checkbox&quot;</span>
<a href="#l4.619"></a><span id="l4.619" class="difflineminus">-                              command=&quot;cmd_toggle_link&quot;</span>
<a href="#l4.620"></a><span id="l4.620" class="difflineminus">-                              observes=&quot;cmd_toggle_link&quot;/&gt;</span>
<a href="#l4.621"></a><span id="l4.621" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.622"></a><span id="l4.622" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l4.623"></a><span id="l4.623" class="difflineplus">+    &lt;!-- Menubar --&gt;</span>
<a href="#l4.624"></a><span id="l4.624" class="difflineplus">+    &lt;menubar id=&quot;event-menubar&quot;&gt;</span>
<a href="#l4.625"></a><span id="l4.625"> </span>
<a href="#l4.626"></a><span id="l4.626" class="difflineminus">-            &lt;!-- Options menu --&gt;</span>
<a href="#l4.627"></a><span id="l4.627" class="difflineminus">-            &lt;menu id=&quot;options-menu&quot;</span>
<a href="#l4.628"></a><span id="l4.628" class="difflineminus">-                  label=&quot;&amp;event.menu.options.label;&quot;</span>
<a href="#l4.629"></a><span id="l4.629" class="difflineminus">-                  accesskey=&quot;&amp;event.menu.options.accesskey;&quot;&gt;</span>
<a href="#l4.630"></a><span id="l4.630" class="difflineminus">-                &lt;menupopup id=&quot;options-menupopup&quot;&gt;</span>
<a href="#l4.631"></a><span id="l4.631" class="difflineminus">-                  &lt;menuitem id=&quot;options-attendees-menuitem&quot;</span>
<a href="#l4.632"></a><span id="l4.632" class="difflineminus">-                            label=&quot;&amp;event.menu.options.attendees.label;&quot;</span>
<a href="#l4.633"></a><span id="l4.633" class="difflineminus">-                            accesskey=&quot;&amp;event.menu.options.attendees.accesskey;&quot;</span>
<a href="#l4.634"></a><span id="l4.634" class="difflineminus">-                            command=&quot;cmd_attendees&quot;</span>
<a href="#l4.635"></a><span id="l4.635" class="difflineminus">-                            disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.636"></a><span id="l4.636" class="difflineminus">-                  &lt;menu id=&quot;options-attachments-menu&quot;</span>
<a href="#l4.637"></a><span id="l4.637" class="difflineminus">-                        label=&quot;&amp;event.attachments.menubutton.label;&quot;</span>
<a href="#l4.638"></a><span id="l4.638" class="difflineminus">-                        accesskey=&quot;&amp;event.attachments.menubutton.accesskey;&quot;&gt;</span>
<a href="#l4.639"></a><span id="l4.639" class="difflineminus">-                    &lt;menupopup id=&quot;options-attachments-menupopup&quot;&gt;</span>
<a href="#l4.640"></a><span id="l4.640" class="difflineminus">-                      &lt;menuitem id=&quot;options-attachments-url-menuitem&quot;</span>
<a href="#l4.641"></a><span id="l4.641" class="difflineminus">-                                label=&quot;&amp;event.attachments.url.label;&quot;</span>
<a href="#l4.642"></a><span id="l4.642" class="difflineminus">-                                accesskey=&quot;&amp;event.attachments.url.accesskey;&quot;</span>
<a href="#l4.643"></a><span id="l4.643" class="difflineminus">-                                command=&quot;cmd_attach_url&quot;/&gt;</span>
<a href="#l4.644"></a><span id="l4.644" class="difflineminus">-                    &lt;/menupopup&gt;</span>
<a href="#l4.645"></a><span id="l4.645" class="difflineminus">-                  &lt;/menu&gt;</span>
<a href="#l4.646"></a><span id="l4.646" class="difflineminus">-                  &lt;menuitem id=&quot;options-timezones-menuitem&quot;</span>
<a href="#l4.647"></a><span id="l4.647" class="difflineminus">-                            label=&quot;&amp;event.menu.options.timezone2.label;&quot;</span>
<a href="#l4.648"></a><span id="l4.648" class="difflineminus">-                            accesskey=&quot;&amp;event.menu.options.timezone2.accesskey;&quot;</span>
<a href="#l4.649"></a><span id="l4.649" class="difflineminus">-                            type=&quot;checkbox&quot;</span>
<a href="#l4.650"></a><span id="l4.650" class="difflineminus">-                            command=&quot;cmd_timezone&quot;</span>
<a href="#l4.651"></a><span id="l4.651" class="difflineminus">-                            disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.652"></a><span id="l4.652" class="difflineminus">-                  &lt;menuseparator id=&quot;options-menuseparator1&quot;/&gt;</span>
<a href="#l4.653"></a><span id="l4.653" class="difflineminus">-                  &lt;menu id=&quot;options-priority-menu&quot;</span>
<a href="#l4.654"></a><span id="l4.654" class="difflineminus">-                        label=&quot;&amp;event.menu.options.priority2.label;&quot;</span>
<a href="#l4.655"></a><span id="l4.655" class="difflineminus">-                        accesskey=&quot;&amp;event.menu.options.priority2.accesskey;&quot;</span>
<a href="#l4.656"></a><span id="l4.656" class="difflineminus">-                        disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.657"></a><span id="l4.657" class="difflineminus">-                      &lt;menupopup id=&quot;options-priority-menupopup&quot;&gt;</span>
<a href="#l4.658"></a><span id="l4.658" class="difflineminus">-                          &lt;menuitem id=&quot;options-priority-none-menuitem&quot;</span>
<a href="#l4.659"></a><span id="l4.659" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.priority.notspecified.label;&quot;</span>
<a href="#l4.660"></a><span id="l4.660" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.priority.notspecified.accesskey;&quot;</span>
<a href="#l4.661"></a><span id="l4.661" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.662"></a><span id="l4.662" class="difflineminus">-                                    command=&quot;cmd_priority_none&quot;</span>
<a href="#l4.663"></a><span id="l4.663" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.664"></a><span id="l4.664" class="difflineminus">-                          &lt;menuitem id=&quot;options-priority-low-menuitem&quot;</span>
<a href="#l4.665"></a><span id="l4.665" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.priority.low.label;&quot;</span>
<a href="#l4.666"></a><span id="l4.666" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.priority.low.accesskey;&quot;</span>
<a href="#l4.667"></a><span id="l4.667" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.668"></a><span id="l4.668" class="difflineminus">-                                    command=&quot;cmd_priority_low&quot;</span>
<a href="#l4.669"></a><span id="l4.669" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.670"></a><span id="l4.670" class="difflineminus">-                          &lt;menuitem id=&quot;options-priority-normal-label&quot;</span>
<a href="#l4.671"></a><span id="l4.671" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.priority.normal.label;&quot;</span>
<a href="#l4.672"></a><span id="l4.672" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.priority.normal.accesskey;&quot;</span>
<a href="#l4.673"></a><span id="l4.673" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.674"></a><span id="l4.674" class="difflineminus">-                                    command=&quot;cmd_priority_normal&quot;</span>
<a href="#l4.675"></a><span id="l4.675" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.676"></a><span id="l4.676" class="difflineminus">-                          &lt;menuitem id=&quot;options-priority-high-label&quot;</span>
<a href="#l4.677"></a><span id="l4.677" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.priority.high.label;&quot;</span>
<a href="#l4.678"></a><span id="l4.678" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.priority.high.accesskey;&quot;</span>
<a href="#l4.679"></a><span id="l4.679" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.680"></a><span id="l4.680" class="difflineminus">-                                    command=&quot;cmd_priority_high&quot;</span>
<a href="#l4.681"></a><span id="l4.681" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.682"></a><span id="l4.682" class="difflineminus">-                      &lt;/menupopup&gt;</span>
<a href="#l4.683"></a><span id="l4.683" class="difflineminus">-                  &lt;/menu&gt;</span>
<a href="#l4.684"></a><span id="l4.684" class="difflineminus">-                  &lt;menu id=&quot;options-privacy-menu&quot;</span>
<a href="#l4.685"></a><span id="l4.685" class="difflineminus">-                        label=&quot;&amp;event.menu.options.privacy.label;&quot;</span>
<a href="#l4.686"></a><span id="l4.686" class="difflineminus">-                        accesskey=&quot;&amp;event.menu.options.privacy.accesskey;&quot;</span>
<a href="#l4.687"></a><span id="l4.687" class="difflineminus">-                        disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.688"></a><span id="l4.688" class="difflineminus">-                      &lt;menupopup id=&quot;options-privacy-menupopup&quot;&gt;</span>
<a href="#l4.689"></a><span id="l4.689" class="difflineminus">-                          &lt;menuitem id=&quot;options-privacy-public-menuitem&quot;</span>
<a href="#l4.690"></a><span id="l4.690" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.privacy.public.label;&quot;</span>
<a href="#l4.691"></a><span id="l4.691" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.privacy.public.accesskey;&quot;</span>
<a href="#l4.692"></a><span id="l4.692" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.693"></a><span id="l4.693" class="difflineminus">-                                    privacy=&quot;PUBLIC&quot;</span>
<a href="#l4.694"></a><span id="l4.694" class="difflineminus">-                                    oncommand=&quot;editPrivacy(this, event)&quot;</span>
<a href="#l4.695"></a><span id="l4.695" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.696"></a><span id="l4.696" class="difflineminus">-                          &lt;menuitem id=&quot;options-privacy-confidential-menuitem&quot;</span>
<a href="#l4.697"></a><span id="l4.697" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;</span>
<a href="#l4.698"></a><span id="l4.698" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.privacy.confidential.accesskey;&quot;</span>
<a href="#l4.699"></a><span id="l4.699" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.700"></a><span id="l4.700" class="difflineminus">-                                    privacy=&quot;CONFIDENTIAL&quot;</span>
<a href="#l4.701"></a><span id="l4.701" class="difflineminus">-                                    oncommand=&quot;editPrivacy(this, event)&quot;</span>
<a href="#l4.702"></a><span id="l4.702" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.703"></a><span id="l4.703" class="difflineminus">-                          &lt;menuitem id=&quot;options-privacy-private-menuitem&quot;</span>
<a href="#l4.704"></a><span id="l4.704" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.privacy.private.label;&quot;</span>
<a href="#l4.705"></a><span id="l4.705" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.privacy.private.accesskey;&quot;</span>
<a href="#l4.706"></a><span id="l4.706" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.707"></a><span id="l4.707" class="difflineminus">-                                    privacy=&quot;PRIVATE&quot;</span>
<a href="#l4.708"></a><span id="l4.708" class="difflineminus">-                                    oncommand=&quot;editPrivacy(this, event)&quot;</span>
<a href="#l4.709"></a><span id="l4.709" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.710"></a><span id="l4.710" class="difflineminus">-                      &lt;/menupopup&gt;</span>
<a href="#l4.711"></a><span id="l4.711" class="difflineminus">-                  &lt;/menu&gt;</span>
<a href="#l4.712"></a><span id="l4.712" class="difflineminus">-                  &lt;menu id=&quot;options-status-menu&quot;</span>
<a href="#l4.713"></a><span id="l4.713" class="difflineminus">-                        label=&quot;&amp;newevent.status.label;&quot;</span>
<a href="#l4.714"></a><span id="l4.714" class="difflineminus">-                        accesskey=&quot;&amp;newevent.status.accesskey;&quot;</span>
<a href="#l4.715"></a><span id="l4.715" class="difflineminus">-                        class=&quot;event-only&quot;</span>
<a href="#l4.716"></a><span id="l4.716" class="difflineminus">-                        disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.717"></a><span id="l4.717" class="difflineminus">-                    &lt;menupopup id=&quot;options-status-menupopup&quot;&gt;</span>
<a href="#l4.718"></a><span id="l4.718" class="difflineminus">-                      &lt;menuitem id=&quot;options-status-none-menuitem&quot;</span>
<a href="#l4.719"></a><span id="l4.719" class="difflineminus">-                                label=&quot;&amp;newevent.eventStatus.none.label;&quot;</span>
<a href="#l4.720"></a><span id="l4.720" class="difflineminus">-                                accesskey=&quot;&amp;newevent.eventStatus.none.accesskey;&quot;</span>
<a href="#l4.721"></a><span id="l4.721" class="difflineminus">-                                type=&quot;radio&quot;</span>
<a href="#l4.722"></a><span id="l4.722" class="difflineminus">-                                command=&quot;cmd_status_none&quot;</span>
<a href="#l4.723"></a><span id="l4.723" class="difflineminus">-                                disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.724"></a><span id="l4.724" class="difflineminus">-                      &lt;menuitem id=&quot;options-status-tentative-menuitem&quot;</span>
<a href="#l4.725"></a><span id="l4.725" class="difflineminus">-                                label=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l4.726"></a><span id="l4.726" class="difflineminus">-                                accesskey=&quot;&amp;newevent.status.tentative.accesskey;&quot;</span>
<a href="#l4.727"></a><span id="l4.727" class="difflineminus">-                                type=&quot;radio&quot;</span>
<a href="#l4.728"></a><span id="l4.728" class="difflineminus">-                                command=&quot;cmd_status_tentative&quot;</span>
<a href="#l4.729"></a><span id="l4.729" class="difflineminus">-                                disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.730"></a><span id="l4.730" class="difflineminus">-                      &lt;menuitem id=&quot;options-status-confirmed-menuitem&quot;</span>
<a href="#l4.731"></a><span id="l4.731" class="difflineminus">-                                label=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l4.732"></a><span id="l4.732" class="difflineminus">-                                accesskey=&quot;&amp;newevent.status.confirmed.accesskey;&quot;</span>
<a href="#l4.733"></a><span id="l4.733" class="difflineminus">-                                type=&quot;radio&quot;</span>
<a href="#l4.734"></a><span id="l4.734" class="difflineminus">-                                command=&quot;cmd_status_confirmed&quot;</span>
<a href="#l4.735"></a><span id="l4.735" class="difflineminus">-                                disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.736"></a><span id="l4.736" class="difflineminus">-                      &lt;menuitem id=&quot;options-status-canceled-menuitem&quot;</span>
<a href="#l4.737"></a><span id="l4.737" class="difflineminus">-                                label=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l4.738"></a><span id="l4.738" class="difflineminus">-                                accesskey=&quot;&amp;newevent.eventStatus.cancelled.accesskey;&quot;</span>
<a href="#l4.739"></a><span id="l4.739" class="difflineminus">-                                type=&quot;radio&quot;</span>
<a href="#l4.740"></a><span id="l4.740" class="difflineminus">-                                command=&quot;cmd_status_cancelled&quot;</span>
<a href="#l4.741"></a><span id="l4.741" class="difflineminus">-                                disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.742"></a><span id="l4.742" class="difflineminus">-                    &lt;/menupopup&gt;</span>
<a href="#l4.743"></a><span id="l4.743" class="difflineminus">-                  &lt;/menu&gt;</span>
<a href="#l4.744"></a><span id="l4.744" class="difflineminus">-                  &lt;menuseparator id=&quot;options-menuseparator2&quot; class=&quot;event-only&quot;/&gt;</span>
<a href="#l4.745"></a><span id="l4.745" class="difflineminus">-                  &lt;menu id=&quot;options-freebusy-menu&quot;</span>
<a href="#l4.746"></a><span id="l4.746" class="difflineminus">-                        class=&quot;event-only&quot;</span>
<a href="#l4.747"></a><span id="l4.747" class="difflineminus">-                        label=&quot;&amp;event.menu.options.show.time.label;&quot;</span>
<a href="#l4.748"></a><span id="l4.748" class="difflineminus">-                        accesskey=&quot;&amp;event.menu.options.show.time.accesskey;&quot;</span>
<a href="#l4.749"></a><span id="l4.749" class="difflineminus">-                        disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.750"></a><span id="l4.750" class="difflineminus">-                      &lt;menupopup id=&quot;options-freebusy-menupopup&quot;&gt;</span>
<a href="#l4.751"></a><span id="l4.751" class="difflineminus">-                          &lt;menuitem id=&quot;options-freebusy-busy-menuitem&quot;</span>
<a href="#l4.752"></a><span id="l4.752" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.show.time.busy.label;&quot;</span>
<a href="#l4.753"></a><span id="l4.753" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.show.time.busy.accesskey;&quot;</span>
<a href="#l4.754"></a><span id="l4.754" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.755"></a><span id="l4.755" class="difflineminus">-                                    command=&quot;cmd_showtimeas_busy&quot;</span>
<a href="#l4.756"></a><span id="l4.756" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.757"></a><span id="l4.757" class="difflineminus">-                          &lt;menuitem id=&quot;options-freebusy-free-menuitem&quot;</span>
<a href="#l4.758"></a><span id="l4.758" class="difflineminus">-                                    label=&quot;&amp;event.menu.options.show.time.free.label;&quot;</span>
<a href="#l4.759"></a><span id="l4.759" class="difflineminus">-                                    accesskey=&quot;&amp;event.menu.options.show.time.free.accesskey;&quot;</span>
<a href="#l4.760"></a><span id="l4.760" class="difflineminus">-                                    type=&quot;radio&quot;</span>
<a href="#l4.761"></a><span id="l4.761" class="difflineminus">-                                    command=&quot;cmd_showtimeas_free&quot;</span>
<a href="#l4.762"></a><span id="l4.762" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.763"></a><span id="l4.763" class="difflineminus">-                      &lt;/menupopup&gt;</span>
<a href="#l4.764"></a><span id="l4.764" class="difflineminus">-                  &lt;/menu&gt;</span>
<a href="#l4.765"></a><span id="l4.765" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.766"></a><span id="l4.766" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l4.767"></a><span id="l4.767" class="difflineminus">-        &lt;/menubar&gt;</span>
<a href="#l4.768"></a><span id="l4.768" class="difflineplus">+      &lt;!-- Item menu --&gt;</span>
<a href="#l4.769"></a><span id="l4.769" class="difflineplus">+      &lt;!-- These 2 Strings are placeholders, values are set at runtime --&gt;</span>
<a href="#l4.770"></a><span id="l4.770" class="difflineplus">+      &lt;menu label=&quot;Item&quot;</span>
<a href="#l4.771"></a><span id="l4.771" class="difflineplus">+            accesskey=&quot;I&quot;</span>
<a href="#l4.772"></a><span id="l4.772" class="difflineplus">+            id=&quot;item-menu&quot;&gt;</span>
<a href="#l4.773"></a><span id="l4.773" class="difflineplus">+        &lt;menupopup id=&quot;item-menupopup&quot;&gt;</span>
<a href="#l4.774"></a><span id="l4.774" class="difflineplus">+          &lt;menu id=&quot;item-new-menu&quot;</span>
<a href="#l4.775"></a><span id="l4.775" class="difflineplus">+                label=&quot;&amp;event.menu.item.new.label;&quot;</span>
<a href="#l4.776"></a><span id="l4.776" class="difflineplus">+                accesskey=&quot;&amp;event.menu.item.new.accesskey;&quot;&gt;</span>
<a href="#l4.777"></a><span id="l4.777" class="difflineplus">+            &lt;menupopup id=&quot;item-new-menupopup&quot;&gt;</span>
<a href="#l4.778"></a><span id="l4.778" class="difflineplus">+              &lt;menuitem id=&quot;item-new-message-menuitem&quot;</span>
<a href="#l4.779"></a><span id="l4.779" class="difflineplus">+                        label=&quot;&amp;event.menu.item.new.message.label;&quot;</span>
<a href="#l4.780"></a><span id="l4.780" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.item.new.message.accesskey;&quot;</span>
<a href="#l4.781"></a><span id="l4.781" class="difflineplus">+                        key=&quot;new-message-key&quot;</span>
<a href="#l4.782"></a><span id="l4.782" class="difflineplus">+                        command=&quot;cmd_item_new_message&quot;</span>
<a href="#l4.783"></a><span id="l4.783" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.784"></a><span id="l4.784" class="difflineplus">+              &lt;menuitem id=&quot;item-new-event-menuitem&quot;</span>
<a href="#l4.785"></a><span id="l4.785" class="difflineplus">+                        label=&quot;&amp;event.menu.item.new.event.label;&quot;</span>
<a href="#l4.786"></a><span id="l4.786" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.item.new.event.accesskey;&quot;</span>
<a href="#l4.787"></a><span id="l4.787" class="difflineplus">+                        key=&quot;new-event-key&quot;</span>
<a href="#l4.788"></a><span id="l4.788" class="difflineplus">+                        command=&quot;cmd_item_new_event&quot;</span>
<a href="#l4.789"></a><span id="l4.789" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.790"></a><span id="l4.790" class="difflineplus">+              &lt;menuitem id=&quot;item-new-task-menuitem&quot;</span>
<a href="#l4.791"></a><span id="l4.791" class="difflineplus">+                        label=&quot;&amp;event.menu.item.new.task.label;&quot;</span>
<a href="#l4.792"></a><span id="l4.792" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.item.new.task.accesskey;&quot;</span>
<a href="#l4.793"></a><span id="l4.793" class="difflineplus">+                        key=&quot;new-task-key&quot;</span>
<a href="#l4.794"></a><span id="l4.794" class="difflineplus">+                        command=&quot;cmd_item_new_task&quot;</span>
<a href="#l4.795"></a><span id="l4.795" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.796"></a><span id="l4.796" class="difflineplus">+              &lt;menuseparator id=&quot;item-new-menuseparator1&quot;/&gt;</span>
<a href="#l4.797"></a><span id="l4.797" class="difflineplus">+              &lt;menuitem id=&quot;item-new-address-menuitem&quot;</span>
<a href="#l4.798"></a><span id="l4.798" class="difflineplus">+                        label=&quot;&amp;event.menu.item.new.contact.label;&quot;</span>
<a href="#l4.799"></a><span id="l4.799" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.item.new.contact.accesskey;&quot;</span>
<a href="#l4.800"></a><span id="l4.800" class="difflineplus">+                        command=&quot;cmd_item_new_card&quot;</span>
<a href="#l4.801"></a><span id="l4.801" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.802"></a><span id="l4.802" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.803"></a><span id="l4.803" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.804"></a><span id="l4.804" class="difflineplus">+          &lt;menuseparator id=&quot;item-menuseparator1&quot;/&gt;</span>
<a href="#l4.805"></a><span id="l4.805" class="difflineplus">+          &lt;menuitem id=&quot;item-save-menuitem&quot;</span>
<a href="#l4.806"></a><span id="l4.806" class="difflineplus">+                    label=&quot;&amp;event.menu.item.save.label;&quot;</span>
<a href="#l4.807"></a><span id="l4.807" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.item.save.accesskey;&quot;</span>
<a href="#l4.808"></a><span id="l4.808" class="difflineplus">+                    key=&quot;save-key&quot;</span>
<a href="#l4.809"></a><span id="l4.809" class="difflineplus">+                    command=&quot;cmd_save&quot;/&gt;</span>
<a href="#l4.810"></a><span id="l4.810" class="difflineplus">+          &lt;menuitem id=&quot;item-saveandclose-menuitem&quot;</span>
<a href="#l4.811"></a><span id="l4.811" class="difflineplus">+                    label=&quot;&amp;event.menu.item.saveandclose.label;&quot;</span>
<a href="#l4.812"></a><span id="l4.812" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.item.saveandclose.accesskey;&quot;</span>
<a href="#l4.813"></a><span id="l4.813" class="difflineplus">+                    key=&quot;saveandclose-key&quot;</span>
<a href="#l4.814"></a><span id="l4.814" class="difflineplus">+                    command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.815"></a><span id="l4.815" class="difflineplus">+          &lt;menuitem id=&quot;item-delete-menuitem&quot;</span>
<a href="#l4.816"></a><span id="l4.816" class="difflineplus">+                    label=&quot;&amp;event.menu.item.delete.label;&quot;</span>
<a href="#l4.817"></a><span id="l4.817" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.item.delete.accesskey;&quot;</span>
<a href="#l4.818"></a><span id="l4.818" class="difflineplus">+                    command=&quot;cmd_item_delete&quot;</span>
<a href="#l4.819"></a><span id="l4.819" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.820"></a><span id="l4.820" class="difflineplus">+          &lt;menuitem id=&quot;item-pagesetup-menuitem&quot;</span>
<a href="#l4.821"></a><span id="l4.821" class="difflineplus">+                    label=&quot;&amp;event.menu.item.page.setup.label;&quot;</span>
<a href="#l4.822"></a><span id="l4.822" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.item.page.setup.accesskey;&quot;</span>
<a href="#l4.823"></a><span id="l4.823" class="difflineplus">+                    command=&quot;cmd_printSetup&quot;</span>
<a href="#l4.824"></a><span id="l4.824" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.825"></a><span id="l4.825" class="difflineplus">+          &lt;menuitem id=&quot;item-print-menuitem&quot;</span>
<a href="#l4.826"></a><span id="l4.826" class="difflineplus">+                    label=&quot;&amp;event.menu.item.print.label;&quot;</span>
<a href="#l4.827"></a><span id="l4.827" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.item.print.accesskey;&quot;</span>
<a href="#l4.828"></a><span id="l4.828" class="difflineplus">+                    key=&quot;print-key&quot;</span>
<a href="#l4.829"></a><span id="l4.829" class="difflineplus">+                    command=&quot;cmd_print&quot;</span>
<a href="#l4.830"></a><span id="l4.830" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.831"></a><span id="l4.831" class="difflineplus">+          &lt;menuseparator id=&quot;item-menuseparator1&quot;/&gt;</span>
<a href="#l4.832"></a><span id="l4.832" class="difflineplus">+          &lt;menuitem id=&quot;item-close-menuitem&quot;</span>
<a href="#l4.833"></a><span id="l4.833" class="difflineplus">+                    label=&quot;&amp;event.menu.item.close.label;&quot;</span>
<a href="#l4.834"></a><span id="l4.834" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.item.close.accesskey;&quot;</span>
<a href="#l4.835"></a><span id="l4.835" class="difflineplus">+                    key=&quot;close-key&quot;</span>
<a href="#l4.836"></a><span id="l4.836" class="difflineplus">+                    command=&quot;cmd_item_close&quot;</span>
<a href="#l4.837"></a><span id="l4.837" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.838"></a><span id="l4.838" class="difflineplus">+        &lt;/menupopup&gt;</span>
<a href="#l4.839"></a><span id="l4.839" class="difflineplus">+      &lt;/menu&gt;</span>
<a href="#l4.840"></a><span id="l4.840"> </span>
<a href="#l4.841"></a><span id="l4.841" class="difflineminus">-        &lt;!-- Toolbar --&gt;</span>
<a href="#l4.842"></a><span id="l4.842" class="difflineminus">-        &lt;toolbarpalette id=&quot;event-toolbarpalette&quot;&gt;</span>
<a href="#l4.843"></a><span id="l4.843" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-save&quot;</span>
<a href="#l4.844"></a><span id="l4.844" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.845"></a><span id="l4.845" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l4.846"></a><span id="l4.846" class="difflineminus">-                           label=&quot;&amp;event.toolbar.save.label;&quot;</span>
<a href="#l4.847"></a><span id="l4.847" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.save.tooltip;&quot;</span>
<a href="#l4.848"></a><span id="l4.848" class="difflineminus">-                           command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l4.849"></a><span id="l4.849" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-attendees&quot;</span>
<a href="#l4.850"></a><span id="l4.850" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.851"></a><span id="l4.851" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1 event-only&quot;</span>
<a href="#l4.852"></a><span id="l4.852" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.853"></a><span id="l4.853" class="difflineminus">-                           label=&quot;&amp;event.toolbar.attendees.label;&quot;</span>
<a href="#l4.854"></a><span id="l4.854" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.attendees.tooltip;&quot;</span>
<a href="#l4.855"></a><span id="l4.855" class="difflineminus">-                           command=&quot;cmd_attendees&quot;/&gt;</span>
<a href="#l4.856"></a><span id="l4.856" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-privacy&quot;</span>
<a href="#l4.857"></a><span id="l4.857" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.858"></a><span id="l4.858" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l4.859"></a><span id="l4.859" class="difflineminus">-                           type=&quot;menu-button&quot;</span>
<a href="#l4.860"></a><span id="l4.860" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.861"></a><span id="l4.861" class="difflineminus">-                           label=&quot;&amp;event.toolbar.privacy.label;&quot;</span>
<a href="#l4.862"></a><span id="l4.862" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.privacy.tooltip;&quot;</span>
<a href="#l4.863"></a><span id="l4.863" class="difflineminus">-                           oncommand=&quot;rotatePrivacy()&quot;&gt;</span>
<a href="#l4.864"></a><span id="l4.864" class="difflineminus">-                &lt;menupopup id=&quot;event-privacy-menupopup&quot;&gt;</span>
<a href="#l4.865"></a><span id="l4.865" class="difflineminus">-                    &lt;menuitem id=&quot;event-privacy-public-menuitem&quot;</span>
<a href="#l4.866"></a><span id="l4.866" class="difflineminus">-                              name=&quot;event-privacy-group&quot;</span>
<a href="#l4.867"></a><span id="l4.867" class="difflineminus">-                              label=&quot;&amp;event.menu.options.privacy.public.label;&quot;</span>
<a href="#l4.868"></a><span id="l4.868" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.869"></a><span id="l4.869" class="difflineminus">-                              privacy=&quot;PUBLIC&quot;</span>
<a href="#l4.870"></a><span id="l4.870" class="difflineminus">-                              oncommand=&quot;editPrivacy(this, event)&quot;/&gt;</span>
<a href="#l4.871"></a><span id="l4.871" class="difflineminus">-                    &lt;menuitem id=&quot;event-privacy-confidential-menuitem&quot;</span>
<a href="#l4.872"></a><span id="l4.872" class="difflineminus">-                              name=&quot;event-privacy-group&quot;</span>
<a href="#l4.873"></a><span id="l4.873" class="difflineminus">-                              label=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;</span>
<a href="#l4.874"></a><span id="l4.874" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.875"></a><span id="l4.875" class="difflineminus">-                              privacy=&quot;CONFIDENTIAL&quot;</span>
<a href="#l4.876"></a><span id="l4.876" class="difflineminus">-                              oncommand=&quot;editPrivacy(this, event)&quot;/&gt;</span>
<a href="#l4.877"></a><span id="l4.877" class="difflineminus">-                    &lt;menuitem id=&quot;event-privacy-private-menuitem&quot;</span>
<a href="#l4.878"></a><span id="l4.878" class="difflineminus">-                              name=&quot;event-privacy-group&quot;</span>
<a href="#l4.879"></a><span id="l4.879" class="difflineminus">-                              label=&quot;&amp;event.menu.options.privacy.private.label;&quot;</span>
<a href="#l4.880"></a><span id="l4.880" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.881"></a><span id="l4.881" class="difflineminus">-                              privacy=&quot;PRIVATE&quot;</span>
<a href="#l4.882"></a><span id="l4.882" class="difflineminus">-                              oncommand=&quot;editPrivacy(this, event)&quot;/&gt;</span>
<a href="#l4.883"></a><span id="l4.883" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.884"></a><span id="l4.884" class="difflineminus">-            &lt;/toolbarbutton&gt;</span>
<a href="#l4.885"></a><span id="l4.885" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-url&quot;</span>
<a href="#l4.886"></a><span id="l4.886" class="difflineminus">-                           type=&quot;menu-button&quot;</span>
<a href="#l4.887"></a><span id="l4.887" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.888"></a><span id="l4.888" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l4.889"></a><span id="l4.889" class="difflineminus">-                           label=&quot;&amp;event.attachments.menubutton.label;&quot;</span>
<a href="#l4.890"></a><span id="l4.890" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.attachments.tooltip;&quot;</span>
<a href="#l4.891"></a><span id="l4.891" class="difflineminus">-                           command=&quot;cmd_attach_url&quot;</span>
<a href="#l4.892"></a><span id="l4.892" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.893"></a><span id="l4.893" class="difflineminus">-              &lt;menupopup id=&quot;button-attach-menupopup&quot;&gt;</span>
<a href="#l4.894"></a><span id="l4.894" class="difflineminus">-                &lt;menuitem id=&quot;button-attach-url&quot;</span>
<a href="#l4.895"></a><span id="l4.895" class="difflineminus">-                          label=&quot;&amp;event.attachments.url.label;&quot;</span>
<a href="#l4.896"></a><span id="l4.896" class="difflineminus">-                          command=&quot;cmd_attach_url&quot;/&gt;</span>
<a href="#l4.897"></a><span id="l4.897" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l4.898"></a><span id="l4.898" class="difflineminus">-            &lt;/toolbarbutton&gt;</span>
<a href="#l4.899"></a><span id="l4.899" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-delete&quot;</span>
<a href="#l4.900"></a><span id="l4.900" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.901"></a><span id="l4.901" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l4.902"></a><span id="l4.902" class="difflineminus">-                           label=&quot;&amp;event.toolbar.delete.label;&quot;</span>
<a href="#l4.903"></a><span id="l4.903" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.delete.tooltip;&quot;</span>
<a href="#l4.904"></a><span id="l4.904" class="difflineminus">-                           command=&quot;cmd_item_delete&quot;</span>
<a href="#l4.905"></a><span id="l4.905" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.906"></a><span id="l4.906" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-priority&quot;</span>
<a href="#l4.907"></a><span id="l4.907" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.908"></a><span id="l4.908" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l4.909"></a><span id="l4.909" class="difflineminus">-                           type=&quot;menu-button&quot;</span>
<a href="#l4.910"></a><span id="l4.910" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.911"></a><span id="l4.911" class="difflineminus">-                           label=&quot;&amp;event.menu.options.priority2.label;&quot;</span>
<a href="#l4.912"></a><span id="l4.912" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.priority.tooltip;&quot;</span>
<a href="#l4.913"></a><span id="l4.913" class="difflineminus">-                           oncommand=&quot;rotatePriority()&quot;&gt;</span>
<a href="#l4.914"></a><span id="l4.914" class="difflineminus">-                &lt;menupopup id=&quot;event-priority-menupopup&quot;&gt;</span>
<a href="#l4.915"></a><span id="l4.915" class="difflineminus">-                    &lt;menuitem id=&quot;event-priority-none-menuitem&quot;</span>
<a href="#l4.916"></a><span id="l4.916" class="difflineminus">-                              name=&quot;event-priority-group&quot;</span>
<a href="#l4.917"></a><span id="l4.917" class="difflineminus">-                              label=&quot;&amp;event.menu.options.priority.notspecified.label;&quot;</span>
<a href="#l4.918"></a><span id="l4.918" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.919"></a><span id="l4.919" class="difflineminus">-                              command=&quot;cmd_priority_none&quot;/&gt;</span>
<a href="#l4.920"></a><span id="l4.920" class="difflineminus">-                    &lt;menuitem id=&quot;event-priority-low-menuitem&quot;</span>
<a href="#l4.921"></a><span id="l4.921" class="difflineminus">-                              name=&quot;event-priority-group&quot;</span>
<a href="#l4.922"></a><span id="l4.922" class="difflineminus">-                              label=&quot;&amp;event.menu.options.priority.low.label;&quot;</span>
<a href="#l4.923"></a><span id="l4.923" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.924"></a><span id="l4.924" class="difflineminus">-                              command=&quot;cmd_priority_low&quot;/&gt;</span>
<a href="#l4.925"></a><span id="l4.925" class="difflineminus">-                    &lt;menuitem id=&quot;event-priority-normal-menuitem&quot;</span>
<a href="#l4.926"></a><span id="l4.926" class="difflineminus">-                              name=&quot;event-priority-group&quot;</span>
<a href="#l4.927"></a><span id="l4.927" class="difflineminus">-                              label=&quot;&amp;event.menu.options.priority.normal.label;&quot;</span>
<a href="#l4.928"></a><span id="l4.928" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.929"></a><span id="l4.929" class="difflineminus">-                              command=&quot;cmd_priority_normal&quot;/&gt;</span>
<a href="#l4.930"></a><span id="l4.930" class="difflineminus">-                    &lt;menuitem id=&quot;event-priority-high-menuitem&quot;</span>
<a href="#l4.931"></a><span id="l4.931" class="difflineminus">-                              name=&quot;event-priority-group&quot;</span>
<a href="#l4.932"></a><span id="l4.932" class="difflineminus">-                              label=&quot;&amp;event.menu.options.priority.high.label;&quot;</span>
<a href="#l4.933"></a><span id="l4.933" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.934"></a><span id="l4.934" class="difflineminus">-                              command=&quot;cmd_priority_high&quot;/&gt;</span>
<a href="#l4.935"></a><span id="l4.935" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.936"></a><span id="l4.936" class="difflineminus">-            &lt;/toolbarbutton&gt;</span>
<a href="#l4.937"></a><span id="l4.937" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-status&quot;</span>
<a href="#l4.938"></a><span id="l4.938" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.939"></a><span id="l4.939" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1 event-only&quot;</span>
<a href="#l4.940"></a><span id="l4.940" class="difflineminus">-                           type=&quot;menu-button&quot;</span>
<a href="#l4.941"></a><span id="l4.941" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.942"></a><span id="l4.942" class="difflineminus">-                           label=&quot;&amp;newevent.status.label;&quot;</span>
<a href="#l4.943"></a><span id="l4.943" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.status.tooltip;&quot;</span>
<a href="#l4.944"></a><span id="l4.944" class="difflineminus">-                           oncommand=&quot;rotateStatus()&quot;&gt;</span>
<a href="#l4.945"></a><span id="l4.945" class="difflineminus">-                &lt;menupopup id=&quot;event-status-menupopup&quot;&gt;</span>
<a href="#l4.946"></a><span id="l4.946" class="difflineminus">-                    &lt;menuitem id=&quot;event-status-none-menuitem&quot;</span>
<a href="#l4.947"></a><span id="l4.947" class="difflineminus">-                              name=&quot;event-status-group&quot;</span>
<a href="#l4.948"></a><span id="l4.948" class="difflineminus">-                              label=&quot;&amp;newevent.eventStatus.none.label;&quot;</span>
<a href="#l4.949"></a><span id="l4.949" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.950"></a><span id="l4.950" class="difflineminus">-                              command=&quot;cmd_status_none&quot;/&gt;</span>
<a href="#l4.951"></a><span id="l4.951" class="difflineminus">-                    &lt;menuitem id=&quot;event-status-tentative-menuitem&quot;</span>
<a href="#l4.952"></a><span id="l4.952" class="difflineminus">-                              name=&quot;event-status-group&quot;</span>
<a href="#l4.953"></a><span id="l4.953" class="difflineminus">-                              label=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l4.954"></a><span id="l4.954" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.955"></a><span id="l4.955" class="difflineminus">-                              command=&quot;cmd_status_tentative&quot;/&gt;</span>
<a href="#l4.956"></a><span id="l4.956" class="difflineminus">-                    &lt;menuitem id=&quot;event-status-confirmed-menuitem&quot;</span>
<a href="#l4.957"></a><span id="l4.957" class="difflineminus">-                              name=&quot;event-status-group&quot;</span>
<a href="#l4.958"></a><span id="l4.958" class="difflineminus">-                              label=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l4.959"></a><span id="l4.959" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.960"></a><span id="l4.960" class="difflineminus">-                              command=&quot;cmd_status_confirmed&quot;/&gt;</span>
<a href="#l4.961"></a><span id="l4.961" class="difflineminus">-                    &lt;menuitem id=&quot;event-status-cancelled-menuitem&quot;</span>
<a href="#l4.962"></a><span id="l4.962" class="difflineminus">-                              name=&quot;event-status-group&quot;</span>
<a href="#l4.963"></a><span id="l4.963" class="difflineminus">-                              label=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l4.964"></a><span id="l4.964" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.965"></a><span id="l4.965" class="difflineminus">-                              command=&quot;cmd_status_cancelled&quot;/&gt;</span>
<a href="#l4.966"></a><span id="l4.966" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.967"></a><span id="l4.967" class="difflineminus">-            &lt;/toolbarbutton&gt;</span>
<a href="#l4.968"></a><span id="l4.968" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-freebusy&quot;</span>
<a href="#l4.969"></a><span id="l4.969" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.970"></a><span id="l4.970" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1 event-only&quot;</span>
<a href="#l4.971"></a><span id="l4.971" class="difflineminus">-                           type=&quot;menu-button&quot;</span>
<a href="#l4.972"></a><span id="l4.972" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.973"></a><span id="l4.973" class="difflineminus">-                           label=&quot;&amp;event.menu.options.show.time.label;&quot;</span>
<a href="#l4.974"></a><span id="l4.974" class="difflineminus">-                           tooltiptext=&quot;&amp;event.toolbar.freebusy.tooltip;&quot;</span>
<a href="#l4.975"></a><span id="l4.975" class="difflineminus">-                           oncommand=&quot;rotateShowTimeAs()&quot;&gt;</span>
<a href="#l4.976"></a><span id="l4.976" class="difflineminus">-                &lt;menupopup id=&quot;event-freebusy-menupopup&quot;&gt;</span>
<a href="#l4.977"></a><span id="l4.977" class="difflineminus">-                    &lt;menuitem id=&quot;event-freebusy-busy-menuitem&quot;</span>
<a href="#l4.978"></a><span id="l4.978" class="difflineminus">-                              name=&quot;event-freebusy-group&quot;</span>
<a href="#l4.979"></a><span id="l4.979" class="difflineminus">-                              label=&quot;&amp;event.menu.options.show.time.busy.label;&quot;</span>
<a href="#l4.980"></a><span id="l4.980" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.981"></a><span id="l4.981" class="difflineminus">-                              command=&quot;cmd_showtimeas_busy&quot;/&gt;</span>
<a href="#l4.982"></a><span id="l4.982" class="difflineminus">-                    &lt;menuitem id=&quot;event-freebusy-free-menuitem&quot;</span>
<a href="#l4.983"></a><span id="l4.983" class="difflineminus">-                              name=&quot;event-freebusy-group&quot;</span>
<a href="#l4.984"></a><span id="l4.984" class="difflineminus">-                              label=&quot;&amp;event.menu.options.show.time.free.label;&quot;</span>
<a href="#l4.985"></a><span id="l4.985" class="difflineminus">-                              type=&quot;radio&quot;</span>
<a href="#l4.986"></a><span id="l4.986" class="difflineminus">-                              command=&quot;cmd_showtimeas_free&quot;/&gt;</span>
<a href="#l4.987"></a><span id="l4.987" class="difflineminus">-                &lt;/menupopup&gt;</span>
<a href="#l4.988"></a><span id="l4.988" class="difflineminus">-            &lt;/toolbarbutton&gt;</span>
<a href="#l4.989"></a><span id="l4.989" class="difflineminus">-            &lt;toolbarbutton id=&quot;button-timezones&quot;</span>
<a href="#l4.990"></a><span id="l4.990" class="difflineminus">-                           mode=&quot;dialog&quot;</span>
<a href="#l4.991"></a><span id="l4.991" class="difflineminus">-                           type=&quot;checkbox&quot;</span>
<a href="#l4.992"></a><span id="l4.992" class="difflineminus">-                           class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l4.993"></a><span id="l4.993" class="difflineminus">-                           label=&quot;&amp;event.menu.options.timezone2.label;&quot;</span>
<a href="#l4.994"></a><span id="l4.994" class="difflineminus">-                           tooltiptext=&quot;&amp;event.menu.options.timezone2.label;&quot;</span>
<a href="#l4.995"></a><span id="l4.995" class="difflineminus">-                           command=&quot;cmd_timezone&quot;/&gt;</span>
<a href="#l4.996"></a><span id="l4.996" class="difflineminus">-        &lt;/toolbarpalette&gt;</span>
<a href="#l4.997"></a><span id="l4.997" class="difflineplus">+      &lt;!-- Edit menu --&gt;</span>
<a href="#l4.998"></a><span id="l4.998" class="difflineplus">+      &lt;menu id=&quot;edit-menu&quot;</span>
<a href="#l4.999"></a><span id="l4.999" class="difflineplus">+            label=&quot;&amp;event.menu.edit.label;&quot;</span>
<a href="#l4.1000"></a><span id="l4.1000" class="difflineplus">+            accesskey=&quot;&amp;event.menu.edit.accesskey;&quot;</span>
<a href="#l4.1001"></a><span id="l4.1001" class="difflineplus">+            collapse-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.1002"></a><span id="l4.1002" class="difflineplus">+        &lt;menupopup id=&quot;edit-menupopup&quot;&gt;</span>
<a href="#l4.1003"></a><span id="l4.1003" class="difflineplus">+          &lt;menuitem id=&quot;edit-undo-menuitem&quot;</span>
<a href="#l4.1004"></a><span id="l4.1004" class="difflineplus">+                    label=&quot;&amp;event.menu.edit.undo.label;&quot;</span>
<a href="#l4.1005"></a><span id="l4.1005" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.edit.undo.accesskey;&quot;</span>
<a href="#l4.1006"></a><span id="l4.1006" class="difflineplus">+                    key=&quot;undo-key&quot;</span>
<a href="#l4.1007"></a><span id="l4.1007" class="difflineplus">+                    command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l4.1008"></a><span id="l4.1008" class="difflineplus">+          &lt;menuitem id=&quot;edit-redo-menuitem&quot;</span>
<a href="#l4.1009"></a><span id="l4.1009" class="difflineplus">+                    label=&quot;&amp;event.menu.edit.redo.label;&quot;</span>
<a href="#l4.1010"></a><span id="l4.1010" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.edit.redo.accesskey;&quot;</span>
<a href="#l4.1011"></a><span id="l4.1011" class="difflineplus">+                    key=&quot;redo-key&quot;</span>
<a href="#l4.1012"></a><span id="l4.1012" class="difflineplus">+                    command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l4.1013"></a><span id="l4.1013" class="difflineplus">+          &lt;menuseparator id=&quot;edit-menuseparator1&quot;/&gt;</span>
<a href="#l4.1014"></a><span id="l4.1014" class="difflineplus">+          &lt;menuitem id=&quot;edit-cut-menuitem&quot;</span>
<a href="#l4.1015"></a><span id="l4.1015" class="difflineplus">+                    label=&quot;&amp;event.menu.edit.cut.label;&quot;</span>
<a href="#l4.1016"></a><span id="l4.1016" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.edit.cut.accesskey;&quot;</span>
<a href="#l4.1017"></a><span id="l4.1017" class="difflineplus">+                    key=&quot;cut-key&quot;</span>
<a href="#l4.1018"></a><span id="l4.1018" class="difflineplus">+                    command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l4.1019"></a><span id="l4.1019" class="difflineplus">+          &lt;menuitem id=&quot;edit-copy-menuitem&quot;</span>
<a href="#l4.1020"></a><span id="l4.1020" class="difflineplus">+                    label=&quot;&amp;event.menu.edit.copy.label;&quot;</span>
<a href="#l4.1021"></a><span id="l4.1021" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.edit.copy.accesskey;&quot;</span>
<a href="#l4.1022"></a><span id="l4.1022" class="difflineplus">+                    key=&quot;copy-key&quot;</span>
<a href="#l4.1023"></a><span id="l4.1023" class="difflineplus">+                    command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l4.1024"></a><span id="l4.1024" class="difflineplus">+          &lt;menuitem id=&quot;edit-paste-menuitem&quot;</span>
<a href="#l4.1025"></a><span id="l4.1025" class="difflineplus">+                    label=&quot;&amp;event.menu.edit.paste.label;&quot;</span>
<a href="#l4.1026"></a><span id="l4.1026" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.edit.paste.accesskey;&quot;</span>
<a href="#l4.1027"></a><span id="l4.1027" class="difflineplus">+                    key=&quot;paste-key&quot;</span>
<a href="#l4.1028"></a><span id="l4.1028" class="difflineplus">+                    command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l4.1029"></a><span id="l4.1029" class="difflineplus">+          &lt;menuseparator id=&quot;edit-menuseparator2&quot;/&gt;</span>
<a href="#l4.1030"></a><span id="l4.1030" class="difflineplus">+          &lt;menuitem id=&quot;edit-selectall-menuitem&quot;</span>
<a href="#l4.1031"></a><span id="l4.1031" class="difflineplus">+                    label=&quot;&amp;event.menu.edit.select.all.label;&quot;</span>
<a href="#l4.1032"></a><span id="l4.1032" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.edit.select.all.accesskey;&quot;</span>
<a href="#l4.1033"></a><span id="l4.1033" class="difflineplus">+                    key=&quot;select-all-key&quot;</span>
<a href="#l4.1034"></a><span id="l4.1034" class="difflineplus">+                    command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l4.1035"></a><span id="l4.1035" class="difflineplus">+        &lt;/menupopup&gt;</span>
<a href="#l4.1036"></a><span id="l4.1036" class="difflineplus">+      &lt;/menu&gt;</span>
<a href="#l4.1037"></a><span id="l4.1037"> </span>
<a href="#l4.1038"></a><span id="l4.1038" class="difflineminus">-        &lt;toolbar id=&quot;event-toolbar&quot;</span>
<a href="#l4.1039"></a><span id="l4.1039" class="difflineminus">-                 class=&quot;chromeclass-toolbar&quot;</span>
<a href="#l4.1040"></a><span id="l4.1040" class="difflineminus">-                 customizable=&quot;true&quot;</span>
<a href="#l4.1041"></a><span id="l4.1041" class="difflineminus">-                 labelalign=&quot;end&quot;</span>
<a href="#l4.1042"></a><span id="l4.1042" class="difflineminus">-                 defaultlabelalign=&quot;end&quot;</span>
<a href="#l4.1043"></a><span id="l4.1043" class="difflineminus">-                 context=&quot;event-dialog-toolbar-context-menu&quot;</span>
<a href="#l4.1044"></a><span id="l4.1044" class="difflineminus">-                 defaultset=&quot;button-save,button-attendees,button-privacy,button-url,button-delete&quot;/&gt;</span>
<a href="#l4.1045"></a><span id="l4.1045" class="difflineminus">-        &lt;toolbarset id=&quot;custom-toolbars&quot;/&gt;</span>
<a href="#l4.1046"></a><span id="l4.1046" class="difflineminus">-</span>
<a href="#l4.1047"></a><span id="l4.1047" class="difflineminus">-    &lt;/toolbox&gt;</span>
<a href="#l4.1048"></a><span id="l4.1048" class="difflineminus">-    &lt;notificationbox id=&quot;event-dialog-notifications&quot; notificationside=&quot;top&quot;/&gt;</span>
<a href="#l4.1049"></a><span id="l4.1049" class="difflineminus">-    &lt;grid id=&quot;event-grid&quot;</span>
<a href="#l4.1050"></a><span id="l4.1050" class="difflineminus">-          flex=&quot;1&quot;</span>
<a href="#l4.1051"></a><span id="l4.1051" class="difflineminus">-          style=&quot;padding-top: 8px; padding-bottom: 10px; padding-inline-start: 8px; padding-inline-end: 10px;&quot;&gt;</span>
<a href="#l4.1052"></a><span id="l4.1052" class="difflineminus">-        &lt;columns id=&quot;event-grid-columns&quot;&gt;</span>
<a href="#l4.1053"></a><span id="l4.1053" class="difflineminus">-            &lt;column id=&quot;event-description-column&quot;/&gt;</span>
<a href="#l4.1054"></a><span id="l4.1054" class="difflineminus">-            &lt;column id=&quot;event-controls-column&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l4.1055"></a><span id="l4.1055" class="difflineminus">-        &lt;/columns&gt;</span>
<a href="#l4.1056"></a><span id="l4.1056" class="difflineminus">-</span>
<a href="#l4.1057"></a><span id="l4.1057" class="difflineminus">-        &lt;rows id=&quot;event-grid-rows&quot;&gt;</span>
<a href="#l4.1058"></a><span id="l4.1058" class="difflineminus">-            &lt;!-- Title --&gt;</span>
<a href="#l4.1059"></a><span id="l4.1059" class="difflineminus">-            &lt;row id=&quot;event-grid-title-row&quot;</span>
<a href="#l4.1060"></a><span id="l4.1060" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1061"></a><span id="l4.1061" class="difflineminus">-                &lt;label value=&quot;&amp;event.title.textbox.label;&quot;</span>
<a href="#l4.1062"></a><span id="l4.1062" class="difflineminus">-                       accesskey=&quot;&amp;event.title.textbox.accesskey;&quot;</span>
<a href="#l4.1063"></a><span id="l4.1063" class="difflineminus">-                       control=&quot;item-title&quot;</span>
<a href="#l4.1064"></a><span id="l4.1064" class="difflineminus">-                       disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1065"></a><span id="l4.1065" class="difflineminus">-                &lt;textbox id=&quot;item-title&quot;</span>
<a href="#l4.1066"></a><span id="l4.1066" class="difflineminus">-                         disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1067"></a><span id="l4.1067" class="difflineminus">-                         flex=&quot;1&quot;</span>
<a href="#l4.1068"></a><span id="l4.1068" class="difflineminus">-                         oninput=&quot;updateTitle()&quot;/&gt;</span>
<a href="#l4.1069"></a><span id="l4.1069" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1070"></a><span id="l4.1070" class="difflineminus">-</span>
<a href="#l4.1071"></a><span id="l4.1071" class="difflineminus">-            &lt;!-- Location --&gt;</span>
<a href="#l4.1072"></a><span id="l4.1072" class="difflineminus">-            &lt;row id=&quot;event-grid-location-row&quot;</span>
<a href="#l4.1073"></a><span id="l4.1073" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1074"></a><span id="l4.1074" class="difflineminus">-                &lt;label value=&quot;&amp;event.location.label;&quot;</span>
<a href="#l4.1075"></a><span id="l4.1075" class="difflineminus">-                       accesskey=&quot;&amp;event.location.accesskey;&quot;</span>
<a href="#l4.1076"></a><span id="l4.1076" class="difflineminus">-                       control=&quot;item-location&quot;</span>
<a href="#l4.1077"></a><span id="l4.1077" class="difflineminus">-                       disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1078"></a><span id="l4.1078" class="difflineminus">-                &lt;textbox id=&quot;item-location&quot;</span>
<a href="#l4.1079"></a><span id="l4.1079" class="difflineminus">-                         disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1080"></a><span id="l4.1080" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1081"></a><span id="l4.1081" class="difflineminus">-</span>
<a href="#l4.1082"></a><span id="l4.1082" class="difflineminus">-            &lt;!-- Category &amp; Calendar --&gt;</span>
<a href="#l4.1083"></a><span id="l4.1083" class="difflineminus">-            &lt;row id=&quot;event-grid-category-color-row&quot;</span>
<a href="#l4.1084"></a><span id="l4.1084" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1085"></a><span id="l4.1085" class="difflineminus">-                &lt;hbox id=&quot;event-grid-category-labels-box&quot;&gt;</span>
<a href="#l4.1086"></a><span id="l4.1086" class="difflineminus">-                    &lt;label value=&quot;&amp;event.categories.label;&quot;</span>
<a href="#l4.1087"></a><span id="l4.1087" class="difflineminus">-                           accesskey=&quot;&amp;event.categories.accesskey;&quot;</span>
<a href="#l4.1088"></a><span id="l4.1088" class="difflineminus">-                           control=&quot;item-categories&quot;</span>
<a href="#l4.1089"></a><span id="l4.1089" class="difflineminus">-                           id=&quot;item-categories-label&quot;</span>
<a href="#l4.1090"></a><span id="l4.1090" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1091"></a><span id="l4.1091" class="difflineminus">-                    &lt;label value=&quot;&amp;event.calendar.label;&quot;</span>
<a href="#l4.1092"></a><span id="l4.1092" class="difflineminus">-                           accesskey=&quot;&amp;event.calendar.accesskey;&quot;</span>
<a href="#l4.1093"></a><span id="l4.1093" class="difflineminus">-                           id=&quot;item-calendar-aux-label&quot;</span>
<a href="#l4.1094"></a><span id="l4.1094" class="difflineminus">-                           control=&quot;item-calendar&quot;</span>
<a href="#l4.1095"></a><span id="l4.1095" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1096"></a><span id="l4.1096" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1097"></a><span id="l4.1097" class="difflineminus">-                &lt;hbox id=&quot;event-grid-category-box&quot; align=&quot;center&quot;&gt;</span>
<a href="#l4.1098"></a><span id="l4.1098" class="difflineminus">-                    &lt;menulist id=&quot;item-categories&quot;</span>
<a href="#l4.1099"></a><span id="l4.1099" class="difflineminus">-                              type=&quot;panel-menulist&quot;</span>
<a href="#l4.1100"></a><span id="l4.1100" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1101"></a><span id="l4.1101" class="difflineminus">-                              flex=&quot;1&quot;&gt;</span>
<a href="#l4.1102"></a><span id="l4.1102" class="difflineminus">-                        &lt;panel id=&quot;item-categories-panel&quot;</span>
<a href="#l4.1103"></a><span id="l4.1103" class="difflineminus">-                               type=&quot;category-panel&quot;</span>
<a href="#l4.1104"></a><span id="l4.1104" class="difflineminus">-                               onpopuphiding=&quot;updateCategoryMenulist()&quot;/&gt;</span>
<a href="#l4.1105"></a><span id="l4.1105" class="difflineminus">-                    &lt;/menulist&gt;</span>
<a href="#l4.1106"></a><span id="l4.1106" class="difflineminus">-                    &lt;label value=&quot;&amp;event.calendar.label;&quot;</span>
<a href="#l4.1107"></a><span id="l4.1107" class="difflineminus">-                           accesskey=&quot;&amp;event.calendar.accesskey;&quot;</span>
<a href="#l4.1108"></a><span id="l4.1108" class="difflineminus">-                           control=&quot;item-calendar&quot;</span>
<a href="#l4.1109"></a><span id="l4.1109" class="difflineminus">-                           id=&quot;item-calendar-label&quot;</span>
<a href="#l4.1110"></a><span id="l4.1110" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1111"></a><span id="l4.1111" class="difflineminus">-                    &lt;menulist id=&quot;item-calendar&quot;</span>
<a href="#l4.1112"></a><span id="l4.1112" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1113"></a><span id="l4.1113" class="difflineminus">-                              flex=&quot;1&quot;</span>
<a href="#l4.1114"></a><span id="l4.1114" class="difflineminus">-                              oncommand=&quot;updateCalendar();&quot;/&gt;</span>
<a href="#l4.1115"></a><span id="l4.1115" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1116"></a><span id="l4.1116" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1117"></a><span id="l4.1117" class="difflineminus">-</span>
<a href="#l4.1118"></a><span id="l4.1118" class="difflineminus">-            &lt;separator class=&quot;groove&quot; id=&quot;event-grid-basic-separator&quot;/&gt;</span>
<a href="#l4.1119"></a><span id="l4.1119" class="difflineminus">-</span>
<a href="#l4.1120"></a><span id="l4.1120" class="difflineminus">-            &lt;!-- All-Day --&gt;</span>
<a href="#l4.1121"></a><span id="l4.1121" class="difflineminus">-            &lt;row id=&quot;event-grid-allday-row&quot;</span>
<a href="#l4.1122"></a><span id="l4.1122" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1123"></a><span id="l4.1123" class="difflineminus">-                &lt;spacer/&gt;</span>
<a href="#l4.1124"></a><span id="l4.1124" class="difflineminus">-                &lt;checkbox id=&quot;event-all-day&quot;</span>
<a href="#l4.1125"></a><span id="l4.1125" class="difflineminus">-                          class=&quot;event-only&quot;</span>
<a href="#l4.1126"></a><span id="l4.1126" class="difflineminus">-                          disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1127"></a><span id="l4.1127" class="difflineminus">-                          label=&quot;&amp;event.alldayevent.label;&quot;</span>
<a href="#l4.1128"></a><span id="l4.1128" class="difflineminus">-                          accesskey=&quot;&amp;event.alldayevent.accesskey;&quot;</span>
<a href="#l4.1129"></a><span id="l4.1129" class="difflineminus">-                          oncommand=&quot;onUpdateAllDay();&quot;/&gt;</span>
<a href="#l4.1130"></a><span id="l4.1130" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1131"></a><span id="l4.1131" class="difflineplus">+      &lt;!-- View menu --&gt;</span>
<a href="#l4.1132"></a><span id="l4.1132" class="difflineplus">+      &lt;menu id=&quot;view-menu&quot;</span>
<a href="#l4.1133"></a><span id="l4.1133" class="difflineplus">+            label=&quot;&amp;event.menu.view.label;&quot;</span>
<a href="#l4.1134"></a><span id="l4.1134" class="difflineplus">+            accesskey=&quot;&amp;event.menu.view.accesskey;&quot;</span>
<a href="#l4.1135"></a><span id="l4.1135" class="difflineplus">+            collapse-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.1136"></a><span id="l4.1136" class="difflineplus">+        &lt;menupopup id=&quot;view-menupopup&quot;&gt;</span>
<a href="#l4.1137"></a><span id="l4.1137" class="difflineplus">+          &lt;menu id=&quot;view-toolbars-menu&quot;</span>
<a href="#l4.1138"></a><span id="l4.1138" class="difflineplus">+                label=&quot;&amp;event.menu.view.toolbars.label;&quot;</span>
<a href="#l4.1139"></a><span id="l4.1139" class="difflineplus">+                accesskey=&quot;&amp;event.menu.view.toolbars.accesskey;&quot;&gt;</span>
<a href="#l4.1140"></a><span id="l4.1140" class="difflineplus">+            &lt;menupopup id=&quot;view-toolbars-menupopup&quot;&gt;</span>
<a href="#l4.1141"></a><span id="l4.1141" class="difflineplus">+              &lt;menuitem id=&quot;view-toolbars-event-menuitem&quot;</span>
<a href="#l4.1142"></a><span id="l4.1142" class="difflineplus">+                        label=&quot;&amp;event.menu.view.toolbars.event.label;&quot;</span>
<a href="#l4.1143"></a><span id="l4.1143" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.view.toolbars.event.accesskey;&quot;</span>
<a href="#l4.1144"></a><span id="l4.1144" class="difflineplus">+                        type=&quot;checkbox&quot;</span>
<a href="#l4.1145"></a><span id="l4.1145" class="difflineplus">+                        checked=&quot;true&quot;</span>
<a href="#l4.1146"></a><span id="l4.1146" class="difflineplus">+                        command=&quot;cmd_toolbar&quot;/&gt;</span>
<a href="#l4.1147"></a><span id="l4.1147" class="difflineplus">+              &lt;menuseparator id=&quot;view-toolbars-menuseparator1&quot;/&gt;</span>
<a href="#l4.1148"></a><span id="l4.1148" class="difflineplus">+              &lt;menuitem id=&quot;view-toolbars-customize-menuitem&quot;</span>
<a href="#l4.1149"></a><span id="l4.1149" class="difflineplus">+                        label=&quot;&amp;event.menu.view.toolbars.customize.label;&quot;</span>
<a href="#l4.1150"></a><span id="l4.1150" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.view.toolbars.customize.accesskey;&quot;</span>
<a href="#l4.1151"></a><span id="l4.1151" class="difflineplus">+                        command=&quot;cmd_customize&quot;/&gt;</span>
<a href="#l4.1152"></a><span id="l4.1152" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.1153"></a><span id="l4.1153" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.1154"></a><span id="l4.1154" class="difflineplus">+          &lt;menuseparator id=&quot;view-menu-toolbars-separator&quot;/&gt;</span>
<a href="#l4.1155"></a><span id="l4.1155" class="difflineplus">+          &lt;menuitem id=&quot;view-show-link-menuitem&quot;</span>
<a href="#l4.1156"></a><span id="l4.1156" class="difflineplus">+                    label=&quot;&amp;event.menu.view.showlink.label;&quot;</span>
<a href="#l4.1157"></a><span id="l4.1157" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.view.showlink.accesskey;&quot;</span>
<a href="#l4.1158"></a><span id="l4.1158" class="difflineplus">+                    type=&quot;checkbox&quot;</span>
<a href="#l4.1159"></a><span id="l4.1159" class="difflineplus">+                    command=&quot;cmd_toggle_link&quot;</span>
<a href="#l4.1160"></a><span id="l4.1160" class="difflineplus">+                    observes=&quot;cmd_toggle_link&quot;/&gt;</span>
<a href="#l4.1161"></a><span id="l4.1161" class="difflineplus">+        &lt;/menupopup&gt;</span>
<a href="#l4.1162"></a><span id="l4.1162" class="difflineplus">+      &lt;/menu&gt;</span>
<a href="#l4.1163"></a><span id="l4.1163"> </span>
<a href="#l4.1164"></a><span id="l4.1164" class="difflineminus">-            &lt;!-- StartDate --&gt;</span>
<a href="#l4.1165"></a><span id="l4.1165" class="difflineminus">-            &lt;row id=&quot;event-grid-startdate-row&quot;&gt;</span>
<a href="#l4.1166"></a><span id="l4.1166" class="difflineminus">-                &lt;hbox id=&quot;event-grid-startdate-label-box&quot;</span>
<a href="#l4.1167"></a><span id="l4.1167" class="difflineminus">-                      align=&quot;center&quot;&gt;</span>
<a href="#l4.1168"></a><span id="l4.1168" class="difflineminus">-                    &lt;label value=&quot;&amp;event.from.label;&quot;</span>
<a href="#l4.1169"></a><span id="l4.1169" class="difflineminus">-                           accesskey=&quot;&amp;event.from.accesskey;&quot;</span>
<a href="#l4.1170"></a><span id="l4.1170" class="difflineminus">-                           control=&quot;event-starttime&quot;</span>
<a href="#l4.1171"></a><span id="l4.1171" class="difflineminus">-                           class=&quot;event-only&quot;</span>
<a href="#l4.1172"></a><span id="l4.1172" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1173"></a><span id="l4.1173" class="difflineminus">-                    &lt;label value=&quot;&amp;task.from.label;&quot;</span>
<a href="#l4.1174"></a><span id="l4.1174" class="difflineminus">-                           accesskey=&quot;&amp;task.from.accesskey;&quot;</span>
<a href="#l4.1175"></a><span id="l4.1175" class="difflineminus">-                           control=&quot;todo-has-entrydate&quot;</span>
<a href="#l4.1176"></a><span id="l4.1176" class="difflineminus">-                           class=&quot;todo-only&quot;</span>
<a href="#l4.1177"></a><span id="l4.1177" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1178"></a><span id="l4.1178" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1179"></a><span id="l4.1179" class="difflineminus">-                &lt;hbox id=&quot;event-grid-startdate-picker-box&quot;&gt;</span>
<a href="#l4.1180"></a><span id="l4.1180" class="difflineminus">-                    &lt;datetimepicker id=&quot;event-starttime&quot;</span>
<a href="#l4.1181"></a><span id="l4.1181" class="difflineminus">-                                    class=&quot;event-only&quot;</span>
<a href="#l4.1182"></a><span id="l4.1182" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1183"></a><span id="l4.1183" class="difflineminus">-                                    onchange=&quot;dateTimeControls2State(true);&quot;/&gt;</span>
<a href="#l4.1184"></a><span id="l4.1184" class="difflineminus">-                    &lt;checkbox id=&quot;todo-has-entrydate&quot;</span>
<a href="#l4.1185"></a><span id="l4.1185" class="difflineminus">-                              class=&quot;todo-only checkbox-no-label&quot;</span>
<a href="#l4.1186"></a><span id="l4.1186" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1187"></a><span id="l4.1187" class="difflineminus">-                              oncommand=&quot;updateEntryDate();&quot;/&gt;</span>
<a href="#l4.1188"></a><span id="l4.1188" class="difflineminus">-                    &lt;datetimepicker id=&quot;todo-entrydate&quot;</span>
<a href="#l4.1189"></a><span id="l4.1189" class="difflineminus">-                                    class=&quot;todo-only&quot;</span>
<a href="#l4.1190"></a><span id="l4.1190" class="difflineminus">-                                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1191"></a><span id="l4.1191" class="difflineminus">-                                    onchange=&quot;dateTimeControls2State(true);&quot;/&gt;</span>
<a href="#l4.1192"></a><span id="l4.1192" class="difflineminus">-                    &lt;vbox&gt;</span>
<a href="#l4.1193"></a><span id="l4.1193" class="difflineminus">-                        &lt;hbox&gt;</span>
<a href="#l4.1194"></a><span id="l4.1194" class="difflineminus">-                            &lt;image id=&quot;link-image-top&quot; class=&quot;keepduration-link-image&quot; keep=&quot;true&quot;/&gt;</span>
<a href="#l4.1195"></a><span id="l4.1195" class="difflineminus">-                        &lt;/hbox&gt;</span>
<a href="#l4.1196"></a><span id="l4.1196" class="difflineminus">-                        &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l4.1197"></a><span id="l4.1197" class="difflineminus">-                        &lt;toolbarbutton id=&quot;keepduration-button&quot;</span>
<a href="#l4.1198"></a><span id="l4.1198" class="difflineminus">-                                       accesskey=&quot;&amp;event.dialog.keepDurationButton.accesskey;&quot;</span>
<a href="#l4.1199"></a><span id="l4.1199" class="difflineminus">-                                       oncommand=&quot;toggleKeepDuration();&quot;</span>
<a href="#l4.1200"></a><span id="l4.1200" class="difflineminus">-                                       persist=&quot;keep&quot;</span>
<a href="#l4.1201"></a><span id="l4.1201" class="difflineminus">-                                       keep=&quot;false&quot;</span>
<a href="#l4.1202"></a><span id="l4.1202" class="difflineminus">-                                       tooltiptext=&quot;&amp;event.dialog.keepDurationButton.tooltip;&quot;/&gt;</span>
<a href="#l4.1203"></a><span id="l4.1203" class="difflineminus">-                    &lt;/vbox&gt;</span>
<a href="#l4.1204"></a><span id="l4.1204" class="difflineminus">-                    &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l4.1205"></a><span id="l4.1205" class="difflineminus">-                        &lt;label id=&quot;timezone-starttime&quot;</span>
<a href="#l4.1206"></a><span id="l4.1206" class="difflineminus">-                               class=&quot;text-link&quot;</span>
<a href="#l4.1207"></a><span id="l4.1207" class="difflineminus">-                               collapsed=&quot;true&quot;</span>
<a href="#l4.1208"></a><span id="l4.1208" class="difflineminus">-                               crop=&quot;end&quot;</span>
<a href="#l4.1209"></a><span id="l4.1209" class="difflineminus">-                               disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1210"></a><span id="l4.1210" class="difflineminus">-                               flex=&quot;1&quot;</span>
<a href="#l4.1211"></a><span id="l4.1211" class="difflineminus">-                               hyperlink=&quot;true&quot;</span>
<a href="#l4.1212"></a><span id="l4.1212" class="difflineminus">-                               onclick=&quot;showTimezonePopup(event, gStartTime.getInTimezone(gStartTimezone), editStartTimezone)&quot;/&gt;</span>
<a href="#l4.1213"></a><span id="l4.1213" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l4.1214"></a><span id="l4.1214" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1215"></a><span id="l4.1215" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1216"></a><span id="l4.1216" class="difflineminus">-</span>
<a href="#l4.1217"></a><span id="l4.1217" class="difflineminus">-            &lt;!-- EndDate --&gt;</span>
<a href="#l4.1218"></a><span id="l4.1218" class="difflineminus">-            &lt;row id=&quot;event-grid-enddate-row&quot;&gt;</span>
<a href="#l4.1219"></a><span id="l4.1219" class="difflineminus">-                &lt;hbox id=&quot;event-grid-enddate-label-box&quot;</span>
<a href="#l4.1220"></a><span id="l4.1220" class="difflineminus">-                      align=&quot;center&quot;&gt;</span>
<a href="#l4.1221"></a><span id="l4.1221" class="difflineminus">-                    &lt;label value=&quot;&amp;event.to.label;&quot;</span>
<a href="#l4.1222"></a><span id="l4.1222" class="difflineminus">-                           accesskey=&quot;&amp;event.to.accesskey;&quot;</span>
<a href="#l4.1223"></a><span id="l4.1223" class="difflineminus">-                           control=&quot;event-endtime&quot;</span>
<a href="#l4.1224"></a><span id="l4.1224" class="difflineminus">-                           class=&quot;event-only&quot;</span>
<a href="#l4.1225"></a><span id="l4.1225" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1226"></a><span id="l4.1226" class="difflineminus">-                    &lt;label value=&quot;&amp;task.to.label;&quot;</span>
<a href="#l4.1227"></a><span id="l4.1227" class="difflineminus">-                           accesskey=&quot;&amp;task.to.accesskey;&quot;</span>
<a href="#l4.1228"></a><span id="l4.1228" class="difflineminus">-                           control=&quot;todo-has-duedate&quot;</span>
<a href="#l4.1229"></a><span id="l4.1229" class="difflineminus">-                           class=&quot;todo-only&quot;</span>
<a href="#l4.1230"></a><span id="l4.1230" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1231"></a><span id="l4.1231" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1232"></a><span id="l4.1232" class="difflineminus">-                &lt;vbox&gt;</span>
<a href="#l4.1233"></a><span id="l4.1233" class="difflineminus">-                    &lt;hbox id=&quot;event-grid-enddate-picker-box&quot;&gt;</span>
<a href="#l4.1234"></a><span id="l4.1234" class="difflineminus">-                        &lt;datetimepicker id=&quot;event-endtime&quot;</span>
<a href="#l4.1235"></a><span id="l4.1235" class="difflineminus">-                                        class=&quot;event-only&quot;</span>
<a href="#l4.1236"></a><span id="l4.1236" class="difflineminus">-                                        disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1237"></a><span id="l4.1237" class="difflineminus">-                                        onchange=&quot;dateTimeControls2State(false);&quot;/&gt;</span>
<a href="#l4.1238"></a><span id="l4.1238" class="difflineminus">-                        &lt;checkbox id=&quot;todo-has-duedate&quot;</span>
<a href="#l4.1239"></a><span id="l4.1239" class="difflineminus">-                                  class=&quot;todo-only checkbox-no-label&quot;</span>
<a href="#l4.1240"></a><span id="l4.1240" class="difflineminus">-                                  disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1241"></a><span id="l4.1241" class="difflineminus">-                                  oncommand=&quot;updateDueDate();&quot;/&gt;</span>
<a href="#l4.1242"></a><span id="l4.1242" class="difflineminus">-                        &lt;datetimepicker id=&quot;todo-duedate&quot;</span>
<a href="#l4.1243"></a><span id="l4.1243" class="difflineminus">-                                        class=&quot;todo-only&quot;</span>
<a href="#l4.1244"></a><span id="l4.1244" class="difflineminus">-                                        disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1245"></a><span id="l4.1245" class="difflineminus">-                                        onchange=&quot;dateTimeControls2State(false);&quot;/&gt;</span>
<a href="#l4.1246"></a><span id="l4.1246" class="difflineminus">-                        &lt;vbox pack=&quot;end&quot;&gt;</span>
<a href="#l4.1247"></a><span id="l4.1247" class="difflineminus">-                            &lt;image id=&quot;link-image-bottom&quot; class=&quot;keepduration-link-image&quot;/&gt;</span>
<a href="#l4.1248"></a><span id="l4.1248" class="difflineminus">-                        &lt;/vbox&gt;</span>
<a href="#l4.1249"></a><span id="l4.1249" class="difflineminus">-                        &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l4.1250"></a><span id="l4.1250" class="difflineminus">-                            &lt;label id=&quot;timezone-endtime&quot;</span>
<a href="#l4.1251"></a><span id="l4.1251" class="difflineminus">-                                   class=&quot;text-link&quot;</span>
<a href="#l4.1252"></a><span id="l4.1252" class="difflineminus">-                                   collapsed=&quot;true&quot;</span>
<a href="#l4.1253"></a><span id="l4.1253" class="difflineminus">-                                   crop=&quot;end&quot;</span>
<a href="#l4.1254"></a><span id="l4.1254" class="difflineminus">-                                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1255"></a><span id="l4.1255" class="difflineminus">-                                   flex=&quot;1&quot;</span>
<a href="#l4.1256"></a><span id="l4.1256" class="difflineminus">-                                   hyperlink=&quot;true&quot;</span>
<a href="#l4.1257"></a><span id="l4.1257" class="difflineminus">-                                   onclick=&quot;showTimezonePopup(event, gEndTime.getInTimezone(gEndTimezone), editEndTimezone)&quot;/&gt;</span>
<a href="#l4.1258"></a><span id="l4.1258" class="difflineminus">-                        &lt;/hbox&gt;</span>
<a href="#l4.1259"></a><span id="l4.1259" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l4.1260"></a><span id="l4.1260" class="difflineminus">-                &lt;/vbox&gt;</span>
<a href="#l4.1261"></a><span id="l4.1261" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1262"></a><span id="l4.1262" class="difflineminus">-</span>
<a href="#l4.1263"></a><span id="l4.1263" class="difflineminus">-            &lt;row id=&quot;event-grid-todo-status-row&quot;</span>
<a href="#l4.1264"></a><span id="l4.1264" class="difflineminus">-                 class=&quot;todo-only&quot;</span>
<a href="#l4.1265"></a><span id="l4.1265" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1266"></a><span id="l4.1266" class="difflineminus">-                &lt;label id=&quot;todo-status-label&quot;</span>
<a href="#l4.1267"></a><span id="l4.1267" class="difflineminus">-                       value=&quot;&amp;task.status.label;&quot;</span>
<a href="#l4.1268"></a><span id="l4.1268" class="difflineminus">-                       accesskey=&quot;&amp;task.status.accesskey;&quot;</span>
<a href="#l4.1269"></a><span id="l4.1269" class="difflineminus">-                       control=&quot;todo-status&quot;</span>
<a href="#l4.1270"></a><span id="l4.1270" class="difflineminus">-                       disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1271"></a><span id="l4.1271" class="difflineminus">-                &lt;hbox id=&quot;event-grid-todo-status-picker-box&quot;</span>
<a href="#l4.1272"></a><span id="l4.1272" class="difflineminus">-                      align=&quot;center&quot;&gt;</span>
<a href="#l4.1273"></a><span id="l4.1273" class="difflineminus">-                    &lt;menulist id=&quot;todo-status&quot;</span>
<a href="#l4.1274"></a><span id="l4.1274" class="difflineminus">-                              class=&quot;todo-only&quot;</span>
<a href="#l4.1275"></a><span id="l4.1275" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1276"></a><span id="l4.1276" class="difflineminus">-                              oncommand=&quot;updateToDoStatus(this.value);&quot;&gt;</span>
<a href="#l4.1277"></a><span id="l4.1277" class="difflineminus">-                        &lt;menupopup id=&quot;todo-status-menupopup&quot;&gt;</span>
<a href="#l4.1278"></a><span id="l4.1278" class="difflineminus">-                            &lt;menuitem id=&quot;todo-status-none-menuitem&quot;</span>
<a href="#l4.1279"></a><span id="l4.1279" class="difflineminus">-                                      label=&quot;&amp;newevent.todoStatus.none.label;&quot;</span>
<a href="#l4.1280"></a><span id="l4.1280" class="difflineminus">-                                      value=&quot;NONE&quot;/&gt;</span>
<a href="#l4.1281"></a><span id="l4.1281" class="difflineminus">-                            &lt;menuitem id=&quot;todo-status-needsaction-menuitem&quot;</span>
<a href="#l4.1282"></a><span id="l4.1282" class="difflineminus">-                                      label=&quot;&amp;newevent.status.needsaction.label;&quot;</span>
<a href="#l4.1283"></a><span id="l4.1283" class="difflineminus">-                                      value=&quot;NEEDS-ACTION&quot;/&gt;</span>
<a href="#l4.1284"></a><span id="l4.1284" class="difflineminus">-                            &lt;menuitem id=&quot;todo-status-inprogress-menuitem&quot;</span>
<a href="#l4.1285"></a><span id="l4.1285" class="difflineminus">-                                      label=&quot;&amp;newevent.status.inprogress.label;&quot;</span>
<a href="#l4.1286"></a><span id="l4.1286" class="difflineminus">-                                      value=&quot;IN-PROCESS&quot;/&gt;</span>
<a href="#l4.1287"></a><span id="l4.1287" class="difflineminus">-                            &lt;menuitem id=&quot;todo-status-completed-menuitem&quot;</span>
<a href="#l4.1288"></a><span id="l4.1288" class="difflineminus">-                                      label=&quot;&amp;newevent.status.completed.label;&quot;</span>
<a href="#l4.1289"></a><span id="l4.1289" class="difflineminus">-                                      value=&quot;COMPLETED&quot;/&gt;</span>
<a href="#l4.1290"></a><span id="l4.1290" class="difflineminus">-                            &lt;menuitem id=&quot;todo-status-canceled-menuitem&quot;</span>
<a href="#l4.1291"></a><span id="l4.1291" class="difflineminus">-                                      label=&quot;&amp;newevent.todoStatus.cancelled.label;&quot;</span>
<a href="#l4.1292"></a><span id="l4.1292" class="difflineminus">-                                      value=&quot;CANCELLED&quot;/&gt;</span>
<a href="#l4.1293"></a><span id="l4.1293" class="difflineminus">-                        &lt;/menupopup&gt;</span>
<a href="#l4.1294"></a><span id="l4.1294" class="difflineminus">-                    &lt;/menulist&gt;</span>
<a href="#l4.1295"></a><span id="l4.1295" class="difflineminus">-                    &lt;datepicker id=&quot;completed-date-picker&quot;</span>
<a href="#l4.1296"></a><span id="l4.1296" class="difflineminus">-                                class=&quot;todo-only&quot;</span>
<a href="#l4.1297"></a><span id="l4.1297" class="difflineminus">-                                disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1298"></a><span id="l4.1298" class="difflineminus">-                                disabled=&quot;true&quot;</span>
<a href="#l4.1299"></a><span id="l4.1299" class="difflineminus">-                                value=&quot;&quot;/&gt;</span>
<a href="#l4.1300"></a><span id="l4.1300" class="difflineminus">-                    &lt;textbox id=&quot;percent-complete-textbox&quot;</span>
<a href="#l4.1301"></a><span id="l4.1301" class="difflineminus">-                             type=&quot;number&quot;</span>
<a href="#l4.1302"></a><span id="l4.1302" class="difflineminus">-                             min=&quot;0&quot;</span>
<a href="#l4.1303"></a><span id="l4.1303" class="difflineminus">-                             max=&quot;100&quot;</span>
<a href="#l4.1304"></a><span id="l4.1304" class="difflineminus">-                             disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1305"></a><span id="l4.1305" class="difflineminus">-                             size=&quot;3&quot;</span>
<a href="#l4.1306"></a><span id="l4.1306" class="difflineminus">-                             oninput=&quot;updateToDoStatus('percent-changed')&quot;</span>
<a href="#l4.1307"></a><span id="l4.1307" class="difflineminus">-                             onselect=&quot;updateToDoStatus('percent-changed')&quot;/&gt;</span>
<a href="#l4.1308"></a><span id="l4.1308" class="difflineminus">-                    &lt;label id=&quot;percent-complete-label&quot;</span>
<a href="#l4.1309"></a><span id="l4.1309" class="difflineminus">-                           class=&quot;todo-only&quot;</span>
<a href="#l4.1310"></a><span id="l4.1310" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1311"></a><span id="l4.1311" class="difflineminus">-                           value=&quot;&amp;newtodo.percentcomplete.label;&quot;/&gt;</span>
<a href="#l4.1312"></a><span id="l4.1312" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1313"></a><span id="l4.1313" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1314"></a><span id="l4.1314" class="difflineminus">-</span>
<a href="#l4.1315"></a><span id="l4.1315" class="difflineminus">-            &lt;separator id=&quot;event-grid-recurrence-separator&quot; class=&quot;groove&quot;/&gt;</span>
<a href="#l4.1316"></a><span id="l4.1316" class="difflineminus">-</span>
<a href="#l4.1317"></a><span id="l4.1317" class="difflineminus">-            &lt;!-- Recurrence --&gt;</span>
<a href="#l4.1318"></a><span id="l4.1318" class="difflineminus">-            &lt;row id=&quot;event-grid-recurrence-row&quot;</span>
<a href="#l4.1319"></a><span id="l4.1319" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1320"></a><span id="l4.1320" class="difflineminus">-                &lt;label value=&quot;&amp;event.repeat.label;&quot;</span>
<a href="#l4.1321"></a><span id="l4.1321" class="difflineminus">-                       accesskey=&quot;&amp;event.repeat.accesskey;&quot;</span>
<a href="#l4.1322"></a><span id="l4.1322" class="difflineminus">-                       control=&quot;item-repeat&quot;</span>
<a href="#l4.1323"></a><span id="l4.1323" class="difflineminus">-                       disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1324"></a><span id="l4.1324" class="difflineminus">-                &lt;hbox id=&quot;event-grid-recurrence-picker-box&quot;</span>
<a href="#l4.1325"></a><span id="l4.1325" class="difflineminus">-                      align=&quot;center&quot;</span>
<a href="#l4.1326"></a><span id="l4.1326" class="difflineminus">-                      flex=&quot;1&quot;&gt;</span>
<a href="#l4.1327"></a><span id="l4.1327" class="difflineminus">-                    &lt;menulist id=&quot;item-repeat&quot;</span>
<a href="#l4.1328"></a><span id="l4.1328" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1329"></a><span id="l4.1329" class="difflineminus">-                              oncommand=&quot;updateRepeat(null, true)&quot;&gt;</span>
<a href="#l4.1330"></a><span id="l4.1330" class="difflineminus">-                        &lt;menupopup id=&quot;item-repeat-menupopup&quot;&gt;</span>
<a href="#l4.1331"></a><span id="l4.1331" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-none-menuitem&quot;</span>
<a href="#l4.1332"></a><span id="l4.1332" class="difflineminus">-                                      label=&quot;&amp;event.repeat.does.not.repeat.label;&quot;</span>
<a href="#l4.1333"></a><span id="l4.1333" class="difflineminus">-                                      selected=&quot;true&quot;</span>
<a href="#l4.1334"></a><span id="l4.1334" class="difflineminus">-                                      value=&quot;none&quot;/&gt;</span>
<a href="#l4.1335"></a><span id="l4.1335" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-daily-menuitem&quot;</span>
<a href="#l4.1336"></a><span id="l4.1336" class="difflineminus">-                                      label=&quot;&amp;event.repeat.daily.label;&quot;</span>
<a href="#l4.1337"></a><span id="l4.1337" class="difflineminus">-                                      value=&quot;daily&quot;/&gt;</span>
<a href="#l4.1338"></a><span id="l4.1338" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-weekly-menuitem&quot;</span>
<a href="#l4.1339"></a><span id="l4.1339" class="difflineminus">-                                      label=&quot;&amp;event.repeat.weekly.label;&quot;</span>
<a href="#l4.1340"></a><span id="l4.1340" class="difflineminus">-                                      value=&quot;weekly&quot;/&gt;</span>
<a href="#l4.1341"></a><span id="l4.1341" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-weekday-menuitem&quot;</span>
<a href="#l4.1342"></a><span id="l4.1342" class="difflineminus">-                                      label=&quot;&amp;event.repeat.every.weekday.label;&quot;</span>
<a href="#l4.1343"></a><span id="l4.1343" class="difflineminus">-                                      value=&quot;every.weekday&quot;/&gt;</span>
<a href="#l4.1344"></a><span id="l4.1344" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-biweekly-menuitem&quot;</span>
<a href="#l4.1345"></a><span id="l4.1345" class="difflineminus">-                                      label=&quot;&amp;event.repeat.bi.weekly.label;&quot;</span>
<a href="#l4.1346"></a><span id="l4.1346" class="difflineminus">-                                      value=&quot;bi.weekly&quot;/&gt;</span>
<a href="#l4.1347"></a><span id="l4.1347" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-monthly-menuitem&quot;</span>
<a href="#l4.1348"></a><span id="l4.1348" class="difflineminus">-                                      label=&quot;&amp;event.repeat.monthly.label;&quot;</span>
<a href="#l4.1349"></a><span id="l4.1349" class="difflineminus">-                                      value=&quot;monthly&quot;/&gt;</span>
<a href="#l4.1350"></a><span id="l4.1350" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-yearly-menuitem&quot;</span>
<a href="#l4.1351"></a><span id="l4.1351" class="difflineminus">-                                      label=&quot;&amp;event.repeat.yearly.label;&quot;</span>
<a href="#l4.1352"></a><span id="l4.1352" class="difflineminus">-                                      value=&quot;yearly&quot;/&gt;</span>
<a href="#l4.1353"></a><span id="l4.1353" class="difflineminus">-                            &lt;menuseparator id=&quot;item-repeat-separator&quot;/&gt;</span>
<a href="#l4.1354"></a><span id="l4.1354" class="difflineminus">-                            &lt;menuitem id=&quot;repeat-custom-menuitem&quot;</span>
<a href="#l4.1355"></a><span id="l4.1355" class="difflineminus">-                                      label=&quot;&amp;event.repeat.custom.label;&quot;</span>
<a href="#l4.1356"></a><span id="l4.1356" class="difflineminus">-                                      value=&quot;custom&quot;/&gt;</span>
<a href="#l4.1357"></a><span id="l4.1357" class="difflineminus">-                        &lt;/menupopup&gt;</span>
<a href="#l4.1358"></a><span id="l4.1358" class="difflineminus">-                    &lt;/menulist&gt;</span>
<a href="#l4.1359"></a><span id="l4.1359" class="difflineminus">-                    &lt;deck id=&quot;repeat-deck&quot; selectedIndex=&quot;-1&quot;&gt;</span>
<a href="#l4.1360"></a><span id="l4.1360" class="difflineminus">-                        &lt;hbox id=&quot;repeat-untilDate&quot; align=&quot;center&quot;&gt;</span>
<a href="#l4.1361"></a><span id="l4.1361" class="difflineminus">-                            &lt;label value=&quot;&amp;event.until.label;&quot;</span>
<a href="#l4.1362"></a><span id="l4.1362" class="difflineminus">-                                   accesskey=&quot;&amp;event.until.accesskey;&quot;</span>
<a href="#l4.1363"></a><span id="l4.1363" class="difflineminus">-                                   control=&quot;repeat-until-datepicker&quot;</span>
<a href="#l4.1364"></a><span id="l4.1364" class="difflineminus">-                                   disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1365"></a><span id="l4.1365" class="difflineminus">-                            &lt;datepicker-forever id=&quot;repeat-until-datepicker&quot; flex=&quot;1&quot;</span>
<a href="#l4.1366"></a><span id="l4.1366" class="difflineminus">-                                                disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1367"></a><span id="l4.1367" class="difflineminus">-                                                onchange=&quot;checkUntilDate();&quot;</span>
<a href="#l4.1368"></a><span id="l4.1368" class="difflineminus">-                                                oncommand=&quot;checkUntilDate();&quot;</span>
<a href="#l4.1369"></a><span id="l4.1369" class="difflineminus">-                                                value=&quot;&quot;/&gt;</span>
<a href="#l4.1370"></a><span id="l4.1370" class="difflineminus">-                        &lt;/hbox&gt;</span>
<a href="#l4.1371"></a><span id="l4.1371" class="difflineminus">-                        &lt;vbox id=&quot;repeat-details&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l4.1372"></a><span id="l4.1372" class="difflineminus">-                            &lt;label class=&quot;text-link&quot;</span>
<a href="#l4.1373"></a><span id="l4.1373" class="difflineminus">-                                   crop=&quot;right&quot;</span>
<a href="#l4.1374"></a><span id="l4.1374" class="difflineminus">-                                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1375"></a><span id="l4.1375" class="difflineminus">-                                   hyperlink=&quot;true&quot;</span>
<a href="#l4.1376"></a><span id="l4.1376" class="difflineminus">-                                   flex=&quot;1&quot;</span>
<a href="#l4.1377"></a><span id="l4.1377" class="difflineminus">-                                   onclick=&quot;updateRepeat()&quot;/&gt;</span>
<a href="#l4.1378"></a><span id="l4.1378" class="difflineminus">-                        &lt;/vbox&gt;</span>
<a href="#l4.1379"></a><span id="l4.1379" class="difflineminus">-                    &lt;/deck&gt;</span>
<a href="#l4.1380"></a><span id="l4.1380" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l4.1381"></a><span id="l4.1381" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1382"></a><span id="l4.1382" class="difflineminus">-</span>
<a href="#l4.1383"></a><span id="l4.1383" class="difflineminus">-            &lt;separator id=&quot;event-grid-alarm-separator&quot;</span>
<a href="#l4.1384"></a><span id="l4.1384" class="difflineminus">-                       class=&quot;groove&quot;/&gt;</span>
<a href="#l4.1385"></a><span id="l4.1385" class="difflineplus">+      &lt;!-- Options menu --&gt;</span>
<a href="#l4.1386"></a><span id="l4.1386" class="difflineplus">+      &lt;menu id=&quot;options-menu&quot;</span>
<a href="#l4.1387"></a><span id="l4.1387" class="difflineplus">+            label=&quot;&amp;event.menu.options.label;&quot;</span>
<a href="#l4.1388"></a><span id="l4.1388" class="difflineplus">+            accesskey=&quot;&amp;event.menu.options.accesskey;&quot;&gt;</span>
<a href="#l4.1389"></a><span id="l4.1389" class="difflineplus">+        &lt;menupopup id=&quot;options-menupopup&quot;&gt;</span>
<a href="#l4.1390"></a><span id="l4.1390" class="difflineplus">+          &lt;menuitem id=&quot;options-attendees-menuitem&quot;</span>
<a href="#l4.1391"></a><span id="l4.1391" class="difflineplus">+                    label=&quot;&amp;event.menu.options.attendees.label;&quot;</span>
<a href="#l4.1392"></a><span id="l4.1392" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.options.attendees.accesskey;&quot;</span>
<a href="#l4.1393"></a><span id="l4.1393" class="difflineplus">+                    command=&quot;cmd_attendees&quot;</span>
<a href="#l4.1394"></a><span id="l4.1394" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1395"></a><span id="l4.1395" class="difflineplus">+          &lt;menu id=&quot;options-attachments-menu&quot;</span>
<a href="#l4.1396"></a><span id="l4.1396" class="difflineplus">+                label=&quot;&amp;event.attachments.menubutton.label;&quot;</span>
<a href="#l4.1397"></a><span id="l4.1397" class="difflineplus">+                accesskey=&quot;&amp;event.attachments.menubutton.accesskey;&quot;&gt;</span>
<a href="#l4.1398"></a><span id="l4.1398" class="difflineplus">+            &lt;menupopup id=&quot;options-attachments-menupopup&quot;&gt;</span>
<a href="#l4.1399"></a><span id="l4.1399" class="difflineplus">+              &lt;menuitem id=&quot;options-attachments-url-menuitem&quot;</span>
<a href="#l4.1400"></a><span id="l4.1400" class="difflineplus">+                        label=&quot;&amp;event.attachments.url.label;&quot;</span>
<a href="#l4.1401"></a><span id="l4.1401" class="difflineplus">+                        accesskey=&quot;&amp;event.attachments.url.accesskey;&quot;</span>
<a href="#l4.1402"></a><span id="l4.1402" class="difflineplus">+                        command=&quot;cmd_attach_url&quot;/&gt;</span>
<a href="#l4.1403"></a><span id="l4.1403" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.1404"></a><span id="l4.1404" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.1405"></a><span id="l4.1405" class="difflineplus">+          &lt;menuitem id=&quot;options-timezones-menuitem&quot;</span>
<a href="#l4.1406"></a><span id="l4.1406" class="difflineplus">+                    label=&quot;&amp;event.menu.options.timezone2.label;&quot;</span>
<a href="#l4.1407"></a><span id="l4.1407" class="difflineplus">+                    accesskey=&quot;&amp;event.menu.options.timezone2.accesskey;&quot;</span>
<a href="#l4.1408"></a><span id="l4.1408" class="difflineplus">+                    type=&quot;checkbox&quot;</span>
<a href="#l4.1409"></a><span id="l4.1409" class="difflineplus">+                    command=&quot;cmd_timezone&quot;</span>
<a href="#l4.1410"></a><span id="l4.1410" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1411"></a><span id="l4.1411" class="difflineplus">+          &lt;menuseparator id=&quot;options-menuseparator1&quot;/&gt;</span>
<a href="#l4.1412"></a><span id="l4.1412" class="difflineplus">+          &lt;menu id=&quot;options-priority-menu&quot;</span>
<a href="#l4.1413"></a><span id="l4.1413" class="difflineplus">+                label=&quot;&amp;event.menu.options.priority2.label;&quot;</span>
<a href="#l4.1414"></a><span id="l4.1414" class="difflineplus">+                accesskey=&quot;&amp;event.menu.options.priority2.accesskey;&quot;</span>
<a href="#l4.1415"></a><span id="l4.1415" class="difflineplus">+                disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.1416"></a><span id="l4.1416" class="difflineplus">+            &lt;menupopup id=&quot;options-priority-menupopup&quot;&gt;</span>
<a href="#l4.1417"></a><span id="l4.1417" class="difflineplus">+              &lt;menuitem id=&quot;options-priority-none-menuitem&quot;</span>
<a href="#l4.1418"></a><span id="l4.1418" class="difflineplus">+                        label=&quot;&amp;event.menu.options.priority.notspecified.label;&quot;</span>
<a href="#l4.1419"></a><span id="l4.1419" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.priority.notspecified.accesskey;&quot;</span>
<a href="#l4.1420"></a><span id="l4.1420" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1421"></a><span id="l4.1421" class="difflineplus">+                        command=&quot;cmd_priority_none&quot;</span>
<a href="#l4.1422"></a><span id="l4.1422" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1423"></a><span id="l4.1423" class="difflineplus">+              &lt;menuitem id=&quot;options-priority-low-menuitem&quot;</span>
<a href="#l4.1424"></a><span id="l4.1424" class="difflineplus">+                        label=&quot;&amp;event.menu.options.priority.low.label;&quot;</span>
<a href="#l4.1425"></a><span id="l4.1425" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.priority.low.accesskey;&quot;</span>
<a href="#l4.1426"></a><span id="l4.1426" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1427"></a><span id="l4.1427" class="difflineplus">+                        command=&quot;cmd_priority_low&quot;</span>
<a href="#l4.1428"></a><span id="l4.1428" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1429"></a><span id="l4.1429" class="difflineplus">+              &lt;menuitem id=&quot;options-priority-normal-label&quot;</span>
<a href="#l4.1430"></a><span id="l4.1430" class="difflineplus">+                        label=&quot;&amp;event.menu.options.priority.normal.label;&quot;</span>
<a href="#l4.1431"></a><span id="l4.1431" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.priority.normal.accesskey;&quot;</span>
<a href="#l4.1432"></a><span id="l4.1432" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1433"></a><span id="l4.1433" class="difflineplus">+                        command=&quot;cmd_priority_normal&quot;</span>
<a href="#l4.1434"></a><span id="l4.1434" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1435"></a><span id="l4.1435" class="difflineplus">+              &lt;menuitem id=&quot;options-priority-high-label&quot;</span>
<a href="#l4.1436"></a><span id="l4.1436" class="difflineplus">+                        label=&quot;&amp;event.menu.options.priority.high.label;&quot;</span>
<a href="#l4.1437"></a><span id="l4.1437" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.priority.high.accesskey;&quot;</span>
<a href="#l4.1438"></a><span id="l4.1438" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1439"></a><span id="l4.1439" class="difflineplus">+                        command=&quot;cmd_priority_high&quot;</span>
<a href="#l4.1440"></a><span id="l4.1440" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1441"></a><span id="l4.1441" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.1442"></a><span id="l4.1442" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.1443"></a><span id="l4.1443" class="difflineplus">+          &lt;menu id=&quot;options-privacy-menu&quot;</span>
<a href="#l4.1444"></a><span id="l4.1444" class="difflineplus">+                label=&quot;&amp;event.menu.options.privacy.label;&quot;</span>
<a href="#l4.1445"></a><span id="l4.1445" class="difflineplus">+                accesskey=&quot;&amp;event.menu.options.privacy.accesskey;&quot;</span>
<a href="#l4.1446"></a><span id="l4.1446" class="difflineplus">+                disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.1447"></a><span id="l4.1447" class="difflineplus">+            &lt;menupopup id=&quot;options-privacy-menupopup&quot;&gt;</span>
<a href="#l4.1448"></a><span id="l4.1448" class="difflineplus">+              &lt;menuitem id=&quot;options-privacy-public-menuitem&quot;</span>
<a href="#l4.1449"></a><span id="l4.1449" class="difflineplus">+                        label=&quot;&amp;event.menu.options.privacy.public.label;&quot;</span>
<a href="#l4.1450"></a><span id="l4.1450" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.privacy.public.accesskey;&quot;</span>
<a href="#l4.1451"></a><span id="l4.1451" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1452"></a><span id="l4.1452" class="difflineplus">+                        privacy=&quot;PUBLIC&quot;</span>
<a href="#l4.1453"></a><span id="l4.1453" class="difflineplus">+                        oncommand=&quot;editPrivacy(this, event)&quot;</span>
<a href="#l4.1454"></a><span id="l4.1454" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1455"></a><span id="l4.1455" class="difflineplus">+              &lt;menuitem id=&quot;options-privacy-confidential-menuitem&quot;</span>
<a href="#l4.1456"></a><span id="l4.1456" class="difflineplus">+                        label=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;</span>
<a href="#l4.1457"></a><span id="l4.1457" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.privacy.confidential.accesskey;&quot;</span>
<a href="#l4.1458"></a><span id="l4.1458" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1459"></a><span id="l4.1459" class="difflineplus">+                        privacy=&quot;CONFIDENTIAL&quot;</span>
<a href="#l4.1460"></a><span id="l4.1460" class="difflineplus">+                        oncommand=&quot;editPrivacy(this, event)&quot;</span>
<a href="#l4.1461"></a><span id="l4.1461" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1462"></a><span id="l4.1462" class="difflineplus">+              &lt;menuitem id=&quot;options-privacy-private-menuitem&quot;</span>
<a href="#l4.1463"></a><span id="l4.1463" class="difflineplus">+                        label=&quot;&amp;event.menu.options.privacy.private.label;&quot;</span>
<a href="#l4.1464"></a><span id="l4.1464" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.privacy.private.accesskey;&quot;</span>
<a href="#l4.1465"></a><span id="l4.1465" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1466"></a><span id="l4.1466" class="difflineplus">+                        privacy=&quot;PRIVATE&quot;</span>
<a href="#l4.1467"></a><span id="l4.1467" class="difflineplus">+                        oncommand=&quot;editPrivacy(this, event)&quot;</span>
<a href="#l4.1468"></a><span id="l4.1468" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1469"></a><span id="l4.1469" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.1470"></a><span id="l4.1470" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.1471"></a><span id="l4.1471" class="difflineplus">+          &lt;menu id=&quot;options-status-menu&quot;</span>
<a href="#l4.1472"></a><span id="l4.1472" class="difflineplus">+                label=&quot;&amp;newevent.status.label;&quot;</span>
<a href="#l4.1473"></a><span id="l4.1473" class="difflineplus">+                accesskey=&quot;&amp;newevent.status.accesskey;&quot;</span>
<a href="#l4.1474"></a><span id="l4.1474" class="difflineplus">+                class=&quot;event-only&quot;</span>
<a href="#l4.1475"></a><span id="l4.1475" class="difflineplus">+                disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.1476"></a><span id="l4.1476" class="difflineplus">+            &lt;menupopup id=&quot;options-status-menupopup&quot;&gt;</span>
<a href="#l4.1477"></a><span id="l4.1477" class="difflineplus">+              &lt;menuitem id=&quot;options-status-none-menuitem&quot;</span>
<a href="#l4.1478"></a><span id="l4.1478" class="difflineplus">+                        label=&quot;&amp;newevent.eventStatus.none.label;&quot;</span>
<a href="#l4.1479"></a><span id="l4.1479" class="difflineplus">+                        accesskey=&quot;&amp;newevent.eventStatus.none.accesskey;&quot;</span>
<a href="#l4.1480"></a><span id="l4.1480" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1481"></a><span id="l4.1481" class="difflineplus">+                        command=&quot;cmd_status_none&quot;</span>
<a href="#l4.1482"></a><span id="l4.1482" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1483"></a><span id="l4.1483" class="difflineplus">+              &lt;menuitem id=&quot;options-status-tentative-menuitem&quot;</span>
<a href="#l4.1484"></a><span id="l4.1484" class="difflineplus">+                        label=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l4.1485"></a><span id="l4.1485" class="difflineplus">+                        accesskey=&quot;&amp;newevent.status.tentative.accesskey;&quot;</span>
<a href="#l4.1486"></a><span id="l4.1486" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1487"></a><span id="l4.1487" class="difflineplus">+                        command=&quot;cmd_status_tentative&quot;</span>
<a href="#l4.1488"></a><span id="l4.1488" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1489"></a><span id="l4.1489" class="difflineplus">+              &lt;menuitem id=&quot;options-status-confirmed-menuitem&quot;</span>
<a href="#l4.1490"></a><span id="l4.1490" class="difflineplus">+                        label=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l4.1491"></a><span id="l4.1491" class="difflineplus">+                        accesskey=&quot;&amp;newevent.status.confirmed.accesskey;&quot;</span>
<a href="#l4.1492"></a><span id="l4.1492" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1493"></a><span id="l4.1493" class="difflineplus">+                        command=&quot;cmd_status_confirmed&quot;</span>
<a href="#l4.1494"></a><span id="l4.1494" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1495"></a><span id="l4.1495" class="difflineplus">+              &lt;menuitem id=&quot;options-status-canceled-menuitem&quot;</span>
<a href="#l4.1496"></a><span id="l4.1496" class="difflineplus">+                        label=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l4.1497"></a><span id="l4.1497" class="difflineplus">+                        accesskey=&quot;&amp;newevent.eventStatus.cancelled.accesskey;&quot;</span>
<a href="#l4.1498"></a><span id="l4.1498" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1499"></a><span id="l4.1499" class="difflineplus">+                        command=&quot;cmd_status_cancelled&quot;</span>
<a href="#l4.1500"></a><span id="l4.1500" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1501"></a><span id="l4.1501" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.1502"></a><span id="l4.1502" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.1503"></a><span id="l4.1503" class="difflineplus">+          &lt;menuseparator id=&quot;options-menuseparator2&quot; class=&quot;event-only&quot;/&gt;</span>
<a href="#l4.1504"></a><span id="l4.1504" class="difflineplus">+          &lt;menu id=&quot;options-freebusy-menu&quot;</span>
<a href="#l4.1505"></a><span id="l4.1505" class="difflineplus">+                class=&quot;event-only&quot;</span>
<a href="#l4.1506"></a><span id="l4.1506" class="difflineplus">+                label=&quot;&amp;event.menu.options.show.time.label;&quot;</span>
<a href="#l4.1507"></a><span id="l4.1507" class="difflineplus">+                accesskey=&quot;&amp;event.menu.options.show.time.accesskey;&quot;</span>
<a href="#l4.1508"></a><span id="l4.1508" class="difflineplus">+                disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l4.1509"></a><span id="l4.1509" class="difflineplus">+            &lt;menupopup id=&quot;options-freebusy-menupopup&quot;&gt;</span>
<a href="#l4.1510"></a><span id="l4.1510" class="difflineplus">+              &lt;menuitem id=&quot;options-freebusy-busy-menuitem&quot;</span>
<a href="#l4.1511"></a><span id="l4.1511" class="difflineplus">+                        label=&quot;&amp;event.menu.options.show.time.busy.label;&quot;</span>
<a href="#l4.1512"></a><span id="l4.1512" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.show.time.busy.accesskey;&quot;</span>
<a href="#l4.1513"></a><span id="l4.1513" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1514"></a><span id="l4.1514" class="difflineplus">+                        command=&quot;cmd_showtimeas_busy&quot;</span>
<a href="#l4.1515"></a><span id="l4.1515" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1516"></a><span id="l4.1516" class="difflineplus">+              &lt;menuitem id=&quot;options-freebusy-free-menuitem&quot;</span>
<a href="#l4.1517"></a><span id="l4.1517" class="difflineplus">+                        label=&quot;&amp;event.menu.options.show.time.free.label;&quot;</span>
<a href="#l4.1518"></a><span id="l4.1518" class="difflineplus">+                        accesskey=&quot;&amp;event.menu.options.show.time.free.accesskey;&quot;</span>
<a href="#l4.1519"></a><span id="l4.1519" class="difflineplus">+                        type=&quot;radio&quot;</span>
<a href="#l4.1520"></a><span id="l4.1520" class="difflineplus">+                        command=&quot;cmd_showtimeas_free&quot;</span>
<a href="#l4.1521"></a><span id="l4.1521" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1522"></a><span id="l4.1522" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l4.1523"></a><span id="l4.1523" class="difflineplus">+          &lt;/menu&gt;</span>
<a href="#l4.1524"></a><span id="l4.1524" class="difflineplus">+        &lt;/menupopup&gt;</span>
<a href="#l4.1525"></a><span id="l4.1525" class="difflineplus">+      &lt;/menu&gt;</span>
<a href="#l4.1526"></a><span id="l4.1526" class="difflineplus">+    &lt;/menubar&gt;</span>
<a href="#l4.1527"></a><span id="l4.1527"> </span>
<a href="#l4.1528"></a><span id="l4.1528" class="difflineminus">-            &lt;!-- Reminder (Alarm) --&gt;</span>
<a href="#l4.1529"></a><span id="l4.1529" class="difflineminus">-            &lt;row id=&quot;event-grid-alarm-row&quot;</span>
<a href="#l4.1530"></a><span id="l4.1530" class="difflineminus">-                 align=&quot;center&quot;&gt;</span>
<a href="#l4.1531"></a><span id="l4.1531" class="difflineminus">-                &lt;label value=&quot;&amp;event.reminder.label;&quot;</span>
<a href="#l4.1532"></a><span id="l4.1532" class="difflineminus">-                       accesskey=&quot;&amp;event.reminder.accesskey;&quot;</span>
<a href="#l4.1533"></a><span id="l4.1533" class="difflineminus">-                       control=&quot;item-alarm&quot;</span>
<a href="#l4.1534"></a><span id="l4.1534" class="difflineminus">-                       disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1535"></a><span id="l4.1535" class="difflineminus">-                &lt;hbox id=&quot;event-grid-alarm-picker-box&quot;</span>
<a href="#l4.1536"></a><span id="l4.1536" class="difflineminus">-                      align=&quot;center&quot;&gt;</span>
<a href="#l4.1537"></a><span id="l4.1537" class="difflineminus">-                    &lt;menulist id=&quot;item-alarm&quot;</span>
<a href="#l4.1538"></a><span id="l4.1538" class="difflineminus">-                              disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1539"></a><span id="l4.1539" class="difflineminus">-                              oncommand=&quot;updateReminder()&quot;&gt;</span>
<a href="#l4.1540"></a><span id="l4.1540" class="difflineminus">-                        &lt;menupopup id=&quot;item-alarm-menupopup&quot;&gt;</span>
<a href="#l4.1541"></a><span id="l4.1541" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-none-menuitem&quot;</span>
<a href="#l4.1542"></a><span id="l4.1542" class="difflineminus">-                                      label=&quot;&amp;event.reminder.none.label;&quot;</span>
<a href="#l4.1543"></a><span id="l4.1543" class="difflineminus">-                                      selected=&quot;true&quot;</span>
<a href="#l4.1544"></a><span id="l4.1544" class="difflineminus">-                                      value=&quot;none&quot;/&gt;</span>
<a href="#l4.1545"></a><span id="l4.1545" class="difflineminus">-                            &lt;menuseparator id=&quot;reminder-none-separator&quot;/&gt;</span>
<a href="#l4.1546"></a><span id="l4.1546" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-0minutes-menuitem&quot;</span>
<a href="#l4.1547"></a><span id="l4.1547" class="difflineminus">-                                      label=&quot;&amp;event.reminder.0minutes.before.label;&quot;</span>
<a href="#l4.1548"></a><span id="l4.1548" class="difflineminus">-                                      length=&quot;0&quot;</span>
<a href="#l4.1549"></a><span id="l4.1549" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1550"></a><span id="l4.1550" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1551"></a><span id="l4.1551" class="difflineminus">-                                      unit=&quot;minutes&quot;/&gt;</span>
<a href="#l4.1552"></a><span id="l4.1552" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-5minutes-menuitem&quot;</span>
<a href="#l4.1553"></a><span id="l4.1553" class="difflineminus">-                                      label=&quot;&amp;event.reminder.5minutes.before.label;&quot;</span>
<a href="#l4.1554"></a><span id="l4.1554" class="difflineminus">-                                      length=&quot;5&quot;</span>
<a href="#l4.1555"></a><span id="l4.1555" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1556"></a><span id="l4.1556" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1557"></a><span id="l4.1557" class="difflineminus">-                                      unit=&quot;minutes&quot;/&gt;</span>
<a href="#l4.1558"></a><span id="l4.1558" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-15minutes-menuitem&quot;</span>
<a href="#l4.1559"></a><span id="l4.1559" class="difflineminus">-                                      label=&quot;&amp;event.reminder.15minutes.before.label;&quot;</span>
<a href="#l4.1560"></a><span id="l4.1560" class="difflineminus">-                                      length=&quot;15&quot;</span>
<a href="#l4.1561"></a><span id="l4.1561" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1562"></a><span id="l4.1562" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1563"></a><span id="l4.1563" class="difflineminus">-                                      unit=&quot;minutes&quot;/&gt;</span>
<a href="#l4.1564"></a><span id="l4.1564" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-30minutes-menuitem&quot;</span>
<a href="#l4.1565"></a><span id="l4.1565" class="difflineminus">-                                      label=&quot;&amp;event.reminder.30minutes.before.label;&quot;</span>
<a href="#l4.1566"></a><span id="l4.1566" class="difflineminus">-                                      length=&quot;30&quot;</span>
<a href="#l4.1567"></a><span id="l4.1567" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1568"></a><span id="l4.1568" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1569"></a><span id="l4.1569" class="difflineminus">-                                      unit=&quot;minutes&quot;/&gt;</span>
<a href="#l4.1570"></a><span id="l4.1570" class="difflineminus">-                            &lt;menuseparator id=&quot;reminder-minutes-separator&quot;/&gt;</span>
<a href="#l4.1571"></a><span id="l4.1571" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-1hour-menuitem&quot;</span>
<a href="#l4.1572"></a><span id="l4.1572" class="difflineminus">-                                      label=&quot;&amp;event.reminder.1hour.before.label;&quot;</span>
<a href="#l4.1573"></a><span id="l4.1573" class="difflineminus">-                                      length=&quot;1&quot;</span>
<a href="#l4.1574"></a><span id="l4.1574" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1575"></a><span id="l4.1575" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1576"></a><span id="l4.1576" class="difflineminus">-                                      unit=&quot;hours&quot;/&gt;</span>
<a href="#l4.1577"></a><span id="l4.1577" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-2hours-menuitem&quot;</span>
<a href="#l4.1578"></a><span id="l4.1578" class="difflineminus">-                                      label=&quot;&amp;event.reminder.2hours.before.label;&quot;</span>
<a href="#l4.1579"></a><span id="l4.1579" class="difflineminus">-                                      length=&quot;2&quot;</span>
<a href="#l4.1580"></a><span id="l4.1580" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1581"></a><span id="l4.1581" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1582"></a><span id="l4.1582" class="difflineminus">-                                      unit=&quot;hours&quot;/&gt;</span>
<a href="#l4.1583"></a><span id="l4.1583" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-12hours-menuitem&quot;</span>
<a href="#l4.1584"></a><span id="l4.1584" class="difflineminus">-                                      label=&quot;&amp;event.reminder.12hours.before.label;&quot;</span>
<a href="#l4.1585"></a><span id="l4.1585" class="difflineminus">-                                      length=&quot;12&quot;</span>
<a href="#l4.1586"></a><span id="l4.1586" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1587"></a><span id="l4.1587" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1588"></a><span id="l4.1588" class="difflineminus">-                                      unit=&quot;hours&quot;/&gt;</span>
<a href="#l4.1589"></a><span id="l4.1589" class="difflineminus">-                            &lt;menuseparator id=&quot;reminder-hours-separator&quot;/&gt;</span>
<a href="#l4.1590"></a><span id="l4.1590" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-1day-menuitem&quot;</span>
<a href="#l4.1591"></a><span id="l4.1591" class="difflineminus">-                                      label=&quot;&amp;event.reminder.1day.before.label;&quot;</span>
<a href="#l4.1592"></a><span id="l4.1592" class="difflineminus">-                                      length=&quot;1&quot;</span>
<a href="#l4.1593"></a><span id="l4.1593" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1594"></a><span id="l4.1594" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1595"></a><span id="l4.1595" class="difflineminus">-                                      unit=&quot;days&quot;/&gt;</span>
<a href="#l4.1596"></a><span id="l4.1596" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-2days-menuitem&quot;</span>
<a href="#l4.1597"></a><span id="l4.1597" class="difflineminus">-                                      label=&quot;&amp;event.reminder.2days.before.label;&quot;</span>
<a href="#l4.1598"></a><span id="l4.1598" class="difflineminus">-                                      length=&quot;2&quot;</span>
<a href="#l4.1599"></a><span id="l4.1599" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1600"></a><span id="l4.1600" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1601"></a><span id="l4.1601" class="difflineminus">-                                      unit=&quot;days&quot;/&gt;</span>
<a href="#l4.1602"></a><span id="l4.1602" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-1week-menuitem&quot;</span>
<a href="#l4.1603"></a><span id="l4.1603" class="difflineminus">-                                      label=&quot;&amp;event.reminder.1week.before.label;&quot;</span>
<a href="#l4.1604"></a><span id="l4.1604" class="difflineminus">-                                      length=&quot;7&quot;</span>
<a href="#l4.1605"></a><span id="l4.1605" class="difflineminus">-                                      origin=&quot;before&quot;</span>
<a href="#l4.1606"></a><span id="l4.1606" class="difflineminus">-                                      relation=&quot;START&quot;</span>
<a href="#l4.1607"></a><span id="l4.1607" class="difflineminus">-                                      unit=&quot;days&quot;/&gt;</span>
<a href="#l4.1608"></a><span id="l4.1608" class="difflineminus">-                            &lt;menuseparator id=&quot;reminder-custom-separator&quot;/&gt;</span>
<a href="#l4.1609"></a><span id="l4.1609" class="difflineminus">-                            &lt;menuitem id=&quot;reminder-custom-menuitem&quot;</span>
<a href="#l4.1610"></a><span id="l4.1610" class="difflineminus">-                                      label=&quot;&amp;event.reminder.custom.label;&quot;</span>
<a href="#l4.1611"></a><span id="l4.1611" class="difflineminus">-                                      value=&quot;custom&quot;/&gt;</span>
<a href="#l4.1612"></a><span id="l4.1612" class="difflineminus">-                        &lt;/menupopup&gt;</span>
<a href="#l4.1613"></a><span id="l4.1613" class="difflineminus">-                    &lt;/menulist&gt;</span>
<a href="#l4.1614"></a><span id="l4.1614" class="difflineminus">-                    &lt;hbox id=&quot;reminder-details&quot;&gt;</span>
<a href="#l4.1615"></a><span id="l4.1615" class="difflineminus">-                        &lt;hbox id=&quot;reminder-icon-box&quot;</span>
<a href="#l4.1616"></a><span id="l4.1616" class="difflineminus">-                              class=&quot;alarm-icons-box&quot;</span>
<a href="#l4.1617"></a><span id="l4.1617" class="difflineminus">-                              align=&quot;center&quot;/&gt;</span>
<a href="#l4.1618"></a><span id="l4.1618" class="difflineminus">-                        &lt;!-- TODO oncommand? onkeypress? --&gt;</span>
<a href="#l4.1619"></a><span id="l4.1619" class="difflineminus">-                        &lt;label id=&quot;reminder-multiple-alarms-label&quot;</span>
<a href="#l4.1620"></a><span id="l4.1620" class="difflineminus">-                               hidden=&quot;true&quot;</span>
<a href="#l4.1621"></a><span id="l4.1621" class="difflineminus">-                               value=&quot;&amp;event.reminder.multiple.label;&quot;</span>
<a href="#l4.1622"></a><span id="l4.1622" class="difflineminus">-                               class=&quot;text-link&quot;</span>
<a href="#l4.1623"></a><span id="l4.1623" class="difflineminus">-                               disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1624"></a><span id="l4.1624" class="difflineminus">-                               flex=&quot;1&quot;</span>
<a href="#l4.1625"></a><span id="l4.1625" class="difflineminus">-                               hyperlink=&quot;true&quot;</span>
<a href="#l4.1626"></a><span id="l4.1626" class="difflineminus">-                               onclick=&quot;updateReminder()&quot;/&gt;</span>
<a href="#l4.1627"></a><span id="l4.1627" class="difflineminus">-                        &lt;label id=&quot;reminder-single-alarms-label&quot;</span>
<a href="#l4.1628"></a><span id="l4.1628" class="difflineminus">-                               hidden=&quot;true&quot;</span>
<a href="#l4.1629"></a><span id="l4.1629" class="difflineminus">-                               class=&quot;text-link&quot;</span>
<a href="#l4.1630"></a><span id="l4.1630" class="difflineminus">-                               disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1631"></a><span id="l4.1631" class="difflineminus">-                               flex=&quot;1&quot;</span>
<a href="#l4.1632"></a><span id="l4.1632" class="difflineminus">-                               hyperlink=&quot;true&quot;</span>
<a href="#l4.1633"></a><span id="l4.1633" class="difflineminus">-                               onclick=&quot;updateReminder()&quot;/&gt;</span>
<a href="#l4.1634"></a><span id="l4.1634" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l4.1635"></a><span id="l4.1635" class="difflineminus">-               &lt;/hbox&gt;</span>
<a href="#l4.1636"></a><span id="l4.1636" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1637"></a><span id="l4.1637" class="difflineplus">+    &lt;!-- toolbarpalette items are added with an overlay --&gt;</span>
<a href="#l4.1638"></a><span id="l4.1638" class="difflineplus">+    &lt;toolbarpalette id=&quot;event-toolbarpalette&quot;/&gt;</span>
<a href="#l4.1639"></a><span id="l4.1639" class="difflineplus">+    &lt;!-- toolboxid is set here since we move the toolbar around in tabs --&gt;</span>
<a href="#l4.1640"></a><span id="l4.1640" class="difflineplus">+    &lt;toolbar id=&quot;event-toolbar&quot;</span>
<a href="#l4.1641"></a><span id="l4.1641" class="difflineplus">+             toolboxid=&quot;event-toolbox&quot;</span>
<a href="#l4.1642"></a><span id="l4.1642" class="difflineplus">+             class=&quot;chromeclass-toolbar&quot;</span>
<a href="#l4.1643"></a><span id="l4.1643" class="difflineplus">+             customizable=&quot;true&quot;</span>
<a href="#l4.1644"></a><span id="l4.1644" class="difflineplus">+             labelalign=&quot;end&quot;</span>
<a href="#l4.1645"></a><span id="l4.1645" class="difflineplus">+             defaultlabelalign=&quot;end&quot;</span>
<a href="#l4.1646"></a><span id="l4.1646" class="difflineplus">+             context=&quot;event-dialog-toolbar-context-menu&quot;</span>
<a href="#l4.1647"></a><span id="l4.1647" class="difflineplus">+             defaultset=&quot;button-save,button-attendees,button-privacy,button-url,button-delete&quot;/&gt;</span>
<a href="#l4.1648"></a><span id="l4.1648" class="difflineplus">+    &lt;toolbarset id=&quot;custom-toolbars&quot;/&gt;</span>
<a href="#l4.1649"></a><span id="l4.1649" class="difflineplus">+  &lt;/toolbox&gt;</span>
<a href="#l4.1650"></a><span id="l4.1650"> </span>
<a href="#l4.1651"></a><span id="l4.1651" class="difflineminus">-            &lt;separator id=&quot;event-grid-tabbox-separator&quot;</span>
<a href="#l4.1652"></a><span id="l4.1652" class="difflineminus">-                       class=&quot;groove&quot;/&gt;</span>
<a href="#l4.1653"></a><span id="l4.1653" class="difflineplus">+  &lt;iframe id=&quot;lightning-item-panel-iframe&quot;</span>
<a href="#l4.1654"></a><span id="l4.1654" class="difflineplus">+          flex=&quot;1&quot;</span>
<a href="#l4.1655"></a><span id="l4.1655" class="difflineplus">+          src=&quot;chrome://lightning/content/lightning-item-iframe.xul&quot;/&gt;</span>
<a href="#l4.1656"></a><span id="l4.1656"> </span>
<a href="#l4.1657"></a><span id="l4.1657" class="difflineminus">-            &lt;!-- Multi purpose tab box --&gt;</span>
<a href="#l4.1658"></a><span id="l4.1658" class="difflineminus">-            &lt;tabbox id=&quot;event-grid-tabbox&quot;</span>
<a href="#l4.1659"></a><span id="l4.1659" class="difflineminus">-                    selectedIndex=&quot;0&quot;</span>
<a href="#l4.1660"></a><span id="l4.1660" class="difflineminus">-                    flex=&quot;1&quot;&gt;</span>
<a href="#l4.1661"></a><span id="l4.1661" class="difflineminus">-              &lt;tabs id=&quot;event-grid-tabs&quot;&gt;</span>
<a href="#l4.1662"></a><span id="l4.1662" class="difflineminus">-                &lt;tab id=&quot;event-grid-tab-description&quot;</span>
<a href="#l4.1663"></a><span id="l4.1663" class="difflineminus">-                     label=&quot;&amp;event.description.label;&quot;</span>
<a href="#l4.1664"></a><span id="l4.1664" class="difflineminus">-                     accesskey=&quot;&amp;event.description.accesskey;&quot;/&gt;</span>
<a href="#l4.1665"></a><span id="l4.1665" class="difflineminus">-                &lt;tab id=&quot;event-grid-tab-attachments&quot;</span>
<a href="#l4.1666"></a><span id="l4.1666" class="difflineminus">-                     label=&quot;&amp;event.attachments.label;&quot;</span>
<a href="#l4.1667"></a><span id="l4.1667" class="difflineminus">-                      accesskey=&quot;&amp;event.attachments.accesskey;&quot;/&gt;</span>
<a href="#l4.1668"></a><span id="l4.1668" class="difflineminus">-                &lt;tab id=&quot;event-grid-tab-attendees&quot;</span>
<a href="#l4.1669"></a><span id="l4.1669" class="difflineminus">-                     label=&quot;&amp;event.attendees.label;&quot;</span>
<a href="#l4.1670"></a><span id="l4.1670" class="difflineminus">-                     accesskey=&quot;&amp;event.attendees.accesskey;&quot;</span>
<a href="#l4.1671"></a><span id="l4.1671" class="difflineminus">-                     collapsed=&quot;true&quot;/&gt;</span>
<a href="#l4.1672"></a><span id="l4.1672" class="difflineminus">-              &lt;/tabs&gt;</span>
<a href="#l4.1673"></a><span id="l4.1673" class="difflineminus">-              &lt;tabpanels id=&quot;event-grid-tabpanels&quot;</span>
<a href="#l4.1674"></a><span id="l4.1674" class="difflineminus">-                         flex=&quot;1&quot;&gt;</span>
<a href="#l4.1675"></a><span id="l4.1675" class="difflineminus">-                &lt;tabpanel id=&quot;event-grid-tabpanel-description&quot;&gt;</span>
<a href="#l4.1676"></a><span id="l4.1676" class="difflineminus">-                  &lt;textbox id=&quot;item-description&quot;</span>
<a href="#l4.1677"></a><span id="l4.1677" class="difflineminus">-                           disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1678"></a><span id="l4.1678" class="difflineminus">-                           flex=&quot;1&quot;</span>
<a href="#l4.1679"></a><span id="l4.1679" class="difflineminus">-                           multiline=&quot;true&quot;</span>
<a href="#l4.1680"></a><span id="l4.1680" class="difflineminus">-                           rows=&quot;12&quot;/&gt;</span>
<a href="#l4.1681"></a><span id="l4.1681" class="difflineminus">-                &lt;/tabpanel&gt;</span>
<a href="#l4.1682"></a><span id="l4.1682" class="difflineminus">-                &lt;tabpanel id=&quot;event-grid-tabpanel-attachements&quot;&gt;</span>
<a href="#l4.1683"></a><span id="l4.1683" class="difflineminus">-                    &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.1684"></a><span id="l4.1684" class="difflineminus">-                      &lt;listbox id=&quot;attachment-link&quot;</span>
<a href="#l4.1685"></a><span id="l4.1685" class="difflineminus">-                               context=&quot;attachment-popup&quot;</span>
<a href="#l4.1686"></a><span id="l4.1686" class="difflineminus">-                               rows=&quot;3&quot;</span>
<a href="#l4.1687"></a><span id="l4.1687" class="difflineminus">-                               flex=&quot;1&quot;</span>
<a href="#l4.1688"></a><span id="l4.1688" class="difflineminus">-                               disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1689"></a><span id="l4.1689" class="difflineminus">-                               onkeypress=&quot;attachmentLinkKeyPress(event)&quot;</span>
<a href="#l4.1690"></a><span id="l4.1690" class="difflineminus">-                               onclick=&quot;attachmentClick(event);&quot;</span>
<a href="#l4.1691"></a><span id="l4.1691" class="difflineminus">-                               ondblclick=&quot;attachmentDblClick(event);&quot;/&gt;</span>
<a href="#l4.1692"></a><span id="l4.1692" class="difflineminus">-                    &lt;/vbox&gt;</span>
<a href="#l4.1693"></a><span id="l4.1693" class="difflineminus">-                &lt;/tabpanel&gt;</span>
<a href="#l4.1694"></a><span id="l4.1694" class="difflineminus">-                &lt;tabpanel id=&quot;event-grid-tabpanel-attendees&quot;</span>
<a href="#l4.1695"></a><span id="l4.1695" class="difflineminus">-                          collapsed=&quot;true&quot;&gt;</span>
<a href="#l4.1696"></a><span id="l4.1696" class="difflineminus">-                  &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.1697"></a><span id="l4.1697" class="difflineminus">-                    &lt;hbox id=&quot;item-organizer-row&quot;</span>
<a href="#l4.1698"></a><span id="l4.1698" class="difflineminus">-                          collapsed=&quot;true&quot;</span>
<a href="#l4.1699"></a><span id="l4.1699" class="difflineminus">-                          align=&quot;top&quot;</span>
<a href="#l4.1700"></a><span id="l4.1700" class="difflineminus">-                          class=&quot;item-attendees-row&quot;&gt;</span>
<a href="#l4.1701"></a><span id="l4.1701" class="difflineminus">-                      &lt;label value=&quot;&amp;read.only.organizer.label;&quot;/&gt;</span>
<a href="#l4.1702"></a><span id="l4.1702" class="difflineminus">-                      &lt;hbox class=&quot;item-organizer-cell&quot;&gt;</span>
<a href="#l4.1703"></a><span id="l4.1703" class="difflineminus">-                        &lt;img class=&quot;itip-icon&quot;/&gt;</span>
<a href="#l4.1704"></a><span id="l4.1704" class="difflineminus">-                        &lt;label id=&quot;item-organizer&quot;</span>
<a href="#l4.1705"></a><span id="l4.1705" class="difflineminus">-                               class=&quot;item-attendees-cell-label&quot;</span>
<a href="#l4.1706"></a><span id="l4.1706" class="difflineminus">-                               crop=&quot;right&quot;/&gt;</span>
<a href="#l4.1707"></a><span id="l4.1707" class="difflineminus">-                      &lt;/hbox&gt;</span>
<a href="#l4.1708"></a><span id="l4.1708" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l4.1709"></a><span id="l4.1709" class="difflineminus">-                    &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.1710"></a><span id="l4.1710" class="difflineminus">-                      &lt;vbox id=&quot;item-attendees-box&quot;</span>
<a href="#l4.1711"></a><span id="l4.1711" class="difflineminus">-                            dialog-type=&quot;event&quot;</span>
<a href="#l4.1712"></a><span id="l4.1712" class="difflineminus">-                            flex=&quot;1&quot;</span>
<a href="#l4.1713"></a><span id="l4.1713" class="difflineminus">-                            context=&quot;attendee-popup&quot;</span>
<a href="#l4.1714"></a><span id="l4.1714" class="difflineminus">-                            onclick=&quot;attendeeClick(event)&quot;</span>
<a href="#l4.1715"></a><span id="l4.1715" class="difflineminus">-                            disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1716"></a><span id="l4.1716" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l4.1717"></a><span id="l4.1717" class="difflineminus">-                    &lt;hbox id=&quot;notify-options&quot; align=&quot;center&quot;&gt;</span>
<a href="#l4.1718"></a><span id="l4.1718" class="difflineminus">-                      &lt;checkbox id=&quot;notify-attendees-checkbox&quot;</span>
<a href="#l4.1719"></a><span id="l4.1719" class="difflineminus">-                                label=&quot;&amp;event.attendees.notify.label;&quot;</span>
<a href="#l4.1720"></a><span id="l4.1720" class="difflineminus">-                                accesskey=&quot;&amp;event.attendees.notify.accesskey;&quot;</span>
<a href="#l4.1721"></a><span id="l4.1721" class="difflineminus">-                                oncommand=&quot;changeUndiscloseCheckboxStatus();&quot;</span>
<a href="#l4.1722"></a><span id="l4.1722" class="difflineminus">-                                pack=&quot;start&quot;/&gt;</span>
<a href="#l4.1723"></a><span id="l4.1723" class="difflineminus">-                      &lt;checkbox id=&quot;undisclose-attendees-checkbox&quot;</span>
<a href="#l4.1724"></a><span id="l4.1724" class="difflineminus">-                                label=&quot;&amp;event.attendees.notifyundisclosed.label;&quot;</span>
<a href="#l4.1725"></a><span id="l4.1725" class="difflineminus">-                                accesskey=&quot;&amp;event.attendees.notifyundisclosed.accesskey;&quot;</span>
<a href="#l4.1726"></a><span id="l4.1726" class="difflineminus">-                                tooltiptext=&quot;&amp;event.attendees.notifyundisclosed.tooltip;&quot;</span>
<a href="#l4.1727"></a><span id="l4.1727" class="difflineminus">-                                pack=&quot;start&quot;/&gt;</span>
<a href="#l4.1728"></a><span id="l4.1728" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l4.1729"></a><span id="l4.1729" class="difflineminus">-                  &lt;/vbox&gt;</span>
<a href="#l4.1730"></a><span id="l4.1730" class="difflineminus">-                &lt;/tabpanel&gt;</span>
<a href="#l4.1731"></a><span id="l4.1731" class="difflineminus">-              &lt;/tabpanels&gt;</span>
<a href="#l4.1732"></a><span id="l4.1732" class="difflineminus">-            &lt;/tabbox&gt;</span>
<a href="#l4.1733"></a><span id="l4.1733" class="difflineminus">-</span>
<a href="#l4.1734"></a><span id="l4.1734" class="difflineminus">-            &lt;separator id=&quot;event-grid-link-separator&quot;</span>
<a href="#l4.1735"></a><span id="l4.1735" class="difflineminus">-                       class=&quot;groove&quot;</span>
<a href="#l4.1736"></a><span id="l4.1736" class="difflineminus">-                       hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1737"></a><span id="l4.1737" class="difflineminus">-            &lt;row id=&quot;event-grid-link-row&quot;</span>
<a href="#l4.1738"></a><span id="l4.1738" class="difflineminus">-                 align=&quot;center&quot;</span>
<a href="#l4.1739"></a><span id="l4.1739" class="difflineminus">-                 hidden=&quot;true&quot;&gt;</span>
<a href="#l4.1740"></a><span id="l4.1740" class="difflineminus">-                &lt;label value=&quot;&amp;event.url.label;&quot;</span>
<a href="#l4.1741"></a><span id="l4.1741" class="difflineminus">-                       control=&quot;url-link&quot;/&gt;</span>
<a href="#l4.1742"></a><span id="l4.1742" class="difflineminus">-                &lt;label id=&quot;url-link&quot;</span>
<a href="#l4.1743"></a><span id="l4.1743" class="difflineminus">-                       onclick=&quot;launchBrowser(this.getAttribute('href'), event)&quot;</span>
<a href="#l4.1744"></a><span id="l4.1744" class="difflineminus">-                       oncommand=&quot;launchBrowser(this.getAttribute('href'), event)&quot;</span>
<a href="#l4.1745"></a><span id="l4.1745" class="difflineminus">-                       class=&quot;text-link&quot;</span>
<a href="#l4.1746"></a><span id="l4.1746" class="difflineminus">-                       crop=&quot;end&quot;/&gt;</span>
<a href="#l4.1747"></a><span id="l4.1747" class="difflineminus">-            &lt;/row&gt;</span>
<a href="#l4.1748"></a><span id="l4.1748" class="difflineminus">-        &lt;/rows&gt;</span>
<a href="#l4.1749"></a><span id="l4.1749" class="difflineminus">-    &lt;/grid&gt;</span>
<a href="#l4.1750"></a><span id="l4.1750" class="difflineminus">-</span>
<a href="#l4.1751"></a><span id="l4.1751" class="difflineminus">-    &lt;statusbar class=&quot;chromeclass-status&quot; id=&quot;status-bar&quot;&gt;</span>
<a href="#l4.1752"></a><span id="l4.1752" class="difflineminus">-      &lt;statusbarpanel id=&quot;status-text&quot;</span>
<a href="#l4.1753"></a><span id="l4.1753" class="difflineminus">-                      flex=&quot;1&quot;/&gt;</span>
<a href="#l4.1754"></a><span id="l4.1754" class="difflineminus">-      &lt;statusbarpanel id=&quot;status-privacy&quot;</span>
<a href="#l4.1755"></a><span id="l4.1755" class="difflineminus">-                      align=&quot;center&quot;</span>
<a href="#l4.1756"></a><span id="l4.1756" class="difflineminus">-                      flex=&quot;1&quot;</span>
<a href="#l4.1757"></a><span id="l4.1757" class="difflineminus">-                      collapsed=&quot;true&quot;</span>
<a href="#l4.1758"></a><span id="l4.1758" class="difflineminus">-                      pack=&quot;start&quot;&gt;</span>
<a href="#l4.1759"></a><span id="l4.1759" class="difflineminus">-        &lt;label value=&quot;&amp;event.statusbarpanel.privacy.label;&quot;/&gt;</span>
<a href="#l4.1760"></a><span id="l4.1760" class="difflineminus">-        &lt;hbox id=&quot;status-privacy-public-box&quot; privacy=&quot;PUBLIC&quot;&gt;</span>
<a href="#l4.1761"></a><span id="l4.1761" class="difflineminus">-          &lt;label value=&quot;&amp;event.menu.options.privacy.public.label;&quot;/&gt;</span>
<a href="#l4.1762"></a><span id="l4.1762" class="difflineminus">-        &lt;/hbox&gt;</span>
<a href="#l4.1763"></a><span id="l4.1763" class="difflineminus">-        &lt;hbox id=&quot;status-privacy-confidential-box&quot; privacy=&quot;CONFIDENTIAL&quot;&gt;</span>
<a href="#l4.1764"></a><span id="l4.1764" class="difflineminus">-          &lt;label value=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;/&gt;</span>
<a href="#l4.1765"></a><span id="l4.1765" class="difflineminus">-        &lt;/hbox&gt;</span>
<a href="#l4.1766"></a><span id="l4.1766" class="difflineminus">-        &lt;hbox id=&quot;status-privacy-private-box&quot; privacy=&quot;PRIVATE&quot;&gt;</span>
<a href="#l4.1767"></a><span id="l4.1767" class="difflineminus">-          &lt;label value=&quot;&amp;event.menu.options.privacy.private.label;&quot;/&gt;</span>
<a href="#l4.1768"></a><span id="l4.1768" class="difflineminus">-        &lt;/hbox&gt;</span>
<a href="#l4.1769"></a><span id="l4.1769" class="difflineminus">-      &lt;/statusbarpanel&gt;</span>
<a href="#l4.1770"></a><span id="l4.1770" class="difflineminus">-      &lt;statusbarpanel id=&quot;status-priority&quot;</span>
<a href="#l4.1771"></a><span id="l4.1771" class="difflineminus">-                      align=&quot;center&quot;</span>
<a href="#l4.1772"></a><span id="l4.1772" class="difflineminus">-                      flex=&quot;1&quot;</span>
<a href="#l4.1773"></a><span id="l4.1773" class="difflineminus">-                      collapsed=&quot;true&quot;</span>
<a href="#l4.1774"></a><span id="l4.1774" class="difflineminus">-                      pack=&quot;start&quot;&gt;</span>
<a href="#l4.1775"></a><span id="l4.1775" class="difflineminus">-        &lt;label value=&quot;&amp;event.priority2.label;&quot;/&gt;</span>
<a href="#l4.1776"></a><span id="l4.1776" class="difflineminus">-        &lt;image id=&quot;image-priority-low&quot;</span>
<a href="#l4.1777"></a><span id="l4.1777" class="difflineminus">-               class=&quot;cal-statusbar-1&quot;</span>
<a href="#l4.1778"></a><span id="l4.1778" class="difflineminus">-               collapsed=&quot;true&quot;</span>
<a href="#l4.1779"></a><span id="l4.1779" class="difflineminus">-               value=&quot;low&quot;/&gt;</span>
<a href="#l4.1780"></a><span id="l4.1780" class="difflineminus">-        &lt;image id=&quot;image-priority-normal&quot;</span>
<a href="#l4.1781"></a><span id="l4.1781" class="difflineminus">-               class=&quot;cal-statusbar-1&quot;</span>
<a href="#l4.1782"></a><span id="l4.1782" class="difflineminus">-               collapsed=&quot;true&quot;</span>
<a href="#l4.1783"></a><span id="l4.1783" class="difflineminus">-               value=&quot;normal&quot;/&gt;</span>
<a href="#l4.1784"></a><span id="l4.1784" class="difflineminus">-        &lt;image id=&quot;image-priority-high&quot;</span>
<a href="#l4.1785"></a><span id="l4.1785" class="difflineminus">-               class=&quot;cal-statusbar-1&quot;</span>
<a href="#l4.1786"></a><span id="l4.1786" class="difflineminus">-               collapsed=&quot;true&quot;</span>
<a href="#l4.1787"></a><span id="l4.1787" class="difflineminus">-               value=&quot;high&quot;/&gt;</span>
<a href="#l4.1788"></a><span id="l4.1788" class="difflineminus">-      &lt;/statusbarpanel&gt;</span>
<a href="#l4.1789"></a><span id="l4.1789" class="difflineminus">-      &lt;statusbarpanel id=&quot;status-status&quot;</span>
<a href="#l4.1790"></a><span id="l4.1790" class="difflineminus">-                      align=&quot;center&quot;</span>
<a href="#l4.1791"></a><span id="l4.1791" class="difflineminus">-                      flex=&quot;1&quot;</span>
<a href="#l4.1792"></a><span id="l4.1792" class="difflineminus">-                      collapsed=&quot;true&quot;</span>
<a href="#l4.1793"></a><span id="l4.1793" class="difflineminus">-                      pack=&quot;start&quot;&gt;</span>
<a href="#l4.1794"></a><span id="l4.1794" class="difflineminus">-        &lt;label value=&quot;&amp;task.status.label;&quot;/&gt;</span>
<a href="#l4.1795"></a><span id="l4.1795" class="difflineminus">-        &lt;label id=&quot;status-status-tentative-label&quot;</span>
<a href="#l4.1796"></a><span id="l4.1796" class="difflineminus">-               value=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l4.1797"></a><span id="l4.1797" class="difflineminus">-               hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1798"></a><span id="l4.1798" class="difflineminus">-        &lt;label id=&quot;status-status-confirmed-label&quot;</span>
<a href="#l4.1799"></a><span id="l4.1799" class="difflineminus">-               value=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l4.1800"></a><span id="l4.1800" class="difflineminus">-               hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1801"></a><span id="l4.1801" class="difflineminus">-        &lt;label id=&quot;status-status-cancelled-label&quot;</span>
<a href="#l4.1802"></a><span id="l4.1802" class="difflineminus">-               value=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l4.1803"></a><span id="l4.1803" class="difflineminus">-               hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1804"></a><span id="l4.1804" class="difflineminus">-      &lt;/statusbarpanel&gt;</span>
<a href="#l4.1805"></a><span id="l4.1805" class="difflineminus">-      &lt;statusbarpanel id=&quot;status-freebusy&quot;</span>
<a href="#l4.1806"></a><span id="l4.1806" class="difflineminus">-                      class=&quot;event-only&quot;</span>
<a href="#l4.1807"></a><span id="l4.1807" class="difflineminus">-                      align=&quot;center&quot;</span>
<a href="#l4.1808"></a><span id="l4.1808" class="difflineminus">-                      flex=&quot;1&quot;</span>
<a href="#l4.1809"></a><span id="l4.1809" class="difflineminus">-                      collapsed=&quot;true&quot;</span>
<a href="#l4.1810"></a><span id="l4.1810" class="difflineminus">-                      pack=&quot;start&quot;&gt;</span>
<a href="#l4.1811"></a><span id="l4.1811" class="difflineminus">-        &lt;label value=&quot;&amp;event.statusbarpanel.freebusy.label;&quot;/&gt;</span>
<a href="#l4.1812"></a><span id="l4.1812" class="difflineminus">-        &lt;label id=&quot;status-freebusy-free-label&quot;</span>
<a href="#l4.1813"></a><span id="l4.1813" class="difflineminus">-               value=&quot;&amp;event.freebusy.legend.free;&quot;</span>
<a href="#l4.1814"></a><span id="l4.1814" class="difflineminus">-               hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1815"></a><span id="l4.1815" class="difflineminus">-        &lt;label id=&quot;status-freebusy-busy-label&quot;</span>
<a href="#l4.1816"></a><span id="l4.1816" class="difflineminus">-               value=&quot;&amp;event.freebusy.legend.busy;&quot;</span>
<a href="#l4.1817"></a><span id="l4.1817" class="difflineminus">-               hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1818"></a><span id="l4.1818" class="difflineminus">-      &lt;/statusbarpanel&gt;</span>
<a href="#l4.1819"></a><span id="l4.1819" class="difflineminus">-    &lt;/statusbar&gt;</span>
<a href="#l4.1820"></a><span id="l4.1820" class="difflineminus">-</span>
<a href="#l4.1821"></a><span id="l4.1821" class="difflineminus">-    &lt;popupset id=&quot;event-dialog-popupset&quot;&gt;</span>
<a href="#l4.1822"></a><span id="l4.1822" class="difflineminus">-      &lt;menupopup id=&quot;attendee-popup&quot;&gt;</span>
<a href="#l4.1823"></a><span id="l4.1823" class="difflineminus">-        &lt;menuitem id=&quot;attendee-popup-invite-menuitem&quot;</span>
<a href="#l4.1824"></a><span id="l4.1824" class="difflineminus">-                  label=&quot;&amp;event.invite.attendees.label;&quot;</span>
<a href="#l4.1825"></a><span id="l4.1825" class="difflineminus">-                  accesskey=&quot;&amp;event.invite.attendees.accesskey;&quot;</span>
<a href="#l4.1826"></a><span id="l4.1826" class="difflineminus">-                  command=&quot;cmd_attendees&quot;</span>
<a href="#l4.1827"></a><span id="l4.1827" class="difflineminus">-                  disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l4.1828"></a><span id="l4.1828" class="difflineminus">-        &lt;menuitem id=&quot;attendee-popup-removeallattendees-menuitem&quot;</span>
<a href="#l4.1829"></a><span id="l4.1829" class="difflineminus">-                  label=&quot;&amp;event.remove.attendees.label2;&quot;</span>
<a href="#l4.1830"></a><span id="l4.1830" class="difflineminus">-                  accesskey=&quot;&amp;event.remove.attendees.accesskey;&quot;</span>
<a href="#l4.1831"></a><span id="l4.1831" class="difflineminus">-                  oncommand=&quot;removeAllAttendees()&quot;</span>
<a href="#l4.1832"></a><span id="l4.1832" class="difflineminus">-                  disable-on-readonly=&quot;true&quot;</span>
<a href="#l4.1833"></a><span id="l4.1833" class="difflineminus">-                  crop=&quot;end&quot;/&gt;</span>
<a href="#l4.1834"></a><span id="l4.1834" class="difflineminus">-        &lt;menuitem id=&quot;attendee-popup-removeattendee-menuitem&quot;</span>
<a href="#l4.1835"></a><span id="l4.1835" class="difflineminus">-                  label=&quot;&amp;event.remove.attendee.label;&quot;</span>
<a href="#l4.1836"></a><span id="l4.1836" class="difflineminus">-                  accesskey=&quot;&amp;event.remove.attendee.accesskey;&quot;</span>
<a href="#l4.1837"></a><span id="l4.1837" class="difflineminus">-                  oncommand=&quot;removeAttendee(event.target.attendee)&quot;</span>
<a href="#l4.1838"></a><span id="l4.1838" class="difflineminus">-                  crop=&quot;end&quot;/&gt;</span>
<a href="#l4.1839"></a><span id="l4.1839" class="difflineminus">-        &lt;menuseparator id=&quot;attendee-popup-first-separator&quot;/&gt;</span>
<a href="#l4.1840"></a><span id="l4.1840" class="difflineminus">-        &lt;menuitem id=&quot;attendee-popup-sendemail-menuitem&quot;</span>
<a href="#l4.1841"></a><span id="l4.1841" class="difflineminus">-                  label=&quot;&amp;event.email.attendees.label;&quot;</span>
<a href="#l4.1842"></a><span id="l4.1842" class="difflineminus">-                  accesskey=&quot;&amp;event.email.attendees.accesskey;&quot;</span>
<a href="#l4.1843"></a><span id="l4.1843" class="difflineminus">-                  command=&quot;cmd_email&quot;/&gt;</span>
<a href="#l4.1844"></a><span id="l4.1844" class="difflineminus">-        &lt;menuitem id=&quot;attendee-popup-sendtentativeemail-menuitem&quot;</span>
<a href="#l4.1845"></a><span id="l4.1845" class="difflineminus">-                  label=&quot;&amp;event.email.tentative.attendees.label;&quot;</span>
<a href="#l4.1846"></a><span id="l4.1846" class="difflineminus">-                  accesskey=&quot;&amp;event.email.tentative.attendees.accesskey;&quot;</span>
<a href="#l4.1847"></a><span id="l4.1847" class="difflineminus">-                  command=&quot;cmd_email_undecided&quot;/&gt;</span>
<a href="#l4.1848"></a><span id="l4.1848" class="difflineminus">-        &lt;menuseparator id=&quot;attendee-popup-second-separator&quot;/&gt;</span>
<a href="#l4.1849"></a><span id="l4.1849" class="difflineminus">-        &lt;menuitem id=&quot;attendee-popup-emailattendee-menuitem&quot;</span>
<a href="#l4.1850"></a><span id="l4.1850" class="difflineminus">-                  oncommand=&quot;sendMailToAttendees([event.target.attendee])&quot;</span>
<a href="#l4.1851"></a><span id="l4.1851" class="difflineminus">-                  crop=&quot;end&quot;/&gt;</span>
<a href="#l4.1852"></a><span id="l4.1852" class="difflineminus">-      &lt;/menupopup&gt;</span>
<a href="#l4.1853"></a><span id="l4.1853" class="difflineminus">-      &lt;menupopup id=&quot;attachment-popup&quot;&gt;</span>
<a href="#l4.1854"></a><span id="l4.1854" class="difflineminus">-            &lt;menuitem id=&quot;attachment-popup-open&quot;</span>
<a href="#l4.1855"></a><span id="l4.1855" class="difflineminus">-                      label=&quot;&amp;event.attachments.popup.open.label;&quot;</span>
<a href="#l4.1856"></a><span id="l4.1856" class="difflineminus">-                      accesskey=&quot;&amp;event.attachments.popup.open.accesskey;&quot;</span>
<a href="#l4.1857"></a><span id="l4.1857" class="difflineminus">-                      command=&quot;cmd_openAttachment&quot;/&gt;</span>
<a href="#l4.1858"></a><span id="l4.1858" class="difflineminus">-            &lt;menuitem id=&quot;attachment-popup-copy&quot;</span>
<a href="#l4.1859"></a><span id="l4.1859" class="difflineminus">-                      label=&quot;&amp;calendar.copylink.label;&quot;</span>
<a href="#l4.1860"></a><span id="l4.1860" class="difflineminus">-                      accesskey=&quot;&amp;calendar.copylink.accesskey;&quot;</span>
<a href="#l4.1861"></a><span id="l4.1861" class="difflineminus">-                      command=&quot;cmd_copyAttachment&quot;/&gt;</span>
<a href="#l4.1862"></a><span id="l4.1862" class="difflineminus">-            &lt;menuitem id=&quot;attachment-popup-delete&quot;</span>
<a href="#l4.1863"></a><span id="l4.1863" class="difflineminus">-                      label=&quot;&amp;event.attachments.popup.remove.label;&quot;</span>
<a href="#l4.1864"></a><span id="l4.1864" class="difflineminus">-                      accesskey=&quot;&amp;event.attachments.popup.remove.accesskey;&quot;</span>
<a href="#l4.1865"></a><span id="l4.1865" class="difflineminus">-                      command=&quot;cmd_deleteAttachment&quot;/&gt;</span>
<a href="#l4.1866"></a><span id="l4.1866" class="difflineminus">-            &lt;menuitem id=&quot;attachment-popup-deleteAll&quot;</span>
<a href="#l4.1867"></a><span id="l4.1867" class="difflineminus">-                      label=&quot;&amp;event.attachments.popup.removeAll.label;&quot;</span>
<a href="#l4.1868"></a><span id="l4.1868" class="difflineminus">-                      accesskey=&quot;&amp;event.attachments.popup.removeAll.accesskey;&quot;</span>
<a href="#l4.1869"></a><span id="l4.1869" class="difflineminus">-                      command=&quot;cmd_deleteAllAttachments&quot;/&gt;</span>
<a href="#l4.1870"></a><span id="l4.1870" class="difflineminus">-            &lt;menuseparator/&gt;</span>
<a href="#l4.1871"></a><span id="l4.1871" class="difflineminus">-            &lt;menuitem id=&quot;attachment-popup-attachPage&quot;</span>
<a href="#l4.1872"></a><span id="l4.1872" class="difflineminus">-                      label=&quot;&amp;event.attachments.popup.attachPage.label;&quot;</span>
<a href="#l4.1873"></a><span id="l4.1873" class="difflineminus">-                      accesskey=&quot;&amp;event.attachments.popup.attachPage.accesskey;&quot;</span>
<a href="#l4.1874"></a><span id="l4.1874" class="difflineminus">-                      command=&quot;cmd_attach_url&quot;/&gt;</span>
<a href="#l4.1875"></a><span id="l4.1875" class="difflineminus">-      &lt;/menupopup&gt;</span>
<a href="#l4.1876"></a><span id="l4.1876" class="difflineminus">-      &lt;menupopup id=&quot;timezone-popup&quot; position=&quot;after_start&quot; oncommand=&quot;chooseRecentTimezone(event)&quot;&gt;</span>
<a href="#l4.1877"></a><span id="l4.1877" class="difflineminus">-        &lt;menuitem id=&quot;timezone-popup-defaulttz&quot;/&gt;</span>
<a href="#l4.1878"></a><span id="l4.1878" class="difflineminus">-        &lt;menuseparator id=&quot;timezone-popup-menuseparator&quot;/&gt;</span>
<a href="#l4.1879"></a><span id="l4.1879" class="difflineminus">-        &lt;menuitem id=&quot;timezone-custom-menuitem&quot;</span>
<a href="#l4.1880"></a><span id="l4.1880" class="difflineminus">-                  label=&quot;&amp;event.timezone.custom.label;&quot;</span>
<a href="#l4.1881"></a><span id="l4.1881" class="difflineminus">-                  value=&quot;custom&quot;</span>
<a href="#l4.1882"></a><span id="l4.1882" class="difflineminus">-                  oncommand=&quot;this.parentNode.editTimezone()&quot;/&gt;</span>
<a href="#l4.1883"></a><span id="l4.1883" class="difflineminus">-      &lt;/menupopup&gt;</span>
<a href="#l4.1884"></a><span id="l4.1884" class="difflineminus">-    &lt;/popupset&gt;</span>
<a href="#l4.1885"></a><span id="l4.1885" class="difflineminus">-</span>
<a href="#l4.1886"></a><span id="l4.1886" class="difflineminus">-    &lt;!-- attendee box template --&gt;</span>
<a href="#l4.1887"></a><span id="l4.1887" class="difflineminus">-    &lt;vbox id=&quot;item-attendees-box-template&quot;</span>
<a href="#l4.1888"></a><span id="l4.1888" class="difflineminus">-          hidden=&quot;true&quot;&gt;</span>
<a href="#l4.1889"></a><span id="l4.1889" class="difflineminus">-      &lt;hbox flex=&quot;1&quot; class=&quot;item-attendees-row&quot; equalsize=&quot;always&quot; hidden=&quot;true&quot;&gt;</span>
<a href="#l4.1890"></a><span id="l4.1890" class="difflineminus">-        &lt;box class=&quot;item-attendees-cell&quot;</span>
<a href="#l4.1891"></a><span id="l4.1891" class="difflineminus">-             hidden=&quot;true&quot;</span>
<a href="#l4.1892"></a><span id="l4.1892" class="difflineminus">-             flex=&quot;1&quot;</span>
<a href="#l4.1893"></a><span id="l4.1893" class="difflineminus">-             context=&quot;attendee-popup&quot;</span>
<a href="#l4.1894"></a><span id="l4.1894" class="difflineminus">-             ondblclick=&quot;attendeeDblClick(event)&quot;</span>
<a href="#l4.1895"></a><span id="l4.1895" class="difflineminus">-             onclick=&quot;attendeeClick(event)&quot;&gt;</span>
<a href="#l4.1896"></a><span id="l4.1896" class="difflineminus">-          &lt;img class=&quot;itip-icon&quot;/&gt;</span>
<a href="#l4.1897"></a><span id="l4.1897" class="difflineminus">-          &lt;label class=&quot;item-attendees-cell-label&quot;</span>
<a href="#l4.1898"></a><span id="l4.1898" class="difflineminus">-                 crop=&quot;end&quot;</span>
<a href="#l4.1899"></a><span id="l4.1899" class="difflineminus">-                 flex=&quot;1&quot;/&gt;</span>
<a href="#l4.1900"></a><span id="l4.1900" class="difflineminus">-        &lt;/box&gt;</span>
<a href="#l4.1901"></a><span id="l4.1901" class="difflineminus">-        &lt;box hidden=&quot;true&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l4.1902"></a><span id="l4.1902" class="difflineplus">+  &lt;statusbar class=&quot;chromeclass-status&quot; id=&quot;status-bar&quot;&gt;</span>
<a href="#l4.1903"></a><span id="l4.1903" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-text&quot;</span>
<a href="#l4.1904"></a><span id="l4.1904" class="difflineplus">+                    flex=&quot;1&quot;/&gt;</span>
<a href="#l4.1905"></a><span id="l4.1905" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-privacy&quot;</span>
<a href="#l4.1906"></a><span id="l4.1906" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l4.1907"></a><span id="l4.1907" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l4.1908"></a><span id="l4.1908" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l4.1909"></a><span id="l4.1909" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l4.1910"></a><span id="l4.1910" class="difflineplus">+      &lt;label value=&quot;&amp;event.statusbarpanel.privacy.label;&quot;/&gt;</span>
<a href="#l4.1911"></a><span id="l4.1911" class="difflineplus">+      &lt;hbox id=&quot;status-privacy-public-box&quot; privacy=&quot;PUBLIC&quot;&gt;</span>
<a href="#l4.1912"></a><span id="l4.1912" class="difflineplus">+        &lt;label value=&quot;&amp;event.menu.options.privacy.public.label;&quot;/&gt;</span>
<a href="#l4.1913"></a><span id="l4.1913" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l4.1914"></a><span id="l4.1914" class="difflineplus">+      &lt;hbox id=&quot;status-privacy-confidential-box&quot; privacy=&quot;CONFIDENTIAL&quot;&gt;</span>
<a href="#l4.1915"></a><span id="l4.1915" class="difflineplus">+        &lt;label value=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;/&gt;</span>
<a href="#l4.1916"></a><span id="l4.1916" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l4.1917"></a><span id="l4.1917" class="difflineplus">+      &lt;hbox id=&quot;status-privacy-private-box&quot; privacy=&quot;PRIVATE&quot;&gt;</span>
<a href="#l4.1918"></a><span id="l4.1918" class="difflineplus">+        &lt;label value=&quot;&amp;event.menu.options.privacy.private.label;&quot;/&gt;</span>
<a href="#l4.1919"></a><span id="l4.1919">       &lt;/hbox&gt;</span>
<a href="#l4.1920"></a><span id="l4.1920" class="difflineminus">-    &lt;/vbox&gt;</span>
<a href="#l4.1921"></a><span id="l4.1921" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l4.1922"></a><span id="l4.1922" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-priority&quot;</span>
<a href="#l4.1923"></a><span id="l4.1923" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l4.1924"></a><span id="l4.1924" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l4.1925"></a><span id="l4.1925" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l4.1926"></a><span id="l4.1926" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l4.1927"></a><span id="l4.1927" class="difflineplus">+      &lt;label value=&quot;&amp;event.priority2.label;&quot;/&gt;</span>
<a href="#l4.1928"></a><span id="l4.1928" class="difflineplus">+      &lt;image id=&quot;image-priority-low&quot;</span>
<a href="#l4.1929"></a><span id="l4.1929" class="difflineplus">+             class=&quot;cal-statusbar-1&quot;</span>
<a href="#l4.1930"></a><span id="l4.1930" class="difflineplus">+             collapsed=&quot;true&quot;</span>
<a href="#l4.1931"></a><span id="l4.1931" class="difflineplus">+             value=&quot;low&quot;/&gt;</span>
<a href="#l4.1932"></a><span id="l4.1932" class="difflineplus">+      &lt;image id=&quot;image-priority-normal&quot;</span>
<a href="#l4.1933"></a><span id="l4.1933" class="difflineplus">+             class=&quot;cal-statusbar-1&quot;</span>
<a href="#l4.1934"></a><span id="l4.1934" class="difflineplus">+             collapsed=&quot;true&quot;</span>
<a href="#l4.1935"></a><span id="l4.1935" class="difflineplus">+             value=&quot;normal&quot;/&gt;</span>
<a href="#l4.1936"></a><span id="l4.1936" class="difflineplus">+      &lt;image id=&quot;image-priority-high&quot;</span>
<a href="#l4.1937"></a><span id="l4.1937" class="difflineplus">+             class=&quot;cal-statusbar-1&quot;</span>
<a href="#l4.1938"></a><span id="l4.1938" class="difflineplus">+             collapsed=&quot;true&quot;</span>
<a href="#l4.1939"></a><span id="l4.1939" class="difflineplus">+             value=&quot;high&quot;/&gt;</span>
<a href="#l4.1940"></a><span id="l4.1940" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l4.1941"></a><span id="l4.1941" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-status&quot;</span>
<a href="#l4.1942"></a><span id="l4.1942" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l4.1943"></a><span id="l4.1943" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l4.1944"></a><span id="l4.1944" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l4.1945"></a><span id="l4.1945" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l4.1946"></a><span id="l4.1946" class="difflineplus">+      &lt;label value=&quot;&amp;task.status.label;&quot;/&gt;</span>
<a href="#l4.1947"></a><span id="l4.1947" class="difflineplus">+      &lt;label id=&quot;status-status-tentative-label&quot;</span>
<a href="#l4.1948"></a><span id="l4.1948" class="difflineplus">+             value=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l4.1949"></a><span id="l4.1949" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1950"></a><span id="l4.1950" class="difflineplus">+      &lt;label id=&quot;status-status-confirmed-label&quot;</span>
<a href="#l4.1951"></a><span id="l4.1951" class="difflineplus">+             value=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l4.1952"></a><span id="l4.1952" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1953"></a><span id="l4.1953" class="difflineplus">+      &lt;label id=&quot;status-status-cancelled-label&quot;</span>
<a href="#l4.1954"></a><span id="l4.1954" class="difflineplus">+             value=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l4.1955"></a><span id="l4.1955" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1956"></a><span id="l4.1956" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l4.1957"></a><span id="l4.1957" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-freebusy&quot;</span>
<a href="#l4.1958"></a><span id="l4.1958" class="difflineplus">+                    class=&quot;event-only&quot;</span>
<a href="#l4.1959"></a><span id="l4.1959" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l4.1960"></a><span id="l4.1960" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l4.1961"></a><span id="l4.1961" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l4.1962"></a><span id="l4.1962" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l4.1963"></a><span id="l4.1963" class="difflineplus">+      &lt;label value=&quot;&amp;event.statusbarpanel.freebusy.label;&quot;/&gt;</span>
<a href="#l4.1964"></a><span id="l4.1964" class="difflineplus">+      &lt;label id=&quot;status-freebusy-free-label&quot;</span>
<a href="#l4.1965"></a><span id="l4.1965" class="difflineplus">+             value=&quot;&amp;event.freebusy.legend.free;&quot;</span>
<a href="#l4.1966"></a><span id="l4.1966" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1967"></a><span id="l4.1967" class="difflineplus">+      &lt;label id=&quot;status-freebusy-busy-label&quot;</span>
<a href="#l4.1968"></a><span id="l4.1968" class="difflineplus">+             value=&quot;&amp;event.freebusy.legend.busy;&quot;</span>
<a href="#l4.1969"></a><span id="l4.1969" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l4.1970"></a><span id="l4.1970" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l4.1971"></a><span id="l4.1971" class="difflineplus">+  &lt;/statusbar&gt;</span>
<a href="#l4.1972"></a><span id="l4.1972"> &lt;/dialog&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/jar.mn</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/jar.mn</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -46,17 +46,16 @@ calendar.jar:</span>
<a href="#l5.4"></a><span id="l5.4">     content/calendar/today-pane.js                         (content/today-pane.js)</span>
<a href="#l5.5"></a><span id="l5.5">     content/calendar/calendar-alarm-dialog.js              (content/dialogs/calendar-alarm-dialog.js)</span>
<a href="#l5.6"></a><span id="l5.6">     content/calendar/calendar-alarm-dialog.xul             (content/dialogs/calendar-alarm-dialog.xul)</span>
<a href="#l5.7"></a><span id="l5.7">     content/calendar/calendar-conflicts-dialog.xul         (content/dialogs/calendar-conflicts-dialog.xul)</span>
<a href="#l5.8"></a><span id="l5.8">     content/calendar/calendar-creation.js                  (content/dialogs/calendar-creation.js)</span>
<a href="#l5.9"></a><span id="l5.9">     content/calendar/calendar-dialog-utils.js              (content/dialogs/calendar-dialog-utils.js)</span>
<a href="#l5.10"></a><span id="l5.10">     content/calendar/calendar-error-prompt.xul             (content/dialogs/calendar-error-prompt.xul)</span>
<a href="#l5.11"></a><span id="l5.11">     content/calendar/calendar-event-dialog.css             (content/dialogs/calendar-event-dialog.css)</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    content/calendar/calendar-event-dialog.js              (content/dialogs/calendar-event-dialog.js)</span>
<a href="#l5.13"></a><span id="l5.13"> *   content/calendar/calendar-event-dialog.xul             (content/dialogs/calendar-event-dialog.xul)</span>
<a href="#l5.14"></a><span id="l5.14">     content/calendar/calendar-event-dialog-attendees.xml   (content/dialogs/calendar-event-dialog-attendees.xml)</span>
<a href="#l5.15"></a><span id="l5.15">     content/calendar/calendar-event-dialog-freebusy.xml    (content/dialogs/calendar-event-dialog-freebusy.xml)</span>
<a href="#l5.16"></a><span id="l5.16">     content/calendar/calendar-event-dialog-recurrence.xul  (content/dialogs/calendar-event-dialog-recurrence.xul)</span>
<a href="#l5.17"></a><span id="l5.17">     content/calendar/calendar-event-dialog-recurrence.js   (content/dialogs/calendar-event-dialog-recurrence.js)</span>
<a href="#l5.18"></a><span id="l5.18">     content/calendar/calendar-event-dialog-recurrence-preview.xml  (content/dialogs/calendar-event-dialog-recurrence-preview.xml)</span>
<a href="#l5.19"></a><span id="l5.19">     content/calendar/calendar-event-dialog-reminder.js     (content/dialogs/calendar-event-dialog-reminder.js)</span>
<a href="#l5.20"></a><span id="l5.20">     content/calendar/calendar-event-dialog-reminder.xul    (content/dialogs/calendar-event-dialog-reminder.xul)</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineat">@@ -105,32 +104,35 @@ calendar.jar:</span>
<a href="#l5.22"></a><span id="l5.22">     content/calendar/WindowsNTToZoneInfoTZId.properties    (src/WindowsNTToZoneInfoTZId.properties)</span>
<a href="#l5.23"></a><span id="l5.23"> % skin calendar classic/1.0 chrome/skin/linux/calendar/</span>
<a href="#l5.24"></a><span id="l5.24"> % skin calendar classic/1.0 chrome/skin/osx/calendar/ os=Darwin</span>
<a href="#l5.25"></a><span id="l5.25"> % skin calendar classic/1.0 chrome/skin/windows/calendar/ os=WINNT</span>
<a href="#l5.26"></a><span id="l5.26"> % skin calendar-common classic/1.0 chrome/skin/common/</span>
<a href="#l5.27"></a><span id="l5.27"> % style chrome://global/content/customizeToolbar.xul chrome://calendar/skin/calendar-task-view.css</span>
<a href="#l5.28"></a><span id="l5.28"> % style chrome://global/content/customizeToolbar.xul chrome://calendar/skin/calendar-event-dialog.css</span>
<a href="#l5.29"></a><span id="l5.29"> % style chrome://calendar/content/calendar-event-dialog.xul chrome://calendar-common/skin/dialogs/calendar-event-dialog.css</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+% style chrome://lightning/content/lightning-item-iframe.xul chrome://calendar-common/skin/dialogs/calendar-event-dialog.css</span>
<a href="#l5.31"></a><span id="l5.31"> % style chrome://calendar/content/calendar-event-dialog-attendees.xul chrome://calendar-common/skin/dialogs/calendar-event-dialog.css</span>
<a href="#l5.32"></a><span id="l5.32">     ../skin/common/alarm-flashing.png                 (themes/common/images/alarm-flashing.png)</span>
<a href="#l5.33"></a><span id="l5.33">     ../skin/common/alarm-icons.png                    (themes/common/images/alarm-icons.png)</span>
<a href="#l5.34"></a><span id="l5.34">     ../skin/common/attendee-icons.png                 (themes/common/images/attendee-icons.png)</span>
<a href="#l5.35"></a><span id="l5.35">     ../skin/common/calendar-overlay.png               (themes/common/images/calendar-overlay.png)</span>
<a href="#l5.36"></a><span id="l5.36">     ../skin/common/calendar-status.png                (themes/common/images/calendar-status.png)</span>
<a href="#l5.37"></a><span id="l5.37">     ../skin/common/classification.png                 (themes/common/images/classification.png)</span>
<a href="#l5.38"></a><span id="l5.38">     ../skin/common/day-box-item-image.png             (themes/common/images/day-box-item-image.png)</span>
<a href="#l5.39"></a><span id="l5.39">     ../skin/common/event-grippy-bottom.png            (themes/common/images/event-grippy-bottom.png)</span>
<a href="#l5.40"></a><span id="l5.40">     ../skin/common/event-grippy-left.png              (themes/common/images/event-grippy-left.png)</span>
<a href="#l5.41"></a><span id="l5.41">     ../skin/common/event-grippy-right.png             (themes/common/images/event-grippy-right.png)</span>
<a href="#l5.42"></a><span id="l5.42">     ../skin/common/event-grippy-top.png               (themes/common/images/event-grippy-top.png)</span>
<a href="#l5.43"></a><span id="l5.43">     ../skin/common/task-images.png                    (themes/common/images/task-images.png)</span>
<a href="#l5.44"></a><span id="l5.44">     ../skin/common/timezone_map.png                   (themes/common/images/timezone_map.png)</span>
<a href="#l5.45"></a><span id="l5.45">     ../skin/common/timezones.png                      (themes/common/images/timezones.png)</span>
<a href="#l5.46"></a><span id="l5.46">     ../skin/common/calendar-event-dialog.png          (themes/common/dialogs/images/calendar-event-dialog.png)</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+    ../skin/common/calendar-event-tab.png             (themes/common/dialogs/images/calendar-event-tab.png)</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+    ../skin/common/calendar-task-tab.png              (themes/common/dialogs/images/calendar-task-tab.png)</span>
<a href="#l5.49"></a><span id="l5.49">     ../skin/common/widgets/nav-arrow.svg              (themes/common/widgets/images/nav-arrow.svg)</span>
<a href="#l5.50"></a><span id="l5.50">     ../skin/common/widgets/nav-today.svg              (themes/common/widgets/images/nav-today.svg)</span>
<a href="#l5.51"></a><span id="l5.51">     ../skin/common/widgets/nav-today-hov.svg          (themes/common/widgets/images/nav-today-hov.svg)</span>
<a href="#l5.52"></a><span id="l5.52">     ../skin/common/widgets/view-navigation.svg        (themes/common/widgets/images/view-navigation.svg)</span>
<a href="#l5.53"></a><span id="l5.53">     ../skin/common/widgets/view-navigation-hov.svg    (themes/common/widgets/images/view-navigation-hov.svg)</span>
<a href="#l5.54"></a><span id="l5.54">     ../skin/common/widgets/drag-center.svg            (themes/common/widgets/images/drag-center.svg)</span>
<a href="#l5.55"></a><span id="l5.55">     ../skin/common/calendar-alarms.css                (themes/common/calendar-alarms.css)</span>
<a href="#l5.56"></a><span id="l5.56">     ../skin/common/calendar-attendees.css             (themes/common/calendar-attendees.css)</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineat">@@ -172,16 +174,18 @@ calendar.jar:</span>
<a href="#l5.58"></a><span id="l5.58">     ../skin/linux/calendar/calendar-task-view.css                         (themes/linux/calendar-task-view.css)</span>
<a href="#l5.59"></a><span id="l5.59">     ../skin/linux/calendar/calendar-unifinder.css                         (themes/linux/calendar-unifinder.css)</span>
<a href="#l5.60"></a><span id="l5.60">     ../skin/linux/calendar/calendar-views.css                             (themes/linux/calendar-views.css)</span>
<a href="#l5.61"></a><span id="l5.61">     ../skin/linux/calendar/checkbox-images.png                            (themes/linux/images/checkbox-images.png)</span>
<a href="#l5.62"></a><span id="l5.62">     ../skin/linux/calendar/ok-cancel.png                                  (themes/linux/images/ok-cancel.png)</span>
<a href="#l5.63"></a><span id="l5.63">     ../skin/linux/calendar/today-pane.css                                 (themes/linux/today-pane.css)</span>
<a href="#l5.64"></a><span id="l5.64">     ../skin/linux/calendar/widgets/calendar-widgets.css                   (themes/linux/widgets/calendar-widgets.css)</span>
<a href="#l5.65"></a><span id="l5.65">     ../skin/linux/calendar/calendar-occurrence-prompt.png                 (themes/linux/images/calendar-occurrence-prompt.png)</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+    ../skin/linux/calendar/calendar-event-dialog.png                      (themes/linux/icons/calendar-event-dialog.png)</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+    ../skin/linux/calendar/calendar-task-dialog.png                       (themes/linux/icons/calendar-task-dialog.png)</span>
<a href="#l5.68"></a><span id="l5.68"> </span>
<a href="#l5.69"></a><span id="l5.69"> # OS X theme files</span>
<a href="#l5.70"></a><span id="l5.70">     ../skin/osx/calendar/cal-icon32.png                                 (themes/osx/images/cal-icon32.png)</span>
<a href="#l5.71"></a><span id="l5.71">     ../skin/osx/calendar/cal-icon24.png                                 (themes/osx/images/cal-icon24.png)</span>
<a href="#l5.72"></a><span id="l5.72">     ../skin/osx/calendar/calendar-alarm-dialog.css                      (themes/osx/dialogs/calendar-alarm-dialog.css)</span>
<a href="#l5.73"></a><span id="l5.73">     ../skin/osx/calendar/calendar-daypicker.css                         (themes/osx/calendar-daypicker.css)</span>
<a href="#l5.74"></a><span id="l5.74">     ../skin/osx/calendar/calendar-event-dialog.css                      (themes/osx/dialogs/calendar-event-dialog.css)</span>
<a href="#l5.75"></a><span id="l5.75">     ../skin/osx/calendar/calendar-event-dialog-attendees.png            (themes/osx/dialogs/images/calendar-event-dialog-attendees.png)</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineat">@@ -224,8 +228,10 @@ calendar.jar:</span>
<a href="#l5.77"></a><span id="l5.77">     ../skin/windows/calendar/widgets/calendar-widgets.css                   (themes/windows/widgets/calendar-widgets.css)</span>
<a href="#l5.78"></a><span id="l5.78">     ../skin/windows/calendar/calendar-event-dialog-toolbar.png              (themes/windows/dialogs/images/calendar-event-dialog-toolbar.png)</span>
<a href="#l5.79"></a><span id="l5.79">     ../skin/windows/calendar/calendar-event-dialog-toolbar-small.png        (themes/windows/dialogs/images/calendar-event-dialog-toolbar-small.png)</span>
<a href="#l5.80"></a><span id="l5.80">     ../skin/windows/calendar/calendar-occurrence-prompt.png                 (themes/windows/images/calendar-occurrence-prompt.png)</span>
<a href="#l5.81"></a><span id="l5.81">     ../skin/windows/calendar/tasks-actions.png                              (themes/windows/images/tasks-actions.png)</span>
<a href="#l5.82"></a><span id="l5.82">     ../skin/windows/calendar/toolbar-large.png                              (themes/windows/images/toolbar-large.png)</span>
<a href="#l5.83"></a><span id="l5.83">     ../skin/windows/calendar/toolbar-small.png                              (themes/windows/images/toolbar-small.png)</span>
<a href="#l5.84"></a><span id="l5.84">     ../skin/windows/calendar/calendar-occurrence-prompt-aero.png            (themes/windows/images/calendar-occurrence-prompt-aero.png)</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineplus">+    ../skin/windows/calendar/calendar-event-dialog.png                      (themes/windows/icons/calendar-event-dialog.png)</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+    ../skin/windows/calendar/calendar-task-dialog.png                       (themes/windows/icons/calendar-task-dialog.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/themes/common/calendar-attendees.css</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/themes/common/calendar-attendees.css</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -16,23 +16,23 @@</span>
<a href="#l6.4"></a><span id="l6.4">     max-height: 92px; /* displays up to four rows of attendees*/</span>
<a href="#l6.5"></a><span id="l6.5">     margin: 0px 10px;</span>
<a href="#l6.6"></a><span id="l6.6"> }</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> .item-attendees-cell {</span>
<a href="#l6.9"></a><span id="l6.9">     padding: 3px 0px;</span>
<a href="#l6.10"></a><span id="l6.10"> }</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-#calendar-event-dialog .item-attendees-cell {</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+#calendar-event-dialog-inner .item-attendees-cell {</span>
<a href="#l6.14"></a><span id="l6.14">     -moz-user-focus: normal;</span>
<a href="#l6.15"></a><span id="l6.15">     margin-bottom: 1px;</span>
<a href="#l6.16"></a><span id="l6.16">     margin-inline-end: 1px;</span>
<a href="#l6.17"></a><span id="l6.17"> }</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-#calendar-event-dialog .item-attendees-cell:focus {</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+#calendar-event-dialog-inner .item-attendees-cell:focus {</span>
<a href="#l6.21"></a><span id="l6.21">     background-color: Highlight;</span>
<a href="#l6.22"></a><span id="l6.22">     color: Highlighttext;</span>
<a href="#l6.23"></a><span id="l6.23"> }</span>
<a href="#l6.24"></a><span id="l6.24"> </span>
<a href="#l6.25"></a><span id="l6.25"> .item-attendees-cell-label {</span>
<a href="#l6.26"></a><span id="l6.26">     border: 0px;</span>
<a href="#l6.27"></a><span id="l6.27">     margin: 0px 3px;</span>
<a href="#l6.28"></a><span id="l6.28">     padding: 0px;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineat">@@ -212,23 +212,23 @@</span>
<a href="#l6.30"></a><span id="l6.30"> .usertype-icon[cutype=&quot;ROOM&quot;][disabled=&quot;true&quot;] {</span>
<a href="#l6.31"></a><span id="l6.31">     -moz-image-region: rect(16px 64px 32px 48px);</span>
<a href="#l6.32"></a><span id="l6.32"> }</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34"> @media (-moz-windows-default-theme) and (-moz-os-version: windows-vista),</span>
<a href="#l6.35"></a><span id="l6.35">        (-moz-windows-default-theme) and (-moz-os-version: windows-win7),</span>
<a href="#l6.36"></a><span id="l6.36">        (-moz-windows-default-theme) and (-moz-os-version: windows-win8),</span>
<a href="#l6.37"></a><span id="l6.37">        (-moz-windows-default-theme) and (-moz-os-version: windows-win10) {</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-    #calendar-event-dialog .item-attendees-cell {</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+    #calendar-event-dialog-inner .item-attendees-cell {</span>
<a href="#l6.40"></a><span id="l6.40">         background-repeat: no-repeat;</span>
<a href="#l6.41"></a><span id="l6.41">         background-size: 100% 100%;</span>
<a href="#l6.42"></a><span id="l6.42">         --attendees-currentColor: rgb(125, 162, 206);</span>
<a href="#l6.43"></a><span id="l6.43">     }</span>
<a href="#l6.44"></a><span id="l6.44"> </span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-    #calendar-event-dialog .item-attendees-cell:focus {</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+    #calendar-event-dialog-inner .item-attendees-cell:focus {</span>
<a href="#l6.47"></a><span id="l6.47">         color: -moz-FieldText;</span>
<a href="#l6.48"></a><span id="l6.48">         background-color: transparent;</span>
<a href="#l6.49"></a><span id="l6.49">         -moz-border-top-colors: var(--attendees-focusBorder);</span>
<a href="#l6.50"></a><span id="l6.50">         -moz-border-right-colors: var(--attendees-focusBorder);</span>
<a href="#l6.51"></a><span id="l6.51">         -moz-border-left-colors: var(--attendees-focusBorder);</span>
<a href="#l6.52"></a><span id="l6.52">         -moz-border-bottom-colors: var(--attendees-focusBottomBorder);</span>
<a href="#l6.53"></a><span id="l6.53">         background-image: var(--attendees-focusImage);</span>
<a href="#l6.54"></a><span id="l6.54">     }</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineat">@@ -247,17 +247,17 @@</span>
<a href="#l6.56"></a><span id="l6.56">                                        var(--attendees-2ndBottomBorderColor);</span>
<a href="#l6.57"></a><span id="l6.57">         --attendees-focusImage: linear-gradient(rgba(131, 183, 249, .28),</span>
<a href="#l6.58"></a><span id="l6.58">                                                 rgba(131, 183, 249, .5));</span>
<a href="#l6.59"></a><span id="l6.59">     }</span>
<a href="#l6.60"></a><span id="l6.60"> }</span>
<a href="#l6.61"></a><span id="l6.61"> </span>
<a href="#l6.62"></a><span id="l6.62"> @media (-moz-windows-default-theme) and (-moz-os-version: windows-win8),</span>
<a href="#l6.63"></a><span id="l6.63">        (-moz-windows-default-theme) and (-moz-os-version: windows-win10) {</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-    #calendar-event-dialog .item-attendees-cell {</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+    #calendar-event-dialog-inner .item-attendees-cell {</span>
<a href="#l6.66"></a><span id="l6.66">         padding: 1px;</span>
<a href="#l6.67"></a><span id="l6.67">         border: 1px solid transparent;</span>
<a href="#l6.68"></a><span id="l6.68">         --attendees-focusColor: rgb(123, 195, 255);</span>
<a href="#l6.69"></a><span id="l6.69">         --attendees-focusBorder: var(--attendees-focusColor);</span>
<a href="#l6.70"></a><span id="l6.70">         --attendees-focusBottomBorder: var(--attendees-focusColor);</span>
<a href="#l6.71"></a><span id="l6.71">         --attendees-focusImage: linear-gradient(rgb(205, 232, 255),</span>
<a href="#l6.72"></a><span id="l6.72">                                                 rgb(205, 232, 255));</span>
<a href="#l6.73"></a><span id="l6.73">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/themes/common/dialogs/calendar-event-dialog.css</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/themes/common/dialogs/calendar-event-dialog.css</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -11,21 +11,31 @@ dialog {</span>
<a href="#l7.4"></a><span id="l7.4"> dialog[systemcolors] {</span>
<a href="#l7.5"></a><span id="l7.5">     --eventBorderColor: ThreeDShadow;</span>
<a href="#l7.6"></a><span id="l7.6">     --eventWidgetBorderColor: ThreeDShadow;</span>
<a href="#l7.7"></a><span id="l7.7">     --eventGridStartBorderColor: ThreeDShadow;</span>
<a href="#l7.8"></a><span id="l7.8"> }</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> #calendar-event-dialog,</span>
<a href="#l7.11"></a><span id="l7.11"> #calendar-task-dialog {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+    min-width: 444px;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    min-height: 476px;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+}</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+#calendar-event-dialog,</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+#calendar-task-dialog,</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+#calendar-event-dialog-inner,</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+#calendar-task-dialog-inner {</span>
<a href="#l7.20"></a><span id="l7.20">     padding: 0px;</span>
<a href="#l7.21"></a><span id="l7.21"> }</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23"> #calendar-event-dialog .todo-only,</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-#calendar-task-dialog  .event-only {</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+#calendar-task-dialog .event-only,</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+#calendar-event-dialog-inner .todo-only,</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+#calendar-task-dialog-inner .event-only {</span>
<a href="#l7.28"></a><span id="l7.28">     display: none;</span>
<a href="#l7.29"></a><span id="l7.29"> }</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31"> #yearly-period-of-label,</span>
<a href="#l7.32"></a><span id="l7.32"> label.label {</span>
<a href="#l7.33"></a><span id="l7.33">     text-align: right;</span>
<a href="#l7.34"></a><span id="l7.34"> }</span>
<a href="#l7.35"></a><span id="l7.35"> </span>
<a href="#l7.36"></a><span id="l7.36" class="difflineat">@@ -39,16 +49,28 @@ label.label {</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38"> @media not all and (-moz-os-version: windows-xp) {</span>
<a href="#l7.39"></a><span id="l7.39">   .cal-event-toolbarbutton .toolbarbutton-icon {</span>
<a href="#l7.40"></a><span id="l7.40">     width: 18px;</span>
<a href="#l7.41"></a><span id="l7.41">     height: 18px;</span>
<a href="#l7.42"></a><span id="l7.42">   }</span>
<a href="#l7.43"></a><span id="l7.43"> }</span>
<a href="#l7.44"></a><span id="l7.44"> </span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+.icon-holder[type=&quot;calendarEvent&quot;],</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+.tabmail-tab[type=&quot;calendarEvent&quot;] {</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+    list-style-image: url(chrome://calendar-common/skin/calendar-event-tab.png);</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+    -moz-image-region: auto;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+}</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+.icon-holder[type=&quot;calendarTask&quot;],</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+.tabmail-tab[type=&quot;calendarTask&quot;] {</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+    list-style-image: url(chrome://calendar-common/skin/calendar-task-tab.png);</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+    -moz-image-region: auto;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+}</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+</span>
<a href="#l7.57"></a><span id="l7.57"> /*--------------------------------------------------------------------</span>
<a href="#l7.58"></a><span id="l7.58">  *   Event dialog tabbox section</span>
<a href="#l7.59"></a><span id="l7.59">  *-------------------------------------------------------------------*/</span>
<a href="#l7.60"></a><span id="l7.60"> </span>
<a href="#l7.61"></a><span id="l7.61"> #event-grid-tabbox {</span>
<a href="#l7.62"></a><span id="l7.62">     margin: 5px 0px;</span>
<a href="#l7.63"></a><span id="l7.63"> }</span>
<a href="#l7.64"></a><span id="l7.64"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..664cd8262f1dd88d3a74194ddd8bc9fadc54144f</span>
<a href="#l8.3"></a><span id="l8.3">GIT binary patch
literal 424
zc$@*K0ayNsP)&lt;h;3K|Lk000e1NJLTq000mG000mO0ssI2kdbIM00006bW%=J00000
z003^L2ax~(0bNN%K~#9!m5ohH0$~(|@82m9{10sl3QG!G6p=|&lt;S~g82wy-Y}A%zku
z0%;S5P%X@aa5rsg(XOA61UVMYIOBZSnHe&gt;q$?9@AoO|Er-j}Fd*ZE&gt;}a~DosWjkz@
zXL?qYWcV+`QYyfmuux_vgg2La+-hxyfaz}EpNot_?3@R0{SK$q+71EJZNirc4nm3f
zkv@kr&gt;K(IM+aX}e$Gy*gF2HoPJ)`M*Z#CNmm~ycxMb$LD39TJJ^$;MybiOeuHB?2_
z8&gt;+^pABB2@O+Uap0j?NNh8qiK&gt;l3xQvb0qU#R^RFo=I{mE$7VkOTciQPFLOUf{X=x
zvb&lt;Nq$#A@6{a}TT*CYin9fe(Q9}&gt;=oVmGE2f&lt;FitU^-YFeyxfNkxNNdI$jlITt(=1
zV1SK&lt;GA{&lt;0tf&gt;n&gt;ll7b7yMP%BslX7@3ojU65y}-2q0CzW-X&amp;fHOozUKf9Vslbk-E1
SQt}o60000&lt;MNUMnLSTZPxvD_`</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..58e9daf045109dfd70e17c71b52ec0e26a847ec7</span>
<a href="#l9.3"></a><span id="l9.3">GIT binary patch
literal 661
zc$@*10&amp;4w&lt;P)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00079Nkl&lt;Zc-oDR
z-A@uw7{&lt;A7&gt;u=~Xuj|S_*N4juwaq1y%*xSFN|~ctYyp~yGoX|#hKitRr6&gt;YUmgMFl
zh)w(ej5HMHEG?tyVh+uzJ#kKPHZF9Y?YEu1d!FCkm&amp;4iR@r#OeN$?+CYA!F&amp;68pSE
zTP&lt;2yd)~3b2Y2gpE*0&gt;w{(F-`{$zIjY{rq#LE}a|HV*&amp;f7`j^PoiuE35c6$~qJ*`f
z6#A-b$jQk=crFUl%Wew!=W@9iwm!s0+&gt;7ZU8OCig7*rJjD(HVwmY8(tup0RQ`MpZ~
zTv^3LFqDSF{1jW8e$2U481Iw7aGwi)=AjHKFslVv4h~?XQv=1V5@ctcN9OSp3|{UT
z{8|~qVxS#?0V#UbJT%?O1H1QieF+xat&gt;~zg;CpNhqZ1*#bNeV3vl%l%D^|a_@zEiN
zvqgaRnkyh3Cg@aN#r()Km&gt;yIhy8MSRGrtDc8)NeBSxgT&lt;g1bu$Re2U&gt;osA$JCNNeP
zAv)XuW0fdP;II#3Wyz0-M-N}W49&amp;9q&lt;m$!$vdIn;w8#q)ajMa#5F#AgVOR_rd=0ta
z?Nj1~@-l2TJI#=6n&amp;7##fC;9*?NHv2g)!&gt;rz$cF#dYJ&amp;0J{z5&lt;1f;_R+PnEo5L(=#
z^mO-N(lvnYW;Hw$5jIZ=NQVg?OD-b%Rs*A=6jMvv6jikpZEYs_7uM4t8ImO(CaACA
z;)hp{S9O(Gj$=&lt;qhGa&gt;H32JX&lt;V&gt;{f7DVr99O^Q7s8ImQPQ@4*Epn{sR?1WV-qPOh_
vk|iCsLEVjW{5s+3gi?4C`z6`AK)Qbc-EwQ&gt;k~z1F00000NkvXXu0mjf)BY`p</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">rename from calendar/base/content/dialogs/calendar-event-dialog.js</span>
<a href="#l10.2"></a><span id="l10.2">rename to calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog.js</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineat">@@ -22,26 +22,30 @@ try {</span>
<a href="#l10.6"></a><span id="l10.6"> // from within this file only.</span>
<a href="#l10.7"></a><span id="l10.7"> var gStartTime = null;</span>
<a href="#l10.8"></a><span id="l10.8"> var gEndTime = null;</span>
<a href="#l10.9"></a><span id="l10.9"> var gItemDuration = null;</span>
<a href="#l10.10"></a><span id="l10.10"> var gStartTimezone = null;</span>
<a href="#l10.11"></a><span id="l10.11"> var gEndTimezone = null;</span>
<a href="#l10.12"></a><span id="l10.12"> var gUntilDate = null;</span>
<a href="#l10.13"></a><span id="l10.13"> var gIsReadOnly = false;</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-var gPrivacy = null;</span>
<a href="#l10.15"></a><span id="l10.15"> var gAttachMap = {};</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-var gPriority = 0;</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-var gStatus = &quot;NONE&quot;;</span>
<a href="#l10.18"></a><span id="l10.18"> var gConfirmCancel = true;</span>
<a href="#l10.19"></a><span id="l10.19"> var gLastRepeatSelection = 0;</span>
<a href="#l10.20"></a><span id="l10.20"> var gIgnoreUpdate = false;</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-var gShowTimeAs = null;</span>
<a href="#l10.22"></a><span id="l10.22"> var gWarning = false;</span>
<a href="#l10.23"></a><span id="l10.23"> var gPreviousCalendarId = null;</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+var gTimezonesEnabled = null;</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+var gTabInfoObject;</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+var gConfig = {</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+    priority: 0,</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+    privacy: null,</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+    status: &quot;NONE&quot;,</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+    showTimeAs: null</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+}</span>
<a href="#l10.32"></a><span id="l10.32"> </span>
<a href="#l10.33"></a><span id="l10.33"> var eventDialogQuitObserver = {</span>
<a href="#l10.34"></a><span id="l10.34">   observe: function(aSubject, aTopic, aData) {</span>
<a href="#l10.35"></a><span id="l10.35">     // Check whether or not we want to veto the quit request (unless another</span>
<a href="#l10.36"></a><span id="l10.36">     // observer already did.</span>
<a href="#l10.37"></a><span id="l10.37">     if (aTopic == &quot;quit-application-requested&quot; &amp;&amp;</span>
<a href="#l10.38"></a><span id="l10.38">         (aSubject instanceof Components.interfaces.nsISupportsPRBool) &amp;&amp;</span>
<a href="#l10.39"></a><span id="l10.39">         !aSubject.data)</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineat">@@ -89,18 +93,17 @@ var eventDialogCalendarObserver = {</span>
<a href="#l10.41"></a><span id="l10.41">                 loadDialog(window.calendarItem);</span>
<a href="#l10.42"></a><span id="l10.42">             }</span>
<a href="#l10.43"></a><span id="l10.43">         }</span>
<a href="#l10.44"></a><span id="l10.44">     },</span>
<a href="#l10.45"></a><span id="l10.45"> </span>
<a href="#l10.46"></a><span id="l10.46">     onDeleteItem: function(aDeletedItem) {</span>
<a href="#l10.47"></a><span id="l10.47">         if (this.isObserving &amp;&amp; &quot;calendarItem&quot; in window &amp;&amp;</span>
<a href="#l10.48"></a><span id="l10.48">             window.calendarItem &amp;&amp; window.calendarItem.id == aDeletedItem.id) {</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineminus">-            gConfirmCancel = false;</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-            document.documentElement.cancelDialog();</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+            cancelItem();</span>
<a href="#l10.52"></a><span id="l10.52">         }</span>
<a href="#l10.53"></a><span id="l10.53">     },</span>
<a href="#l10.54"></a><span id="l10.54"> </span>
<a href="#l10.55"></a><span id="l10.55">     onStartBatch: function() {},</span>
<a href="#l10.56"></a><span id="l10.56">     onEndBatch: function() {},</span>
<a href="#l10.57"></a><span id="l10.57">     onLoad: function() {},</span>
<a href="#l10.58"></a><span id="l10.58">     onAddItem: function() {},</span>
<a href="#l10.59"></a><span id="l10.59">     onError: function() {},</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineat">@@ -124,116 +127,189 @@ var eventDialogCalendarObserver = {</span>
<a href="#l10.61"></a><span id="l10.61">         }</span>
<a href="#l10.62"></a><span id="l10.62">     }</span>
<a href="#l10.63"></a><span id="l10.63"> };</span>
<a href="#l10.64"></a><span id="l10.64"> </span>
<a href="#l10.65"></a><span id="l10.65"> /**</span>
<a href="#l10.66"></a><span id="l10.66">  * Checks if the given calendar supports notifying attendees. The item is needed</span>
<a href="#l10.67"></a><span id="l10.67">  * since calendars may support notifications for only some types of items.</span>
<a href="#l10.68"></a><span id="l10.68">  *</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">- * @param aCalendar   The calendar to check</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineminus">- * @param item        The item to check support for.</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+ * @param {calICalendar} aCalendar  The calendar to check</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+ * @param {calIItemBase} aItem      The item to check support for</span>
<a href="#l10.73"></a><span id="l10.73">  */</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineminus">-function canNotifyAttendees(aCalendar, item) {</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+function canNotifyAttendees(aCalendar, aItem) {</span>
<a href="#l10.76"></a><span id="l10.76">     try {</span>
<a href="#l10.77"></a><span id="l10.77">         var calendar = aCalendar.QueryInterface(Components.interfaces.calISchedulingSupport);</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineminus">-        return (calendar.canNotify(&quot;REQUEST&quot;, item) &amp;&amp; calendar.canNotify(&quot;CANCEL&quot;, item));</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+        return (calendar.canNotify(&quot;REQUEST&quot;, aItem) &amp;&amp; calendar.canNotify(&quot;CANCEL&quot;, aItem));</span>
<a href="#l10.80"></a><span id="l10.80">     } catch (exc) {</span>
<a href="#l10.81"></a><span id="l10.81">         return false;</span>
<a href="#l10.82"></a><span id="l10.82">     }</span>
<a href="#l10.83"></a><span id="l10.83"> }</span>
<a href="#l10.84"></a><span id="l10.84"> </span>
<a href="#l10.85"></a><span id="l10.85"> /**</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineminus">- * Update menu items that rely on focus</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineplus">+ * Sends an asynchronous message to the parent context that contains the</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineplus">+ * iframe. Additional properties of aMessage are generally arguments</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineplus">+ * that will be passed to the function named in aMessage.command.</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineplus">+ *</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineplus">+ * @param {Object} aMessage           The message to pass to the parent context</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineplus">+ * @param {string} aMessage.command   The name of a function to call</span>
<a href="#l10.93"></a><span id="l10.93">  */</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineminus">-function goUpdateGlobalEditMenuItems() {</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineminus">-    goUpdateCommand('cmd_undo');</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineminus">-    goUpdateCommand('cmd_redo');</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineminus">-    goUpdateCommand('cmd_cut');</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineminus">-    goUpdateCommand('cmd_copy');</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineminus">-    goUpdateCommand('cmd_paste');</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineminus">-    goUpdateCommand('cmd_selectAll');</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineplus">+function sendMessage(aMessage) {</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineplus">+    parent.postMessage(aMessage, &quot;*&quot;);</span>
<a href="#l10.103"></a><span id="l10.103"> }</span>
<a href="#l10.104"></a><span id="l10.104"> </span>
<a href="#l10.105"></a><span id="l10.105"> /**</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineminus">- * Update menu items that rely on the current selection</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineplus">+ * Receives asynchronous messages from the parent context that contains the iframe.</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineplus">+ *</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineplus">+ * @param {MessageEvent} aEvent  Contains the message being received</span>
<a href="#l10.110"></a><span id="l10.110">  */</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineminus">-function goUpdateSelectEditMenuItems() {</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineminus">-    goUpdateCommand('cmd_cut');</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineminus">-    goUpdateCommand('cmd_copy');</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineminus">-    goUpdateCommand('cmd_delete');</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineminus">-    goUpdateCommand('cmd_selectAll');</span>
<a href="#l10.116"></a><span id="l10.116" class="difflineminus">-}</span>
<a href="#l10.117"></a><span id="l10.117" class="difflineminus">-</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineminus">-/**</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineminus">- * Update menu items that relate to undo/redo</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineminus">- */</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineminus">-function goUpdateUndoEditMenuItems() {</span>
<a href="#l10.122"></a><span id="l10.122" class="difflineminus">-    goUpdateCommand('cmd_undo');</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineminus">-    goUpdateCommand('cmd_redo');</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineminus">-}</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineminus">-</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineminus">-/**</span>
<a href="#l10.127"></a><span id="l10.127" class="difflineminus">- * Update menu items that depend on clipboard contents</span>
<a href="#l10.128"></a><span id="l10.128" class="difflineminus">- */</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineminus">-function goUpdatePasteMenuItems() {</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineminus">-    goUpdateCommand('cmd_paste');</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineplus">+function receiveMessage(aEvent) {</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineplus">+    let validOrigin = gTabmail ? &quot;chrome://messenger&quot; : &quot;chrome://calendar&quot;;</span>
<a href="#l10.133"></a><span id="l10.133" class="difflineplus">+    if (aEvent.origin !== validOrigin) {</span>
<a href="#l10.134"></a><span id="l10.134" class="difflineplus">+        return;</span>
<a href="#l10.135"></a><span id="l10.135" class="difflineplus">+    }</span>
<a href="#l10.136"></a><span id="l10.136" class="difflineplus">+    switch (aEvent.data.command) {</span>
<a href="#l10.137"></a><span id="l10.137" class="difflineplus">+        case &quot;editAttendees&quot;: editAttendees(); break;</span>
<a href="#l10.138"></a><span id="l10.138" class="difflineplus">+        case &quot;attachURL&quot;: attachURL(); break;</span>
<a href="#l10.139"></a><span id="l10.139" class="difflineplus">+        case &quot;onCommandDeleteItem&quot;: onCommandDeleteItem(); break;</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineplus">+        case &quot;onCommandSave&quot;: onCommandSave(aEvent.data.isClosing); break;</span>
<a href="#l10.141"></a><span id="l10.141" class="difflineplus">+        case &quot;onAccept&quot;: onAccept(); break;</span>
<a href="#l10.142"></a><span id="l10.142" class="difflineplus">+        case &quot;onCancel&quot;: onCancel(aEvent.data.iframeId); break;</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineplus">+        case &quot;editStatus&quot;:</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineplus">+            gConfig.status = aEvent.data.value;</span>
<a href="#l10.145"></a><span id="l10.145" class="difflineplus">+            updateStatus(gConfig.status);</span>
<a href="#l10.146"></a><span id="l10.146" class="difflineplus">+            break;</span>
<a href="#l10.147"></a><span id="l10.147" class="difflineplus">+        case &quot;editShowTimeAs&quot;:</span>
<a href="#l10.148"></a><span id="l10.148" class="difflineplus">+            gConfig.showTimeAs = aEvent.data.value;</span>
<a href="#l10.149"></a><span id="l10.149" class="difflineplus">+            updateShowTimeAs(gConfig.showTimeAs);</span>
<a href="#l10.150"></a><span id="l10.150" class="difflineplus">+            break;</span>
<a href="#l10.151"></a><span id="l10.151" class="difflineplus">+        case &quot;editPriority&quot;:</span>
<a href="#l10.152"></a><span id="l10.152" class="difflineplus">+            gConfig.priority = aEvent.data.value;</span>
<a href="#l10.153"></a><span id="l10.153" class="difflineplus">+            updatePriority(gConfig.priority);</span>
<a href="#l10.154"></a><span id="l10.154" class="difflineplus">+            break;</span>
<a href="#l10.155"></a><span id="l10.155" class="difflineplus">+        case &quot;editPrivacy&quot;:</span>
<a href="#l10.156"></a><span id="l10.156" class="difflineplus">+            gConfig.privacy = aEvent.data.value;</span>
<a href="#l10.157"></a><span id="l10.157" class="difflineplus">+            updatePrivacy(gConfig.privacy);</span>
<a href="#l10.158"></a><span id="l10.158" class="difflineplus">+            break;</span>
<a href="#l10.159"></a><span id="l10.159" class="difflineplus">+        case &quot;rotatePrivacy&quot;:</span>
<a href="#l10.160"></a><span id="l10.160" class="difflineplus">+            gConfig.privacy = rotatePrivacy(gConfig.privacy);</span>
<a href="#l10.161"></a><span id="l10.161" class="difflineplus">+            updatePrivacy(gConfig.privacy);</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineplus">+            break;</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineplus">+        case &quot;rotateStatus&quot;:</span>
<a href="#l10.164"></a><span id="l10.164" class="difflineplus">+            gConfig.status = rotateStatus(gConfig.status,</span>
<a href="#l10.165"></a><span id="l10.165" class="difflineplus">+                                          cal.isEvent(window.calendarItem),</span>
<a href="#l10.166"></a><span id="l10.166" class="difflineplus">+                                          aEvent.data.noneCommandIsVisible);</span>
<a href="#l10.167"></a><span id="l10.167" class="difflineplus">+            updateStatus(gConfig.status);</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineplus">+            break;</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineplus">+        case &quot;rotatePriority&quot;:</span>
<a href="#l10.170"></a><span id="l10.170" class="difflineplus">+            if (capSupported(&quot;priority&quot;)) {</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineplus">+                gConfig.priority = rotatePriority(gConfig.priority);</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineplus">+                updatePriority(gConfig.priority);</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineplus">+            }</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineplus">+            break;</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineplus">+        case &quot;rotateShowTimeAs&quot;:</span>
<a href="#l10.176"></a><span id="l10.176" class="difflineplus">+            gConfig.showTimeAs = rotateShowTimeAs(gConfig.showTimeAs);</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineplus">+            updateShowTimeAs(gConfig.showTimeAs);</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineplus">+            break;</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineplus">+        case &quot;toggleTimezoneLinks&quot;:</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineplus">+            gTimezonesEnabled = aEvent.data.checked;</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineplus">+            updateDateTime();</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineplus">+            break;</span>
<a href="#l10.183"></a><span id="l10.183" class="difflineplus">+        case &quot;toggleLink&quot;:</span>
<a href="#l10.184"></a><span id="l10.184" class="difflineplus">+            updateItemURL(aEvent.data.checked);</span>
<a href="#l10.185"></a><span id="l10.185" class="difflineplus">+            break;</span>
<a href="#l10.186"></a><span id="l10.186" class="difflineplus">+        case &quot;closingWindowWithTabs&quot;:</span>
<a href="#l10.187"></a><span id="l10.187" class="difflineplus">+            let response = onCancel(aEvent.data.id, true);</span>
<a href="#l10.188"></a><span id="l10.188" class="difflineplus">+            sendMessage({</span>
<a href="#l10.189"></a><span id="l10.189" class="difflineplus">+                command: &quot;replyToClosingWindowWithTabs&quot;,</span>
<a href="#l10.190"></a><span id="l10.190" class="difflineplus">+                response: response</span>
<a href="#l10.191"></a><span id="l10.191" class="difflineplus">+            });</span>
<a href="#l10.192"></a><span id="l10.192" class="difflineplus">+            break;</span>
<a href="#l10.193"></a><span id="l10.193" class="difflineplus">+    }</span>
<a href="#l10.194"></a><span id="l10.194"> }</span>
<a href="#l10.195"></a><span id="l10.195"> </span>
<a href="#l10.196"></a><span id="l10.196"> /**</span>
<a href="#l10.197"></a><span id="l10.197">  * Sets up the event dialog from the window arguments, also setting up all</span>
<a href="#l10.198"></a><span id="l10.198">  * dialog controls from the window's item.</span>
<a href="#l10.199"></a><span id="l10.199">  */</span>
<a href="#l10.200"></a><span id="l10.200"> function onLoad() {</span>
<a href="#l10.201"></a><span id="l10.201">     // Set a variable to allow/prevent actions when the dialog is loading.</span>
<a href="#l10.202"></a><span id="l10.202">     onLoad.isLoading = true;</span>
<a href="#l10.203"></a><span id="l10.203"> </span>
<a href="#l10.204"></a><span id="l10.204" class="difflineplus">+    window.addEventListener(&quot;message&quot;, receiveMessage, false);</span>
<a href="#l10.205"></a><span id="l10.205" class="difflineplus">+</span>
<a href="#l10.206"></a><span id="l10.206" class="difflineplus">+    // Move the args for the window dialog so they are positioned</span>
<a href="#l10.207"></a><span id="l10.207" class="difflineplus">+    // relative to the iframe, like in the tab.</span>
<a href="#l10.208"></a><span id="l10.208" class="difflineplus">+    if (!window.arguments) {</span>
<a href="#l10.209"></a><span id="l10.209" class="difflineplus">+        window.arguments = [parent.arguments[0]];</span>
<a href="#l10.210"></a><span id="l10.210" class="difflineplus">+        // XXX Should we delete the arguments in the parent context so</span>
<a href="#l10.211"></a><span id="l10.211" class="difflineplus">+        // they are only accessible in one place?  But they are needed for onLoad there.</span>
<a href="#l10.212"></a><span id="l10.212" class="difflineplus">+    }</span>
<a href="#l10.213"></a><span id="l10.213" class="difflineplus">+</span>
<a href="#l10.214"></a><span id="l10.214">     // first of all retrieve the array of</span>
<a href="#l10.215"></a><span id="l10.215">     // arguments this window has been called with.</span>
<a href="#l10.216"></a><span id="l10.216" class="difflineminus">-    var args = window.arguments[0];</span>
<a href="#l10.217"></a><span id="l10.217" class="difflineplus">+    let args = window.arguments[0];</span>
<a href="#l10.218"></a><span id="l10.218" class="difflineplus">+</span>
<a href="#l10.219"></a><span id="l10.219" class="difflineplus">+    intializeTabOrWindowVariables();</span>
<a href="#l10.220"></a><span id="l10.220" class="difflineplus">+</span>
<a href="#l10.221"></a><span id="l10.221" class="difflineplus">+    // Calling onLoad in the outer context is handled in calendar-event-dialog.xul</span>
<a href="#l10.222"></a><span id="l10.222" class="difflineplus">+    // for the window case, and here for the tab case because there is no onload</span>
<a href="#l10.223"></a><span id="l10.223" class="difflineplus">+    // event fired for the outer context for tabs.</span>
<a href="#l10.224"></a><span id="l10.224" class="difflineplus">+    if (gInTab) {</span>
<a href="#l10.225"></a><span id="l10.225" class="difflineplus">+        sendMessage({ command: &quot;onLoad&quot; });</span>
<a href="#l10.226"></a><span id="l10.226" class="difflineplus">+    }</span>
<a href="#l10.227"></a><span id="l10.227" class="difflineplus">+</span>
<a href="#l10.228"></a><span id="l10.228" class="difflineplus">+    // Needed so we can call switchToTab for the prompt about saving</span>
<a href="#l10.229"></a><span id="l10.229" class="difflineplus">+    // unsaved changes, to show the tab that the prompt is for.</span>
<a href="#l10.230"></a><span id="l10.230" class="difflineplus">+    if (gInTab) {</span>
<a href="#l10.231"></a><span id="l10.231" class="difflineplus">+        gTabInfoObject = gTabmail.currentTabInfo;</span>
<a href="#l10.232"></a><span id="l10.232" class="difflineplus">+    }</span>
<a href="#l10.233"></a><span id="l10.233" class="difflineplus">+</span>
<a href="#l10.234"></a><span id="l10.234" class="difflineplus">+    let cmdTimezone = parent.document.getElementById(&quot;cmd_timezone&quot;);</span>
<a href="#l10.235"></a><span id="l10.235" class="difflineplus">+    gTimezonesEnabled = cmdTimezone.getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l10.236"></a><span id="l10.236"> </span>
<a href="#l10.237"></a><span id="l10.237">     // The calling entity provides us with an object that is responsible</span>
<a href="#l10.238"></a><span id="l10.238">     // for recording details about the initiated modification. the 'finalize'</span>
<a href="#l10.239"></a><span id="l10.239">     // property is our hook in order to receive a notification in case the</span>
<a href="#l10.240"></a><span id="l10.240">     // operation needs to be terminated prematurely. This function will be</span>
<a href="#l10.241"></a><span id="l10.241">     // called if the calling entity needs to immediately terminate the pending</span>
<a href="#l10.242"></a><span id="l10.242">     // modification. In this case we serialize the item and close the window.</span>
<a href="#l10.243"></a><span id="l10.243">     if (args.job) {</span>
<a href="#l10.244"></a><span id="l10.244" class="difflineminus">-        // keep this context...</span>
<a href="#l10.245"></a><span id="l10.245" class="difflineminus">-        var self = this;</span>
<a href="#l10.246"></a><span id="l10.246" class="difflineplus">+        // keep the iframe id so we can close the right tab...</span>
<a href="#l10.247"></a><span id="l10.247" class="difflineplus">+        let iframeId = window.frameElement.id;</span>
<a href="#l10.248"></a><span id="l10.248"> </span>
<a href="#l10.249"></a><span id="l10.249">         // store the 'finalize'-functor in the provided job-object.</span>
<a href="#l10.250"></a><span id="l10.250" class="difflineminus">-        args.job.finalize = function() {</span>
<a href="#l10.251"></a><span id="l10.251" class="difflineplus">+        args.job.finalize = () =&gt; {</span>
<a href="#l10.252"></a><span id="l10.252">             // store any pending modifications...</span>
<a href="#l10.253"></a><span id="l10.253" class="difflineminus">-            self.onAccept();</span>
<a href="#l10.254"></a><span id="l10.254" class="difflineminus">-</span>
<a href="#l10.255"></a><span id="l10.255" class="difflineminus">-            var item = window.calendarItem;</span>
<a href="#l10.256"></a><span id="l10.256" class="difflineplus">+            this.onAccept();</span>
<a href="#l10.257"></a><span id="l10.257" class="difflineplus">+</span>
<a href="#l10.258"></a><span id="l10.258" class="difflineplus">+            let item = window.calendarItem;</span>
<a href="#l10.259"></a><span id="l10.259"> </span>
<a href="#l10.260"></a><span id="l10.260">             // ...and close the window.</span>
<a href="#l10.261"></a><span id="l10.261" class="difflineminus">-            window.close();</span>
<a href="#l10.262"></a><span id="l10.262" class="difflineplus">+            sendMessage({ command: &quot;closeWindowOrTab&quot;, iframeId: iframeId });</span>
<a href="#l10.263"></a><span id="l10.263"> </span>
<a href="#l10.264"></a><span id="l10.264">             return item;</span>
<a href="#l10.265"></a><span id="l10.265">         }</span>
<a href="#l10.266"></a><span id="l10.266">     }</span>
<a href="#l10.267"></a><span id="l10.267"> </span>
<a href="#l10.268"></a><span id="l10.268">     window.fbWrapper = args.fbWrapper;</span>
<a href="#l10.269"></a><span id="l10.269"> </span>
<a href="#l10.270"></a><span id="l10.270">     // the most important attribute we expect from the</span>
<a href="#l10.271"></a><span id="l10.271">     // arguments is the item we'll edit in the dialog.</span>
<a href="#l10.272"></a><span id="l10.272" class="difflineminus">-    var item = args.calendarEvent;</span>
<a href="#l10.273"></a><span id="l10.273" class="difflineminus">-</span>
<a href="#l10.274"></a><span id="l10.274" class="difflineminus">-    // set the dialog-id to enable the right window-icon to be loaded.</span>
<a href="#l10.275"></a><span id="l10.275" class="difflineplus">+    let item = args.calendarEvent;</span>
<a href="#l10.276"></a><span id="l10.276" class="difflineplus">+</span>
<a href="#l10.277"></a><span id="l10.277" class="difflineplus">+    // set the iframe's top level id for event vs task</span>
<a href="#l10.278"></a><span id="l10.278">     if (!cal.isEvent(item)) {</span>
<a href="#l10.279"></a><span id="l10.279" class="difflineminus">-        setDialogId(document.documentElement, &quot;calendar-task-dialog&quot;);</span>
<a href="#l10.280"></a><span id="l10.280" class="difflineplus">+        setDialogId(document.documentElement, &quot;calendar-task-dialog-inner&quot;);</span>
<a href="#l10.281"></a><span id="l10.281">     }</span>
<a href="#l10.282"></a><span id="l10.282"> </span>
<a href="#l10.283"></a><span id="l10.283">     // new items should have a non-empty title.</span>
<a href="#l10.284"></a><span id="l10.284">     if (item.isMutable &amp;&amp; (!item.title || item.title.length &lt;= 0)) {</span>
<a href="#l10.285"></a><span id="l10.285" class="difflineminus">-        item.title = calGetString(&quot;calendar-event-dialog&quot;,</span>
<a href="#l10.286"></a><span id="l10.286" class="difflineminus">-                                  isEvent(item) ? &quot;newEvent&quot; : &quot;newTask&quot;);</span>
<a href="#l10.287"></a><span id="l10.287" class="difflineplus">+        item.title = cal.calGetString(&quot;calendar-event-dialog&quot;,</span>
<a href="#l10.288"></a><span id="l10.288" class="difflineplus">+                                      isEvent(item) ? &quot;newEvent&quot; : &quot;newTask&quot;);</span>
<a href="#l10.289"></a><span id="l10.289">     }</span>
<a href="#l10.290"></a><span id="l10.290"> </span>
<a href="#l10.291"></a><span id="l10.291">     window.onAcceptCallback = args.onOk;</span>
<a href="#l10.292"></a><span id="l10.292">     window.mode = args.mode</span>
<a href="#l10.293"></a><span id="l10.293"> </span>
<a href="#l10.294"></a><span id="l10.294">     // we store the item in the window to be able</span>
<a href="#l10.295"></a><span id="l10.295">     // to access this from any location. please note</span>
<a href="#l10.296"></a><span id="l10.296">     // that the item is either an occurrence [proxy]</span>
<a href="#l10.297"></a><span id="l10.297" class="difflineat">@@ -241,19 +317,19 @@ function onLoad() {</span>
<a href="#l10.298"></a><span id="l10.298">     window.calendarItem = item;</span>
<a href="#l10.299"></a><span id="l10.299">     // store the initial date value for datepickers in New Task dialog</span>
<a href="#l10.300"></a><span id="l10.300">     window.initialStartDateValue = args.initialStartDateValue;</span>
<a href="#l10.301"></a><span id="l10.301"> </span>
<a href="#l10.302"></a><span id="l10.302">     // we store the array of attendees in the window.</span>
<a href="#l10.303"></a><span id="l10.303">     // clone each existing attendee since we still suffer</span>
<a href="#l10.304"></a><span id="l10.304">     // from the 'lost x-properties'-bug.</span>
<a href="#l10.305"></a><span id="l10.305">     window.attendees = [];</span>
<a href="#l10.306"></a><span id="l10.306" class="difflineminus">-    var attendees = item.getAttendees({});</span>
<a href="#l10.307"></a><span id="l10.307" class="difflineplus">+    let attendees = item.getAttendees({});</span>
<a href="#l10.308"></a><span id="l10.308">     if (attendees &amp;&amp; attendees.length) {</span>
<a href="#l10.309"></a><span id="l10.309" class="difflineminus">-        for (var attendee of attendees) {</span>
<a href="#l10.310"></a><span id="l10.310" class="difflineplus">+        for (let attendee of attendees) {</span>
<a href="#l10.311"></a><span id="l10.311">             window.attendees.push(attendee.clone());</span>
<a href="#l10.312"></a><span id="l10.312">         }</span>
<a href="#l10.313"></a><span id="l10.313">     }</span>
<a href="#l10.314"></a><span id="l10.314"> </span>
<a href="#l10.315"></a><span id="l10.315">     window.organizer = null;</span>
<a href="#l10.316"></a><span id="l10.316">     if (item.organizer) {</span>
<a href="#l10.317"></a><span id="l10.317">         window.organizer = item.organizer.clone();</span>
<a href="#l10.318"></a><span id="l10.318">     } else if (item.getAttendees({}).length &gt; 0) {</span>
<a href="#l10.319"></a><span id="l10.319" class="difflineat">@@ -269,60 +345,55 @@ function onLoad() {</span>
<a href="#l10.320"></a><span id="l10.320">             window.organizer = organizer;</span>
<a href="#l10.321"></a><span id="l10.321">         }</span>
<a href="#l10.322"></a><span id="l10.322">     }</span>
<a href="#l10.323"></a><span id="l10.323"> </span>
<a href="#l10.324"></a><span id="l10.324">     // we store the recurrence info in the window so it</span>
<a href="#l10.325"></a><span id="l10.325">     // can be accessed from any location. since the recurrence</span>
<a href="#l10.326"></a><span id="l10.326">     // info is a property of the parent item we need to check</span>
<a href="#l10.327"></a><span id="l10.327">     // whether or not this item is a proxy or a parent.</span>
<a href="#l10.328"></a><span id="l10.328" class="difflineminus">-    var parentItem = item;</span>
<a href="#l10.329"></a><span id="l10.329" class="difflineplus">+    let parentItem = item;</span>
<a href="#l10.330"></a><span id="l10.330">     if (parentItem.parentItem != parentItem) {</span>
<a href="#l10.331"></a><span id="l10.331">         parentItem = parentItem.parentItem;</span>
<a href="#l10.332"></a><span id="l10.332">     }</span>
<a href="#l10.333"></a><span id="l10.333"> </span>
<a href="#l10.334"></a><span id="l10.334">     window.recurrenceInfo = null;</span>
<a href="#l10.335"></a><span id="l10.335">     if (parentItem.recurrenceInfo) {</span>
<a href="#l10.336"></a><span id="l10.336">         window.recurrenceInfo = parentItem.recurrenceInfo.clone();</span>
<a href="#l10.337"></a><span id="l10.337">     }</span>
<a href="#l10.338"></a><span id="l10.338"> </span>
<a href="#l10.339"></a><span id="l10.339" class="difflineminus">-    document.documentElement.getButton(&quot;accept&quot;)</span>
<a href="#l10.340"></a><span id="l10.340" class="difflineminus">-            .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.341"></a><span id="l10.341" class="difflineminus">-    document.documentElement.getButton(&quot;cancel&quot;)</span>
<a href="#l10.342"></a><span id="l10.342" class="difflineminus">-            .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.343"></a><span id="l10.343" class="difflineminus">-    document.documentElement.getButton(&quot;cancel&quot;)</span>
<a href="#l10.344"></a><span id="l10.344" class="difflineminus">-            .parentNode.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.345"></a><span id="l10.345" class="difflineminus">-</span>
<a href="#l10.346"></a><span id="l10.346">     // Set initial values for datepickers in New Tasks dialog</span>
<a href="#l10.347"></a><span id="l10.347">     if (isToDo(item)) {</span>
<a href="#l10.348"></a><span id="l10.348">         let initialDatesValue = cal.dateTimeToJsDate(args.initialStartDateValue);</span>
<a href="#l10.349"></a><span id="l10.349">         setElementValue(&quot;completed-date-picker&quot;, initialDatesValue);</span>
<a href="#l10.350"></a><span id="l10.350">         setElementValue(&quot;todo-entrydate&quot;, initialDatesValue);</span>
<a href="#l10.351"></a><span id="l10.351">         setElementValue(&quot;todo-duedate&quot;, initialDatesValue);</span>
<a href="#l10.352"></a><span id="l10.352">     }</span>
<a href="#l10.353"></a><span id="l10.353">     loadDialog(window.calendarItem);</span>
<a href="#l10.354"></a><span id="l10.354"> </span>
<a href="#l10.355"></a><span id="l10.355" class="difflineminus">-    opener.setCursor(&quot;auto&quot;);</span>
<a href="#l10.356"></a><span id="l10.356" class="difflineminus">-</span>
<a href="#l10.357"></a><span id="l10.357" class="difflineminus">-    if (typeof ToolbarIconColor !== 'undefined') {</span>
<a href="#l10.358"></a><span id="l10.358" class="difflineplus">+    gMainWindow.setCursor(&quot;auto&quot;);</span>
<a href="#l10.359"></a><span id="l10.359" class="difflineplus">+</span>
<a href="#l10.360"></a><span id="l10.360" class="difflineplus">+    if (typeof ToolbarIconColor !== &quot;undefined&quot;) {</span>
<a href="#l10.361"></a><span id="l10.361">         ToolbarIconColor.init();</span>
<a href="#l10.362"></a><span id="l10.362">     }</span>
<a href="#l10.363"></a><span id="l10.363"> </span>
<a href="#l10.364"></a><span id="l10.364">     document.getElementById(&quot;item-title&quot;).focus();</span>
<a href="#l10.365"></a><span id="l10.365">     document.getElementById(&quot;item-title&quot;).select();</span>
<a href="#l10.366"></a><span id="l10.366"> </span>
<a href="#l10.367"></a><span id="l10.367">     // This causes the app to ask if the window should be closed when the</span>
<a href="#l10.368"></a><span id="l10.368">     // application is closed.</span>
<a href="#l10.369"></a><span id="l10.369">     Services.obs.addObserver(eventDialogQuitObserver,</span>
<a href="#l10.370"></a><span id="l10.370">                              &quot;quit-application-requested&quot;, false);</span>
<a href="#l10.371"></a><span id="l10.371"> </span>
<a href="#l10.372"></a><span id="l10.372">     // Normally, Enter closes a &lt;dialog&gt;. We want this to rather on Ctrl+Enter.</span>
<a href="#l10.373"></a><span id="l10.373">     // Stopping event propagation doesn't seem to work, so just overwrite the</span>
<a href="#l10.374"></a><span id="l10.374">     // function that does this.</span>
<a href="#l10.375"></a><span id="l10.375" class="difflineminus">-    document.documentElement._hitEnter = function() {};</span>
<a href="#l10.376"></a><span id="l10.376" class="difflineplus">+    if (!gInTab) {</span>
<a href="#l10.377"></a><span id="l10.377" class="difflineplus">+        document.documentElement._hitEnter = function() {};</span>
<a href="#l10.378"></a><span id="l10.378" class="difflineplus">+    }</span>
<a href="#l10.379"></a><span id="l10.379"> </span>
<a href="#l10.380"></a><span id="l10.380">     // set up our calendar event observer</span>
<a href="#l10.381"></a><span id="l10.381">     eventDialogCalendarObserver.observe(item.calendar);</span>
<a href="#l10.382"></a><span id="l10.382"> </span>
<a href="#l10.383"></a><span id="l10.383">     onLoad.isLoading = false;</span>
<a href="#l10.384"></a><span id="l10.384"> }</span>
<a href="#l10.385"></a><span id="l10.385"> </span>
<a href="#l10.386"></a><span id="l10.386"> function onEventDialogUnload() {</span>
<a href="#l10.387"></a><span id="l10.387" class="difflineat">@@ -337,16 +408,19 @@ function onEventDialogUnload() {</span>
<a href="#l10.388"></a><span id="l10.388"> /**</span>
<a href="#l10.389"></a><span id="l10.389">  * Handler function to be called when the accept button is pressed.</span>
<a href="#l10.390"></a><span id="l10.390">  *</span>
<a href="#l10.391"></a><span id="l10.391">  * @return      Returns true if the window should be closed</span>
<a href="#l10.392"></a><span id="l10.392">  */</span>
<a href="#l10.393"></a><span id="l10.393"> function onAccept() {</span>
<a href="#l10.394"></a><span id="l10.394">     dispose();</span>
<a href="#l10.395"></a><span id="l10.395">     onCommandSave(true);</span>
<a href="#l10.396"></a><span id="l10.396" class="difflineplus">+    if (!gWarning) {</span>
<a href="#l10.397"></a><span id="l10.397" class="difflineplus">+        sendMessage({ command: &quot;closeWindowOrTab&quot; });</span>
<a href="#l10.398"></a><span id="l10.398" class="difflineplus">+    }</span>
<a href="#l10.399"></a><span id="l10.399">     return !gWarning;</span>
<a href="#l10.400"></a><span id="l10.400"> }</span>
<a href="#l10.401"></a><span id="l10.401"> </span>
<a href="#l10.402"></a><span id="l10.402"> /**</span>
<a href="#l10.403"></a><span id="l10.403">  * Asks the user if the item should be saved and does so if requested. If the</span>
<a href="#l10.404"></a><span id="l10.404">  * user cancels, the window should stay open.</span>
<a href="#l10.405"></a><span id="l10.405">  *</span>
<a href="#l10.406"></a><span id="l10.406">  * XXX Could possibly be consolidated into onCancel()</span>
<a href="#l10.407"></a><span id="l10.407" class="difflineat">@@ -354,26 +428,31 @@ function onAccept() {</span>
<a href="#l10.408"></a><span id="l10.408">  * @return    Returns true if the window should be closed.</span>
<a href="#l10.409"></a><span id="l10.409">  */</span>
<a href="#l10.410"></a><span id="l10.410"> function onCommandCancel() {</span>
<a href="#l10.411"></a><span id="l10.411">     // Allow closing if the item has not changed and no warning dialog has to be showed.</span>
<a href="#l10.412"></a><span id="l10.412">     if (!isItemChanged() &amp;&amp; !gWarning) {</span>
<a href="#l10.413"></a><span id="l10.413">         return true;</span>
<a href="#l10.414"></a><span id="l10.414">     }</span>
<a href="#l10.415"></a><span id="l10.415"> </span>
<a href="#l10.416"></a><span id="l10.416" class="difflineplus">+    if (gInTab &amp;&amp; gTabInfoObject) {</span>
<a href="#l10.417"></a><span id="l10.417" class="difflineplus">+        // Switch to the tab that the prompt refers to.</span>
<a href="#l10.418"></a><span id="l10.418" class="difflineplus">+        gTabmail.switchToTab(gTabInfoObject);</span>
<a href="#l10.419"></a><span id="l10.419" class="difflineplus">+    }</span>
<a href="#l10.420"></a><span id="l10.420" class="difflineplus">+</span>
<a href="#l10.421"></a><span id="l10.421">     var promptService = Components.interfaces.nsIPromptService;</span>
<a href="#l10.422"></a><span id="l10.422"> </span>
<a href="#l10.423"></a><span id="l10.423" class="difflineminus">-    var promptTitle = calGetString(&quot;calendar&quot;,</span>
<a href="#l10.424"></a><span id="l10.424" class="difflineminus">-                                   isEvent(window.calendarItem) ?</span>
<a href="#l10.425"></a><span id="l10.425" class="difflineminus">-                                      &quot;askSaveTitleEvent&quot; :</span>
<a href="#l10.426"></a><span id="l10.426" class="difflineminus">-                                      &quot;askSaveTitleTask&quot;);</span>
<a href="#l10.427"></a><span id="l10.427" class="difflineminus">-    var promptMessage = calGetString(&quot;calendar&quot;,</span>
<a href="#l10.428"></a><span id="l10.428" class="difflineminus">-                                     isEvent(window.calendarItem) ?</span>
<a href="#l10.429"></a><span id="l10.429" class="difflineminus">-                                        &quot;askSaveMessageEvent&quot; :</span>
<a href="#l10.430"></a><span id="l10.430" class="difflineminus">-                                        &quot;askSaveMessageTask&quot;);</span>
<a href="#l10.431"></a><span id="l10.431" class="difflineplus">+    var promptTitle = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l10.432"></a><span id="l10.432" class="difflineplus">+                                       isEvent(window.calendarItem) ?</span>
<a href="#l10.433"></a><span id="l10.433" class="difflineplus">+                                          &quot;askSaveTitleEvent&quot; :</span>
<a href="#l10.434"></a><span id="l10.434" class="difflineplus">+                                          &quot;askSaveTitleTask&quot;);</span>
<a href="#l10.435"></a><span id="l10.435" class="difflineplus">+    var promptMessage = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l10.436"></a><span id="l10.436" class="difflineplus">+                                         isEvent(window.calendarItem) ?</span>
<a href="#l10.437"></a><span id="l10.437" class="difflineplus">+                                            &quot;askSaveMessageEvent&quot; :</span>
<a href="#l10.438"></a><span id="l10.438" class="difflineplus">+                                            &quot;askSaveMessageTask&quot;);</span>
<a href="#l10.439"></a><span id="l10.439"> </span>
<a href="#l10.440"></a><span id="l10.440">     var flags = promptService.BUTTON_TITLE_SAVE *</span>
<a href="#l10.441"></a><span id="l10.441">                 promptService.BUTTON_POS_0 +</span>
<a href="#l10.442"></a><span id="l10.442">                 promptService.BUTTON_TITLE_CANCEL *</span>
<a href="#l10.443"></a><span id="l10.443">                 promptService.BUTTON_POS_1 +</span>
<a href="#l10.444"></a><span id="l10.444">                 promptService.BUTTON_TITLE_DONT_SAVE *</span>
<a href="#l10.445"></a><span id="l10.445">                 promptService.BUTTON_POS_2;</span>
<a href="#l10.446"></a><span id="l10.446"> </span>
<a href="#l10.447"></a><span id="l10.447" class="difflineat">@@ -396,36 +475,57 @@ function onCommandCancel() {</span>
<a href="#l10.448"></a><span id="l10.448">             return true;</span>
<a href="#l10.449"></a><span id="l10.449">         default: // Cancel</span>
<a href="#l10.450"></a><span id="l10.450">             return false;</span>
<a href="#l10.451"></a><span id="l10.451">     }</span>
<a href="#l10.452"></a><span id="l10.452"> }</span>
<a href="#l10.453"></a><span id="l10.453"> </span>
<a href="#l10.454"></a><span id="l10.454"> /**</span>
<a href="#l10.455"></a><span id="l10.455">  * Handler function to be called when the cancel button is pressed.</span>
<a href="#l10.456"></a><span id="l10.456" class="difflineplus">+ * aPreventClose is true when closing the main window but leaving the tab open.</span>
<a href="#l10.457"></a><span id="l10.457">  *</span>
<a href="#l10.458"></a><span id="l10.458" class="difflineminus">- * @return    Returns true if the window should be closed.</span>
<a href="#l10.459"></a><span id="l10.459" class="difflineplus">+ * @param  {string}  aIframeId      (optional) iframe id of the tab to be closed</span>
<a href="#l10.460"></a><span id="l10.460" class="difflineplus">+ * @param  {boolean} aPreventClose  (optional) True means don't close, just ask about saving</span>
<a href="#l10.461"></a><span id="l10.461" class="difflineplus">+ * @return {boolean}                True if the tab or window should be closed</span>
<a href="#l10.462"></a><span id="l10.462">  */</span>
<a href="#l10.463"></a><span id="l10.463" class="difflineminus">-function onCancel() {</span>
<a href="#l10.464"></a><span id="l10.464" class="difflineplus">+function onCancel(aIframeId, aPreventClose) {</span>
<a href="#l10.465"></a><span id="l10.465">     // The datepickers need to remove the focus in order to trigger the</span>
<a href="#l10.466"></a><span id="l10.466">     // validation of the values just edited, with the keyboard, but not yet</span>
<a href="#l10.467"></a><span id="l10.467">     // confirmed (i.e. not followed by a click, a tab or enter keys pressure).</span>
<a href="#l10.468"></a><span id="l10.468">     document.documentElement.focus();</span>
<a href="#l10.469"></a><span id="l10.469"> </span>
<a href="#l10.470"></a><span id="l10.470">     if (!gConfirmCancel || (gConfirmCancel &amp;&amp; onCommandCancel())) {</span>
<a href="#l10.471"></a><span id="l10.471">         dispose();</span>
<a href="#l10.472"></a><span id="l10.472">         // Don't allow closing the dialog when the user inputs a wrong</span>
<a href="#l10.473"></a><span id="l10.473">         // date then closes the dialog and answers with &quot;Save&quot; in</span>
<a href="#l10.474"></a><span id="l10.474" class="difflineminus">-        // the &quot;Save Event&quot; dialog.</span>
<a href="#l10.475"></a><span id="l10.475" class="difflineplus">+        // the &quot;Save Event&quot; dialog.  Don't allow closing the dialog if</span>
<a href="#l10.476"></a><span id="l10.476" class="difflineplus">+        // the main window is being closed but the tabs in it are not.</span>
<a href="#l10.477"></a><span id="l10.477" class="difflineplus">+</span>
<a href="#l10.478"></a><span id="l10.478" class="difflineplus">+        if (!gWarning &amp;&amp; aPreventClose != true) {</span>
<a href="#l10.479"></a><span id="l10.479" class="difflineplus">+            sendMessage({ command: &quot;closeWindowOrTab&quot;, iframeId: aIframeId });</span>
<a href="#l10.480"></a><span id="l10.480" class="difflineplus">+        }</span>
<a href="#l10.481"></a><span id="l10.481">         return !gWarning;</span>
<a href="#l10.482"></a><span id="l10.482">     }</span>
<a href="#l10.483"></a><span id="l10.483">     return false;</span>
<a href="#l10.484"></a><span id="l10.484"> }</span>
<a href="#l10.485"></a><span id="l10.485"> </span>
<a href="#l10.486"></a><span id="l10.486"> /**</span>
<a href="#l10.487"></a><span id="l10.487" class="difflineplus">+ * Cancels (closes) either the window or the tab, for example when the</span>
<a href="#l10.488"></a><span id="l10.488" class="difflineplus">+ * item is being deleted.</span>
<a href="#l10.489"></a><span id="l10.489" class="difflineplus">+ */</span>
<a href="#l10.490"></a><span id="l10.490" class="difflineplus">+function cancelItem() {</span>
<a href="#l10.491"></a><span id="l10.491" class="difflineplus">+    gConfirmCancel = false;</span>
<a href="#l10.492"></a><span id="l10.492" class="difflineplus">+    if (gInTab) {</span>
<a href="#l10.493"></a><span id="l10.493" class="difflineplus">+        onCancel();</span>
<a href="#l10.494"></a><span id="l10.494" class="difflineplus">+    } else {</span>
<a href="#l10.495"></a><span id="l10.495" class="difflineplus">+        sendMessage({ command: &quot;cancelDialog&quot; });</span>
<a href="#l10.496"></a><span id="l10.496" class="difflineplus">+    }</span>
<a href="#l10.497"></a><span id="l10.497" class="difflineplus">+}</span>
<a href="#l10.498"></a><span id="l10.498" class="difflineplus">+</span>
<a href="#l10.499"></a><span id="l10.499" class="difflineplus">+/**</span>
<a href="#l10.500"></a><span id="l10.500">  * Sets up all dialog controls from the information of the passed item.</span>
<a href="#l10.501"></a><span id="l10.501">  *</span>
<a href="#l10.502"></a><span id="l10.502">  * @param item      The item to parse information out of.</span>
<a href="#l10.503"></a><span id="l10.503">  */</span>
<a href="#l10.504"></a><span id="l10.504"> function loadDialog(item) {</span>
<a href="#l10.505"></a><span id="l10.505">     setElementValue(&quot;item-title&quot;, item.title);</span>
<a href="#l10.506"></a><span id="l10.506">     setElementValue(&quot;item-location&quot;, item.getProperty(&quot;LOCATION&quot;));</span>
<a href="#l10.507"></a><span id="l10.507"> </span>
<a href="#l10.508"></a><span id="l10.508" class="difflineat">@@ -450,29 +550,36 @@ function loadDialog(item) {</span>
<a href="#l10.509"></a><span id="l10.509">         for (var attachment of attachments) {</span>
<a href="#l10.510"></a><span id="l10.510">             addAttachment(attachment);</span>
<a href="#l10.511"></a><span id="l10.511">         }</span>
<a href="#l10.512"></a><span id="l10.512">     } else {</span>
<a href="#l10.513"></a><span id="l10.513">         updateAttachment();</span>
<a href="#l10.514"></a><span id="l10.514">     }</span>
<a href="#l10.515"></a><span id="l10.515"> </span>
<a href="#l10.516"></a><span id="l10.516">     // URL link</span>
<a href="#l10.517"></a><span id="l10.517" class="difflineminus">-    updateLink();</span>
<a href="#l10.518"></a><span id="l10.518" class="difflineplus">+    let cmdToggleLink = parent.document.getElementById(&quot;cmd_toggle_link&quot;);</span>
<a href="#l10.519"></a><span id="l10.519" class="difflineplus">+    let showLink = cmdToggleLink.getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l10.520"></a><span id="l10.520" class="difflineplus">+    // currently we always show the link for the tab case (if the link</span>
<a href="#l10.521"></a><span id="l10.521" class="difflineplus">+    // exists), since there is no menu item or toolbar item to show/hide it.</span>
<a href="#l10.522"></a><span id="l10.522" class="difflineplus">+    if (gInTab) {</span>
<a href="#l10.523"></a><span id="l10.523" class="difflineplus">+        showLink = true;</span>
<a href="#l10.524"></a><span id="l10.524" class="difflineplus">+    }</span>
<a href="#l10.525"></a><span id="l10.525" class="difflineplus">+    updateItemURL(showLink);</span>
<a href="#l10.526"></a><span id="l10.526"> </span>
<a href="#l10.527"></a><span id="l10.527">     // Description</span>
<a href="#l10.528"></a><span id="l10.528">     setElementValue(&quot;item-description&quot;, item.getProperty(&quot;DESCRIPTION&quot;));</span>
<a href="#l10.529"></a><span id="l10.529"> </span>
<a href="#l10.530"></a><span id="l10.530">     // Status</span>
<a href="#l10.531"></a><span id="l10.531">     if (cal.isEvent(item)) {</span>
<a href="#l10.532"></a><span id="l10.532" class="difflineminus">-        gStatus = item.hasProperty(&quot;STATUS&quot;) ?</span>
<a href="#l10.533"></a><span id="l10.533" class="difflineplus">+        gConfig.status = item.hasProperty(&quot;STATUS&quot;) ?</span>
<a href="#l10.534"></a><span id="l10.534">             item.getProperty(&quot;STATUS&quot;) : &quot;NONE&quot;;</span>
<a href="#l10.535"></a><span id="l10.535" class="difflineminus">-        if (gStatus == &quot;NONE&quot;) {</span>
<a href="#l10.536"></a><span id="l10.536" class="difflineminus">-            document.getElementById(&quot;cmd_status_none&quot;).removeAttribute(&quot;hidden&quot;);</span>
<a href="#l10.537"></a><span id="l10.537" class="difflineplus">+        if (gConfig.status == &quot;NONE&quot;) {</span>
<a href="#l10.538"></a><span id="l10.538" class="difflineplus">+            sendMessage({ command: &quot;showCmdStatusNone&quot; });</span>
<a href="#l10.539"></a><span id="l10.539">         }</span>
<a href="#l10.540"></a><span id="l10.540" class="difflineminus">-        updateStatus();</span>
<a href="#l10.541"></a><span id="l10.541" class="difflineplus">+        updateStatus(gConfig.status);</span>
<a href="#l10.542"></a><span id="l10.542">     } else {</span>
<a href="#l10.543"></a><span id="l10.543">         let todoStatus = document.getElementById(&quot;todo-status&quot;);</span>
<a href="#l10.544"></a><span id="l10.544">         setElementValue(todoStatus, item.getProperty(&quot;STATUS&quot;));</span>
<a href="#l10.545"></a><span id="l10.545">         if (!todoStatus.selectedItem) {</span>
<a href="#l10.546"></a><span id="l10.546">             // No selected item means there was no &lt;menuitem&gt; that matches the</span>
<a href="#l10.547"></a><span id="l10.547">             // value given. Select the &quot;NONE&quot; item by default.</span>
<a href="#l10.548"></a><span id="l10.548">             setElementValue(todoStatus, &quot;NONE&quot;);</span>
<a href="#l10.549"></a><span id="l10.549">         }</span>
<a href="#l10.550"></a><span id="l10.550" class="difflineat">@@ -495,47 +602,59 @@ function loadDialog(item) {</span>
<a href="#l10.551"></a><span id="l10.551">         if (percentCompleteInteger &lt; 0) {</span>
<a href="#l10.552"></a><span id="l10.552">             percentCompleteInteger = 0;</span>
<a href="#l10.553"></a><span id="l10.553">         } else if (percentCompleteInteger &gt; 100) {</span>
<a href="#l10.554"></a><span id="l10.554">             percentCompleteInteger = 100;</span>
<a href="#l10.555"></a><span id="l10.555">         }</span>
<a href="#l10.556"></a><span id="l10.556">         setElementValue(&quot;percent-complete-textbox&quot;, percentCompleteInteger);</span>
<a href="#l10.557"></a><span id="l10.557">     }</span>
<a href="#l10.558"></a><span id="l10.558"> </span>
<a href="#l10.559"></a><span id="l10.559" class="difflineminus">-    // Set Item-Menu label to Event or Task</span>
<a href="#l10.560"></a><span id="l10.560" class="difflineminus">-    let menuItem = document.getElementById(&quot;item-menu&quot;);</span>
<a href="#l10.561"></a><span id="l10.561" class="difflineminus">-    menuItem.setAttribute(&quot;label&quot;, calGetString(&quot;calendar-event-dialog&quot;,</span>
<a href="#l10.562"></a><span id="l10.562" class="difflineminus">-                                          cal.isEvent(item) ? &quot;itemMenuLabelEvent&quot; : &quot;itemMenuLabelTask&quot;));</span>
<a href="#l10.563"></a><span id="l10.563" class="difflineminus">-    menuItem.setAttribute(&quot;accesskey&quot;, calGetString(&quot;calendar-event-dialog&quot;,</span>
<a href="#l10.564"></a><span id="l10.564" class="difflineminus">-                                          cal.isEvent(item) ? &quot;itemMenuAccesskeyEvent2&quot; : &quot;itemMenuAccesskeyTask2&quot;));</span>
<a href="#l10.565"></a><span id="l10.565" class="difflineplus">+    // When in a window, set Item-Menu label to Event or Task</span>
<a href="#l10.566"></a><span id="l10.566" class="difflineplus">+    if (!gInTab) {</span>
<a href="#l10.567"></a><span id="l10.567" class="difflineplus">+        let isEvent = cal.isEvent(item);</span>
<a href="#l10.568"></a><span id="l10.568" class="difflineplus">+</span>
<a href="#l10.569"></a><span id="l10.569" class="difflineplus">+        let labelString = isEvent ? &quot;itemMenuLabelEvent&quot; : &quot;itemMenuLabelTask&quot;;</span>
<a href="#l10.570"></a><span id="l10.570" class="difflineplus">+        let label = cal.calGetString(&quot;calendar-event-dialog&quot;, labelString);</span>
<a href="#l10.571"></a><span id="l10.571" class="difflineplus">+</span>
<a href="#l10.572"></a><span id="l10.572" class="difflineplus">+        let accessKeyString = isEvent ? &quot;itemMenuAccesskeyEvent2&quot; : &quot;itemMenuAccesskeyTask2&quot;;</span>
<a href="#l10.573"></a><span id="l10.573" class="difflineplus">+        let accessKey = cal.calGetString(&quot;calendar-event-dialog&quot;, accessKeyString);</span>
<a href="#l10.574"></a><span id="l10.574" class="difflineplus">+        sendMessage({</span>
<a href="#l10.575"></a><span id="l10.575" class="difflineplus">+            command: &quot;initializeItemMenu&quot;,</span>
<a href="#l10.576"></a><span id="l10.576" class="difflineplus">+            label: label,</span>
<a href="#l10.577"></a><span id="l10.577" class="difflineplus">+            accessKey: accessKey</span>
<a href="#l10.578"></a><span id="l10.578" class="difflineplus">+        });</span>
<a href="#l10.579"></a><span id="l10.579" class="difflineplus">+    }</span>
<a href="#l10.580"></a><span id="l10.580"> </span>
<a href="#l10.581"></a><span id="l10.581">     // Priority</span>
<a href="#l10.582"></a><span id="l10.582" class="difflineminus">-    gPriority = parseInt(item.priority);</span>
<a href="#l10.583"></a><span id="l10.583" class="difflineminus">-    updatePriority();</span>
<a href="#l10.584"></a><span id="l10.584" class="difflineplus">+    gConfig.priority = parseInt(item.priority);</span>
<a href="#l10.585"></a><span id="l10.585" class="difflineplus">+    updatePriority(gConfig.priority);</span>
<a href="#l10.586"></a><span id="l10.586"> </span>
<a href="#l10.587"></a><span id="l10.587">     // Privacy</span>
<a href="#l10.588"></a><span id="l10.588" class="difflineminus">-    gPrivacy = item.privacy;</span>
<a href="#l10.589"></a><span id="l10.589" class="difflineminus">-    updatePrivacy();</span>
<a href="#l10.590"></a><span id="l10.590" class="difflineplus">+    gConfig.privacy = item.privacy;</span>
<a href="#l10.591"></a><span id="l10.591" class="difflineplus">+    updatePrivacy(gConfig.privacy);</span>
<a href="#l10.592"></a><span id="l10.592"> </span>
<a href="#l10.593"></a><span id="l10.593">     // load repeat details</span>
<a href="#l10.594"></a><span id="l10.594">     loadRepeat(item);</span>
<a href="#l10.595"></a><span id="l10.595"> </span>
<a href="#l10.596"></a><span id="l10.596">     // load reminder details</span>
<a href="#l10.597"></a><span id="l10.597">     loadReminders(item.getAlarms({}));</span>
<a href="#l10.598"></a><span id="l10.598"> </span>
<a href="#l10.599"></a><span id="l10.599">     // Synchronize link-top-image with keep-duration-button status</span>
<a href="#l10.600"></a><span id="l10.600">     let keepAttribute = document.getElementById(&quot;keepduration-button&quot;).getAttribute(&quot;keep&quot;) == &quot;true&quot;;</span>
<a href="#l10.601"></a><span id="l10.601">     setBooleanAttribute(&quot;link-image-top&quot;, &quot;keep&quot;, keepAttribute);</span>
<a href="#l10.602"></a><span id="l10.602"> </span>
<a href="#l10.603"></a><span id="l10.603">     updateDateTime();</span>
<a href="#l10.604"></a><span id="l10.604"> </span>
<a href="#l10.605"></a><span id="l10.605">     updateCalendar();</span>
<a href="#l10.606"></a><span id="l10.606"> </span>
<a href="#l10.607"></a><span id="l10.607">     // figure out what the title of the dialog should be and set it</span>
<a href="#l10.608"></a><span id="l10.608" class="difflineminus">-    updateTitle();</span>
<a href="#l10.609"></a><span id="l10.609" class="difflineplus">+    // tabs already have their title set</span>
<a href="#l10.610"></a><span id="l10.610" class="difflineplus">+    if (!gInTab) {</span>
<a href="#l10.611"></a><span id="l10.611" class="difflineplus">+        updateTitle();</span>
<a href="#l10.612"></a><span id="l10.612" class="difflineplus">+    }</span>
<a href="#l10.613"></a><span id="l10.613"> </span>
<a href="#l10.614"></a><span id="l10.614">     let notifyCheckbox = document.getElementById(&quot;notify-attendees-checkbox&quot;);</span>
<a href="#l10.615"></a><span id="l10.615">     let undiscloseCheckbox = document.getElementById(&quot;undisclose-attendees-checkbox&quot;);</span>
<a href="#l10.616"></a><span id="l10.616">     if (canNotifyAttendees(item.calendar, item)) {</span>
<a href="#l10.617"></a><span id="l10.617">         // visualize that the server will send out mail:</span>
<a href="#l10.618"></a><span id="l10.618">         notifyCheckbox.checked = true;</span>
<a href="#l10.619"></a><span id="l10.619">         // hide undisclosure control as this a client only feature</span>
<a href="#l10.620"></a><span id="l10.620">         undiscloseCheckbox.disabled = true;</span>
<a href="#l10.621"></a><span id="l10.621" class="difflineat">@@ -552,18 +671,18 @@ function loadDialog(item) {</span>
<a href="#l10.622"></a><span id="l10.622">         // disable checkbox, if notifyCheckbox is not checked</span>
<a href="#l10.623"></a><span id="l10.623">         undiscloseCheckbox.disabled = (notifyCheckbox.checked == false);</span>
<a href="#l10.624"></a><span id="l10.624">     }</span>
<a href="#l10.625"></a><span id="l10.625"> </span>
<a href="#l10.626"></a><span id="l10.626">     updateAttendees();</span>
<a href="#l10.627"></a><span id="l10.627">     updateRepeat(true);</span>
<a href="#l10.628"></a><span id="l10.628">     updateReminder(true);</span>
<a href="#l10.629"></a><span id="l10.629"> </span>
<a href="#l10.630"></a><span id="l10.630" class="difflineminus">-    gShowTimeAs = item.getProperty(&quot;TRANSP&quot;);</span>
<a href="#l10.631"></a><span id="l10.631" class="difflineminus">-    updateShowTimeAs();</span>
<a href="#l10.632"></a><span id="l10.632" class="difflineplus">+    gConfig.showTimeAs = item.getProperty(&quot;TRANSP&quot;);</span>
<a href="#l10.633"></a><span id="l10.633" class="difflineplus">+    updateShowTimeAs(gConfig.showTimeAs);</span>
<a href="#l10.634"></a><span id="l10.634"> }</span>
<a href="#l10.635"></a><span id="l10.635"> </span>
<a href="#l10.636"></a><span id="l10.636"> /**</span>
<a href="#l10.637"></a><span id="l10.637">  * Enables/disables undiscloseCheckbox on (un)checking notifyCheckbox</span>
<a href="#l10.638"></a><span id="l10.638">  */</span>
<a href="#l10.639"></a><span id="l10.639"> function changeUndiscloseCheckboxStatus() {</span>
<a href="#l10.640"></a><span id="l10.640">     let notifyCheckbox = document.getElementById(&quot;notify-attendees-checkbox&quot;);</span>
<a href="#l10.641"></a><span id="l10.641">     let undiscloseCheckbox = document.getElementById(&quot;undisclose-attendees-checkbox&quot;);</span>
<a href="#l10.642"></a><span id="l10.642" class="difflineat">@@ -675,20 +794,29 @@ function loadDateTime(item) {</span>
<a href="#l10.643"></a><span id="l10.643">             endTime = endTime.getInTimezone(kDefaultTimezone);</span>
<a href="#l10.644"></a><span id="l10.644">         } else {</span>
<a href="#l10.645"></a><span id="l10.645">             gEndTimezone = kDefaultTimezone;</span>
<a href="#l10.646"></a><span id="l10.646">         }</span>
<a href="#l10.647"></a><span id="l10.647">         if (hasEntryDate &amp;&amp; hasDueDate) {</span>
<a href="#l10.648"></a><span id="l10.648">             duration = endTime.subtractDate(startTime);</span>
<a href="#l10.649"></a><span id="l10.649">         }</span>
<a href="#l10.650"></a><span id="l10.650">         setElementValue(&quot;cmd_attendees&quot;, true, &quot;disabled&quot;);</span>
<a href="#l10.651"></a><span id="l10.651" class="difflineplus">+        sendMessage({</span>
<a href="#l10.652"></a><span id="l10.652" class="difflineplus">+            command: &quot;updatePanelState&quot;,</span>
<a href="#l10.653"></a><span id="l10.653" class="difflineplus">+            argument: {attendeesCommand: false}</span>
<a href="#l10.654"></a><span id="l10.654" class="difflineplus">+        });</span>
<a href="#l10.655"></a><span id="l10.655">         setBooleanAttribute(&quot;keepduration-button&quot;, &quot;disabled&quot;, !(hasEntryDate &amp;&amp; hasDueDate));</span>
<a href="#l10.656"></a><span id="l10.656">         gStartTime = startTime;</span>
<a href="#l10.657"></a><span id="l10.657">         gEndTime = endTime;</span>
<a href="#l10.658"></a><span id="l10.658">         gItemDuration = duration;</span>
<a href="#l10.659"></a><span id="l10.659" class="difflineplus">+    } else {</span>
<a href="#l10.660"></a><span id="l10.660" class="difflineplus">+        sendMessage({</span>
<a href="#l10.661"></a><span id="l10.661" class="difflineplus">+            command: &quot;updatePanelState&quot;,</span>
<a href="#l10.662"></a><span id="l10.662" class="difflineplus">+            argument: {attendeesCommand: true}</span>
<a href="#l10.663"></a><span id="l10.663" class="difflineplus">+        });</span>
<a href="#l10.664"></a><span id="l10.664">     }</span>
<a href="#l10.665"></a><span id="l10.665"> }</span>
<a href="#l10.666"></a><span id="l10.666"> </span>
<a href="#l10.667"></a><span id="l10.667"> /**</span>
<a href="#l10.668"></a><span id="l10.668">  * Toggles the &quot;keep&quot; attribute every time the keepduration-button is pressed.</span>
<a href="#l10.669"></a><span id="l10.669">  */</span>
<a href="#l10.670"></a><span id="l10.670"> function toggleKeepDuration() {</span>
<a href="#l10.671"></a><span id="l10.671">     let kdb = document.getElementById(&quot;keepduration-button&quot;);</span>
<a href="#l10.672"></a><span id="l10.672" class="difflineat">@@ -733,26 +861,25 @@ function dateTimeControls2State(aStartDa</span>
<a href="#l10.673"></a><span id="l10.673">         startWidgetId = &quot;todo-entrydate&quot;;</span>
<a href="#l10.674"></a><span id="l10.674">         endWidgetId = &quot;todo-duedate&quot;;</span>
<a href="#l10.675"></a><span id="l10.675">     }</span>
<a href="#l10.676"></a><span id="l10.676"> </span>
<a href="#l10.677"></a><span id="l10.677">     var saveStartTime = gStartTime;</span>
<a href="#l10.678"></a><span id="l10.678">     var saveEndTime = gEndTime;</span>
<a href="#l10.679"></a><span id="l10.679">     var kDefaultTimezone = calendarDefaultTimezone();</span>
<a href="#l10.680"></a><span id="l10.680"> </span>
<a href="#l10.681"></a><span id="l10.681" class="difflineminus">-    let timezonesEnabled = document.getElementById('cmd_timezone')</span>
<a href="#l10.682"></a><span id="l10.682" class="difflineminus">-                                   .getAttribute('checked') == 'true';</span>
<a href="#l10.683"></a><span id="l10.683">     if (gStartTime) {</span>
<a href="#l10.684"></a><span id="l10.684">         // jsDate is always in OS timezone, thus we create a calIDateTime</span>
<a href="#l10.685"></a><span id="l10.685">         // object from the jsDate representation then we convert the timezone</span>
<a href="#l10.686"></a><span id="l10.686">         // in order to keep gStartTime in default timezone.</span>
<a href="#l10.687"></a><span id="l10.687" class="difflineminus">-        gStartTime = cal.jsDateToDateTime(getElementValue(startWidgetId),</span>
<a href="#l10.688"></a><span id="l10.688" class="difflineminus">-                                          (timezonesEnabled || allDay) ? gStartTimezone : kDefaultTimezone);</span>
<a href="#l10.689"></a><span id="l10.689" class="difflineminus">-        if (timezonesEnabled || allDay) {</span>
<a href="#l10.690"></a><span id="l10.690" class="difflineplus">+        if (gTimezonesEnabled || allDay) {</span>
<a href="#l10.691"></a><span id="l10.691" class="difflineplus">+            gStartTime = cal.jsDateToDateTime(getElementValue(startWidgetId), gStartTimezone);</span>
<a href="#l10.692"></a><span id="l10.692">             gStartTime = gStartTime.getInTimezone(kDefaultTimezone);</span>
<a href="#l10.693"></a><span id="l10.693" class="difflineplus">+        } else {</span>
<a href="#l10.694"></a><span id="l10.694" class="difflineplus">+            gStartTime = cal.jsDateToDateTime(getElementValue(startWidgetId), kDefaultTimezone);</span>
<a href="#l10.695"></a><span id="l10.695">         }</span>
<a href="#l10.696"></a><span id="l10.696">         gStartTime.isDate = allDay;</span>
<a href="#l10.697"></a><span id="l10.697">     }</span>
<a href="#l10.698"></a><span id="l10.698">     if (gEndTime) {</span>
<a href="#l10.699"></a><span id="l10.699">         if (aStartDatepicker) {</span>
<a href="#l10.700"></a><span id="l10.700">             // Change the End date in order to keep the duration.</span>
<a href="#l10.701"></a><span id="l10.701">             gEndTime = gStartTime.clone();</span>
<a href="#l10.702"></a><span id="l10.702">             if (gItemDuration) {</span>
<a href="#l10.703"></a><span id="l10.703" class="difflineat">@@ -760,22 +887,22 @@ function dateTimeControls2State(aStartDa</span>
<a href="#l10.704"></a><span id="l10.704">             }</span>
<a href="#l10.705"></a><span id="l10.705">         } else {</span>
<a href="#l10.706"></a><span id="l10.706">             let timezone = gEndTimezone;</span>
<a href="#l10.707"></a><span id="l10.707">             if (timezone.isUTC) {</span>
<a href="#l10.708"></a><span id="l10.708">                 if (gStartTime &amp;&amp; !compareObjects(gStartTimezone, gEndTimezone)) {</span>
<a href="#l10.709"></a><span id="l10.709">                     timezone = gStartTimezone;</span>
<a href="#l10.710"></a><span id="l10.710">                 }</span>
<a href="#l10.711"></a><span id="l10.711">             }</span>
<a href="#l10.712"></a><span id="l10.712" class="difflineminus">-            gEndTime = cal.jsDateToDateTime(getElementValue(endWidgetId),</span>
<a href="#l10.713"></a><span id="l10.713" class="difflineminus">-                                            (timezonesEnabled || allDay) ? timezone : kDefaultTimezone);</span>
<a href="#l10.714"></a><span id="l10.714" class="difflineminus">-            if (timezonesEnabled || allDay) {</span>
<a href="#l10.715"></a><span id="l10.715" class="difflineplus">+            if (gTimezonesEnabled || allDay) {</span>
<a href="#l10.716"></a><span id="l10.716" class="difflineplus">+                gEndTime = cal.jsDateToDateTime(getElementValue(endWidgetId), timezone);</span>
<a href="#l10.717"></a><span id="l10.717">                 gEndTime = gEndTime.getInTimezone(kDefaultTimezone);</span>
<a href="#l10.718"></a><span id="l10.718" class="difflineplus">+            } else {</span>
<a href="#l10.719"></a><span id="l10.719" class="difflineplus">+                gEndTime = cal.jsDateToDateTime(getElementValue(endWidgetId), kDefaultTimezone);</span>
<a href="#l10.720"></a><span id="l10.720">             }</span>
<a href="#l10.721"></a><span id="l10.721" class="difflineminus">-</span>
<a href="#l10.722"></a><span id="l10.722">             gEndTime.isDate = allDay;</span>
<a href="#l10.723"></a><span id="l10.723">             if (keepAttribute &amp;&amp; gItemDuration) {</span>
<a href="#l10.724"></a><span id="l10.724">                 // Keepduration-button links the the Start to the End date. We</span>
<a href="#l10.725"></a><span id="l10.725">                 // have to change the Start date in order to keep the duration.</span>
<a href="#l10.726"></a><span id="l10.726">                 let fduration = gItemDuration.clone();</span>
<a href="#l10.727"></a><span id="l10.727">                 fduration.isNegative = true;</span>
<a href="#l10.728"></a><span id="l10.728">                 gStartTime = gEndTime.clone();</span>
<a href="#l10.729"></a><span id="l10.729">                 gStartTime.addDuration(fduration);</span>
<a href="#l10.730"></a><span id="l10.730" class="difflineat">@@ -1138,18 +1265,18 @@ function saveDialog(item) {</span>
<a href="#l10.731"></a><span id="l10.731">         item.addAttachment(att);</span>
<a href="#l10.732"></a><span id="l10.732">     }</span>
<a href="#l10.733"></a><span id="l10.733"> </span>
<a href="#l10.734"></a><span id="l10.734">     // Description</span>
<a href="#l10.735"></a><span id="l10.735">     setItemProperty(item, &quot;DESCRIPTION&quot;, getElementValue(&quot;item-description&quot;));</span>
<a href="#l10.736"></a><span id="l10.736"> </span>
<a href="#l10.737"></a><span id="l10.737">     // Event Status</span>
<a href="#l10.738"></a><span id="l10.738">     if (isEvent(item)) {</span>
<a href="#l10.739"></a><span id="l10.739" class="difflineminus">-        if(gStatus &amp;&amp; gStatus != &quot;NONE&quot;) {</span>
<a href="#l10.740"></a><span id="l10.740" class="difflineminus">-            item.setProperty(&quot;STATUS&quot;, gStatus);</span>
<a href="#l10.741"></a><span id="l10.741" class="difflineplus">+        if (gConfig.status &amp;&amp; gConfig.status != &quot;NONE&quot;) {</span>
<a href="#l10.742"></a><span id="l10.742" class="difflineplus">+            item.setProperty(&quot;STATUS&quot;, gConfig.status);</span>
<a href="#l10.743"></a><span id="l10.743">         } else {</span>
<a href="#l10.744"></a><span id="l10.744">             item.deleteProperty(&quot;STATUS&quot;);</span>
<a href="#l10.745"></a><span id="l10.745">         }</span>
<a href="#l10.746"></a><span id="l10.746">     } else {</span>
<a href="#l10.747"></a><span id="l10.747">         var status = getElementValue(&quot;todo-status&quot;);</span>
<a href="#l10.748"></a><span id="l10.748">         if (status != &quot;COMPLETED&quot;) {</span>
<a href="#l10.749"></a><span id="l10.749">             item.completedDate = null;</span>
<a href="#l10.750"></a><span id="l10.750">         }</span>
<a href="#l10.751"></a><span id="l10.751" class="difflineat">@@ -1159,31 +1286,31 @@ function saveDialog(item) {</span>
<a href="#l10.752"></a><span id="l10.752">     // set the &quot;PRIORITY&quot; property if a valid priority has been</span>
<a href="#l10.753"></a><span id="l10.753">     // specified (any integer value except *null*) OR the item</span>
<a href="#l10.754"></a><span id="l10.754">     // already specifies a priority. in any other case we don't</span>
<a href="#l10.755"></a><span id="l10.755">     // need this property and can safely delete it. we need this special</span>
<a href="#l10.756"></a><span id="l10.756">     // handling since the WCAP provider always includes the priority</span>
<a href="#l10.757"></a><span id="l10.757">     // with value *null* and we don't detect changes to this item if</span>
<a href="#l10.758"></a><span id="l10.758">     // we delete this property.</span>
<a href="#l10.759"></a><span id="l10.759">     if (capSupported(&quot;priority&quot;) &amp;&amp;</span>
<a href="#l10.760"></a><span id="l10.760" class="difflineminus">-        (gPriority || item.hasProperty(&quot;PRIORITY&quot;))) {</span>
<a href="#l10.761"></a><span id="l10.761" class="difflineminus">-        item.setProperty(&quot;PRIORITY&quot;, gPriority);</span>
<a href="#l10.762"></a><span id="l10.762" class="difflineplus">+        (gConfig.priority || item.hasProperty(&quot;PRIORITY&quot;))) {</span>
<a href="#l10.763"></a><span id="l10.763" class="difflineplus">+        item.setProperty(&quot;PRIORITY&quot;, gConfig.priority);</span>
<a href="#l10.764"></a><span id="l10.764">     } else {</span>
<a href="#l10.765"></a><span id="l10.765">         item.deleteProperty(&quot;PRIORITY&quot;);</span>
<a href="#l10.766"></a><span id="l10.766">     }</span>
<a href="#l10.767"></a><span id="l10.767"> </span>
<a href="#l10.768"></a><span id="l10.768">     // Transparency</span>
<a href="#l10.769"></a><span id="l10.769" class="difflineminus">-    if (gShowTimeAs) {</span>
<a href="#l10.770"></a><span id="l10.770" class="difflineminus">-        item.setProperty(&quot;TRANSP&quot;, gShowTimeAs);</span>
<a href="#l10.771"></a><span id="l10.771" class="difflineplus">+    if (gConfig.showTimeAs) {</span>
<a href="#l10.772"></a><span id="l10.772" class="difflineplus">+        item.setProperty(&quot;TRANSP&quot;, gConfig.showTimeAs);</span>
<a href="#l10.773"></a><span id="l10.773">     } else {</span>
<a href="#l10.774"></a><span id="l10.774">         item.deleteProperty(&quot;TRANSP&quot;);</span>
<a href="#l10.775"></a><span id="l10.775">     }</span>
<a href="#l10.776"></a><span id="l10.776"> </span>
<a href="#l10.777"></a><span id="l10.777">     // Privacy</span>
<a href="#l10.778"></a><span id="l10.778" class="difflineminus">-    setItemProperty(item, &quot;CLASS&quot;, gPrivacy, &quot;privacy&quot;);</span>
<a href="#l10.779"></a><span id="l10.779" class="difflineplus">+    setItemProperty(item, &quot;CLASS&quot;, gConfig.privacy, &quot;privacy&quot;);</span>
<a href="#l10.780"></a><span id="l10.780"> </span>
<a href="#l10.781"></a><span id="l10.781">     if (item.status == &quot;COMPLETED&quot; &amp;&amp; isToDo(item)) {</span>
<a href="#l10.782"></a><span id="l10.782">         var elementValue = getElementValue(&quot;completed-date-picker&quot;);</span>
<a href="#l10.783"></a><span id="l10.783">         item.completedDate = cal.jsDateToDateTime(elementValue);</span>
<a href="#l10.784"></a><span id="l10.784">     }</span>
<a href="#l10.785"></a><span id="l10.785"> </span>
<a href="#l10.786"></a><span id="l10.786">     saveReminder(item);</span>
<a href="#l10.787"></a><span id="l10.787"> }</span>
<a href="#l10.788"></a><span id="l10.788" class="difflineat">@@ -1260,18 +1387,19 @@ function updateTitle() {</span>
<a href="#l10.789"></a><span id="l10.789">     let strName;</span>
<a href="#l10.790"></a><span id="l10.790">     if (cal.isEvent(window.calendarItem)) {</span>
<a href="#l10.791"></a><span id="l10.791">         strName = (window.mode == &quot;new&quot; ? &quot;newEventDialog&quot; : &quot;editEventDialog&quot;);</span>
<a href="#l10.792"></a><span id="l10.792">     } else if (cal.isToDo(window.calendarItem)) {</span>
<a href="#l10.793"></a><span id="l10.793">         strName = (window.mode == &quot;new&quot; ? &quot;newTaskDialog&quot; : &quot;editTaskDialog&quot;);</span>
<a href="#l10.794"></a><span id="l10.794">     } else {</span>
<a href="#l10.795"></a><span id="l10.795">         throw Components.results.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l10.796"></a><span id="l10.796">     }</span>
<a href="#l10.797"></a><span id="l10.797" class="difflineminus">-    document.title = cal.calGetString(&quot;calendar&quot;, strName) + &quot;: &quot; +</span>
<a href="#l10.798"></a><span id="l10.798" class="difflineminus">-                        getElementValue(&quot;item-title&quot;);</span>
<a href="#l10.799"></a><span id="l10.799" class="difflineplus">+    let newTitle = cal.calGetString(&quot;calendar&quot;, strName) + &quot;: &quot; +</span>
<a href="#l10.800"></a><span id="l10.800" class="difflineplus">+                      getElementValue(&quot;item-title&quot;);</span>
<a href="#l10.801"></a><span id="l10.801" class="difflineplus">+    sendMessage({ command: &quot;updateTitle&quot;, argument: newTitle });</span>
<a href="#l10.802"></a><span id="l10.802"> }</span>
<a href="#l10.803"></a><span id="l10.803"> </span>
<a href="#l10.804"></a><span id="l10.804"> /**</span>
<a href="#l10.805"></a><span id="l10.805">  * Update the disabled status of the accept button. The button is enabled if all</span>
<a href="#l10.806"></a><span id="l10.806">  * parts of the dialog have options selected that make sense.</span>
<a href="#l10.807"></a><span id="l10.807">  * constraining factors like</span>
<a href="#l10.808"></a><span id="l10.808">  */</span>
<a href="#l10.809"></a><span id="l10.809"> function updateAccept() {</span>
<a href="#l10.810"></a><span id="l10.810" class="difflineat">@@ -1288,19 +1416,17 @@ function updateAccept() {</span>
<a href="#l10.811"></a><span id="l10.811">     } else {</span>
<a href="#l10.812"></a><span id="l10.812">         startDate = getElementValue(&quot;todo-has-entrydate&quot;, &quot;checked&quot;) ?</span>
<a href="#l10.813"></a><span id="l10.813">             cal.jsDateToDateTime(getElementValue(&quot;todo-entrydate&quot;)) : null;</span>
<a href="#l10.814"></a><span id="l10.814">         endDate = getElementValue(&quot;todo-has-duedate&quot;, &quot;checked&quot;) ?</span>
<a href="#l10.815"></a><span id="l10.815">             cal.jsDateToDateTime(getElementValue(&quot;todo-duedate&quot;)) : null;</span>
<a href="#l10.816"></a><span id="l10.816">     }</span>
<a href="#l10.817"></a><span id="l10.817"> </span>
<a href="#l10.818"></a><span id="l10.818">     if (startDate &amp;&amp; endDate) {</span>
<a href="#l10.819"></a><span id="l10.819" class="difflineminus">-        let timezonesEnabled = document.getElementById('cmd_timezone')</span>
<a href="#l10.820"></a><span id="l10.820" class="difflineminus">-                                       .getAttribute('checked') == 'true';</span>
<a href="#l10.821"></a><span id="l10.821" class="difflineminus">-        if (timezonesEnabled) {</span>
<a href="#l10.822"></a><span id="l10.822" class="difflineplus">+        if (gTimezonesEnabled) {</span>
<a href="#l10.823"></a><span id="l10.823">             var startTimezone = gStartTimezone;</span>
<a href="#l10.824"></a><span id="l10.824">             var endTimezone = gEndTimezone;</span>
<a href="#l10.825"></a><span id="l10.825">             if (endTimezone.isUTC) {</span>
<a href="#l10.826"></a><span id="l10.826">                 if (!compareObjects(gStartTimezone, gEndTimezone)) {</span>
<a href="#l10.827"></a><span id="l10.827">                     endTimezone = gStartTimezone;</span>
<a href="#l10.828"></a><span id="l10.828">                 }</span>
<a href="#l10.829"></a><span id="l10.829">             }</span>
<a href="#l10.830"></a><span id="l10.830"> </span>
<a href="#l10.831"></a><span id="l10.831" class="difflineat">@@ -1343,18 +1469,17 @@ function updateAccept() {</span>
<a href="#l10.832"></a><span id="l10.832"> </span>
<a href="#l10.833"></a><span id="l10.833"> /**</span>
<a href="#l10.834"></a><span id="l10.834">  * Enables/disables the commands cmd_accept and cmd_save related to the</span>
<a href="#l10.835"></a><span id="l10.835">  * save operation.</span>
<a href="#l10.836"></a><span id="l10.836">  *</span>
<a href="#l10.837"></a><span id="l10.837">  * @param aEnable           true: enables the command</span>
<a href="#l10.838"></a><span id="l10.838">  */</span>
<a href="#l10.839"></a><span id="l10.839"> function enableAcceptCommand(aEnable) {</span>
<a href="#l10.840"></a><span id="l10.840" class="difflineminus">-    setElementValue(&quot;cmd_accept&quot;, !aEnable, &quot;disabled&quot;);</span>
<a href="#l10.841"></a><span id="l10.841" class="difflineminus">-    setElementValue(&quot;cmd_save&quot;, !aEnable, &quot;disabled&quot;);</span>
<a href="#l10.842"></a><span id="l10.842" class="difflineplus">+    sendMessage({ command: &quot;enableAcceptCommand&quot;, argument: aEnable });</span>
<a href="#l10.843"></a><span id="l10.843"> }</span>
<a href="#l10.844"></a><span id="l10.844"> </span>
<a href="#l10.845"></a><span id="l10.845"> // Global variables used to restore start and end date-time when changing the</span>
<a href="#l10.846"></a><span id="l10.846"> // &quot;all day&quot; status in the onUpdateAllday() function.</span>
<a href="#l10.847"></a><span id="l10.847"> var gOldStartTime = null;</span>
<a href="#l10.848"></a><span id="l10.848"> var gOldEndTime = null;</span>
<a href="#l10.849"></a><span id="l10.849"> var gOldStartTimezone = null;</span>
<a href="#l10.850"></a><span id="l10.850"> var gOldEndTimezone = null;</span>
<a href="#l10.851"></a><span id="l10.851" class="difflineat">@@ -1497,18 +1622,18 @@ function openNewCardDialog() {</span>
<a href="#l10.852"></a><span id="l10.852"> </span>
<a href="#l10.853"></a><span id="l10.853"> /**</span>
<a href="#l10.854"></a><span id="l10.854">  * Update the transparency status of this dialog, depending on if the event</span>
<a href="#l10.855"></a><span id="l10.855">  * is all-day or not.</span>
<a href="#l10.856"></a><span id="l10.856">  *</span>
<a href="#l10.857"></a><span id="l10.857">  * @param allDay    If true, the event is all-day</span>
<a href="#l10.858"></a><span id="l10.858">  */</span>
<a href="#l10.859"></a><span id="l10.859"> function setShowTimeAs(allDay) {</span>
<a href="#l10.860"></a><span id="l10.860" class="difflineminus">-    gShowTimeAs = cal.getEventDefaultTransparency(allDay);</span>
<a href="#l10.861"></a><span id="l10.861" class="difflineminus">-    updateShowTimeAs();</span>
<a href="#l10.862"></a><span id="l10.862" class="difflineplus">+    gConfig.showTimeAs = cal.getEventDefaultTransparency(allDay);</span>
<a href="#l10.863"></a><span id="l10.863" class="difflineplus">+    updateShowTimeAs(gConfig.showTimeAs);</span>
<a href="#l10.864"></a><span id="l10.864"> }</span>
<a href="#l10.865"></a><span id="l10.865"> </span>
<a href="#l10.866"></a><span id="l10.866"> function editAttendees() {</span>
<a href="#l10.867"></a><span id="l10.867">     let savedWindow = window;</span>
<a href="#l10.868"></a><span id="l10.868">     let calendar = getCurrentCalendar();</span>
<a href="#l10.869"></a><span id="l10.869"> </span>
<a href="#l10.870"></a><span id="l10.870">     var callback = function(attendees, organizer, startTime, endTime) {</span>
<a href="#l10.871"></a><span id="l10.871">         savedWindow.attendees = attendees;</span>
<a href="#l10.872"></a><span id="l10.872" class="difflineat">@@ -1561,382 +1686,153 @@ function editAttendees() {</span>
<a href="#l10.873"></a><span id="l10.873">     if (isAllDay) {</span>
<a href="#l10.874"></a><span id="l10.874">         startTime.isDate = true;</span>
<a href="#l10.875"></a><span id="l10.875">         endTime.isDate = true;</span>
<a href="#l10.876"></a><span id="l10.876">         endTime.day += 1;</span>
<a href="#l10.877"></a><span id="l10.877">     } else {</span>
<a href="#l10.878"></a><span id="l10.878">         startTime.isDate = false;</span>
<a href="#l10.879"></a><span id="l10.879">         endTime.isDate = false;</span>
<a href="#l10.880"></a><span id="l10.880">     }</span>
<a href="#l10.881"></a><span id="l10.881" class="difflineminus">-</span>
<a href="#l10.882"></a><span id="l10.882" class="difflineminus">-    let displayTimezone = document.getElementById('cmd_timezone')</span>
<a href="#l10.883"></a><span id="l10.883" class="difflineminus">-                                  .getAttribute('checked') == 'true';</span>
<a href="#l10.884"></a><span id="l10.884" class="difflineminus">-</span>
<a href="#l10.885"></a><span id="l10.885">     var args = new Object();</span>
<a href="#l10.886"></a><span id="l10.886">     args.startTime = startTime;</span>
<a href="#l10.887"></a><span id="l10.887">     args.endTime = endTime;</span>
<a href="#l10.888"></a><span id="l10.888" class="difflineminus">-    args.displayTimezone = displayTimezone;</span>
<a href="#l10.889"></a><span id="l10.889" class="difflineplus">+    args.displayTimezone = gTimezonesEnabled;</span>
<a href="#l10.890"></a><span id="l10.890">     args.attendees = window.attendees;</span>
<a href="#l10.891"></a><span id="l10.891">     args.organizer = window.organizer &amp;&amp; window.organizer.clone();</span>
<a href="#l10.892"></a><span id="l10.892">     args.calendar = calendar;</span>
<a href="#l10.893"></a><span id="l10.893">     args.item = window.calendarItem;</span>
<a href="#l10.894"></a><span id="l10.894">     args.onOk = callback;</span>
<a href="#l10.895"></a><span id="l10.895">     args.fbWrapper = window.fbWrapper;</span>
<a href="#l10.896"></a><span id="l10.896"> </span>
<a href="#l10.897"></a><span id="l10.897">     // open the dialog modally</span>
<a href="#l10.898"></a><span id="l10.898">     openDialog(</span>
<a href="#l10.899"></a><span id="l10.899">         &quot;chrome://calendar/content/calendar-event-dialog-attendees.xul&quot;,</span>
<a href="#l10.900"></a><span id="l10.900">         &quot;_blank&quot;,</span>
<a href="#l10.901"></a><span id="l10.901">         &quot;chrome,titlebar,modal,resizable&quot;,</span>
<a href="#l10.902"></a><span id="l10.902">         args);</span>
<a href="#l10.903"></a><span id="l10.903"> }</span>
<a href="#l10.904"></a><span id="l10.904"> </span>
<a href="#l10.905"></a><span id="l10.905"> /**</span>
<a href="#l10.906"></a><span id="l10.906" class="difflineminus">- * This function rotates the Privacy of an item to the next value</span>
<a href="#l10.907"></a><span id="l10.907" class="difflineplus">+ * Rotates the Privacy of an item to the next value</span>
<a href="#l10.908"></a><span id="l10.908">  * following the sequence  -&gt; PUBLIC -&gt; CONFIDENTIAL -&gt; PRIVATE -&gt;.</span>
<a href="#l10.909"></a><span id="l10.909" class="difflineplus">+ *</span>
<a href="#l10.910"></a><span id="l10.910" class="difflineplus">+ * @param  {string} aPrivacy  The current/old privacy value</span>
<a href="#l10.911"></a><span id="l10.911" class="difflineplus">+ * @return {string}           The new privacy value</span>
<a href="#l10.912"></a><span id="l10.912">  */</span>
<a href="#l10.913"></a><span id="l10.913" class="difflineminus">-function rotatePrivacy() {</span>
<a href="#l10.914"></a><span id="l10.914" class="difflineplus">+function rotatePrivacy(aPrivacy) {</span>
<a href="#l10.915"></a><span id="l10.915">     const states = [&quot;PUBLIC&quot;,&quot;CONFIDENTIAL&quot;,&quot;PRIVATE&quot;];</span>
<a href="#l10.916"></a><span id="l10.916" class="difflineminus">-    gPrivacy = states[(states.indexOf(gPrivacy) + 1) % states.length];</span>
<a href="#l10.917"></a><span id="l10.917" class="difflineminus">-    updatePrivacy();</span>
<a href="#l10.918"></a><span id="l10.918" class="difflineminus">-}</span>
<a href="#l10.919"></a><span id="l10.919" class="difflineminus">-</span>
<a href="#l10.920"></a><span id="l10.920" class="difflineminus">-/**</span>
<a href="#l10.921"></a><span id="l10.921" class="difflineminus">- * This function sets the privacy of an item to the value specified by</span>
<a href="#l10.922"></a><span id="l10.922" class="difflineminus">- * the attribute &quot;privacy&quot; of the UI-element &quot;target&quot;.</span>
<a href="#l10.923"></a><span id="l10.923" class="difflineminus">- *</span>
<a href="#l10.924"></a><span id="l10.924" class="difflineminus">- * @param target    the calling UI-element;</span>
<a href="#l10.925"></a><span id="l10.925" class="difflineminus">- * @param event     the UI-element selection event (only for the popup menu</span>
<a href="#l10.926"></a><span id="l10.926" class="difflineminus">- *                  event-privacy-menupopup in the Privacy toolbar button).</span>
<a href="#l10.927"></a><span id="l10.927" class="difflineminus">- */</span>
<a href="#l10.928"></a><span id="l10.928" class="difflineminus">-function editPrivacy(target, event) {</span>
<a href="#l10.929"></a><span id="l10.929" class="difflineminus">-    gPrivacy = target.getAttribute(&quot;privacy&quot;);</span>
<a href="#l10.930"></a><span id="l10.930" class="difflineminus">-    if (event) {</span>
<a href="#l10.931"></a><span id="l10.931" class="difflineminus">-        event.stopPropagation();</span>
<a href="#l10.932"></a><span id="l10.932" class="difflineminus">-    }</span>
<a href="#l10.933"></a><span id="l10.933" class="difflineminus">-    updatePrivacy();</span>
<a href="#l10.934"></a><span id="l10.934" class="difflineplus">+    return states[(states.indexOf(aPrivacy) + 1) % states.length];</span>
<a href="#l10.935"></a><span id="l10.935"> }</span>
<a href="#l10.936"></a><span id="l10.936"> </span>
<a href="#l10.937"></a><span id="l10.937"> /**</span>
<a href="#l10.938"></a><span id="l10.938" class="difflineminus">- * This function updates the UI according to the global field 'gPrivacy' and the</span>
<a href="#l10.939"></a><span id="l10.939" class="difflineplus">+ * Updates privacy in the UI according to the aValue argument and the</span>
<a href="#l10.940"></a><span id="l10.940">  * selected calendar. If the selected calendar does not support privacy or only</span>
<a href="#l10.941"></a><span id="l10.941">  * certain values, these are removed from the UI. This function should be called</span>
<a href="#l10.942"></a><span id="l10.942" class="difflineminus">- * any time that gPrivacy is updated.</span>
<a href="#l10.943"></a><span id="l10.943" class="difflineplus">+ * any time that gConfig.privacy is updated, passing the new value as an argument.</span>
<a href="#l10.944"></a><span id="l10.944" class="difflineplus">+ *</span>
<a href="#l10.945"></a><span id="l10.945" class="difflineplus">+ * @param {string} aValue  The new privacy value</span>
<a href="#l10.946"></a><span id="l10.946">  */</span>
<a href="#l10.947"></a><span id="l10.947" class="difflineminus">-function updatePrivacy() {</span>
<a href="#l10.948"></a><span id="l10.948" class="difflineminus">-    let calendar = getCurrentCalendar();</span>
<a href="#l10.949"></a><span id="l10.949" class="difflineminus">-    let hasPrivacy = capSupported(&quot;privacy&quot;);</span>
<a href="#l10.950"></a><span id="l10.950" class="difflineminus">-</span>
<a href="#l10.951"></a><span id="l10.951" class="difflineminus">-    if (hasPrivacy) {</span>
<a href="#l10.952"></a><span id="l10.952" class="difflineminus">-        var numChilds;</span>
<a href="#l10.953"></a><span id="l10.953" class="difflineminus">-        var privacyValues = capValues(&quot;privacy&quot;,</span>
<a href="#l10.954"></a><span id="l10.954" class="difflineminus">-                                      [&quot;PUBLIC&quot;, &quot;CONFIDENTIAL&quot;, &quot;PRIVATE&quot;]);</span>
<a href="#l10.955"></a><span id="l10.955" class="difflineminus">-</span>
<a href="#l10.956"></a><span id="l10.956" class="difflineminus">-        // Update privacy capabilities (toolbar)</span>
<a href="#l10.957"></a><span id="l10.957" class="difflineminus">-        var menupopup = document.getElementById(&quot;event-privacy-menupopup&quot;);</span>
<a href="#l10.958"></a><span id="l10.958" class="difflineminus">-        if (menupopup) {</span>
<a href="#l10.959"></a><span id="l10.959" class="difflineminus">-            // Only update the toolbar if the button is actually there</span>
<a href="#l10.960"></a><span id="l10.960" class="difflineminus">-            numChilds = menupopup.childNodes.length;</span>
<a href="#l10.961"></a><span id="l10.961" class="difflineminus">-            for (var i = 0; i &lt; numChilds; i++) {</span>
<a href="#l10.962"></a><span id="l10.962" class="difflineminus">-                var node = menupopup.childNodes[i];</span>
<a href="#l10.963"></a><span id="l10.963" class="difflineminus">-                if (node.hasAttribute(&quot;privacy&quot;)) {</span>
<a href="#l10.964"></a><span id="l10.964" class="difflineminus">-                    var currentPrivacyValue = node.getAttribute(&quot;privacy&quot;);</span>
<a href="#l10.965"></a><span id="l10.965" class="difflineminus">-                    // Collapsed state</span>
<a href="#l10.966"></a><span id="l10.966" class="difflineminus">-</span>
<a href="#l10.967"></a><span id="l10.967" class="difflineminus">-                    // Hide the toolbar if the value is unsupported or is for a</span>
<a href="#l10.968"></a><span id="l10.968" class="difflineminus">-                    // specific provider and doesn't belong to the current provider.</span>
<a href="#l10.969"></a><span id="l10.969" class="difflineminus">-                    if (!privacyValues.includes(currentPrivacyValue) ||</span>
<a href="#l10.970"></a><span id="l10.970" class="difflineminus">-                        (currentProvider &amp;&amp; currentProvider != calendar.type)) {</span>
<a href="#l10.971"></a><span id="l10.971" class="difflineminus">-                        node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.972"></a><span id="l10.972" class="difflineminus">-                    } else {</span>
<a href="#l10.973"></a><span id="l10.973" class="difflineminus">-                        node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.974"></a><span id="l10.974" class="difflineminus">-                    }</span>
<a href="#l10.975"></a><span id="l10.975" class="difflineminus">-</span>
<a href="#l10.976"></a><span id="l10.976" class="difflineminus">-                    // Checked state</span>
<a href="#l10.977"></a><span id="l10.977" class="difflineminus">-                    if (gPrivacy == currentPrivacyValue) {</span>
<a href="#l10.978"></a><span id="l10.978" class="difflineminus">-                        node.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l10.979"></a><span id="l10.979" class="difflineminus">-                    } else {</span>
<a href="#l10.980"></a><span id="l10.980" class="difflineminus">-                        node.removeAttribute(&quot;checked&quot;);</span>
<a href="#l10.981"></a><span id="l10.981" class="difflineminus">-                    }</span>
<a href="#l10.982"></a><span id="l10.982" class="difflineminus">-                }</span>
<a href="#l10.983"></a><span id="l10.983" class="difflineminus">-            }</span>
<a href="#l10.984"></a><span id="l10.984" class="difflineplus">+function updatePrivacy(aValue) {</span>
<a href="#l10.985"></a><span id="l10.985" class="difflineplus">+    sendMessage({</span>
<a href="#l10.986"></a><span id="l10.986" class="difflineplus">+        command: &quot;updatePanelState&quot;,</span>
<a href="#l10.987"></a><span id="l10.987" class="difflineplus">+        argument: {</span>
<a href="#l10.988"></a><span id="l10.988" class="difflineplus">+            privacy: aValue,</span>
<a href="#l10.989"></a><span id="l10.989" class="difflineplus">+            hasPrivacy: capSupported(&quot;privacy&quot;),</span>
<a href="#l10.990"></a><span id="l10.990" class="difflineplus">+            calendarType: getCurrentCalendar().type,</span>
<a href="#l10.991"></a><span id="l10.991" class="difflineplus">+            privacyValues: capValues(&quot;privacy&quot;,</span>
<a href="#l10.992"></a><span id="l10.992" class="difflineplus">+                            [&quot;PUBLIC&quot;, &quot;CONFIDENTIAL&quot;, &quot;PRIVATE&quot;])</span>
<a href="#l10.993"></a><span id="l10.993">         }</span>
<a href="#l10.994"></a><span id="l10.994" class="difflineminus">-</span>
<a href="#l10.995"></a><span id="l10.995" class="difflineminus">-        // Update privacy capabilities (menu)</span>
<a href="#l10.996"></a><span id="l10.996" class="difflineminus">-        menupopup = document.getElementById(&quot;options-privacy-menupopup&quot;);</span>
<a href="#l10.997"></a><span id="l10.997" class="difflineminus">-        numChilds = menupopup.childNodes.length;</span>
<a href="#l10.998"></a><span id="l10.998" class="difflineminus">-        for (var i = 0; i &lt; numChilds; i++) {</span>
<a href="#l10.999"></a><span id="l10.999" class="difflineminus">-            var node = menupopup.childNodes[i];</span>
<a href="#l10.1000"></a><span id="l10.1000" class="difflineminus">-            var currentProvider = node.getAttribute(&quot;provider&quot;);</span>
<a href="#l10.1001"></a><span id="l10.1001" class="difflineminus">-            if (node.hasAttribute(&quot;privacy&quot;)) {</span>
<a href="#l10.1002"></a><span id="l10.1002" class="difflineminus">-                var currentPrivacyValue = node.getAttribute(&quot;privacy&quot;);</span>
<a href="#l10.1003"></a><span id="l10.1003" class="difflineminus">-                // Collapsed state</span>
<a href="#l10.1004"></a><span id="l10.1004" class="difflineminus">-</span>
<a href="#l10.1005"></a><span id="l10.1005" class="difflineminus">-                // Hide the menu if the value is unsupported or is for a</span>
<a href="#l10.1006"></a><span id="l10.1006" class="difflineminus">-                // specific provider and doesn't belong to the current provider.</span>
<a href="#l10.1007"></a><span id="l10.1007" class="difflineminus">-                if (!privacyValues.includes(currentPrivacyValue) ||</span>
<a href="#l10.1008"></a><span id="l10.1008" class="difflineminus">-                    (currentProvider &amp;&amp; currentProvider != calendar.type)) {</span>
<a href="#l10.1009"></a><span id="l10.1009" class="difflineminus">-                    node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.1010"></a><span id="l10.1010" class="difflineminus">-                } else {</span>
<a href="#l10.1011"></a><span id="l10.1011" class="difflineminus">-                    node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.1012"></a><span id="l10.1012" class="difflineminus">-                }</span>
<a href="#l10.1013"></a><span id="l10.1013" class="difflineminus">-</span>
<a href="#l10.1014"></a><span id="l10.1014" class="difflineminus">-                // Checked state</span>
<a href="#l10.1015"></a><span id="l10.1015" class="difflineminus">-                if (gPrivacy == currentPrivacyValue) {</span>
<a href="#l10.1016"></a><span id="l10.1016" class="difflineminus">-                    node.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l10.1017"></a><span id="l10.1017" class="difflineminus">-                } else {</span>
<a href="#l10.1018"></a><span id="l10.1018" class="difflineminus">-                    node.removeAttribute(&quot;checked&quot;);</span>
<a href="#l10.1019"></a><span id="l10.1019" class="difflineminus">-                }</span>
<a href="#l10.1020"></a><span id="l10.1020" class="difflineminus">-            }</span>
<a href="#l10.1021"></a><span id="l10.1021" class="difflineminus">-        }</span>
<a href="#l10.1022"></a><span id="l10.1022" class="difflineminus">-</span>
<a href="#l10.1023"></a><span id="l10.1023" class="difflineminus">-        // Update privacy capabilities (statusbar)</span>
<a href="#l10.1024"></a><span id="l10.1024" class="difflineminus">-        var privacyPanel = document.getElementById(&quot;status-privacy&quot;);</span>
<a href="#l10.1025"></a><span id="l10.1025" class="difflineminus">-        var hasAnyPrivacyValue = false;</span>
<a href="#l10.1026"></a><span id="l10.1026" class="difflineminus">-        numChilds = privacyPanel.childNodes.length;</span>
<a href="#l10.1027"></a><span id="l10.1027" class="difflineminus">-        for (var i = 0; i &lt; numChilds; i++) {</span>
<a href="#l10.1028"></a><span id="l10.1028" class="difflineminus">-            var node = privacyPanel.childNodes[i];</span>
<a href="#l10.1029"></a><span id="l10.1029" class="difflineminus">-            var currentProvider = node.getAttribute(&quot;provider&quot;);</span>
<a href="#l10.1030"></a><span id="l10.1030" class="difflineminus">-            if (node.hasAttribute(&quot;privacy&quot;)) {</span>
<a href="#l10.1031"></a><span id="l10.1031" class="difflineminus">-                var currentPrivacyValue = node.getAttribute(&quot;privacy&quot;);</span>
<a href="#l10.1032"></a><span id="l10.1032" class="difflineminus">-</span>
<a href="#l10.1033"></a><span id="l10.1033" class="difflineminus">-                // Hide the panel if the value is unsupported or is for a</span>
<a href="#l10.1034"></a><span id="l10.1034" class="difflineminus">-                // specific provider and doesn't belong to the current provider,</span>
<a href="#l10.1035"></a><span id="l10.1035" class="difflineminus">-                // or is not the items privacy value</span>
<a href="#l10.1036"></a><span id="l10.1036" class="difflineminus">-                if (!privacyValues.includes(currentPrivacyValue) ||</span>
<a href="#l10.1037"></a><span id="l10.1037" class="difflineminus">-                    (currentProvider &amp;&amp; currentProvider != calendar.type) ||</span>
<a href="#l10.1038"></a><span id="l10.1038" class="difflineminus">-                    gPrivacy != currentPrivacyValue) {</span>
<a href="#l10.1039"></a><span id="l10.1039" class="difflineminus">-                    node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.1040"></a><span id="l10.1040" class="difflineminus">-                } else {</span>
<a href="#l10.1041"></a><span id="l10.1041" class="difflineminus">-                    node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.1042"></a><span id="l10.1042" class="difflineminus">-                    hasAnyPrivacyValue = true;</span>
<a href="#l10.1043"></a><span id="l10.1043" class="difflineminus">-                }</span>
<a href="#l10.1044"></a><span id="l10.1044" class="difflineminus">-            }</span>
<a href="#l10.1045"></a><span id="l10.1045" class="difflineminus">-        }</span>
<a href="#l10.1046"></a><span id="l10.1046" class="difflineminus">-</span>
<a href="#l10.1047"></a><span id="l10.1047" class="difflineminus">-        // Don't show the status panel if no valid privacy value is selected</span>
<a href="#l10.1048"></a><span id="l10.1048" class="difflineminus">-        if (!hasAnyPrivacyValue) {</span>
<a href="#l10.1049"></a><span id="l10.1049" class="difflineminus">-            privacyPanel.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.1050"></a><span id="l10.1050" class="difflineminus">-        } else {</span>
<a href="#l10.1051"></a><span id="l10.1051" class="difflineminus">-            privacyPanel.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.1052"></a><span id="l10.1052" class="difflineminus">-        }</span>
<a href="#l10.1053"></a><span id="l10.1053" class="difflineminus">-</span>
<a href="#l10.1054"></a><span id="l10.1054" class="difflineminus">-    } else {</span>
<a href="#l10.1055"></a><span id="l10.1055" class="difflineminus">-        setElementValue(&quot;button-privacy&quot;, !hasPrivacy &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l10.1056"></a><span id="l10.1056" class="difflineminus">-        setElementValue(&quot;options-privacy-menu&quot;, !hasPrivacy &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l10.1057"></a><span id="l10.1057" class="difflineminus">-        setElementValue(&quot;status-privacy&quot;, !hasPrivacy &amp;&amp; &quot;true&quot;, &quot;collapsed&quot;);</span>
<a href="#l10.1058"></a><span id="l10.1058" class="difflineplus">+    });</span>
<a href="#l10.1059"></a><span id="l10.1059" class="difflineplus">+}</span>
<a href="#l10.1060"></a><span id="l10.1060" class="difflineplus">+</span>
<a href="#l10.1061"></a><span id="l10.1061" class="difflineplus">+/**</span>
<a href="#l10.1062"></a><span id="l10.1062" class="difflineplus">+ * Rotates the Priority of an item to the next value</span>
<a href="#l10.1063"></a><span id="l10.1063" class="difflineplus">+ * following the sequence -&gt; Not specified -&gt; Low -&gt; Normal -&gt; High -&gt;.</span>
<a href="#l10.1064"></a><span id="l10.1064" class="difflineplus">+ *</span>
<a href="#l10.1065"></a><span id="l10.1065" class="difflineplus">+ * @param  {number} aPriority  The current/old priority</span>
<a href="#l10.1066"></a><span id="l10.1066" class="difflineplus">+ * @return {number}            The new priority</span>
<a href="#l10.1067"></a><span id="l10.1067" class="difflineplus">+ */</span>
<a href="#l10.1068"></a><span id="l10.1068" class="difflineplus">+function rotatePriority(aPriority) {</span>
<a href="#l10.1069"></a><span id="l10.1069" class="difflineplus">+    if (aPriority &lt;= 0 || aPriority &gt; 9) { // not specified</span>
<a href="#l10.1070"></a><span id="l10.1070" class="difflineplus">+        return 9;</span>
<a href="#l10.1071"></a><span id="l10.1071" class="difflineplus">+    } else if (aPriority &gt;= 1 &amp;&amp; aPriority &lt;= 4) { // high</span>
<a href="#l10.1072"></a><span id="l10.1072" class="difflineplus">+        return 0;</span>
<a href="#l10.1073"></a><span id="l10.1073" class="difflineplus">+    } else if (aPriority == 5) {                   // normal</span>
<a href="#l10.1074"></a><span id="l10.1074" class="difflineplus">+        return 1;</span>
<a href="#l10.1075"></a><span id="l10.1075" class="difflineplus">+    } else if (aPriority &gt;= 6 &amp;&amp; aPriority &lt;= 9) { // low</span>
<a href="#l10.1076"></a><span id="l10.1076" class="difflineplus">+        return 5;</span>
<a href="#l10.1077"></a><span id="l10.1077">     }</span>
<a href="#l10.1078"></a><span id="l10.1078"> }</span>
<a href="#l10.1079"></a><span id="l10.1079"> </span>
<a href="#l10.1080"></a><span id="l10.1080"> /**</span>
<a href="#l10.1081"></a><span id="l10.1081" class="difflineminus">- * This function rotates the Priority of an item to the next value</span>
<a href="#l10.1082"></a><span id="l10.1082" class="difflineminus">- * following the sequence -&gt; Not specified -&gt; Low -&gt; Normal -&gt; High -&gt;.</span>
<a href="#l10.1083"></a><span id="l10.1083" class="difflineminus">- */</span>
<a href="#l10.1084"></a><span id="l10.1084" class="difflineminus">-function rotatePriority() {</span>
<a href="#l10.1085"></a><span id="l10.1085" class="difflineminus">-    let hasPriority = capSupported(&quot;priority&quot;);</span>
<a href="#l10.1086"></a><span id="l10.1086" class="difflineminus">-    if (hasPriority) {</span>
<a href="#l10.1087"></a><span id="l10.1087" class="difflineminus">-        if (gPriority &lt;= 0 || gPriority &gt; 9) {         // not specified</span>
<a href="#l10.1088"></a><span id="l10.1088" class="difflineminus">-            gPriority = 9;</span>
<a href="#l10.1089"></a><span id="l10.1089" class="difflineminus">-        } else if (gPriority &gt;= 1 &amp;&amp; gPriority &lt;= 4) { // high</span>
<a href="#l10.1090"></a><span id="l10.1090" class="difflineminus">-            gPriority = 0;</span>
<a href="#l10.1091"></a><span id="l10.1091" class="difflineminus">-        } else if (gPriority == 5) {                   // normal</span>
<a href="#l10.1092"></a><span id="l10.1092" class="difflineminus">-            gPriority = 1;</span>
<a href="#l10.1093"></a><span id="l10.1093" class="difflineminus">-        } else if (gPriority &gt;= 6 &amp;&amp; gPriority &lt;= 9) { // low</span>
<a href="#l10.1094"></a><span id="l10.1094" class="difflineminus">-            gPriority = 5;</span>
<a href="#l10.1095"></a><span id="l10.1095" class="difflineminus">-        }</span>
<a href="#l10.1096"></a><span id="l10.1096" class="difflineminus">-        updatePriority();</span>
<a href="#l10.1097"></a><span id="l10.1097" class="difflineminus">-    }</span>
<a href="#l10.1098"></a><span id="l10.1098" class="difflineminus">-}</span>
<a href="#l10.1099"></a><span id="l10.1099" class="difflineminus">-</span>
<a href="#l10.1100"></a><span id="l10.1100" class="difflineminus">-/**</span>
<a href="#l10.1101"></a><span id="l10.1101" class="difflineminus">- * Handler function to change the priority from the dialog elements</span>
<a href="#l10.1102"></a><span id="l10.1102" class="difflineplus">+ * Update the dialog controls related to priority.</span>
<a href="#l10.1103"></a><span id="l10.1103">  *</span>
<a href="#l10.1104"></a><span id="l10.1104" class="difflineminus">- * @param target    A XUL node with a value attribute which should be the new</span>
<a href="#l10.1105"></a><span id="l10.1105" class="difflineminus">- *                    priority.</span>
<a href="#l10.1106"></a><span id="l10.1106" class="difflineminus">- */</span>
<a href="#l10.1107"></a><span id="l10.1107" class="difflineminus">-function editPriority(target) {</span>
<a href="#l10.1108"></a><span id="l10.1108" class="difflineminus">-    gPriority = parseInt(target.getAttribute(&quot;value&quot;));</span>
<a href="#l10.1109"></a><span id="l10.1109" class="difflineminus">-    updatePriority();</span>
<a href="#l10.1110"></a><span id="l10.1110" class="difflineminus">-}</span>
<a href="#l10.1111"></a><span id="l10.1111" class="difflineminus">-</span>
<a href="#l10.1112"></a><span id="l10.1112" class="difflineminus">-/**</span>
<a href="#l10.1113"></a><span id="l10.1113" class="difflineminus">- * Update the dialog controls related to priority.</span>
<a href="#l10.1114"></a><span id="l10.1114" class="difflineplus">+ * @param {string} aValue  The new priority value</span>
<a href="#l10.1115"></a><span id="l10.1115">  */</span>
<a href="#l10.1116"></a><span id="l10.1116" class="difflineminus">-function updatePriority() {</span>
<a href="#l10.1117"></a><span id="l10.1117" class="difflineminus">-    // Set up capabilities</span>
<a href="#l10.1118"></a><span id="l10.1118" class="difflineminus">-    var hasPriority = capSupported(&quot;priority&quot;);</span>
<a href="#l10.1119"></a><span id="l10.1119" class="difflineminus">-    if (document.getElementById(&quot;button-priority&quot;)) {</span>
<a href="#l10.1120"></a><span id="l10.1120" class="difflineminus">-        setElementValue(&quot;button-priority&quot;, !hasPriority &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l10.1121"></a><span id="l10.1121" class="difflineminus">-    }</span>
<a href="#l10.1122"></a><span id="l10.1122" class="difflineminus">-    setElementValue(&quot;options-priority-menu&quot;, !hasPriority &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l10.1123"></a><span id="l10.1123" class="difflineminus">-    setElementValue(&quot;status-priority&quot;, !hasPriority &amp;&amp; &quot;true&quot;, &quot;collapsed&quot;);</span>
<a href="#l10.1124"></a><span id="l10.1124" class="difflineminus">-</span>
<a href="#l10.1125"></a><span id="l10.1125" class="difflineminus">-    if (hasPriority) {</span>
<a href="#l10.1126"></a><span id="l10.1126" class="difflineminus">-        var priorityLevel = &quot;none&quot;;</span>
<a href="#l10.1127"></a><span id="l10.1127" class="difflineminus">-        if (gPriority &gt;= 1 &amp;&amp; gPriority &lt;= 4) {</span>
<a href="#l10.1128"></a><span id="l10.1128" class="difflineminus">-            priorityLevel = &quot;high&quot;;</span>
<a href="#l10.1129"></a><span id="l10.1129" class="difflineminus">-        } else if (gPriority == 5) {</span>
<a href="#l10.1130"></a><span id="l10.1130" class="difflineminus">-            priorityLevel = &quot;normal&quot;;</span>
<a href="#l10.1131"></a><span id="l10.1131" class="difflineminus">-        } else if (gPriority &gt;= 6 &amp;&amp; gPriority &lt;= 9) {</span>
<a href="#l10.1132"></a><span id="l10.1132" class="difflineminus">-            priorityLevel = &quot;low&quot;;</span>
<a href="#l10.1133"></a><span id="l10.1133" class="difflineplus">+ function updatePriority(aValue) {</span>
<a href="#l10.1134"></a><span id="l10.1134" class="difflineplus">+    sendMessage({</span>
<a href="#l10.1135"></a><span id="l10.1135" class="difflineplus">+        command: &quot;updatePanelState&quot;,</span>
<a href="#l10.1136"></a><span id="l10.1136" class="difflineplus">+        argument: {</span>
<a href="#l10.1137"></a><span id="l10.1137" class="difflineplus">+            priority: aValue,</span>
<a href="#l10.1138"></a><span id="l10.1138" class="difflineplus">+            hasPriority: capSupported(&quot;priority&quot;)</span>
<a href="#l10.1139"></a><span id="l10.1139">         }</span>
<a href="#l10.1140"></a><span id="l10.1140" class="difflineminus">-</span>
<a href="#l10.1141"></a><span id="l10.1141" class="difflineminus">-        var priorityNone = document.getElementById(&quot;cmd_priority_none&quot;);</span>
<a href="#l10.1142"></a><span id="l10.1142" class="difflineminus">-        var priorityLow = document.getElementById(&quot;cmd_priority_low&quot;);</span>
<a href="#l10.1143"></a><span id="l10.1143" class="difflineminus">-        var priorityNormal = document.getElementById(&quot;cmd_priority_normal&quot;);</span>
<a href="#l10.1144"></a><span id="l10.1144" class="difflineminus">-        var priorityHigh = document.getElementById(&quot;cmd_priority_high&quot;);</span>
<a href="#l10.1145"></a><span id="l10.1145" class="difflineminus">-</span>
<a href="#l10.1146"></a><span id="l10.1146" class="difflineminus">-        priorityNone.setAttribute(&quot;checked&quot;,</span>
<a href="#l10.1147"></a><span id="l10.1147" class="difflineminus">-                                  priorityLevel == &quot;none&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1148"></a><span id="l10.1148" class="difflineminus">-        priorityLow.setAttribute(&quot;checked&quot;,</span>
<a href="#l10.1149"></a><span id="l10.1149" class="difflineminus">-                                 priorityLevel == &quot;low&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1150"></a><span id="l10.1150" class="difflineminus">-        priorityNormal.setAttribute(&quot;checked&quot;,</span>
<a href="#l10.1151"></a><span id="l10.1151" class="difflineminus">-                                    priorityLevel == &quot;normal&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1152"></a><span id="l10.1152" class="difflineminus">-        priorityHigh.setAttribute(&quot;checked&quot;,</span>
<a href="#l10.1153"></a><span id="l10.1153" class="difflineminus">-                                  priorityLevel == &quot;high&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1154"></a><span id="l10.1154" class="difflineminus">-</span>
<a href="#l10.1155"></a><span id="l10.1155" class="difflineminus">-        // Status bar panel</span>
<a href="#l10.1156"></a><span id="l10.1156" class="difflineminus">-        var priorityPanel = document.getElementById(&quot;status-priority&quot;);</span>
<a href="#l10.1157"></a><span id="l10.1157" class="difflineminus">-        if (priorityLevel == &quot;none&quot;) {</span>
<a href="#l10.1158"></a><span id="l10.1158" class="difflineminus">-            // If the priority is none, don't show the status bar panel</span>
<a href="#l10.1159"></a><span id="l10.1159" class="difflineminus">-            priorityPanel.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.1160"></a><span id="l10.1160" class="difflineminus">-        } else {</span>
<a href="#l10.1161"></a><span id="l10.1161" class="difflineminus">-            priorityPanel.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.1162"></a><span id="l10.1162" class="difflineminus">-            var numChilds = priorityPanel.childNodes.length;</span>
<a href="#l10.1163"></a><span id="l10.1163" class="difflineminus">-            var foundPriority = false;</span>
<a href="#l10.1164"></a><span id="l10.1164" class="difflineminus">-            for (var i = 0; i &lt; numChilds; i++) {</span>
<a href="#l10.1165"></a><span id="l10.1165" class="difflineminus">-                var node = priorityPanel.childNodes[i];</span>
<a href="#l10.1166"></a><span id="l10.1166" class="difflineminus">-                if (foundPriority) {</span>
<a href="#l10.1167"></a><span id="l10.1167" class="difflineminus">-                    node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.1168"></a><span id="l10.1168" class="difflineminus">-                } else {</span>
<a href="#l10.1169"></a><span id="l10.1169" class="difflineminus">-                    node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.1170"></a><span id="l10.1170" class="difflineminus">-                }</span>
<a href="#l10.1171"></a><span id="l10.1171" class="difflineminus">-                if (node.getAttribute(&quot;value&quot;) == priorityLevel) {</span>
<a href="#l10.1172"></a><span id="l10.1172" class="difflineminus">-                    foundPriority = true;</span>
<a href="#l10.1173"></a><span id="l10.1173" class="difflineminus">-                }</span>
<a href="#l10.1174"></a><span id="l10.1174" class="difflineminus">-            }</span>
<a href="#l10.1175"></a><span id="l10.1175" class="difflineminus">-        }</span>
<a href="#l10.1176"></a><span id="l10.1176" class="difflineminus">-    }</span>
<a href="#l10.1177"></a><span id="l10.1177" class="difflineplus">+    });</span>
<a href="#l10.1178"></a><span id="l10.1178"> }</span>
<a href="#l10.1179"></a><span id="l10.1179"> </span>
<a href="#l10.1180"></a><span id="l10.1180"> /**</span>
<a href="#l10.1181"></a><span id="l10.1181">  * Rotate the Status of an item to the next value following</span>
<a href="#l10.1182"></a><span id="l10.1182">  * the sequence -&gt; NONE -&gt; TENTATIVE -&gt; CONFIRMED -&gt; CANCELLED -&gt;.</span>
<a href="#l10.1183"></a><span id="l10.1183" class="difflineplus">+ *</span>
<a href="#l10.1184"></a><span id="l10.1184" class="difflineplus">+ * @param  {string}  aStatus                The current/old status</span>
<a href="#l10.1185"></a><span id="l10.1185" class="difflineplus">+ * @param  {boolean} aIsEvent               Is the item an event (not a task)</span>
<a href="#l10.1186"></a><span id="l10.1186" class="difflineplus">+ * @param  {boolean} aNoneCommandIsVisible  Is the &quot;none&quot; command visible</span>
<a href="#l10.1187"></a><span id="l10.1187" class="difflineplus">+ * @return {number}                         The new priority</span>
<a href="#l10.1188"></a><span id="l10.1188">  */</span>
<a href="#l10.1189"></a><span id="l10.1189" class="difflineminus">-function rotateStatus() {</span>
<a href="#l10.1190"></a><span id="l10.1190" class="difflineplus">+function rotateStatus(aStatus, aIsEvent, aNoneCommandIsVisible) {</span>
<a href="#l10.1191"></a><span id="l10.1191">     let states = [&quot;TENTATIVE&quot;,&quot;CONFIRMED&quot;,&quot;CANCELLED&quot;];</span>
<a href="#l10.1192"></a><span id="l10.1192" class="difflineminus">-    let noneCmd = document.getElementById(&quot;cmd_status_none&quot;);</span>
<a href="#l10.1193"></a><span id="l10.1193" class="difflineminus">-    // If control for status &quot;NONE&quot; is visible, allow rotating to it.</span>
<a href="#l10.1194"></a><span id="l10.1194" class="difflineminus">-    if (cal.isEvent(window.calendarItem) &amp;&amp; !noneCmd.hasAttribute(&quot;hidden&quot;)) {</span>
<a href="#l10.1195"></a><span id="l10.1195" class="difflineplus">+    // If control for status &quot;NONE&quot; (&quot;cmd_status_none&quot;) is visible,</span>
<a href="#l10.1196"></a><span id="l10.1196" class="difflineplus">+    // allow rotating to it.</span>
<a href="#l10.1197"></a><span id="l10.1197" class="difflineplus">+    if (aIsEvent &amp;&amp; aNoneCommandIsVisible) {</span>
<a href="#l10.1198"></a><span id="l10.1198">         states.unshift(&quot;NONE&quot;);</span>
<a href="#l10.1199"></a><span id="l10.1199">     }</span>
<a href="#l10.1200"></a><span id="l10.1200" class="difflineminus">-    gStatus = states[(states.indexOf(gStatus) + 1) % states.length];</span>
<a href="#l10.1201"></a><span id="l10.1201" class="difflineminus">-    updateStatus();</span>
<a href="#l10.1202"></a><span id="l10.1202" class="difflineminus">-}</span>
<a href="#l10.1203"></a><span id="l10.1203" class="difflineminus">-</span>
<a href="#l10.1204"></a><span id="l10.1204" class="difflineminus">-/**</span>
<a href="#l10.1205"></a><span id="l10.1205" class="difflineminus">- * Handler function to change the status from the dialog elements</span>
<a href="#l10.1206"></a><span id="l10.1206" class="difflineminus">- *</span>
<a href="#l10.1207"></a><span id="l10.1207" class="difflineminus">- * @param target    A XUL node with a value attribute which should be the new</span>
<a href="#l10.1208"></a><span id="l10.1208" class="difflineminus">- *                    status.</span>
<a href="#l10.1209"></a><span id="l10.1209" class="difflineminus">- */</span>
<a href="#l10.1210"></a><span id="l10.1210" class="difflineminus">-function editStatus(target) {</span>
<a href="#l10.1211"></a><span id="l10.1211" class="difflineminus">-    gStatus = target.getAttribute(&quot;value&quot;);</span>
<a href="#l10.1212"></a><span id="l10.1212" class="difflineminus">-    updateStatus();</span>
<a href="#l10.1213"></a><span id="l10.1213" class="difflineplus">+    return states[(states.indexOf(aStatus) + 1) % states.length];</span>
<a href="#l10.1214"></a><span id="l10.1214"> }</span>
<a href="#l10.1215"></a><span id="l10.1215"> </span>
<a href="#l10.1216"></a><span id="l10.1216"> /**</span>
<a href="#l10.1217"></a><span id="l10.1217">  * Update the dialog controls related to status.</span>
<a href="#l10.1218"></a><span id="l10.1218" class="difflineplus">+ *</span>
<a href="#l10.1219"></a><span id="l10.1219" class="difflineplus">+ * @param {string} aValue  The new status value</span>
<a href="#l10.1220"></a><span id="l10.1220">  */</span>
<a href="#l10.1221"></a><span id="l10.1221" class="difflineminus">-function updateStatus() {</span>
<a href="#l10.1222"></a><span id="l10.1222" class="difflineminus">-    let found = false;</span>
<a href="#l10.1223"></a><span id="l10.1223" class="difflineminus">-    const statusLabels = [&quot;status-status-tentative-label&quot;,</span>
<a href="#l10.1224"></a><span id="l10.1224" class="difflineminus">-                          &quot;status-status-confirmed-label&quot;,</span>
<a href="#l10.1225"></a><span id="l10.1225" class="difflineminus">-                          &quot;status-status-cancelled-label&quot;];</span>
<a href="#l10.1226"></a><span id="l10.1226" class="difflineminus">-    setBooleanAttribute(&quot;status-status&quot;, &quot;collapsed&quot;, true);</span>
<a href="#l10.1227"></a><span id="l10.1227" class="difflineminus">-    [ &quot;cmd_status_none&quot;,</span>
<a href="#l10.1228"></a><span id="l10.1228" class="difflineminus">-      &quot;cmd_status_tentative&quot;,</span>
<a href="#l10.1229"></a><span id="l10.1229" class="difflineminus">-      &quot;cmd_status_confirmed&quot;,</span>
<a href="#l10.1230"></a><span id="l10.1230" class="difflineminus">-      &quot;cmd_status_cancelled&quot; ].forEach(</span>
<a href="#l10.1231"></a><span id="l10.1231" class="difflineminus">-          function(element, index, array) {</span>
<a href="#l10.1232"></a><span id="l10.1232" class="difflineminus">-              let node = document.getElementById(element);</span>
<a href="#l10.1233"></a><span id="l10.1233" class="difflineminus">-              let matches = (node.getAttribute(&quot;value&quot;) == gStatus);</span>
<a href="#l10.1234"></a><span id="l10.1234" class="difflineminus">-              found = found || matches;</span>
<a href="#l10.1235"></a><span id="l10.1235" class="difflineminus">-</span>
<a href="#l10.1236"></a><span id="l10.1236" class="difflineminus">-              node.setAttribute(&quot;checked&quot;, matches ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1237"></a><span id="l10.1237" class="difflineminus">-</span>
<a href="#l10.1238"></a><span id="l10.1238" class="difflineminus">-              if (index &gt; 0) {</span>
<a href="#l10.1239"></a><span id="l10.1239" class="difflineminus">-                  setBooleanAttribute(statusLabels[index-1], &quot;hidden&quot;, !matches);</span>
<a href="#l10.1240"></a><span id="l10.1240" class="difflineminus">-                  if (matches) {</span>
<a href="#l10.1241"></a><span id="l10.1241" class="difflineminus">-                      setBooleanAttribute(&quot;status-status&quot;, &quot;collapsed&quot;, false);</span>
<a href="#l10.1242"></a><span id="l10.1242" class="difflineminus">-                  }</span>
<a href="#l10.1243"></a><span id="l10.1243" class="difflineminus">-              }</span>
<a href="#l10.1244"></a><span id="l10.1244" class="difflineminus">-          }</span>
<a href="#l10.1245"></a><span id="l10.1245" class="difflineminus">-      );</span>
<a href="#l10.1246"></a><span id="l10.1246" class="difflineminus">-    if (!found) {</span>
<a href="#l10.1247"></a><span id="l10.1247" class="difflineminus">-        // The current Status value is invalid. Change the status to not</span>
<a href="#l10.1248"></a><span id="l10.1248" class="difflineminus">-        // specified and update the status again.</span>
<a href="#l10.1249"></a><span id="l10.1249" class="difflineminus">-        gStatus = &quot;NONE&quot;;</span>
<a href="#l10.1250"></a><span id="l10.1250" class="difflineminus">-        updateStatus();</span>
<a href="#l10.1251"></a><span id="l10.1251" class="difflineminus">-    }</span>
<a href="#l10.1252"></a><span id="l10.1252" class="difflineplus">+function updateStatus(aValue) {</span>
<a href="#l10.1253"></a><span id="l10.1253" class="difflineplus">+    sendMessage({ command: &quot;updatePanelState&quot;, argument: { status: aValue } });</span>
<a href="#l10.1254"></a><span id="l10.1254"> }</span>
<a href="#l10.1255"></a><span id="l10.1255"> </span>
<a href="#l10.1256"></a><span id="l10.1256"> /**</span>
<a href="#l10.1257"></a><span id="l10.1257" class="difflineminus">- * Toggles the transparency (Show Time As property) of an item</span>
<a href="#l10.1258"></a><span id="l10.1258" class="difflineplus">+ * Toggles the transparency (&quot;Show Time As&quot; property) of an item</span>
<a href="#l10.1259"></a><span id="l10.1259">  * from BUSY (Opaque) to FREE (Transparent).</span>
<a href="#l10.1260"></a><span id="l10.1260" class="difflineplus">+ *</span>
<a href="#l10.1261"></a><span id="l10.1261" class="difflineplus">+ * @param  {string} aShowTimeAs  The current/old value</span>
<a href="#l10.1262"></a><span id="l10.1262" class="difflineplus">+ * @return {string}              The new value</span>
<a href="#l10.1263"></a><span id="l10.1263">  */</span>
<a href="#l10.1264"></a><span id="l10.1264" class="difflineminus">-function rotateShowTimeAs() {</span>
<a href="#l10.1265"></a><span id="l10.1265" class="difflineplus">+function rotateShowTimeAs(aShowTimeAs) {</span>
<a href="#l10.1266"></a><span id="l10.1266">     const states = [&quot;OPAQUE&quot;, &quot;TRANSPARENT&quot;];</span>
<a href="#l10.1267"></a><span id="l10.1267" class="difflineminus">-    gShowTimeAs = states[(states.indexOf(gShowTimeAs) + 1) % states.length];</span>
<a href="#l10.1268"></a><span id="l10.1268" class="difflineminus">-    updateShowTimeAs();</span>
<a href="#l10.1269"></a><span id="l10.1269" class="difflineminus">-}</span>
<a href="#l10.1270"></a><span id="l10.1270" class="difflineminus">-</span>
<a href="#l10.1271"></a><span id="l10.1271" class="difflineminus">-/**</span>
<a href="#l10.1272"></a><span id="l10.1272" class="difflineminus">- * Handler function to change the transparency from the dialog elements</span>
<a href="#l10.1273"></a><span id="l10.1273" class="difflineminus">- *</span>
<a href="#l10.1274"></a><span id="l10.1274" class="difflineminus">- * @param target    A XUL node with a value attribute which should be the new</span>
<a href="#l10.1275"></a><span id="l10.1275" class="difflineminus">- *                    transparency.</span>
<a href="#l10.1276"></a><span id="l10.1276" class="difflineminus">- */</span>
<a href="#l10.1277"></a><span id="l10.1277" class="difflineminus">-function editShowTimeAs(target) {</span>
<a href="#l10.1278"></a><span id="l10.1278" class="difflineminus">-    gShowTimeAs = target.getAttribute(&quot;value&quot;);</span>
<a href="#l10.1279"></a><span id="l10.1279" class="difflineminus">-    updateShowTimeAs();</span>
<a href="#l10.1280"></a><span id="l10.1280" class="difflineplus">+    return states[(states.indexOf(aShowTimeAs) + 1) % states.length];</span>
<a href="#l10.1281"></a><span id="l10.1281"> }</span>
<a href="#l10.1282"></a><span id="l10.1282"> </span>
<a href="#l10.1283"></a><span id="l10.1283"> /**</span>
<a href="#l10.1284"></a><span id="l10.1284">  * Update the dialog controls related to transparency.</span>
<a href="#l10.1285"></a><span id="l10.1285" class="difflineplus">+ *</span>
<a href="#l10.1286"></a><span id="l10.1286" class="difflineplus">+ * @param {string} aValue  The new transparency value</span>
<a href="#l10.1287"></a><span id="l10.1287">  */</span>
<a href="#l10.1288"></a><span id="l10.1288" class="difflineminus">-function updateShowTimeAs() {</span>
<a href="#l10.1289"></a><span id="l10.1289" class="difflineplus">+function updateShowTimeAs(aValue) {</span>
<a href="#l10.1290"></a><span id="l10.1290">     if (cal.isEvent(window.calendarItem)) {</span>
<a href="#l10.1291"></a><span id="l10.1291" class="difflineminus">-        var showAsBusy = document.getElementById(&quot;cmd_showtimeas_busy&quot;);</span>
<a href="#l10.1292"></a><span id="l10.1292" class="difflineminus">-        var showAsFree = document.getElementById(&quot;cmd_showtimeas_free&quot;);</span>
<a href="#l10.1293"></a><span id="l10.1293" class="difflineminus">-</span>
<a href="#l10.1294"></a><span id="l10.1294" class="difflineminus">-        showAsBusy.setAttribute(&quot;checked&quot;,</span>
<a href="#l10.1295"></a><span id="l10.1295" class="difflineminus">-                                gShowTimeAs == &quot;OPAQUE&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1296"></a><span id="l10.1296" class="difflineminus">-        showAsFree.setAttribute(&quot;checked&quot;,</span>
<a href="#l10.1297"></a><span id="l10.1297" class="difflineminus">-                                gShowTimeAs == &quot;TRANSPARENT&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1298"></a><span id="l10.1298" class="difflineminus">-</span>
<a href="#l10.1299"></a><span id="l10.1299" class="difflineminus">-        setBooleanAttribute(&quot;status-freebusy&quot;,</span>
<a href="#l10.1300"></a><span id="l10.1300" class="difflineminus">-                            &quot;collapsed&quot;,</span>
<a href="#l10.1301"></a><span id="l10.1301" class="difflineminus">-                            gShowTimeAs != &quot;OPAQUE&quot; &amp;&amp; gShowTimeAs != &quot;TRANSPARENT&quot;);</span>
<a href="#l10.1302"></a><span id="l10.1302" class="difflineminus">-        setBooleanAttribute(&quot;status-freebusy-free-label&quot;, &quot;hidden&quot;, gShowTimeAs == &quot;OPAQUE&quot;);</span>
<a href="#l10.1303"></a><span id="l10.1303" class="difflineminus">-        setBooleanAttribute(&quot;status-freebusy-busy-label&quot;, &quot;hidden&quot;, gShowTimeAs == &quot;TRANSPARENT&quot;);</span>
<a href="#l10.1304"></a><span id="l10.1304" class="difflineplus">+        sendMessage({ command: &quot;updatePanelState&quot;, argument: { showTimeAs: aValue } });</span>
<a href="#l10.1305"></a><span id="l10.1305">     }</span>
<a href="#l10.1306"></a><span id="l10.1306"> }</span>
<a href="#l10.1307"></a><span id="l10.1307"> </span>
<a href="#l10.1308"></a><span id="l10.1308" class="difflineminus">-/**</span>
<a href="#l10.1309"></a><span id="l10.1309" class="difflineminus">- * Toggles the command that allows to enable the timezone</span>
<a href="#l10.1310"></a><span id="l10.1310" class="difflineminus">- * links in the dialog.</span>
<a href="#l10.1311"></a><span id="l10.1311" class="difflineminus">- */</span>
<a href="#l10.1312"></a><span id="l10.1312" class="difflineminus">-function toggleTimezoneLinks() {</span>
<a href="#l10.1313"></a><span id="l10.1313" class="difflineminus">-    let cmdTimezone = document.getElementById('cmd_timezone');</span>
<a href="#l10.1314"></a><span id="l10.1314" class="difflineminus">-    let isChecked = cmdTimezone.getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l10.1315"></a><span id="l10.1315" class="difflineminus">-    cmdTimezone.setAttribute(&quot;checked&quot;, isChecked ? &quot;false&quot; : &quot;true&quot;);</span>
<a href="#l10.1316"></a><span id="l10.1316" class="difflineminus">-    updateDateTime();</span>
<a href="#l10.1317"></a><span id="l10.1317" class="difflineminus">-}</span>
<a href="#l10.1318"></a><span id="l10.1318" class="difflineminus">-</span>
<a href="#l10.1319"></a><span id="l10.1319"> function loadCloudProviders() {</span>
<a href="#l10.1320"></a><span id="l10.1320">     let cloudFileEnabled = Preferences.get(&quot;mail.cloud_files.enabled&quot;, false)</span>
<a href="#l10.1321"></a><span id="l10.1321">     let cmd = document.getElementById(&quot;cmd_attach_cloud&quot;);</span>
<a href="#l10.1322"></a><span id="l10.1322"> </span>
<a href="#l10.1323"></a><span id="l10.1323">     if (!cloudFileEnabled) {</span>
<a href="#l10.1324"></a><span id="l10.1324">         // If cloud file support is disabled, just hide the attach item</span>
<a href="#l10.1325"></a><span id="l10.1325">         cmd.hidden = true;</span>
<a href="#l10.1326"></a><span id="l10.1326">         return;</span>
<a href="#l10.1327"></a><span id="l10.1327" class="difflineat">@@ -2432,46 +2328,48 @@ function updateCalendar() {</span>
<a href="#l10.1328"></a><span id="l10.1328">     // TODO: the code above decided about whether or not the item is readonly.</span>
<a href="#l10.1329"></a><span id="l10.1329">     // below we enable/disable all controls based on this decision.</span>
<a href="#l10.1330"></a><span id="l10.1330">     // unfortunately some controls need to be disabled based on some other</span>
<a href="#l10.1331"></a><span id="l10.1331">     // criteria. this is why we enable all controls in case the item is *not*</span>
<a href="#l10.1332"></a><span id="l10.1332">     // readonly and run through all those updateXXX() functions to disable</span>
<a href="#l10.1333"></a><span id="l10.1333">     // them again based on the specific logic build into those function. is this</span>
<a href="#l10.1334"></a><span id="l10.1334">     // really a good idea?</span>
<a href="#l10.1335"></a><span id="l10.1335">     if (gIsReadOnly) {</span>
<a href="#l10.1336"></a><span id="l10.1336" class="difflineminus">-        var disableElements = document.getElementsByAttribute(&quot;disable-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1337"></a><span id="l10.1337" class="difflineminus">-        for (var i = 0; i &lt; disableElements.length; i++) {</span>
<a href="#l10.1338"></a><span id="l10.1338" class="difflineminus">-            disableElements[i].setAttribute('disabled', 'true');</span>
<a href="#l10.1339"></a><span id="l10.1339" class="difflineplus">+        let disableElements = document.getElementsByAttribute(&quot;disable-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1340"></a><span id="l10.1340" class="difflineplus">+        for (let element of disableElements) {</span>
<a href="#l10.1341"></a><span id="l10.1341" class="difflineplus">+            element.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l10.1342"></a><span id="l10.1342"> </span>
<a href="#l10.1343"></a><span id="l10.1343">             // we mark link-labels with the hyperlink attribute, since we need</span>
<a href="#l10.1344"></a><span id="l10.1344">             // to remove their class in case they get disabled. TODO: it would</span>
<a href="#l10.1345"></a><span id="l10.1345">             // be better to create a small binding for those link-labels</span>
<a href="#l10.1346"></a><span id="l10.1346">             // instead of adding those special stuff.</span>
<a href="#l10.1347"></a><span id="l10.1347" class="difflineminus">-            if (disableElements[i].hasAttribute('hyperlink')) {</span>
<a href="#l10.1348"></a><span id="l10.1348" class="difflineminus">-                disableElements[i].removeAttribute('class');</span>
<a href="#l10.1349"></a><span id="l10.1349" class="difflineminus">-                disableElements[i].removeAttribute('onclick');</span>
<a href="#l10.1350"></a><span id="l10.1350" class="difflineplus">+            if (element.hasAttribute(&quot;hyperlink&quot;)) {</span>
<a href="#l10.1351"></a><span id="l10.1351" class="difflineplus">+                element.removeAttribute(&quot;class&quot;);</span>
<a href="#l10.1352"></a><span id="l10.1352" class="difflineplus">+                element.removeAttribute(&quot;onclick&quot;);</span>
<a href="#l10.1353"></a><span id="l10.1353">             }</span>
<a href="#l10.1354"></a><span id="l10.1354">         }</span>
<a href="#l10.1355"></a><span id="l10.1355"> </span>
<a href="#l10.1356"></a><span id="l10.1356" class="difflineminus">-        var collapseElements = document.getElementsByAttribute(&quot;collapse-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1357"></a><span id="l10.1357" class="difflineminus">-        for (var i = 0; i &lt; collapseElements.length; i++) {</span>
<a href="#l10.1358"></a><span id="l10.1358" class="difflineminus">-            collapseElements[i].setAttribute('collapsed', 'true');</span>
<a href="#l10.1359"></a><span id="l10.1359" class="difflineplus">+        let collapseElements = document.getElementsByAttribute(&quot;collapse-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1360"></a><span id="l10.1360" class="difflineplus">+        for (let element of collapseElements) {</span>
<a href="#l10.1361"></a><span id="l10.1361" class="difflineplus">+            element.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l10.1362"></a><span id="l10.1362">         }</span>
<a href="#l10.1363"></a><span id="l10.1363">     } else {</span>
<a href="#l10.1364"></a><span id="l10.1364" class="difflineminus">-        var enableElements = document.getElementsByAttribute(&quot;disable-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1365"></a><span id="l10.1365" class="difflineminus">-        for (var i = 0; i &lt; enableElements.length; i++) {</span>
<a href="#l10.1366"></a><span id="l10.1366" class="difflineminus">-            enableElements[i].removeAttribute('disabled');</span>
<a href="#l10.1367"></a><span id="l10.1367" class="difflineminus">-            if (enableElements[i].hasAttribute('hyperlink')) {</span>
<a href="#l10.1368"></a><span id="l10.1368" class="difflineminus">-                enableElements[i].setAttribute('class', 'text-link');</span>
<a href="#l10.1369"></a><span id="l10.1369" class="difflineplus">+        sendMessage({ command: &quot;removeDisableAndCollapseOnReadonly&quot; });</span>
<a href="#l10.1370"></a><span id="l10.1370" class="difflineplus">+</span>
<a href="#l10.1371"></a><span id="l10.1371" class="difflineplus">+        let enableElements = document.getElementsByAttribute(&quot;disable-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1372"></a><span id="l10.1372" class="difflineplus">+        for (let element of enableElements) {</span>
<a href="#l10.1373"></a><span id="l10.1373" class="difflineplus">+            element.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l10.1374"></a><span id="l10.1374" class="difflineplus">+            if (element.hasAttribute(&quot;hyperlink&quot;)) {</span>
<a href="#l10.1375"></a><span id="l10.1375" class="difflineplus">+                element.setAttribute(&quot;class&quot;, &quot;text-link&quot;);</span>
<a href="#l10.1376"></a><span id="l10.1376">             }</span>
<a href="#l10.1377"></a><span id="l10.1377">         }</span>
<a href="#l10.1378"></a><span id="l10.1378"> </span>
<a href="#l10.1379"></a><span id="l10.1379" class="difflineminus">-        var collapseElements = document.getElementsByAttribute(&quot;collapse-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1380"></a><span id="l10.1380" class="difflineminus">-        for (var i = 0; i &lt; collapseElements.length; i++) {</span>
<a href="#l10.1381"></a><span id="l10.1381" class="difflineminus">-            collapseElements[i].removeAttribute('collapsed');</span>
<a href="#l10.1382"></a><span id="l10.1382" class="difflineplus">+        let collapseElements = document.getElementsByAttribute(&quot;collapse-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l10.1383"></a><span id="l10.1383" class="difflineplus">+        for (let element of collapseElements) {</span>
<a href="#l10.1384"></a><span id="l10.1384" class="difflineplus">+            element.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l10.1385"></a><span id="l10.1385">         }</span>
<a href="#l10.1386"></a><span id="l10.1386"> </span>
<a href="#l10.1387"></a><span id="l10.1387">         // Task completed date</span>
<a href="#l10.1388"></a><span id="l10.1388">         if (item.completedDate) {</span>
<a href="#l10.1389"></a><span id="l10.1389">             updateToDoStatus(item.status, cal.dateTimeToJsDate(item.completedDate));</span>
<a href="#l10.1390"></a><span id="l10.1390">         } else {</span>
<a href="#l10.1391"></a><span id="l10.1391">             updateToDoStatus(item.status);</span>
<a href="#l10.1392"></a><span id="l10.1392">         }</span>
<a href="#l10.1393"></a><span id="l10.1393" class="difflineat">@@ -2480,19 +2378,19 @@ function updateCalendar() {</span>
<a href="#l10.1394"></a><span id="l10.1394">         item = window.calendarItem;</span>
<a href="#l10.1395"></a><span id="l10.1395">         if (item.parentItem != item) {</span>
<a href="#l10.1396"></a><span id="l10.1396">             disableElement(&quot;item-repeat&quot;);</span>
<a href="#l10.1397"></a><span id="l10.1397">             disableElement(&quot;repeat-until-datepicker&quot;);</span>
<a href="#l10.1398"></a><span id="l10.1398">             var repeatDetails = document.getElementById(&quot;repeat-details&quot;);</span>
<a href="#l10.1399"></a><span id="l10.1399">             var numChilds = repeatDetails.childNodes.length;</span>
<a href="#l10.1400"></a><span id="l10.1400">             for (var i = 0; i &lt; numChilds; i++) {</span>
<a href="#l10.1401"></a><span id="l10.1401">                 var node = repeatDetails.childNodes[i];</span>
<a href="#l10.1402"></a><span id="l10.1402" class="difflineminus">-                node.setAttribute('disabled', 'true');</span>
<a href="#l10.1403"></a><span id="l10.1403" class="difflineminus">-                node.removeAttribute('class');</span>
<a href="#l10.1404"></a><span id="l10.1404" class="difflineminus">-                node.removeAttribute('onclick');</span>
<a href="#l10.1405"></a><span id="l10.1405" class="difflineplus">+                node.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l10.1406"></a><span id="l10.1406" class="difflineplus">+                node.removeAttribute(&quot;class&quot;);</span>
<a href="#l10.1407"></a><span id="l10.1407" class="difflineplus">+                node.removeAttribute(&quot;onclick&quot;);</span>
<a href="#l10.1408"></a><span id="l10.1408">             }</span>
<a href="#l10.1409"></a><span id="l10.1409">         }</span>
<a href="#l10.1410"></a><span id="l10.1410"> </span>
<a href="#l10.1411"></a><span id="l10.1411">         // If the item is a proxy occurrence/instance, a few things aren't</span>
<a href="#l10.1412"></a><span id="l10.1412">         // valid.</span>
<a href="#l10.1413"></a><span id="l10.1413">         if (item.parentItem != item) {</span>
<a href="#l10.1414"></a><span id="l10.1414">             disableElement(&quot;item-calendar&quot;);</span>
<a href="#l10.1415"></a><span id="l10.1415"> </span>
<a href="#l10.1416"></a><span id="l10.1416" class="difflineat">@@ -3036,131 +2934,47 @@ function onCommandDeleteItem() {</span>
<a href="#l10.1417"></a><span id="l10.1417">                                     null,</span>
<a href="#l10.1418"></a><span id="l10.1418">                                     promptTitle,</span>
<a href="#l10.1419"></a><span id="l10.1419">                                     promptMessage);</span>
<a href="#l10.1420"></a><span id="l10.1420">         if (!answerDelete) {</span>
<a href="#l10.1421"></a><span id="l10.1421">             return;</span>
<a href="#l10.1422"></a><span id="l10.1422">         }</span>
<a href="#l10.1423"></a><span id="l10.1423">     }</span>
<a href="#l10.1424"></a><span id="l10.1424"> </span>
<a href="#l10.1425"></a><span id="l10.1425" class="difflineminus">-    if (window.mode != &quot;new&quot;) {</span>
<a href="#l10.1426"></a><span id="l10.1426" class="difflineplus">+    if (window.mode == &quot;new&quot;) {</span>
<a href="#l10.1427"></a><span id="l10.1427" class="difflineplus">+        cancelItem();</span>
<a href="#l10.1428"></a><span id="l10.1428" class="difflineplus">+    } else {</span>
<a href="#l10.1429"></a><span id="l10.1429">         let deleteListener = {</span>
<a href="#l10.1430"></a><span id="l10.1430">             // when deletion of item is complete, close the dialog</span>
<a href="#l10.1431"></a><span id="l10.1431">             onOperationComplete: function(aCalendar, aStatus, aOperationType, aId, aDetail) {</span>
<a href="#l10.1432"></a><span id="l10.1432">                 // Check if the current window has a calendarItem first, because in case of undo</span>
<a href="#l10.1433"></a><span id="l10.1433">                 // window refers to the main window and we would get a 'calendarItem is undefined' warning.</span>
<a href="#l10.1434"></a><span id="l10.1434">                 if (&quot;calendarItem&quot; in window) {</span>
<a href="#l10.1435"></a><span id="l10.1435">                     if (aId == window.calendarItem.id &amp;&amp; Components.isSuccessCode(aStatus)) {</span>
<a href="#l10.1436"></a><span id="l10.1436" class="difflineminus">-                        gConfirmCancel = false;</span>
<a href="#l10.1437"></a><span id="l10.1437" class="difflineminus">-                        document.documentElement.cancelDialog();</span>
<a href="#l10.1438"></a><span id="l10.1438" class="difflineplus">+                        cancelItem();</span>
<a href="#l10.1439"></a><span id="l10.1439">                     } else {</span>
<a href="#l10.1440"></a><span id="l10.1440">                         eventDialogCalendarObserver.observe(window.calendarItem.calendar);</span>
<a href="#l10.1441"></a><span id="l10.1441">                     }</span>
<a href="#l10.1442"></a><span id="l10.1442">                 }</span>
<a href="#l10.1443"></a><span id="l10.1443">             }</span>
<a href="#l10.1444"></a><span id="l10.1444">         };</span>
<a href="#l10.1445"></a><span id="l10.1445"> </span>
<a href="#l10.1446"></a><span id="l10.1446">         eventDialogCalendarObserver.cancel();</span>
<a href="#l10.1447"></a><span id="l10.1447">         if (window.calendarItem.parentItem.recurrenceInfo &amp;&amp; window.calendarItem.recurrenceId) {</span>
<a href="#l10.1448"></a><span id="l10.1448">             // if this is a single occurrence of a recurring item</span>
<a href="#l10.1449"></a><span id="l10.1449">             let newItem = window.calendarItem.parentItem.clone();</span>
<a href="#l10.1450"></a><span id="l10.1450">             newItem.recurrenceInfo.removeOccurrenceAt(window.calendarItem.recurrenceId);</span>
<a href="#l10.1451"></a><span id="l10.1451"> </span>
<a href="#l10.1452"></a><span id="l10.1452" class="difflineminus">-            window.opener.doTransaction(&quot;modify&quot;, newItem, newItem.calendar,</span>
<a href="#l10.1453"></a><span id="l10.1453" class="difflineminus">-                                        window.calendarItem.parentItem, deleteListener);</span>
<a href="#l10.1454"></a><span id="l10.1454" class="difflineplus">+            gMainWindow.doTransaction(&quot;modify&quot;, newItem, newItem.calendar,</span>
<a href="#l10.1455"></a><span id="l10.1455" class="difflineplus">+                                      window.calendarItem.parentItem, deleteListener);</span>
<a href="#l10.1456"></a><span id="l10.1456">         } else {</span>
<a href="#l10.1457"></a><span id="l10.1457" class="difflineminus">-            window.opener.doTransaction(&quot;delete&quot;, window.calendarItem, window.calendarItem.calendar,</span>
<a href="#l10.1458"></a><span id="l10.1458" class="difflineminus">-                                        null, deleteListener);</span>
<a href="#l10.1459"></a><span id="l10.1459" class="difflineplus">+            gMainWindow.doTransaction(&quot;delete&quot;, window.calendarItem, window.calendarItem.calendar,</span>
<a href="#l10.1460"></a><span id="l10.1460" class="difflineplus">+                                      null, deleteListener);</span>
<a href="#l10.1461"></a><span id="l10.1461">         }</span>
<a href="#l10.1462"></a><span id="l10.1462" class="difflineminus">-    } else {</span>
<a href="#l10.1463"></a><span id="l10.1463" class="difflineminus">-        gConfirmCancel = false;</span>
<a href="#l10.1464"></a><span id="l10.1464" class="difflineminus">-        document.documentElement.cancelDialog();</span>
<a href="#l10.1465"></a><span id="l10.1465" class="difflineminus">-    }</span>
<a href="#l10.1466"></a><span id="l10.1466" class="difflineminus">-}</span>
<a href="#l10.1467"></a><span id="l10.1467" class="difflineminus">-</span>
<a href="#l10.1468"></a><span id="l10.1468" class="difflineminus">-/**</span>
<a href="#l10.1469"></a><span id="l10.1469" class="difflineminus">- * Handler function to toggle toolbar visibility.</span>
<a href="#l10.1470"></a><span id="l10.1470" class="difflineminus">- *</span>
<a href="#l10.1471"></a><span id="l10.1471" class="difflineminus">- * @param aToolbarId        The id of the XUL toolbar node to toggle.</span>
<a href="#l10.1472"></a><span id="l10.1472" class="difflineminus">- * @param aMenuitemId       The corresponding menuitem in the view menu.</span>
<a href="#l10.1473"></a><span id="l10.1473" class="difflineminus">- */</span>
<a href="#l10.1474"></a><span id="l10.1474" class="difflineminus">-function onCommandViewToolbar(aToolbarId, aMenuItemId) {</span>
<a href="#l10.1475"></a><span id="l10.1475" class="difflineminus">-    var toolbar = document.getElementById(aToolbarId);</span>
<a href="#l10.1476"></a><span id="l10.1476" class="difflineminus">-    var menuItem = document.getElementById(aMenuItemId);</span>
<a href="#l10.1477"></a><span id="l10.1477" class="difflineminus">-</span>
<a href="#l10.1478"></a><span id="l10.1478" class="difflineminus">-    if (!toolbar || !menuItem) {</span>
<a href="#l10.1479"></a><span id="l10.1479" class="difflineminus">-        return;</span>
<a href="#l10.1480"></a><span id="l10.1480">     }</span>
<a href="#l10.1481"></a><span id="l10.1481" class="difflineminus">-</span>
<a href="#l10.1482"></a><span id="l10.1482" class="difflineminus">-    var toolbarCollapsed = toolbar.collapsed;</span>
<a href="#l10.1483"></a><span id="l10.1483" class="difflineminus">-</span>
<a href="#l10.1484"></a><span id="l10.1484" class="difflineminus">-    // toggle the checkbox</span>
<a href="#l10.1485"></a><span id="l10.1485" class="difflineminus">-    menuItem.setAttribute('checked', toolbarCollapsed);</span>
<a href="#l10.1486"></a><span id="l10.1486" class="difflineminus">-</span>
<a href="#l10.1487"></a><span id="l10.1487" class="difflineminus">-    // toggle visibility of the toolbar</span>
<a href="#l10.1488"></a><span id="l10.1488" class="difflineminus">-    toolbar.collapsed = !toolbarCollapsed;</span>
<a href="#l10.1489"></a><span id="l10.1489" class="difflineminus">-</span>
<a href="#l10.1490"></a><span id="l10.1490" class="difflineminus">-    document.persist(aToolbarId, 'collapsed');</span>
<a href="#l10.1491"></a><span id="l10.1491" class="difflineminus">-    document.persist(aMenuItemId, 'checked');</span>
<a href="#l10.1492"></a><span id="l10.1492" class="difflineminus">-}</span>
<a href="#l10.1493"></a><span id="l10.1493" class="difflineminus">-</span>
<a href="#l10.1494"></a><span id="l10.1494" class="difflineminus">-/**</span>
<a href="#l10.1495"></a><span id="l10.1495" class="difflineminus">- * DialogToolboxCustomizeDone() is called after the customize toolbar dialog</span>
<a href="#l10.1496"></a><span id="l10.1496" class="difflineminus">- * has been closed by the user. We need to restore the state of all buttons</span>
<a href="#l10.1497"></a><span id="l10.1497" class="difflineminus">- * and commands of all customizable toolbars.</span>
<a href="#l10.1498"></a><span id="l10.1498" class="difflineminus">- *</span>
<a href="#l10.1499"></a><span id="l10.1499" class="difflineminus">- * @param aToolboxChanged       If true, the toolbox has changed.</span>
<a href="#l10.1500"></a><span id="l10.1500" class="difflineminus">- */</span>
<a href="#l10.1501"></a><span id="l10.1501" class="difflineminus">-function DialogToolboxCustomizeDone(aToolboxChanged) {</span>
<a href="#l10.1502"></a><span id="l10.1502" class="difflineminus">-</span>
<a href="#l10.1503"></a><span id="l10.1503" class="difflineminus">-    var menubar = document.getElementById(&quot;event-menubar&quot;);</span>
<a href="#l10.1504"></a><span id="l10.1504" class="difflineminus">-    for (var i = 0; i &lt; menubar.childNodes.length; ++i) {</span>
<a href="#l10.1505"></a><span id="l10.1505" class="difflineminus">-        menubar.childNodes[i].removeAttribute(&quot;disabled&quot;);</span>
<a href="#l10.1506"></a><span id="l10.1506" class="difflineminus">-    }</span>
<a href="#l10.1507"></a><span id="l10.1507" class="difflineminus">-</span>
<a href="#l10.1508"></a><span id="l10.1508" class="difflineminus">-    // make sure our toolbar buttons have the correct enabled state restored to them...</span>
<a href="#l10.1509"></a><span id="l10.1509" class="difflineminus">-    document.commandDispatcher.updateCommands('itemCommands');</span>
<a href="#l10.1510"></a><span id="l10.1510" class="difflineminus">-</span>
<a href="#l10.1511"></a><span id="l10.1511" class="difflineminus">-    // Enable the toolbar context menu items</span>
<a href="#l10.1512"></a><span id="l10.1512" class="difflineminus">-    document.getElementById(&quot;cmd_customize&quot;).removeAttribute(&quot;disabled&quot;);</span>
<a href="#l10.1513"></a><span id="l10.1513" class="difflineminus">-</span>
<a href="#l10.1514"></a><span id="l10.1514" class="difflineminus">-    // Update privacy items to make sure the toolbarbutton's menupopup is set</span>
<a href="#l10.1515"></a><span id="l10.1515" class="difflineminus">-    // correctly</span>
<a href="#l10.1516"></a><span id="l10.1516" class="difflineminus">-    updatePrivacy();</span>
<a href="#l10.1517"></a><span id="l10.1517" class="difflineminus">-}</span>
<a href="#l10.1518"></a><span id="l10.1518" class="difflineminus">-</span>
<a href="#l10.1519"></a><span id="l10.1519" class="difflineminus">-/**</span>
<a href="#l10.1520"></a><span id="l10.1520" class="difflineminus">- * Handler function to start the customize toolbar dialog for the event dialog's</span>
<a href="#l10.1521"></a><span id="l10.1521" class="difflineminus">- * toolbar.</span>
<a href="#l10.1522"></a><span id="l10.1522" class="difflineminus">- */</span>
<a href="#l10.1523"></a><span id="l10.1523" class="difflineminus">-function onCommandCustomize() {</span>
<a href="#l10.1524"></a><span id="l10.1524" class="difflineminus">-    // install the callback that handles what needs to be</span>
<a href="#l10.1525"></a><span id="l10.1525" class="difflineminus">-    // done after a toolbar has been customized.</span>
<a href="#l10.1526"></a><span id="l10.1526" class="difflineminus">-    var toolbox = document.getElementById(&quot;event-toolbox&quot;);</span>
<a href="#l10.1527"></a><span id="l10.1527" class="difflineminus">-    toolbox.customizeDone = DialogToolboxCustomizeDone;</span>
<a href="#l10.1528"></a><span id="l10.1528" class="difflineminus">-</span>
<a href="#l10.1529"></a><span id="l10.1529" class="difflineminus">-    var menubar = document.getElementById(&quot;event-menubar&quot;);</span>
<a href="#l10.1530"></a><span id="l10.1530" class="difflineminus">-    for (var i = 0; i &lt; menubar.childNodes.length; ++i) {</span>
<a href="#l10.1531"></a><span id="l10.1531" class="difflineminus">-        menubar.childNodes[i].setAttribute(&quot;disabled&quot;, true);</span>
<a href="#l10.1532"></a><span id="l10.1532" class="difflineminus">-    }</span>
<a href="#l10.1533"></a><span id="l10.1533" class="difflineminus">-</span>
<a href="#l10.1534"></a><span id="l10.1534" class="difflineminus">-    // Disable the toolbar context menu items</span>
<a href="#l10.1535"></a><span id="l10.1535" class="difflineminus">-    document.getElementById(&quot;cmd_customize&quot;).setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l10.1536"></a><span id="l10.1536" class="difflineminus">-</span>
<a href="#l10.1537"></a><span id="l10.1537" class="difflineminus">-    var id = &quot;event-toolbox&quot;;</span>
<a href="#l10.1538"></a><span id="l10.1538" class="difflineminus">-    var wintype = document.documentElement.getAttribute(&quot;windowtype&quot;);</span>
<a href="#l10.1539"></a><span id="l10.1539" class="difflineminus">-    wintype = wintype.replace(/:/g, &quot;&quot;);</span>
<a href="#l10.1540"></a><span id="l10.1540" class="difflineminus">-</span>
<a href="#l10.1541"></a><span id="l10.1541" class="difflineminus">-    window.openDialog(&quot;chrome://global/content/customizeToolbar.xul&quot;,</span>
<a href="#l10.1542"></a><span id="l10.1542" class="difflineminus">-                      &quot;CustomizeToolbar&quot; + wintype,</span>
<a href="#l10.1543"></a><span id="l10.1543" class="difflineminus">-                      &quot;chrome,all,dependent&quot;,</span>
<a href="#l10.1544"></a><span id="l10.1544" class="difflineminus">-                      document.getElementById(id), // toolbar dom node</span>
<a href="#l10.1545"></a><span id="l10.1545" class="difflineminus">-                      false,                       // is mode toolbar yes/no?</span>
<a href="#l10.1546"></a><span id="l10.1546" class="difflineminus">-                      null,                        // callback function</span>
<a href="#l10.1547"></a><span id="l10.1547" class="difflineminus">-                      &quot;dialog&quot;);                   // name of this mode</span>
<a href="#l10.1548"></a><span id="l10.1548"> }</span>
<a href="#l10.1549"></a><span id="l10.1549"> </span>
<a href="#l10.1550"></a><span id="l10.1550"> /**</span>
<a href="#l10.1551"></a><span id="l10.1551">  * Prompts the user to change the start timezone.</span>
<a href="#l10.1552"></a><span id="l10.1552">  */</span>
<a href="#l10.1553"></a><span id="l10.1553"> function editStartTimezone() {</span>
<a href="#l10.1554"></a><span id="l10.1554">     editTimezone(&quot;timezone-starttime&quot;,</span>
<a href="#l10.1555"></a><span id="l10.1555">                  gStartTime.getInTimezone(gStartTimezone),</span>
<a href="#l10.1556"></a><span id="l10.1556" class="difflineat">@@ -3303,23 +3117,20 @@ function editTimezone(aElementId,aDateTi</span>
<a href="#l10.1557"></a><span id="l10.1557">  * - 'gStartTime'</span>
<a href="#l10.1558"></a><span id="l10.1558">  * - 'gEndTime'</span>
<a href="#l10.1559"></a><span id="l10.1559">  * - 'window.calendarItem' (used to decide about event/task)</span>
<a href="#l10.1560"></a><span id="l10.1560">  */</span>
<a href="#l10.1561"></a><span id="l10.1561"> function updateDateTime() {</span>
<a href="#l10.1562"></a><span id="l10.1562">     gIgnoreUpdate = true;</span>
<a href="#l10.1563"></a><span id="l10.1563"> </span>
<a href="#l10.1564"></a><span id="l10.1564">     let item = window.calendarItem;</span>
<a href="#l10.1565"></a><span id="l10.1565" class="difflineminus">-    let timezonesEnabled = document.getElementById('cmd_timezone')</span>
<a href="#l10.1566"></a><span id="l10.1566" class="difflineminus">-                                   .getAttribute('checked') == 'true';</span>
<a href="#l10.1567"></a><span id="l10.1567" class="difflineminus">-</span>
<a href="#l10.1568"></a><span id="l10.1568">     // Convert to default timezone if the timezone option</span>
<a href="#l10.1569"></a><span id="l10.1569">     // is *not* checked, otherwise keep the specific timezone</span>
<a href="#l10.1570"></a><span id="l10.1570">     // and display the labels in order to modify the timezone.</span>
<a href="#l10.1571"></a><span id="l10.1571" class="difflineminus">-    if (timezonesEnabled) {</span>
<a href="#l10.1572"></a><span id="l10.1572" class="difflineplus">+    if (gTimezonesEnabled) {</span>
<a href="#l10.1573"></a><span id="l10.1573">         if (isEvent(item)) {</span>
<a href="#l10.1574"></a><span id="l10.1574">           var startTime = gStartTime.getInTimezone(gStartTimezone);</span>
<a href="#l10.1575"></a><span id="l10.1575">           var endTime = gEndTime.getInTimezone(gEndTimezone);</span>
<a href="#l10.1576"></a><span id="l10.1576"> </span>
<a href="#l10.1577"></a><span id="l10.1577">           setElementValue(&quot;event-all-day&quot;, startTime.isDate, &quot;checked&quot;);</span>
<a href="#l10.1578"></a><span id="l10.1578"> </span>
<a href="#l10.1579"></a><span id="l10.1579">           // In the case where the timezones are different but</span>
<a href="#l10.1580"></a><span id="l10.1580">           // the timezone of the endtime is &quot;UTC&quot;, we convert</span>
<a href="#l10.1581"></a><span id="l10.1581" class="difflineat">@@ -3486,59 +3297,100 @@ function updateTimezone() {</span>
<a href="#l10.1582"></a><span id="l10.1582">                 }</span>
<a href="#l10.1583"></a><span id="l10.1583">                 element.removeAttribute('disabled');</span>
<a href="#l10.1584"></a><span id="l10.1584">             }</span>
<a href="#l10.1585"></a><span id="l10.1585">         } else {</span>
<a href="#l10.1586"></a><span id="l10.1586">             element.setAttribute('collapsed', 'true');</span>
<a href="#l10.1587"></a><span id="l10.1587">         }</span>
<a href="#l10.1588"></a><span id="l10.1588">     }</span>
<a href="#l10.1589"></a><span id="l10.1589"> </span>
<a href="#l10.1590"></a><span id="l10.1590" class="difflineminus">-    let timezonesEnabled = document.getElementById('cmd_timezone')</span>
<a href="#l10.1591"></a><span id="l10.1591" class="difflineminus">-                                   .getAttribute('checked') == 'true';</span>
<a href="#l10.1592"></a><span id="l10.1592">     // convert to default timezone if the timezone option</span>
<a href="#l10.1593"></a><span id="l10.1593">     // is *not* checked, otherwise keep the specific timezone</span>
<a href="#l10.1594"></a><span id="l10.1594">     // and display the labels in order to modify the timezone.</span>
<a href="#l10.1595"></a><span id="l10.1595" class="difflineminus">-    if (timezonesEnabled) {</span>
<a href="#l10.1596"></a><span id="l10.1596" class="difflineplus">+    if (gTimezonesEnabled) {</span>
<a href="#l10.1597"></a><span id="l10.1597">         updateTimezoneElement(gStartTimezone,</span>
<a href="#l10.1598"></a><span id="l10.1598">                               'timezone-starttime',</span>
<a href="#l10.1599"></a><span id="l10.1599">                               gStartTime);</span>
<a href="#l10.1600"></a><span id="l10.1600">         updateTimezoneElement(gEndTimezone,</span>
<a href="#l10.1601"></a><span id="l10.1601">                               'timezone-endtime',</span>
<a href="#l10.1602"></a><span id="l10.1602">                               gEndTime);</span>
<a href="#l10.1603"></a><span id="l10.1603">     } else {</span>
<a href="#l10.1604"></a><span id="l10.1604">         document.getElementById('timezone-starttime')</span>
<a href="#l10.1605"></a><span id="l10.1605">                 .setAttribute('collapsed', 'true');</span>
<a href="#l10.1606"></a><span id="l10.1606">         document.getElementById('timezone-endtime')</span>
<a href="#l10.1607"></a><span id="l10.1607">                 .setAttribute('collapsed', 'true');</span>
<a href="#l10.1608"></a><span id="l10.1608">     }</span>
<a href="#l10.1609"></a><span id="l10.1609"> }</span>
<a href="#l10.1610"></a><span id="l10.1610"> </span>
<a href="#l10.1611"></a><span id="l10.1611"> /**</span>
<a href="#l10.1612"></a><span id="l10.1612" class="difflineminus">- * This function updates dialog controls related to item attachments</span>
<a href="#l10.1613"></a><span id="l10.1613" class="difflineplus">+ * Updates dialog controls related to item attachments</span>
<a href="#l10.1614"></a><span id="l10.1614">  */</span>
<a href="#l10.1615"></a><span id="l10.1615"> function updateAttachment() {</span>
<a href="#l10.1616"></a><span id="l10.1616" class="difflineminus">-    var hasAttachments = capSupported(&quot;attachments&quot;);</span>
<a href="#l10.1617"></a><span id="l10.1617" class="difflineplus">+    let hasAttachments = capSupported(&quot;attachments&quot;);</span>
<a href="#l10.1618"></a><span id="l10.1618">     setElementValue(&quot;cmd_attach_url&quot;, !hasAttachments &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l10.1619"></a><span id="l10.1619" class="difflineplus">+    sendMessage({</span>
<a href="#l10.1620"></a><span id="l10.1620" class="difflineplus">+        command: &quot;updatePanelState&quot;,</span>
<a href="#l10.1621"></a><span id="l10.1621" class="difflineplus">+        argument: { attachUrlCommand: hasAttachments }</span>
<a href="#l10.1622"></a><span id="l10.1622" class="difflineplus">+    });</span>
<a href="#l10.1623"></a><span id="l10.1623"> }</span>
<a href="#l10.1624"></a><span id="l10.1624"> </span>
<a href="#l10.1625"></a><span id="l10.1625"> /**</span>
<a href="#l10.1626"></a><span id="l10.1626" class="difflineminus">- * Toggles the visibility of the related link (rfc2445 URL property)</span>
<a href="#l10.1627"></a><span id="l10.1627" class="difflineplus">+ * Updates the related link on the dialog (rfc2445 URL property).  The</span>
<a href="#l10.1628"></a><span id="l10.1628" class="difflineplus">+ * argument passed in may be overridden for various reasons.</span>
<a href="#l10.1629"></a><span id="l10.1629" class="difflineplus">+ *</span>
<a href="#l10.1630"></a><span id="l10.1630" class="difflineplus">+ * @param {boolean} aShowLink  Show the link (true) or not (false)</span>
<a href="#l10.1631"></a><span id="l10.1631">  */</span>
<a href="#l10.1632"></a><span id="l10.1632" class="difflineminus">-function toggleLink() {</span>
<a href="#l10.1633"></a><span id="l10.1633" class="difflineminus">-    var linkCommand = document.getElementById(&quot;cmd_toggle_link&quot;);</span>
<a href="#l10.1634"></a><span id="l10.1634" class="difflineminus">-    var row = document.getElementById(&quot;event-grid-link-row&quot;);</span>
<a href="#l10.1635"></a><span id="l10.1635" class="difflineminus">-    var separator = document.getElementById(&quot;event-grid-link-separator&quot;);</span>
<a href="#l10.1636"></a><span id="l10.1636" class="difflineminus">-</span>
<a href="#l10.1637"></a><span id="l10.1637" class="difflineminus">-    var isHidden = row.hidden;</span>
<a href="#l10.1638"></a><span id="l10.1638" class="difflineminus">-    row.hidden = !isHidden;</span>
<a href="#l10.1639"></a><span id="l10.1639" class="difflineminus">-    separator.hidden = !isHidden;</span>
<a href="#l10.1640"></a><span id="l10.1640" class="difflineminus">-</span>
<a href="#l10.1641"></a><span id="l10.1641" class="difflineminus">-    linkCommand.setAttribute(&quot;checked&quot;, isHidden ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l10.1642"></a><span id="l10.1642" class="difflineminus">-</span>
<a href="#l10.1643"></a><span id="l10.1643" class="difflineminus">-    updateLink();</span>
<a href="#l10.1644"></a><span id="l10.1644" class="difflineplus">+function updateItemURL(aShowLink) {</span>
<a href="#l10.1645"></a><span id="l10.1645" class="difflineplus">+    /**</span>
<a href="#l10.1646"></a><span id="l10.1646" class="difflineplus">+     * Hides or shows the related link.</span>
<a href="#l10.1647"></a><span id="l10.1647" class="difflineplus">+     *</span>
<a href="#l10.1648"></a><span id="l10.1648" class="difflineplus">+     * @param {boolean} aShow  To show (true) or to hide (false) the link</span>
<a href="#l10.1649"></a><span id="l10.1649" class="difflineplus">+     */</span>
<a href="#l10.1650"></a><span id="l10.1650" class="difflineplus">+    function hideOrShow(aShow) {</span>
<a href="#l10.1651"></a><span id="l10.1651" class="difflineplus">+        setElementValue(&quot;event-grid-link-row&quot;, !aShow &amp;&amp; &quot;true&quot;, &quot;hidden&quot;);</span>
<a href="#l10.1652"></a><span id="l10.1652" class="difflineplus">+        let separator = document.getElementById(&quot;event-grid-link-separator&quot;);</span>
<a href="#l10.1653"></a><span id="l10.1653" class="difflineplus">+        if (separator) {</span>
<a href="#l10.1654"></a><span id="l10.1654" class="difflineplus">+            // The separator is not there in the summary dialog</span>
<a href="#l10.1655"></a><span id="l10.1655" class="difflineplus">+            setElementValue(&quot;event-grid-link-separator&quot;, !aShow &amp;&amp; &quot;true&quot;, &quot;hidden&quot;);</span>
<a href="#l10.1656"></a><span id="l10.1656" class="difflineplus">+        }</span>
<a href="#l10.1657"></a><span id="l10.1657" class="difflineplus">+    }</span>
<a href="#l10.1658"></a><span id="l10.1658" class="difflineplus">+    let itemUrlString = window.calendarItem.getProperty(&quot;URL&quot;) || &quot;&quot;;</span>
<a href="#l10.1659"></a><span id="l10.1659" class="difflineplus">+    if (!itemUrlString.length) {</span>
<a href="#l10.1660"></a><span id="l10.1660" class="difflineplus">+        // Disable if there is no url</span>
<a href="#l10.1661"></a><span id="l10.1661" class="difflineplus">+        sendMessage({ command: &quot;disableLinkCommand&quot; });</span>
<a href="#l10.1662"></a><span id="l10.1662" class="difflineplus">+    }</span>
<a href="#l10.1663"></a><span id="l10.1663" class="difflineplus">+</span>
<a href="#l10.1664"></a><span id="l10.1664" class="difflineplus">+    if (aShowLink &amp;&amp; itemUrlString.length) {</span>
<a href="#l10.1665"></a><span id="l10.1665" class="difflineplus">+        let handler;</span>
<a href="#l10.1666"></a><span id="l10.1666" class="difflineplus">+        let uri;</span>
<a href="#l10.1667"></a><span id="l10.1667" class="difflineplus">+        try {</span>
<a href="#l10.1668"></a><span id="l10.1668" class="difflineplus">+            uri = makeURL(itemUrlString);</span>
<a href="#l10.1669"></a><span id="l10.1669" class="difflineplus">+            handler = Services.io.getProtocolHandler(uri.scheme);</span>
<a href="#l10.1670"></a><span id="l10.1670" class="difflineplus">+        } catch (e) {</span>
<a href="#l10.1671"></a><span id="l10.1671" class="difflineplus">+            // No protocol handler for the given protocol, or invalid uri</span>
<a href="#l10.1672"></a><span id="l10.1672" class="difflineplus">+            hideOrShow(false);</span>
<a href="#l10.1673"></a><span id="l10.1673" class="difflineplus">+            return;</span>
<a href="#l10.1674"></a><span id="l10.1674" class="difflineplus">+        }</span>
<a href="#l10.1675"></a><span id="l10.1675" class="difflineplus">+</span>
<a href="#l10.1676"></a><span id="l10.1676" class="difflineplus">+        // Only show if its either an internal protcol handler, or its external</span>
<a href="#l10.1677"></a><span id="l10.1677" class="difflineplus">+        // and there is an external app for the scheme</span>
<a href="#l10.1678"></a><span id="l10.1678" class="difflineplus">+        handler = cal.wrapInstance(handler, Components.interfaces.nsIExternalProtocolHandler);</span>
<a href="#l10.1679"></a><span id="l10.1679" class="difflineplus">+        hideOrShow(!handler ||</span>
<a href="#l10.1680"></a><span id="l10.1680" class="difflineplus">+                   handler.externalAppExistsForScheme(uri.scheme));</span>
<a href="#l10.1681"></a><span id="l10.1681" class="difflineplus">+</span>
<a href="#l10.1682"></a><span id="l10.1682" class="difflineplus">+        setTimeout(() =&gt; {</span>
<a href="#l10.1683"></a><span id="l10.1683" class="difflineplus">+          // HACK the url-link doesn't crop when setting the value in onLoad</span>
<a href="#l10.1684"></a><span id="l10.1684" class="difflineplus">+          setElementValue(&quot;url-link&quot;, itemUrlString);</span>
<a href="#l10.1685"></a><span id="l10.1685" class="difflineplus">+          setElementValue(&quot;url-link&quot;, itemUrlString, &quot;href&quot;);</span>
<a href="#l10.1686"></a><span id="l10.1686" class="difflineplus">+        }, 0);</span>
<a href="#l10.1687"></a><span id="l10.1687" class="difflineplus">+    } else {</span>
<a href="#l10.1688"></a><span id="l10.1688" class="difflineplus">+        // Hide if there is no url, or the menuitem was chosen so that the url</span>
<a href="#l10.1689"></a><span id="l10.1689" class="difflineplus">+        // should be hidden.</span>
<a href="#l10.1690"></a><span id="l10.1690" class="difflineplus">+        hideOrShow(false);</span>
<a href="#l10.1691"></a><span id="l10.1691" class="difflineplus">+    }</span>
<a href="#l10.1692"></a><span id="l10.1692"> }</span>
<a href="#l10.1693"></a><span id="l10.1693"> </span>
<a href="#l10.1694"></a><span id="l10.1694"> /**</span>
<a href="#l10.1695"></a><span id="l10.1695">  * This function updates dialog controls related to attendees.</span>
<a href="#l10.1696"></a><span id="l10.1696">  */</span>
<a href="#l10.1697"></a><span id="l10.1697"> function updateAttendees() {</span>
<a href="#l10.1698"></a><span id="l10.1698">     // sending email invitations currently only supported for events</span>
<a href="#l10.1699"></a><span id="l10.1699">     let attendeeTab = document.getElementById(&quot;event-grid-tab-attendees&quot;);</span>
<a href="#l10.1700"></a><span id="l10.1700" class="difflineat">@@ -3764,18 +3616,18 @@ function sendMailToAttendees(aAttendees)</span>
<a href="#l10.1701"></a><span id="l10.1701">     sendMailTo(toList, emailSubject, null, identity);</span>
<a href="#l10.1702"></a><span id="l10.1702"> }</span>
<a href="#l10.1703"></a><span id="l10.1703"> </span>
<a href="#l10.1704"></a><span id="l10.1704"> /**</span>
<a href="#l10.1705"></a><span id="l10.1705">  * Make sure all fields that may have calendar specific capabilities are updated</span>
<a href="#l10.1706"></a><span id="l10.1706">  */</span>
<a href="#l10.1707"></a><span id="l10.1707"> function updateCapabilities() {</span>
<a href="#l10.1708"></a><span id="l10.1708">     updateAttachment();</span>
<a href="#l10.1709"></a><span id="l10.1709" class="difflineminus">-    updatePriority();</span>
<a href="#l10.1710"></a><span id="l10.1710" class="difflineminus">-    updatePrivacy();</span>
<a href="#l10.1711"></a><span id="l10.1711" class="difflineplus">+    updatePriority(gConfig.priority);</span>
<a href="#l10.1712"></a><span id="l10.1712" class="difflineplus">+    updatePrivacy(gConfig.privacy);</span>
<a href="#l10.1713"></a><span id="l10.1713">     updateReminderDetails();</span>
<a href="#l10.1714"></a><span id="l10.1714">     updateCategoryMenulist();</span>
<a href="#l10.1715"></a><span id="l10.1715"> }</span>
<a href="#l10.1716"></a><span id="l10.1716"> </span>
<a href="#l10.1717"></a><span id="l10.1717"> /**</span>
<a href="#l10.1718"></a><span id="l10.1718">  * find out if the User already changed values in the Dialog</span>
<a href="#l10.1719"></a><span id="l10.1719">  *</span>
<a href="#l10.1720"></a><span id="l10.1720">  * @return:    true if the values in the Dialog have changed. False otherwise.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.xul</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,684 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+&lt;!-- XXX some of these css files may not be needed here.</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+    widget-bindings.css definitely is needed here --&gt;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-alarms.css&quot;?&gt;</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-attendees.css&quot;?&gt;</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/datetimepickers/datetimepickers.css&quot;?&gt;</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/primaryToolbar.css&quot;?&gt;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/messenger.css&quot;?&gt;</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+&lt;!DOCTYPE window [</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+    &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+    &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://calendar/locale/global.dtd&quot;&gt;</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+    &lt;!ENTITY % calendarDTD SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot;&gt;</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+    &lt;!ENTITY % eventDialogDTD SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt;</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+    %brandDTD;</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+    %globalDTD;</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+    %calendarDTD;</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+    %eventDialogDTD;</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+]&gt;</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+&lt;!-- Vbox id is changed during excution to allow different treatment.</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+     document.loadOverlay() will not work on this one. --&gt;</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+&lt;window id=&quot;calendar-event-dialog-inner&quot;</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+      onload=&quot;onLoad();&quot;</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+      onunload=&quot;onEventDialogUnload();&quot;</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+      onresize=&quot;rearrangeAttendees();&quot;</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineplus">+      xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+  &lt;!-- Javascript includes --&gt;</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+          src=&quot;chrome://lightning/content/lightning-item-iframe.js&quot;/&gt;</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+          src=&quot;chrome://calendar/content/calendar-dialog-utils.js&quot;/&gt;</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+          src=&quot;chrome://calendar/content/calendar-ui-utils.js&quot;/&gt;</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineplus">+          src=&quot;chrome://calendar/content/calUtils.js&quot;/&gt;</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+          src=&quot;chrome://calendar/content/calApplicationUtils.js&quot;/&gt;</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineplus">+          src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineplus">+          src=&quot;chrome://global/content/printUtils.js&quot;/&gt;</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineplus">+          src=&quot;chrome://calendar/content/calendar-statusbar.js&quot;/&gt;</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineplus">+          src=&quot;chrome://messenger/content/toolbarIconColor.js&quot;/&gt;</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineplus">+</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineplus">+  &lt;commandset id=&quot;&quot;&gt;</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineplus">+    &lt;command id=&quot;cmd_recurrence&quot;</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineplus">+             oncommand=&quot;editRepeat();&quot;/&gt;</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineplus">+    &lt;command id=&quot;cmd_attendees&quot;</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineplus">+             oncommand=&quot;editAttendees();&quot;/&gt;</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+    &lt;command id=&quot;cmd_email&quot;</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineplus">+             oncommand=&quot;sendMailToAttendees(window.attendees);&quot;/&gt;</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineplus">+    &lt;command id=&quot;cmd_email_undecided&quot;</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+             oncommand=&quot;sendMailToUndecidedAttendees(window.attendees);&quot;/&gt;</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineplus">+    &lt;command id=&quot;cmd_attach_url&quot;</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineplus">+             oncommand=&quot;attachURL()&quot;/&gt;</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineplus">+    &lt;command id=&quot;cmd_attach_cloud&quot;</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineplus">+             disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineplus">+    &lt;command id=&quot;cmd_openAttachment&quot;</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineplus">+             oncommand=&quot;openAttachment()&quot;/&gt;</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineplus">+    &lt;command id=&quot;cmd_copyAttachment&quot;</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineplus">+             oncommand=&quot;copyAttachment()&quot;/&gt;</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineplus">+    &lt;command id=&quot;cmd_deleteAttachment&quot;</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineplus">+             oncommand=&quot;deleteAttachment()&quot;/&gt;</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineplus">+    &lt;command id=&quot;cmd_deleteAllAttachments&quot;</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineplus">+             disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineplus">+             oncommand=&quot;deleteAllAttachments()&quot;/&gt;</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineplus">+  &lt;/commandset&gt;</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineplus">+</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineplus">+  &lt;notificationbox id=&quot;event-dialog-notifications&quot; notificationside=&quot;top&quot;/&gt;</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineplus">+</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineplus">+  &lt;grid id=&quot;event-grid&quot;</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineplus">+        flex=&quot;1&quot;</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineplus">+        style=&quot;padding-top: 8px; padding-bottom: 10px; padding-inline-start: 8px; padding-inline-end: 10px;&quot;&gt;</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineplus">+    &lt;columns id=&quot;event-grid-columns&quot;&gt;</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineplus">+        &lt;column id=&quot;event-description-column&quot;/&gt;</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineplus">+        &lt;column id=&quot;event-controls-column&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineplus">+    &lt;/columns&gt;</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineplus">+</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineplus">+    &lt;rows id=&quot;event-grid-rows&quot;&gt;</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineplus">+      &lt;!-- Title --&gt;</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineplus">+      &lt;row id=&quot;event-grid-title-row&quot;</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineplus">+           align=&quot;center&quot;&gt;</span>
<a href="#l11.102"></a><span id="l11.102" class="difflineplus">+        &lt;label value=&quot;&amp;event.title.textbox.label;&quot;</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineplus">+               accesskey=&quot;&amp;event.title.textbox.accesskey;&quot;</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineplus">+               control=&quot;item-title&quot;</span>
<a href="#l11.105"></a><span id="l11.105" class="difflineplus">+               disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineplus">+        &lt;textbox id=&quot;item-title&quot;</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineplus">+                 flex=&quot;1&quot;</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineplus">+                 oninput=&quot;updateTitle()&quot;/&gt;</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineplus">+</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineplus">+      &lt;!-- Location --&gt;</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineplus">+      &lt;row id=&quot;event-grid-location-row&quot;</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineplus">+         align=&quot;center&quot;&gt;</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineplus">+        &lt;label value=&quot;&amp;event.location.label;&quot;</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineplus">+               accesskey=&quot;&amp;event.location.accesskey;&quot;</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineplus">+               control=&quot;item-location&quot;</span>
<a href="#l11.118"></a><span id="l11.118" class="difflineplus">+               disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.119"></a><span id="l11.119" class="difflineplus">+        &lt;textbox id=&quot;item-location&quot;</span>
<a href="#l11.120"></a><span id="l11.120" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.121"></a><span id="l11.121" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.122"></a><span id="l11.122" class="difflineplus">+</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineplus">+      &lt;!-- Category &amp; Calendar --&gt;</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineplus">+      &lt;row id=&quot;event-grid-category-color-row&quot;</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineplus">+           align=&quot;center&quot;&gt;</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineplus">+        &lt;hbox id=&quot;event-grid-category-labels-box&quot;&gt;</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineplus">+          &lt;label value=&quot;&amp;event.categories.label;&quot;</span>
<a href="#l11.128"></a><span id="l11.128" class="difflineplus">+                 accesskey=&quot;&amp;event.categories.accesskey;&quot;</span>
<a href="#l11.129"></a><span id="l11.129" class="difflineplus">+                 control=&quot;item-categories&quot;</span>
<a href="#l11.130"></a><span id="l11.130" class="difflineplus">+                 id=&quot;item-categories-label&quot;</span>
<a href="#l11.131"></a><span id="l11.131" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineplus">+          &lt;label value=&quot;&amp;event.calendar.label;&quot;</span>
<a href="#l11.133"></a><span id="l11.133" class="difflineplus">+                 accesskey=&quot;&amp;event.calendar.accesskey;&quot;</span>
<a href="#l11.134"></a><span id="l11.134" class="difflineplus">+                 id=&quot;item-calendar-aux-label&quot;</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineplus">+                 control=&quot;item-calendar&quot;</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.137"></a><span id="l11.137" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.138"></a><span id="l11.138" class="difflineplus">+        &lt;hbox id=&quot;event-grid-category-box&quot; align=&quot;center&quot;&gt;</span>
<a href="#l11.139"></a><span id="l11.139" class="difflineplus">+          &lt;menulist id=&quot;item-categories&quot;</span>
<a href="#l11.140"></a><span id="l11.140" class="difflineplus">+                    type=&quot;panel-menulist&quot;</span>
<a href="#l11.141"></a><span id="l11.141" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.142"></a><span id="l11.142" class="difflineplus">+                    flex=&quot;1&quot;&gt;</span>
<a href="#l11.143"></a><span id="l11.143" class="difflineplus">+            &lt;panel id=&quot;item-categories-panel&quot;</span>
<a href="#l11.144"></a><span id="l11.144" class="difflineplus">+                   type=&quot;category-panel&quot;</span>
<a href="#l11.145"></a><span id="l11.145" class="difflineplus">+                   onpopuphiding=&quot;updateCategoryMenulist()&quot;/&gt;</span>
<a href="#l11.146"></a><span id="l11.146" class="difflineplus">+          &lt;/menulist&gt;</span>
<a href="#l11.147"></a><span id="l11.147" class="difflineplus">+          &lt;label value=&quot;&amp;event.calendar.label;&quot;</span>
<a href="#l11.148"></a><span id="l11.148" class="difflineplus">+                 accesskey=&quot;&amp;event.calendar.accesskey;&quot;</span>
<a href="#l11.149"></a><span id="l11.149" class="difflineplus">+                 control=&quot;item-calendar&quot;</span>
<a href="#l11.150"></a><span id="l11.150" class="difflineplus">+                 id=&quot;item-calendar-label&quot;</span>
<a href="#l11.151"></a><span id="l11.151" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.152"></a><span id="l11.152" class="difflineplus">+          &lt;menulist id=&quot;item-calendar&quot;</span>
<a href="#l11.153"></a><span id="l11.153" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.154"></a><span id="l11.154" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l11.155"></a><span id="l11.155" class="difflineplus">+                    oncommand=&quot;updateCalendar();&quot;/&gt;</span>
<a href="#l11.156"></a><span id="l11.156" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.157"></a><span id="l11.157" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.158"></a><span id="l11.158" class="difflineplus">+</span>
<a href="#l11.159"></a><span id="l11.159" class="difflineplus">+      &lt;separator class=&quot;groove&quot; id=&quot;event-grid-basic-separator&quot;/&gt;</span>
<a href="#l11.160"></a><span id="l11.160" class="difflineplus">+</span>
<a href="#l11.161"></a><span id="l11.161" class="difflineplus">+      &lt;!-- All-Day --&gt;</span>
<a href="#l11.162"></a><span id="l11.162" class="difflineplus">+      &lt;row id=&quot;event-grid-allday-row&quot;</span>
<a href="#l11.163"></a><span id="l11.163" class="difflineplus">+           align=&quot;center&quot;&gt;</span>
<a href="#l11.164"></a><span id="l11.164" class="difflineplus">+        &lt;spacer/&gt;</span>
<a href="#l11.165"></a><span id="l11.165" class="difflineplus">+        &lt;checkbox id=&quot;event-all-day&quot;</span>
<a href="#l11.166"></a><span id="l11.166" class="difflineplus">+                  class=&quot;event-only&quot;</span>
<a href="#l11.167"></a><span id="l11.167" class="difflineplus">+                  disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.168"></a><span id="l11.168" class="difflineplus">+                  label=&quot;&amp;event.alldayevent.label;&quot;</span>
<a href="#l11.169"></a><span id="l11.169" class="difflineplus">+                  accesskey=&quot;&amp;event.alldayevent.accesskey;&quot;</span>
<a href="#l11.170"></a><span id="l11.170" class="difflineplus">+                  oncommand=&quot;onUpdateAllDay();&quot;/&gt;</span>
<a href="#l11.171"></a><span id="l11.171" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.172"></a><span id="l11.172" class="difflineplus">+</span>
<a href="#l11.173"></a><span id="l11.173" class="difflineplus">+      &lt;!-- StartDate --&gt;</span>
<a href="#l11.174"></a><span id="l11.174" class="difflineplus">+      &lt;row id=&quot;event-grid-startdate-row&quot;&gt;</span>
<a href="#l11.175"></a><span id="l11.175" class="difflineplus">+        &lt;hbox id=&quot;event-grid-startdate-label-box&quot;</span>
<a href="#l11.176"></a><span id="l11.176" class="difflineplus">+              align=&quot;center&quot;&gt;</span>
<a href="#l11.177"></a><span id="l11.177" class="difflineplus">+          &lt;label value=&quot;&amp;event.from.label;&quot;</span>
<a href="#l11.178"></a><span id="l11.178" class="difflineplus">+                 accesskey=&quot;&amp;event.from.accesskey;&quot;</span>
<a href="#l11.179"></a><span id="l11.179" class="difflineplus">+                 control=&quot;event-starttime&quot;</span>
<a href="#l11.180"></a><span id="l11.180" class="difflineplus">+                 class=&quot;event-only&quot;</span>
<a href="#l11.181"></a><span id="l11.181" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.182"></a><span id="l11.182" class="difflineplus">+          &lt;label value=&quot;&amp;task.from.label;&quot;</span>
<a href="#l11.183"></a><span id="l11.183" class="difflineplus">+                 accesskey=&quot;&amp;task.from.accesskey;&quot;</span>
<a href="#l11.184"></a><span id="l11.184" class="difflineplus">+                 control=&quot;todo-has-entrydate&quot;</span>
<a href="#l11.185"></a><span id="l11.185" class="difflineplus">+                 class=&quot;todo-only&quot;</span>
<a href="#l11.186"></a><span id="l11.186" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.187"></a><span id="l11.187" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.188"></a><span id="l11.188" class="difflineplus">+        &lt;hbox id=&quot;event-grid-startdate-picker-box&quot;&gt;</span>
<a href="#l11.189"></a><span id="l11.189" class="difflineplus">+          &lt;datetimepicker id=&quot;event-starttime&quot;</span>
<a href="#l11.190"></a><span id="l11.190" class="difflineplus">+                          class=&quot;event-only&quot;</span>
<a href="#l11.191"></a><span id="l11.191" class="difflineplus">+                          disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.192"></a><span id="l11.192" class="difflineplus">+                          onchange=&quot;dateTimeControls2State(true);&quot;/&gt;</span>
<a href="#l11.193"></a><span id="l11.193" class="difflineplus">+          &lt;checkbox id=&quot;todo-has-entrydate&quot;</span>
<a href="#l11.194"></a><span id="l11.194" class="difflineplus">+                    class=&quot;todo-only checkbox-no-label&quot;</span>
<a href="#l11.195"></a><span id="l11.195" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.196"></a><span id="l11.196" class="difflineplus">+                    oncommand=&quot;updateEntryDate();&quot;/&gt;</span>
<a href="#l11.197"></a><span id="l11.197" class="difflineplus">+          &lt;datetimepicker id=&quot;todo-entrydate&quot;</span>
<a href="#l11.198"></a><span id="l11.198" class="difflineplus">+                          class=&quot;todo-only&quot;</span>
<a href="#l11.199"></a><span id="l11.199" class="difflineplus">+                          disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.200"></a><span id="l11.200" class="difflineplus">+                          onchange=&quot;dateTimeControls2State(true);&quot;/&gt;</span>
<a href="#l11.201"></a><span id="l11.201" class="difflineplus">+          &lt;vbox&gt;</span>
<a href="#l11.202"></a><span id="l11.202" class="difflineplus">+            &lt;hbox&gt;</span>
<a href="#l11.203"></a><span id="l11.203" class="difflineplus">+              &lt;image id=&quot;link-image-top&quot; class=&quot;keepduration-link-image&quot; keep=&quot;true&quot;/&gt;</span>
<a href="#l11.204"></a><span id="l11.204" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l11.205"></a><span id="l11.205" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l11.206"></a><span id="l11.206" class="difflineplus">+            &lt;toolbarbutton id=&quot;keepduration-button&quot;</span>
<a href="#l11.207"></a><span id="l11.207" class="difflineplus">+                           accesskey=&quot;&amp;event.dialog.keepDurationButton.accesskey;&quot;</span>
<a href="#l11.208"></a><span id="l11.208" class="difflineplus">+                           oncommand=&quot;toggleKeepDuration();&quot;</span>
<a href="#l11.209"></a><span id="l11.209" class="difflineplus">+                           persist=&quot;keep&quot;</span>
<a href="#l11.210"></a><span id="l11.210" class="difflineplus">+                           keep=&quot;false&quot;</span>
<a href="#l11.211"></a><span id="l11.211" class="difflineplus">+                           tooltiptext=&quot;&amp;event.dialog.keepDurationButton.tooltip;&quot;/&gt;</span>
<a href="#l11.212"></a><span id="l11.212" class="difflineplus">+          &lt;/vbox&gt;</span>
<a href="#l11.213"></a><span id="l11.213" class="difflineplus">+          &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l11.214"></a><span id="l11.214" class="difflineplus">+            &lt;label id=&quot;timezone-starttime&quot;</span>
<a href="#l11.215"></a><span id="l11.215" class="difflineplus">+                   class=&quot;text-link&quot;</span>
<a href="#l11.216"></a><span id="l11.216" class="difflineplus">+                   collapsed=&quot;true&quot;</span>
<a href="#l11.217"></a><span id="l11.217" class="difflineplus">+                   crop=&quot;end&quot;</span>
<a href="#l11.218"></a><span id="l11.218" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.219"></a><span id="l11.219" class="difflineplus">+                   flex=&quot;1&quot;</span>
<a href="#l11.220"></a><span id="l11.220" class="difflineplus">+                   hyperlink=&quot;true&quot;</span>
<a href="#l11.221"></a><span id="l11.221" class="difflineplus">+                   onclick=&quot;showTimezonePopup(event, gStartTime.getInTimezone(gStartTimezone), editStartTimezone)&quot;/&gt;</span>
<a href="#l11.222"></a><span id="l11.222" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l11.223"></a><span id="l11.223" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.224"></a><span id="l11.224" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.225"></a><span id="l11.225" class="difflineplus">+</span>
<a href="#l11.226"></a><span id="l11.226" class="difflineplus">+      &lt;!-- EndDate --&gt;</span>
<a href="#l11.227"></a><span id="l11.227" class="difflineplus">+      &lt;row id=&quot;event-grid-enddate-row&quot;&gt;</span>
<a href="#l11.228"></a><span id="l11.228" class="difflineplus">+        &lt;hbox id=&quot;event-grid-enddate-label-box&quot;</span>
<a href="#l11.229"></a><span id="l11.229" class="difflineplus">+              align=&quot;center&quot;&gt;</span>
<a href="#l11.230"></a><span id="l11.230" class="difflineplus">+          &lt;label value=&quot;&amp;event.to.label;&quot;</span>
<a href="#l11.231"></a><span id="l11.231" class="difflineplus">+                 accesskey=&quot;&amp;event.to.accesskey;&quot;</span>
<a href="#l11.232"></a><span id="l11.232" class="difflineplus">+                 control=&quot;event-endtime&quot;</span>
<a href="#l11.233"></a><span id="l11.233" class="difflineplus">+                 class=&quot;event-only&quot;</span>
<a href="#l11.234"></a><span id="l11.234" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.235"></a><span id="l11.235" class="difflineplus">+          &lt;label value=&quot;&amp;task.to.label;&quot;</span>
<a href="#l11.236"></a><span id="l11.236" class="difflineplus">+                 accesskey=&quot;&amp;task.to.accesskey;&quot;</span>
<a href="#l11.237"></a><span id="l11.237" class="difflineplus">+                 control=&quot;todo-has-duedate&quot;</span>
<a href="#l11.238"></a><span id="l11.238" class="difflineplus">+                 class=&quot;todo-only&quot;</span>
<a href="#l11.239"></a><span id="l11.239" class="difflineplus">+                 disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.240"></a><span id="l11.240" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.241"></a><span id="l11.241" class="difflineplus">+        &lt;vbox&gt;</span>
<a href="#l11.242"></a><span id="l11.242" class="difflineplus">+          &lt;hbox id=&quot;event-grid-enddate-picker-box&quot;&gt;</span>
<a href="#l11.243"></a><span id="l11.243" class="difflineplus">+            &lt;datetimepicker id=&quot;event-endtime&quot;</span>
<a href="#l11.244"></a><span id="l11.244" class="difflineplus">+                            class=&quot;event-only&quot;</span>
<a href="#l11.245"></a><span id="l11.245" class="difflineplus">+                            disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.246"></a><span id="l11.246" class="difflineplus">+                            onchange=&quot;dateTimeControls2State(false);&quot;/&gt;</span>
<a href="#l11.247"></a><span id="l11.247" class="difflineplus">+            &lt;checkbox id=&quot;todo-has-duedate&quot;</span>
<a href="#l11.248"></a><span id="l11.248" class="difflineplus">+                      class=&quot;todo-only checkbox-no-label&quot;</span>
<a href="#l11.249"></a><span id="l11.249" class="difflineplus">+                      disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.250"></a><span id="l11.250" class="difflineplus">+                      oncommand=&quot;updateDueDate();&quot;/&gt;</span>
<a href="#l11.251"></a><span id="l11.251" class="difflineplus">+            &lt;datetimepicker id=&quot;todo-duedate&quot;</span>
<a href="#l11.252"></a><span id="l11.252" class="difflineplus">+                            class=&quot;todo-only&quot;</span>
<a href="#l11.253"></a><span id="l11.253" class="difflineplus">+                            disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.254"></a><span id="l11.254" class="difflineplus">+                            onchange=&quot;dateTimeControls2State(false);&quot;/&gt;</span>
<a href="#l11.255"></a><span id="l11.255" class="difflineplus">+            &lt;vbox pack=&quot;end&quot;&gt;</span>
<a href="#l11.256"></a><span id="l11.256" class="difflineplus">+              &lt;image id=&quot;link-image-bottom&quot; class=&quot;keepduration-link-image&quot;/&gt;</span>
<a href="#l11.257"></a><span id="l11.257" class="difflineplus">+            &lt;/vbox&gt;</span>
<a href="#l11.258"></a><span id="l11.258" class="difflineplus">+            &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l11.259"></a><span id="l11.259" class="difflineplus">+              &lt;label id=&quot;timezone-endtime&quot;</span>
<a href="#l11.260"></a><span id="l11.260" class="difflineplus">+                     class=&quot;text-link&quot;</span>
<a href="#l11.261"></a><span id="l11.261" class="difflineplus">+                     collapsed=&quot;true&quot;</span>
<a href="#l11.262"></a><span id="l11.262" class="difflineplus">+                     crop=&quot;end&quot;</span>
<a href="#l11.263"></a><span id="l11.263" class="difflineplus">+                     disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.264"></a><span id="l11.264" class="difflineplus">+                     flex=&quot;1&quot;</span>
<a href="#l11.265"></a><span id="l11.265" class="difflineplus">+                     hyperlink=&quot;true&quot;</span>
<a href="#l11.266"></a><span id="l11.266" class="difflineplus">+                     onclick=&quot;showTimezonePopup(event, gEndTime.getInTimezone(gEndTimezone), editEndTimezone)&quot;/&gt;</span>
<a href="#l11.267"></a><span id="l11.267" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l11.268"></a><span id="l11.268" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l11.269"></a><span id="l11.269" class="difflineplus">+        &lt;/vbox&gt;</span>
<a href="#l11.270"></a><span id="l11.270" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.271"></a><span id="l11.271" class="difflineplus">+</span>
<a href="#l11.272"></a><span id="l11.272" class="difflineplus">+      &lt;row id=&quot;event-grid-todo-status-row&quot;</span>
<a href="#l11.273"></a><span id="l11.273" class="difflineplus">+           class=&quot;todo-only&quot;</span>
<a href="#l11.274"></a><span id="l11.274" class="difflineplus">+           align=&quot;center&quot;&gt;</span>
<a href="#l11.275"></a><span id="l11.275" class="difflineplus">+        &lt;label id=&quot;todo-status-label&quot;</span>
<a href="#l11.276"></a><span id="l11.276" class="difflineplus">+               value=&quot;&amp;task.status.label;&quot;</span>
<a href="#l11.277"></a><span id="l11.277" class="difflineplus">+               accesskey=&quot;&amp;task.status.accesskey;&quot;</span>
<a href="#l11.278"></a><span id="l11.278" class="difflineplus">+               control=&quot;todo-status&quot;</span>
<a href="#l11.279"></a><span id="l11.279" class="difflineplus">+               disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.280"></a><span id="l11.280" class="difflineplus">+        &lt;hbox id=&quot;event-grid-todo-status-picker-box&quot;</span>
<a href="#l11.281"></a><span id="l11.281" class="difflineplus">+              align=&quot;center&quot;&gt;</span>
<a href="#l11.282"></a><span id="l11.282" class="difflineplus">+          &lt;menulist id=&quot;todo-status&quot;</span>
<a href="#l11.283"></a><span id="l11.283" class="difflineplus">+                    class=&quot;todo-only&quot;</span>
<a href="#l11.284"></a><span id="l11.284" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.285"></a><span id="l11.285" class="difflineplus">+                    oncommand=&quot;updateToDoStatus(this.value);&quot;&gt;</span>
<a href="#l11.286"></a><span id="l11.286" class="difflineplus">+            &lt;menupopup id=&quot;todo-status-menupopup&quot;&gt;</span>
<a href="#l11.287"></a><span id="l11.287" class="difflineplus">+              &lt;menuitem id=&quot;todo-status-none-menuitem&quot;</span>
<a href="#l11.288"></a><span id="l11.288" class="difflineplus">+                        label=&quot;&amp;newevent.todoStatus.none.label;&quot;</span>
<a href="#l11.289"></a><span id="l11.289" class="difflineplus">+                        value=&quot;NONE&quot;/&gt;</span>
<a href="#l11.290"></a><span id="l11.290" class="difflineplus">+              &lt;menuitem id=&quot;todo-status-needsaction-menuitem&quot;</span>
<a href="#l11.291"></a><span id="l11.291" class="difflineplus">+                        label=&quot;&amp;newevent.status.needsaction.label;&quot;</span>
<a href="#l11.292"></a><span id="l11.292" class="difflineplus">+                        value=&quot;NEEDS-ACTION&quot;/&gt;</span>
<a href="#l11.293"></a><span id="l11.293" class="difflineplus">+              &lt;menuitem id=&quot;todo-status-inprogress-menuitem&quot;</span>
<a href="#l11.294"></a><span id="l11.294" class="difflineplus">+                        label=&quot;&amp;newevent.status.inprogress.label;&quot;</span>
<a href="#l11.295"></a><span id="l11.295" class="difflineplus">+                        value=&quot;IN-PROCESS&quot;/&gt;</span>
<a href="#l11.296"></a><span id="l11.296" class="difflineplus">+              &lt;menuitem id=&quot;todo-status-completed-menuitem&quot;</span>
<a href="#l11.297"></a><span id="l11.297" class="difflineplus">+                        label=&quot;&amp;newevent.status.completed.label;&quot;</span>
<a href="#l11.298"></a><span id="l11.298" class="difflineplus">+                        value=&quot;COMPLETED&quot;/&gt;</span>
<a href="#l11.299"></a><span id="l11.299" class="difflineplus">+              &lt;menuitem id=&quot;todo-status-canceled-menuitem&quot;</span>
<a href="#l11.300"></a><span id="l11.300" class="difflineplus">+                        label=&quot;&amp;newevent.todoStatus.cancelled.label;&quot;</span>
<a href="#l11.301"></a><span id="l11.301" class="difflineplus">+                        value=&quot;CANCELLED&quot;/&gt;</span>
<a href="#l11.302"></a><span id="l11.302" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l11.303"></a><span id="l11.303" class="difflineplus">+          &lt;/menulist&gt;</span>
<a href="#l11.304"></a><span id="l11.304" class="difflineplus">+            &lt;datepicker id=&quot;completed-date-picker&quot;</span>
<a href="#l11.305"></a><span id="l11.305" class="difflineplus">+                        class=&quot;todo-only&quot;</span>
<a href="#l11.306"></a><span id="l11.306" class="difflineplus">+                        disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.307"></a><span id="l11.307" class="difflineplus">+                        disabled=&quot;true&quot;</span>
<a href="#l11.308"></a><span id="l11.308" class="difflineplus">+                        value=&quot;&quot;/&gt;</span>
<a href="#l11.309"></a><span id="l11.309" class="difflineplus">+            &lt;textbox id=&quot;percent-complete-textbox&quot;</span>
<a href="#l11.310"></a><span id="l11.310" class="difflineplus">+                     type=&quot;number&quot;</span>
<a href="#l11.311"></a><span id="l11.311" class="difflineplus">+                     min=&quot;0&quot;</span>
<a href="#l11.312"></a><span id="l11.312" class="difflineplus">+                     max=&quot;100&quot;</span>
<a href="#l11.313"></a><span id="l11.313" class="difflineplus">+                     disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.314"></a><span id="l11.314" class="difflineplus">+                     size=&quot;3&quot;</span>
<a href="#l11.315"></a><span id="l11.315" class="difflineplus">+                     oninput=&quot;updateToDoStatus('percent-changed')&quot;</span>
<a href="#l11.316"></a><span id="l11.316" class="difflineplus">+                     onselect=&quot;updateToDoStatus('percent-changed')&quot;/&gt;</span>
<a href="#l11.317"></a><span id="l11.317" class="difflineplus">+            &lt;label id=&quot;percent-complete-label&quot;</span>
<a href="#l11.318"></a><span id="l11.318" class="difflineplus">+                   class=&quot;todo-only&quot;</span>
<a href="#l11.319"></a><span id="l11.319" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.320"></a><span id="l11.320" class="difflineplus">+                   value=&quot;&amp;newtodo.percentcomplete.label;&quot;/&gt;</span>
<a href="#l11.321"></a><span id="l11.321" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.322"></a><span id="l11.322" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.323"></a><span id="l11.323" class="difflineplus">+</span>
<a href="#l11.324"></a><span id="l11.324" class="difflineplus">+      &lt;separator id=&quot;event-grid-recurrence-separator&quot; class=&quot;groove&quot;/&gt;</span>
<a href="#l11.325"></a><span id="l11.325" class="difflineplus">+</span>
<a href="#l11.326"></a><span id="l11.326" class="difflineplus">+      &lt;!-- Recurrence --&gt;</span>
<a href="#l11.327"></a><span id="l11.327" class="difflineplus">+      &lt;row id=&quot;event-grid-recurrence-row&quot;</span>
<a href="#l11.328"></a><span id="l11.328" class="difflineplus">+           align=&quot;center&quot;&gt;</span>
<a href="#l11.329"></a><span id="l11.329" class="difflineplus">+        &lt;label value=&quot;&amp;event.repeat.label;&quot;</span>
<a href="#l11.330"></a><span id="l11.330" class="difflineplus">+               accesskey=&quot;&amp;event.repeat.accesskey;&quot;</span>
<a href="#l11.331"></a><span id="l11.331" class="difflineplus">+               control=&quot;item-repeat&quot;</span>
<a href="#l11.332"></a><span id="l11.332" class="difflineplus">+               disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.333"></a><span id="l11.333" class="difflineplus">+        &lt;hbox id=&quot;event-grid-recurrence-picker-box&quot;</span>
<a href="#l11.334"></a><span id="l11.334" class="difflineplus">+              align=&quot;center&quot;</span>
<a href="#l11.335"></a><span id="l11.335" class="difflineplus">+              flex=&quot;1&quot;&gt;</span>
<a href="#l11.336"></a><span id="l11.336" class="difflineplus">+          &lt;menulist id=&quot;item-repeat&quot;</span>
<a href="#l11.337"></a><span id="l11.337" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.338"></a><span id="l11.338" class="difflineplus">+                    oncommand=&quot;updateRepeat(null, true)&quot;&gt;</span>
<a href="#l11.339"></a><span id="l11.339" class="difflineplus">+            &lt;menupopup id=&quot;item-repeat-menupopup&quot;&gt;</span>
<a href="#l11.340"></a><span id="l11.340" class="difflineplus">+              &lt;menuitem id=&quot;repeat-none-menuitem&quot;</span>
<a href="#l11.341"></a><span id="l11.341" class="difflineplus">+                        label=&quot;&amp;event.repeat.does.not.repeat.label;&quot;</span>
<a href="#l11.342"></a><span id="l11.342" class="difflineplus">+                        selected=&quot;true&quot;</span>
<a href="#l11.343"></a><span id="l11.343" class="difflineplus">+                        value=&quot;none&quot;/&gt;</span>
<a href="#l11.344"></a><span id="l11.344" class="difflineplus">+              &lt;menuitem id=&quot;repeat-daily-menuitem&quot;</span>
<a href="#l11.345"></a><span id="l11.345" class="difflineplus">+                        label=&quot;&amp;event.repeat.daily.label;&quot;</span>
<a href="#l11.346"></a><span id="l11.346" class="difflineplus">+                        value=&quot;daily&quot;/&gt;</span>
<a href="#l11.347"></a><span id="l11.347" class="difflineplus">+              &lt;menuitem id=&quot;repeat-weekly-menuitem&quot;</span>
<a href="#l11.348"></a><span id="l11.348" class="difflineplus">+                        label=&quot;&amp;event.repeat.weekly.label;&quot;</span>
<a href="#l11.349"></a><span id="l11.349" class="difflineplus">+                        value=&quot;weekly&quot;/&gt;</span>
<a href="#l11.350"></a><span id="l11.350" class="difflineplus">+              &lt;menuitem id=&quot;repeat-weekday-menuitem&quot;</span>
<a href="#l11.351"></a><span id="l11.351" class="difflineplus">+                        label=&quot;&amp;event.repeat.every.weekday.label;&quot;</span>
<a href="#l11.352"></a><span id="l11.352" class="difflineplus">+                        value=&quot;every.weekday&quot;/&gt;</span>
<a href="#l11.353"></a><span id="l11.353" class="difflineplus">+              &lt;menuitem id=&quot;repeat-biweekly-menuitem&quot;</span>
<a href="#l11.354"></a><span id="l11.354" class="difflineplus">+                        label=&quot;&amp;event.repeat.bi.weekly.label;&quot;</span>
<a href="#l11.355"></a><span id="l11.355" class="difflineplus">+                        value=&quot;bi.weekly&quot;/&gt;</span>
<a href="#l11.356"></a><span id="l11.356" class="difflineplus">+              &lt;menuitem id=&quot;repeat-monthly-menuitem&quot;</span>
<a href="#l11.357"></a><span id="l11.357" class="difflineplus">+                        label=&quot;&amp;event.repeat.monthly.label;&quot;</span>
<a href="#l11.358"></a><span id="l11.358" class="difflineplus">+                        value=&quot;monthly&quot;/&gt;</span>
<a href="#l11.359"></a><span id="l11.359" class="difflineplus">+              &lt;menuitem id=&quot;repeat-yearly-menuitem&quot;</span>
<a href="#l11.360"></a><span id="l11.360" class="difflineplus">+                        label=&quot;&amp;event.repeat.yearly.label;&quot;</span>
<a href="#l11.361"></a><span id="l11.361" class="difflineplus">+                        value=&quot;yearly&quot;/&gt;</span>
<a href="#l11.362"></a><span id="l11.362" class="difflineplus">+              &lt;menuseparator id=&quot;item-repeat-separator&quot;/&gt;</span>
<a href="#l11.363"></a><span id="l11.363" class="difflineplus">+              &lt;menuitem id=&quot;repeat-custom-menuitem&quot;</span>
<a href="#l11.364"></a><span id="l11.364" class="difflineplus">+                        label=&quot;&amp;event.repeat.custom.label;&quot;</span>
<a href="#l11.365"></a><span id="l11.365" class="difflineplus">+                        value=&quot;custom&quot;/&gt;</span>
<a href="#l11.366"></a><span id="l11.366" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l11.367"></a><span id="l11.367" class="difflineplus">+          &lt;/menulist&gt;</span>
<a href="#l11.368"></a><span id="l11.368" class="difflineplus">+          &lt;deck id=&quot;repeat-deck&quot; selectedIndex=&quot;-1&quot;&gt;</span>
<a href="#l11.369"></a><span id="l11.369" class="difflineplus">+            &lt;hbox id=&quot;repeat-untilDate&quot; align=&quot;center&quot;&gt;</span>
<a href="#l11.370"></a><span id="l11.370" class="difflineplus">+                &lt;label value=&quot;&amp;event.until.label;&quot;</span>
<a href="#l11.371"></a><span id="l11.371" class="difflineplus">+                       accesskey=&quot;&amp;event.until.accesskey;&quot;</span>
<a href="#l11.372"></a><span id="l11.372" class="difflineplus">+                       control=&quot;repeat-until-datepicker&quot;</span>
<a href="#l11.373"></a><span id="l11.373" class="difflineplus">+                       disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.374"></a><span id="l11.374" class="difflineplus">+                &lt;datepicker-forever id=&quot;repeat-until-datepicker&quot; flex=&quot;1&quot;</span>
<a href="#l11.375"></a><span id="l11.375" class="difflineplus">+                                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.376"></a><span id="l11.376" class="difflineplus">+                                    onchange=&quot;checkUntilDate();&quot;</span>
<a href="#l11.377"></a><span id="l11.377" class="difflineplus">+                                    oncommand=&quot;checkUntilDate();&quot;</span>
<a href="#l11.378"></a><span id="l11.378" class="difflineplus">+                                    value=&quot;&quot;/&gt;</span>
<a href="#l11.379"></a><span id="l11.379" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l11.380"></a><span id="l11.380" class="difflineplus">+            &lt;vbox id=&quot;repeat-details&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l11.381"></a><span id="l11.381" class="difflineplus">+                &lt;label class=&quot;text-link&quot;</span>
<a href="#l11.382"></a><span id="l11.382" class="difflineplus">+                       crop=&quot;right&quot;</span>
<a href="#l11.383"></a><span id="l11.383" class="difflineplus">+                       disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.384"></a><span id="l11.384" class="difflineplus">+                       hyperlink=&quot;true&quot;</span>
<a href="#l11.385"></a><span id="l11.385" class="difflineplus">+                       flex=&quot;1&quot;</span>
<a href="#l11.386"></a><span id="l11.386" class="difflineplus">+                       onclick=&quot;updateRepeat()&quot;/&gt;</span>
<a href="#l11.387"></a><span id="l11.387" class="difflineplus">+            &lt;/vbox&gt;</span>
<a href="#l11.388"></a><span id="l11.388" class="difflineplus">+          &lt;/deck&gt;</span>
<a href="#l11.389"></a><span id="l11.389" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.390"></a><span id="l11.390" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.391"></a><span id="l11.391" class="difflineplus">+</span>
<a href="#l11.392"></a><span id="l11.392" class="difflineplus">+      &lt;separator id=&quot;event-grid-alarm-separator&quot;</span>
<a href="#l11.393"></a><span id="l11.393" class="difflineplus">+                 class=&quot;groove&quot;/&gt;</span>
<a href="#l11.394"></a><span id="l11.394" class="difflineplus">+</span>
<a href="#l11.395"></a><span id="l11.395" class="difflineplus">+      &lt;!-- Reminder (Alarm) --&gt;</span>
<a href="#l11.396"></a><span id="l11.396" class="difflineplus">+      &lt;row id=&quot;event-grid-alarm-row&quot;</span>
<a href="#l11.397"></a><span id="l11.397" class="difflineplus">+           align=&quot;center&quot;&gt;</span>
<a href="#l11.398"></a><span id="l11.398" class="difflineplus">+        &lt;label value=&quot;&amp;event.reminder.label;&quot;</span>
<a href="#l11.399"></a><span id="l11.399" class="difflineplus">+               accesskey=&quot;&amp;event.reminder.accesskey;&quot;</span>
<a href="#l11.400"></a><span id="l11.400" class="difflineplus">+               control=&quot;item-alarm&quot;</span>
<a href="#l11.401"></a><span id="l11.401" class="difflineplus">+               disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.402"></a><span id="l11.402" class="difflineplus">+        &lt;hbox id=&quot;event-grid-alarm-picker-box&quot;</span>
<a href="#l11.403"></a><span id="l11.403" class="difflineplus">+              align=&quot;center&quot;&gt;</span>
<a href="#l11.404"></a><span id="l11.404" class="difflineplus">+          &lt;menulist id=&quot;item-alarm&quot;</span>
<a href="#l11.405"></a><span id="l11.405" class="difflineplus">+                    disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.406"></a><span id="l11.406" class="difflineplus">+                    oncommand=&quot;updateReminder()&quot;&gt;</span>
<a href="#l11.407"></a><span id="l11.407" class="difflineplus">+            &lt;menupopup id=&quot;item-alarm-menupopup&quot;&gt;</span>
<a href="#l11.408"></a><span id="l11.408" class="difflineplus">+              &lt;menuitem id=&quot;reminder-none-menuitem&quot;</span>
<a href="#l11.409"></a><span id="l11.409" class="difflineplus">+                        label=&quot;&amp;event.reminder.none.label;&quot;</span>
<a href="#l11.410"></a><span id="l11.410" class="difflineplus">+                        selected=&quot;true&quot;</span>
<a href="#l11.411"></a><span id="l11.411" class="difflineplus">+                        value=&quot;none&quot;/&gt;</span>
<a href="#l11.412"></a><span id="l11.412" class="difflineplus">+              &lt;menuseparator id=&quot;reminder-none-separator&quot;/&gt;</span>
<a href="#l11.413"></a><span id="l11.413" class="difflineplus">+              &lt;menuitem id=&quot;reminder-0minutes-menuitem&quot;</span>
<a href="#l11.414"></a><span id="l11.414" class="difflineplus">+                        label=&quot;&amp;event.reminder.0minutes.before.label;&quot;</span>
<a href="#l11.415"></a><span id="l11.415" class="difflineplus">+                        length=&quot;0&quot;</span>
<a href="#l11.416"></a><span id="l11.416" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.417"></a><span id="l11.417" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.418"></a><span id="l11.418" class="difflineplus">+                        unit=&quot;minutes&quot;/&gt;</span>
<a href="#l11.419"></a><span id="l11.419" class="difflineplus">+              &lt;menuitem id=&quot;reminder-5minutes-menuitem&quot;</span>
<a href="#l11.420"></a><span id="l11.420" class="difflineplus">+                        label=&quot;&amp;event.reminder.5minutes.before.label;&quot;</span>
<a href="#l11.421"></a><span id="l11.421" class="difflineplus">+                        length=&quot;5&quot;</span>
<a href="#l11.422"></a><span id="l11.422" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.423"></a><span id="l11.423" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.424"></a><span id="l11.424" class="difflineplus">+                        unit=&quot;minutes&quot;/&gt;</span>
<a href="#l11.425"></a><span id="l11.425" class="difflineplus">+              &lt;menuitem id=&quot;reminder-15minutes-menuitem&quot;</span>
<a href="#l11.426"></a><span id="l11.426" class="difflineplus">+                        label=&quot;&amp;event.reminder.15minutes.before.label;&quot;</span>
<a href="#l11.427"></a><span id="l11.427" class="difflineplus">+                        length=&quot;15&quot;</span>
<a href="#l11.428"></a><span id="l11.428" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.429"></a><span id="l11.429" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.430"></a><span id="l11.430" class="difflineplus">+                        unit=&quot;minutes&quot;/&gt;</span>
<a href="#l11.431"></a><span id="l11.431" class="difflineplus">+              &lt;menuitem id=&quot;reminder-30minutes-menuitem&quot;</span>
<a href="#l11.432"></a><span id="l11.432" class="difflineplus">+                        label=&quot;&amp;event.reminder.30minutes.before.label;&quot;</span>
<a href="#l11.433"></a><span id="l11.433" class="difflineplus">+                        length=&quot;30&quot;</span>
<a href="#l11.434"></a><span id="l11.434" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.435"></a><span id="l11.435" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.436"></a><span id="l11.436" class="difflineplus">+                        unit=&quot;minutes&quot;/&gt;</span>
<a href="#l11.437"></a><span id="l11.437" class="difflineplus">+              &lt;menuseparator id=&quot;reminder-minutes-separator&quot;/&gt;</span>
<a href="#l11.438"></a><span id="l11.438" class="difflineplus">+              &lt;menuitem id=&quot;reminder-1hour-menuitem&quot;</span>
<a href="#l11.439"></a><span id="l11.439" class="difflineplus">+                        label=&quot;&amp;event.reminder.1hour.before.label;&quot;</span>
<a href="#l11.440"></a><span id="l11.440" class="difflineplus">+                        length=&quot;1&quot;</span>
<a href="#l11.441"></a><span id="l11.441" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.442"></a><span id="l11.442" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.443"></a><span id="l11.443" class="difflineplus">+                        unit=&quot;hours&quot;/&gt;</span>
<a href="#l11.444"></a><span id="l11.444" class="difflineplus">+              &lt;menuitem id=&quot;reminder-2hours-menuitem&quot;</span>
<a href="#l11.445"></a><span id="l11.445" class="difflineplus">+                        label=&quot;&amp;event.reminder.2hours.before.label;&quot;</span>
<a href="#l11.446"></a><span id="l11.446" class="difflineplus">+                        length=&quot;2&quot;</span>
<a href="#l11.447"></a><span id="l11.447" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.448"></a><span id="l11.448" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.449"></a><span id="l11.449" class="difflineplus">+                        unit=&quot;hours&quot;/&gt;</span>
<a href="#l11.450"></a><span id="l11.450" class="difflineplus">+              &lt;menuitem id=&quot;reminder-12hours-menuitem&quot;</span>
<a href="#l11.451"></a><span id="l11.451" class="difflineplus">+                        label=&quot;&amp;event.reminder.12hours.before.label;&quot;</span>
<a href="#l11.452"></a><span id="l11.452" class="difflineplus">+                        length=&quot;12&quot;</span>
<a href="#l11.453"></a><span id="l11.453" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.454"></a><span id="l11.454" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.455"></a><span id="l11.455" class="difflineplus">+                        unit=&quot;hours&quot;/&gt;</span>
<a href="#l11.456"></a><span id="l11.456" class="difflineplus">+              &lt;menuseparator id=&quot;reminder-hours-separator&quot;/&gt;</span>
<a href="#l11.457"></a><span id="l11.457" class="difflineplus">+              &lt;menuitem id=&quot;reminder-1day-menuitem&quot;</span>
<a href="#l11.458"></a><span id="l11.458" class="difflineplus">+                        label=&quot;&amp;event.reminder.1day.before.label;&quot;</span>
<a href="#l11.459"></a><span id="l11.459" class="difflineplus">+                        length=&quot;1&quot;</span>
<a href="#l11.460"></a><span id="l11.460" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.461"></a><span id="l11.461" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.462"></a><span id="l11.462" class="difflineplus">+                        unit=&quot;days&quot;/&gt;</span>
<a href="#l11.463"></a><span id="l11.463" class="difflineplus">+              &lt;menuitem id=&quot;reminder-2days-menuitem&quot;</span>
<a href="#l11.464"></a><span id="l11.464" class="difflineplus">+                        label=&quot;&amp;event.reminder.2days.before.label;&quot;</span>
<a href="#l11.465"></a><span id="l11.465" class="difflineplus">+                        length=&quot;2&quot;</span>
<a href="#l11.466"></a><span id="l11.466" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.467"></a><span id="l11.467" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.468"></a><span id="l11.468" class="difflineplus">+                        unit=&quot;days&quot;/&gt;</span>
<a href="#l11.469"></a><span id="l11.469" class="difflineplus">+              &lt;menuitem id=&quot;reminder-1week-menuitem&quot;</span>
<a href="#l11.470"></a><span id="l11.470" class="difflineplus">+                        label=&quot;&amp;event.reminder.1week.before.label;&quot;</span>
<a href="#l11.471"></a><span id="l11.471" class="difflineplus">+                        length=&quot;7&quot;</span>
<a href="#l11.472"></a><span id="l11.472" class="difflineplus">+                        origin=&quot;before&quot;</span>
<a href="#l11.473"></a><span id="l11.473" class="difflineplus">+                        relation=&quot;START&quot;</span>
<a href="#l11.474"></a><span id="l11.474" class="difflineplus">+                        unit=&quot;days&quot;/&gt;</span>
<a href="#l11.475"></a><span id="l11.475" class="difflineplus">+              &lt;menuseparator id=&quot;reminder-custom-separator&quot;/&gt;</span>
<a href="#l11.476"></a><span id="l11.476" class="difflineplus">+              &lt;menuitem id=&quot;reminder-custom-menuitem&quot;</span>
<a href="#l11.477"></a><span id="l11.477" class="difflineplus">+                        label=&quot;&amp;event.reminder.custom.label;&quot;</span>
<a href="#l11.478"></a><span id="l11.478" class="difflineplus">+                        value=&quot;custom&quot;/&gt;</span>
<a href="#l11.479"></a><span id="l11.479" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l11.480"></a><span id="l11.480" class="difflineplus">+          &lt;/menulist&gt;</span>
<a href="#l11.481"></a><span id="l11.481" class="difflineplus">+          &lt;hbox id=&quot;reminder-details&quot;&gt;</span>
<a href="#l11.482"></a><span id="l11.482" class="difflineplus">+            &lt;hbox id=&quot;reminder-icon-box&quot;</span>
<a href="#l11.483"></a><span id="l11.483" class="difflineplus">+                  class=&quot;alarm-icons-box&quot;</span>
<a href="#l11.484"></a><span id="l11.484" class="difflineplus">+                  align=&quot;center&quot;/&gt;</span>
<a href="#l11.485"></a><span id="l11.485" class="difflineplus">+            &lt;!-- TODO oncommand? onkeypress? --&gt;</span>
<a href="#l11.486"></a><span id="l11.486" class="difflineplus">+            &lt;label id=&quot;reminder-multiple-alarms-label&quot;</span>
<a href="#l11.487"></a><span id="l11.487" class="difflineplus">+                   hidden=&quot;true&quot;</span>
<a href="#l11.488"></a><span id="l11.488" class="difflineplus">+                   value=&quot;&amp;event.reminder.multiple.label;&quot;</span>
<a href="#l11.489"></a><span id="l11.489" class="difflineplus">+                   class=&quot;text-link&quot;</span>
<a href="#l11.490"></a><span id="l11.490" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.491"></a><span id="l11.491" class="difflineplus">+                   flex=&quot;1&quot;</span>
<a href="#l11.492"></a><span id="l11.492" class="difflineplus">+                   hyperlink=&quot;true&quot;</span>
<a href="#l11.493"></a><span id="l11.493" class="difflineplus">+                   onclick=&quot;updateReminder()&quot;/&gt;</span>
<a href="#l11.494"></a><span id="l11.494" class="difflineplus">+            &lt;label id=&quot;reminder-single-alarms-label&quot;</span>
<a href="#l11.495"></a><span id="l11.495" class="difflineplus">+                   hidden=&quot;true&quot;</span>
<a href="#l11.496"></a><span id="l11.496" class="difflineplus">+                   class=&quot;text-link&quot;</span>
<a href="#l11.497"></a><span id="l11.497" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.498"></a><span id="l11.498" class="difflineplus">+                   flex=&quot;1&quot;</span>
<a href="#l11.499"></a><span id="l11.499" class="difflineplus">+                   hyperlink=&quot;true&quot;</span>
<a href="#l11.500"></a><span id="l11.500" class="difflineplus">+                   onclick=&quot;updateReminder()&quot;/&gt;</span>
<a href="#l11.501"></a><span id="l11.501" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l11.502"></a><span id="l11.502" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l11.503"></a><span id="l11.503" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.504"></a><span id="l11.504" class="difflineplus">+</span>
<a href="#l11.505"></a><span id="l11.505" class="difflineplus">+      &lt;separator id=&quot;event-grid-tabbox-separator&quot;</span>
<a href="#l11.506"></a><span id="l11.506" class="difflineplus">+                 class=&quot;groove&quot;/&gt;</span>
<a href="#l11.507"></a><span id="l11.507" class="difflineplus">+</span>
<a href="#l11.508"></a><span id="l11.508" class="difflineplus">+      &lt;!-- Multi purpose tab box --&gt;</span>
<a href="#l11.509"></a><span id="l11.509" class="difflineplus">+      &lt;tabbox id=&quot;event-grid-tabbox&quot;</span>
<a href="#l11.510"></a><span id="l11.510" class="difflineplus">+              selectedIndex=&quot;0&quot;</span>
<a href="#l11.511"></a><span id="l11.511" class="difflineplus">+              flex=&quot;1&quot;&gt;</span>
<a href="#l11.512"></a><span id="l11.512" class="difflineplus">+        &lt;tabs id=&quot;event-grid-tabs&quot;&gt;</span>
<a href="#l11.513"></a><span id="l11.513" class="difflineplus">+          &lt;tab id=&quot;event-grid-tab-description&quot;</span>
<a href="#l11.514"></a><span id="l11.514" class="difflineplus">+               label=&quot;&amp;event.description.label;&quot;</span>
<a href="#l11.515"></a><span id="l11.515" class="difflineplus">+               accesskey=&quot;&amp;event.description.accesskey;&quot;/&gt;</span>
<a href="#l11.516"></a><span id="l11.516" class="difflineplus">+          &lt;tab id=&quot;event-grid-tab-attachments&quot;</span>
<a href="#l11.517"></a><span id="l11.517" class="difflineplus">+               label=&quot;&amp;event.attachments.label;&quot;</span>
<a href="#l11.518"></a><span id="l11.518" class="difflineplus">+                accesskey=&quot;&amp;event.attachments.accesskey;&quot;/&gt;</span>
<a href="#l11.519"></a><span id="l11.519" class="difflineplus">+          &lt;tab id=&quot;event-grid-tab-attendees&quot;</span>
<a href="#l11.520"></a><span id="l11.520" class="difflineplus">+               label=&quot;&amp;event.attendees.label;&quot;</span>
<a href="#l11.521"></a><span id="l11.521" class="difflineplus">+               accesskey=&quot;&amp;event.attendees.accesskey;&quot;</span>
<a href="#l11.522"></a><span id="l11.522" class="difflineplus">+               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l11.523"></a><span id="l11.523" class="difflineplus">+        &lt;/tabs&gt;</span>
<a href="#l11.524"></a><span id="l11.524" class="difflineplus">+        &lt;tabpanels id=&quot;event-grid-tabpanels&quot;</span>
<a href="#l11.525"></a><span id="l11.525" class="difflineplus">+                   flex=&quot;1&quot;&gt;</span>
<a href="#l11.526"></a><span id="l11.526" class="difflineplus">+          &lt;tabpanel id=&quot;event-grid-tabpanel-description&quot;&gt;</span>
<a href="#l11.527"></a><span id="l11.527" class="difflineplus">+            &lt;textbox id=&quot;item-description&quot;</span>
<a href="#l11.528"></a><span id="l11.528" class="difflineplus">+                     disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.529"></a><span id="l11.529" class="difflineplus">+                     flex=&quot;1&quot;</span>
<a href="#l11.530"></a><span id="l11.530" class="difflineplus">+                     multiline=&quot;true&quot;</span>
<a href="#l11.531"></a><span id="l11.531" class="difflineplus">+                     rows=&quot;12&quot;/&gt;</span>
<a href="#l11.532"></a><span id="l11.532" class="difflineplus">+          &lt;/tabpanel&gt;</span>
<a href="#l11.533"></a><span id="l11.533" class="difflineplus">+          &lt;tabpanel id=&quot;event-grid-tabpanel-attachements&quot;&gt;</span>
<a href="#l11.534"></a><span id="l11.534" class="difflineplus">+            &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l11.535"></a><span id="l11.535" class="difflineplus">+              &lt;listbox id=&quot;attachment-link&quot;</span>
<a href="#l11.536"></a><span id="l11.536" class="difflineplus">+                       context=&quot;attachment-popup&quot;</span>
<a href="#l11.537"></a><span id="l11.537" class="difflineplus">+                       rows=&quot;3&quot;</span>
<a href="#l11.538"></a><span id="l11.538" class="difflineplus">+                       flex=&quot;1&quot;</span>
<a href="#l11.539"></a><span id="l11.539" class="difflineplus">+                       disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.540"></a><span id="l11.540" class="difflineplus">+                       onkeypress=&quot;attachmentLinkKeyPress(event)&quot;</span>
<a href="#l11.541"></a><span id="l11.541" class="difflineplus">+                       onclick=&quot;attachmentClick(event);&quot;</span>
<a href="#l11.542"></a><span id="l11.542" class="difflineplus">+                       ondblclick=&quot;attachmentDblClick(event);&quot;/&gt;</span>
<a href="#l11.543"></a><span id="l11.543" class="difflineplus">+            &lt;/vbox&gt;</span>
<a href="#l11.544"></a><span id="l11.544" class="difflineplus">+          &lt;/tabpanel&gt;</span>
<a href="#l11.545"></a><span id="l11.545" class="difflineplus">+          &lt;tabpanel id=&quot;event-grid-tabpanel-attendees&quot;</span>
<a href="#l11.546"></a><span id="l11.546" class="difflineplus">+                    collapsed=&quot;true&quot;&gt;</span>
<a href="#l11.547"></a><span id="l11.547" class="difflineplus">+            &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l11.548"></a><span id="l11.548" class="difflineplus">+              &lt;hbox id=&quot;item-organizer-row&quot;</span>
<a href="#l11.549"></a><span id="l11.549" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l11.550"></a><span id="l11.550" class="difflineplus">+                    align=&quot;top&quot;</span>
<a href="#l11.551"></a><span id="l11.551" class="difflineplus">+                    class=&quot;item-attendees-row&quot;&gt;</span>
<a href="#l11.552"></a><span id="l11.552" class="difflineplus">+                &lt;label value=&quot;&amp;read.only.organizer.label;&quot;/&gt;</span>
<a href="#l11.553"></a><span id="l11.553" class="difflineplus">+                &lt;hbox class=&quot;item-organizer-cell&quot;&gt;</span>
<a href="#l11.554"></a><span id="l11.554" class="difflineplus">+                  &lt;img class=&quot;itip-icon&quot;/&gt;</span>
<a href="#l11.555"></a><span id="l11.555" class="difflineplus">+                  &lt;label id=&quot;item-organizer&quot;</span>
<a href="#l11.556"></a><span id="l11.556" class="difflineplus">+                         class=&quot;item-attendees-cell-label&quot;</span>
<a href="#l11.557"></a><span id="l11.557" class="difflineplus">+                         crop=&quot;right&quot;/&gt;</span>
<a href="#l11.558"></a><span id="l11.558" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l11.559"></a><span id="l11.559" class="difflineplus">+              &lt;/hbox&gt;</span>
<a href="#l11.560"></a><span id="l11.560" class="difflineplus">+              &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l11.561"></a><span id="l11.561" class="difflineplus">+                &lt;vbox id=&quot;item-attendees-box&quot;</span>
<a href="#l11.562"></a><span id="l11.562" class="difflineplus">+                      dialog-type=&quot;event&quot;</span>
<a href="#l11.563"></a><span id="l11.563" class="difflineplus">+                      flex=&quot;1&quot;</span>
<a href="#l11.564"></a><span id="l11.564" class="difflineplus">+                      context=&quot;attendee-popup&quot;</span>
<a href="#l11.565"></a><span id="l11.565" class="difflineplus">+                      onclick=&quot;attendeeClick(event)&quot;</span>
<a href="#l11.566"></a><span id="l11.566" class="difflineplus">+                      disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.567"></a><span id="l11.567" class="difflineplus">+              &lt;/hbox&gt;</span>
<a href="#l11.568"></a><span id="l11.568" class="difflineplus">+              &lt;hbox id=&quot;notify-options&quot; align=&quot;center&quot;&gt;</span>
<a href="#l11.569"></a><span id="l11.569" class="difflineplus">+                &lt;checkbox id=&quot;notify-attendees-checkbox&quot;</span>
<a href="#l11.570"></a><span id="l11.570" class="difflineplus">+                          label=&quot;&amp;event.attendees.notify.label;&quot;</span>
<a href="#l11.571"></a><span id="l11.571" class="difflineplus">+                          accesskey=&quot;&amp;event.attendees.notify.accesskey;&quot;</span>
<a href="#l11.572"></a><span id="l11.572" class="difflineplus">+                          oncommand=&quot;changeUndiscloseCheckboxStatus();&quot;</span>
<a href="#l11.573"></a><span id="l11.573" class="difflineplus">+                          pack=&quot;start&quot;/&gt;</span>
<a href="#l11.574"></a><span id="l11.574" class="difflineplus">+                &lt;checkbox id=&quot;undisclose-attendees-checkbox&quot;</span>
<a href="#l11.575"></a><span id="l11.575" class="difflineplus">+                          label=&quot;&amp;event.attendees.notifyundisclosed.label;&quot;</span>
<a href="#l11.576"></a><span id="l11.576" class="difflineplus">+                          accesskey=&quot;&amp;event.attendees.notifyundisclosed.accesskey;&quot;</span>
<a href="#l11.577"></a><span id="l11.577" class="difflineplus">+                          tooltiptext=&quot;&amp;event.attendees.notifyundisclosed.tooltip;&quot;</span>
<a href="#l11.578"></a><span id="l11.578" class="difflineplus">+                          pack=&quot;start&quot;/&gt;</span>
<a href="#l11.579"></a><span id="l11.579" class="difflineplus">+              &lt;/hbox&gt;</span>
<a href="#l11.580"></a><span id="l11.580" class="difflineplus">+            &lt;/vbox&gt;</span>
<a href="#l11.581"></a><span id="l11.581" class="difflineplus">+          &lt;/tabpanel&gt;</span>
<a href="#l11.582"></a><span id="l11.582" class="difflineplus">+        &lt;/tabpanels&gt;</span>
<a href="#l11.583"></a><span id="l11.583" class="difflineplus">+      &lt;/tabbox&gt;</span>
<a href="#l11.584"></a><span id="l11.584" class="difflineplus">+</span>
<a href="#l11.585"></a><span id="l11.585" class="difflineplus">+      &lt;separator id=&quot;event-grid-link-separator&quot;</span>
<a href="#l11.586"></a><span id="l11.586" class="difflineplus">+                 class=&quot;groove&quot;</span>
<a href="#l11.587"></a><span id="l11.587" class="difflineplus">+                 hidden=&quot;true&quot;/&gt;</span>
<a href="#l11.588"></a><span id="l11.588" class="difflineplus">+      &lt;row id=&quot;event-grid-link-row&quot;</span>
<a href="#l11.589"></a><span id="l11.589" class="difflineplus">+           align=&quot;center&quot;</span>
<a href="#l11.590"></a><span id="l11.590" class="difflineplus">+           hidden=&quot;true&quot;&gt;</span>
<a href="#l11.591"></a><span id="l11.591" class="difflineplus">+        &lt;label value=&quot;&amp;event.url.label;&quot;</span>
<a href="#l11.592"></a><span id="l11.592" class="difflineplus">+               control=&quot;url-link&quot;/&gt;</span>
<a href="#l11.593"></a><span id="l11.593" class="difflineplus">+        &lt;label id=&quot;url-link&quot;</span>
<a href="#l11.594"></a><span id="l11.594" class="difflineplus">+               onclick=&quot;launchBrowser(this.getAttribute('href'), event)&quot;</span>
<a href="#l11.595"></a><span id="l11.595" class="difflineplus">+               oncommand=&quot;launchBrowser(this.getAttribute('href'), event)&quot;</span>
<a href="#l11.596"></a><span id="l11.596" class="difflineplus">+               class=&quot;text-link&quot;</span>
<a href="#l11.597"></a><span id="l11.597" class="difflineplus">+               crop=&quot;end&quot;/&gt;</span>
<a href="#l11.598"></a><span id="l11.598" class="difflineplus">+      &lt;/row&gt;</span>
<a href="#l11.599"></a><span id="l11.599" class="difflineplus">+    &lt;/rows&gt;</span>
<a href="#l11.600"></a><span id="l11.600" class="difflineplus">+  &lt;/grid&gt;</span>
<a href="#l11.601"></a><span id="l11.601" class="difflineplus">+</span>
<a href="#l11.602"></a><span id="l11.602" class="difflineplus">+</span>
<a href="#l11.603"></a><span id="l11.603" class="difflineplus">+  &lt;popupset id=&quot;event-dialog-popupset&quot;&gt;</span>
<a href="#l11.604"></a><span id="l11.604" class="difflineplus">+    &lt;menupopup id=&quot;attendee-popup&quot;&gt;</span>
<a href="#l11.605"></a><span id="l11.605" class="difflineplus">+      &lt;menuitem id=&quot;attendee-popup-invite-menuitem&quot;</span>
<a href="#l11.606"></a><span id="l11.606" class="difflineplus">+                label=&quot;&amp;event.invite.attendees.label;&quot;</span>
<a href="#l11.607"></a><span id="l11.607" class="difflineplus">+                accesskey=&quot;&amp;event.invite.attendees.accesskey;&quot;</span>
<a href="#l11.608"></a><span id="l11.608" class="difflineplus">+                command=&quot;cmd_attendees&quot;</span>
<a href="#l11.609"></a><span id="l11.609" class="difflineplus">+                disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l11.610"></a><span id="l11.610" class="difflineplus">+      &lt;menuitem id=&quot;attendee-popup-removeallattendees-menuitem&quot;</span>
<a href="#l11.611"></a><span id="l11.611" class="difflineplus">+                label=&quot;&amp;event.remove.attendees.label2;&quot;</span>
<a href="#l11.612"></a><span id="l11.612" class="difflineplus">+                accesskey=&quot;&amp;event.remove.attendees.accesskey;&quot;</span>
<a href="#l11.613"></a><span id="l11.613" class="difflineplus">+                oncommand=&quot;removeAllAttendees()&quot;</span>
<a href="#l11.614"></a><span id="l11.614" class="difflineplus">+                disable-on-readonly=&quot;true&quot;</span>
<a href="#l11.615"></a><span id="l11.615" class="difflineplus">+                crop=&quot;end&quot;/&gt;</span>
<a href="#l11.616"></a><span id="l11.616" class="difflineplus">+      &lt;menuitem id=&quot;attendee-popup-removeattendee-menuitem&quot;</span>
<a href="#l11.617"></a><span id="l11.617" class="difflineplus">+                label=&quot;&amp;event.remove.attendee.label;&quot;</span>
<a href="#l11.618"></a><span id="l11.618" class="difflineplus">+                accesskey=&quot;&amp;event.remove.attendee.accesskey;&quot;</span>
<a href="#l11.619"></a><span id="l11.619" class="difflineplus">+                oncommand=&quot;removeAttendee(event.target.attendee)&quot;</span>
<a href="#l11.620"></a><span id="l11.620" class="difflineplus">+                crop=&quot;end&quot;/&gt;</span>
<a href="#l11.621"></a><span id="l11.621" class="difflineplus">+      &lt;menuseparator id=&quot;attendee-popup-first-separator&quot;/&gt;</span>
<a href="#l11.622"></a><span id="l11.622" class="difflineplus">+      &lt;menuitem id=&quot;attendee-popup-sendemail-menuitem&quot;</span>
<a href="#l11.623"></a><span id="l11.623" class="difflineplus">+                label=&quot;&amp;event.email.attendees.label;&quot;</span>
<a href="#l11.624"></a><span id="l11.624" class="difflineplus">+                accesskey=&quot;&amp;event.email.attendees.accesskey;&quot;</span>
<a href="#l11.625"></a><span id="l11.625" class="difflineplus">+                command=&quot;cmd_email&quot;/&gt;</span>
<a href="#l11.626"></a><span id="l11.626" class="difflineplus">+      &lt;menuitem id=&quot;attendee-popup-sendtentativeemail-menuitem&quot;</span>
<a href="#l11.627"></a><span id="l11.627" class="difflineplus">+                label=&quot;&amp;event.email.tentative.attendees.label;&quot;</span>
<a href="#l11.628"></a><span id="l11.628" class="difflineplus">+                accesskey=&quot;&amp;event.email.tentative.attendees.accesskey;&quot;</span>
<a href="#l11.629"></a><span id="l11.629" class="difflineplus">+                command=&quot;cmd_email_undecided&quot;/&gt;</span>
<a href="#l11.630"></a><span id="l11.630" class="difflineplus">+      &lt;menuseparator id=&quot;attendee-popup-second-separator&quot;/&gt;</span>
<a href="#l11.631"></a><span id="l11.631" class="difflineplus">+      &lt;menuitem id=&quot;attendee-popup-emailattendee-menuitem&quot;</span>
<a href="#l11.632"></a><span id="l11.632" class="difflineplus">+                oncommand=&quot;sendMailToAttendees([event.target.attendee])&quot;</span>
<a href="#l11.633"></a><span id="l11.633" class="difflineplus">+                crop=&quot;end&quot;/&gt;</span>
<a href="#l11.634"></a><span id="l11.634" class="difflineplus">+    &lt;/menupopup&gt;</span>
<a href="#l11.635"></a><span id="l11.635" class="difflineplus">+    &lt;menupopup id=&quot;attachment-popup&quot;&gt;</span>
<a href="#l11.636"></a><span id="l11.636" class="difflineplus">+      &lt;menuitem id=&quot;attachment-popup-open&quot;</span>
<a href="#l11.637"></a><span id="l11.637" class="difflineplus">+                label=&quot;&amp;event.attachments.popup.open.label;&quot;</span>
<a href="#l11.638"></a><span id="l11.638" class="difflineplus">+                accesskey=&quot;&amp;event.attachments.popup.open.accesskey;&quot;</span>
<a href="#l11.639"></a><span id="l11.639" class="difflineplus">+                command=&quot;cmd_openAttachment&quot;/&gt;</span>
<a href="#l11.640"></a><span id="l11.640" class="difflineplus">+      &lt;menuitem id=&quot;attachment-popup-copy&quot;</span>
<a href="#l11.641"></a><span id="l11.641" class="difflineplus">+                label=&quot;&amp;calendar.copylink.label;&quot;</span>
<a href="#l11.642"></a><span id="l11.642" class="difflineplus">+                accesskey=&quot;&amp;calendar.copylink.accesskey;&quot;</span>
<a href="#l11.643"></a><span id="l11.643" class="difflineplus">+                command=&quot;cmd_copyAttachment&quot;/&gt;</span>
<a href="#l11.644"></a><span id="l11.644" class="difflineplus">+      &lt;menuitem id=&quot;attachment-popup-delete&quot;</span>
<a href="#l11.645"></a><span id="l11.645" class="difflineplus">+                label=&quot;&amp;event.attachments.popup.remove.label;&quot;</span>
<a href="#l11.646"></a><span id="l11.646" class="difflineplus">+                accesskey=&quot;&amp;event.attachments.popup.remove.accesskey;&quot;</span>
<a href="#l11.647"></a><span id="l11.647" class="difflineplus">+                command=&quot;cmd_deleteAttachment&quot;/&gt;</span>
<a href="#l11.648"></a><span id="l11.648" class="difflineplus">+      &lt;menuitem id=&quot;attachment-popup-deleteAll&quot;</span>
<a href="#l11.649"></a><span id="l11.649" class="difflineplus">+                label=&quot;&amp;event.attachments.popup.removeAll.label;&quot;</span>
<a href="#l11.650"></a><span id="l11.650" class="difflineplus">+                accesskey=&quot;&amp;event.attachments.popup.removeAll.accesskey;&quot;</span>
<a href="#l11.651"></a><span id="l11.651" class="difflineplus">+                command=&quot;cmd_deleteAllAttachments&quot;/&gt;</span>
<a href="#l11.652"></a><span id="l11.652" class="difflineplus">+      &lt;menuseparator/&gt;</span>
<a href="#l11.653"></a><span id="l11.653" class="difflineplus">+      &lt;menuitem id=&quot;attachment-popup-attachPage&quot;</span>
<a href="#l11.654"></a><span id="l11.654" class="difflineplus">+                label=&quot;&amp;event.attachments.popup.attachPage.label;&quot;</span>
<a href="#l11.655"></a><span id="l11.655" class="difflineplus">+                accesskey=&quot;&amp;event.attachments.popup.attachPage.accesskey;&quot;</span>
<a href="#l11.656"></a><span id="l11.656" class="difflineplus">+                command=&quot;cmd_attach_url&quot;/&gt;</span>
<a href="#l11.657"></a><span id="l11.657" class="difflineplus">+    &lt;/menupopup&gt;</span>
<a href="#l11.658"></a><span id="l11.658" class="difflineplus">+    &lt;menupopup id=&quot;timezone-popup&quot;</span>
<a href="#l11.659"></a><span id="l11.659" class="difflineplus">+               position=&quot;after_start&quot;</span>
<a href="#l11.660"></a><span id="l11.660" class="difflineplus">+               oncommand=&quot;chooseRecentTimezone(event)&quot;&gt;</span>
<a href="#l11.661"></a><span id="l11.661" class="difflineplus">+      &lt;menuitem id=&quot;timezone-popup-defaulttz&quot;/&gt;</span>
<a href="#l11.662"></a><span id="l11.662" class="difflineplus">+      &lt;menuseparator id=&quot;timezone-popup-menuseparator&quot;/&gt;</span>
<a href="#l11.663"></a><span id="l11.663" class="difflineplus">+      &lt;menuitem id=&quot;timezone-custom-menuitem&quot;</span>
<a href="#l11.664"></a><span id="l11.664" class="difflineplus">+                label=&quot;&amp;event.timezone.custom.label;&quot;</span>
<a href="#l11.665"></a><span id="l11.665" class="difflineplus">+                value=&quot;custom&quot;</span>
<a href="#l11.666"></a><span id="l11.666" class="difflineplus">+                oncommand=&quot;this.parentNode.editTimezone()&quot;/&gt;</span>
<a href="#l11.667"></a><span id="l11.667" class="difflineplus">+    &lt;/menupopup&gt;</span>
<a href="#l11.668"></a><span id="l11.668" class="difflineplus">+  &lt;/popupset&gt;</span>
<a href="#l11.669"></a><span id="l11.669" class="difflineplus">+</span>
<a href="#l11.670"></a><span id="l11.670" class="difflineplus">+  &lt;!-- attendee box template --&gt;</span>
<a href="#l11.671"></a><span id="l11.671" class="difflineplus">+  &lt;vbox id=&quot;item-attendees-box-template&quot;</span>
<a href="#l11.672"></a><span id="l11.672" class="difflineplus">+        hidden=&quot;true&quot;&gt;</span>
<a href="#l11.673"></a><span id="l11.673" class="difflineplus">+    &lt;hbox flex=&quot;1&quot; class=&quot;item-attendees-row&quot; equalsize=&quot;always&quot; hidden=&quot;true&quot;&gt;</span>
<a href="#l11.674"></a><span id="l11.674" class="difflineplus">+      &lt;box class=&quot;item-attendees-cell&quot;</span>
<a href="#l11.675"></a><span id="l11.675" class="difflineplus">+           hidden=&quot;true&quot;</span>
<a href="#l11.676"></a><span id="l11.676" class="difflineplus">+           flex=&quot;1&quot;</span>
<a href="#l11.677"></a><span id="l11.677" class="difflineplus">+           context=&quot;attendee-popup&quot;</span>
<a href="#l11.678"></a><span id="l11.678" class="difflineplus">+           ondblclick=&quot;attendeeDblClick(event)&quot;</span>
<a href="#l11.679"></a><span id="l11.679" class="difflineplus">+           onclick=&quot;attendeeClick(event)&quot;&gt;</span>
<a href="#l11.680"></a><span id="l11.680" class="difflineplus">+        &lt;img class=&quot;itip-icon&quot;/&gt;</span>
<a href="#l11.681"></a><span id="l11.681" class="difflineplus">+        &lt;label class=&quot;item-attendees-cell-label&quot;</span>
<a href="#l11.682"></a><span id="l11.682" class="difflineplus">+               crop=&quot;end&quot;</span>
<a href="#l11.683"></a><span id="l11.683" class="difflineplus">+               flex=&quot;1&quot;/&gt;</span>
<a href="#l11.684"></a><span id="l11.684" class="difflineplus">+      &lt;/box&gt;</span>
<a href="#l11.685"></a><span id="l11.685" class="difflineplus">+      &lt;box hidden=&quot;true&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l11.686"></a><span id="l11.686" class="difflineplus">+    &lt;/hbox&gt;</span>
<a href="#l11.687"></a><span id="l11.687" class="difflineplus">+  &lt;/vbox&gt;</span>
<a href="#l11.688"></a><span id="l11.688" class="difflineplus">+&lt;/window&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,851 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+// XXX Need to determine which of these we really need here.</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+Components.utils.import(&quot;resource://calendar/modules/calRecurrenceUtils.jsm&quot;);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Preferences.jsm&quot;);</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+try {</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+    Components.utils.import(&quot;resource:///modules/cloudFileAccounts.js&quot;);</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+} catch (e) {</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+    // This will fail on Seamonkey, but thats ok since the pref for cloudfiles</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+    // is false, which means the UI will not be shown</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+}</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineplus">+</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+// gTabmail is null if we are in a dialog window and not in a tab.</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+var gTabmail = document.getElementById(&quot;tabmail&quot;) || null;</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+if (!gTabmail) {</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+    // In a dialog window the following menu item functions need to be</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineplus">+    // defined.  In a tab they are defined elsewhere.  To prevent errors in</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+    // the log they are defined here (before the onLoad function is called).</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+    /**</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineplus">+     * Update menu items that rely on focus.</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+     */</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+    window.goUpdateGlobalEditMenuItems = () =&gt; {</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+        goUpdateCommand(&quot;cmd_undo&quot;);</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineplus">+        goUpdateCommand(&quot;cmd_redo&quot;);</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+        goUpdateCommand(&quot;cmd_cut&quot;);</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+        goUpdateCommand(&quot;cmd_copy&quot;);</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineplus">+        goUpdateCommand(&quot;cmd_paste&quot;);</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineplus">+        goUpdateCommand(&quot;cmd_selectAll&quot;);</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+    }</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineplus">+    /**</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+     * Update menu items that rely on the current selection.</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineplus">+     */</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineplus">+    window.goUpdateSelectEditMenuItems = () =&gt; {</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineplus">+        goUpdateCommand(&quot;cmd_cut&quot;);</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineplus">+        goUpdateCommand(&quot;cmd_copy&quot;);</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineplus">+        goUpdateCommand(&quot;cmd_delete&quot;);</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+        goUpdateCommand(&quot;cmd_selectAll&quot;);</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+    }</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineplus">+    /**</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineplus">+     * Update menu items that relate to undo/redo.</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineplus">+     */</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineplus">+    window.goUpdateUndoEditMenuItems = () =&gt; {</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineplus">+        goUpdateCommand(&quot;cmd_undo&quot;);</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineplus">+        goUpdateCommand(&quot;cmd_redo&quot;);</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineplus">+    }</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineplus">+    /**</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineplus">+     * Update menu items that depend on clipboard contents.</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineplus">+     */</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineplus">+    window.goUpdatePasteMenuItems = () =&gt; {</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineplus">+        goUpdateCommand(&quot;cmd_paste&quot;);</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineplus">+    }</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineplus">+}</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineplus">+</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineplus">+// Stores the ids of the iframes of currently open event/task tabs, used</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineplus">+// when window is closed to prompt for saving changes.</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineplus">+var gItemTabIds = [];</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineplus">+var gItemTabIdsCopy;</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineplus">+</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineplus">+// gConfig is used when switching tabs to restore the state of</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineplus">+// toolbar, statusbar, and menubar for the current tab.</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineplus">+var gConfig = {</span>
<a href="#l12.75"></a><span id="l12.75" class="difflineplus">+    privacy: null,</span>
<a href="#l12.76"></a><span id="l12.76" class="difflineplus">+    hasPrivacy: null,</span>
<a href="#l12.77"></a><span id="l12.77" class="difflineplus">+    calendarType: null,</span>
<a href="#l12.78"></a><span id="l12.78" class="difflineplus">+    privacyValues: null,</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineplus">+    priority: null,</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineplus">+    hasPriority: null,</span>
<a href="#l12.81"></a><span id="l12.81" class="difflineplus">+    status: null,</span>
<a href="#l12.82"></a><span id="l12.82" class="difflineplus">+    showTimeAs: null,</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineplus">+    // whether cmd_attendees is enabled or disabled</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineplus">+    attendeesCommand: null,</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineplus">+    attachUrlCommand: null,</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineplus">+    timezonesEnabled: false</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineplus">+}</span>
<a href="#l12.88"></a><span id="l12.88" class="difflineplus">+</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineplus">+/**</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineplus">+ * Receive an asynchronous message from the iframe.</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineplus">+ *</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineplus">+ * @param {MessageEvent} aEvent  Contains the message being received</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineplus">+ */</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineplus">+function receiveMessage(aEvent) {</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineplus">+    if (aEvent.origin !== &quot;chrome://lightning&quot;) {</span>
<a href="#l12.96"></a><span id="l12.96" class="difflineplus">+        return;</span>
<a href="#l12.97"></a><span id="l12.97" class="difflineplus">+    }</span>
<a href="#l12.98"></a><span id="l12.98" class="difflineplus">+    switch (aEvent.data.command) {</span>
<a href="#l12.99"></a><span id="l12.99" class="difflineplus">+        case &quot;onLoad&quot;:</span>
<a href="#l12.100"></a><span id="l12.100" class="difflineplus">+            onLoad();</span>
<a href="#l12.101"></a><span id="l12.101" class="difflineplus">+            break;</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineplus">+        case &quot;initializeItemMenu&quot;:</span>
<a href="#l12.103"></a><span id="l12.103" class="difflineplus">+            initializeItemMenu(aEvent.data.label, aEvent.data.accessKey);</span>
<a href="#l12.104"></a><span id="l12.104" class="difflineplus">+            break;</span>
<a href="#l12.105"></a><span id="l12.105" class="difflineplus">+        case &quot;disableLinkCommand&quot;:</span>
<a href="#l12.106"></a><span id="l12.106" class="difflineplus">+            let linkCommand = document.getElementById(&quot;cmd_toggle_link&quot;);</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineplus">+            if (linkCommand) {</span>
<a href="#l12.108"></a><span id="l12.108" class="difflineplus">+                setElementValue(linkCommand, &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l12.109"></a><span id="l12.109" class="difflineplus">+            }</span>
<a href="#l12.110"></a><span id="l12.110" class="difflineplus">+            break;</span>
<a href="#l12.111"></a><span id="l12.111" class="difflineplus">+        case &quot;cancelDialog&quot;:</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineplus">+            document.documentElement.cancelDialog();</span>
<a href="#l12.113"></a><span id="l12.113" class="difflineplus">+            break;</span>
<a href="#l12.114"></a><span id="l12.114" class="difflineplus">+        case &quot;closeWindowOrTab&quot;:</span>
<a href="#l12.115"></a><span id="l12.115" class="difflineplus">+            closeWindowOrTab(aEvent.data.iframeId);</span>
<a href="#l12.116"></a><span id="l12.116" class="difflineplus">+            break;</span>
<a href="#l12.117"></a><span id="l12.117" class="difflineplus">+        case &quot;showCmdStatusNone&quot;:</span>
<a href="#l12.118"></a><span id="l12.118" class="difflineplus">+            document.getElementById(&quot;cmd_status_none&quot;).removeAttribute(&quot;hidden&quot;);</span>
<a href="#l12.119"></a><span id="l12.119" class="difflineplus">+            break;</span>
<a href="#l12.120"></a><span id="l12.120" class="difflineplus">+        case &quot;updateTitle&quot;:</span>
<a href="#l12.121"></a><span id="l12.121" class="difflineplus">+            updateTitle(aEvent.data.argument);</span>
<a href="#l12.122"></a><span id="l12.122" class="difflineplus">+            break;</span>
<a href="#l12.123"></a><span id="l12.123" class="difflineplus">+        case &quot;updatePanelState&quot;:</span>
<a href="#l12.124"></a><span id="l12.124" class="difflineplus">+            updateItemTabState(aEvent.data.argument);</span>
<a href="#l12.125"></a><span id="l12.125" class="difflineplus">+            Object.assign(gConfig, aEvent.data.argument);</span>
<a href="#l12.126"></a><span id="l12.126" class="difflineplus">+            break;</span>
<a href="#l12.127"></a><span id="l12.127" class="difflineplus">+        case &quot;enableAcceptCommand&quot;:</span>
<a href="#l12.128"></a><span id="l12.128" class="difflineplus">+            enableAcceptCommand(aEvent.data.argument);</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineplus">+            break;</span>
<a href="#l12.130"></a><span id="l12.130" class="difflineplus">+        case &quot;replyToClosingWindowWithTabs&quot;:</span>
<a href="#l12.131"></a><span id="l12.131" class="difflineplus">+            handleWindowClose(aEvent.data.response);</span>
<a href="#l12.132"></a><span id="l12.132" class="difflineplus">+            break;</span>
<a href="#l12.133"></a><span id="l12.133" class="difflineplus">+        case &quot;removeDisableAndCollapseOnReadonly&quot;:</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineplus">+            removeDisableAndCollapseOnReadonly();</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineplus">+            break;</span>
<a href="#l12.136"></a><span id="l12.136" class="difflineplus">+    }</span>
<a href="#l12.137"></a><span id="l12.137" class="difflineplus">+}</span>
<a href="#l12.138"></a><span id="l12.138" class="difflineplus">+</span>
<a href="#l12.139"></a><span id="l12.139" class="difflineplus">+window.addEventListener(&quot;message&quot;, receiveMessage, false);</span>
<a href="#l12.140"></a><span id="l12.140" class="difflineplus">+</span>
<a href="#l12.141"></a><span id="l12.141" class="difflineplus">+/**</span>
<a href="#l12.142"></a><span id="l12.142" class="difflineplus">+ * Send an asynchronous message to an iframe.  Additional properties of</span>
<a href="#l12.143"></a><span id="l12.143" class="difflineplus">+ * aMessage are generally arguments that will be passed to the function</span>
<a href="#l12.144"></a><span id="l12.144" class="difflineplus">+ * named in aMessage.command.  If aIframeId is omitted, the message will</span>
<a href="#l12.145"></a><span id="l12.145" class="difflineplus">+ * be sent to the iframe of the current tab.</span>
<a href="#l12.146"></a><span id="l12.146" class="difflineplus">+ *</span>
<a href="#l12.147"></a><span id="l12.147" class="difflineplus">+ * @param {Object} aMessage          Contains the message being sent</span>
<a href="#l12.148"></a><span id="l12.148" class="difflineplus">+ * @param {string} aMessage.command  The name of a function to call</span>
<a href="#l12.149"></a><span id="l12.149" class="difflineplus">+ * @param {string} aIframeId         (optional) id of an iframe to send the message to</span>
<a href="#l12.150"></a><span id="l12.150" class="difflineplus">+ */</span>
<a href="#l12.151"></a><span id="l12.151" class="difflineplus">+function sendMessage(aMessage, aIframeId) {</span>
<a href="#l12.152"></a><span id="l12.152" class="difflineplus">+    let iframeId;</span>
<a href="#l12.153"></a><span id="l12.153" class="difflineplus">+    if (gTabmail) {</span>
<a href="#l12.154"></a><span id="l12.154" class="difflineplus">+        if (aIframeId) {</span>
<a href="#l12.155"></a><span id="l12.155" class="difflineplus">+            iframeId = aIframeId;</span>
<a href="#l12.156"></a><span id="l12.156" class="difflineplus">+        } else {</span>
<a href="#l12.157"></a><span id="l12.157" class="difflineplus">+            iframeId = gTabmail.currentTabInfo.iframe.id;</span>
<a href="#l12.158"></a><span id="l12.158" class="difflineplus">+        }</span>
<a href="#l12.159"></a><span id="l12.159" class="difflineplus">+    } else {</span>
<a href="#l12.160"></a><span id="l12.160" class="difflineplus">+        iframeId = &quot;lightning-item-panel-iframe&quot;;</span>
<a href="#l12.161"></a><span id="l12.161" class="difflineplus">+    }</span>
<a href="#l12.162"></a><span id="l12.162" class="difflineplus">+    let iframe = document.getElementById(iframeId);</span>
<a href="#l12.163"></a><span id="l12.163" class="difflineplus">+    iframe.contentWindow.postMessage(aMessage, &quot;*&quot;);</span>
<a href="#l12.164"></a><span id="l12.164" class="difflineplus">+}</span>
<a href="#l12.165"></a><span id="l12.165" class="difflineplus">+</span>
<a href="#l12.166"></a><span id="l12.166" class="difflineplus">+/**</span>
<a href="#l12.167"></a><span id="l12.167" class="difflineplus">+ * When the user closes the window, this function handles prompting them</span>
<a href="#l12.168"></a><span id="l12.168" class="difflineplus">+ * to save any unsaved changes for any open item tabs, before closing the</span>
<a href="#l12.169"></a><span id="l12.169" class="difflineplus">+ * window, or not if 'cancel' was clicked.  Requires sending and receiving</span>
<a href="#l12.170"></a><span id="l12.170" class="difflineplus">+ * async messages from the iframes of all open item tabs.</span>
<a href="#l12.171"></a><span id="l12.171" class="difflineplus">+ *</span>
<a href="#l12.172"></a><span id="l12.172" class="difflineplus">+ * @param {boolean} aResponse  The response from the tab's iframe</span>
<a href="#l12.173"></a><span id="l12.173" class="difflineplus">+ */</span>
<a href="#l12.174"></a><span id="l12.174" class="difflineplus">+function handleWindowClose(aResponse) {</span>
<a href="#l12.175"></a><span id="l12.175" class="difflineplus">+    if (!aResponse) {</span>
<a href="#l12.176"></a><span id="l12.176" class="difflineplus">+        // Cancel was clicked, just leave the window open. We're done.</span>
<a href="#l12.177"></a><span id="l12.177" class="difflineplus">+        return;</span>
<a href="#l12.178"></a><span id="l12.178" class="difflineplus">+    } else if (gItemTabIdsCopy.length &gt; 0) {</span>
<a href="#l12.179"></a><span id="l12.179" class="difflineplus">+        // There are more unsaved changes in tabs to prompt the user about.</span>
<a href="#l12.180"></a><span id="l12.180" class="difflineplus">+        let nextId = gItemTabIdsCopy.shift();</span>
<a href="#l12.181"></a><span id="l12.181" class="difflineplus">+        sendMessage({ command: &quot;closingWindowWithTabs&quot;, id: nextId }, nextId);</span>
<a href="#l12.182"></a><span id="l12.182" class="difflineplus">+    } else {</span>
<a href="#l12.183"></a><span id="l12.183" class="difflineplus">+        // Close the window, there are no more unsaved changes in tabs.</span>
<a href="#l12.184"></a><span id="l12.184" class="difflineplus">+        window.removeEventListener(&quot;close&quot;, windowCloseListener, false);</span>
<a href="#l12.185"></a><span id="l12.185" class="difflineplus">+        window.close();</span>
<a href="#l12.186"></a><span id="l12.186" class="difflineplus">+    }</span>
<a href="#l12.187"></a><span id="l12.187" class="difflineplus">+}</span>
<a href="#l12.188"></a><span id="l12.188" class="difflineplus">+</span>
<a href="#l12.189"></a><span id="l12.189" class="difflineplus">+/**</span>
<a href="#l12.190"></a><span id="l12.190" class="difflineplus">+ * Listener function for window close.  We prevent the window from</span>
<a href="#l12.191"></a><span id="l12.191" class="difflineplus">+ * closing, then for each open tab we prompt the user to save any</span>
<a href="#l12.192"></a><span id="l12.192" class="difflineplus">+ * unsaved changes with handleWindowClose.</span>
<a href="#l12.193"></a><span id="l12.193" class="difflineplus">+ *</span>
<a href="#l12.194"></a><span id="l12.194" class="difflineplus">+ * @param {Object} aEvent  The window close event</span>
<a href="#l12.195"></a><span id="l12.195" class="difflineplus">+ */</span>
<a href="#l12.196"></a><span id="l12.196" class="difflineplus">+function windowCloseListener(aEvent) {</span>
<a href="#l12.197"></a><span id="l12.197" class="difflineplus">+    aEvent.preventDefault();</span>
<a href="#l12.198"></a><span id="l12.198" class="difflineplus">+    gItemTabIdsCopy = gItemTabIds.slice();</span>
<a href="#l12.199"></a><span id="l12.199" class="difflineplus">+    handleWindowClose(true);</span>
<a href="#l12.200"></a><span id="l12.200" class="difflineplus">+}</span>
<a href="#l12.201"></a><span id="l12.201" class="difflineplus">+</span>
<a href="#l12.202"></a><span id="l12.202" class="difflineplus">+/**</span>
<a href="#l12.203"></a><span id="l12.203" class="difflineplus">+ * Load handler for the outer parent context that contains the iframe.</span>
<a href="#l12.204"></a><span id="l12.204" class="difflineplus">+ */</span>
<a href="#l12.205"></a><span id="l12.205" class="difflineplus">+function onLoad() {</span>
<a href="#l12.206"></a><span id="l12.206" class="difflineplus">+    gConfig.timezonesEnabled = getTimezoneCommandState();</span>
<a href="#l12.207"></a><span id="l12.207" class="difflineplus">+</span>
<a href="#l12.208"></a><span id="l12.208" class="difflineplus">+    if (!gTabmail) {</span>
<a href="#l12.209"></a><span id="l12.209" class="difflineplus">+        gTabmail = document.getElementById(&quot;tabmail&quot;) || null;</span>
<a href="#l12.210"></a><span id="l12.210" class="difflineplus">+    }</span>
<a href="#l12.211"></a><span id="l12.211" class="difflineplus">+    if (gTabmail) {</span>
<a href="#l12.212"></a><span id="l12.212" class="difflineplus">+        // tab case</span>
<a href="#l12.213"></a><span id="l12.213" class="difflineplus">+        // Add a listener to detect close events, prompt user about saving changes.</span>
<a href="#l12.214"></a><span id="l12.214" class="difflineplus">+        window.addEventListener(&quot;close&quot;, windowCloseListener, false);</span>
<a href="#l12.215"></a><span id="l12.215" class="difflineplus">+    } else {</span>
<a href="#l12.216"></a><span id="l12.216" class="difflineplus">+        // window case</span>
<a href="#l12.217"></a><span id="l12.217" class="difflineplus">+        // hide the ok and cancel dialog buttons</span>
<a href="#l12.218"></a><span id="l12.218" class="difflineplus">+        document.documentElement.getButton(&quot;accept&quot;)</span>
<a href="#l12.219"></a><span id="l12.219" class="difflineplus">+                .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.220"></a><span id="l12.220" class="difflineplus">+        document.documentElement.getButton(&quot;cancel&quot;)</span>
<a href="#l12.221"></a><span id="l12.221" class="difflineplus">+                .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.222"></a><span id="l12.222" class="difflineplus">+        document.documentElement.getButton(&quot;cancel&quot;)</span>
<a href="#l12.223"></a><span id="l12.223" class="difflineplus">+                .parentNode.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.224"></a><span id="l12.224" class="difflineplus">+</span>
<a href="#l12.225"></a><span id="l12.225" class="difflineplus">+        // set the dialog-id for task vs event CSS selection, etc.</span>
<a href="#l12.226"></a><span id="l12.226" class="difflineplus">+        if (!cal.isEvent(window.arguments[0].calendarEvent)) {</span>
<a href="#l12.227"></a><span id="l12.227" class="difflineplus">+            setDialogId(document.documentElement, &quot;calendar-task-dialog&quot;);</span>
<a href="#l12.228"></a><span id="l12.228" class="difflineplus">+        }</span>
<a href="#l12.229"></a><span id="l12.229" class="difflineplus">+    }</span>
<a href="#l12.230"></a><span id="l12.230" class="difflineplus">+}</span>
<a href="#l12.231"></a><span id="l12.231" class="difflineplus">+</span>
<a href="#l12.232"></a><span id="l12.232" class="difflineplus">+/**</span>
<a href="#l12.233"></a><span id="l12.233" class="difflineplus">+ * Updates the UI.  Called when a user makes a change and when an</span>
<a href="#l12.234"></a><span id="l12.234" class="difflineplus">+ * event/task tab is shown.  When a tab is shown aArg contains the gConfig</span>
<a href="#l12.235"></a><span id="l12.235" class="difflineplus">+ * data for that event/task.  We pass the full tab state object to the</span>
<a href="#l12.236"></a><span id="l12.236" class="difflineplus">+ * update functions and they just use the properties they need from it.</span>
<a href="#l12.237"></a><span id="l12.237" class="difflineplus">+ *</span>
<a href="#l12.238"></a><span id="l12.238" class="difflineplus">+ * @param {Object} aArg  Its properties hold data about the event/task</span>
<a href="#l12.239"></a><span id="l12.239" class="difflineplus">+ */</span>
<a href="#l12.240"></a><span id="l12.240" class="difflineplus">+function updateItemTabState(aArg) {</span>
<a href="#l12.241"></a><span id="l12.241" class="difflineplus">+    const lookup = {</span>
<a href="#l12.242"></a><span id="l12.242" class="difflineplus">+        privacy: updatePrivacy,</span>
<a href="#l12.243"></a><span id="l12.243" class="difflineplus">+        priority: updatePriority,</span>
<a href="#l12.244"></a><span id="l12.244" class="difflineplus">+        status: updateStatus,</span>
<a href="#l12.245"></a><span id="l12.245" class="difflineplus">+        showTimeAs: updateShowTimeAs,</span>
<a href="#l12.246"></a><span id="l12.246" class="difflineplus">+        attendeesCommand: updateAttendeesCommand,</span>
<a href="#l12.247"></a><span id="l12.247" class="difflineplus">+        attachUrlCommand: updateAttachment,</span>
<a href="#l12.248"></a><span id="l12.248" class="difflineplus">+        timezonesEnabled: updateTimezoneCommand</span>
<a href="#l12.249"></a><span id="l12.249" class="difflineplus">+    };</span>
<a href="#l12.250"></a><span id="l12.250" class="difflineplus">+    for (let key of Object.keys(aArg)) {</span>
<a href="#l12.251"></a><span id="l12.251" class="difflineplus">+        if (lookup[key]) {</span>
<a href="#l12.252"></a><span id="l12.252" class="difflineplus">+            lookup[key](aArg);</span>
<a href="#l12.253"></a><span id="l12.253" class="difflineplus">+        }</span>
<a href="#l12.254"></a><span id="l12.254" class="difflineplus">+    }</span>
<a href="#l12.255"></a><span id="l12.255" class="difflineplus">+}</span>
<a href="#l12.256"></a><span id="l12.256" class="difflineplus">+</span>
<a href="#l12.257"></a><span id="l12.257" class="difflineplus">+/**</span>
<a href="#l12.258"></a><span id="l12.258" class="difflineplus">+ * When in a window, set Item-Menu label to Event or Task.</span>
<a href="#l12.259"></a><span id="l12.259" class="difflineplus">+ *</span>
<a href="#l12.260"></a><span id="l12.260" class="difflineplus">+ * @param {string} aLabel      The new name for the menu</span>
<a href="#l12.261"></a><span id="l12.261" class="difflineplus">+ * @param {string} aAccessKey  The access key for the menu</span>
<a href="#l12.262"></a><span id="l12.262" class="difflineplus">+ */</span>
<a href="#l12.263"></a><span id="l12.263" class="difflineplus">+function initializeItemMenu (aLabel, aAccessKey) {</span>
<a href="#l12.264"></a><span id="l12.264" class="difflineplus">+    let menuItem = document.getElementById(&quot;item-menu&quot;);</span>
<a href="#l12.265"></a><span id="l12.265" class="difflineplus">+    menuItem.setAttribute(&quot;label&quot;, aLabel);</span>
<a href="#l12.266"></a><span id="l12.266" class="difflineplus">+    menuItem.setAttribute(&quot;accesskey&quot;, aAccessKey);</span>
<a href="#l12.267"></a><span id="l12.267" class="difflineplus">+}</span>
<a href="#l12.268"></a><span id="l12.268" class="difflineplus">+</span>
<a href="#l12.269"></a><span id="l12.269" class="difflineplus">+/**</span>
<a href="#l12.270"></a><span id="l12.270" class="difflineplus">+ * Handler for when dialog is accepted.</span>
<a href="#l12.271"></a><span id="l12.271" class="difflineplus">+ */</span>
<a href="#l12.272"></a><span id="l12.272" class="difflineplus">+function onAccept() {</span>
<a href="#l12.273"></a><span id="l12.273" class="difflineplus">+    sendMessage({ command: &quot;onAccept&quot; });</span>
<a href="#l12.274"></a><span id="l12.274" class="difflineplus">+    return false;</span>
<a href="#l12.275"></a><span id="l12.275" class="difflineplus">+}</span>
<a href="#l12.276"></a><span id="l12.276" class="difflineplus">+</span>
<a href="#l12.277"></a><span id="l12.277" class="difflineplus">+/**</span>
<a href="#l12.278"></a><span id="l12.278" class="difflineplus">+ * Handler for when dialog is canceled.</span>
<a href="#l12.279"></a><span id="l12.279" class="difflineplus">+ *</span>
<a href="#l12.280"></a><span id="l12.280" class="difflineplus">+ * @param {string} aIframeId  The id of the iframe</span>
<a href="#l12.281"></a><span id="l12.281" class="difflineplus">+ */</span>
<a href="#l12.282"></a><span id="l12.282" class="difflineplus">+function onCancel(aIframeId) {</span>
<a href="#l12.283"></a><span id="l12.283" class="difflineplus">+    sendMessage({ command: &quot;onCancel&quot;, iframeId: aIframeId }, aIframeId);</span>
<a href="#l12.284"></a><span id="l12.284" class="difflineplus">+    // We return false to prevent closing of a window until we</span>
<a href="#l12.285"></a><span id="l12.285" class="difflineplus">+    // can ask the user about saving any unsaved changes.</span>
<a href="#l12.286"></a><span id="l12.286" class="difflineplus">+    return false;</span>
<a href="#l12.287"></a><span id="l12.287" class="difflineplus">+}</span>
<a href="#l12.288"></a><span id="l12.288" class="difflineplus">+</span>
<a href="#l12.289"></a><span id="l12.289" class="difflineplus">+/**</span>
<a href="#l12.290"></a><span id="l12.290" class="difflineplus">+ * Closes tab or window. Called after prompting to save any unsaved changes.</span>
<a href="#l12.291"></a><span id="l12.291" class="difflineplus">+ *</span>
<a href="#l12.292"></a><span id="l12.292" class="difflineplus">+ * @param {string} aIframeId  The id of the iframe</span>
<a href="#l12.293"></a><span id="l12.293" class="difflineplus">+ */</span>
<a href="#l12.294"></a><span id="l12.294" class="difflineplus">+function closeWindowOrTab(iframeId) {</span>
<a href="#l12.295"></a><span id="l12.295" class="difflineplus">+    if (gTabmail) {</span>
<a href="#l12.296"></a><span id="l12.296" class="difflineplus">+        if (iframeId) {</span>
<a href="#l12.297"></a><span id="l12.297" class="difflineplus">+            // Find the tab associated with this iframeId, and close it.</span>
<a href="#l12.298"></a><span id="l12.298" class="difflineplus">+            let myTabInfo = gTabmail.tabInfo.filter((x) =&gt; &quot;iframe&quot; in x &amp;&amp; x.iframe.id == iframeId)[0];</span>
<a href="#l12.299"></a><span id="l12.299" class="difflineplus">+            myTabInfo.allowTabClose = true;</span>
<a href="#l12.300"></a><span id="l12.300" class="difflineplus">+            gTabmail.closeTab(myTabInfo);</span>
<a href="#l12.301"></a><span id="l12.301" class="difflineplus">+        } else {</span>
<a href="#l12.302"></a><span id="l12.302" class="difflineplus">+            gTabmail.currentTabInfo.allowTabClose = true;</span>
<a href="#l12.303"></a><span id="l12.303" class="difflineplus">+            gTabmail.removeCurrentTab();</span>
<a href="#l12.304"></a><span id="l12.304" class="difflineplus">+        }</span>
<a href="#l12.305"></a><span id="l12.305" class="difflineplus">+    } else {</span>
<a href="#l12.306"></a><span id="l12.306" class="difflineplus">+        window.close();</span>
<a href="#l12.307"></a><span id="l12.307" class="difflineplus">+    }</span>
<a href="#l12.308"></a><span id="l12.308" class="difflineplus">+}</span>
<a href="#l12.309"></a><span id="l12.309" class="difflineplus">+</span>
<a href="#l12.310"></a><span id="l12.310" class="difflineplus">+/**</span>
<a href="#l12.311"></a><span id="l12.311" class="difflineplus">+ * Handler for saving the event or task.</span>
<a href="#l12.312"></a><span id="l12.312" class="difflineplus">+ *</span>
<a href="#l12.313"></a><span id="l12.313" class="difflineplus">+ * @param {boolean} aIsClosing  Is the tab or window closing</span>
<a href="#l12.314"></a><span id="l12.314" class="difflineplus">+ */</span>
<a href="#l12.315"></a><span id="l12.315" class="difflineplus">+function onCommandSave(aIsClosing) {</span>
<a href="#l12.316"></a><span id="l12.316" class="difflineplus">+    sendMessage({ command:&quot;onCommandSave&quot;, isClosing: aIsClosing });</span>
<a href="#l12.317"></a><span id="l12.317" class="difflineplus">+}</span>
<a href="#l12.318"></a><span id="l12.318" class="difflineplus">+</span>
<a href="#l12.319"></a><span id="l12.319" class="difflineplus">+/**</span>
<a href="#l12.320"></a><span id="l12.320" class="difflineplus">+ * Handler for deleting the event or task.</span>
<a href="#l12.321"></a><span id="l12.321" class="difflineplus">+ */</span>
<a href="#l12.322"></a><span id="l12.322" class="difflineplus">+function onCommandDeleteItem() {</span>
<a href="#l12.323"></a><span id="l12.323" class="difflineplus">+    sendMessage({ command:&quot;onCommandDeleteItem&quot; });</span>
<a href="#l12.324"></a><span id="l12.324" class="difflineplus">+}</span>
<a href="#l12.325"></a><span id="l12.325" class="difflineplus">+</span>
<a href="#l12.326"></a><span id="l12.326" class="difflineplus">+/**</span>
<a href="#l12.327"></a><span id="l12.327" class="difflineplus">+ * Update the title of the tab or window.</span>
<a href="#l12.328"></a><span id="l12.328" class="difflineplus">+ *</span>
<a href="#l12.329"></a><span id="l12.329" class="difflineplus">+ * @param {string} aNewTitle  The new title</span>
<a href="#l12.330"></a><span id="l12.330" class="difflineplus">+ */</span>
<a href="#l12.331"></a><span id="l12.331" class="difflineplus">+function updateTitle(aNewTitle) {</span>
<a href="#l12.332"></a><span id="l12.332" class="difflineplus">+    if (gTabmail) {</span>
<a href="#l12.333"></a><span id="l12.333" class="difflineplus">+        gTabmail.currentTabInfo.title = aNewTitle;</span>
<a href="#l12.334"></a><span id="l12.334" class="difflineplus">+        gTabmail.setTabTitle(gTabmail.currentTabInfo);</span>
<a href="#l12.335"></a><span id="l12.335" class="difflineplus">+    } else {</span>
<a href="#l12.336"></a><span id="l12.336" class="difflineplus">+        document.title = aNewTitle;</span>
<a href="#l12.337"></a><span id="l12.337" class="difflineplus">+    }</span>
<a href="#l12.338"></a><span id="l12.338" class="difflineplus">+}</span>
<a href="#l12.339"></a><span id="l12.339" class="difflineplus">+</span>
<a href="#l12.340"></a><span id="l12.340" class="difflineplus">+/**</span>
<a href="#l12.341"></a><span id="l12.341" class="difflineplus">+ * Handler for edit attendees command.</span>
<a href="#l12.342"></a><span id="l12.342" class="difflineplus">+ */</span>
<a href="#l12.343"></a><span id="l12.343" class="difflineplus">+function editAttendees() {</span>
<a href="#l12.344"></a><span id="l12.344" class="difflineplus">+    sendMessage({ command: &quot;editAttendees&quot; });</span>
<a href="#l12.345"></a><span id="l12.345" class="difflineplus">+}</span>
<a href="#l12.346"></a><span id="l12.346" class="difflineplus">+</span>
<a href="#l12.347"></a><span id="l12.347" class="difflineplus">+/**</span>
<a href="#l12.348"></a><span id="l12.348" class="difflineplus">+ * Handler for rotate privacy command.</span>
<a href="#l12.349"></a><span id="l12.349" class="difflineplus">+ */</span>
<a href="#l12.350"></a><span id="l12.350" class="difflineplus">+function rotatePrivacy() {</span>
<a href="#l12.351"></a><span id="l12.351" class="difflineplus">+    sendMessage({ command: &quot;rotatePrivacy&quot; });</span>
<a href="#l12.352"></a><span id="l12.352" class="difflineplus">+}</span>
<a href="#l12.353"></a><span id="l12.353" class="difflineplus">+</span>
<a href="#l12.354"></a><span id="l12.354" class="difflineplus">+/**</span>
<a href="#l12.355"></a><span id="l12.355" class="difflineplus">+ * Sets the privacy of an item to the value specified by</span>
<a href="#l12.356"></a><span id="l12.356" class="difflineplus">+ * the attribute &quot;privacy&quot; of the UI-element aTarget.</span>
<a href="#l12.357"></a><span id="l12.357" class="difflineplus">+ * aEvent is used for the popup menu event-privacy-menupopup</span>
<a href="#l12.358"></a><span id="l12.358" class="difflineplus">+ * in the Privacy toolbar button.</span>
<a href="#l12.359"></a><span id="l12.359" class="difflineplus">+ *</span>
<a href="#l12.360"></a><span id="l12.360" class="difflineplus">+ * @param aTarget  The calling UI-element</span>
<a href="#l12.361"></a><span id="l12.361" class="difflineplus">+ * @param aEvent   The UI-element selection event</span>
<a href="#l12.362"></a><span id="l12.362" class="difflineplus">+ */</span>
<a href="#l12.363"></a><span id="l12.363" class="difflineplus">+function editPrivacy(aTarget, aEvent) {</span>
<a href="#l12.364"></a><span id="l12.364" class="difflineplus">+    if (aEvent) {</span>
<a href="#l12.365"></a><span id="l12.365" class="difflineplus">+        aEvent.stopPropagation();</span>
<a href="#l12.366"></a><span id="l12.366" class="difflineplus">+    }</span>
<a href="#l12.367"></a><span id="l12.367" class="difflineplus">+    sendMessage({</span>
<a href="#l12.368"></a><span id="l12.368" class="difflineplus">+        command: &quot;editPrivacy&quot;,</span>
<a href="#l12.369"></a><span id="l12.369" class="difflineplus">+        value: aTarget.getAttribute(&quot;privacy&quot;)</span>
<a href="#l12.370"></a><span id="l12.370" class="difflineplus">+    });</span>
<a href="#l12.371"></a><span id="l12.371" class="difflineplus">+}</span>
<a href="#l12.372"></a><span id="l12.372" class="difflineplus">+</span>
<a href="#l12.373"></a><span id="l12.373" class="difflineplus">+/**</span>
<a href="#l12.374"></a><span id="l12.374" class="difflineplus">+ * Updates the UI according to the privacy setting and the selected</span>
<a href="#l12.375"></a><span id="l12.375" class="difflineplus">+ * calendar. If the selected calendar does not support privacy or only</span>
<a href="#l12.376"></a><span id="l12.376" class="difflineplus">+ * certain values, these are removed from the UI. This function should</span>
<a href="#l12.377"></a><span id="l12.377" class="difflineplus">+ * be called any time that privacy setting is updated.</span>
<a href="#l12.378"></a><span id="l12.378" class="difflineplus">+ *</span>
<a href="#l12.379"></a><span id="l12.379" class="difflineplus">+ * @param {Object}    aArg                Contains privacy properties</span>
<a href="#l12.380"></a><span id="l12.380" class="difflineplus">+ * @param {string}    aArg.privacy        The new privacy value</span>
<a href="#l12.381"></a><span id="l12.381" class="difflineplus">+ * @param {boolean}   aArg.hasPrivacy     Whether privacy is supported</span>
<a href="#l12.382"></a><span id="l12.382" class="difflineplus">+ * @param {string}    aArg.calendarType   The type of calendar</span>
<a href="#l12.383"></a><span id="l12.383" class="difflineplus">+ * @param {string[]}  aArg.privacyValues  The possible privacy values</span>
<a href="#l12.384"></a><span id="l12.384" class="difflineplus">+ */</span>
<a href="#l12.385"></a><span id="l12.385" class="difflineplus">+function updatePrivacy(aArg) {</span>
<a href="#l12.386"></a><span id="l12.386" class="difflineplus">+    if (aArg.hasPrivacy) {</span>
<a href="#l12.387"></a><span id="l12.387" class="difflineplus">+        let numChilds;</span>
<a href="#l12.388"></a><span id="l12.388" class="difflineplus">+</span>
<a href="#l12.389"></a><span id="l12.389" class="difflineplus">+        // Update privacy capabilities (toolbar)</span>
<a href="#l12.390"></a><span id="l12.390" class="difflineplus">+        let menupopup = document.getElementById(&quot;event-privacy-menupopup&quot;);</span>
<a href="#l12.391"></a><span id="l12.391" class="difflineplus">+        if (menupopup) {</span>
<a href="#l12.392"></a><span id="l12.392" class="difflineplus">+            // Only update the toolbar if the button is actually there</span>
<a href="#l12.393"></a><span id="l12.393" class="difflineplus">+            for (let node of menupopup.childNodes) {</span>
<a href="#l12.394"></a><span id="l12.394" class="difflineplus">+                let currentProvider = node.getAttribute(&quot;provider&quot;);</span>
<a href="#l12.395"></a><span id="l12.395" class="difflineplus">+                if (node.hasAttribute(&quot;privacy&quot;)) {</span>
<a href="#l12.396"></a><span id="l12.396" class="difflineplus">+                    let currentPrivacyValue = node.getAttribute(&quot;privacy&quot;);</span>
<a href="#l12.397"></a><span id="l12.397" class="difflineplus">+                    // Collapsed state</span>
<a href="#l12.398"></a><span id="l12.398" class="difflineplus">+</span>
<a href="#l12.399"></a><span id="l12.399" class="difflineplus">+                    // Hide the toolbar if the value is unsupported or is for a</span>
<a href="#l12.400"></a><span id="l12.400" class="difflineplus">+                    // specific provider and doesn't belong to the current provider.</span>
<a href="#l12.401"></a><span id="l12.401" class="difflineplus">+                    if (!aArg.privacyValues.includes(currentPrivacyValue) ||</span>
<a href="#l12.402"></a><span id="l12.402" class="difflineplus">+                        (currentProvider &amp;&amp; currentProvider != aArg.calendarType)) {</span>
<a href="#l12.403"></a><span id="l12.403" class="difflineplus">+                        node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.404"></a><span id="l12.404" class="difflineplus">+                    } else {</span>
<a href="#l12.405"></a><span id="l12.405" class="difflineplus">+                        node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.406"></a><span id="l12.406" class="difflineplus">+                    }</span>
<a href="#l12.407"></a><span id="l12.407" class="difflineplus">+</span>
<a href="#l12.408"></a><span id="l12.408" class="difflineplus">+                    // Checked state</span>
<a href="#l12.409"></a><span id="l12.409" class="difflineplus">+                    if (aArg.privacy == currentPrivacyValue) {</span>
<a href="#l12.410"></a><span id="l12.410" class="difflineplus">+                        node.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l12.411"></a><span id="l12.411" class="difflineplus">+                    } else {</span>
<a href="#l12.412"></a><span id="l12.412" class="difflineplus">+                        node.removeAttribute(&quot;checked&quot;);</span>
<a href="#l12.413"></a><span id="l12.413" class="difflineplus">+                    }</span>
<a href="#l12.414"></a><span id="l12.414" class="difflineplus">+                }</span>
<a href="#l12.415"></a><span id="l12.415" class="difflineplus">+            }</span>
<a href="#l12.416"></a><span id="l12.416" class="difflineplus">+        }</span>
<a href="#l12.417"></a><span id="l12.417" class="difflineplus">+</span>
<a href="#l12.418"></a><span id="l12.418" class="difflineplus">+        // Update privacy capabilities (menu) but only if we are not in a tab.</span>
<a href="#l12.419"></a><span id="l12.419" class="difflineplus">+        if (!gTabmail) {</span>
<a href="#l12.420"></a><span id="l12.420" class="difflineplus">+            menupopup = document.getElementById(&quot;options-privacy-menupopup&quot;);</span>
<a href="#l12.421"></a><span id="l12.421" class="difflineplus">+            for (let node of menupopup.childNodes) {</span>
<a href="#l12.422"></a><span id="l12.422" class="difflineplus">+                let currentProvider = node.getAttribute(&quot;provider&quot;);</span>
<a href="#l12.423"></a><span id="l12.423" class="difflineplus">+                if (node.hasAttribute(&quot;privacy&quot;)) {</span>
<a href="#l12.424"></a><span id="l12.424" class="difflineplus">+                    let currentPrivacyValue = node.getAttribute(&quot;privacy&quot;);</span>
<a href="#l12.425"></a><span id="l12.425" class="difflineplus">+                    // Collapsed state</span>
<a href="#l12.426"></a><span id="l12.426" class="difflineplus">+</span>
<a href="#l12.427"></a><span id="l12.427" class="difflineplus">+                    // Hide the menu if the value is unsupported or is for a</span>
<a href="#l12.428"></a><span id="l12.428" class="difflineplus">+                    // specific provider and doesn't belong to the current provider.</span>
<a href="#l12.429"></a><span id="l12.429" class="difflineplus">+                    if (!aArg.privacyValues.includes(currentPrivacyValue) ||</span>
<a href="#l12.430"></a><span id="l12.430" class="difflineplus">+                        (currentProvider &amp;&amp; currentProvider != aArg.calendarType)) {</span>
<a href="#l12.431"></a><span id="l12.431" class="difflineplus">+                        node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.432"></a><span id="l12.432" class="difflineplus">+                    } else {</span>
<a href="#l12.433"></a><span id="l12.433" class="difflineplus">+                        node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.434"></a><span id="l12.434" class="difflineplus">+                    }</span>
<a href="#l12.435"></a><span id="l12.435" class="difflineplus">+</span>
<a href="#l12.436"></a><span id="l12.436" class="difflineplus">+                    // Checked state</span>
<a href="#l12.437"></a><span id="l12.437" class="difflineplus">+                    if (aArg.privacy == currentPrivacyValue) {</span>
<a href="#l12.438"></a><span id="l12.438" class="difflineplus">+                        node.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l12.439"></a><span id="l12.439" class="difflineplus">+                    } else {</span>
<a href="#l12.440"></a><span id="l12.440" class="difflineplus">+                        node.removeAttribute(&quot;checked&quot;);</span>
<a href="#l12.441"></a><span id="l12.441" class="difflineplus">+                    }</span>
<a href="#l12.442"></a><span id="l12.442" class="difflineplus">+                }</span>
<a href="#l12.443"></a><span id="l12.443" class="difflineplus">+            }</span>
<a href="#l12.444"></a><span id="l12.444" class="difflineplus">+        }</span>
<a href="#l12.445"></a><span id="l12.445" class="difflineplus">+</span>
<a href="#l12.446"></a><span id="l12.446" class="difflineplus">+        // Update privacy capabilities (statusbar)</span>
<a href="#l12.447"></a><span id="l12.447" class="difflineplus">+        let privacyPanel = document.getElementById(&quot;status-privacy&quot;);</span>
<a href="#l12.448"></a><span id="l12.448" class="difflineplus">+        let hasAnyPrivacyValue = false;</span>
<a href="#l12.449"></a><span id="l12.449" class="difflineplus">+        for (let node of privacyPanel.childNodes) {</span>
<a href="#l12.450"></a><span id="l12.450" class="difflineplus">+            let currentProvider = node.getAttribute(&quot;provider&quot;);</span>
<a href="#l12.451"></a><span id="l12.451" class="difflineplus">+            if (node.hasAttribute(&quot;privacy&quot;)) {</span>
<a href="#l12.452"></a><span id="l12.452" class="difflineplus">+                let currentPrivacyValue = node.getAttribute(&quot;privacy&quot;);</span>
<a href="#l12.453"></a><span id="l12.453" class="difflineplus">+</span>
<a href="#l12.454"></a><span id="l12.454" class="difflineplus">+                // Hide the panel if the value is unsupported or is for a</span>
<a href="#l12.455"></a><span id="l12.455" class="difflineplus">+                // specific provider and doesn't belong to the current provider,</span>
<a href="#l12.456"></a><span id="l12.456" class="difflineplus">+                // or is not the items privacy value</span>
<a href="#l12.457"></a><span id="l12.457" class="difflineplus">+                if (!aArg.privacyValues.includes(currentPrivacyValue) ||</span>
<a href="#l12.458"></a><span id="l12.458" class="difflineplus">+                    (currentProvider &amp;&amp; currentProvider != aArg.calendarType) ||</span>
<a href="#l12.459"></a><span id="l12.459" class="difflineplus">+                    aArg.privacy != currentPrivacyValue) {</span>
<a href="#l12.460"></a><span id="l12.460" class="difflineplus">+                    node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.461"></a><span id="l12.461" class="difflineplus">+                } else {</span>
<a href="#l12.462"></a><span id="l12.462" class="difflineplus">+                    node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.463"></a><span id="l12.463" class="difflineplus">+                    hasAnyPrivacyValue = true;</span>
<a href="#l12.464"></a><span id="l12.464" class="difflineplus">+                }</span>
<a href="#l12.465"></a><span id="l12.465" class="difflineplus">+            }</span>
<a href="#l12.466"></a><span id="l12.466" class="difflineplus">+        }</span>
<a href="#l12.467"></a><span id="l12.467" class="difflineplus">+</span>
<a href="#l12.468"></a><span id="l12.468" class="difflineplus">+        // Don't show the status panel if no valid privacy value is selected</span>
<a href="#l12.469"></a><span id="l12.469" class="difflineplus">+        if (!hasAnyPrivacyValue) {</span>
<a href="#l12.470"></a><span id="l12.470" class="difflineplus">+            privacyPanel.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.471"></a><span id="l12.471" class="difflineplus">+        } else {</span>
<a href="#l12.472"></a><span id="l12.472" class="difflineplus">+            privacyPanel.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.473"></a><span id="l12.473" class="difflineplus">+        }</span>
<a href="#l12.474"></a><span id="l12.474" class="difflineplus">+    } else {</span>
<a href="#l12.475"></a><span id="l12.475" class="difflineplus">+        // aArg.hasPrivacy is false</span>
<a href="#l12.476"></a><span id="l12.476" class="difflineplus">+        setElementValue(&quot;button-privacy&quot;, &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l12.477"></a><span id="l12.477" class="difflineplus">+        setElementValue(&quot;status-privacy&quot;, &quot;true&quot;, &quot;collapsed&quot;);</span>
<a href="#l12.478"></a><span id="l12.478" class="difflineplus">+        // in the tab case the menu item does not exist</span>
<a href="#l12.479"></a><span id="l12.479" class="difflineplus">+        let privacyMenuItem = document.getElementById(&quot;options-privacy-menu&quot;);</span>
<a href="#l12.480"></a><span id="l12.480" class="difflineplus">+        if (privacyMenuItem) {</span>
<a href="#l12.481"></a><span id="l12.481" class="difflineplus">+            setElementValue(&quot;options-privacy-menu&quot;, &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l12.482"></a><span id="l12.482" class="difflineplus">+        }</span>
<a href="#l12.483"></a><span id="l12.483" class="difflineplus">+    }</span>
<a href="#l12.484"></a><span id="l12.484" class="difflineplus">+}</span>
<a href="#l12.485"></a><span id="l12.485" class="difflineplus">+</span>
<a href="#l12.486"></a><span id="l12.486" class="difflineplus">+/**</span>
<a href="#l12.487"></a><span id="l12.487" class="difflineplus">+ * Handler for rotate priority command.</span>
<a href="#l12.488"></a><span id="l12.488" class="difflineplus">+ */</span>
<a href="#l12.489"></a><span id="l12.489" class="difflineplus">+function rotatePriority() {</span>
<a href="#l12.490"></a><span id="l12.490" class="difflineplus">+    sendMessage({ command: &quot;rotatePriority&quot; });</span>
<a href="#l12.491"></a><span id="l12.491" class="difflineplus">+}</span>
<a href="#l12.492"></a><span id="l12.492" class="difflineplus">+</span>
<a href="#l12.493"></a><span id="l12.493" class="difflineplus">+/**</span>
<a href="#l12.494"></a><span id="l12.494" class="difflineplus">+ * Handler to change the priority.</span>
<a href="#l12.495"></a><span id="l12.495" class="difflineplus">+ *</span>
<a href="#l12.496"></a><span id="l12.496" class="difflineplus">+ * @param {nsIDOMNode} aTarget  Its value attribute contains the new priority</span>
<a href="#l12.497"></a><span id="l12.497" class="difflineplus">+ */</span>
<a href="#l12.498"></a><span id="l12.498" class="difflineplus">+function editPriority(aTarget) {</span>
<a href="#l12.499"></a><span id="l12.499" class="difflineplus">+    sendMessage({</span>
<a href="#l12.500"></a><span id="l12.500" class="difflineplus">+        command: &quot;editPriority&quot;,</span>
<a href="#l12.501"></a><span id="l12.501" class="difflineplus">+        value: parseInt(aTarget.getAttribute(&quot;value&quot;))</span>
<a href="#l12.502"></a><span id="l12.502" class="difflineplus">+    });</span>
<a href="#l12.503"></a><span id="l12.503" class="difflineplus">+}</span>
<a href="#l12.504"></a><span id="l12.504" class="difflineplus">+</span>
<a href="#l12.505"></a><span id="l12.505" class="difflineplus">+/**</span>
<a href="#l12.506"></a><span id="l12.506" class="difflineplus">+ * Updates the dialog controls related to priority.</span>
<a href="#l12.507"></a><span id="l12.507" class="difflineplus">+ *</span>
<a href="#l12.508"></a><span id="l12.508" class="difflineplus">+ * @param {Object}  aArg              Contains priority properties</span>
<a href="#l12.509"></a><span id="l12.509" class="difflineplus">+ * @param {string}  aArg.priority     The new priority value</span>
<a href="#l12.510"></a><span id="l12.510" class="difflineplus">+ * @param {boolean} aArg.hasPriority  Whether priority is supported</span>
<a href="#l12.511"></a><span id="l12.511" class="difflineplus">+ */</span>
<a href="#l12.512"></a><span id="l12.512" class="difflineplus">+function updatePriority(aArg) {</span>
<a href="#l12.513"></a><span id="l12.513" class="difflineplus">+    // Set up capabilities</span>
<a href="#l12.514"></a><span id="l12.514" class="difflineplus">+    if (document.getElementById(&quot;button-priority&quot;)) {</span>
<a href="#l12.515"></a><span id="l12.515" class="difflineplus">+        setElementValue(&quot;button-priority&quot;, !aArg.hasPriority &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l12.516"></a><span id="l12.516" class="difflineplus">+    }</span>
<a href="#l12.517"></a><span id="l12.517" class="difflineplus">+    if (!gTabmail &amp;&amp; document.getElementById(&quot;options-priority-menu&quot;)) {</span>
<a href="#l12.518"></a><span id="l12.518" class="difflineplus">+        setElementValue(&quot;options-priority-menu&quot;, !aArg.hasPriority &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l12.519"></a><span id="l12.519" class="difflineplus">+    }</span>
<a href="#l12.520"></a><span id="l12.520" class="difflineplus">+    setElementValue(&quot;status-priority&quot;, !aArg.hasPriority &amp;&amp; &quot;true&quot;, &quot;collapsed&quot;);</span>
<a href="#l12.521"></a><span id="l12.521" class="difflineplus">+</span>
<a href="#l12.522"></a><span id="l12.522" class="difflineplus">+    if (aArg.hasPriority) {</span>
<a href="#l12.523"></a><span id="l12.523" class="difflineplus">+        let priorityLevel = &quot;none&quot;;</span>
<a href="#l12.524"></a><span id="l12.524" class="difflineplus">+        if (aArg.priority &gt;= 1 &amp;&amp; aArg.priority &lt;= 4) {</span>
<a href="#l12.525"></a><span id="l12.525" class="difflineplus">+            priorityLevel = &quot;high&quot;;</span>
<a href="#l12.526"></a><span id="l12.526" class="difflineplus">+        } else if (aArg.priority == 5) {</span>
<a href="#l12.527"></a><span id="l12.527" class="difflineplus">+            priorityLevel = &quot;normal&quot;;</span>
<a href="#l12.528"></a><span id="l12.528" class="difflineplus">+        } else if (aArg.priority &gt;= 6 &amp;&amp; aArg.priority &lt;= 9) {</span>
<a href="#l12.529"></a><span id="l12.529" class="difflineplus">+            priorityLevel = &quot;low&quot;;</span>
<a href="#l12.530"></a><span id="l12.530" class="difflineplus">+        }</span>
<a href="#l12.531"></a><span id="l12.531" class="difflineplus">+</span>
<a href="#l12.532"></a><span id="l12.532" class="difflineplus">+        let priorityNone = document.getElementById(&quot;cmd_priority_none&quot;);</span>
<a href="#l12.533"></a><span id="l12.533" class="difflineplus">+        let priorityLow = document.getElementById(&quot;cmd_priority_low&quot;);</span>
<a href="#l12.534"></a><span id="l12.534" class="difflineplus">+        let priorityNormal = document.getElementById(&quot;cmd_priority_normal&quot;);</span>
<a href="#l12.535"></a><span id="l12.535" class="difflineplus">+        let priorityHigh = document.getElementById(&quot;cmd_priority_high&quot;);</span>
<a href="#l12.536"></a><span id="l12.536" class="difflineplus">+</span>
<a href="#l12.537"></a><span id="l12.537" class="difflineplus">+        priorityNone.setAttribute(&quot;checked&quot;,</span>
<a href="#l12.538"></a><span id="l12.538" class="difflineplus">+                                  priorityLevel == &quot;none&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.539"></a><span id="l12.539" class="difflineplus">+        priorityLow.setAttribute(&quot;checked&quot;,</span>
<a href="#l12.540"></a><span id="l12.540" class="difflineplus">+                                 priorityLevel == &quot;low&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.541"></a><span id="l12.541" class="difflineplus">+        priorityNormal.setAttribute(&quot;checked&quot;,</span>
<a href="#l12.542"></a><span id="l12.542" class="difflineplus">+                                    priorityLevel == &quot;normal&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.543"></a><span id="l12.543" class="difflineplus">+        priorityHigh.setAttribute(&quot;checked&quot;,</span>
<a href="#l12.544"></a><span id="l12.544" class="difflineplus">+                                  priorityLevel == &quot;high&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.545"></a><span id="l12.545" class="difflineplus">+</span>
<a href="#l12.546"></a><span id="l12.546" class="difflineplus">+        // Status bar panel</span>
<a href="#l12.547"></a><span id="l12.547" class="difflineplus">+        let priorityPanel = document.getElementById(&quot;status-priority&quot;);</span>
<a href="#l12.548"></a><span id="l12.548" class="difflineplus">+        if (priorityLevel == &quot;none&quot;) {</span>
<a href="#l12.549"></a><span id="l12.549" class="difflineplus">+            // If the priority is none, don't show the status bar panel</span>
<a href="#l12.550"></a><span id="l12.550" class="difflineplus">+            priorityPanel.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.551"></a><span id="l12.551" class="difflineplus">+        } else {</span>
<a href="#l12.552"></a><span id="l12.552" class="difflineplus">+            priorityPanel.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.553"></a><span id="l12.553" class="difflineplus">+            let foundPriority = false;</span>
<a href="#l12.554"></a><span id="l12.554" class="difflineplus">+            for (let node of priorityPanel.childNodes) {</span>
<a href="#l12.555"></a><span id="l12.555" class="difflineplus">+                if (foundPriority) {</span>
<a href="#l12.556"></a><span id="l12.556" class="difflineplus">+                    node.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l12.557"></a><span id="l12.557" class="difflineplus">+                } else {</span>
<a href="#l12.558"></a><span id="l12.558" class="difflineplus">+                    node.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.559"></a><span id="l12.559" class="difflineplus">+                }</span>
<a href="#l12.560"></a><span id="l12.560" class="difflineplus">+                if (node.getAttribute(&quot;value&quot;) == priorityLevel) {</span>
<a href="#l12.561"></a><span id="l12.561" class="difflineplus">+                    foundPriority = true;</span>
<a href="#l12.562"></a><span id="l12.562" class="difflineplus">+                }</span>
<a href="#l12.563"></a><span id="l12.563" class="difflineplus">+            }</span>
<a href="#l12.564"></a><span id="l12.564" class="difflineplus">+        }</span>
<a href="#l12.565"></a><span id="l12.565" class="difflineplus">+    }</span>
<a href="#l12.566"></a><span id="l12.566" class="difflineplus">+}</span>
<a href="#l12.567"></a><span id="l12.567" class="difflineplus">+</span>
<a href="#l12.568"></a><span id="l12.568" class="difflineplus">+/**</span>
<a href="#l12.569"></a><span id="l12.569" class="difflineplus">+ * Handler for rotate status command.</span>
<a href="#l12.570"></a><span id="l12.570" class="difflineplus">+ */</span>
<a href="#l12.571"></a><span id="l12.571" class="difflineplus">+function rotateStatus() {</span>
<a href="#l12.572"></a><span id="l12.572" class="difflineplus">+    let noneCmd = document.getElementById(&quot;cmd_status_none&quot;);</span>
<a href="#l12.573"></a><span id="l12.573" class="difflineplus">+    let isVisible = !noneCmd.hasAttribute(&quot;hidden&quot;);</span>
<a href="#l12.574"></a><span id="l12.574" class="difflineplus">+    sendMessage({</span>
<a href="#l12.575"></a><span id="l12.575" class="difflineplus">+        command: &quot;rotateStatus&quot;,</span>
<a href="#l12.576"></a><span id="l12.576" class="difflineplus">+        noneCommandIsVisible: isVisible</span>
<a href="#l12.577"></a><span id="l12.577" class="difflineplus">+    });</span>
<a href="#l12.578"></a><span id="l12.578" class="difflineplus">+}</span>
<a href="#l12.579"></a><span id="l12.579" class="difflineplus">+</span>
<a href="#l12.580"></a><span id="l12.580" class="difflineplus">+/**</span>
<a href="#l12.581"></a><span id="l12.581" class="difflineplus">+ * Handler to change the status from the dialog elements.</span>
<a href="#l12.582"></a><span id="l12.582" class="difflineplus">+ *</span>
<a href="#l12.583"></a><span id="l12.583" class="difflineplus">+ * @param {nsIDOMNode} aTarget  Its value attribute contains the new status</span>
<a href="#l12.584"></a><span id="l12.584" class="difflineplus">+ */</span>
<a href="#l12.585"></a><span id="l12.585" class="difflineplus">+function editStatus(aTarget) {</span>
<a href="#l12.586"></a><span id="l12.586" class="difflineplus">+    sendMessage({</span>
<a href="#l12.587"></a><span id="l12.587" class="difflineplus">+        command: &quot;editStatus&quot;,</span>
<a href="#l12.588"></a><span id="l12.588" class="difflineplus">+        value: aTarget.getAttribute(&quot;value&quot;)</span>
<a href="#l12.589"></a><span id="l12.589" class="difflineplus">+    });</span>
<a href="#l12.590"></a><span id="l12.590" class="difflineplus">+}</span>
<a href="#l12.591"></a><span id="l12.591" class="difflineplus">+</span>
<a href="#l12.592"></a><span id="l12.592" class="difflineplus">+/**</span>
<a href="#l12.593"></a><span id="l12.593" class="difflineplus">+ * Update the dialog controls related to status.</span>
<a href="#l12.594"></a><span id="l12.594" class="difflineplus">+ *</span>
<a href="#l12.595"></a><span id="l12.595" class="difflineplus">+ * @param {Object} aArg         Contains the new status value</span>
<a href="#l12.596"></a><span id="l12.596" class="difflineplus">+ * @param {string} aArg.status  The new status value</span>
<a href="#l12.597"></a><span id="l12.597" class="difflineplus">+ */</span>
<a href="#l12.598"></a><span id="l12.598" class="difflineplus">+function updateStatus(aArg) {</span>
<a href="#l12.599"></a><span id="l12.599" class="difflineplus">+    const statusLabels = [&quot;status-status-tentative-label&quot;,</span>
<a href="#l12.600"></a><span id="l12.600" class="difflineplus">+                          &quot;status-status-confirmed-label&quot;,</span>
<a href="#l12.601"></a><span id="l12.601" class="difflineplus">+                          &quot;status-status-cancelled-label&quot;];</span>
<a href="#l12.602"></a><span id="l12.602" class="difflineplus">+    const commands = [&quot;cmd_status_none&quot;,</span>
<a href="#l12.603"></a><span id="l12.603" class="difflineplus">+                      &quot;cmd_status_tentative&quot;,</span>
<a href="#l12.604"></a><span id="l12.604" class="difflineplus">+                      &quot;cmd_status_confirmed&quot;,</span>
<a href="#l12.605"></a><span id="l12.605" class="difflineplus">+                      &quot;cmd_status_cancelled&quot;];</span>
<a href="#l12.606"></a><span id="l12.606" class="difflineplus">+    let found = false;</span>
<a href="#l12.607"></a><span id="l12.607" class="difflineplus">+    setBooleanAttribute(&quot;status-status&quot;, &quot;collapsed&quot;, true);</span>
<a href="#l12.608"></a><span id="l12.608" class="difflineplus">+    commands.forEach((aElement, aIndex, aArray) =&gt; {</span>
<a href="#l12.609"></a><span id="l12.609" class="difflineplus">+        let node = document.getElementById(aElement);</span>
<a href="#l12.610"></a><span id="l12.610" class="difflineplus">+        let matches = (node.getAttribute(&quot;value&quot;) == aArg.status);</span>
<a href="#l12.611"></a><span id="l12.611" class="difflineplus">+        found = found || matches;</span>
<a href="#l12.612"></a><span id="l12.612" class="difflineplus">+</span>
<a href="#l12.613"></a><span id="l12.613" class="difflineplus">+        node.setAttribute(&quot;checked&quot;, matches ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.614"></a><span id="l12.614" class="difflineplus">+</span>
<a href="#l12.615"></a><span id="l12.615" class="difflineplus">+        if (aIndex &gt; 0) {</span>
<a href="#l12.616"></a><span id="l12.616" class="difflineplus">+            setBooleanAttribute(statusLabels[aIndex-1], &quot;hidden&quot;, !matches);</span>
<a href="#l12.617"></a><span id="l12.617" class="difflineplus">+            if (matches) {</span>
<a href="#l12.618"></a><span id="l12.618" class="difflineplus">+                setBooleanAttribute(&quot;status-status&quot;, &quot;collapsed&quot;, false);</span>
<a href="#l12.619"></a><span id="l12.619" class="difflineplus">+            }</span>
<a href="#l12.620"></a><span id="l12.620" class="difflineplus">+        }</span>
<a href="#l12.621"></a><span id="l12.621" class="difflineplus">+    });</span>
<a href="#l12.622"></a><span id="l12.622" class="difflineplus">+    if (!found) {</span>
<a href="#l12.623"></a><span id="l12.623" class="difflineplus">+        // The current Status value is invalid. Change the status to</span>
<a href="#l12.624"></a><span id="l12.624" class="difflineplus">+        // &quot;not specified&quot; and update the status again.</span>
<a href="#l12.625"></a><span id="l12.625" class="difflineplus">+        sendMessage({ command: &quot;editStatus&quot;, value: &quot;NONE&quot; });</span>
<a href="#l12.626"></a><span id="l12.626" class="difflineplus">+    }</span>
<a href="#l12.627"></a><span id="l12.627" class="difflineplus">+}</span>
<a href="#l12.628"></a><span id="l12.628" class="difflineplus">+</span>
<a href="#l12.629"></a><span id="l12.629" class="difflineplus">+/**</span>
<a href="#l12.630"></a><span id="l12.630" class="difflineplus">+ * Handler for rotate transparency command.</span>
<a href="#l12.631"></a><span id="l12.631" class="difflineplus">+ */</span>
<a href="#l12.632"></a><span id="l12.632" class="difflineplus">+function rotateShowTimeAs() {</span>
<a href="#l12.633"></a><span id="l12.633" class="difflineplus">+    sendMessage({ command: &quot;rotateShowTimeAs&quot; });</span>
<a href="#l12.634"></a><span id="l12.634" class="difflineplus">+}</span>
<a href="#l12.635"></a><span id="l12.635" class="difflineplus">+</span>
<a href="#l12.636"></a><span id="l12.636" class="difflineplus">+/**</span>
<a href="#l12.637"></a><span id="l12.637" class="difflineplus">+ * Handler to change the transparency from the dialog elements.</span>
<a href="#l12.638"></a><span id="l12.638" class="difflineplus">+ *</span>
<a href="#l12.639"></a><span id="l12.639" class="difflineplus">+ * @param {nsIDOMNode} aTarget  Its value attribute contains the new transparency</span>
<a href="#l12.640"></a><span id="l12.640" class="difflineplus">+ */</span>
<a href="#l12.641"></a><span id="l12.641" class="difflineplus">+function editShowTimeAs(aTarget) {</span>
<a href="#l12.642"></a><span id="l12.642" class="difflineplus">+    sendMessage({</span>
<a href="#l12.643"></a><span id="l12.643" class="difflineplus">+        command: &quot;editShowTimeAs&quot;,</span>
<a href="#l12.644"></a><span id="l12.644" class="difflineplus">+        value: aTarget.getAttribute(&quot;value&quot;)</span>
<a href="#l12.645"></a><span id="l12.645" class="difflineplus">+    });</span>
<a href="#l12.646"></a><span id="l12.646" class="difflineplus">+}</span>
<a href="#l12.647"></a><span id="l12.647" class="difflineplus">+</span>
<a href="#l12.648"></a><span id="l12.648" class="difflineplus">+/**</span>
<a href="#l12.649"></a><span id="l12.649" class="difflineplus">+ * Update the dialog controls related to transparency.</span>
<a href="#l12.650"></a><span id="l12.650" class="difflineplus">+ *</span>
<a href="#l12.651"></a><span id="l12.651" class="difflineplus">+ * @param {Object} aArg             Contains the new transparency value</span>
<a href="#l12.652"></a><span id="l12.652" class="difflineplus">+ * @param {string} aArg.showTimeAs  The new transparency value</span>
<a href="#l12.653"></a><span id="l12.653" class="difflineplus">+ */</span>
<a href="#l12.654"></a><span id="l12.654" class="difflineplus">+function updateShowTimeAs(aArg) {</span>
<a href="#l12.655"></a><span id="l12.655" class="difflineplus">+    let showAsBusy = document.getElementById(&quot;cmd_showtimeas_busy&quot;);</span>
<a href="#l12.656"></a><span id="l12.656" class="difflineplus">+    let showAsFree = document.getElementById(&quot;cmd_showtimeas_free&quot;);</span>
<a href="#l12.657"></a><span id="l12.657" class="difflineplus">+</span>
<a href="#l12.658"></a><span id="l12.658" class="difflineplus">+    showAsBusy.setAttribute(&quot;checked&quot;,</span>
<a href="#l12.659"></a><span id="l12.659" class="difflineplus">+                            aArg.showTimeAs == &quot;OPAQUE&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.660"></a><span id="l12.660" class="difflineplus">+    showAsFree.setAttribute(&quot;checked&quot;,</span>
<a href="#l12.661"></a><span id="l12.661" class="difflineplus">+                            aArg.showTimeAs == &quot;TRANSPARENT&quot; ? &quot;true&quot; : &quot;false&quot;);</span>
<a href="#l12.662"></a><span id="l12.662" class="difflineplus">+</span>
<a href="#l12.663"></a><span id="l12.663" class="difflineplus">+    setBooleanAttribute(&quot;status-freebusy&quot;,</span>
<a href="#l12.664"></a><span id="l12.664" class="difflineplus">+                        &quot;collapsed&quot;,</span>
<a href="#l12.665"></a><span id="l12.665" class="difflineplus">+                        aArg.showTimeAs != &quot;OPAQUE&quot; &amp;&amp; aArg.showTimeAs != &quot;TRANSPARENT&quot;);</span>
<a href="#l12.666"></a><span id="l12.666" class="difflineplus">+    setBooleanAttribute(&quot;status-freebusy-free-label&quot;, &quot;hidden&quot;, aArg.showTimeAs == &quot;OPAQUE&quot;);</span>
<a href="#l12.667"></a><span id="l12.667" class="difflineplus">+    setBooleanAttribute(&quot;status-freebusy-busy-label&quot;, &quot;hidden&quot;, aArg.showTimeAs == &quot;TRANSPARENT&quot;);</span>
<a href="#l12.668"></a><span id="l12.668" class="difflineplus">+}</span>
<a href="#l12.669"></a><span id="l12.669" class="difflineplus">+</span>
<a href="#l12.670"></a><span id="l12.670" class="difflineplus">+/**</span>
<a href="#l12.671"></a><span id="l12.671" class="difflineplus">+ * Get the timezone button state.</span>
<a href="#l12.672"></a><span id="l12.672" class="difflineplus">+ *</span>
<a href="#l12.673"></a><span id="l12.673" class="difflineplus">+ * @return {boolean}  True is active/checked and false is inactive/unchecked</span>
<a href="#l12.674"></a><span id="l12.674" class="difflineplus">+ */</span>
<a href="#l12.675"></a><span id="l12.675" class="difflineplus">+function getTimezoneCommandState() {</span>
<a href="#l12.676"></a><span id="l12.676" class="difflineplus">+    let cmdTimezone = document.getElementById(&quot;cmd_timezone&quot;);</span>
<a href="#l12.677"></a><span id="l12.677" class="difflineplus">+    return cmdTimezone.getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l12.678"></a><span id="l12.678" class="difflineplus">+}</span>
<a href="#l12.679"></a><span id="l12.679" class="difflineplus">+</span>
<a href="#l12.680"></a><span id="l12.680" class="difflineplus">+/**</span>
<a href="#l12.681"></a><span id="l12.681" class="difflineplus">+ * Set the timezone button state.  Used to keep the toolbar button in</span>
<a href="#l12.682"></a><span id="l12.682" class="difflineplus">+ * sync when switching tabs.</span>
<a href="#l12.683"></a><span id="l12.683" class="difflineplus">+ *</span>
<a href="#l12.684"></a><span id="l12.684" class="difflineplus">+ * @param {Object}  aArg                   Contains timezones property</span>
<a href="#l12.685"></a><span id="l12.685" class="difflineplus">+ * @param {boolean} aArg.timezonesEnabled  Are timezones enabled?</span>
<a href="#l12.686"></a><span id="l12.686" class="difflineplus">+ */</span>
<a href="#l12.687"></a><span id="l12.687" class="difflineplus">+function updateTimezoneCommand(aArg) {</span>
<a href="#l12.688"></a><span id="l12.688" class="difflineplus">+    let cmdTimezone = document.getElementById(&quot;cmd_timezone&quot;);</span>
<a href="#l12.689"></a><span id="l12.689" class="difflineplus">+    cmdTimezone.setAttribute(&quot;checked&quot;, aArg.timezonesEnabled);</span>
<a href="#l12.690"></a><span id="l12.690" class="difflineplus">+    gConfig.timezonesEnabled = aArg.timezonesEnabled;</span>
<a href="#l12.691"></a><span id="l12.691" class="difflineplus">+}</span>
<a href="#l12.692"></a><span id="l12.692" class="difflineplus">+</span>
<a href="#l12.693"></a><span id="l12.693" class="difflineplus">+/**</span>
<a href="#l12.694"></a><span id="l12.694" class="difflineplus">+ * Toggles the command that allows enabling the timezone links in the dialog.</span>
<a href="#l12.695"></a><span id="l12.695" class="difflineplus">+ */</span>
<a href="#l12.696"></a><span id="l12.696" class="difflineplus">+function toggleTimezoneLinks() {</span>
<a href="#l12.697"></a><span id="l12.697" class="difflineplus">+    let cmdTimezone = document.getElementById(&quot;cmd_timezone&quot;);</span>
<a href="#l12.698"></a><span id="l12.698" class="difflineplus">+    let currentState = getTimezoneCommandState();</span>
<a href="#l12.699"></a><span id="l12.699" class="difflineplus">+    cmdTimezone.setAttribute(&quot;checked&quot;, currentState ? &quot;false&quot; : &quot;true&quot;);</span>
<a href="#l12.700"></a><span id="l12.700" class="difflineplus">+    gConfig.timezonesEnabled = !currentState;</span>
<a href="#l12.701"></a><span id="l12.701" class="difflineplus">+    sendMessage({ command: &quot;toggleTimezoneLinks&quot;, checked: !currentState });</span>
<a href="#l12.702"></a><span id="l12.702" class="difflineplus">+}</span>
<a href="#l12.703"></a><span id="l12.703" class="difflineplus">+</span>
<a href="#l12.704"></a><span id="l12.704" class="difflineplus">+/**</span>
<a href="#l12.705"></a><span id="l12.705" class="difflineplus">+ * Toggles the visibility of the related link (rfc2445 URL property).</span>
<a href="#l12.706"></a><span id="l12.706" class="difflineplus">+ */</span>
<a href="#l12.707"></a><span id="l12.707" class="difflineplus">+function toggleLink() {</span>
<a href="#l12.708"></a><span id="l12.708" class="difflineplus">+    let linkCommand = document.getElementById(&quot;cmd_toggle_link&quot;);</span>
<a href="#l12.709"></a><span id="l12.709" class="difflineplus">+    let checked = linkCommand.getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l12.710"></a><span id="l12.710" class="difflineplus">+</span>
<a href="#l12.711"></a><span id="l12.711" class="difflineplus">+    linkCommand.setAttribute(&quot;checked&quot;, checked ? &quot;false&quot; : &quot;true&quot;);</span>
<a href="#l12.712"></a><span id="l12.712" class="difflineplus">+    sendMessage({ command: &quot;toggleLink&quot;, checked: !checked });</span>
<a href="#l12.713"></a><span id="l12.713" class="difflineplus">+}</span>
<a href="#l12.714"></a><span id="l12.714" class="difflineplus">+</span>
<a href="#l12.715"></a><span id="l12.715" class="difflineplus">+/**</span>
<a href="#l12.716"></a><span id="l12.716" class="difflineplus">+ * Prompts the user to attach an url to this item.</span>
<a href="#l12.717"></a><span id="l12.717" class="difflineplus">+ */</span>
<a href="#l12.718"></a><span id="l12.718" class="difflineplus">+function attachURL() {</span>
<a href="#l12.719"></a><span id="l12.719" class="difflineplus">+    sendMessage({ command: &quot;attachURL&quot; });</span>
<a href="#l12.720"></a><span id="l12.720" class="difflineplus">+}</span>
<a href="#l12.721"></a><span id="l12.721" class="difflineplus">+</span>
<a href="#l12.722"></a><span id="l12.722" class="difflineplus">+/**</span>
<a href="#l12.723"></a><span id="l12.723" class="difflineplus">+ * Updates dialog controls related to item attachments.</span>
<a href="#l12.724"></a><span id="l12.724" class="difflineplus">+ *</span>
<a href="#l12.725"></a><span id="l12.725" class="difflineplus">+ * @param {Object}  aArg                   Container</span>
<a href="#l12.726"></a><span id="l12.726" class="difflineplus">+ * @param {boolean} aArg.attachUrlCommand  Enable the attach url command?</span>
<a href="#l12.727"></a><span id="l12.727" class="difflineplus">+ */</span>
<a href="#l12.728"></a><span id="l12.728" class="difflineplus">+function updateAttachment(aArg) {</span>
<a href="#l12.729"></a><span id="l12.729" class="difflineplus">+    setElementValue(&quot;cmd_attach_url&quot;, !aArg.attachUrlCommand &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l12.730"></a><span id="l12.730" class="difflineplus">+}</span>
<a href="#l12.731"></a><span id="l12.731" class="difflineplus">+</span>
<a href="#l12.732"></a><span id="l12.732" class="difflineplus">+/**</span>
<a href="#l12.733"></a><span id="l12.733" class="difflineplus">+ * Updates attendees command enabled/disabled state.</span>
<a href="#l12.734"></a><span id="l12.734" class="difflineplus">+ *</span>
<a href="#l12.735"></a><span id="l12.735" class="difflineplus">+ * @param {Object}  aArg                   Container</span>
<a href="#l12.736"></a><span id="l12.736" class="difflineplus">+ * @param {boolean} aArg.attendeesCommand  Enable the attendees command?</span>
<a href="#l12.737"></a><span id="l12.737" class="difflineplus">+ */</span>
<a href="#l12.738"></a><span id="l12.738" class="difflineplus">+function updateAttendeesCommand(aArg) {</span>
<a href="#l12.739"></a><span id="l12.739" class="difflineplus">+    setElementValue(&quot;cmd_attendees&quot;, !aArg.attendeesCommand, &quot;disabled&quot;);</span>
<a href="#l12.740"></a><span id="l12.740" class="difflineplus">+}</span>
<a href="#l12.741"></a><span id="l12.741" class="difflineplus">+</span>
<a href="#l12.742"></a><span id="l12.742" class="difflineplus">+/**</span>
<a href="#l12.743"></a><span id="l12.743" class="difflineplus">+ * Enables/disables the commands cmd_accept and cmd_save related to the</span>
<a href="#l12.744"></a><span id="l12.744" class="difflineplus">+ * save operation.</span>
<a href="#l12.745"></a><span id="l12.745" class="difflineplus">+ *</span>
<a href="#l12.746"></a><span id="l12.746" class="difflineplus">+ * @param {boolean} aEnable  Enable the commands?</span>
<a href="#l12.747"></a><span id="l12.747" class="difflineplus">+ */</span>
<a href="#l12.748"></a><span id="l12.748" class="difflineplus">+function enableAcceptCommand(aEnable) {</span>
<a href="#l12.749"></a><span id="l12.749" class="difflineplus">+    setElementValue(&quot;cmd_accept&quot;, !aEnable, &quot;disabled&quot;);</span>
<a href="#l12.750"></a><span id="l12.750" class="difflineplus">+    setElementValue(&quot;cmd_save&quot;, !aEnable, &quot;disabled&quot;);</span>
<a href="#l12.751"></a><span id="l12.751" class="difflineplus">+}</span>
<a href="#l12.752"></a><span id="l12.752" class="difflineplus">+</span>
<a href="#l12.753"></a><span id="l12.753" class="difflineplus">+/**</span>
<a href="#l12.754"></a><span id="l12.754" class="difflineplus">+ * Enable and un-collapse all elements that are disable-on-readonly and</span>
<a href="#l12.755"></a><span id="l12.755" class="difflineplus">+ * collapse-on-readonly.</span>
<a href="#l12.756"></a><span id="l12.756" class="difflineplus">+ */</span>
<a href="#l12.757"></a><span id="l12.757" class="difflineplus">+function removeDisableAndCollapseOnReadonly() {</span>
<a href="#l12.758"></a><span id="l12.758" class="difflineplus">+    let enableElements = document.getElementsByAttribute(&quot;disable-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l12.759"></a><span id="l12.759" class="difflineplus">+    for (let element of enableElements) {</span>
<a href="#l12.760"></a><span id="l12.760" class="difflineplus">+        element.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l12.761"></a><span id="l12.761" class="difflineplus">+    }</span>
<a href="#l12.762"></a><span id="l12.762" class="difflineplus">+    let collapseElements = document.getElementsByAttribute(&quot;collapse-on-readonly&quot;, &quot;true&quot;);</span>
<a href="#l12.763"></a><span id="l12.763" class="difflineplus">+    for (let element of collapseElements) {</span>
<a href="#l12.764"></a><span id="l12.764" class="difflineplus">+        element.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l12.765"></a><span id="l12.765" class="difflineplus">+    }</span>
<a href="#l12.766"></a><span id="l12.766" class="difflineplus">+}</span>
<a href="#l12.767"></a><span id="l12.767" class="difflineplus">+</span>
<a href="#l12.768"></a><span id="l12.768" class="difflineplus">+/**</span>
<a href="#l12.769"></a><span id="l12.769" class="difflineplus">+ * Handler to toggle toolbar visibility.</span>
<a href="#l12.770"></a><span id="l12.770" class="difflineplus">+ *</span>
<a href="#l12.771"></a><span id="l12.771" class="difflineplus">+ * @param {string} aToolbarId   The id of the toolbar node to toggle</span>
<a href="#l12.772"></a><span id="l12.772" class="difflineplus">+ * @param {string} aMenuitemId  The corresponding menuitem in the view menu</span>
<a href="#l12.773"></a><span id="l12.773" class="difflineplus">+ */</span>
<a href="#l12.774"></a><span id="l12.774" class="difflineplus">+function onCommandViewToolbar(aToolbarId, aMenuItemId) {</span>
<a href="#l12.775"></a><span id="l12.775" class="difflineplus">+    let toolbar = document.getElementById(aToolbarId);</span>
<a href="#l12.776"></a><span id="l12.776" class="difflineplus">+    let menuItem = document.getElementById(aMenuItemId);</span>
<a href="#l12.777"></a><span id="l12.777" class="difflineplus">+</span>
<a href="#l12.778"></a><span id="l12.778" class="difflineplus">+    if (!toolbar || !menuItem) {</span>
<a href="#l12.779"></a><span id="l12.779" class="difflineplus">+        return;</span>
<a href="#l12.780"></a><span id="l12.780" class="difflineplus">+    }</span>
<a href="#l12.781"></a><span id="l12.781" class="difflineplus">+</span>
<a href="#l12.782"></a><span id="l12.782" class="difflineplus">+    let toolbarCollapsed = toolbar.collapsed;</span>
<a href="#l12.783"></a><span id="l12.783" class="difflineplus">+</span>
<a href="#l12.784"></a><span id="l12.784" class="difflineplus">+    // toggle the checkbox</span>
<a href="#l12.785"></a><span id="l12.785" class="difflineplus">+    menuItem.setAttribute(&quot;checked&quot;, toolbarCollapsed);</span>
<a href="#l12.786"></a><span id="l12.786" class="difflineplus">+</span>
<a href="#l12.787"></a><span id="l12.787" class="difflineplus">+    // toggle visibility of the toolbar</span>
<a href="#l12.788"></a><span id="l12.788" class="difflineplus">+    toolbar.collapsed = !toolbarCollapsed;</span>
<a href="#l12.789"></a><span id="l12.789" class="difflineplus">+</span>
<a href="#l12.790"></a><span id="l12.790" class="difflineplus">+    document.persist(aToolbarId, &quot;collapsed&quot;);</span>
<a href="#l12.791"></a><span id="l12.791" class="difflineplus">+    document.persist(aMenuItemId, &quot;checked&quot;);</span>
<a href="#l12.792"></a><span id="l12.792" class="difflineplus">+}</span>
<a href="#l12.793"></a><span id="l12.793" class="difflineplus">+</span>
<a href="#l12.794"></a><span id="l12.794" class="difflineplus">+/**</span>
<a href="#l12.795"></a><span id="l12.795" class="difflineplus">+ * Called after the customize toolbar dialog has been closed by the</span>
<a href="#l12.796"></a><span id="l12.796" class="difflineplus">+ * user. We need to restore the state of all buttons and commands of</span>
<a href="#l12.797"></a><span id="l12.797" class="difflineplus">+ * all customizable toolbars.</span>
<a href="#l12.798"></a><span id="l12.798" class="difflineplus">+ *</span>
<a href="#l12.799"></a><span id="l12.799" class="difflineplus">+ * @param {boolean} aToolboxChanged  When true the toolbox has changed</span>
<a href="#l12.800"></a><span id="l12.800" class="difflineplus">+ */</span>
<a href="#l12.801"></a><span id="l12.801" class="difflineplus">+function dialogToolboxCustomizeDone(aToolboxChanged) {</span>
<a href="#l12.802"></a><span id="l12.802" class="difflineplus">+</span>
<a href="#l12.803"></a><span id="l12.803" class="difflineplus">+    let menubar = document.getElementById(&quot;event-menubar&quot;);</span>
<a href="#l12.804"></a><span id="l12.804" class="difflineplus">+    // XXX After we disable certain menu items in a tab (see below),</span>
<a href="#l12.805"></a><span id="l12.805" class="difflineplus">+    // we need to re-enable them.</span>
<a href="#l12.806"></a><span id="l12.806" class="difflineplus">+    if (menubar) {</span>
<a href="#l12.807"></a><span id="l12.807" class="difflineplus">+        for (let i = 0; i &lt; menubar.childNodes.length; ++i) {</span>
<a href="#l12.808"></a><span id="l12.808" class="difflineplus">+            menubar.childNodes[i].removeAttribute(&quot;disabled&quot;);</span>
<a href="#l12.809"></a><span id="l12.809" class="difflineplus">+        }</span>
<a href="#l12.810"></a><span id="l12.810" class="difflineplus">+    }</span>
<a href="#l12.811"></a><span id="l12.811" class="difflineplus">+</span>
<a href="#l12.812"></a><span id="l12.812" class="difflineplus">+    // make sure our toolbar buttons have the correct enabled state restored to them...</span>
<a href="#l12.813"></a><span id="l12.813" class="difflineplus">+    document.commandDispatcher.updateCommands(&quot;itemCommands&quot;);</span>
<a href="#l12.814"></a><span id="l12.814" class="difflineplus">+</span>
<a href="#l12.815"></a><span id="l12.815" class="difflineplus">+    // Enable the toolbar context menu items</span>
<a href="#l12.816"></a><span id="l12.816" class="difflineplus">+    document.getElementById(&quot;cmd_customize&quot;).removeAttribute(&quot;disabled&quot;);</span>
<a href="#l12.817"></a><span id="l12.817" class="difflineplus">+</span>
<a href="#l12.818"></a><span id="l12.818" class="difflineplus">+    // Update privacy items to make sure the toolbarbutton's menupopup is set</span>
<a href="#l12.819"></a><span id="l12.819" class="difflineplus">+    // correctly</span>
<a href="#l12.820"></a><span id="l12.820" class="difflineplus">+    updatePrivacy(gConfig);</span>
<a href="#l12.821"></a><span id="l12.821" class="difflineplus">+}</span>
<a href="#l12.822"></a><span id="l12.822" class="difflineplus">+</span>
<a href="#l12.823"></a><span id="l12.823" class="difflineplus">+/**</span>
<a href="#l12.824"></a><span id="l12.824" class="difflineplus">+ * Handler to start the customize toolbar dialog for the event dialog's toolbar.</span>
<a href="#l12.825"></a><span id="l12.825" class="difflineplus">+ */</span>
<a href="#l12.826"></a><span id="l12.826" class="difflineplus">+function onCommandCustomize() {</span>
<a href="#l12.827"></a><span id="l12.827" class="difflineplus">+    // install the callback that handles what needs to be</span>
<a href="#l12.828"></a><span id="l12.828" class="difflineplus">+    // done after a toolbar has been customized.</span>
<a href="#l12.829"></a><span id="l12.829" class="difflineplus">+    let toolboxId = &quot;event-toolbox&quot;;</span>
<a href="#l12.830"></a><span id="l12.830" class="difflineplus">+</span>
<a href="#l12.831"></a><span id="l12.831" class="difflineplus">+    let toolbox = document.getElementById(toolboxId);</span>
<a href="#l12.832"></a><span id="l12.832" class="difflineplus">+    toolbox.customizeDone = dialogToolboxCustomizeDone;</span>
<a href="#l12.833"></a><span id="l12.833" class="difflineplus">+</span>
<a href="#l12.834"></a><span id="l12.834" class="difflineplus">+    let menubar = document.getElementById(&quot;event-menubar&quot;);</span>
<a href="#l12.835"></a><span id="l12.835" class="difflineplus">+    // XXX We need to disable certain menu items when in a tab.</span>
<a href="#l12.836"></a><span id="l12.836" class="difflineplus">+    if (menubar) {</span>
<a href="#l12.837"></a><span id="l12.837" class="difflineplus">+        for (let i = 0; i &lt; menubar.childNodes.length; ++i) {</span>
<a href="#l12.838"></a><span id="l12.838" class="difflineplus">+            menubar.childNodes[i].setAttribute(&quot;disabled&quot;, true);</span>
<a href="#l12.839"></a><span id="l12.839" class="difflineplus">+        }</span>
<a href="#l12.840"></a><span id="l12.840" class="difflineplus">+    }</span>
<a href="#l12.841"></a><span id="l12.841" class="difflineplus">+</span>
<a href="#l12.842"></a><span id="l12.842" class="difflineplus">+    // Disable the toolbar context menu items</span>
<a href="#l12.843"></a><span id="l12.843" class="difflineplus">+    document.getElementById(&quot;cmd_customize&quot;).setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l12.844"></a><span id="l12.844" class="difflineplus">+</span>
<a href="#l12.845"></a><span id="l12.845" class="difflineplus">+    let wintype = document.documentElement.getAttribute(&quot;windowtype&quot;);</span>
<a href="#l12.846"></a><span id="l12.846" class="difflineplus">+    wintype = wintype.replace(/:/g, &quot;&quot;);</span>
<a href="#l12.847"></a><span id="l12.847" class="difflineplus">+</span>
<a href="#l12.848"></a><span id="l12.848" class="difflineplus">+    window.openDialog(&quot;chrome://global/content/customizeToolbar.xul&quot;,</span>
<a href="#l12.849"></a><span id="l12.849" class="difflineplus">+                      &quot;CustomizeToolbar&quot; + wintype,</span>
<a href="#l12.850"></a><span id="l12.850" class="difflineplus">+                      &quot;chrome,all,dependent&quot;,</span>
<a href="#l12.851"></a><span id="l12.851" class="difflineplus">+                      document.getElementById(toolboxId), // toolbox dom node</span>
<a href="#l12.852"></a><span id="l12.852" class="difflineplus">+                      false,                              // is mode toolbar yes/no?</span>
<a href="#l12.853"></a><span id="l12.853" class="difflineplus">+                      null,                               // callback function</span>
<a href="#l12.854"></a><span id="l12.854" class="difflineplus">+                      &quot;dialog&quot;);                          // name of this mode</span>
<a href="#l12.855"></a><span id="l12.855" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-panel.xul</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,273 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+&lt;!-- lightning-toolbar.dtd is only needed for the app menu button --&gt;</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+&lt;!DOCTYPE overlay [</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+    &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://calendar/locale/global.dtd&quot;&gt;</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+    &lt;!ENTITY % calendarDTD SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot;&gt;</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+    &lt;!ENTITY % eventDialogDTD SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt;</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+    &lt;!ENTITY % toolbarDTD SYSTEM &quot;chrome://lightning/locale/lightning-toolbar.dtd&quot;&gt;</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+    %brandDTD;</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+    %globalDTD;</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+    %calendarDTD;</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+    %eventDialogDTD;</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+    %toolbarDTD;</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+]&gt;</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+&lt;?xul-overlay href=&quot;chrome://lightning/content/lightning-item-toolbar.xul&quot;?&gt;</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+&lt;overlay id=&quot;ltnCalendarItemPanelContentOverlay&quot;</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineplus">+  &lt;tabpanels id=&quot;tabpanelcontainer&quot;&gt;</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+    &lt;vbox id=&quot;lightningItemPanel&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+      &lt;!-- The id of the inner vbox and the iframe are set dynamically</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineplus">+           when a tab is created. --&gt;</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+      &lt;vbox flex=&quot;1&quot;</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+            id=&quot;dummy-calendar-event-dialog-tab&quot;</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+            class=&quot;calendar-event-dialog-tab&quot;&gt;</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineplus">+</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+        &lt;stringbundleset id=&quot;stringbundleset&quot;&gt;</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+          &lt;stringbundle id=&quot;languageBundle&quot;</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineplus">+                        src=&quot;chrome://global/locale/languageNames.properties&quot;/&gt;</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineplus">+        &lt;/stringbundleset&gt;</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineplus">+</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+        &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineplus">+                src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineplus">+</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+        &lt;!-- Command updater --&gt;</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineplus">+        &lt;commandset id=&quot;globalEditMenuItems&quot;</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+                    commandupdater=&quot;true&quot;</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineplus">+                    events=&quot;focus&quot;</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineplus">+                    oncommandupdate=&quot;goUpdateGlobalEditMenuItems()&quot;/&gt;</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+        &lt;commandset id=&quot;selectEditMenuItems&quot;</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineplus">+                    commandupdater=&quot;true&quot;</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineplus">+                    events=&quot;select&quot;</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineplus">+                    oncommandupdate=&quot;goUpdateSelectEditMenuItems()&quot;/&gt;</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineplus">+        &lt;commandset id=&quot;undoEditMenuItems&quot;</span>
<a href="#l13.56"></a><span id="l13.56" class="difflineplus">+                    commandupdater=&quot;true&quot;</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineplus">+                    events=&quot;undo&quot;</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineplus">+                    oncommandupdate=&quot;goUpdateUndoEditMenuItems()&quot;/&gt;</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineplus">+        &lt;commandset id=&quot;clipboardEditMenuItems&quot;</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineplus">+                    commandupdater=&quot;true&quot;</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineplus">+                    events=&quot;clipboard&quot;</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineplus">+                    oncommandupdate=&quot;goUpdatePasteMenuItems()&quot;/&gt;</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineplus">+</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineplus">+        &lt;!-- Commands --&gt;</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineplus">+        &lt;commandset id=&quot;itemCommands&quot;&gt;</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineplus">+</span>
<a href="#l13.67"></a><span id="l13.67" class="difflineplus">+          &lt;!-- Item menu --&gt;</span>
<a href="#l13.68"></a><span id="l13.68" class="difflineplus">+          &lt;command id=&quot;cmd_item_new_event&quot;</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineplus">+                   oncommand=&quot;openNewEvent()&quot;/&gt;</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineplus">+          &lt;command id=&quot;cmd_item_new_task&quot;</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineplus">+                   oncommand=&quot;openNewTask()&quot;/&gt;</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineplus">+          &lt;command id=&quot;cmd_item_new_message&quot;</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineplus">+                   oncommand=&quot;openNewMessage()&quot;/&gt;</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineplus">+          &lt;command id=&quot;cmd_item_new_card&quot;</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineplus">+                   oncommand=&quot;openNewCardDialog()&quot;/&gt;</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineplus">+          &lt;command id=&quot;cmd_item_close&quot;</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineplus">+                   oncommand=&quot;cancelDialog()&quot;/&gt;</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineplus">+          &lt;command id=&quot;cmd_save&quot;</span>
<a href="#l13.79"></a><span id="l13.79" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineplus">+                   oncommand=&quot;onCommandSave()&quot;/&gt;</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineplus">+          &lt;command id=&quot;cmd_item_delete&quot;</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineplus">+                   oncommand=&quot;onCommandDeleteItem()&quot;/&gt;</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineplus">+          &lt;command id=&quot;cmd_printSetup&quot;</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineplus">+                   oncommand=&quot;PrintUtils.showPageSetup()&quot;/&gt;</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineplus">+          &lt;command id=&quot;cmd_print&quot;</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineplus">+                   oncommand=&quot;calPrint()&quot;/&gt;</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineplus">+</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineplus">+          &lt;!-- Edit menu --&gt;</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineplus">+          &lt;command id=&quot;cmd_undo&quot;</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineplus">+                   oncommand=&quot;goDoCommand('cmd_undo')&quot;/&gt;</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineplus">+          &lt;command id=&quot;cmd_redo&quot;</span>
<a href="#l13.95"></a><span id="l13.95" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineplus">+                   oncommand=&quot;goDoCommand('cmd_redo')&quot;/&gt;</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineplus">+          &lt;command id=&quot;cmd_cut&quot;</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineplus">+                   oncommand=&quot;goDoCommand('cmd_cut')&quot;/&gt;</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineplus">+          &lt;command id=&quot;cmd_copy&quot;</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineplus">+                   oncommand=&quot;goDoCommand('cmd_copy')&quot;/&gt;</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineplus">+          &lt;command id=&quot;cmd_paste&quot;</span>
<a href="#l13.104"></a><span id="l13.104" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineplus">+                   oncommand=&quot;goDoCommand('cmd_paste')&quot;/&gt;</span>
<a href="#l13.106"></a><span id="l13.106" class="difflineplus">+          &lt;command id=&quot;cmd_selectAll&quot;</span>
<a href="#l13.107"></a><span id="l13.107" class="difflineplus">+                   disabled=&quot;true&quot;</span>
<a href="#l13.108"></a><span id="l13.108" class="difflineplus">+                   oncommand=&quot;goDoCommand('cmd_selectAll')&quot;/&gt;</span>
<a href="#l13.109"></a><span id="l13.109" class="difflineplus">+</span>
<a href="#l13.110"></a><span id="l13.110" class="difflineplus">+          &lt;!-- View menu --&gt;</span>
<a href="#l13.111"></a><span id="l13.111" class="difflineplus">+          &lt;command id=&quot;cmd_toolbar&quot;</span>
<a href="#l13.112"></a><span id="l13.112" class="difflineplus">+                   oncommand=&quot;onCommandViewToolbar('event-toolbar',</span>
<a href="#l13.113"></a><span id="l13.113" class="difflineplus">+                                                   'view-toolbars-event-menuitem')&quot;/&gt;</span>
<a href="#l13.114"></a><span id="l13.114" class="difflineplus">+          &lt;command id=&quot;cmd_customize&quot;</span>
<a href="#l13.115"></a><span id="l13.115" class="difflineplus">+                   oncommand=&quot;onCommandCustomize()&quot;/&gt;</span>
<a href="#l13.116"></a><span id="l13.116" class="difflineplus">+          &lt;command id=&quot;cmd_toggle_link&quot;</span>
<a href="#l13.117"></a><span id="l13.117" class="difflineplus">+                   persist=&quot;checked&quot;</span>
<a href="#l13.118"></a><span id="l13.118" class="difflineplus">+                   oncommand=&quot;toggleLink()&quot;/&gt;</span>
<a href="#l13.119"></a><span id="l13.119" class="difflineplus">+</span>
<a href="#l13.120"></a><span id="l13.120" class="difflineplus">+          &lt;!-- status --&gt;</span>
<a href="#l13.121"></a><span id="l13.121" class="difflineplus">+          &lt;command id=&quot;cmd_status_none&quot;</span>
<a href="#l13.122"></a><span id="l13.122" class="difflineplus">+                   oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l13.123"></a><span id="l13.123" class="difflineplus">+                   hidden=&quot;true&quot;</span>
<a href="#l13.124"></a><span id="l13.124" class="difflineplus">+                   value=&quot;NONE&quot;/&gt;</span>
<a href="#l13.125"></a><span id="l13.125" class="difflineplus">+          &lt;command id=&quot;cmd_status_tentative&quot;</span>
<a href="#l13.126"></a><span id="l13.126" class="difflineplus">+                   oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l13.127"></a><span id="l13.127" class="difflineplus">+                   value=&quot;TENTATIVE&quot;/&gt;</span>
<a href="#l13.128"></a><span id="l13.128" class="difflineplus">+          &lt;command id=&quot;cmd_status_confirmed&quot;</span>
<a href="#l13.129"></a><span id="l13.129" class="difflineplus">+                   oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l13.130"></a><span id="l13.130" class="difflineplus">+                   value=&quot;CONFIRMED&quot;/&gt;</span>
<a href="#l13.131"></a><span id="l13.131" class="difflineplus">+          &lt;command id=&quot;cmd_status_cancelled&quot;</span>
<a href="#l13.132"></a><span id="l13.132" class="difflineplus">+                   oncommand=&quot;editStatus(event.target)&quot;</span>
<a href="#l13.133"></a><span id="l13.133" class="difflineplus">+                   value=&quot;CANCELLED&quot;/&gt;</span>
<a href="#l13.134"></a><span id="l13.134" class="difflineplus">+</span>
<a href="#l13.135"></a><span id="l13.135" class="difflineplus">+          &lt;!-- priority --&gt;</span>
<a href="#l13.136"></a><span id="l13.136" class="difflineplus">+          &lt;command id=&quot;cmd_priority_none&quot;</span>
<a href="#l13.137"></a><span id="l13.137" class="difflineplus">+                   oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l13.138"></a><span id="l13.138" class="difflineplus">+                   value=&quot;0&quot;/&gt;</span>
<a href="#l13.139"></a><span id="l13.139" class="difflineplus">+          &lt;command id=&quot;cmd_priority_low&quot;</span>
<a href="#l13.140"></a><span id="l13.140" class="difflineplus">+                   oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l13.141"></a><span id="l13.141" class="difflineplus">+                   value=&quot;9&quot;/&gt;</span>
<a href="#l13.142"></a><span id="l13.142" class="difflineplus">+          &lt;command id=&quot;cmd_priority_normal&quot;</span>
<a href="#l13.143"></a><span id="l13.143" class="difflineplus">+                   oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l13.144"></a><span id="l13.144" class="difflineplus">+                   value=&quot;5&quot;/&gt;</span>
<a href="#l13.145"></a><span id="l13.145" class="difflineplus">+          &lt;command id=&quot;cmd_priority_high&quot;</span>
<a href="#l13.146"></a><span id="l13.146" class="difflineplus">+                   oncommand=&quot;editPriority(event.target)&quot;</span>
<a href="#l13.147"></a><span id="l13.147" class="difflineplus">+                   value=&quot;1&quot;/&gt;</span>
<a href="#l13.148"></a><span id="l13.148" class="difflineplus">+</span>
<a href="#l13.149"></a><span id="l13.149" class="difflineplus">+          &lt;!-- freebusy --&gt;</span>
<a href="#l13.150"></a><span id="l13.150" class="difflineplus">+          &lt;command id=&quot;cmd_showtimeas_busy&quot;</span>
<a href="#l13.151"></a><span id="l13.151" class="difflineplus">+                   oncommand=&quot;editShowTimeAs(event.target)&quot;</span>
<a href="#l13.152"></a><span id="l13.152" class="difflineplus">+                   value=&quot;OPAQUE&quot;/&gt;</span>
<a href="#l13.153"></a><span id="l13.153" class="difflineplus">+          &lt;command id=&quot;cmd_showtimeas_free&quot;</span>
<a href="#l13.154"></a><span id="l13.154" class="difflineplus">+                   oncommand=&quot;editShowTimeAs(event.target)&quot;</span>
<a href="#l13.155"></a><span id="l13.155" class="difflineplus">+                   value=&quot;TRANSPARENT&quot;/&gt;</span>
<a href="#l13.156"></a><span id="l13.156" class="difflineplus">+</span>
<a href="#l13.157"></a><span id="l13.157" class="difflineplus">+          &lt;!-- attendees --&gt;</span>
<a href="#l13.158"></a><span id="l13.158" class="difflineplus">+          &lt;command id=&quot;cmd_attendees&quot;</span>
<a href="#l13.159"></a><span id="l13.159" class="difflineplus">+                   oncommand=&quot;editAttendees();&quot;/&gt;</span>
<a href="#l13.160"></a><span id="l13.160" class="difflineplus">+</span>
<a href="#l13.161"></a><span id="l13.161" class="difflineplus">+          &lt;!-- accept, attachments, timezone --&gt;</span>
<a href="#l13.162"></a><span id="l13.162" class="difflineplus">+          &lt;command id=&quot;cmd_accept&quot;</span>
<a href="#l13.163"></a><span id="l13.163" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l13.164"></a><span id="l13.164" class="difflineplus">+                   oncommand=&quot;onAccept();&quot;/&gt;</span>
<a href="#l13.165"></a><span id="l13.165" class="difflineplus">+          &lt;command id=&quot;cmd_attach_url&quot;</span>
<a href="#l13.166"></a><span id="l13.166" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l13.167"></a><span id="l13.167" class="difflineplus">+                   oncommand=&quot;attachURL()&quot;/&gt;</span>
<a href="#l13.168"></a><span id="l13.168" class="difflineplus">+          &lt;command id=&quot;cmd_timezone&quot;</span>
<a href="#l13.169"></a><span id="l13.169" class="difflineplus">+                   persist=&quot;checked&quot;</span>
<a href="#l13.170"></a><span id="l13.170" class="difflineplus">+                   checked=&quot;false&quot;</span>
<a href="#l13.171"></a><span id="l13.171" class="difflineplus">+                   oncommand=&quot;toggleTimezoneLinks()&quot;/&gt;</span>
<a href="#l13.172"></a><span id="l13.172" class="difflineplus">+        &lt;/commandset&gt;</span>
<a href="#l13.173"></a><span id="l13.173" class="difflineplus">+</span>
<a href="#l13.174"></a><span id="l13.174" class="difflineplus">+        &lt;keyset id=&quot;calendar-event-dialog-keyset&quot;&gt;</span>
<a href="#l13.175"></a><span id="l13.175" class="difflineplus">+          &lt;key id=&quot;new-event-key&quot;</span>
<a href="#l13.176"></a><span id="l13.176" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.177"></a><span id="l13.177" class="difflineplus">+               key=&quot;&amp;event.dialog.new.event.key2;&quot;</span>
<a href="#l13.178"></a><span id="l13.178" class="difflineplus">+               command=&quot;cmd_item_new_event&quot;/&gt;</span>
<a href="#l13.179"></a><span id="l13.179" class="difflineplus">+          &lt;key id=&quot;new-task-key&quot;</span>
<a href="#l13.180"></a><span id="l13.180" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.181"></a><span id="l13.181" class="difflineplus">+               key=&quot;&amp;event.dialog.new.task.key2;&quot;</span>
<a href="#l13.182"></a><span id="l13.182" class="difflineplus">+               command=&quot;cmd_item_new_task&quot;/&gt;</span>
<a href="#l13.183"></a><span id="l13.183" class="difflineplus">+          &lt;key id=&quot;new-message-key&quot;</span>
<a href="#l13.184"></a><span id="l13.184" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.185"></a><span id="l13.185" class="difflineplus">+               key=&quot;&amp;event.dialog.new.message.key2;&quot;</span>
<a href="#l13.186"></a><span id="l13.186" class="difflineplus">+               command=&quot;cmd_item_new_message&quot;/&gt;</span>
<a href="#l13.187"></a><span id="l13.187" class="difflineplus">+          &lt;key id=&quot;close-key&quot;</span>
<a href="#l13.188"></a><span id="l13.188" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.189"></a><span id="l13.189" class="difflineplus">+               key=&quot;&amp;event.dialog.close.key;&quot;</span>
<a href="#l13.190"></a><span id="l13.190" class="difflineplus">+               command=&quot;cmd_item_close&quot;/&gt;</span>
<a href="#l13.191"></a><span id="l13.191" class="difflineplus">+          &lt;key id=&quot;save-key&quot;</span>
<a href="#l13.192"></a><span id="l13.192" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.193"></a><span id="l13.193" class="difflineplus">+               key=&quot;&amp;event.dialog.save.key;&quot;</span>
<a href="#l13.194"></a><span id="l13.194" class="difflineplus">+               command=&quot;cmd_save&quot;/&gt;</span>
<a href="#l13.195"></a><span id="l13.195" class="difflineplus">+          &lt;key id=&quot;saveandclose-key&quot;</span>
<a href="#l13.196"></a><span id="l13.196" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.197"></a><span id="l13.197" class="difflineplus">+               key=&quot;&amp;event.dialog.saveandclose.key;&quot;</span>
<a href="#l13.198"></a><span id="l13.198" class="difflineplus">+               command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l13.199"></a><span id="l13.199" class="difflineplus">+          &lt;key id=&quot;saveandclose-key2&quot;</span>
<a href="#l13.200"></a><span id="l13.200" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.201"></a><span id="l13.201" class="difflineplus">+               keycode=&quot;VK_RETURN&quot;</span>
<a href="#l13.202"></a><span id="l13.202" class="difflineplus">+               command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l13.203"></a><span id="l13.203" class="difflineplus">+          &lt;key id=&quot;print-key&quot;</span>
<a href="#l13.204"></a><span id="l13.204" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.205"></a><span id="l13.205" class="difflineplus">+               key=&quot;&amp;event.dialog.print.key;&quot;</span>
<a href="#l13.206"></a><span id="l13.206" class="difflineplus">+               command=&quot;cmd_print&quot;/&gt;</span>
<a href="#l13.207"></a><span id="l13.207" class="difflineplus">+          &lt;key id=&quot;undo-key&quot;</span>
<a href="#l13.208"></a><span id="l13.208" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.209"></a><span id="l13.209" class="difflineplus">+               key=&quot;&amp;event.dialog.undo.key;&quot;</span>
<a href="#l13.210"></a><span id="l13.210" class="difflineplus">+               command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l13.211"></a><span id="l13.211" class="difflineplus">+          &lt;key id=&quot;redo-key&quot;</span>
<a href="#l13.212"></a><span id="l13.212" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.213"></a><span id="l13.213" class="difflineplus">+               key=&quot;&amp;event.dialog.redo.key;&quot;</span>
<a href="#l13.214"></a><span id="l13.214" class="difflineplus">+               command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l13.215"></a><span id="l13.215" class="difflineplus">+          &lt;key id=&quot;cut-key&quot;</span>
<a href="#l13.216"></a><span id="l13.216" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.217"></a><span id="l13.217" class="difflineplus">+               key=&quot;&amp;event.dialog.cut.key;&quot;</span>
<a href="#l13.218"></a><span id="l13.218" class="difflineplus">+               command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l13.219"></a><span id="l13.219" class="difflineplus">+          &lt;key id=&quot;copy-key&quot;</span>
<a href="#l13.220"></a><span id="l13.220" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.221"></a><span id="l13.221" class="difflineplus">+               key=&quot;&amp;event.dialog.copy.key;&quot;</span>
<a href="#l13.222"></a><span id="l13.222" class="difflineplus">+               command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l13.223"></a><span id="l13.223" class="difflineplus">+          &lt;key id=&quot;paste-key&quot;</span>
<a href="#l13.224"></a><span id="l13.224" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.225"></a><span id="l13.225" class="difflineplus">+               key=&quot;&amp;event.dialog.paste.key;&quot;</span>
<a href="#l13.226"></a><span id="l13.226" class="difflineplus">+               command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l13.227"></a><span id="l13.227" class="difflineplus">+          &lt;key id=&quot;select-all-key&quot;</span>
<a href="#l13.228"></a><span id="l13.228" class="difflineplus">+               modifiers=&quot;accel&quot;</span>
<a href="#l13.229"></a><span id="l13.229" class="difflineplus">+               key=&quot;&amp;event.dialog.select.all.key;&quot;</span>
<a href="#l13.230"></a><span id="l13.230" class="difflineplus">+               command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l13.231"></a><span id="l13.231" class="difflineplus">+        &lt;/keyset&gt;</span>
<a href="#l13.232"></a><span id="l13.232" class="difflineplus">+</span>
<a href="#l13.233"></a><span id="l13.233" class="difflineplus">+        &lt;toolbox id=&quot;event-toolbox&quot;</span>
<a href="#l13.234"></a><span id="l13.234" class="difflineplus">+                 class=&quot;mail-toolbox&quot;</span>
<a href="#l13.235"></a><span id="l13.235" class="difflineplus">+                 mode=&quot;full&quot;</span>
<a href="#l13.236"></a><span id="l13.236" class="difflineplus">+                 defaultmode=&quot;full&quot;</span>
<a href="#l13.237"></a><span id="l13.237" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l13.238"></a><span id="l13.238" class="difflineplus">+                 iconsize=&quot;small&quot;</span>
<a href="#l13.239"></a><span id="l13.239" class="difflineplus">+                 defaulticonsize=&quot;small&quot;</span>
<a href="#l13.240"></a><span id="l13.240" class="difflineplus">+#endif</span>
<a href="#l13.241"></a><span id="l13.241" class="difflineplus">+                 labelalign=&quot;end&quot;</span>
<a href="#l13.242"></a><span id="l13.242" class="difflineplus">+                 defaultlabelalign=&quot;end&quot;&gt;</span>
<a href="#l13.243"></a><span id="l13.243" class="difflineplus">+          &lt;!-- more toolbarpalette items are added with an overlay --&gt;</span>
<a href="#l13.244"></a><span id="l13.244" class="difflineplus">+          &lt;toolbarpalette id=&quot;event-toolbarpalette&quot;&gt;</span>
<a href="#l13.245"></a><span id="l13.245" class="difflineplus">+            &lt;toolbarbutton id=&quot;calendar-item-appmenu-button&quot;</span>
<a href="#l13.246"></a><span id="l13.246" class="difflineplus">+                           class=&quot;toolbarbutton-1 button-appmenu&quot;</span>
<a href="#l13.247"></a><span id="l13.247" class="difflineplus">+                           label=&quot;&amp;lightning.toolbar.appmenuButton.label;&quot;</span>
<a href="#l13.248"></a><span id="l13.248" class="difflineplus">+                           tooltiptext=&quot;&amp;lightning.toolbar.appmenuButton1.tooltip;&quot;/&gt;</span>
<a href="#l13.249"></a><span id="l13.249" class="difflineplus">+          &lt;/toolbarpalette&gt;</span>
<a href="#l13.250"></a><span id="l13.250" class="difflineplus">+          &lt;!-- toolboxid is set here since we move the toolbar around for tabs --&gt;</span>
<a href="#l13.251"></a><span id="l13.251" class="difflineplus">+          &lt;toolbar id=&quot;event-tab-toolbar&quot;</span>
<a href="#l13.252"></a><span id="l13.252" class="difflineplus">+                   toolboxid=&quot;event-toolbox&quot;</span>
<a href="#l13.253"></a><span id="l13.253" class="difflineplus">+                   class=&quot;chromeclass-toolbar inline-toolbar&quot;</span>
<a href="#l13.254"></a><span id="l13.254" class="difflineplus">+                   customizable=&quot;true&quot;</span>
<a href="#l13.255"></a><span id="l13.255" class="difflineplus">+                   labelalign=&quot;end&quot;</span>
<a href="#l13.256"></a><span id="l13.256" class="difflineplus">+                   defaultlabelalign=&quot;end&quot;</span>
<a href="#l13.257"></a><span id="l13.257" class="difflineplus">+                   context=&quot;event-dialog-toolbar-context-menu&quot;</span>
<a href="#l13.258"></a><span id="l13.258" class="difflineplus">+                   defaultset=&quot;button-save,button-attendees,button-privacy,button-url,button-priority,button-status,button-freebusy,button-delete,spring,calendar-item-appmenu-button&quot;/&gt;</span>
<a href="#l13.259"></a><span id="l13.259" class="difflineplus">+          &lt;toolbarset id=&quot;custom-toolbars&quot;/&gt;</span>
<a href="#l13.260"></a><span id="l13.260" class="difflineplus">+        &lt;/toolbox&gt;</span>
<a href="#l13.261"></a><span id="l13.261" class="difflineplus">+</span>
<a href="#l13.262"></a><span id="l13.262" class="difflineplus">+        &lt;iframe id=&quot;lightning-item-panel-iframe&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l13.263"></a><span id="l13.263" class="difflineplus">+</span>
<a href="#l13.264"></a><span id="l13.264" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l13.265"></a><span id="l13.265" class="difflineplus">+    &lt;/vbox&gt;</span>
<a href="#l13.266"></a><span id="l13.266" class="difflineplus">+  &lt;/tabpanels&gt;</span>
<a href="#l13.267"></a><span id="l13.267" class="difflineplus">+</span>
<a href="#l13.268"></a><span id="l13.268" class="difflineplus">+  &lt;popupset id=&quot;calendar-popupset&quot;&gt;</span>
<a href="#l13.269"></a><span id="l13.269" class="difflineplus">+    &lt;menupopup id=&quot;event-dialog-toolbar-context-menu&quot;&gt;</span>
<a href="#l13.270"></a><span id="l13.270" class="difflineplus">+      &lt;menuitem id=&quot;CustomizeDialogToolbar&quot;</span>
<a href="#l13.271"></a><span id="l13.271" class="difflineplus">+                label=&quot;&amp;event.menu.view.toolbars.customize.label;&quot;</span>
<a href="#l13.272"></a><span id="l13.272" class="difflineplus">+                command=&quot;cmd_customize&quot;/&gt;</span>
<a href="#l13.273"></a><span id="l13.273" class="difflineplus">+    &lt;/menupopup&gt;</span>
<a href="#l13.274"></a><span id="l13.274" class="difflineplus">+  &lt;/popupset&gt;</span>
<a href="#l13.275"></a><span id="l13.275" class="difflineplus">+</span>
<a href="#l13.276"></a><span id="l13.276" class="difflineplus">+&lt;/overlay&gt;</span>
<a href="#l13.277"></a><span id="l13.277" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- /dev/null</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-toolbar.xul</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -0,0 +1,176 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+&lt;!DOCTYPE overlay [</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineplus">+    &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+    &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://calendar/locale/global.dtd&quot;&gt;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    &lt;!ENTITY % calendarDTD SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot;&gt;</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+    &lt;!ENTITY % eventDialogDTD SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt;</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+    %brandDTD;</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+    %globalDTD;</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+    %calendarDTD;</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+    %eventDialogDTD;</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+]&gt;</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineplus">+</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineplus">+&lt;overlay id=&quot;ltnCalendarItemPanelContentOverlay&quot;</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineplus">+  &lt;toolbarpalette id=&quot;event-toolbarpalette&quot;&gt;</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+    &lt;!-- this is &quot;save and close&quot; --&gt;</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-save&quot;</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineplus">+                   label=&quot;&amp;event.toolbar.save.label;&quot;</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.save.tooltip;&quot;</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+                   command=&quot;cmd_accept&quot;/&gt;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-attendees&quot;</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1 event-only&quot;</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+                   label=&quot;&amp;event.toolbar.attendees.label;&quot;</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.attendees.tooltip;&quot;</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+                   command=&quot;cmd_attendees&quot;/&gt;</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-privacy&quot;</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+                   type=&quot;menu-button&quot;</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineplus">+                   label=&quot;&amp;event.toolbar.privacy.label;&quot;</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.privacy.tooltip;&quot;</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineplus">+                   oncommand=&quot;rotatePrivacy()&quot;&gt;</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineplus">+      &lt;menupopup id=&quot;event-privacy-menupopup&quot;&gt;</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+        &lt;menuitem id=&quot;event-privacy-public-menuitem&quot;</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineplus">+                  name=&quot;event-privacy-group&quot;</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineplus">+                  label=&quot;&amp;event.menu.options.privacy.public.label;&quot;</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineplus">+                  privacy=&quot;PUBLIC&quot;</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineplus">+                  oncommand=&quot;editPrivacy(this, event)&quot;/&gt;</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineplus">+        &lt;menuitem id=&quot;event-privacy-confidential-menuitem&quot;</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineplus">+                  name=&quot;event-privacy-group&quot;</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineplus">+                  label=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineplus">+                  privacy=&quot;CONFIDENTIAL&quot;</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineplus">+                  oncommand=&quot;editPrivacy(this, event)&quot;/&gt;</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineplus">+        &lt;menuitem id=&quot;event-privacy-private-menuitem&quot;</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineplus">+                  name=&quot;event-privacy-group&quot;</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineplus">+                  label=&quot;&amp;event.menu.options.privacy.private.label;&quot;</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineplus">+                  privacy=&quot;PRIVATE&quot;</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineplus">+                  oncommand=&quot;editPrivacy(this, event)&quot;/&gt;</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineplus">+    &lt;/toolbarbutton&gt;</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-url&quot;</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineplus">+                   type=&quot;menu-button&quot;</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineplus">+                   label=&quot;&amp;event.attachments.menubutton.label;&quot;</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.attachments.tooltip;&quot;</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineplus">+                   command=&quot;cmd_attach_url&quot;</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;&gt;</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+      &lt;menupopup id=&quot;button-attach-menupopup&quot;&gt;</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineplus">+        &lt;menuitem id=&quot;button-attach-url&quot;</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineplus">+                  label=&quot;&amp;event.attachments.url.label;&quot;</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineplus">+                  command=&quot;cmd_attach_url&quot;/&gt;</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineplus">+    &lt;/toolbarbutton&gt;</span>
<a href="#l14.82"></a><span id="l14.82" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-delete&quot;</span>
<a href="#l14.83"></a><span id="l14.83" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineplus">+                   label=&quot;&amp;event.toolbar.delete.label;&quot;</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.delete.tooltip;&quot;</span>
<a href="#l14.87"></a><span id="l14.87" class="difflineplus">+                   command=&quot;cmd_item_delete&quot;</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;/&gt;</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-priority&quot;</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineplus">+                   type=&quot;menu-button&quot;</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineplus">+                   label=&quot;&amp;event.menu.options.priority2.label;&quot;</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.priority.tooltip;&quot;</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineplus">+                   oncommand=&quot;rotatePriority()&quot;&gt;</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineplus">+      &lt;menupopup id=&quot;event-priority-menupopup&quot;&gt;</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineplus">+        &lt;menuitem id=&quot;event-priority-none-menuitem&quot;</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineplus">+                  name=&quot;event-priority-group&quot;</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineplus">+                  label=&quot;&amp;event.menu.options.priority.notspecified.label;&quot;</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineplus">+                  command=&quot;cmd_priority_none&quot;/&gt;</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineplus">+        &lt;menuitem id=&quot;event-priority-low-menuitem&quot;</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineplus">+                  name=&quot;event-priority-group&quot;</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineplus">+                  label=&quot;&amp;event.menu.options.priority.low.label;&quot;</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineplus">+                  command=&quot;cmd_priority_low&quot;/&gt;</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineplus">+        &lt;menuitem id=&quot;event-priority-normal-menuitem&quot;</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineplus">+                  name=&quot;event-priority-group&quot;</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineplus">+                  label=&quot;&amp;event.menu.options.priority.normal.label;&quot;</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineplus">+                  command=&quot;cmd_priority_normal&quot;/&gt;</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineplus">+        &lt;menuitem id=&quot;event-priority-high-menuitem&quot;</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineplus">+                  name=&quot;event-priority-group&quot;</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineplus">+                  label=&quot;&amp;event.menu.options.priority.high.label;&quot;</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineplus">+                  command=&quot;cmd_priority_high&quot;/&gt;</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineplus">+    &lt;/toolbarbutton&gt;</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-status&quot;</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1 event-only&quot;</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineplus">+                   type=&quot;menu-button&quot;</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineplus">+                   label=&quot;&amp;newevent.status.label;&quot;</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.status.tooltip;&quot;</span>
<a href="#l14.127"></a><span id="l14.127" class="difflineplus">+                   oncommand=&quot;rotateStatus()&quot;&gt;</span>
<a href="#l14.128"></a><span id="l14.128" class="difflineplus">+      &lt;menupopup id=&quot;event-status-menupopup&quot;&gt;</span>
<a href="#l14.129"></a><span id="l14.129" class="difflineplus">+        &lt;menuitem id=&quot;event-status-none-menuitem&quot;</span>
<a href="#l14.130"></a><span id="l14.130" class="difflineplus">+                  name=&quot;event-status-group&quot;</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineplus">+                  label=&quot;&amp;newevent.eventStatus.none.label;&quot;</span>
<a href="#l14.132"></a><span id="l14.132" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.133"></a><span id="l14.133" class="difflineplus">+                  command=&quot;cmd_status_none&quot;/&gt;</span>
<a href="#l14.134"></a><span id="l14.134" class="difflineplus">+        &lt;menuitem id=&quot;event-status-tentative-menuitem&quot;</span>
<a href="#l14.135"></a><span id="l14.135" class="difflineplus">+                  name=&quot;event-status-group&quot;</span>
<a href="#l14.136"></a><span id="l14.136" class="difflineplus">+                  label=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l14.137"></a><span id="l14.137" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.138"></a><span id="l14.138" class="difflineplus">+                  command=&quot;cmd_status_tentative&quot;/&gt;</span>
<a href="#l14.139"></a><span id="l14.139" class="difflineplus">+        &lt;menuitem id=&quot;event-status-confirmed-menuitem&quot;</span>
<a href="#l14.140"></a><span id="l14.140" class="difflineplus">+                  name=&quot;event-status-group&quot;</span>
<a href="#l14.141"></a><span id="l14.141" class="difflineplus">+                  label=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l14.142"></a><span id="l14.142" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.143"></a><span id="l14.143" class="difflineplus">+                  command=&quot;cmd_status_confirmed&quot;/&gt;</span>
<a href="#l14.144"></a><span id="l14.144" class="difflineplus">+        &lt;menuitem id=&quot;event-status-cancelled-menuitem&quot;</span>
<a href="#l14.145"></a><span id="l14.145" class="difflineplus">+                  name=&quot;event-status-group&quot;</span>
<a href="#l14.146"></a><span id="l14.146" class="difflineplus">+                  label=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l14.147"></a><span id="l14.147" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.148"></a><span id="l14.148" class="difflineplus">+                  command=&quot;cmd_status_cancelled&quot;/&gt;</span>
<a href="#l14.149"></a><span id="l14.149" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l14.150"></a><span id="l14.150" class="difflineplus">+    &lt;/toolbarbutton&gt;</span>
<a href="#l14.151"></a><span id="l14.151" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-freebusy&quot;</span>
<a href="#l14.152"></a><span id="l14.152" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.153"></a><span id="l14.153" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1 event-only&quot;</span>
<a href="#l14.154"></a><span id="l14.154" class="difflineplus">+                   type=&quot;menu-button&quot;</span>
<a href="#l14.155"></a><span id="l14.155" class="difflineplus">+                   disable-on-readonly=&quot;true&quot;</span>
<a href="#l14.156"></a><span id="l14.156" class="difflineplus">+                   label=&quot;&amp;event.menu.options.show.time.label;&quot;</span>
<a href="#l14.157"></a><span id="l14.157" class="difflineplus">+                   tooltiptext=&quot;&amp;event.toolbar.freebusy.tooltip;&quot;</span>
<a href="#l14.158"></a><span id="l14.158" class="difflineplus">+                   oncommand=&quot;rotateShowTimeAs()&quot;&gt;</span>
<a href="#l14.159"></a><span id="l14.159" class="difflineplus">+      &lt;menupopup id=&quot;event-freebusy-menupopup&quot;&gt;</span>
<a href="#l14.160"></a><span id="l14.160" class="difflineplus">+        &lt;menuitem id=&quot;event-freebusy-busy-menuitem&quot;</span>
<a href="#l14.161"></a><span id="l14.161" class="difflineplus">+                  name=&quot;event-freebusy-group&quot;</span>
<a href="#l14.162"></a><span id="l14.162" class="difflineplus">+                  label=&quot;&amp;event.menu.options.show.time.busy.label;&quot;</span>
<a href="#l14.163"></a><span id="l14.163" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.164"></a><span id="l14.164" class="difflineplus">+                  command=&quot;cmd_showtimeas_busy&quot;/&gt;</span>
<a href="#l14.165"></a><span id="l14.165" class="difflineplus">+        &lt;menuitem id=&quot;event-freebusy-free-menuitem&quot;</span>
<a href="#l14.166"></a><span id="l14.166" class="difflineplus">+                  name=&quot;event-freebusy-group&quot;</span>
<a href="#l14.167"></a><span id="l14.167" class="difflineplus">+                  label=&quot;&amp;event.menu.options.show.time.free.label;&quot;</span>
<a href="#l14.168"></a><span id="l14.168" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l14.169"></a><span id="l14.169" class="difflineplus">+                  command=&quot;cmd_showtimeas_free&quot;/&gt;</span>
<a href="#l14.170"></a><span id="l14.170" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l14.171"></a><span id="l14.171" class="difflineplus">+    &lt;/toolbarbutton&gt;</span>
<a href="#l14.172"></a><span id="l14.172" class="difflineplus">+    &lt;toolbarbutton id=&quot;button-timezones&quot;</span>
<a href="#l14.173"></a><span id="l14.173" class="difflineplus">+                   mode=&quot;dialog&quot;</span>
<a href="#l14.174"></a><span id="l14.174" class="difflineplus">+                   type=&quot;checkbox&quot;</span>
<a href="#l14.175"></a><span id="l14.175" class="difflineplus">+                   class=&quot;cal-event-toolbarbutton toolbarbutton-1&quot;</span>
<a href="#l14.176"></a><span id="l14.176" class="difflineplus">+                   label=&quot;&amp;event.menu.options.timezone2.label;&quot;</span>
<a href="#l14.177"></a><span id="l14.177" class="difflineplus">+                   tooltiptext=&quot;&amp;event.menu.options.timezone2.label;&quot;</span>
<a href="#l14.178"></a><span id="l14.178" class="difflineplus">+                   command=&quot;cmd_timezone&quot;/&gt;</span>
<a href="#l14.179"></a><span id="l14.179" class="difflineplus">+  &lt;/toolbarpalette&gt;</span>
<a href="#l14.180"></a><span id="l14.180" class="difflineplus">+&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/lightning/content/lightning.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/lightning/content/lightning.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -145,16 +145,19 @@ pref(&quot;calendar.network.multirealm&quot;, fals</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5"> // Disable use of system colors in minimonth and calendar views</span>
<a href="#l15.6"></a><span id="l15.6"> pref(&quot;calendar.view.useSystemColors&quot;, false);</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8"> // Maximum number of iterations allowed when searching for the next matching</span>
<a href="#l15.9"></a><span id="l15.9"> // occurrence of a repeating item in calFilter</span>
<a href="#l15.10"></a><span id="l15.10"> pref(&quot;calendar.filter.maxiterations&quot;, 50);</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+// Edit events and tasks in a tab rather than a window.</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+pref(&quot;calendar.item.editInTab&quot;, false);</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+</span>
<a href="#l15.15"></a><span id="l15.15"> // Backend to use. false: libical, true: ical.js</span>
<a href="#l15.16"></a><span id="l15.16"> #ifdef NIGHTLY_BUILD</span>
<a href="#l15.17"></a><span id="l15.17"> pref(&quot;calendar.icaljs&quot;, true);</span>
<a href="#l15.18"></a><span id="l15.18"> #else</span>
<a href="#l15.19"></a><span id="l15.19"> pref(&quot;calendar.icaljs&quot;, false);</span>
<a href="#l15.20"></a><span id="l15.20"> #endif</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22"> // Calendar integration notification</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -126,28 +126,227 @@ var calendarTabType = {</span>
<a href="#l16.4"></a><span id="l16.4">       },</span>
<a href="#l16.5"></a><span id="l16.5"> </span>
<a href="#l16.6"></a><span id="l16.6">       supportsCommand: (aCommand, aTab) =&gt; calendarController2.supportsCommand(aCommand),</span>
<a href="#l16.7"></a><span id="l16.7">       isCommandEnabled: (aCommand, aTab) =&gt; calendarController2.isCommandEnabled(aCommand),</span>
<a href="#l16.8"></a><span id="l16.8">       doCommand: (aCommand, aTab) =&gt; calendarController2.doCommand(aCommand),</span>
<a href="#l16.9"></a><span id="l16.9">       onEvent: (aEvent, aTab) =&gt; calendarController2.onEvent(aEvent)</span>
<a href="#l16.10"></a><span id="l16.10">     }</span>
<a href="#l16.11"></a><span id="l16.11">   },</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-  /* because calendar does some direct menu manipulation, we need to change</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-   *  to the mail mode to clean up after those hacks.</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+  /**</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+   * Because calendar does some direct menu manipulation, we need to</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+   * change to the mail mode to clean up after those hacks.</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+   *</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineplus">+   * @param {Object} aTab  A tab info object</span>
<a href="#l16.20"></a><span id="l16.20">    */</span>
<a href="#l16.21"></a><span id="l16.21">   saveTabState: function(aTab) {</span>
<a href="#l16.22"></a><span id="l16.22">     ltnSwitch2Mail();</span>
<a href="#l16.23"></a><span id="l16.23">   }</span>
<a href="#l16.24"></a><span id="l16.24"> };</span>
<a href="#l16.25"></a><span id="l16.25"> </span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+/**</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+ * For details about tab info objects and the tabmail interface see:</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+ * comm-central/mail/base/content/mailTabs.js</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+ * comm-central/mail/base/content/tabmail.xml</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineplus">+ */</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineplus">+var calendarItemTabType = {</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+    name: &quot;calendarItem&quot;,</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+    perTabPanel: &quot;vbox&quot;,</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+    idNumber: 0,</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineplus">+    modes: {</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+        calendarEvent: {</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineplus">+            type: &quot;calendarEvent&quot;</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineplus">+        },</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineplus">+        calendarTask: {</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+            type: &quot;calendarTask&quot;</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineplus">+        }</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineplus">+    },</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineplus">+    /**</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineplus">+     * Opens an event tab or a task tab.</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+     *</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineplus">+     * @param {Object} aTab   A tab info object</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineplus">+     * @param {Object} aArgs  Contains data about the event/task</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+     */</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineplus">+    openTab: function(aTab, aArgs) {</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+        // Create a clone to use for this tab. Remove the cloned toolbox</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+        // and move the original toolbox into its place. There is only</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineplus">+        // one toolbox/toolbar so its settings are the same for all item tabs.</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+        let original = document.getElementById(&quot;lightningItemPanel&quot;).firstChild;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineplus">+        let clone = original.cloneNode(true);</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineplus">+        clone.querySelector(&quot;toolbox&quot;).remove();</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+        moveEventToolbox(clone);</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+        clone.setAttribute(&quot;id&quot;, &quot;calendarItemTab&quot; + this.idNumber);</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+        if (aTab.mode.type == &quot;calendarTask&quot;) {</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineplus">+            // For task tabs, css class hides event-specific toolbar buttons.</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+            clone.setAttribute(&quot;class&quot;, &quot;calendar-task-dialog-tab&quot;);</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+        }</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+        aTab.panel.appendChild(clone);</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineplus">+</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+        // Set up the iframe and store the iframe's id.</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineplus">+        aTab.iframe = aTab.panel.querySelector(&quot;iframe&quot;);</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineplus">+        let iframeId = &quot;calendarItemTabIframe&quot; + this.idNumber;</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+        aTab.iframe.setAttribute(&quot;id&quot;, iframeId);</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineplus">+        aTab.iframe.setAttribute(&quot;src&quot;, aArgs.url);</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+        gItemTabIds.push(iframeId);</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineplus">+</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+        // Generate and set the tab title.</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineplus">+        let strName;</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineplus">+        if (aTab.mode.type == &quot;calendarEvent&quot;) {</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineplus">+            strName = aArgs.calendarEvent.title ? &quot;editEventDialog&quot; : &quot;newEventDialog&quot;;</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineplus">+        } else if (aTab.mode.type == &quot;calendarTask&quot;) {</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineplus">+            strName = aArgs.calendarEvent.title ? &quot;editTaskDialog&quot; : &quot;newTaskDialog&quot;;</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineplus">+        } else {</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineplus">+            throw Components.results.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineplus">+        }</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineplus">+        // name is &quot;New Event&quot;, &quot;Edit Task&quot;, etc.</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineplus">+        let name = cal.calGetString(&quot;calendar&quot;, strName);</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineplus">+        aTab.title = name + &quot;: &quot; + (aArgs.calendarEvent.title || name);</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineplus">+</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+        // allowTabClose prevents the tab from being closed until we ask</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineplus">+        // the user if they want to save any unsaved changes.</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineplus">+        aTab.allowTabClose = false;</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineplus">+</span>
<a href="#l16.91"></a><span id="l16.91" class="difflineplus">+        // Put the arguments where they can be accessed easily</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineplus">+        // from the iframe. (window.arguments[0])</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineplus">+        aTab.iframe.contentWindow.arguments = [aArgs];</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineplus">+        this.idNumber += 1;</span>
<a href="#l16.96"></a><span id="l16.96" class="difflineplus">+    },</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineplus">+    /**</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineplus">+     * Saves a tab's state when it is deactivated / hidden.  The opposite of showTab.</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineplus">+     *</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+     * @param {Object} aTab  A tab info object</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineplus">+     */</span>
<a href="#l16.102"></a><span id="l16.102" class="difflineplus">+    saveTabState: function(aTab) {</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineplus">+        // save state</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineplus">+        aTab.itemTabConfig = {};</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineplus">+        Object.assign(aTab.itemTabConfig, gConfig);</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineplus">+</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineplus">+        // clear statusbar</span>
<a href="#l16.108"></a><span id="l16.108" class="difflineplus">+        let statusbar = document.getElementById(&quot;status-bar&quot;);</span>
<a href="#l16.109"></a><span id="l16.109" class="difflineplus">+        let items = statusbar.getElementsByClassName(&quot;event-dialog&quot;);</span>
<a href="#l16.110"></a><span id="l16.110" class="difflineplus">+        for (let item of items) {</span>
<a href="#l16.111"></a><span id="l16.111" class="difflineplus">+            item.setAttribute(&quot;collapsed&quot;, true);</span>
<a href="#l16.112"></a><span id="l16.112" class="difflineplus">+        }</span>
<a href="#l16.113"></a><span id="l16.113" class="difflineplus">+        // move toolbox to the place where it can be accessed later</span>
<a href="#l16.114"></a><span id="l16.114" class="difflineplus">+        let to = document.getElementById(&quot;lightningItemPanel&quot;).firstChild;</span>
<a href="#l16.115"></a><span id="l16.115" class="difflineplus">+        moveEventToolbox(to);</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineplus">+    },</span>
<a href="#l16.117"></a><span id="l16.117" class="difflineplus">+    /**</span>
<a href="#l16.118"></a><span id="l16.118" class="difflineplus">+     * Called when a tab is activated / shown.  The opposite of saveTabState.</span>
<a href="#l16.119"></a><span id="l16.119" class="difflineplus">+     *</span>
<a href="#l16.120"></a><span id="l16.120" class="difflineplus">+     * @param {Object} aTab  A tab info object</span>
<a href="#l16.121"></a><span id="l16.121" class="difflineplus">+     */</span>
<a href="#l16.122"></a><span id="l16.122" class="difflineplus">+    showTab: function(aTab) {</span>
<a href="#l16.123"></a><span id="l16.123" class="difflineplus">+        // move toolbox into place then load state</span>
<a href="#l16.124"></a><span id="l16.124" class="difflineplus">+        moveEventToolbox(aTab.panel.firstChild);</span>
<a href="#l16.125"></a><span id="l16.125" class="difflineplus">+        Object.assign(gConfig, aTab.itemTabConfig);</span>
<a href="#l16.126"></a><span id="l16.126" class="difflineplus">+        updateItemTabState(gConfig);</span>
<a href="#l16.127"></a><span id="l16.127" class="difflineplus">+    },</span>
<a href="#l16.128"></a><span id="l16.128" class="difflineplus">+    /**</span>
<a href="#l16.129"></a><span id="l16.129" class="difflineplus">+     * Called when there is a request to close a tab.  Using aTab.allowTabClose</span>
<a href="#l16.130"></a><span id="l16.130" class="difflineplus">+     * we first prevent the tab from closing so we can prompt the user</span>
<a href="#l16.131"></a><span id="l16.131" class="difflineplus">+     * about saving changes, then we allow the tab to close.</span>
<a href="#l16.132"></a><span id="l16.132" class="difflineplus">+     *</span>
<a href="#l16.133"></a><span id="l16.133" class="difflineplus">+     * @param {Object} aTab  A tab info object</span>
<a href="#l16.134"></a><span id="l16.134" class="difflineplus">+     */</span>
<a href="#l16.135"></a><span id="l16.135" class="difflineplus">+    tryCloseTab: function(aTab) {</span>
<a href="#l16.136"></a><span id="l16.136" class="difflineplus">+        if (aTab.allowTabClose) {</span>
<a href="#l16.137"></a><span id="l16.137" class="difflineplus">+            return true;</span>
<a href="#l16.138"></a><span id="l16.138" class="difflineplus">+        } else {</span>
<a href="#l16.139"></a><span id="l16.139" class="difflineplus">+            onCancel(aTab.iframe.id);</span>
<a href="#l16.140"></a><span id="l16.140" class="difflineplus">+            return false;</span>
<a href="#l16.141"></a><span id="l16.141" class="difflineplus">+        }</span>
<a href="#l16.142"></a><span id="l16.142" class="difflineplus">+    },</span>
<a href="#l16.143"></a><span id="l16.143" class="difflineplus">+    /**</span>
<a href="#l16.144"></a><span id="l16.144" class="difflineplus">+     * Closes a tab.</span>
<a href="#l16.145"></a><span id="l16.145" class="difflineplus">+     *</span>
<a href="#l16.146"></a><span id="l16.146" class="difflineplus">+     * @param {Object} aTab  A tab info object</span>
<a href="#l16.147"></a><span id="l16.147" class="difflineplus">+     */</span>
<a href="#l16.148"></a><span id="l16.148" class="difflineplus">+    closeTab: function(aTab) {</span>
<a href="#l16.149"></a><span id="l16.149" class="difflineplus">+        // Remove the iframe id from the array where they are stored.</span>
<a href="#l16.150"></a><span id="l16.150" class="difflineplus">+        let index = gItemTabIds.indexOf(aTab.iframe.id);</span>
<a href="#l16.151"></a><span id="l16.151" class="difflineplus">+        if (index != -1) {</span>
<a href="#l16.152"></a><span id="l16.152" class="difflineplus">+            gItemTabIds.splice(index, 1);</span>
<a href="#l16.153"></a><span id="l16.153" class="difflineplus">+        }</span>
<a href="#l16.154"></a><span id="l16.154" class="difflineplus">+        aTab.itemTabConfig = null;</span>
<a href="#l16.155"></a><span id="l16.155" class="difflineplus">+    },</span>
<a href="#l16.156"></a><span id="l16.156" class="difflineplus">+    /**</span>
<a href="#l16.157"></a><span id="l16.157" class="difflineplus">+     * Called when quitting the application (and/or closing the window).</span>
<a href="#l16.158"></a><span id="l16.158" class="difflineplus">+     * Saves an open tab's state to be able to restore it later.</span>
<a href="#l16.159"></a><span id="l16.159" class="difflineplus">+     *</span>
<a href="#l16.160"></a><span id="l16.160" class="difflineplus">+     * @param {Object} aTab  A tab info object</span>
<a href="#l16.161"></a><span id="l16.161" class="difflineplus">+     */</span>
<a href="#l16.162"></a><span id="l16.162" class="difflineplus">+    persistTab: function(aTab) {</span>
<a href="#l16.163"></a><span id="l16.163" class="difflineplus">+        let args = aTab.iframe.contentWindow.arguments[0];</span>
<a href="#l16.164"></a><span id="l16.164" class="difflineplus">+        // Serialize args, with manual handling of some properties.</span>
<a href="#l16.165"></a><span id="l16.165" class="difflineplus">+        // persistTab is called even for new events/tasks in tabs that</span>
<a href="#l16.166"></a><span id="l16.166" class="difflineplus">+        // were closed and never saved (for 'undo close tab'</span>
<a href="#l16.167"></a><span id="l16.167" class="difflineplus">+        // functionality), thus we confirm we have the expected values.</span>
<a href="#l16.168"></a><span id="l16.168" class="difflineplus">+        if (args &amp;&amp; args.calendar &amp;&amp; args.calendar.id &amp;&amp;</span>
<a href="#l16.169"></a><span id="l16.169" class="difflineplus">+            args.calendarEvent &amp;&amp; args.calendarEvent.id) {</span>
<a href="#l16.170"></a><span id="l16.170" class="difflineplus">+</span>
<a href="#l16.171"></a><span id="l16.171" class="difflineplus">+            let calendarId = args.calendar.id;</span>
<a href="#l16.172"></a><span id="l16.172" class="difflineplus">+            let itemId = args.calendarEvent.id;</span>
<a href="#l16.173"></a><span id="l16.173" class="difflineplus">+            // Handle null args.initialStartDateValue, just for good measure.</span>
<a href="#l16.174"></a><span id="l16.174" class="difflineplus">+            // Note that this is not the start date for the event or task.</span>
<a href="#l16.175"></a><span id="l16.175" class="difflineplus">+            let hasDateValue = args.initialStartDateValue &amp;&amp;</span>
<a href="#l16.176"></a><span id="l16.176" class="difflineplus">+                               args.initialStartDateValue.icalString;</span>
<a href="#l16.177"></a><span id="l16.177" class="difflineplus">+            let initialStartDate = hasDateValue</span>
<a href="#l16.178"></a><span id="l16.178" class="difflineplus">+                ? args.initialStartDateValue.icalString : null;</span>
<a href="#l16.179"></a><span id="l16.179" class="difflineplus">+</span>
<a href="#l16.180"></a><span id="l16.180" class="difflineplus">+            args.calendar = null;</span>
<a href="#l16.181"></a><span id="l16.181" class="difflineplus">+            args.calendarEvent = null;</span>
<a href="#l16.182"></a><span id="l16.182" class="difflineplus">+            args.initialStartDateValue = null;</span>
<a href="#l16.183"></a><span id="l16.183" class="difflineplus">+</span>
<a href="#l16.184"></a><span id="l16.184" class="difflineplus">+            return {</span>
<a href="#l16.185"></a><span id="l16.185" class="difflineplus">+                calendarId: calendarId,</span>
<a href="#l16.186"></a><span id="l16.186" class="difflineplus">+                itemId: itemId,</span>
<a href="#l16.187"></a><span id="l16.187" class="difflineplus">+                initialStartDate: initialStartDate,</span>
<a href="#l16.188"></a><span id="l16.188" class="difflineplus">+                args: args,</span>
<a href="#l16.189"></a><span id="l16.189" class="difflineplus">+                tabType: aTab.mode.type</span>
<a href="#l16.190"></a><span id="l16.190" class="difflineplus">+            };</span>
<a href="#l16.191"></a><span id="l16.191" class="difflineplus">+        }</span>
<a href="#l16.192"></a><span id="l16.192" class="difflineplus">+    },</span>
<a href="#l16.193"></a><span id="l16.193" class="difflineplus">+    /**</span>
<a href="#l16.194"></a><span id="l16.194" class="difflineplus">+     * Called when starting the application (and/or opening the window).</span>
<a href="#l16.195"></a><span id="l16.195" class="difflineplus">+     * Restores a tab that was open when the application was quit previously.</span>
<a href="#l16.196"></a><span id="l16.196" class="difflineplus">+     *</span>
<a href="#l16.197"></a><span id="l16.197" class="difflineplus">+     * @param {Object} aTabmail  The tabmail interface</span>
<a href="#l16.198"></a><span id="l16.198" class="difflineplus">+     * @param {Object} aState    The state of the tab to restore</span>
<a href="#l16.199"></a><span id="l16.199" class="difflineplus">+     */</span>
<a href="#l16.200"></a><span id="l16.200" class="difflineplus">+    restoreTab: function(aTabmail, aState) {</span>
<a href="#l16.201"></a><span id="l16.201" class="difflineplus">+        // Sometimes restoreTab is called for tabs that were never saved</span>
<a href="#l16.202"></a><span id="l16.202" class="difflineplus">+        // and never meant to be persisted or restored. See persistTab.</span>
<a href="#l16.203"></a><span id="l16.203" class="difflineplus">+        if (aState.args &amp;&amp; aState.calendarId &amp;&amp; aState.itemId) {</span>
<a href="#l16.204"></a><span id="l16.204" class="difflineplus">+            aState.args.initialStartDateValue = aState.initialStartDate</span>
<a href="#l16.205"></a><span id="l16.205" class="difflineplus">+                ? cal.createDateTime(aState.initialStartDate) : getDefaultStartDate();</span>
<a href="#l16.206"></a><span id="l16.206" class="difflineplus">+</span>
<a href="#l16.207"></a><span id="l16.207" class="difflineplus">+            aState.args.calendar = getCalendarManager().getCalendarById(aState.calendarId);</span>
<a href="#l16.208"></a><span id="l16.208" class="difflineplus">+            if (aState.args.calendar) {</span>
<a href="#l16.209"></a><span id="l16.209" class="difflineplus">+                // using wrappedJSObject is a hack that is needed to prevent a proxy error</span>
<a href="#l16.210"></a><span id="l16.210" class="difflineplus">+                let pcal = cal.async.promisifyCalendar(aState.args.calendar.wrappedJSObject);</span>
<a href="#l16.211"></a><span id="l16.211" class="difflineplus">+                pcal.getItem(aState.itemId).then((item) =&gt; {</span>
<a href="#l16.212"></a><span id="l16.212" class="difflineplus">+                    if (item[0]) {</span>
<a href="#l16.213"></a><span id="l16.213" class="difflineplus">+                        aState.args.calendarEvent = item[0];</span>
<a href="#l16.214"></a><span id="l16.214" class="difflineplus">+                        aTabmail.openTab(aState.tabType, aState.args);</span>
<a href="#l16.215"></a><span id="l16.215" class="difflineplus">+                    }</span>
<a href="#l16.216"></a><span id="l16.216" class="difflineplus">+                });</span>
<a href="#l16.217"></a><span id="l16.217" class="difflineplus">+            }</span>
<a href="#l16.218"></a><span id="l16.218" class="difflineplus">+        }</span>
<a href="#l16.219"></a><span id="l16.219" class="difflineplus">+    }</span>
<a href="#l16.220"></a><span id="l16.220" class="difflineplus">+};</span>
<a href="#l16.221"></a><span id="l16.221" class="difflineplus">+</span>
<a href="#l16.222"></a><span id="l16.222"> window.addEventListener(&quot;load&quot;, function(e) {</span>
<a href="#l16.223"></a><span id="l16.223">     let tabmail = document.getElementById('tabmail');</span>
<a href="#l16.224"></a><span id="l16.224">     tabmail.registerTabType(calendarTabType);</span>
<a href="#l16.225"></a><span id="l16.225" class="difflineplus">+    tabmail.registerTabType(calendarItemTabType);</span>
<a href="#l16.226"></a><span id="l16.226">     tabmail.registerTabMonitor(calendarTabMonitor);</span>
<a href="#l16.227"></a><span id="l16.227"> }, false);</span>
<a href="#l16.228"></a><span id="l16.228"> </span>
<a href="#l16.229"></a><span id="l16.229"> </span>
<a href="#l16.230"></a><span id="l16.230"> function ltnOnLoad(event) {</span>
<a href="#l16.231"></a><span id="l16.231"> </span>
<a href="#l16.232"></a><span id="l16.232">     // nuke the onload, or we get called every time there's</span>
<a href="#l16.233"></a><span id="l16.233">     // any load that occurs</span>
<a href="#l16.234"></a><span id="l16.234" class="difflineat">@@ -618,16 +817,32 @@ function InitViewCalendarPaneMenu() {</span>
<a href="#l16.235"></a><span id="l16.235">                         !calSidebar.getAttribute(&quot;collapsed&quot;));</span>
<a href="#l16.236"></a><span id="l16.236"> </span>
<a href="#l16.237"></a><span id="l16.237">     if (document.getElementById(&quot;appmenu_ltnViewCalendarPane&quot;)) {</span>
<a href="#l16.238"></a><span id="l16.238">         setBooleanAttribute(&quot;appmenu_ltnViewCalendarPane&quot;, &quot;checked&quot;,</span>
<a href="#l16.239"></a><span id="l16.239">                             !calSidebar.getAttribute(&quot;collapsed&quot;));</span>
<a href="#l16.240"></a><span id="l16.240">     }</span>
<a href="#l16.241"></a><span id="l16.241"> }</span>
<a href="#l16.242"></a><span id="l16.242"> </span>
<a href="#l16.243"></a><span id="l16.243" class="difflineplus">+</span>
<a href="#l16.244"></a><span id="l16.244" class="difflineplus">+/**</span>
<a href="#l16.245"></a><span id="l16.245" class="difflineplus">+ * Move the event toolbox, containing the toolbar, into view for a tab</span>
<a href="#l16.246"></a><span id="l16.246" class="difflineplus">+ * or back to its hiding place where it is accessed again for other tabs.</span>
<a href="#l16.247"></a><span id="l16.247" class="difflineplus">+ *</span>
<a href="#l16.248"></a><span id="l16.248" class="difflineplus">+ * @param {nsIDOMNode} aDestination  Destination where the toolbox will be moved</span>
<a href="#l16.249"></a><span id="l16.249" class="difflineplus">+ */</span>
<a href="#l16.250"></a><span id="l16.250" class="difflineplus">+function moveEventToolbox(aDestination) {</span>
<a href="#l16.251"></a><span id="l16.251" class="difflineplus">+    let toolbox = document.getElementById(&quot;event-toolbox&quot;);</span>
<a href="#l16.252"></a><span id="l16.252" class="difflineplus">+    // the &lt;toolbarpalette&gt; has to be copied manually</span>
<a href="#l16.253"></a><span id="l16.253" class="difflineplus">+    let palette = toolbox.palette;</span>
<a href="#l16.254"></a><span id="l16.254" class="difflineplus">+    let iframe = aDestination.querySelector(&quot;iframe&quot;);</span>
<a href="#l16.255"></a><span id="l16.255" class="difflineplus">+    aDestination.insertBefore(toolbox, iframe);</span>
<a href="#l16.256"></a><span id="l16.256" class="difflineplus">+    toolbox.palette = palette;</span>
<a href="#l16.257"></a><span id="l16.257" class="difflineplus">+}</span>
<a href="#l16.258"></a><span id="l16.258" class="difflineplus">+</span>
<a href="#l16.259"></a><span id="l16.259"> /**</span>
<a href="#l16.260"></a><span id="l16.260">  * Checks if Lightning's binary component was successfully loaded.</span>
<a href="#l16.261"></a><span id="l16.261">  */</span>
<a href="#l16.262"></a><span id="l16.262"> function checkCalendarBinaryComponent() {</span>
<a href="#l16.263"></a><span id="l16.263">     // Don't even get started if we are running ical.js or the binary component</span>
<a href="#l16.264"></a><span id="l16.264">     // was successfully loaded.</span>
<a href="#l16.265"></a><span id="l16.265">     if (&quot;@mozilla.org/calendar/datetime;1&quot; in Components.classes ||</span>
<a href="#l16.266"></a><span id="l16.266">         Preferences.get(&quot;calendar.icaljs&quot;, false)) {</span>
<a href="#l16.267"></a><span id="l16.267" class="difflineat">@@ -667,8 +882,9 @@ function checkCalendarBinaryComponent() </span>
<a href="#l16.268"></a><span id="l16.268">             text = ltnGetString(&quot;lightning&quot;, &quot;binaryComponentUnknown&quot;, args);</span>
<a href="#l16.269"></a><span id="l16.269">         }</span>
<a href="#l16.270"></a><span id="l16.270"> </span>
<a href="#l16.271"></a><span id="l16.271">         let title = ltnGetString(&quot;lightning&quot;, &quot;binaryComponentTitle&quot;, [extbrand]);</span>
<a href="#l16.272"></a><span id="l16.272">         openAddonsMgr(&quot;addons://detail/&quot; + encodeURIComponent(LIGHTNING_GUID));</span>
<a href="#l16.273"></a><span id="l16.273">         Services.prompt.alert(window, title, text);</span>
<a href="#l16.274"></a><span id="l16.274">     });</span>
<a href="#l16.275"></a><span id="l16.275"> }</span>
<a href="#l16.276"></a><span id="l16.276" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -5,24 +5,29 @@</span>
<a href="#l17.4"></a><span id="l17.4">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6"> &lt;!DOCTYPE overlay</span>
<a href="#l17.7"></a><span id="l17.7"> [</span>
<a href="#l17.8"></a><span id="l17.8">   &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://lightning/locale/lightning.dtd&quot; &gt; %dtd1;</span>
<a href="#l17.9"></a><span id="l17.9">   &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://calendar/locale/menuOverlay.dtd&quot; &gt; %dtd2;</span>
<a href="#l17.10"></a><span id="l17.10">   &lt;!ENTITY % dtd3 SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot; &gt; %dtd3;</span>
<a href="#l17.11"></a><span id="l17.11">   &lt;!ENTITY % dtd4 SYSTEM &quot;chrome://lightning/locale/lightning-toolbar.dtd&quot; &gt; %dtd4;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  &lt;!ENTITY % messengerDTD SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot;&gt; %messengerDTD;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  &lt;!ENTITY % messengerDTD SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot; &gt; %messengerDTD;</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineplus">+  &lt;!ENTITY % eventDialogDTD SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot; &gt; %eventDialogDTD;</span>
<a href="#l17.15"></a><span id="l17.15"> ]&gt;</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17"> &lt;?xml-stylesheet href=&quot;chrome://lightning/skin/lightning.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19"> &lt;?xml-stylesheet href=&quot;chrome://calendar/content/calendar-view-bindings.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l17.20"></a><span id="l17.20"> &lt;?xml-stylesheet href=&quot;chrome://calendar/content/datetimepickers/datetimepickers.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l17.21"></a><span id="l17.21"> </span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://calendar/content/calendar-event-dialog.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://calendar-common/skin/dialogs/calendar-event-dialog.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineplus">+</span>
<a href="#l17.26"></a><span id="l17.26"> &lt;?xul-overlay href=&quot;chrome://calendar/content/calendar-calendars-list.xul&quot;?&gt;</span>
<a href="#l17.27"></a><span id="l17.27"> &lt;?xul-overlay href=&quot;chrome://calendar/content/calendar-common-sets.xul&quot;?&gt;</span>
<a href="#l17.28"></a><span id="l17.28"> &lt;?xul-overlay href=&quot;chrome://calendar/content/calendar-views.xul&quot;?&gt;</span>
<a href="#l17.29"></a><span id="l17.29"> </span>
<a href="#l17.30"></a><span id="l17.30"> &lt;?xul-overlay href=&quot;chrome://lightning/content/lightning-toolbar.xul&quot;?&gt;</span>
<a href="#l17.31"></a><span id="l17.31"> &lt;?xul-overlay href=&quot;chrome://lightning/content/lightning-menus.xul&quot;?&gt;</span>
<a href="#l17.32"></a><span id="l17.32"> </span>
<a href="#l17.33"></a><span id="l17.33"> &lt;overlay id=&quot;ltnSidebarOverlay&quot;</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineat">@@ -55,16 +60,19 @@</span>
<a href="#l17.35"></a><span id="l17.35">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://calendar/content/calendar-task-editing.js&quot;/&gt;</span>
<a href="#l17.36"></a><span id="l17.36"> </span>
<a href="#l17.37"></a><span id="l17.37">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://calendar/content/calendar-extract.js&quot;/&gt;</span>
<a href="#l17.38"></a><span id="l17.38"> </span>
<a href="#l17.39"></a><span id="l17.39">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://lightning/content/lightning-utils.js&quot;/&gt;</span>
<a href="#l17.40"></a><span id="l17.40">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://lightning/content/messenger-overlay-sidebar.js&quot;/&gt;</span>
<a href="#l17.41"></a><span id="l17.41">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://calendar/content/calendar-invitations-manager.js&quot;/&gt;</span>
<a href="#l17.42"></a><span id="l17.42"> </span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+  &lt;!-- NEEDED FOR EVENT/TASK IN A TAB --&gt;</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://lightning/content/lightning-item-panel.js&quot;/&gt;</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineplus">+</span>
<a href="#l17.46"></a><span id="l17.46">   &lt;window id=&quot;messengerWindow&quot;&gt;</span>
<a href="#l17.47"></a><span id="l17.47">     &lt;!-- Be sure to keep these sets, since they will be overlayed by</span>
<a href="#l17.48"></a><span id="l17.48">          calendar/base/content/calendar-common-sets.xul --&gt;</span>
<a href="#l17.49"></a><span id="l17.49">     &lt;commandset id=&quot;calendar_commands&quot;&gt;</span>
<a href="#l17.50"></a><span id="l17.50">       &lt;command id=&quot;agenda_delete_event_command&quot; oncommand=&quot;agendaListbox.deleteSelectedItem(false);&quot;/&gt;</span>
<a href="#l17.51"></a><span id="l17.51">       &lt;command id=&quot;agenda_edit_event_command&quot; oncommand=&quot;agendaListbox.editSelectedItem(event);&quot;/&gt;</span>
<a href="#l17.52"></a><span id="l17.52">       &lt;command id=&quot;switch2calendar&quot;</span>
<a href="#l17.53"></a><span id="l17.53">                oncommand=&quot;document.getElementById('tabmail').openTab('calendar', { title: document.getElementById('calendar-tab-button').getAttribute('title') })&quot;/&gt;</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineat">@@ -205,16 +213,89 @@</span>
<a href="#l17.55"></a><span id="l17.55">               class=&quot;calendar-sidebar-splitter&quot;</span>
<a href="#l17.56"></a><span id="l17.56">               oncommand=&quot;TodayPane.onCommandTodaySplitter();&quot;&gt;</span>
<a href="#l17.57"></a><span id="l17.57">       &lt;grippy/&gt;</span>
<a href="#l17.58"></a><span id="l17.58">     &lt;/splitter&gt;</span>
<a href="#l17.59"></a><span id="l17.59">     &lt;modevbox id=&quot;today-pane-panel&quot; /&gt;</span>
<a href="#l17.60"></a><span id="l17.60">   &lt;/hbox&gt;</span>
<a href="#l17.61"></a><span id="l17.61"> </span>
<a href="#l17.62"></a><span id="l17.62">   &lt;statusbar id=&quot;status-bar&quot;&gt;</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineplus">+    &lt;!-- event/task in tab statusbarpanels --&gt;</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-text&quot;</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineplus">+                    class=&quot;event-dialog&quot;</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineplus">+                    flex=&quot;1&quot;/&gt;</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-privacy&quot;</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineplus">+                    class=&quot;event-dialog&quot;</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineplus">+      &lt;label value=&quot;&amp;event.statusbarpanel.privacy.label;&quot;/&gt;</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineplus">+      &lt;hbox id=&quot;status-privacy-public-box&quot; privacy=&quot;PUBLIC&quot;&gt;</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineplus">+        &lt;label value=&quot;&amp;event.menu.options.privacy.public.label;&quot;/&gt;</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineplus">+      &lt;hbox id=&quot;status-privacy-confidential-box&quot; privacy=&quot;CONFIDENTIAL&quot;&gt;</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineplus">+        &lt;label value=&quot;&amp;event.menu.options.privacy.confidential.label;&quot;/&gt;</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineplus">+      &lt;hbox id=&quot;status-privacy-private-box&quot; privacy=&quot;PRIVATE&quot;&gt;</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineplus">+        &lt;label value=&quot;&amp;event.menu.options.privacy.private.label;&quot;/&gt;</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-priority&quot;</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineplus">+                    class=&quot;event-dialog&quot;</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l17.88"></a><span id="l17.88" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l17.89"></a><span id="l17.89" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineplus">+      &lt;label value=&quot;&amp;event.priority2.label;&quot;/&gt;</span>
<a href="#l17.91"></a><span id="l17.91" class="difflineplus">+      &lt;image id=&quot;image-priority-low&quot;</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineplus">+             class=&quot;cal-statusbar-1&quot;</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineplus">+             collapsed=&quot;true&quot;</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineplus">+             value=&quot;low&quot;/&gt;</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineplus">+      &lt;image id=&quot;image-priority-normal&quot;</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineplus">+             class=&quot;cal-statusbar-1&quot;</span>
<a href="#l17.97"></a><span id="l17.97" class="difflineplus">+             collapsed=&quot;true&quot;</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineplus">+             value=&quot;normal&quot;/&gt;</span>
<a href="#l17.99"></a><span id="l17.99" class="difflineplus">+      &lt;image id=&quot;image-priority-high&quot;</span>
<a href="#l17.100"></a><span id="l17.100" class="difflineplus">+             class=&quot;cal-statusbar-1&quot;</span>
<a href="#l17.101"></a><span id="l17.101" class="difflineplus">+             collapsed=&quot;true&quot;</span>
<a href="#l17.102"></a><span id="l17.102" class="difflineplus">+             value=&quot;high&quot;/&gt;</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-status&quot;</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineplus">+                    class=&quot;event-dialog&quot;</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineplus">+      &lt;label value=&quot;&amp;task.status.label;&quot;/&gt;</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineplus">+      &lt;label id=&quot;status-status-tentative-label&quot;</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineplus">+             value=&quot;&amp;newevent.status.tentative.label;&quot;</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineplus">+      &lt;label id=&quot;status-status-confirmed-label&quot;</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineplus">+             value=&quot;&amp;newevent.status.confirmed.label;&quot;</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.117"></a><span id="l17.117" class="difflineplus">+      &lt;label id=&quot;status-status-cancelled-label&quot;</span>
<a href="#l17.118"></a><span id="l17.118" class="difflineplus">+             value=&quot;&amp;newevent.eventStatus.cancelled.label;&quot;</span>
<a href="#l17.119"></a><span id="l17.119" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.120"></a><span id="l17.120" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l17.121"></a><span id="l17.121" class="difflineplus">+    &lt;statusbarpanel id=&quot;status-freebusy&quot;</span>
<a href="#l17.122"></a><span id="l17.122" class="difflineplus">+                    class=&quot;event-only event-dialog&quot;</span>
<a href="#l17.123"></a><span id="l17.123" class="difflineplus">+                    align=&quot;center&quot;</span>
<a href="#l17.124"></a><span id="l17.124" class="difflineplus">+                    flex=&quot;1&quot;</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineplus">+                    collapsed=&quot;true&quot;</span>
<a href="#l17.126"></a><span id="l17.126" class="difflineplus">+                    pack=&quot;start&quot;&gt;</span>
<a href="#l17.127"></a><span id="l17.127" class="difflineplus">+      &lt;label value=&quot;&amp;event.statusbarpanel.freebusy.label;&quot;/&gt;</span>
<a href="#l17.128"></a><span id="l17.128" class="difflineplus">+      &lt;label id=&quot;status-freebusy-free-label&quot;</span>
<a href="#l17.129"></a><span id="l17.129" class="difflineplus">+             value=&quot;&amp;event.freebusy.legend.free;&quot;</span>
<a href="#l17.130"></a><span id="l17.130" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.131"></a><span id="l17.131" class="difflineplus">+      &lt;label id=&quot;status-freebusy-busy-label&quot;</span>
<a href="#l17.132"></a><span id="l17.132" class="difflineplus">+             value=&quot;&amp;event.freebusy.legend.busy;&quot;</span>
<a href="#l17.133"></a><span id="l17.133" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.134"></a><span id="l17.134" class="difflineplus">+    &lt;/statusbarpanel&gt;</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineplus">+    &lt;!-- end event/task in tab statusbarpanels --&gt;</span>
<a href="#l17.136"></a><span id="l17.136">     &lt;statusbarpanel id=&quot;calendar-show-todaypane-panel&quot;</span>
<a href="#l17.137"></a><span id="l17.137">                     pack=&quot;center&quot;&gt;</span>
<a href="#l17.138"></a><span id="l17.138">       &lt;toolbarbutton id=&quot;calendar-status-todaypane-button&quot;</span>
<a href="#l17.139"></a><span id="l17.139">                      todaypane=&quot;true&quot;</span>
<a href="#l17.140"></a><span id="l17.140">                      type=&quot;checkbox&quot;</span>
<a href="#l17.141"></a><span id="l17.141">                      label=&quot;&amp;todaypane.statusButton.label;&quot;</span>
<a href="#l17.142"></a><span id="l17.142">                      tooltiptext=&quot;&amp;calendar.todaypane.button.tooltip;&quot;</span>
<a href="#l17.143"></a><span id="l17.143">                      observes=&quot;calendar_toggle_todaypane_command&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/lightning/jar.mn</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/lightning/jar.mn</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -2,16 +2,17 @@</span>
<a href="#l18.4"></a><span id="l18.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.5"></a><span id="l18.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.6"></a><span id="l18.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8"> lightning.jar:</span>
<a href="#l18.9"></a><span id="l18.9"> % override chrome://messagebody/skin/imip.css chrome://lightning/skin/imip.css</span>
<a href="#l18.10"></a><span id="l18.10"> % override chrome://messagebody/skin/calendar-event-dialog-attendees.png chrome://calendar/skin/calendar-event-dialog-attendees.png</span>
<a href="#l18.11"></a><span id="l18.11"> % overlay chrome://messenger/content/messenger.xul chrome://lightning/content/lightning-migration.xul</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+% overlay chrome://messenger/content/messenger.xul chrome://lightning/content/lightning-item-panel.xul</span>
<a href="#l18.13"></a><span id="l18.13"> % overlay chrome://messenger/content/msgAccountCentral.xul chrome://lightning/content/messenger-overlay-accountCentral.xul</span>
<a href="#l18.14"></a><span id="l18.14"> % overlay chrome://messenger/content/messenger.xul chrome://lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l18.15"></a><span id="l18.15"> % overlay chrome://messenger/content/messageWindow.xul chrome://lightning/content/imip-bar-overlay.xul</span>
<a href="#l18.16"></a><span id="l18.16"> % overlay chrome://messenger/content/messageWindow.xul chrome://lightning/content/messenger-overlay-messageWindow.xul</span>
<a href="#l18.17"></a><span id="l18.17"> % overlay chrome://lightning/content/messenger-overlay-sidebar.xul chrome://lightning/content/imip-bar-overlay.xul</span>
<a href="#l18.18"></a><span id="l18.18"> % overlay chrome://communicator/content/pref/preferences.xul chrome://lightning/content/suite-overlay-preferences.xul application={92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</span>
<a href="#l18.19"></a><span id="l18.19"> % overlay about:addons chrome://lightning/content/suite-overlay-addons.xul application={92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</span>
<a href="#l18.20"></a><span id="l18.20"> % overlay chrome://mozapps/content/extensions/extensions.xul chrome://lightning/content/suite-overlay-addons.xul application={92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineat">@@ -52,16 +53,21 @@ lightning.jar:</span>
<a href="#l18.22"></a><span id="l18.22">     content/lightning/messenger-overlay-sidebar.js         (content/messenger-overlay-sidebar.js)</span>
<a href="#l18.23"></a><span id="l18.23">     content/lightning/messenger-overlay-sidebar.xul        (content/messenger-overlay-sidebar.xul)</span>
<a href="#l18.24"></a><span id="l18.24">     content/lightning/messenger-overlay-preferences.js     (content/messenger-overlay-preferences.js)</span>
<a href="#l18.25"></a><span id="l18.25">     content/lightning/messenger-overlay-preferences.xul    (content/messenger-overlay-preferences.xul)</span>
<a href="#l18.26"></a><span id="l18.26">     content/lightning/suite-overlay-addons.xul             (content/suite-overlay-addons.xul)</span>
<a href="#l18.27"></a><span id="l18.27">     content/lightning/suite-overlay-preferences.xul        (content/suite-overlay-preferences.xul)</span>
<a href="#l18.28"></a><span id="l18.28">     content/lightning/suite-overlay-sidebar.js             (content/suite-overlay-sidebar.js)</span>
<a href="#l18.29"></a><span id="l18.29">     content/lightning/suite-overlay-sidebar.xul            (content/suite-overlay-sidebar.xul)</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineplus">+    content/lightning/lightning-item-toolbar.xul           (content/lightning-item-toolbar.xul)</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineplus">+*   content/lightning/lightning-item-panel.xul             (content/lightning-item-panel.xul)</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+    content/lightning/lightning-item-panel.js              (content/lightning-item-panel.js)</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineplus">+    content/lightning/lightning-item-iframe.xul            (content/lightning-item-iframe.xul)</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineplus">+    content/lightning/lightning-item-iframe.js             (content/lightning-item-iframe.js)</span>
<a href="#l18.35"></a><span id="l18.35"> % skin lightning classic/1.0 chrome/skin/linux/lightning/</span>
<a href="#l18.36"></a><span id="l18.36"> % skin lightning classic/1.0 chrome/skin/osx/lightning/ os=Darwin</span>
<a href="#l18.37"></a><span id="l18.37"> % skin lightning classic/1.0 chrome/skin/windows/lightning/ os=WINNT</span>
<a href="#l18.38"></a><span id="l18.38"> % skin lightning-common classic/1.0 chrome/skin/lightning-common/</span>
<a href="#l18.39"></a><span id="l18.39"> % style chrome://global/content/customizeToolbar.xul chrome://lightning/skin/lightning-toolbar.css</span>
<a href="#l18.40"></a><span id="l18.40"> % style chrome://calendar/content/calendar-event-dialog.xul chrome://communicator/skin/communicator.css application={92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</span>
<a href="#l18.41"></a><span id="l18.41"> % style chrome://global/content/customizeToolbar.xul chrome://lightning-common/skin/lightning.css application={92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</span>
<a href="#l18.42"></a><span id="l18.42"> % style chrome://global/content/customizeToolbar.xul chrome://calendar-common/skin/dialogs/calendar-event-dialog.css application={92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/lightning/themes/linux/lightning.css</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/lightning/themes/linux/lightning.css</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -100,17 +100,16 @@ radio[pane=paneLightning] {</span>
<a href="#l19.4"></a><span id="l19.4">     -moz-image-region: rect(0px 80px 16px 64px);</span>
<a href="#l19.5"></a><span id="l19.5"> }</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7"> .icon-holder[type=&quot;tasks&quot;][selected=&quot;true&quot;],</span>
<a href="#l19.8"></a><span id="l19.8"> .tabmail-tab[type=&quot;tasks&quot;][selected=&quot;true&quot;] {</span>
<a href="#l19.9"></a><span id="l19.9">     -moz-image-region: rect(16px 80px 32px 64px);</span>
<a href="#l19.10"></a><span id="l19.10"> }</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-</span>
<a href="#l19.13"></a><span id="l19.13"> /* Lightning sidebar in calendar and task mode */</span>
<a href="#l19.14"></a><span id="l19.14"> #ltnSidebar {</span>
<a href="#l19.15"></a><span id="l19.15">   background-color: -moz-field;</span>
<a href="#l19.16"></a><span id="l19.16">   border-bottom: 1px solid ThreeDShadow;</span>
<a href="#l19.17"></a><span id="l19.17"> }</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19"> /* Write button */</span>
<a href="#l19.20"></a><span id="l19.20"> #newMsgButton-mail-menuitem {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -44,24 +44,25 @@ var testLocalICS = function () {</span>
<a href="#l20.4"></a><span id="l20.4">   modalDialog.wait_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, TIMEOUT_MODAL_DIALOG);</span>
<a href="#l20.5"></a><span id="l20.5">   </span>
<a href="#l20.6"></a><span id="l20.6">   // create new event</span>
<a href="#l20.7"></a><span id="l20.7">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l20.8"></a><span id="l20.8">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, hour)), 1, 1);</span>
<a href="#l20.9"></a><span id="l20.9">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l20.10"></a><span id="l20.10">   let event = new mozmill.controller.MozMillController(mozmill.utils</span>
<a href="#l20.11"></a><span id="l20.11">     .getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  </span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+</span>
<a href="#l20.14"></a><span id="l20.14">   // title</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-  let titleTextBox = new elementslib.Lookup(event.window.document, '/id(&quot;calendar-event-dialog&quot;)/'</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+  let iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+  let titleTextBox = new elementslib.Lookup(iframe.contentDocument, '/id(&quot;calendar-event-dialog-inner&quot;)/'</span>
<a href="#l20.18"></a><span id="l20.18">     + 'id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/id(&quot;event-grid-title-row&quot;)/'</span>
<a href="#l20.19"></a><span id="l20.19">     + 'id(&quot;item-title&quot;)/anon({&quot;class&quot;:&quot;textbox-input-box&quot;})/anon({&quot;anonid&quot;:&quot;input&quot;})');</span>
<a href="#l20.20"></a><span id="l20.20">   event.waitForElement(titleTextBox);</span>
<a href="#l20.21"></a><span id="l20.21">   event.type(titleTextBox, title);</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-  </span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+</span>
<a href="#l20.24"></a><span id="l20.24">   // set calendar</span>
<a href="#l20.25"></a><span id="l20.25">   let itemCalendar = new elementslib.ID(event.window.document, &quot;item-calendar&quot;)</span>
<a href="#l20.26"></a><span id="l20.26">   event.select(itemCalendar, undefined, calendar);</span>
<a href="#l20.27"></a><span id="l20.27">   // HACK - Wait for the value to be selected. This is needed for platforms</span>
<a href="#l20.28"></a><span id="l20.28">   // like mac where selecting the menuitem is an asynchronous process, it might</span>
<a href="#l20.29"></a><span id="l20.29">   // be fixed in a later version of mozmill.</span>
<a href="#l20.30"></a><span id="l20.30">   event.waitFor(() =&gt; itemCalendar.getNode().value == calendar);</span>
<a href="#l20.31"></a><span id="l20.31">   </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -24,17 +24,17 @@ var testTodayPane = function () {</span>
<a href="#l21.4"></a><span id="l21.4">   let panels = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l21.5"></a><span id="l21.5">     + 'id(&quot;tabpanelcontainer&quot;)/';</span>
<a href="#l21.6"></a><span id="l21.6">   let miniMonth = panels + 'id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l21.7"></a><span id="l21.7">     + 'id(&quot;minimonth-pane&quot;)/';</span>
<a href="#l21.8"></a><span id="l21.8">   let dayView = panels + 'id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;calendarDisplayDeck&quot;)/'</span>
<a href="#l21.9"></a><span id="l21.9">     + 'id(&quot;calendar-view-box&quot;)/id(&quot;view-deck&quot;)/id(&quot;day-view&quot;)/';</span>
<a href="#l21.10"></a><span id="l21.10">   let dayPath = dayView + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;labelbox&quot;})/'</span>
<a href="#l21.11"></a><span id="l21.11">     + 'anon({&quot;anonid&quot;:&quot;labeldaybox&quot;})/{&quot;flex&quot;:&quot;1&quot;}';</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  let eventName = '/id(&quot;calendar-event-dialog&quot;)/id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/'</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  let eventName = '/id(&quot;calendar-event-dialog-inner&quot;)/id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/'</span>
<a href="#l21.14"></a><span id="l21.14">     + 'id(&quot;event-grid-title-row&quot;)/id(&quot;item-title&quot;)/anon({&quot;class&quot;:&quot;textbox-input-box&quot;})/'</span>
<a href="#l21.15"></a><span id="l21.15">     + 'anon({&quot;anonid&quot;:&quot;input&quot;})';</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17">   // open calendar view</span>
<a href="#l21.18"></a><span id="l21.18">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l21.19"></a><span id="l21.19">   controller.waitThenClick(new elementslib.ID(controller.window.document, &quot;calendar-day-view-button&quot;));</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21">   // go to today and verify date</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -55,53 +55,56 @@ var testTodayPane = function () {</span>
<a href="#l21.23"></a><span id="l21.23">     view.scrollToMinute(60 * startHour);</span>
<a href="#l21.24"></a><span id="l21.24"> </span>
<a href="#l21.25"></a><span id="l21.25">   controller.doubleClick(new elementslib.Lookup(controller.window.document, dayView</span>
<a href="#l21.26"></a><span id="l21.26">     + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;scrollbox&quot;})/anon({&quot;anonid&quot;:&quot;daybox&quot;})/'</span>
<a href="#l21.27"></a><span id="l21.27">     + '{&quot;class&quot;:&quot;calendar-event-column-even&quot;}/anon({&quot;anonid&quot;:&quot;boxstack&quot;})/'</span>
<a href="#l21.28"></a><span id="l21.28">     + 'anon({&quot;anonid&quot;:&quot;bgbox&quot;})/[' + startHour + ']'), 1, 1);</span>
<a href="#l21.29"></a><span id="l21.29">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l21.30"></a><span id="l21.30">   let event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+  let iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l21.32"></a><span id="l21.32"> </span>
<a href="#l21.33"></a><span id="l21.33" class="difflineminus">-  event.waitForElement(new elementslib.Lookup(event.window.document, eventName));</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">-  event.type(new elementslib.Lookup(event.window.document, eventName),&quot;Today's Event&quot;);</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineplus">+  event.waitForElement(new elementslib.Lookup(iframe.contentDocument, eventName));</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineplus">+  event.type(new elementslib.Lookup(iframe.contentDocument, eventName),&quot;Today's Event&quot;);</span>
<a href="#l21.37"></a><span id="l21.37">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l21.38"></a><span id="l21.38">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l21.39"></a><span id="l21.39"> </span>
<a href="#l21.40"></a><span id="l21.40">   // reset view</span>
<a href="#l21.41"></a><span id="l21.41">   view.scrollToMinute(60 * 8);</span>
<a href="#l21.42"></a><span id="l21.42"> </span>
<a href="#l21.43"></a><span id="l21.43">   // go to tomorrow and add an event</span>
<a href="#l21.44"></a><span id="l21.44">   controller.click(new elementslib.ID(controller.window.document, &quot;next-view-button&quot;));</span>
<a href="#l21.45"></a><span id="l21.45">   controller.doubleClick(new elementslib.Lookup(controller.window.document, dayView</span>
<a href="#l21.46"></a><span id="l21.46">     + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;scrollbox&quot;})/anon({&quot;anonid&quot;:&quot;daybox&quot;})/'</span>
<a href="#l21.47"></a><span id="l21.47">     + '{&quot;class&quot;:&quot;calendar-event-column-even&quot;}/anon({&quot;anonid&quot;:&quot;boxstack&quot;})/'</span>
<a href="#l21.48"></a><span id="l21.48">     + 'anon({&quot;anonid&quot;:&quot;bgbox&quot;})/[9]'), 1, 1);</span>
<a href="#l21.49"></a><span id="l21.49">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l21.50"></a><span id="l21.50">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l21.51"></a><span id="l21.51" class="difflineplus">+  iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l21.52"></a><span id="l21.52"> </span>
<a href="#l21.53"></a><span id="l21.53" class="difflineminus">-  event.waitForElement(new elementslib.Lookup(event.window.document, eventName));</span>
<a href="#l21.54"></a><span id="l21.54" class="difflineminus">-  event.type(new elementslib.Lookup(event.window.document, eventName),&quot;Tomorrow's Event&quot;);</span>
<a href="#l21.55"></a><span id="l21.55" class="difflineplus">+  event.waitForElement(new elementslib.Lookup(iframe.contentDocument, eventName));</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineplus">+  event.type(new elementslib.Lookup(iframe.contentDocument, eventName),&quot;Tomorrow's Event&quot;);</span>
<a href="#l21.57"></a><span id="l21.57">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l21.58"></a><span id="l21.58">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l21.59"></a><span id="l21.59"> </span>
<a href="#l21.60"></a><span id="l21.60">   // go 5 days forward and add an event</span>
<a href="#l21.61"></a><span id="l21.61">   for(let i = 0; i &lt; 5; i++)</span>
<a href="#l21.62"></a><span id="l21.62">     controller.click(new elementslib.ID(controller.window.document, &quot;next-view-button&quot;));</span>
<a href="#l21.63"></a><span id="l21.63">   controller.sleep(WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l21.64"></a><span id="l21.64"> </span>
<a href="#l21.65"></a><span id="l21.65">   controller.doubleClick(new elementslib.Lookup(controller.window.document, dayView</span>
<a href="#l21.66"></a><span id="l21.66">     + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;scrollbox&quot;})/anon({&quot;anonid&quot;:&quot;daybox&quot;})/'</span>
<a href="#l21.67"></a><span id="l21.67">     + '{&quot;class&quot;:&quot;calendar-event-column-even&quot;}/anon({&quot;anonid&quot;:&quot;boxstack&quot;})/'</span>
<a href="#l21.68"></a><span id="l21.68">     + 'anon({&quot;anonid&quot;:&quot;bgbox&quot;})/[9]'), 1, 1);</span>
<a href="#l21.69"></a><span id="l21.69">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l21.70"></a><span id="l21.70">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineplus">+  iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l21.72"></a><span id="l21.72"> </span>
<a href="#l21.73"></a><span id="l21.73" class="difflineminus">-  event.waitForElement(new elementslib.Lookup(event.window.document, eventName));</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineminus">-  event.type(new elementslib.Lookup(event.window.document, eventName),&quot;Future's Event&quot;);</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineplus">+  event.waitForElement(new elementslib.Lookup(iframe.contentDocument, eventName));</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineplus">+  event.type(new elementslib.Lookup(iframe.contentDocument, eventName),&quot;Future's Event&quot;);</span>
<a href="#l21.77"></a><span id="l21.77">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l21.78"></a><span id="l21.78">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l21.79"></a><span id="l21.79"> </span>
<a href="#l21.80"></a><span id="l21.80">   // go to mail tab</span>
<a href="#l21.81"></a><span id="l21.81">   controller.click(new elementslib.Lookup(controller.window.document, '/id(&quot;messengerWindow&quot;)/'</span>
<a href="#l21.82"></a><span id="l21.82">     + 'id(&quot;navigation-toolbox&quot;)/id(&quot;tabs-toolbar&quot;)/id(&quot;tabcontainer&quot;)/{&quot;first-tab&quot;:&quot;true&quot;,&quot;type&quot;:&quot;folder&quot;}/'</span>
<a href="#l21.83"></a><span id="l21.83">     + 'anon({&quot;class&quot;:&quot;tab-stack&quot;})/{&quot;class&quot;:&quot;tab-background&quot;}/{&quot;class&quot;:&quot;tab-background-middle&quot;}'));</span>
<a href="#l21.84"></a><span id="l21.84">   controller.sleep(WAIT_FOR_WINDOW_TIMEOUT);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

