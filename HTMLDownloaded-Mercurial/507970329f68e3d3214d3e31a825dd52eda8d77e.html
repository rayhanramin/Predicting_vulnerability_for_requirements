<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28822:507970329f68e3d3214d3e31a825dd52eda8d77e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 507970329f68e3d3214d3e31a825dd52eda8d77e" />
<meta property="og:url" content="/comm-central/rev/507970329f68e3d3214d3e31a825dd52eda8d77e" />
<meta property="og:description" content="Bug 1595319 - Use new syntax for ChromeUtils.import. r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 507970329f68e3d3214d3e31a825dd52eda8d77e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/507970329f68e3d3214d3e31a825dd52eda8d77e">shortlog</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/507970329f68e3d3214d3e31a825dd52eda8d77e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e">files</a> |
changeset |
<a href="/comm-central/raw-rev/507970329f68e3d3214d3e31a825dd52eda8d77e">raw</a>  | <a href="/comm-central/archive/507970329f68e3d3214d3e31a825dd52eda8d77e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1595319">Bug 1595319</a> - Use new syntax for ChromeUtils.import. r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#75;&#97;&#105;&#32;&#69;&#110;&#103;&#101;&#114;&#116;&#32;&#60;&#107;&#97;&#105;&#101;&#64;&#107;&#117;&#105;&#120;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 21 Feb 2020 22:57:21 +0100</td></tr>

<tr>
 <td>changeset 28822</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/507970329f68e3d3214d3e31a825dd52eda8d77e">507970329f68e3d3214d3e31a825dd52eda8d77e</a></td>
</tr>



<tr>
<td>parent 28821</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e3303808c5963389b113110f07773ba1343e6e0f">e3303808c5963389b113110f07773ba1343e6e0f</a>
</td>
</tr>

<tr>
<td>child 28823</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6c75755a02eb770ba6a25edb88d7e5dce9c40c20">6c75755a02eb770ba6a25edb88d7e5dce9c40c20</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=507970329f68e3d3214d3e31a825dd52eda8d77e">17055</a></td></tr>
<tr><td>push user</td><td>kaie@kuix.de</td></tr>
<tr><td>push date</td><td class="date age">Sat, 22 Feb 2020 11:56:24 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@6c75755a02eb [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=6c75755a02eb770ba6a25edb88d7e5dce9c40c20">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=6c75755a02eb770ba6a25edb88d7e5dce9c40c20&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6c75755a02eb770ba6a25edb88d7e5dce9c40c20&newProject=comm-central&newRevision=81b27762e885346226b97124cdea45a96fe15d08&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6c75755a02eb770ba6a25edb88d7e5dce9c40c20&newProject=comm-central&newRevision=81b27762e885346226b97124cdea45a96fe15d08&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6c75755a02eb770ba6a25edb88d7e5dce9c40c20&newProject=comm-central&newRevision=81b27762e885346226b97124cdea45a96fe15d08&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1595319">1595319</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1595319">Bug 1595319</a> - Use new syntax for ChromeUtils.import. r=mkmelin

Differential Revision: <a href="https://phabricator.services.mozilla.com/D63727">https://phabricator.services.mozilla.com/D63727</a></div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/BondOpenPGP.jsm">mail/extensions/openpgp/content/BondOpenPGP.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/BondOpenPGP.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/BondOpenPGP.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/BondOpenPGP.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/BondOpenPGP.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/BondOpenPGP.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/amPrefsService.jsm">mail/extensions/openpgp/content/modules/amPrefsService.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/amPrefsService.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/amPrefsService.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/amPrefsService.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/amPrefsService.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/amPrefsService.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/app.jsm">mail/extensions/openpgp/content/modules/app.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/app.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/app.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/app.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/app.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/app.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/armor.jsm">mail/extensions/openpgp/content/modules/armor.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/armor.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/armor.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/armor.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/armor.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/armor.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/attachment.jsm">mail/extensions/openpgp/content/modules/attachment.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/attachment.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/attachment.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/attachment.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/attachment.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/attachment.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autoSetup.jsm">mail/extensions/openpgp/content/modules/autoSetup.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autoSetup.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autoSetup.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autoSetup.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autoSetup.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autoSetup.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autocrypt.jsm">mail/extensions/openpgp/content/modules/autocrypt.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autocrypt.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autocrypt.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autocrypt.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autocrypt.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/autocrypt.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/clipboard.jsm">mail/extensions/openpgp/content/modules/clipboard.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/clipboard.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/clipboard.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/clipboard.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/clipboard.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/clipboard.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/commandLine.jsm">mail/extensions/openpgp/content/modules/commandLine.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/commandLine.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/commandLine.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/commandLine.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/commandLine.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/commandLine.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configBackup.jsm">mail/extensions/openpgp/content/modules/configBackup.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configBackup.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configBackup.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configBackup.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configBackup.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configBackup.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configure.jsm">mail/extensions/openpgp/content/modules/configure.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configure.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configure.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configure.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configure.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/configure.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/core.jsm">mail/extensions/openpgp/content/modules/core.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/core.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/core.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/core.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/core.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/core.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm">mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm">mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm">mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/decryption.jsm">mail/extensions/openpgp/content/modules/decryption.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/decryption.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/decryption.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/decryption.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/decryption.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/decryption.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/dialog.jsm">mail/extensions/openpgp/content/modules/dialog.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/dialog.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/dialog.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/dialog.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/dialog.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/dialog.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/encryption.jsm">mail/extensions/openpgp/content/modules/encryption.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/encryption.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/encryption.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/encryption.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/encryption.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/encryption.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/errorHandling.jsm">mail/extensions/openpgp/content/modules/errorHandling.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/errorHandling.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/errorHandling.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/errorHandling.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/errorHandling.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/errorHandling.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/events.jsm">mail/extensions/openpgp/content/modules/events.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/events.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/events.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/events.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/events.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/events.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/files.jsm">mail/extensions/openpgp/content/modules/files.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/files.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/files.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/files.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/files.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/files.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/filters.jsm">mail/extensions/openpgp/content/modules/filters.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/filters.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/filters.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/filters.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/filters.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/filters.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm">mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/funcs.jsm">mail/extensions/openpgp/content/modules/funcs.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/funcs.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/funcs.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/funcs.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/funcs.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/funcs.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/glodaUtils.jsm">mail/extensions/openpgp/content/modules/glodaUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/glodaUtils.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/glodaUtils.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/glodaUtils.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/glodaUtils.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/glodaUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/gpg.jsm">mail/extensions/openpgp/content/modules/gpg.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/gpg.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/gpg.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/gpg.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/gpg.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/gpg.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/hash.jsm">mail/extensions/openpgp/content/modules/hash.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/hash.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/hash.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/hash.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/hash.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/hash.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/httpProxy.jsm">mail/extensions/openpgp/content/modules/httpProxy.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/httpProxy.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/httpProxy.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/httpProxy.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/httpProxy.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/httpProxy.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/key.jsm">mail/extensions/openpgp/content/modules/key.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/key.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/key.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/key.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/key.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/key.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyObj.jsm">mail/extensions/openpgp/content/modules/keyObj.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyObj.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyObj.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyObj.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyObj.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyObj.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRefreshService.jsm">mail/extensions/openpgp/content/modules/keyRefreshService.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRefreshService.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRefreshService.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRefreshService.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRefreshService.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRefreshService.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRing.jsm">mail/extensions/openpgp/content/modules/keyRing.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRing.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRing.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRing.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRing.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyRing.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">mail/extensions/openpgp/content/modules/keyUsability.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserver.jsm">mail/extensions/openpgp/content/modules/keyserver.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserver.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserver.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserver.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserver.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserver.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserverUris.jsm">mail/extensions/openpgp/content/modules/keyserverUris.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserverUris.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserverUris.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserverUris.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserverUris.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/keyserverUris.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/locale.jsm">mail/extensions/openpgp/content/modules/locale.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/locale.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/locale.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/locale.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/locale.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/locale.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/log.jsm">mail/extensions/openpgp/content/modules/log.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/log.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/log.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/log.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/log.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/log.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/masterpass.jsm">mail/extensions/openpgp/content/modules/masterpass.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/masterpass.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/masterpass.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/masterpass.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/masterpass.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/masterpass.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mime.jsm">mail/extensions/openpgp/content/modules/mime.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mime.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mime.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mime.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mime.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mime.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">mail/extensions/openpgp/content/modules/mimeDecrypt.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">mail/extensions/openpgp/content/modules/mimeEncrypt.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeVerify.jsm">mail/extensions/openpgp/content/modules/mimeVerify.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeVerify.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeVerify.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeVerify.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeVerify.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/mimeVerify.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/msgRead.jsm">mail/extensions/openpgp/content/modules/msgRead.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/msgRead.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/msgRead.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/msgRead.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/msgRead.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/msgRead.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/os.jsm">mail/extensions/openpgp/content/modules/os.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/os.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/os.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/os.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/os.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/os.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">mail/extensions/openpgp/content/modules/persistentCrypto.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/prefs.jsm">mail/extensions/openpgp/content/modules/prefs.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/prefs.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/prefs.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/prefs.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/prefs.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/prefs.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/protocolHandler.jsm">mail/extensions/openpgp/content/modules/protocolHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/protocolHandler.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/protocolHandler.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/protocolHandler.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/protocolHandler.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/protocolHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rnpLib.jsm">mail/extensions/openpgp/content/modules/rnpLib.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rnpLib.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rnpLib.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rnpLib.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rnpLib.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rnpLib.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rules.jsm">mail/extensions/openpgp/content/modules/rules.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rules.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rules.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rules.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rules.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/rules.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/searchCallback.jsm">mail/extensions/openpgp/content/modules/searchCallback.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/searchCallback.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/searchCallback.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/searchCallback.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/searchCallback.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/searchCallback.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/send.jsm">mail/extensions/openpgp/content/modules/send.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/send.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/send.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/send.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/send.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/send.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/socks5Proxy.jsm">mail/extensions/openpgp/content/modules/socks5Proxy.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/socks5Proxy.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/socks5Proxy.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/socks5Proxy.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/socks5Proxy.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/socks5Proxy.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/sqliteDb.jsm">mail/extensions/openpgp/content/modules/sqliteDb.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/sqliteDb.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/sqliteDb.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/sqliteDb.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/sqliteDb.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/sqliteDb.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/compose.jsm">mail/extensions/openpgp/content/modules/stdlib/compose.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/compose.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/compose.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/compose.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/compose.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/compose.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/misc.jsm">mail/extensions/openpgp/content/modules/stdlib/misc.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/misc.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/misc.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/misc.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/misc.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/misc.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm">mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/streams.jsm">mail/extensions/openpgp/content/modules/streams.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/streams.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/streams.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/streams.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/streams.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/streams.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/time.jsm">mail/extensions/openpgp/content/modules/time.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/time.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/time.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/time.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/time.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/time.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/trust.jsm">mail/extensions/openpgp/content/modules/trust.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/trust.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/trust.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/trust.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/trust.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/trust.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/uris.jsm">mail/extensions/openpgp/content/modules/uris.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/uris.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/uris.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/uris.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/uris.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/uris.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/verify.jsm">mail/extensions/openpgp/content/modules/verify.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/verify.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/verify.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/verify.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/verify.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/verify.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/versioning.jsm">mail/extensions/openpgp/content/modules/versioning.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/versioning.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/versioning.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/versioning.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/versioning.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/versioning.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/webKey.jsm">mail/extensions/openpgp/content/modules/webKey.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/webKey.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/webKey.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/webKey.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/webKey.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/webKey.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/windows.jsm">mail/extensions/openpgp/content/modules/windows.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/windows.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/windows.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/windows.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/windows.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/windows.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wkdLookup.jsm">mail/extensions/openpgp/content/modules/wkdLookup.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wkdLookup.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wkdLookup.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wkdLookup.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wkdLookup.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wkdLookup.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">mail/extensions/openpgp/content/modules/wksMimeHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/am-enigprefs.js">mail/extensions/openpgp/content/ui/am-enigprefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/am-enigprefs.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/am-enigprefs.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/am-enigprefs.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/am-enigprefs.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/am-enigprefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">mail/extensions/openpgp/content/ui/commonWorkflows.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">mail/extensions/openpgp/content/ui/enigmailCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">mail/extensions/openpgp/content/ui/enigmailKeyManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">mail/extensions/openpgp/content/ui/enigmailKeySelection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">mail/extensions/openpgp/content/ui/enigmailMsgBox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js">mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">mail/extensions/openpgp/content/ui/keyDetailsDlg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">file</a> |
<a href="/comm-central/annotate/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">annotate</a> |
<a href="/comm-central/diff/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">diff</a> |
<a href="/comm-central/comparison/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">comparison</a> |
<a href="/comm-central/log/507970329f68e3d3214d3e31a825dd52eda8d77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/extensions/openpgp/content/BondOpenPGP.jsm</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/BondOpenPGP.jsm</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -10,19 +10,19 @@</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> const EXPORTED_SYMBOLS = [&quot;BondOpenPGP&quot;];</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.8"></a><span id="l1.8"> var { MailConstants } = ChromeUtils.import(</span>
<a href="#l1.9"></a><span id="l1.9">   &quot;resource:///modules/MailConstants.jsm&quot;</span>
<a href="#l1.10"></a><span id="l1.10"> );</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l1.14"></a><span id="l1.14">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+);</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18"> const getEnigmailApp = EnigmailLazy.loader(&quot;enigmail/app.jsm&quot;, &quot;EnigmailApp&quot;);</span>
<a href="#l1.19"></a><span id="l1.19"> const getEnigmailCore = EnigmailLazy.loader(</span>
<a href="#l1.20"></a><span id="l1.20">   &quot;enigmail/core.jsm&quot;,</span>
<a href="#l1.21"></a><span id="l1.21">   &quot;EnigmailCore&quot;</span>
<a href="#l1.22"></a><span id="l1.22"> );</span>
<a href="#l1.23"></a><span id="l1.23"> const getEnigmailAmPrefsService = EnigmailLazy.loader(</span>
<a href="#l1.24"></a><span id="l1.24">   &quot;enigmail/amPrefsService.jsm&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/amPrefsService.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/amPrefsService.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -2,21 +2,20 @@</span>
<a href="#l2.4"></a><span id="l2.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.5"></a><span id="l2.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/. */</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7"> &quot;use strict&quot;;</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> const { manager: Cm } = Components;</span>
<a href="#l2.10"></a><span id="l2.10"> Cm.QueryInterface(Ci.nsIComponentRegistrar);</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l2.14"></a><span id="l2.14">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-  .Services;</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+);</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21"> const CATEGORY = &quot;mailnews-accountmanager-extensions&quot;;</span>
<a href="#l2.22"></a><span id="l2.22"> const CATEGORY_ENTRY = &quot;openpgp-account-manager-extension&quot;;</span>
<a href="#l2.23"></a><span id="l2.23"> const PREF_SERVICE_NAME =</span>
<a href="#l2.24"></a><span id="l2.24">   &quot;@mozilla.org/accountmanager/extension;1?name=enigprefs&quot;;</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26"> var EXPORTED_SYMBOLS = [&quot;EnigmailAmPrefsService&quot;];</span>
<a href="#l2.27"></a><span id="l2.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/app.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/app.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -3,22 +3,21 @@</span>
<a href="#l3.4"></a><span id="l3.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.5"></a><span id="l3.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l3.6"></a><span id="l3.6">  */</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> &quot;use strict&quot;;</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailApp&quot;];</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-  .Services;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l3.18"></a><span id="l3.18">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+);</span>
<a href="#l3.21"></a><span id="l3.21"> const getEnigmailLog = EnigmailLazy.loader(&quot;enigmail/log.jsm&quot;, &quot;EnigmailLog&quot;);</span>
<a href="#l3.22"></a><span id="l3.22"> </span>
<a href="#l3.23"></a><span id="l3.23"> var EnigmailApp = {</span>
<a href="#l3.24"></a><span id="l3.24">   /**</span>
<a href="#l3.25"></a><span id="l3.25">    * Platform application name (e.g. Thunderbird)</span>
<a href="#l3.26"></a><span id="l3.26">    */</span>
<a href="#l3.27"></a><span id="l3.27">   getName() {</span>
<a href="#l3.28"></a><span id="l3.28">     return Services.appinfo.name;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/armor.jsm</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/armor.jsm</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -3,22 +3,22 @@</span>
<a href="#l4.4"></a><span id="l4.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.5"></a><span id="l4.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l4.6"></a><span id="l4.6">  */</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> &quot;use strict&quot;;</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailArmor&quot;];</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l4.14"></a><span id="l4.14">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+);</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l4.19"></a><span id="l4.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-).EnigmailLog;</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+);</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23"> // Locates STRing in TEXT occurring only at the beginning of a line</span>
<a href="#l4.24"></a><span id="l4.24"> function indexOfArmorDelimiter(text, str, offset) {</span>
<a href="#l4.25"></a><span id="l4.25">   let currentOffset = offset;</span>
<a href="#l4.26"></a><span id="l4.26"> </span>
<a href="#l4.27"></a><span id="l4.27">   while (currentOffset &lt; text.length) {</span>
<a href="#l4.28"></a><span id="l4.28">     let loc = text.indexOf(str, currentOffset);</span>
<a href="#l4.29"></a><span id="l4.29"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/attachment.jsm</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/attachment.jsm</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -3,18 +3,18 @@</span>
<a href="#l5.4"></a><span id="l5.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.5"></a><span id="l5.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l5.6"></a><span id="l5.6">  */</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8"> &quot;use strict&quot;;</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailAttachment&quot;];</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l5.14"></a><span id="l5.14">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+);</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> var EnigmailAttachment = {</span>
<a href="#l5.19"></a><span id="l5.19">   getFileName(parent, byteData) {</span>
<a href="#l5.20"></a><span id="l5.20">     const cApi = EnigmailCryptoAPI();</span>
<a href="#l5.21"></a><span id="l5.21">     return cApi.sync(cApi.getFileName(parent, byteData));</span>
<a href="#l5.22"></a><span id="l5.22">   },</span>
<a href="#l5.23"></a><span id="l5.23"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/autoSetup.jsm</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/autoSetup.jsm</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -8,50 +8,50 @@</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> /**</span>
<a href="#l6.6"></a><span id="l6.6">  *  Module to determine the type of setup of the user, based on existing emails</span>
<a href="#l6.7"></a><span id="l6.7">  *  found in the inbox</span>
<a href="#l6.8"></a><span id="l6.8">  */</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailAutoSetup&quot;];</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l6.14"></a><span id="l6.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-const EnigmailAutocrypt = ChromeUtils.import(</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+);</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+const { EnigmailAutocrypt } = ChromeUtils.import(</span>
<a href="#l6.19"></a><span id="l6.19">   &quot;chrome://openpgp/content/modules/autocrypt.jsm&quot;</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-).EnigmailAutocrypt;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+);</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l6.24"></a><span id="l6.24">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+);</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l6.29"></a><span id="l6.29">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+);</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l6.34"></a><span id="l6.34">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+);</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l6.39"></a><span id="l6.39">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+);</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l6.44"></a><span id="l6.44">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-).EnigmailMime;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-const jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-const EnigmailWks = ChromeUtils.import(</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+);</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+const { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+const { EnigmailWks } = ChromeUtils.import(</span>
<a href="#l6.51"></a><span id="l6.51">   &quot;chrome://openpgp/content/modules/webKey.jsm&quot;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-).EnigmailWks;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+);</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l6.56"></a><span id="l6.56">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-const EnigmailStreams = ChromeUtils.import(</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+);</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+const { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l6.61"></a><span id="l6.61">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineminus">-const EnigmailGpg = ChromeUtils.import(</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+);</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+const { EnigmailGpg } = ChromeUtils.import(</span>
<a href="#l6.66"></a><span id="l6.66">   &quot;chrome://openpgp/content/modules/gpg.jsm&quot;</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineminus">-).EnigmailGpg;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+);</span>
<a href="#l6.69"></a><span id="l6.69"> </span>
<a href="#l6.70"></a><span id="l6.70"> // Interfaces</span>
<a href="#l6.71"></a><span id="l6.71"> const nsIMsgAccountManager = Ci.nsIMsgAccountManager;</span>
<a href="#l6.72"></a><span id="l6.72"> const nsIMessenger = Ci.nsIMessenger;</span>
<a href="#l6.73"></a><span id="l6.73"> const nsIMsgMessageService = Ci.nsIMsgMessageService;</span>
<a href="#l6.74"></a><span id="l6.74"> </span>
<a href="#l6.75"></a><span id="l6.75"> /**</span>
<a href="#l6.76"></a><span id="l6.76">  * the determined setup type</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/autocrypt.jsm</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/autocrypt.jsm</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -8,53 +8,53 @@</span>
<a href="#l7.4"></a><span id="l7.4">  *  Module for dealing with received Autocrypt headers, level 0</span>
<a href="#l7.5"></a><span id="l7.5">  *  See details at https://github.com/mailencrypt/autocrypt</span>
<a href="#l7.6"></a><span id="l7.6">  */</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8"> var EXPORTED_SYMBOLS = [&quot;EnigmailAutocrypt&quot;];</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> //Cu.importGlobalProperties([&quot;crypto&quot;]);</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-const jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+const { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l7.16"></a><span id="l7.16">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-).EnigmailLog;</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+);</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l7.21"></a><span id="l7.21">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+);</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l7.26"></a><span id="l7.26">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">-).EnigmailMime;</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">-const EnigmailSqliteDb = ChromeUtils.import(</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+);</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+const { EnigmailSqliteDb } = ChromeUtils.import(</span>
<a href="#l7.31"></a><span id="l7.31">   &quot;chrome://openpgp/content/modules/sqliteDb.jsm&quot;</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-).EnigmailSqliteDb;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-const PromiseUtils = ChromeUtils.import(</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+);</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+const { PromiseUtils } = ChromeUtils.import(</span>
<a href="#l7.36"></a><span id="l7.36">   &quot;resource://gre/modules/PromiseUtils.jsm&quot;</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">-).PromiseUtils;</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+);</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l7.41"></a><span id="l7.41">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-const EnigmailStreams = ChromeUtils.import(</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+);</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+const { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l7.46"></a><span id="l7.46">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-const EnigmailArmor = ChromeUtils.import(</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+);</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l7.51"></a><span id="l7.51">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-).EnigmailArmor;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-const EnigmailRules = ChromeUtils.import(</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+);</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+const { EnigmailRules } = ChromeUtils.import(</span>
<a href="#l7.56"></a><span id="l7.56">   &quot;chrome://openpgp/content/modules/rules.jsm&quot;</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineminus">-).EnigmailRules;</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-const EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+);</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l7.61"></a><span id="l7.61">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+);</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l7.66"></a><span id="l7.66">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+);</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l7.71"></a><span id="l7.71">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+);</span>
<a href="#l7.74"></a><span id="l7.74"> </span>
<a href="#l7.75"></a><span id="l7.75"> var gCreatedSetupIds = [];</span>
<a href="#l7.76"></a><span id="l7.76"> </span>
<a href="#l7.77"></a><span id="l7.77"> var EnigmailAutocrypt = {</span>
<a href="#l7.78"></a><span id="l7.78">   /**</span>
<a href="#l7.79"></a><span id="l7.79">    * Process the &quot;Autocrypt:&quot; header and if successful store the update in the database</span>
<a href="#l7.80"></a><span id="l7.80">    *</span>
<a href="#l7.81"></a><span id="l7.81">    * @param {String} fromAddr:               Address of sender (From: header)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/clipboard.jsm</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/clipboard.jsm</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -5,18 +5,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">  */</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> &quot;use strict&quot;;</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8"> var EXPORTED_SYMBOLS = [&quot;EnigmailClipboard&quot;];</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10"> // Import the Services module for future use, if we're not in</span>
<a href="#l8.11"></a><span id="l8.11"> // a browser window where it's already loaded.</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-  .Services;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16"> // Create a constructor for the built-in transferable class</span>
<a href="#l8.17"></a><span id="l8.17"> const nsTransferable = Components.Constructor(</span>
<a href="#l8.18"></a><span id="l8.18">   &quot;@mozilla.org/widget/transferable;1&quot;,</span>
<a href="#l8.19"></a><span id="l8.19">   &quot;nsITransferable&quot;</span>
<a href="#l8.20"></a><span id="l8.20"> );</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22"> // Create a wrapper to construct an nsITransferable instance and set its source to the given window, when necessary</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/commandLine.jsm</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/commandLine.jsm</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -3,21 +3,20 @@</span>
<a href="#l9.4"></a><span id="l9.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.5"></a><span id="l9.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l9.6"></a><span id="l9.6">  */</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> &quot;use strict&quot;;</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailCommandLine&quot;];</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-  .Services;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l9.17"></a><span id="l9.17">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+);</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21"> const NS_ENIGCLINE_SERVICE_CID = Components.ID(</span>
<a href="#l9.22"></a><span id="l9.22">   &quot;{847b3ab1-7ab1-11d4-8f02-006008948af5}&quot;</span>
<a href="#l9.23"></a><span id="l9.23"> );</span>
<a href="#l9.24"></a><span id="l9.24"> const NS_CLINE_SERVICE_CONTRACTID = &quot;@mozilla.org/enigmail/cline-handler;1&quot;;</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26"> function Handler() {}</span>
<a href="#l9.27"></a><span id="l9.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/configBackup.jsm</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/configBackup.jsm</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1,28 +1,28 @@</span>
<a href="#l10.4"></a><span id="l10.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.5"></a><span id="l10.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.6"></a><span id="l10.6">  * file, You can obtain one at https://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8"> &quot;use strict&quot;;</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailConfigBackup&quot;];</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l10.14"></a><span id="l10.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-const EnigmailRules = ChromeUtils.import(</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+);</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+const { EnigmailRules } = ChromeUtils.import(</span>
<a href="#l10.19"></a><span id="l10.19">   &quot;chrome://openpgp/content/modules/rules.jsm&quot;</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-).EnigmailRules;</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+);</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l10.24"></a><span id="l10.24">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+);</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l10.29"></a><span id="l10.29">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+);</span>
<a href="#l10.32"></a><span id="l10.32"> </span>
<a href="#l10.33"></a><span id="l10.33"> const TYPE_BOOL = 1;</span>
<a href="#l10.34"></a><span id="l10.34"> const TYPE_CHAR = 2;</span>
<a href="#l10.35"></a><span id="l10.35"> const TYPE_INT = 3;</span>
<a href="#l10.36"></a><span id="l10.36"> </span>
<a href="#l10.37"></a><span id="l10.37"> const IdentityPref = {</span>
<a href="#l10.38"></a><span id="l10.38">   enablePgp: TYPE_BOOL,</span>
<a href="#l10.39"></a><span id="l10.39">   pgpkeyId: TYPE_CHAR,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/configure.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/configure.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -3,55 +3,54 @@</span>
<a href="#l11.4"></a><span id="l11.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.5"></a><span id="l11.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l11.6"></a><span id="l11.6">  */</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8"> &quot;use strict&quot;;</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailConfigure&quot;];</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-  .Services;</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l11.15"></a><span id="l11.15"> </span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l11.18"></a><span id="l11.18">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-).EnigmailLog;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+);</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l11.23"></a><span id="l11.23">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+);</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l11.28"></a><span id="l11.28">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-const EnigmailApp = ChromeUtils.import(</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+);</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+const { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l11.33"></a><span id="l11.33">   &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-).EnigmailApp;</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+);</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l11.38"></a><span id="l11.38">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+);</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l11.43"></a><span id="l11.43">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-const EnigmailWindows = ChromeUtils.import(</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+);</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineplus">+const { EnigmailWindows } = ChromeUtils.import(</span>
<a href="#l11.48"></a><span id="l11.48">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-).EnigmailWindows;</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+);</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l11.53"></a><span id="l11.53">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineplus">+);</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l11.58"></a><span id="l11.58">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineminus">-).EnigmailCore;</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-const EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineplus">+);</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineplus">+const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l11.63"></a><span id="l11.63">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineplus">+);</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l11.68"></a><span id="l11.68">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-const EnigmailAutoSetup = ChromeUtils.import(</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineplus">+);</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineplus">+const { EnigmailAutoSetup } = ChromeUtils.import(</span>
<a href="#l11.73"></a><span id="l11.73">   &quot;chrome://openpgp/content/modules/autoSetup.jsm&quot;</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-).EnigmailAutoSetup;</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineplus">+);</span>
<a href="#l11.76"></a><span id="l11.76"> </span>
<a href="#l11.77"></a><span id="l11.77"> /**</span>
<a href="#l11.78"></a><span id="l11.78">  * Upgrade sending prefs</span>
<a href="#l11.79"></a><span id="l11.79">  * (v1.6.x -&gt; v1.7 )</span>
<a href="#l11.80"></a><span id="l11.80">  */</span>
<a href="#l11.81"></a><span id="l11.81"> function upgradePrefsSending() {</span>
<a href="#l11.82"></a><span id="l11.82">   EnigmailLog.DEBUG(&quot;enigmailCommon.jsm: upgradePrefsSending()\n&quot;);</span>
<a href="#l11.83"></a><span id="l11.83"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/core.jsm</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/core.jsm</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -4,19 +4,19 @@</span>
<a href="#l12.4"></a><span id="l12.4">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l12.5"></a><span id="l12.5">  */</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> &quot;use strict&quot;;</span>
<a href="#l12.8"></a><span id="l12.8"> </span>
<a href="#l12.9"></a><span id="l12.9"> const { manager: Cm } = Components;</span>
<a href="#l12.10"></a><span id="l12.10"> Cm.QueryInterface(Ci.nsIComponentRegistrar);</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l12.14"></a><span id="l12.14">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+);</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18"> // load all modules lazily to avoid possible cross-reference errors</span>
<a href="#l12.19"></a><span id="l12.19"> const getEnigmailConsole = EnigmailLazy.loader(</span>
<a href="#l12.20"></a><span id="l12.20">   &quot;enigmail/pipeConsole.jsm&quot;,</span>
<a href="#l12.21"></a><span id="l12.21">   &quot;EnigmailConsole&quot;</span>
<a href="#l12.22"></a><span id="l12.22"> );</span>
<a href="#l12.23"></a><span id="l12.23"> const getEnigmailMimeEncrypt = EnigmailLazy.loader(</span>
<a href="#l12.24"></a><span id="l12.24">   &quot;enigmail/mimeEncrypt.jsm&quot;,</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineat">@@ -68,18 +68,17 @@ const getEnigmailWksMimeHandler = Enigma</span>
<a href="#l12.26"></a><span id="l12.26"> const getEnigmailSqlite = EnigmailLazy.loader(</span>
<a href="#l12.27"></a><span id="l12.27">   &quot;enigmail/sqliteDb.jsm&quot;,</span>
<a href="#l12.28"></a><span id="l12.28">   &quot;EnigmailSqliteDb&quot;</span>
<a href="#l12.29"></a><span id="l12.29"> );</span>
<a href="#l12.30"></a><span id="l12.30"> const getOpenPGPMasterpass = EnigmailLazy.loader(</span>
<a href="#l12.31"></a><span id="l12.31">   &quot;enigmail/masterpass.jsm&quot;,</span>
<a href="#l12.32"></a><span id="l12.32">   &quot;OpenPGPMasterpass&quot;</span>
<a href="#l12.33"></a><span id="l12.33"> );</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineminus">-  .Services;</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l12.37"></a><span id="l12.37"> </span>
<a href="#l12.38"></a><span id="l12.38"> var EXPORTED_SYMBOLS = [&quot;EnigmailCore&quot;];</span>
<a href="#l12.39"></a><span id="l12.39"> </span>
<a href="#l12.40"></a><span id="l12.40"> // Interfaces</span>
<a href="#l12.41"></a><span id="l12.41"> const nsIEnvironment = Ci.nsIEnvironment;</span>
<a href="#l12.42"></a><span id="l12.42"> </span>
<a href="#l12.43"></a><span id="l12.43"> var gOverwriteEnvVar = [];</span>
<a href="#l12.44"></a><span id="l12.44"> var gEnigmailService = null; // Global Enigmail Service</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/cryptoAPI/GnuPGCryptoAPI.jsm</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -3,34 +3,33 @@</span>
<a href="#l13.4"></a><span id="l13.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.5"></a><span id="l13.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l13.6"></a><span id="l13.6">  */</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8"> &quot;use strict&quot;;</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10"> var EXPORTED_SYMBOLS = [&quot;getGnuPGAPI&quot;];</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-var Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-  .Services;</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.15"></a><span id="l13.15"> </span>
<a href="#l13.16"></a><span id="l13.16"> Services.scriptloader.loadSubScript(</span>
<a href="#l13.17"></a><span id="l13.17">   &quot;chrome://openpgp/content/modules/cryptoAPI/interface.js&quot;,</span>
<a href="#l13.18"></a><span id="l13.18">   null,</span>
<a href="#l13.19"></a><span id="l13.19">   &quot;UTF-8&quot;</span>
<a href="#l13.20"></a><span id="l13.20"> ); /* global CryptoAPI */</span>
<a href="#l13.21"></a><span id="l13.21"> </span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l13.24"></a><span id="l13.24">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineminus">-).EnigmailLog;</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+);</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l13.29"></a><span id="l13.29">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+);</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l13.34"></a><span id="l13.34">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+);</span>
<a href="#l13.37"></a><span id="l13.37"> </span>
<a href="#l13.38"></a><span id="l13.38"> const {</span>
<a href="#l13.39"></a><span id="l13.39">   obtainKeyList,</span>
<a href="#l13.40"></a><span id="l13.40">   getPhotoFileFromGnuPG,</span>
<a href="#l13.41"></a><span id="l13.41">   getGpgKeyData,</span>
<a href="#l13.42"></a><span id="l13.42"> } = ChromeUtils.import(</span>
<a href="#l13.43"></a><span id="l13.43">   &quot;chrome://openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm&quot;</span>
<a href="#l13.44"></a><span id="l13.44"> );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/cryptoAPI/RNPCryptoAPI.jsm</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -3,32 +3,31 @@</span>
<a href="#l14.4"></a><span id="l14.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.5"></a><span id="l14.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l14.6"></a><span id="l14.6">  */</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8"> &quot;use strict&quot;;</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10"> var EXPORTED_SYMBOLS = [&quot;getRNPAPI&quot;];</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-const RNP = ChromeUtils.import(&quot;chrome://openpgp/content/modules/rnp.jsm&quot;).RNP;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-var Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-  .Services;</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+const { RNP } = ChromeUtils.import(&quot;chrome://openpgp/content/modules/rnp.jsm&quot;);</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18"> Services.scriptloader.loadSubScript(</span>
<a href="#l14.19"></a><span id="l14.19">   &quot;chrome://openpgp/content/modules/cryptoAPI/interface.js&quot;,</span>
<a href="#l14.20"></a><span id="l14.20">   null,</span>
<a href="#l14.21"></a><span id="l14.21">   &quot;UTF-8&quot;</span>
<a href="#l14.22"></a><span id="l14.22"> ); /* global CryptoAPI */</span>
<a href="#l14.23"></a><span id="l14.23"> </span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l14.26"></a><span id="l14.26">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineminus">-).EnigmailLog;</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineplus">+);</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l14.31"></a><span id="l14.31">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+);</span>
<a href="#l14.34"></a><span id="l14.34"> </span>
<a href="#l14.35"></a><span id="l14.35"> /**</span>
<a href="#l14.36"></a><span id="l14.36">  * RNP implementation of CryptoAPI</span>
<a href="#l14.37"></a><span id="l14.37">  */</span>
<a href="#l14.38"></a><span id="l14.38"> </span>
<a href="#l14.39"></a><span id="l14.39"> class RNPCryptoAPI extends CryptoAPI {</span>
<a href="#l14.40"></a><span id="l14.40">   constructor() {</span>
<a href="#l14.41"></a><span id="l14.41">     super();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-key.jsm</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -7,19 +7,19 @@</span>
<a href="#l15.4"></a><span id="l15.4"> /****</span>
<a href="#l15.5"></a><span id="l15.5">    Private sub-module to GnuPGCryptoAPI.jsm for handling key import/export</span>
<a href="#l15.6"></a><span id="l15.6">  ****/</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8"> &quot;use strict&quot;;</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10"> var EXPORTED_SYMBOLS = [&quot;GnuPG_importKeyFromFile&quot;, &quot;GnuPG_extractSecretKey&quot;];</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l15.14"></a><span id="l15.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+);</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18"> async function GnuPG_importKeyFromFile(inputFile) {</span>
<a href="#l15.19"></a><span id="l15.19">   EnigmailLog.DEBUG(</span>
<a href="#l15.20"></a><span id="l15.20">     &quot;gnupg-key.jsm: importKeysFromFile: fileName=&quot; + inputFile.path + &quot;\n&quot;</span>
<a href="#l15.21"></a><span id="l15.21">   );</span>
<a href="#l15.22"></a><span id="l15.22">   throw new Error(&quot;Not implemented&quot;);</span>
<a href="#l15.23"></a><span id="l15.23"> }</span>
<a href="#l15.24"></a><span id="l15.24"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -12,31 +12,31 @@</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5"> var EXPORTED_SYMBOLS = [</span>
<a href="#l16.6"></a><span id="l16.6">   &quot;obtainKeyList&quot;,</span>
<a href="#l16.7"></a><span id="l16.7">   &quot;getPhotoFileFromGnuPG&quot;,</span>
<a href="#l16.8"></a><span id="l16.8">   &quot;extractSignatures&quot;,</span>
<a href="#l16.9"></a><span id="l16.9">   &quot;getGpgKeyData&quot;,</span>
<a href="#l16.10"></a><span id="l16.10"> ];</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-const EnigmailTime = ChromeUtils.import(</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+const { EnigmailTime } = ChromeUtils.import(</span>
<a href="#l16.14"></a><span id="l16.14">   &quot;chrome://openpgp/content/modules/time.jsm&quot;</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-).EnigmailTime;</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+);</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l16.19"></a><span id="l16.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-).EnigmailLog;</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-const EnigmailTrust = ChromeUtils.import(</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+);</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineplus">+const { EnigmailTrust } = ChromeUtils.import(</span>
<a href="#l16.24"></a><span id="l16.24">   &quot;chrome://openpgp/content/modules/trust.jsm&quot;</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-).EnigmailTrust;</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+);</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l16.29"></a><span id="l16.29">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-).EnigmailData;</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+);</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l16.34"></a><span id="l16.34">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+);</span>
<a href="#l16.37"></a><span id="l16.37"> </span>
<a href="#l16.38"></a><span id="l16.38"> // field ID's of key list (as described in the doc/DETAILS file in the GnuPG distribution)</span>
<a href="#l16.39"></a><span id="l16.39"> const ENTRY_ID = 0;</span>
<a href="#l16.40"></a><span id="l16.40"> const KEY_TRUST_ID = 1;</span>
<a href="#l16.41"></a><span id="l16.41"> const KEY_SIZE_ID = 2;</span>
<a href="#l16.42"></a><span id="l16.42"> const KEY_ALGO_ID = 3;</span>
<a href="#l16.43"></a><span id="l16.43"> const KEY_ID = 4;</span>
<a href="#l16.44"></a><span id="l16.44"> const CREATED_ID = 5;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -5,58 +5,58 @@</span>
<a href="#l17.4"></a><span id="l17.4">  */</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6"> /* eslint-disable complexity */</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8"> &quot;use strict&quot;;</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailDecryption&quot;];</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l17.14"></a><span id="l17.14">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-).EnigmailCore;</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineplus">+);</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l17.19"></a><span id="l17.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineminus">-).EnigmailLog;</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+);</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l17.24"></a><span id="l17.24">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-const EnigmailArmor = ChromeUtils.import(</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineplus">+);</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineplus">+const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l17.29"></a><span id="l17.29">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">-).EnigmailArmor;</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+);</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l17.34"></a><span id="l17.34">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineplus">+);</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l17.39"></a><span id="l17.39">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-).EnigmailData;</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineplus">+);</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l17.44"></a><span id="l17.44">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-const EnigmailHttpProxy = ChromeUtils.import(</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineplus">+);</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineplus">+const { EnigmailHttpProxy } = ChromeUtils.import(</span>
<a href="#l17.49"></a><span id="l17.49">   &quot;chrome://openpgp/content/modules/httpProxy.jsm&quot;</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-).EnigmailHttpProxy;</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineplus">+);</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l17.54"></a><span id="l17.54">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineplus">+);</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l17.59"></a><span id="l17.59">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-const EnigmailKey = ChromeUtils.import(</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineplus">+);</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineplus">+const { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l17.64"></a><span id="l17.64">   &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-).EnigmailKey;</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+);</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l17.69"></a><span id="l17.69">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineplus">+);</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l17.74"></a><span id="l17.74">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineplus">+);</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l17.79"></a><span id="l17.79">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineplus">+);</span>
<a href="#l17.82"></a><span id="l17.82"> </span>
<a href="#l17.83"></a><span id="l17.83"> function statusObjectFrom(</span>
<a href="#l17.84"></a><span id="l17.84">   signatureObj,</span>
<a href="#l17.85"></a><span id="l17.85">   exitCodeObj,</span>
<a href="#l17.86"></a><span id="l17.86">   statusFlagsObj,</span>
<a href="#l17.87"></a><span id="l17.87">   keyIdObj,</span>
<a href="#l17.88"></a><span id="l17.88">   userIdObj,</span>
<a href="#l17.89"></a><span id="l17.89">   sigDetailsObj,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/dialog.jsm</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/dialog.jsm</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -3,34 +3,33 @@</span>
<a href="#l18.4"></a><span id="l18.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.5"></a><span id="l18.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l18.6"></a><span id="l18.6">  */</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8"> &quot;use strict&quot;;</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailDialog&quot;];</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-  .Services;</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l18.18"></a><span id="l18.18">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineplus">+);</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l18.23"></a><span id="l18.23">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-).EnigmailLog;</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-const EnigmailWindows = ChromeUtils.import(</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineplus">+);</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineplus">+const { EnigmailWindows } = ChromeUtils.import(</span>
<a href="#l18.28"></a><span id="l18.28">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineminus">-).EnigmailWindows;</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineplus">+);</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l18.33"></a><span id="l18.33">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineplus">+);</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l18.38"></a><span id="l18.38">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineplus">+);</span>
<a href="#l18.41"></a><span id="l18.41"> </span>
<a href="#l18.42"></a><span id="l18.42"> const LOCAL_FILE_CONTRACTID = &quot;@mozilla.org/file/local;1&quot;;</span>
<a href="#l18.43"></a><span id="l18.43"> </span>
<a href="#l18.44"></a><span id="l18.44"> var EnigmailDialog = {</span>
<a href="#l18.45"></a><span id="l18.45">   /***</span>
<a href="#l18.46"></a><span id="l18.46">    * Confirmation dialog with OK / Cancel buttons (both customizable)</span>
<a href="#l18.47"></a><span id="l18.47">    *</span>
<a href="#l18.48"></a><span id="l18.48">    * @win:         nsIWindow - parent window to display modal dialog; can be null</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/encryption.jsm</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/encryption.jsm</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -3,58 +3,58 @@</span>
<a href="#l19.4"></a><span id="l19.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.5"></a><span id="l19.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l19.6"></a><span id="l19.6">  */</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> &quot;use strict&quot;;</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailEncryption&quot;];</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l19.14"></a><span id="l19.14">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-).EnigmailCore;</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineplus">+);</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l19.19"></a><span id="l19.19">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-).EnigmailData;</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+);</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l19.24"></a><span id="l19.24">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-).EnigmailLog;</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+);</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l19.29"></a><span id="l19.29">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-const EnigmailApp = ChromeUtils.import(</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+);</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineplus">+const { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l19.34"></a><span id="l19.34">   &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-).EnigmailApp;</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineplus">+);</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l19.39"></a><span id="l19.39">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineplus">+);</span>
<a href="#l19.43"></a><span id="l19.43" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l19.44"></a><span id="l19.44">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineminus">-const EnigmailGpg = ChromeUtils.import(</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineplus">+);</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineplus">+const { EnigmailGpg } = ChromeUtils.import(</span>
<a href="#l19.49"></a><span id="l19.49">   &quot;chrome://openpgp/content/modules/gpg.jsm&quot;</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineminus">-).EnigmailGpg;</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineminus">-const EnigmailErrorHandling = ChromeUtils.import(</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineplus">+);</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineplus">+const { EnigmailErrorHandling } = ChromeUtils.import(</span>
<a href="#l19.54"></a><span id="l19.54">   &quot;chrome://openpgp/content/modules/errorHandling.jsm&quot;</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineminus">-).EnigmailErrorHandling;</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineplus">+);</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l19.59"></a><span id="l19.59">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineplus">+);</span>
<a href="#l19.63"></a><span id="l19.63" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l19.64"></a><span id="l19.64">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l19.65"></a><span id="l19.65" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineplus">+);</span>
<a href="#l19.68"></a><span id="l19.68" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l19.69"></a><span id="l19.69">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l19.70"></a><span id="l19.70" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l19.71"></a><span id="l19.71" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineplus">+);</span>
<a href="#l19.73"></a><span id="l19.73" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l19.74"></a><span id="l19.74">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l19.75"></a><span id="l19.75" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l19.76"></a><span id="l19.76" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l19.77"></a><span id="l19.77" class="difflineplus">+);</span>
<a href="#l19.78"></a><span id="l19.78" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l19.79"></a><span id="l19.79">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l19.80"></a><span id="l19.80" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l19.81"></a><span id="l19.81" class="difflineplus">+);</span>
<a href="#l19.82"></a><span id="l19.82"> </span>
<a href="#l19.83"></a><span id="l19.83"> const gMimeHashAlgorithms = [</span>
<a href="#l19.84"></a><span id="l19.84">   null,</span>
<a href="#l19.85"></a><span id="l19.85">   &quot;sha1&quot;,</span>
<a href="#l19.86"></a><span id="l19.86">   &quot;ripemd160&quot;,</span>
<a href="#l19.87"></a><span id="l19.87">   &quot;sha256&quot;,</span>
<a href="#l19.88"></a><span id="l19.88">   &quot;sha384&quot;,</span>
<a href="#l19.89"></a><span id="l19.89">   &quot;sha512&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/errorHandling.jsm</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/errorHandling.jsm</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -3,25 +3,25 @@</span>
<a href="#l20.4"></a><span id="l20.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l20.5"></a><span id="l20.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l20.6"></a><span id="l20.6">  */</span>
<a href="#l20.7"></a><span id="l20.7"> </span>
<a href="#l20.8"></a><span id="l20.8"> &quot;use strict&quot;;</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailErrorHandling&quot;];</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l20.14"></a><span id="l20.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+);</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l20.19"></a><span id="l20.19">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+);</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l20.24"></a><span id="l20.24">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineplus">+);</span>
<a href="#l20.27"></a><span id="l20.27"> </span>
<a href="#l20.28"></a><span id="l20.28"> const getEnigmailKeyRing = EnigmailLazy.loader(</span>
<a href="#l20.29"></a><span id="l20.29">   &quot;enigmail/keyRing.jsm&quot;,</span>
<a href="#l20.30"></a><span id="l20.30">   &quot;EnigmailKeyRing&quot;</span>
<a href="#l20.31"></a><span id="l20.31"> );</span>
<a href="#l20.32"></a><span id="l20.32"> const getEnigmailFiles = EnigmailLazy.loader(</span>
<a href="#l20.33"></a><span id="l20.33">   &quot;enigmail/files.jsm&quot;,</span>
<a href="#l20.34"></a><span id="l20.34">   &quot;EnigmailFiles&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/events.jsm</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/events.jsm</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -3,22 +3,22 @@</span>
<a href="#l21.4"></a><span id="l21.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l21.5"></a><span id="l21.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l21.6"></a><span id="l21.6">  */</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> &quot;use strict&quot;;</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailEvents&quot;];</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l21.14"></a><span id="l21.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineplus">+);</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l21.19"></a><span id="l21.19">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineplus">+);</span>
<a href="#l21.22"></a><span id="l21.22"> </span>
<a href="#l21.23"></a><span id="l21.23"> /**** DEPRECATED - use EnigmailTimer instead *****/</span>
<a href="#l21.24"></a><span id="l21.24"> </span>
<a href="#l21.25"></a><span id="l21.25"> var EnigmailEvents = {</span>
<a href="#l21.26"></a><span id="l21.26">   /**</span>
<a href="#l21.27"></a><span id="l21.27">    * dispatch event aynchronously to the main thread</span>
<a href="#l21.28"></a><span id="l21.28">    *</span>
<a href="#l21.29"></a><span id="l21.29">    * @callbackFunction: Function - any function specification</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/files.jsm</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/files.jsm</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -3,28 +3,28 @@</span>
<a href="#l22.4"></a><span id="l22.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.5"></a><span id="l22.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l22.6"></a><span id="l22.6">  */</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8"> &quot;use strict&quot;;</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailFiles&quot;];</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l22.14"></a><span id="l22.14">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-).EnigmailData;</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-const EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+);</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+const { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+);</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l22.24"></a><span id="l22.24">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineplus">+);</span>
<a href="#l22.27"></a><span id="l22.27"> </span>
<a href="#l22.28"></a><span id="l22.28"> const { OS } = ChromeUtils.import(&quot;resource://gre/modules/osfile.jsm&quot;, {});</span>
<a href="#l22.29"></a><span id="l22.29" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineminus">-  .Services;</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l22.32"></a><span id="l22.32"> </span>
<a href="#l22.33"></a><span id="l22.33"> const lazyStream = EnigmailLazy.loader(</span>
<a href="#l22.34"></a><span id="l22.34">   &quot;enigmail/streams.jsm&quot;,</span>
<a href="#l22.35"></a><span id="l22.35">   &quot;EnigmailStreams&quot;</span>
<a href="#l22.36"></a><span id="l22.36"> );</span>
<a href="#l22.37"></a><span id="l22.37"> const lazyLog = EnigmailLazy.loader(&quot;enigmail/log.jsm&quot;, &quot;EnigmailLog&quot;);</span>
<a href="#l22.38"></a><span id="l22.38"> </span>
<a href="#l22.39"></a><span id="l22.39"> const NS_FILE_CONTRACTID = &quot;@mozilla.org/file/local;1&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/filters.jsm</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/filters.jsm</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -3,55 +3,54 @@</span>
<a href="#l23.4"></a><span id="l23.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.5"></a><span id="l23.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l23.6"></a><span id="l23.6">  */</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8"> &quot;use strict&quot;;</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailFilters&quot;];</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l23.14"></a><span id="l23.14">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+);</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l23.19"></a><span id="l23.19">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+);</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l23.24"></a><span id="l23.24">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-).EnigmailCore;</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-const EnigmailPersistentCrypto = ChromeUtils.import(</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+);</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+const { EnigmailPersistentCrypto } = ChromeUtils.import(</span>
<a href="#l23.29"></a><span id="l23.29">   &quot;chrome://openpgp/content/modules/persistentCrypto.jsm&quot;</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineminus">-).EnigmailPersistentCrypto;</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+);</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l23.34"></a><span id="l23.34">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineminus">-).EnigmailLog;</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l23.37"></a><span id="l23.37" class="difflineplus">+);</span>
<a href="#l23.38"></a><span id="l23.38" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l23.39"></a><span id="l23.39">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l23.42"></a><span id="l23.42" class="difflineplus">+);</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l23.44"></a><span id="l23.44">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineminus">-const EnigmailStreams = ChromeUtils.import(</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineplus">+);</span>
<a href="#l23.48"></a><span id="l23.48" class="difflineplus">+const { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l23.49"></a><span id="l23.49">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineplus">+);</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l23.54"></a><span id="l23.54">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l23.55"></a><span id="l23.55" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l23.56"></a><span id="l23.56" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l23.57"></a><span id="l23.57" class="difflineplus">+);</span>
<a href="#l23.58"></a><span id="l23.58" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l23.59"></a><span id="l23.59">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l23.60"></a><span id="l23.60" class="difflineminus">-).EnigmailData;</span>
<a href="#l23.61"></a><span id="l23.61" class="difflineminus">-const jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l23.62"></a><span id="l23.62" class="difflineminus">-const NetUtil = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;)</span>
<a href="#l23.63"></a><span id="l23.63" class="difflineminus">-  .NetUtil;</span>
<a href="#l23.64"></a><span id="l23.64" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l23.65"></a><span id="l23.65" class="difflineplus">+);</span>
<a href="#l23.66"></a><span id="l23.66" class="difflineplus">+const { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l23.67"></a><span id="l23.67" class="difflineplus">+const { NetUtil } = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;);</span>
<a href="#l23.68"></a><span id="l23.68" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l23.69"></a><span id="l23.69">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l23.70"></a><span id="l23.70" class="difflineminus">-).EnigmailMime;</span>
<a href="#l23.71"></a><span id="l23.71" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l23.72"></a><span id="l23.72" class="difflineplus">+);</span>
<a href="#l23.73"></a><span id="l23.73" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l23.74"></a><span id="l23.74">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l23.75"></a><span id="l23.75" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l23.76"></a><span id="l23.76" class="difflineplus">+);</span>
<a href="#l23.77"></a><span id="l23.77"> </span>
<a href="#l23.78"></a><span id="l23.78"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l23.79"></a><span id="l23.79"> </span>
<a href="#l23.80"></a><span id="l23.80"> var gNewMailListenerInitiated = false;</span>
<a href="#l23.81"></a><span id="l23.81"> </span>
<a href="#l23.82"></a><span id="l23.82"> /**</span>
<a href="#l23.83"></a><span id="l23.83">  * filter action for creating a decrypted version of the mail and</span>
<a href="#l23.84"></a><span id="l23.84">  * deleting the original mail at the same time</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/fixExchangeMsg.jsm</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -3,34 +3,33 @@</span>
<a href="#l24.4"></a><span id="l24.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l24.5"></a><span id="l24.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l24.6"></a><span id="l24.6">  */</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8"> &quot;use strict&quot;;</span>
<a href="#l24.9"></a><span id="l24.9"> </span>
<a href="#l24.10"></a><span id="l24.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailFixExchangeMsg&quot;];</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-  .Services;</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l24.15"></a><span id="l24.15"> </span>
<a href="#l24.16"></a><span id="l24.16" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l24.18"></a><span id="l24.18">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineplus">+);</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l24.23"></a><span id="l24.23">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineplus">+);</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l24.28"></a><span id="l24.28">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineminus">-).EnigmailLog;</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineminus">-const EnigmailStreams = ChromeUtils.import(</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineplus">+);</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+const { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l24.33"></a><span id="l24.33">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineplus">+);</span>
<a href="#l24.37"></a><span id="l24.37" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l24.38"></a><span id="l24.38">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineminus">-).EnigmailMime;</span>
<a href="#l24.40"></a><span id="l24.40" class="difflineplus">+);</span>
<a href="#l24.41"></a><span id="l24.41"> </span>
<a href="#l24.42"></a><span id="l24.42"> /*</span>
<a href="#l24.43"></a><span id="l24.43">  *  Fix a broken message from MS-Exchange and replace it with the original message</span>
<a href="#l24.44"></a><span id="l24.44">  *</span>
<a href="#l24.45"></a><span id="l24.45">  * @param nsIMsgDBHdr hdr          Header of the message to fix (= pointer to message)</span>
<a href="#l24.46"></a><span id="l24.46">  * @param String brokenByApp       Type of app that created the message. Currently one of</span>
<a href="#l24.47"></a><span id="l24.47">  *                                  exchange, iPGMail</span>
<a href="#l24.48"></a><span id="l24.48">  * @param String destFolderUri     optional destination Folder URI</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/funcs.jsm</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/funcs.jsm</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -8,25 +8,25 @@</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5"> var EXPORTED_SYMBOLS = [&quot;EnigmailFuncs&quot;];</span>
<a href="#l25.6"></a><span id="l25.6"> </span>
<a href="#l25.7"></a><span id="l25.7"> /*</span>
<a href="#l25.8"></a><span id="l25.8">  * Common Enigmail crypto-related GUI functionality</span>
<a href="#l25.9"></a><span id="l25.9">  *</span>
<a href="#l25.10"></a><span id="l25.10">  */</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l25.14"></a><span id="l25.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+);</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l25.19"></a><span id="l25.19">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineplus">+);</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l25.24"></a><span id="l25.24">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l25.25"></a><span id="l25.25" class="difflineminus">-).EnigmailData;</span>
<a href="#l25.26"></a><span id="l25.26" class="difflineplus">+);</span>
<a href="#l25.27"></a><span id="l25.27"> </span>
<a href="#l25.28"></a><span id="l25.28"> var gTxtConverter = null;</span>
<a href="#l25.29"></a><span id="l25.29"> </span>
<a href="#l25.30"></a><span id="l25.30"> var EnigmailFuncs = {</span>
<a href="#l25.31"></a><span id="l25.31">   /**</span>
<a href="#l25.32"></a><span id="l25.32">    * get a list of plain email addresses without name or surrounding &lt;&gt;</span>
<a href="#l25.33"></a><span id="l25.33">    * @param mailAddrs |string| - address-list encdoded in Unicode as specified in RFC 2822, 3.4</span>
<a href="#l25.34"></a><span id="l25.34">    *                             separated by , or ;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/glodaUtils.jsm</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/glodaUtils.jsm</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -8,22 +8,14 @@</span>
<a href="#l26.4"></a><span id="l26.4">  This module is a shim module to make it easier to load</span>
<a href="#l26.5"></a><span id="l26.5">  GlodaUtils from the various potential sources</span>
<a href="#l26.6"></a><span id="l26.6"> */</span>
<a href="#l26.7"></a><span id="l26.7"> </span>
<a href="#l26.8"></a><span id="l26.8"> &quot;use strict&quot;;</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10"> var EXPORTED_SYMBOLS = [&quot;GlodaUtils&quot;];</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-var GlodaUtils = null;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineminus">-try {</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineminus">-  // TB with omnijar</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineminus">-  GlodaUtils = ChromeUtils.import(&quot;resource:///modules/gloda/GlodaUtils.jsm&quot;)</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineminus">-    .GlodaUtils;</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineminus">-} catch (ex) {</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineminus">-  // &quot;old style&quot; TB</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineminus">-  GlodaUtils = ChromeUtils.import(&quot;resource://app/modules/gloda/GlodaUtils.jsm&quot;)</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineminus">-    .GlodaUtils;</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineminus">-}</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineplus">+var { GlodaUtils } = ChromeUtils.import(</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineplus">+  &quot;resource:///modules/gloda/GlodaUtils.jsm&quot;</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+);</span>
<a href="#l26.26"></a><span id="l26.26"> </span>
<a href="#l26.27"></a><span id="l26.27"> // We don't define the exported symbol here - that is on purpose</span>
<a href="#l26.28"></a><span id="l26.28"> // The goal of this module is simply to simplify loading of the component</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/gpg.jsm</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/gpg.jsm</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -3,22 +3,22 @@</span>
<a href="#l27.4"></a><span id="l27.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l27.5"></a><span id="l27.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l27.6"></a><span id="l27.6">  */</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8"> &quot;use strict&quot;;</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailGpg&quot;];</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l27.14"></a><span id="l27.14">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-const EnigmailVersioning = ChromeUtils.import(</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+);</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+const { EnigmailVersioning } = ChromeUtils.import(</span>
<a href="#l27.19"></a><span id="l27.19">   &quot;chrome://openpgp/content/modules/versioning.jsm&quot;</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineminus">-).EnigmailVersioning;</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+);</span>
<a href="#l27.22"></a><span id="l27.22"> </span>
<a href="#l27.23"></a><span id="l27.23"> const MINIMUM_GPG_VERSION = &quot;2.0.14&quot;;</span>
<a href="#l27.24"></a><span id="l27.24"> </span>
<a href="#l27.25"></a><span id="l27.25"> var EnigmailGpg = {</span>
<a href="#l27.26"></a><span id="l27.26">   agentVersion: &quot;&quot;,</span>
<a href="#l27.27"></a><span id="l27.27">   _agentPath: null,</span>
<a href="#l27.28"></a><span id="l27.28"> </span>
<a href="#l27.29"></a><span id="l27.29">   get agentPath() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/hash.jsm</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/hash.jsm</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -3,37 +3,37 @@</span>
<a href="#l28.4"></a><span id="l28.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l28.5"></a><span id="l28.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l28.6"></a><span id="l28.6">  */</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8"> &quot;use strict&quot;;</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailHash&quot;];</span>
<a href="#l28.11"></a><span id="l28.11"> </span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l28.14"></a><span id="l28.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineminus">-const EnigmailWindows = ChromeUtils.import(</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineplus">+);</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineplus">+const { EnigmailWindows } = ChromeUtils.import(</span>
<a href="#l28.19"></a><span id="l28.19">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineminus">-).EnigmailWindows;</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+);</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l28.24"></a><span id="l28.24">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineplus">+);</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l28.29"></a><span id="l28.29">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-const EnigmailEncryption = ChromeUtils.import(</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+);</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+const { EnigmailEncryption } = ChromeUtils.import(</span>
<a href="#l28.34"></a><span id="l28.34">   &quot;chrome://openpgp/content/modules/encryption.jsm&quot;</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineminus">-).EnigmailEncryption;</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineplus">+);</span>
<a href="#l28.38"></a><span id="l28.38" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l28.39"></a><span id="l28.39">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineplus">+);</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l28.44"></a><span id="l28.44">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineplus">+);</span>
<a href="#l28.47"></a><span id="l28.47"> </span>
<a href="#l28.48"></a><span id="l28.48"> const keyAlgorithms = [];</span>
<a href="#l28.49"></a><span id="l28.49"> const mimeHashAlgorithms = [</span>
<a href="#l28.50"></a><span id="l28.50">   null,</span>
<a href="#l28.51"></a><span id="l28.51">   &quot;sha1&quot;,</span>
<a href="#l28.52"></a><span id="l28.52">   &quot;ripemd160&quot;,</span>
<a href="#l28.53"></a><span id="l28.53">   &quot;sha256&quot;,</span>
<a href="#l28.54"></a><span id="l28.54">   &quot;sha384&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/httpProxy.jsm</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/httpProxy.jsm</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -3,22 +3,21 @@</span>
<a href="#l29.4"></a><span id="l29.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l29.5"></a><span id="l29.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l29.6"></a><span id="l29.6">  */</span>
<a href="#l29.7"></a><span id="l29.7"> </span>
<a href="#l29.8"></a><span id="l29.8"> &quot;use strict&quot;;</span>
<a href="#l29.9"></a><span id="l29.9"> </span>
<a href="#l29.10"></a><span id="l29.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailHttpProxy&quot;];</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-  .Services;</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l29.17"></a><span id="l29.17" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l29.18"></a><span id="l29.18">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l29.19"></a><span id="l29.19" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l29.20"></a><span id="l29.20" class="difflineplus">+);</span>
<a href="#l29.21"></a><span id="l29.21"> </span>
<a href="#l29.22"></a><span id="l29.22"> function getPasswdForHost(hostname, userObj, passwdObj) {</span>
<a href="#l29.23"></a><span id="l29.23">   var loginmgr = Services.logins;</span>
<a href="#l29.24"></a><span id="l29.24"> </span>
<a href="#l29.25"></a><span id="l29.25">   // search HTTP password 1st</span>
<a href="#l29.26"></a><span id="l29.26">   var logins = loginmgr.findLogins({}, &quot;http://&quot; + hostname, &quot;&quot;, &quot;&quot;);</span>
<a href="#l29.27"></a><span id="l29.27">   if (logins.length &gt; 0) {</span>
<a href="#l29.28"></a><span id="l29.28">     userObj.value = logins[0].username;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/key.jsm</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/key.jsm</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -3,36 +3,36 @@</span>
<a href="#l30.4"></a><span id="l30.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l30.5"></a><span id="l30.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l30.6"></a><span id="l30.6">  */</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8"> &quot;use strict&quot;;</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailKey&quot;];</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l30.14"></a><span id="l30.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+);</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l30.19"></a><span id="l30.19">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineplus">+);</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l30.24"></a><span id="l30.24">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l30.27"></a><span id="l30.27" class="difflineplus">+);</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l30.29"></a><span id="l30.29">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l30.30"></a><span id="l30.30" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineplus">+);</span>
<a href="#l30.32"></a><span id="l30.32"> const getKeyRing = EnigmailLazy.loader(</span>
<a href="#l30.33"></a><span id="l30.33">   &quot;enigmail/keyRing.jsm&quot;,</span>
<a href="#l30.34"></a><span id="l30.34">   &quot;EnigmailKeyRing&quot;</span>
<a href="#l30.35"></a><span id="l30.35"> );</span>
<a href="#l30.36"></a><span id="l30.36"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l30.39"></a><span id="l30.39">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineplus">+);</span>
<a href="#l30.42"></a><span id="l30.42"> </span>
<a href="#l30.43"></a><span id="l30.43"> var EnigmailKey = {</span>
<a href="#l30.44"></a><span id="l30.44">   /**</span>
<a href="#l30.45"></a><span id="l30.45">    * Format a key fingerprint</span>
<a href="#l30.46"></a><span id="l30.46">    * @fingerprint |string|  -  unformated OpenPGP fingerprint</span>
<a href="#l30.47"></a><span id="l30.47">    *</span>
<a href="#l30.48"></a><span id="l30.48">    * @return |string| - formatted string</span>
<a href="#l30.49"></a><span id="l30.49">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyObj.jsm</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyObj.jsm</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -57,34 +57,34 @@ var EXPORTED_SYMBOLS = [&quot;newEnigmailKeyO</span>
<a href="#l31.4"></a><span id="l31.4">      * getEncryptionValidity</span>
<a href="#l31.5"></a><span id="l31.5">      * getSigningValidity</span>
<a href="#l31.6"></a><span id="l31.6">      * getPubKeyValidity</span>
<a href="#l31.7"></a><span id="l31.7">      * clone</span>
<a href="#l31.8"></a><span id="l31.8">      * getMinimalPubKey</span>
<a href="#l31.9"></a><span id="l31.9">      * getVirtualKeySize</span>
<a href="#l31.10"></a><span id="l31.10"> */</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l31.14"></a><span id="l31.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineplus">+);</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l31.19"></a><span id="l31.19">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineminus">-const EnigmailKey = ChromeUtils.import(</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineplus">+);</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineplus">+const { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l31.24"></a><span id="l31.24">   &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineminus">-).EnigmailKey;</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineplus">+);</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l31.29"></a><span id="l31.29">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-const EnigmailTime = ChromeUtils.import(</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+);</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineplus">+const { EnigmailTime } = ChromeUtils.import(</span>
<a href="#l31.34"></a><span id="l31.34">   &quot;chrome://openpgp/content/modules/time.jsm&quot;</span>
<a href="#l31.35"></a><span id="l31.35" class="difflineminus">-).EnigmailTime;</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineplus">+);</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l31.39"></a><span id="l31.39">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l31.40"></a><span id="l31.40" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l31.41"></a><span id="l31.41" class="difflineplus">+);</span>
<a href="#l31.42"></a><span id="l31.42"> </span>
<a href="#l31.43"></a><span id="l31.43"> function newEnigmailKeyObj(keyData) {</span>
<a href="#l31.44"></a><span id="l31.44">   return new EnigmailKeyObj(keyData);</span>
<a href="#l31.45"></a><span id="l31.45"> }</span>
<a href="#l31.46"></a><span id="l31.46"> </span>
<a href="#l31.47"></a><span id="l31.47"> class EnigmailKeyObj {</span>
<a href="#l31.48"></a><span id="l31.48">   constructor(keyData) {</span>
<a href="#l31.49"></a><span id="l31.49">     this.keyId = &quot;&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyRefreshService.jsm</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyRefreshService.jsm</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -3,37 +3,36 @@</span>
<a href="#l32.4"></a><span id="l32.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l32.5"></a><span id="l32.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l32.6"></a><span id="l32.6">  */</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> &quot;use strict&quot;;</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailKeyRefreshService&quot;];</span>
<a href="#l32.11"></a><span id="l32.11"> </span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineminus">-  .Services;</span>
<a href="#l32.14"></a><span id="l32.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l32.15"></a><span id="l32.15"> </span>
<a href="#l32.16"></a><span id="l32.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l32.17"></a><span id="l32.17" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l32.18"></a><span id="l32.18">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineminus">-).EnigmailLog;</span>
<a href="#l32.20"></a><span id="l32.20" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineplus">+);</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l32.23"></a><span id="l32.23">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l32.24"></a><span id="l32.24" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l32.25"></a><span id="l32.25" class="difflineminus">-const EnigmailRNG = ChromeUtils.import(</span>
<a href="#l32.26"></a><span id="l32.26" class="difflineplus">+);</span>
<a href="#l32.27"></a><span id="l32.27" class="difflineplus">+const { EnigmailRNG } = ChromeUtils.import(</span>
<a href="#l32.28"></a><span id="l32.28">   &quot;chrome://openpgp/content/modules/rng.jsm&quot;</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineminus">-).EnigmailRNG;</span>
<a href="#l32.30"></a><span id="l32.30" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineplus">+);</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l32.33"></a><span id="l32.33">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l32.34"></a><span id="l32.34" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l32.35"></a><span id="l32.35" class="difflineminus">-const EnigmailKeyServer = ChromeUtils.import(</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineplus">+);</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineplus">+const { EnigmailKeyServer } = ChromeUtils.import(</span>
<a href="#l32.38"></a><span id="l32.38">   &quot;chrome://openpgp/content/modules/keyserver.jsm&quot;</span>
<a href="#l32.39"></a><span id="l32.39" class="difflineminus">-).EnigmailKeyServer;</span>
<a href="#l32.40"></a><span id="l32.40" class="difflineminus">-const EnigmailKeyserverURIs = ChromeUtils.import(</span>
<a href="#l32.41"></a><span id="l32.41" class="difflineplus">+);</span>
<a href="#l32.42"></a><span id="l32.42" class="difflineplus">+const { EnigmailKeyserverURIs } = ChromeUtils.import(</span>
<a href="#l32.43"></a><span id="l32.43">   &quot;chrome://openpgp/content/modules/keyserverUris.jsm&quot;</span>
<a href="#l32.44"></a><span id="l32.44" class="difflineminus">-).EnigmailKeyserverURIs;</span>
<a href="#l32.45"></a><span id="l32.45" class="difflineplus">+);</span>
<a href="#l32.46"></a><span id="l32.46"> </span>
<a href="#l32.47"></a><span id="l32.47"> const ONE_HOUR_IN_MILLISEC = 60 * 60 * 1000;</span>
<a href="#l32.48"></a><span id="l32.48"> </span>
<a href="#l32.49"></a><span id="l32.49"> let gTimer = null;</span>
<a href="#l32.50"></a><span id="l32.50"> </span>
<a href="#l32.51"></a><span id="l32.51"> function getTimer() {</span>
<a href="#l32.52"></a><span id="l32.52">   if (gTimer === null) {</span>
<a href="#l32.53"></a><span id="l32.53">     gTimer = Cc[&quot;@mozilla.org/timer;1&quot;].createInstance(Ci.nsITimer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyRing.jsm</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyRing.jsm</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -3,42 +3,41 @@</span>
<a href="#l33.4"></a><span id="l33.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l33.5"></a><span id="l33.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l33.6"></a><span id="l33.6">  */</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8"> &quot;use strict&quot;;</span>
<a href="#l33.9"></a><span id="l33.9"> </span>
<a href="#l33.10"></a><span id="l33.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailKeyRing&quot;];</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l33.14"></a><span id="l33.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l33.17"></a><span id="l33.17" class="difflineplus">+);</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l33.19"></a><span id="l33.19">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l33.20"></a><span id="l33.20" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l33.21"></a><span id="l33.21" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l33.22"></a><span id="l33.22" class="difflineplus">+);</span>
<a href="#l33.23"></a><span id="l33.23" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l33.24"></a><span id="l33.24">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l33.26"></a><span id="l33.26" class="difflineminus">-const EnigmailTrust = ChromeUtils.import(</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineplus">+);</span>
<a href="#l33.28"></a><span id="l33.28" class="difflineplus">+const { EnigmailTrust } = ChromeUtils.import(</span>
<a href="#l33.29"></a><span id="l33.29">   &quot;chrome://openpgp/content/modules/trust.jsm&quot;</span>
<a href="#l33.30"></a><span id="l33.30" class="difflineminus">-).EnigmailTrust;</span>
<a href="#l33.31"></a><span id="l33.31" class="difflineminus">-const EnigmailArmor = ChromeUtils.import(</span>
<a href="#l33.32"></a><span id="l33.32" class="difflineplus">+);</span>
<a href="#l33.33"></a><span id="l33.33" class="difflineplus">+const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l33.34"></a><span id="l33.34">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l33.35"></a><span id="l33.35" class="difflineminus">-).EnigmailArmor;</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineplus">+);</span>
<a href="#l33.38"></a><span id="l33.38" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l33.39"></a><span id="l33.39">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l33.40"></a><span id="l33.40" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l33.41"></a><span id="l33.41" class="difflineminus">-const newEnigmailKeyObj = ChromeUtils.import(</span>
<a href="#l33.42"></a><span id="l33.42" class="difflineplus">+);</span>
<a href="#l33.43"></a><span id="l33.43" class="difflineplus">+const { newEnigmailKeyObj } = ChromeUtils.import(</span>
<a href="#l33.44"></a><span id="l33.44">   &quot;chrome://openpgp/content/modules/keyObj.jsm&quot;</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-).newEnigmailKeyObj;</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l33.47"></a><span id="l33.47" class="difflineminus">-  .Services;</span>
<a href="#l33.48"></a><span id="l33.48" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l33.49"></a><span id="l33.49" class="difflineplus">+);</span>
<a href="#l33.50"></a><span id="l33.50" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l33.51"></a><span id="l33.51" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l33.52"></a><span id="l33.52">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l33.53"></a><span id="l33.53" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l33.54"></a><span id="l33.54" class="difflineplus">+);</span>
<a href="#l33.55"></a><span id="l33.55"> </span>
<a href="#l33.56"></a><span id="l33.56"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l33.57"></a><span id="l33.57"> const getWindows = EnigmailLazy.loader(</span>
<a href="#l33.58"></a><span id="l33.58">   &quot;enigmail/windows.jsm&quot;,</span>
<a href="#l33.59"></a><span id="l33.59">   &quot;EnigmailWindows&quot;</span>
<a href="#l33.60"></a><span id="l33.60"> );</span>
<a href="#l33.61"></a><span id="l33.61"> </span>
<a href="#l33.62"></a><span id="l33.62"> const DEFAULT_FILE_PERMS = 0o600;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyUsability.jsm</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyUsability.jsm</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -3,34 +3,34 @@</span>
<a href="#l34.4"></a><span id="l34.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l34.5"></a><span id="l34.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l34.6"></a><span id="l34.6">  */</span>
<a href="#l34.7"></a><span id="l34.7"> </span>
<a href="#l34.8"></a><span id="l34.8"> &quot;use strict&quot;;</span>
<a href="#l34.9"></a><span id="l34.9"> </span>
<a href="#l34.10"></a><span id="l34.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailKeyUsability&quot;];</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l34.14"></a><span id="l34.14">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineplus">+);</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l34.19"></a><span id="l34.19">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineplus">+);</span>
<a href="#l34.23"></a><span id="l34.23" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l34.24"></a><span id="l34.24">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineminus">-).EnigmailLog;</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l34.27"></a><span id="l34.27" class="difflineplus">+);</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l34.29"></a><span id="l34.29">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l34.30"></a><span id="l34.30" class="difflineminus">-).EnigmailCore;</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineplus">+);</span>
<a href="#l34.33"></a><span id="l34.33" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l34.34"></a><span id="l34.34">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l34.37"></a><span id="l34.37" class="difflineplus">+);</span>
<a href="#l34.38"></a><span id="l34.38" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l34.39"></a><span id="l34.39">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l34.40"></a><span id="l34.40" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineplus">+);</span>
<a href="#l34.42"></a><span id="l34.42"> </span>
<a href="#l34.43"></a><span id="l34.43"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l34.44"></a><span id="l34.44"> const getWindows = EnigmailLazy.loader(</span>
<a href="#l34.45"></a><span id="l34.45">   &quot;enigmail/windows.jsm&quot;,</span>
<a href="#l34.46"></a><span id="l34.46">   &quot;EnigmailWindows&quot;</span>
<a href="#l34.47"></a><span id="l34.47"> );</span>
<a href="#l34.48"></a><span id="l34.48"> const getKeyRing = EnigmailLazy.loader(</span>
<a href="#l34.49"></a><span id="l34.49">   &quot;enigmail/keyRing.jsm&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyserver.jsm</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyserver.jsm</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -3,49 +3,49 @@</span>
<a href="#l35.4"></a><span id="l35.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l35.5"></a><span id="l35.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l35.6"></a><span id="l35.6">  */</span>
<a href="#l35.7"></a><span id="l35.7"> </span>
<a href="#l35.8"></a><span id="l35.8"> &quot;use strict&quot;;</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailKeyServer&quot;];</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l35.14"></a><span id="l35.14">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l35.17"></a><span id="l35.17" class="difflineplus">+);</span>
<a href="#l35.18"></a><span id="l35.18" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l35.19"></a><span id="l35.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l35.20"></a><span id="l35.20" class="difflineminus">-).EnigmailLog;</span>
<a href="#l35.21"></a><span id="l35.21" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineplus">+);</span>
<a href="#l35.23"></a><span id="l35.23" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l35.24"></a><span id="l35.24">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l35.25"></a><span id="l35.25" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l35.26"></a><span id="l35.26" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l35.27"></a><span id="l35.27" class="difflineplus">+);</span>
<a href="#l35.28"></a><span id="l35.28" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l35.29"></a><span id="l35.29">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l35.30"></a><span id="l35.30" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-const EnigmailKeyserverURIs = ChromeUtils.import(</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+);</span>
<a href="#l35.33"></a><span id="l35.33" class="difflineplus">+const { EnigmailKeyserverURIs } = ChromeUtils.import(</span>
<a href="#l35.34"></a><span id="l35.34">   &quot;chrome://openpgp/content/modules/keyserverUris.jsm&quot;</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">-).EnigmailKeyserverURIs;</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l35.37"></a><span id="l35.37" class="difflineplus">+);</span>
<a href="#l35.38"></a><span id="l35.38" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l35.39"></a><span id="l35.39">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l35.40"></a><span id="l35.40" class="difflineminus">-).EnigmailData;</span>
<a href="#l35.41"></a><span id="l35.41" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l35.42"></a><span id="l35.42" class="difflineplus">+);</span>
<a href="#l35.43"></a><span id="l35.43" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l35.44"></a><span id="l35.44">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l35.45"></a><span id="l35.45" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l35.46"></a><span id="l35.46" class="difflineminus">-const EnigmailGpg = ChromeUtils.import(</span>
<a href="#l35.47"></a><span id="l35.47" class="difflineplus">+);</span>
<a href="#l35.48"></a><span id="l35.48" class="difflineplus">+const { EnigmailGpg } = ChromeUtils.import(</span>
<a href="#l35.49"></a><span id="l35.49">   &quot;chrome://openpgp/content/modules/gpg.jsm&quot;</span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-).EnigmailGpg;</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineminus">-const EnigmailXhrUtils = ChromeUtils.import(</span>
<a href="#l35.52"></a><span id="l35.52" class="difflineplus">+);</span>
<a href="#l35.53"></a><span id="l35.53" class="difflineplus">+const { EnigmailXhrUtils } = ChromeUtils.import(</span>
<a href="#l35.54"></a><span id="l35.54">   &quot;chrome://openpgp/content/modules/xhrUtils.jsm&quot;</span>
<a href="#l35.55"></a><span id="l35.55" class="difflineminus">-).EnigmailXhrUtils;</span>
<a href="#l35.56"></a><span id="l35.56" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l35.57"></a><span id="l35.57" class="difflineplus">+);</span>
<a href="#l35.58"></a><span id="l35.58" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l35.59"></a><span id="l35.59">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l35.61"></a><span id="l35.61" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l35.62"></a><span id="l35.62" class="difflineplus">+);</span>
<a href="#l35.63"></a><span id="l35.63" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l35.64"></a><span id="l35.64">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l35.65"></a><span id="l35.65" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l35.66"></a><span id="l35.66" class="difflineplus">+);</span>
<a href="#l35.67"></a><span id="l35.67"> </span>
<a href="#l35.68"></a><span id="l35.68"> const ENIG_DEFAULT_HKP_PORT = &quot;11371&quot;;</span>
<a href="#l35.69"></a><span id="l35.69"> const ENIG_DEFAULT_HKPS_PORT = &quot;443&quot;;</span>
<a href="#l35.70"></a><span id="l35.70"> const ENIG_DEFAULT_LDAP_PORT = &quot;389&quot;;</span>
<a href="#l35.71"></a><span id="l35.71"> </span>
<a href="#l35.72"></a><span id="l35.72"> const SKS_CACERT_URL = &quot;https://sks-keyservers.net/sks-keyservers.netCA.pem&quot;;</span>
<a href="#l35.73"></a><span id="l35.73"> const HKPS_POOL_HOST = &quot;hkps.pool.sks-keyservers.net&quot;;</span>
<a href="#l35.74"></a><span id="l35.74"> const SKS_CACERT_SUBJECTNAME =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyserverUris.jsm</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyserverUris.jsm</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -3,19 +3,19 @@</span>
<a href="#l36.4"></a><span id="l36.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l36.5"></a><span id="l36.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l36.6"></a><span id="l36.6">  */</span>
<a href="#l36.7"></a><span id="l36.7"> </span>
<a href="#l36.8"></a><span id="l36.8"> &quot;use strict&quot;;</span>
<a href="#l36.9"></a><span id="l36.9"> </span>
<a href="#l36.10"></a><span id="l36.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailKeyserverURIs&quot;];</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l36.14"></a><span id="l36.14">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineplus">+);</span>
<a href="#l36.17"></a><span id="l36.17"> </span>
<a href="#l36.18"></a><span id="l36.18"> const KEYSERVER_PREF = &quot;keyserver&quot;;</span>
<a href="#l36.19"></a><span id="l36.19"> const AUTO_KEYSERVER_SELECTION_PREF = &quot;autoKeyServerSelection&quot;;</span>
<a href="#l36.20"></a><span id="l36.20"> </span>
<a href="#l36.21"></a><span id="l36.21"> const supportedProtocols = {</span>
<a href="#l36.22"></a><span id="l36.22">   hkps: &quot;443&quot;,</span>
<a href="#l36.23"></a><span id="l36.23">   hkp: &quot;11371&quot;,</span>
<a href="#l36.24"></a><span id="l36.24">   ldap: &quot;389&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/locale.jsm</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/locale.jsm</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -3,22 +3,21 @@</span>
<a href="#l37.4"></a><span id="l37.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l37.5"></a><span id="l37.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l37.6"></a><span id="l37.6">  */</span>
<a href="#l37.7"></a><span id="l37.7"> </span>
<a href="#l37.8"></a><span id="l37.8"> &quot;use strict&quot;;</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailLocale&quot;];</span>
<a href="#l37.11"></a><span id="l37.11"> </span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineminus">-  .Services;</span>
<a href="#l37.14"></a><span id="l37.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l37.15"></a><span id="l37.15"> </span>
<a href="#l37.16"></a><span id="l37.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l37.17"></a><span id="l37.17" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l37.18"></a><span id="l37.18">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l37.19"></a><span id="l37.19" class="difflineminus">-).EnigmailLog;</span>
<a href="#l37.20"></a><span id="l37.20" class="difflineplus">+);</span>
<a href="#l37.21"></a><span id="l37.21"> </span>
<a href="#l37.22"></a><span id="l37.22"> var gEnigStringBundle = null;</span>
<a href="#l37.23"></a><span id="l37.23"> </span>
<a href="#l37.24"></a><span id="l37.24"> var EnigmailLocale = {</span>
<a href="#l37.25"></a><span id="l37.25">   /**</span>
<a href="#l37.26"></a><span id="l37.26">    * Get the application locale. Discrecommended - use getUILocale instead!</span>
<a href="#l37.27"></a><span id="l37.27">    */</span>
<a href="#l37.28"></a><span id="l37.28">   get() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/log.jsm</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/log.jsm</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -5,27 +5,27 @@</span>
<a href="#l38.4"></a><span id="l38.4">  */</span>
<a href="#l38.5"></a><span id="l38.5"> </span>
<a href="#l38.6"></a><span id="l38.6"> /* global dump: false */</span>
<a href="#l38.7"></a><span id="l38.7"> </span>
<a href="#l38.8"></a><span id="l38.8"> &quot;use strict&quot;;</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailLog&quot;];</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-  .Services;</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l38.15"></a><span id="l38.15"> </span>
<a href="#l38.16"></a><span id="l38.16" class="difflineminus">-const EnigmailConsole = ChromeUtils.import(</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineplus">+const { EnigmailConsole } = ChromeUtils.import(</span>
<a href="#l38.18"></a><span id="l38.18">   &quot;chrome://openpgp/content/modules/pipeConsole.jsm&quot;</span>
<a href="#l38.19"></a><span id="l38.19" class="difflineminus">-).EnigmailConsole;</span>
<a href="#l38.20"></a><span id="l38.20" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l38.21"></a><span id="l38.21" class="difflineplus">+);</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l38.23"></a><span id="l38.23">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l38.25"></a><span id="l38.25" class="difflineminus">-const EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l38.26"></a><span id="l38.26" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l38.27"></a><span id="l38.27" class="difflineplus">+);</span>
<a href="#l38.28"></a><span id="l38.28" class="difflineplus">+const { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l38.29"></a><span id="l38.29" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l38.30"></a><span id="l38.30" class="difflineplus">+);</span>
<a href="#l38.31"></a><span id="l38.31"> </span>
<a href="#l38.32"></a><span id="l38.32"> const MAX_LOG_LEN = 2500;</span>
<a href="#l38.33"></a><span id="l38.33"> </span>
<a href="#l38.34"></a><span id="l38.34"> var EnigmailLog = {</span>
<a href="#l38.35"></a><span id="l38.35">   level: 3,</span>
<a href="#l38.36"></a><span id="l38.36">   data: null,</span>
<a href="#l38.37"></a><span id="l38.37">   directory: null,</span>
<a href="#l38.38"></a><span id="l38.38">   fileStream: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/masterpass.jsm</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/masterpass.jsm</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -7,22 +7,21 @@</span>
<a href="#l39.4"></a><span id="l39.4"> /*global Components: false */</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6"> &quot;use strict&quot;;</span>
<a href="#l39.7"></a><span id="l39.7"> </span>
<a href="#l39.8"></a><span id="l39.8"> var EXPORTED_SYMBOLS = [&quot;OpenPGPMasterpass&quot;];</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10"> Cu.importGlobalProperties([&quot;crypto&quot;]);</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineminus">-  .Services;</span>
<a href="#l39.14"></a><span id="l39.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l39.15"></a><span id="l39.15"> </span>
<a href="#l39.16"></a><span id="l39.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l39.18"></a><span id="l39.18">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l39.19"></a><span id="l39.19" class="difflineminus">-).EnigmailLog;</span>
<a href="#l39.20"></a><span id="l39.20" class="difflineplus">+);</span>
<a href="#l39.21"></a><span id="l39.21"> </span>
<a href="#l39.22"></a><span id="l39.22"> const PASS_URI = &quot;chrome://openpgp-secret-key-password&quot;;</span>
<a href="#l39.23"></a><span id="l39.23"> const PASS_REALM = &quot;DO NOT DELETE&quot;;</span>
<a href="#l39.24"></a><span id="l39.24"> const PASS_USER = &quot;openpgp&quot;;</span>
<a href="#l39.25"></a><span id="l39.25"> </span>
<a href="#l39.26"></a><span id="l39.26"> var OpenPGPMasterpass = {</span>
<a href="#l39.27"></a><span id="l39.27">   getLoginManager() {</span>
<a href="#l39.28"></a><span id="l39.28">     if (!this.loginManager) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/mime.jsm</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/mime.jsm</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -3,26 +3,26 @@</span>
<a href="#l40.4"></a><span id="l40.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l40.5"></a><span id="l40.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l40.6"></a><span id="l40.6">  */</span>
<a href="#l40.7"></a><span id="l40.7"> </span>
<a href="#l40.8"></a><span id="l40.8"> &quot;use strict&quot;;</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailMime&quot;];</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-const jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineplus">+const { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l40.16"></a><span id="l40.16">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l40.17"></a><span id="l40.17" class="difflineminus">-).EnigmailData;</span>
<a href="#l40.18"></a><span id="l40.18" class="difflineminus">-const EnigmailRNG = ChromeUtils.import(</span>
<a href="#l40.19"></a><span id="l40.19" class="difflineplus">+);</span>
<a href="#l40.20"></a><span id="l40.20" class="difflineplus">+const { EnigmailRNG } = ChromeUtils.import(</span>
<a href="#l40.21"></a><span id="l40.21">   &quot;chrome://openpgp/content/modules/rng.jsm&quot;</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineminus">-).EnigmailRNG;</span>
<a href="#l40.23"></a><span id="l40.23" class="difflineminus">-const EnigmailStreams = ChromeUtils.import(</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineplus">+);</span>
<a href="#l40.25"></a><span id="l40.25" class="difflineplus">+const { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l40.26"></a><span id="l40.26">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l40.27"></a><span id="l40.27" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l40.28"></a><span id="l40.28" class="difflineplus">+);</span>
<a href="#l40.29"></a><span id="l40.29"> </span>
<a href="#l40.30"></a><span id="l40.30"> var EnigmailMime = {</span>
<a href="#l40.31"></a><span id="l40.31">   /***</span>
<a href="#l40.32"></a><span id="l40.32">    * create a string of random characters suitable to use for a boundary in a</span>
<a href="#l40.33"></a><span id="l40.33">    * MIME message following RFC 2045</span>
<a href="#l40.34"></a><span id="l40.34">    *</span>
<a href="#l40.35"></a><span id="l40.35">    * @return: string of 33 random characters and digits</span>
<a href="#l40.36"></a><span id="l40.36">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -6,61 +6,61 @@</span>
<a href="#l41.4"></a><span id="l41.4"> </span>
<a href="#l41.5"></a><span id="l41.5"> var EXPORTED_SYMBOLS = [&quot;EnigmailMimeDecrypt&quot;];</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7"> /**</span>
<a href="#l41.8"></a><span id="l41.8">  *  Module for handling PGP/MIME encrypted messages</span>
<a href="#l41.9"></a><span id="l41.9">  *  implemented as an XPCOM object</span>
<a href="#l41.10"></a><span id="l41.10">  */</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l41.14"></a><span id="l41.14">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineminus">-).EnigmailCore;</span>
<a href="#l41.16"></a><span id="l41.16" class="difflineminus">-const EnigmailVerify = ChromeUtils.import(</span>
<a href="#l41.17"></a><span id="l41.17" class="difflineplus">+);</span>
<a href="#l41.18"></a><span id="l41.18" class="difflineplus">+const { EnigmailVerify } = ChromeUtils.import(</span>
<a href="#l41.19"></a><span id="l41.19">   &quot;chrome://openpgp/content/modules/mimeVerify.jsm&quot;</span>
<a href="#l41.20"></a><span id="l41.20" class="difflineminus">-).EnigmailVerify;</span>
<a href="#l41.21"></a><span id="l41.21" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineplus">+);</span>
<a href="#l41.23"></a><span id="l41.23" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l41.24"></a><span id="l41.24">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l41.25"></a><span id="l41.25" class="difflineminus">-).EnigmailLog;</span>
<a href="#l41.26"></a><span id="l41.26" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l41.27"></a><span id="l41.27" class="difflineplus">+);</span>
<a href="#l41.28"></a><span id="l41.28" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l41.29"></a><span id="l41.29">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l41.30"></a><span id="l41.30" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l41.32"></a><span id="l41.32" class="difflineplus">+);</span>
<a href="#l41.33"></a><span id="l41.33" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l41.34"></a><span id="l41.34">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l41.35"></a><span id="l41.35" class="difflineminus">-).EnigmailData;</span>
<a href="#l41.36"></a><span id="l41.36" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l41.37"></a><span id="l41.37" class="difflineplus">+);</span>
<a href="#l41.38"></a><span id="l41.38" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l41.39"></a><span id="l41.39">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l41.40"></a><span id="l41.40" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l41.41"></a><span id="l41.41" class="difflineminus">-const EnigmailDecryption = ChromeUtils.import(</span>
<a href="#l41.42"></a><span id="l41.42" class="difflineplus">+);</span>
<a href="#l41.43"></a><span id="l41.43" class="difflineplus">+const { EnigmailDecryption } = ChromeUtils.import(</span>
<a href="#l41.44"></a><span id="l41.44">   &quot;chrome://openpgp/content/modules/decryption.jsm&quot;</span>
<a href="#l41.45"></a><span id="l41.45" class="difflineminus">-).EnigmailDecryption;</span>
<a href="#l41.46"></a><span id="l41.46" class="difflineminus">-var EnigmailMime = ChromeUtils.import(</span>
<a href="#l41.47"></a><span id="l41.47" class="difflineplus">+);</span>
<a href="#l41.48"></a><span id="l41.48" class="difflineplus">+var { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l41.49"></a><span id="l41.49">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l41.50"></a><span id="l41.50" class="difflineminus">-).EnigmailMime;</span>
<a href="#l41.51"></a><span id="l41.51" class="difflineminus">-const EnigmailURIs = ChromeUtils.import(</span>
<a href="#l41.52"></a><span id="l41.52" class="difflineplus">+);</span>
<a href="#l41.53"></a><span id="l41.53" class="difflineplus">+const { EnigmailURIs } = ChromeUtils.import(</span>
<a href="#l41.54"></a><span id="l41.54">   &quot;chrome://openpgp/content/modules/uris.jsm&quot;</span>
<a href="#l41.55"></a><span id="l41.55" class="difflineminus">-).EnigmailURIs;</span>
<a href="#l41.56"></a><span id="l41.56" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l41.57"></a><span id="l41.57" class="difflineplus">+);</span>
<a href="#l41.58"></a><span id="l41.58" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l41.59"></a><span id="l41.59">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l41.60"></a><span id="l41.60" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l41.61"></a><span id="l41.61" class="difflineminus">-const EnigmailSingletons = ChromeUtils.import(</span>
<a href="#l41.62"></a><span id="l41.62" class="difflineplus">+);</span>
<a href="#l41.63"></a><span id="l41.63" class="difflineplus">+const { EnigmailSingletons } = ChromeUtils.import(</span>
<a href="#l41.64"></a><span id="l41.64">   &quot;chrome://openpgp/content/modules/singletons.jsm&quot;</span>
<a href="#l41.65"></a><span id="l41.65" class="difflineminus">-).EnigmailSingletons;</span>
<a href="#l41.66"></a><span id="l41.66" class="difflineminus">-const EnigmailHttpProxy = ChromeUtils.import(</span>
<a href="#l41.67"></a><span id="l41.67" class="difflineplus">+);</span>
<a href="#l41.68"></a><span id="l41.68" class="difflineplus">+const { EnigmailHttpProxy } = ChromeUtils.import(</span>
<a href="#l41.69"></a><span id="l41.69">   &quot;chrome://openpgp/content/modules/httpProxy.jsm&quot;</span>
<a href="#l41.70"></a><span id="l41.70" class="difflineminus">-).EnigmailHttpProxy;</span>
<a href="#l41.71"></a><span id="l41.71" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l41.72"></a><span id="l41.72" class="difflineplus">+);</span>
<a href="#l41.73"></a><span id="l41.73" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l41.74"></a><span id="l41.74">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l41.75"></a><span id="l41.75" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l41.76"></a><span id="l41.76" class="difflineminus">-const EnigmailAutocrypt = ChromeUtils.import(</span>
<a href="#l41.77"></a><span id="l41.77" class="difflineplus">+);</span>
<a href="#l41.78"></a><span id="l41.78" class="difflineplus">+const { EnigmailAutocrypt } = ChromeUtils.import(</span>
<a href="#l41.79"></a><span id="l41.79">   &quot;chrome://openpgp/content/modules/autocrypt.jsm&quot;</span>
<a href="#l41.80"></a><span id="l41.80" class="difflineminus">-).EnigmailAutocrypt;</span>
<a href="#l41.81"></a><span id="l41.81" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l41.82"></a><span id="l41.82" class="difflineplus">+);</span>
<a href="#l41.83"></a><span id="l41.83" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l41.84"></a><span id="l41.84">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l41.85"></a><span id="l41.85" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l41.86"></a><span id="l41.86" class="difflineplus">+);</span>
<a href="#l41.87"></a><span id="l41.87"> </span>
<a href="#l41.88"></a><span id="l41.88"> const ENCODING_DEFAULT = 0;</span>
<a href="#l41.89"></a><span id="l41.89"> const ENCODING_BASE64 = 1;</span>
<a href="#l41.90"></a><span id="l41.90"> const ENCODING_QP = 2;</span>
<a href="#l41.91"></a><span id="l41.91"> </span>
<a href="#l41.92"></a><span id="l41.92"> const LAST_MSG = EnigmailSingletons.lastDecryptedMessage;</span>
<a href="#l41.93"></a><span id="l41.93"> </span>
<a href="#l41.94"></a><span id="l41.94"> var gDebugLogLevel = 5;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -6,50 +6,49 @@</span>
<a href="#l42.4"></a><span id="l42.4"> </span>
<a href="#l42.5"></a><span id="l42.5"> /**</span>
<a href="#l42.6"></a><span id="l42.6">  *  Module for creating PGP/MIME signed and/or encrypted messages</span>
<a href="#l42.7"></a><span id="l42.7">  *  implemented as XPCOM component</span>
<a href="#l42.8"></a><span id="l42.8">  */</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailMimeEncrypt&quot;];</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineminus">-  .Services;</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l42.15"></a><span id="l42.15"> </span>
<a href="#l42.16"></a><span id="l42.16" class="difflineminus">-const jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l42.18"></a><span id="l42.18" class="difflineplus">+const { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l42.19"></a><span id="l42.19" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l42.20"></a><span id="l42.20">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineplus">+);</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l42.25"></a><span id="l42.25">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l42.26"></a><span id="l42.26" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l42.27"></a><span id="l42.27" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineplus">+);</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l42.30"></a><span id="l42.30">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineplus">+);</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l42.35"></a><span id="l42.35">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineminus">-).EnigmailLog;</span>
<a href="#l42.37"></a><span id="l42.37" class="difflineminus">-const EnigmailEncryption = ChromeUtils.import(</span>
<a href="#l42.38"></a><span id="l42.38" class="difflineplus">+);</span>
<a href="#l42.39"></a><span id="l42.39" class="difflineplus">+const { EnigmailEncryption } = ChromeUtils.import(</span>
<a href="#l42.40"></a><span id="l42.40">   &quot;chrome://openpgp/content/modules/encryption.jsm&quot;</span>
<a href="#l42.41"></a><span id="l42.41" class="difflineminus">-).EnigmailEncryption;</span>
<a href="#l42.42"></a><span id="l42.42" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l42.43"></a><span id="l42.43" class="difflineplus">+);</span>
<a href="#l42.44"></a><span id="l42.44" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l42.45"></a><span id="l42.45">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l42.46"></a><span id="l42.46" class="difflineminus">-).EnigmailMime;</span>
<a href="#l42.47"></a><span id="l42.47" class="difflineminus">-const EnigmailHash = ChromeUtils.import(</span>
<a href="#l42.48"></a><span id="l42.48" class="difflineplus">+);</span>
<a href="#l42.49"></a><span id="l42.49" class="difflineplus">+const { EnigmailHash } = ChromeUtils.import(</span>
<a href="#l42.50"></a><span id="l42.50">   &quot;chrome://openpgp/content/modules/hash.jsm&quot;</span>
<a href="#l42.51"></a><span id="l42.51" class="difflineminus">-).EnigmailHash;</span>
<a href="#l42.52"></a><span id="l42.52" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l42.53"></a><span id="l42.53" class="difflineplus">+);</span>
<a href="#l42.54"></a><span id="l42.54" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l42.55"></a><span id="l42.55">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l42.56"></a><span id="l42.56" class="difflineminus">-).EnigmailData;</span>
<a href="#l42.57"></a><span id="l42.57" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l42.58"></a><span id="l42.58" class="difflineplus">+);</span>
<a href="#l42.59"></a><span id="l42.59" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l42.60"></a><span id="l42.60">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l42.61"></a><span id="l42.61" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l42.62"></a><span id="l42.62" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l42.63"></a><span id="l42.63" class="difflineplus">+);</span>
<a href="#l42.64"></a><span id="l42.64" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l42.65"></a><span id="l42.65">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l42.66"></a><span id="l42.66" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l42.67"></a><span id="l42.67" class="difflineplus">+);</span>
<a href="#l42.68"></a><span id="l42.68"> </span>
<a href="#l42.69"></a><span id="l42.69"> // our own contract IDs</span>
<a href="#l42.70"></a><span id="l42.70"> const PGPMIME_ENCRYPT_CID = Components.ID(</span>
<a href="#l42.71"></a><span id="l42.71">   &quot;{96fe88f9-d2cd-466f-93e0-3a351df4c6d2}&quot;</span>
<a href="#l42.72"></a><span id="l42.72"> );</span>
<a href="#l42.73"></a><span id="l42.73"> const PGPMIME_ENCRYPT_CONTRACTID = &quot;@enigmail.net/compose/mimeencrypt;1&quot;;</span>
<a href="#l42.74"></a><span id="l42.74"> </span>
<a href="#l42.75"></a><span id="l42.75"> const maxBufferLen = 102400;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/mimeVerify.jsm</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/mimeVerify.jsm</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -1,60 +1,59 @@</span>
<a href="#l43.4"></a><span id="l43.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l43.5"></a><span id="l43.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l43.6"></a><span id="l43.6">  * file, You can obtain one at https://mozilla.org/MPL/2.0/. */</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8"> &quot;use strict&quot;;</span>
<a href="#l43.9"></a><span id="l43.9"> </span>
<a href="#l43.10"></a><span id="l43.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailVerify&quot;];</span>
<a href="#l43.11"></a><span id="l43.11"> </span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineminus">-  .Services;</span>
<a href="#l43.14"></a><span id="l43.14" class="difflineminus">-</span>
<a href="#l43.15"></a><span id="l43.15"> /**</span>
<a href="#l43.16"></a><span id="l43.16">  *  Module for handling PGP/MIME signed messages</span>
<a href="#l43.17"></a><span id="l43.17">  *  implemented as JS module</span>
<a href="#l43.18"></a><span id="l43.18">  */</span>
<a href="#l43.19"></a><span id="l43.19"> </span>
<a href="#l43.20"></a><span id="l43.20" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l43.21"></a><span id="l43.21" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l43.22"></a><span id="l43.22" class="difflineplus">+</span>
<a href="#l43.23"></a><span id="l43.23" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l43.24"></a><span id="l43.24">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l43.25"></a><span id="l43.25" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l43.26"></a><span id="l43.26" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l43.27"></a><span id="l43.27" class="difflineplus">+);</span>
<a href="#l43.28"></a><span id="l43.28" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l43.29"></a><span id="l43.29">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l43.30"></a><span id="l43.30" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l43.31"></a><span id="l43.31" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l43.32"></a><span id="l43.32" class="difflineplus">+);</span>
<a href="#l43.33"></a><span id="l43.33" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l43.34"></a><span id="l43.34">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l43.35"></a><span id="l43.35" class="difflineminus">-).EnigmailLog;</span>
<a href="#l43.36"></a><span id="l43.36" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l43.37"></a><span id="l43.37" class="difflineplus">+);</span>
<a href="#l43.38"></a><span id="l43.38" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l43.39"></a><span id="l43.39">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l43.40"></a><span id="l43.40" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l43.41"></a><span id="l43.41" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l43.42"></a><span id="l43.42" class="difflineplus">+);</span>
<a href="#l43.43"></a><span id="l43.43" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l43.44"></a><span id="l43.44">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l43.45"></a><span id="l43.45" class="difflineminus">-).EnigmailMime;</span>
<a href="#l43.46"></a><span id="l43.46" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l43.47"></a><span id="l43.47" class="difflineplus">+);</span>
<a href="#l43.48"></a><span id="l43.48" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l43.49"></a><span id="l43.49">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l43.50"></a><span id="l43.50" class="difflineminus">-).EnigmailData;</span>
<a href="#l43.51"></a><span id="l43.51" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l43.52"></a><span id="l43.52" class="difflineplus">+);</span>
<a href="#l43.53"></a><span id="l43.53" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l43.54"></a><span id="l43.54">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l43.55"></a><span id="l43.55" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l43.56"></a><span id="l43.56" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l43.57"></a><span id="l43.57" class="difflineplus">+);</span>
<a href="#l43.58"></a><span id="l43.58" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l43.59"></a><span id="l43.59">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l43.60"></a><span id="l43.60" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l43.61"></a><span id="l43.61" class="difflineminus">-const EnigmailDecryption = ChromeUtils.import(</span>
<a href="#l43.62"></a><span id="l43.62" class="difflineplus">+);</span>
<a href="#l43.63"></a><span id="l43.63" class="difflineplus">+const { EnigmailDecryption } = ChromeUtils.import(</span>
<a href="#l43.64"></a><span id="l43.64">   &quot;chrome://openpgp/content/modules/decryption.jsm&quot;</span>
<a href="#l43.65"></a><span id="l43.65" class="difflineminus">-).EnigmailDecryption;</span>
<a href="#l43.66"></a><span id="l43.66" class="difflineminus">-const EnigmailSingletons = ChromeUtils.import(</span>
<a href="#l43.67"></a><span id="l43.67" class="difflineplus">+);</span>
<a href="#l43.68"></a><span id="l43.68" class="difflineplus">+const { EnigmailSingletons } = ChromeUtils.import(</span>
<a href="#l43.69"></a><span id="l43.69">   &quot;chrome://openpgp/content/modules/singletons.jsm&quot;</span>
<a href="#l43.70"></a><span id="l43.70" class="difflineminus">-).EnigmailSingletons;</span>
<a href="#l43.71"></a><span id="l43.71" class="difflineminus">-const EnigmailHttpProxy = ChromeUtils.import(</span>
<a href="#l43.72"></a><span id="l43.72" class="difflineplus">+);</span>
<a href="#l43.73"></a><span id="l43.73" class="difflineplus">+const { EnigmailHttpProxy } = ChromeUtils.import(</span>
<a href="#l43.74"></a><span id="l43.74">   &quot;chrome://openpgp/content/modules/httpProxy.jsm&quot;</span>
<a href="#l43.75"></a><span id="l43.75" class="difflineminus">-).EnigmailHttpProxy;</span>
<a href="#l43.76"></a><span id="l43.76" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l43.77"></a><span id="l43.77" class="difflineplus">+);</span>
<a href="#l43.78"></a><span id="l43.78" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l43.79"></a><span id="l43.79">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l43.80"></a><span id="l43.80" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l43.81"></a><span id="l43.81" class="difflineplus">+);</span>
<a href="#l43.82"></a><span id="l43.82"> </span>
<a href="#l43.83"></a><span id="l43.83"> const PGPMIME_PROTO = &quot;application/pgp-signature&quot;;</span>
<a href="#l43.84"></a><span id="l43.84"> </span>
<a href="#l43.85"></a><span id="l43.85"> var gDebugLog = false;</span>
<a href="#l43.86"></a><span id="l43.86"> </span>
<a href="#l43.87"></a><span id="l43.87"> // MimeVerify Constructor</span>
<a href="#l43.88"></a><span id="l43.88"> function MimeVerify(protocol) {</span>
<a href="#l43.89"></a><span id="l43.89">   if (!protocol) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/msgRead.jsm</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/msgRead.jsm</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -7,28 +7,28 @@</span>
<a href="#l44.4"></a><span id="l44.4"> &quot;use strict&quot;;</span>
<a href="#l44.5"></a><span id="l44.5"> </span>
<a href="#l44.6"></a><span id="l44.6"> var EXPORTED_SYMBOLS = [&quot;EnigmailMsgRead&quot;];</span>
<a href="#l44.7"></a><span id="l44.7"> </span>
<a href="#l44.8"></a><span id="l44.8"> /**</span>
<a href="#l44.9"></a><span id="l44.9">  * Message-reading related functions</span>
<a href="#l44.10"></a><span id="l44.10">  */</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-const EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l44.14"></a><span id="l44.14">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l44.15"></a><span id="l44.15" class="difflineminus">-).EnigmailPrefs;</span>
<a href="#l44.16"></a><span id="l44.16" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l44.17"></a><span id="l44.17" class="difflineplus">+);</span>
<a href="#l44.18"></a><span id="l44.18" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l44.19"></a><span id="l44.19">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l44.20"></a><span id="l44.20" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l44.21"></a><span id="l44.21" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l44.22"></a><span id="l44.22" class="difflineplus">+);</span>
<a href="#l44.23"></a><span id="l44.23" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l44.24"></a><span id="l44.24">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l44.25"></a><span id="l44.25" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l44.26"></a><span id="l44.26" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l44.27"></a><span id="l44.27" class="difflineplus">+);</span>
<a href="#l44.28"></a><span id="l44.28" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l44.29"></a><span id="l44.29">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l44.30"></a><span id="l44.30" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l44.31"></a><span id="l44.31" class="difflineplus">+);</span>
<a href="#l44.32"></a><span id="l44.32"> </span>
<a href="#l44.33"></a><span id="l44.33"> const ExtraHeaders = [&quot;autocrypt&quot;, &quot;openpgp&quot;];</span>
<a href="#l44.34"></a><span id="l44.34"> </span>
<a href="#l44.35"></a><span id="l44.35"> var EnigmailMsgRead = {</span>
<a href="#l44.36"></a><span id="l44.36">   /**</span>
<a href="#l44.37"></a><span id="l44.37">    * Ensure that Thunderbird prepares certain headers during message reading</span>
<a href="#l44.38"></a><span id="l44.38">    */</span>
<a href="#l44.39"></a><span id="l44.39">   ensureExtraAddonHeaders() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/os.jsm</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/os.jsm</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -3,18 +3,17 @@</span>
<a href="#l45.4"></a><span id="l45.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l45.5"></a><span id="l45.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l45.6"></a><span id="l45.6">  */</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8"> &quot;use strict&quot;;</span>
<a href="#l45.9"></a><span id="l45.9"> </span>
<a href="#l45.10"></a><span id="l45.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailOS&quot;];</span>
<a href="#l45.11"></a><span id="l45.11"> </span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineminus">-  .Services;</span>
<a href="#l45.14"></a><span id="l45.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l45.15"></a><span id="l45.15"> </span>
<a href="#l45.16"></a><span id="l45.16"> let operatingSystem = null;</span>
<a href="#l45.17"></a><span id="l45.17"> </span>
<a href="#l45.18"></a><span id="l45.18"> function getOS() {</span>
<a href="#l45.19"></a><span id="l45.19">   if (operatingSystem === null) {</span>
<a href="#l45.20"></a><span id="l45.20">     operatingSystem = Services.appinfo.OS;</span>
<a href="#l45.21"></a><span id="l45.21">   }</span>
<a href="#l45.22"></a><span id="l45.22">   return operatingSystem;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/persistentCrypto.jsm</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/persistentCrypto.jsm</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -1,61 +1,60 @@</span>
<a href="#l46.4"></a><span id="l46.4"> /*</span>
<a href="#l46.5"></a><span id="l46.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l46.6"></a><span id="l46.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l46.7"></a><span id="l46.7">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l46.8"></a><span id="l46.8">  */</span>
<a href="#l46.9"></a><span id="l46.9"> </span>
<a href="#l46.10"></a><span id="l46.10"> &quot;use strict&quot;;</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineminus">-  .Services;</span>
<a href="#l46.14"></a><span id="l46.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l46.15"></a><span id="l46.15"> </span>
<a href="#l46.16"></a><span id="l46.16"> var EXPORTED_SYMBOLS = [&quot;EnigmailPersistentCrypto&quot;];</span>
<a href="#l46.17"></a><span id="l46.17"> </span>
<a href="#l46.18"></a><span id="l46.18" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l46.19"></a><span id="l46.19" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l46.20"></a><span id="l46.20">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l46.21"></a><span id="l46.21" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l46.23"></a><span id="l46.23" class="difflineplus">+);</span>
<a href="#l46.24"></a><span id="l46.24" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l46.25"></a><span id="l46.25">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l46.26"></a><span id="l46.26" class="difflineminus">-).EnigmailLog;</span>
<a href="#l46.27"></a><span id="l46.27" class="difflineminus">-const EnigmailArmor = ChromeUtils.import(</span>
<a href="#l46.28"></a><span id="l46.28" class="difflineplus">+);</span>
<a href="#l46.29"></a><span id="l46.29" class="difflineplus">+const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l46.30"></a><span id="l46.30">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-).EnigmailArmor;</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l46.33"></a><span id="l46.33" class="difflineplus">+);</span>
<a href="#l46.34"></a><span id="l46.34" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l46.35"></a><span id="l46.35">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l46.36"></a><span id="l46.36" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l46.37"></a><span id="l46.37" class="difflineminus">-const GlodaUtils = ChromeUtils.import(</span>
<a href="#l46.38"></a><span id="l46.38" class="difflineplus">+);</span>
<a href="#l46.39"></a><span id="l46.39" class="difflineplus">+const { GlodaUtils } = ChromeUtils.import(</span>
<a href="#l46.40"></a><span id="l46.40">   &quot;chrome://openpgp/content/modules/glodaUtils.jsm&quot;</span>
<a href="#l46.41"></a><span id="l46.41" class="difflineminus">-).GlodaUtils;</span>
<a href="#l46.42"></a><span id="l46.42" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l46.43"></a><span id="l46.43" class="difflineplus">+);</span>
<a href="#l46.44"></a><span id="l46.44" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l46.45"></a><span id="l46.45">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l46.46"></a><span id="l46.46" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l46.47"></a><span id="l46.47" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l46.48"></a><span id="l46.48" class="difflineplus">+);</span>
<a href="#l46.49"></a><span id="l46.49" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l46.50"></a><span id="l46.50">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l46.51"></a><span id="l46.51" class="difflineminus">-).EnigmailCore;</span>
<a href="#l46.52"></a><span id="l46.52" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l46.53"></a><span id="l46.53" class="difflineplus">+);</span>
<a href="#l46.54"></a><span id="l46.54" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l46.55"></a><span id="l46.55">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l46.56"></a><span id="l46.56" class="difflineminus">-).EnigmailMime;</span>
<a href="#l46.57"></a><span id="l46.57" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l46.58"></a><span id="l46.58" class="difflineplus">+);</span>
<a href="#l46.59"></a><span id="l46.59" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l46.60"></a><span id="l46.60">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l46.61"></a><span id="l46.61" class="difflineminus">-).EnigmailData;</span>
<a href="#l46.62"></a><span id="l46.62" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l46.63"></a><span id="l46.63" class="difflineplus">+);</span>
<a href="#l46.64"></a><span id="l46.64" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l46.65"></a><span id="l46.65">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l46.66"></a><span id="l46.66" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l46.67"></a><span id="l46.67" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l46.68"></a><span id="l46.68" class="difflineplus">+);</span>
<a href="#l46.69"></a><span id="l46.69" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l46.70"></a><span id="l46.70">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l46.71"></a><span id="l46.71" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l46.72"></a><span id="l46.72" class="difflineminus">-const jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l46.73"></a><span id="l46.73" class="difflineminus">-const EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l46.74"></a><span id="l46.74" class="difflineplus">+);</span>
<a href="#l46.75"></a><span id="l46.75" class="difflineplus">+const { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l46.76"></a><span id="l46.76" class="difflineplus">+const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l46.77"></a><span id="l46.77">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l46.78"></a><span id="l46.78" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l46.79"></a><span id="l46.79" class="difflineminus">-const EnigmailEncryption = ChromeUtils.import(</span>
<a href="#l46.80"></a><span id="l46.80" class="difflineplus">+);</span>
<a href="#l46.81"></a><span id="l46.81" class="difflineplus">+const { EnigmailEncryption } = ChromeUtils.import(</span>
<a href="#l46.82"></a><span id="l46.82">   &quot;chrome://openpgp/content/modules/encryption.jsm&quot;</span>
<a href="#l46.83"></a><span id="l46.83" class="difflineminus">-).EnigmailEncryption;</span>
<a href="#l46.84"></a><span id="l46.84" class="difflineplus">+);</span>
<a href="#l46.85"></a><span id="l46.85"> </span>
<a href="#l46.86"></a><span id="l46.86"> const getFixExchangeMsg = EnigmailLazy.loader(</span>
<a href="#l46.87"></a><span id="l46.87">   &quot;enigmail/fixExchangeMsg.jsm&quot;,</span>
<a href="#l46.88"></a><span id="l46.88">   &quot;EnigmailFixExchangeMsg&quot;</span>
<a href="#l46.89"></a><span id="l46.89"> );</span>
<a href="#l46.90"></a><span id="l46.90"> const getDecryption = EnigmailLazy.loader(</span>
<a href="#l46.91"></a><span id="l46.91">   &quot;enigmail/decryption.jsm&quot;,</span>
<a href="#l46.92"></a><span id="l46.92">   &quot;EnigmailDecryption&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -7,45 +7,44 @@</span>
<a href="#l47.4"></a><span id="l47.4"> /**</span>
<a href="#l47.5"></a><span id="l47.5">  *  Module for handling PGP/MIME encrypted and/or signed messages</span>
<a href="#l47.6"></a><span id="l47.6">  *  implemented as an XPCOM object</span>
<a href="#l47.7"></a><span id="l47.7">  */</span>
<a href="#l47.8"></a><span id="l47.8"> </span>
<a href="#l47.9"></a><span id="l47.9"> const { manager: Cm } = Components;</span>
<a href="#l47.10"></a><span id="l47.10"> Cm.QueryInterface(Ci.nsIComponentRegistrar);</span>
<a href="#l47.11"></a><span id="l47.11"> </span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineminus">-  .Services;</span>
<a href="#l47.14"></a><span id="l47.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l47.15"></a><span id="l47.15"> </span>
<a href="#l47.16"></a><span id="l47.16"> var EXPORTED_SYMBOLS = [&quot;EnigmailPgpmimeHander&quot;];</span>
<a href="#l47.17"></a><span id="l47.17"> </span>
<a href="#l47.18"></a><span id="l47.18" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l47.19"></a><span id="l47.19" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l47.20"></a><span id="l47.20">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l47.21"></a><span id="l47.21" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l47.23"></a><span id="l47.23" class="difflineplus">+);</span>
<a href="#l47.24"></a><span id="l47.24" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l47.25"></a><span id="l47.25">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l47.26"></a><span id="l47.26" class="difflineminus">-).EnigmailCore;</span>
<a href="#l47.27"></a><span id="l47.27" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l47.28"></a><span id="l47.28" class="difflineplus">+);</span>
<a href="#l47.29"></a><span id="l47.29" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l47.30"></a><span id="l47.30">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l47.31"></a><span id="l47.31" class="difflineminus">-).EnigmailLog;</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineminus">-const EnigmailMimeDecrypt = ChromeUtils.import(</span>
<a href="#l47.33"></a><span id="l47.33" class="difflineplus">+);</span>
<a href="#l47.34"></a><span id="l47.34" class="difflineplus">+const { EnigmailMimeDecrypt } = ChromeUtils.import(</span>
<a href="#l47.35"></a><span id="l47.35">   &quot;chrome://openpgp/content/modules/mimeDecrypt.jsm&quot;</span>
<a href="#l47.36"></a><span id="l47.36" class="difflineminus">-).EnigmailMimeDecrypt;</span>
<a href="#l47.37"></a><span id="l47.37" class="difflineminus">-const EnigmailVerify = ChromeUtils.import(</span>
<a href="#l47.38"></a><span id="l47.38" class="difflineplus">+);</span>
<a href="#l47.39"></a><span id="l47.39" class="difflineplus">+const { EnigmailVerify } = ChromeUtils.import(</span>
<a href="#l47.40"></a><span id="l47.40">   &quot;chrome://openpgp/content/modules/mimeVerify.jsm&quot;</span>
<a href="#l47.41"></a><span id="l47.41" class="difflineminus">-).EnigmailVerify;</span>
<a href="#l47.42"></a><span id="l47.42" class="difflineminus">-const EnigmailWksMimeHandler = ChromeUtils.import(</span>
<a href="#l47.43"></a><span id="l47.43" class="difflineplus">+);</span>
<a href="#l47.44"></a><span id="l47.44" class="difflineplus">+const { EnigmailWksMimeHandler } = ChromeUtils.import(</span>
<a href="#l47.45"></a><span id="l47.45">   &quot;chrome://openpgp/content/modules/wksMimeHandler.jsm&quot;</span>
<a href="#l47.46"></a><span id="l47.46" class="difflineminus">-).EnigmailWksMimeHandler;</span>
<a href="#l47.47"></a><span id="l47.47" class="difflineminus">-const EnigmailMime = ChromeUtils.import(</span>
<a href="#l47.48"></a><span id="l47.48" class="difflineplus">+);</span>
<a href="#l47.49"></a><span id="l47.49" class="difflineplus">+const { EnigmailMime } = ChromeUtils.import(</span>
<a href="#l47.50"></a><span id="l47.50">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l47.51"></a><span id="l47.51" class="difflineminus">-).EnigmailMime;</span>
<a href="#l47.52"></a><span id="l47.52" class="difflineminus">-const EnigmailSingletons = ChromeUtils.import(</span>
<a href="#l47.53"></a><span id="l47.53" class="difflineplus">+);</span>
<a href="#l47.54"></a><span id="l47.54" class="difflineplus">+const { EnigmailSingletons } = ChromeUtils.import(</span>
<a href="#l47.55"></a><span id="l47.55">   &quot;chrome://openpgp/content/modules/singletons.jsm&quot;</span>
<a href="#l47.56"></a><span id="l47.56" class="difflineminus">-).EnigmailSingletons;</span>
<a href="#l47.57"></a><span id="l47.57" class="difflineplus">+);</span>
<a href="#l47.58"></a><span id="l47.58"> </span>
<a href="#l47.59"></a><span id="l47.59"> const PGPMIME_JS_DECRYPTOR_CONTRACTID =</span>
<a href="#l47.60"></a><span id="l47.60">   &quot;@mozilla.org/mime/pgp-mime-js-decrypt;1&quot;;</span>
<a href="#l47.61"></a><span id="l47.61"> const PGPMIME_JS_DECRYPTOR_CID = Components.ID(</span>
<a href="#l47.62"></a><span id="l47.62">   &quot;{7514cbeb-2bfd-4b2c-829b-1a4691fa0ac8}&quot;</span>
<a href="#l47.63"></a><span id="l47.63"> );</span>
<a href="#l47.64"></a><span id="l47.64"> </span>
<a href="#l47.65"></a><span id="l47.65"> ////////////////////////////////////////////////////////////////////</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/prefs.jsm</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/prefs.jsm</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -3,19 +3,19 @@</span>
<a href="#l48.4"></a><span id="l48.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l48.5"></a><span id="l48.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l48.6"></a><span id="l48.6">  */</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8"> &quot;use strict&quot;;</span>
<a href="#l48.9"></a><span id="l48.9"> </span>
<a href="#l48.10"></a><span id="l48.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailPrefs&quot;];</span>
<a href="#l48.11"></a><span id="l48.11"> </span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l48.14"></a><span id="l48.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineplus">+);</span>
<a href="#l48.17"></a><span id="l48.17"> const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l48.18"></a><span id="l48.18"> </span>
<a href="#l48.19"></a><span id="l48.19"> const ENIGMAIL_PREFS_ROOT = &quot;temp.openpgp.&quot;;</span>
<a href="#l48.20"></a><span id="l48.20"> </span>
<a href="#l48.21"></a><span id="l48.21"> const p = {</span>
<a href="#l48.22"></a><span id="l48.22">   service: null,</span>
<a href="#l48.23"></a><span id="l48.23">   branch: null,</span>
<a href="#l48.24"></a><span id="l48.24">   root: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/protocolHandler.jsm</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/protocolHandler.jsm</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -3,39 +3,37 @@</span>
<a href="#l49.4"></a><span id="l49.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l49.5"></a><span id="l49.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l49.6"></a><span id="l49.6">  */</span>
<a href="#l49.7"></a><span id="l49.7"> </span>
<a href="#l49.8"></a><span id="l49.8"> &quot;use strict&quot;;</span>
<a href="#l49.9"></a><span id="l49.9"> </span>
<a href="#l49.10"></a><span id="l49.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailProtocolHandler&quot;];</span>
<a href="#l49.11"></a><span id="l49.11"> </span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineminus">-  .Services;</span>
<a href="#l49.14"></a><span id="l49.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l49.15"></a><span id="l49.15"> </span>
<a href="#l49.16"></a><span id="l49.16" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l49.17"></a><span id="l49.17" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l49.18"></a><span id="l49.18">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l49.19"></a><span id="l49.19" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l49.20"></a><span id="l49.20" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l49.21"></a><span id="l49.21" class="difflineplus">+);</span>
<a href="#l49.22"></a><span id="l49.22" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l49.23"></a><span id="l49.23">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l49.24"></a><span id="l49.24" class="difflineminus">-).EnigmailCore;</span>
<a href="#l49.25"></a><span id="l49.25" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l49.26"></a><span id="l49.26" class="difflineplus">+);</span>
<a href="#l49.27"></a><span id="l49.27" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l49.28"></a><span id="l49.28">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l49.29"></a><span id="l49.29" class="difflineminus">-).EnigmailData;</span>
<a href="#l49.30"></a><span id="l49.30" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l49.31"></a><span id="l49.31" class="difflineplus">+);</span>
<a href="#l49.32"></a><span id="l49.32" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l49.33"></a><span id="l49.33">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l49.34"></a><span id="l49.34" class="difflineminus">-).EnigmailLog;</span>
<a href="#l49.35"></a><span id="l49.35" class="difflineminus">-const EnigmailStreams = ChromeUtils.import(</span>
<a href="#l49.36"></a><span id="l49.36" class="difflineplus">+);</span>
<a href="#l49.37"></a><span id="l49.37" class="difflineplus">+const { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l49.38"></a><span id="l49.38">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l49.39"></a><span id="l49.39" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l49.40"></a><span id="l49.40" class="difflineminus">-const EnigmailURIs = ChromeUtils.import(</span>
<a href="#l49.41"></a><span id="l49.41" class="difflineplus">+);</span>
<a href="#l49.42"></a><span id="l49.42" class="difflineplus">+const { EnigmailURIs } = ChromeUtils.import(</span>
<a href="#l49.43"></a><span id="l49.43">   &quot;chrome://openpgp/content/modules/uris.jsm&quot;</span>
<a href="#l49.44"></a><span id="l49.44" class="difflineminus">-).EnigmailURIs;</span>
<a href="#l49.45"></a><span id="l49.45" class="difflineminus">-const NetUtil = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;)</span>
<a href="#l49.46"></a><span id="l49.46" class="difflineminus">-  .NetUtil;</span>
<a href="#l49.47"></a><span id="l49.47" class="difflineplus">+);</span>
<a href="#l49.48"></a><span id="l49.48" class="difflineplus">+const { NetUtil } = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;);</span>
<a href="#l49.49"></a><span id="l49.49"> </span>
<a href="#l49.50"></a><span id="l49.50"> const NS_ENIGMAILPROTOCOLHANDLER_CONTRACTID =</span>
<a href="#l49.51"></a><span id="l49.51">   &quot;@mozilla.org/network/protocol;1?name=enigmail&quot;;</span>
<a href="#l49.52"></a><span id="l49.52"> const NS_ENIGMAILPROTOCOLHANDLER_CID = Components.ID(</span>
<a href="#l49.53"></a><span id="l49.53">   &quot;{847b3a11-7ab1-11d4-8f02-006008948af5}&quot;</span>
<a href="#l49.54"></a><span id="l49.54"> );</span>
<a href="#l49.55"></a><span id="l49.55"> </span>
<a href="#l49.56"></a><span id="l49.56"> const nsIProtocolHandler = Ci.nsIProtocolHandler;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/rnpLib.jsm</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/rnpLib.jsm</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -2,22 +2,22 @@</span>
<a href="#l50.4"></a><span id="l50.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l50.5"></a><span id="l50.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l50.6"></a><span id="l50.6"> </span>
<a href="#l50.7"></a><span id="l50.7"> const { ctypes } = ChromeUtils.import(&quot;resource://gre/modules/ctypes.jsm&quot;);</span>
<a href="#l50.8"></a><span id="l50.8"> const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l50.9"></a><span id="l50.9"> var systemOS = Services.appinfo.OS.toLowerCase();</span>
<a href="#l50.10"></a><span id="l50.10"> const { OS } = ChromeUtils.import(&quot;resource://gre/modules/osfile.jsm&quot;);</span>
<a href="#l50.11"></a><span id="l50.11"> var abi = ctypes.default_abi;</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-const EnigmailApp = ChromeUtils.import(</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+const { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l50.14"></a><span id="l50.14">   &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l50.15"></a><span id="l50.15" class="difflineminus">-).EnigmailApp;</span>
<a href="#l50.16"></a><span id="l50.16" class="difflineminus">-var OpenPGPMasterpass = ChromeUtils.import(</span>
<a href="#l50.17"></a><span id="l50.17" class="difflineplus">+);</span>
<a href="#l50.18"></a><span id="l50.18" class="difflineplus">+var { OpenPGPMasterpass } = ChromeUtils.import(</span>
<a href="#l50.19"></a><span id="l50.19">   &quot;chrome://openpgp/content/modules/masterpass.jsm&quot;</span>
<a href="#l50.20"></a><span id="l50.20" class="difflineminus">-).OpenPGPMasterpass;</span>
<a href="#l50.21"></a><span id="l50.21" class="difflineplus">+);</span>
<a href="#l50.22"></a><span id="l50.22"> </span>
<a href="#l50.23"></a><span id="l50.23"> // Open librnp. Determine the path to the chrome directory and look for it</span>
<a href="#l50.24"></a><span id="l50.24"> // there first. If not, fallback to searching the standard locations.</span>
<a href="#l50.25"></a><span id="l50.25"> var librnp, librnpPath;</span>
<a href="#l50.26"></a><span id="l50.26"> </span>
<a href="#l50.27"></a><span id="l50.27"> function tryLoadRNP(name, suffix) {</span>
<a href="#l50.28"></a><span id="l50.28">   let filename = ctypes.libraryName(name) + suffix;</span>
<a href="#l50.29"></a><span id="l50.29">   let binPath = Services.dirsvc.get(&quot;XpcomLib&quot;, Ci.nsIFile).path;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/rules.jsm</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/rules.jsm</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -4,42 +4,43 @@</span>
<a href="#l51.4"></a><span id="l51.4">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l51.5"></a><span id="l51.5">  */</span>
<a href="#l51.6"></a><span id="l51.6"> </span>
<a href="#l51.7"></a><span id="l51.7"> &quot;use strict&quot;;</span>
<a href="#l51.8"></a><span id="l51.8"> </span>
<a href="#l51.9"></a><span id="l51.9"> var EXPORTED_SYMBOLS = [&quot;EnigmailRules&quot;];</span>
<a href="#l51.10"></a><span id="l51.10"> </span>
<a href="#l51.11"></a><span id="l51.11"> /*EnigmailFuncs: false, : false, : false, : false, : false */</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l51.14"></a><span id="l51.14">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l51.15"></a><span id="l51.15" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l51.16"></a><span id="l51.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l51.17"></a><span id="l51.17" class="difflineplus">+);</span>
<a href="#l51.18"></a><span id="l51.18" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l51.19"></a><span id="l51.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l51.20"></a><span id="l51.20" class="difflineminus">-).EnigmailLog;</span>
<a href="#l51.21"></a><span id="l51.21" class="difflineminus">-const EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l51.22"></a><span id="l51.22" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l51.23"></a><span id="l51.23" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l51.24"></a><span id="l51.24" class="difflineplus">+);</span>
<a href="#l51.25"></a><span id="l51.25" class="difflineplus">+const { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l51.26"></a><span id="l51.26" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l51.27"></a><span id="l51.27" class="difflineplus">+);</span>
<a href="#l51.28"></a><span id="l51.28" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l51.29"></a><span id="l51.29">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l51.30"></a><span id="l51.30" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l51.31"></a><span id="l51.31" class="difflineminus">-const EnigmailApp = ChromeUtils.import(</span>
<a href="#l51.32"></a><span id="l51.32" class="difflineplus">+);</span>
<a href="#l51.33"></a><span id="l51.33" class="difflineplus">+const { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l51.34"></a><span id="l51.34">   &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l51.35"></a><span id="l51.35" class="difflineminus">-).EnigmailApp;</span>
<a href="#l51.36"></a><span id="l51.36" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l51.37"></a><span id="l51.37" class="difflineplus">+);</span>
<a href="#l51.38"></a><span id="l51.38" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l51.39"></a><span id="l51.39">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l51.40"></a><span id="l51.40" class="difflineminus">-).EnigmailCore;</span>
<a href="#l51.41"></a><span id="l51.41" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l51.42"></a><span id="l51.42" class="difflineplus">+);</span>
<a href="#l51.43"></a><span id="l51.43" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l51.44"></a><span id="l51.44">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l51.45"></a><span id="l51.45" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l51.46"></a><span id="l51.46" class="difflineminus">-const EnigmailDialog = ChromeUtils.import(</span>
<a href="#l51.47"></a><span id="l51.47" class="difflineplus">+);</span>
<a href="#l51.48"></a><span id="l51.48" class="difflineplus">+const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l51.49"></a><span id="l51.49">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l51.50"></a><span id="l51.50" class="difflineminus">-).EnigmailDialog;</span>
<a href="#l51.51"></a><span id="l51.51" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l51.52"></a><span id="l51.52" class="difflineplus">+);</span>
<a href="#l51.53"></a><span id="l51.53" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l51.54"></a><span id="l51.54">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l51.55"></a><span id="l51.55" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l51.56"></a><span id="l51.56" class="difflineplus">+);</span>
<a href="#l51.57"></a><span id="l51.57"> </span>
<a href="#l51.58"></a><span id="l51.58"> const getKeyRing = EnigmailLazy.loader(</span>
<a href="#l51.59"></a><span id="l51.59">   &quot;enigmail/keyRing.jsm&quot;,</span>
<a href="#l51.60"></a><span id="l51.60">   &quot;EnigmailKeyRing&quot;</span>
<a href="#l51.61"></a><span id="l51.61"> );</span>
<a href="#l51.62"></a><span id="l51.62"> </span>
<a href="#l51.63"></a><span id="l51.63"> const DEFAULT_FILE_PERMS = 0o600;</span>
<a href="#l51.64"></a><span id="l51.64"> </span>
<a href="#l51.65"></a><span id="l51.65" class="difflineat">@@ -735,18 +736,18 @@ var EnigmailRules = {</span>
<a href="#l51.66"></a><span id="l51.66">     }</span>
<a href="#l51.67"></a><span id="l51.67"> </span>
<a href="#l51.68"></a><span id="l51.68">     // here, both values are 'maybe', which we return then</span>
<a href="#l51.69"></a><span id="l51.69">     return EnigmailConstants.ENIG_UNDEF; // maybe</span>
<a href="#l51.70"></a><span id="l51.70">   },</span>
<a href="#l51.71"></a><span id="l51.71"> };</span>
<a href="#l51.72"></a><span id="l51.72"> </span>
<a href="#l51.73"></a><span id="l51.73"> async function deleteAutocryptRule(emailAddr) {</span>
<a href="#l51.74"></a><span id="l51.74" class="difflineminus">-  const EnigmailAutocrypt = ChromeUtils.import(</span>
<a href="#l51.75"></a><span id="l51.75" class="difflineplus">+  const { EnigmailAutocrypt } = ChromeUtils.import(</span>
<a href="#l51.76"></a><span id="l51.76">     &quot;chrome://openpgp/content/modules/autocrypt.jsm&quot;</span>
<a href="#l51.77"></a><span id="l51.77" class="difflineminus">-  ).EnigmailAutocrypt;</span>
<a href="#l51.78"></a><span id="l51.78" class="difflineplus">+  );</span>
<a href="#l51.79"></a><span id="l51.79"> </span>
<a href="#l51.80"></a><span id="l51.80">   await EnigmailAutocrypt.deleteUser(emailAddr, &quot;1&quot;);</span>
<a href="#l51.81"></a><span id="l51.81">   // make sure that gossip rule is marked as &quot;imported&quot;</span>
<a href="#l51.82"></a><span id="l51.82">   await EnigmailAutocrypt.setKeyImported(null, emailAddr);</span>
<a href="#l51.83"></a><span id="l51.83">   // try to apply gossip key</span>
<a href="#l51.84"></a><span id="l51.84">   await EnigmailAutocrypt.importAutocryptKeys(emailAddr, true);</span>
<a href="#l51.85"></a><span id="l51.85"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/searchCallback.jsm</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/searchCallback.jsm</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -3,19 +3,19 @@</span>
<a href="#l52.4"></a><span id="l52.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l52.5"></a><span id="l52.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l52.6"></a><span id="l52.6">  */</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> &quot;use strict&quot;;</span>
<a href="#l52.9"></a><span id="l52.9"> </span>
<a href="#l52.10"></a><span id="l52.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailSearchCallback&quot;];</span>
<a href="#l52.11"></a><span id="l52.11"> </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l52.14"></a><span id="l52.14">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l52.15"></a><span id="l52.15" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l52.16"></a><span id="l52.16" class="difflineplus">+);</span>
<a href="#l52.17"></a><span id="l52.17"> </span>
<a href="#l52.18"></a><span id="l52.18"> var EnigmailSearchCallback = {</span>
<a href="#l52.19"></a><span id="l52.19">   /**</span>
<a href="#l52.20"></a><span id="l52.20">    * Set up a callback function on a textbox that tiggers an action.</span>
<a href="#l52.21"></a><span id="l52.21">    * If ESC is pressed, the input field is emtpied; return triggers the action immediately.</span>
<a href="#l52.22"></a><span id="l52.22">    *</span>
<a href="#l52.23"></a><span id="l52.23">    * @param targetObj {XULElement}: the XUL element to observe</span>
<a href="#l52.24"></a><span id="l52.24">    * @param timoeoutObj {object}: timeoutObj.value will hold the timeout ID</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/send.jsm</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/send.jsm</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -3,33 +3,32 @@</span>
<a href="#l53.4"></a><span id="l53.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l53.5"></a><span id="l53.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l53.6"></a><span id="l53.6">  */</span>
<a href="#l53.7"></a><span id="l53.7"> </span>
<a href="#l53.8"></a><span id="l53.8"> &quot;use strict&quot;;</span>
<a href="#l53.9"></a><span id="l53.9"> </span>
<a href="#l53.10"></a><span id="l53.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailSend&quot;];</span>
<a href="#l53.11"></a><span id="l53.11"> </span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l53.14"></a><span id="l53.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l53.15"></a><span id="l53.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l53.16"></a><span id="l53.16" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l53.17"></a><span id="l53.17" class="difflineplus">+);</span>
<a href="#l53.18"></a><span id="l53.18" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l53.19"></a><span id="l53.19">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l53.20"></a><span id="l53.20" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l53.21"></a><span id="l53.21" class="difflineminus">-const EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l53.22"></a><span id="l53.22" class="difflineplus">+);</span>
<a href="#l53.23"></a><span id="l53.23" class="difflineplus">+const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l53.24"></a><span id="l53.24">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l53.25"></a><span id="l53.25" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l53.26"></a><span id="l53.26" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l53.27"></a><span id="l53.27" class="difflineplus">+);</span>
<a href="#l53.28"></a><span id="l53.28" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l53.29"></a><span id="l53.29">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l53.30"></a><span id="l53.30" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l53.31"></a><span id="l53.31" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l53.32"></a><span id="l53.32" class="difflineminus">-  .Services;</span>
<a href="#l53.33"></a><span id="l53.33" class="difflineminus">-const EnigmailRNG = ChromeUtils.import(</span>
<a href="#l53.34"></a><span id="l53.34" class="difflineplus">+);</span>
<a href="#l53.35"></a><span id="l53.35" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l53.36"></a><span id="l53.36" class="difflineplus">+const { EnigmailRNG } = ChromeUtils.import(</span>
<a href="#l53.37"></a><span id="l53.37">   &quot;chrome://openpgp/content/modules/rng.jsm&quot;</span>
<a href="#l53.38"></a><span id="l53.38" class="difflineminus">-).EnigmailRNG;</span>
<a href="#l53.39"></a><span id="l53.39" class="difflineplus">+);</span>
<a href="#l53.40"></a><span id="l53.40"> </span>
<a href="#l53.41"></a><span id="l53.41"> var EnigmailSend = {</span>
<a href="#l53.42"></a><span id="l53.42">   /**</span>
<a href="#l53.43"></a><span id="l53.43">    * Send out an email</span>
<a href="#l53.44"></a><span id="l53.44">    *</span>
<a href="#l53.45"></a><span id="l53.45">    * @param msgData    - String: complete MIME string of email (including all headers etc.)</span>
<a href="#l53.46"></a><span id="l53.46">    * @param compFields - Object: compose fields (nsIMsgCompFields)</span>
<a href="#l53.47"></a><span id="l53.47">    * @param listener   - Object: progress listener (nsIMsgSendListener)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/socks5Proxy.jsm</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/socks5Proxy.jsm</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -3,30 +3,29 @@</span>
<a href="#l54.4"></a><span id="l54.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l54.5"></a><span id="l54.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l54.6"></a><span id="l54.6">  */</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8"> &quot;use strict&quot;;</span>
<a href="#l54.9"></a><span id="l54.9"> </span>
<a href="#l54.10"></a><span id="l54.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailSocks5Proxy&quot;];</span>
<a href="#l54.11"></a><span id="l54.11"> </span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineminus">-  .Services;</span>
<a href="#l54.14"></a><span id="l54.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l54.15"></a><span id="l54.15"> </span>
<a href="#l54.16"></a><span id="l54.16"> const CC = Components.Constructor;</span>
<a href="#l54.17"></a><span id="l54.17"> </span>
<a href="#l54.18"></a><span id="l54.18" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l54.19"></a><span id="l54.19" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l54.20"></a><span id="l54.20">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l54.21"></a><span id="l54.21" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l54.22"></a><span id="l54.22" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l54.23"></a><span id="l54.23" class="difflineplus">+);</span>
<a href="#l54.24"></a><span id="l54.24" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l54.25"></a><span id="l54.25">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l54.26"></a><span id="l54.26" class="difflineminus">-).EnigmailLog;</span>
<a href="#l54.27"></a><span id="l54.27" class="difflineminus">-const EnigmailLazy = ChromeUtils.import(</span>
<a href="#l54.28"></a><span id="l54.28" class="difflineplus">+);</span>
<a href="#l54.29"></a><span id="l54.29" class="difflineplus">+const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l54.30"></a><span id="l54.30">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l54.31"></a><span id="l54.31" class="difflineminus">-).EnigmailLazy;</span>
<a href="#l54.32"></a><span id="l54.32" class="difflineplus">+);</span>
<a href="#l54.33"></a><span id="l54.33"> const getEnigmailPrefs = EnigmailLazy.loader(</span>
<a href="#l54.34"></a><span id="l54.34">   &quot;enigmail/prefs.jsm&quot;,</span>
<a href="#l54.35"></a><span id="l54.35">   &quot;EnigmailPrefs&quot;</span>
<a href="#l54.36"></a><span id="l54.36"> );</span>
<a href="#l54.37"></a><span id="l54.37"> </span>
<a href="#l54.38"></a><span id="l54.38"> const CHECK_TOR_URI = &quot;https://check.torproject.org/api/ip&quot;;</span>
<a href="#l54.39"></a><span id="l54.39"> const EXPECTED_TOR_EXISTS_RESPONSE = '&quot;IsTor&quot;:true';</span>
<a href="#l54.40"></a><span id="l54.40"> const TOR_IP_ADDR_PREF = &quot;torIpAddr&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/sqliteDb.jsm</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/sqliteDb.jsm</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -5,23 +5,23 @@</span>
<a href="#l55.4"></a><span id="l55.4"> &quot;use strict&quot;;</span>
<a href="#l55.5"></a><span id="l55.5"> </span>
<a href="#l55.6"></a><span id="l55.6"> /**</span>
<a href="#l55.7"></a><span id="l55.7">  *  Module that provides generic functions for the Enigmail SQLite database</span>
<a href="#l55.8"></a><span id="l55.8">  */</span>
<a href="#l55.9"></a><span id="l55.9"> </span>
<a href="#l55.10"></a><span id="l55.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailSqliteDb&quot;];</span>
<a href="#l55.11"></a><span id="l55.11"> </span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-const Sqlite = ChromeUtils.import(&quot;resource://gre/modules/Sqlite.jsm&quot;).Sqlite;</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l55.14"></a><span id="l55.14" class="difflineplus">+const { Sqlite } = ChromeUtils.import(&quot;resource://gre/modules/Sqlite.jsm&quot;);</span>
<a href="#l55.15"></a><span id="l55.15" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l55.16"></a><span id="l55.16">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l55.17"></a><span id="l55.17" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l55.18"></a><span id="l55.18" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l55.19"></a><span id="l55.19" class="difflineplus">+);</span>
<a href="#l55.20"></a><span id="l55.20" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l55.21"></a><span id="l55.21">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineminus">-).EnigmailLog;</span>
<a href="#l55.23"></a><span id="l55.23" class="difflineplus">+);</span>
<a href="#l55.24"></a><span id="l55.24"> </span>
<a href="#l55.25"></a><span id="l55.25"> var EnigmailSqliteDb = {</span>
<a href="#l55.26"></a><span id="l55.26">   /**</span>
<a href="#l55.27"></a><span id="l55.27">    * Provide an sqlite conection object asynchronously, retrying if needed</span>
<a href="#l55.28"></a><span id="l55.28">    *</span>
<a href="#l55.29"></a><span id="l55.29">    * @return {Promise&lt;Sqlite Connection&gt;}: the Sqlite database object</span>
<a href="#l55.30"></a><span id="l55.30">    */</span>
<a href="#l55.31"></a><span id="l55.31"> </span>
<a href="#l55.32"></a><span id="l55.32" class="difflineat">@@ -112,19 +112,19 @@ async function checkAutocryptTable(conne</span>
<a href="#l55.33"></a><span id="l55.33">         return true;</span>
<a href="#l55.34"></a><span id="l55.34">       }</span>
<a href="#l55.35"></a><span id="l55.35"> </span>
<a href="#l55.36"></a><span id="l55.36">       await connection.execute(</span>
<a href="#l55.37"></a><span id="l55.37">         &quot;alter table autocrypt_keydata add keyring_inserted text default '0';&quot;,</span>
<a href="#l55.38"></a><span id="l55.38">         {},</span>
<a href="#l55.39"></a><span id="l55.39">         function(row) {}</span>
<a href="#l55.40"></a><span id="l55.40">       );</span>
<a href="#l55.41"></a><span id="l55.41" class="difflineminus">-      let EnigmailAutocrypt = ChromeUtils.import(</span>
<a href="#l55.42"></a><span id="l55.42" class="difflineplus">+      let { EnigmailAutocrypt } = ChromeUtils.import(</span>
<a href="#l55.43"></a><span id="l55.43">         &quot;chrome://openpgp/content/modules/autocrypt.jsm&quot;</span>
<a href="#l55.44"></a><span id="l55.44" class="difflineminus">-      ).EnigmailAutocrypt;</span>
<a href="#l55.45"></a><span id="l55.45" class="difflineplus">+      );</span>
<a href="#l55.46"></a><span id="l55.46">       EnigmailAutocrypt.updateAllImportedKeys();</span>
<a href="#l55.47"></a><span id="l55.47">     }</span>
<a href="#l55.48"></a><span id="l55.48">   } catch (error) {</span>
<a href="#l55.49"></a><span id="l55.49">     EnigmailLog.DEBUG(`sqliteDB.jsm: checkAutocryptTable - error ${error}\n`);</span>
<a href="#l55.50"></a><span id="l55.50">     throw error;</span>
<a href="#l55.51"></a><span id="l55.51">   }</span>
<a href="#l55.52"></a><span id="l55.52"> </span>
<a href="#l55.53"></a><span id="l55.53">   return true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/stdlib/compose.jsm</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/stdlib/compose.jsm</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -17,42 +17,36 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l56.4"></a><span id="l56.4">   &quot;simpleWrap&quot;,</span>
<a href="#l56.5"></a><span id="l56.5">   &quot;plainTextToHtml&quot;,</span>
<a href="#l56.6"></a><span id="l56.6">   &quot;replyAllParams&quot;,</span>
<a href="#l56.7"></a><span id="l56.7">   &quot;determineComposeHtml&quot;,</span>
<a href="#l56.8"></a><span id="l56.8">   &quot;composeMessageTo&quot;,</span>
<a href="#l56.9"></a><span id="l56.9">   &quot;getSignatureContentsForAccount&quot;,</span>
<a href="#l56.10"></a><span id="l56.10"> ];</span>
<a href="#l56.11"></a><span id="l56.11"> </span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineminus">-  .Services;</span>
<a href="#l56.14"></a><span id="l56.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l56.15"></a><span id="l56.15"> </span>
<a href="#l56.16"></a><span id="l56.16" class="difflineminus">-var MailServices;</span>
<a href="#l56.17"></a><span id="l56.17" class="difflineminus">-try {</span>
<a href="#l56.18"></a><span id="l56.18" class="difflineminus">-  MailServices = ChromeUtils.import(&quot;resource:///modules/MailServices.jsm&quot;)</span>
<a href="#l56.19"></a><span id="l56.19" class="difflineminus">-    .MailServices;</span>
<a href="#l56.20"></a><span id="l56.20" class="difflineminus">-} catch (x) {</span>
<a href="#l56.21"></a><span id="l56.21" class="difflineminus">-  MailServices = ChromeUtils.import(&quot;resource:///modules/mailServices.js&quot;)</span>
<a href="#l56.22"></a><span id="l56.22" class="difflineminus">-    .MailServices;</span>
<a href="#l56.23"></a><span id="l56.23" class="difflineminus">-}</span>
<a href="#l56.24"></a><span id="l56.24" class="difflineplus">+var { MailServices } = ChromeUtils.import(</span>
<a href="#l56.25"></a><span id="l56.25" class="difflineplus">+  &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l56.26"></a><span id="l56.26" class="difflineplus">+);</span>
<a href="#l56.27"></a><span id="l56.27"> </span>
<a href="#l56.28"></a><span id="l56.28"> const {</span>
<a href="#l56.29"></a><span id="l56.29">   getIdentities,</span>
<a href="#l56.30"></a><span id="l56.30">   getDefaultIdentity,</span>
<a href="#l56.31"></a><span id="l56.31">   combine,</span>
<a href="#l56.32"></a><span id="l56.32">   escapeHtml,</span>
<a href="#l56.33"></a><span id="l56.33">   systemCharset,</span>
<a href="#l56.34"></a><span id="l56.34"> } = ChromeUtils.import(&quot;chrome://openpgp/content/modules/stdlib/misc.jsm&quot;);</span>
<a href="#l56.35"></a><span id="l56.35"> </span>
<a href="#l56.36"></a><span id="l56.36"> const { msgHdrGetUri, getMail3Pane, msgHdrGetHeaders } = ChromeUtils.import(</span>
<a href="#l56.37"></a><span id="l56.37">   &quot;chrome://openpgp/content/modules/stdlib/msgHdrUtils.jsm&quot;</span>
<a href="#l56.38"></a><span id="l56.38"> );</span>
<a href="#l56.39"></a><span id="l56.39" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l56.40"></a><span id="l56.40" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l56.41"></a><span id="l56.41">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l56.42"></a><span id="l56.42" class="difflineminus">-).EnigmailLog;</span>
<a href="#l56.43"></a><span id="l56.43" class="difflineplus">+);</span>
<a href="#l56.44"></a><span id="l56.44"> </span>
<a href="#l56.45"></a><span id="l56.45"> function getEditorForIframe(aIframe) {</span>
<a href="#l56.46"></a><span id="l56.46">   let w = aIframe.contentWindow;</span>
<a href="#l56.47"></a><span id="l56.47">   let s = w</span>
<a href="#l56.48"></a><span id="l56.48">     .QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l56.49"></a><span id="l56.49">     .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l56.50"></a><span id="l56.50">     .QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l56.51"></a><span id="l56.51">     .getInterface(Ci.nsIEditingSession);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/stdlib/misc.jsm</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/stdlib/misc.jsm</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -36,31 +36,28 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l57.4"></a><span id="l57.4">   // Character set helpers</span>
<a href="#l57.5"></a><span id="l57.5">   &quot;systemCharset&quot;,</span>
<a href="#l57.6"></a><span id="l57.6">   // Platform-specific idioms</span>
<a href="#l57.7"></a><span id="l57.7">   &quot;isOSX&quot;,</span>
<a href="#l57.8"></a><span id="l57.8">   &quot;isWindows&quot;,</span>
<a href="#l57.9"></a><span id="l57.9">   &quot;isAccel&quot;,</span>
<a href="#l57.10"></a><span id="l57.10"> ];</span>
<a href="#l57.11"></a><span id="l57.11"> </span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-const fixIterator = ChromeUtils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;)</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineminus">-  .fixIterator;</span>
<a href="#l57.14"></a><span id="l57.14" class="difflineminus">-const XPCOMUtils = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;)</span>
<a href="#l57.15"></a><span id="l57.15" class="difflineminus">-  .XPCOMUtils;</span>
<a href="#l57.16"></a><span id="l57.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l57.17"></a><span id="l57.17" class="difflineplus">+const { fixIterator } = ChromeUtils.import(</span>
<a href="#l57.18"></a><span id="l57.18" class="difflineplus">+  &quot;resource:///modules/iteratorUtils.jsm&quot;</span>
<a href="#l57.19"></a><span id="l57.19" class="difflineplus">+);</span>
<a href="#l57.20"></a><span id="l57.20" class="difflineplus">+const { XPCOMUtils } = ChromeUtils.import(</span>
<a href="#l57.21"></a><span id="l57.21" class="difflineplus">+  &quot;resource://gre/modules/XPCOMUtils.jsm&quot;</span>
<a href="#l57.22"></a><span id="l57.22" class="difflineplus">+);</span>
<a href="#l57.23"></a><span id="l57.23" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l57.24"></a><span id="l57.24">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l57.25"></a><span id="l57.25" class="difflineminus">-).EnigmailLog;</span>
<a href="#l57.26"></a><span id="l57.26" class="difflineminus">-var MailServices;</span>
<a href="#l57.27"></a><span id="l57.27" class="difflineminus">-try {</span>
<a href="#l57.28"></a><span id="l57.28" class="difflineminus">-  MailServices = ChromeUtils.import(&quot;resource:///modules/MailServices.jsm&quot;)</span>
<a href="#l57.29"></a><span id="l57.29" class="difflineminus">-    .MailServices;</span>
<a href="#l57.30"></a><span id="l57.30" class="difflineminus">-} catch (x) {</span>
<a href="#l57.31"></a><span id="l57.31" class="difflineminus">-  MailServices = ChromeUtils.import(&quot;resource:///modules/mailServices.js&quot;)</span>
<a href="#l57.32"></a><span id="l57.32" class="difflineminus">-    .MailServices;</span>
<a href="#l57.33"></a><span id="l57.33" class="difflineminus">-}</span>
<a href="#l57.34"></a><span id="l57.34" class="difflineplus">+);</span>
<a href="#l57.35"></a><span id="l57.35" class="difflineplus">+var { MailServices } = ChromeUtils.import(</span>
<a href="#l57.36"></a><span id="l57.36" class="difflineplus">+  &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l57.37"></a><span id="l57.37" class="difflineplus">+);</span>
<a href="#l57.38"></a><span id="l57.38"> </span>
<a href="#l57.39"></a><span id="l57.39"> XPCOMUtils.defineLazyServiceGetter(</span>
<a href="#l57.40"></a><span id="l57.40">   MailServices,</span>
<a href="#l57.41"></a><span id="l57.41">   &quot;i18nDateFormatter&quot;,</span>
<a href="#l57.42"></a><span id="l57.42">   &quot;@mozilla.org/intl/scriptabledateformat;1&quot;</span>
<a href="#l57.43"></a><span id="l57.43"> );</span>
<a href="#l57.44"></a><span id="l57.44"> </span>
<a href="#l57.45"></a><span id="l57.45"> let isOSX = &quot;nsILocalFileMac&quot; in Ci;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/stdlib/msgHdrUtils.jsm</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -41,38 +41,33 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l58.4"></a><span id="l58.4"> // from mailnews/base/public/nsMsgFolderFlags.idl</span>
<a href="#l58.5"></a><span id="l58.5"> const nsMsgFolderFlags_SentMail = 0x00000200;</span>
<a href="#l58.6"></a><span id="l58.6"> const nsMsgFolderFlags_Drafts = 0x00000400;</span>
<a href="#l58.7"></a><span id="l58.7"> const nsMsgFolderFlags_Archive = 0x00004000;</span>
<a href="#l58.8"></a><span id="l58.8"> const nsMsgFolderFlags_Inbox = 0x00001000;</span>
<a href="#l58.9"></a><span id="l58.9"> </span>
<a href="#l58.10"></a><span id="l58.10"> const PR_WRONLY = 0x02;</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-const XPCOMUtils = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;)</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineminus">-  .XPCOMUtils;</span>
<a href="#l58.14"></a><span id="l58.14" class="difflineplus">+const { XPCOMUtils } = ChromeUtils.import(</span>
<a href="#l58.15"></a><span id="l58.15" class="difflineplus">+  &quot;resource://gre/modules/XPCOMUtils.jsm&quot;</span>
<a href="#l58.16"></a><span id="l58.16" class="difflineplus">+);</span>
<a href="#l58.17"></a><span id="l58.17"> const { MsgHdrToMimeMessage, MimeMessage } = ChromeUtils.import(</span>
<a href="#l58.18"></a><span id="l58.18">   &quot;resource:///modules/gloda/MimeMessage.jsm&quot;</span>
<a href="#l58.19"></a><span id="l58.19"> );</span>
<a href="#l58.20"></a><span id="l58.20"> const { toXPCOMArray } = ChromeUtils.import(</span>
<a href="#l58.21"></a><span id="l58.21">   &quot;resource:///modules/iteratorUtils.jsm&quot;</span>
<a href="#l58.22"></a><span id="l58.22"> );</span>
<a href="#l58.23"></a><span id="l58.23" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l58.24"></a><span id="l58.24" class="difflineminus">-  .Services;</span>
<a href="#l58.25"></a><span id="l58.25" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l58.26"></a><span id="l58.26" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l58.27"></a><span id="l58.27" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l58.28"></a><span id="l58.28">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l58.29"></a><span id="l58.29" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l58.30"></a><span id="l58.30" class="difflineplus">+);</span>
<a href="#l58.31"></a><span id="l58.31"> </span>
<a href="#l58.32"></a><span id="l58.32" class="difflineminus">-var MailServices;</span>
<a href="#l58.33"></a><span id="l58.33" class="difflineminus">-try {</span>
<a href="#l58.34"></a><span id="l58.34" class="difflineminus">-  MailServices = ChromeUtils.import(&quot;resource:///modules/MailServices.jsm&quot;)</span>
<a href="#l58.35"></a><span id="l58.35" class="difflineminus">-    .MailServices;</span>
<a href="#l58.36"></a><span id="l58.36" class="difflineminus">-} catch (x) {</span>
<a href="#l58.37"></a><span id="l58.37" class="difflineminus">-  MailServices = ChromeUtils.import(&quot;resource:///modules/mailServices.js&quot;)</span>
<a href="#l58.38"></a><span id="l58.38" class="difflineminus">-    .MailServices;</span>
<a href="#l58.39"></a><span id="l58.39" class="difflineminus">-}</span>
<a href="#l58.40"></a><span id="l58.40" class="difflineplus">+var { MailServices } = ChromeUtils.import(</span>
<a href="#l58.41"></a><span id="l58.41" class="difflineplus">+  &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l58.42"></a><span id="l58.42" class="difflineplus">+);</span>
<a href="#l58.43"></a><span id="l58.43"> </span>
<a href="#l58.44"></a><span id="l58.44"> const { entries, NS_SUCCEEDED } = ChromeUtils.import(</span>
<a href="#l58.45"></a><span id="l58.45">   &quot;chrome://openpgp/content/modules/stdlib/misc.jsm&quot;</span>
<a href="#l58.46"></a><span id="l58.46"> );</span>
<a href="#l58.47"></a><span id="l58.47"> </span>
<a href="#l58.48"></a><span id="l58.48"> // Adding a messenger lazy getter to the MailServices even though it's not a service</span>
<a href="#l58.49"></a><span id="l58.49"> XPCOMUtils.defineLazyGetter(MailServices, &quot;messenger&quot;, function() {</span>
<a href="#l58.50"></a><span id="l58.50">   return Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance(Ci.nsIMessenger);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/streams.jsm</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/streams.jsm</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -3,29 +3,27 @@</span>
<a href="#l59.4"></a><span id="l59.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l59.5"></a><span id="l59.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l59.6"></a><span id="l59.6">  */</span>
<a href="#l59.7"></a><span id="l59.7"> </span>
<a href="#l59.8"></a><span id="l59.8"> &quot;use strict&quot;;</span>
<a href="#l59.9"></a><span id="l59.9"> </span>
<a href="#l59.10"></a><span id="l59.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailStreams&quot;];</span>
<a href="#l59.11"></a><span id="l59.11"> </span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l59.14"></a><span id="l59.14">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l59.15"></a><span id="l59.15" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l59.16"></a><span id="l59.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l59.17"></a><span id="l59.17" class="difflineplus">+);</span>
<a href="#l59.18"></a><span id="l59.18" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l59.19"></a><span id="l59.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l59.20"></a><span id="l59.20" class="difflineminus">-).EnigmailLog;</span>
<a href="#l59.21"></a><span id="l59.21" class="difflineminus">-const EnigmailTimer = ChromeUtils.import(</span>
<a href="#l59.22"></a><span id="l59.22" class="difflineplus">+);</span>
<a href="#l59.23"></a><span id="l59.23" class="difflineplus">+const { EnigmailTimer } = ChromeUtils.import(</span>
<a href="#l59.24"></a><span id="l59.24">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l59.25"></a><span id="l59.25" class="difflineminus">-).EnigmailTimer;</span>
<a href="#l59.26"></a><span id="l59.26" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l59.27"></a><span id="l59.27" class="difflineminus">-  .Services;</span>
<a href="#l59.28"></a><span id="l59.28" class="difflineminus">-const NetUtil = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;)</span>
<a href="#l59.29"></a><span id="l59.29" class="difflineminus">-  .NetUtil;</span>
<a href="#l59.30"></a><span id="l59.30" class="difflineplus">+);</span>
<a href="#l59.31"></a><span id="l59.31" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l59.32"></a><span id="l59.32" class="difflineplus">+const { NetUtil } = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;);</span>
<a href="#l59.33"></a><span id="l59.33"> </span>
<a href="#l59.34"></a><span id="l59.34"> const NS_STRING_INPUT_STREAM_CONTRACTID =</span>
<a href="#l59.35"></a><span id="l59.35">   &quot;@mozilla.org/io/string-input-stream;1&quot;;</span>
<a href="#l59.36"></a><span id="l59.36"> const NS_INPUT_STREAM_CHNL_CONTRACTID =</span>
<a href="#l59.37"></a><span id="l59.37">   &quot;@mozilla.org/network/input-stream-channel;1&quot;;</span>
<a href="#l59.38"></a><span id="l59.38"> </span>
<a href="#l59.39"></a><span id="l59.39"> var EnigmailStreams = {</span>
<a href="#l59.40"></a><span id="l59.40">   /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/time.jsm</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/time.jsm</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -3,19 +3,19 @@</span>
<a href="#l60.4"></a><span id="l60.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l60.5"></a><span id="l60.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l60.6"></a><span id="l60.6">  */</span>
<a href="#l60.7"></a><span id="l60.7"> </span>
<a href="#l60.8"></a><span id="l60.8"> &quot;use strict&quot;;</span>
<a href="#l60.9"></a><span id="l60.9"> </span>
<a href="#l60.10"></a><span id="l60.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailTime&quot;];</span>
<a href="#l60.11"></a><span id="l60.11"> </span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l60.14"></a><span id="l60.14">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l60.15"></a><span id="l60.15" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l60.16"></a><span id="l60.16" class="difflineplus">+);</span>
<a href="#l60.17"></a><span id="l60.17"> </span>
<a href="#l60.18"></a><span id="l60.18"> const DATE_2DIGIT = &quot;2-digit&quot;;</span>
<a href="#l60.19"></a><span id="l60.19"> const DATE_4DIGIT = &quot;numeric&quot;;</span>
<a href="#l60.20"></a><span id="l60.20"> </span>
<a href="#l60.21"></a><span id="l60.21"> var EnigmailTime = {</span>
<a href="#l60.22"></a><span id="l60.22">   /**</span>
<a href="#l60.23"></a><span id="l60.23">    * Transform a Unix-Timestamp to a human-readable date/time string</span>
<a href="#l60.24"></a><span id="l60.24">    *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/trust.jsm</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/trust.jsm</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -3,19 +3,19 @@</span>
<a href="#l61.4"></a><span id="l61.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l61.5"></a><span id="l61.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l61.6"></a><span id="l61.6">  */</span>
<a href="#l61.7"></a><span id="l61.7"> </span>
<a href="#l61.8"></a><span id="l61.8"> &quot;use strict&quot;;</span>
<a href="#l61.9"></a><span id="l61.9"> </span>
<a href="#l61.10"></a><span id="l61.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailTrust&quot;];</span>
<a href="#l61.11"></a><span id="l61.11"> </span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l61.14"></a><span id="l61.14">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l61.15"></a><span id="l61.15" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l61.16"></a><span id="l61.16" class="difflineplus">+);</span>
<a href="#l61.17"></a><span id="l61.17"> </span>
<a href="#l61.18"></a><span id="l61.18"> // trust flags according to GPG documentation:</span>
<a href="#l61.19"></a><span id="l61.19"> // - https://www.gnupg.org/documentation/manuals/gnupg.pdf</span>
<a href="#l61.20"></a><span id="l61.20"> // - sources: doc/DETAILS</span>
<a href="#l61.21"></a><span id="l61.21"> // In the order of trustworthy:</span>
<a href="#l61.22"></a><span id="l61.22"> //  ---------------------------------------------------------</span>
<a href="#l61.23"></a><span id="l61.23"> //  i = The key is invalid (e.g. due to a missing self-signature)</span>
<a href="#l61.24"></a><span id="l61.24"> //  n = The key is not valid / Never trust this key</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/uris.jsm</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/uris.jsm</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -3,22 +3,22 @@</span>
<a href="#l62.4"></a><span id="l62.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l62.5"></a><span id="l62.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l62.6"></a><span id="l62.6">  */</span>
<a href="#l62.7"></a><span id="l62.7"> </span>
<a href="#l62.8"></a><span id="l62.8"> &quot;use strict&quot;;</span>
<a href="#l62.9"></a><span id="l62.9"> </span>
<a href="#l62.10"></a><span id="l62.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailURIs&quot;];</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l62.14"></a><span id="l62.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l62.15"></a><span id="l62.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l62.16"></a><span id="l62.16" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l62.17"></a><span id="l62.17" class="difflineplus">+);</span>
<a href="#l62.18"></a><span id="l62.18" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l62.19"></a><span id="l62.19">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l62.20"></a><span id="l62.20" class="difflineminus">-).EnigmailData;</span>
<a href="#l62.21"></a><span id="l62.21" class="difflineplus">+);</span>
<a href="#l62.22"></a><span id="l62.22"> </span>
<a href="#l62.23"></a><span id="l62.23"> const messageIdList = {};</span>
<a href="#l62.24"></a><span id="l62.24"> const encryptedUris = [];</span>
<a href="#l62.25"></a><span id="l62.25"> </span>
<a href="#l62.26"></a><span id="l62.26"> var EnigmailURIs = {</span>
<a href="#l62.27"></a><span id="l62.27">   createMessageURI(</span>
<a href="#l62.28"></a><span id="l62.28">     originalUrl,</span>
<a href="#l62.29"></a><span id="l62.29">     contentType,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/verify.jsm</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/verify.jsm</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -3,25 +3,25 @@</span>
<a href="#l63.4"></a><span id="l63.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l63.5"></a><span id="l63.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l63.6"></a><span id="l63.6">  */</span>
<a href="#l63.7"></a><span id="l63.7"> </span>
<a href="#l63.8"></a><span id="l63.8"> &quot;use strict&quot;;</span>
<a href="#l63.9"></a><span id="l63.9"> </span>
<a href="#l63.10"></a><span id="l63.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailVerifyAttachment&quot;];</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l63.14"></a><span id="l63.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l63.15"></a><span id="l63.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l63.16"></a><span id="l63.16" class="difflineminus">-const EnigmailFiles = ChromeUtils.import(</span>
<a href="#l63.17"></a><span id="l63.17" class="difflineplus">+);</span>
<a href="#l63.18"></a><span id="l63.18" class="difflineplus">+const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l63.19"></a><span id="l63.19">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l63.20"></a><span id="l63.20" class="difflineminus">-).EnigmailFiles;</span>
<a href="#l63.21"></a><span id="l63.21" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l63.22"></a><span id="l63.22" class="difflineplus">+);</span>
<a href="#l63.23"></a><span id="l63.23" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l63.24"></a><span id="l63.24">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l63.25"></a><span id="l63.25" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l63.26"></a><span id="l63.26" class="difflineplus">+);</span>
<a href="#l63.27"></a><span id="l63.27"> </span>
<a href="#l63.28"></a><span id="l63.28"> var EnigmailVerifyAttachment = {</span>
<a href="#l63.29"></a><span id="l63.29">   attachment(verifyFile, sigFile) {</span>
<a href="#l63.30"></a><span id="l63.30">     EnigmailLog.DEBUG(&quot;verify.jsm: EnigmailVerifyAttachment.attachment:\n&quot;);</span>
<a href="#l63.31"></a><span id="l63.31"> </span>
<a href="#l63.32"></a><span id="l63.32">     const verifyFilePath = EnigmailFiles.getEscapedFilename(</span>
<a href="#l63.33"></a><span id="l63.33">       EnigmailFiles.getFilePathReadonly(verifyFile.QueryInterface(Ci.nsIFile))</span>
<a href="#l63.34"></a><span id="l63.34">     );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/versioning.jsm</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/versioning.jsm</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -3,18 +3,17 @@</span>
<a href="#l64.4"></a><span id="l64.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l64.5"></a><span id="l64.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l64.6"></a><span id="l64.6">  */</span>
<a href="#l64.7"></a><span id="l64.7"> </span>
<a href="#l64.8"></a><span id="l64.8"> &quot;use strict&quot;;</span>
<a href="#l64.9"></a><span id="l64.9"> </span>
<a href="#l64.10"></a><span id="l64.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailVersioning&quot;];</span>
<a href="#l64.11"></a><span id="l64.11"> </span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineminus">-  .Services;</span>
<a href="#l64.14"></a><span id="l64.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l64.15"></a><span id="l64.15"> </span>
<a href="#l64.16"></a><span id="l64.16"> function greaterThanOrEqual(versionWeHave, versionWeAreComparingWith) {</span>
<a href="#l64.17"></a><span id="l64.17">   return Services.vc.compare(versionWeHave, versionWeAreComparingWith) &gt;= 0;</span>
<a href="#l64.18"></a><span id="l64.18"> }</span>
<a href="#l64.19"></a><span id="l64.19"> </span>
<a href="#l64.20"></a><span id="l64.20"> function greaterThan(versionWeHave, versionWeAreComparingWith) {</span>
<a href="#l64.21"></a><span id="l64.21">   return Services.vc.compare(versionWeHave, versionWeAreComparingWith) &gt; 0;</span>
<a href="#l64.22"></a><span id="l64.22"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/webKey.jsm</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/webKey.jsm</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -9,25 +9,25 @@</span>
<a href="#l65.4"></a><span id="l65.4"> /**</span>
<a href="#l65.5"></a><span id="l65.5">  * This module serves to integrate WKS (Webkey service) into Enigmail</span>
<a href="#l65.6"></a><span id="l65.6">  */</span>
<a href="#l65.7"></a><span id="l65.7"> </span>
<a href="#l65.8"></a><span id="l65.8"> &quot;use strict&quot;;</span>
<a href="#l65.9"></a><span id="l65.9"> </span>
<a href="#l65.10"></a><span id="l65.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailWks&quot;];</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l65.14"></a><span id="l65.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l65.15"></a><span id="l65.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l65.16"></a><span id="l65.16" class="difflineminus">-const EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l65.17"></a><span id="l65.17" class="difflineplus">+);</span>
<a href="#l65.18"></a><span id="l65.18" class="difflineplus">+const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l65.19"></a><span id="l65.19">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l65.20"></a><span id="l65.20" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l65.21"></a><span id="l65.21" class="difflineminus">-const EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l65.22"></a><span id="l65.22" class="difflineplus">+);</span>
<a href="#l65.23"></a><span id="l65.23" class="difflineplus">+const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l65.24"></a><span id="l65.24">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l65.25"></a><span id="l65.25" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l65.26"></a><span id="l65.26" class="difflineplus">+);</span>
<a href="#l65.27"></a><span id="l65.27"> </span>
<a href="#l65.28"></a><span id="l65.28"> var EnigmailWks = {</span>
<a href="#l65.29"></a><span id="l65.29">   wksClientPath: null,</span>
<a href="#l65.30"></a><span id="l65.30"> </span>
<a href="#l65.31"></a><span id="l65.31">   /**</span>
<a href="#l65.32"></a><span id="l65.32">    * Get WKS Client path (gpg-wks-client)</span>
<a href="#l65.33"></a><span id="l65.33">    *</span>
<a href="#l65.34"></a><span id="l65.34">    * @param window  : Object - parent window for dialog display</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/windows.jsm</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/windows.jsm</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -3,37 +3,36 @@</span>
<a href="#l66.4"></a><span id="l66.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l66.5"></a><span id="l66.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l66.6"></a><span id="l66.6">  */</span>
<a href="#l66.7"></a><span id="l66.7"> </span>
<a href="#l66.8"></a><span id="l66.8"> &quot;use strict&quot;;</span>
<a href="#l66.9"></a><span id="l66.9"> </span>
<a href="#l66.10"></a><span id="l66.10"> const EXPORTED_SYMBOLS = [&quot;EnigmailWindows&quot;];</span>
<a href="#l66.11"></a><span id="l66.11"> </span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineminus">-  .Services;</span>
<a href="#l66.14"></a><span id="l66.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l66.15"></a><span id="l66.15"> </span>
<a href="#l66.16"></a><span id="l66.16" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l66.17"></a><span id="l66.17" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l66.18"></a><span id="l66.18">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l66.19"></a><span id="l66.19" class="difflineminus">-).EnigmailLog;</span>
<a href="#l66.20"></a><span id="l66.20" class="difflineminus">-const EnigmailCore = ChromeUtils.import(</span>
<a href="#l66.21"></a><span id="l66.21" class="difflineplus">+);</span>
<a href="#l66.22"></a><span id="l66.22" class="difflineplus">+const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l66.23"></a><span id="l66.23">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l66.24"></a><span id="l66.24" class="difflineminus">-).EnigmailCore;</span>
<a href="#l66.25"></a><span id="l66.25" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l66.26"></a><span id="l66.26" class="difflineplus">+);</span>
<a href="#l66.27"></a><span id="l66.27" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l66.28"></a><span id="l66.28">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l66.29"></a><span id="l66.29" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l66.30"></a><span id="l66.30" class="difflineminus">-const EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l66.31"></a><span id="l66.31" class="difflineplus">+);</span>
<a href="#l66.32"></a><span id="l66.32" class="difflineplus">+const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l66.33"></a><span id="l66.33">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l66.34"></a><span id="l66.34" class="difflineminus">-).EnigmailKeyRing;</span>
<a href="#l66.35"></a><span id="l66.35" class="difflineminus">-const EnigmailRules = ChromeUtils.import(</span>
<a href="#l66.36"></a><span id="l66.36" class="difflineplus">+);</span>
<a href="#l66.37"></a><span id="l66.37" class="difflineplus">+const { EnigmailRules } = ChromeUtils.import(</span>
<a href="#l66.38"></a><span id="l66.38">   &quot;chrome://openpgp/content/modules/rules.jsm&quot;</span>
<a href="#l66.39"></a><span id="l66.39" class="difflineminus">-).EnigmailRules;</span>
<a href="#l66.40"></a><span id="l66.40" class="difflineminus">-const EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l66.41"></a><span id="l66.41" class="difflineplus">+);</span>
<a href="#l66.42"></a><span id="l66.42" class="difflineplus">+const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l66.43"></a><span id="l66.43">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l66.44"></a><span id="l66.44" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l66.45"></a><span id="l66.45" class="difflineplus">+);</span>
<a href="#l66.46"></a><span id="l66.46"> </span>
<a href="#l66.47"></a><span id="l66.47"> var EnigmailWindows = {</span>
<a href="#l66.48"></a><span id="l66.48">   /**</span>
<a href="#l66.49"></a><span id="l66.49">    * Display the OpenPGP setup wizard window</span>
<a href="#l66.50"></a><span id="l66.50">    *</span>
<a href="#l66.51"></a><span id="l66.51">    * win      : nsIWindow - the parent window</span>
<a href="#l66.52"></a><span id="l66.52">    * skipIntro: Boolean   - optional, if true, skip the introduction page</span>
<a href="#l66.53"></a><span id="l66.53">    *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/wkdLookup.jsm</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/wkdLookup.jsm</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -6,28 +6,28 @@</span>
<a href="#l67.4"></a><span id="l67.4"> </span>
<a href="#l67.5"></a><span id="l67.5"> /**</span>
<a href="#l67.6"></a><span id="l67.6">  *  Lookup keys by email addresses using WKD. A an email address is lookep up at most</span>
<a href="#l67.7"></a><span id="l67.7">  *  once a day. (see https://tools.ietf.org/html/draft-koch-openpgp-webkey-service)</span>
<a href="#l67.8"></a><span id="l67.8">  */</span>
<a href="#l67.9"></a><span id="l67.9"> </span>
<a href="#l67.10"></a><span id="l67.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailWkdLookup&quot;];</span>
<a href="#l67.11"></a><span id="l67.11"> </span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l67.14"></a><span id="l67.14">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l67.15"></a><span id="l67.15" class="difflineminus">-).EnigmailLog;</span>
<a href="#l67.16"></a><span id="l67.16" class="difflineminus">-const EnigmailZBase32 = ChromeUtils.import(</span>
<a href="#l67.17"></a><span id="l67.17" class="difflineplus">+);</span>
<a href="#l67.18"></a><span id="l67.18" class="difflineplus">+const { EnigmailZBase32 } = ChromeUtils.import(</span>
<a href="#l67.19"></a><span id="l67.19">   &quot;chrome://openpgp/content/modules/zbase32.jsm&quot;</span>
<a href="#l67.20"></a><span id="l67.20" class="difflineminus">-).EnigmailZBase32;</span>
<a href="#l67.21"></a><span id="l67.21" class="difflineminus">-const EnigmailData = ChromeUtils.import(</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineplus">+);</span>
<a href="#l67.23"></a><span id="l67.23" class="difflineplus">+const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l67.24"></a><span id="l67.24">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l67.25"></a><span id="l67.25" class="difflineminus">-).EnigmailData;</span>
<a href="#l67.26"></a><span id="l67.26" class="difflineminus">-const EnigmailSqliteDb = ChromeUtils.import(</span>
<a href="#l67.27"></a><span id="l67.27" class="difflineplus">+);</span>
<a href="#l67.28"></a><span id="l67.28" class="difflineplus">+const { EnigmailSqliteDb } = ChromeUtils.import(</span>
<a href="#l67.29"></a><span id="l67.29">   &quot;chrome://openpgp/content/modules/sqliteDb.jsm&quot;</span>
<a href="#l67.30"></a><span id="l67.30" class="difflineminus">-).EnigmailSqliteDb;</span>
<a href="#l67.31"></a><span id="l67.31" class="difflineplus">+);</span>
<a href="#l67.32"></a><span id="l67.32"> </span>
<a href="#l67.33"></a><span id="l67.33"> Cu.importGlobalProperties([&quot;fetch&quot;]);</span>
<a href="#l67.34"></a><span id="l67.34"> </span>
<a href="#l67.35"></a><span id="l67.35"> // Those domains are not expected to have WKD:</span>
<a href="#l67.36"></a><span id="l67.36"> var BLACKLIST_DOMAINS = [</span>
<a href="#l67.37"></a><span id="l67.37">   /* Default domains included */</span>
<a href="#l67.38"></a><span id="l67.38">   &quot;aol.com&quot;,</span>
<a href="#l67.39"></a><span id="l67.39">   &quot;att.net&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -1,44 +1,43 @@</span>
<a href="#l68.4"></a><span id="l68.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l68.5"></a><span id="l68.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l68.6"></a><span id="l68.6">  * file, You can obtain one at https://mozilla.org/MPL/2.0/. */</span>
<a href="#l68.7"></a><span id="l68.7"> </span>
<a href="#l68.8"></a><span id="l68.8"> &quot;use strict&quot;;</span>
<a href="#l68.9"></a><span id="l68.9"> </span>
<a href="#l68.10"></a><span id="l68.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailWksMimeHandler&quot;];</span>
<a href="#l68.11"></a><span id="l68.11"> </span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineminus">-  .Services;</span>
<a href="#l68.14"></a><span id="l68.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l68.15"></a><span id="l68.15"> </span>
<a href="#l68.16"></a><span id="l68.16"> /**</span>
<a href="#l68.17"></a><span id="l68.17">  *  Module for handling response messages from OpenPGP Web Key Service</span>
<a href="#l68.18"></a><span id="l68.18">  */</span>
<a href="#l68.19"></a><span id="l68.19"> </span>
<a href="#l68.20"></a><span id="l68.20" class="difflineminus">-const EnigmailCompat = ChromeUtils.import(</span>
<a href="#l68.21"></a><span id="l68.21" class="difflineplus">+const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l68.22"></a><span id="l68.22">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l68.23"></a><span id="l68.23" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l68.24"></a><span id="l68.24" class="difflineminus">-const EnigmailVerify = ChromeUtils.import(</span>
<a href="#l68.25"></a><span id="l68.25" class="difflineplus">+);</span>
<a href="#l68.26"></a><span id="l68.26" class="difflineplus">+const { EnigmailVerify } = ChromeUtils.import(</span>
<a href="#l68.27"></a><span id="l68.27">   &quot;chrome://openpgp/content/modules/mimeVerify.jsm&quot;</span>
<a href="#l68.28"></a><span id="l68.28" class="difflineminus">-).EnigmailVerify;</span>
<a href="#l68.29"></a><span id="l68.29" class="difflineminus">-const EnigmailLog = ChromeUtils.import(</span>
<a href="#l68.30"></a><span id="l68.30" class="difflineplus">+);</span>
<a href="#l68.31"></a><span id="l68.31" class="difflineplus">+const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l68.32"></a><span id="l68.32">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l68.33"></a><span id="l68.33" class="difflineminus">-).EnigmailLog;</span>
<a href="#l68.34"></a><span id="l68.34" class="difflineminus">-const EnigmailLocale = ChromeUtils.import(</span>
<a href="#l68.35"></a><span id="l68.35" class="difflineplus">+);</span>
<a href="#l68.36"></a><span id="l68.36" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l68.37"></a><span id="l68.37">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l68.38"></a><span id="l68.38" class="difflineminus">-).EnigmailLocale;</span>
<a href="#l68.39"></a><span id="l68.39" class="difflineminus">-const EnigmailDecryption = ChromeUtils.import(</span>
<a href="#l68.40"></a><span id="l68.40" class="difflineplus">+);</span>
<a href="#l68.41"></a><span id="l68.41" class="difflineplus">+const { EnigmailDecryption } = ChromeUtils.import(</span>
<a href="#l68.42"></a><span id="l68.42">   &quot;chrome://openpgp/content/modules/decryption.jsm&quot;</span>
<a href="#l68.43"></a><span id="l68.43" class="difflineminus">-).EnigmailDecryption;</span>
<a href="#l68.44"></a><span id="l68.44" class="difflineminus">-const EnigmailSingletons = ChromeUtils.import(</span>
<a href="#l68.45"></a><span id="l68.45" class="difflineplus">+);</span>
<a href="#l68.46"></a><span id="l68.46" class="difflineplus">+const { EnigmailSingletons } = ChromeUtils.import(</span>
<a href="#l68.47"></a><span id="l68.47">   &quot;chrome://openpgp/content/modules/singletons.jsm&quot;</span>
<a href="#l68.48"></a><span id="l68.48" class="difflineminus">-).EnigmailSingletons;</span>
<a href="#l68.49"></a><span id="l68.49" class="difflineminus">-const EnigmailConstants = ChromeUtils.import(</span>
<a href="#l68.50"></a><span id="l68.50" class="difflineplus">+);</span>
<a href="#l68.51"></a><span id="l68.51" class="difflineplus">+const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l68.52"></a><span id="l68.52">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l68.53"></a><span id="l68.53" class="difflineminus">-).EnigmailConstants;</span>
<a href="#l68.54"></a><span id="l68.54" class="difflineplus">+);</span>
<a href="#l68.55"></a><span id="l68.55"> </span>
<a href="#l68.56"></a><span id="l68.56"> var gDebugLog = false;</span>
<a href="#l68.57"></a><span id="l68.57"> </span>
<a href="#l68.58"></a><span id="l68.58"> var EnigmailWksMimeHandler = {</span>
<a href="#l68.59"></a><span id="l68.59">   /***</span>
<a href="#l68.60"></a><span id="l68.60">    * register a PGP/MIME verify object the same way PGP/MIME encrypted mail is handled</span>
<a href="#l68.61"></a><span id="l68.61">    */</span>
<a href="#l68.62"></a><span id="l68.62">   registerContentTypeHandler() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/am-enigprefs.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/am-enigprefs.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -1,18 +1,19 @@</span>
<a href="#l69.4"></a><span id="l69.4"> /*</span>
<a href="#l69.5"></a><span id="l69.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l69.6"></a><span id="l69.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l69.7"></a><span id="l69.7">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l69.8"></a><span id="l69.8">  */</span>
<a href="#l69.9"></a><span id="l69.9"> </span>
<a href="#l69.10"></a><span id="l69.10"> &quot;use strict&quot;;</span>
<a href="#l69.11"></a><span id="l69.11"> </span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-var EnigmailLog = ChromeUtils.import(&quot;chrome://openpgp/content/modules/log.jsm&quot;)</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineminus">-  .EnigmailLog;</span>
<a href="#l69.14"></a><span id="l69.14" class="difflineplus">+var { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l69.15"></a><span id="l69.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l69.16"></a><span id="l69.16" class="difflineplus">+);</span>
<a href="#l69.17"></a><span id="l69.17"> var EnigmailCore = ChromeUtils.import(</span>
<a href="#l69.18"></a><span id="l69.18">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l69.19"></a><span id="l69.19"> ).EnigmailCore;</span>
<a href="#l69.20"></a><span id="l69.20"> </span>
<a href="#l69.21"></a><span id="l69.21"> if (!Enigmail) {</span>
<a href="#l69.22"></a><span id="l69.22">   var Enigmail = {};</span>
<a href="#l69.23"></a><span id="l69.23"> }</span>
<a href="#l69.24"></a><span id="l69.24"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/commonWorkflows.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/commonWorkflows.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -7,18 +7,19 @@</span>
<a href="#l70.4"></a><span id="l70.4"> &quot;use strict&quot;;</span>
<a href="#l70.5"></a><span id="l70.5"> </span>
<a href="#l70.6"></a><span id="l70.6"> var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l70.7"></a><span id="l70.7">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l70.8"></a><span id="l70.8"> ).EnigmailDialog;</span>
<a href="#l70.9"></a><span id="l70.9"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l70.10"></a><span id="l70.10">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l70.11"></a><span id="l70.11"> ).EnigmailLocale;</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-var EnigmailKey = ChromeUtils.import(&quot;chrome://openpgp/content/modules/key.jsm&quot;)</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineminus">-  .EnigmailKey;</span>
<a href="#l70.14"></a><span id="l70.14" class="difflineplus">+var { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l70.15"></a><span id="l70.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l70.16"></a><span id="l70.16" class="difflineplus">+);</span>
<a href="#l70.17"></a><span id="l70.17"> var EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l70.18"></a><span id="l70.18">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l70.19"></a><span id="l70.19"> ).EnigmailKeyRing;</span>
<a href="#l70.20"></a><span id="l70.20"> </span>
<a href="#l70.21"></a><span id="l70.21"> /**</span>
<a href="#l70.22"></a><span id="l70.22">  * import OpenPGP keys from file</span>
<a href="#l70.23"></a><span id="l70.23">  */</span>
<a href="#l70.24"></a><span id="l70.24"> function EnigmailCommon_importKeysFromFile() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -5,50 +5,53 @@</span>
<a href="#l71.4"></a><span id="l71.4">  */</span>
<a href="#l71.5"></a><span id="l71.5"> </span>
<a href="#l71.6"></a><span id="l71.6"> /**</span>
<a href="#l71.7"></a><span id="l71.7">  * PLEASE NOTE: this module is legacy and must not be used for newe code - it will be removed!</span>
<a href="#l71.8"></a><span id="l71.8">  */</span>
<a href="#l71.9"></a><span id="l71.9"> </span>
<a href="#l71.10"></a><span id="l71.10"> &quot;use strict&quot;;</span>
<a href="#l71.11"></a><span id="l71.11"> </span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineminus">-  .Services;</span>
<a href="#l71.14"></a><span id="l71.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l71.15"></a><span id="l71.15"> </span>
<a href="#l71.16"></a><span id="l71.16"> // enigmailCommon.js: shared JS functions for Enigmail</span>
<a href="#l71.17"></a><span id="l71.17"> </span>
<a href="#l71.18"></a><span id="l71.18"> // WARNING: This module functions must not be loaded in overlays to standard functionality!</span>
<a href="#l71.19"></a><span id="l71.19"> </span>
<a href="#l71.20"></a><span id="l71.20"> // Many of these components are not used in this file, but are instead used in other files that are loaded together with EnigmailCommon</span>
<a href="#l71.21"></a><span id="l71.21"> var EnigmailCore = ChromeUtils.import(</span>
<a href="#l71.22"></a><span id="l71.22">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l71.23"></a><span id="l71.23"> ).EnigmailCore;</span>
<a href="#l71.24"></a><span id="l71.24"> var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l71.25"></a><span id="l71.25">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l71.26"></a><span id="l71.26"> ).EnigmailFuncs;</span>
<a href="#l71.27"></a><span id="l71.27" class="difflineminus">-var EnigmailKey = ChromeUtils.import(&quot;chrome://openpgp/content/modules/key.jsm&quot;)</span>
<a href="#l71.28"></a><span id="l71.28" class="difflineminus">-  .EnigmailKey;</span>
<a href="#l71.29"></a><span id="l71.29" class="difflineminus">-var EnigmailLog = ChromeUtils.import(&quot;chrome://openpgp/content/modules/log.jsm&quot;)</span>
<a href="#l71.30"></a><span id="l71.30" class="difflineminus">-  .EnigmailLog;</span>
<a href="#l71.31"></a><span id="l71.31" class="difflineplus">+var { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l71.32"></a><span id="l71.32" class="difflineplus">+  &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l71.33"></a><span id="l71.33" class="difflineplus">+);</span>
<a href="#l71.34"></a><span id="l71.34" class="difflineplus">+var { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l71.35"></a><span id="l71.35" class="difflineplus">+  &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l71.36"></a><span id="l71.36" class="difflineplus">+);</span>
<a href="#l71.37"></a><span id="l71.37"> var EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l71.38"></a><span id="l71.38">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l71.39"></a><span id="l71.39"> ).EnigmailPrefs;</span>
<a href="#l71.40"></a><span id="l71.40" class="difflineminus">-var EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l71.41"></a><span id="l71.41" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l71.42"></a><span id="l71.42" class="difflineplus">+var { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l71.43"></a><span id="l71.43" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l71.44"></a><span id="l71.44" class="difflineplus">+);</span>
<a href="#l71.45"></a><span id="l71.45"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l71.46"></a><span id="l71.46">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l71.47"></a><span id="l71.47"> ).EnigmailLocale;</span>
<a href="#l71.48"></a><span id="l71.48"> var EnigmailData = ChromeUtils.import(</span>
<a href="#l71.49"></a><span id="l71.49">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l71.50"></a><span id="l71.50"> ).EnigmailData;</span>
<a href="#l71.51"></a><span id="l71.51"> var EnigmailFiles = ChromeUtils.import(</span>
<a href="#l71.52"></a><span id="l71.52">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l71.53"></a><span id="l71.53"> ).EnigmailFiles;</span>
<a href="#l71.54"></a><span id="l71.54" class="difflineminus">-var EnigmailApp = ChromeUtils.import(&quot;chrome://openpgp/content/modules/app.jsm&quot;)</span>
<a href="#l71.55"></a><span id="l71.55" class="difflineminus">-  .EnigmailApp;</span>
<a href="#l71.56"></a><span id="l71.56" class="difflineplus">+var { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l71.57"></a><span id="l71.57" class="difflineplus">+  &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l71.58"></a><span id="l71.58" class="difflineplus">+);</span>
<a href="#l71.59"></a><span id="l71.59"> var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l71.60"></a><span id="l71.60">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l71.61"></a><span id="l71.61"> ).EnigmailDialog;</span>
<a href="#l71.62"></a><span id="l71.62"> var EnigmailWindows = ChromeUtils.import(</span>
<a href="#l71.63"></a><span id="l71.63">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l71.64"></a><span id="l71.64"> ).EnigmailWindows;</span>
<a href="#l71.65"></a><span id="l71.65"> var EnigmailTime = ChromeUtils.import(</span>
<a href="#l71.66"></a><span id="l71.66">   &quot;chrome://openpgp/content/modules/time.jsm&quot;</span>
<a href="#l71.67"></a><span id="l71.67" class="difflineat">@@ -69,29 +72,30 @@ var EnigmailErrorHandling = ChromeUtils.</span>
<a href="#l71.68"></a><span id="l71.68">   &quot;chrome://openpgp/content/modules/errorHandling.jsm&quot;</span>
<a href="#l71.69"></a><span id="l71.69"> ).EnigmailErrorHandling;</span>
<a href="#l71.70"></a><span id="l71.70"> var EnigmailKeyServer = ChromeUtils.import(</span>
<a href="#l71.71"></a><span id="l71.71">   &quot;chrome://openpgp/content/modules/keyserver.jsm&quot;</span>
<a href="#l71.72"></a><span id="l71.72"> ).EnigmailKeyServer;</span>
<a href="#l71.73"></a><span id="l71.73"> var EnigmailEvents = ChromeUtils.import(</span>
<a href="#l71.74"></a><span id="l71.74">   &quot;chrome://openpgp/content/modules/events.jsm&quot;</span>
<a href="#l71.75"></a><span id="l71.75"> ).EnigmailEvents;</span>
<a href="#l71.76"></a><span id="l71.76" class="difflineminus">-var EnigmailGpg = ChromeUtils.import(&quot;chrome://openpgp/content/modules/gpg.jsm&quot;)</span>
<a href="#l71.77"></a><span id="l71.77" class="difflineminus">-  .EnigmailGpg;</span>
<a href="#l71.78"></a><span id="l71.78" class="difflineplus">+var { EnigmailGpg } = ChromeUtils.import(</span>
<a href="#l71.79"></a><span id="l71.79" class="difflineplus">+  &quot;chrome://openpgp/content/modules/gpg.jsm&quot;</span>
<a href="#l71.80"></a><span id="l71.80" class="difflineplus">+);</span>
<a href="#l71.81"></a><span id="l71.81"> var EnigmailStreams = ChromeUtils.import(</span>
<a href="#l71.82"></a><span id="l71.82">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l71.83"></a><span id="l71.83"> ).EnigmailStreams;</span>
<a href="#l71.84"></a><span id="l71.84"> var EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l71.85"></a><span id="l71.85">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l71.86"></a><span id="l71.86"> ).EnigmailCryptoAPI;</span>
<a href="#l71.87"></a><span id="l71.87"> </span>
<a href="#l71.88"></a><span id="l71.88"> var OpenPGPMasterpass = ChromeUtils.import(</span>
<a href="#l71.89"></a><span id="l71.89">   &quot;chrome://openpgp/content/modules/masterpass.jsm&quot;</span>
<a href="#l71.90"></a><span id="l71.90"> ).OpenPGPMasterpass;</span>
<a href="#l71.91"></a><span id="l71.91" class="difflineminus">-var RNP = ChromeUtils.import(&quot;chrome://openpgp/content/modules/rnp.jsm&quot;).RNP;</span>
<a href="#l71.92"></a><span id="l71.92" class="difflineplus">+var { RNP } = ChromeUtils.import(&quot;chrome://openpgp/content/modules/rnp.jsm&quot;);</span>
<a href="#l71.93"></a><span id="l71.93"> </span>
<a href="#l71.94"></a><span id="l71.94"> // The compatible Enigmime version</span>
<a href="#l71.95"></a><span id="l71.95"> var gEnigmailSvc;</span>
<a href="#l71.96"></a><span id="l71.96"> var gEnigPromptSvc;</span>
<a href="#l71.97"></a><span id="l71.97"> </span>
<a href="#l71.98"></a><span id="l71.98"> // Maximum size of message directly processed by Enigmail</span>
<a href="#l71.99"></a><span id="l71.99"> const ENIG_PROCESSINFO_CONTRACTID = &quot;@mozilla.org/xpcom/process-info;1&quot;;</span>
<a href="#l71.100"></a><span id="l71.100"> const ENIG_ENIGMAIL_CONTRACTID = &quot;@mozdev.org/enigmail/enigmail;1&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -17,18 +17,19 @@ var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l72.4"></a><span id="l72.4">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l72.5"></a><span id="l72.5"> ).EnigmailDialog;</span>
<a href="#l72.6"></a><span id="l72.6"> var EnigmailEvents = ChromeUtils.import(</span>
<a href="#l72.7"></a><span id="l72.7">   &quot;chrome://openpgp/content/modules/events.jsm&quot;</span>
<a href="#l72.8"></a><span id="l72.8"> ).EnigmailEvents;</span>
<a href="#l72.9"></a><span id="l72.9"> var EnigmailData = ChromeUtils.import(</span>
<a href="#l72.10"></a><span id="l72.10">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l72.11"></a><span id="l72.11"> ).EnigmailData;</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-var EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l72.14"></a><span id="l72.14" class="difflineplus">+var { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l72.15"></a><span id="l72.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l72.16"></a><span id="l72.16" class="difflineplus">+);</span>
<a href="#l72.17"></a><span id="l72.17"> </span>
<a href="#l72.18"></a><span id="l72.18"> function onLoad() {</span>
<a href="#l72.19"></a><span id="l72.19">   var dlg = document.getElementById(&quot;enigmailKeyImportInfo&quot;);</span>
<a href="#l72.20"></a><span id="l72.20"> </span>
<a href="#l72.21"></a><span id="l72.21">   let i, keys;</span>
<a href="#l72.22"></a><span id="l72.22"> </span>
<a href="#l72.23"></a><span id="l72.23">   dlg.getButton(&quot;help&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l72.24"></a><span id="l72.24">   dlg.getButton(&quot;cancel&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -14,55 +14,54 @@</span>
<a href="#l73.4"></a><span id="l73.4"> /* global EnigEditKeyTrust: false, EnigEditKeyExpiry: false, EnigSignKey: false, EnigRevokeKey: false, EnigCreateRevokeCert: false */</span>
<a href="#l73.5"></a><span id="l73.5"> /* global EnigLongAlert: false, EnigChangeKeyPwd: false, EnigDownloadKeys: false, EnigSetPref: false, EnigGetTrustCode: false */</span>
<a href="#l73.6"></a><span id="l73.6"> /* global ENIG_KEY_DISABLED: false, ENIG_KEY_NOT_VALID: false, ENIG_LOCAL_FILE_CONTRACTID: false */</span>
<a href="#l73.7"></a><span id="l73.7"> </span>
<a href="#l73.8"></a><span id="l73.8"> // imported packages</span>
<a href="#l73.9"></a><span id="l73.9"> /* global EnigmailLog: false, EnigmailEvents: false, EnigmailKeyRing: false, EnigmailKeyEditor: false */</span>
<a href="#l73.10"></a><span id="l73.10"> /* global EnigmailKey: false, EnigmailLocale: false, EnigmailPrefs: false, EnigmailConstants: false */</span>
<a href="#l73.11"></a><span id="l73.11"> </span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineminus">-  .Services;</span>
<a href="#l73.14"></a><span id="l73.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l73.15"></a><span id="l73.15"> </span>
<a href="#l73.16"></a><span id="l73.16"> // Initialize enigmailCommon</span>
<a href="#l73.17"></a><span id="l73.17"> EnigInitCommon(&quot;enigmailKeyManager&quot;);</span>
<a href="#l73.18"></a><span id="l73.18"> </span>
<a href="#l73.19"></a><span id="l73.19" class="difflineminus">-var EnigmailCore = ChromeUtils.import(</span>
<a href="#l73.20"></a><span id="l73.20" class="difflineplus">+var { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l73.21"></a><span id="l73.21">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l73.22"></a><span id="l73.22" class="difflineminus">-).EnigmailCore;</span>
<a href="#l73.23"></a><span id="l73.23" class="difflineminus">-var EnigmailStreams = ChromeUtils.import(</span>
<a href="#l73.24"></a><span id="l73.24" class="difflineplus">+);</span>
<a href="#l73.25"></a><span id="l73.25" class="difflineplus">+var { EnigmailStreams } = ChromeUtils.import(</span>
<a href="#l73.26"></a><span id="l73.26">   &quot;chrome://openpgp/content/modules/streams.jsm&quot;</span>
<a href="#l73.27"></a><span id="l73.27" class="difflineminus">-).EnigmailStreams;</span>
<a href="#l73.28"></a><span id="l73.28" class="difflineminus">-var EnigmailClipboard = ChromeUtils.import(</span>
<a href="#l73.29"></a><span id="l73.29" class="difflineplus">+);</span>
<a href="#l73.30"></a><span id="l73.30" class="difflineplus">+var { EnigmailClipboard } = ChromeUtils.import(</span>
<a href="#l73.31"></a><span id="l73.31">   &quot;chrome://openpgp/content/modules/clipboard.jsm&quot;</span>
<a href="#l73.32"></a><span id="l73.32" class="difflineminus">-).EnigmailClipboard;</span>
<a href="#l73.33"></a><span id="l73.33" class="difflineminus">-var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l73.34"></a><span id="l73.34" class="difflineplus">+);</span>
<a href="#l73.35"></a><span id="l73.35" class="difflineplus">+var { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l73.36"></a><span id="l73.36">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l73.37"></a><span id="l73.37" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l73.38"></a><span id="l73.38" class="difflineminus">-var EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l73.39"></a><span id="l73.39" class="difflineplus">+);</span>
<a href="#l73.40"></a><span id="l73.40" class="difflineplus">+var { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l73.41"></a><span id="l73.41">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l73.42"></a><span id="l73.42" class="difflineminus">-).EnigmailStdlib;</span>
<a href="#l73.43"></a><span id="l73.43" class="difflineminus">-var EnigmailWindows = ChromeUtils.import(</span>
<a href="#l73.44"></a><span id="l73.44" class="difflineplus">+);</span>
<a href="#l73.45"></a><span id="l73.45" class="difflineplus">+var { EnigmailWindows } = ChromeUtils.import(</span>
<a href="#l73.46"></a><span id="l73.46">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l73.47"></a><span id="l73.47" class="difflineminus">-).EnigmailWindows;</span>
<a href="#l73.48"></a><span id="l73.48" class="difflineminus">-var EnigmailKeyServer = ChromeUtils.import(</span>
<a href="#l73.49"></a><span id="l73.49" class="difflineplus">+);</span>
<a href="#l73.50"></a><span id="l73.50" class="difflineplus">+var { EnigmailKeyServer } = ChromeUtils.import(</span>
<a href="#l73.51"></a><span id="l73.51">   &quot;chrome://openpgp/content/modules/keyserver.jsm&quot;</span>
<a href="#l73.52"></a><span id="l73.52" class="difflineminus">-).EnigmailKeyServer;</span>
<a href="#l73.53"></a><span id="l73.53" class="difflineminus">-var EnigmailWks = ChromeUtils.import(</span>
<a href="#l73.54"></a><span id="l73.54" class="difflineplus">+);</span>
<a href="#l73.55"></a><span id="l73.55" class="difflineplus">+var { EnigmailWks } = ChromeUtils.import(</span>
<a href="#l73.56"></a><span id="l73.56">   &quot;chrome://openpgp/content/modules/webKey.jsm&quot;</span>
<a href="#l73.57"></a><span id="l73.57" class="difflineminus">-).EnigmailWks;</span>
<a href="#l73.58"></a><span id="l73.58" class="difflineminus">-var EnigmailSearchCallback = ChromeUtils.import(</span>
<a href="#l73.59"></a><span id="l73.59" class="difflineplus">+);</span>
<a href="#l73.60"></a><span id="l73.60" class="difflineplus">+var { EnigmailSearchCallback } = ChromeUtils.import(</span>
<a href="#l73.61"></a><span id="l73.61">   &quot;chrome://openpgp/content/modules/searchCallback.jsm&quot;</span>
<a href="#l73.62"></a><span id="l73.62" class="difflineminus">-).EnigmailSearchCallback;</span>
<a href="#l73.63"></a><span id="l73.63" class="difflineminus">-var EnigmailCompat = ChromeUtils.import(</span>
<a href="#l73.64"></a><span id="l73.64" class="difflineplus">+);</span>
<a href="#l73.65"></a><span id="l73.65" class="difflineplus">+var { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l73.66"></a><span id="l73.66">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l73.67"></a><span id="l73.67" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l73.68"></a><span id="l73.68" class="difflineminus">-const EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l73.69"></a><span id="l73.69" class="difflineplus">+);</span>
<a href="#l73.70"></a><span id="l73.70" class="difflineplus">+const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l73.71"></a><span id="l73.71">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l73.72"></a><span id="l73.72" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l73.73"></a><span id="l73.73" class="difflineplus">+);</span>
<a href="#l73.74"></a><span id="l73.74"> </span>
<a href="#l73.75"></a><span id="l73.75"> const INPUT = 0;</span>
<a href="#l73.76"></a><span id="l73.76"> const RESULT = 1;</span>
<a href="#l73.77"></a><span id="l73.77"> </span>
<a href="#l73.78"></a><span id="l73.78"> var gUserList;</span>
<a href="#l73.79"></a><span id="l73.79"> var gKeyList;</span>
<a href="#l73.80"></a><span id="l73.80"> var gEnigLastSelectedKeys = null;</span>
<a href="#l73.81"></a><span id="l73.81"> var gKeySortList = null;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeySelection.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeySelection.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -12,18 +12,19 @@</span>
<a href="#l74.4"></a><span id="l74.4"> /* global EnigmailKeyRing: false, EnigGetPref: false, EnigGetTrustLabel: false, EnigSetActive: false, EnigAlert: false */</span>
<a href="#l74.5"></a><span id="l74.5"> /* global EnigSetPref: false, EnigConfirm: false, EnigmailPrefs: false, EnigDownloadKeys: false */</span>
<a href="#l74.6"></a><span id="l74.6"> </span>
<a href="#l74.7"></a><span id="l74.7"> // Initialize enigmailCommon</span>
<a href="#l74.8"></a><span id="l74.8"> EnigInitCommon(&quot;enigmailKeySelection&quot;);</span>
<a href="#l74.9"></a><span id="l74.9"> var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l74.10"></a><span id="l74.10">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l74.11"></a><span id="l74.11"> ).EnigmailFuncs;</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-var EnigmailKey = ChromeUtils.import(&quot;chrome://openpgp/content/modules/key.jsm&quot;)</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineminus">-  .EnigmailKey;</span>
<a href="#l74.14"></a><span id="l74.14" class="difflineplus">+var { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l74.15"></a><span id="l74.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l74.16"></a><span id="l74.16" class="difflineplus">+);</span>
<a href="#l74.17"></a><span id="l74.17"> var EnigmailSearchCallback = ChromeUtils.import(</span>
<a href="#l74.18"></a><span id="l74.18">   &quot;chrome://openpgp/content/modules/searchCallback.jsm&quot;</span>
<a href="#l74.19"></a><span id="l74.19"> ).EnigmailSearchCallback;</span>
<a href="#l74.20"></a><span id="l74.20"> var EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l74.21"></a><span id="l74.21">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l74.22"></a><span id="l74.22"> ).EnigmailCryptoAPI;</span>
<a href="#l74.23"></a><span id="l74.23"> var newEnigmailKeyObj = ChromeUtils.import(</span>
<a href="#l74.24"></a><span id="l74.24">   &quot;chrome://openpgp/content/modules/keyObj.jsm&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -31,36 +31,40 @@ var EnigmailVerify = ChromeUtils.import(</span>
<a href="#l75.4"></a><span id="l75.4">   &quot;chrome://openpgp/content/modules/mimeVerify.jsm&quot;</span>
<a href="#l75.5"></a><span id="l75.5"> ).EnigmailVerify;</span>
<a href="#l75.6"></a><span id="l75.6"> var EnigmailVerifyAttachment = ChromeUtils.import(</span>
<a href="#l75.7"></a><span id="l75.7">   &quot;chrome://openpgp/content/modules/verify.jsm&quot;</span>
<a href="#l75.8"></a><span id="l75.8"> ).EnigmailVerifyAttachment;</span>
<a href="#l75.9"></a><span id="l75.9"> var EnigmailFixExchangeMsg = ChromeUtils.import(</span>
<a href="#l75.10"></a><span id="l75.10">   &quot;chrome://openpgp/content/modules/fixExchangeMsg.jsm&quot;</span>
<a href="#l75.11"></a><span id="l75.11"> ).EnigmailFixExchangeMsg;</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-var EnigmailLog = ChromeUtils.import(&quot;chrome://openpgp/content/modules/log.jsm&quot;)</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineminus">-  .EnigmailLog;</span>
<a href="#l75.14"></a><span id="l75.14" class="difflineplus">+var { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l75.15"></a><span id="l75.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l75.16"></a><span id="l75.16" class="difflineplus">+);</span>
<a href="#l75.17"></a><span id="l75.17"> var EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l75.18"></a><span id="l75.18">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l75.19"></a><span id="l75.19"> ).EnigmailPrefs;</span>
<a href="#l75.20"></a><span id="l75.20" class="difflineminus">-var EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l75.21"></a><span id="l75.21" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l75.22"></a><span id="l75.22" class="difflineplus">+var { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l75.23"></a><span id="l75.23" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l75.24"></a><span id="l75.24" class="difflineplus">+);</span>
<a href="#l75.25"></a><span id="l75.25"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l75.26"></a><span id="l75.26">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l75.27"></a><span id="l75.27"> ).EnigmailLocale;</span>
<a href="#l75.28"></a><span id="l75.28"> var EnigmailFiles = ChromeUtils.import(</span>
<a href="#l75.29"></a><span id="l75.29">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l75.30"></a><span id="l75.30"> ).EnigmailFiles;</span>
<a href="#l75.31"></a><span id="l75.31" class="difflineminus">-var EnigmailKey = ChromeUtils.import(&quot;chrome://openpgp/content/modules/key.jsm&quot;)</span>
<a href="#l75.32"></a><span id="l75.32" class="difflineminus">-  .EnigmailKey;</span>
<a href="#l75.33"></a><span id="l75.33" class="difflineplus">+var { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l75.34"></a><span id="l75.34" class="difflineplus">+  &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l75.35"></a><span id="l75.35" class="difflineplus">+);</span>
<a href="#l75.36"></a><span id="l75.36"> var EnigmailData = ChromeUtils.import(</span>
<a href="#l75.37"></a><span id="l75.37">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l75.38"></a><span id="l75.38"> ).EnigmailData;</span>
<a href="#l75.39"></a><span id="l75.39" class="difflineminus">-var EnigmailApp = ChromeUtils.import(&quot;chrome://openpgp/content/modules/app.jsm&quot;)</span>
<a href="#l75.40"></a><span id="l75.40" class="difflineminus">-  .EnigmailApp;</span>
<a href="#l75.41"></a><span id="l75.41" class="difflineplus">+var { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l75.42"></a><span id="l75.42" class="difflineplus">+  &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l75.43"></a><span id="l75.43" class="difflineplus">+);</span>
<a href="#l75.44"></a><span id="l75.44"> var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l75.45"></a><span id="l75.45">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l75.46"></a><span id="l75.46"> ).EnigmailDialog;</span>
<a href="#l75.47"></a><span id="l75.47"> var EnigmailTimer = ChromeUtils.import(</span>
<a href="#l75.48"></a><span id="l75.48">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l75.49"></a><span id="l75.49"> ).EnigmailTimer;</span>
<a href="#l75.50"></a><span id="l75.50"> var EnigmailWindows = ChromeUtils.import(</span>
<a href="#l75.51"></a><span id="l75.51">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l75.52"></a><span id="l75.52" class="difflineat">@@ -111,18 +115,17 @@ var EnigmailWks = ChromeUtils.import(</span>
<a href="#l75.53"></a><span id="l75.53">   &quot;chrome://openpgp/content/modules/webKey.jsm&quot;</span>
<a href="#l75.54"></a><span id="l75.54"> ).EnigmailWks;</span>
<a href="#l75.55"></a><span id="l75.55"> var EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l75.56"></a><span id="l75.56">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l75.57"></a><span id="l75.57"> ).EnigmailStdlib;</span>
<a href="#l75.58"></a><span id="l75.58"> var EnigmailConfigure = ChromeUtils.import(</span>
<a href="#l75.59"></a><span id="l75.59">   &quot;chrome://openpgp/content/modules/configure.jsm&quot;</span>
<a href="#l75.60"></a><span id="l75.60"> ).EnigmailConfigure;</span>
<a href="#l75.61"></a><span id="l75.61" class="difflineminus">-var Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l75.62"></a><span id="l75.62" class="difflineminus">-  .Services;</span>
<a href="#l75.63"></a><span id="l75.63" class="difflineplus">+var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l75.64"></a><span id="l75.64"> </span>
<a href="#l75.65"></a><span id="l75.65"> var Enigmail;</span>
<a href="#l75.66"></a><span id="l75.66"> if (!Enigmail) {</span>
<a href="#l75.67"></a><span id="l75.67">   Enigmail = {};</span>
<a href="#l75.68"></a><span id="l75.68"> }</span>
<a href="#l75.69"></a><span id="l75.69"> </span>
<a href="#l75.70"></a><span id="l75.70"> Enigmail.getEnigmailSvc = function() {</span>
<a href="#l75.71"></a><span id="l75.71">   return EnigmailCore.getService(window);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgBox.js</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgBox.js</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -4,18 +4,19 @@</span>
<a href="#l76.4"></a><span id="l76.4">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l76.5"></a><span id="l76.5">  */</span>
<a href="#l76.6"></a><span id="l76.6"> </span>
<a href="#l76.7"></a><span id="l76.7"> &quot;use strict&quot;;</span>
<a href="#l76.8"></a><span id="l76.8"> </span>
<a href="#l76.9"></a><span id="l76.9"> var EnigmailClipboard = ChromeUtils.import(</span>
<a href="#l76.10"></a><span id="l76.10">   &quot;chrome://openpgp/content/modules/clipboard.jsm&quot;</span>
<a href="#l76.11"></a><span id="l76.11"> ).EnigmailClipboard;</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-var EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l76.14"></a><span id="l76.14" class="difflineplus">+var { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l76.15"></a><span id="l76.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l76.16"></a><span id="l76.16" class="difflineplus">+);</span>
<a href="#l76.17"></a><span id="l76.17"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l76.18"></a><span id="l76.18">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l76.19"></a><span id="l76.19"> ).EnigmailLocale;</span>
<a href="#l76.20"></a><span id="l76.20"> var EnigmailEvents = ChromeUtils.import(</span>
<a href="#l76.21"></a><span id="l76.21">   &quot;chrome://openpgp/content/modules/events.jsm&quot;</span>
<a href="#l76.22"></a><span id="l76.22"> ).EnigmailEvents;</span>
<a href="#l76.23"></a><span id="l76.23"> </span>
<a href="#l76.24"></a><span id="l76.24"> function onLoad() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgComposeHelper.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -11,29 +11,31 @@</span>
<a href="#l77.4"></a><span id="l77.4">  */</span>
<a href="#l77.5"></a><span id="l77.5"> </span>
<a href="#l77.6"></a><span id="l77.6"> var EnigmailCore = ChromeUtils.import(</span>
<a href="#l77.7"></a><span id="l77.7">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l77.8"></a><span id="l77.8"> ).EnigmailCore;</span>
<a href="#l77.9"></a><span id="l77.9"> var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l77.10"></a><span id="l77.10">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l77.11"></a><span id="l77.11"> ).EnigmailFuncs;</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-var EnigmailLog = ChromeUtils.import(&quot;chrome://openpgp/content/modules/log.jsm&quot;)</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineminus">-  .EnigmailLog;</span>
<a href="#l77.14"></a><span id="l77.14" class="difflineplus">+var { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l77.15"></a><span id="l77.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l77.16"></a><span id="l77.16" class="difflineplus">+);</span>
<a href="#l77.17"></a><span id="l77.17"> var EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l77.18"></a><span id="l77.18">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l77.19"></a><span id="l77.19"> ).EnigmailPrefs;</span>
<a href="#l77.20"></a><span id="l77.20"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l77.21"></a><span id="l77.21">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l77.22"></a><span id="l77.22"> ).EnigmailLocale;</span>
<a href="#l77.23"></a><span id="l77.23"> var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l77.24"></a><span id="l77.24">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l77.25"></a><span id="l77.25"> ).EnigmailDialog;</span>
<a href="#l77.26"></a><span id="l77.26" class="difflineminus">-var EnigmailGpg = ChromeUtils.import(&quot;chrome://openpgp/content/modules/gpg.jsm&quot;)</span>
<a href="#l77.27"></a><span id="l77.27" class="difflineminus">-  .EnigmailGpg;</span>
<a href="#l77.28"></a><span id="l77.28" class="difflineplus">+var { EnigmailGpg } = ChromeUtils.import(</span>
<a href="#l77.29"></a><span id="l77.29" class="difflineplus">+  &quot;chrome://openpgp/content/modules/gpg.jsm&quot;</span>
<a href="#l77.30"></a><span id="l77.30" class="difflineplus">+);</span>
<a href="#l77.31"></a><span id="l77.31"> var EnigmailTrust = ChromeUtils.import(</span>
<a href="#l77.32"></a><span id="l77.32">   &quot;chrome://openpgp/content/modules/trust.jsm&quot;</span>
<a href="#l77.33"></a><span id="l77.33"> ).EnigmailTrust;</span>
<a href="#l77.34"></a><span id="l77.34"> var EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l77.35"></a><span id="l77.35">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l77.36"></a><span id="l77.36"> ).EnigmailKeyRing;</span>
<a href="#l77.37"></a><span id="l77.37"> var EnigmailConstants = ChromeUtils.import(</span>
<a href="#l77.38"></a><span id="l77.38">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -11,46 +11,46 @@</span>
<a href="#l78.4"></a><span id="l78.4"> /*global UpdateAttachmentBucket: false, gContentChanged: true */</span>
<a href="#l78.5"></a><span id="l78.5"> /*global AddAttachments: false, AddAttachment: false, ChangeAttachmentBucketVisibility: false, GetResourceFromUri: false */</span>
<a href="#l78.6"></a><span id="l78.6"> /*global Recipients2CompFields: false, Attachments2CompFields: false, DetermineConvertibility: false, gWindowLocked: false */</span>
<a href="#l78.7"></a><span id="l78.7"> /*global CommandUpdate_MsgCompose: false, gSMFields: false, setSecuritySettings: false, getCurrentAccountKey: false */</span>
<a href="#l78.8"></a><span id="l78.8"> /*global Sendlater3Composing: false, MailServices: false */</span>
<a href="#l78.9"></a><span id="l78.9"> /*global gSendEncrypted: true, gOptionalEncryption: true, gSendSigned: true, gSelectedTechnologyIsPGP: true */</span>
<a href="#l78.10"></a><span id="l78.10"> /*global gIsRelatedToEncryptedOriginal: true, gIsRelatedToSignedOriginal: true, gAttachMyPublicPGPKey: true */</span>
<a href="#l78.11"></a><span id="l78.11"> </span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineminus">-  .Services;</span>
<a href="#l78.14"></a><span id="l78.14" class="difflineminus">-</span>
<a href="#l78.15"></a><span id="l78.15"> var EnigmailCore = ChromeUtils.import(</span>
<a href="#l78.16"></a><span id="l78.16">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l78.17"></a><span id="l78.17"> ).EnigmailCore;</span>
<a href="#l78.18"></a><span id="l78.18"> var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l78.19"></a><span id="l78.19">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l78.20"></a><span id="l78.20"> ).EnigmailFuncs;</span>
<a href="#l78.21"></a><span id="l78.21" class="difflineminus">-var EnigmailLog = ChromeUtils.import(&quot;chrome://openpgp/content/modules/log.jsm&quot;)</span>
<a href="#l78.22"></a><span id="l78.22" class="difflineminus">-  .EnigmailLog;</span>
<a href="#l78.23"></a><span id="l78.23" class="difflineplus">+var { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l78.24"></a><span id="l78.24" class="difflineplus">+  &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l78.25"></a><span id="l78.25" class="difflineplus">+);</span>
<a href="#l78.26"></a><span id="l78.26"> var EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l78.27"></a><span id="l78.27">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l78.28"></a><span id="l78.28"> ).EnigmailPrefs;</span>
<a href="#l78.29"></a><span id="l78.29" class="difflineminus">-var EnigmailOS = ChromeUtils.import(&quot;chrome://openpgp/content/modules/os.jsm&quot;)</span>
<a href="#l78.30"></a><span id="l78.30" class="difflineminus">-  .EnigmailOS;</span>
<a href="#l78.31"></a><span id="l78.31" class="difflineplus">+var { EnigmailOS } = ChromeUtils.import(</span>
<a href="#l78.32"></a><span id="l78.32" class="difflineplus">+  &quot;chrome://openpgp/content/modules/os.jsm&quot;</span>
<a href="#l78.33"></a><span id="l78.33" class="difflineplus">+);</span>
<a href="#l78.34"></a><span id="l78.34"> var EnigmailArmor = ChromeUtils.import(</span>
<a href="#l78.35"></a><span id="l78.35">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l78.36"></a><span id="l78.36"> ).EnigmailArmor;</span>
<a href="#l78.37"></a><span id="l78.37"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l78.38"></a><span id="l78.38">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l78.39"></a><span id="l78.39"> ).EnigmailLocale;</span>
<a href="#l78.40"></a><span id="l78.40"> var EnigmailFiles = ChromeUtils.import(</span>
<a href="#l78.41"></a><span id="l78.41">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l78.42"></a><span id="l78.42"> ).EnigmailFiles;</span>
<a href="#l78.43"></a><span id="l78.43"> var EnigmailData = ChromeUtils.import(</span>
<a href="#l78.44"></a><span id="l78.44">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l78.45"></a><span id="l78.45"> ).EnigmailData;</span>
<a href="#l78.46"></a><span id="l78.46" class="difflineminus">-var EnigmailApp = ChromeUtils.import(&quot;chrome://openpgp/content/modules/app.jsm&quot;)</span>
<a href="#l78.47"></a><span id="l78.47" class="difflineminus">-  .EnigmailApp;</span>
<a href="#l78.48"></a><span id="l78.48" class="difflineplus">+var { EnigmailApp } = ChromeUtils.import(</span>
<a href="#l78.49"></a><span id="l78.49" class="difflineplus">+  &quot;chrome://openpgp/content/modules/app.jsm&quot;</span>
<a href="#l78.50"></a><span id="l78.50" class="difflineplus">+);</span>
<a href="#l78.51"></a><span id="l78.51"> var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l78.52"></a><span id="l78.52">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l78.53"></a><span id="l78.53"> ).EnigmailDialog;</span>
<a href="#l78.54"></a><span id="l78.54"> var EnigmailTimer = ChromeUtils.import(</span>
<a href="#l78.55"></a><span id="l78.55">   &quot;chrome://openpgp/content/modules/timer.jsm&quot;</span>
<a href="#l78.56"></a><span id="l78.56"> ).EnigmailTimer;</span>
<a href="#l78.57"></a><span id="l78.57"> var EnigmailWindows = ChromeUtils.import(</span>
<a href="#l78.58"></a><span id="l78.58">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l78.59"></a><span id="l78.59" class="difflineat">@@ -83,17 +83,17 @@ var EnigmailMime = ChromeUtils.import(</span>
<a href="#l78.60"></a><span id="l78.60">   &quot;chrome://openpgp/content/modules/mime.jsm&quot;</span>
<a href="#l78.61"></a><span id="l78.61"> ).EnigmailMime;</span>
<a href="#l78.62"></a><span id="l78.62"> var EnigmailMsgRead = ChromeUtils.import(</span>
<a href="#l78.63"></a><span id="l78.63">   &quot;chrome://openpgp/content/modules/msgRead.jsm&quot;</span>
<a href="#l78.64"></a><span id="l78.64"> ).EnigmailMsgRead;</span>
<a href="#l78.65"></a><span id="l78.65"> var EnigmailMimeEncrypt = ChromeUtils.import(</span>
<a href="#l78.66"></a><span id="l78.66">   &quot;chrome://openpgp/content/modules/mimeEncrypt.jsm&quot;</span>
<a href="#l78.67"></a><span id="l78.67"> ).EnigmailMimeEncrypt;</span>
<a href="#l78.68"></a><span id="l78.68" class="difflineminus">-var jsmime = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;).jsmime;</span>
<a href="#l78.69"></a><span id="l78.69" class="difflineplus">+var { jsmime } = ChromeUtils.import(&quot;resource:///modules/jsmime.jsm&quot;);</span>
<a href="#l78.70"></a><span id="l78.70"> </span>
<a href="#l78.71"></a><span id="l78.71"> // Account encryption policy values:</span>
<a href="#l78.72"></a><span id="l78.72"> // const kEncryptionPolicy_Never = 0;</span>
<a href="#l78.73"></a><span id="l78.73"> // 'IfPossible' was used by ns4.</span>
<a href="#l78.74"></a><span id="l78.74"> // const kEncryptionPolicy_IfPossible = 1;</span>
<a href="#l78.75"></a><span id="l78.75"> var kEncryptionPolicy_Always = 2;</span>
<a href="#l78.76"></a><span id="l78.76"> </span>
<a href="#l78.77"></a><span id="l78.77"> if (!Enigmail) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -16,37 +16,40 @@ var EnigmailCore = ChromeUtils.import(</span>
<a href="#l79.4"></a><span id="l79.4">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l79.5"></a><span id="l79.5"> ).EnigmailCore;</span>
<a href="#l79.6"></a><span id="l79.6"> var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l79.7"></a><span id="l79.7">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l79.8"></a><span id="l79.8"> ).EnigmailFuncs;</span>
<a href="#l79.9"></a><span id="l79.9"> var EnigmailVerify = ChromeUtils.import(</span>
<a href="#l79.10"></a><span id="l79.10">   &quot;chrome://openpgp/content/modules/mimeVerify.jsm&quot;</span>
<a href="#l79.11"></a><span id="l79.11"> ).EnigmailVerify;</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-var EnigmailLog = ChromeUtils.import(&quot;chrome://openpgp/content/modules/log.jsm&quot;)</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineminus">-  .EnigmailLog;</span>
<a href="#l79.14"></a><span id="l79.14" class="difflineplus">+var { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l79.15"></a><span id="l79.15" class="difflineplus">+  &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l79.16"></a><span id="l79.16" class="difflineplus">+);</span>
<a href="#l79.17"></a><span id="l79.17"> var EnigmailPrefs = ChromeUtils.import(</span>
<a href="#l79.18"></a><span id="l79.18">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l79.19"></a><span id="l79.19"> ).EnigmailPrefs;</span>
<a href="#l79.20"></a><span id="l79.20"> var EnigmailLocale = ChromeUtils.import(</span>
<a href="#l79.21"></a><span id="l79.21">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l79.22"></a><span id="l79.22"> ).EnigmailLocale;</span>
<a href="#l79.23"></a><span id="l79.23"> var EnigmailWindows = ChromeUtils.import(</span>
<a href="#l79.24"></a><span id="l79.24">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l79.25"></a><span id="l79.25"> ).EnigmailWindows;</span>
<a href="#l79.26"></a><span id="l79.26"> var EnigmailDialog = ChromeUtils.import(</span>
<a href="#l79.27"></a><span id="l79.27">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l79.28"></a><span id="l79.28"> ).EnigmailDialog;</span>
<a href="#l79.29"></a><span id="l79.29"> var EnigmailTime = ChromeUtils.import(</span>
<a href="#l79.30"></a><span id="l79.30">   &quot;chrome://openpgp/content/modules/time.jsm&quot;</span>
<a href="#l79.31"></a><span id="l79.31"> ).EnigmailTime;</span>
<a href="#l79.32"></a><span id="l79.32" class="difflineminus">-var EnigmailGpg = ChromeUtils.import(&quot;chrome://openpgp/content/modules/gpg.jsm&quot;)</span>
<a href="#l79.33"></a><span id="l79.33" class="difflineminus">-  .EnigmailGpg;</span>
<a href="#l79.34"></a><span id="l79.34" class="difflineminus">-var EnigmailKey = ChromeUtils.import(&quot;chrome://openpgp/content/modules/key.jsm&quot;)</span>
<a href="#l79.35"></a><span id="l79.35" class="difflineminus">-  .EnigmailKey;</span>
<a href="#l79.36"></a><span id="l79.36" class="difflineplus">+var { EnigmailGpg } = ChromeUtils.import(</span>
<a href="#l79.37"></a><span id="l79.37" class="difflineplus">+  &quot;chrome://openpgp/content/modules/gpg.jsm&quot;</span>
<a href="#l79.38"></a><span id="l79.38" class="difflineplus">+);</span>
<a href="#l79.39"></a><span id="l79.39" class="difflineplus">+var { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l79.40"></a><span id="l79.40" class="difflineplus">+  &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l79.41"></a><span id="l79.41" class="difflineplus">+);</span>
<a href="#l79.42"></a><span id="l79.42"> var EnigmailKeyRing = ChromeUtils.import(</span>
<a href="#l79.43"></a><span id="l79.43">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l79.44"></a><span id="l79.44"> ).EnigmailKeyRing;</span>
<a href="#l79.45"></a><span id="l79.45"> var EnigmailURIs = ChromeUtils.import(</span>
<a href="#l79.46"></a><span id="l79.46">   &quot;chrome://openpgp/content/modules/uris.jsm&quot;</span>
<a href="#l79.47"></a><span id="l79.47"> ).EnigmailURIs;</span>
<a href="#l79.48"></a><span id="l79.48"> var EnigmailConstants = ChromeUtils.import(</span>
<a href="#l79.49"></a><span id="l79.49">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/keyDetailsDlg.js</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/keyDetailsDlg.js</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -12,18 +12,17 @@</span>
<a href="#l80.4"></a><span id="l80.4"> /* global EnigEditKeyExpiry: false, EnigEditKeyTrust: false, EnigChangeKeyPwd: false, EnigRevokeKey: false */</span>
<a href="#l80.5"></a><span id="l80.5"> /* global EnigCreateRevokeCert: false, EnigmailTimer: false */</span>
<a href="#l80.6"></a><span id="l80.6"> </span>
<a href="#l80.7"></a><span id="l80.7"> // from enigmailKeyManager.js:</span>
<a href="#l80.8"></a><span id="l80.8"> /* global keyMgrAddPhoto: false, EnigmailCompat: false */</span>
<a href="#l80.9"></a><span id="l80.9"> </span>
<a href="#l80.10"></a><span id="l80.10"> &quot;use strict&quot;;</span>
<a href="#l80.11"></a><span id="l80.11"> </span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-const Services = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;)</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineminus">-  .Services;</span>
<a href="#l80.14"></a><span id="l80.14" class="difflineplus">+const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l80.15"></a><span id="l80.15"> </span>
<a href="#l80.16"></a><span id="l80.16"> var gKeyId = null;</span>
<a href="#l80.17"></a><span id="l80.17"> var gUserId = null;</span>
<a href="#l80.18"></a><span id="l80.18"> var gKeyList = null;</span>
<a href="#l80.19"></a><span id="l80.19"> var gTreeFuncs = null;</span>
<a href="#l80.20"></a><span id="l80.20"> </span>
<a href="#l80.21"></a><span id="l80.21"> function onLoad() {</span>
<a href="#l80.22"></a><span id="l80.22">   window.arguments[1].refresh = false;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

