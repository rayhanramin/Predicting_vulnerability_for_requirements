<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20990:48fcd36a39e793b2c92a76a0128c936762757b5e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 48fcd36a39e793b2c92a76a0128c936762757b5e" />
<meta property="og:url" content="/comm-central/rev/48fcd36a39e793b2c92a76a0128c936762757b5e" />
<meta property="og:description" content="Bug 1329958 - remove trailing newURI null parameters in comm-central. r=philipp,aleth" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 48fcd36a39e793b2c92a76a0128c936762757b5e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/48fcd36a39e793b2c92a76a0128c936762757b5e">shortlog</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/48fcd36a39e793b2c92a76a0128c936762757b5e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e">files</a> |
changeset |
<a href="/comm-central/raw-rev/48fcd36a39e793b2c92a76a0128c936762757b5e">raw</a>  | <a href="/comm-central/archive/48fcd36a39e793b2c92a76a0128c936762757b5e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1329958">Bug 1329958</a> - remove trailing newURI null parameters in comm-central. r=philipp,aleth
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#113;&#117;&#101;&#122;&#101;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 10 Jan 2017 14:16:22 +0100</td></tr>

<tr>
 <td>changeset 20990</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/48fcd36a39e793b2c92a76a0128c936762757b5e">48fcd36a39e793b2c92a76a0128c936762757b5e</a></td>
</tr>



<tr>
<td>parent 20989</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5f8d4bef1cb09e0bbe8f704d3839ea94bcbf26c6">5f8d4bef1cb09e0bbe8f704d3839ea94bcbf26c6</a>
</td>
</tr>

<tr>
<td>child 20991</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/a5407b27ddc02622e90ca7278c78d8db5145ab77">a5407b27ddc02622e90ca7278c78d8db5145ab77</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=48fcd36a39e793b2c92a76a0128c936762757b5e">12732</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 10 Jan 2017 18:01:38 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@a5407b27ddc0 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a5407b27ddc02622e90ca7278c78d8db5145ab77">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a5407b27ddc02622e90ca7278c78d8db5145ab77&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a5407b27ddc02622e90ca7278c78d8db5145ab77&newProject=comm-central&newRevision=5f8d4bef1cb09e0bbe8f704d3839ea94bcbf26c6&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a5407b27ddc02622e90ca7278c78d8db5145ab77&newProject=comm-central&newRevision=5f8d4bef1cb09e0bbe8f704d3839ea94bcbf26c6&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a5407b27ddc02622e90ca7278c78d8db5145ab77&newProject=comm-central&newRevision=5f8d4bef1cb09e0bbe8f704d3839ea94bcbf26c6&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28philipp%29&revcount=50">philipp</a>, <a href="/comm-central/log?rev=reviewer%28aleth%29&revcount=50">aleth</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1329958">1329958</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1329958">Bug 1329958</a> - remove trailing newURI null parameters in comm-central. r=philipp,aleth</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/calendar-dnd-listener.js">calendar/base/content/calendar-dnd-listener.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/calendar-dnd-listener.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/calendar-dnd-listener.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/calendar-dnd-listener.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/calendar-dnd-listener.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/calendar-dnd-listener.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/preferences/alarms.js">calendar/base/content/preferences/alarms.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/preferences/alarms.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/preferences/alarms.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/preferences/alarms.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/preferences/alarms.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/content/preferences/alarms.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/modules/calAuthUtils.jsm">calendar/base/modules/calAuthUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/modules/calAuthUtils.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/modules/calAuthUtils.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/modules/calAuthUtils.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/modules/calAuthUtils.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/modules/calAuthUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calApplicationUtils.js">calendar/base/src/calApplicationUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calApplicationUtils.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calApplicationUtils.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calApplicationUtils.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calApplicationUtils.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calApplicationUtils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/components/calGoogleCalendar.js">calendar/providers/gdata/components/calGoogleCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/components/calGoogleCalendar.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/components/calGoogleCalendar.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/components/calGoogleCalendar.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/components/calGoogleCalendar.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/components/calGoogleCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-calendar-creation.js">calendar/providers/gdata/content/gdata-calendar-creation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-calendar-creation.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-calendar-creation.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-calendar-creation.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-calendar-creation.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-calendar-creation.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-list-tree.xml">calendar/providers/gdata/content/gdata-list-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-list-tree.xml">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-list-tree.xml">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-list-tree.xml">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-list-tree.xml">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/content/gdata-list-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataRequest.jsm">calendar/providers/gdata/modules/gdataRequest.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataRequest.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataRequest.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataRequest.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataRequest.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataRequest.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataSession.jsm">calendar/providers/gdata/modules/gdataSession.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataSession.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataSession.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataSession.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataSession.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataSession.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataUtils.jsm">calendar/providers/gdata/modules/gdataUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataUtils.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataUtils.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataUtils.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataUtils.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/gdata/modules/gdataUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/wcap/calWcapRequest.js">calendar/providers/wcap/calWcapRequest.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/wcap/calWcapRequest.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/wcap/calWcapRequest.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/wcap/calWcapRequest.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/wcap/calWcapRequest.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/providers/wcap/calWcapRequest.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_alarmservice.js">calendar/test/unit/test_alarmservice.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_alarmservice.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_alarmservice.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_alarmservice.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_alarmservice.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_alarmservice.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_attachment.js">calendar/test/unit/test_attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_attachment.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_attachment.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_attachment.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_attachment.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_attachment.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_calmgr.js">calendar/test/unit/test_calmgr.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_calmgr.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_calmgr.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_calmgr.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_calmgr.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_calmgr.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_deleted_items.js">calendar/test/unit/test_deleted_items.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_deleted_items.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_deleted_items.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_deleted_items.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_deleted_items.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_deleted_items.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_gdata_provider.js">calendar/test/unit/test_gdata_provider.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_gdata_provider.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_gdata_provider.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_gdata_provider.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_gdata_provider.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_gdata_provider.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_webcal.js">calendar/test/unit/test_webcal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_webcal.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_webcal.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_webcal.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_webcal.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/calendar/test/unit/test_webcal.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/components/src/smileProtocolHandler.js">chat/components/src/smileProtocolHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/components/src/smileProtocolHandler.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/components/src/smileProtocolHandler.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/components/src/smileProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/components/src/smileProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/components/src/smileProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/content/convbrowser.xml">chat/content/convbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/content/convbrowser.xml">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/content/convbrowser.xml">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/content/convbrowser.xml">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/content/convbrowser.xml">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/content/convbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/imThemes.jsm">chat/modules/imThemes.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/imThemes.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/imThemes.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/imThemes.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/imThemes.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/imThemes.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/socket.jsm">chat/modules/socket.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/socket.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/socket.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/socket.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/socket.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/chat/modules/socket.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/ComposerCommands.js">editor/ui/composer/content/ComposerCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/ComposerCommands.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/ComposerCommands.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/ComposerCommands.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/ComposerCommands.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/ComposerCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorApplicationOverlay.js">editor/ui/composer/content/editorApplicationOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorApplicationOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorApplicationOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorApplicationOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorApplicationOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorApplicationOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorUtilities.js">editor/ui/composer/content/editorUtilities.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorUtilities.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorUtilities.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorUtilities.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorUtilities.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/editorUtilities.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/publishprefs.js">editor/ui/composer/content/publishprefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/publishprefs.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/publishprefs.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/publishprefs.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/publishprefs.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/composer/content/publishprefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdImageOverlay.js">editor/ui/dialogs/content/EdImageOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdImageOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdImageOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdImageOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdImageOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdImageOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdLinkChecker.js">editor/ui/dialogs/content/EdLinkChecker.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdLinkChecker.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdLinkChecker.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdLinkChecker.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdLinkChecker.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/editor/ui/dialogs/content/EdLinkChecker.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/aboutPanel.xml">im/content/aboutPanel.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/aboutPanel.xml">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/aboutPanel.xml">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/aboutPanel.xml">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/aboutPanel.xml">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/aboutPanel.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/accountWizard.js">im/content/accountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/accountWizard.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/accountWizard.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/accountWizard.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/accountWizard.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/accountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/engineManager.js">im/content/engineManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/engineManager.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/engineManager.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/engineManager.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/engineManager.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/engineManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions-discover.js">im/content/extensions-discover.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions-discover.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions-discover.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions-discover.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions-discover.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions-discover.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions.js">im/content/extensions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/extensions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/nsContextMenu.js">im/content/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/applications.js">im/content/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/themes.js">im/content/preferences/themes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/themes.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/themes.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/themes.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/themes.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/content/preferences/themes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/modules/ibCore.jsm">im/modules/ibCore.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/im/modules/ibCore.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/im/modules/ibCore.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/im/modules/ibCore.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/im/modules/ibCore.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/im/modules/ibCore.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/ldap/xpcom/tests/unit/test_nsLDAPURL.js">ldap/xpcom/tests/unit/test_nsLDAPURL.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/ldap/xpcom/tests/unit/test_nsLDAPURL.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/ldap/xpcom/tests/unit/test_nsLDAPURL.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/ldap/xpcom/tests/unit/test_nsLDAPURL.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/ldap/xpcom/tests/unit/test_nsLDAPURL.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/ldap/xpcom/tests/unit/test_nsLDAPURL.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/contentAreaClick.js">mail/base/content/contentAreaClick.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/contentAreaClick.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/contentAreaClick.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/contentAreaClick.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/contentAreaClick.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/contentAreaClick.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindow.js">mail/base/content/mailWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindow.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindow.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindow.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindow.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgMail3PaneWindow.js">mail/base/content/msgMail3PaneWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgMail3PaneWindow.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgMail3PaneWindow.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgMail3PaneWindow.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgMail3PaneWindow.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/msgMail3PaneWindow.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsContextMenu.js">mail/base/content/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsDragAndDrop.js">mail/base/content/nsDragAndDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsDragAndDrop.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsDragAndDrop.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsDragAndDrop.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsDragAndDrop.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/nsDragAndDrop.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/phishingDetector.js">mail/base/content/phishingDetector.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/phishingDetector.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/phishingDetector.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/phishingDetector.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/phishingDetector.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/phishingDetector.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/specialTabs.js">mail/base/content/specialTabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/specialTabs.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/specialTabs.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/specialTabs.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/specialTabs.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/base/content/specialTabs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/aboutRedirector.js">mail/components/aboutRedirector.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/aboutRedirector.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/aboutRedirector.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/aboutRedirector.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/aboutRedirector.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/aboutRedirector.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardOverlay.js">mail/components/addrbook/content/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardViewOverlay.js">mail/components/addrbook/content/abCardViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardViewOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardViewOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCardViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCommon.js">mail/components/addrbook/content/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCommon.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCommon.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCommon.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCommon.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/addrbook/content/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/cloudfile/content/addAccountDialog.js">mail/components/cloudfile/content/addAccountDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/cloudfile/content/addAccountDialog.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/cloudfile/content/addAccountDialog.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/cloudfile/content/addAccountDialog.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/cloudfile/content/addAccountDialog.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/cloudfile/content/addAccountDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imAccountWizard.js">mail/components/im/content/imAccountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imAccountWizard.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imAccountWizard.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imAccountWizard.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imAccountWizard.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imAccountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imContextMenu.js">mail/components/im/content/imContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imContextMenu.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imContextMenu.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imContextMenu.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imContextMenu.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/im/content/imContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/newmailaccount/content/accountProvisioner.js">mail/components/newmailaccount/content/accountProvisioner.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/newmailaccount/content/accountProvisioner.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/newmailaccount/content/accountProvisioner.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/newmailaccount/content/accountProvisioner.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/newmailaccount/content/accountProvisioner.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/newmailaccount/content/accountProvisioner.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/chat.js">mail/components/preferences/chat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/chat.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/chat.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/chat.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/chat.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/chat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/permissions.js">mail/components/preferences/permissions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/permissions.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/permissions.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/permissions.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/permissions.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/components/preferences/permissions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/content-policy/test-general-content-policy.js">mail/test/mozmill/content-policy/test-general-content-policy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/content-policy/test-general-content-policy.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/content-policy/test-general-content-policy.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/content-policy/test-general-content-policy.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/content-policy/test-general-content-policy.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/content-policy/test-general-content-policy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/newmailaccount/test-newmailaccount.js">mail/test/mozmill/newmailaccount/test-newmailaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/newmailaccount/test-newmailaccount.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/newmailaccount/test-newmailaccount.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/newmailaccount/test-newmailaccount.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/newmailaccount/test-newmailaccount.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/newmailaccount/test-newmailaccount.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/shared-modules/test-nntp-helpers.js">mail/test/mozmill/shared-modules/test-nntp-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/shared-modules/test-nntp-helpers.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/shared-modules/test-nntp-helpers.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/shared-modules/test-nntp-helpers.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/shared-modules/test-nntp-helpers.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/mozmill/shared-modules/test-nntp-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/addrbook/prefs/content/pref-directory-add.js">mailnews/addrbook/prefs/content/pref-directory-add.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/addrbook/prefs/content/pref-directory-add.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/addrbook/prefs/content/pref-directory-add.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/addrbook/prefs/content/pref-directory-add.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/addrbook/prefs/content/pref-directory-add.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/addrbook/prefs/content/pref-directory-add.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js">mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/util.js">mailnews/base/prefs/content/accountcreation/util.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/util.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/util.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/util.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/util.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/prefs/content/accountcreation/util.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/src/nsMailNewsCommandLineHandler.js">mailnews/base/src/nsMailNewsCommandLineHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/src/nsMailNewsCommandLineHandler.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/src/nsMailNewsCommandLineHandler.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/src/nsMailNewsCommandLineHandler.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/src/nsMailNewsCommandLineHandler.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/src/nsMailNewsCommandLineHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_accountMigration.js">mailnews/base/test/unit/test_accountMigration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_accountMigration.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_accountMigration.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_accountMigration.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_accountMigration.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_accountMigration.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_nsIMsgContentPolicy.js">mailnews/base/test/unit/test_nsIMsgContentPolicy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_nsIMsgContentPolicy.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_nsIMsgContentPolicy.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_nsIMsgContentPolicy.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_nsIMsgContentPolicy.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_nsIMsgContentPolicy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_searchChaining.js">mailnews/base/test/unit/test_searchChaining.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_searchChaining.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_searchChaining.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_searchChaining.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_searchChaining.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/test/unit/test_searchChaining.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/util/mailnewsMigrator.js">mailnews/base/util/mailnewsMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/util/mailnewsMigrator.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/util/mailnewsMigrator.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/util/mailnewsMigrator.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/util/mailnewsMigrator.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/base/util/mailnewsMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_mailtoURL.js">mailnews/compose/test/unit/test_mailtoURL.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_mailtoURL.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_mailtoURL.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_mailtoURL.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_mailtoURL.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_mailtoURL.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpProtocols.js">mailnews/compose/test/unit/test_smtpProtocols.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpProtocols.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpProtocols.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpProtocols.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpProtocols.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpProtocols.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpURL.js">mailnews/compose/test/unit/test_smtpURL.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpURL.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpURL.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpURL.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpURL.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/compose/test/unit/test_smtpURL.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/Feed.js">mailnews/extensions/newsblog/content/Feed.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/Feed.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/Feed.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/Feed.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/Feed.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/Feed.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedItem.js">mailnews/extensions/newsblog/content/FeedItem.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedItem.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedItem.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedItem.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedItem.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedItem.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedUtils.jsm">mailnews/extensions/newsblog/content/FeedUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedUtils.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedUtils.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedUtils.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedUtils.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/FeedUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-parser.js">mailnews/extensions/newsblog/content/feed-parser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-parser.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-parser.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-parser.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-parser.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-parser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-subscriptions.js">mailnews/extensions/newsblog/content/feed-subscriptions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-subscriptions.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-subscriptions.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-subscriptions.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-subscriptions.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/feed-subscriptions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/newsblogOverlay.js">mailnews/extensions/newsblog/content/newsblogOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/newsblogOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/newsblogOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/newsblogOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/newsblogOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/newsblog/content/newsblogOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/smime/content/certFetchingStatus.js">mailnews/extensions/smime/content/certFetchingStatus.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/smime/content/certFetchingStatus.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/smime/content/certFetchingStatus.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/smime/content/certFetchingStatus.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/smime/content/certFetchingStatus.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/extensions/smime/content/certFetchingStatus.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/head_server.js">mailnews/imap/test/unit/head_server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/head_server.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/head_server.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/head_server.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/head_server.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/head_server.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_compactOfflineStore.js">mailnews/imap/test/unit/test_compactOfflineStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_compactOfflineStore.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_compactOfflineStore.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_compactOfflineStore.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_compactOfflineStore.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_compactOfflineStore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_dontStatNoSelect.js">mailnews/imap/test/unit/test_dontStatNoSelect.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_dontStatNoSelect.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_dontStatNoSelect.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_dontStatNoSelect.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_dontStatNoSelect.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_dontStatNoSelect.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_downloadOffline.js">mailnews/imap/test/unit/test_downloadOffline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_downloadOffline.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_downloadOffline.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_downloadOffline.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_downloadOffline.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_downloadOffline.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAttachmentSaves.js">mailnews/imap/test/unit/test_imapAttachmentSaves.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAttachmentSaves.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAttachmentSaves.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAttachmentSaves.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAttachmentSaves.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAttachmentSaves.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAutoSync.js">mailnews/imap/test/unit/test_imapAutoSync.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAutoSync.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAutoSync.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAutoSync.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAutoSync.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapAutoSync.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapContentLength.js">mailnews/imap/test/unit/test_imapContentLength.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapContentLength.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapContentLength.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapContentLength.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapContentLength.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapContentLength.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapCopyTimeout.js">mailnews/imap/test/unit/test_imapCopyTimeout.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapCopyTimeout.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapCopyTimeout.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapCopyTimeout.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapCopyTimeout.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapCopyTimeout.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapFlagChange.js">mailnews/imap/test/unit/test_imapFlagChange.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapFlagChange.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapFlagChange.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapFlagChange.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapFlagChange.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapFlagChange.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHdrChunking.js">mailnews/imap/test/unit/test_imapHdrChunking.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHdrChunking.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHdrChunking.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHdrChunking.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHdrChunking.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHdrChunking.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHighWater.js">mailnews/imap/test/unit/test_imapHighWater.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHighWater.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHighWater.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHighWater.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHighWater.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapHighWater.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProtocols.js">mailnews/imap/test/unit/test_imapProtocols.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProtocols.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProtocols.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProtocols.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProtocols.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProtocols.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProxy.js">mailnews/imap/test/unit/test_imapProxy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProxy.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProxy.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProxy.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProxy.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapProxy.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">mailnews/imap/test/unit/test_imapStoreMsgOffline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_largeOfflineStore.js">mailnews/imap/test/unit/test_largeOfflineStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_largeOfflineStore.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_largeOfflineStore.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_largeOfflineStore.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_largeOfflineStore.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_largeOfflineStore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlinePlayback.js">mailnews/imap/test/unit/test_offlinePlayback.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlinePlayback.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlinePlayback.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlinePlayback.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlinePlayback.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlinePlayback.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlineStoreLocking.js">mailnews/imap/test/unit/test_offlineStoreLocking.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlineStoreLocking.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlineStoreLocking.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlineStoreLocking.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlineStoreLocking.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_offlineStoreLocking.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_saveTemplate.js">mailnews/imap/test/unit/test_saveTemplate.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_saveTemplate.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_saveTemplate.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_saveTemplate.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_saveTemplate.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_saveTemplate.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_syncChanges.js">mailnews/imap/test/unit/test_syncChanges.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_syncChanges.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_syncChanges.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_syncChanges.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_syncChanges.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/imap/test/unit/test_syncChanges.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxContentLength.js">mailnews/local/test/unit/test_mailboxContentLength.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxContentLength.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxContentLength.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxContentLength.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxContentLength.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxContentLength.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxProtocol.js">mailnews/local/test/unit/test_mailboxProtocol.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxProtocol.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxProtocol.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxProtocol.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxProtocol.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/local/test/unit/test_mailboxProtocol.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/head_server_setup.js">mailnews/news/test/unit/head_server_setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/head_server_setup.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/head_server_setup.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/head_server_setup.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/head_server_setup.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/head_server_setup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_bug37465.js">mailnews/news/test/unit/test_bug37465.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_bug37465.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_bug37465.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_bug37465.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_bug37465.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_bug37465.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpContentLength.js">mailnews/news/test/unit/test_nntpContentLength.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpContentLength.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpContentLength.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpContentLength.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpContentLength.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpContentLength.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpProtocols.js">mailnews/news/test/unit/test_nntpProtocols.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpProtocols.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpProtocols.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpProtocols.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpProtocols.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpProtocols.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpUrl.js">mailnews/news/test/unit/test_nntpUrl.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpUrl.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpUrl.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpUrl.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpUrl.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_nntpUrl.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_server.js">mailnews/news/test/unit/test_server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_server.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_server.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_server.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_server.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_server.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_uriParser.js">mailnews/news/test/unit/test_uriParser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_uriParser.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_uriParser.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_uriParser.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_uriParser.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/news/test/unit/test_uriParser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/test/resources/messageInjection.js">mailnews/test/resources/messageInjection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/test/resources/messageInjection.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/test/resources/messageInjection.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/test/resources/messageInjection.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/test/resources/messageInjection.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/mailnews/test/resources/messageInjection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/mailNavigatorOverlay.js">suite/browser/mailNavigatorOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/mailNavigatorOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/mailNavigatorOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/mailNavigatorOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/mailNavigatorOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/mailNavigatorOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/navigator.js">suite/browser/navigator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/navigator.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/navigator.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/navigator.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/navigator.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/navigator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/pageinfo/pageInfo.js">suite/browser/pageinfo/pageInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/pageinfo/pageInfo.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/pageinfo/pageInfo.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/pageinfo/pageInfo.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/pageinfo/pageInfo.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/pageinfo/pageInfo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/tabbrowser.xml">suite/browser/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug413915.js">suite/browser/test/browser/browser_bug413915.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug413915.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug413915.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug413915.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug413915.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug413915.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug623155.js">suite/browser/test/browser/browser_bug623155.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug623155.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug623155.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug623155.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug623155.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/browser/test/browser/browser_bug623155.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bindings/notification.xml">suite/common/bindings/notification.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bindings/notification.xml">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bindings/notification.xml">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bindings/notification.xml">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bindings/notification.xml">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bindings/notification.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/bookmarksManager.js">suite/common/bookmarks/bookmarksManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/bookmarksManager.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/bookmarksManager.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/bookmarksManager.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/bookmarksManager.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/bookmarksManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/editBookmarkOverlay.js">suite/common/bookmarks/editBookmarkOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/editBookmarkOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/editBookmarkOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/editBookmarkOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/editBookmarkOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/bookmarks/editBookmarkOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/dataman.js">suite/common/dataman/dataman.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/dataman.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/dataman.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/dataman.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/dataman.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/dataman.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/tests/browser_dataman_basics.js">suite/common/dataman/tests/browser_dataman_basics.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/tests/browser_dataman_basics.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/tests/browser_dataman_basics.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/tests/browser_dataman_basics.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/tests/browser_dataman_basics.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/dataman/tests/browser_dataman_basics.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/downloads/downloadmanager.js">suite/common/downloads/downloadmanager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/downloads/downloadmanager.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/downloads/downloadmanager.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/downloads/downloadmanager.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/downloads/downloadmanager.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/downloads/downloadmanager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/history/history.js">suite/common/history/history.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/history/history.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/history/history.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/history/history.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/history/history.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/history/history.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/nsContextMenu.js">suite/common/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/cookieViewer.js">suite/common/permissions/cookieViewer.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/cookieViewer.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/cookieViewer.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/cookieViewer.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/cookieViewer.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/cookieViewer.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/permissionsManager.js">suite/common/permissions/permissionsManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/permissionsManager.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/permissionsManager.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/permissionsManager.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/permissionsManager.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/permissions/permissionsManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-applications.js">suite/common/pref/pref-applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-applications.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-applications.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-applications.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-applications.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-offlineapps.js">suite/common/pref/pref-offlineapps.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-offlineapps.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-offlineapps.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-offlineapps.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-offlineapps.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-offlineapps.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-popups.js">suite/common/pref/pref-popups.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-popups.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-popups.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-popups.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-popups.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/pref-popups.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/preferences.js">suite/common/pref/preferences.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/preferences.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/preferences.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/preferences.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/preferences.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/pref/preferences.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsAbout.js">suite/common/src/nsAbout.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsAbout.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsAbout.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsAbout.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsAbout.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsAbout.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsGopherProtocolStubHandler.js">suite/common/src/nsGopherProtocolStubHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsGopherProtocolStubHandler.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsGopherProtocolStubHandler.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsGopherProtocolStubHandler.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsGopherProtocolStubHandler.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsGopherProtocolStubHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSessionStore.js">suite/common/src/nsSessionStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSessionStore.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSessionStore.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSessionStore.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSessionStore.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSessionStore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSuiteGlue.js">suite/common/src/nsSuiteGlue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSuiteGlue.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSuiteGlue.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSuiteGlue.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSuiteGlue.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/src/nsSuiteGlue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/tests/browser/browser_491168.js">suite/common/tests/browser/browser_491168.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/tests/browser/browser_491168.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/tests/browser/browser_491168.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/tests/browser/browser_491168.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/tests/browser/browser_491168.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/tests/browser/browser_491168.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/utilityOverlay.js">suite/common/utilityOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/utilityOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/utilityOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/utilityOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/utilityOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/common/utilityOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedConverter.js">suite/feeds/src/FeedConverter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedConverter.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedConverter.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedConverter.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedConverter.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedConverter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedWriter.js">suite/feeds/src/FeedWriter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedWriter.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedWriter.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedWriter.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedWriter.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/feeds/src/FeedWriter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCardOverlay.js">suite/mailnews/addrbook/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCommon.js">suite/mailnews/addrbook/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCommon.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCommon.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCommon.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCommon.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/addrbook/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/compose/MsgComposeCommands.js">suite/mailnews/compose/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/compose/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/compose/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/compose/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/compose/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/compose/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/mailWindowOverlay.js">suite/mailnews/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/msgHdrViewOverlay.js">suite/mailnews/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/nsDragAndDrop.js">suite/mailnews/nsDragAndDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/nsDragAndDrop.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/nsDragAndDrop.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/nsDragAndDrop.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/nsDragAndDrop.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/nsDragAndDrop.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/phishingDetector.js">suite/mailnews/phishingDetector.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/phishingDetector.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/phishingDetector.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/phishingDetector.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/phishingDetector.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/mailnews/phishingDetector.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/WindowsJumpLists.jsm">suite/modules/WindowsJumpLists.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/WindowsJumpLists.jsm">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/WindowsJumpLists.jsm">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/WindowsJumpLists.jsm">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/WindowsJumpLists.jsm">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/WindowsJumpLists.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/test/unit/test_browser_sanitizer.js">suite/modules/test/unit/test_browser_sanitizer.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/test/unit/test_browser_sanitizer.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/test/unit/test_browser_sanitizer.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/test/unit/test_browser_sanitizer.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/test/unit/test_browser_sanitizer.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/modules/test/unit/test_browser_sanitizer.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/src/smileApplication.js">suite/smile/src/smileApplication.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/src/smileApplication.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/src/smileApplication.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/src/smileApplication.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/src/smileApplication.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/src/smileApplication.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/test/browser_Bookmarks.js">suite/smile/test/browser_Bookmarks.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/test/browser_Bookmarks.js">file</a> |
<a href="/comm-central/annotate/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/test/browser_Bookmarks.js">annotate</a> |
<a href="/comm-central/diff/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/test/browser_Bookmarks.js">diff</a> |
<a href="/comm-central/comparison/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/test/browser_Bookmarks.js">comparison</a> |
<a href="/comm-central/log/48fcd36a39e793b2c92a76a0128c936762757b5e/suite/smile/test/browser_Bookmarks.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-dnd-listener.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-dnd-listener.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -276,17 +276,17 @@ calDNDBaseObserver.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">                 }</span>
<a href="#l1.5"></a><span id="l1.5">                 finally {</span>
<a href="#l1.6"></a><span id="l1.6">                     inputStream.close();</span>
<a href="#l1.7"></a><span id="l1.7">                 }</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">                 break;</span>
<a href="#l1.10"></a><span id="l1.10">             case &quot;application/x-moz-file-promise&quot;:</span>
<a href="#l1.11"></a><span id="l1.11">             case &quot;text/x-moz-url&quot;:</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-                var uri = Services.io.newURI(data.toString(), null, null);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+                var uri = Services.io.newURI(data.toString());</span>
<a href="#l1.14"></a><span id="l1.14">                 var loader = Components.classes[&quot;@mozilla.org/network/unichar-stream-loader;1&quot;]</span>
<a href="#l1.15"></a><span id="l1.15">                              .createInstance(Components.interfaces.nsIUnicharStreamLoader);</span>
<a href="#l1.16"></a><span id="l1.16">                 var channel = Services.io.newChannelFromURI2(uri,</span>
<a href="#l1.17"></a><span id="l1.17">                                                              null,</span>
<a href="#l1.18"></a><span id="l1.18">                                                              Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l1.19"></a><span id="l1.19">                                                              null,</span>
<a href="#l1.20"></a><span id="l1.20">                                                              Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l1.21"></a><span id="l1.21">                                                              Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/preferences/alarms.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/preferences/alarms.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -101,17 +101,17 @@ var gAlarmsPane = {</span>
<a href="#l2.4"></a><span id="l2.4">     previewAlarm: function() {</span>
<a href="#l2.5"></a><span id="l2.5">         let soundUrl = document.getElementById(&quot;alarmSoundFileField&quot;).value;</span>
<a href="#l2.6"></a><span id="l2.6">         let soundIfc = Components.classes[&quot;@mozilla.org/sound;1&quot;]</span>
<a href="#l2.7"></a><span id="l2.7">                             .createInstance(Components.interfaces.nsISound);</span>
<a href="#l2.8"></a><span id="l2.8">         let url;</span>
<a href="#l2.9"></a><span id="l2.9">         try {</span>
<a href="#l2.10"></a><span id="l2.10">             soundIfc.init();</span>
<a href="#l2.11"></a><span id="l2.11">             if (soundUrl &amp;&amp; soundUrl.length &amp;&amp; soundUrl.length &gt; 0) {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                url = Services.io.newURI(soundUrl, null, null);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                url = Services.io.newURI(soundUrl);</span>
<a href="#l2.14"></a><span id="l2.14">                 soundIfc.play(url);</span>
<a href="#l2.15"></a><span id="l2.15">             } else {</span>
<a href="#l2.16"></a><span id="l2.16">                 soundIfc.beep();</span>
<a href="#l2.17"></a><span id="l2.17">             }</span>
<a href="#l2.18"></a><span id="l2.18">         } catch (ex) {</span>
<a href="#l2.19"></a><span id="l2.19">             dump(&quot;alarms.js previewAlarm Exception caught! &quot; + ex + &quot;\n&quot;);</span>
<a href="#l2.20"></a><span id="l2.20">         }</span>
<a href="#l2.21"></a><span id="l2.21">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/modules/calAuthUtils.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/modules/calAuthUtils.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -72,17 +72,17 @@ cal.auth = {</span>
<a href="#l3.4"></a><span id="l3.4">      * manager functions require it. This is a fallback for compatibility only</span>
<a href="#l3.5"></a><span id="l3.5">      * and should be removed a few versions after Lightning 5.5</span>
<a href="#l3.6"></a><span id="l3.6">      *</span>
<a href="#l3.7"></a><span id="l3.7">      * @param aOrigin       The hostname or origin to check</span>
<a href="#l3.8"></a><span id="l3.8">      * @return              The origin uri</span>
<a href="#l3.9"></a><span id="l3.9">      */</span>
<a href="#l3.10"></a><span id="l3.10">     _ensureOrigin: function(aOrigin) {</span>
<a href="#l3.11"></a><span id="l3.11">         try {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-            return Services.io.newURI(aOrigin, null, null).spec;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+            return Services.io.newURI(aOrigin).spec;</span>
<a href="#l3.14"></a><span id="l3.14">         } catch (e) {</span>
<a href="#l3.15"></a><span id="l3.15">             return &quot;https://&quot; + aOrigin;</span>
<a href="#l3.16"></a><span id="l3.16">         }</span>
<a href="#l3.17"></a><span id="l3.17">     },</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">     /**</span>
<a href="#l3.20"></a><span id="l3.20">      * Helper to insert/update an entry to the password manager.</span>
<a href="#l3.21"></a><span id="l3.21">      *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/src/calApplicationUtils.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/src/calApplicationUtils.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -27,17 +27,17 @@ function launchBrowser(url, event) {</span>
<a href="#l4.4"></a><span id="l4.4">         Components.utils.reportError(&quot;launchBrowser: &quot; +</span>
<a href="#l4.5"></a><span id="l4.5">                                      &quot;Invalid URL provided: &quot; + url +</span>
<a href="#l4.6"></a><span id="l4.6">                                      &quot; Only http:// and https:// URLs are valid.&quot;);</span>
<a href="#l4.7"></a><span id="l4.7">         return;</span>
<a href="#l4.8"></a><span id="l4.8">     }</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10">     Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l4.11"></a><span id="l4.11">               .getService(Components.interfaces.nsIExternalProtocolService)</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-              .loadUrl(Services.io.newURI(url, null, null));</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+              .loadUrl(Services.io.newURI(url));</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15">     // Make sure that any default click handlers don't do anything, we have taken</span>
<a href="#l4.16"></a><span id="l4.16">     // care of all processing</span>
<a href="#l4.17"></a><span id="l4.17">     if (event) {</span>
<a href="#l4.18"></a><span id="l4.18">         event.stopPropagation();</span>
<a href="#l4.19"></a><span id="l4.19">         event.preventDefault();</span>
<a href="#l4.20"></a><span id="l4.20">     }</span>
<a href="#l4.21"></a><span id="l4.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -71,17 +71,17 @@ calTimezoneService.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">     register: function() {},</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6">     // calIStartupService:</span>
<a href="#l5.7"></a><span id="l5.7">     startup: function(aCompleteListener) {</span>
<a href="#l5.8"></a><span id="l5.8">         function fetchJSON(aURL) {</span>
<a href="#l5.9"></a><span id="l5.9">             cal.LOG(&quot;[calTimezoneService] Loading &quot; + aURL);</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">             return new Promise((resolve, reject) =&gt; {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                let uri = Services.io.newURI(aURL, null, null);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                let uri = Services.io.newURI(aURL);</span>
<a href="#l5.14"></a><span id="l5.14">                 let channel = Services.io.newChannelFromURI2(uri,</span>
<a href="#l5.15"></a><span id="l5.15">                                                              null,</span>
<a href="#l5.16"></a><span id="l5.16">                                                              Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l5.17"></a><span id="l5.17">                                                              null,</span>
<a href="#l5.18"></a><span id="l5.18">                                                              Components.interfaces.nsILoadInfo.SEC_REQUIRE_SAME_ORIGIN_DATA_INHERITS,</span>
<a href="#l5.19"></a><span id="l5.19">                                                              Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">                 NetUtil.asyncFetch(channel, (inputStream, status) =&gt; {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -398,17 +398,17 @@ function calPrint() {</span>
<a href="#l6.4"></a><span id="l6.4"> /**</span>
<a href="#l6.5"></a><span id="l6.5">  * Takes a string and returns an nsIURI</span>
<a href="#l6.6"></a><span id="l6.6">  *</span>
<a href="#l6.7"></a><span id="l6.7">  * @param aUriString  the string of the address to for the spec of the nsIURI</span>
<a href="#l6.8"></a><span id="l6.8">  *</span>
<a href="#l6.9"></a><span id="l6.9">  * @returns  an nsIURI whose spec is aUriString</span>
<a href="#l6.10"></a><span id="l6.10">  */</span>
<a href="#l6.11"></a><span id="l6.11"> function makeURL(aUriString) {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    return Services.io.newURI(aUriString, null, null);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    return Services.io.newURI(aUriString);</span>
<a href="#l6.14"></a><span id="l6.14"> }</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16"> /**</span>
<a href="#l6.17"></a><span id="l6.17">  * Returns a calIDateTime that corresponds to the current time in the user's</span>
<a href="#l6.18"></a><span id="l6.18">  * default timezone.</span>
<a href="#l6.19"></a><span id="l6.19">  */</span>
<a href="#l6.20"></a><span id="l6.20"> function now() {</span>
<a href="#l6.21"></a><span id="l6.21">     let date = cal.jsDateToDateTime(new Date());</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/providers/gdata/components/calGoogleCalendar.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/providers/gdata/components/calGoogleCalendar.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -141,17 +141,17 @@ calGoogleCalendar.prototype = {</span>
<a href="#l7.4"></a><span id="l7.4">             // Users that installed 1.0 had an issue where secondary calendars</span>
<a href="#l7.5"></a><span id="l7.5">             // were migrated to their own session. This code fixes that and</span>
<a href="#l7.6"></a><span id="l7.6">             // should be removed once 1.0.1 has been out for a while.</span>
<a href="#l7.7"></a><span id="l7.7">             let googleUser = Preferences.get(&quot;calendar.google.calPrefs.&quot; + fullUser + &quot;.googleUser&quot;);</span>
<a href="#l7.8"></a><span id="l7.8">             if (googleUser &amp;&amp; googleUser != fullUser) {</span>
<a href="#l7.9"></a><span id="l7.9">                 let newUri = &quot;googleapi://&quot; + googleUser + &quot;/&quot; + path;</span>
<a href="#l7.10"></a><span id="l7.10">                 cal.LOG(&quot;[calGoogleCalendar] Migrating url format from &quot; + aUri.spec + &quot; to &quot; + newUri);</span>
<a href="#l7.11"></a><span id="l7.11">                 this.setProperty(&quot;uri&quot;, newUri);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-                this.mUri = Services.io.newURI(newUri, null, null);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+                this.mUri = Services.io.newURI(newUri);</span>
<a href="#l7.14"></a><span id="l7.14">             }</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16">             // Unit tests will use a local uri, if the magic parameter is passed.</span>
<a href="#l7.17"></a><span id="l7.17">             let port = parameters.get(&quot;testport&quot;);</span>
<a href="#l7.18"></a><span id="l7.18">             if (port) {</span>
<a href="#l7.19"></a><span id="l7.19">                 cal.LOG(&quot;[calGoogleCalendar] Redirecting request to test port &quot; + port);</span>
<a href="#l7.20"></a><span id="l7.20">                 API_BASE.EVENTS = &quot;http://localhost:&quot; + port + &quot;/calendar/v3/&quot;;</span>
<a href="#l7.21"></a><span id="l7.21">                 API_BASE.TASKS = &quot;http://localhost:&quot; + port + &quot;/tasks/v1/&quot;;</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -174,17 +174,17 @@ calGoogleCalendar.prototype = {</span>
<a href="#l7.23"></a><span id="l7.23">                 if (googleUser &amp;&amp; googleUser == this.mCalendarName) {</span>
<a href="#l7.24"></a><span id="l7.24">                     this.mTasklistName = &quot;@default&quot;;</span>
<a href="#l7.25"></a><span id="l7.25">                     newUri += &quot;&amp;tasks=%40default&quot;;</span>
<a href="#l7.26"></a><span id="l7.26">                 }</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28">                 cal.LOG(&quot;[calGoogleCalendar] Migrating url format from &quot; + aUri.spec +</span>
<a href="#l7.29"></a><span id="l7.29">                         &quot; to &quot; + newUri);</span>
<a href="#l7.30"></a><span id="l7.30">                 this.setProperty(&quot;uri&quot;, newUri);</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-                this.mUri = Services.io.newURI(newUri, null, null);</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+                this.mUri = Services.io.newURI(newUri);</span>
<a href="#l7.33"></a><span id="l7.33">             }</span>
<a href="#l7.34"></a><span id="l7.34">         }</span>
<a href="#l7.35"></a><span id="l7.35"> </span>
<a href="#l7.36"></a><span id="l7.36">         if (this.id &amp;&amp; this.uri) {</span>
<a href="#l7.37"></a><span id="l7.37">             this.ensureSession();</span>
<a href="#l7.38"></a><span id="l7.38">         }</span>
<a href="#l7.39"></a><span id="l7.39"> </span>
<a href="#l7.40"></a><span id="l7.40">         return this.mUri;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/providers/gdata/content/gdata-calendar-creation.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/providers/gdata/content/gdata-calendar-creation.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -176,28 +176,28 @@ CuImport(&quot;resource://gre/modules/Promise</span>
<a href="#l8.4"></a><span id="l8.4">                     if ((match = spec.match(/tasks=([^&amp;]*)/))) {</span>
<a href="#l8.5"></a><span id="l8.5">                         existing.add(decodeURIComponent(match[0]));</span>
<a href="#l8.6"></a><span id="l8.6">                     }</span>
<a href="#l8.7"></a><span id="l8.7">                 }</span>
<a href="#l8.8"></a><span id="l8.8">             }</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">             let taskcals = tasksLists.map(function(tasklist) {</span>
<a href="#l8.11"></a><span id="l8.11">                 let uri = &quot;googleapi://&quot; + session.id + &quot;/?tasks=&quot; + encodeURIComponent(tasklist.id);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-                let calendar = calMgr.createCalendar(&quot;gdata&quot;, Services.io.newURI(uri, null, null));</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+                let calendar = calMgr.createCalendar(&quot;gdata&quot;, Services.io.newURI(uri));</span>
<a href="#l8.14"></a><span id="l8.14">                 calendar.id = cal.getUUID();</span>
<a href="#l8.15"></a><span id="l8.15">                 calendar.setProperty(&quot;color&quot;, cal.hashColor(tasklist.title));</span>
<a href="#l8.16"></a><span id="l8.16">                 calendar.name = tasklist.title;</span>
<a href="#l8.17"></a><span id="l8.17">                 if (existing.has(&quot;tasks=&quot; + tasklist.id)) {</span>
<a href="#l8.18"></a><span id="l8.18">                     calendar.readOnly = true;</span>
<a href="#l8.19"></a><span id="l8.19">                 }</span>
<a href="#l8.20"></a><span id="l8.20">                 return calendar;</span>
<a href="#l8.21"></a><span id="l8.21">             });</span>
<a href="#l8.22"></a><span id="l8.22">             let calcals = calendarList.map(function(calendarEntry) {</span>
<a href="#l8.23"></a><span id="l8.23">                 let uri = &quot;googleapi://&quot; + session.id + &quot;/?calendar=&quot; + encodeURIComponent(calendarEntry.id);</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-                let calendar = calMgr.createCalendar(&quot;gdata&quot;, Services.io.newURI(uri, null, null));</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+                let calendar = calMgr.createCalendar(&quot;gdata&quot;, Services.io.newURI(uri));</span>
<a href="#l8.26"></a><span id="l8.26">                 calendar.name = calendarEntry.summary;</span>
<a href="#l8.27"></a><span id="l8.27">                 calendar.id = cal.getUUID();</span>
<a href="#l8.28"></a><span id="l8.28">                 calendar.setProperty(&quot;color&quot;, calendarEntry.backgroundColor);</span>
<a href="#l8.29"></a><span id="l8.29">                 if (existing.has(&quot;calendar=&quot; + calendarEntry.id)) {</span>
<a href="#l8.30"></a><span id="l8.30">                     calendar.readOnly = true;</span>
<a href="#l8.31"></a><span id="l8.31">                 }</span>
<a href="#l8.32"></a><span id="l8.32">                 return calendar;</span>
<a href="#l8.33"></a><span id="l8.33">             });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/providers/gdata/content/gdata-list-tree.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/providers/gdata/content/gdata-list-tree.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -66,29 +66,29 @@</span>
<a href="#l9.4"></a><span id="l9.4">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l9.5"></a><span id="l9.5">         this.tree.view = this;</span>
<a href="#l9.6"></a><span id="l9.6">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">       &lt;property name=&quot;mockCalendarHeader&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l9.9"></a><span id="l9.9">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l9.10"></a><span id="l9.10">           let calmgr = cal.getCalendarManager();</span>
<a href="#l9.11"></a><span id="l9.11">           let uri = &quot;dummy://calendar&quot;;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-          let mem = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(uri, null, null));</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+          let mem = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(uri));</span>
<a href="#l9.14"></a><span id="l9.14">           mem.setProperty(&quot;disabled&quot;, true);</span>
<a href="#l9.15"></a><span id="l9.15">           mem.name = &quot;Calendars&quot;;</span>
<a href="#l9.16"></a><span id="l9.16">           mem.id = cal.getUUID();</span>
<a href="#l9.17"></a><span id="l9.17">           return mem;</span>
<a href="#l9.18"></a><span id="l9.18">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l9.19"></a><span id="l9.19">       &lt;/property&gt;</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21">       &lt;property name=&quot;mockTaskHeader&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l9.22"></a><span id="l9.22">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l9.23"></a><span id="l9.23">           let calmgr = cal.getCalendarManager();</span>
<a href="#l9.24"></a><span id="l9.24">           let uri = &quot;dummy://tasks&quot;;</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-          let mem = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(uri, null, null));</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+          let mem = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(uri));</span>
<a href="#l9.27"></a><span id="l9.27">           mem.setProperty(&quot;disabled&quot;, true);</span>
<a href="#l9.28"></a><span id="l9.28">           mem.name = &quot;Task Lists&quot;;</span>
<a href="#l9.29"></a><span id="l9.29">           mem.id = cal.getUUID();</span>
<a href="#l9.30"></a><span id="l9.30">           return mem;</span>
<a href="#l9.31"></a><span id="l9.31">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l9.32"></a><span id="l9.32">       &lt;/property&gt;</span>
<a href="#l9.33"></a><span id="l9.33"> </span>
<a href="#l9.34"></a><span id="l9.34">       &lt;field name=&quot;mCalendarHeaderIndex&quot;&gt;0&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataRequest.jsm</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataRequest.jsm</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -191,17 +191,17 @@ calGoogleRequest.prototype = {</span>
<a href="#l10.4"></a><span id="l10.4">                 let params = [];</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">                 // Using forEach is needed for backwards compatibility</span>
<a href="#l10.7"></a><span id="l10.7">                 this.mQueryParameters.forEach(function(v, k) {</span>
<a href="#l10.8"></a><span id="l10.8">                     params.push(k + &quot;=&quot; + encodeURIComponent(v));</span>
<a href="#l10.9"></a><span id="l10.9">                 });</span>
<a href="#l10.10"></a><span id="l10.10">                 uristring += &quot;?&quot; + params.join(&quot;&amp;&quot;);</span>
<a href="#l10.11"></a><span id="l10.11">             }</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-            let uri = Services.io.newURI(uristring, null, null);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+            let uri = Services.io.newURI(uristring);</span>
<a href="#l10.14"></a><span id="l10.14">             let channel;</span>
<a href="#l10.15"></a><span id="l10.15">             if (&quot;newChannelFromURI2&quot; in Services.io) {</span>
<a href="#l10.16"></a><span id="l10.16">                 // Lightning 4.3+</span>
<a href="#l10.17"></a><span id="l10.17">                 channel = Services.io.newChannelFromURI2(uri,</span>
<a href="#l10.18"></a><span id="l10.18">                                                          null,</span>
<a href="#l10.19"></a><span id="l10.19">                                                          Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l10.20"></a><span id="l10.20">                                                          null,</span>
<a href="#l10.21"></a><span id="l10.21">                                                          Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataSession.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataSession.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -190,17 +190,17 @@ calGoogleSession.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">             for (let perm in fixIterator(Services.perms.enumerator, Components.interfaces.nsIPermission)) {</span>
<a href="#l11.5"></a><span id="l11.5">                 if (perm.type == &quot;cookie&quot; &amp;&amp; perm.host == &quot;google.com&quot;) {</span>
<a href="#l11.6"></a><span id="l11.6">                     found = perm;</span>
<a href="#l11.7"></a><span id="l11.7">                     break;</span>
<a href="#l11.8"></a><span id="l11.8">                 }</span>
<a href="#l11.9"></a><span id="l11.9">             }</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">             if (!found || found.capability != nIPM.DENY_ACTION) {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-                let uri = Services.io.newURI(&quot;http://google.com&quot;, null, null);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+                let uri = Services.io.newURI(&quot;http://google.com&quot;);</span>
<a href="#l11.14"></a><span id="l11.14">                 if (Services.vc.compare(Services.appinfo.platformVersion, 42) &gt;= 0) {</span>
<a href="#l11.15"></a><span id="l11.15">                     Services.perms.remove(uri, &quot;cookie&quot;);</span>
<a href="#l11.16"></a><span id="l11.16">                 } else {</span>
<a href="#l11.17"></a><span id="l11.17">                     // Earlier versions take a string argument instead of nsIURI.</span>
<a href="#l11.18"></a><span id="l11.18">                     Services.perms.remove(uri.host, &quot;cookie&quot;);</span>
<a href="#l11.19"></a><span id="l11.19">                 }</span>
<a href="#l11.20"></a><span id="l11.20">                 Services.perms.add(uri, &quot;cookie&quot;, nIPM.ALLOW_ACTION, nIPM.EXPIRE_SESSION);</span>
<a href="#l11.21"></a><span id="l11.21">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataUtils.jsm</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataUtils.jsm</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -893,17 +893,17 @@ function JSONToTask(aEntry, aCalendar, a</span>
<a href="#l12.4"></a><span id="l12.4">             relation.relType = &quot;PARENT&quot;;</span>
<a href="#l12.5"></a><span id="l12.5">             relation.relId = aEntry.parent;</span>
<a href="#l12.6"></a><span id="l12.6">             item.addRelation(relation);</span>
<a href="#l12.7"></a><span id="l12.7">         }</span>
<a href="#l12.8"></a><span id="l12.8"> </span>
<a href="#l12.9"></a><span id="l12.9">         if (aEntry.links) {</span>
<a href="#l12.10"></a><span id="l12.10">             for (let link of aEntry.links) {</span>
<a href="#l12.11"></a><span id="l12.11">                 let attach = cal.createAttachment();</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-                attach.uri = Services.io.newURI(link.link, null, null);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+                attach.uri = Services.io.newURI(link.link);</span>
<a href="#l12.14"></a><span id="l12.14">                 attach.setParameter(&quot;FILENAME&quot;, link.description);</span>
<a href="#l12.15"></a><span id="l12.15">                 attach.setParameter(&quot;X-GOOGLE-TYPE&quot;, link.type);</span>
<a href="#l12.16"></a><span id="l12.16">                 item.addAttachment(attach);</span>
<a href="#l12.17"></a><span id="l12.17">             }</span>
<a href="#l12.18"></a><span id="l12.18">         }</span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20">         // updated (This must be set last!)</span>
<a href="#l12.21"></a><span id="l12.21">         item.setProperty(&quot;DTSTAMP&quot;, cal.fromRFC3339(aEntry.updated, calendarZone).getInTimezone(cal.UTC()));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapRequest.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapRequest.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -391,17 +391,17 @@ calWcapNetworkRequest.prototype = {</span>
<a href="#l13.4"></a><span id="l13.4"> };</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6"> function issueNetworkRequest(parentRequest, respFunc, url, bLogging) {</span>
<a href="#l13.7"></a><span id="l13.7">     let netRequest = new calWcapNetworkRequest(url, respFunc, bLogging);</span>
<a href="#l13.8"></a><span id="l13.8">     if (parentRequest) {</span>
<a href="#l13.9"></a><span id="l13.9">         parentRequest.attachSubRequest(netRequest);</span>
<a href="#l13.10"></a><span id="l13.10">     }</span>
<a href="#l13.11"></a><span id="l13.11">     try {</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        let uri = Services.io.newURI(url, null, null);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        let uri = Services.io.newURI(url);</span>
<a href="#l13.14"></a><span id="l13.14">         let channel = Services.io.newChannelFromURI2(uri,</span>
<a href="#l13.15"></a><span id="l13.15">                                                      null,</span>
<a href="#l13.16"></a><span id="l13.16">                                                      Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l13.17"></a><span id="l13.17">                                                      null,</span>
<a href="#l13.18"></a><span id="l13.18">                                                      Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l13.19"></a><span id="l13.19">                                                      Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l13.20"></a><span id="l13.20">         netRequest.prepareChannel(channel);</span>
<a href="#l13.21"></a><span id="l13.21">         channel = channel.QueryInterface(Components.interfaces.nsIHttpChannel);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/test/unit/test_alarmservice.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/test/unit/test_alarmservice.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -384,17 +384,17 @@ function doAcknowledgeTest(aCalendar) {</span>
<a href="#l14.4"></a><span id="l14.4">     alarmObserver.expectResult(aCalendar, item2, alarm2, EXPECT_NONE);</span>
<a href="#l14.5"></a><span id="l14.5">     alarmObserver.checkExpected(&quot;doAcknowledgeTest, test dismiss alarm&quot;);</span>
<a href="#l14.6"></a><span id="l14.6"> }</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8"> function doRunTest(aOnCalendarCreated, aOnAlarmsLoaded) {</span>
<a href="#l14.9"></a><span id="l14.9">     alarmObserver.clear();</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">     let calmgr = cal.getCalendarManager();</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l14.14"></a><span id="l14.14">     memory.id = cal.getUUID();</span>
<a href="#l14.15"></a><span id="l14.15"> </span>
<a href="#l14.16"></a><span id="l14.16">     if (aOnCalendarCreated) {</span>
<a href="#l14.17"></a><span id="l14.17">         aOnCalendarCreated.call(aOnCalendarCreated, memory);</span>
<a href="#l14.18"></a><span id="l14.18">     }</span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20">     calmgr.registerCalendar(memory);</span>
<a href="#l14.21"></a><span id="l14.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/test/unit/test_attachment.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/test/unit/test_attachment.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -84,27 +84,27 @@ function test_binaryattach() {</span>
<a href="#l15.4"></a><span id="l15.4">     ok(!!propIcalString.match(/FMTTYPE=x-moz\/test2/));</span>
<a href="#l15.5"></a><span id="l15.5">     ok(!!propIcalString.match(/VALUE=BINARY/));</span>
<a href="#l15.6"></a><span id="l15.6">     ok(!!propIcalString.replace(&quot;\r\n &quot;, &quot;&quot;).match(/:aHR0cDovL2hlbGxvMg==/));</span>
<a href="#l15.7"></a><span id="l15.7"> }</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9"> function test_serialize() {</span>
<a href="#l15.10"></a><span id="l15.10">     let attach = cal.createAttachment();</span>
<a href="#l15.11"></a><span id="l15.11">     attach.formatType = &quot;x-moz/test2&quot;;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    attach.uri = Services.io.newURI(&quot;data:text/plain,&quot;, null, null);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+    attach.uri = Services.io.newURI(&quot;data:text/plain,&quot;);</span>
<a href="#l15.14"></a><span id="l15.14">     equal(attach.icalString, &quot;ATTACH;FMTTYPE=x-moz/test2:data:text/plain,\r\n&quot;);</span>
<a href="#l15.15"></a><span id="l15.15"> </span>
<a href="#l15.16"></a><span id="l15.16">     attach = cal.createAttachment();</span>
<a href="#l15.17"></a><span id="l15.17">     attach.encoding = &quot;BASE64&quot;;</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-    attach.uri = Services.io.newURI(&quot;data:text/plain,&quot;, null, null);</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineplus">+    attach.uri = Services.io.newURI(&quot;data:text/plain,&quot;);</span>
<a href="#l15.20"></a><span id="l15.20">     equal(attach.icalString, &quot;ATTACH;ENCODING=BASE64:data:text/plain,\r\n&quot;);</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22">     throws(() =&gt; {</span>
<a href="#l15.23"></a><span id="l15.23">         attach.icalString = &quot;X-STICKER:smiley&quot;;</span>
<a href="#l15.24"></a><span id="l15.24">     }, /Illegal value/);</span>
<a href="#l15.25"></a><span id="l15.25"> </span>
<a href="#l15.26"></a><span id="l15.26">     attach = cal.createAttachment();</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineminus">-    attach.uri = Services.io.newURI(&quot;data:text/plain,&quot;, null, null);</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineplus">+    attach.uri = Services.io.newURI(&quot;data:text/plain,&quot;);</span>
<a href="#l15.29"></a><span id="l15.29">     attach.setParameter(&quot;X-PROP&quot;, &quot;VAL&quot;);</span>
<a href="#l15.30"></a><span id="l15.30">     equal(attach.icalString, &quot;ATTACH;X-PROP=VAL:data:text/plain,\r\n&quot;);</span>
<a href="#l15.31"></a><span id="l15.31">     attach.setParameter(&quot;X-PROP&quot;, null);</span>
<a href="#l15.32"></a><span id="l15.32">     equal(attach.icalString, &quot;ATTACH:data:text/plain,\r\n&quot;);</span>
<a href="#l15.33"></a><span id="l15.33"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/test/unit/test_calmgr.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/test/unit/test_calmgr.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -27,17 +27,17 @@ add_test(function test_registration() {</span>
<a href="#l16.4"></a><span id="l16.4">         deleted = false;</span>
<a href="#l16.5"></a><span id="l16.5">     }</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7">     // Initially there should be no calendars</span>
<a href="#l16.8"></a><span id="l16.8">     let calmgr = cal.getCalendarManager();</span>
<a href="#l16.9"></a><span id="l16.9">     checkCalendarCount(0, 0, 0);</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11">     // Create a local memory calendar, ths shouldn't register any calendars</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.14"></a><span id="l16.14">     checkCalendarCount(0, 0, 0);</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16">     // Register an observer to test it.</span>
<a href="#l16.17"></a><span id="l16.17">     let registered = false, unregistered = false, deleted = false, readOnly = false;</span>
<a href="#l16.18"></a><span id="l16.18">     let mgrobs = cal.createAdapter(Components.interfaces.calICalendarManagerObserver, {</span>
<a href="#l16.19"></a><span id="l16.19">         onCalendarRegistered: function(aCalendar) {</span>
<a href="#l16.20"></a><span id="l16.20">             if (aCalendar.id == memory.id) {</span>
<a href="#l16.21"></a><span id="l16.21">                 registered = true;</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -122,18 +122,18 @@ add_test(function test_calobserver() {</span>
<a href="#l16.23"></a><span id="l16.23">     }</span>
<a href="#l16.24"></a><span id="l16.24">     function resetCounters() {</span>
<a href="#l16.25"></a><span id="l16.25">         calcounter = { addItem: 0, modifyItem: 0, deleteItem: 0 };</span>
<a href="#l16.26"></a><span id="l16.26">         allcounter = { addItem: 0, modifyItem: 0, deleteItem: 0 };</span>
<a href="#l16.27"></a><span id="l16.27">     }</span>
<a href="#l16.28"></a><span id="l16.28"> </span>
<a href="#l16.29"></a><span id="l16.29">     // First of all we need a local calendar to work on and some variables</span>
<a href="#l16.30"></a><span id="l16.30">     let calmgr = cal.getCalendarManager();</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-    let memory2 = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+    let memory2 = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.35"></a><span id="l16.35">     let calcounter, allcounter;</span>
<a href="#l16.36"></a><span id="l16.36"> </span>
<a href="#l16.37"></a><span id="l16.37">     // These observers will end up counting calls which we will use later on</span>
<a href="#l16.38"></a><span id="l16.38">     let calobs = cal.createAdapter(Components.interfaces.calIObserver, {</span>
<a href="#l16.39"></a><span id="l16.39">         onAddItem: () =&gt; calcounter.addItem++,</span>
<a href="#l16.40"></a><span id="l16.40">         onModifyItem: () =&gt; calcounter.modifyItem++,</span>
<a href="#l16.41"></a><span id="l16.41">         onDeleteItem: () =&gt; calcounter.deleteItem++</span>
<a href="#l16.42"></a><span id="l16.42">     });</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineat">@@ -221,17 +221,17 @@ add_test(function test_removeModes() {</span>
<a href="#l16.44"></a><span id="l16.44">         };</span>
<a href="#l16.45"></a><span id="l16.45">     }</span>
<a href="#l16.46"></a><span id="l16.46"> </span>
<a href="#l16.47"></a><span id="l16.47">     // For better readability</span>
<a href="#l16.48"></a><span id="l16.48">     const SHOULD_DELETE = true, SHOULD_NOT_DELETE = false;</span>
<a href="#l16.49"></a><span id="l16.49">     const cICM = Components.interfaces.calICalendarManager;</span>
<a href="#l16.50"></a><span id="l16.50"> </span>
<a href="#l16.51"></a><span id="l16.51">     let calmgr = cal.getCalendarManager();</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.54"></a><span id="l16.54">     let baseCalendarCount = calmgr.calendarCount;</span>
<a href="#l16.55"></a><span id="l16.55">     let removeModes = null;</span>
<a href="#l16.56"></a><span id="l16.56">     let deleteCalled = false;</span>
<a href="#l16.57"></a><span id="l16.57"> </span>
<a href="#l16.58"></a><span id="l16.58">     mockCalendar(memory);</span>
<a href="#l16.59"></a><span id="l16.59"> </span>
<a href="#l16.60"></a><span id="l16.60">     checkCounts([], SHOULD_NOT_DELETE, 1);</span>
<a href="#l16.61"></a><span id="l16.61">     checkCounts([&quot;unsubscribe&quot;], SHOULD_NOT_DELETE, 0);</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineat">@@ -240,30 +240,30 @@ add_test(function test_removeModes() {</span>
<a href="#l16.63"></a><span id="l16.63">     checkCounts([&quot;delete&quot;], SHOULD_DELETE, 0);</span>
<a href="#l16.64"></a><span id="l16.64"> </span>
<a href="#l16.65"></a><span id="l16.65">     run_next_test();</span>
<a href="#l16.66"></a><span id="l16.66"> });</span>
<a href="#l16.67"></a><span id="l16.67"> </span>
<a href="#l16.68"></a><span id="l16.68"> add_test(function test_calprefs() {</span>
<a href="#l16.69"></a><span id="l16.69">     let prop;</span>
<a href="#l16.70"></a><span id="l16.70">     let calmgr = cal.getCalendarManager();</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineminus">-    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.73"></a><span id="l16.73">     calmgr.registerCalendar(memory);</span>
<a href="#l16.74"></a><span id="l16.74">     let memid = memory.id;</span>
<a href="#l16.75"></a><span id="l16.75"> </span>
<a href="#l16.76"></a><span id="l16.76">     // First set a few values, one of each relevant type</span>
<a href="#l16.77"></a><span id="l16.77">     memory.setProperty(&quot;stringpref&quot;, &quot;abc&quot;);</span>
<a href="#l16.78"></a><span id="l16.78">     memory.setProperty(&quot;boolpref&quot;, true);</span>
<a href="#l16.79"></a><span id="l16.79">     memory.setProperty(&quot;intpref&quot;, 123);</span>
<a href="#l16.80"></a><span id="l16.80">     memory.setProperty(&quot;bigintpref&quot;, 1394548721296);</span>
<a href="#l16.81"></a><span id="l16.81">     memory.setProperty(&quot;floatpref&quot;, 0.5);</span>
<a href="#l16.82"></a><span id="l16.82"> </span>
<a href="#l16.83"></a><span id="l16.83">     // Before checking the value, reinitialize the memory calendar with the</span>
<a href="#l16.84"></a><span id="l16.84">     // same id to make sure the pref value isn't just cached</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineminus">-    memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineplus">+    memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.87"></a><span id="l16.87">     memory.id = memid;</span>
<a href="#l16.88"></a><span id="l16.88"> </span>
<a href="#l16.89"></a><span id="l16.89">     // First test the standard types</span>
<a href="#l16.90"></a><span id="l16.90">     prop = memory.getProperty(&quot;stringpref&quot;);</span>
<a href="#l16.91"></a><span id="l16.91">     equal(typeof prop, &quot;string&quot;);</span>
<a href="#l16.92"></a><span id="l16.92">     equal(prop, &quot;abc&quot;);</span>
<a href="#l16.93"></a><span id="l16.93"> </span>
<a href="#l16.94"></a><span id="l16.94">     prop = memory.getProperty(&quot;boolpref&quot;);</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineat">@@ -280,27 +280,27 @@ add_test(function test_calprefs() {</span>
<a href="#l16.96"></a><span id="l16.96">     equal(prop, 1394548721296);</span>
<a href="#l16.97"></a><span id="l16.97"> </span>
<a href="#l16.98"></a><span id="l16.98">     prop = memory.getProperty(&quot;floatpref&quot;);</span>
<a href="#l16.99"></a><span id="l16.99">     equal(typeof prop, &quot;number&quot;);</span>
<a href="#l16.100"></a><span id="l16.100">     equal(prop, 0.5);</span>
<a href="#l16.101"></a><span id="l16.101"> </span>
<a href="#l16.102"></a><span id="l16.102">     // Check if changing pref types works. We need to reset the calendar again</span>
<a href="#l16.103"></a><span id="l16.103">     // because retrieving the value just cached it again.</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineminus">-    memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineplus">+    memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.106"></a><span id="l16.106">     memory.id = memid;</span>
<a href="#l16.107"></a><span id="l16.107"> </span>
<a href="#l16.108"></a><span id="l16.108">     calmgr.setCalendarPref_(memory, &quot;boolpref&quot;, &quot;kinda true&quot;);</span>
<a href="#l16.109"></a><span id="l16.109">     prop = memory.getProperty(&quot;boolpref&quot;);</span>
<a href="#l16.110"></a><span id="l16.110">     equal(typeof prop, &quot;string&quot;);</span>
<a href="#l16.111"></a><span id="l16.111">     equal(prop, &quot;kinda true&quot;);</span>
<a href="#l16.112"></a><span id="l16.112"> </span>
<a href="#l16.113"></a><span id="l16.113">     // Check if unsetting a pref works</span>
<a href="#l16.114"></a><span id="l16.114">     memory.setProperty(&quot;intpref&quot;, null);</span>
<a href="#l16.115"></a><span id="l16.115" class="difflineminus">-    memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineplus">+    memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;));</span>
<a href="#l16.117"></a><span id="l16.117">     memory.id = memid;</span>
<a href="#l16.118"></a><span id="l16.118">     prop = memory.getProperty(&quot;intpref&quot;);</span>
<a href="#l16.119"></a><span id="l16.119">     ok(prop === null);</span>
<a href="#l16.120"></a><span id="l16.120"> </span>
<a href="#l16.121"></a><span id="l16.121"> </span>
<a href="#l16.122"></a><span id="l16.122">     // We are done now, start the next test</span>
<a href="#l16.123"></a><span id="l16.123">     run_next_test();</span>
<a href="#l16.124"></a><span id="l16.124"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/test/unit/test_deleted_items.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/test/unit/test_deleted_items.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -31,17 +31,17 @@ add_task(function* test_deleted_items() </span>
<a href="#l17.4"></a><span id="l17.4">     // No items have been deleted, retrieving one should return null.</span>
<a href="#l17.5"></a><span id="l17.5">     equal(delmgr.getDeletedDate(&quot;random&quot;), null);</span>
<a href="#l17.6"></a><span id="l17.6">     equal(delmgr.getDeletedDate(&quot;random&quot;, &quot;random&quot;), null);</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8">     // Make sure the cache is initially flushed and that this doesn't throw an</span>
<a href="#l17.9"></a><span id="l17.9">     // error.</span>
<a href="#l17.10"></a><span id="l17.10">     yield check_delmgr_call(() =&gt; delmgr.flush());</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-storage-calendar://&quot;, null, null));</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+    let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-storage-calendar://&quot;));</span>
<a href="#l17.14"></a><span id="l17.14">     calmgr.registerCalendar(memory);</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16">     let item = cal.createEvent();</span>
<a href="#l17.17"></a><span id="l17.17">     item.id = &quot;test-item-1&quot;;</span>
<a href="#l17.18"></a><span id="l17.18">     item.startDate = cal.now();</span>
<a href="#l17.19"></a><span id="l17.19">     item.endDate = cal.now();</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">     // Add the item, it still shouldn't be in the deleted database.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -191,17 +191,17 @@ GDataServer.prototype = {</span>
<a href="#l18.4"></a><span id="l18.4">     },</span>
<a href="#l18.5"></a><span id="l18.5"> </span>
<a href="#l18.6"></a><span id="l18.6">     getClient: function() {</span>
<a href="#l18.7"></a><span id="l18.7">         let uri = &quot;googleapi://xpcshell/&quot; +</span>
<a href="#l18.8"></a><span id="l18.8">                   &quot;?testport=&quot; + this.server.identity.primaryPort +</span>
<a href="#l18.9"></a><span id="l18.9">                   (this.calendarId ? &quot;&amp;calendar=&quot; + encodeURIComponent(this.calendarId) : &quot;&quot;) +</span>
<a href="#l18.10"></a><span id="l18.10">                   (this.tasksId ? &quot;&amp;tasks=&quot; + encodeURIComponent(this.tasksId) : &quot;&quot;);</span>
<a href="#l18.11"></a><span id="l18.11">         let calmgr = cal.getCalendarManager();</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        let client = calmgr.createCalendar(&quot;gdata&quot;, Services.io.newURI(uri, null, null));</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+        let client = calmgr.createCalendar(&quot;gdata&quot;, Services.io.newURI(uri));</span>
<a href="#l18.14"></a><span id="l18.14">         let uclient = client.wrappedJSObject;</span>
<a href="#l18.15"></a><span id="l18.15">         client.name = &quot;xpcshell&quot;;</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17">         // Make sure we catch the last error message in case sync fails</span>
<a href="#l18.18"></a><span id="l18.18">         monkeyPatch(uclient, &quot;replayChangesOn&quot;, (protofunc, aListener) =&gt; {</span>
<a href="#l18.19"></a><span id="l18.19">             protofunc({</span>
<a href="#l18.20"></a><span id="l18.20">                 onResult: function(operation, detail) {</span>
<a href="#l18.21"></a><span id="l18.21">                     uclient._lastStatus = operation.status;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -507,17 +507,17 @@ function run_test() {</span>
<a href="#l18.23"></a><span id="l18.23">                 }</span>
<a href="#l18.24"></a><span id="l18.24">             });</span>
<a href="#l18.25"></a><span id="l18.25">         }</span>
<a href="#l18.26"></a><span id="l18.26">     });</span>
<a href="#l18.27"></a><span id="l18.27"> }</span>
<a href="#l18.28"></a><span id="l18.28"> </span>
<a href="#l18.29"></a><span id="l18.29"> add_task(function* test_migrate_cache() {</span>
<a href="#l18.30"></a><span id="l18.30">     let uriString = &quot;googleapi://xpcshell/?calendar=xpcshell%40example.com&quot;;</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-    let uri = Services.io.newURI(uriString, null, null);</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+    let uri = Services.io.newURI(uriString);</span>
<a href="#l18.33"></a><span id="l18.33">     let client = cal.getCalendarManager().createCalendar(&quot;gdata&quot;, uri);</span>
<a href="#l18.34"></a><span id="l18.34">     let unwrapped = client.wrappedJSObject;</span>
<a href="#l18.35"></a><span id="l18.35">     let migrateStorageCache = unwrapped.migrateStorageCache.bind(unwrapped);</span>
<a href="#l18.36"></a><span id="l18.36"> </span>
<a href="#l18.37"></a><span id="l18.37">     monkeyPatch(unwrapped, &quot;resetSync&quot;, (protofunc) =&gt; {</span>
<a href="#l18.38"></a><span id="l18.38">         return Promise.resolve();</span>
<a href="#l18.39"></a><span id="l18.39">     });</span>
<a href="#l18.40"></a><span id="l18.40"> </span>
<a href="#l18.41"></a><span id="l18.41" class="difflineat">@@ -534,24 +534,24 @@ add_task(function* test_migrate_cache() </span>
<a href="#l18.42"></a><span id="l18.42">     // Check migrate 2 -&gt; 3 normal calendar</span>
<a href="#l18.43"></a><span id="l18.43">     unwrapped.CACHE_DB_VERSION = 3;</span>
<a href="#l18.44"></a><span id="l18.44">     client.setProperty(&quot;cache.version&quot;, 2);</span>
<a href="#l18.45"></a><span id="l18.45">     equal(yield migrateStorageCache(), false);</span>
<a href="#l18.46"></a><span id="l18.46"> </span>
<a href="#l18.47"></a><span id="l18.47">     // Check migrate 2 -&gt; 3 birthday calendar</span>
<a href="#l18.48"></a><span id="l18.48">     unwrapped.CACHE_DB_VERSION = 3;</span>
<a href="#l18.49"></a><span id="l18.49">     uri = &quot;googleapi://xpcshell/?calendar=%23contacts%40group.v.calendar.google.com&quot;;</span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-    unwrapped.uri = Services.io.newURI(uri, null, null);</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineplus">+    unwrapped.uri = Services.io.newURI(uri);</span>
<a href="#l18.52"></a><span id="l18.52">     client.setProperty(&quot;cache.version&quot;, 2);</span>
<a href="#l18.53"></a><span id="l18.53">     equal(yield migrateStorageCache(), true);</span>
<a href="#l18.54"></a><span id="l18.54"> });</span>
<a href="#l18.55"></a><span id="l18.55"> </span>
<a href="#l18.56"></a><span id="l18.56"> add_test(function test_migrate_uri() {</span>
<a href="#l18.57"></a><span id="l18.57">     function checkMigrate(fromUri, session, calendarId, tasksId) {</span>
<a href="#l18.58"></a><span id="l18.58" class="difflineminus">-        let uri = Services.io.newURI(fromUri, null, null);</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineplus">+        let uri = Services.io.newURI(fromUri);</span>
<a href="#l18.60"></a><span id="l18.60">         let client = cal.getCalendarManager().createCalendar(&quot;gdata&quot;, uri);</span>
<a href="#l18.61"></a><span id="l18.61"> </span>
<a href="#l18.62"></a><span id="l18.62">         if (session) {</span>
<a href="#l18.63"></a><span id="l18.63">             let target = (&quot;googleapi://&quot; + session + &quot;/?&quot; +</span>
<a href="#l18.64"></a><span id="l18.64">                          (calendarId ? &quot;&amp;calendar=&quot; + encodeURIComponent(calendarId) : &quot;&quot;) +</span>
<a href="#l18.65"></a><span id="l18.65">                          (tasksId ? &quot;&amp;tasks=&quot; + encodeURIComponent(tasksId) : &quot;&quot;)).replace(&quot;?&amp;&quot;, &quot;?&quot;);</span>
<a href="#l18.66"></a><span id="l18.66">             equal(client.getProperty(&quot;uri&quot;), target);</span>
<a href="#l18.67"></a><span id="l18.67">         } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/test/unit/test_webcal.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/test/unit/test_webcal.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -22,17 +22,17 @@ function run_test() {</span>
<a href="#l19.4"></a><span id="l19.4">     // add_test(check_webcal_uri.bind(null, &quot;webcals&quot; + baseUri));</span>
<a href="#l19.5"></a><span id="l19.5">     add_test(() =&gt; httpserv.stop(run_next_test));</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7">     // Now lets go...</span>
<a href="#l19.8"></a><span id="l19.8">     run_next_test();</span>
<a href="#l19.9"></a><span id="l19.9"> }</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11"> function check_webcal_uri(aUri) {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-    let uri = Services.io.newURI(aUri, null, null);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+    let uri = Services.io.newURI(aUri);</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">     let channel = Services.io.newChannelFromURI2(uri,</span>
<a href="#l19.16"></a><span id="l19.16">                                                  null,</span>
<a href="#l19.17"></a><span id="l19.17">                                                  Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l19.18"></a><span id="l19.18">                                                  null,</span>
<a href="#l19.19"></a><span id="l19.19">                                                  Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l19.20"></a><span id="l19.20">                                                  Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l19.21"></a><span id="l19.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/chat/components/src/smileProtocolHandler.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/chat/components/src/smileProtocolHandler.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -26,17 +26,17 @@ smileProtocolHandler.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">     uri.mutable = false;</span>
<a href="#l20.5"></a><span id="l20.5">     return uri;</span>
<a href="#l20.6"></a><span id="l20.6">   },</span>
<a href="#l20.7"></a><span id="l20.7">   newChannel: function SPH_newChannel(aURI) {</span>
<a href="#l20.8"></a><span id="l20.8">     return this.newChannel2(aURI, null);</span>
<a href="#l20.9"></a><span id="l20.9">   },</span>
<a href="#l20.10"></a><span id="l20.10">   newChannel2: function SPH_newChannel2(aURI, aLoadInfo) {</span>
<a href="#l20.11"></a><span id="l20.11">     let smile = aURI.spec.replace(kSmileRegexp, &quot;&quot;);</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    let uri = Services.io.newURI(getSmileRealURI(smile), null, null);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    let uri = Services.io.newURI(getSmileRealURI(smile));</span>
<a href="#l20.14"></a><span id="l20.14">     let channel = Services.io.newChannelFromURIWithLoadInfo(uri, aLoadInfo);</span>
<a href="#l20.15"></a><span id="l20.15">     channel.originalURI = aURI;</span>
<a href="#l20.16"></a><span id="l20.16">     return channel;</span>
<a href="#l20.17"></a><span id="l20.17">   },</span>
<a href="#l20.18"></a><span id="l20.18">   allowPort: function SPH_allowPort(aPort, aScheme) { return false; },</span>
<a href="#l20.19"></a><span id="l20.19"> </span>
<a href="#l20.20"></a><span id="l20.20">   classDescription: &quot;Smile Protocol Handler&quot;,</span>
<a href="#l20.21"></a><span id="l20.21">   classID: Components.ID(&quot;{04e58eae-dfbc-4c9e-8130-6d9ef19cbff4}&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/chat/content/convbrowser.xml</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/chat/content/convbrowser.xml</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1279,17 +1279,17 @@</span>
<a href="#l21.4"></a><span id="l21.4">           for (let elem = event.target; elem; elem = elem.parentNode) {</span>
<a href="#l21.5"></a><span id="l21.5">             if (elem instanceof HTMLAnchorElement) {</span>
<a href="#l21.6"></a><span id="l21.6">               url = elem.href;</span>
<a href="#l21.7"></a><span id="l21.7">               if (url)</span>
<a href="#l21.8"></a><span id="l21.8">                 break;</span>
<a href="#l21.9"></a><span id="l21.9">             }</span>
<a href="#l21.10"></a><span id="l21.10">           }</span>
<a href="#l21.11"></a><span id="l21.11">           if (url) {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-            let uri = Services.io.newURI(url, null, null);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+            let uri = Services.io.newURI(url);</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">             // http and https are the only schemes that are both</span>
<a href="#l21.16"></a><span id="l21.16">             // allowed by our IM filters and exposed.</span>
<a href="#l21.17"></a><span id="l21.17">             if (!uri.schemeIs(&quot;http&quot;) &amp;&amp; !uri.schemeIs(&quot;https&quot;))</span>
<a href="#l21.18"></a><span id="l21.18">               return;</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20">             event.preventDefault();</span>
<a href="#l21.21"></a><span id="l21.21">             event.stopPropagation();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/chat/modules/imThemes.jsm</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/chat/modules/imThemes.jsm</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -222,25 +222,25 @@ function getCurrentTheme()</span>
<a href="#l22.4"></a><span id="l22.4">   }</span>
<a href="#l22.5"></a><span id="l22.5"> </span>
<a href="#l22.6"></a><span id="l22.6">   return gCurrentTheme;</span>
<a href="#l22.7"></a><span id="l22.7"> }</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9"> function getDirectoryEntries(aDir)</span>
<a href="#l22.10"></a><span id="l22.10"> {</span>
<a href="#l22.11"></a><span id="l22.11">   let ios = Services.io;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  let uri = ios.newURI(aDir, null, null);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  let uri = ios.newURI(aDir);</span>
<a href="#l22.14"></a><span id="l22.14">   let cr = Components.classes[&quot;@mozilla.org/chrome/chrome-registry;1&quot;]</span>
<a href="#l22.15"></a><span id="l22.15">                      .getService(Ci.nsIXULChromeRegistry);</span>
<a href="#l22.16"></a><span id="l22.16">   while (uri.scheme == &quot;chrome&quot;)</span>
<a href="#l22.17"></a><span id="l22.17">     uri = cr.convertChromeURL(uri);</span>
<a href="#l22.18"></a><span id="l22.18"> </span>
<a href="#l22.19"></a><span id="l22.19">   // remove any trailing file name added by convertChromeURL</span>
<a href="#l22.20"></a><span id="l22.20">   let spec = uri.spec.replace(/[^\/]+$/, &quot;&quot;);</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineminus">-  uri = ios.newURI(spec, null, null);</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+  uri = ios.newURI(spec);</span>
<a href="#l22.23"></a><span id="l22.23"> </span>
<a href="#l22.24"></a><span id="l22.24">   let results = [];</span>
<a href="#l22.25"></a><span id="l22.25">   if (uri.scheme == &quot;jar&quot;) {</span>
<a href="#l22.26"></a><span id="l22.26">     uri.QueryInterface(Ci.nsIJARURI);</span>
<a href="#l22.27"></a><span id="l22.27">     let strEntry = uri.JAREntry;</span>
<a href="#l22.28"></a><span id="l22.28">     if (!strEntry)</span>
<a href="#l22.29"></a><span id="l22.29">       return [];</span>
<a href="#l22.30"></a><span id="l22.30"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/chat/modules/socket.jsm</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/chat/modules/socket.jsm</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -172,17 +172,17 @@ var Socket = {</span>
<a href="#l23.4"></a><span id="l23.4">     else {</span>
<a href="#l23.5"></a><span id="l23.5">       try {</span>
<a href="#l23.6"></a><span id="l23.6">         // Attempt to get a default proxy from the proxy service.</span>
<a href="#l23.7"></a><span id="l23.7">         let proxyService = Cc[&quot;@mozilla.org/network/protocol-proxy-service;1&quot;]</span>
<a href="#l23.8"></a><span id="l23.8">                               .getService(Ci.nsIProtocolProxyService);</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10">         // Add a URI scheme since, by default, some protocols (i.e. IRC) don't</span>
<a href="#l23.11"></a><span id="l23.11">         // have a URI scheme before the host.</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-        let uri = Services.io.newURI(&quot;http://&quot; + this.host, null, null);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+        let uri = Services.io.newURI(&quot;http://&quot; + this.host);</span>
<a href="#l23.14"></a><span id="l23.14">         // This will return null when the result is known immediately and</span>
<a href="#l23.15"></a><span id="l23.15">         // the callback will just be dispatched to the current thread.</span>
<a href="#l23.16"></a><span id="l23.16">         this._proxyCancel = proxyService.asyncResolve(uri, this.proxyFlags, this);</span>
<a href="#l23.17"></a><span id="l23.17">       } catch(e) {</span>
<a href="#l23.18"></a><span id="l23.18">         Cu.reportError(e);</span>
<a href="#l23.19"></a><span id="l23.19">         // We had some error getting the proxy service, just don't use one.</span>
<a href="#l23.20"></a><span id="l23.20">         this._createTransport(null);</span>
<a href="#l23.21"></a><span id="l23.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/editor/ui/composer/content/ComposerCommands.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/editor/ui/composer/content/ComposerCommands.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -745,17 +745,17 @@ function GetSuggestedFileName(aDocumentU</span>
<a href="#l24.4"></a><span id="l24.4">   if (extension)</span>
<a href="#l24.5"></a><span id="l24.5">     extension = &quot;.&quot; + extension;</span>
<a href="#l24.6"></a><span id="l24.6"> </span>
<a href="#l24.7"></a><span id="l24.7">   // check for existing file name we can use</span>
<a href="#l24.8"></a><span id="l24.8">   if (aDocumentURLString &amp;&amp; !IsUrlAboutBlank(aDocumentURLString))</span>
<a href="#l24.9"></a><span id="l24.9">   {</span>
<a href="#l24.10"></a><span id="l24.10">     try {</span>
<a href="#l24.11"></a><span id="l24.11">       let docURI = Services.io.newURI(aDocumentURLString,</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-        GetCurrentEditor().documentCharacterSet, null);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+        GetCurrentEditor().documentCharacterSet);</span>
<a href="#l24.14"></a><span id="l24.14">       docURI = docURI.QueryInterface(Components.interfaces.nsIURL);</span>
<a href="#l24.15"></a><span id="l24.15"> </span>
<a href="#l24.16"></a><span id="l24.16">       // grab the file name</span>
<a href="#l24.17"></a><span id="l24.17">       let url = validateFileName(decodeURIComponent(docURI.fileBaseName));</span>
<a href="#l24.18"></a><span id="l24.18">       if (url)</span>
<a href="#l24.19"></a><span id="l24.19">         return url + extension;</span>
<a href="#l24.20"></a><span id="l24.20">     } catch(e) {}</span>
<a href="#l24.21"></a><span id="l24.21">   }</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -804,17 +804,17 @@ function PromptForSaveLocation(aDoSaveAs</span>
<a href="#l24.23"></a><span id="l24.23"> </span>
<a href="#l24.24"></a><span id="l24.24">   // set the file picker's current directory</span>
<a href="#l24.25"></a><span id="l24.25">   // assuming we have information needed (like prior saved location)</span>
<a href="#l24.26"></a><span id="l24.26">   try {</span>
<a href="#l24.27"></a><span id="l24.27">     var fileHandler = GetFileProtocolHandler();</span>
<a href="#l24.28"></a><span id="l24.28"> </span>
<a href="#l24.29"></a><span id="l24.29">     var isLocalFile = true;</span>
<a href="#l24.30"></a><span id="l24.30">     try {</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-      let docURI = Services.io.newURI(aDocumentURLString, GetCurrentEditor().documentCharacterSet, null);</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+      let docURI = Services.io.newURI(aDocumentURLString, GetCurrentEditor().documentCharacterSet);</span>
<a href="#l24.33"></a><span id="l24.33">       isLocalFile = docURI.schemeIs(&quot;file&quot;);</span>
<a href="#l24.34"></a><span id="l24.34">     }</span>
<a href="#l24.35"></a><span id="l24.35">     catch (e) {}</span>
<a href="#l24.36"></a><span id="l24.36"> </span>
<a href="#l24.37"></a><span id="l24.37">     var parentLocation = null;</span>
<a href="#l24.38"></a><span id="l24.38">     if (isLocalFile)</span>
<a href="#l24.39"></a><span id="l24.39">     {</span>
<a href="#l24.40"></a><span id="l24.40">       var fileLocation = fileHandler.getFileFromURLSpec(aDocumentURLString); // this asserts if url is not local</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineat">@@ -1164,17 +1164,17 @@ var gEditorOutputProgressListener =</span>
<a href="#l24.42"></a><span id="l24.42"> </span>
<a href="#l24.43"></a><span id="l24.43">         if (gPersistObj.result == 0)</span>
<a href="#l24.44"></a><span id="l24.44">         {</span>
<a href="#l24.45"></a><span id="l24.45">           // All files are finished and publishing succeeded (some images may have failed)</span>
<a href="#l24.46"></a><span id="l24.46">           try {</span>
<a href="#l24.47"></a><span id="l24.47">             // Make a new docURI from the &quot;browse location&quot; in case &quot;publish location&quot; was FTP</span>
<a href="#l24.48"></a><span id="l24.48">             // We need to set document uri before notifying listeners</span>
<a href="#l24.49"></a><span id="l24.49">             var docUrl = GetDocUrlFromPublishData(gPublishData);</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-            SetDocumentURI(Services.io.newURI(docUrl, editor.documentCharacterSet, null));</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineplus">+            SetDocumentURI(Services.io.newURI(docUrl, editor.documentCharacterSet));</span>
<a href="#l24.52"></a><span id="l24.52"> </span>
<a href="#l24.53"></a><span id="l24.53">             UpdateWindowTitle();</span>
<a href="#l24.54"></a><span id="l24.54"> </span>
<a href="#l24.55"></a><span id="l24.55">             // this should cause notification to listeners that doc has changed</span>
<a href="#l24.56"></a><span id="l24.56">             editor.resetModificationCount();</span>
<a href="#l24.57"></a><span id="l24.57"> </span>
<a href="#l24.58"></a><span id="l24.58">             // Set UI based on whether we're editing a remote or local url</span>
<a href="#l24.59"></a><span id="l24.59">             SetSaveAndPublishUI(urlstring);</span>
<a href="#l24.60"></a><span id="l24.60" class="difflineat">@@ -1637,17 +1637,17 @@ function SaveDocument(aSaveAs, aSaveCopy</span>
<a href="#l24.61"></a><span id="l24.61"> </span>
<a href="#l24.62"></a><span id="l24.62">   var success = true;</span>
<a href="#l24.63"></a><span id="l24.63">   try {</span>
<a href="#l24.64"></a><span id="l24.64">     // if somehow we didn't get a local file but we did get a uri,</span>
<a href="#l24.65"></a><span id="l24.65">     // attempt to create the localfile if it's a &quot;file&quot; url</span>
<a href="#l24.66"></a><span id="l24.66">     var docURI;</span>
<a href="#l24.67"></a><span id="l24.67">     if (!tempLocalFile)</span>
<a href="#l24.68"></a><span id="l24.68">     {</span>
<a href="#l24.69"></a><span id="l24.69" class="difflineminus">-      docURI = Services.io.newURI(urlstring, editor.documentCharacterSet, null);</span>
<a href="#l24.70"></a><span id="l24.70" class="difflineplus">+      docURI = Services.io.newURI(urlstring, editor.documentCharacterSet);</span>
<a href="#l24.71"></a><span id="l24.71"> </span>
<a href="#l24.72"></a><span id="l24.72">       if (docURI.schemeIs(&quot;file&quot;))</span>
<a href="#l24.73"></a><span id="l24.73">       {</span>
<a href="#l24.74"></a><span id="l24.74">         var fileHandler = GetFileProtocolHandler();</span>
<a href="#l24.75"></a><span id="l24.75">         tempLocalFile = fileHandler.getFileFromURLSpec(urlstring).QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l24.76"></a><span id="l24.76">       }</span>
<a href="#l24.77"></a><span id="l24.77">     }</span>
<a href="#l24.78"></a><span id="l24.78"> </span>
<a href="#l24.79"></a><span id="l24.79" class="difflineat">@@ -1679,17 +1679,17 @@ function SaveDocument(aSaveAs, aSaveCopy</span>
<a href="#l24.80"></a><span id="l24.80">             relatedFilesDir = tempLocalFile.parent;</span>
<a href="#l24.81"></a><span id="l24.81">         }</span>
<a href="#l24.82"></a><span id="l24.82">         else</span>
<a href="#l24.83"></a><span id="l24.83">         {</span>
<a href="#l24.84"></a><span id="l24.84">           var lastSlash = urlstring.lastIndexOf(&quot;\/&quot;);</span>
<a href="#l24.85"></a><span id="l24.85">           if (lastSlash != -1)</span>
<a href="#l24.86"></a><span id="l24.86">           {</span>
<a href="#l24.87"></a><span id="l24.87">             var relatedFilesDirString = urlstring.slice(0, lastSlash + 1);  // include last slash</span>
<a href="#l24.88"></a><span id="l24.88" class="difflineminus">-            relatedFilesDir = Services.io.newURI(relatedFilesDirString, editor.documentCharacterSet, null);</span>
<a href="#l24.89"></a><span id="l24.89" class="difflineplus">+            relatedFilesDir = Services.io.newURI(relatedFilesDirString, editor.documentCharacterSet);</span>
<a href="#l24.90"></a><span id="l24.90">           }</span>
<a href="#l24.91"></a><span id="l24.91">         }</span>
<a href="#l24.92"></a><span id="l24.92">       } catch(e) { relatedFilesDir = null; }</span>
<a href="#l24.93"></a><span id="l24.93">     }</span>
<a href="#l24.94"></a><span id="l24.94"> </span>
<a href="#l24.95"></a><span id="l24.95">     let destinationLocation = tempLocalFile ? tempLocalFile : docURI;</span>
<a href="#l24.96"></a><span id="l24.96"> </span>
<a href="#l24.97"></a><span id="l24.97">     success = OutputFileWithPersistAPI(editorDoc, destinationLocation, relatedFilesDir, aMimeType);</span>
<a href="#l24.98"></a><span id="l24.98" class="difflineat">@@ -1890,17 +1890,17 @@ function CreateURIFromPublishData(publis</span>
<a href="#l24.99"></a><span id="l24.99">   var URI;</span>
<a href="#l24.100"></a><span id="l24.100">   try {</span>
<a href="#l24.101"></a><span id="l24.101">     var spec = publishData.publishUrl;</span>
<a href="#l24.102"></a><span id="l24.102">     if (doDocUri)</span>
<a href="#l24.103"></a><span id="l24.103">       spec += FormatDirForPublishing(publishData.docDir) + publishData.filename;</span>
<a href="#l24.104"></a><span id="l24.104">     else</span>
<a href="#l24.105"></a><span id="l24.105">       spec += FormatDirForPublishing(publishData.otherDir);</span>
<a href="#l24.106"></a><span id="l24.106"> </span>
<a href="#l24.107"></a><span id="l24.107" class="difflineminus">-    URI = Services.io.newURI(spec, GetCurrentEditor().documentCharacterSet, null);</span>
<a href="#l24.108"></a><span id="l24.108" class="difflineplus">+    URI = Services.io.newURI(spec, GetCurrentEditor().documentCharacterSet);</span>
<a href="#l24.109"></a><span id="l24.109"> </span>
<a href="#l24.110"></a><span id="l24.110">     if (publishData.username)</span>
<a href="#l24.111"></a><span id="l24.111">       URI.username = publishData.username;</span>
<a href="#l24.112"></a><span id="l24.112">     if (publishData.password)</span>
<a href="#l24.113"></a><span id="l24.113">       URI.password = publishData.password;</span>
<a href="#l24.114"></a><span id="l24.114">   }</span>
<a href="#l24.115"></a><span id="l24.115">   catch (e) {}</span>
<a href="#l24.116"></a><span id="l24.116"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/editor/ui/composer/content/editorApplicationOverlay.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/editor/ui/composer/content/editorApplicationOverlay.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -111,17 +111,17 @@ function editPage(url, aFileType)</span>
<a href="#l25.4"></a><span id="l25.4">       NewEditorWindow(url, charsetArg);</span>
<a href="#l25.5"></a><span id="l25.5"> </span>
<a href="#l25.6"></a><span id="l25.6">   } catch(e) {}</span>
<a href="#l25.7"></a><span id="l25.7"> }</span>
<a href="#l25.8"></a><span id="l25.8"> </span>
<a href="#l25.9"></a><span id="l25.9"> function createURI(urlstring)</span>
<a href="#l25.10"></a><span id="l25.10"> {</span>
<a href="#l25.11"></a><span id="l25.11">   try {</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    return Services.io.newURI(urlstring, null, null);</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    return Services.io.newURI(urlstring);</span>
<a href="#l25.14"></a><span id="l25.14">   } catch (e) {}</span>
<a href="#l25.15"></a><span id="l25.15"> </span>
<a href="#l25.16"></a><span id="l25.16">   return null;</span>
<a href="#l25.17"></a><span id="l25.17"> }</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19"> function CheckOpenWindowForURIMatch(uri, win)</span>
<a href="#l25.20"></a><span id="l25.20"> {</span>
<a href="#l25.21"></a><span id="l25.21">   try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/editor/ui/composer/content/editorUtilities.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/editor/ui/composer/content/editorUtilities.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -541,18 +541,18 @@ function MakeRelativeUrl(url)</span>
<a href="#l26.4"></a><span id="l26.4">   var docHost = GetHost(docUrl);</span>
<a href="#l26.5"></a><span id="l26.5">   var urlHost = GetHost(inputUrl);</span>
<a href="#l26.6"></a><span id="l26.6">   if (docHost != urlHost)</span>
<a href="#l26.7"></a><span id="l26.7">     return inputUrl;</span>
<a href="#l26.8"></a><span id="l26.8"> </span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10">   // Get just the file path part of the urls</span>
<a href="#l26.11"></a><span id="l26.11">   // XXX Should we use GetCurrentEditor().documentCharacterSet for 2nd param ?</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  let docPath = Services.io.newURI(docUrl, GetCurrentEditor().documentCharacterSet, null).path;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-  let urlPath = Services.io.newURI(inputUrl, GetCurrentEditor().documentCharacterSet, null).path;</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+  let docPath = Services.io.newURI(docUrl, GetCurrentEditor().documentCharacterSet).path;</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+  let urlPath = Services.io.newURI(inputUrl, GetCurrentEditor().documentCharacterSet).path;</span>
<a href="#l26.16"></a><span id="l26.16"> </span>
<a href="#l26.17"></a><span id="l26.17">   // We only return &quot;urlPath&quot;, so we can convert</span>
<a href="#l26.18"></a><span id="l26.18">   //  the entire docPath for case-insensitive comparisons</span>
<a href="#l26.19"></a><span id="l26.19">   var os = GetOS();</span>
<a href="#l26.20"></a><span id="l26.20">   var doCaseInsensitive = (docScheme == &quot;file&quot; &amp;&amp; os == gWin);</span>
<a href="#l26.21"></a><span id="l26.21">   if (doCaseInsensitive)</span>
<a href="#l26.22"></a><span id="l26.22">     docPath = docPath.toLowerCase();</span>
<a href="#l26.23"></a><span id="l26.23"> </span>
<a href="#l26.24"></a><span id="l26.24" class="difflineat">@@ -654,17 +654,17 @@ function MakeAbsoluteUrl(url)</span>
<a href="#l26.25"></a><span id="l26.25">   let docScheme = GetScheme(docUrl);</span>
<a href="#l26.26"></a><span id="l26.26"> </span>
<a href="#l26.27"></a><span id="l26.27">   // Can't relativize if no doc scheme (page hasn't been saved)</span>
<a href="#l26.28"></a><span id="l26.28">   if (!docScheme)</span>
<a href="#l26.29"></a><span id="l26.29">     return resultUrl;</span>
<a href="#l26.30"></a><span id="l26.30"> </span>
<a href="#l26.31"></a><span id="l26.31">   // Make a URI object to use its &quot;resolve&quot; method</span>
<a href="#l26.32"></a><span id="l26.32">   let absoluteUrl = resultUrl;</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineminus">-  let docUri = Services.io.newURI(docUrl, GetCurrentEditor().documentCharacterSet, null);</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineplus">+  let docUri = Services.io.newURI(docUrl, GetCurrentEditor().documentCharacterSet);</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36">   try {</span>
<a href="#l26.37"></a><span id="l26.37">     absoluteUrl = docUri.resolve(resultUrl);</span>
<a href="#l26.38"></a><span id="l26.38">     // This is deprecated and buggy!</span>
<a href="#l26.39"></a><span id="l26.39">     // If used, we must make it a path for the parent directory (remove filename)</span>
<a href="#l26.40"></a><span id="l26.40">     //absoluteUrl = IOService.resolveRelativePath(resultUrl, docUrl);</span>
<a href="#l26.41"></a><span id="l26.41">   } catch (e) {}</span>
<a href="#l26.42"></a><span id="l26.42"> </span>
<a href="#l26.43"></a><span id="l26.43" class="difflineat">@@ -720,44 +720,44 @@ function GetScheme(urlspec)</span>
<a href="#l26.44"></a><span id="l26.44"> </span>
<a href="#l26.45"></a><span id="l26.45"> function GetHost(urlspec)</span>
<a href="#l26.46"></a><span id="l26.46"> {</span>
<a href="#l26.47"></a><span id="l26.47">   if (!urlspec)</span>
<a href="#l26.48"></a><span id="l26.48">     return &quot;&quot;;</span>
<a href="#l26.49"></a><span id="l26.49"> </span>
<a href="#l26.50"></a><span id="l26.50">   var host = &quot;&quot;;</span>
<a href="#l26.51"></a><span id="l26.51">   try {</span>
<a href="#l26.52"></a><span id="l26.52" class="difflineminus">-    host = Services.io.newURI(urlspec, null, null).host;</span>
<a href="#l26.53"></a><span id="l26.53" class="difflineplus">+    host = Services.io.newURI(urlspec).host;</span>
<a href="#l26.54"></a><span id="l26.54">    } catch (e) {}</span>
<a href="#l26.55"></a><span id="l26.55"> </span>
<a href="#l26.56"></a><span id="l26.56">   return host;</span>
<a href="#l26.57"></a><span id="l26.57"> }</span>
<a href="#l26.58"></a><span id="l26.58"> </span>
<a href="#l26.59"></a><span id="l26.59"> function GetUsername(urlspec)</span>
<a href="#l26.60"></a><span id="l26.60"> {</span>
<a href="#l26.61"></a><span id="l26.61">   if (!urlspec)</span>
<a href="#l26.62"></a><span id="l26.62">     return &quot;&quot;;</span>
<a href="#l26.63"></a><span id="l26.63"> </span>
<a href="#l26.64"></a><span id="l26.64">   var username = &quot;&quot;;</span>
<a href="#l26.65"></a><span id="l26.65">   try {</span>
<a href="#l26.66"></a><span id="l26.66" class="difflineminus">-    username = Services.io.newURI(urlspec, null, null).username;</span>
<a href="#l26.67"></a><span id="l26.67" class="difflineplus">+    username = Services.io.newURI(urlspec).username;</span>
<a href="#l26.68"></a><span id="l26.68">   } catch (e) {}</span>
<a href="#l26.69"></a><span id="l26.69"> </span>
<a href="#l26.70"></a><span id="l26.70">   return username;</span>
<a href="#l26.71"></a><span id="l26.71"> }</span>
<a href="#l26.72"></a><span id="l26.72"> </span>
<a href="#l26.73"></a><span id="l26.73"> function GetFilename(urlspec)</span>
<a href="#l26.74"></a><span id="l26.74"> {</span>
<a href="#l26.75"></a><span id="l26.75">   if (!urlspec || IsUrlAboutBlank(urlspec))</span>
<a href="#l26.76"></a><span id="l26.76">     return &quot;&quot;;</span>
<a href="#l26.77"></a><span id="l26.77"> </span>
<a href="#l26.78"></a><span id="l26.78">   var filename;</span>
<a href="#l26.79"></a><span id="l26.79"> </span>
<a href="#l26.80"></a><span id="l26.80">   try {</span>
<a href="#l26.81"></a><span id="l26.81" class="difflineminus">-    let uri = Services.io.newURI(urlspec, null, null);</span>
<a href="#l26.82"></a><span id="l26.82" class="difflineplus">+    let uri = Services.io.newURI(urlspec);</span>
<a href="#l26.83"></a><span id="l26.83">     if (uri)</span>
<a href="#l26.84"></a><span id="l26.84">     {</span>
<a href="#l26.85"></a><span id="l26.85">       let url = uri.QueryInterface(Components.interfaces.nsIURL);</span>
<a href="#l26.86"></a><span id="l26.86">       if (url)</span>
<a href="#l26.87"></a><span id="l26.87">         filename = url.fileName;</span>
<a href="#l26.88"></a><span id="l26.88">     }</span>
<a href="#l26.89"></a><span id="l26.89">   } catch (e) {}</span>
<a href="#l26.90"></a><span id="l26.90"> </span>
<a href="#l26.91"></a><span id="l26.91" class="difflineat">@@ -778,17 +778,17 @@ function StripUsernamePassword(urlspec, </span>
<a href="#l26.92"></a><span id="l26.92">   if (passwordObj)</span>
<a href="#l26.93"></a><span id="l26.93">     passwordObj.value = &quot;&quot;;</span>
<a href="#l26.94"></a><span id="l26.94"> </span>
<a href="#l26.95"></a><span id="l26.95">   // &quot;@&quot; must exist else we will never detect username or password</span>
<a href="#l26.96"></a><span id="l26.96">   var atIndex = urlspec.indexOf(&quot;@&quot;);</span>
<a href="#l26.97"></a><span id="l26.97">   if (atIndex &gt; 0)</span>
<a href="#l26.98"></a><span id="l26.98">   {</span>
<a href="#l26.99"></a><span id="l26.99">     try {</span>
<a href="#l26.100"></a><span id="l26.100" class="difflineminus">-      let uri = Services.io.newURI(urlspec, null, null);</span>
<a href="#l26.101"></a><span id="l26.101" class="difflineplus">+      let uri = Services.io.newURI(urlspec);</span>
<a href="#l26.102"></a><span id="l26.102">       let username = uri.username;</span>
<a href="#l26.103"></a><span id="l26.103">       let password = uri.password;</span>
<a href="#l26.104"></a><span id="l26.104"> </span>
<a href="#l26.105"></a><span id="l26.105">       if (usernameObj &amp;&amp; username)</span>
<a href="#l26.106"></a><span id="l26.106">         usernameObj.value = username;</span>
<a href="#l26.107"></a><span id="l26.107">       if (passwordObj &amp;&amp; password)</span>
<a href="#l26.108"></a><span id="l26.108">         passwordObj.value = password;</span>
<a href="#l26.109"></a><span id="l26.109">       if (username)</span>
<a href="#l26.110"></a><span id="l26.110" class="difflineat">@@ -811,17 +811,17 @@ function StripPassword(urlspec, password</span>
<a href="#l26.111"></a><span id="l26.111">   if (passwordObj)</span>
<a href="#l26.112"></a><span id="l26.112">     passwordObj.value = &quot;&quot;;</span>
<a href="#l26.113"></a><span id="l26.113"> </span>
<a href="#l26.114"></a><span id="l26.114">   // &quot;@&quot; must exist else we will never detect password</span>
<a href="#l26.115"></a><span id="l26.115">   var atIndex = urlspec.indexOf(&quot;@&quot;);</span>
<a href="#l26.116"></a><span id="l26.116">   if (atIndex &gt; 0)</span>
<a href="#l26.117"></a><span id="l26.117">   {</span>
<a href="#l26.118"></a><span id="l26.118">     try {</span>
<a href="#l26.119"></a><span id="l26.119" class="difflineminus">-      let password = Services.io.newURI(urlspec, null, null).password;</span>
<a href="#l26.120"></a><span id="l26.120" class="difflineplus">+      let password = Services.io.newURI(urlspec).password;</span>
<a href="#l26.121"></a><span id="l26.121"> </span>
<a href="#l26.122"></a><span id="l26.122">       if (passwordObj &amp;&amp; password)</span>
<a href="#l26.123"></a><span id="l26.123">         passwordObj.value = password;</span>
<a href="#l26.124"></a><span id="l26.124">       if (password)</span>
<a href="#l26.125"></a><span id="l26.125">       {</span>
<a href="#l26.126"></a><span id="l26.126">         // Find last &quot;:&quot; before &quot;@&quot;</span>
<a href="#l26.127"></a><span id="l26.127">         let colon = urlspec.lastIndexOf(&quot;:&quot;, atIndex);</span>
<a href="#l26.128"></a><span id="l26.128">         if (colon != -1)</span>
<a href="#l26.129"></a><span id="l26.129" class="difflineat">@@ -855,17 +855,17 @@ function StripUsernamePasswordFromURI(ur</span>
<a href="#l26.130"></a><span id="l26.130"> }</span>
<a href="#l26.131"></a><span id="l26.131"> </span>
<a href="#l26.132"></a><span id="l26.132"> function InsertUsernameIntoUrl(urlspec, username)</span>
<a href="#l26.133"></a><span id="l26.133"> {</span>
<a href="#l26.134"></a><span id="l26.134">   if (!urlspec || !username)</span>
<a href="#l26.135"></a><span id="l26.135">     return urlspec;</span>
<a href="#l26.136"></a><span id="l26.136"> </span>
<a href="#l26.137"></a><span id="l26.137">   try {</span>
<a href="#l26.138"></a><span id="l26.138" class="difflineminus">-    let URI = Services.io.newURI(urlspec, GetCurrentEditor().documentCharacterSet, null);</span>
<a href="#l26.139"></a><span id="l26.139" class="difflineplus">+    let URI = Services.io.newURI(urlspec, GetCurrentEditor().documentCharacterSet);</span>
<a href="#l26.140"></a><span id="l26.140">     URI.username = username;</span>
<a href="#l26.141"></a><span id="l26.141">     return URI.spec;</span>
<a href="#l26.142"></a><span id="l26.142">   } catch (e) {}</span>
<a href="#l26.143"></a><span id="l26.143"> </span>
<a href="#l26.144"></a><span id="l26.144">   return urlspec;</span>
<a href="#l26.145"></a><span id="l26.145"> }</span>
<a href="#l26.146"></a><span id="l26.146"> </span>
<a href="#l26.147"></a><span id="l26.147"> function GetOS()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/editor/ui/composer/content/publishprefs.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/editor/ui/composer/content/publishprefs.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -855,17 +855,17 @@ function SavePassword(publishData)</span>
<a href="#l27.4"></a><span id="l27.4">   return true;</span>
<a href="#l27.5"></a><span id="l27.5"> }</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7"> function GetUrlForPasswordManager(publishData)</span>
<a href="#l27.8"></a><span id="l27.8"> {</span>
<a href="#l27.9"></a><span id="l27.9">   if (!publishData || !publishData.publishUrl)</span>
<a href="#l27.10"></a><span id="l27.10">     return false;</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  let url = Services.io.newURI(publishData.publishUrl, null, null);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  let url = Services.io.newURI(publishData.publishUrl);</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15">   if (url.scheme == &quot;ftp&quot; &amp;&amp; publishData.username)</span>
<a href="#l27.16"></a><span id="l27.16">     // Include username in the URL so we can handle multiple users per server</span>
<a href="#l27.17"></a><span id="l27.17">     // in the password manager</span>
<a href="#l27.18"></a><span id="l27.18">     url = url.scheme + &quot;://&quot; + publishData.username + &quot;@&quot; + url.hostPort;</span>
<a href="#l27.19"></a><span id="l27.19">   else</span>
<a href="#l27.20"></a><span id="l27.20">     url = url.scheme + &quot;://&quot; + url.hostPort;</span>
<a href="#l27.21"></a><span id="l27.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/editor/ui/dialogs/content/EdImageOverlay.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/editor/ui/dialogs/content/EdImageOverlay.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -333,17 +333,17 @@ function LoadPreviewImage()</span>
<a href="#l28.4"></a><span id="l28.4">     //  (if we don't do this, loads after the first will always use image cache</span>
<a href="#l28.5"></a><span id="l28.5">     //   and we won't see image edit changes or be able to get actual width and height)</span>
<a href="#l28.6"></a><span id="l28.6"> </span>
<a href="#l28.7"></a><span id="l28.7">     // We must have an absolute URL to preview it or remove it from the cache</span>
<a href="#l28.8"></a><span id="l28.8">     imageSrc = MakeAbsoluteUrl(imageSrc);</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10">     if (GetScheme(imageSrc))</span>
<a href="#l28.11"></a><span id="l28.11">     {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-      let uri = Services.io.newURI(imageSrc, null, null);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+      let uri = Services.io.newURI(imageSrc);</span>
<a href="#l28.14"></a><span id="l28.14">       if (uri)</span>
<a href="#l28.15"></a><span id="l28.15">       {</span>
<a href="#l28.16"></a><span id="l28.16">         let imgCache = Components.classes[&quot;@mozilla.org/image/cache;1&quot;]</span>
<a href="#l28.17"></a><span id="l28.17">                                  .getService(Components.interfaces.imgICache);</span>
<a href="#l28.18"></a><span id="l28.18"> </span>
<a href="#l28.19"></a><span id="l28.19">         // This returns error if image wasn't in the cache; ignore that</span>
<a href="#l28.20"></a><span id="l28.20">         imgCache.removeEntry(uri);</span>
<a href="#l28.21"></a><span id="l28.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/editor/ui/dialogs/content/EdLinkChecker.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/editor/ui/dialogs/content/EdLinkChecker.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -83,17 +83,17 @@ function Startup()</span>
<a href="#l29.4"></a><span id="l29.4">           gURIRefObjects[gNumLinksToCheck] = refobj;</span>
<a href="#l29.5"></a><span id="l29.5"> </span>
<a href="#l29.6"></a><span id="l29.6">           // Make a new nsIURIChecker</span>
<a href="#l29.7"></a><span id="l29.7">           gLinksBeingChecked[gNumLinksToCheck]</span>
<a href="#l29.8"></a><span id="l29.8">             = Components.classes[&quot;@mozilla.org/network/urichecker;1&quot;]</span>
<a href="#l29.9"></a><span id="l29.9">                 .createInstance()</span>
<a href="#l29.10"></a><span id="l29.10">                   .QueryInterface(Components.interfaces.nsIURIChecker);</span>
<a href="#l29.11"></a><span id="l29.11">           // XXX uri creation needs to be localized</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-          gLinksBeingChecked[gNumLinksToCheck].init(GetIOService().newURI(uri, null, null));</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+          gLinksBeingChecked[gNumLinksToCheck].init(GetIOService().newURI(uri));</span>
<a href="#l29.14"></a><span id="l29.14">           gLinksBeingChecked[gNumLinksToCheck].asyncCheck(gRequestObserver, null);</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16">           // Add item</span>
<a href="#l29.17"></a><span id="l29.17">           let linkChecker = gLinksBeingChecked[gNumLinksToCheck]</span>
<a href="#l29.18"></a><span id="l29.18">                             .QueryInterface(Components.interfaces.nsIURIChecker);</span>
<a href="#l29.19"></a><span id="l29.19">           SetItemStatus(linkChecker.name, &quot;busy&quot;);</span>
<a href="#l29.20"></a><span id="l29.20">           dump(&quot; *** Linkcount = &quot;+gNumLinksToCheck+&quot;\n&quot;);</span>
<a href="#l29.21"></a><span id="l29.21">           gNumLinksToCheck++;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/im/content/aboutPanel.xml</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/im/content/aboutPanel.xml</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -60,17 +60,17 @@</span>
<a href="#l30.4"></a><span id="l30.4">       &lt;constructor&gt;</span>
<a href="#l30.5"></a><span id="l30.5">       &lt;![CDATA[</span>
<a href="#l30.6"></a><span id="l30.6">         this.browser.addEventListener(&quot;DOMTitleChanged&quot;, this.refreshTitle.bind(this));</span>
<a href="#l30.7"></a><span id="l30.7">         // The addon manager does its own link handling using window.open().</span>
<a href="#l30.8"></a><span id="l30.8">         // We need to override this method to open http links externally.</span>
<a href="#l30.9"></a><span id="l30.9">         let win = this.browser.contentWindow;</span>
<a href="#l30.10"></a><span id="l30.10">         let open = win.open;</span>
<a href="#l30.11"></a><span id="l30.11">         win.open = function(aUrl) {</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-          let uri = Services.io.newURI(aUrl, null, null);</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+          let uri = Services.io.newURI(aUrl);</span>
<a href="#l30.14"></a><span id="l30.14">           if (!uri.schemeIs(&quot;http&quot;) &amp;&amp; !uri.schemeIs(&quot;https&quot;)) {</span>
<a href="#l30.15"></a><span id="l30.15">             open.apply(this, arguments);</span>
<a href="#l30.16"></a><span id="l30.16">           }</span>
<a href="#l30.17"></a><span id="l30.17">           else {</span>
<a href="#l30.18"></a><span id="l30.18">             Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l30.19"></a><span id="l30.19">                       .getService(Components.interfaces.nsIExternalProtocolService).loadUrl(uri);</span>
<a href="#l30.20"></a><span id="l30.20">           }</span>
<a href="#l30.21"></a><span id="l30.21">         }</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -112,14 +112,14 @@</span>
<a href="#l30.23"></a><span id="l30.23">           // If we couldn't add a new tab, load the page in this one.</span>
<a href="#l30.24"></a><span id="l30.24">           this.showAboutPage(url);</span>
<a href="#l30.25"></a><span id="l30.25">           return;</span>
<a href="#l30.26"></a><span id="l30.26">         }</span>
<a href="#l30.27"></a><span id="l30.27">         // Otherwise open in default browser.</span>
<a href="#l30.28"></a><span id="l30.28">         // loadUrl can throw if the default browser is misconfigured.</span>
<a href="#l30.29"></a><span id="l30.29">         Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l30.30"></a><span id="l30.30">                   .getService(Components.interfaces.nsIExternalProtocolService)</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-                  .loadUrl(Services.io.newURI(url, null, null));</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+                  .loadUrl(Services.io.newURI(url));</span>
<a href="#l30.33"></a><span id="l30.33">       ]]&gt;</span>
<a href="#l30.34"></a><span id="l30.34">       &lt;/handler&gt;</span>
<a href="#l30.35"></a><span id="l30.35">     &lt;/handlers&gt;</span>
<a href="#l30.36"></a><span id="l30.36">   &lt;/binding&gt;</span>
<a href="#l30.37"></a><span id="l30.37"> &lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/im/content/accountWizard.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/im/content/accountWizard.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -471,17 +471,17 @@ var accountWizard = {</span>
<a href="#l31.4"></a><span id="l31.4">       catch (e) { }</span>
<a href="#l31.5"></a><span id="l31.5">     }</span>
<a href="#l31.6"></a><span id="l31.6">     getMore.hidden = !showGetMore;</span>
<a href="#l31.7"></a><span id="l31.7">   },</span>
<a href="#l31.8"></a><span id="l31.8"> </span>
<a href="#l31.9"></a><span id="l31.9">   openURL: function (aURL) {</span>
<a href="#l31.10"></a><span id="l31.10">     Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l31.11"></a><span id="l31.11">               .getService(Components.interfaces.nsIExternalProtocolService)</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-              .loadUrl(Services.io.newURI(aURL, null, null));</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+              .loadUrl(Services.io.newURI(aURL));</span>
<a href="#l31.14"></a><span id="l31.14">   },</span>
<a href="#l31.15"></a><span id="l31.15"> </span>
<a href="#l31.16"></a><span id="l31.16">   advanceTopProtocolPage: function() {</span>
<a href="#l31.17"></a><span id="l31.17">     let selectedProtocol = document.getElementById(&quot;topprotolist&quot;).selectedItem;</span>
<a href="#l31.18"></a><span id="l31.18">     if (!selectedProtocol || selectedProtocol.id == &quot;otherListItem&quot;)</span>
<a href="#l31.19"></a><span id="l31.19">       return true;</span>
<a href="#l31.20"></a><span id="l31.20">     accountWizard.selectProtocol();</span>
<a href="#l31.21"></a><span id="l31.21">     document.getElementById(&quot;accountWizard&quot;).goTo(&quot;accountusername&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/im/content/engineManager.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/im/content/engineManager.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -72,17 +72,17 @@ var gEngineManagerDialog = {</span>
<a href="#l32.4"></a><span id="l32.4">     this.onOK();</span>
<a href="#l32.5"></a><span id="l32.5"> </span>
<a href="#l32.6"></a><span id="l32.6">     var formatter = Cc[&quot;@mozilla.org/toolkit/URLFormatterService;1&quot;].getService(Ci.nsIURLFormatter);</span>
<a href="#l32.7"></a><span id="l32.7">     var url = formatter.formatURLPref(&quot;browser.search.searchEnginesURL&quot;);</span>
<a href="#l32.8"></a><span id="l32.8"> </span>
<a href="#l32.9"></a><span id="l32.9">     var ios = Cc[&quot;@mozilla.org/network/io-service;1&quot;].getService(Ci.nsIIOService);</span>
<a href="#l32.10"></a><span id="l32.10">     Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l32.11"></a><span id="l32.11">               .getService(Ci.nsIExternalProtocolService)</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-              .loadURI(ios.newURI(url, null, null), window);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+              .loadURI(ios.newURI(url), window);</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15">     window.close();</span>
<a href="#l32.16"></a><span id="l32.16">   },</span>
<a href="#l32.17"></a><span id="l32.17"> </span>
<a href="#l32.18"></a><span id="l32.18">   remove: function engineManager_remove() {</span>
<a href="#l32.19"></a><span id="l32.19">     gEngineView._engineStore.removeEngine(gEngineView.selectedEngine);</span>
<a href="#l32.20"></a><span id="l32.20">     var index = gEngineView.selectedIndex;</span>
<a href="#l32.21"></a><span id="l32.21">     gEngineView.rowCountChanged(index, -1);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/im/content/extensions-discover.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/im/content/extensions-discover.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l33.4"></a><span id="l33.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6"> var {classes: Cc, interfaces: Ci, utils: Cu} = Components;</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8"> Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l33.9"></a><span id="l33.9"> </span>
<a href="#l33.10"></a><span id="l33.10"> var defaultOpen = window.open;</span>
<a href="#l33.11"></a><span id="l33.11"> window.open = function(aUrl) {</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  let uri = Services.io.newURI(aUrl, null, null);</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  let uri = Services.io.newURI(aUrl);</span>
<a href="#l33.14"></a><span id="l33.14"> </span>
<a href="#l33.15"></a><span id="l33.15">   // http and https are the only schemes that are exposed even</span>
<a href="#l33.16"></a><span id="l33.16">   // though we don't handle them internally.</span>
<a href="#l33.17"></a><span id="l33.17">   if (!uri.schemeIs(&quot;http&quot;) &amp;&amp; !uri.schemeIs(&quot;https&quot;))</span>
<a href="#l33.18"></a><span id="l33.18">     defaultOpen.apply(this, arguments);</span>
<a href="#l33.19"></a><span id="l33.19">   else {</span>
<a href="#l33.20"></a><span id="l33.20">     Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l33.21"></a><span id="l33.21">       .getService(Ci.nsIExternalProtocolService).loadUrl(uri);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/im/content/extensions.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/im/content/extensions.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -15,17 +15,17 @@ var addonsRegister = {</span>
<a href="#l34.4"></a><span id="l34.4">     Services.obs.addObserver(addonsRegister, &quot;addon-install-failed&quot;, false);</span>
<a href="#l34.5"></a><span id="l34.5">     Services.obs.addObserver(addonsRegister, &quot;addon-install-complete&quot;, false);</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">     window.addEventListener(&quot;unload&quot;, addonsRegister.onunload, {once: true});</span>
<a href="#l34.8"></a><span id="l34.8"> </span>
<a href="#l34.9"></a><span id="l34.9">     let win = document.getElementById(&quot;dummychromebrowser&quot;).contentWindow;</span>
<a href="#l34.10"></a><span id="l34.10">     let open = win.open;</span>
<a href="#l34.11"></a><span id="l34.11">     win.open = function(aUrl) {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-      let uri = Services.io.newURI(aUrl, null, null);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+      let uri = Services.io.newURI(aUrl);</span>
<a href="#l34.14"></a><span id="l34.14"> </span>
<a href="#l34.15"></a><span id="l34.15">       // http and https are the only schemes that are exposed even</span>
<a href="#l34.16"></a><span id="l34.16">       // though we don't handle them internally.</span>
<a href="#l34.17"></a><span id="l34.17">       if (!uri.schemeIs(&quot;http&quot;) &amp;&amp; !uri.schemeIs(&quot;https&quot;))</span>
<a href="#l34.18"></a><span id="l34.18">         open.apply(this, arguments);</span>
<a href="#l34.19"></a><span id="l34.19">       else {</span>
<a href="#l34.20"></a><span id="l34.20">         Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l34.21"></a><span id="l34.21">           .getService(Ci.nsIExternalProtocolService).loadUrl(uri);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/im/content/nsContextMenu.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/im/content/nsContextMenu.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -420,17 +420,17 @@ nsContextMenu.prototype = {</span>
<a href="#l35.4"></a><span id="l35.4">       throw &quot;Empty href&quot;;</span>
<a href="#l35.5"></a><span id="l35.5">     }</span>
<a href="#l35.6"></a><span id="l35.6"> </span>
<a href="#l35.7"></a><span id="l35.7">     return makeURLAbsolute(this.link.baseURI, href);</span>
<a href="#l35.8"></a><span id="l35.8">   },</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10">   getLinkURI: function() {</span>
<a href="#l35.11"></a><span id="l35.11">     try {</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-      return Services.io.newURI(this.linkURL, null, null);</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+      return Services.io.newURI(this.linkURL);</span>
<a href="#l35.14"></a><span id="l35.14">     }</span>
<a href="#l35.15"></a><span id="l35.15">     catch (ex) {</span>
<a href="#l35.16"></a><span id="l35.16">      // e.g. empty URL string</span>
<a href="#l35.17"></a><span id="l35.17">     }</span>
<a href="#l35.18"></a><span id="l35.18"> </span>
<a href="#l35.19"></a><span id="l35.19">     return null;</span>
<a href="#l35.20"></a><span id="l35.20">   },</span>
<a href="#l35.21"></a><span id="l35.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/im/content/preferences/applications.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/im/content/preferences/applications.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -1072,17 +1072,17 @@ var gApplicationsPane = {</span>
<a href="#l36.4"></a><span id="l36.4">     var fph = Services.io.getProtocolHandler(&quot;file&quot;).</span>
<a href="#l36.5"></a><span id="l36.5">               QueryInterface(Ci.nsIFileProtocolHandler);</span>
<a href="#l36.6"></a><span id="l36.6">     var urlSpec = fph.getURLSpecFromFile(aFile);</span>
<a href="#l36.7"></a><span id="l36.7"> </span>
<a href="#l36.8"></a><span id="l36.8">     return &quot;moz-icon://&quot; + urlSpec + &quot;?size=16&quot;;</span>
<a href="#l36.9"></a><span id="l36.9">   },</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11">   _getIconURLForWebApp: function(aWebAppURITemplate) {</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    var uri = Services.io.newURI(aWebAppURITemplate, null, null);</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+    var uri = Services.io.newURI(aWebAppURITemplate);</span>
<a href="#l36.14"></a><span id="l36.14"> </span>
<a href="#l36.15"></a><span id="l36.15">     // Unfortunately we can't use the favicon service to get the favicon,</span>
<a href="#l36.16"></a><span id="l36.16">     // because the service looks in the annotations table for a record with</span>
<a href="#l36.17"></a><span id="l36.17">     // the exact URL we give it, and users won't have such records for URLs</span>
<a href="#l36.18"></a><span id="l36.18">     // they don't visit, and users won't visit the web app's URL template,</span>
<a href="#l36.19"></a><span id="l36.19">     // they'll only visit URLs derived from that template (i.e. with %s</span>
<a href="#l36.20"></a><span id="l36.20">     // in the template replaced by the URL of the content being handled).</span>
<a href="#l36.21"></a><span id="l36.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/im/content/preferences/themes.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/im/content/preferences/themes.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -88,17 +88,17 @@ var gThemePane = {</span>
<a href="#l37.4"></a><span id="l37.4">       if (!aItem.isActive || aItem.userDisabled)</span>
<a href="#l37.5"></a><span id="l37.5">         item.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l37.6"></a><span id="l37.6">     });</span>
<a href="#l37.7"></a><span id="l37.7">   },</span>
<a href="#l37.8"></a><span id="l37.8"> </span>
<a href="#l37.9"></a><span id="l37.9">   openURL: function (aURL) {</span>
<a href="#l37.10"></a><span id="l37.10">     Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l37.11"></a><span id="l37.11">               .getService(Components.interfaces.nsIExternalProtocolService)</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-              .loadUrl(Services.io.newURI(aURL, null, null));</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+              .loadUrl(Services.io.newURI(aURL));</span>
<a href="#l37.14"></a><span id="l37.14">   },</span>
<a href="#l37.15"></a><span id="l37.15"> </span>
<a href="#l37.16"></a><span id="l37.16">   // Getting the extension list is slow, return a cached copy of the list</span>
<a href="#l37.17"></a><span id="l37.17">   getExtensionList: function () {</span>
<a href="#l37.18"></a><span id="l37.18">     if (!this.extensionList)</span>
<a href="#l37.19"></a><span id="l37.19">       throw &quot;The add-ons list should be loaded by now...&quot;;</span>
<a href="#l37.20"></a><span id="l37.20">     return this.extensionList;</span>
<a href="#l37.21"></a><span id="l37.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/im/modules/ibCore.jsm</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/im/modules/ibCore.jsm</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -101,17 +101,17 @@ var Core = {</span>
<a href="#l38.4"></a><span id="l38.4">       get helpString() { return self.bundle(&quot;aboutCommand.help&quot;); },</span>
<a href="#l38.5"></a><span id="l38.5">       usageContext: Ci.imICommand.CMD_CONTEXT_ALL,</span>
<a href="#l38.6"></a><span id="l38.6">       priority: Ci.imICommand.CMD_PRIORITY_DEFAULT,</span>
<a href="#l38.7"></a><span id="l38.7">       run: function (aMsg, aConv) {</span>
<a href="#l38.8"></a><span id="l38.8">         let page = aMsg.replace(/^about:/, &quot;&quot;);</span>
<a href="#l38.9"></a><span id="l38.9">         let url = &quot;about:&quot; + page;</span>
<a href="#l38.10"></a><span id="l38.10">         // If the page doesn't exist, we avoid opening a tab.</span>
<a href="#l38.11"></a><span id="l38.11">         try {</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-          Services.io.newChannelFromURI(Services.io.newURI(url, null, null));</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+          Services.io.newChannelFromURI(Services.io.newURI(url));</span>
<a href="#l38.14"></a><span id="l38.14">         } catch(e) {</span>
<a href="#l38.15"></a><span id="l38.15">           if (e.result == Components.results.NS_ERROR_MALFORMED_URI) {</span>
<a href="#l38.16"></a><span id="l38.16">             Services.conversations.getUIConversation(aConv).systemMessage(</span>
<a href="#l38.17"></a><span id="l38.17">               self.bundle(&quot;aboutCommand.invalidPageMessage&quot;, page));</span>
<a href="#l38.18"></a><span id="l38.18">             return true;</span>
<a href="#l38.19"></a><span id="l38.19">           }</span>
<a href="#l38.20"></a><span id="l38.20">           Components.utils.reportError(e); // Log unexpected errors.</span>
<a href="#l38.21"></a><span id="l38.21">           return false;</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -288,17 +288,17 @@ var Core = {</span>
<a href="#l38.23"></a><span id="l38.23">                              &quot;chrome://chat/content/browserRequest.xul&quot;,</span>
<a href="#l38.24"></a><span id="l38.24">                              null, &quot;chrome&quot;, aSubject);</span>
<a href="#l38.25"></a><span id="l38.25">       return;</span>
<a href="#l38.26"></a><span id="l38.26">     }</span>
<a href="#l38.27"></a><span id="l38.27"> </span>
<a href="#l38.28"></a><span id="l38.28">     if (aTopic == &quot;handle-xul-text-link&quot;) {</span>
<a href="#l38.29"></a><span id="l38.29">       Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l38.30"></a><span id="l38.30">         .getService(Ci.nsIExternalProtocolService)</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-        .loadURI(Services.io.newURI(aData, null, null));</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+        .loadURI(Services.io.newURI(aData));</span>
<a href="#l38.33"></a><span id="l38.33">       aSubject.QueryInterface(Ci.nsISupportsPRBool).data = true;</span>
<a href="#l38.34"></a><span id="l38.34">       return;</span>
<a href="#l38.35"></a><span id="l38.35">     }</span>
<a href="#l38.36"></a><span id="l38.36"> </span>
<a href="#l38.37"></a><span id="l38.37">     if (aTopic == &quot;quit-application-requested&quot;) {</span>
<a href="#l38.38"></a><span id="l38.38">       this._onQuitRequest(aSubject, aData);</span>
<a href="#l38.39"></a><span id="l38.39">       return;</span>
<a href="#l38.40"></a><span id="l38.40">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/ldap/xpcom/tests/unit/test_nsLDAPURL.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/ldap/xpcom/tests/unit/test_nsLDAPURL.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -83,17 +83,17 @@ function run_test() {</span>
<a href="#l39.4"></a><span id="l39.4">                     .getService(Ci.nsIIOService);</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6">   // Test - get and check urls.</span>
<a href="#l39.7"></a><span id="l39.7"> </span>
<a href="#l39.8"></a><span id="l39.8">   var part = 0;</span>
<a href="#l39.9"></a><span id="l39.9">   for (part = 0; part &lt; ldapURLs.length; ++part)</span>
<a href="#l39.10"></a><span id="l39.10">   {</span>
<a href="#l39.11"></a><span id="l39.11">     dump(&quot;url: &quot; + ldapURLs[part].url + &quot;\n&quot;);</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    url = ioService.newURI(ldapURLs[part].url, null, null);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+    url = ioService.newURI(ldapURLs[part].url);</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15">     do_check_eq(url.spec, ldapURLs[part].spec);</span>
<a href="#l39.16"></a><span id="l39.16">     do_check_eq(url.asciiSpec, ldapURLs[part].asciiSpec);</span>
<a href="#l39.17"></a><span id="l39.17">     do_check_eq(url.scheme, ldapURLs[part].scheme);</span>
<a href="#l39.18"></a><span id="l39.18">     do_check_eq(url.host, ldapURLs[part].host);</span>
<a href="#l39.19"></a><span id="l39.19">     do_check_eq(url.asciiHost, ldapURLs[part].asciiHost);</span>
<a href="#l39.20"></a><span id="l39.20">     do_check_eq(url.port, ldapURLs[part].port);</span>
<a href="#l39.21"></a><span id="l39.21">     do_check_eq(url.path, ldapURLs[part].path);</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineat">@@ -108,17 +108,17 @@ function run_test() {</span>
<a href="#l39.23"></a><span id="l39.23">   }</span>
<a href="#l39.24"></a><span id="l39.24"> </span>
<a href="#l39.25"></a><span id="l39.25">   // Test - Check changing ldap values</span>
<a href="#l39.26"></a><span id="l39.26">   dump(&quot;Other Tests\n&quot;);</span>
<a href="#l39.27"></a><span id="l39.27"> </span>
<a href="#l39.28"></a><span id="l39.28">   // Start off with a base url</span>
<a href="#l39.29"></a><span id="l39.29">   const kBaseURL = &quot;ldap://localhost:389/dc=test,dc=abc??sub?(objectclass=*)&quot;;</span>
<a href="#l39.30"></a><span id="l39.30"> </span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-  url = ioService.newURI(kBaseURL, null, null)</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineplus">+  url = ioService.newURI(kBaseURL)</span>
<a href="#l39.33"></a><span id="l39.33">                  .QueryInterface(Ci.nsILDAPURL);</span>
<a href="#l39.34"></a><span id="l39.34"> </span>
<a href="#l39.35"></a><span id="l39.35">   // Test - dn</span>
<a href="#l39.36"></a><span id="l39.36"> </span>
<a href="#l39.37"></a><span id="l39.37">   url.dn = &quot;dc=short&quot;;</span>
<a href="#l39.38"></a><span id="l39.38"> </span>
<a href="#l39.39"></a><span id="l39.39">   do_check_eq(url.dn, &quot;dc=short&quot;);</span>
<a href="#l39.40"></a><span id="l39.40">   do_check_eq(url.spec, &quot;ldap://localhost&quot; + portAdpt + &quot;/dc=short??sub?(objectclass=*)&quot;);</span>
<a href="#l39.41"></a><span id="l39.41" class="difflineat">@@ -180,17 +180,17 @@ function run_test() {</span>
<a href="#l39.42"></a><span id="l39.42"> </span>
<a href="#l39.43"></a><span id="l39.43">   url.options = 0;</span>
<a href="#l39.44"></a><span id="l39.44"> </span>
<a href="#l39.45"></a><span id="l39.45">   do_check_eq(url.options, 0);</span>
<a href="#l39.46"></a><span id="l39.46">   do_check_eq(url.spec, &quot;ldap://localhost&quot; + portAdpt + &quot;/dc=short??one?(objectclass=*)&quot;);</span>
<a href="#l39.47"></a><span id="l39.47"> </span>
<a href="#l39.48"></a><span id="l39.48">   // Test - Equals</span>
<a href="#l39.49"></a><span id="l39.49"> </span>
<a href="#l39.50"></a><span id="l39.50" class="difflineminus">-  var url2 = ioService.newURI(&quot;ldap://localhost&quot; + portAdpt + &quot;/dc=short??one?(objectclass=*)&quot;, null, null)</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineplus">+  var url2 = ioService.newURI(&quot;ldap://localhost&quot; + portAdpt + &quot;/dc=short??one?(objectclass=*)&quot;)</span>
<a href="#l39.52"></a><span id="l39.52">                       .QueryInterface(Ci.nsILDAPURL);</span>
<a href="#l39.53"></a><span id="l39.53"> </span>
<a href="#l39.54"></a><span id="l39.54">   do_check_true(url.equals(url2));</span>
<a href="#l39.55"></a><span id="l39.55"> </span>
<a href="#l39.56"></a><span id="l39.56">   url2.spec = &quot;ldap://localhost:389/dc=short??sub?(objectclass=*)&quot;;</span>
<a href="#l39.57"></a><span id="l39.57"> </span>
<a href="#l39.58"></a><span id="l39.58">   do_check_false(url.equals(url2));</span>
<a href="#l39.59"></a><span id="l39.59"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/base/content/contentAreaClick.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/base/content/contentAreaClick.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -169,17 +169,17 @@ function contentAreaClick(aEvent)</span>
<a href="#l40.4"></a><span id="l40.4">  * service settings.</span>
<a href="#l40.5"></a><span id="l40.5">  *</span>
<a href="#l40.6"></a><span id="l40.6">  * @param url  A url string or an nsIURI containing the url to open.</span>
<a href="#l40.7"></a><span id="l40.7">  */</span>
<a href="#l40.8"></a><span id="l40.8"> function openLinkExternally(url)</span>
<a href="#l40.9"></a><span id="l40.9"> {</span>
<a href="#l40.10"></a><span id="l40.10">   let uri = url;</span>
<a href="#l40.11"></a><span id="l40.11">   if (!(uri instanceof Components.interfaces.nsIURI))</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-    uri = Services.io.newURI(url, null, null);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+    uri = Services.io.newURI(url);</span>
<a href="#l40.14"></a><span id="l40.14"> </span>
<a href="#l40.15"></a><span id="l40.15">   PlacesUtils.asyncHistory.updatePlaces({</span>
<a href="#l40.16"></a><span id="l40.16">     uri: uri,</span>
<a href="#l40.17"></a><span id="l40.17">     visits:  [{</span>
<a href="#l40.18"></a><span id="l40.18">       visitDate: Date.now() * 1000,</span>
<a href="#l40.19"></a><span id="l40.19">       transitionType: Components.interfaces.nsINavHistoryService.TRANSITION_LINK</span>
<a href="#l40.20"></a><span id="l40.20">     }]</span>
<a href="#l40.21"></a><span id="l40.21">   });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -579,17 +579,17 @@ function openSupportURL()</span>
<a href="#l41.4"></a><span id="l41.4">  *  browser.</span>
<a href="#l41.5"></a><span id="l41.5">  *</span>
<a href="#l41.6"></a><span id="l41.6">  *  @param aPrefName - name of the pref that holds the url we want to format and open</span>
<a href="#l41.7"></a><span id="l41.7">  */</span>
<a href="#l41.8"></a><span id="l41.8"> function openFormattedURL(aPrefName)</span>
<a href="#l41.9"></a><span id="l41.9"> {</span>
<a href="#l41.10"></a><span id="l41.10">   var urlToOpen = Services.urlFormatter.formatURLPref(aPrefName);</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  var uri = Services.io.newURI(urlToOpen, null, null);</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+  var uri = Services.io.newURI(urlToOpen);</span>
<a href="#l41.14"></a><span id="l41.14"> </span>
<a href="#l41.15"></a><span id="l41.15">   var protocolSvc = Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l41.16"></a><span id="l41.16">                               .getService(Components.interfaces.nsIExternalProtocolService);</span>
<a href="#l41.17"></a><span id="l41.17">   protocolSvc.loadURI(uri);</span>
<a href="#l41.18"></a><span id="l41.18"> }</span>
<a href="#l41.19"></a><span id="l41.19"> </span>
<a href="#l41.20"></a><span id="l41.20"> /**</span>
<a href="#l41.21"></a><span id="l41.21">  * Prompt the user to restart the browser in safe mode.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mail/base/content/mailWindow.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mail/base/content/mailWindow.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -682,17 +682,17 @@ nsBrowserAccess.prototype = {</span>
<a href="#l42.4"></a><span id="l42.4">     newWindow = newTab.browser.docShell</span>
<a href="#l42.5"></a><span id="l42.5">                       .QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l42.6"></a><span id="l42.6">                       .getInterface(Components.interfaces.nsIDOMWindow);</span>
<a href="#l42.7"></a><span id="l42.7">     try {</span>
<a href="#l42.8"></a><span id="l42.8">       if (aURI) {</span>
<a href="#l42.9"></a><span id="l42.9">         let referrer = null;</span>
<a href="#l42.10"></a><span id="l42.10">         if (aOpener) {</span>
<a href="#l42.11"></a><span id="l42.11">           let location = aOpener.location;</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-          referrer = Services.io.newURI(location, null, null);</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+          referrer = Services.io.newURI(location);</span>
<a href="#l42.14"></a><span id="l42.14">         }</span>
<a href="#l42.15"></a><span id="l42.15">         newWindow.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l42.16"></a><span id="l42.16">                  .getInterface(Components.interfaces.nsIWebNavigation)</span>
<a href="#l42.17"></a><span id="l42.17">                  .loadURI(aURI.spec, loadflags, referrer, null, null);</span>
<a href="#l42.18"></a><span id="l42.18">       }</span>
<a href="#l42.19"></a><span id="l42.19">       if (needToFocusWin || (!loadInBackground &amp;&amp; isExternal))</span>
<a href="#l42.20"></a><span id="l42.20">         newWindow.focus();</span>
<a href="#l42.21"></a><span id="l42.21">     } catch(e) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -3195,17 +3195,17 @@ function onRemoteContentOptionsShowing(a</span>
<a href="#l43.4"></a><span id="l43.4">   let addresses = {};</span>
<a href="#l43.5"></a><span id="l43.5">   MailServices.headerParser.parseHeadersWithArray(</span>
<a href="#l43.6"></a><span id="l43.6">     gMessageDisplay.displayedMessage.author, addresses, {}, {});</span>
<a href="#l43.7"></a><span id="l43.7">   let adrCount = addresses.value[0] ? 1 : 0;</span>
<a href="#l43.8"></a><span id="l43.8">   // If there is an author's email, put it also in the menu.</span>
<a href="#l43.9"></a><span id="l43.9">   if (adrCount &gt; 0) {</span>
<a href="#l43.10"></a><span id="l43.10">     let authorEmailAddress = addresses.value[0];</span>
<a href="#l43.11"></a><span id="l43.11">     let authorEmailAddressURI = Services.io.newURI(</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-      &quot;chrome://messenger/content/?email=&quot; + authorEmailAddress, null, null);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+      &quot;chrome://messenger/content/?email=&quot; + authorEmailAddress);</span>
<a href="#l43.14"></a><span id="l43.14">     let mailPrincipal = Services.scriptSecurityManager</span>
<a href="#l43.15"></a><span id="l43.15">       .createCodebasePrincipal(authorEmailAddressURI, {});</span>
<a href="#l43.16"></a><span id="l43.16">     origins.push(mailPrincipal.origin);</span>
<a href="#l43.17"></a><span id="l43.17">   }</span>
<a href="#l43.18"></a><span id="l43.18"> </span>
<a href="#l43.19"></a><span id="l43.19">   let messengerBundle = document.getElementById(&quot;bundle_messenger&quot;);</span>
<a href="#l43.20"></a><span id="l43.20"> </span>
<a href="#l43.21"></a><span id="l43.21">   // Out with the old...</span>
<a href="#l43.22"></a><span id="l43.22" class="difflineat">@@ -3245,17 +3245,17 @@ function onRemoteContentOptionsShowing(a</span>
<a href="#l43.23"></a><span id="l43.23"> </span>
<a href="#l43.24"></a><span id="l43.24"> /**</span>
<a href="#l43.25"></a><span id="l43.25">  * Add privileges to display remote content for the given uri.</span>
<a href="#l43.26"></a><span id="l43.26">  *</span>
<a href="#l43.27"></a><span id="l43.27">  * @param aUriSpec |String| uri for the site to add permissions for.</span>
<a href="#l43.28"></a><span id="l43.28">  * @param aReload  Reload the message display after allowing the URI.</span>
<a href="#l43.29"></a><span id="l43.29">  */</span>
<a href="#l43.30"></a><span id="l43.30"> function allowRemoteContentForURI(aUriSpec, aReload = true) {</span>
<a href="#l43.31"></a><span id="l43.31" class="difflineminus">-  let uri = Services.io.newURI(aUriSpec, null, null);</span>
<a href="#l43.32"></a><span id="l43.32" class="difflineplus">+  let uri = Services.io.newURI(aUriSpec);</span>
<a href="#l43.33"></a><span id="l43.33">   Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l43.34"></a><span id="l43.34">   if (aReload)</span>
<a href="#l43.35"></a><span id="l43.35">     ReloadMessage();</span>
<a href="#l43.36"></a><span id="l43.36"> }</span>
<a href="#l43.37"></a><span id="l43.37"> </span>
<a href="#l43.38"></a><span id="l43.38"> /**</span>
<a href="#l43.39"></a><span id="l43.39">  * Add privileges to display remote content for the given uri.</span>
<a href="#l43.40"></a><span id="l43.40">  *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -1773,17 +1773,17 @@ function CopyNewsgroupURL(newsgroupNode)</span>
<a href="#l44.4"></a><span id="l44.4">   } else {</span>
<a href="#l44.5"></a><span id="l44.5">     url = &quot;snews://&quot; + server.hostName;</span>
<a href="#l44.6"></a><span id="l44.6">     if (server.port != Components.interfaces.nsINntpUrl.DEFAULT_NNTPS_PORT)</span>
<a href="#l44.7"></a><span id="l44.7">       url += &quot;:&quot; + server.port;</span>
<a href="#l44.8"></a><span id="l44.8">     url += &quot;/&quot; + ng;</span>
<a href="#l44.9"></a><span id="l44.9">   }</span>
<a href="#l44.10"></a><span id="l44.10"> </span>
<a href="#l44.11"></a><span id="l44.11">   try {</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-    let uri = Services.io.newURI(url, null, null);</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+    let uri = Services.io.newURI(url);</span>
<a href="#l44.14"></a><span id="l44.14">     let clipboard = Components.classes[&quot;@mozilla.org/widget/clipboardhelper;1&quot;]</span>
<a href="#l44.15"></a><span id="l44.15">                               .getService(Components.interfaces.nsIClipboardHelper);</span>
<a href="#l44.16"></a><span id="l44.16">     clipboard.copyString(decodeURI(uri.spec));</span>
<a href="#l44.17"></a><span id="l44.17">   } catch(e) {</span>
<a href="#l44.18"></a><span id="l44.18">      Components.utils.reportError(&quot;Invalid URL: &quot;+ url);</span>
<a href="#l44.19"></a><span id="l44.19">   }</span>
<a href="#l44.20"></a><span id="l44.20"> }</span>
<a href="#l44.21"></a><span id="l44.21"> </span>
<a href="#l44.22"></a><span id="l44.22" class="difflineat">@@ -1900,17 +1900,17 @@ AttachmentInfo.prototype = {</span>
<a href="#l44.23"></a><span id="l44.23">   /**</span>
<a href="#l44.24"></a><span id="l44.24">    * This method checks whether the attachment is empty or not.</span>
<a href="#l44.25"></a><span id="l44.25">    *</span>
<a href="#l44.26"></a><span id="l44.26">    * @return  true if the attachment is empty, false otherwise</span>
<a href="#l44.27"></a><span id="l44.27">    */</span>
<a href="#l44.28"></a><span id="l44.28">   get isEmpty()</span>
<a href="#l44.29"></a><span id="l44.29">   {</span>
<a href="#l44.30"></a><span id="l44.30">     // Create an input stream on the attachment url.</span>
<a href="#l44.31"></a><span id="l44.31" class="difflineminus">-    let url = Services.io.newURI(this.url, null, null);</span>
<a href="#l44.32"></a><span id="l44.32" class="difflineplus">+    let url = Services.io.newURI(this.url);</span>
<a href="#l44.33"></a><span id="l44.33">     let channel = Services.io.newChannelFromURI2(url,</span>
<a href="#l44.34"></a><span id="l44.34">                                                  null,</span>
<a href="#l44.35"></a><span id="l44.35">                                                  Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l44.36"></a><span id="l44.36">                                                  null,</span>
<a href="#l44.37"></a><span id="l44.37">                                                  Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l44.38"></a><span id="l44.38">                                                  Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l44.39"></a><span id="l44.39">     let stream = channel.open();</span>
<a href="#l44.40"></a><span id="l44.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mail/base/content/msgMail3PaneWindow.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mail/base/content/msgMail3PaneWindow.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -1469,17 +1469,17 @@ messageFlavorDataProvider.prototype = {</span>
<a href="#l45.4"></a><span id="l45.4">       return;</span>
<a href="#l45.5"></a><span id="l45.5">     }</span>
<a href="#l45.6"></a><span id="l45.6">     let fileUriPrimitive = {};</span>
<a href="#l45.7"></a><span id="l45.7">     let dataSize = {};</span>
<a href="#l45.8"></a><span id="l45.8">     aTransferable.getTransferData(&quot;application/x-moz-file-promise-url&quot;,</span>
<a href="#l45.9"></a><span id="l45.9">                                   fileUriPrimitive, dataSize);</span>
<a href="#l45.10"></a><span id="l45.10"> </span>
<a href="#l45.11"></a><span id="l45.11">     let fileUriStr = fileUriPrimitive.value.QueryInterface(Components.interfaces.nsISupportsString);</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-    let fileUri = Services.io.newURI(fileUriStr.data, null, null);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+    let fileUri = Services.io.newURI(fileUriStr.data);</span>
<a href="#l45.14"></a><span id="l45.14">     let fileUrl = fileUri.QueryInterface(Components.interfaces.nsIURL);</span>
<a href="#l45.15"></a><span id="l45.15">     let fileName = fileUrl.fileName;</span>
<a href="#l45.16"></a><span id="l45.16"> </span>
<a href="#l45.17"></a><span id="l45.17">     let destDirPrimitive = {};</span>
<a href="#l45.18"></a><span id="l45.18">     aTransferable.getTransferData(&quot;application/x-moz-file-promise-dir&quot;,</span>
<a href="#l45.19"></a><span id="l45.19">                                   destDirPrimitive, dataSize);</span>
<a href="#l45.20"></a><span id="l45.20">     let destDirectory = destDirPrimitive.value.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l45.21"></a><span id="l45.21">     let file = destDirectory.clone();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mail/base/content/nsContextMenu.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mail/base/content/nsContextMenu.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -791,17 +791,17 @@ nsContextMenu.prototype = {</span>
<a href="#l46.4"></a><span id="l46.4">   },</span>
<a href="#l46.5"></a><span id="l46.5"> </span>
<a href="#l46.6"></a><span id="l46.6">   /**</span>
<a href="#l46.7"></a><span id="l46.7">    * Generate a URI object from the linkURL spec</span>
<a href="#l46.8"></a><span id="l46.8">    * @return an nsIURI if possible, or null if not</span>
<a href="#l46.9"></a><span id="l46.9">    */</span>
<a href="#l46.10"></a><span id="l46.10">   getLinkURI: function CM_getLinkURI() {</span>
<a href="#l46.11"></a><span id="l46.11">     try {</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-      return Services.io.newURI(this.linkURL, null, null);</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+      return Services.io.newURI(this.linkURL);</span>
<a href="#l46.14"></a><span id="l46.14">     } catch (ex) {</span>
<a href="#l46.15"></a><span id="l46.15">       // e.g. empty URL string</span>
<a href="#l46.16"></a><span id="l46.16">     }</span>
<a href="#l46.17"></a><span id="l46.17">     return null;</span>
<a href="#l46.18"></a><span id="l46.18">   },</span>
<a href="#l46.19"></a><span id="l46.19"> </span>
<a href="#l46.20"></a><span id="l46.20">   /**</span>
<a href="#l46.21"></a><span id="l46.21">    * Get the scheme for the clicked-on linkURI, if present.</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineat">@@ -870,19 +870,19 @@ nsContextMenu.prototype = {</span>
<a href="#l46.23"></a><span id="l46.23">    * @param  aBase</span>
<a href="#l46.24"></a><span id="l46.24">    *         The URL string to use as the base</span>
<a href="#l46.25"></a><span id="l46.25">    * @param  aUrl</span>
<a href="#l46.26"></a><span id="l46.26">    *         The possibly-relative URL string</span>
<a href="#l46.27"></a><span id="l46.27">    * @return The string absolute URL</span>
<a href="#l46.28"></a><span id="l46.28">    */</span>
<a href="#l46.29"></a><span id="l46.29">   makeURLAbsolute : function CM_makeURLAbsolute(aBase, aUrl) {</span>
<a href="#l46.30"></a><span id="l46.30">     // Construct nsIURL.</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-    var baseURI  = Services.io.newURI(aBase, null, null);</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineplus">+    var baseURI  = Services.io.newURI(aBase);</span>
<a href="#l46.33"></a><span id="l46.33"> </span>
<a href="#l46.34"></a><span id="l46.34" class="difflineminus">-    return Services.io.newURI(baseURI.resolve(aUrl), null, null).spec;</span>
<a href="#l46.35"></a><span id="l46.35" class="difflineplus">+    return Services.io.newURI(baseURI.resolve(aUrl)).spec;</span>
<a href="#l46.36"></a><span id="l46.36">   },</span>
<a href="#l46.37"></a><span id="l46.37"> </span>
<a href="#l46.38"></a><span id="l46.38">   /**</span>
<a href="#l46.39"></a><span id="l46.39">    * Determine whether a DOM node is a text or password input, or a textarea.</span>
<a href="#l46.40"></a><span id="l46.40">    * @param  aNode</span>
<a href="#l46.41"></a><span id="l46.41">    *         The DOM node to check</span>
<a href="#l46.42"></a><span id="l46.42">    * @return true for textboxes, false for other elements</span>
<a href="#l46.43"></a><span id="l46.43">    */</span>
<a href="#l46.44"></a><span id="l46.44" class="difflineat">@@ -942,17 +942,17 @@ nsContextMenu.prototype = {</span>
<a href="#l46.45"></a><span id="l46.45">           return;</span>
<a href="#l46.46"></a><span id="l46.46">       }</span>
<a href="#l46.47"></a><span id="l46.47">       sibling = sibling.previousSibling;</span>
<a href="#l46.48"></a><span id="l46.48">     }</span>
<a href="#l46.49"></a><span id="l46.49">   },</span>
<a href="#l46.50"></a><span id="l46.50"> </span>
<a href="#l46.51"></a><span id="l46.51">   openInBrowser: function CM_openInBrowser() {</span>
<a href="#l46.52"></a><span id="l46.52">     let uri = Services.io.newURI(this.target.ownerDocument.defaultView.</span>
<a href="#l46.53"></a><span id="l46.53" class="difflineminus">-                                 top.location.href, null, null);</span>
<a href="#l46.54"></a><span id="l46.54" class="difflineplus">+                                 top.location.href);</span>
<a href="#l46.55"></a><span id="l46.55">     PlacesUtils.asyncHistory.updatePlaces({</span>
<a href="#l46.56"></a><span id="l46.56">       uri: uri,</span>
<a href="#l46.57"></a><span id="l46.57">       visits:  [{</span>
<a href="#l46.58"></a><span id="l46.58">         visitDate: Date.now() * 1000,</span>
<a href="#l46.59"></a><span id="l46.59">         transitionType: Components.interfaces.nsINavHistoryService.TRANSITION_LINK</span>
<a href="#l46.60"></a><span id="l46.60">       }]</span>
<a href="#l46.61"></a><span id="l46.61">     });</span>
<a href="#l46.62"></a><span id="l46.62">     Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mail/base/content/nsDragAndDrop.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mail/base/content/nsDragAndDrop.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -565,17 +565,17 @@ var nsDragAndDrop = {</span>
<a href="#l47.4"></a><span id="l47.4">       // to know if aDraggedText really is a URI.</span>
<a href="#l47.5"></a><span id="l47.5"> </span>
<a href="#l47.6"></a><span id="l47.6">       aDraggedText = aDraggedText.replace(/^\s*|\s*$/g, '');</span>
<a href="#l47.7"></a><span id="l47.7"> </span>
<a href="#l47.8"></a><span id="l47.8">       var uri;</span>
<a href="#l47.9"></a><span id="l47.9">       var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l47.10"></a><span id="l47.10">                                 .getService(Components.interfaces.nsIIOService);</span>
<a href="#l47.11"></a><span id="l47.11">       try {</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-        uri = ioService.newURI(aDraggedText, null, null);</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+        uri = ioService.newURI(aDraggedText);</span>
<a href="#l47.14"></a><span id="l47.14">       } catch (e) {</span>
<a href="#l47.15"></a><span id="l47.15">       }</span>
<a href="#l47.16"></a><span id="l47.16"> </span>
<a href="#l47.17"></a><span id="l47.17">       if (!uri)</span>
<a href="#l47.18"></a><span id="l47.18">         return;</span>
<a href="#l47.19"></a><span id="l47.19"> </span>
<a href="#l47.20"></a><span id="l47.20">       // aDraggedText is a URI, do the security check.</span>
<a href="#l47.21"></a><span id="l47.21">       const nsIScriptSecurityManager = Components.interfaces</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineat">@@ -585,17 +585,17 @@ var nsDragAndDrop = {</span>
<a href="#l47.23"></a><span id="l47.23"> </span>
<a href="#l47.24"></a><span id="l47.24">       if (!aDragSession)</span>
<a href="#l47.25"></a><span id="l47.25">         aDragSession = this.mDragService.getCurrentSession();</span>
<a href="#l47.26"></a><span id="l47.26"> </span>
<a href="#l47.27"></a><span id="l47.27">       var sourceDoc = aDragSession.sourceDocument;</span>
<a href="#l47.28"></a><span id="l47.28">       // Use &quot;file:///&quot; as the default sourceURI so that drops of file:// URIs</span>
<a href="#l47.29"></a><span id="l47.29">       // are always allowed.</span>
<a href="#l47.30"></a><span id="l47.30">       var principal = sourceDoc ? sourceDoc.nodePrincipal</span>
<a href="#l47.31"></a><span id="l47.31" class="difflineminus">-                                : secMan.createCodebasePrincipal(ioService.newURI(&quot;file:///&quot;, null, null), {});</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineplus">+                                : secMan.createCodebasePrincipal(ioService.newURI(&quot;file:///&quot;), {});</span>
<a href="#l47.33"></a><span id="l47.33"> </span>
<a href="#l47.34"></a><span id="l47.34">       try {</span>
<a href="#l47.35"></a><span id="l47.35">         secMan.checkLoadURIStrWithPrincipal(principal, aDraggedText,</span>
<a href="#l47.36"></a><span id="l47.36">                                             nsIScriptSecurityManager.STANDARD);</span>
<a href="#l47.37"></a><span id="l47.37">       } catch (e) {</span>
<a href="#l47.38"></a><span id="l47.38">         // Stop event propagation right here.</span>
<a href="#l47.39"></a><span id="l47.39">         aEvent.stopPropagation();</span>
<a href="#l47.40"></a><span id="l47.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mail/base/content/phishingDetector.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mail/base/content/phishingDetector.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -94,17 +94,17 @@ var gPhishingDetector = {</span>
<a href="#l48.4"></a><span id="l48.4">   analyzeUrl: function (aUrl, aLinkText)</span>
<a href="#l48.5"></a><span id="l48.5">   {</span>
<a href="#l48.6"></a><span id="l48.6">     if (!aUrl)</span>
<a href="#l48.7"></a><span id="l48.7">       return;</span>
<a href="#l48.8"></a><span id="l48.8"> </span>
<a href="#l48.9"></a><span id="l48.9">     var hrefURL;</span>
<a href="#l48.10"></a><span id="l48.10">     // make sure relative link urls don't make us bail out</span>
<a href="#l48.11"></a><span id="l48.11">     try {</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-      hrefURL = Services.io.newURI(aUrl, null, null);</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+      hrefURL = Services.io.newURI(aUrl);</span>
<a href="#l48.14"></a><span id="l48.14">     } catch(ex) { return; }</span>
<a href="#l48.15"></a><span id="l48.15"> </span>
<a href="#l48.16"></a><span id="l48.16">     // only check for phishing urls if the url is an http or https link.</span>
<a href="#l48.17"></a><span id="l48.17">     // this prevents us from flagging imap and other internally handled urls</span>
<a href="#l48.18"></a><span id="l48.18">     if (hrefURL.schemeIs('http') || hrefURL.schemeIs('https'))</span>
<a href="#l48.19"></a><span id="l48.19">     {</span>
<a href="#l48.20"></a><span id="l48.20">       // The link is not suspicious if the visible text is the same as the URL,</span>
<a href="#l48.21"></a><span id="l48.21">       // even if the URL is an IP address. URLs are commonly surrounded by</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineat">@@ -145,17 +145,17 @@ var gPhishingDetector = {</span>
<a href="#l48.23"></a><span id="l48.23">    * @param aPhishingURL the url we want to report back as a phishing attack</span>
<a href="#l48.24"></a><span id="l48.24">    */</span>
<a href="#l48.25"></a><span id="l48.25">    reportPhishingURL: function(aPhishingURL)</span>
<a href="#l48.26"></a><span id="l48.26">    {</span>
<a href="#l48.27"></a><span id="l48.27">      let reportUrl = Services.urlFormatter.formatURLPref(</span>
<a href="#l48.28"></a><span id="l48.28">        &quot;browser.safebrowsing.reportPhishURL&quot;);</span>
<a href="#l48.29"></a><span id="l48.29">      reportUrl += &quot;&amp;url=&quot; + encodeURIComponent(aPhishingURL);</span>
<a href="#l48.30"></a><span id="l48.30"> </span>
<a href="#l48.31"></a><span id="l48.31" class="difflineminus">-     let uri = Services.io.newURI(reportUrl, null, null);</span>
<a href="#l48.32"></a><span id="l48.32" class="difflineplus">+     let uri = Services.io.newURI(reportUrl);</span>
<a href="#l48.33"></a><span id="l48.33">      let protocolSvc = Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l48.34"></a><span id="l48.34">                        .getService(Components.interfaces.nsIExternalProtocolService);</span>
<a href="#l48.35"></a><span id="l48.35">      protocolSvc.loadUrl(uri);</span>
<a href="#l48.36"></a><span id="l48.36">    },</span>
<a href="#l48.37"></a><span id="l48.37"> </span>
<a href="#l48.38"></a><span id="l48.38">   /**</span>
<a href="#l48.39"></a><span id="l48.39">    * Private helper method to determine if the link node contains a user visible</span>
<a href="#l48.40"></a><span id="l48.40">    * url with a host name that differs from the actual href the user would get</span>
<a href="#l48.41"></a><span id="l48.41" class="difflineat">@@ -168,17 +168,17 @@ var gPhishingDetector = {</span>
<a href="#l48.42"></a><span id="l48.42">   {</span>
<a href="#l48.43"></a><span id="l48.43">     // gatherTextUnder puts a space between each piece of text it gathers,</span>
<a href="#l48.44"></a><span id="l48.44">     // so strip the spaces out (see bug 326082 for details).</span>
<a href="#l48.45"></a><span id="l48.45">     aLinkNodeText = aLinkNodeText.replace(/ /g, &quot;&quot;);</span>
<a href="#l48.46"></a><span id="l48.46"> </span>
<a href="#l48.47"></a><span id="l48.47">     // Only worry about http: and https: urls.</span>
<a href="#l48.48"></a><span id="l48.48">     if (/^https?:/.test(aLinkNodeText))</span>
<a href="#l48.49"></a><span id="l48.49">     {</span>
<a href="#l48.50"></a><span id="l48.50" class="difflineminus">-      let linkTextURI = Services.io.newURI(aLinkNodeText, null, null);</span>
<a href="#l48.51"></a><span id="l48.51" class="difflineplus">+      let linkTextURI = Services.io.newURI(aLinkNodeText);</span>
<a href="#l48.52"></a><span id="l48.52"> </span>
<a href="#l48.53"></a><span id="l48.53">       // Compare the base domain of the href and the link text.</span>
<a href="#l48.54"></a><span id="l48.54">       try {</span>
<a href="#l48.55"></a><span id="l48.55">         return Services.eTLD.getBaseDomain(aHrefURL) !=</span>
<a href="#l48.56"></a><span id="l48.56">                Services.eTLD.getBaseDomain(linkTextURI);</span>
<a href="#l48.57"></a><span id="l48.57">       } catch (e) {</span>
<a href="#l48.58"></a><span id="l48.58">         // If we throw above, one of the URIs probably has no TLD (e.g.</span>
<a href="#l48.59"></a><span id="l48.59">         // http://localhost), so just check the entire host.</span>
<a href="#l48.60"></a><span id="l48.60" class="difflineat">@@ -201,17 +201,17 @@ var gPhishingDetector = {</span>
<a href="#l48.61"></a><span id="l48.61">   {</span>
<a href="#l48.62"></a><span id="l48.62">     // If the loaded message has *not* been flagged as a scam...</span>
<a href="#l48.63"></a><span id="l48.63">     if (!gMessageNotificationBar.isShowingPhishingNotification())</span>
<a href="#l48.64"></a><span id="l48.64">       return true; // ...allow the link to load.</span>
<a href="#l48.65"></a><span id="l48.65"> </span>
<a href="#l48.66"></a><span id="l48.66">     var hrefURL;</span>
<a href="#l48.67"></a><span id="l48.67">     // make sure relative link urls don't make us bail out</span>
<a href="#l48.68"></a><span id="l48.68">     try {</span>
<a href="#l48.69"></a><span id="l48.69" class="difflineminus">-      hrefURL = Services.io.newURI(aUrl, null, null);</span>
<a href="#l48.70"></a><span id="l48.70" class="difflineplus">+      hrefURL = Services.io.newURI(aUrl);</span>
<a href="#l48.71"></a><span id="l48.71">     } catch(ex) { return false; }</span>
<a href="#l48.72"></a><span id="l48.72"> </span>
<a href="#l48.73"></a><span id="l48.73">     // only prompt for http and https urls</span>
<a href="#l48.74"></a><span id="l48.74">     if (hrefURL.schemeIs('http') || hrefURL.schemeIs('https'))</span>
<a href="#l48.75"></a><span id="l48.75">     {</span>
<a href="#l48.76"></a><span id="l48.76">       // unobscure the host name in case it's an encoded ip address..</span>
<a href="#l48.77"></a><span id="l48.77">       let unobscuredHostNameValue = this.isLegalIPAddress(hrefURL.host, true)</span>
<a href="#l48.78"></a><span id="l48.78">         || hrefURL.host;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mail/base/content/specialTabs.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mail/base/content/specialTabs.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -495,27 +495,27 @@ var specialTabs = {</span>
<a href="#l49.4"></a><span id="l49.4">    * dom &lt;head&gt;.</span>
<a href="#l49.5"></a><span id="l49.5">    *</span>
<a href="#l49.6"></a><span id="l49.6">    * @param  string aUrl          - a url from whose homepage to get a favicon.</span>
<a href="#l49.7"></a><span id="l49.7">    * @param  function aCallback   - callback.</span>
<a href="#l49.8"></a><span id="l49.8">    */</span>
<a href="#l49.9"></a><span id="l49.9">   getFaviconFromPage: function(aUrl, aCallback) {</span>
<a href="#l49.10"></a><span id="l49.10">     let url, uri;</span>
<a href="#l49.11"></a><span id="l49.11">     try {</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-      url = Services.io.newURI(aUrl, null, null).prePath;</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineminus">-      uri = Services.io.newURI(url, null, null);</span>
<a href="#l49.14"></a><span id="l49.14" class="difflineplus">+      url = Services.io.newURI(aUrl).prePath;</span>
<a href="#l49.15"></a><span id="l49.15" class="difflineplus">+      uri = Services.io.newURI(url);</span>
<a href="#l49.16"></a><span id="l49.16">     }</span>
<a href="#l49.17"></a><span id="l49.17">     catch (ex) {</span>
<a href="#l49.18"></a><span id="l49.18">       if (aCallback)</span>
<a href="#l49.19"></a><span id="l49.19">         aCallback(&quot;&quot;);</span>
<a href="#l49.20"></a><span id="l49.20">       return;</span>
<a href="#l49.21"></a><span id="l49.21">     }</span>
<a href="#l49.22"></a><span id="l49.22"> </span>
<a href="#l49.23"></a><span id="l49.23">     let onLoadSuccess = (aEvent =&gt; {</span>
<a href="#l49.24"></a><span id="l49.24" class="difflineminus">-      let iconUri = Services.io.newURI(aEvent.target.src, null, null);</span>
<a href="#l49.25"></a><span id="l49.25" class="difflineplus">+      let iconUri = Services.io.newURI(aEvent.target.src);</span>
<a href="#l49.26"></a><span id="l49.26">       specialTabs.mFaviconService.setAndFetchFaviconForPage(</span>
<a href="#l49.27"></a><span id="l49.27">         uri, iconUri, false,</span>
<a href="#l49.28"></a><span id="l49.28">         specialTabs.mFaviconService.FAVICON_LOAD_NON_PRIVATE,</span>
<a href="#l49.29"></a><span id="l49.29">         null, Services.scriptSecurityManager.getSystemPrincipal());</span>
<a href="#l49.30"></a><span id="l49.30"> </span>
<a href="#l49.31"></a><span id="l49.31">       if (aCallback)</span>
<a href="#l49.32"></a><span id="l49.32">         aCallback(iconUri.spec);</span>
<a href="#l49.33"></a><span id="l49.33">     });</span>
<a href="#l49.34"></a><span id="l49.34" class="difflineat">@@ -533,17 +533,17 @@ var specialTabs = {</span>
<a href="#l49.35"></a><span id="l49.35">         return;</span>
<a href="#l49.36"></a><span id="l49.36">       }</span>
<a href="#l49.37"></a><span id="l49.37"> </span>
<a href="#l49.38"></a><span id="l49.38">       let iconUri;</span>
<a href="#l49.39"></a><span id="l49.39">       let linkNode = dom.head.querySelector('link[rel=&quot;shortcut icon&quot;],' +</span>
<a href="#l49.40"></a><span id="l49.40">                                             'link[rel=&quot;icon&quot;]');</span>
<a href="#l49.41"></a><span id="l49.41">       let href = linkNode ? linkNode.href : null;</span>
<a href="#l49.42"></a><span id="l49.42">       try {</span>
<a href="#l49.43"></a><span id="l49.43" class="difflineminus">-        iconUri = Services.io.newURI(href, null, null);</span>
<a href="#l49.44"></a><span id="l49.44" class="difflineplus">+        iconUri = Services.io.newURI(href);</span>
<a href="#l49.45"></a><span id="l49.45">       }</span>
<a href="#l49.46"></a><span id="l49.46">       catch (ex) {</span>
<a href="#l49.47"></a><span id="l49.47">         onDownloadError(aEvent);</span>
<a href="#l49.48"></a><span id="l49.48">         return;</span>
<a href="#l49.49"></a><span id="l49.49">       }</span>
<a href="#l49.50"></a><span id="l49.50"> </span>
<a href="#l49.51"></a><span id="l49.51">       specialTabs.loadFaviconImageNode(onLoadSuccess, onDownloadError,</span>
<a href="#l49.52"></a><span id="l49.52">                                        iconUri.spec);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mail/components/aboutRedirector.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mail/components/aboutRedirector.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -44,17 +44,17 @@ AboutRedirector.prototype = {</span>
<a href="#l50.4"></a><span id="l50.4">     return this._redirMap[name].flags;</span>
<a href="#l50.5"></a><span id="l50.5">   },</span>
<a href="#l50.6"></a><span id="l50.6"> </span>
<a href="#l50.7"></a><span id="l50.7">   newChannel: function(aURI, aLoadInfo) {</span>
<a href="#l50.8"></a><span id="l50.8">     let name = this._getModuleName(aURI);</span>
<a href="#l50.9"></a><span id="l50.9">     if (!(name in this._redirMap))</span>
<a href="#l50.10"></a><span id="l50.10">       throw Components.results.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l50.11"></a><span id="l50.11"> </span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-    let newURI = Services.io.newURI(this._redirMap[name].url, null, null);</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+    let newURI = Services.io.newURI(this._redirMap[name].url);</span>
<a href="#l50.14"></a><span id="l50.14">     let channel = Services.io.newChannelFromURIWithLoadInfo(newURI, aLoadInfo);</span>
<a href="#l50.15"></a><span id="l50.15">     channel.originalURI = aURI;</span>
<a href="#l50.16"></a><span id="l50.16"> </span>
<a href="#l50.17"></a><span id="l50.17">     if (this._redirMap[name].flags &amp; Ci.nsIAboutModule.URI_SAFE_FOR_UNTRUSTED_CONTENT) {</span>
<a href="#l50.18"></a><span id="l50.18">       let principal = Services.scriptSecurityManager.getNoAppCodebasePrincipal(aURI);</span>
<a href="#l50.19"></a><span id="l50.19">       channel.owner = principal;</span>
<a href="#l50.20"></a><span id="l50.20">     }</span>
<a href="#l50.21"></a><span id="l50.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -1079,17 +1079,17 @@ var genericPhotoHandler = {</span>
<a href="#l51.4"></a><span id="l51.4">   }</span>
<a href="#l51.5"></a><span id="l51.5"> }</span>
<a href="#l51.6"></a><span id="l51.6"> </span>
<a href="#l51.7"></a><span id="l51.7"> var filePhotoHandler = {</span>
<a href="#l51.8"></a><span id="l51.8"> </span>
<a href="#l51.9"></a><span id="l51.9">   onLoad: function(aCard, aDocument) {</span>
<a href="#l51.10"></a><span id="l51.10">     var photoURI = aCard.getProperty(&quot;PhotoURI&quot;, &quot;&quot;);</span>
<a href="#l51.11"></a><span id="l51.11">     try {</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-      var file = Services.io.newURI(photoURI, null, null)</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+      var file = Services.io.newURI(photoURI)</span>
<a href="#l51.14"></a><span id="l51.14">                             .QueryInterface(Components.interfaces.nsIFileURL)</span>
<a href="#l51.15"></a><span id="l51.15">                             .file;</span>
<a href="#l51.16"></a><span id="l51.16">     } catch (e) {}</span>
<a href="#l51.17"></a><span id="l51.17"> </span>
<a href="#l51.18"></a><span id="l51.18">     if (!file)</span>
<a href="#l51.19"></a><span id="l51.19">       return false;</span>
<a href="#l51.20"></a><span id="l51.20"> </span>
<a href="#l51.21"></a><span id="l51.21">     aDocument.getElementById(&quot;PhotoFile&quot;).file = file;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardViewOverlay.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardViewOverlay.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -533,17 +533,17 @@ function HandleLink(node, label, value, </span>
<a href="#l52.4"></a><span id="l52.4"> </span>
<a href="#l52.5"></a><span id="l52.5">   return visible;</span>
<a href="#l52.6"></a><span id="l52.6"> }</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> function OpenURLWithHistory(url)</span>
<a href="#l52.9"></a><span id="l52.9"> {</span>
<a href="#l52.10"></a><span id="l52.10">   try {</span>
<a href="#l52.11"></a><span id="l52.11">     PlacesUtils.asyncHistory.updatePlaces({</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-      uri: Services.io.newURI(url, null, null),</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+      uri: Services.io.newURI(url),</span>
<a href="#l52.14"></a><span id="l52.14">       visits:  [{</span>
<a href="#l52.15"></a><span id="l52.15">         visitDate: Date.now() * 1000,</span>
<a href="#l52.16"></a><span id="l52.16">         transitionType: Components.interfaces.nsINavHistoryService.TRANSITION_LINK</span>
<a href="#l52.17"></a><span id="l52.17">       }]</span>
<a href="#l52.18"></a><span id="l52.18">     });</span>
<a href="#l52.19"></a><span id="l52.19">     var messenger = Components.classes[&quot;@mozilla.org/messenger;1&quot;].createInstance();</span>
<a href="#l52.20"></a><span id="l52.20">     messenger = messenger.QueryInterface(Components.interfaces.nsIMessenger);</span>
<a href="#l52.21"></a><span id="l52.21">     messenger.launchExternalURL(url);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mail/components/addrbook/content/abCommon.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCommon.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -852,17 +852,17 @@ function storePhoto(aUri)</span>
<a href="#l53.4"></a><span id="l53.4"> {</span>
<a href="#l53.5"></a><span id="l53.5">   if (!aUri)</span>
<a href="#l53.6"></a><span id="l53.6">     return false;</span>
<a href="#l53.7"></a><span id="l53.7"> </span>
<a href="#l53.8"></a><span id="l53.8">   // Get the photos directory and check that it exists</span>
<a href="#l53.9"></a><span id="l53.9">   let file = getPhotosDir();</span>
<a href="#l53.10"></a><span id="l53.10"> </span>
<a href="#l53.11"></a><span id="l53.11">   // Create a channel from the URI and open it as an input stream</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-  let channel = Services.io.newChannelFromURI2(Services.io.newURI(aUri, null, null),</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+  let channel = Services.io.newChannelFromURI2(Services.io.newURI(aUri),</span>
<a href="#l53.14"></a><span id="l53.14">                                                null,</span>
<a href="#l53.15"></a><span id="l53.15">                                                Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l53.16"></a><span id="l53.16">                                                null,</span>
<a href="#l53.17"></a><span id="l53.17">                                                Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l53.18"></a><span id="l53.18">                                                Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l53.19"></a><span id="l53.19">   let istream = channel.open();</span>
<a href="#l53.20"></a><span id="l53.20"> </span>
<a href="#l53.21"></a><span id="l53.21">   // Get the photo file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mail/components/cloudfile/content/addAccountDialog.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mail/components/cloudfile/content/addAccountDialog.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -263,17 +263,17 @@ var addAccountDialog = {</span>
<a href="#l54.4"></a><span id="l54.4"> </span>
<a href="#l54.5"></a><span id="l54.5">     // Load up the correct XHTML page for this provider.</span>
<a href="#l54.6"></a><span id="l54.6">     this._settings.contentDocument.location.href = provider.settingsURL;</span>
<a href="#l54.7"></a><span id="l54.7">   },</span>
<a href="#l54.8"></a><span id="l54.8"> </span>
<a href="#l54.9"></a><span id="l54.9">   onClickLink: function AAD_onClickLink(e) {</span>
<a href="#l54.10"></a><span id="l54.10">     e.preventDefault();</span>
<a href="#l54.11"></a><span id="l54.11">     let href = e.target.getAttribute(&quot;href&quot;);</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-    gProtocolService.loadUrl(Services.io.newURI(href, &quot;UTF-8&quot;, null));</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+    gProtocolService.loadUrl(Services.io.newURI(href, &quot;UTF-8&quot;));</span>
<a href="#l54.14"></a><span id="l54.14">   },</span>
<a href="#l54.15"></a><span id="l54.15"> </span>
<a href="#l54.16"></a><span id="l54.16">   onInput: function AAD_onInput() {</span>
<a href="#l54.17"></a><span id="l54.17">     // Let's see if we have everything we need to make OK enabled...</span>
<a href="#l54.18"></a><span id="l54.18">     if (this._accountType.selectedIndex == -1) {</span>
<a href="#l54.19"></a><span id="l54.19">       // We have the &quot;Select a service provider&quot; menuitem selected, so we</span>
<a href="#l54.20"></a><span id="l54.20">       // shouldn't be able to click &quot;Set up account&quot;</span>
<a href="#l54.21"></a><span id="l54.21">       this._accept.disabled = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -1920,17 +1920,17 @@ function ComposeFieldsReady()</span>
<a href="#l55.4"></a><span id="l55.4"> // checks if the passed in string is a mailto url, if it is, generates nsIMsgComposeParams</span>
<a href="#l55.5"></a><span id="l55.5"> // for the url and returns them.</span>
<a href="#l55.6"></a><span id="l55.6"> function handleMailtoArgs(mailtoUrl)</span>
<a href="#l55.7"></a><span id="l55.7"> {</span>
<a href="#l55.8"></a><span id="l55.8">   // see if the string is a mailto url....do this by checking the first 7 characters of the string</span>
<a href="#l55.9"></a><span id="l55.9">   if (mailtoUrl.toLowerCase().startsWith(&quot;mailto:&quot;))</span>
<a href="#l55.10"></a><span id="l55.10">   {</span>
<a href="#l55.11"></a><span id="l55.11">     // if it is a mailto url, turn the mailto url into a MsgComposeParams object....</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-    let uri = Services.io.newURI(mailtoUrl, null, null);</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+    let uri = Services.io.newURI(mailtoUrl);</span>
<a href="#l55.14"></a><span id="l55.14"> </span>
<a href="#l55.15"></a><span id="l55.15">     if (uri) {</span>
<a href="#l55.16"></a><span id="l55.16">       return MailServices.compose.getParamsForMailto(uri);</span>
<a href="#l55.17"></a><span id="l55.17">     }</span>
<a href="#l55.18"></a><span id="l55.18">   }</span>
<a href="#l55.19"></a><span id="l55.19"> </span>
<a href="#l55.20"></a><span id="l55.20">   return null;</span>
<a href="#l55.21"></a><span id="l55.21"> }</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineat">@@ -4111,17 +4111,17 @@ function AddAttachments(aAttachments, aC</span>
<a href="#l55.23"></a><span id="l55.23">     else {</span>
<a href="#l55.24"></a><span id="l55.24">       // For local file urls, we are better off using the full file url because</span>
<a href="#l55.25"></a><span id="l55.25">       // moz-icon will actually resolve the file url and get the right icon from</span>
<a href="#l55.26"></a><span id="l55.26">       // the file url. All other urls, we should try to extract the file name from</span>
<a href="#l55.27"></a><span id="l55.27">       // them. This fixes issues where an icon wasn't showing up if you dragged a</span>
<a href="#l55.28"></a><span id="l55.28">       // web url that had a query or reference string after the file name and for</span>
<a href="#l55.29"></a><span id="l55.29">       // mailnews urls where the filename is hidden in the url as a &amp;filename=</span>
<a href="#l55.30"></a><span id="l55.30">       // part.</span>
<a href="#l55.31"></a><span id="l55.31" class="difflineminus">-      let url = Services.io.newURI(attachment.url, null, null);</span>
<a href="#l55.32"></a><span id="l55.32" class="difflineplus">+      let url = Services.io.newURI(attachment.url);</span>
<a href="#l55.33"></a><span id="l55.33">       if (url instanceof Components.interfaces.nsIURL &amp;&amp;</span>
<a href="#l55.34"></a><span id="l55.34">           url.fileName &amp;&amp; !url.schemeIs(&quot;file&quot;))</span>
<a href="#l55.35"></a><span id="l55.35">         item.image = &quot;moz-icon://&quot; + url.fileName;</span>
<a href="#l55.36"></a><span id="l55.36">       else</span>
<a href="#l55.37"></a><span id="l55.37">         item.image = &quot;moz-icon:&quot; + attachment.url;</span>
<a href="#l55.38"></a><span id="l55.38">       }</span>
<a href="#l55.39"></a><span id="l55.39"> </span>
<a href="#l55.40"></a><span id="l55.40">     items.push(item);</span>
<a href="#l55.41"></a><span id="l55.41" class="difflineat">@@ -4342,17 +4342,17 @@ function OpenSelectedAttachment()</span>
<a href="#l55.42"></a><span id="l55.42">       // we must be dealing with a forwarded attachment, treat this special</span>
<a href="#l55.43"></a><span id="l55.43">       let msgHdr = gMessenger.messageServiceFromURI(attachmentUrl).messageURIToMsgHdr(attachmentUrl);</span>
<a href="#l55.44"></a><span id="l55.44">       if (msgHdr)</span>
<a href="#l55.45"></a><span id="l55.45">         MailUtils.openMessageInNewWindow(msgHdr);</span>
<a href="#l55.46"></a><span id="l55.46">     }</span>
<a href="#l55.47"></a><span id="l55.47">     else</span>
<a href="#l55.48"></a><span id="l55.48">     {</span>
<a href="#l55.49"></a><span id="l55.49">       // Turn the URL into a nsIURI object then open it.</span>
<a href="#l55.50"></a><span id="l55.50" class="difflineminus">-      let uri = Services.io.newURI(attachmentUrl, null, null);</span>
<a href="#l55.51"></a><span id="l55.51" class="difflineplus">+      let uri = Services.io.newURI(attachmentUrl);</span>
<a href="#l55.52"></a><span id="l55.52">       if (uri)</span>
<a href="#l55.53"></a><span id="l55.53">       {</span>
<a href="#l55.54"></a><span id="l55.54">         let channel = Services.io.newChannelFromURI2(uri,</span>
<a href="#l55.55"></a><span id="l55.55">                                                      null,</span>
<a href="#l55.56"></a><span id="l55.56">                                                      Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l55.57"></a><span id="l55.57">                                                      null,</span>
<a href="#l55.58"></a><span id="l55.58">                                                      Components.interfaces.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l55.59"></a><span id="l55.59">                                                      Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l55.60"></a><span id="l55.60" class="difflineat">@@ -5646,17 +5646,17 @@ function loadBlockedImage(aURL) {</span>
<a href="#l55.61"></a><span id="l55.61">   if (/^file:/i.test(aURL)) {</span>
<a href="#l55.62"></a><span id="l55.62">     filename = aURL.substr(aURL.lastIndexOf(&quot;/&quot;) + 1);</span>
<a href="#l55.63"></a><span id="l55.63">   }</span>
<a href="#l55.64"></a><span id="l55.64">   else {</span>
<a href="#l55.65"></a><span id="l55.65">     let fnMatch = /[?&amp;;]filename=([^?&amp;]+)/.exec(aURL);</span>
<a href="#l55.66"></a><span id="l55.66">     filename = (fnMatch &amp;&amp; fnMatch[1]) || &quot;&quot;;</span>
<a href="#l55.67"></a><span id="l55.67">   }</span>
<a href="#l55.68"></a><span id="l55.68">   filename = decodeURIComponent(filename);</span>
<a href="#l55.69"></a><span id="l55.69" class="difflineminus">-  let uri = Services.io.newURI(aURL, null, null);</span>
<a href="#l55.70"></a><span id="l55.70" class="difflineplus">+  let uri = Services.io.newURI(aURL);</span>
<a href="#l55.71"></a><span id="l55.71">   let contentType = Components.classes[&quot;@mozilla.org/mime;1&quot;]</span>
<a href="#l55.72"></a><span id="l55.72">     .getService(Components.interfaces.nsIMIMEService)</span>
<a href="#l55.73"></a><span id="l55.73">     .getTypeFromURI(uri);</span>
<a href="#l55.74"></a><span id="l55.74">   if (!contentType.startsWith(&quot;image/&quot;)) {</span>
<a href="#l55.75"></a><span id="l55.75">     // Unsafe to unblock this. It would just be garbage either way.</span>
<a href="#l55.76"></a><span id="l55.76">     throw new Error(&quot;Won't unblock; URL=&quot; + aURL +</span>
<a href="#l55.77"></a><span id="l55.77">                     &quot;, contentType=&quot; + contentType);</span>
<a href="#l55.78"></a><span id="l55.78">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mail/components/im/content/imAccountWizard.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mail/components/im/content/imAccountWizard.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -406,11 +406,11 @@ var accountWizard = {</span>
<a href="#l56.4"></a><span id="l56.4">       catch (e) { }</span>
<a href="#l56.5"></a><span id="l56.5">     }</span>
<a href="#l56.6"></a><span id="l56.6">     getMore.hidden = !showGetMore;</span>
<a href="#l56.7"></a><span id="l56.7">   },</span>
<a href="#l56.8"></a><span id="l56.8"> </span>
<a href="#l56.9"></a><span id="l56.9">   openURL: function (aURL) {</span>
<a href="#l56.10"></a><span id="l56.10">     Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l56.11"></a><span id="l56.11">               .getService(Components.interfaces.nsIExternalProtocolService)</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-              .loadUrl(Services.io.newURI(aURL, null, null));</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+              .loadUrl(Services.io.newURI(aURL));</span>
<a href="#l56.14"></a><span id="l56.14">   }</span>
<a href="#l56.15"></a><span id="l56.15"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mail/components/im/content/imContextMenu.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mail/components/im/content/imContextMenu.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -243,17 +243,17 @@ imContextMenu.prototype = {</span>
<a href="#l57.4"></a><span id="l57.4">       throw &quot;Empty href&quot;;</span>
<a href="#l57.5"></a><span id="l57.5">     }</span>
<a href="#l57.6"></a><span id="l57.6"> </span>
<a href="#l57.7"></a><span id="l57.7">     return makeURLAbsolute(this.link.baseURI, href);</span>
<a href="#l57.8"></a><span id="l57.8">   },</span>
<a href="#l57.9"></a><span id="l57.9"> </span>
<a href="#l57.10"></a><span id="l57.10">   getLinkURI: function() {</span>
<a href="#l57.11"></a><span id="l57.11">     try {</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-      return Services.io.newURI(this.linkURL, null, null);</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+      return Services.io.newURI(this.linkURL);</span>
<a href="#l57.14"></a><span id="l57.14">     }</span>
<a href="#l57.15"></a><span id="l57.15">     catch (ex) {</span>
<a href="#l57.16"></a><span id="l57.16">      // e.g. empty URL string</span>
<a href="#l57.17"></a><span id="l57.17">     }</span>
<a href="#l57.18"></a><span id="l57.18"> </span>
<a href="#l57.19"></a><span id="l57.19">     return null;</span>
<a href="#l57.20"></a><span id="l57.20">   },</span>
<a href="#l57.21"></a><span id="l57.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mail/components/newmailaccount/content/accountProvisioner.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mail/components/newmailaccount/content/accountProvisioner.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -33,17 +33,17 @@ function isAccel (event) { return isOSX </span>
<a href="#l58.4"></a><span id="l58.4">  *   mozilla/dom/tests/mochitest/localstorage/test_localStorageFromChrome.xhtml</span>
<a href="#l58.5"></a><span id="l58.5">  *</span>
<a href="#l58.6"></a><span id="l58.6">  * @param {String} page The page to get the localstorage for.</span>
<a href="#l58.7"></a><span id="l58.7">  * @return {nsIDOMStorage} The localstorage for this page.</span>
<a href="#l58.8"></a><span id="l58.8">  */</span>
<a href="#l58.9"></a><span id="l58.9"> function getLocalStorage(page) {</span>
<a href="#l58.10"></a><span id="l58.10">   var url = &quot;chrome://content/messenger/accountProvisionerStorage/&quot; + page;</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-  var uri = Services.io.newURI(url, &quot;&quot;, null);</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+  var uri = Services.io.newURI(url, &quot;&quot;);</span>
<a href="#l58.14"></a><span id="l58.14">   var principal = Services.scriptSecurityManager.getNoAppCodebasePrincipal(uri);</span>
<a href="#l58.15"></a><span id="l58.15">   return Services.domStorageManager.getLocalStorageForPrincipal(principal, url);</span>
<a href="#l58.16"></a><span id="l58.16"> }</span>
<a href="#l58.17"></a><span id="l58.17"> </span>
<a href="#l58.18"></a><span id="l58.18"> var MAX_SMALL_ADDRESSES = 2;</span>
<a href="#l58.19"></a><span id="l58.19"> </span>
<a href="#l58.20"></a><span id="l58.20"> var storedData = {};</span>
<a href="#l58.21"></a><span id="l58.21"> </span>
<a href="#l58.22"></a><span id="l58.22" class="difflineat">@@ -223,17 +223,17 @@ var EmailAccountProvisioner = {</span>
<a href="#l58.23"></a><span id="l58.23">     // window itself, we open up the link in the default browser.</span>
<a href="#l58.24"></a><span id="l58.24">     let opener = Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l58.25"></a><span id="l58.25">                            .getService(Ci.nsIExternalProtocolService);</span>
<a href="#l58.26"></a><span id="l58.26">     document.addEventListener(&quot;click&quot;, function(e) {</span>
<a href="#l58.27"></a><span id="l58.27">       if (e.target.tagName == &quot;a&quot; &amp;&amp;</span>
<a href="#l58.28"></a><span id="l58.28">           e.target.classList.contains(&quot;external&quot;)) {</span>
<a href="#l58.29"></a><span id="l58.29">         e.preventDefault();</span>
<a href="#l58.30"></a><span id="l58.30">         let uri = e.target.getAttribute(&quot;href&quot;);</span>
<a href="#l58.31"></a><span id="l58.31" class="difflineminus">-        opener.loadUrl(Services.io.newURI(uri, &quot;UTF-8&quot;, null));</span>
<a href="#l58.32"></a><span id="l58.32" class="difflineplus">+        opener.loadUrl(Services.io.newURI(uri, &quot;UTF-8&quot;));</span>
<a href="#l58.33"></a><span id="l58.33">       }</span>
<a href="#l58.34"></a><span id="l58.34">     });</span>
<a href="#l58.35"></a><span id="l58.35"> </span>
<a href="#l58.36"></a><span id="l58.36">     // Throw the disclaimer into the window.  In the future, this should probably</span>
<a href="#l58.37"></a><span id="l58.37">     // be done in the actual XHTML page, instead of injected via JS.</span>
<a href="#l58.38"></a><span id="l58.38">     let commentary = document.querySelector(&quot;.commentary&quot;);</span>
<a href="#l58.39"></a><span id="l58.39">     commentary.innerHTML =</span>
<a href="#l58.40"></a><span id="l58.40">       commentary.innerHTML +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -1795,17 +1795,17 @@ var gApplicationsPane = {</span>
<a href="#l59.4"></a><span id="l59.4">     let urlSpec = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l59.5"></a><span id="l59.5">       .QueryInterface(Components.interfaces.nsIFileProtocolHandler)</span>
<a href="#l59.6"></a><span id="l59.6">       .getURLSpecFromFile(aFile);</span>
<a href="#l59.7"></a><span id="l59.7"> </span>
<a href="#l59.8"></a><span id="l59.8">     return &quot;moz-icon://&quot; + urlSpec + &quot;?size=16&quot;;</span>
<a href="#l59.9"></a><span id="l59.9">   },</span>
<a href="#l59.10"></a><span id="l59.10"> </span>
<a href="#l59.11"></a><span id="l59.11">   _getIconURLForWebApp: function(aWebAppURITemplate) {</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-    var uri = Services.io.newURI(aWebAppURITemplate, null, null);</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+    var uri = Services.io.newURI(aWebAppURITemplate);</span>
<a href="#l59.14"></a><span id="l59.14"> </span>
<a href="#l59.15"></a><span id="l59.15">     // Unfortunately we can't use the favicon service to get the favicon,</span>
<a href="#l59.16"></a><span id="l59.16">     // because the service looks in the annotations table for a record with</span>
<a href="#l59.17"></a><span id="l59.17">     // the exact URL we give it, and users won't have such records for URLs</span>
<a href="#l59.18"></a><span id="l59.18">     // they don't visit, and users won't visit the web app's URL template,</span>
<a href="#l59.19"></a><span id="l59.19">     // they'll only visit URLs derived from that template (i.e. with %s</span>
<a href="#l59.20"></a><span id="l59.20">     // in the template replaced by the URL of the content being handled).</span>
<a href="#l59.21"></a><span id="l59.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mail/components/preferences/chat.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mail/components/preferences/chat.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -63,17 +63,17 @@ var gChatPane = {</span>
<a href="#l60.4"></a><span id="l60.4"> </span>
<a href="#l60.5"></a><span id="l60.5">     // This should be in sync with the code in nsStatusBarBiffManager::PlayBiffSound.</span>
<a href="#l60.6"></a><span id="l60.6">     if (!soundLocation.startsWith(&quot;file://&quot;)) {</span>
<a href="#l60.7"></a><span id="l60.7">       if (Services.appinfo.OS == &quot;Darwin&quot;) // OS X</span>
<a href="#l60.8"></a><span id="l60.8">         sound.beep();</span>
<a href="#l60.9"></a><span id="l60.9">       else</span>
<a href="#l60.10"></a><span id="l60.10">         sound.playEventSound(Ci.nsISound.EVENT_NEW_MAIL_RECEIVED);</span>
<a href="#l60.11"></a><span id="l60.11">     } else {</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-      sound.play(Services.io.newURI(soundLocation, null, null));</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+      sound.play(Services.io.newURI(soundLocation));</span>
<a href="#l60.14"></a><span id="l60.14">     }</span>
<a href="#l60.15"></a><span id="l60.15">   },</span>
<a href="#l60.16"></a><span id="l60.16"> </span>
<a href="#l60.17"></a><span id="l60.17">   browseForSoundFile: function ()</span>
<a href="#l60.18"></a><span id="l60.18">   {</span>
<a href="#l60.19"></a><span id="l60.19">     const nsIFilePicker = Ci.nsIFilePicker;</span>
<a href="#l60.20"></a><span id="l60.20">     let fp = Cc[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l60.21"></a><span id="l60.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -115,17 +115,17 @@ var gGeneralPane = {</span>
<a href="#l61.4"></a><span id="l61.4">                      document.getElementById('soundType').value == 1) ?</span>
<a href="#l61.5"></a><span id="l61.5">                     document.getElementById('soundUrlLocation').value : &quot;&quot;;</span>
<a href="#l61.6"></a><span id="l61.6"> </span>
<a href="#l61.7"></a><span id="l61.7">     if (!soundLocation.includes(&quot;file://&quot;)) {</span>
<a href="#l61.8"></a><span id="l61.8">       // User has not set any custom sound file to be played</span>
<a href="#l61.9"></a><span id="l61.9">       sound.playEventSound(Components.interfaces.nsISound.EVENT_NEW_MAIL_RECEIVED);</span>
<a href="#l61.10"></a><span id="l61.10">     } else {</span>
<a href="#l61.11"></a><span id="l61.11">       // User has set a custom audio file to be played along the alert.</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-      sound.play(Services.io.newURI(soundLocation, null, null));</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+      sound.play(Services.io.newURI(soundLocation));</span>
<a href="#l61.14"></a><span id="l61.14">     }</span>
<a href="#l61.15"></a><span id="l61.15">   },</span>
<a href="#l61.16"></a><span id="l61.16"> </span>
<a href="#l61.17"></a><span id="l61.17">   browseForSoundFile: function ()</span>
<a href="#l61.18"></a><span id="l61.18">   {</span>
<a href="#l61.19"></a><span id="l61.19">     const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l61.20"></a><span id="l61.20">     var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l61.21"></a><span id="l61.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mail/components/preferences/permissions.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mail/components/preferences/permissions.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -96,24 +96,24 @@ var gPermissionManager = {</span>
<a href="#l62.4"></a><span id="l62.4">       // principal doesn't have a canonical origin representation. This will</span>
<a href="#l62.5"></a><span id="l62.5">       // help catch cases where the URI parser parsed something like</span>
<a href="#l62.6"></a><span id="l62.6">       // `localhost:8080` as having the scheme `localhost`, rather than being</span>
<a href="#l62.7"></a><span id="l62.7">       // an invalid URI. A canonical origin representation is required by the</span>
<a href="#l62.8"></a><span id="l62.8">       // permission manager for storage, so this won't prevent any valid</span>
<a href="#l62.9"></a><span id="l62.9">       // permissions from being entered by the user.</span>
<a href="#l62.10"></a><span id="l62.10">       let uri;</span>
<a href="#l62.11"></a><span id="l62.11">       try {</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-        uri = Services.io.newURI(input_url, null, null);</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+        uri = Services.io.newURI(input_url);</span>
<a href="#l62.14"></a><span id="l62.14">         principal = Services.scriptSecurityManager.createCodebasePrincipal(uri, {});</span>
<a href="#l62.15"></a><span id="l62.15">         // If we have ended up with an unknown scheme, the following will throw.</span>
<a href="#l62.16"></a><span id="l62.16">         principal.origin;</span>
<a href="#l62.17"></a><span id="l62.17">       } catch(ex) {</span>
<a href="#l62.18"></a><span id="l62.18">         let scheme = (this._type != &quot;image&quot; || !input_url.includes(&quot;@&quot;)) ?</span>
<a href="#l62.19"></a><span id="l62.19">           &quot;http://&quot; : MAILURI_BASE;</span>
<a href="#l62.20"></a><span id="l62.20" class="difflineminus">-        uri = Services.io.newURI(scheme + input_url, null, null);</span>
<a href="#l62.21"></a><span id="l62.21" class="difflineplus">+        uri = Services.io.newURI(scheme + input_url);</span>
<a href="#l62.22"></a><span id="l62.22">         principal = Services.scriptSecurityManager.createCodebasePrincipal(uri, {});</span>
<a href="#l62.23"></a><span id="l62.23">         // If we have ended up with an unknown scheme, the following will throw.</span>
<a href="#l62.24"></a><span id="l62.24">         principal.origin;</span>
<a href="#l62.25"></a><span id="l62.25">       }</span>
<a href="#l62.26"></a><span id="l62.26">     } catch(ex) {</span>
<a href="#l62.27"></a><span id="l62.27">       var message = this._bundle.getString(&quot;invalidURI&quot;);</span>
<a href="#l62.28"></a><span id="l62.28">       var title = this._bundle.getString(&quot;invalidURITitle&quot;);</span>
<a href="#l62.29"></a><span id="l62.29">       Services.prompt.alert(window, title, message);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mail/test/mozmill/content-policy/test-general-content-policy.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mail/test/mozmill/content-policy/test-general-content-policy.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -304,17 +304,17 @@ function checkAllowFeedMsg(test) {</span>
<a href="#l63.4"></a><span id="l63.4"> function checkAllowForSenderWithPerms(test) {</span>
<a href="#l63.5"></a><span id="l63.5">   let msgDbHdr = addToFolder(test.type + &quot; priv sender test message &quot; + gMsgNo,</span>
<a href="#l63.6"></a><span id="l63.6">                              msgBodyStart + test.body + msgBodyEnd, folder);</span>
<a href="#l63.7"></a><span id="l63.7"> </span>
<a href="#l63.8"></a><span id="l63.8">   let addresses = {};</span>
<a href="#l63.9"></a><span id="l63.9">   MailServices.headerParser.parseHeadersWithArray(msgDbHdr.author, addresses, {}, {});</span>
<a href="#l63.10"></a><span id="l63.10">   let authorEmailAddress = addresses.value[0];</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-  let uri = Services.io.newURI(&quot;chrome://messenger/content/?email=&quot; + authorEmailAddress, null, null);</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+  let uri = Services.io.newURI(&quot;chrome://messenger/content/?email=&quot; + authorEmailAddress);</span>
<a href="#l63.14"></a><span id="l63.14">   Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l63.15"></a><span id="l63.15">   assert_true(Services.perms.testPermission(uri, &quot;image&quot;) ==</span>
<a href="#l63.16"></a><span id="l63.16">               Services.perms.ALLOW_ACTION);</span>
<a href="#l63.17"></a><span id="l63.17"> </span>
<a href="#l63.18"></a><span id="l63.18">   // select the newly created message</span>
<a href="#l63.19"></a><span id="l63.19">   let msgHdr = select_click_row(gMsgNo);</span>
<a href="#l63.20"></a><span id="l63.20"> </span>
<a href="#l63.21"></a><span id="l63.21">   assert_equals(msgDbHdr, msgHdr);</span>
<a href="#l63.22"></a><span id="l63.22" class="difflineat">@@ -347,17 +347,17 @@ function checkAllowForHostsWithPerms(tes</span>
<a href="#l63.23"></a><span id="l63.23">   assert_selected_and_displayed(gMsgNo);</span>
<a href="#l63.24"></a><span id="l63.24"> </span>
<a href="#l63.25"></a><span id="l63.25">   let src = mozmill.getMail3PaneController().window.content.document</span>
<a href="#l63.26"></a><span id="l63.26">                    .getElementById(&quot;testelement&quot;).src;</span>
<a href="#l63.27"></a><span id="l63.27"> </span>
<a href="#l63.28"></a><span id="l63.28">   if (!src.startsWith(&quot;http&quot;))</span>
<a href="#l63.29"></a><span id="l63.29">     return; // just test http in this test</span>
<a href="#l63.30"></a><span id="l63.30"> </span>
<a href="#l63.31"></a><span id="l63.31" class="difflineminus">-  let uri = Services.io.newURI(src, null, null);</span>
<a href="#l63.32"></a><span id="l63.32" class="difflineplus">+  let uri = Services.io.newURI(src);</span>
<a href="#l63.33"></a><span id="l63.33">   Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l63.34"></a><span id="l63.34">   assert_true(Services.perms.testPermission(uri, &quot;image&quot;) ==</span>
<a href="#l63.35"></a><span id="l63.35">               Services.perms.ALLOW_ACTION);</span>
<a href="#l63.36"></a><span id="l63.36"> </span>
<a href="#l63.37"></a><span id="l63.37">   // Click back one msg, then the original again, which should now allow loading.</span>
<a href="#l63.38"></a><span id="l63.38">   select_click_row(gMsgNo - 1);</span>
<a href="#l63.39"></a><span id="l63.39">   // Select the newly created message.</span>
<a href="#l63.40"></a><span id="l63.40">   msgHdr = select_click_row(gMsgNo);</span>
<a href="#l63.41"></a><span id="l63.41" class="difflineat">@@ -398,17 +398,17 @@ function test_generalContentPolicy() {</span>
<a href="#l63.42"></a><span id="l63.42">       if (i == 0) {</span>
<a href="#l63.43"></a><span id="l63.43">         // Now check that image is visible after site is whitelisted.</span>
<a href="#l63.44"></a><span id="l63.44">         // We do the first test which is the one with the image.</span>
<a href="#l63.45"></a><span id="l63.45"> </span>
<a href="#l63.46"></a><span id="l63.46">         // Add the site to the whitelist.</span>
<a href="#l63.47"></a><span id="l63.47">         let src = mozmill.getMail3PaneController().window.content.document</span>
<a href="#l63.48"></a><span id="l63.48">                          .getElementById(&quot;testelement&quot;).src;</span>
<a href="#l63.49"></a><span id="l63.49"> </span>
<a href="#l63.50"></a><span id="l63.50" class="difflineminus">-        let uri = Services.io.newURI(src, null, null);</span>
<a href="#l63.51"></a><span id="l63.51" class="difflineplus">+        let uri = Services.io.newURI(src);</span>
<a href="#l63.52"></a><span id="l63.52">         Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l63.53"></a><span id="l63.53">         assert_true(Services.perms.testPermission(uri, &quot;image&quot;) ==</span>
<a href="#l63.54"></a><span id="l63.54">                     Services.perms.ALLOW_ACTION);</span>
<a href="#l63.55"></a><span id="l63.55"> </span>
<a href="#l63.56"></a><span id="l63.56">         // Check allowed in reply window</span>
<a href="#l63.57"></a><span id="l63.57">         checkComposeWindow(TESTS[i], true, true);</span>
<a href="#l63.58"></a><span id="l63.58"> </span>
<a href="#l63.59"></a><span id="l63.59">         // Check allowed in forward window</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -1209,17 +1209,17 @@ function subtest_provider_language_wildc</span>
<a href="#l64.4"></a><span id="l64.4">  * Provisioner, and we have no search in the input.</span>
<a href="#l64.5"></a><span id="l64.5">  */</span>
<a href="#l64.6"></a><span id="l64.6"> function test_search_button_disabled_if_no_query_on_init() {</span>
<a href="#l64.7"></a><span id="l64.7">   // We have to do a little bit of gymnastics to access the local storage</span>
<a href="#l64.8"></a><span id="l64.8">   // for the accountProvisioner dialog...</span>
<a href="#l64.9"></a><span id="l64.9">   let url = &quot;chrome://content/messenger/accountProvisionerStorage/accountProvisioner&quot;;</span>
<a href="#l64.10"></a><span id="l64.10">   let dsm = Services.domStorageManager;</span>
<a href="#l64.11"></a><span id="l64.11"> </span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-  let uri = Services.io.newURI(url, &quot;&quot;, null);</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+  let uri = Services.io.newURI(url, &quot;&quot;);</span>
<a href="#l64.14"></a><span id="l64.14">   let principal = Services.scriptSecurityManager.getNoAppCodebasePrincipal(uri);</span>
<a href="#l64.15"></a><span id="l64.15">   let storage = dsm.getLocalStorageForPrincipal(principal, url);</span>
<a href="#l64.16"></a><span id="l64.16"> </span>
<a href="#l64.17"></a><span id="l64.17">   // Ok, got it. Now let's blank out the name.</span>
<a href="#l64.18"></a><span id="l64.18">   storage.setItem(&quot;name&quot;, &quot;&quot;);</span>
<a href="#l64.19"></a><span id="l64.19"> </span>
<a href="#l64.20"></a><span id="l64.20">   plan_for_modal_dialog(&quot;AccountCreation&quot;,</span>
<a href="#l64.21"></a><span id="l64.21">                         subtest_search_button_enabled_state_on_init);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-nntp-helpers.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-nntp-helpers.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -139,17 +139,17 @@ function setupLocalServer(port) {</span>
<a href="#l65.4"></a><span id="l65.4">   _server = server;</span>
<a href="#l65.5"></a><span id="l65.5"> </span>
<a href="#l65.6"></a><span id="l65.6">   return server;</span>
<a href="#l65.7"></a><span id="l65.7"> }</span>
<a href="#l65.8"></a><span id="l65.8"> </span>
<a href="#l65.9"></a><span id="l65.9"> var URLCreator = MailServices.nntp.QueryInterface(Ci.nsIProtocolHandler);</span>
<a href="#l65.10"></a><span id="l65.10"> </span>
<a href="#l65.11"></a><span id="l65.11"> function create_post(baseURL, file) {</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-  var url = URLCreator.newURI(baseURL, null, null);</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+  var url = URLCreator.newURI(baseURL);</span>
<a href="#l65.14"></a><span id="l65.14">   url.QueryInterface(Ci.nsINntpUrl);</span>
<a href="#l65.15"></a><span id="l65.15"> </span>
<a href="#l65.16"></a><span id="l65.16">   var post = Cc[&quot;@mozilla.org/messenger/nntpnewsgrouppost;1&quot;]</span>
<a href="#l65.17"></a><span id="l65.17">                .createInstance(Ci.nsINNTPNewsgroupPost);</span>
<a href="#l65.18"></a><span id="l65.18">   post.postMessageFile = do_get_file(file);</span>
<a href="#l65.19"></a><span id="l65.19">   url.messageToPost = post;</span>
<a href="#l65.20"></a><span id="l65.20">   return url;</span>
<a href="#l65.21"></a><span id="l65.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -1682,17 +1682,17 @@ RequestReader.prototype =</span>
<a href="#l66.4"></a><span id="l66.4">         dumpn(&quot;*** Metadata version too low&quot;);</span>
<a href="#l66.5"></a><span id="l66.5">         throw HTTP_400;</span>
<a href="#l66.6"></a><span id="l66.6">       }</span>
<a href="#l66.7"></a><span id="l66.7"> </span>
<a href="#l66.8"></a><span id="l66.8">       try</span>
<a href="#l66.9"></a><span id="l66.9">       {</span>
<a href="#l66.10"></a><span id="l66.10">         var uri = Cc[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l66.11"></a><span id="l66.11">                     .getService(Ci.nsIIOService)</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-                    .newURI(fullPath, null, null);</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+                    .newURI(fullPath);</span>
<a href="#l66.14"></a><span id="l66.14">         fullPath = uri.path;</span>
<a href="#l66.15"></a><span id="l66.15">         scheme = uri.scheme;</span>
<a href="#l66.16"></a><span id="l66.16">         host = metadata._host = uri.asciiHost;</span>
<a href="#l66.17"></a><span id="l66.17">         port = uri.port;</span>
<a href="#l66.18"></a><span id="l66.18">         if (port === -1)</span>
<a href="#l66.19"></a><span id="l66.19">         {</span>
<a href="#l66.20"></a><span id="l66.20">           if (scheme === &quot;http&quot;)</span>
<a href="#l66.21"></a><span id="l66.21">           {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -57,17 +57,17 @@</span>
<a href="#l67.4"></a><span id="l67.4">      if (principal == &quot;system&quot;)</span>
<a href="#l67.5"></a><span id="l67.5">        return systemPrincipal;</span>
<a href="#l67.6"></a><span id="l67.6">      return principal;</span>
<a href="#l67.7"></a><span id="l67.7">    }</span>
<a href="#l67.8"></a><span id="l67.8"> </span>
<a href="#l67.9"></a><span id="l67.9">    // The base URI to we use when we're given relative URLs, if any.</span>
<a href="#l67.10"></a><span id="l67.10">    var baseURI = null;</span>
<a href="#l67.11"></a><span id="l67.11">    if (global.window)</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-     baseURI = ios.newURI(global.location.href, null, null);</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+     baseURI = ios.newURI(global.location.href);</span>
<a href="#l67.14"></a><span id="l67.14">    exports.baseURI = baseURI;</span>
<a href="#l67.15"></a><span id="l67.15"> </span>
<a href="#l67.16"></a><span id="l67.16">    // The &quot;parent&quot; chrome URI to use if we're loading code that</span>
<a href="#l67.17"></a><span id="l67.17">    // needs chrome privileges but may not have a filename that</span>
<a href="#l67.18"></a><span id="l67.18">    // matches any of SpiderMonkey's defined system filename prefixes.</span>
<a href="#l67.19"></a><span id="l67.19">    // The latter is needed so that wrappers can be automatically</span>
<a href="#l67.20"></a><span id="l67.20">    // made for the code. For more information on this, see</span>
<a href="#l67.21"></a><span id="l67.21">    // bug 418356:</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineat">@@ -309,17 +309,17 @@</span>
<a href="#l67.23"></a><span id="l67.23">    exports.LocalFileSystem.prototype = {</span>
<a href="#l67.24"></a><span id="l67.24">      resolveModule: function resolveModule(base, path) {</span>
<a href="#l67.25"></a><span id="l67.25">        path = path + &quot;.js&quot;;</span>
<a href="#l67.26"></a><span id="l67.26"> </span>
<a href="#l67.27"></a><span id="l67.27">        var baseURI;</span>
<a href="#l67.28"></a><span id="l67.28">        if (!base)</span>
<a href="#l67.29"></a><span id="l67.29">          baseURI = this._rootURI;</span>
<a href="#l67.30"></a><span id="l67.30">        else</span>
<a href="#l67.31"></a><span id="l67.31" class="difflineminus">-         baseURI = ios.newURI(base, null, null);</span>
<a href="#l67.32"></a><span id="l67.32" class="difflineplus">+         baseURI = ios.newURI(base);</span>
<a href="#l67.33"></a><span id="l67.33">        var newURI = ios.newURI(path, null, baseURI);</span>
<a href="#l67.34"></a><span id="l67.34">        var channel = ios.newChannelFromURI2(newURI,</span>
<a href="#l67.35"></a><span id="l67.35">                                             null,</span>
<a href="#l67.36"></a><span id="l67.36">                                             scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l67.37"></a><span id="l67.37">                                             null,</span>
<a href="#l67.38"></a><span id="l67.38">                                             Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l67.39"></a><span id="l67.39">                                             Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l67.40"></a><span id="l67.40">        try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mailnews/addrbook/prefs/content/pref-directory-add.js</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mailnews/addrbook/prefs/content/pref-directory-add.js</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -303,17 +303,17 @@ function onAccept()</span>
<a href="#l68.4"></a><span id="l68.4">     else if (port &amp;&amp; hasCharacters(port))</span>
<a href="#l68.5"></a><span id="l68.5">       errorValue = &quot;invalidPortNumber&quot;;</span>
<a href="#l68.6"></a><span id="l68.6">     else if (results &amp;&amp; hasCharacters(results))</span>
<a href="#l68.7"></a><span id="l68.7">       errorValue = &quot;invalidResults&quot;;</span>
<a href="#l68.8"></a><span id="l68.8">     if (!errorValue) {</span>
<a href="#l68.9"></a><span id="l68.9">       // XXX Due to the LDAP c-sdk pass a dummy url to the IO service, then</span>
<a href="#l68.10"></a><span id="l68.10">       // update the parts (bug 473351).</span>
<a href="#l68.11"></a><span id="l68.11">       let ldapUrl = Services.io.newURI(</span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-        (secure.checked ? &quot;ldaps://&quot; : &quot;ldap://&quot;) + &quot;localhost/dc=???&quot;, null, null)</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+        (secure.checked ? &quot;ldaps://&quot; : &quot;ldap://&quot;) + &quot;localhost/dc=???&quot;)</span>
<a href="#l68.14"></a><span id="l68.14">         .QueryInterface(Components.interfaces.nsILDAPURL);</span>
<a href="#l68.15"></a><span id="l68.15"> </span>
<a href="#l68.16"></a><span id="l68.16">       ldapUrl.host = hostname;</span>
<a href="#l68.17"></a><span id="l68.17">       ldapUrl.port = port ? port :</span>
<a href="#l68.18"></a><span id="l68.18">                             (secure.checked ? kDefaultSecureLDAPPort :</span>
<a href="#l68.19"></a><span id="l68.19">                                               kDefaultLDAPPort);</span>
<a href="#l68.20"></a><span id="l68.20">       ldapUrl.dn = document.getElementById(&quot;basedn&quot;).value;</span>
<a href="#l68.21"></a><span id="l68.21">       ldapUrl.scope = document.getElementById(&quot;one&quot;).selected ?</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mailnews/base/prefs/content/accountcreation/sanitizeDatatypes.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -113,17 +113,17 @@ var sanitize =</span>
<a href="#l69.4"></a><span id="l69.4">   url : function (unchecked)</span>
<a href="#l69.5"></a><span id="l69.5">   {</span>
<a href="#l69.6"></a><span id="l69.6">     var str =  this.string(unchecked);</span>
<a href="#l69.7"></a><span id="l69.7">     if (!str.startsWith(&quot;http&quot;) &amp;&amp; !str.startsWith(&quot;https&quot;))</span>
<a href="#l69.8"></a><span id="l69.8">       throw new MalformedException(&quot;url_scheme.error&quot;, unchecked);</span>
<a href="#l69.9"></a><span id="l69.9"> </span>
<a href="#l69.10"></a><span id="l69.10">     var uri;</span>
<a href="#l69.11"></a><span id="l69.11">     try {</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-      uri = Services.io.newURI(str, null, null);</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+      uri = Services.io.newURI(str);</span>
<a href="#l69.14"></a><span id="l69.14">       uri = uri.QueryInterface(Ci.nsIURL);</span>
<a href="#l69.15"></a><span id="l69.15">     } catch (e) {</span>
<a href="#l69.16"></a><span id="l69.16">       throw new MalformedException(&quot;url_parsing.error&quot;, unchecked);</span>
<a href="#l69.17"></a><span id="l69.17">     }</span>
<a href="#l69.18"></a><span id="l69.18"> </span>
<a href="#l69.19"></a><span id="l69.19">     if (uri.scheme != &quot;http&quot; &amp;&amp; uri.scheme != &quot;https&quot;)</span>
<a href="#l69.20"></a><span id="l69.20">       throw new MalformedException(&quot;url_scheme.error&quot;, unchecked);</span>
<a href="#l69.21"></a><span id="l69.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mailnews/base/prefs/content/accountcreation/util.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mailnews/base/prefs/content/accountcreation/util.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -47,17 +47,17 @@ function runAsync(func)</span>
<a href="#l70.4"></a><span id="l70.4"> </span>
<a href="#l70.5"></a><span id="l70.5"> </span>
<a href="#l70.6"></a><span id="l70.6"> /**</span>
<a href="#l70.7"></a><span id="l70.7">  * @param uriStr {String}</span>
<a href="#l70.8"></a><span id="l70.8">  * @result {nsIURI}</span>
<a href="#l70.9"></a><span id="l70.9">  */</span>
<a href="#l70.10"></a><span id="l70.10"> function makeNSIURI(uriStr)</span>
<a href="#l70.11"></a><span id="l70.11"> {</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-  return Services.io.newURI(uriStr, null, null);</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+  return Services.io.newURI(uriStr);</span>
<a href="#l70.14"></a><span id="l70.14"> }</span>
<a href="#l70.15"></a><span id="l70.15"> </span>
<a href="#l70.16"></a><span id="l70.16"> </span>
<a href="#l70.17"></a><span id="l70.17"> /**</span>
<a href="#l70.18"></a><span id="l70.18">  * Reads UTF8 data from a URL.</span>
<a href="#l70.19"></a><span id="l70.19">  *</span>
<a href="#l70.20"></a><span id="l70.20">  * @param uri {nsIURI}   what you want to read</span>
<a href="#l70.21"></a><span id="l70.21">  * @return {Array of String}   the contents of the file, one string per line</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mailnews/base/src/nsMailNewsCommandLineHandler.js</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mailnews/base/src/nsMailNewsCommandLineHandler.js</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -69,17 +69,17 @@ var nsMailNewsCommandLineHandler =</span>
<a href="#l71.4"></a><span id="l71.4">           // message URI</span>
<a href="#l71.5"></a><span id="l71.5">           msgHdr = this._messenger.msgHdrFromURI(mailURL);</span>
<a href="#l71.6"></a><span id="l71.6">         }</span>
<a href="#l71.7"></a><span id="l71.7">       }</span>
<a href="#l71.8"></a><span id="l71.8">       else {</span>
<a href="#l71.9"></a><span id="l71.9">         // Necko URL, so convert it into a message header</span>
<a href="#l71.10"></a><span id="l71.10">         let neckoURL = null;</span>
<a href="#l71.11"></a><span id="l71.11">         try {</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-          neckoURL = Services.io.newURI(mailURL, null, null);</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+          neckoURL = Services.io.newURI(mailURL);</span>
<a href="#l71.14"></a><span id="l71.14">         }</span>
<a href="#l71.15"></a><span id="l71.15">         catch (e) {</span>
<a href="#l71.16"></a><span id="l71.16">           // We failed to convert the URI. Oh well.</span>
<a href="#l71.17"></a><span id="l71.17">         }</span>
<a href="#l71.18"></a><span id="l71.18"> </span>
<a href="#l71.19"></a><span id="l71.19">         if (neckoURL instanceof Ci.nsIMsgMessageUrl)</span>
<a href="#l71.20"></a><span id="l71.20">           msgHdr = neckoURL.messageHeader;</span>
<a href="#l71.21"></a><span id="l71.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mailnews/base/test/unit/test_accountMigration.js</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_accountMigration.js</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -28,21 +28,21 @@ function run_test() {</span>
<a href="#l72.4"></a><span id="l72.4">                              &quot;account1,account2&quot;);</span>
<a href="#l72.5"></a><span id="l72.5"> </span>
<a href="#l72.6"></a><span id="l72.6">   let testAB = do_get_file(&quot;data/remoteContent.mab&quot;);</span>
<a href="#l72.7"></a><span id="l72.7"> </span>
<a href="#l72.8"></a><span id="l72.8">   // Copy the file to the profile directory for a PAB.</span>
<a href="#l72.9"></a><span id="l72.9">   testAB.copyTo(do_get_profile(), kPABData.fileName);</span>
<a href="#l72.10"></a><span id="l72.10"> </span>
<a href="#l72.11"></a><span id="l72.11">   let uriAllowed = Services.io.newURI(</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-    &quot;chrome://messenger/content/?email=yes@test.invalid&quot;, null, null);</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+    &quot;chrome://messenger/content/?email=yes@test.invalid&quot;);</span>
<a href="#l72.14"></a><span id="l72.14">   let uriAllowed2 = Services.io.newURI(</span>
<a href="#l72.15"></a><span id="l72.15" class="difflineminus">-    &quot;chrome://messenger/content/?email=yes2@test.invalid&quot;, null, null);</span>
<a href="#l72.16"></a><span id="l72.16" class="difflineplus">+    &quot;chrome://messenger/content/?email=yes2@test.invalid&quot;);</span>
<a href="#l72.17"></a><span id="l72.17">   let uriDisallowed = Services.io.newURI(</span>
<a href="#l72.18"></a><span id="l72.18" class="difflineminus">-    &quot;chrome://messenger/content/?email=no@test.invalid&quot;, null, null);</span>
<a href="#l72.19"></a><span id="l72.19" class="difflineplus">+    &quot;chrome://messenger/content/?email=no@test.invalid&quot;);</span>
<a href="#l72.20"></a><span id="l72.20"> </span>
<a href="#l72.21"></a><span id="l72.21">   // Check that this email that according to the ab data has (had!)</span>
<a href="#l72.22"></a><span id="l72.22">   // remote content premissions, has no premissions pre migration.</span>
<a href="#l72.23"></a><span id="l72.23">   do_check_eq(Services.perms.testPermission(uriAllowed, &quot;image&quot;),</span>
<a href="#l72.24"></a><span id="l72.24">               Services.perms.UNKNOWN_ACTION);</span>
<a href="#l72.25"></a><span id="l72.25">   do_check_eq(Services.perms.testPermission(uriAllowed2, &quot;image&quot;),</span>
<a href="#l72.26"></a><span id="l72.26">               Services.perms.UNKNOWN_ACTION);</span>
<a href="#l72.27"></a><span id="l72.27">   do_check_eq(Services.perms.testPermission(uriDisallowed, &quot;image&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mailnews/base/test/unit/test_nsIMsgContentPolicy.js</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_nsIMsgContentPolicy.js</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l73.4"></a><span id="l73.4"> /*</span>
<a href="#l73.5"></a><span id="l73.5">  * Test suite for nsIMsgContentPolicy to check we could add/remove customized protocol to</span>
<a href="#l73.6"></a><span id="l73.6">  * nsMsgContentPolicy.</span>
<a href="#l73.7"></a><span id="l73.7">  */</span>
<a href="#l73.8"></a><span id="l73.8"> </span>
<a href="#l73.9"></a><span id="l73.9"> function makeURI(aURL) {</span>
<a href="#l73.10"></a><span id="l73.10">   var ioService = Cc[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l73.11"></a><span id="l73.11">                     .getService(Ci.nsIIOService);</span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-  return ioService.newURI(aURL, null, null);</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+  return ioService.newURI(aURL);</span>
<a href="#l73.14"></a><span id="l73.14"> }</span>
<a href="#l73.15"></a><span id="l73.15"> </span>
<a href="#l73.16"></a><span id="l73.16"> function run_test() {</span>
<a href="#l73.17"></a><span id="l73.17">   var content_policy = Cc[&quot;@mozilla.org/messenger/content-policy;1&quot;]</span>
<a href="#l73.18"></a><span id="l73.18">                          .getService(Ci.nsIContentPolicy);</span>
<a href="#l73.19"></a><span id="l73.19"> </span>
<a href="#l73.20"></a><span id="l73.20">   Assert.ok(content_policy);</span>
<a href="#l73.21"></a><span id="l73.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchChaining.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchChaining.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -20,18 +20,17 @@ function *setupFolder()</span>
<a href="#l74.4"></a><span id="l74.4">   // add a single message to the imap inbox.</span>
<a href="#l74.5"></a><span id="l74.5">   let messages = [];</span>
<a href="#l74.6"></a><span id="l74.6">   let messageGenerator = new MessageGenerator();</span>
<a href="#l74.7"></a><span id="l74.7">   messages = messages.concat(messageGenerator.makeMessage());</span>
<a href="#l74.8"></a><span id="l74.8">   let synthMessage = messages[0];</span>
<a href="#l74.9"></a><span id="l74.9"> </span>
<a href="#l74.10"></a><span id="l74.10">   let msgURI =</span>
<a href="#l74.11"></a><span id="l74.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-                       btoa(synthMessage.toMessageString()),</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineminus">-                       null, null);</span>
<a href="#l74.14"></a><span id="l74.14" class="difflineplus">+                       btoa(synthMessage.toMessageString()));</span>
<a href="#l74.15"></a><span id="l74.15">   let message = new imapMessage(msgURI.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l74.16"></a><span id="l74.16">   IMAPPump.mailbox.addMessage(message);</span>
<a href="#l74.17"></a><span id="l74.17"> </span>
<a href="#l74.18"></a><span id="l74.18">   // update folder to download header.</span>
<a href="#l74.19"></a><span id="l74.19">   let listener = new PromiseTestUtils.PromiseUrlListener();</span>
<a href="#l74.20"></a><span id="l74.20">   IMAPPump.inbox.updateFolderWithListener(null, listener);</span>
<a href="#l74.21"></a><span id="l74.21">   yield listener.promise;</span>
<a href="#l74.22"></a><span id="l74.22"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mailnews/base/util/mailnewsMigrator.js</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mailnews/base/util/mailnewsMigrator.js</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -127,17 +127,17 @@ function MigrateABRemoteContentSettings(</span>
<a href="#l75.4"></a><span id="l75.4">     return;</span>
<a href="#l75.5"></a><span id="l75.5"> </span>
<a href="#l75.6"></a><span id="l75.6">   // Search through all of our local address books looking for a match.</span>
<a href="#l75.7"></a><span id="l75.7">   let enumerator = MailServices.ab.directories;</span>
<a href="#l75.8"></a><span id="l75.8">   while (enumerator.hasMoreElements())</span>
<a href="#l75.9"></a><span id="l75.9">   {</span>
<a href="#l75.10"></a><span id="l75.10">     let migrateAddress = function(aEmail) {</span>
<a href="#l75.11"></a><span id="l75.11">       let uri = Services.io.newURI(</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-        &quot;chrome://messenger/content/?email=&quot; + aEmail, null, null);</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+        &quot;chrome://messenger/content/?email=&quot; + aEmail);</span>
<a href="#l75.14"></a><span id="l75.14">       Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l75.15"></a><span id="l75.15">     }</span>
<a href="#l75.16"></a><span id="l75.16"> </span>
<a href="#l75.17"></a><span id="l75.17">     let addrbook = enumerator.getNext()</span>
<a href="#l75.18"></a><span id="l75.18">       .QueryInterface(Components.interfaces.nsIAbDirectory);</span>
<a href="#l75.19"></a><span id="l75.19">     try {</span>
<a href="#l75.20"></a><span id="l75.20">       // If it's a read-only book, don't try to find a card as we we could never</span>
<a href="#l75.21"></a><span id="l75.21">       // have set the AllowRemoteContent property.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_mailtoURL.js</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_mailtoURL.js</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -5,17 +5,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l76.4"></a><span id="l76.4"> </span>
<a href="#l76.5"></a><span id="l76.5"> var nsIMailtoUrl = Components.interfaces.nsIMailtoUrl;</span>
<a href="#l76.6"></a><span id="l76.6"> var COMPOSE_HTML = Components.interfaces.nsIMsgCompFormat.HTML;</span>
<a href="#l76.7"></a><span id="l76.7"> var COMPOSE_DEFAULT = Components.interfaces.nsIMsgCompFormat.Default;</span>
<a href="#l76.8"></a><span id="l76.8"> </span>
<a href="#l76.9"></a><span id="l76.9"> function run_test() {</span>
<a href="#l76.10"></a><span id="l76.10"> </span>
<a href="#l76.11"></a><span id="l76.11">   function test(aTest) {</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-    var uri = Services.io.newURI(aTest.url, null, null);</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+    var uri = Services.io.newURI(aTest.url);</span>
<a href="#l76.14"></a><span id="l76.14">     uri = uri.QueryInterface(Components.interfaces.nsIMailtoUrl);</span>
<a href="#l76.15"></a><span id="l76.15"> </span>
<a href="#l76.16"></a><span id="l76.16">     var to = {}, cc = {}, bcc = {}, subject = {}, body = {}, html = {},</span>
<a href="#l76.17"></a><span id="l76.17">         reference = {}, newsgroup = {}, composeformat = {};</span>
<a href="#l76.18"></a><span id="l76.18">     uri.getMessageContents(to, cc, bcc, subject, body, html, reference,</span>
<a href="#l76.19"></a><span id="l76.19">                            newsgroup, composeformat);</span>
<a href="#l76.20"></a><span id="l76.20">     do_check_eq(aTest.to, to.value);</span>
<a href="#l76.21"></a><span id="l76.21">     do_check_eq(aTest.cc, cc.value);</span>
<a href="#l76.22"></a><span id="l76.22" class="difflineat">@@ -34,17 +34,17 @@ function run_test() {</span>
<a href="#l76.23"></a><span id="l76.23">     do_check_eq(aTest.newshost, uri.newsHostPart);</span>
<a href="#l76.24"></a><span id="l76.24">     do_check_true(uri.equals(uri));</span>
<a href="#l76.25"></a><span id="l76.25">   }</span>
<a href="#l76.26"></a><span id="l76.26"> </span>
<a href="#l76.27"></a><span id="l76.27">   for (var i = 0; i &lt; tests.length; i++)</span>
<a href="#l76.28"></a><span id="l76.28">     test(tests[i]);</span>
<a href="#l76.29"></a><span id="l76.29"> </span>
<a href="#l76.30"></a><span id="l76.30">   // Test cloning reparses the url by checking the to field.</span>
<a href="#l76.31"></a><span id="l76.31" class="difflineminus">-  let uriToClone = Services.io.newURI(tests[0].url, null, null);</span>
<a href="#l76.32"></a><span id="l76.32" class="difflineplus">+  let uriToClone = Services.io.newURI(tests[0].url);</span>
<a href="#l76.33"></a><span id="l76.33">   let clonedUrl = uriToClone.clone().QueryInterface(Components.interfaces.nsIMailtoUrl);</span>
<a href="#l76.34"></a><span id="l76.34">   var to = {}, cc = {}, bcc = {}, subject = {}, body = {}, html = {},</span>
<a href="#l76.35"></a><span id="l76.35">       reference = {}, newsgroup = {}, composeformat = {};</span>
<a href="#l76.36"></a><span id="l76.36">   clonedUrl.getMessageContents(to, cc, bcc, subject, body, html, reference,</span>
<a href="#l76.37"></a><span id="l76.37">                                newsgroup, composeformat);</span>
<a href="#l76.38"></a><span id="l76.38">   do_check_eq(to.value, tests[0].to);</span>
<a href="#l76.39"></a><span id="l76.39"> };</span>
<a href="#l76.40"></a><span id="l76.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpProtocols.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpProtocols.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -32,17 +32,17 @@ function run_test() {</span>
<a href="#l77.4"></a><span id="l77.4">     do_check_eq(pH.defaultPort, protocols[part].defaultPort);</span>
<a href="#l77.5"></a><span id="l77.5">     do_check_eq(pH.protocolFlags, defaultProtocolFlags);</span>
<a href="#l77.6"></a><span id="l77.6"> </span>
<a href="#l77.7"></a><span id="l77.7">     // Whip through some of the ports to check we get the right results.</span>
<a href="#l77.8"></a><span id="l77.8">     for (let i = 0; i &lt; 1024; ++i)</span>
<a href="#l77.9"></a><span id="l77.9">       do_check_eq(pH.allowPort(i, &quot;&quot;), (i == protocols[part].defaultPort));</span>
<a href="#l77.10"></a><span id="l77.10"> </span>
<a href="#l77.11"></a><span id="l77.11">     // Check we get a URI when we ask for one</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;, null);</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;);</span>
<a href="#l77.14"></a><span id="l77.14"> </span>
<a href="#l77.15"></a><span id="l77.15">     uri.QueryInterface(Ci.nsISmtpUrl);</span>
<a href="#l77.16"></a><span id="l77.16"> </span>
<a href="#l77.17"></a><span id="l77.17">     do_check_eq(uri.spec, protocols[part].urlSpec);</span>
<a href="#l77.18"></a><span id="l77.18"> </span>
<a href="#l77.19"></a><span id="l77.19">     try {</span>
<a href="#l77.20"></a><span id="l77.20">       // This call should throw NS_ERROR_NOT_IMPLEMENTED. If it doesn't,</span>
<a href="#l77.21"></a><span id="l77.21">       // then we should implement a new test for it.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpURL.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpURL.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -14,14 +14,14 @@ var smtpURLs =</span>
<a href="#l78.4"></a><span id="l78.4">       username: &quot;user&quot;</span>
<a href="#l78.5"></a><span id="l78.5">     } ];</span>
<a href="#l78.6"></a><span id="l78.6"> </span>
<a href="#l78.7"></a><span id="l78.7"> function run_test() {</span>
<a href="#l78.8"></a><span id="l78.8">   var url;</span>
<a href="#l78.9"></a><span id="l78.9">   for (var part = 0; part &lt; smtpURLs.length; ++part) {</span>
<a href="#l78.10"></a><span id="l78.10">     print(&quot;url: &quot; + smtpURLs[part].url);</span>
<a href="#l78.11"></a><span id="l78.11"> </span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-    url = Services.io.newURI(smtpURLs[part].url, null, null);</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+    url = Services.io.newURI(smtpURLs[part].url);</span>
<a href="#l78.14"></a><span id="l78.14"> </span>
<a href="#l78.15"></a><span id="l78.15">     do_check_eq(url.spec, smtpURLs[part].spec);</span>
<a href="#l78.16"></a><span id="l78.16">     do_check_eq(url.username, smtpURLs[part].username);</span>
<a href="#l78.17"></a><span id="l78.17">   }</span>
<a href="#l78.18"></a><span id="l78.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/Feed.js</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/Feed.js</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -30,17 +30,17 @@ var FeedCache =</span>
<a href="#l79.4"></a><span id="l79.4">     if (index in this.mFeeds)</span>
<a href="#l79.5"></a><span id="l79.5">       delete this.mFeeds[index];</span>
<a href="#l79.6"></a><span id="l79.6">   },</span>
<a href="#l79.7"></a><span id="l79.7"> </span>
<a href="#l79.8"></a><span id="l79.8">   normalizeHost: function (aUrl)</span>
<a href="#l79.9"></a><span id="l79.9">   {</span>
<a href="#l79.10"></a><span id="l79.10">     try</span>
<a href="#l79.11"></a><span id="l79.11">     {</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-      let normalizedUrl = Services.io.newURI(aUrl, null, null);</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+      let normalizedUrl = Services.io.newURI(aUrl);</span>
<a href="#l79.14"></a><span id="l79.14">       normalizedUrl.host = normalizedUrl.host.toLowerCase();</span>
<a href="#l79.15"></a><span id="l79.15">       return normalizedUrl.spec</span>
<a href="#l79.16"></a><span id="l79.16">     }</span>
<a href="#l79.17"></a><span id="l79.17">     catch (ex)</span>
<a href="#l79.18"></a><span id="l79.18">     {</span>
<a href="#l79.19"></a><span id="l79.19">       return aUrl;</span>
<a href="#l79.20"></a><span id="l79.20">     }</span>
<a href="#l79.21"></a><span id="l79.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/FeedItem.js</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/FeedItem.js</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -45,17 +45,17 @@ FeedItem.prototype =</span>
<a href="#l80.4"></a><span id="l80.4">   {</span>
<a href="#l80.5"></a><span id="l80.5">     return this.mURL;</span>
<a href="#l80.6"></a><span id="l80.6">   },</span>
<a href="#l80.7"></a><span id="l80.7"> </span>
<a href="#l80.8"></a><span id="l80.8">   set url(aVal)</span>
<a href="#l80.9"></a><span id="l80.9">   {</span>
<a href="#l80.10"></a><span id="l80.10">     try</span>
<a href="#l80.11"></a><span id="l80.11">     {</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-      this.mURL = Services.io.newURI(aVal, null, null).spec;</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineplus">+      this.mURL = Services.io.newURI(aVal).spec;</span>
<a href="#l80.14"></a><span id="l80.14">     }</span>
<a href="#l80.15"></a><span id="l80.15">     catch(ex)</span>
<a href="#l80.16"></a><span id="l80.16">     {</span>
<a href="#l80.17"></a><span id="l80.17">       // The url as published or constructed can be a non url.  It's used as a</span>
<a href="#l80.18"></a><span id="l80.18">       // feeditem identifier in feeditems.rdf, as a messageId, and as an href</span>
<a href="#l80.19"></a><span id="l80.19">       // and for the content-base header.  Save as is; ensure not null.</span>
<a href="#l80.20"></a><span id="l80.20">       this.mURL = aVal ? aVal : &quot;&quot;;</span>
<a href="#l80.21"></a><span id="l80.21">     }</span>
<a href="#l80.22"></a><span id="l80.22" class="difflineat">@@ -449,17 +449,17 @@ function FeedEnclosure(aURL, aContentTyp</span>
<a href="#l80.23"></a><span id="l80.23">   this.mLength = aLength;</span>
<a href="#l80.24"></a><span id="l80.24">   this.mTitle = aTitle;</span>
<a href="#l80.25"></a><span id="l80.25"> </span>
<a href="#l80.26"></a><span id="l80.26">   // Generate a fileName from the URL.</span>
<a href="#l80.27"></a><span id="l80.27">   if (this.mURL)</span>
<a href="#l80.28"></a><span id="l80.28">   {</span>
<a href="#l80.29"></a><span id="l80.29">     try</span>
<a href="#l80.30"></a><span id="l80.30">     {</span>
<a href="#l80.31"></a><span id="l80.31" class="difflineminus">-      this.mFileName = Services.io.newURI(this.mURL, null, null).</span>
<a href="#l80.32"></a><span id="l80.32" class="difflineplus">+      this.mFileName = Services.io.newURI(this.mURL).</span>
<a href="#l80.33"></a><span id="l80.33">                                    QueryInterface(Ci.nsIURL).</span>
<a href="#l80.34"></a><span id="l80.34">                                    fileName;</span>
<a href="#l80.35"></a><span id="l80.35">     }</span>
<a href="#l80.36"></a><span id="l80.36">     catch(ex)</span>
<a href="#l80.37"></a><span id="l80.37">     {</span>
<a href="#l80.38"></a><span id="l80.38">       this.mFileName = this.mURL;</span>
<a href="#l80.39"></a><span id="l80.39">     }</span>
<a href="#l80.40"></a><span id="l80.40">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/FeedUtils.jsm</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/FeedUtils.jsm</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -632,17 +632,17 @@ var FeedUtils = {</span>
<a href="#l81.4"></a><span id="l81.4">     if (!Services.prefs.getBoolPref(&quot;browser.chrome.site_icons&quot;) ||</span>
<a href="#l81.5"></a><span id="l81.5">         !Services.prefs.getBoolPref(&quot;browser.chrome.favicons&quot;))</span>
<a href="#l81.6"></a><span id="l81.6">       return useDefaultFavicon();</span>
<a href="#l81.7"></a><span id="l81.7"> </span>
<a href="#l81.8"></a><span id="l81.8">     if (aIconUrl != null)</span>
<a href="#l81.9"></a><span id="l81.9">       return aIconUrl;</span>
<a href="#l81.10"></a><span id="l81.10"> </span>
<a href="#l81.11"></a><span id="l81.11">     let onLoadSuccess = (aEvent =&gt; {</span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-      let iconUri = Services.io.newURI(aEvent.target.src, null, null);</span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+      let iconUri = Services.io.newURI(aEvent.target.src);</span>
<a href="#l81.14"></a><span id="l81.14">       aWindow.specialTabs.mFaviconService.setAndFetchFaviconForPage(</span>
<a href="#l81.15"></a><span id="l81.15">         uri, iconUri, false,</span>
<a href="#l81.16"></a><span id="l81.16">         aWindow.specialTabs.mFaviconService.FAVICON_LOAD_NON_PRIVATE,</span>
<a href="#l81.17"></a><span id="l81.17">         null, Services.scriptSecurityManager.getSystemPrincipal());</span>
<a href="#l81.18"></a><span id="l81.18"> </span>
<a href="#l81.19"></a><span id="l81.19">       if (aCallback)</span>
<a href="#l81.20"></a><span id="l81.20">         aCallback(iconUri.spec);</span>
<a href="#l81.21"></a><span id="l81.21">     });</span>
<a href="#l81.22"></a><span id="l81.22" class="difflineat">@@ -674,18 +674,18 @@ var FeedUtils = {</span>
<a href="#l81.23"></a><span id="l81.23">       let feedLinkUrl = ds.GetTarget(resource, this.RSS_LINK, true);</span>
<a href="#l81.24"></a><span id="l81.24">       feedLinkUrl = feedLinkUrl ?</span>
<a href="#l81.25"></a><span id="l81.25">                       feedLinkUrl.QueryInterface(Ci.nsIRDFLiteral).Value : null;</span>
<a href="#l81.26"></a><span id="l81.26">       url = feedLinkUrl &amp;&amp; feedLinkUrl.startsWith(&quot;http&quot;) ? feedLinkUrl : url;</span>
<a href="#l81.27"></a><span id="l81.27">     }</span>
<a href="#l81.28"></a><span id="l81.28"> </span>
<a href="#l81.29"></a><span id="l81.29">     let uri, iconUri;</span>
<a href="#l81.30"></a><span id="l81.30">     try {</span>
<a href="#l81.31"></a><span id="l81.31" class="difflineminus">-      uri = Services.io.newURI(url, null, null);</span>
<a href="#l81.32"></a><span id="l81.32" class="difflineminus">-      iconUri = Services.io.newURI(uri.prePath + &quot;/favicon.ico&quot;, null, null);</span>
<a href="#l81.33"></a><span id="l81.33" class="difflineplus">+      uri = Services.io.newURI(url);</span>
<a href="#l81.34"></a><span id="l81.34" class="difflineplus">+      iconUri = Services.io.newURI(uri.prePath + &quot;/favicon.ico&quot;);</span>
<a href="#l81.35"></a><span id="l81.35">     }</span>
<a href="#l81.36"></a><span id="l81.36">     catch (ex) {</span>
<a href="#l81.37"></a><span id="l81.37">       return useDefaultFavicon();</span>
<a href="#l81.38"></a><span id="l81.38">     }</span>
<a href="#l81.39"></a><span id="l81.39"> </span>
<a href="#l81.40"></a><span id="l81.40">     if (!aWindow)</span>
<a href="#l81.41"></a><span id="l81.41">       return iconUri.spec;</span>
<a href="#l81.42"></a><span id="l81.42"> </span>
<a href="#l81.43"></a><span id="l81.43" class="difflineat">@@ -1301,17 +1301,17 @@ var FeedUtils = {</span>
<a href="#l81.44"></a><span id="l81.44">  *</span>
<a href="#l81.45"></a><span id="l81.45">  * @param  nsIURI aUri or string aUrl  - the Uri/Url.</span>
<a href="#l81.46"></a><span id="l81.46">  * @return boolean                     - true if a valid scheme, false if not.</span>
<a href="#l81.47"></a><span id="l81.47">  */</span>
<a href="#l81.48"></a><span id="l81.48">   _validSchemes: [&quot;http&quot;, &quot;https&quot;],</span>
<a href="#l81.49"></a><span id="l81.49">   isValidScheme: function(aUri) {</span>
<a href="#l81.50"></a><span id="l81.50">     if (!(aUri instanceof Ci.nsIURI)) {</span>
<a href="#l81.51"></a><span id="l81.51">       try {</span>
<a href="#l81.52"></a><span id="l81.52" class="difflineminus">-        aUri = Services.io.newURI(aUri, null, null);</span>
<a href="#l81.53"></a><span id="l81.53" class="difflineplus">+        aUri = Services.io.newURI(aUri);</span>
<a href="#l81.54"></a><span id="l81.54">       }</span>
<a href="#l81.55"></a><span id="l81.55">       catch (ex) {</span>
<a href="#l81.56"></a><span id="l81.56">         return false;</span>
<a href="#l81.57"></a><span id="l81.57">       }</span>
<a href="#l81.58"></a><span id="l81.58">     }</span>
<a href="#l81.59"></a><span id="l81.59"> </span>
<a href="#l81.60"></a><span id="l81.60">     return (this._validSchemes.indexOf(aUri.scheme) != -1);</span>
<a href="#l81.61"></a><span id="l81.61">   },</span>
<a href="#l81.62"></a><span id="l81.62" class="difflineat">@@ -1490,17 +1490,17 @@ var FeedUtils = {</span>
<a href="#l81.63"></a><span id="l81.63">           message = FeedUtils.strings.formatStringFromName(</span>
<a href="#l81.64"></a><span id="l81.64">                       &quot;newsblog-networkError&quot;, [feed.url], 1);</span>
<a href="#l81.65"></a><span id="l81.65">           break;</span>
<a href="#l81.66"></a><span id="l81.66">         case FeedUtils.kNewsBlogFileError:</span>
<a href="#l81.67"></a><span id="l81.67">           message = FeedUtils.strings.GetStringFromName(</span>
<a href="#l81.68"></a><span id="l81.68">                       &quot;subscribe-errorOpeningFile&quot;);</span>
<a href="#l81.69"></a><span id="l81.69">           break;</span>
<a href="#l81.70"></a><span id="l81.70">         case FeedUtils.kNewsBlogBadCertError:</span>
<a href="#l81.71"></a><span id="l81.71" class="difflineminus">-          let host = Services.io.newURI(feed.url, null, null).host;</span>
<a href="#l81.72"></a><span id="l81.72" class="difflineplus">+          let host = Services.io.newURI(feed.url).host;</span>
<a href="#l81.73"></a><span id="l81.73">           message = FeedUtils.strings.formatStringFromName(</span>
<a href="#l81.74"></a><span id="l81.74">                       &quot;newsblog-badCertError&quot;, [host], 1);</span>
<a href="#l81.75"></a><span id="l81.75">           break;</span>
<a href="#l81.76"></a><span id="l81.76">         case FeedUtils.kNewsBlogNoAuthError:</span>
<a href="#l81.77"></a><span id="l81.77">           message = FeedUtils.strings.formatStringFromName(</span>
<a href="#l81.78"></a><span id="l81.78">                       &quot;newsblog-noAuthError&quot;, [feed.url], 1);</span>
<a href="#l81.79"></a><span id="l81.79">           break;</span>
<a href="#l81.80"></a><span id="l81.80">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/feed-parser.js</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/feed-parser.js</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -162,17 +162,17 @@ FeedParser.prototype =</span>
<a href="#l82.4"></a><span id="l82.4">             guidNode.getAttribute(&quot;isPermaLink&quot;) == &quot;true&quot;)</span>
<a href="#l82.5"></a><span id="l82.5">           isPermaLink = true;</span>
<a href="#l82.6"></a><span id="l82.6">         // If attribute isPermaLink is missing, it is good to check the validity</span>
<a href="#l82.7"></a><span id="l82.7">         // of &lt;guid&gt; value as an URL to avoid linking to non-URL strings.</span>
<a href="#l82.8"></a><span id="l82.8">         if (!guidNode.hasAttribute(&quot;isPermaLink&quot;))</span>
<a href="#l82.9"></a><span id="l82.9">         {</span>
<a href="#l82.10"></a><span id="l82.10">           try</span>
<a href="#l82.11"></a><span id="l82.11">           {</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-            Services.io.newURI(guid, null, null);</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+            Services.io.newURI(guid);</span>
<a href="#l82.14"></a><span id="l82.14">             if (Services.io.extractScheme(guid) == &quot;tag&quot;)</span>
<a href="#l82.15"></a><span id="l82.15">               isPermaLink = false;</span>
<a href="#l82.16"></a><span id="l82.16">           }</span>
<a href="#l82.17"></a><span id="l82.17">           catch (ex)</span>
<a href="#l82.18"></a><span id="l82.18">           {</span>
<a href="#l82.19"></a><span id="l82.19">             isPermaLink = false;</span>
<a href="#l82.20"></a><span id="l82.20">           }</span>
<a href="#l82.21"></a><span id="l82.21">         }</span>
<a href="#l82.22"></a><span id="l82.22" class="difflineat">@@ -863,17 +863,17 @@ FeedParser.prototype =</span>
<a href="#l82.23"></a><span id="l82.23">           // If there's a link rel.</span>
<a href="#l82.24"></a><span id="l82.24">           ((alink.getAttribute(&quot;rel&quot;) &amp;&amp; alink.getAttribute(&quot;rel&quot;) == linkRel) ||</span>
<a href="#l82.25"></a><span id="l82.25">            // If there isn't, assume 'alternate'.</span>
<a href="#l82.26"></a><span id="l82.26">            (!alink.getAttribute(&quot;rel&quot;) &amp;&amp; (linkRel == &quot;alternate&quot;))) &amp;&amp;</span>
<a href="#l82.27"></a><span id="l82.27">           alink.getAttribute(&quot;href&quot;))</span>
<a href="#l82.28"></a><span id="l82.28">       {</span>
<a href="#l82.29"></a><span id="l82.29">         // Atom links are interpreted relative to xml:base.</span>
<a href="#l82.30"></a><span id="l82.30">         try {</span>
<a href="#l82.31"></a><span id="l82.31" class="difflineminus">-          return Services.io.newURI(alink.baseURI, null, null).</span>
<a href="#l82.32"></a><span id="l82.32" class="difflineplus">+          return Services.io.newURI(alink.baseURI).</span>
<a href="#l82.33"></a><span id="l82.33">                              resolve(alink.getAttribute(&quot;href&quot;));</span>
<a href="#l82.34"></a><span id="l82.34">         }</span>
<a href="#l82.35"></a><span id="l82.35">         catch (ex) {}</span>
<a href="#l82.36"></a><span id="l82.36">       }</span>
<a href="#l82.37"></a><span id="l82.37">     }</span>
<a href="#l82.38"></a><span id="l82.38"> </span>
<a href="#l82.39"></a><span id="l82.39">     return null;</span>
<a href="#l82.40"></a><span id="l82.40">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/feed-subscriptions.js</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/feed-subscriptions.js</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -1792,17 +1792,17 @@ var FeedSubscriptions = {</span>
<a href="#l83.4"></a><span id="l83.4">                       &quot;subscribe-feedNotValid&quot;);</span>
<a href="#l83.5"></a><span id="l83.5">         if (aErrorCode == FeedUtils.kNewsBlogRequestFailure)</span>
<a href="#l83.6"></a><span id="l83.6">           message = FeedUtils.strings.GetStringFromName(</span>
<a href="#l83.7"></a><span id="l83.7">                       &quot;subscribe-networkError&quot;);</span>
<a href="#l83.8"></a><span id="l83.8">         if (aErrorCode == FeedUtils.kNewsBlogFileError)</span>
<a href="#l83.9"></a><span id="l83.9">           message = FeedUtils.strings.GetStringFromName(</span>
<a href="#l83.10"></a><span id="l83.10">                       &quot;subscribe-errorOpeningFile&quot;);</span>
<a href="#l83.11"></a><span id="l83.11">         if (aErrorCode == FeedUtils.kNewsBlogBadCertError) {</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-          let host = Services.io.newURI(feed.url, null, null).host;</span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+          let host = Services.io.newURI(feed.url).host;</span>
<a href="#l83.14"></a><span id="l83.14">           message = FeedUtils.strings.formatStringFromName(</span>
<a href="#l83.15"></a><span id="l83.15">                       &quot;newsblog-badCertError&quot;, [host], 1);</span>
<a href="#l83.16"></a><span id="l83.16">         }</span>
<a href="#l83.17"></a><span id="l83.17">         if (aErrorCode == FeedUtils.kNewsBlogNoAuthError)</span>
<a href="#l83.18"></a><span id="l83.18">           message = FeedUtils.strings.GetStringFromName(</span>
<a href="#l83.19"></a><span id="l83.19">                       &quot;subscribe-noAuthError&quot;);</span>
<a href="#l83.20"></a><span id="l83.20"> </span>
<a href="#l83.21"></a><span id="l83.21">         if (win.mActionMode != win.kUpdateMode &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/newsblogOverlay.js</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/newsblogOverlay.js</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -183,17 +183,17 @@ var FeedMessageHandler = {</span>
<a href="#l84.4"></a><span id="l84.4">       if (aMimeMsg &amp;&amp; aMimeMsg.headers[&quot;content-base&quot;] &amp;&amp;</span>
<a href="#l84.5"></a><span id="l84.5">           aMimeMsg.headers[&quot;content-base&quot;][0]) {</span>
<a href="#l84.6"></a><span id="l84.6">         let url = aMimeMsg.headers[&quot;content-base&quot;], uri;</span>
<a href="#l84.7"></a><span id="l84.7">         try {</span>
<a href="#l84.8"></a><span id="l84.8">           let converter = Cc[&quot;@mozilla.org/intl/scriptableunicodeconverter&quot;]</span>
<a href="#l84.9"></a><span id="l84.9">                             .createInstance(Ci.nsIScriptableUnicodeConverter);</span>
<a href="#l84.10"></a><span id="l84.10">           converter.charset = &quot;UTF-8&quot;;</span>
<a href="#l84.11"></a><span id="l84.11">           url = converter.ConvertToUnicode(url);</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-          uri = Services.io.newURI(url, null, null);</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+          uri = Services.io.newURI(url);</span>
<a href="#l84.14"></a><span id="l84.14">           url = uri.spec;</span>
<a href="#l84.15"></a><span id="l84.15">         }</span>
<a href="#l84.16"></a><span id="l84.16">         catch (ex) {</span>
<a href="#l84.17"></a><span id="l84.17">           FeedUtils.log.info(&quot;FeedMessageHandler.loadWebPage: &quot; +</span>
<a href="#l84.18"></a><span id="l84.18">                              &quot;invalid Content-Base header url - &quot; + url);</span>
<a href="#l84.19"></a><span id="l84.19">           return;</span>
<a href="#l84.20"></a><span id="l84.20">         }</span>
<a href="#l84.21"></a><span id="l84.21">         if (aWhere.browser)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/mailnews/extensions/smime/content/certFetchingStatus.js</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/mailnews/extensions/smime/content/certFetchingStatus.js</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -49,17 +49,17 @@ function search()</span>
<a href="#l85.4"></a><span id="l85.4">   } catch (ex) {</span>
<a href="#l85.5"></a><span id="l85.5">     // if we don't have this pref, no big deal</span>
<a href="#l85.6"></a><span id="l85.6">   }</span>
<a href="#l85.7"></a><span id="l85.7"> </span>
<a href="#l85.8"></a><span id="l85.8">   try {</span>
<a href="#l85.9"></a><span id="l85.9">     let url = Services.prefs.getCharPref(gDirectoryPref + &quot;.uri&quot;);</span>
<a href="#l85.10"></a><span id="l85.10"> </span>
<a href="#l85.11"></a><span id="l85.11">     gLdapServerURL = Services.io</span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-      .newURI(url, null, null).QueryInterface(Components.interfaces.nsILDAPURL);</span>
<a href="#l85.13"></a><span id="l85.13" class="difflineplus">+      .newURI(url).QueryInterface(Components.interfaces.nsILDAPURL);</span>
<a href="#l85.14"></a><span id="l85.14"> </span>
<a href="#l85.15"></a><span id="l85.15">     gLdapConnection = Components.classes[&quot;@mozilla.org/network/ldap-connection;1&quot;]</span>
<a href="#l85.16"></a><span id="l85.16">       .createInstance().QueryInterface(Components.interfaces.nsILDAPConnection);</span>
<a href="#l85.17"></a><span id="l85.17"> </span>
<a href="#l85.18"></a><span id="l85.18">     gLdapConnection.init(gLdapServerURL, gLogin, new boundListener(),</span>
<a href="#l85.19"></a><span id="l85.19">       null, Components.interfaces.nsILDAPConnection.VERSION3);</span>
<a href="#l85.20"></a><span id="l85.20"> </span>
<a href="#l85.21"></a><span id="l85.21">   } catch (ex) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/mailnews/imap/test/unit/head_server.js</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/mailnews/imap/test/unit/head_server.js</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -98,14 +98,13 @@ function do_check_transaction(fromServer</span>
<a href="#l86.4"></a><span id="l86.4">  * add a simple message to the IMAP pump mailbox</span>
<a href="#l86.5"></a><span id="l86.5">  */</span>
<a href="#l86.6"></a><span id="l86.6"> function addImapMessage()</span>
<a href="#l86.7"></a><span id="l86.7"> {</span>
<a href="#l86.8"></a><span id="l86.8">   let messages = [];</span>
<a href="#l86.9"></a><span id="l86.9">   let messageGenerator = new MessageGenerator();</span>
<a href="#l86.10"></a><span id="l86.10">   messages = messages.concat(messageGenerator.makeMessage());</span>
<a href="#l86.11"></a><span id="l86.11">   let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l86.12"></a><span id="l86.12" class="difflineminus">-                  btoa(messages[0].toMessageString()),</span>
<a href="#l86.13"></a><span id="l86.13" class="difflineminus">-                  null, null);</span>
<a href="#l86.14"></a><span id="l86.14" class="difflineplus">+                  btoa(messages[0].toMessageString()));</span>
<a href="#l86.15"></a><span id="l86.15">   let imapMsg = new imapMessage(dataUri.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l86.16"></a><span id="l86.16">   IMAPPump.mailbox.addMessage(imapMsg);</span>
<a href="#l86.17"></a><span id="l86.17"> }</span>
<a href="#l86.18"></a><span id="l86.18"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_compactOfflineStore.js</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_compactOfflineStore.js</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -50,18 +50,17 @@ function addMessagesToServer(messages, m</span>
<a href="#l87.4"></a><span id="l87.4"> }</span>
<a href="#l87.5"></a><span id="l87.5"> </span>
<a href="#l87.6"></a><span id="l87.6"> function addGeneratedMessagesToServer(messages, mailbox)</span>
<a href="#l87.7"></a><span id="l87.7"> {</span>
<a href="#l87.8"></a><span id="l87.8">   // Create the imapMessages and store them on the mailbox</span>
<a href="#l87.9"></a><span id="l87.9">   messages.forEach(function (message)</span>
<a href="#l87.10"></a><span id="l87.10">   {</span>
<a href="#l87.11"></a><span id="l87.11">     let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l87.12"></a><span id="l87.12" class="difflineminus">-                                     btoa(message.toMessageString()),</span>
<a href="#l87.13"></a><span id="l87.13" class="difflineminus">-                                     null, null);</span>
<a href="#l87.14"></a><span id="l87.14" class="difflineplus">+                                     btoa(message.toMessageString()));</span>
<a href="#l87.15"></a><span id="l87.15">     mailbox.addMessage(new imapMessage(dataUri.spec, mailbox.uidnext++, []));</span>
<a href="#l87.16"></a><span id="l87.16">   });</span>
<a href="#l87.17"></a><span id="l87.17"> }</span>
<a href="#l87.18"></a><span id="l87.18"> </span>
<a href="#l87.19"></a><span id="l87.19"> </span>
<a href="#l87.20"></a><span id="l87.20"> function checkOfflineStore(prevOfflineStoreSize) {</span>
<a href="#l87.21"></a><span id="l87.21">   dump(&quot;checking offline store\n&quot;);</span>
<a href="#l87.22"></a><span id="l87.22">   let offset = new Object;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l88.1"></a><span id="l88.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_dontStatNoSelect.js</span>
<a href="#l88.2"></a><span id="l88.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_dontStatNoSelect.js</span>
<a href="#l88.3"></a><span id="l88.3" class="difflineat">@@ -107,18 +107,17 @@ function* checkStatNoSelect() {</span>
<a href="#l88.4"></a><span id="l88.4"> function addMessageToFolder(mbox) {</span>
<a href="#l88.5"></a><span id="l88.5">   // make a couple messges</span>
<a href="#l88.6"></a><span id="l88.6">   let messages = [];</span>
<a href="#l88.7"></a><span id="l88.7">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l88.8"></a><span id="l88.8">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l88.9"></a><span id="l88.9"> </span>
<a href="#l88.10"></a><span id="l88.10">   let msgURI =</span>
<a href="#l88.11"></a><span id="l88.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l88.12"></a><span id="l88.12" class="difflineminus">-                       btoa(messages[0].toMessageString()),</span>
<a href="#l88.13"></a><span id="l88.13" class="difflineminus">-                       null, null);</span>
<a href="#l88.14"></a><span id="l88.14" class="difflineplus">+                       btoa(messages[0].toMessageString()));</span>
<a href="#l88.15"></a><span id="l88.15">   let message = new imapMessage(msgURI.spec, mbox.uidnext++);</span>
<a href="#l88.16"></a><span id="l88.16">   mbox.addMessage(message);</span>
<a href="#l88.17"></a><span id="l88.17"> }</span>
<a href="#l88.18"></a><span id="l88.18"> </span>
<a href="#l88.19"></a><span id="l88.19"> function* endTest()</span>
<a href="#l88.20"></a><span id="l88.20"> {</span>
<a href="#l88.21"></a><span id="l88.21">   do_check_eq(gFolder2.getNumUnread(false), 2);</span>
<a href="#l88.22"></a><span id="l88.22">   // Clean up the server in preparation</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l89.1"></a><span id="l89.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_downloadOffline.js</span>
<a href="#l89.2"></a><span id="l89.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_downloadOffline.js</span>
<a href="#l89.3"></a><span id="l89.3" class="difflineat">@@ -28,18 +28,17 @@ function *setup() {</span>
<a href="#l89.4"></a><span id="l89.4">     Services.io.newFileURI(gMsgFile).QueryInterface(Ci.nsIFileURL);</span>
<a href="#l89.5"></a><span id="l89.5"> </span>
<a href="#l89.6"></a><span id="l89.6">   IMAPPump.mailbox.addMessage(new imapMessage(msgfileuri.spec, IMAPPump.mailbox.uidnext++, []));</span>
<a href="#l89.7"></a><span id="l89.7"> </span>
<a href="#l89.8"></a><span id="l89.8">   let messages = [];</span>
<a href="#l89.9"></a><span id="l89.9">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l89.10"></a><span id="l89.10">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l89.11"></a><span id="l89.11">   let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l89.12"></a><span id="l89.12" class="difflineminus">-                                   btoa(messages[0].toMessageString()),</span>
<a href="#l89.13"></a><span id="l89.13" class="difflineminus">-                                   null, null);</span>
<a href="#l89.14"></a><span id="l89.14" class="difflineplus">+                                   btoa(messages[0].toMessageString()));</span>
<a href="#l89.15"></a><span id="l89.15">   let imapMsg = new imapMessage(dataUri.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l89.16"></a><span id="l89.16">   imapMsg.setSize(5000);</span>
<a href="#l89.17"></a><span id="l89.17">   IMAPPump.mailbox.addMessage(imapMsg);</span>
<a href="#l89.18"></a><span id="l89.18">   </span>
<a href="#l89.19"></a><span id="l89.19">   // ...and download for offline use.</span>
<a href="#l89.20"></a><span id="l89.20">   let promiseUrlListener = new PromiseTestUtils.PromiseUrlListener();</span>
<a href="#l89.21"></a><span id="l89.21">   IMAPPump.inbox.downloadAllForOffline(promiseUrlListener, null);</span>
<a href="#l89.22"></a><span id="l89.22">   yield promiseUrlListener.promise;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l90.1"></a><span id="l90.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapAttachmentSaves.js</span>
<a href="#l90.2"></a><span id="l90.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapAttachmentSaves.js</span>
<a href="#l90.3"></a><span id="l90.3" class="difflineat">@@ -41,18 +41,17 @@ function* loadImapMessage()</span>
<a href="#l90.4"></a><span id="l90.4">   let smsg = gMessageGenerator.makeMessage({</span>
<a href="#l90.5"></a><span id="l90.5">     attachments: [</span>
<a href="#l90.6"></a><span id="l90.6">       {filename: kAttachFileName, body: 'I like cheese!'}</span>
<a href="#l90.7"></a><span id="l90.7">     ],</span>
<a href="#l90.8"></a><span id="l90.8">   });</span>
<a href="#l90.9"></a><span id="l90.9"> </span>
<a href="#l90.10"></a><span id="l90.10">   let msgURI =</span>
<a href="#l90.11"></a><span id="l90.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l90.12"></a><span id="l90.12" class="difflineminus">-                       btoa(smsg.toMessageString()),</span>
<a href="#l90.13"></a><span id="l90.13" class="difflineminus">-                       null, null);</span>
<a href="#l90.14"></a><span id="l90.14" class="difflineplus">+                       btoa(smsg.toMessageString()));</span>
<a href="#l90.15"></a><span id="l90.15">   let imapInbox = IMAPPump.daemon.getMailbox(&quot;INBOX&quot;);</span>
<a href="#l90.16"></a><span id="l90.16">   let message = new imapMessage(msgURI.spec, imapInbox.uidnext++, []);</span>
<a href="#l90.17"></a><span id="l90.17">   IMAPPump.mailbox.addMessage(message);</span>
<a href="#l90.18"></a><span id="l90.18">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l90.19"></a><span id="l90.19">   yield false;</span>
<a href="#l90.20"></a><span id="l90.20">   do_check_eq(1, IMAPPump.inbox.getTotalMessages(false));</span>
<a href="#l90.21"></a><span id="l90.21">   let msgHdr = mailTestUtils.firstMsgHdr(IMAPPump.inbox);</span>
<a href="#l90.22"></a><span id="l90.22">   do_check_true(msgHdr instanceof Ci.nsIMsgDBHdr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l91.1"></a><span id="l91.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapAutoSync.js</span>
<a href="#l91.2"></a><span id="l91.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapAutoSync.js</span>
<a href="#l91.3"></a><span id="l91.3" class="difflineat">@@ -270,17 +270,16 @@ var gAutoSyncListener =</span>
<a href="#l91.4"></a><span id="l91.4"> function addMessageToFolder(folder)</span>
<a href="#l91.5"></a><span id="l91.5"> {</span>
<a href="#l91.6"></a><span id="l91.6">   let messages = [];</span>
<a href="#l91.7"></a><span id="l91.7">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l91.8"></a><span id="l91.8">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l91.9"></a><span id="l91.9"> </span>
<a href="#l91.10"></a><span id="l91.10">   let msgURI =</span>
<a href="#l91.11"></a><span id="l91.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l91.12"></a><span id="l91.12" class="difflineminus">-                       btoa(messages[0].toMessageString()),</span>
<a href="#l91.13"></a><span id="l91.13" class="difflineminus">-                       null, null);</span>
<a href="#l91.14"></a><span id="l91.14" class="difflineplus">+                       btoa(messages[0].toMessageString()));</span>
<a href="#l91.15"></a><span id="l91.15">   let imapMailbox =  IMAPPump.daemon.getMailbox(folder.name);</span>
<a href="#l91.16"></a><span id="l91.16">   // We add messages with \Seen flag set so that we won't accidentally</span>
<a href="#l91.17"></a><span id="l91.17">   // trigger the code that updates imap folders that have unread messages moved</span>
<a href="#l91.18"></a><span id="l91.18">   // into them.</span>
<a href="#l91.19"></a><span id="l91.19">   let message = new imapMessage(msgURI.spec, imapMailbox.uidnext++, [&quot;\\Seen&quot;]);</span>
<a href="#l91.20"></a><span id="l91.20">   imapMailbox.addMessage(message);</span>
<a href="#l91.21"></a><span id="l91.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l92.1"></a><span id="l92.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapContentLength.js</span>
<a href="#l92.2"></a><span id="l92.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapContentLength.js</span>
<a href="#l92.3"></a><span id="l92.3" class="difflineat">@@ -57,30 +57,29 @@ function verifyContentLength() {</span>
<a href="#l92.4"></a><span id="l92.4">   let messageUri = IMAPPump.inbox.getUriForMsg(gMsgHdr);</span>
<a href="#l92.5"></a><span id="l92.5">   // Convert this to a URI that necko can run</span>
<a href="#l92.6"></a><span id="l92.6">   let messenger = Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance(Ci.nsIMessenger);</span>
<a href="#l92.7"></a><span id="l92.7">   let neckoURL = {};</span>
<a href="#l92.8"></a><span id="l92.8">   let messageService = messenger.messageServiceFromURI(messageUri);</span>
<a href="#l92.9"></a><span id="l92.9">   messageService.GetUrlForUri(messageUri, neckoURL, null);</span>
<a href="#l92.10"></a><span id="l92.10">   // Don't use the necko URL directly. Instead, get the spec and create a new</span>
<a href="#l92.11"></a><span id="l92.11">   // URL using the IO service</span>
<a href="#l92.12"></a><span id="l92.12" class="difflineminus">-  let urlToRun = Services.io.newURI(neckoURL.value.spec, null, null);</span>
<a href="#l92.13"></a><span id="l92.13" class="difflineplus">+  let urlToRun = Services.io.newURI(neckoURL.value.spec);</span>
<a href="#l92.14"></a><span id="l92.14"> </span>
<a href="#l92.15"></a><span id="l92.15">   // Get a channel from this URI, and check its content length</span>
<a href="#l92.16"></a><span id="l92.16">   let channel = Services.io.newChannelFromURI2(urlToRun,</span>
<a href="#l92.17"></a><span id="l92.17">                                                null,</span>
<a href="#l92.18"></a><span id="l92.18">                                                Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l92.19"></a><span id="l92.19">                                                null,</span>
<a href="#l92.20"></a><span id="l92.20">                                                Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l92.21"></a><span id="l92.21">                                                Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l92.22"></a><span id="l92.22">   do_check_eq(channel.contentLength, gFile.fileSize);</span>
<a href="#l92.23"></a><span id="l92.23"> </span>
<a href="#l92.24"></a><span id="l92.24">   // Now try an attachment. &amp;part=1.2</span>
<a href="#l92.25"></a><span id="l92.25" class="difflineminus">-  let attachmentURL = Services.io.newURI(neckoURL.value.spec + &quot;&amp;part=1.2&quot;,</span>
<a href="#l92.26"></a><span id="l92.26" class="difflineminus">-                                        null, null);</span>
<a href="#l92.27"></a><span id="l92.27" class="difflineplus">+  let attachmentURL = Services.io.newURI(neckoURL.value.spec + &quot;&amp;part=1.2&quot;);</span>
<a href="#l92.28"></a><span id="l92.28">   let attachmentChannel = Services.io.newChannelFromURI2(attachmentURL,</span>
<a href="#l92.29"></a><span id="l92.29">                                                          null,</span>
<a href="#l92.30"></a><span id="l92.30">                                                          Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l92.31"></a><span id="l92.31">                                                          null,</span>
<a href="#l92.32"></a><span id="l92.32">                                                          Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l92.33"></a><span id="l92.33">                                                          Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l92.34"></a><span id="l92.34">   // Currently attachments have their content length set to the length of the</span>
<a href="#l92.35"></a><span id="l92.35">   // entire message</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l93.1"></a><span id="l93.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapCopyTimeout.js</span>
<a href="#l93.2"></a><span id="l93.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapCopyTimeout.js</span>
<a href="#l93.3"></a><span id="l93.3" class="difflineat">@@ -65,18 +65,17 @@ function* createTargetFolder()</span>
<a href="#l93.4"></a><span id="l93.4"> function* loadImapMessage()</span>
<a href="#l93.5"></a><span id="l93.5"> {</span>
<a href="#l93.6"></a><span id="l93.6">   let messages = [];</span>
<a href="#l93.7"></a><span id="l93.7">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l93.8"></a><span id="l93.8">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l93.9"></a><span id="l93.9"> </span>
<a href="#l93.10"></a><span id="l93.10">   let msgURI =</span>
<a href="#l93.11"></a><span id="l93.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l93.12"></a><span id="l93.12" class="difflineminus">-                       btoa(messages[0].toMessageString()),</span>
<a href="#l93.13"></a><span id="l93.13" class="difflineminus">-                       null, null);</span>
<a href="#l93.14"></a><span id="l93.14" class="difflineplus">+                       btoa(messages[0].toMessageString()));</span>
<a href="#l93.15"></a><span id="l93.15">   let imapInbox = IMAPPump.daemon.getMailbox(&quot;INBOX&quot;);</span>
<a href="#l93.16"></a><span id="l93.16">   var gMessage = new imapMessage(msgURI.spec, imapInbox.uidnext++, []);</span>
<a href="#l93.17"></a><span id="l93.17">   IMAPPump.mailbox.addMessage(gMessage);</span>
<a href="#l93.18"></a><span id="l93.18">   IMAPPump.inbox.updateFolder(null);</span>
<a href="#l93.19"></a><span id="l93.19">   yield false;</span>
<a href="#l93.20"></a><span id="l93.20">   do_check_eq(1, IMAPPump.inbox.getTotalMessages(false));</span>
<a href="#l93.21"></a><span id="l93.21">   let msgHdr = mailTestUtils.firstMsgHdr(IMAPPump.inbox);</span>
<a href="#l93.22"></a><span id="l93.22">   do_check_true(msgHdr instanceof Ci.nsIMsgDBHdr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l94.1"></a><span id="l94.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapFlagChange.js</span>
<a href="#l94.2"></a><span id="l94.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapFlagChange.js</span>
<a href="#l94.3"></a><span id="l94.3" class="difflineat">@@ -110,18 +110,17 @@ function* setup() {</span>
<a href="#l94.4"></a><span id="l94.4">   // build up a diverse list of messages</span>
<a href="#l94.5"></a><span id="l94.5">   let messages = [];</span>
<a href="#l94.6"></a><span id="l94.6">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l94.7"></a><span id="l94.7">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l94.8"></a><span id="l94.8">   gSynthMessage = messages[0];</span>
<a href="#l94.9"></a><span id="l94.9"> </span>
<a href="#l94.10"></a><span id="l94.10">   let msgURI =</span>
<a href="#l94.11"></a><span id="l94.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l94.12"></a><span id="l94.12" class="difflineminus">-                       btoa(gSynthMessage.toMessageString()),</span>
<a href="#l94.13"></a><span id="l94.13" class="difflineminus">-                       null, null);</span>
<a href="#l94.14"></a><span id="l94.14" class="difflineplus">+                       btoa(gSynthMessage.toMessageString()));</span>
<a href="#l94.15"></a><span id="l94.15">   gMessage = new imapMessage(msgURI.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l94.16"></a><span id="l94.16">   IMAPPump.mailbox.addMessage(gMessage);</span>
<a href="#l94.17"></a><span id="l94.17"> </span>
<a href="#l94.18"></a><span id="l94.18">   // update folder to download header.</span>
<a href="#l94.19"></a><span id="l94.19">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l94.20"></a><span id="l94.20">   yield false;</span>
<a href="#l94.21"></a><span id="l94.21"> }</span>
<a href="#l94.22"></a><span id="l94.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l95.1"></a><span id="l95.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHdrChunking.js</span>
<a href="#l95.2"></a><span id="l95.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHdrChunking.js</span>
<a href="#l95.3"></a><span id="l95.3" class="difflineat">@@ -59,18 +59,17 @@ function* uploadImapMessages()</span>
<a href="#l95.4"></a><span id="l95.4">   messages = messages.concat(scenarioFactory.directReply(10));</span>
<a href="#l95.5"></a><span id="l95.5"> </span>
<a href="#l95.6"></a><span id="l95.6">   // Add 10 messages with uids 1-10.</span>
<a href="#l95.7"></a><span id="l95.7">   let imapInbox = IMAPPump.daemon.getMailbox(&quot;INBOX&quot;)</span>
<a href="#l95.8"></a><span id="l95.8">   // Create the imapMessages and store them on the mailbox</span>
<a href="#l95.9"></a><span id="l95.9">   messages.forEach(function (message)</span>
<a href="#l95.10"></a><span id="l95.10">   {</span>
<a href="#l95.11"></a><span id="l95.11">     let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l95.12"></a><span id="l95.12" class="difflineminus">-                                     btoa(message.toMessageString()),</span>
<a href="#l95.13"></a><span id="l95.13" class="difflineminus">-                                     null, null);</span>
<a href="#l95.14"></a><span id="l95.14" class="difflineplus">+                                     btoa(message.toMessageString()));</span>
<a href="#l95.15"></a><span id="l95.15">     imapInbox.addMessage(new imapMessage(dataUri.spec, imapInbox.uidnext++, []));</span>
<a href="#l95.16"></a><span id="l95.16">   });</span>
<a href="#l95.17"></a><span id="l95.17">   // updateFolderWithListener with null for nsIMsgWindow makes biff notify.</span>
<a href="#l95.18"></a><span id="l95.18">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l95.19"></a><span id="l95.19">   yield false;</span>
<a href="#l95.20"></a><span id="l95.20"> }</span>
<a href="#l95.21"></a><span id="l95.21"> </span>
<a href="#l95.22"></a><span id="l95.22"> function* testMessageFetched() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l96.1"></a><span id="l96.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l96.2"></a><span id="l96.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l96.3"></a><span id="l96.3" class="difflineat">@@ -19,18 +19,17 @@ var gFolder1, gRootFolder;</span>
<a href="#l96.4"></a><span id="l96.4"> </span>
<a href="#l96.5"></a><span id="l96.5"> // Adds some messages directly to a mailbox (eg new mail)</span>
<a href="#l96.6"></a><span id="l96.6"> function addMessagesToServer(messages, mailbox)</span>
<a href="#l96.7"></a><span id="l96.7"> {</span>
<a href="#l96.8"></a><span id="l96.8">   // Create the imapMessages and store them on the mailbox</span>
<a href="#l96.9"></a><span id="l96.9">   messages.forEach(function (message)</span>
<a href="#l96.10"></a><span id="l96.10">   {</span>
<a href="#l96.11"></a><span id="l96.11">     let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l96.12"></a><span id="l96.12" class="difflineminus">-                                      btoa(message.toMessageString()),</span>
<a href="#l96.13"></a><span id="l96.13" class="difflineminus">-                                     null, null);</span>
<a href="#l96.14"></a><span id="l96.14" class="difflineplus">+                                      btoa(message.toMessageString()));</span>
<a href="#l96.15"></a><span id="l96.15">     mailbox.addMessage(new imapMessage(dataUri.spec, mailbox.uidnext++, []));</span>
<a href="#l96.16"></a><span id="l96.16">   });</span>
<a href="#l96.17"></a><span id="l96.17"> }</span>
<a href="#l96.18"></a><span id="l96.18"> </span>
<a href="#l96.19"></a><span id="l96.19"> function run_test()</span>
<a href="#l96.20"></a><span id="l96.20"> {</span>
<a href="#l96.21"></a><span id="l96.21">   localAccountUtils.loadLocalMailAccount();</span>
<a href="#l96.22"></a><span id="l96.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l97.1"></a><span id="l97.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapProtocols.js</span>
<a href="#l97.2"></a><span id="l97.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapProtocols.js</span>
<a href="#l97.3"></a><span id="l97.3" class="difflineat">@@ -40,15 +40,15 @@ function run_test() {</span>
<a href="#l97.4"></a><span id="l97.4">     do_check_eq(pH.protocolFlags, defaultProtocolFlags);</span>
<a href="#l97.5"></a><span id="l97.5"> </span>
<a href="#l97.6"></a><span id="l97.6">     // Whip through some of the ports to check we get the right results.</span>
<a href="#l97.7"></a><span id="l97.7">     // IMAP allows connecting to any port.</span>
<a href="#l97.8"></a><span id="l97.8">     for (let i = 0; i &lt; 1024; ++i)</span>
<a href="#l97.9"></a><span id="l97.9">       do_check_true(pH.allowPort(i, &quot;&quot;));</span>
<a href="#l97.10"></a><span id="l97.10"> </span>
<a href="#l97.11"></a><span id="l97.11">     // Check we get a URI when we ask for one</span>
<a href="#l97.12"></a><span id="l97.12" class="difflineminus">-    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;, null);</span>
<a href="#l97.13"></a><span id="l97.13" class="difflineplus">+    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;);</span>
<a href="#l97.14"></a><span id="l97.14"> </span>
<a href="#l97.15"></a><span id="l97.15">     uri.QueryInterface(Ci.nsIImapUrl);</span>
<a href="#l97.16"></a><span id="l97.16"> </span>
<a href="#l97.17"></a><span id="l97.17">     do_check_eq(uri.spec, protocols[part].urlSpec);</span>
<a href="#l97.18"></a><span id="l97.18">   }</span>
<a href="#l97.19"></a><span id="l97.19"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l98.1"></a><span id="l98.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapProxy.js</span>
<a href="#l98.2"></a><span id="l98.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapProxy.js</span>
<a href="#l98.3"></a><span id="l98.3" class="difflineat">@@ -19,18 +19,17 @@ add_task(function* setup() {</span>
<a href="#l98.4"></a><span id="l98.4"> </span>
<a href="#l98.5"></a><span id="l98.5">   let daemon = new imapDaemon();</span>
<a href="#l98.6"></a><span id="l98.6">   server = makeServer(daemon, &quot;&quot;);</span>
<a href="#l98.7"></a><span id="l98.7"> </span>
<a href="#l98.8"></a><span id="l98.8">   let messages = [];</span>
<a href="#l98.9"></a><span id="l98.9">   let messageGenerator = new MessageGenerator();</span>
<a href="#l98.10"></a><span id="l98.10">   messages = messages.concat(messageGenerator.makeMessage());</span>
<a href="#l98.11"></a><span id="l98.11">   let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l98.12"></a><span id="l98.12" class="difflineminus">-                                   btoa(messages[0].toMessageString()),</span>
<a href="#l98.13"></a><span id="l98.13" class="difflineminus">-                                   null, null);</span>
<a href="#l98.14"></a><span id="l98.14" class="difflineplus">+                                   btoa(messages[0].toMessageString()));</span>
<a href="#l98.15"></a><span id="l98.15">   let imapMsg = new imapMessage(dataUri.spec, daemon.inbox.uidnext++, []);</span>
<a href="#l98.16"></a><span id="l98.16">   daemon.inbox.addMessage(imapMsg);</span>
<a href="#l98.17"></a><span id="l98.17"> </span>
<a href="#l98.18"></a><span id="l98.18"> </span>
<a href="#l98.19"></a><span id="l98.19">   NetworkTestUtils.configureProxy(&quot;imap.tinderbox.invalid&quot;, PORT, server.port);</span>
<a href="#l98.20"></a><span id="l98.20"> </span>
<a href="#l98.21"></a><span id="l98.21">   // Set up the basic accounts and folders</span>
<a href="#l98.22"></a><span id="l98.22">   incomingServer = createLocalIMAPServer(PORT, &quot;imap.tinderbox.invalid&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l99.1"></a><span id="l99.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l99.2"></a><span id="l99.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l99.3"></a><span id="l99.3" class="difflineat">@@ -178,18 +178,17 @@ var tests = [</span>
<a href="#l99.4"></a><span id="l99.4"> </span>
<a href="#l99.5"></a><span id="l99.5">     gFirstNewMsg = mbox.uidnext;</span>
<a href="#l99.6"></a><span id="l99.6">     // need to account for x-mozilla-status, status2, and envelope.</span>
<a href="#l99.7"></a><span id="l99.7">     gFirstMsgSize = messages[0].toMessageString().length + 102;</span>
<a href="#l99.8"></a><span id="l99.8"> </span>
<a href="#l99.9"></a><span id="l99.9">     messages.forEach(function (message)</span>
<a href="#l99.10"></a><span id="l99.10">     {</span>
<a href="#l99.11"></a><span id="l99.11">       let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l99.12"></a><span id="l99.12" class="difflineminus">-                                       btoa(message.toMessageString()),</span>
<a href="#l99.13"></a><span id="l99.13" class="difflineminus">-                                       null, null);</span>
<a href="#l99.14"></a><span id="l99.14" class="difflineplus">+                                       btoa(message.toMessageString()));</span>
<a href="#l99.15"></a><span id="l99.15">       mbox.addMessage(new imapMessage(dataUri.spec, mbox.uidnext++, []));</span>
<a href="#l99.16"></a><span id="l99.16">     });</span>
<a href="#l99.17"></a><span id="l99.17">     IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l99.18"></a><span id="l99.18">     yield false;</span>
<a href="#l99.19"></a><span id="l99.19">   },</span>
<a href="#l99.20"></a><span id="l99.20">   function* testQueuedOfflineDownload()</span>
<a href="#l99.21"></a><span id="l99.21">   {</span>
<a href="#l99.22"></a><span id="l99.22">     // Make sure that streaming the same message and then trying to download</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l100.1"></a><span id="l100.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_largeOfflineStore.js</span>
<a href="#l100.2"></a><span id="l100.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_largeOfflineStore.js</span>
<a href="#l100.3"></a><span id="l100.3" class="difflineat">@@ -58,24 +58,22 @@ function run_test() {</span>
<a href="#l100.4"></a><span id="l100.4"> function* setup() {</span>
<a href="#l100.5"></a><span id="l100.5">   // Create a couple test messages on the IMAP server.</span>
<a href="#l100.6"></a><span id="l100.6">   let messages = [];</span>
<a href="#l100.7"></a><span id="l100.7">   let messageGenerator = new MessageGenerator();</span>
<a href="#l100.8"></a><span id="l100.8">   let scenarioFactory = new MessageScenarioFactory(messageGenerator);</span>
<a href="#l100.9"></a><span id="l100.9"> </span>
<a href="#l100.10"></a><span id="l100.10">   messages = messages.concat(scenarioFactory.directReply(2));</span>
<a href="#l100.11"></a><span id="l100.11">   let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l100.12"></a><span id="l100.12" class="difflineminus">-                                   btoa(messages[0].toMessageString()),</span>
<a href="#l100.13"></a><span id="l100.13" class="difflineminus">-                                   null, null);</span>
<a href="#l100.14"></a><span id="l100.14" class="difflineplus">+                                   btoa(messages[0].toMessageString()));</span>
<a href="#l100.15"></a><span id="l100.15">   let imapMsg = new imapMessage(dataUri.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l100.16"></a><span id="l100.16">   IMAPPump.mailbox.addMessage(imapMsg);</span>
<a href="#l100.17"></a><span id="l100.17"> </span>
<a href="#l100.18"></a><span id="l100.18">   dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l100.19"></a><span id="l100.19" class="difflineminus">-                               btoa(messages[1].toMessageString()),</span>
<a href="#l100.20"></a><span id="l100.20" class="difflineminus">-                               null, null);</span>
<a href="#l100.21"></a><span id="l100.21" class="difflineplus">+                               btoa(messages[1].toMessageString()));</span>
<a href="#l100.22"></a><span id="l100.22">   imapMsg = new imapMessage(dataUri.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l100.23"></a><span id="l100.23">   IMAPPump.mailbox.addMessage(imapMsg);</span>
<a href="#l100.24"></a><span id="l100.24"> </span>
<a href="#l100.25"></a><span id="l100.25">   // Extend local IMAP inbox to over 4 GiB.</span>
<a href="#l100.26"></a><span id="l100.26">   let outputStream = Cc[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l100.27"></a><span id="l100.27">                        .createInstance(Ci.nsIFileOutputStream)</span>
<a href="#l100.28"></a><span id="l100.28">                        .QueryInterface(Ci.nsISeekableStream);</span>
<a href="#l100.29"></a><span id="l100.29">   // Open in write-only mode, no truncate.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l101.1"></a><span id="l101.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlinePlayback.js</span>
<a href="#l101.2"></a><span id="l101.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlinePlayback.js</span>
<a href="#l101.3"></a><span id="l101.3" class="difflineat">@@ -113,25 +113,23 @@ function *setup() {</span>
<a href="#l101.4"></a><span id="l101.4">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l101.5"></a><span id="l101.5">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l101.6"></a><span id="l101.6">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l101.7"></a><span id="l101.7">   gSynthMessage1 = messages[0];</span>
<a href="#l101.8"></a><span id="l101.8">   gSynthMessage2 = messages[1];</span>
<a href="#l101.9"></a><span id="l101.9"> </span>
<a href="#l101.10"></a><span id="l101.10">   let msgURI =</span>
<a href="#l101.11"></a><span id="l101.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l101.12"></a><span id="l101.12" class="difflineminus">-                       btoa(messages[0].toMessageString()),</span>
<a href="#l101.13"></a><span id="l101.13" class="difflineminus">-                       null, null);</span>
<a href="#l101.14"></a><span id="l101.14" class="difflineplus">+                       btoa(messages[0].toMessageString()));</span>
<a href="#l101.15"></a><span id="l101.15">   let imapInbox =  IMAPPump.daemon.getMailbox(&quot;INBOX&quot;)</span>
<a href="#l101.16"></a><span id="l101.16">   let message = new imapMessage(msgURI.spec, imapInbox.uidnext++, [&quot;\\Seen&quot;]);</span>
<a href="#l101.17"></a><span id="l101.17">   imapInbox.addMessage(message);</span>
<a href="#l101.18"></a><span id="l101.18">   msgURI =</span>
<a href="#l101.19"></a><span id="l101.19">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l101.20"></a><span id="l101.20" class="difflineminus">-                       btoa(messages[1].toMessageString()),</span>
<a href="#l101.21"></a><span id="l101.21" class="difflineminus">-                       null, null);</span>
<a href="#l101.22"></a><span id="l101.22" class="difflineplus">+                       btoa(messages[1].toMessageString()));</span>
<a href="#l101.23"></a><span id="l101.23">   message = new imapMessage(msgURI.spec, imapInbox.uidnext++, [&quot;\\Seen&quot;]);</span>
<a href="#l101.24"></a><span id="l101.24">   imapInbox.addMessage(message);</span>
<a href="#l101.25"></a><span id="l101.25"> </span>
<a href="#l101.26"></a><span id="l101.26">   // update folder to download header.</span>
<a href="#l101.27"></a><span id="l101.27">   let promiseUrlListener = new PromiseTestUtils.PromiseUrlListener();</span>
<a href="#l101.28"></a><span id="l101.28">   IMAPPump.inbox.updateFolderWithListener(null, promiseUrlListener);</span>
<a href="#l101.29"></a><span id="l101.29">   yield promiseUrlListener.promise;</span>
<a href="#l101.30"></a><span id="l101.30"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l102.1"></a><span id="l102.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlineStoreLocking.js</span>
<a href="#l102.2"></a><span id="l102.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlineStoreLocking.js</span>
<a href="#l102.3"></a><span id="l102.3" class="difflineat">@@ -24,18 +24,17 @@ function alert(aDialogTitle, aText) {</span>
<a href="#l102.4"></a><span id="l102.4"> }</span>
<a href="#l102.5"></a><span id="l102.5"> </span>
<a href="#l102.6"></a><span id="l102.6"> function addGeneratedMessagesToServer(messages, mailbox)</span>
<a href="#l102.7"></a><span id="l102.7"> {</span>
<a href="#l102.8"></a><span id="l102.8">   // Create the imapMessages and store them on the mailbox</span>
<a href="#l102.9"></a><span id="l102.9">   messages.forEach(function (message)</span>
<a href="#l102.10"></a><span id="l102.10">   {</span>
<a href="#l102.11"></a><span id="l102.11">     let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l102.12"></a><span id="l102.12" class="difflineminus">-                                     btoa(message.toMessageString()),</span>
<a href="#l102.13"></a><span id="l102.13" class="difflineminus">-                                     null, null);</span>
<a href="#l102.14"></a><span id="l102.14" class="difflineplus">+                                     btoa(message.toMessageString()));</span>
<a href="#l102.15"></a><span id="l102.15">     mailbox.addMessage(new imapMessage(dataUri.spec, mailbox.uidnext++, []));</span>
<a href="#l102.16"></a><span id="l102.16">   });</span>
<a href="#l102.17"></a><span id="l102.17"> }</span>
<a href="#l102.18"></a><span id="l102.18"> </span>
<a href="#l102.19"></a><span id="l102.19"> var gStreamedHdr = null;</span>
<a href="#l102.20"></a><span id="l102.20"> </span>
<a href="#l102.21"></a><span id="l102.21"> function checkOfflineStore(prevOfflineStoreSize) {</span>
<a href="#l102.22"></a><span id="l102.22">   dump(&quot;checking offline store\n&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l103.1"></a><span id="l103.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_saveTemplate.js</span>
<a href="#l103.2"></a><span id="l103.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_saveTemplate.js</span>
<a href="#l103.3"></a><span id="l103.3" class="difflineat">@@ -29,18 +29,17 @@ var tests = [</span>
<a href="#l103.4"></a><span id="l103.4"> function* loadImapMessage()</span>
<a href="#l103.5"></a><span id="l103.5"> {</span>
<a href="#l103.6"></a><span id="l103.6">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l103.7"></a><span id="l103.7">   // create a synthetic message with attachment</span>
<a href="#l103.8"></a><span id="l103.8">   let smsg = gMessageGenerator.makeMessage();</span>
<a href="#l103.9"></a><span id="l103.9"> </span>
<a href="#l103.10"></a><span id="l103.10">   let msgURI =</span>
<a href="#l103.11"></a><span id="l103.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l103.12"></a><span id="l103.12" class="difflineminus">-                        btoa(smsg.toMessageString()),</span>
<a href="#l103.13"></a><span id="l103.13" class="difflineminus">-                        null, null);</span>
<a href="#l103.14"></a><span id="l103.14" class="difflineplus">+                        btoa(smsg.toMessageString()));</span>
<a href="#l103.15"></a><span id="l103.15">   let imapInbox =  IMAPPump.daemon.getMailbox(&quot;INBOX&quot;)</span>
<a href="#l103.16"></a><span id="l103.16">   let message = new imapMessage(msgURI.spec, imapInbox.uidnext++, []);</span>
<a href="#l103.17"></a><span id="l103.17">   IMAPPump.mailbox.addMessage(message);</span>
<a href="#l103.18"></a><span id="l103.18">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l103.19"></a><span id="l103.19">   yield false;</span>
<a href="#l103.20"></a><span id="l103.20">   MailServices.mfn.addListener(mfnListener, MailServices.mfn.msgAdded);</span>
<a href="#l103.21"></a><span id="l103.21">   yield true;</span>
<a href="#l103.22"></a><span id="l103.22"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l104.1"></a><span id="l104.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</span>
<a href="#l104.2"></a><span id="l104.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</span>
<a href="#l104.3"></a><span id="l104.3" class="difflineat">@@ -41,18 +41,17 @@ var tests = [</span>
<a href="#l104.4"></a><span id="l104.4">   check_messages</span>
<a href="#l104.5"></a><span id="l104.5"> ];</span>
<a href="#l104.6"></a><span id="l104.6"> </span>
<a href="#l104.7"></a><span id="l104.7"> function* setup_messages() {</span>
<a href="#l104.8"></a><span id="l104.8">   Services.prefs.setBoolPref(&quot;mail.server.default.autosync_offline_stores&quot;, false);</span>
<a href="#l104.9"></a><span id="l104.9"> </span>
<a href="#l104.10"></a><span id="l104.10">   let messageGenerator = new MessageGenerator();</span>
<a href="#l104.11"></a><span id="l104.11">   let messageString = messageGenerator.makeMessage().toMessageString();</span>
<a href="#l104.12"></a><span id="l104.12" class="difflineminus">-  let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; + btoa(messageString),</span>
<a href="#l104.13"></a><span id="l104.13" class="difflineminus">-                                   null, null);</span>
<a href="#l104.14"></a><span id="l104.14" class="difflineplus">+  let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; + btoa(messageString));</span>
<a href="#l104.15"></a><span id="l104.15">   let imapMsg = new imapMessage(dataUri.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l104.16"></a><span id="l104.16">   IMAPPump.mailbox.addMessage(imapMsg);</span>
<a href="#l104.17"></a><span id="l104.17"> </span>
<a href="#l104.18"></a><span id="l104.18">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l104.19"></a><span id="l104.19">   yield false;</span>
<a href="#l104.20"></a><span id="l104.20"> }</span>
<a href="#l104.21"></a><span id="l104.21"> </span>
<a href="#l104.22"></a><span id="l104.22"> function* move_messages() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l105.1"></a><span id="l105.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_syncChanges.js</span>
<a href="#l105.2"></a><span id="l105.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_syncChanges.js</span>
<a href="#l105.3"></a><span id="l105.3" class="difflineat">@@ -53,18 +53,17 @@ function* setup() {</span>
<a href="#l105.4"></a><span id="l105.4"> </span>
<a href="#l105.5"></a><span id="l105.5">   let messages = [];</span>
<a href="#l105.6"></a><span id="l105.6">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l105.7"></a><span id="l105.7">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l105.8"></a><span id="l105.8">   gSynthMessage = messages[0];</span>
<a href="#l105.9"></a><span id="l105.9"> </span>
<a href="#l105.10"></a><span id="l105.10">   let msgURI =</span>
<a href="#l105.11"></a><span id="l105.11">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l105.12"></a><span id="l105.12" class="difflineminus">-                       btoa(gSynthMessage.toMessageString()),</span>
<a href="#l105.13"></a><span id="l105.13" class="difflineminus">-                       null, null);</span>
<a href="#l105.14"></a><span id="l105.14" class="difflineplus">+                       btoa(gSynthMessage.toMessageString()));</span>
<a href="#l105.15"></a><span id="l105.15">   gMessage = new imapMessage(msgURI.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l105.16"></a><span id="l105.16">   IMAPPump.mailbox.addMessage(gMessage);</span>
<a href="#l105.17"></a><span id="l105.17"> </span>
<a href="#l105.18"></a><span id="l105.18">   // update folder to download header.</span>
<a href="#l105.19"></a><span id="l105.19">   IMAPPump.inbox.updateFolderWithListener(null, asyncUrlListener);</span>
<a href="#l105.20"></a><span id="l105.20">   yield false;</span>
<a href="#l105.21"></a><span id="l105.21"> }</span>
<a href="#l105.22"></a><span id="l105.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l106.1"></a><span id="l106.1" class="difflineminus">--- a/mailnews/local/test/unit/test_mailboxContentLength.js</span>
<a href="#l106.2"></a><span id="l106.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_mailboxContentLength.js</span>
<a href="#l106.3"></a><span id="l106.3" class="difflineat">@@ -28,30 +28,29 @@ function verifyContentLength(aMessageHea</span>
<a href="#l106.4"></a><span id="l106.4">   let messageUri = localAccountUtils.inboxFolder.getUriForMsg(msgHdr);</span>
<a href="#l106.5"></a><span id="l106.5">   // Convert this to a URI that necko can run</span>
<a href="#l106.6"></a><span id="l106.6">   let messenger = Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance(Ci.nsIMessenger);</span>
<a href="#l106.7"></a><span id="l106.7">   let neckoURL = {};</span>
<a href="#l106.8"></a><span id="l106.8">   let messageService = messenger.messageServiceFromURI(messageUri);</span>
<a href="#l106.9"></a><span id="l106.9">   messageService.GetUrlForUri(messageUri, neckoURL, null);</span>
<a href="#l106.10"></a><span id="l106.10">   // Don't use the necko URL directly. Instead, get the spec and create a new</span>
<a href="#l106.11"></a><span id="l106.11">   // URL using the IO service</span>
<a href="#l106.12"></a><span id="l106.12" class="difflineminus">-  let urlToRun = Services.io.newURI(neckoURL.value.spec, null, null);</span>
<a href="#l106.13"></a><span id="l106.13" class="difflineplus">+  let urlToRun = Services.io.newURI(neckoURL.value.spec);</span>
<a href="#l106.14"></a><span id="l106.14"> </span>
<a href="#l106.15"></a><span id="l106.15">   // Get a channel from this URI, and check its content length</span>
<a href="#l106.16"></a><span id="l106.16">   let channel = Services.io.newChannelFromURI2(urlToRun,</span>
<a href="#l106.17"></a><span id="l106.17">                                                null,</span>
<a href="#l106.18"></a><span id="l106.18">                                                Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l106.19"></a><span id="l106.19">                                                null,</span>
<a href="#l106.20"></a><span id="l106.20">                                                Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l106.21"></a><span id="l106.21">                                                Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l106.22"></a><span id="l106.22">   do_check_eq(channel.contentLength, gFile.fileSize);</span>
<a href="#l106.23"></a><span id="l106.23"> </span>
<a href="#l106.24"></a><span id="l106.24">   // Now try an attachment. &amp;part=1.2</span>
<a href="#l106.25"></a><span id="l106.25" class="difflineminus">-  let attachmentURL = Services.io.newURI(neckoURL.value.spec + &quot;&amp;part=1.2&quot;,</span>
<a href="#l106.26"></a><span id="l106.26" class="difflineminus">-                                         null, null);</span>
<a href="#l106.27"></a><span id="l106.27" class="difflineplus">+  let attachmentURL = Services.io.newURI(neckoURL.value.spec + &quot;&amp;part=1.2&quot;);</span>
<a href="#l106.28"></a><span id="l106.28">   let attachmentChannel = Services.io.newChannelFromURI2(attachmentURL,</span>
<a href="#l106.29"></a><span id="l106.29">                                                          null,</span>
<a href="#l106.30"></a><span id="l106.30">                                                          Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l106.31"></a><span id="l106.31">                                                          null,</span>
<a href="#l106.32"></a><span id="l106.32">                                                          Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l106.33"></a><span id="l106.33">                                                          Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l106.34"></a><span id="l106.34">   // Currently attachments have their content length set to the length of the</span>
<a href="#l106.35"></a><span id="l106.35">   // entire message</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l107.1"></a><span id="l107.1" class="difflineminus">--- a/mailnews/local/test/unit/test_mailboxProtocol.js</span>
<a href="#l107.2"></a><span id="l107.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_mailboxProtocol.js</span>
<a href="#l107.3"></a><span id="l107.3" class="difflineat">@@ -31,17 +31,17 @@ function run_test()</span>
<a href="#l107.4"></a><span id="l107.4">     do_check_eq(pH.defaultPort, protocols[part].defaultPort);</span>
<a href="#l107.5"></a><span id="l107.5">     do_check_eq(pH.protocolFlags, defaultProtocolFlags);</span>
<a href="#l107.6"></a><span id="l107.6"> </span>
<a href="#l107.7"></a><span id="l107.7">     // Whip through some of the ports to check we get the right results.</span>
<a href="#l107.8"></a><span id="l107.8">     for (let i = 0; i &lt; 1024; ++i)</span>
<a href="#l107.9"></a><span id="l107.9">       do_check_eq(pH.allowPort(i, &quot;&quot;), false);</span>
<a href="#l107.10"></a><span id="l107.10"> </span>
<a href="#l107.11"></a><span id="l107.11">     // Check we get a URI when we ask for one</span>
<a href="#l107.12"></a><span id="l107.12" class="difflineminus">-    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;, null);</span>
<a href="#l107.13"></a><span id="l107.13" class="difflineplus">+    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;);</span>
<a href="#l107.14"></a><span id="l107.14"> </span>
<a href="#l107.15"></a><span id="l107.15">     uri.QueryInterface(Ci.nsIMailboxUrl);</span>
<a href="#l107.16"></a><span id="l107.16"> </span>
<a href="#l107.17"></a><span id="l107.17">     do_check_eq(uri.spec, protocols[part].urlSpec);</span>
<a href="#l107.18"></a><span id="l107.18"> </span>
<a href="#l107.19"></a><span id="l107.19">     // XXX This fails on Windows</span>
<a href="#l107.20"></a><span id="l107.20">     // do_check_neq(pH.newChannel(uri), null);</span>
<a href="#l107.21"></a><span id="l107.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l108.1"></a><span id="l108.1" class="difflineminus">--- a/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l108.2"></a><span id="l108.2" class="difflineplus">+++ b/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l108.3"></a><span id="l108.3" class="difflineat">@@ -131,17 +131,17 @@ function setupLocalServer(port, host=&quot;lo</span>
<a href="#l108.4"></a><span id="l108.4"> var URLCreator = MailServices.nntp.QueryInterface(Ci.nsIProtocolHandler);</span>
<a href="#l108.5"></a><span id="l108.5"> </span>
<a href="#l108.6"></a><span id="l108.6"> // Sets up a protocol object and prepares to run the test for the news url</span>
<a href="#l108.7"></a><span id="l108.7"> function setupProtocolTest(port, newsUrl, incomingServer) {</span>
<a href="#l108.8"></a><span id="l108.8">   var url;</span>
<a href="#l108.9"></a><span id="l108.9">   if (newsUrl instanceof Ci.nsIMsgMailNewsUrl) {</span>
<a href="#l108.10"></a><span id="l108.10">     url = newsUrl;</span>
<a href="#l108.11"></a><span id="l108.11">   } else {</span>
<a href="#l108.12"></a><span id="l108.12" class="difflineminus">-    url = URLCreator.newURI(newsUrl, null, null);</span>
<a href="#l108.13"></a><span id="l108.13" class="difflineplus">+    url = URLCreator.newURI(newsUrl);</span>
<a href="#l108.14"></a><span id="l108.14">   }</span>
<a href="#l108.15"></a><span id="l108.15"> </span>
<a href="#l108.16"></a><span id="l108.16">   var newsServer = incomingServer;</span>
<a href="#l108.17"></a><span id="l108.17">   if (!newsServer)</span>
<a href="#l108.18"></a><span id="l108.18">     newsServer = setupLocalServer(port);</span>
<a href="#l108.19"></a><span id="l108.19"> </span>
<a href="#l108.20"></a><span id="l108.20">   var listener = {</span>
<a href="#l108.21"></a><span id="l108.21">     onStartRequest : function () {},</span>
<a href="#l108.22"></a><span id="l108.22" class="difflineat">@@ -161,17 +161,17 @@ function setupProtocolTest(port, newsUrl</span>
<a href="#l108.23"></a><span id="l108.23">       throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l108.24"></a><span id="l108.24">     }</span>
<a href="#l108.25"></a><span id="l108.25">   }</span>
<a href="#l108.26"></a><span id="l108.26">   listener.called = false;</span>
<a href="#l108.27"></a><span id="l108.27">   newsServer.loadNewsUrl(url, null, listener);</span>
<a href="#l108.28"></a><span id="l108.28"> }</span>
<a href="#l108.29"></a><span id="l108.29"> </span>
<a href="#l108.30"></a><span id="l108.30"> function create_post(baseURL, file) {</span>
<a href="#l108.31"></a><span id="l108.31" class="difflineminus">-  var url = URLCreator.newURI(baseURL, null, null);</span>
<a href="#l108.32"></a><span id="l108.32" class="difflineplus">+  var url = URLCreator.newURI(baseURL);</span>
<a href="#l108.33"></a><span id="l108.33">   url.QueryInterface(Ci.nsINntpUrl);</span>
<a href="#l108.34"></a><span id="l108.34"> </span>
<a href="#l108.35"></a><span id="l108.35">   var post = Cc[&quot;@mozilla.org/messenger/nntpnewsgrouppost;1&quot;]</span>
<a href="#l108.36"></a><span id="l108.36">                .createInstance(Ci.nsINNTPNewsgroupPost);</span>
<a href="#l108.37"></a><span id="l108.37">   post.postMessageFile = do_get_file(file);</span>
<a href="#l108.38"></a><span id="l108.38">   url.messageToPost = post;</span>
<a href="#l108.39"></a><span id="l108.39">   return url;</span>
<a href="#l108.40"></a><span id="l108.40"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l109.1"></a><span id="l109.1" class="difflineminus">--- a/mailnews/news/test/unit/test_bug37465.js</span>
<a href="#l109.2"></a><span id="l109.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_bug37465.js</span>
<a href="#l109.3"></a><span id="l109.3" class="difflineat">@@ -5,18 +5,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l109.4"></a><span id="l109.4"> </span>
<a href="#l109.5"></a><span id="l109.5"> function run_test() {</span>
<a href="#l109.6"></a><span id="l109.6">   var daemon = setupNNTPDaemon();</span>
<a href="#l109.7"></a><span id="l109.7">   var server = makeServer(NNTP_RFC2980_handler, daemon);</span>
<a href="#l109.8"></a><span id="l109.8">   server.start();</span>
<a href="#l109.9"></a><span id="l109.9"> </span>
<a href="#l109.10"></a><span id="l109.10">   // Correct URI?</span>
<a href="#l109.11"></a><span id="l109.11">   let uri = Services.io.newURI(&quot;news://localhost:&quot; + server.port +</span>
<a href="#l109.12"></a><span id="l109.12" class="difflineminus">-                                 &quot;/1@regular.invalid&quot;,</span>
<a href="#l109.13"></a><span id="l109.13" class="difflineminus">-                               null, null);</span>
<a href="#l109.14"></a><span id="l109.14" class="difflineplus">+                                 &quot;/1@regular.invalid&quot;);</span>
<a href="#l109.15"></a><span id="l109.15">   let newsUri = uri.QueryInterface(Ci.nsINntpUrl)</span>
<a href="#l109.16"></a><span id="l109.16">                    .QueryInterface(Ci.nsIMsgMailNewsUrl);</span>
<a href="#l109.17"></a><span id="l109.17">   do_check_eq(uri.port, server.port);</span>
<a href="#l109.18"></a><span id="l109.18">   do_check_eq(newsUri.server, null);</span>
<a href="#l109.19"></a><span id="l109.19">   do_check_eq(newsUri.messageID, &quot;1@regular.invalid&quot;);</span>
<a href="#l109.20"></a><span id="l109.20">   do_check_eq(newsUri.folder, null);</span>
<a href="#l109.21"></a><span id="l109.21"> </span>
<a href="#l109.22"></a><span id="l109.22">   // Run the URI and make sure we get the message</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l110.1"></a><span id="l110.1" class="difflineminus">--- a/mailnews/news/test/unit/test_nntpContentLength.js</span>
<a href="#l110.2"></a><span id="l110.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_nntpContentLength.js</span>
<a href="#l110.3"></a><span id="l110.3" class="difflineat">@@ -40,31 +40,30 @@ function run_test() {</span>
<a href="#l110.4"></a><span id="l110.4">     let messageUri = folder.getUriForMsg(msgHdr);</span>
<a href="#l110.5"></a><span id="l110.5">     // Convert this to a URI that necko can run</span>
<a href="#l110.6"></a><span id="l110.6">     let messenger = Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance(Ci.nsIMessenger);</span>
<a href="#l110.7"></a><span id="l110.7">     let neckoURL = {};</span>
<a href="#l110.8"></a><span id="l110.8">     let messageService = messenger.messageServiceFromURI(messageUri);</span>
<a href="#l110.9"></a><span id="l110.9">     messageService.GetUrlForUri(messageUri, neckoURL, null);</span>
<a href="#l110.10"></a><span id="l110.10">     // Don't use the necko URL directly. Instead, get the spec and create a new</span>
<a href="#l110.11"></a><span id="l110.11">     // URL using the IO service</span>
<a href="#l110.12"></a><span id="l110.12" class="difflineminus">-    let urlToRun = Services.io.newURI(neckoURL.value.spec, null, null);</span>
<a href="#l110.13"></a><span id="l110.13" class="difflineplus">+    let urlToRun = Services.io.newURI(neckoURL.value.spec);</span>
<a href="#l110.14"></a><span id="l110.14"> </span>
<a href="#l110.15"></a><span id="l110.15">     // Get a channel from this URI, and check its content length</span>
<a href="#l110.16"></a><span id="l110.16">     let channel = Services.io.newChannelFromURI2(urlToRun,</span>
<a href="#l110.17"></a><span id="l110.17">                                                  null,</span>
<a href="#l110.18"></a><span id="l110.18">                                                  Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l110.19"></a><span id="l110.19">                                                  null,</span>
<a href="#l110.20"></a><span id="l110.20">                                                  Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l110.21"></a><span id="l110.21">                                                  Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l110.22"></a><span id="l110.22">     do_check_eq(channel.contentLength, kSimpleNewsArticle.length);</span>
<a href="#l110.23"></a><span id="l110.23"> </span>
<a href="#l110.24"></a><span id="l110.24">     // Now try an attachment. &amp;part=1.2</span>
<a href="#l110.25"></a><span id="l110.25">     // XXX the message doesn't really have an attachment</span>
<a href="#l110.26"></a><span id="l110.26" class="difflineminus">-    let attachmentURL = Services.io.newURI(neckoURL.value.spec + &quot;&amp;part=1.2&quot;,</span>
<a href="#l110.27"></a><span id="l110.27" class="difflineminus">-                                           null, null);</span>
<a href="#l110.28"></a><span id="l110.28" class="difflineplus">+    let attachmentURL = Services.io.newURI(neckoURL.value.spec + &quot;&amp;part=1.2&quot;);</span>
<a href="#l110.29"></a><span id="l110.29">     let attachmentChannel = Services.io.newChannelFromURI2(attachmentURL,</span>
<a href="#l110.30"></a><span id="l110.30">                                                            null,</span>
<a href="#l110.31"></a><span id="l110.31">                                                            Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l110.32"></a><span id="l110.32">                                                            null,</span>
<a href="#l110.33"></a><span id="l110.33">                                                            Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l110.34"></a><span id="l110.34">                                                            Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l110.35"></a><span id="l110.35">     // Currently attachments have their content length set to the length of the</span>
<a href="#l110.36"></a><span id="l110.36">     // entire message</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l111.1"></a><span id="l111.1" class="difflineminus">--- a/mailnews/news/test/unit/test_nntpProtocols.js</span>
<a href="#l111.2"></a><span id="l111.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_nntpProtocols.js</span>
<a href="#l111.3"></a><span id="l111.3" class="difflineat">@@ -36,15 +36,15 @@ function run_test() {</span>
<a href="#l111.4"></a><span id="l111.4">     do_check_eq(pH.protocolFlags, defaultProtocolFlags);</span>
<a href="#l111.5"></a><span id="l111.5"> </span>
<a href="#l111.6"></a><span id="l111.6">     // Whip through some of the ports to check we get the right results.</span>
<a href="#l111.7"></a><span id="l111.7">     // NEWS allows connecting to any port.</span>
<a href="#l111.8"></a><span id="l111.8">     for (let i = 0; i &lt; 1024; ++i)</span>
<a href="#l111.9"></a><span id="l111.9">       do_check_true(pH.allowPort(i, &quot;&quot;));</span>
<a href="#l111.10"></a><span id="l111.10"> </span>
<a href="#l111.11"></a><span id="l111.11">     // Check we get a URI when we ask for one</span>
<a href="#l111.12"></a><span id="l111.12" class="difflineminus">-    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;, null);</span>
<a href="#l111.13"></a><span id="l111.13" class="difflineplus">+    var uri = pH.newURI(protocols[part].urlSpec, &quot;&quot;);</span>
<a href="#l111.14"></a><span id="l111.14"> </span>
<a href="#l111.15"></a><span id="l111.15">     uri.QueryInterface(Ci.nsINntpUrl);</span>
<a href="#l111.16"></a><span id="l111.16"> </span>
<a href="#l111.17"></a><span id="l111.17">     do_check_eq(uri.spec, protocols[part].urlSpec);</span>
<a href="#l111.18"></a><span id="l111.18">   }</span>
<a href="#l111.19"></a><span id="l111.19"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l112.1"></a><span id="l112.1" class="difflineminus">--- a/mailnews/news/test/unit/test_nntpUrl.js</span>
<a href="#l112.2"></a><span id="l112.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_nntpUrl.js</span>
<a href="#l112.3"></a><span id="l112.3" class="difflineat">@@ -6,17 +6,17 @@</span>
<a href="#l112.4"></a><span id="l112.4">  *</span>
<a href="#l112.5"></a><span id="l112.5">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l112.6"></a><span id="l112.6"> </span>
<a href="#l112.7"></a><span id="l112.7"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l112.8"></a><span id="l112.8"> </span>
<a href="#l112.9"></a><span id="l112.9"> function getMessageHeaderFromUrl(aUrl) {</span>
<a href="#l112.10"></a><span id="l112.10">   let msgUrl = MailServices.nntp</span>
<a href="#l112.11"></a><span id="l112.11">                 .QueryInterface(Ci.nsIProtocolHandler)</span>
<a href="#l112.12"></a><span id="l112.12" class="difflineminus">-                .newURI(aUrl, null, null)</span>
<a href="#l112.13"></a><span id="l112.13" class="difflineplus">+                .newURI(aUrl)</span>
<a href="#l112.14"></a><span id="l112.14">                 .QueryInterface(Ci.nsIMsgMessageUrl);</span>
<a href="#l112.15"></a><span id="l112.15">   return msgUrl.messageHeader;</span>
<a href="#l112.16"></a><span id="l112.16"> }</span>
<a href="#l112.17"></a><span id="l112.17"> </span>
<a href="#l112.18"></a><span id="l112.18"> function run_test() {</span>
<a href="#l112.19"></a><span id="l112.19"> </span>
<a href="#l112.20"></a><span id="l112.20">   // This is crash test for Bug 392729</span>
<a href="#l112.21"></a><span id="l112.21">   try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l113.1"></a><span id="l113.1" class="difflineminus">--- a/mailnews/news/test/unit/test_server.js</span>
<a href="#l113.2"></a><span id="l113.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_server.js</span>
<a href="#l113.3"></a><span id="l113.3" class="difflineat">@@ -95,17 +95,17 @@ function testRFC977() {</span>
<a href="#l113.4"></a><span id="l113.4"> function testConnectionLimit() {</span>
<a href="#l113.5"></a><span id="l113.5">   var server = makeServer(NNTP_RFC977_handler, daemon);</span>
<a href="#l113.6"></a><span id="l113.6">   server.start(NNTP_PORT);</span>
<a href="#l113.7"></a><span id="l113.7"> </span>
<a href="#l113.8"></a><span id="l113.8">   var prefix = &quot;news://localhost:&quot;+NNTP_PORT+&quot;/&quot;;</span>
<a href="#l113.9"></a><span id="l113.9">   var transaction;</span>
<a href="#l113.10"></a><span id="l113.10"> </span>
<a href="#l113.11"></a><span id="l113.11">   // To test make connections limit, we run two URIs simultaneously.</span>
<a href="#l113.12"></a><span id="l113.12" class="difflineminus">-  var url = URLCreator.newURI(prefix+&quot;*&quot;, null, null);</span>
<a href="#l113.13"></a><span id="l113.13" class="difflineplus">+  var url = URLCreator.newURI(prefix+&quot;*&quot;);</span>
<a href="#l113.14"></a><span id="l113.14">   _server.loadNewsUrl(url, null, null);</span>
<a href="#l113.15"></a><span id="l113.15">   setupProtocolTest(NNTP_PORT, prefix+&quot;TSS1@nntp.invalid&quot;);</span>
<a href="#l113.16"></a><span id="l113.16">   server.performTest();</span>
<a href="#l113.17"></a><span id="l113.17">   // We should have length one... which means this must be a transaction object,</span>
<a href="#l113.18"></a><span id="l113.18">   // containing only us and them</span>
<a href="#l113.19"></a><span id="l113.19">   do_check_true('us' in server.playTransaction());</span>
<a href="#l113.20"></a><span id="l113.20">   server.stop();</span>
<a href="#l113.21"></a><span id="l113.21"> </span>
<a href="#l113.22"></a><span id="l113.22" class="difflineat">@@ -127,17 +127,17 @@ function testReentrantClose() {</span>
<a href="#l113.23"></a><span id="l113.23">       let thread = gThreadManager.currentThread;</span>
<a href="#l113.24"></a><span id="l113.24">       while (thread.hasPendingEvents())</span>
<a href="#l113.25"></a><span id="l113.25">         thread.processNextEvent(true);</span>
<a href="#l113.26"></a><span id="l113.26">     }</span>
<a href="#l113.27"></a><span id="l113.27">   };</span>
<a href="#l113.28"></a><span id="l113.28">   // Nice multi-step command--we can close while executing this URL if we are</span>
<a href="#l113.29"></a><span id="l113.29">   // careful.</span>
<a href="#l113.30"></a><span id="l113.30">   var url = URLCreator.newURI(&quot;news://localhost:&quot; + NNTP_PORT +</span>
<a href="#l113.31"></a><span id="l113.31" class="difflineminus">-    &quot;/test.filter&quot;, null, null);</span>
<a href="#l113.32"></a><span id="l113.32" class="difflineplus">+    &quot;/test.filter&quot;);</span>
<a href="#l113.33"></a><span id="l113.33">   url.QueryInterface(Ci.nsIMsgMailNewsUrl);</span>
<a href="#l113.34"></a><span id="l113.34">   url.RegisterListener(listener);</span>
<a href="#l113.35"></a><span id="l113.35"> </span>
<a href="#l113.36"></a><span id="l113.36">   _server.loadNewsUrl(url, null, null);</span>
<a href="#l113.37"></a><span id="l113.37">   server.performTest(&quot;GROUP&quot;);</span>
<a href="#l113.38"></a><span id="l113.38">   dump(&quot;Stopping server\n&quot;);</span>
<a href="#l113.39"></a><span id="l113.39">   gThreadManager.currentThread.dispatch(</span>
<a href="#l113.40"></a><span id="l113.40">     { run: function() { _server.closeCachedConnections(); } },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l114.1"></a><span id="l114.1" class="difflineminus">--- a/mailnews/news/test/unit/test_uriParser.js</span>
<a href="#l114.2"></a><span id="l114.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_uriParser.js</span>
<a href="#l114.3"></a><span id="l114.3" class="difflineat">@@ -140,30 +140,30 @@ var invalid_uris = [</span>
<a href="#l114.4"></a><span id="l114.4"> </span>
<a href="#l114.5"></a><span id="l114.5"> function run_test() {</span>
<a href="#l114.6"></a><span id="l114.6">   // We're not running the server, just setting it up</span>
<a href="#l114.7"></a><span id="l114.7">   localserver = setupLocalServer(119);</span>
<a href="#l114.8"></a><span id="l114.8">   let nntpService = Cc[&quot;@mozilla.org/messenger/nntpservice;1&quot;]</span>
<a href="#l114.9"></a><span id="l114.9">                       .getService(Components.interfaces.nsIProtocolHandler);</span>
<a href="#l114.10"></a><span id="l114.10">   for (let test of tests) {</span>
<a href="#l114.11"></a><span id="l114.11">     dump(&quot;Checking URL &quot; + test.uri + &quot;\n&quot;);</span>
<a href="#l114.12"></a><span id="l114.12" class="difflineminus">-    let url = nntpService.newURI(test.uri, null, null);</span>
<a href="#l114.13"></a><span id="l114.13" class="difflineplus">+    let url = nntpService.newURI(test.uri);</span>
<a href="#l114.14"></a><span id="l114.14">     url.QueryInterface(Ci.nsIMsgMailNewsUrl);</span>
<a href="#l114.15"></a><span id="l114.15">     url.QueryInterface(Ci.nsINntpUrl);</span>
<a href="#l114.16"></a><span id="l114.16">     for (let prop in test) {</span>
<a href="#l114.17"></a><span id="l114.17">       if (prop == &quot;uri&quot;)</span>
<a href="#l114.18"></a><span id="l114.18">         continue;</span>
<a href="#l114.19"></a><span id="l114.19">       do_check_eq(url[prop], test[prop]);</span>
<a href="#l114.20"></a><span id="l114.20">     }</span>
<a href="#l114.21"></a><span id="l114.21">   }</span>
<a href="#l114.22"></a><span id="l114.22"> </span>
<a href="#l114.23"></a><span id="l114.23">   for (let fail of invalid_uris) {</span>
<a href="#l114.24"></a><span id="l114.24">     try {</span>
<a href="#l114.25"></a><span id="l114.25">       dump(&quot;Checking URL &quot; + fail + &quot; for failure\n&quot;);</span>
<a href="#l114.26"></a><span id="l114.26" class="difflineminus">-      nntpService.newURI(fail, null, null);</span>
<a href="#l114.27"></a><span id="l114.27" class="difflineplus">+      nntpService.newURI(fail);</span>
<a href="#l114.28"></a><span id="l114.28">       do_check_true(false);</span>
<a href="#l114.29"></a><span id="l114.29">     } catch (e) {</span>
<a href="#l114.30"></a><span id="l114.30">       do_check_eq(e.result, Components.results.NS_ERROR_MALFORMED_URI);</span>
<a href="#l114.31"></a><span id="l114.31">     }</span>
<a href="#l114.32"></a><span id="l114.32">   }</span>
<a href="#l114.33"></a><span id="l114.33"> </span>
<a href="#l114.34"></a><span id="l114.34">   // The password migration is async, so trigger an event to prevent the logon</span>
<a href="#l114.35"></a><span id="l114.35">   // manager from trying to migrate after shutdown has started.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l115.1"></a><span id="l115.1" class="difflineminus">--- a/mailnews/test/resources/messageInjection.js</span>
<a href="#l115.2"></a><span id="l115.2" class="difflineplus">+++ b/mailnews/test/resources/messageInjection.js</span>
<a href="#l115.3"></a><span id="l115.3" class="difflineat">@@ -745,18 +745,17 @@ function add_sets_to_folders(aMsgFolders</span>
<a href="#l115.4"></a><span id="l115.4">           if (iPerSet &lt; messageSet.synMessages.length) {</span>
<a href="#l115.5"></a><span id="l115.5">             didSomething = true;</span>
<a href="#l115.6"></a><span id="l115.6"> </span>
<a href="#l115.7"></a><span id="l115.7">             let realFolder = mis.handleUriToRealFolder[folder.value];</span>
<a href="#l115.8"></a><span id="l115.8">             let fakeFolder = mis.handleUriToFakeFolder[folder.value];</span>
<a href="#l115.9"></a><span id="l115.9">             let synMsg = messageSet._trackMessageAddition(realFolder, iPerSet);</span>
<a href="#l115.10"></a><span id="l115.10">             let msgURI =</span>
<a href="#l115.11"></a><span id="l115.11">               Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l115.12"></a><span id="l115.12" class="difflineminus">-                                 btoa(synMsg.toMessageString()),</span>
<a href="#l115.13"></a><span id="l115.13" class="difflineminus">-                                 null, null);</span>
<a href="#l115.14"></a><span id="l115.14" class="difflineplus">+                                 btoa(synMsg.toMessageString()));</span>
<a href="#l115.15"></a><span id="l115.15">             let imapMsg = new imapMessage(msgURI.spec, fakeFolder.uidnext++, []);</span>
<a href="#l115.16"></a><span id="l115.16">             // If the message's meta-state indicates it is junk, set that flag.</span>
<a href="#l115.17"></a><span id="l115.17">             // There is also a NotJunk flag, but we're not playing with that</span>
<a href="#l115.18"></a><span id="l115.18">             //  right now; as long as nothing is ever marked as junk, the junk</span>
<a href="#l115.19"></a><span id="l115.19">             //  classifier won't run, so it's moot for now.</span>
<a href="#l115.20"></a><span id="l115.20">             if (synMsg.metaState.junk)</span>
<a href="#l115.21"></a><span id="l115.21">               imapMsg.setFlag(&quot;Junk&quot;);</span>
<a href="#l115.22"></a><span id="l115.22">             if (synMsg.metaState.read)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l116.1"></a><span id="l116.1" class="difflineminus">--- a/suite/browser/mailNavigatorOverlay.js</span>
<a href="#l116.2"></a><span id="l116.2" class="difflineplus">+++ b/suite/browser/mailNavigatorOverlay.js</span>
<a href="#l116.3"></a><span id="l116.3" class="difflineat">@@ -57,17 +57,17 @@ function openComposeWindow(url, title, a</span>
<a href="#l116.4"></a><span id="l116.4"> }</span>
<a href="#l116.5"></a><span id="l116.5"> </span>
<a href="#l116.6"></a><span id="l116.6"> function openExternalMailer(url, title) {</span>
<a href="#l116.7"></a><span id="l116.7">   var extProtocolSvc = Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l116.8"></a><span id="l116.8">                                  .getService(Components.interfaces.nsIExternalProtocolService);</span>
<a href="#l116.9"></a><span id="l116.9">   var mailto = url ? &quot;mailto:?body=&quot; + encodeURIComponent(url)</span>
<a href="#l116.10"></a><span id="l116.10">                                      + &quot;&amp;subject=&quot;</span>
<a href="#l116.11"></a><span id="l116.11">                                      + encodeURIComponent(title) : &quot;mailto:&quot;;</span>
<a href="#l116.12"></a><span id="l116.12" class="difflineminus">-  var uri = Services.io.newURI(mailto, null, null);</span>
<a href="#l116.13"></a><span id="l116.13" class="difflineplus">+  var uri = Services.io.newURI(mailto);</span>
<a href="#l116.14"></a><span id="l116.14"> </span>
<a href="#l116.15"></a><span id="l116.15">   extProtocolSvc.loadUrl(uri);</span>
<a href="#l116.16"></a><span id="l116.16"> }</span>
<a href="#l116.17"></a><span id="l116.17"> </span>
<a href="#l116.18"></a><span id="l116.18"> function openNewCardDialog()</span>
<a href="#l116.19"></a><span id="l116.19"> {</span>
<a href="#l116.20"></a><span id="l116.20">   window.openDialog(&quot;chrome://messenger/content/addressbook/abNewCardDialog.xul&quot;,</span>
<a href="#l116.21"></a><span id="l116.21">                     &quot;&quot;, &quot;chrome,modal,resizable=no,centerscreen&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l117.1"></a><span id="l117.1" class="difflineminus">--- a/suite/browser/navigator.js</span>
<a href="#l117.2"></a><span id="l117.2" class="difflineplus">+++ b/suite/browser/navigator.js</span>
<a href="#l117.3"></a><span id="l117.3" class="difflineat">@@ -96,17 +96,17 @@ const gStatusBarPopupIconPrefListener =</span>
<a href="#l117.4"></a><span id="l117.4"> const gPopupPermListener = {</span>
<a href="#l117.5"></a><span id="l117.5"> </span>
<a href="#l117.6"></a><span id="l117.6">   observe: function(subject, topic, data) {</span>
<a href="#l117.7"></a><span id="l117.7">     if (topic == &quot;popup-perm-close&quot;) {</span>
<a href="#l117.8"></a><span id="l117.8">       // close the window if we're a popup and our opener's URI matches</span>
<a href="#l117.9"></a><span id="l117.9">       // the URI in the notification</span>
<a href="#l117.10"></a><span id="l117.10">       var popupOpenerURI = maybeInitPopupContext();</span>
<a href="#l117.11"></a><span id="l117.11">       if (popupOpenerURI) {</span>
<a href="#l117.12"></a><span id="l117.12" class="difflineminus">-        closeURI = Services.io.newURI(data, null, null);</span>
<a href="#l117.13"></a><span id="l117.13" class="difflineplus">+        closeURI = Services.io.newURI(data);</span>
<a href="#l117.14"></a><span id="l117.14">         if (closeURI.host == popupOpenerURI.host)</span>
<a href="#l117.15"></a><span id="l117.15">           window.close();</span>
<a href="#l117.16"></a><span id="l117.16">       }</span>
<a href="#l117.17"></a><span id="l117.17">     }</span>
<a href="#l117.18"></a><span id="l117.18">   }</span>
<a href="#l117.19"></a><span id="l117.19"> };</span>
<a href="#l117.20"></a><span id="l117.20"> </span>
<a href="#l117.21"></a><span id="l117.21"> const gFormSubmitObserver = {</span>
<a href="#l117.22"></a><span id="l117.22" class="difflineat">@@ -2440,17 +2440,17 @@ function maybeInitPopupContext()</span>
<a href="#l117.23"></a><span id="l117.23">                  .QueryInterface(CI.nsIInterfaceRequestor)</span>
<a href="#l117.24"></a><span id="l117.24">                  .getInterface(CI.nsIWebNavigation)</span>
<a href="#l117.25"></a><span id="l117.25">                  .QueryInterface(CI.nsIDocShellTreeItem).treeOwner</span>
<a href="#l117.26"></a><span id="l117.26">                  .QueryInterface(CI.nsIInterfaceRequestor)</span>
<a href="#l117.27"></a><span id="l117.27">                  .getInterface(CI.nsIXULWindow);</span>
<a href="#l117.28"></a><span id="l117.28">     if (xulwin.contextFlags &amp;</span>
<a href="#l117.29"></a><span id="l117.29">         CI.nsIWindowCreator2.PARENT_IS_LOADING_OR_RUNNING_TIMEOUT) {</span>
<a href="#l117.30"></a><span id="l117.30">       // return our opener's URI</span>
<a href="#l117.31"></a><span id="l117.31" class="difflineminus">-      return Services.io.newURI(window.content.opener.location.href, null, null);</span>
<a href="#l117.32"></a><span id="l117.32" class="difflineplus">+      return Services.io.newURI(window.content.opener.location.href);</span>
<a href="#l117.33"></a><span id="l117.33">     }</span>
<a href="#l117.34"></a><span id="l117.34">   } catch(e) {</span>
<a href="#l117.35"></a><span id="l117.35">   }</span>
<a href="#l117.36"></a><span id="l117.36">   return null;</span>
<a href="#l117.37"></a><span id="l117.37"> }</span>
<a href="#l117.38"></a><span id="l117.38"> </span>
<a href="#l117.39"></a><span id="l117.39"> function WindowIsClosing()</span>
<a href="#l117.40"></a><span id="l117.40"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l118.1"></a><span id="l118.1" class="difflineminus">--- a/suite/browser/pageinfo/pageInfo.js</span>
<a href="#l118.2"></a><span id="l118.2" class="difflineplus">+++ b/suite/browser/pageinfo/pageInfo.js</span>
<a href="#l118.3"></a><span id="l118.3" class="difflineat">@@ -498,17 +498,17 @@ function makeGeneralTab()</span>
<a href="#l118.4"></a><span id="l118.4">   // get the date of last modification</span>
<a href="#l118.5"></a><span id="l118.5">   var modifiedText = formatDate(gDocument.lastModified, gStrings.notSet);</span>
<a href="#l118.6"></a><span id="l118.6">   document.getElementById(&quot;modifiedtext&quot;).value = modifiedText;</span>
<a href="#l118.7"></a><span id="l118.7"> </span>
<a href="#l118.8"></a><span id="l118.8">   // get cache info</span>
<a href="#l118.9"></a><span id="l118.9">   setItemValue(&quot;sizetext&quot;, null);</span>
<a href="#l118.10"></a><span id="l118.10">   var cacheKey = url.replace(/#.*$/, &quot;&quot;);</span>
<a href="#l118.11"></a><span id="l118.11">   try {</span>
<a href="#l118.12"></a><span id="l118.12" class="difflineminus">-    diskCacheStorage.asyncOpenURI(Services.io.newURI(cacheKey, null, null),</span>
<a href="#l118.13"></a><span id="l118.13" class="difflineplus">+    diskCacheStorage.asyncOpenURI(Services.io.newURI(cacheKey),</span>
<a href="#l118.14"></a><span id="l118.14">                                   null, OPEN_READONLY, cacheListener);</span>
<a href="#l118.15"></a><span id="l118.15">   }</span>
<a href="#l118.16"></a><span id="l118.16">   catch(ex) { }</span>
<a href="#l118.17"></a><span id="l118.17"> </span>
<a href="#l118.18"></a><span id="l118.18">   securityOnLoad();</span>
<a href="#l118.19"></a><span id="l118.19"> }</span>
<a href="#l118.20"></a><span id="l118.20"> </span>
<a href="#l118.21"></a><span id="l118.21"> //******** Generic Build-a-tab</span>
<a href="#l118.22"></a><span id="l118.22" class="difflineat">@@ -621,17 +621,17 @@ imgCacheListener.prototype.onCacheEntryC</span>
<a href="#l118.23"></a><span id="l118.23"> function onCacheEntryCheck() {</span>
<a href="#l118.24"></a><span id="l118.24">   return ENTRY_WANTED;</span>
<a href="#l118.25"></a><span id="l118.25"> };</span>
<a href="#l118.26"></a><span id="l118.26"> </span>
<a href="#l118.27"></a><span id="l118.27"> function addImage(url, type, alt, elem, isBg)</span>
<a href="#l118.28"></a><span id="l118.28"> {</span>
<a href="#l118.29"></a><span id="l118.29">   if (url) try {</span>
<a href="#l118.30"></a><span id="l118.30">     var listener = new imgCacheListener(url, type, alt, elem, isBg);</span>
<a href="#l118.31"></a><span id="l118.31" class="difflineminus">-    diskCacheStorage.asyncOpenURI(Services.io.newURI(url, null, null),</span>
<a href="#l118.32"></a><span id="l118.32" class="difflineplus">+    diskCacheStorage.asyncOpenURI(Services.io.newURI(url),</span>
<a href="#l118.33"></a><span id="l118.33">                                   null, OPEN_READONLY, listener);</span>
<a href="#l118.34"></a><span id="l118.34">   }</span>
<a href="#l118.35"></a><span id="l118.35">   catch (ex) { }</span>
<a href="#l118.36"></a><span id="l118.36"> }</span>
<a href="#l118.37"></a><span id="l118.37"> </span>
<a href="#l118.38"></a><span id="l118.38"> function grabAll(elem)</span>
<a href="#l118.39"></a><span id="l118.39"> {</span>
<a href="#l118.40"></a><span id="l118.40">   // check for background images, any node may have multiple</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l119.1"></a><span id="l119.1" class="difflineminus">--- a/suite/browser/tabbrowser.xml</span>
<a href="#l119.2"></a><span id="l119.2" class="difflineplus">+++ b/suite/browser/tabbrowser.xml</span>
<a href="#l119.3"></a><span id="l119.3" class="difflineat">@@ -928,17 +928,17 @@</span>
<a href="#l119.4"></a><span id="l119.4">         &lt;parameter name=&quot;aURI&quot;/&gt;</span>
<a href="#l119.5"></a><span id="l119.5">         &lt;parameter name=&quot;aAttr&quot;/&gt;</span>
<a href="#l119.6"></a><span id="l119.6">         &lt;parameter name=&quot;aElt&quot;/&gt;</span>
<a href="#l119.7"></a><span id="l119.7">         &lt;parameter name=&quot;aLoadingPrincipal&quot;/&gt;</span>
<a href="#l119.8"></a><span id="l119.8">         &lt;body&gt;</span>
<a href="#l119.9"></a><span id="l119.9">           &lt;![CDATA[</span>
<a href="#l119.10"></a><span id="l119.10">             var iconURL = this.buildFavIconString(aURI);</span>
<a href="#l119.11"></a><span id="l119.11">             if (this.mFaviconService) {</span>
<a href="#l119.12"></a><span id="l119.12" class="difflineminus">-              var iconURI = this.mIOService.newURI(iconURL, null, null);</span>
<a href="#l119.13"></a><span id="l119.13" class="difflineplus">+              var iconURI = this.mIOService.newURI(iconURL);</span>
<a href="#l119.14"></a><span id="l119.14">               var faviconFlags = this.usePrivateBrowsing ?</span>
<a href="#l119.15"></a><span id="l119.15">                   this.mFaviconService.FAVICON_LOAD_PRIVATE :</span>
<a href="#l119.16"></a><span id="l119.16">                   this.mFaviconService.FAVICON_LOAD_NON_PRIVATE;</span>
<a href="#l119.17"></a><span id="l119.17">               var loadingPrincipal = aLoadingPrincipal ||</span>
<a href="#l119.18"></a><span id="l119.18">                                      this.mSecMan.getSystemPrincipal();</span>
<a href="#l119.19"></a><span id="l119.19"> </span>
<a href="#l119.20"></a><span id="l119.20">               this.mFaviconService</span>
<a href="#l119.21"></a><span id="l119.21">                   .setAndFetchFaviconForPage(aURI, iconURI, false,</span>
<a href="#l119.22"></a><span id="l119.22" class="difflineat">@@ -952,17 +952,17 @@</span>
<a href="#l119.23"></a><span id="l119.23">         &lt;/body&gt;</span>
<a href="#l119.24"></a><span id="l119.24">       &lt;/method&gt;</span>
<a href="#l119.25"></a><span id="l119.25"> </span>
<a href="#l119.26"></a><span id="l119.26">       &lt;method name=&quot;addToMissedIconCache&quot;&gt;</span>
<a href="#l119.27"></a><span id="l119.27">         &lt;parameter name=&quot;aURI&quot;/&gt;</span>
<a href="#l119.28"></a><span id="l119.28">         &lt;body&gt;</span>
<a href="#l119.29"></a><span id="l119.29">           &lt;![CDATA[</span>
<a href="#l119.30"></a><span id="l119.30">             if (this.mFaviconService) {</span>
<a href="#l119.31"></a><span id="l119.31" class="difflineminus">-              let uri = this.mIOService.newURI(aURI, null, null);</span>
<a href="#l119.32"></a><span id="l119.32" class="difflineplus">+              let uri = this.mIOService.newURI(aURI);</span>
<a href="#l119.33"></a><span id="l119.33">               this.mFaviconService.addFailedFavicon(uri);</span>
<a href="#l119.34"></a><span id="l119.34">             }</span>
<a href="#l119.35"></a><span id="l119.35">           ]]&gt;</span>
<a href="#l119.36"></a><span id="l119.36">         &lt;/body&gt;</span>
<a href="#l119.37"></a><span id="l119.37">       &lt;/method&gt;</span>
<a href="#l119.38"></a><span id="l119.38"> </span>
<a href="#l119.39"></a><span id="l119.39">       &lt;method name=&quot;getTitleForURI&quot;&gt;</span>
<a href="#l119.40"></a><span id="l119.40">         &lt;parameter name=&quot;aURI&quot;/&gt;</span>
<a href="#l119.41"></a><span id="l119.41" class="difflineat">@@ -1279,17 +1279,17 @@</span>
<a href="#l119.42"></a><span id="l119.42">                          (/(?:^|\s)alternate(?:\s|$)/i.test(rel) &amp;&amp;</span>
<a href="#l119.43"></a><span id="l119.43">                           !/(?:^|\s)stylesheet(?:\s|$)/i.test(rel) &amp;&amp;</span>
<a href="#l119.44"></a><span id="l119.44">                           /^\s*application\/(?:atom|rss)\+xml\s*$/i.test(type));</span>
<a href="#l119.45"></a><span id="l119.45"> </span>
<a href="#l119.46"></a><span id="l119.46">             if (!isFeed)</span>
<a href="#l119.47"></a><span id="l119.47">               return;</span>
<a href="#l119.48"></a><span id="l119.48"> </span>
<a href="#l119.49"></a><span id="l119.49">             try {</span>
<a href="#l119.50"></a><span id="l119.50" class="difflineminus">-              var feedUri = this.mIOService.newURI(href, targetDoc.characterSet, null);</span>
<a href="#l119.51"></a><span id="l119.51" class="difflineplus">+              var feedUri = this.mIOService.newURI(href, targetDoc.characterSet);</span>
<a href="#l119.52"></a><span id="l119.52">               this.mSecMan.checkLoadURIWithPrincipal(targetDoc.nodePrincipal, feedUri,</span>
<a href="#l119.53"></a><span id="l119.53">                                                      this.mSecMan.DISALLOW_INHERIT_PRINCIPAL);</span>
<a href="#l119.54"></a><span id="l119.54">             } catch(e) {</span>
<a href="#l119.55"></a><span id="l119.55">               return;</span>
<a href="#l119.56"></a><span id="l119.56">             }</span>
<a href="#l119.57"></a><span id="l119.57"> </span>
<a href="#l119.58"></a><span id="l119.58">             this.mTabListeners[index].addFeed(link);</span>
<a href="#l119.59"></a><span id="l119.59">             if (this.browsers[index] == this.mCurrentBrowser) {</span>
<a href="#l119.60"></a><span id="l119.60" class="difflineat">@@ -1309,17 +1309,17 @@</span>
<a href="#l119.61"></a><span id="l119.61">         &lt;/body&gt;</span>
<a href="#l119.62"></a><span id="l119.62">       &lt;/method&gt;</span>
<a href="#l119.63"></a><span id="l119.63"> </span>
<a href="#l119.64"></a><span id="l119.64">       &lt;method name=&quot;getLinkIconURI&quot;&gt;</span>
<a href="#l119.65"></a><span id="l119.65">         &lt;parameter name=&quot;aLink&quot;/&gt;</span>
<a href="#l119.66"></a><span id="l119.66">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l119.67"></a><span id="l119.67">           var targetDoc = aLink.ownerDocument;</span>
<a href="#l119.68"></a><span id="l119.68">           // Make a URI out of our href.</span>
<a href="#l119.69"></a><span id="l119.69" class="difflineminus">-          var uri = this.mIOService.newURI(aLink.href, targetDoc.characterSet, null);</span>
<a href="#l119.70"></a><span id="l119.70" class="difflineplus">+          var uri = this.mIOService.newURI(aLink.href, targetDoc.characterSet);</span>
<a href="#l119.71"></a><span id="l119.71"> </span>
<a href="#l119.72"></a><span id="l119.72">           // Verify that the load of this icon is legal.</span>
<a href="#l119.73"></a><span id="l119.73">           // Some error or special pages can load their favicon.</span>
<a href="#l119.74"></a><span id="l119.74">           // To be on the safe side, only allow chrome:// favicons.</span>
<a href="#l119.75"></a><span id="l119.75">           const re = /^about:(neterror|certerror|blocked)\?/;</span>
<a href="#l119.76"></a><span id="l119.76">           var isAllowedPage = re.test(targetDoc.documentURI);</span>
<a href="#l119.77"></a><span id="l119.77"> </span>
<a href="#l119.78"></a><span id="l119.78">           if (!isAllowedPage || !uri.schemeIs(&quot;chrome&quot;)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l120.1"></a><span id="l120.1" class="difflineminus">--- a/suite/browser/test/browser/browser_bug413915.js</span>
<a href="#l120.2"></a><span id="l120.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_bug413915.js</span>
<a href="#l120.3"></a><span id="l120.3" class="difflineat">@@ -1,12 +1,12 @@</span>
<a href="#l120.4"></a><span id="l120.4"> function test() {</span>
<a href="#l120.5"></a><span id="l120.5">   var ioserv = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;].</span>
<a href="#l120.6"></a><span id="l120.6">                getService(Components.interfaces.nsIIOService);</span>
<a href="#l120.7"></a><span id="l120.7" class="difflineminus">-  var exampleUri = ioserv.newURI(&quot;http://example.com/&quot;, null, null);</span>
<a href="#l120.8"></a><span id="l120.8" class="difflineplus">+  var exampleUri = ioserv.newURI(&quot;http://example.com/&quot;);</span>
<a href="#l120.9"></a><span id="l120.9">   var secman = Components.classes[&quot;@mozilla.org/scriptsecuritymanager;1&quot;].</span>
<a href="#l120.10"></a><span id="l120.10">                getService(Components.interfaces.nsIScriptSecurityManager);</span>
<a href="#l120.11"></a><span id="l120.11">   var principal = secman.createCodebasePrincipal(exampleUri, {});</span>
<a href="#l120.12"></a><span id="l120.12"> </span>
<a href="#l120.13"></a><span id="l120.13">   function testIsFeed(aTitle, aHref, aType, aKnown) {</span>
<a href="#l120.14"></a><span id="l120.14">     var link = { title: aTitle, href: aHref, type: aType };</span>
<a href="#l120.15"></a><span id="l120.15">     return isValidFeed(link, principal, aKnown);</span>
<a href="#l120.16"></a><span id="l120.16">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l121.1"></a><span id="l121.1" class="difflineminus">--- a/suite/browser/test/browser/browser_bug623155.js</span>
<a href="#l121.2"></a><span id="l121.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_bug623155.js</span>
<a href="#l121.3"></a><span id="l121.3" class="difflineat">@@ -2,22 +2,22 @@</span>
<a href="#l121.4"></a><span id="l121.4">    http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l121.5"></a><span id="l121.5"> </span>
<a href="#l121.6"></a><span id="l121.6"> const REDIRECT_FROM = &quot;https://example.com/browser/suite/browser/test/browser/&quot; +</span>
<a href="#l121.7"></a><span id="l121.7">                       &quot;redirect_bug623155.sjs&quot;;</span>
<a href="#l121.8"></a><span id="l121.8"> </span>
<a href="#l121.9"></a><span id="l121.9"> const REDIRECT_TO = &quot;https://www.bank1.com/&quot;; // Bad-cert host.</span>
<a href="#l121.10"></a><span id="l121.10"> </span>
<a href="#l121.11"></a><span id="l121.11"> function isRedirectedURISpec(aURISpec) {</span>
<a href="#l121.12"></a><span id="l121.12" class="difflineminus">-  return isRedirectedURI(Services.io.newURI(aURISpec, null, null));</span>
<a href="#l121.13"></a><span id="l121.13" class="difflineplus">+  return isRedirectedURI(Services.io.newURI(aURISpec));</span>
<a href="#l121.14"></a><span id="l121.14"> }</span>
<a href="#l121.15"></a><span id="l121.15"> </span>
<a href="#l121.16"></a><span id="l121.16"> function isRedirectedURI(aURI) {</span>
<a href="#l121.17"></a><span id="l121.17">   // Compare only their before-hash portion.</span>
<a href="#l121.18"></a><span id="l121.18" class="difflineminus">-  return Services.io.newURI(REDIRECT_TO, null, null)</span>
<a href="#l121.19"></a><span id="l121.19" class="difflineplus">+  return Services.io.newURI(REDIRECT_TO)</span>
<a href="#l121.20"></a><span id="l121.20">                  .equalsExceptRef(aURI);</span>
<a href="#l121.21"></a><span id="l121.21"> }</span>
<a href="#l121.22"></a><span id="l121.22"> </span>
<a href="#l121.23"></a><span id="l121.23"> /*</span>
<a href="#l121.24"></a><span id="l121.24">    Test.</span>
<a href="#l121.25"></a><span id="l121.25"> </span>
<a href="#l121.26"></a><span id="l121.26"> 1. Load</span>
<a href="#l121.27"></a><span id="l121.27"> https://example.com/browser/browser/base/content/test/redirect_bug623155.sjs#BG</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l122.1"></a><span id="l122.1" class="difflineminus">--- a/suite/common/bindings/notification.xml</span>
<a href="#l122.2"></a><span id="l122.2" class="difflineplus">+++ b/suite/common/bindings/notification.xml</span>
<a href="#l122.3"></a><span id="l122.3" class="difflineat">@@ -1161,17 +1161,17 @@</span>
<a href="#l122.4"></a><span id="l122.4">             var host = aURI.asciiHost;</span>
<a href="#l122.5"></a><span id="l122.5">             var usage = 0;</span>
<a href="#l122.6"></a><span id="l122.6"> </span>
<a href="#l122.7"></a><span id="l122.7">             var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l122.8"></a><span id="l122.8">                                       .getService(Components.interfaces.nsIIOService);</span>
<a href="#l122.9"></a><span id="l122.9">             var cacheService = Components.classes[&quot;@mozilla.org/network/application-cache-service;1&quot;]</span>
<a href="#l122.10"></a><span id="l122.10">                                          .getService(Components.interfaces.nsIApplicationCacheService);</span>
<a href="#l122.11"></a><span id="l122.11">             cacheService.getGroups().forEach(function(aGroup) {</span>
<a href="#l122.12"></a><span id="l122.12" class="difflineminus">-              var uri = ioService.newURI(aGroup, null, null);</span>
<a href="#l122.13"></a><span id="l122.13" class="difflineplus">+              var uri = ioService.newURI(aGroup);</span>
<a href="#l122.14"></a><span id="l122.14">               if (uri.asciiHost == host)</span>
<a href="#l122.15"></a><span id="l122.15">                 usage += cacheService.getActiveCache(aGroup).usage;</span>
<a href="#l122.16"></a><span id="l122.16">             });</span>
<a href="#l122.17"></a><span id="l122.17">             var warnQuota = this._prefs.getIntPref(&quot;offline-apps.quota.warn&quot;);</span>
<a href="#l122.18"></a><span id="l122.18">             if (usage &lt; warnQuota * 1024)</span>
<a href="#l122.19"></a><span id="l122.19">               return;</span>
<a href="#l122.20"></a><span id="l122.20"> </span>
<a href="#l122.21"></a><span id="l122.21">             var message = this._stringBundle.formatStringFromName(&quot;offlineApps.quota&quot;, [host, warnQuota / 1024], 2);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l123.1"></a><span id="l123.1" class="difflineminus">--- a/suite/common/bookmarks/bookmarksManager.js</span>
<a href="#l123.2"></a><span id="l123.2" class="difflineplus">+++ b/suite/common/bookmarks/bookmarksManager.js</span>
<a href="#l123.3"></a><span id="l123.3" class="difflineat">@@ -716,17 +716,17 @@ var PlacesOrganizer = {</span>
<a href="#l123.4"></a><span id="l123.4">     // Get the place: uri for the query.</span>
<a href="#l123.5"></a><span id="l123.5">     // If the advanced query builder is showing, use that.</span>
<a href="#l123.6"></a><span id="l123.6">     var options = this.getCurrentOptions();</span>
<a href="#l123.7"></a><span id="l123.7">     var queries = this.getCurrentQueries();</span>
<a href="#l123.8"></a><span id="l123.8"> </span>
<a href="#l123.9"></a><span id="l123.9">     var placeSpec = PlacesUtils.history.queriesToQueryString(queries,</span>
<a href="#l123.10"></a><span id="l123.10">                                                              queries.length,</span>
<a href="#l123.11"></a><span id="l123.11">                                                              options);</span>
<a href="#l123.12"></a><span id="l123.12" class="difflineminus">-    var placeURI = Services.io.newURI(placeSpec, null, null);</span>
<a href="#l123.13"></a><span id="l123.13" class="difflineplus">+    var placeURI = Services.io.newURI(placeSpec);</span>
<a href="#l123.14"></a><span id="l123.14"> </span>
<a href="#l123.15"></a><span id="l123.15">     // Prompt the user for a name for the query.</span>
<a href="#l123.16"></a><span id="l123.16">     // XXX - using prompt service for now; will need to make</span>
<a href="#l123.17"></a><span id="l123.17">     // a real dialog and localize when we're sure this is the UI we want.</span>
<a href="#l123.18"></a><span id="l123.18">     var title = PlacesUIUtils.getString(&quot;saveSearch.title&quot;);</span>
<a href="#l123.19"></a><span id="l123.19">     var inputLabel = PlacesUIUtils.getString(&quot;saveSearch.inputLabel&quot;);</span>
<a href="#l123.20"></a><span id="l123.20">     var defaultText = PlacesUIUtils.getString(&quot;saveSearch.inputDefaultText&quot;);</span>
<a href="#l123.21"></a><span id="l123.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l124.1"></a><span id="l124.1" class="difflineminus">--- a/suite/common/bookmarks/editBookmarkOverlay.js</span>
<a href="#l124.2"></a><span id="l124.2" class="difflineplus">+++ b/suite/common/bookmarks/editBookmarkOverlay.js</span>
<a href="#l124.3"></a><span id="l124.3" class="difflineat">@@ -913,17 +913,17 @@ var gEditItemOverlay = {</span>
<a href="#l124.4"></a><span id="l124.4">         namePicker.editor.transactionManager.clear();</span>
<a href="#l124.5"></a><span id="l124.5">       }</span>
<a href="#l124.6"></a><span id="l124.6">       break;</span>
<a href="#l124.7"></a><span id="l124.7">     case &quot;uri&quot;:</span>
<a href="#l124.8"></a><span id="l124.8">       var locationField = this._element(&quot;locationField&quot;);</span>
<a href="#l124.9"></a><span id="l124.9">       if (locationField.value != aValue) {</span>
<a href="#l124.10"></a><span id="l124.10">         this._uri = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l124.11"></a><span id="l124.11">                               .getService(Components.interfaces.nsIIOService)</span>
<a href="#l124.12"></a><span id="l124.12" class="difflineminus">-                              .newURI(aValue, null, null);</span>
<a href="#l124.13"></a><span id="l124.13" class="difflineplus">+                              .newURI(aValue);</span>
<a href="#l124.14"></a><span id="l124.14">         this._initTextField(&quot;locationField&quot;, this._uri.spec);</span>
<a href="#l124.15"></a><span id="l124.15">         this._initNamePicker();</span>
<a href="#l124.16"></a><span id="l124.16">         this._initTextField(&quot;tagsField&quot;,</span>
<a href="#l124.17"></a><span id="l124.17">                              PlacesUtils.tagging</span>
<a href="#l124.18"></a><span id="l124.18">                                         .getTagsForURI(this._uri).join(&quot;, &quot;),</span>
<a href="#l124.19"></a><span id="l124.19">                             false);</span>
<a href="#l124.20"></a><span id="l124.20">         this._rebuildTagsSelectorList();</span>
<a href="#l124.21"></a><span id="l124.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l125.1"></a><span id="l125.1" class="difflineminus">--- a/suite/common/dataman/dataman.js</span>
<a href="#l125.2"></a><span id="l125.2" class="difflineplus">+++ b/suite/common/dataman/dataman.js</span>
<a href="#l125.3"></a><span id="l125.3" class="difflineat">@@ -1402,17 +1402,17 @@ var gPerms = {</span>
<a href="#l125.4"></a><span id="l125.4">     // Maybe use</span>
<a href="#l125.5"></a><span id="l125.5">     // principal = Services.scriptSecurityManager.createCodebasePrincipal(uri, {})</span>
<a href="#l125.6"></a><span id="l125.6">     // but this might be undocumented?</span>
<a href="#l125.7"></a><span id="l125.7">     if (permElem.principal == null)</span>
<a href="#l125.8"></a><span id="l125.8">     {</span>
<a href="#l125.9"></a><span id="l125.9">       // This can currently fail for some schemes like 'file://'.</span>
<a href="#l125.10"></a><span id="l125.10">       // Maybe fix it later if needed.</span>
<a href="#l125.11"></a><span id="l125.11">       try {</span>
<a href="#l125.12"></a><span id="l125.12" class="difflineminus">-        let uri = Services.io.newURI(new URL(aOrigin), null, null);</span>
<a href="#l125.13"></a><span id="l125.13" class="difflineplus">+        let uri = Services.io.newURI(new URL(aOrigin));</span>
<a href="#l125.14"></a><span id="l125.14">         Services.perms.add(uri, aType, aValue);</span>
<a href="#l125.15"></a><span id="l125.15">       }</span>
<a href="#l125.16"></a><span id="l125.16">       catch (e) {</span>
<a href="#l125.17"></a><span id="l125.17">         gDataman.debugError(&quot;New Permission could not be added &quot; +</span>
<a href="#l125.18"></a><span id="l125.18">                             permElem.origin + &quot; &quot; +</span>
<a href="#l125.19"></a><span id="l125.19">                             permElem.type</span>
<a href="#l125.20"></a><span id="l125.20">                            );</span>
<a href="#l125.21"></a><span id="l125.21">         }</span>
<a href="#l125.22"></a><span id="l125.22" class="difflineat">@@ -2435,17 +2435,17 @@ var gStorage = {</span>
<a href="#l125.23"></a><span id="l125.23"> </span>
<a href="#l125.24"></a><span id="l125.24">   loadList: function storage_loadList() {</span>
<a href="#l125.25"></a><span id="l125.25">     this.storages = [];</span>
<a href="#l125.26"></a><span id="l125.26"> </span>
<a href="#l125.27"></a><span id="l125.27">     // Load appCache entries.</span>
<a href="#l125.28"></a><span id="l125.28">     let groups = gLocSvc.appcache.getGroups();</span>
<a href="#l125.29"></a><span id="l125.29">     gDataman.debugMsg(&quot;Loading &quot; + groups.length + &quot; appcache entries&quot;);</span>
<a href="#l125.30"></a><span id="l125.30">     for (let lGroup of groups) {</span>
<a href="#l125.31"></a><span id="l125.31" class="difflineminus">-      let uri = Services.io.newURI(lGroup, null, null);</span>
<a href="#l125.32"></a><span id="l125.32" class="difflineplus">+      let uri = Services.io.newURI(lGroup);</span>
<a href="#l125.33"></a><span id="l125.33">       let cache = gLocSvc.appcache.getActiveCache(lGroup);</span>
<a href="#l125.34"></a><span id="l125.34">       this.storages.push({host: uri.host,</span>
<a href="#l125.35"></a><span id="l125.35">                           rawHost: uri.host,</span>
<a href="#l125.36"></a><span id="l125.36">                           type: &quot;appCache&quot;,</span>
<a href="#l125.37"></a><span id="l125.37">                           size: cache.usage,</span>
<a href="#l125.38"></a><span id="l125.38">                           groupID: lGroup});</span>
<a href="#l125.39"></a><span id="l125.39">     }</span>
<a href="#l125.40"></a><span id="l125.40"> </span>
<a href="#l125.41"></a><span id="l125.41" class="difflineat">@@ -2534,17 +2534,17 @@ var gStorage = {</span>
<a href="#l125.42"></a><span id="l125.42">       let files = dir.directoryEntries</span>
<a href="#l125.43"></a><span id="l125.43">                      .QueryInterface(Components.interfaces.nsIDirectoryEnumerator);</span>
<a href="#l125.44"></a><span id="l125.44">       gDataman.debugMsg(&quot;Loading IndexedDB entries&quot;);</span>
<a href="#l125.45"></a><span id="l125.45"> </span>
<a href="#l125.46"></a><span id="l125.46">       while (files.hasMoreElements()) {</span>
<a href="#l125.47"></a><span id="l125.47">         let file = files.nextFile;</span>
<a href="#l125.48"></a><span id="l125.48">         // Convert directory name to a URI.</span>
<a href="#l125.49"></a><span id="l125.49">         let host = file.leafName.replace(/\+\+\+/, &quot;://&quot;).replace(/\+(\d+)$/, &quot;:$1&quot;);</span>
<a href="#l125.50"></a><span id="l125.50" class="difflineminus">-        let uri = Services.io.newURI(host, null, null);</span>
<a href="#l125.51"></a><span id="l125.51" class="difflineplus">+        let uri = Services.io.newURI(host);</span>
<a href="#l125.52"></a><span id="l125.52">         this.storages.push({host: host,</span>
<a href="#l125.53"></a><span id="l125.53">                             rawHost: uri.host,</span>
<a href="#l125.54"></a><span id="l125.54">                             type: &quot;indexedDB&quot;,</span>
<a href="#l125.55"></a><span id="l125.55">                             size: 0,</span>
<a href="#l125.56"></a><span id="l125.56">                             path: file.path});</span>
<a href="#l125.57"></a><span id="l125.57">         // Get IndexedDB usage (DB size)</span>
<a href="#l125.58"></a><span id="l125.58">         // See http://mxr.mozilla.org/mozilla-central/source/dom/indexedDB/nsIIndexedDatabaseManager.idl?mark=39-52#39</span>
<a href="#l125.59"></a><span id="l125.59">         gLocSvc.idxdbmgr.getUsageForURI(uri,</span>
<a href="#l125.60"></a><span id="l125.60" class="difflineat">@@ -2675,25 +2675,25 @@ var gStorage = {</span>
<a href="#l125.61"></a><span id="l125.61">     switch (aStorageItem.type) {</span>
<a href="#l125.62"></a><span id="l125.62">       case &quot;appCache&quot;:</span>
<a href="#l125.63"></a><span id="l125.63">         gLocSvc.appcache.getActiveCache(aStorageItem.groupID).discard();</span>
<a href="#l125.64"></a><span id="l125.64">         break;</span>
<a href="#l125.65"></a><span id="l125.65">       case &quot;localStorage&quot;:</span>
<a href="#l125.66"></a><span id="l125.66">         let testHost = aStorageItem.host;</span>
<a href="#l125.67"></a><span id="l125.67">         if (!/:/.test(testHost))</span>
<a href="#l125.68"></a><span id="l125.68">           testHost = &quot;http://&quot; + testHost;</span>
<a href="#l125.69"></a><span id="l125.69" class="difflineminus">-        let uri = Services.io.newURI(testHost, null, null);</span>
<a href="#l125.70"></a><span id="l125.70" class="difflineplus">+        let uri = Services.io.newURI(testHost);</span>
<a href="#l125.71"></a><span id="l125.71">         let principal = gLocSvc.ssm.getCodebasePrincipal(uri);</span>
<a href="#l125.72"></a><span id="l125.72">         let storage = gLocSvc.domstoremgr</span>
<a href="#l125.73"></a><span id="l125.73">                              .getLocalStorageForPrincipal(principal, &quot;&quot;);</span>
<a href="#l125.74"></a><span id="l125.74">         storage.clear();</span>
<a href="#l125.75"></a><span id="l125.75">         break;</span>
<a href="#l125.76"></a><span id="l125.76">       case &quot;indexedDB&quot;:</span>
<a href="#l125.77"></a><span id="l125.77">         gLocSvc.idxdbmgr.clearDatabasesForURI(</span>
<a href="#l125.78"></a><span id="l125.78" class="difflineminus">-            Services.io.newURI(aStorageItem.host, null, null));</span>
<a href="#l125.79"></a><span id="l125.79" class="difflineplus">+            Services.io.newURI(aStorageItem.host));</span>
<a href="#l125.80"></a><span id="l125.80">         break;</span>
<a href="#l125.81"></a><span id="l125.81">     }</span>
<a href="#l125.82"></a><span id="l125.82">   },</span>
<a href="#l125.83"></a><span id="l125.83"> </span>
<a href="#l125.84"></a><span id="l125.84">   updateContext: function storage_updateContext() {</span>
<a href="#l125.85"></a><span id="l125.85">     document.getElementById(&quot;storage-context-remove&quot;).disabled =</span>
<a href="#l125.86"></a><span id="l125.86">       this.removeButton.disabled;</span>
<a href="#l125.87"></a><span id="l125.87">     document.getElementById(&quot;storage-context-selectall&quot;).disabled =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l126.1"></a><span id="l126.1" class="difflineminus">--- a/suite/common/dataman/tests/browser_dataman_basics.js</span>
<a href="#l126.2"></a><span id="l126.2" class="difflineplus">+++ b/suite/common/dataman/tests/browser_dataman_basics.js</span>
<a href="#l126.3"></a><span id="l126.3" class="difflineat">@@ -28,17 +28,17 @@ function test() {</span>
<a href="#l126.4"></a><span id="l126.4">   // xn--hxajbheg2az3al.xn--jxalpdlp</span>
<a href="#l126.5"></a><span id="l126.5">   // We should not touch those permissions so other tests can run, which means</span>
<a href="#l126.6"></a><span id="l126.6">   // we should avoid using those domains altogether as we can't remove them.</span>
<a href="#l126.7"></a><span id="l126.7"> </span>
<a href="#l126.8"></a><span id="l126.8">   let now_epoch = parseInt(Date.now() / 1000);</span>
<a href="#l126.9"></a><span id="l126.9"> </span>
<a href="#l126.10"></a><span id="l126.10">   // Add dummy permission for getpersonas.com, less work (compared to rewriting</span>
<a href="#l126.11"></a><span id="l126.11">   // the test to work without getpersonas.com)</span>
<a href="#l126.12"></a><span id="l126.12" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://getpersonas.com/&quot;, null, null),</span>
<a href="#l126.13"></a><span id="l126.13" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://getpersonas.com/&quot;),</span>
<a href="#l126.14"></a><span id="l126.14">                      &quot;install&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.15"></a><span id="l126.15"> </span>
<a href="#l126.16"></a><span id="l126.16">   // Add cookie: not secure, non-HTTPOnly, session</span>
<a href="#l126.17"></a><span id="l126.17">   Services.cookies.add(&quot;bar.geckoisgecko.org&quot;, &quot;&quot;, &quot;name0&quot;, &quot;value0&quot;,</span>
<a href="#l126.18"></a><span id="l126.18">                        false, false, true, now_epoch + 600, {});</span>
<a href="#l126.19"></a><span id="l126.19">   // Add cookie: not secure, HTTPOnly, session</span>
<a href="#l126.20"></a><span id="l126.20">   Services.cookies.add(&quot;foo.geckoisgecko.org&quot;, &quot;&quot;, &quot;name1&quot;, &quot;value1&quot;,</span>
<a href="#l126.21"></a><span id="l126.21">                        false, true, true, now_epoch + 600, {});</span>
<a href="#l126.22"></a><span id="l126.22" class="difflineat">@@ -317,39 +317,39 @@ function test_cookies_panel(aWin) {</span>
<a href="#l126.23"></a><span id="l126.23"> },</span>
<a href="#l126.24"></a><span id="l126.24"> </span>
<a href="#l126.25"></a><span id="l126.25"> function test_permissions_panel(aWin) {</span>
<a href="#l126.26"></a><span id="l126.26">   aWin.gDomains.tree.view.selection.select(8);</span>
<a href="#l126.27"></a><span id="l126.27">   is(aWin.gDomains.selectedDomain.title, &quot;getpersonas.com&quot;,</span>
<a href="#l126.28"></a><span id="l126.28">      &quot;For permissions tests, correct domain is selected&quot;);</span>
<a href="#l126.29"></a><span id="l126.29">   is(aWin.gTabs.activePanel, &quot;permissionsPanel&quot;,</span>
<a href="#l126.30"></a><span id="l126.30">      &quot;Permissions panel is selected&quot;);</span>
<a href="#l126.31"></a><span id="l126.31" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://cookie.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.32"></a><span id="l126.32" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://cookie.getpersonas.com/&quot;),</span>
<a href="#l126.33"></a><span id="l126.33">                      &quot;cookie&quot;, Components.interfaces.nsICookiePermission.ACCESS_SESSION);</span>
<a href="#l126.34"></a><span id="l126.34" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://cookie2.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.35"></a><span id="l126.35" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://cookie2.getpersonas.com/&quot;),</span>
<a href="#l126.36"></a><span id="l126.36">                      &quot;cookie&quot;, Services.perms.DENY_ACTION);</span>
<a href="#l126.37"></a><span id="l126.37" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://geo.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.38"></a><span id="l126.38" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://geo.getpersonas.com/&quot;),</span>
<a href="#l126.39"></a><span id="l126.39">                      &quot;geo&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.40"></a><span id="l126.40" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://image.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.41"></a><span id="l126.41" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://image.getpersonas.com/&quot;),</span>
<a href="#l126.42"></a><span id="l126.42">                      &quot;image&quot;, Services.perms.DENY_ACTION);</span>
<a href="#l126.43"></a><span id="l126.43" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://indexedDB.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.44"></a><span id="l126.44" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://indexedDB.getpersonas.com/&quot;),</span>
<a href="#l126.45"></a><span id="l126.45">                      &quot;indexedDB&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.46"></a><span id="l126.46" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://install.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.47"></a><span id="l126.47" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://install.getpersonas.com/&quot;),</span>
<a href="#l126.48"></a><span id="l126.48">                      &quot;install&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.49"></a><span id="l126.49" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://offline.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.50"></a><span id="l126.50" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://offline.getpersonas.com/&quot;),</span>
<a href="#l126.51"></a><span id="l126.51">                      &quot;offline-app&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.52"></a><span id="l126.52" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://popup.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.53"></a><span id="l126.53" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://popup.getpersonas.com/&quot;),</span>
<a href="#l126.54"></a><span id="l126.54">                      &quot;popup&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.55"></a><span id="l126.55" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://stsuse.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.56"></a><span id="l126.56" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://stsuse.getpersonas.com/&quot;),</span>
<a href="#l126.57"></a><span id="l126.57">                      &quot;sts/use&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.58"></a><span id="l126.58" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://stssubd.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.59"></a><span id="l126.59" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://stssubd.getpersonas.com/&quot;),</span>
<a href="#l126.60"></a><span id="l126.60">                      &quot;sts/subd&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.61"></a><span id="l126.61" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://test.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.62"></a><span id="l126.62" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://test.getpersonas.com/&quot;),</span>
<a href="#l126.63"></a><span id="l126.63">                      &quot;test&quot;, Services.perms.DENY_ACTION);</span>
<a href="#l126.64"></a><span id="l126.64" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://xul.getpersonas.com/&quot;, null, null),</span>
<a href="#l126.65"></a><span id="l126.65" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://xul.getpersonas.com/&quot;),</span>
<a href="#l126.66"></a><span id="l126.66">                      &quot;allowXULXBL&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.67"></a><span id="l126.67">   Services.logins.setLoginSavingEnabled(&quot;password.getpersonas.com&quot;, false);</span>
<a href="#l126.68"></a><span id="l126.68">   is(aWin.gPerms.list.children.length, 14,</span>
<a href="#l126.69"></a><span id="l126.69">      &quot;The correct number of permissions is displayed in the list&quot;);</span>
<a href="#l126.70"></a><span id="l126.70">   for (let i = 1; i &lt; aWin.gPerms.list.children.length; i++) {</span>
<a href="#l126.71"></a><span id="l126.71">     let perm = aWin.gPerms.list.children[i];</span>
<a href="#l126.72"></a><span id="l126.72">     switch (perm.type) {</span>
<a href="#l126.73"></a><span id="l126.73">       case &quot;allowXULXBL&quot;:</span>
<a href="#l126.74"></a><span id="l126.74" class="difflineat">@@ -773,17 +773,17 @@ function test_idn(aWin) {</span>
<a href="#l126.75"></a><span id="l126.75">   is(aWin.gTabs.activePanel, &quot;permissionsPanel&quot;,</span>
<a href="#l126.76"></a><span id="l126.76">      &quot;After deleting, correctly switched back to permissions panel&quot;);</span>
<a href="#l126.77"></a><span id="l126.77"> </span>
<a href="#l126.78"></a><span id="l126.78">   Services.obs.notifyObservers(window, TEST_DONE, null);</span>
<a href="#l126.79"></a><span id="l126.79"> },</span>
<a href="#l126.80"></a><span id="l126.80"> </span>
<a href="#l126.81"></a><span id="l126.81"> function test_storage_load(aWin) {</span>
<a href="#l126.82"></a><span id="l126.82">   // Load the page that fills in several web storage entries.</span>
<a href="#l126.83"></a><span id="l126.83" class="difflineminus">-  Services.perms.add(Services.io.newURI(&quot;http://mochi.test:8888/&quot;, null, null),</span>
<a href="#l126.84"></a><span id="l126.84" class="difflineplus">+  Services.perms.add(Services.io.newURI(&quot;http://mochi.test:8888/&quot;),</span>
<a href="#l126.85"></a><span id="l126.85">                      &quot;offline-app&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l126.86"></a><span id="l126.86"> </span>
<a href="#l126.87"></a><span id="l126.87">   // Get the http address from the current chrome test path</span>
<a href="#l126.88"></a><span id="l126.88">   let rootDir = getRootDirectory(gTestPath).replace(&quot;chrome://mochitests/content/&quot;, &quot;http://mochi.test:8888/&quot;);</span>
<a href="#l126.89"></a><span id="l126.89">   let testURL = rootDir + &quot;dataman_storage.html&quot;;</span>
<a href="#l126.90"></a><span id="l126.90">   let storagetab = gBrowser.addTab(testURL);</span>
<a href="#l126.91"></a><span id="l126.91">   let stWin = storagetab.linkedBrowser.contentWindow.wrappedJSObject;</span>
<a href="#l126.92"></a><span id="l126.92">   let dmStorageListener = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l127.1"></a><span id="l127.1" class="difflineminus">--- a/suite/common/downloads/downloadmanager.js</span>
<a href="#l127.2"></a><span id="l127.2" class="difflineplus">+++ b/suite/common/downloads/downloadmanager.js</span>
<a href="#l127.3"></a><span id="l127.3" class="difflineat">@@ -365,17 +365,17 @@ function handlePaste() {</span>
<a href="#l127.4"></a><span id="l127.4">     let data = {};</span>
<a href="#l127.5"></a><span id="l127.5">     trans.getAnyTransferData({}, data, {});</span>
<a href="#l127.6"></a><span id="l127.6">     let [url, name] = data.value.QueryInterface(Components.interfaces</span>
<a href="#l127.7"></a><span id="l127.7">                                 .nsISupportsString).data.split(&quot;\n&quot;);</span>
<a href="#l127.8"></a><span id="l127.8"> </span>
<a href="#l127.9"></a><span id="l127.9">     if (!url)</span>
<a href="#l127.10"></a><span id="l127.10">       return;</span>
<a href="#l127.11"></a><span id="l127.11"> </span>
<a href="#l127.12"></a><span id="l127.12" class="difflineminus">-    let uri = Services.io.newURI(url, null, null);</span>
<a href="#l127.13"></a><span id="l127.13" class="difflineplus">+    let uri = Services.io.newURI(url);</span>
<a href="#l127.14"></a><span id="l127.14"> </span>
<a href="#l127.15"></a><span id="l127.15">     saveURL(uri.spec, name || uri.spec, null, true, true, null, document);</span>
<a href="#l127.16"></a><span id="l127.16">   } catch (ex) {}</span>
<a href="#l127.17"></a><span id="l127.17"> }</span>
<a href="#l127.18"></a><span id="l127.18"> </span>
<a href="#l127.19"></a><span id="l127.19"> var gDownloadObserver = {</span>
<a href="#l127.20"></a><span id="l127.20">   observe: function(aSubject, aTopic, aData) {</span>
<a href="#l127.21"></a><span id="l127.21">     switch (aTopic) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l128.1"></a><span id="l128.1" class="difflineminus">--- a/suite/common/history/history.js</span>
<a href="#l128.2"></a><span id="l128.2" class="difflineplus">+++ b/suite/common/history/history.js</span>
<a href="#l128.3"></a><span id="l128.3" class="difflineat">@@ -53,17 +53,17 @@ function historyOnSelect()</span>
<a href="#l128.4"></a><span id="l128.4">   gLastDomain = null;</span>
<a href="#l128.5"></a><span id="l128.5">   var url = &quot;&quot;;</span>
<a href="#l128.6"></a><span id="l128.6"> </span>
<a href="#l128.7"></a><span id="l128.7">   var selectedNode = gHistoryTree.selectedNode;</span>
<a href="#l128.8"></a><span id="l128.8">   if (selectedNode) {</span>
<a href="#l128.9"></a><span id="l128.9">     if (PlacesUtils.nodeIsURI(selectedNode)) {</span>
<a href="#l128.10"></a><span id="l128.10">       try {</span>
<a href="#l128.11"></a><span id="l128.11">         url = selectedNode.uri;</span>
<a href="#l128.12"></a><span id="l128.12" class="difflineminus">-        gLastHostname = Services.io.newURI(url, null, null).host;</span>
<a href="#l128.13"></a><span id="l128.13" class="difflineplus">+        gLastHostname = Services.io.newURI(url).host;</span>
<a href="#l128.14"></a><span id="l128.14">       } catch (e) {}</span>
<a href="#l128.15"></a><span id="l128.15">     } else if (PlacesUtils.nodeIsHost(selectedNode)) {</span>
<a href="#l128.16"></a><span id="l128.16">       gLastHostname = selectedNode.title;</span>
<a href="#l128.17"></a><span id="l128.17">     }</span>
<a href="#l128.18"></a><span id="l128.18">     if (gLastHostname) {</span>
<a href="#l128.19"></a><span id="l128.19">       try {</span>
<a href="#l128.20"></a><span id="l128.20">         gLastDomain = Services.eTLD.getBaseDomainFromHost(gLastHostname);</span>
<a href="#l128.21"></a><span id="l128.21">       } catch (e) {}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l129.1"></a><span id="l129.1" class="difflineminus">--- a/suite/common/nsContextMenu.js</span>
<a href="#l129.2"></a><span id="l129.2" class="difflineplus">+++ b/suite/common/nsContextMenu.js</span>
<a href="#l129.3"></a><span id="l129.3" class="difflineat">@@ -278,17 +278,17 @@ nsContextMenu.prototype = {</span>
<a href="#l129.4"></a><span id="l129.4">     this.setItemAttr(&quot;context-viewbgimage&quot;, &quot;disabled&quot;, this.hasBGImage ? null : &quot;true&quot;);</span>
<a href="#l129.5"></a><span id="l129.5"> </span>
<a href="#l129.6"></a><span id="l129.6">     // Hide Block and Unblock menuitems.</span>
<a href="#l129.7"></a><span id="l129.7">     this.showItem(&quot;context-blockimage&quot;, false);</span>
<a href="#l129.8"></a><span id="l129.8">     this.showItem(&quot;context-unblockimage&quot;, false);</span>
<a href="#l129.9"></a><span id="l129.9"> </span>
<a href="#l129.10"></a><span id="l129.10">     // Block image depends on whether an image was clicked on.</span>
<a href="#l129.11"></a><span id="l129.11">     if (this.onImage) {</span>
<a href="#l129.12"></a><span id="l129.12" class="difflineminus">-      var uri = Services.io.newURI(this.mediaURL, null, null);</span>
<a href="#l129.13"></a><span id="l129.13" class="difflineplus">+      var uri = Services.io.newURI(this.mediaURL);</span>
<a href="#l129.14"></a><span id="l129.14">       if (uri instanceof Components.interfaces.nsIURL &amp;&amp; uri.host) {</span>
<a href="#l129.15"></a><span id="l129.15">         var serverLabel = uri.host;</span>
<a href="#l129.16"></a><span id="l129.16">         // Limit length to max 15 characters.</span>
<a href="#l129.17"></a><span id="l129.17">         serverLabel = serverLabel.replace(/^www\./i, &quot;&quot;);</span>
<a href="#l129.18"></a><span id="l129.18">         if (serverLabel.length &gt; 15)</span>
<a href="#l129.19"></a><span id="l129.19">           serverLabel = serverLabel.substr(0, 15) + this.ellipsis;</span>
<a href="#l129.20"></a><span id="l129.20"> </span>
<a href="#l129.21"></a><span id="l129.21">         // Set label and accesskey for appropriate action and unhide menuitem.</span>
<a href="#l129.22"></a><span id="l129.22" class="difflineat">@@ -830,17 +830,17 @@ nsContextMenu.prototype = {</span>
<a href="#l129.23"></a><span id="l129.23">   // Unblock popup windows</span>
<a href="#l129.24"></a><span id="l129.24">   allowPopupWindows: function() {</span>
<a href="#l129.25"></a><span id="l129.25">     Services.perms.addFromPrincipal(this.popupPrincipal, &quot;popup&quot;,</span>
<a href="#l129.26"></a><span id="l129.26">                                     Services.perms.ALLOW_ACTION);</span>
<a href="#l129.27"></a><span id="l129.27">   },</span>
<a href="#l129.28"></a><span id="l129.28"> </span>
<a href="#l129.29"></a><span id="l129.29">   // Block/Unblock image from loading in the future.</span>
<a href="#l129.30"></a><span id="l129.30">   toggleImageBlocking: function(aBlock) {</span>
<a href="#l129.31"></a><span id="l129.31" class="difflineminus">-  const uri = Services.io.newURI(this.mediaURL, null, null);</span>
<a href="#l129.32"></a><span id="l129.32" class="difflineplus">+  const uri = Services.io.newURI(this.mediaURL);</span>
<a href="#l129.33"></a><span id="l129.33">   if (aBlock)</span>
<a href="#l129.34"></a><span id="l129.34">     Services.perms.add(uri, &quot;image&quot;, Services.perms.DENY_ACTION);</span>
<a href="#l129.35"></a><span id="l129.35">   else</span>
<a href="#l129.36"></a><span id="l129.36">     Services.perms.remove(uri, &quot;image&quot;);</span>
<a href="#l129.37"></a><span id="l129.37">   },</span>
<a href="#l129.38"></a><span id="l129.38"> </span>
<a href="#l129.39"></a><span id="l129.39">   // Open linked-to URL in a new tab.</span>
<a href="#l129.40"></a><span id="l129.40">   openLinkInTab: function(aEvent) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l130.1"></a><span id="l130.1" class="difflineminus">--- a/suite/common/permissions/cookieViewer.js</span>
<a href="#l130.2"></a><span id="l130.2" class="difflineplus">+++ b/suite/common/permissions/cookieViewer.js</span>
<a href="#l130.3"></a><span id="l130.3" class="difflineat">@@ -485,17 +485,17 @@ function setCookiePermissions(action) {</span>
<a href="#l130.4"></a><span id="l130.4">     window.alert(cookieBundle.getString(&quot;allowedURLSchemes&quot;));</span>
<a href="#l130.5"></a><span id="l130.5">     return;</span>
<a href="#l130.6"></a><span id="l130.6">   }</span>
<a href="#l130.7"></a><span id="l130.7"> </span>
<a href="#l130.8"></a><span id="l130.8">   var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l130.9"></a><span id="l130.9">                             .getService(Components.interfaces.nsIIOService);</span>
<a href="#l130.10"></a><span id="l130.10"> </span>
<a href="#l130.11"></a><span id="l130.11">   try {</span>
<a href="#l130.12"></a><span id="l130.12" class="difflineminus">-    var uri = ioService.newURI(url, null, null);</span>
<a href="#l130.13"></a><span id="l130.13" class="difflineplus">+    var uri = ioService.newURI(url);</span>
<a href="#l130.14"></a><span id="l130.14">   } catch (e) {</span>
<a href="#l130.15"></a><span id="l130.15">     // show an error if URI can not be constructed or adding it failed</span>
<a href="#l130.16"></a><span id="l130.16">     window.alert(cookieBundle.getString(&quot;errorAddPermission&quot;));</span>
<a href="#l130.17"></a><span id="l130.17">     return;</span>
<a href="#l130.18"></a><span id="l130.18">   }</span>
<a href="#l130.19"></a><span id="l130.19">   // only allow a few schemes here</span>
<a href="#l130.20"></a><span id="l130.20">   // others like file:// would produce an invalid entry in the database</span>
<a href="#l130.21"></a><span id="l130.21">   if (uri.scheme != 'http'  &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l131.1"></a><span id="l131.1" class="difflineminus">--- a/suite/common/permissions/permissionsManager.js</span>
<a href="#l131.2"></a><span id="l131.2" class="difflineplus">+++ b/suite/common/permissions/permissionsManager.js</span>
<a href="#l131.3"></a><span id="l131.3" class="difflineat">@@ -212,17 +212,17 @@ function finalizeChanges() {</span>
<a href="#l131.4"></a><span id="l131.4">       permissionManager.remove(p.host, p.type);</span>
<a href="#l131.5"></a><span id="l131.5">     } catch(ex) {</span>
<a href="#l131.6"></a><span id="l131.6">     }</span>
<a href="#l131.7"></a><span id="l131.7">   }</span>
<a href="#l131.8"></a><span id="l131.8"> </span>
<a href="#l131.9"></a><span id="l131.9">   for (i in additions) {</span>
<a href="#l131.10"></a><span id="l131.10">     p = additions[i];</span>
<a href="#l131.11"></a><span id="l131.11">     try {</span>
<a href="#l131.12"></a><span id="l131.12" class="difflineminus">-      var uri = ioService.newURI(&quot;http://&quot; + p.host, null, null);</span>
<a href="#l131.13"></a><span id="l131.13" class="difflineplus">+      var uri = ioService.newURI(&quot;http://&quot; + p.host);</span>
<a href="#l131.14"></a><span id="l131.14">       permissionManager.add(uri, p.type, p.perm);</span>
<a href="#l131.15"></a><span id="l131.15">     } catch(ex) {</span>
<a href="#l131.16"></a><span id="l131.16">     }</span>
<a href="#l131.17"></a><span id="l131.17">   }</span>
<a href="#l131.18"></a><span id="l131.18"> }</span>
<a href="#l131.19"></a><span id="l131.19"> </span>
<a href="#l131.20"></a><span id="l131.20"> function handlePermissionKeyPress(e) {</span>
<a href="#l131.21"></a><span id="l131.21">   if (e.keyCode == 46) {</span>
<a href="#l131.22"></a><span id="l131.22" class="difflineat">@@ -232,17 +232,17 @@ function handlePermissionKeyPress(e) {</span>
<a href="#l131.23"></a><span id="l131.23"> </span>
<a href="#l131.24"></a><span id="l131.24"> function addPermission(aPermission) {</span>
<a href="#l131.25"></a><span id="l131.25">   var textbox = document.getElementById(&quot;url&quot;);</span>
<a href="#l131.26"></a><span id="l131.26">   // trim any leading and trailing spaces and scheme</span>
<a href="#l131.27"></a><span id="l131.27">   var host = trimSpacesAndScheme(textbox.value);</span>
<a href="#l131.28"></a><span id="l131.28">   try {</span>
<a href="#l131.29"></a><span id="l131.29">     var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l131.30"></a><span id="l131.30">                               .getService(Components.interfaces.nsIIOService);</span>
<a href="#l131.31"></a><span id="l131.31" class="difflineminus">-    var uri = ioService.newURI(&quot;http://&quot; + host, null, null);</span>
<a href="#l131.32"></a><span id="l131.32" class="difflineplus">+    var uri = ioService.newURI(&quot;http://&quot; + host);</span>
<a href="#l131.33"></a><span id="l131.33">     host = uri.host;</span>
<a href="#l131.34"></a><span id="l131.34">   } catch(ex) {</span>
<a href="#l131.35"></a><span id="l131.35">     var promptService = Components.classes[&quot;@mozilla.org/embedcomp/prompt-service;1&quot;]</span>
<a href="#l131.36"></a><span id="l131.36">                                   .getService(Components.interfaces.nsIPromptService);</span>
<a href="#l131.37"></a><span id="l131.37">     var message = permissionsBundle.getFormattedString(&quot;alertInvalid&quot;, [host]);</span>
<a href="#l131.38"></a><span id="l131.38">     var title = permissionsBundle.getString(&quot;alertInvalidTitle&quot;);</span>
<a href="#l131.39"></a><span id="l131.39">     promptService.alert(window, title, message);</span>
<a href="#l131.40"></a><span id="l131.40">     textbox.value = &quot;&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l132.1"></a><span id="l132.1" class="difflineminus">--- a/suite/common/pref/pref-applications.js</span>
<a href="#l132.2"></a><span id="l132.2" class="difflineplus">+++ b/suite/common/pref/pref-applications.js</span>
<a href="#l132.3"></a><span id="l132.3" class="difflineat">@@ -1712,17 +1712,17 @@ var gApplicationsPane = {</span>
<a href="#l132.4"></a><span id="l132.4">     var fph = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l132.5"></a><span id="l132.5">                          .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l132.6"></a><span id="l132.6">     var urlSpec = fph.getURLSpecFromFile(aFile);</span>
<a href="#l132.7"></a><span id="l132.7"> </span>
<a href="#l132.8"></a><span id="l132.8">     return &quot;moz-icon://&quot; + urlSpec + &quot;?size=16&quot;;</span>
<a href="#l132.9"></a><span id="l132.9">   },</span>
<a href="#l132.10"></a><span id="l132.10"> </span>
<a href="#l132.11"></a><span id="l132.11">   _getIconURLForWebApp: function(aWebAppURITemplate) {</span>
<a href="#l132.12"></a><span id="l132.12" class="difflineminus">-    var uri = Services.io.newURI(aWebAppURITemplate, null, null);</span>
<a href="#l132.13"></a><span id="l132.13" class="difflineplus">+    var uri = Services.io.newURI(aWebAppURITemplate);</span>
<a href="#l132.14"></a><span id="l132.14"> </span>
<a href="#l132.15"></a><span id="l132.15">     // Unfortunately we need to use favicon.ico here, but we don't know</span>
<a href="#l132.16"></a><span id="l132.16">     // about any other possibility to retrieve an icon for the web app/site</span>
<a href="#l132.17"></a><span id="l132.17">     // without loading a specific full URL and parsing it for a possible</span>
<a href="#l132.18"></a><span id="l132.18">     // shortcut icon.</span>
<a href="#l132.19"></a><span id="l132.19"> </span>
<a href="#l132.20"></a><span id="l132.20">     return /^https?/.test(uri.scheme) ? uri.resolve(&quot;/favicon.ico&quot;) : &quot;&quot;;</span>
<a href="#l132.21"></a><span id="l132.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l133.1"></a><span id="l133.1" class="difflineminus">--- a/suite/common/pref/pref-offlineapps.js</span>
<a href="#l133.2"></a><span id="l133.2" class="difflineplus">+++ b/suite/common/pref/pref-offlineapps.js</span>
<a href="#l133.3"></a><span id="l133.3" class="difflineat">@@ -94,17 +94,17 @@ function UpdateNotifyBox(aValue)</span>
<a href="#l133.4"></a><span id="l133.4"> function _getOfflineAppUsage(aPermission)</span>
<a href="#l133.5"></a><span id="l133.5"> {</span>
<a href="#l133.6"></a><span id="l133.6">   var appCache = Components.classes[&quot;@mozilla.org/network/application-cache-service;1&quot;]</span>
<a href="#l133.7"></a><span id="l133.7">                            .getService(Components.interfaces.nsIApplicationCacheService);</span>
<a href="#l133.8"></a><span id="l133.8">   var groups = appCache.getGroups();</span>
<a href="#l133.9"></a><span id="l133.9"> </span>
<a href="#l133.10"></a><span id="l133.10">   var usage = 0;</span>
<a href="#l133.11"></a><span id="l133.11">   for (let i = 0; i &lt; groups.length; i++) {</span>
<a href="#l133.12"></a><span id="l133.12" class="difflineminus">-    let uri = Services.io.newURI(groups[i], null, null);</span>
<a href="#l133.13"></a><span id="l133.13" class="difflineplus">+    let uri = Services.io.newURI(groups[i]);</span>
<a href="#l133.14"></a><span id="l133.14">     if (aPermission.matchesURI(uri, true))</span>
<a href="#l133.15"></a><span id="l133.15">       usage += appCache.getActiveCache(groups[i]).usage;</span>
<a href="#l133.16"></a><span id="l133.16">   }</span>
<a href="#l133.17"></a><span id="l133.17">   return usage;</span>
<a href="#l133.18"></a><span id="l133.18"> }</span>
<a href="#l133.19"></a><span id="l133.19"> </span>
<a href="#l133.20"></a><span id="l133.20"> /**</span>
<a href="#l133.21"></a><span id="l133.21">  * Updates the list of offline applications.</span>
<a href="#l133.22"></a><span id="l133.22" class="difflineat">@@ -159,17 +159,17 @@ function RemoveOfflineApp()</span>
<a href="#l133.23"></a><span id="l133.23">                                 null, null, null, {}))</span>
<a href="#l133.24"></a><span id="l133.24">     return;</span>
<a href="#l133.25"></a><span id="l133.25"> </span>
<a href="#l133.26"></a><span id="l133.26">   // clear offline cache entries</span>
<a href="#l133.27"></a><span id="l133.27">   var appCache = Components.classes[&quot;@mozilla.org/network/application-cache-service;1&quot;]</span>
<a href="#l133.28"></a><span id="l133.28">                            .getService(Components.interfaces.nsIApplicationCacheService);</span>
<a href="#l133.29"></a><span id="l133.29">   var groups = appCache.getGroups();</span>
<a href="#l133.30"></a><span id="l133.30">   for (let i = 0; i &lt; groups.length; i++) {</span>
<a href="#l133.31"></a><span id="l133.31" class="difflineminus">-      var uri = Services.io.newURI(groups[i], null, null);</span>
<a href="#l133.32"></a><span id="l133.32" class="difflineplus">+      var uri = Services.io.newURI(groups[i]);</span>
<a href="#l133.33"></a><span id="l133.33">       if (uri.asciiHost == host)</span>
<a href="#l133.34"></a><span id="l133.34">           appCache.getActiveCache(groups[i]).discard();</span>
<a href="#l133.35"></a><span id="l133.35">   }</span>
<a href="#l133.36"></a><span id="l133.36"> </span>
<a href="#l133.37"></a><span id="l133.37">   // remove the permission</span>
<a href="#l133.38"></a><span id="l133.38">   // Services.perms.remove(host, &quot;offline-app&quot;);</span>
<a href="#l133.39"></a><span id="l133.39"> </span>
<a href="#l133.40"></a><span id="l133.40">   UpdateOfflineApps();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l134.1"></a><span id="l134.1" class="difflineminus">--- a/suite/common/pref/pref-popups.js</span>
<a href="#l134.2"></a><span id="l134.2" class="difflineplus">+++ b/suite/common/pref/pref-popups.js</span>
<a href="#l134.3"></a><span id="l134.3" class="difflineat">@@ -52,17 +52,17 @@ function SetLists()</span>
<a href="#l134.4"></a><span id="l134.4">     try</span>
<a href="#l134.5"></a><span id="l134.5">     {</span>
<a href="#l134.6"></a><span id="l134.6">       var whitelist = document.getElementById(&quot;privacy.popups.default_whitelist&quot;).value;</span>
<a href="#l134.7"></a><span id="l134.7">       var hosts = whitelist.split(&quot;,&quot;);</span>
<a href="#l134.8"></a><span id="l134.8"> </span>
<a href="#l134.9"></a><span id="l134.9">       for (var i in hosts)</span>
<a href="#l134.10"></a><span id="l134.10">       {</span>
<a href="#l134.11"></a><span id="l134.11">         var host = &quot;http://&quot; + hosts[i];</span>
<a href="#l134.12"></a><span id="l134.12" class="difflineminus">-        var uri = Services.io.newURI(host, null, null);</span>
<a href="#l134.13"></a><span id="l134.13" class="difflineplus">+        var uri = Services.io.newURI(host);</span>
<a href="#l134.14"></a><span id="l134.14">         permissionManager.add(uri, kPopupType, true);</span>
<a href="#l134.15"></a><span id="l134.15">       }</span>
<a href="#l134.16"></a><span id="l134.16">     }</span>
<a href="#l134.17"></a><span id="l134.17">     catch (ex) {}</span>
<a href="#l134.18"></a><span id="l134.18"> </span>
<a href="#l134.19"></a><span id="l134.19">     pref.value = false;</span>
<a href="#l134.20"></a><span id="l134.20">   }</span>
<a href="#l134.21"></a><span id="l134.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l135.1"></a><span id="l135.1" class="difflineminus">--- a/suite/common/pref/preferences.js</span>
<a href="#l135.2"></a><span id="l135.2" class="difflineplus">+++ b/suite/common/pref/preferences.js</span>
<a href="#l135.3"></a><span id="l135.3" class="difflineat">@@ -80,14 +80,14 @@ function SelectSound(aSoundUrlPref)</span>
<a href="#l135.4"></a><span id="l135.4"> </span>
<a href="#l135.5"></a><span id="l135.5"> function PlaySound(aValue, aMail)</span>
<a href="#l135.6"></a><span id="l135.6"> {</span>
<a href="#l135.7"></a><span id="l135.7">   const nsISound = Components.interfaces.nsISound;</span>
<a href="#l135.8"></a><span id="l135.8">   var sound = Components.classes[&quot;@mozilla.org/sound;1&quot;]</span>
<a href="#l135.9"></a><span id="l135.9">                         .createInstance(nsISound);</span>
<a href="#l135.10"></a><span id="l135.10"> </span>
<a href="#l135.11"></a><span id="l135.11">   if (aValue)</span>
<a href="#l135.12"></a><span id="l135.12" class="difflineminus">-    sound.play(Services.io.newURI(aValue, null, null));</span>
<a href="#l135.13"></a><span id="l135.13" class="difflineplus">+    sound.play(Services.io.newURI(aValue));</span>
<a href="#l135.14"></a><span id="l135.14">   else if (aMail &amp;&amp; !/Mac/.test(navigator.platform))</span>
<a href="#l135.15"></a><span id="l135.15">     sound.playEventSound(nsISound.EVENT_NEW_MAIL_RECEIVED);</span>
<a href="#l135.16"></a><span id="l135.16">   else</span>
<a href="#l135.17"></a><span id="l135.17">     sound.beep();</span>
<a href="#l135.18"></a><span id="l135.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l136.1"></a><span id="l136.1" class="difflineminus">--- a/suite/common/src/nsAbout.js</span>
<a href="#l136.2"></a><span id="l136.2" class="difflineplus">+++ b/suite/common/src/nsAbout.js</span>
<a href="#l136.3"></a><span id="l136.3" class="difflineat">@@ -41,17 +41,17 @@ About.prototype = {</span>
<a href="#l136.4"></a><span id="l136.4">   },</span>
<a href="#l136.5"></a><span id="l136.5"> </span>
<a href="#l136.6"></a><span id="l136.6">   getURIFlags: function(aURI) {</span>
<a href="#l136.7"></a><span id="l136.7">     return this[this.getModule(aURI) + &quot;Flags&quot;];</span>
<a href="#l136.8"></a><span id="l136.8">   },</span>
<a href="#l136.9"></a><span id="l136.9"> </span>
<a href="#l136.10"></a><span id="l136.10">   newChannel: function(aURI, aLoadInfo) {</span>
<a href="#l136.11"></a><span id="l136.11">     var module = this.getModule(aURI);</span>
<a href="#l136.12"></a><span id="l136.12" class="difflineminus">-    var newURI = Services.io.newURI(this[module + &quot;URI&quot;], null, null);</span>
<a href="#l136.13"></a><span id="l136.13" class="difflineplus">+    var newURI = Services.io.newURI(this[module + &quot;URI&quot;]);</span>
<a href="#l136.14"></a><span id="l136.14">     var channel = aLoadInfo ?</span>
<a href="#l136.15"></a><span id="l136.15">                   Services.io.newChannelFromURIWithLoadInfo(newURI, aLoadInfo) :</span>
<a href="#l136.16"></a><span id="l136.16">                   Services.io.newChannelFromURI2(newURI, null,</span>
<a href="#l136.17"></a><span id="l136.17">                                                  Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l136.18"></a><span id="l136.18">                                                  null,</span>
<a href="#l136.19"></a><span id="l136.19">                                                  Components.interfaces.nsILoadInfo.SEC_NORMAL,</span>
<a href="#l136.20"></a><span id="l136.20">                                                  Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l136.21"></a><span id="l136.21">     channel.originalURI = aURI;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l137.1"></a><span id="l137.1" class="difflineminus">--- a/suite/common/src/nsGopherProtocolStubHandler.js</span>
<a href="#l137.2"></a><span id="l137.2" class="difflineplus">+++ b/suite/common/src/nsGopherProtocolStubHandler.js</span>
<a href="#l137.3"></a><span id="l137.3" class="difflineat">@@ -43,17 +43,17 @@ GopherProtocol.prototype = {</span>
<a href="#l137.4"></a><span id="l137.4">   },</span>
<a href="#l137.5"></a><span id="l137.5"> </span>
<a href="#l137.6"></a><span id="l137.6">   newChannel: function GP_newChannel(inputURI) {</span>
<a href="#l137.7"></a><span id="l137.7">     return this.newChannel2(inputURI, null);</span>
<a href="#l137.8"></a><span id="l137.8">   },</span>
<a href="#l137.9"></a><span id="l137.9"> </span>
<a href="#l137.10"></a><span id="l137.10">   newChannel2: function GP_newChannel2(inputURI, loadinfo) {</span>
<a href="#l137.11"></a><span id="l137.11">     var ios = Services.io;</span>
<a href="#l137.12"></a><span id="l137.12" class="difflineminus">-    var newURI = ios.newURI(&quot;chrome://communicator/content/gopherAddon.xhtml&quot;, null, null);</span>
<a href="#l137.13"></a><span id="l137.13" class="difflineplus">+    var newURI = ios.newURI(&quot;chrome://communicator/content/gopherAddon.xhtml&quot;);</span>
<a href="#l137.14"></a><span id="l137.14">     // Create a chrome channel, and de-chrome it, to our information page.</span>
<a href="#l137.15"></a><span id="l137.15">     var chan = loadinfo ? ios.newChannelFromURIWithLoadInfo(newURI, loadinfo) :</span>
<a href="#l137.16"></a><span id="l137.16">                           ios.newChannelFromURI2(newURI, null,</span>
<a href="#l137.17"></a><span id="l137.17">                                                  Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l137.18"></a><span id="l137.18">                                                  null,</span>
<a href="#l137.19"></a><span id="l137.19">                                                  Components.interfaces.nsILoadInfo.SEC_NORMAL,</span>
<a href="#l137.20"></a><span id="l137.20">                                                  Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l137.21"></a><span id="l137.21">     chan.originalURI = inputURI;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l138.1"></a><span id="l138.1" class="difflineminus">--- a/suite/common/src/nsSessionStore.js</span>
<a href="#l138.2"></a><span id="l138.2" class="difflineplus">+++ b/suite/common/src/nsSessionStore.js</span>
<a href="#l138.3"></a><span id="l138.3" class="difflineat">@@ -2941,17 +2941,17 @@ SessionStoreService.prototype = {</span>
<a href="#l138.4"></a><span id="l138.4"> </span>
<a href="#l138.5"></a><span id="l138.5">     for (let origin of Object.keys(aStorageData)) {</span>
<a href="#l138.6"></a><span id="l138.6">       let data = aStorageData[origin];</span>
<a href="#l138.7"></a><span id="l138.7"> </span>
<a href="#l138.8"></a><span id="l138.8">       let principal;</span>
<a href="#l138.9"></a><span id="l138.9"> </span>
<a href="#l138.10"></a><span id="l138.10">       try {</span>
<a href="#l138.11"></a><span id="l138.11">         let attrs = aDocShell.getOriginAttributes();</span>
<a href="#l138.12"></a><span id="l138.12" class="difflineminus">-        let originURI = Services.io.newURI(origin, null, null);</span>
<a href="#l138.13"></a><span id="l138.13" class="difflineplus">+        let originURI = Services.io.newURI(origin);</span>
<a href="#l138.14"></a><span id="l138.14">         principal = Services.scriptSecurityManager.createCodebasePrincipal(originURI, attrs);</span>
<a href="#l138.15"></a><span id="l138.15">       } catch (e) {</span>
<a href="#l138.16"></a><span id="l138.16">         Components.utils.reportError(e);</span>
<a href="#l138.17"></a><span id="l138.17">         continue;</span>
<a href="#l138.18"></a><span id="l138.18">       }</span>
<a href="#l138.19"></a><span id="l138.19"> </span>
<a href="#l138.20"></a><span id="l138.20">       let storageManager = aDocShell.QueryInterface(Components.interfaces.nsIDOMStorageManager);</span>
<a href="#l138.21"></a><span id="l138.21">       let window = aDocShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l138.22"></a><span id="l138.22" class="difflineat">@@ -3498,17 +3498,17 @@ SessionStoreService.prototype = {</span>
<a href="#l138.23"></a><span id="l138.23">   },</span>
<a href="#l138.24"></a><span id="l138.24"> </span>
<a href="#l138.25"></a><span id="l138.25">   /**</span>
<a href="#l138.26"></a><span id="l138.26">    * Get nsIURI from string</span>
<a href="#l138.27"></a><span id="l138.27">    * @param string</span>
<a href="#l138.28"></a><span id="l138.28">    * @returns nsIURI</span>
<a href="#l138.29"></a><span id="l138.29">    */</span>
<a href="#l138.30"></a><span id="l138.30">   _getURIFromString: function sss_getURIFromString(aString) {</span>
<a href="#l138.31"></a><span id="l138.31" class="difflineminus">-    return Services.io.newURI(aString, null, null);</span>
<a href="#l138.32"></a><span id="l138.32" class="difflineplus">+    return Services.io.newURI(aString);</span>
<a href="#l138.33"></a><span id="l138.33">   },</span>
<a href="#l138.34"></a><span id="l138.34"> </span>
<a href="#l138.35"></a><span id="l138.35">   /**</span>
<a href="#l138.36"></a><span id="l138.36">    * Annotate a breakpad crash report with the currently selected tab's URL.</span>
<a href="#l138.37"></a><span id="l138.37">    */</span>
<a href="#l138.38"></a><span id="l138.38">   _updateCrashReportURL: function sss_updateCrashReportURL(aWindow) {</span>
<a href="#l138.39"></a><span id="l138.39"> #ifdef MOZ_CRASH_REPORTER</span>
<a href="#l138.40"></a><span id="l138.40">     try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l139.1"></a><span id="l139.1" class="difflineminus">--- a/suite/common/src/nsSuiteGlue.js</span>
<a href="#l139.2"></a><span id="l139.2" class="difflineplus">+++ b/suite/common/src/nsSuiteGlue.js</span>
<a href="#l139.3"></a><span id="l139.3" class="difflineat">@@ -672,17 +672,17 @@ SuiteGlue.prototype = {</span>
<a href="#l139.4"></a><span id="l139.4">   {</span>
<a href="#l139.5"></a><span id="l139.5">     if (Services.prefs.getBoolPref(&quot;browser.download.finished_download_sound&quot;)) {</span>
<a href="#l139.6"></a><span id="l139.6">       if (!this._sound)</span>
<a href="#l139.7"></a><span id="l139.7">         this._sound = Components.classes[&quot;@mozilla.org/sound;1&quot;]</span>
<a href="#l139.8"></a><span id="l139.8">                                 .createInstance(Components.interfaces.nsISound);</span>
<a href="#l139.9"></a><span id="l139.9">       try {</span>
<a href="#l139.10"></a><span id="l139.10">         var url = Services.prefs.getComplexValue(&quot;browser.download.finished_sound_url&quot;,</span>
<a href="#l139.11"></a><span id="l139.11">                                                  Components.interfaces.nsISupportsString);</span>
<a href="#l139.12"></a><span id="l139.12" class="difflineminus">-        this._sound.play(Services.io.newURI(url.data, null, null));</span>
<a href="#l139.13"></a><span id="l139.13" class="difflineplus">+        this._sound.play(Services.io.newURI(url.data));</span>
<a href="#l139.14"></a><span id="l139.14">       } catch (e) {</span>
<a href="#l139.15"></a><span id="l139.15">         this._sound.beep();</span>
<a href="#l139.16"></a><span id="l139.16">       }</span>
<a href="#l139.17"></a><span id="l139.17">     }</span>
<a href="#l139.18"></a><span id="l139.18">   },</span>
<a href="#l139.19"></a><span id="l139.19"> </span>
<a href="#l139.20"></a><span id="l139.20">   _showPluginUpdatePage: function(aWindow) {</span>
<a href="#l139.21"></a><span id="l139.21">     Services.prefs.setBoolPref(&quot;plugins.update.notifyUser&quot;, false);</span>
<a href="#l139.22"></a><span id="l139.22" class="difflineat">@@ -891,17 +891,17 @@ SuiteGlue.prototype = {</span>
<a href="#l139.23"></a><span id="l139.23">         smartBookmarksVersion = Services.prefs.getIntPref(&quot;browser.places.smartBookmarksVersion&quot;);</span>
<a href="#l139.24"></a><span id="l139.24">       } catch(ex) {}</span>
<a href="#l139.25"></a><span id="l139.25">       if (!autoExportHTML &amp;&amp; smartBookmarksVersion != -1)</span>
<a href="#l139.26"></a><span id="l139.26">         Services.prefs.setIntPref(&quot;browser.places.smartBookmarksVersion&quot;, 0);</span>
<a href="#l139.27"></a><span id="l139.27"> </span>
<a href="#l139.28"></a><span id="l139.28">       var bookmarksURI = null;</span>
<a href="#l139.29"></a><span id="l139.29">       if (restoreDefaultBookmarks) {</span>
<a href="#l139.30"></a><span id="l139.30">         // User wants to restore bookmarks.html file from default profile folder.</span>
<a href="#l139.31"></a><span id="l139.31" class="difflineminus">-        bookmarksURI = Services.io.newURI(&quot;resource:///defaults/profile/bookmarks.html&quot;, null, null);</span>
<a href="#l139.32"></a><span id="l139.32" class="difflineplus">+        bookmarksURI = Services.io.newURI(&quot;resource:///defaults/profile/bookmarks.html&quot;);</span>
<a href="#l139.33"></a><span id="l139.33">       }</span>
<a href="#l139.34"></a><span id="l139.34">       else {</span>
<a href="#l139.35"></a><span id="l139.35">         // Get bookmarks.html file location.</span>
<a href="#l139.36"></a><span id="l139.36">         var bookmarksFile = Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l139.37"></a><span id="l139.37">         if (bookmarksFile.exists())</span>
<a href="#l139.38"></a><span id="l139.38">           bookmarksURI = Services.io.newFileURI(bookmarksFile);</span>
<a href="#l139.39"></a><span id="l139.39">       }</span>
<a href="#l139.40"></a><span id="l139.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l140.1"></a><span id="l140.1" class="difflineminus">--- a/suite/common/tests/browser/browser_491168.js</span>
<a href="#l140.2"></a><span id="l140.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_491168.js</span>
<a href="#l140.3"></a><span id="l140.3" class="difflineat">@@ -54,11 +54,11 @@ function test() {</span>
<a href="#l140.4"></a><span id="l140.4">         // clean up</span>
<a href="#l140.5"></a><span id="l140.5">         if (Services.prefs.prefHasUserValue(&quot;browser.tabs.max_tabs_undo&quot;))</span>
<a href="#l140.6"></a><span id="l140.6">           Services.prefs.clearUserPref(&quot;browser.tabs.max_tabs_undo&quot;);</span>
<a href="#l140.7"></a><span id="l140.7">         finish();</span>
<a href="#l140.8"></a><span id="l140.8">       }, true);</span>
<a href="#l140.9"></a><span id="l140.9">     }, true);</span>
<a href="#l140.10"></a><span id="l140.10">   },true);</span>
<a href="#l140.11"></a><span id="l140.11"> </span>
<a href="#l140.12"></a><span id="l140.12" class="difflineminus">-  let referrerURI = Services.io.newURI(REFERRER1, null, null);</span>
<a href="#l140.13"></a><span id="l140.13" class="difflineplus">+  let referrerURI = Services.io.newURI(REFERRER1);</span>
<a href="#l140.14"></a><span id="l140.14">   browser.loadURI(&quot;http://example.org&quot;, referrerURI, null);</span>
<a href="#l140.15"></a><span id="l140.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l141.1"></a><span id="l141.1" class="difflineminus">--- a/suite/common/utilityOverlay.js</span>
<a href="#l141.2"></a><span id="l141.2" class="difflineplus">+++ b/suite/common/utilityOverlay.js</span>
<a href="#l141.3"></a><span id="l141.3" class="difflineat">@@ -956,17 +956,17 @@ function isElementVisible(aElement)</span>
<a href="#l141.4"></a><span id="l141.4">   var bo = aElement.boxObject;</span>
<a href="#l141.5"></a><span id="l141.5">   return (bo.height &gt; 0 &amp;&amp; bo.width &gt; 0);</span>
<a href="#l141.6"></a><span id="l141.6"> }</span>
<a href="#l141.7"></a><span id="l141.7"> </span>
<a href="#l141.8"></a><span id="l141.8"> function makeURLAbsolute(aBase, aUrl, aCharset)</span>
<a href="#l141.9"></a><span id="l141.9"> {</span>
<a href="#l141.10"></a><span id="l141.10">   // Construct nsIURL.</span>
<a href="#l141.11"></a><span id="l141.11">   return Services.io.newURI(aUrl, aCharset,</span>
<a href="#l141.12"></a><span id="l141.12" class="difflineminus">-                            Services.io.newURI(aBase, aCharset, null)).spec;</span>
<a href="#l141.13"></a><span id="l141.13" class="difflineplus">+                            Services.io.newURI(aBase, aCharset)).spec;</span>
<a href="#l141.14"></a><span id="l141.14"> }</span>
<a href="#l141.15"></a><span id="l141.15"> </span>
<a href="#l141.16"></a><span id="l141.16"> function openAsExternal(aURL)</span>
<a href="#l141.17"></a><span id="l141.17"> {</span>
<a href="#l141.18"></a><span id="l141.18">   var loadType = Services.prefs.getIntPref(&quot;browser.link.open_external&quot;);</span>
<a href="#l141.19"></a><span id="l141.19">   var loadInBackground = Services.prefs.getBoolPref(&quot;browser.tabs.loadDivertedInBackground&quot;);</span>
<a href="#l141.20"></a><span id="l141.20">   openNewTabWindowOrExistingWith(loadType, aURL, null, loadInBackground);</span>
<a href="#l141.21"></a><span id="l141.21"> }</span>
<a href="#l141.22"></a><span id="l141.22" class="difflineat">@@ -1643,17 +1643,17 @@ function switchToTabHavingURI(aURI, aOpe</span>
<a href="#l141.23"></a><span id="l141.23">         return true;</span>
<a href="#l141.24"></a><span id="l141.24">       }</span>
<a href="#l141.25"></a><span id="l141.25">     }</span>
<a href="#l141.26"></a><span id="l141.26">     return false;</span>
<a href="#l141.27"></a><span id="l141.27">   }</span>
<a href="#l141.28"></a><span id="l141.28"> </span>
<a href="#l141.29"></a><span id="l141.29">   // This can be passed either nsIURI or a string.</span>
<a href="#l141.30"></a><span id="l141.30">   if (!(aURI instanceof Components.interfaces.nsIURI))</span>
<a href="#l141.31"></a><span id="l141.31" class="difflineminus">-    aURI = Services.io.newURI(aURI, null, null);</span>
<a href="#l141.32"></a><span id="l141.32" class="difflineplus">+    aURI = Services.io.newURI(aURI);</span>
<a href="#l141.33"></a><span id="l141.33"> </span>
<a href="#l141.34"></a><span id="l141.34">   // Prioritise this window.</span>
<a href="#l141.35"></a><span id="l141.35">   if (switchIfURIInWindow(window))</span>
<a href="#l141.36"></a><span id="l141.36">     return true;</span>
<a href="#l141.37"></a><span id="l141.37"> </span>
<a href="#l141.38"></a><span id="l141.38">   let winEnum = Services.wm.getEnumerator(&quot;navigator:browser&quot;);</span>
<a href="#l141.39"></a><span id="l141.39">   while (winEnum.hasMoreElements()) {</span>
<a href="#l141.40"></a><span id="l141.40">     let browserWin = winEnum.getNext();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l142.1"></a><span id="l142.1" class="difflineminus">--- a/suite/feeds/src/FeedConverter.js</span>
<a href="#l142.2"></a><span id="l142.2" class="difflineplus">+++ b/suite/feeds/src/FeedConverter.js</span>
<a href="#l142.3"></a><span id="l142.3" class="difflineat">@@ -247,17 +247,17 @@ FeedConverter.prototype = {</span>
<a href="#l142.4"></a><span id="l142.4">       // preview page if the parser returned a document.</span>
<a href="#l142.5"></a><span id="l142.5">       if (result.doc) {</span>
<a href="#l142.6"></a><span id="l142.6"> </span>
<a href="#l142.7"></a><span id="l142.7">         // Store the result in the result service so that the display</span>
<a href="#l142.8"></a><span id="l142.8">         // page can access it.</span>
<a href="#l142.9"></a><span id="l142.9">         feedService.addFeedResult(result);</span>
<a href="#l142.10"></a><span id="l142.10"> </span>
<a href="#l142.11"></a><span id="l142.11">         // Now load the actual XUL document.</span>
<a href="#l142.12"></a><span id="l142.12" class="difflineminus">-        var chromeURI = Services.io.newURI(FEEDHANDLER_URI, null, null);</span>
<a href="#l142.13"></a><span id="l142.13" class="difflineplus">+        var chromeURI = Services.io.newURI(FEEDHANDLER_URI);</span>
<a href="#l142.14"></a><span id="l142.14">         chromeChannel = Services.io.newChannelFromURIWithLoadInfo(chromeURI, loadInfo);</span>
<a href="#l142.15"></a><span id="l142.15">         chromeChannel.owner = Services.scriptSecurityManager</span>
<a href="#l142.16"></a><span id="l142.16">                                       .getNoAppCodebasePrincipal(chromeURI);</span>
<a href="#l142.17"></a><span id="l142.17">         chromeChannel.originalURI = result.uri;</span>
<a href="#l142.18"></a><span id="l142.18">       }</span>
<a href="#l142.19"></a><span id="l142.19">       else</span>
<a href="#l142.20"></a><span id="l142.20">         chromeChannel = Services.io.newChannelFromURIWithLoadInfo(result.uri, loadInfo);</span>
<a href="#l142.21"></a><span id="l142.21"> </span>
<a href="#l142.22"></a><span id="l142.22" class="difflineat">@@ -364,17 +364,17 @@ FeedResultService.prototype = {</span>
<a href="#l142.23"></a><span id="l142.23"> </span>
<a href="#l142.24"></a><span id="l142.24">       // For the benefit of applications that might know how to deal with more</span>
<a href="#l142.25"></a><span id="l142.25">       // URLs than just feeds, send feed: URLs in the following format:</span>
<a href="#l142.26"></a><span id="l142.26">       //</span>
<a href="#l142.27"></a><span id="l142.27">       // http urls: replace scheme with feed, e.g.</span>
<a href="#l142.28"></a><span id="l142.28">       // http://foo.com/index.rdf -&gt; feed://foo.com/index.rdf</span>
<a href="#l142.29"></a><span id="l142.29">       // other urls: prepend feed: scheme, e.g.</span>
<a href="#l142.30"></a><span id="l142.30">       // https://foo.com/index.rdf -&gt; feed:https://foo.com/index.rdf</span>
<a href="#l142.31"></a><span id="l142.31" class="difflineminus">-      var feedURI = Services.io.newURI(spec, null, null);</span>
<a href="#l142.32"></a><span id="l142.32" class="difflineplus">+      var feedURI = Services.io.newURI(spec);</span>
<a href="#l142.33"></a><span id="l142.33">       if (feedURI.schemeIs(&quot;http&quot;)) {</span>
<a href="#l142.34"></a><span id="l142.34">         feedURI.scheme = &quot;feed&quot;;</span>
<a href="#l142.35"></a><span id="l142.35">         spec = feedURI.spec;</span>
<a href="#l142.36"></a><span id="l142.36">       }</span>
<a href="#l142.37"></a><span id="l142.37">       else</span>
<a href="#l142.38"></a><span id="l142.38">         spec = &quot;feed:&quot; + spec;</span>
<a href="#l142.39"></a><span id="l142.39"> </span>
<a href="#l142.40"></a><span id="l142.40">       // Retrieving the shell service might fail on some systems, most</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l143.1"></a><span id="l143.1" class="difflineminus">--- a/suite/feeds/src/FeedWriter.js</span>
<a href="#l143.2"></a><span id="l143.2" class="difflineplus">+++ b/suite/feeds/src/FeedWriter.js</span>
<a href="#l143.3"></a><span id="l143.3" class="difflineat">@@ -111,17 +111,17 @@ function safeGetCharPref(pref, defaultVa</span>
<a href="#l143.4"></a><span id="l143.4"> /**</span>
<a href="#l143.5"></a><span id="l143.5">  * Wrapper function for nsIIOService::newURI.</span>
<a href="#l143.6"></a><span id="l143.6">  * @param aURLSpec</span>
<a href="#l143.7"></a><span id="l143.7">  *        The URL string from which to create an nsIURI.</span>
<a href="#l143.8"></a><span id="l143.8">  * @returns an nsIURI object, or null if the creation of the URI failed.</span>
<a href="#l143.9"></a><span id="l143.9">  */</span>
<a href="#l143.10"></a><span id="l143.10"> function makeURI(aURLSpec, aCharset) {</span>
<a href="#l143.11"></a><span id="l143.11">   try {</span>
<a href="#l143.12"></a><span id="l143.12" class="difflineminus">-    return Services.io.newURI(aURLSpec, aCharset, null);</span>
<a href="#l143.13"></a><span id="l143.13" class="difflineplus">+    return Services.io.newURI(aURLSpec, aCharset);</span>
<a href="#l143.14"></a><span id="l143.14">   } catch (ex) {</span>
<a href="#l143.15"></a><span id="l143.15">   }</span>
<a href="#l143.16"></a><span id="l143.16"> </span>
<a href="#l143.17"></a><span id="l143.17">   return null;</span>
<a href="#l143.18"></a><span id="l143.18"> }</span>
<a href="#l143.19"></a><span id="l143.19"> </span>
<a href="#l143.20"></a><span id="l143.20"> /**</span>
<a href="#l143.21"></a><span id="l143.21">  * Converts a number of bytes to the appropriate unit that results in a</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l144.1"></a><span id="l144.1" class="difflineminus">--- a/suite/mailnews/addrbook/abCardOverlay.js</span>
<a href="#l144.2"></a><span id="l144.2" class="difflineplus">+++ b/suite/mailnews/addrbook/abCardOverlay.js</span>
<a href="#l144.3"></a><span id="l144.3" class="difflineat">@@ -1015,17 +1015,17 @@ var gGenericPhotoHandler =</span>
<a href="#l144.4"></a><span id="l144.4"> var gFilePhotoHandler =</span>
<a href="#l144.5"></a><span id="l144.5"> {</span>
<a href="#l144.6"></a><span id="l144.6"> </span>
<a href="#l144.7"></a><span id="l144.7">   onLoad: function(aCard, aDocument)</span>
<a href="#l144.8"></a><span id="l144.8">   {</span>
<a href="#l144.9"></a><span id="l144.9">     var photoURI = aCard.getProperty(&quot;PhotoURI&quot;, &quot;&quot;);</span>
<a href="#l144.10"></a><span id="l144.10">     try</span>
<a href="#l144.11"></a><span id="l144.11">     {</span>
<a href="#l144.12"></a><span id="l144.12" class="difflineminus">-      var file = Services.io.newURI(photoURI, null, null)</span>
<a href="#l144.13"></a><span id="l144.13" class="difflineplus">+      var file = Services.io.newURI(photoURI)</span>
<a href="#l144.14"></a><span id="l144.14">                             .QueryInterface(Components.interfaces.nsIFileURL)</span>
<a href="#l144.15"></a><span id="l144.15">                             .file;</span>
<a href="#l144.16"></a><span id="l144.16">     } catch (e) {}</span>
<a href="#l144.17"></a><span id="l144.17"> </span>
<a href="#l144.18"></a><span id="l144.18">     if (!file)</span>
<a href="#l144.19"></a><span id="l144.19">       return false;</span>
<a href="#l144.20"></a><span id="l144.20"> </span>
<a href="#l144.21"></a><span id="l144.21">     aDocument.getElementById(&quot;PhotoFile&quot;).file = file;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l145.1"></a><span id="l145.1" class="difflineminus">--- a/suite/mailnews/addrbook/abCommon.js</span>
<a href="#l145.2"></a><span id="l145.2" class="difflineplus">+++ b/suite/mailnews/addrbook/abCommon.js</span>
<a href="#l145.3"></a><span id="l145.3" class="difflineat">@@ -700,17 +700,17 @@ function getPhotoURI(aPhotoName) {</span>
<a href="#l145.4"></a><span id="l145.4"> function storePhoto(aUri) {</span>
<a href="#l145.5"></a><span id="l145.5">   if (!aUri)</span>
<a href="#l145.6"></a><span id="l145.6">     return false;</span>
<a href="#l145.7"></a><span id="l145.7"> </span>
<a href="#l145.8"></a><span id="l145.8">   // Get the photos directory and check that it exists</span>
<a href="#l145.9"></a><span id="l145.9">   var file = getPhotosDir();</span>
<a href="#l145.10"></a><span id="l145.10"> </span>
<a href="#l145.11"></a><span id="l145.11">   // Create a channel from the URI and open it as an input stream</span>
<a href="#l145.12"></a><span id="l145.12" class="difflineminus">-  var channel = Services.io.newChannelFromURI2(Services.io.newURI(aUri, null, null),</span>
<a href="#l145.13"></a><span id="l145.13" class="difflineplus">+  var channel = Services.io.newChannelFromURI2(Services.io.newURI(aUri),</span>
<a href="#l145.14"></a><span id="l145.14">                                          null,</span>
<a href="#l145.15"></a><span id="l145.15">                                          Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l145.16"></a><span id="l145.16">                                          null,</span>
<a href="#l145.17"></a><span id="l145.17">                                          Components.interfaces.nsILoadInfo.SEC_NORMAL,</span>
<a href="#l145.18"></a><span id="l145.18">                                          Components.interfaces.nsIContentPolicy.TYPE_INTERNAL_IMAGE);</span>
<a href="#l145.19"></a><span id="l145.19"> </span>
<a href="#l145.20"></a><span id="l145.20">   var istream = channel.open();</span>
<a href="#l145.21"></a><span id="l145.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l146.1"></a><span id="l146.1" class="difflineminus">--- a/suite/mailnews/compose/MsgComposeCommands.js</span>
<a href="#l146.2"></a><span id="l146.2" class="difflineplus">+++ b/suite/mailnews/compose/MsgComposeCommands.js</span>
<a href="#l146.3"></a><span id="l146.3" class="difflineat">@@ -991,17 +991,17 @@ function ComposeFieldsReady()</span>
<a href="#l146.4"></a><span id="l146.4"> // checks if the passed in string is a mailto url, if it is, generates nsIMsgComposeParams</span>
<a href="#l146.5"></a><span id="l146.5"> // for the url and returns them.</span>
<a href="#l146.6"></a><span id="l146.6"> function handleMailtoArgs(mailtoUrl)</span>
<a href="#l146.7"></a><span id="l146.7"> {</span>
<a href="#l146.8"></a><span id="l146.8">   // see if the string is a mailto url....do this by checking the first 7 characters of the string</span>
<a href="#l146.9"></a><span id="l146.9">   if (/^mailto:/i.test(mailtoUrl))</span>
<a href="#l146.10"></a><span id="l146.10">   {</span>
<a href="#l146.11"></a><span id="l146.11">     // if it is a mailto url, turn the mailto url into a MsgComposeParams object....</span>
<a href="#l146.12"></a><span id="l146.12" class="difflineminus">-    var uri = Services.io.newURI(mailtoUrl, null, null);</span>
<a href="#l146.13"></a><span id="l146.13" class="difflineplus">+    var uri = Services.io.newURI(mailtoUrl);</span>
<a href="#l146.14"></a><span id="l146.14"> </span>
<a href="#l146.15"></a><span id="l146.15">     if (uri)</span>
<a href="#l146.16"></a><span id="l146.16">       return sMsgComposeService.getParamsForMailto(uri);</span>
<a href="#l146.17"></a><span id="l146.17">   }</span>
<a href="#l146.18"></a><span id="l146.18"> </span>
<a href="#l146.19"></a><span id="l146.19">   return null;</span>
<a href="#l146.20"></a><span id="l146.20"> }</span>
<a href="#l146.21"></a><span id="l146.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l147.1"></a><span id="l147.1" class="difflineminus">--- a/suite/mailnews/mailWindowOverlay.js</span>
<a href="#l147.2"></a><span id="l147.2" class="difflineplus">+++ b/suite/mailnews/mailWindowOverlay.js</span>
<a href="#l147.3"></a><span id="l147.3" class="difflineat">@@ -2757,17 +2757,17 @@ function onRemoteContentOptionsShowing(a</span>
<a href="#l147.4"></a><span id="l147.4">   var origins = [...gMessageNotificationBar.remoteOrigins];</span>
<a href="#l147.5"></a><span id="l147.5"> </span>
<a href="#l147.6"></a><span id="l147.6">   var addresses = {};</span>
<a href="#l147.7"></a><span id="l147.7">   MailServices.headerParser.parseHeadersWithArray(</span>
<a href="#l147.8"></a><span id="l147.8">     gMessageDisplay.displayedMessage.author, addresses, {}, {});</span>
<a href="#l147.9"></a><span id="l147.9">   var authorEmailAddress = addresses.value[0];</span>
<a href="#l147.10"></a><span id="l147.10"> </span>
<a href="#l147.11"></a><span id="l147.11">   var emailURI = Services.io.newURI(</span>
<a href="#l147.12"></a><span id="l147.12" class="difflineminus">-    &quot;chrome://messenger/content/?email=&quot; + authorEmailAddress, null, null);</span>
<a href="#l147.13"></a><span id="l147.13" class="difflineplus">+    &quot;chrome://messenger/content/?email=&quot; + authorEmailAddress);</span>
<a href="#l147.14"></a><span id="l147.14">   var principal = Services.scriptSecurityManager</span>
<a href="#l147.15"></a><span id="l147.15">                           .createCodebasePrincipal(emailURI, {});</span>
<a href="#l147.16"></a><span id="l147.16">   // Put author email first in the menu.</span>
<a href="#l147.17"></a><span id="l147.17">   origins.unshift(principal.origin);</span>
<a href="#l147.18"></a><span id="l147.18"> </span>
<a href="#l147.19"></a><span id="l147.19">   // Out with the old...</span>
<a href="#l147.20"></a><span id="l147.20">   let childNodes = aEvent.target.querySelectorAll(&quot;.allow-remote-uri&quot;);</span>
<a href="#l147.21"></a><span id="l147.21">   for (let child of childNodes)</span>
<a href="#l147.22"></a><span id="l147.22" class="difflineat">@@ -2798,17 +2798,17 @@ function onRemoteContentOptionsShowing(a</span>
<a href="#l147.23"></a><span id="l147.23"> function allowRemoteContentForURI(aItem)</span>
<a href="#l147.24"></a><span id="l147.24"> {</span>
<a href="#l147.25"></a><span id="l147.25"> </span>
<a href="#l147.26"></a><span id="l147.26">   var origin = aItem.getAttribute(&quot;value&quot;);</span>
<a href="#l147.27"></a><span id="l147.27"> </span>
<a href="#l147.28"></a><span id="l147.28">   if (!origin)</span>
<a href="#l147.29"></a><span id="l147.29">     return;</span>
<a href="#l147.30"></a><span id="l147.30"> </span>
<a href="#l147.31"></a><span id="l147.31" class="difflineminus">-  let uri = Services.io.newURI(origin, null, null);</span>
<a href="#l147.32"></a><span id="l147.32" class="difflineplus">+  let uri = Services.io.newURI(origin);</span>
<a href="#l147.33"></a><span id="l147.33">   Services.perms.add(uri, &quot;image&quot;, Services.perms.ALLOW_ACTION);</span>
<a href="#l147.34"></a><span id="l147.34"> </span>
<a href="#l147.35"></a><span id="l147.35">   ReloadMessage();</span>
<a href="#l147.36"></a><span id="l147.36"> }</span>
<a href="#l147.37"></a><span id="l147.37"> </span>
<a href="#l147.38"></a><span id="l147.38"> /**</span>
<a href="#l147.39"></a><span id="l147.39">  * Displays fine-grained, per-site permissions for remote content.</span>
<a href="#l147.40"></a><span id="l147.40">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l148.1"></a><span id="l148.1" class="difflineminus">--- a/suite/mailnews/msgHdrViewOverlay.js</span>
<a href="#l148.2"></a><span id="l148.2" class="difflineplus">+++ b/suite/mailnews/msgHdrViewOverlay.js</span>
<a href="#l148.3"></a><span id="l148.3" class="difflineat">@@ -1386,17 +1386,17 @@ createNewAttachmentInfo.prototype.openAt</span>
<a href="#l148.4"></a><span id="l148.4">   {</span>
<a href="#l148.5"></a><span id="l148.5">     // As of bug 599119, isTypeSupported returns true for messages, but</span>
<a href="#l148.6"></a><span id="l148.6">     // attached messages don't open reliably in the browser, so pretend</span>
<a href="#l148.7"></a><span id="l148.7">     // they're not supported and open a message window for them instead.</span>
<a href="#l148.8"></a><span id="l148.8">     case &quot;message/rfc822&quot;:</span>
<a href="#l148.9"></a><span id="l148.9">       var url = this.url + &quot;&amp;type=application/x-message-display&quot;;</span>
<a href="#l148.10"></a><span id="l148.10">       window.openDialog(&quot;chrome://messenger/content/messageWindow.xul&quot;,</span>
<a href="#l148.11"></a><span id="l148.11">                         &quot;_blank&quot;, &quot;all,dialog=no&quot;,</span>
<a href="#l148.12"></a><span id="l148.12" class="difflineminus">-                        Services.io.newURI(url, null, null));</span>
<a href="#l148.13"></a><span id="l148.13" class="difflineplus">+                        Services.io.newURI(url));</span>
<a href="#l148.14"></a><span id="l148.14">       return;</span>
<a href="#l148.15"></a><span id="l148.15">     case &quot;text/x-moz-deleted&quot;:</span>
<a href="#l148.16"></a><span id="l148.16">       return;</span>
<a href="#l148.17"></a><span id="l148.17">   }</span>
<a href="#l148.18"></a><span id="l148.18"> </span>
<a href="#l148.19"></a><span id="l148.19">   var webNavigationInfo =</span>
<a href="#l148.20"></a><span id="l148.20">         Components.classes[&quot;@mozilla.org/webnavigation-info;1&quot;]</span>
<a href="#l148.21"></a><span id="l148.21">                   .getService(Components.interfaces.nsIWebNavigationInfo);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l149.1"></a><span id="l149.1" class="difflineminus">--- a/suite/mailnews/nsDragAndDrop.js</span>
<a href="#l149.2"></a><span id="l149.2" class="difflineplus">+++ b/suite/mailnews/nsDragAndDrop.js</span>
<a href="#l149.3"></a><span id="l149.3" class="difflineat">@@ -562,17 +562,17 @@ var nsDragAndDrop = {</span>
<a href="#l149.4"></a><span id="l149.4">       // to know if aDraggedText really is a URI.</span>
<a href="#l149.5"></a><span id="l149.5"> </span>
<a href="#l149.6"></a><span id="l149.6">       aDraggedText = aDraggedText.replace(/^\s*|\s*$/g, '');</span>
<a href="#l149.7"></a><span id="l149.7"> </span>
<a href="#l149.8"></a><span id="l149.8">       var uri;</span>
<a href="#l149.9"></a><span id="l149.9">       var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l149.10"></a><span id="l149.10">                                 .getService(Components.interfaces.nsIIOService);</span>
<a href="#l149.11"></a><span id="l149.11">       try {</span>
<a href="#l149.12"></a><span id="l149.12" class="difflineminus">-        uri = ioService.newURI(aDraggedText, null, null);</span>
<a href="#l149.13"></a><span id="l149.13" class="difflineplus">+        uri = ioService.newURI(aDraggedText);</span>
<a href="#l149.14"></a><span id="l149.14">       } catch (e) {</span>
<a href="#l149.15"></a><span id="l149.15">       }</span>
<a href="#l149.16"></a><span id="l149.16"> </span>
<a href="#l149.17"></a><span id="l149.17">       if (!uri)</span>
<a href="#l149.18"></a><span id="l149.18">         return;</span>
<a href="#l149.19"></a><span id="l149.19"> </span>
<a href="#l149.20"></a><span id="l149.20">       // aDraggedText is a URI, do the security check.</span>
<a href="#l149.21"></a><span id="l149.21">       const nsIScriptSecurityManager = Components.interfaces</span>
<a href="#l149.22"></a><span id="l149.22" class="difflineat">@@ -582,17 +582,17 @@ var nsDragAndDrop = {</span>
<a href="#l149.23"></a><span id="l149.23"> </span>
<a href="#l149.24"></a><span id="l149.24">       if (!aDragSession)</span>
<a href="#l149.25"></a><span id="l149.25">         aDragSession = this.mDragService.getCurrentSession();</span>
<a href="#l149.26"></a><span id="l149.26"> </span>
<a href="#l149.27"></a><span id="l149.27">       var sourceDoc = aDragSession.sourceDocument;</span>
<a href="#l149.28"></a><span id="l149.28">       // Use &quot;file:///&quot; as the default sourceURI so that drops of file:// URIs</span>
<a href="#l149.29"></a><span id="l149.29">       // are always allowed.</span>
<a href="#l149.30"></a><span id="l149.30">       var principal = sourceDoc ? sourceDoc.nodePrincipal</span>
<a href="#l149.31"></a><span id="l149.31" class="difflineminus">-                                : secMan.createCodebasePrincipal(ioService.newURI(&quot;file:///&quot;, null, null), {});</span>
<a href="#l149.32"></a><span id="l149.32" class="difflineplus">+                                : secMan.createCodebasePrincipal(ioService.newURI(&quot;file:///&quot;), {});</span>
<a href="#l149.33"></a><span id="l149.33"> </span>
<a href="#l149.34"></a><span id="l149.34">       try {</span>
<a href="#l149.35"></a><span id="l149.35">         secMan.checkLoadURIStrWithPrincipal(principal, aDraggedText,</span>
<a href="#l149.36"></a><span id="l149.36">                                             nsIScriptSecurityManager.STANDARD);</span>
<a href="#l149.37"></a><span id="l149.37">       } catch (e) {</span>
<a href="#l149.38"></a><span id="l149.38">         // Stop event propagation right here.</span>
<a href="#l149.39"></a><span id="l149.39">         aEvent.stopPropagation();</span>
<a href="#l149.40"></a><span id="l149.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l150.1"></a><span id="l150.1" class="difflineminus">--- a/suite/mailnews/phishingDetector.js</span>
<a href="#l150.2"></a><span id="l150.2" class="difflineplus">+++ b/suite/mailnews/phishingDetector.js</span>
<a href="#l150.3"></a><span id="l150.3" class="difflineat">@@ -84,17 +84,17 @@ function isPhishingURL(aLinkNode, aSilen</span>
<a href="#l150.4"></a><span id="l150.4">   var phishingType = kPhishingNotSuspicious;</span>
<a href="#l150.5"></a><span id="l150.5">   var href = aHref || aLinkNode.href;</span>
<a href="#l150.6"></a><span id="l150.6">   if (!href)</span>
<a href="#l150.7"></a><span id="l150.7">     return false;</span>
<a href="#l150.8"></a><span id="l150.8"> </span>
<a href="#l150.9"></a><span id="l150.9">   var linkTextURL = {};</span>
<a href="#l150.10"></a><span id="l150.10">   var isPhishingURL = false;</span>
<a href="#l150.11"></a><span id="l150.11"> </span>
<a href="#l150.12"></a><span id="l150.12" class="difflineminus">-  var hrefURL = Services.io.newURI(href, null, null);</span>
<a href="#l150.13"></a><span id="l150.13" class="difflineplus">+  var hrefURL = Services.io.newURI(href);</span>
<a href="#l150.14"></a><span id="l150.14"> </span>
<a href="#l150.15"></a><span id="l150.15">   // only check for phishing urls if the url is an http or https link.</span>
<a href="#l150.16"></a><span id="l150.16">   // this prevents us from flagging imap and other internally handled urls</span>
<a href="#l150.17"></a><span id="l150.17">   if (hrefURL.schemeIs('http') || hrefURL.schemeIs('https'))</span>
<a href="#l150.18"></a><span id="l150.18">   {</span>
<a href="#l150.19"></a><span id="l150.19">     let ipAddress = isLegalIPAddress(hrefURL.host, true);</span>
<a href="#l150.20"></a><span id="l150.20">     if (ipAddress &amp;&amp; !isLegalLocalIPAddress(ipAddress))</span>
<a href="#l150.21"></a><span id="l150.21">       phishingType = kPhishingWithIPAddress;</span>
<a href="#l150.22"></a><span id="l150.22" class="difflineat">@@ -123,17 +123,17 @@ function misMatchedHostWithLinkText(aLin</span>
<a href="#l150.23"></a><span id="l150.23">   linkNodeText = linkNodeText.replace(/ /g, &quot;&quot;);</span>
<a href="#l150.24"></a><span id="l150.24"> </span>
<a href="#l150.25"></a><span id="l150.25">   // only worry about http and https urls</span>
<a href="#l150.26"></a><span id="l150.26">   if (linkNodeText)</span>
<a href="#l150.27"></a><span id="l150.27">   {</span>
<a href="#l150.28"></a><span id="l150.28">     // does the link text look like a http url?</span>
<a href="#l150.29"></a><span id="l150.29">      if (linkNodeText.search(/(^http:|^https:)/) != -1)</span>
<a href="#l150.30"></a><span id="l150.30">      {</span>
<a href="#l150.31"></a><span id="l150.31" class="difflineminus">-       var linkTextURL  = Services.io.newURI(linkNodeText, null, null);</span>
<a href="#l150.32"></a><span id="l150.32" class="difflineplus">+       var linkTextURL  = Services.io.newURI(linkNodeText);</span>
<a href="#l150.33"></a><span id="l150.33">        aLinkTextURL.value = linkTextURL;</span>
<a href="#l150.34"></a><span id="l150.34">        // compare hosts, but ignore possible www. prefix</span>
<a href="#l150.35"></a><span id="l150.35">        return !(aHrefURL.host.replace(/^www\./, &quot;&quot;) == aLinkTextURL.value.host.replace(/^www\./, &quot;&quot;));</span>
<a href="#l150.36"></a><span id="l150.36">      }</span>
<a href="#l150.37"></a><span id="l150.37">   }</span>
<a href="#l150.38"></a><span id="l150.38"> </span>
<a href="#l150.39"></a><span id="l150.39">   return false;</span>
<a href="#l150.40"></a><span id="l150.40"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l151.1"></a><span id="l151.1" class="difflineminus">--- a/suite/modules/WindowsJumpLists.jsm</span>
<a href="#l151.2"></a><span id="l151.2" class="difflineplus">+++ b/suite/modules/WindowsJumpLists.jsm</span>
<a href="#l151.3"></a><span id="l151.3" class="difflineat">@@ -359,17 +359,17 @@ var WinTaskbarJumpList =</span>
<a href="#l151.4"></a><span id="l151.4">           delete this._pendingStatements[LIST_TYPE.FREQUENT];</span>
<a href="#l151.5"></a><span id="l151.5">           // The are no more results, build the list.</span>
<a href="#l151.6"></a><span id="l151.6">           this._buildCustom(_getString(&quot;taskbar.frequent.label&quot;), items);</span>
<a href="#l151.7"></a><span id="l151.7">           this._commitBuild();</span>
<a href="#l151.8"></a><span id="l151.8">           return;</span>
<a href="#l151.9"></a><span id="l151.9">         }</span>
<a href="#l151.10"></a><span id="l151.10"> </span>
<a href="#l151.11"></a><span id="l151.11">         let title = aResult.title || aResult.uri;</span>
<a href="#l151.12"></a><span id="l151.12" class="difflineminus">-        let faviconPageUri = Services.io.newURI(aResult.uri, null, null);</span>
<a href="#l151.13"></a><span id="l151.13" class="difflineplus">+        let faviconPageUri = Services.io.newURI(aResult.uri);</span>
<a href="#l151.14"></a><span id="l151.14">         let shortcut = this._getHandlerAppItem(title, title, aResult.uri, 2,</span>
<a href="#l151.15"></a><span id="l151.15">                                                faviconPageUri);</span>
<a href="#l151.16"></a><span id="l151.16">         items.appendElement(shortcut, false);</span>
<a href="#l151.17"></a><span id="l151.17">         this._frequentHashList.push(aResult.uri);</span>
<a href="#l151.18"></a><span id="l151.18">       },</span>
<a href="#l151.19"></a><span id="l151.19">       this</span>
<a href="#l151.20"></a><span id="l151.20">     );</span>
<a href="#l151.21"></a><span id="l151.21">   },</span>
<a href="#l151.22"></a><span id="l151.22" class="difflineat">@@ -404,17 +404,17 @@ var WinTaskbarJumpList =</span>
<a href="#l151.23"></a><span id="l151.23"> </span>
<a href="#l151.24"></a><span id="l151.24">         // Do not add items to recent that have already been added to frequent.</span>
<a href="#l151.25"></a><span id="l151.25">         if (this._frequentHashList &amp;&amp;</span>
<a href="#l151.26"></a><span id="l151.26">             this._frequentHashList.indexOf(aResult.uri) != -1) {</span>
<a href="#l151.27"></a><span id="l151.27">           return;</span>
<a href="#l151.28"></a><span id="l151.28">         }</span>
<a href="#l151.29"></a><span id="l151.29"> </span>
<a href="#l151.30"></a><span id="l151.30">         let title = aResult.title || aResult.uri;</span>
<a href="#l151.31"></a><span id="l151.31" class="difflineminus">-        let faviconPageUri = Services.io.newURI(aResult.uri, null, null);</span>
<a href="#l151.32"></a><span id="l151.32" class="difflineplus">+        let faviconPageUri = Services.io.newURI(aResult.uri);</span>
<a href="#l151.33"></a><span id="l151.33">         let shortcut = this._getHandlerAppItem(title, title, aResult.uri, 2,</span>
<a href="#l151.34"></a><span id="l151.34">                                                faviconPageUri);</span>
<a href="#l151.35"></a><span id="l151.35">         items.appendElement(shortcut, false);</span>
<a href="#l151.36"></a><span id="l151.36">         count++;</span>
<a href="#l151.37"></a><span id="l151.37">       },</span>
<a href="#l151.38"></a><span id="l151.38">       this</span>
<a href="#l151.39"></a><span id="l151.39">     );</span>
<a href="#l151.40"></a><span id="l151.40">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l152.1"></a><span id="l152.1" class="difflineminus">--- a/suite/modules/test/unit/test_browser_sanitizer.js</span>
<a href="#l152.2"></a><span id="l152.2" class="difflineplus">+++ b/suite/modules/test/unit/test_browser_sanitizer.js</span>
<a href="#l152.3"></a><span id="l152.3" class="difflineat">@@ -48,17 +48,17 @@ var sanTests = {</span>
<a href="#l152.4"></a><span id="l152.4">   },</span>
<a href="#l152.5"></a><span id="l152.5"> </span>
<a href="#l152.6"></a><span id="l152.6">   cookies: {</span>
<a href="#l152.7"></a><span id="l152.7">     desc: &quot;Cookie&quot;,</span>
<a href="#l152.8"></a><span id="l152.8">     setup: function() {</span>
<a href="#l152.9"></a><span id="l152.9">       Services.prefs.setIntPref(&quot;network.cookie.cookieBehavior&quot;, 0);</span>
<a href="#l152.10"></a><span id="l152.10">       var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l152.11"></a><span id="l152.11">                           .getService(Components.interfaces.nsIIOService);</span>
<a href="#l152.12"></a><span id="l152.12" class="difflineminus">-      this.uri = ios.newURI(&quot;http://sanitizer.test/&quot;, null, null);</span>
<a href="#l152.13"></a><span id="l152.13" class="difflineplus">+      this.uri = ios.newURI(&quot;http://sanitizer.test/&quot;);</span>
<a href="#l152.14"></a><span id="l152.14">       this.cs = Components.classes[&quot;@mozilla.org/cookieService;1&quot;]</span>
<a href="#l152.15"></a><span id="l152.15">                           .getService(Components.interfaces.nsICookieService);</span>
<a href="#l152.16"></a><span id="l152.16">       this.cs.setCookieString(this.uri, null, &quot;Sanitizer!&quot;, null);</span>
<a href="#l152.17"></a><span id="l152.17">     },</span>
<a href="#l152.18"></a><span id="l152.18"> </span>
<a href="#l152.19"></a><span id="l152.19">     check: function(aShouldBeCleared) {</span>
<a href="#l152.20"></a><span id="l152.20">       if (aShouldBeCleared)</span>
<a href="#l152.21"></a><span id="l152.21">         do_check_neq(this.cs.getCookieString(this.uri, null), &quot;Sanitizer!&quot;);</span>
<a href="#l152.22"></a><span id="l152.22" class="difflineat">@@ -67,17 +67,17 @@ var sanTests = {</span>
<a href="#l152.23"></a><span id="l152.23">     }</span>
<a href="#l152.24"></a><span id="l152.24">   },</span>
<a href="#l152.25"></a><span id="l152.25"> </span>
<a href="#l152.26"></a><span id="l152.26">   history: {</span>
<a href="#l152.27"></a><span id="l152.27">     desc: &quot;History&quot;,</span>
<a href="#l152.28"></a><span id="l152.28">     setup: function() {</span>
<a href="#l152.29"></a><span id="l152.29">       var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l152.30"></a><span id="l152.30">                           .getService(Components.interfaces.nsIIOService);</span>
<a href="#l152.31"></a><span id="l152.31" class="difflineminus">-      var uri = ios.newURI(&quot;http://sanitizer.test/&quot;, null, null);</span>
<a href="#l152.32"></a><span id="l152.32" class="difflineplus">+      var uri = ios.newURI(&quot;http://sanitizer.test/&quot;);</span>
<a href="#l152.33"></a><span id="l152.33">       yield promiseAddVisits({</span>
<a href="#l152.34"></a><span id="l152.34">         uri: uri,</span>
<a href="#l152.35"></a><span id="l152.35">         title: &quot;Sanitizer!&quot;</span>
<a href="#l152.36"></a><span id="l152.36">       });</span>
<a href="#l152.37"></a><span id="l152.37">     },</span>
<a href="#l152.38"></a><span id="l152.38"> </span>
<a href="#l152.39"></a><span id="l152.39">     check: function(aShouldBeCleared) {</span>
<a href="#l152.40"></a><span id="l152.40">       var rv = false;</span>
<a href="#l152.41"></a><span id="l152.41" class="difflineat">@@ -172,17 +172,17 @@ var sanTests = {</span>
<a href="#l152.42"></a><span id="l152.42">     }</span>
<a href="#l152.43"></a><span id="l152.43">   },</span>
<a href="#l152.44"></a><span id="l152.44"> </span>
<a href="#l152.45"></a><span id="l152.45">   downloads: {</span>
<a href="#l152.46"></a><span id="l152.46">     desc: &quot;Download&quot;,</span>
<a href="#l152.47"></a><span id="l152.47">     setup: function() {</span>
<a href="#l152.48"></a><span id="l152.48">       var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l152.49"></a><span id="l152.49">                           .getService(Components.interfaces.nsIIOService);</span>
<a href="#l152.50"></a><span id="l152.50" class="difflineminus">-      var uri = ios.newURI(&quot;http://sanitizer.test/&quot;, null, null);</span>
<a href="#l152.51"></a><span id="l152.51" class="difflineplus">+      var uri = ios.newURI(&quot;http://sanitizer.test/&quot;);</span>
<a href="#l152.52"></a><span id="l152.52">       var file = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l152.53"></a><span id="l152.53">                            .getService(Components.interfaces.nsIProperties)</span>
<a href="#l152.54"></a><span id="l152.54">                            .get(&quot;TmpD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l152.55"></a><span id="l152.55">       file.append(&quot;sanitizer.file&quot;);</span>
<a href="#l152.56"></a><span id="l152.56">       file.createUnique(Components.interfaces.nsIFile.NORMAL_FILE_TYPE, parseInt(&quot;0666&quot;, 8));</span>
<a href="#l152.57"></a><span id="l152.57">       var dest = ios.newFileURI(file);</span>
<a href="#l152.58"></a><span id="l152.58"> </span>
<a href="#l152.59"></a><span id="l152.59">       this.dm = Components.classes[&quot;@mozilla.org/download-manager;1&quot;]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l153.1"></a><span id="l153.1" class="difflineminus">--- a/suite/smile/src/smileApplication.js</span>
<a href="#l153.2"></a><span id="l153.2" class="difflineplus">+++ b/suite/smile/src/smileApplication.js</span>
<a href="#l153.3"></a><span id="l153.3" class="difflineat">@@ -51,17 +51,17 @@ var Utilities = {</span>
<a href="#l153.4"></a><span id="l153.4">     return this.windowMediator;</span>
<a href="#l153.5"></a><span id="l153.5">   },</span>
<a href="#l153.6"></a><span id="l153.6"> </span>
<a href="#l153.7"></a><span id="l153.7">   makeURI: function smileutil_makeURI(aSpec) {</span>
<a href="#l153.8"></a><span id="l153.8">     if (!aSpec)</span>
<a href="#l153.9"></a><span id="l153.9">       return null;</span>
<a href="#l153.10"></a><span id="l153.10">     var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l153.11"></a><span id="l153.11">                         .getService(Components.interfaces.nsIIOService);</span>
<a href="#l153.12"></a><span id="l153.12" class="difflineminus">-    return ios.newURI(aSpec, null, null);</span>
<a href="#l153.13"></a><span id="l153.13" class="difflineplus">+    return ios.newURI(aSpec);</span>
<a href="#l153.14"></a><span id="l153.14">   },</span>
<a href="#l153.15"></a><span id="l153.15"> </span>
<a href="#l153.16"></a><span id="l153.16">   free: function smileutil_free() {</span>
<a href="#l153.17"></a><span id="l153.17">     delete this.bookmarks;</span>
<a href="#l153.18"></a><span id="l153.18">     delete this.bookmarksObserver;</span>
<a href="#l153.19"></a><span id="l153.19">     delete this.annotations;</span>
<a href="#l153.20"></a><span id="l153.20">     delete this.history;</span>
<a href="#l153.21"></a><span id="l153.21">     delete this.windowMediator;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l154.1"></a><span id="l154.1" class="difflineminus">--- a/suite/smile/test/browser_Bookmarks.js</span>
<a href="#l154.2"></a><span id="l154.2" class="difflineplus">+++ b/suite/smile/test/browser_Bookmarks.js</span>
<a href="#l154.3"></a><span id="l154.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l154.4"></a><span id="l154.4"> var gLastFolderAction = &quot;&quot;;</span>
<a href="#l154.5"></a><span id="l154.5"> var gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l154.6"></a><span id="l154.6"> var gLastRootAction = &quot;&quot;;</span>
<a href="#l154.7"></a><span id="l154.7"> </span>
<a href="#l154.8"></a><span id="l154.8"> function url(spec) {</span>
<a href="#l154.9"></a><span id="l154.9" class="difflineminus">-  return Services.io.newURI(spec, null, null);</span>
<a href="#l154.10"></a><span id="l154.10" class="difflineplus">+  return Services.io.newURI(spec);</span>
<a href="#l154.11"></a><span id="l154.11"> }</span>
<a href="#l154.12"></a><span id="l154.12"> </span>
<a href="#l154.13"></a><span id="l154.13"> function test() {</span>
<a href="#l154.14"></a><span id="l154.14">   // Some very basic tests on the tags root</span>
<a href="#l154.15"></a><span id="l154.15">   var tags = Application.bookmarks.tags;</span>
<a href="#l154.16"></a><span id="l154.16">   ok(tags, &quot;Check access to bookmark tags root&quot;);</span>
<a href="#l154.17"></a><span id="l154.17">   ok(!tags.parent, &quot;Check tags parent (should be null)&quot;);</span>
<a href="#l154.18"></a><span id="l154.18"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

