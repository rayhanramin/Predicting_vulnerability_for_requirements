<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 17973:3f5395827a5cb2851509d9d9ba0d3197e9ada5ec</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 3f5395827a5cb2851509d9d9ba0d3197e9ada5ec" />
<meta property="og:url" content="/comm-central/rev/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec" />
<meta property="og:description" content="Bug 1151475 - Part 5: Remove use of expression closure from mail/test/mozmill/. r=mconley" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 3f5395827a5cb2851509d9d9ba0d3197e9ada5ec 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">shortlog</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">files</a> |
changeset |
<a href="/comm-central/raw-rev/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">raw</a>  | <a href="/comm-central/archive/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151475">Bug 1151475</a> - Part 5: Remove use of expression closure from mail/test/mozmill/. r=mconley
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#84;&#111;&#111;&#114;&#117;&#32;&#70;&#117;&#106;&#105;&#115;&#97;&#119;&#97;&#32;&#60;&#97;&#114;&#97;&#105;&#95;&#97;&#64;&#109;&#97;&#99;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 21 May 2015 10:10:20 +0900</td></tr>

<tr>
 <td>changeset 17973</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">3f5395827a5cb2851509d9d9ba0d3197e9ada5ec</a></td>
</tr>



<tr>
<td>parent 17972</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ecee3826ae9134ff1a4008dc884aed341293746a">ecee3826ae9134ff1a4008dc884aed341293746a</a>
</td>
</tr>

<tr>
<td>child 17974</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3318e9799d4506a114a810f228e6dd20c7ea4cca">3318e9799d4506a114a810f228e6dd20c7ea4cca</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">11046</a></td></tr>
<tr><td>push user</td><td>arai_a@mac.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 21 May 2015 01:11:23 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@3f5395827a5c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3f5395827a5cb2851509d9d9ba0d3197e9ada5ec">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3f5395827a5cb2851509d9d9ba0d3197e9ada5ec&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3f5395827a5cb2851509d9d9ba0d3197e9ada5ec&newProject=comm-central&newRevision=5eb45f784b5ba3e7e4b12f405a741b56906c0a95&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3f5395827a5cb2851509d9d9ba0d3197e9ada5ec&newProject=comm-central&newRevision=5eb45f784b5ba3e7e4b12f405a741b56906c0a95&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3f5395827a5cb2851509d9d9ba0d3197e9ada5ec&newProject=comm-central&newRevision=5eb45f784b5ba3e7e4b12f405a741b56906c0a95&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mconley%29&revcount=50">mconley</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151475">1151475</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151475">Bug 1151475</a> - Part 5: Remove use of expression closure from mail/test/mozmill/. r=mconley</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-mail-account-setup-wizard.js">mail/test/mozmill/account/test-mail-account-setup-wizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-mail-account-setup-wizard.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-mail-account-setup-wizard.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-mail-account-setup-wizard.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-mail-account-setup-wizard.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-mail-account-setup-wizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-retest-config.js">mail/test/mozmill/account/test-retest-config.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-retest-config.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-retest-config.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-retest-config.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-retest-config.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/account/test-retest-config.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/addrbook/test-address-book.js">mail/test/mozmill/addrbook/test-address-book.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/addrbook/test-address-book.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/addrbook/test-address-book.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/addrbook/test-address-book.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/addrbook/test-address-book.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/addrbook/test-address-book.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/attachment/test-attachment-events.js">mail/test/mozmill/attachment/test-attachment-events.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/attachment/test-attachment-events.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/attachment/test-attachment-events.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/attachment/test-attachment-events.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/attachment/test-attachment-events.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/attachment/test-attachment-events.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js">mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-js-content-policy.js">mail/test/mozmill/content-policy/test-js-content-policy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-js-content-policy.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-js-content-policy.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-js-content-policy.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-js-content-policy.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-js-content-policy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-view-source.js">mail/test/mozmill/content-policy/test-view-source.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-view-source.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-view-source.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-view-source.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-view-source.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-policy/test-view-source.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-blocked.js">mail/test/mozmill/content-tabs/test-plugin-blocked.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-blocked.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-blocked.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-blocked.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-blocked.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-blocked.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-crashing.js">mail/test/mozmill/content-tabs/test-plugin-crashing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-crashing.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-crashing.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-crashing.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-crashing.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-crashing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-outdated.js">mail/test/mozmill/content-tabs/test-plugin-outdated.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-outdated.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-outdated.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-outdated.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-outdated.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/content-tabs/test-plugin-outdated.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-recent-menu.js">mail/test/mozmill/folder-display/test-recent-menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-recent-menu.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-recent-menu.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-recent-menu.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-recent-menu.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-recent-menu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js">mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/instrumentation/test-instrument-setup.js">mail/test/mozmill/instrumentation/test-instrument-setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/instrumentation/test-instrument-setup.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/instrumentation/test-instrument-setup.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/instrumentation/test-instrument-setup.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/instrumentation/test-instrument-setup.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/instrumentation/test-instrument-setup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-header/test-message-header.js">mail/test/mozmill/message-header/test-message-header.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-header/test-message-header.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-header/test-message-header.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-header/test-message-header.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-header/test-message-header.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-header/test-message-header.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-window/test-autohide-menubar.js">mail/test/mozmill/message-window/test-autohide-menubar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-window/test-autohide-menubar.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-window/test-autohide-menubar.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-window/test-autohide-menubar.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-window/test-autohide-menubar.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/message-window/test-autohide-menubar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/newmailaccount/test-newmailaccount.js">mail/test/mozmill/newmailaccount/test-newmailaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/newmailaccount/test-newmailaccount.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/newmailaccount/test-newmailaccount.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/newmailaccount/test-newmailaccount.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/newmailaccount/test-newmailaccount.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/newmailaccount/test-newmailaccount.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js">mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/quick-filter-bar/test-display-issues.js">mail/test/mozmill/quick-filter-bar/test-display-issues.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/quick-filter-bar/test-display-issues.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/quick-filter-bar/test-display-issues.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/quick-filter-bar/test-display-issues.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/quick-filter-bar/test-display-issues.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/quick-filter-bar/test-display-issues.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-account-manager-helpers.js">mail/test/mozmill/shared-modules/test-account-manager-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-account-manager-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-account-manager-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-account-manager-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-account-manager-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-account-manager-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-compose-helpers.js">mail/test/mozmill/shared-modules/test-compose-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-compose-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-compose-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-compose-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-compose-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-compose-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">mail/test/mozmill/shared-modules/test-content-tab-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-dom-helpers.js">mail/test/mozmill/shared-modules/test-dom-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-dom-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-dom-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-dom-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-dom-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-dom-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-message-helpers.js">mail/test/mozmill/shared-modules/test-message-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-message-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-message-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-message-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-message-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-message-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">mail/test/mozmill/shared-modules/test-notificationbox-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-observer-helpers.js">mail/test/mozmill/shared-modules/test-observer-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-observer-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-observer-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-observer-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-observer-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-observer-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-window-helpers.js">mail/test/mozmill/shared-modules/test-window-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-window-helpers.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-window-helpers.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-window-helpers.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-window-helpers.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/shared-modules/test-window-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js">mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/subscribe/test-subscribe-news-filter.js">mail/test/mozmill/subscribe/test-subscribe-news-filter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/subscribe/test-subscribe-news-filter.js">file</a> |
<a href="/comm-central/annotate/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/subscribe/test-subscribe-news-filter.js">annotate</a> |
<a href="/comm-central/diff/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/subscribe/test-subscribe-news-filter.js">diff</a> |
<a href="/comm-central/comparison/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/subscribe/test-subscribe-news-filter.js">comparison</a> |
<a href="/comm-central/log/3f5395827a5cb2851509d9d9ba0d3197e9ada5ec/mail/test/mozmill/subscribe/test-subscribe-news-filter.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/test/mozmill/account/test-mail-account-setup-wizard.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-mail-account-setup-wizard.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -92,33 +92,33 @@ function test_mail_account_setup() {</span>
<a href="#l1.4"></a><span id="l1.4">     input_value(awc, user.password);</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l1.7"></a><span id="l1.7">     awc.e(&quot;next_button&quot;).click();</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     let config = null;</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">     // XXX: This should probably use a notification, once we fix bug 561143.</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    awc.waitFor(function () (awc.window.gEmailConfigWizard._currentConfig != null),</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    awc.waitFor(() =&gt; awc.window.gEmailConfigWizard._currentConfig != null,</span>
<a href="#l1.14"></a><span id="l1.14">                 &quot;Timeout waiting for current config to become non-null&quot;,</span>
<a href="#l1.15"></a><span id="l1.15">                 8000, 600);</span>
<a href="#l1.16"></a><span id="l1.16">     config = awc.window.gEmailConfigWizard.getConcreteConfig();</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18">     // Open the advanced settings (Account Manager) to create the account</span>
<a href="#l1.19"></a><span id="l1.19">     // immediately.  We use an invalid email/password so the setup will fail</span>
<a href="#l1.20"></a><span id="l1.20">     // anyway.</span>
<a href="#l1.21"></a><span id="l1.21">     open_advanced_settings_from_account_wizard(subtest_verify_account, awc);</span>
<a href="#l1.22"></a><span id="l1.22"> </span>
<a href="#l1.23"></a><span id="l1.23">     // Clean up</span>
<a href="#l1.24"></a><span id="l1.24">     Services.prefs.clearUserPref(pref_name);</span>
<a href="#l1.25"></a><span id="l1.25">   });</span>
<a href="#l1.26"></a><span id="l1.26"> }</span>
<a href="#l1.27"></a><span id="l1.27"> </span>
<a href="#l1.28"></a><span id="l1.28"> function subtest_verify_account(amc) {</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-  amc.waitFor(function () (amc.window.currentAccount != null),</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+  amc.waitFor(() =&gt; amc.window.currentAccount != null,</span>
<a href="#l1.31"></a><span id="l1.31">               &quot;Timeout waiting for currentAccount to become non-null&quot;);</span>
<a href="#l1.32"></a><span id="l1.32">   account = amc.window.currentAccount;</span>
<a href="#l1.33"></a><span id="l1.33">   let identity = account.defaultIdentity;</span>
<a href="#l1.34"></a><span id="l1.34">   incoming = account.incomingServer;</span>
<a href="#l1.35"></a><span id="l1.35">   outgoing = MailServices.smtp.getServerByKey(identity.smtpServerKey);</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37">   let config = {</span>
<a href="#l1.38"></a><span id="l1.38">     &quot;incoming server username&quot;: {</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineat">@@ -180,22 +180,22 @@ function test_bad_password_uses_old_sett</span>
<a href="#l1.40"></a><span id="l1.40">       awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l1.41"></a><span id="l1.41">       input_value(awc, user.password);</span>
<a href="#l1.42"></a><span id="l1.42"> </span>
<a href="#l1.43"></a><span id="l1.43">       // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l1.44"></a><span id="l1.44">       awc.e(&quot;next_button&quot;).click();</span>
<a href="#l1.45"></a><span id="l1.45"> </span>
<a href="#l1.46"></a><span id="l1.46">       let config = null;</span>
<a href="#l1.47"></a><span id="l1.47"> </span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-      awc.waitFor(function () (this.disabled == false &amp;&amp; this.hidden == false),</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+      awc.waitFor(function() { return this.disabled == false &amp;&amp; this.hidden == false; },</span>
<a href="#l1.50"></a><span id="l1.50">                   &quot;Timeout waiting for create button to be visible and active&quot;,</span>
<a href="#l1.51"></a><span id="l1.51">                   8000, 600, awc.e(&quot;create_button&quot;));</span>
<a href="#l1.52"></a><span id="l1.52">       awc.e(&quot;create_button&quot;).click();</span>
<a href="#l1.53"></a><span id="l1.53"> </span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-      awc.waitFor(function () (this.disabled == false),</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+      awc.waitFor(function() { return this.disabled == false; },</span>
<a href="#l1.56"></a><span id="l1.56">                   &quot;Timeout waiting for create button to be visible and active&quot;,</span>
<a href="#l1.57"></a><span id="l1.57">                   8000, 600, awc.e(&quot;create_button&quot;));</span>
<a href="#l1.58"></a><span id="l1.58">       awc.e(&quot;create_button&quot;).click();</span>
<a href="#l1.59"></a><span id="l1.59">       awc.e(&quot;manual-edit_button&quot;).click();</span>
<a href="#l1.60"></a><span id="l1.60"> </span>
<a href="#l1.61"></a><span id="l1.61">       // Make sure all the values are the same as in the user object.</span>
<a href="#l1.62"></a><span id="l1.62">       awc.sleep(1000);</span>
<a href="#l1.63"></a><span id="l1.63">       assert_equals(awc.e(&quot;outgoing_hostname&quot;).value, user.outgoingHost,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/test/mozmill/account/test-retest-config.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-retest-config.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -55,39 +55,39 @@ function test_re_test_config() {</span>
<a href="#l2.4"></a><span id="l2.4">     input_value(awc, user.name);</span>
<a href="#l2.5"></a><span id="l2.5">     awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l2.6"></a><span id="l2.6">     input_value(awc, user.email);</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">     // Click &quot;continue&quot; button</span>
<a href="#l2.9"></a><span id="l2.9">     awc.e(&quot;next_button&quot;).click();</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">     // Wait for 'edit' button to be enabled</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    awc.waitFor(function () (this.disabled == false &amp;&amp; this.hidden == false),</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    awc.waitFor(function() { return this.disabled == false &amp;&amp; this.hidden == false; },</span>
<a href="#l2.14"></a><span id="l2.14">                 &quot;Timeout waiting for edit button to be enabled&quot;,</span>
<a href="#l2.15"></a><span id="l2.15">                 8000, 600, awc.e(&quot;create_button&quot;));</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">     awc.e(&quot;manual-edit_button&quot;).click();</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">     // Click &quot;re-test&quot; button</span>
<a href="#l2.20"></a><span id="l2.20">     awc.e(&quot;half-manual-test_button&quot;).click();</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-    awc.waitFor(function () (this.disabled == false),</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+    awc.waitFor(function () { return this.disabled == false; },</span>
<a href="#l2.24"></a><span id="l2.24">                 &quot;Timeout waiting for re-test button to be enabled&quot;,</span>
<a href="#l2.25"></a><span id="l2.25">                 20000, 600, awc.e(&quot;half-manual-test_button&quot;));</span>
<a href="#l2.26"></a><span id="l2.26"> </span>
<a href="#l2.27"></a><span id="l2.27">     // There used to be a &quot;start over&quot; button (line commented out below). Now just</span>
<a href="#l2.28"></a><span id="l2.28">     // changing the value of the email field does the trick.</span>
<a href="#l2.29"></a><span id="l2.29">     awc.e(&quot;realname&quot;).focus();</span>
<a href="#l2.30"></a><span id="l2.30">     awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l2.31"></a><span id="l2.31">     input_value(awc, user.altEmail);</span>
<a href="#l2.32"></a><span id="l2.32">     awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34">     // Wait for the &quot;continue&quot; button to be back, which means we're back to the</span>
<a href="#l2.35"></a><span id="l2.35">     // original state.</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-    awc.waitFor(function () (this.hidden == false),</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+    awc.waitFor(function() { return this.hidden == false; },</span>
<a href="#l2.38"></a><span id="l2.38">                 &quot;Timeout waiting for continue button to be visible&quot;,</span>
<a href="#l2.39"></a><span id="l2.39">                 20000, 600, awc.e(&quot;next_button&quot;));</span>
<a href="#l2.40"></a><span id="l2.40"> </span>
<a href="#l2.41"></a><span id="l2.41">     awc.e(&quot;next_button&quot;).click();</span>
<a href="#l2.42"></a><span id="l2.42"> </span>
<a href="#l2.43"></a><span id="l2.43">     // Previously, we'd switched to the manual editing state. Now we've started</span>
<a href="#l2.44"></a><span id="l2.44">     // over, we should make sure the information is presented back in its original</span>
<a href="#l2.45"></a><span id="l2.45">     // &quot;automatic&quot; mode.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/test/mozmill/addrbook/test-address-book.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/test/mozmill/addrbook/test-address-book.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -61,17 +61,17 @@ function setupModule(module)</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5">   mListD = create_mailing_list(&quot;ML D&quot;);</span>
<a href="#l3.6"></a><span id="l3.6">   addrBook3.addMailList(mListD);</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">   // There are 8 address book lists (All, Personal, AB 1, AB 2, AB 3, AB 4, LDAP Book</span>
<a href="#l3.9"></a><span id="l3.9">   // and Collected Address Book.  So let's ensure that those address books</span>
<a href="#l3.10"></a><span id="l3.10">   // exist in the tree view before executing our tests.</span>
<a href="#l3.11"></a><span id="l3.11">   abController.waitFor(</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    function () (abController.window.gDirectoryTreeView.rowCount == 8),</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    () =&gt; abController.window.gDirectoryTreeView.rowCount == 8,</span>
<a href="#l3.14"></a><span id="l3.14">     &quot;Timeout waiting for all 8 rows in address books list to show up in the tree view&quot;,</span>
<a href="#l3.15"></a><span id="l3.15">     1000, 10);</span>
<a href="#l3.16"></a><span id="l3.16"> }</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18"> /* Test that the address book manager automatically sorts</span>
<a href="#l3.19"></a><span id="l3.19">  * address books.</span>
<a href="#l3.20"></a><span id="l3.20">  *</span>
<a href="#l3.21"></a><span id="l3.21">  * Currently, we sort address books as follows:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/test/mozmill/attachment/test-attachment-events.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/test/mozmill/attachment/test-attachment-events.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -244,17 +244,17 @@ function test_attachments_removed_on_mul</span>
<a href="#l4.4"></a><span id="l4.4">   add_attachments(cw, [&quot;http://www.example.com/1&quot;,</span>
<a href="#l4.5"></a><span id="l4.5">                        &quot;http://www.example.com/2&quot;,</span>
<a href="#l4.6"></a><span id="l4.6">                        &quot;http://www.example.com/3&quot;]);</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8">   // Select all three attachments, and remove them.</span>
<a href="#l4.9"></a><span id="l4.9">   let removedAttachmentItems = select_attachments(cw, 0, 2);</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">   let removedAttachmentUrls = removedAttachmentItems.map(</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    function(aAttachment) aAttachment.attachment.url</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    aAttachment =&gt; aAttachment.attachment.url</span>
<a href="#l4.14"></a><span id="l4.14">   );</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">   cw.window.goDoCommand(&quot;cmd_delete&quot;);</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18">   // We should have seen the attachments-removed event exactly once.</span>
<a href="#l4.19"></a><span id="l4.19">   assert_equals(1, eventCount);</span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21">   // Now let's make sure we got passed back the right attachment items</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -75,17 +75,17 @@ function test_upload_cancel_repeat() {</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">   for (let i = 0; i &lt; kAttempts; i++) {</span>
<a href="#l5.6"></a><span id="l5.6">     listener = null;</span>
<a href="#l5.7"></a><span id="l5.7">     started = false;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">     // Select the attachment, and choose to convert it to a Filelink</span>
<a href="#l5.10"></a><span id="l5.10">     let attachmentitem = select_attachments(cw, 0)[0];</span>
<a href="#l5.11"></a><span id="l5.11">     cw.window.convertSelectedToCloudAttachment(provider);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    cw.waitFor(function() started);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+    cw.waitFor(() =&gt; started);</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15">     assert_can_cancel_upload(cw, provider, listener, file);</span>
<a href="#l5.16"></a><span id="l5.16">   }</span>
<a href="#l5.17"></a><span id="l5.17"> }</span>
<a href="#l5.18"></a><span id="l5.18"> </span>
<a href="#l5.19"></a><span id="l5.19"> /**</span>
<a href="#l5.20"></a><span id="l5.20">  * Test that we can cancel a whole series of files being uploaded at once.</span>
<a href="#l5.21"></a><span id="l5.21">  */</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -155,17 +155,17 @@ function assert_can_cancel_upload(aContr</span>
<a href="#l5.23"></a><span id="l5.23"> </span>
<a href="#l5.24"></a><span id="l5.24">   assert_false(cmd.hidden);</span>
<a href="#l5.25"></a><span id="l5.25">   assert_false(cmd.disabled);</span>
<a href="#l5.26"></a><span id="l5.26">   let cancelItem = aController.eid(&quot;composeAttachmentContext_cancelUploadItem&quot;);</span>
<a href="#l5.27"></a><span id="l5.27">   aController.click(cancelItem);</span>
<a href="#l5.28"></a><span id="l5.28"> </span>
<a href="#l5.29"></a><span id="l5.29">   // Close the popup, and wait for the cancellation to be complete.</span>
<a href="#l5.30"></a><span id="l5.30">   close_popup(aController, aController.eid(kAttachmentItemContextID));</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-  aController.waitFor(function() cancelled);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+  aController.waitFor(() =&gt; cancelled);</span>
<a href="#l5.33"></a><span id="l5.33"> }</span>
<a href="#l5.34"></a><span id="l5.34"> </span>
<a href="#l5.35"></a><span id="l5.35"> /**</span>
<a href="#l5.36"></a><span id="l5.36">  * A helper function to find the attachment bucket index for a particular</span>
<a href="#l5.37"></a><span id="l5.37">  * nsILocalFile. Returns null if no attachmentitem is found.</span>
<a href="#l5.38"></a><span id="l5.38">  *</span>
<a href="#l5.39"></a><span id="l5.39">  * @param aController the compose window controller to use.</span>
<a href="#l5.40"></a><span id="l5.40">  * @param aFile the nsILocalFile to search for.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/test/mozmill/cloudfile/test-cloudfile-backend-hightail.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -82,28 +82,28 @@ function test_simple_case() {</span>
<a href="#l6.4"></a><span id="l6.4">     Services.obs.addObserver(obs, topic, false);</span>
<a href="#l6.5"></a><span id="l6.5">   }</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7">   let requestObserver = gObsManager.create(&quot;test_simple_case - Upload 1&quot;);</span>
<a href="#l6.8"></a><span id="l6.8">   let file = getFile(&quot;./data/testFile1&quot;, __file__);</span>
<a href="#l6.9"></a><span id="l6.9">   let provider = gServer.getPreparedBackend(&quot;someAccountKey&quot;);</span>
<a href="#l6.10"></a><span id="l6.10">   provider.uploadFile(file, requestObserver);</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  mc.waitFor(function () requestObserver.success);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  mc.waitFor( () =&gt; requestObserver.success);</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">   let urlForFile = provider.urlForFile(file);</span>
<a href="#l6.16"></a><span id="l6.16">   assert_equals(kExpectedUrl, urlForFile);</span>
<a href="#l6.17"></a><span id="l6.17">   assert_equals(1, obs.numSightings(kUploadFile));</span>
<a href="#l6.18"></a><span id="l6.18">   assert_equals(1, obs.numSightings(kGetFileURL));</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">   gServer.planForUploadFile(&quot;testFile1&quot;);</span>
<a href="#l6.21"></a><span id="l6.21">   gServer.planForGetFileURL(&quot;testFile1&quot;, {url: kExpectedUrl});</span>
<a href="#l6.22"></a><span id="l6.22">   requestObserver = gObsManager.create(&quot;test_simple_case - Upload 2&quot;);</span>
<a href="#l6.23"></a><span id="l6.23">   provider.uploadFile(file, requestObserver);</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-  mc.waitFor(function () requestObserver.success);</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+  mc.waitFor(() =&gt; requestObserver.success);</span>
<a href="#l6.26"></a><span id="l6.26">   urlForFile = provider.urlForFile(file);</span>
<a href="#l6.27"></a><span id="l6.27">   assert_equals(kExpectedUrl, urlForFile);</span>
<a href="#l6.28"></a><span id="l6.28"> </span>
<a href="#l6.29"></a><span id="l6.29">   assert_equals(2, obs.numSightings(kUploadFile));</span>
<a href="#l6.30"></a><span id="l6.30">   assert_equals(2, obs.numSightings(kGetFileURL));</span>
<a href="#l6.31"></a><span id="l6.31"> </span>
<a href="#l6.32"></a><span id="l6.32">   for each (let [, topic] in Iterator(kTopics)) {</span>
<a href="#l6.33"></a><span id="l6.33">     Services.obs.removeObserver(obs, topic);</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineat">@@ -135,17 +135,17 @@ function test_chained_uploads() {</span>
<a href="#l6.35"></a><span id="l6.35">     let requestObserver = gObsManager.create(&quot;test_chained_uploads for filename &quot; + aFilename);</span>
<a href="#l6.36"></a><span id="l6.36">     let file = getFile(&quot;./data/&quot; + aFilename, __file__);</span>
<a href="#l6.37"></a><span id="l6.37">     files.push(file);</span>
<a href="#l6.38"></a><span id="l6.38">     provider.uploadFile(file, requestObserver);</span>
<a href="#l6.39"></a><span id="l6.39">     return requestObserver;</span>
<a href="#l6.40"></a><span id="l6.40">   });</span>
<a href="#l6.41"></a><span id="l6.41"> </span>
<a href="#l6.42"></a><span id="l6.42">   mc.waitFor(function() {</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-    return observers.every(function(aListener) aListener.success);</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+    return observers.every(aListener =&gt; aListener.success);</span>
<a href="#l6.45"></a><span id="l6.45">   }, &quot;Timed out waiting for chained uploads to complete.&quot;, 10000);</span>
<a href="#l6.46"></a><span id="l6.46"> </span>
<a href="#l6.47"></a><span id="l6.47">   assert_equals(kFilenames.length, obs.numSightings(kUploadFile));</span>
<a href="#l6.48"></a><span id="l6.48"> </span>
<a href="#l6.49"></a><span id="l6.49">   for (let [index, filename] in Iterator(kFilenames)) {</span>
<a href="#l6.50"></a><span id="l6.50">     assert_equals(obs.data[kUploadFile][index], filename);</span>
<a href="#l6.51"></a><span id="l6.51">     let file = getFile(&quot;./data/&quot; + filename, __file__);</span>
<a href="#l6.52"></a><span id="l6.52">     let expectedUriForFile = kExpectedUrlRoot + filename;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineat">@@ -164,27 +164,27 @@ function test_deleting_uploads() {</span>
<a href="#l6.54"></a><span id="l6.54">   const kFilename = &quot;testFile1&quot;;</span>
<a href="#l6.55"></a><span id="l6.55">   let provider = gServer.getPreparedBackend(&quot;someAccountKey&quot;);</span>
<a href="#l6.56"></a><span id="l6.56">   // Upload a file</span>
<a href="#l6.57"></a><span id="l6.57"> </span>
<a href="#l6.58"></a><span id="l6.58">   let file = getFile(&quot;./data/&quot; + kFilename, __file__);</span>
<a href="#l6.59"></a><span id="l6.59">   gServer.planForUploadFile(kFilename);</span>
<a href="#l6.60"></a><span id="l6.60">   let requestObserver = gObsManager.create(&quot;test_deleting_uploads - upload 1&quot;);</span>
<a href="#l6.61"></a><span id="l6.61">   provider.uploadFile(file, requestObserver);</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-  mc.waitFor(function() requestObserver.success);</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+  mc.waitFor(() =&gt; requestObserver.success);</span>
<a href="#l6.64"></a><span id="l6.64"> </span>
<a href="#l6.65"></a><span id="l6.65">   // Try deleting a file</span>
<a href="#l6.66"></a><span id="l6.66">   let obs = new ObservationRecorder();</span>
<a href="#l6.67"></a><span id="l6.67">   obs.planFor(kDeleteFile)</span>
<a href="#l6.68"></a><span id="l6.68">   Services.obs.addObserver(obs, kDeleteFile, false);</span>
<a href="#l6.69"></a><span id="l6.69"> </span>
<a href="#l6.70"></a><span id="l6.70">   gServer.planForDeleteFile(kFilename);</span>
<a href="#l6.71"></a><span id="l6.71">   let deleteObserver = gObsManager.create(&quot;test_deleting_uploads - delete 1&quot;);</span>
<a href="#l6.72"></a><span id="l6.72">   provider.deleteFile(file, deleteObserver);</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-  mc.waitFor(function() deleteObserver.success);</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+  mc.waitFor(() =&gt; deleteObserver.success);</span>
<a href="#l6.75"></a><span id="l6.75"> </span>
<a href="#l6.76"></a><span id="l6.76">   // Check to make sure the file was deleted on the server</span>
<a href="#l6.77"></a><span id="l6.77">   assert_equals(1, obs.numSightings(kDeleteFile));</span>
<a href="#l6.78"></a><span id="l6.78">   assert_equals(obs.data[kDeleteFile][0], kFilename);</span>
<a href="#l6.79"></a><span id="l6.79">   Services.obs.removeObserver(obs, kDeleteFile);</span>
<a href="#l6.80"></a><span id="l6.80"> }</span>
<a href="#l6.81"></a><span id="l6.81"> </span>
<a href="#l6.82"></a><span id="l6.82"> /**</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineat">@@ -229,17 +229,17 @@ function test_create_existing_account() </span>
<a href="#l6.84"></a><span id="l6.84">     onStopRequest: function(aRequest, aContext, aStatusCode) {</span>
<a href="#l6.85"></a><span id="l6.85">       assert_true(aContext instanceof Ci.nsIMsgCloudFileProvider);</span>
<a href="#l6.86"></a><span id="l6.86">       assert_equals(aStatusCode, Components.results.NS_OK);</span>
<a href="#l6.87"></a><span id="l6.87">       done = true;</span>
<a href="#l6.88"></a><span id="l6.88">     },</span>
<a href="#l6.89"></a><span id="l6.89">   }</span>
<a href="#l6.90"></a><span id="l6.90"> </span>
<a href="#l6.91"></a><span id="l6.91">   provider.createExistingAccount(myObs);</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-  mc.waitFor(function() done);</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+  mc.waitFor(() =&gt; done);</span>
<a href="#l6.94"></a><span id="l6.94">   gMockAuthPromptReg.unregister();</span>
<a href="#l6.95"></a><span id="l6.95"> }</span>
<a href="#l6.96"></a><span id="l6.96"> </span>
<a href="#l6.97"></a><span id="l6.97"> function test_delete_refreshes_stale_token() {</span>
<a href="#l6.98"></a><span id="l6.98">   const kFilename = &quot;testFile1&quot;;</span>
<a href="#l6.99"></a><span id="l6.99">   const kUserEmail = &quot;test@example.com&quot;;</span>
<a href="#l6.100"></a><span id="l6.100"> </span>
<a href="#l6.101"></a><span id="l6.101">   // Stop the default Hightail mock server, and create our own.</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineat">@@ -263,32 +263,32 @@ function test_delete_refreshes_stale_tok</span>
<a href="#l6.103"></a><span id="l6.103">   remember_hightail_credentials(kUserEmail, &quot;somePassword&quot;);</span>
<a href="#l6.104"></a><span id="l6.104"> </span>
<a href="#l6.105"></a><span id="l6.105">   // Get a prepared provider...</span>
<a href="#l6.106"></a><span id="l6.106">   let provider = gServer.getPreparedBackend(&quot;someAccountKey&quot;);</span>
<a href="#l6.107"></a><span id="l6.107">   let file = getFile(&quot;./data/&quot; + kFilename, __file__);</span>
<a href="#l6.108"></a><span id="l6.108">   gServer.planForUploadFile(kFilename);</span>
<a href="#l6.109"></a><span id="l6.109">   let requestObserver = gObsManager.create(&quot;test_delete_refreshes_stale_token - upload 1&quot;);</span>
<a href="#l6.110"></a><span id="l6.110">   provider.uploadFile(file, requestObserver);</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineminus">-  mc.waitFor(function() requestObserver.success);</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineplus">+  mc.waitFor(() =&gt; requestObserver.success);</span>
<a href="#l6.113"></a><span id="l6.113"> </span>
<a href="#l6.114"></a><span id="l6.114">   // At this point, we should not have seen any auth attempts.</span>
<a href="#l6.115"></a><span id="l6.115">   assert_equals(gServer.auth.count, 0,</span>
<a href="#l6.116"></a><span id="l6.116">                 &quot;Should not have seen any authorization attempts &quot;</span>
<a href="#l6.117"></a><span id="l6.117">                 + &quot;yet&quot;);</span>
<a href="#l6.118"></a><span id="l6.118"> </span>
<a href="#l6.119"></a><span id="l6.119">   // Now delete the file, and get the stale auth token warning.</span>
<a href="#l6.120"></a><span id="l6.120">   gServer.planForDeleteFile(kFilename);</span>
<a href="#l6.121"></a><span id="l6.121">   // We have to pass an observer, so we'll just generate a dummy one.</span>
<a href="#l6.122"></a><span id="l6.122">   let deleteObserver = new SimpleRequestObserver();</span>
<a href="#l6.123"></a><span id="l6.123">   provider.deleteFile(file, deleteObserver);</span>
<a href="#l6.124"></a><span id="l6.124"> </span>
<a href="#l6.125"></a><span id="l6.125">   // Now, since the token was stale, we should see us hit authentication</span>
<a href="#l6.126"></a><span id="l6.126">   // again.</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineminus">-  mc.waitFor(function() gServer.auth.count &gt; 0,</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineplus">+  mc.waitFor(() =&gt; gServer.auth.count &gt; 0,</span>
<a href="#l6.129"></a><span id="l6.129">              &quot;Timed out waiting for authorization attempt&quot;);</span>
<a href="#l6.130"></a><span id="l6.130"> }</span>
<a href="#l6.131"></a><span id="l6.131"> </span>
<a href="#l6.132"></a><span id="l6.132"> /**</span>
<a href="#l6.133"></a><span id="l6.133">  * Test for bug 771132 - if Hightail returns malformed URLs, prefix with</span>
<a href="#l6.134"></a><span id="l6.134">  * https://.</span>
<a href="#l6.135"></a><span id="l6.135">  */</span>
<a href="#l6.136"></a><span id="l6.136"> function test_bug771132_fix_no_scheme() {</span>
<a href="#l6.137"></a><span id="l6.137" class="difflineat">@@ -300,24 +300,24 @@ function test_bug771132_fix_no_scheme() </span>
<a href="#l6.138"></a><span id="l6.138">   gServer.planForUploadFile(&quot;testFile1&quot;);</span>
<a href="#l6.139"></a><span id="l6.139">   gServer.planForGetFileURL(&quot;testFile1&quot;, {url: kMalformedUrl});</span>
<a href="#l6.140"></a><span id="l6.140"> </span>
<a href="#l6.141"></a><span id="l6.141">   let requestObserver = gObsManager.create(&quot;test_simple_case - Upload 1&quot;);</span>
<a href="#l6.142"></a><span id="l6.142">   let file = getFile(&quot;./data/testFile1&quot;, __file__);</span>
<a href="#l6.143"></a><span id="l6.143">   let provider = gServer.getPreparedBackend(&quot;someAccountKey&quot;);</span>
<a href="#l6.144"></a><span id="l6.144">   provider.uploadFile(file, requestObserver);</span>
<a href="#l6.145"></a><span id="l6.145"> </span>
<a href="#l6.146"></a><span id="l6.146" class="difflineminus">-  mc.waitFor(function () requestObserver.success);</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineplus">+  mc.waitFor(() =&gt; requestObserver.success);</span>
<a href="#l6.148"></a><span id="l6.148"> </span>
<a href="#l6.149"></a><span id="l6.149">   let urlForFile = provider.urlForFile(file);</span>
<a href="#l6.150"></a><span id="l6.150">   assert_equals(kExpectedUrl, urlForFile);</span>
<a href="#l6.151"></a><span id="l6.151"> </span>
<a href="#l6.152"></a><span id="l6.152">   // Now make sure that we don't accidentally prefix with https when there's</span>
<a href="#l6.153"></a><span id="l6.153">   // already a scheme.</span>
<a href="#l6.154"></a><span id="l6.154">   gServer.planForUploadFile(&quot;testFile1&quot;);</span>
<a href="#l6.155"></a><span id="l6.155">   gServer.planForGetFileURL(&quot;testFile1&quot;, {url: kExpectedUrl});</span>
<a href="#l6.156"></a><span id="l6.156">   requestObserver = gObsManager.create(&quot;test_simple_case - Upload 2&quot;);</span>
<a href="#l6.157"></a><span id="l6.157">   provider.uploadFile(file, requestObserver);</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineminus">-  mc.waitFor(function () requestObserver.success);</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineplus">+  mc.waitFor(() =&gt; requestObserver.success);</span>
<a href="#l6.160"></a><span id="l6.160"> </span>
<a href="#l6.161"></a><span id="l6.161">   urlForFile = provider.urlForFile(file);</span>
<a href="#l6.162"></a><span id="l6.162">   assert_equals(kExpectedUrl, urlForFile);</span>
<a href="#l6.163"></a><span id="l6.163"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/test/mozmill/content-policy/test-js-content-policy.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/test/mozmill/content-policy/test-js-content-policy.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -147,19 +147,19 @@ function checkJsInFeedContent() {</span>
<a href="#l7.4"></a><span id="l7.4">                 &quot;Selected Message Header is not the same as generated header&quot;);</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6">   wait_for_message_display_completion();</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8">   // The above just ensures local &quot;inline&quot; content have loaded. We need to wait</span>
<a href="#l7.9"></a><span id="l7.9">   // for the remote content to load too before we check anything.</span>
<a href="#l7.10"></a><span id="l7.10">   let mc = mozmill.getMail3PaneController();</span>
<a href="#l7.11"></a><span id="l7.11">   let feedUrl = url + &quot;remote-noscript.html&quot;;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  mc.waitFor(function() mc.window.content.wrappedJSObject.location.href == feedUrl &amp;&amp; </span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-                        mc.window.content.wrappedJSObject.document &amp;&amp;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-                        mc.window.content.wrappedJSObject.document.querySelector(&quot;body&quot;) != null,</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+  mc.waitFor(() =&gt; mc.window.content.wrappedJSObject.location.href == feedUrl &amp;&amp;</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+                   mc.window.content.wrappedJSObject.document &amp;&amp;</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+                   mc.window.content.wrappedJSObject.document.querySelector(&quot;body&quot;) != null,</span>
<a href="#l7.18"></a><span id="l7.18">              &quot;Timeout waiting for remote feed doc to load; url=&quot; + mc.window.content.wrappedJSObject.location);</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20">   if (!mc.window.content.wrappedJSObject.jsIsTurnedOn)</span>
<a href="#l7.21"></a><span id="l7.21">     throw new Error(&quot;JS is turned off for remote feed content - it should be on.&quot;);</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23">   let noscript = mc.window.content.wrappedJSObject.document</span>
<a href="#l7.24"></a><span id="l7.24">                    .getElementsByTagName(&quot;noscript&quot;)[0];</span>
<a href="#l7.25"></a><span id="l7.25">   let display = mc.window.getComputedStyle(noscript).getPropertyValue(&quot;display&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/mozmill/content-policy/test-view-source.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/mozmill/content-policy/test-view-source.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -73,31 +73,31 @@ function test_view_source_reload() {</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5">   let selMsg = select_click_row(0);</span>
<a href="#l8.6"></a><span id="l8.6">   assert_true(msg == selMsg, &quot;Selected msg isn't the same as the generated one.&quot;);</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">   plan_for_new_window(&quot;navigator:view-source&quot;);</span>
<a href="#l8.9"></a><span id="l8.9">   mc.keypress(null, &quot;U&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l8.10"></a><span id="l8.10">   let vsc = wait_for_new_window(&quot;navigator:view-source&quot;);</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  vsc.waitFor(function() vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  vsc.waitFor(() =&gt; vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l8.14"></a><span id="l8.14">               &quot;Timeout waiting for the latin1 view-source document to load.&quot;);</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16">   let source = vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;).textContent;</span>
<a href="#l8.17"></a><span id="l8.17">   if (!source.includes(contentLatin1))</span>
<a href="#l8.18"></a><span id="l8.18">     throw new Error(&quot;View source didn't contain the latin1 text;\n&quot; +</span>
<a href="#l8.19"></a><span id="l8.19">                     contentLatin1 + &quot;\n&quot; + source);</span>
<a href="#l8.20"></a><span id="l8.20"> </span>
<a href="#l8.21"></a><span id="l8.21">   let doc = vsc.e(&quot;content&quot;).contentDocument; // keep a ref to the latin1 doc</span>
<a href="#l8.22"></a><span id="l8.22"> </span>
<a href="#l8.23"></a><span id="l8.23">   vsc.click_menus_in_sequence(vsc.e(&quot;viewmenu-popup&quot;),</span>
<a href="#l8.24"></a><span id="l8.24">     [{id: &quot;charsetMenu&quot;}, {label: &quot;Unicode (UTF-8)&quot;}]);</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-  vsc.waitFor(function() vsc.e(&quot;content&quot;).contentDocument != doc &amp;&amp;</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-                         vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+  vsc.waitFor(() =&gt; vsc.e(&quot;content&quot;).contentDocument != doc &amp;&amp;</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+                    vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l8.30"></a><span id="l8.30">               &quot;Timeout waiting utf-8 encoded view-source document to load.&quot;);</span>
<a href="#l8.31"></a><span id="l8.31"> </span>
<a href="#l8.32"></a><span id="l8.32">   source = vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;).textContent;</span>
<a href="#l8.33"></a><span id="l8.33">   if (!source.includes(contentUTF8))</span>
<a href="#l8.34"></a><span id="l8.34">     throw new Error(&quot;View source didn't contain the utf-8 text;\n&quot; +</span>
<a href="#l8.35"></a><span id="l8.35">                     contentUTF8 + &quot;\n&quot; + source);</span>
<a href="#l8.36"></a><span id="l8.36"> </span>
<a href="#l8.37"></a><span id="l8.37">   close_window(vsc);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-plugin-blocked.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-plugin-blocked.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -72,17 +72,17 @@ function test_blocklisted_plugin_notific</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5">   mc.waitFor(function () { return testDone; }, &quot;Plugin test taking too long&quot;,</span>
<a href="#l9.6"></a><span id="l9.6">              100000, 1000);</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">   let finishedReset = false;</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10">   resetBlocklist(mc, function() { finishedReset = true; });</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  mc.waitFor(function () finishedReset, &quot;Reset blocklist took too long&quot;);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  mc.waitFor(() =&gt; finishedReset, &quot;Reset blocklist took too long&quot;);</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">   plugin.enabledState = pluginState;</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17">   Services.prefs.clearUserPref(&quot;extensions.blocklist.suppressUI&quot;);</span>
<a href="#l9.18"></a><span id="l9.18"> }</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20"> function subtest_blocklisted_plugin_notification() {</span>
<a href="#l9.21"></a><span id="l9.21">   // Prepare to capture the notification bar</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-plugin-crashing.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-plugin-crashing.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -233,17 +233,17 @@ function test_crashed_plugin_notificatio</span>
<a href="#l10.4"></a><span id="l10.4">   let statusString = submitDiv.getAttribute(&quot;status&quot;);</span>
<a href="#l10.5"></a><span id="l10.5">   if (!statusString) {</span>
<a href="#l10.6"></a><span id="l10.6">     let submitStatusChanged = false;</span>
<a href="#l10.7"></a><span id="l10.7">     let observer = new gContentWindow.MutationObserver(function handleMutations(mutations) {</span>
<a href="#l10.8"></a><span id="l10.8">       submitStatusChanged = true;</span>
<a href="#l10.9"></a><span id="l10.9">     });</span>
<a href="#l10.10"></a><span id="l10.10">     observer.observe(submitDiv, { attributes: true });</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    mc.waitFor(function() submitStatusChanged,</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+    mc.waitFor(() =&gt; submitStatusChanged,</span>
<a href="#l10.14"></a><span id="l10.14">                &quot;Timed out: Notification existed and did not disappear.&quot;);</span>
<a href="#l10.15"></a><span id="l10.15">     observer.disconnect();</span>
<a href="#l10.16"></a><span id="l10.16">   }</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18">   // Depending on the environment we're running this test on,</span>
<a href="#l10.19"></a><span id="l10.19">   // the status attribute might be &quot;noReport&quot; or &quot;please&quot;.</span>
<a href="#l10.20"></a><span id="l10.20">   assert_true(statusString == &quot;noReport&quot; || statusString == &quot;please&quot;,</span>
<a href="#l10.21"></a><span id="l10.21">               &quot;Expected the status to be \&quot;noReport\&quot; or \&quot;please\&quot;. &quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-plugin-outdated.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-plugin-outdated.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -61,17 +61,17 @@ function test_outdated_plugin_notificati</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5">   mc.waitFor(function () { return testDone; }, &quot;Plugin test taking too long&quot;,</span>
<a href="#l11.6"></a><span id="l11.6">              100000, 1000);</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8">   let finishedReset = false;</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10">   resetBlocklist(mc, function() { finishedReset = true; });</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  mc.waitFor(function () finishedReset, &quot;Reset blocklist took too long&quot;);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  mc.waitFor(() =&gt; finishedReset, &quot;Reset blocklist took too long&quot;);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">   Services.prefs.clearUserPref(&quot;extensions.blocklist.suppressUI&quot;);</span>
<a href="#l11.16"></a><span id="l11.16"> }</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18"> function subtest_outdated_plugin_notification() {</span>
<a href="#l11.19"></a><span id="l11.19">   // Prepare to capture the notification bar</span>
<a href="#l11.20"></a><span id="l11.20">   NotificationWatcher.planForNotification(mc);</span>
<a href="#l11.21"></a><span id="l11.21">   let pluginTab = open_content_tab_with_click(mc.menus.helpMenu.whatsNew,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -61,17 +61,17 @@ function test_move_message() {</span>
<a href="#l12.4"></a><span id="l12.4">     SetMessageKey: function(aKey) { },</span>
<a href="#l12.5"></a><span id="l12.5">     SetMessageId: function(aMessageId) {},</span>
<a href="#l12.6"></a><span id="l12.6">     OnStopCopy: function(aStatus) {</span>
<a href="#l12.7"></a><span id="l12.7">       this.copyDone = true;</span>
<a href="#l12.8"></a><span id="l12.8">     }</span>
<a href="#l12.9"></a><span id="l12.9">   };</span>
<a href="#l12.10"></a><span id="l12.10">   MailServices.copy.CopyMessages(folder1, array, folder2, true,</span>
<a href="#l12.11"></a><span id="l12.11">                                  copyListener, mc.window.msgWindow, true);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  mc.waitFor(function () copyListener.copyDone,</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  mc.waitFor(() =&gt; copyListener.copyDone,</span>
<a href="#l12.14"></a><span id="l12.14">              &quot;Timeout waiting for copy to complete&quot;, 10000, 100);</span>
<a href="#l12.15"></a><span id="l12.15">   // We've moved a message to aaafolder2 - it should appear in recent list now.</span>
<a href="#l12.16"></a><span id="l12.16">   // Clicking the menuitem by label is not localizable, but Recent doesn't have an</span>
<a href="#l12.17"></a><span id="l12.17">   // id we can use.</span>
<a href="#l12.18"></a><span id="l12.18">   popups = mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;),</span>
<a href="#l12.19"></a><span id="l12.19">                                       [{id: &quot;mailContext-moveMenu&quot;},</span>
<a href="#l12.20"></a><span id="l12.20">                                        {label: &quot;Recent&quot;}], true);</span>
<a href="#l12.21"></a><span id="l12.21">   recentMenu = mc.eid(&quot;mailContext-moveMenu&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-savedsearch-reload-after-compact.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -52,17 +52,17 @@ function test_setup_virtual_folder_and_c</span>
<a href="#l13.4"></a><span id="l13.4">     },</span>
<a href="#l13.5"></a><span id="l13.5">     OnStopRunningUrl: function (aUrl, aExitCode) {</span>
<a href="#l13.6"></a><span id="l13.6">       this.compactDone = true;</span>
<a href="#l13.7"></a><span id="l13.7">     }</span>
<a href="#l13.8"></a><span id="l13.8">   };</span>
<a href="#l13.9"></a><span id="l13.9">   if (otherFolder.msgStore.supportsCompaction) {</span>
<a href="#l13.10"></a><span id="l13.10">     otherFolder.compactAll(urlListener, null, false);</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-    mc.waitFor(function () urlListener.compactDone,</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    mc.waitFor(() =&gt; urlListener.compactDone,</span>
<a href="#l13.14"></a><span id="l13.14">                &quot;Timeout waiting for compact to complete&quot;, 10000, 100);</span>
<a href="#l13.15"></a><span id="l13.15">   }</span>
<a href="#l13.16"></a><span id="l13.16">   // Let the event queue clear.</span>
<a href="#l13.17"></a><span id="l13.17">   mc.sleep(0);</span>
<a href="#l13.18"></a><span id="l13.18">   // Check view is still valid</span>
<a href="#l13.19"></a><span id="l13.19">   let msgHdr = mc.dbView.getMsgHdrAt(0);</span>
<a href="#l13.20"></a><span id="l13.20"> }</span>
<a href="#l13.21"></a><span id="l13.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -6,15 +6,15 @@</span>
<a href="#l14.4"></a><span id="l14.4"> (function () {</span>
<a href="#l14.5"></a><span id="l14.5">    Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l14.6"></a><span id="l14.6">    var testFolderTreeMode = {</span>
<a href="#l14.7"></a><span id="l14.7">      __proto__: IFolderTreeMode,</span>
<a href="#l14.8"></a><span id="l14.8">      generateMap: function testFolderTreeMode_generateMap(aFTV) {</span>
<a href="#l14.9"></a><span id="l14.9">        // Pick the tinderbox@foo.invalid inbox and use it as the only folder</span>
<a href="#l14.10"></a><span id="l14.10">        let server = MailServices.accounts.FindServer(&quot;tinderbox&quot;, &quot;tinderbox123&quot;, &quot;pop3&quot;);</span>
<a href="#l14.11"></a><span id="l14.11">        let item = new ftvItem(server.rootFolder.getChildNamed(&quot;Inbox&quot;));</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-       item.__defineGetter__(&quot;children&quot;, function () []);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+       item.__defineGetter__(&quot;children&quot;, () =&gt; []);</span>
<a href="#l14.14"></a><span id="l14.14">        return [item];</span>
<a href="#l14.15"></a><span id="l14.15">      },</span>
<a href="#l14.16"></a><span id="l14.16">    };</span>
<a href="#l14.17"></a><span id="l14.17">    gFolderTreeView.registerFolderTreeMode(&quot;testmode&quot;, testFolderTreeMode,</span>
<a href="#l14.18"></a><span id="l14.18">                                           &quot;Test Mode&quot;);</span>
<a href="#l14.19"></a><span id="l14.19"> })();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/test/mozmill/instrumentation/test-instrument-setup.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/test/mozmill/instrumentation/test-instrument-setup.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -58,17 +58,17 @@ function test_mail_account_setup() {</span>
<a href="#l15.4"></a><span id="l15.4">   input_value(awc, user.email);</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">   // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l15.7"></a><span id="l15.7">   awc.e(&quot;next_button&quot;).click();</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9">   let config = null;</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">   // XXX: This should probably use a notification, once we fix bug 561143.</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  awc.waitFor(function () awc.window.gEmailConfigWizard._currentConfig != null,</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  awc.waitFor(() =&gt; awc.window.gEmailConfigWizard._currentConfig != null,</span>
<a href="#l15.14"></a><span id="l15.14">               &quot;Timeout waiting for current config to become non-null&quot;,</span>
<a href="#l15.15"></a><span id="l15.15">               8000, 600);</span>
<a href="#l15.16"></a><span id="l15.16">   config = awc.window.gEmailConfigWizard._currentConfig;</span>
<a href="#l15.17"></a><span id="l15.17">   plan_for_window_close(awc);</span>
<a href="#l15.18"></a><span id="l15.18">   awc.e(&quot;create_button&quot;).click();</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20">   let events = mc.window.mailInstrumentationManager._currentState.events;</span>
<a href="#l15.21"></a><span id="l15.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -219,17 +219,17 @@ function test_clicking_star_opens_inline</span>
<a href="#l16.4"></a><span id="l16.4">   // Ok, if we're here, then the star has been clicked, and</span>
<a href="#l16.5"></a><span id="l16.5">   // the contact has been added to our AB.</span>
<a href="#l16.6"></a><span id="l16.6">   let addrs = toDescription.getElementsByTagName('mail-emailaddress');</span>
<a href="#l16.7"></a><span id="l16.7">   let lastAddr = get_last_visible_address(addrs);</span>
<a href="#l16.8"></a><span id="l16.8"> </span>
<a href="#l16.9"></a><span id="l16.9">   // Click on the star, and ensure that the inline contact</span>
<a href="#l16.10"></a><span id="l16.10">   // editing panel opens</span>
<a href="#l16.11"></a><span id="l16.11">   mc.click(mc.aid(lastAddr, {class: 'emailStar'}));</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  mc.waitFor(function() contactPanel.state == &quot;open&quot;,</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+  mc.waitFor(() =&gt; contactPanel.state == &quot;open&quot;,</span>
<a href="#l16.14"></a><span id="l16.14">              &quot;Timeout waiting for contactPanel to open; state=&quot; +</span>
<a href="#l16.15"></a><span id="l16.15">              contactPanel.state);</span>
<a href="#l16.16"></a><span id="l16.16">   contactPanel.hidePopup();</span>
<a href="#l16.17"></a><span id="l16.17"> }</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19"> /**</span>
<a href="#l16.20"></a><span id="l16.20">  * Ensure that the specified element is visible/hidden</span>
<a href="#l16.21"></a><span id="l16.21">  *</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -759,17 +759,17 @@ function test_toolbar_collapse_and_expan</span>
<a href="#l16.23"></a><span id="l16.23">     toolbar.setAttribute(&quot;mode&quot;, mode);</span>
<a href="#l16.24"></a><span id="l16.24">     if (expandedHeadersTopBox.clientHeight != tallHeight)</span>
<a href="#l16.25"></a><span id="l16.25">       throw new Error(&quot;The header box should have returned to its original size!&quot;);</span>
<a href="#l16.26"></a><span id="l16.26"> </span>
<a href="#l16.27"></a><span id="l16.27">     // And make our window big to achieve the same effect as the just icons mode.</span>
<a href="#l16.28"></a><span id="l16.28">     mc.window.resizeTo(1200, 600);</span>
<a href="#l16.29"></a><span id="l16.29">     // spin the event loop once</span>
<a href="#l16.30"></a><span id="l16.30">     mc.sleep(0);</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-    mc.waitFor(function() expandedHeadersTopBox.clientHeight == shortHeight,</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+    mc.waitFor(() =&gt; expandedHeadersTopBox.clientHeight == shortHeight,</span>
<a href="#l16.33"></a><span id="l16.33">                &quot;The header box should have returned to its wide size!&quot;)</span>
<a href="#l16.34"></a><span id="l16.34">   }</span>
<a href="#l16.35"></a><span id="l16.35">   finally {</span>
<a href="#l16.36"></a><span id="l16.36">     // restore window to nominal dimensions; saving was not working out</span>
<a href="#l16.37"></a><span id="l16.37">     //  See also: quick-filter-bar/test-display-issues.js if we change the</span>
<a href="#l16.38"></a><span id="l16.38">     //            default window size.</span>
<a href="#l16.39"></a><span id="l16.39">     mc.window.resizeTo(1024, 768);</span>
<a href="#l16.40"></a><span id="l16.40">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/test/mozmill/message-window/test-autohide-menubar.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/test/mozmill/message-window/test-autohide-menubar.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -55,17 +55,17 @@ function set_autohide_menubar(controller</span>
<a href="#l17.4"></a><span id="l17.4">  *</span>
<a href="#l17.5"></a><span id="l17.5">  * @param controller the mozmill controller for the window</span>
<a href="#l17.6"></a><span id="l17.6">  * @param menubar the menubar to test</span>
<a href="#l17.7"></a><span id="l17.7">  */</span>
<a href="#l17.8"></a><span id="l17.8"> function help_test_autohide(controller, menubar) {</span>
<a href="#l17.9"></a><span id="l17.9">   function hiddenChecker(aHidden) {</span>
<a href="#l17.10"></a><span id="l17.10">     // The XUL hidden attribute isn't what is set, so it's useless here -- use</span>
<a href="#l17.11"></a><span id="l17.11">     // information from the box model instead.</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    return function () ((menubar.getBoundingClientRect().height != 0) != aHidden);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+    return () =&gt; ((menubar.getBoundingClientRect().height != 0) != aHidden);</span>
<a href="#l17.14"></a><span id="l17.14">   }</span>
<a href="#l17.15"></a><span id="l17.15">   set_autohide_menubar(controller, menubar, true);</span>
<a href="#l17.16"></a><span id="l17.16">   controller.waitFor(hiddenChecker(true), &quot;Menubar should be hidden!&quot;);</span>
<a href="#l17.17"></a><span id="l17.17"> </span>
<a href="#l17.18"></a><span id="l17.18">   controller.keypress(new elib.Elem(menubar), &quot;VK_ALT&quot;, {});</span>
<a href="#l17.19"></a><span id="l17.19">   controller.waitFor(hiddenChecker(false),</span>
<a href="#l17.20"></a><span id="l17.20">                      &quot;Menubar should be shown after pressing alt!&quot;);</span>
<a href="#l17.21"></a><span id="l17.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -179,17 +179,17 @@ function subtest_get_an_account(w) {</span>
<a href="#l18.4"></a><span id="l18.4">   type_in_search_name(w, &quot;Green Llama&quot;);</span>
<a href="#l18.5"></a><span id="l18.5"> </span>
<a href="#l18.6"></a><span id="l18.6">   w.click(w.eid(&quot;searchSubmit&quot;));</span>
<a href="#l18.7"></a><span id="l18.7">   wait_for_search_results(w);</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">   // Click on the first address. This reveals the button with the price.</span>
<a href="#l18.10"></a><span id="l18.10">   let address = w.window.document.querySelector(&quot;.address:first-child&quot;);</span>
<a href="#l18.11"></a><span id="l18.11">   w.click(new elib.Elem(address));</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  w.waitFor(function () w.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;).length &gt; 0);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  w.waitFor(() =&gt; w.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;).length &gt; 0);</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15">   // Pick the email address green@example.com</span>
<a href="#l18.16"></a><span id="l18.16">   plan_for_content_tab_load();</span>
<a href="#l18.17"></a><span id="l18.17"> </span>
<a href="#l18.18"></a><span id="l18.18">   // Clicking this button should close the modal dialog.</span>
<a href="#l18.19"></a><span id="l18.19">   let button = w.window.document.querySelector('button.create[address=&quot;green@example.com&quot;]');</span>
<a href="#l18.20"></a><span id="l18.20">   w.click(new elib.Elem(button));</span>
<a href="#l18.21"></a><span id="l18.21"> }</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -408,17 +408,17 @@ function subtest_persist_name_in_search_</span>
<a href="#l18.23"></a><span id="l18.23"> </span>
<a href="#l18.24"></a><span id="l18.24"> /**</span>
<a href="#l18.25"></a><span id="l18.25">  * Subtest used by test_persist_name_in_search_field, the second time that</span>
<a href="#l18.26"></a><span id="l18.26">  * the account provisioner window is opened.  This function simply checks to</span>
<a href="#l18.27"></a><span id="l18.27">  * ensure that the name inserted in subtest_persist_name_in_search_field has</span>
<a href="#l18.28"></a><span id="l18.28">  * indeed persisted.</span>
<a href="#l18.29"></a><span id="l18.29">  */</span>
<a href="#l18.30"></a><span id="l18.30"> function subtest_persist_name_in_search_field_part_2(w) {</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-  mc.waitFor(function () w.e(&quot;name&quot;).value == NAME);</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+  mc.waitFor(() =&gt; w.e(&quot;name&quot;).value == NAME);</span>
<a href="#l18.33"></a><span id="l18.33"> }</span>
<a href="#l18.34"></a><span id="l18.34"> </span>
<a href="#l18.35"></a><span id="l18.35"> /**</span>
<a href="#l18.36"></a><span id="l18.36">  * Test that names with HTML characters are escaped properly when displayed</span>
<a href="#l18.37"></a><span id="l18.37">  * back to the user.</span>
<a href="#l18.38"></a><span id="l18.38">  */</span>
<a href="#l18.39"></a><span id="l18.39"> function test_html_characters_and_ampersands() {</span>
<a href="#l18.40"></a><span id="l18.40">   plan_for_modal_dialog(&quot;AccountCreation&quot;,</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineat">@@ -558,17 +558,17 @@ function subtest_shows_error_on_bad_sugg</span>
<a href="#l18.42"></a><span id="l18.42">   wait_for_provider_list_loaded(w);</span>
<a href="#l18.43"></a><span id="l18.43">   wait_for_search_ready(w);</span>
<a href="#l18.44"></a><span id="l18.44"> </span>
<a href="#l18.45"></a><span id="l18.45">   type_in_search_name(w, &quot;Boston Low&quot;);</span>
<a href="#l18.46"></a><span id="l18.46"> </span>
<a href="#l18.47"></a><span id="l18.47">   // Do the search.</span>
<a href="#l18.48"></a><span id="l18.48">   w.click(w.eid(&quot;searchSubmit&quot;));</span>
<a href="#l18.49"></a><span id="l18.49"> </span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-  mc.waitFor(function () !w.window.document.querySelector(&quot;#notifications &gt; .error&quot;).hidden);</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineplus">+  mc.waitFor(() =&gt; !w.window.document.querySelector(&quot;#notifications &gt; .error&quot;).hidden);</span>
<a href="#l18.52"></a><span id="l18.52"> }</span>
<a href="#l18.53"></a><span id="l18.53"> </span>
<a href="#l18.54"></a><span id="l18.54"> /**</span>
<a href="#l18.55"></a><span id="l18.55">  * Test that if we get an empty result from the server after a search, that</span>
<a href="#l18.56"></a><span id="l18.56">  * we show an error message.</span>
<a href="#l18.57"></a><span id="l18.57">  */</span>
<a href="#l18.58"></a><span id="l18.58"> function test_shows_error_on_empty_suggest_from_name() {</span>
<a href="#l18.59"></a><span id="l18.59">   let original = Services.prefs.getCharPref(kSuggestFromNamePref);</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineat">@@ -589,17 +589,17 @@ function subtest_shows_error_on_empty_su</span>
<a href="#l18.61"></a><span id="l18.61">   wait_for_provider_list_loaded(w);</span>
<a href="#l18.62"></a><span id="l18.62">   wait_for_search_ready(w);</span>
<a href="#l18.63"></a><span id="l18.63"> </span>
<a href="#l18.64"></a><span id="l18.64">   type_in_search_name(w, &quot;Maggie Robbins&quot;);</span>
<a href="#l18.65"></a><span id="l18.65"> </span>
<a href="#l18.66"></a><span id="l18.66">   // Do the search.</span>
<a href="#l18.67"></a><span id="l18.67">   w.click(w.eid(&quot;searchSubmit&quot;));</span>
<a href="#l18.68"></a><span id="l18.68"> </span>
<a href="#l18.69"></a><span id="l18.69" class="difflineminus">-  mc.waitFor(function () !w.window.document.querySelector(&quot;#notifications &gt; .error&quot;).hidden);</span>
<a href="#l18.70"></a><span id="l18.70" class="difflineplus">+  mc.waitFor(() =&gt; !w.window.document.querySelector(&quot;#notifications &gt; .error&quot;).hidden);</span>
<a href="#l18.71"></a><span id="l18.71"> }</span>
<a href="#l18.72"></a><span id="l18.72"> </span>
<a href="#l18.73"></a><span id="l18.73"> /**</span>
<a href="#l18.74"></a><span id="l18.74">  * Tests that if a provider returns broken or erroneous XML back</span>
<a href="#l18.75"></a><span id="l18.75">  * to the user after account registration, that we log the error</span>
<a href="#l18.76"></a><span id="l18.76">  * in the error console.</span>
<a href="#l18.77"></a><span id="l18.77">  */</span>
<a href="#l18.78"></a><span id="l18.78"> function test_throws_console_error_on_corrupt_XML() {</span>
<a href="#l18.79"></a><span id="l18.79" class="difflineat">@@ -902,17 +902,17 @@ function sub_get_to_order_form(aControll</span>
<a href="#l18.80"></a><span id="l18.80">   type_in_search_name(aController, &quot;Joe Nobody&quot;);</span>
<a href="#l18.81"></a><span id="l18.81"> </span>
<a href="#l18.82"></a><span id="l18.82">   aController.click(aController.eid(&quot;searchSubmit&quot;));</span>
<a href="#l18.83"></a><span id="l18.83">   wait_for_search_results(aController);</span>
<a href="#l18.84"></a><span id="l18.84"> </span>
<a href="#l18.85"></a><span id="l18.85">   // Click on the first address. This reveals the button with the price.</span>
<a href="#l18.86"></a><span id="l18.86">   let address = aController.window.document.querySelector(&quot;.address:first-child&quot;);</span>
<a href="#l18.87"></a><span id="l18.87">   aController.click(new elib.Elem(address));</span>
<a href="#l18.88"></a><span id="l18.88" class="difflineminus">-  aController.waitFor(function () aController.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;).length &gt; 0);</span>
<a href="#l18.89"></a><span id="l18.89" class="difflineplus">+  aController.waitFor(() =&gt; aController.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;).length &gt; 0);</span>
<a href="#l18.90"></a><span id="l18.90"> </span>
<a href="#l18.91"></a><span id="l18.91">   // Pick the email address green@example.com</span>
<a href="#l18.92"></a><span id="l18.92">   plan_for_content_tab_load();</span>
<a href="#l18.93"></a><span id="l18.93"> </span>
<a href="#l18.94"></a><span id="l18.94">   // Clicking this button should close the modal dialog.</span>
<a href="#l18.95"></a><span id="l18.95">   let button = aController.window.document.querySelector('button.create[address=&quot;' + aAddress + '&quot;]');</span>
<a href="#l18.96"></a><span id="l18.96">   // mc.click() causes a failure here so click() is used for now.</span>
<a href="#l18.97"></a><span id="l18.97">   button.click();</span>
<a href="#l18.98"></a><span id="l18.98" class="difflineat">@@ -983,17 +983,17 @@ function test_external_link_opening_beha</span>
<a href="#l18.99"></a><span id="l18.99"> </span>
<a href="#l18.100"></a><span id="l18.100">   // Mock out the ExternalProtocolService.</span>
<a href="#l18.101"></a><span id="l18.101">   gMockExtProtSvcReg.register();</span>
<a href="#l18.102"></a><span id="l18.102"> </span>
<a href="#l18.103"></a><span id="l18.103">   let external = doc.getElementById(&quot;external&quot;);</span>
<a href="#l18.104"></a><span id="l18.104">   let targetHref = external.href;</span>
<a href="#l18.105"></a><span id="l18.105">   mc.click(new elib.Elem(external));</span>
<a href="#l18.106"></a><span id="l18.106"> </span>
<a href="#l18.107"></a><span id="l18.107" class="difflineminus">-  mc.waitFor(function () gMockExtProtSvc.urlLoaded(targetHref),</span>
<a href="#l18.108"></a><span id="l18.108" class="difflineplus">+  mc.waitFor(() =&gt; gMockExtProtSvc.urlLoaded(targetHref),</span>
<a href="#l18.109"></a><span id="l18.109">              &quot;Timed out waiting for the link &quot; + targetHref + &quot;to be &quot; +</span>
<a href="#l18.110"></a><span id="l18.110">              &quot;opened in the default browser.&quot;);</span>
<a href="#l18.111"></a><span id="l18.111">   gMockExtProtSvcReg.unregister();</span>
<a href="#l18.112"></a><span id="l18.112">   mc.tabmail.closeTab(tab);</span>
<a href="#l18.113"></a><span id="l18.113"> }</span>
<a href="#l18.114"></a><span id="l18.114"> </span>
<a href="#l18.115"></a><span id="l18.115"> /**</span>
<a href="#l18.116"></a><span id="l18.116">  * Test that if the provider returns XML that we can't turn into an account,</span>
<a href="#l18.117"></a><span id="l18.117" class="difflineat">@@ -1114,17 +1114,17 @@ function subtest_disabled_fields_when_se</span>
<a href="#l18.118"></a><span id="l18.118">   Services.prefs.setCharPref(kSuggestFromNamePref, originalSuggest);</span>
<a href="#l18.119"></a><span id="l18.119"> </span>
<a href="#l18.120"></a><span id="l18.120">   // The fake HTTP server stops asynchronously, so let's kick off the stop</span>
<a href="#l18.121"></a><span id="l18.121">   // and wait for it to complete.</span>
<a href="#l18.122"></a><span id="l18.122">   let serverStopped = false;</span>
<a href="#l18.123"></a><span id="l18.123">   server.stop(function() {</span>
<a href="#l18.124"></a><span id="l18.124">     serverStopped = true;</span>
<a href="#l18.125"></a><span id="l18.125">   });</span>
<a href="#l18.126"></a><span id="l18.126" class="difflineminus">-  aController.waitFor(function() serverStopped,</span>
<a href="#l18.127"></a><span id="l18.127" class="difflineplus">+  aController.waitFor(() =&gt; serverStopped,</span>
<a href="#l18.128"></a><span id="l18.128">                       &quot;Timed out waiting for the fake server to stop.&quot;);</span>
<a href="#l18.129"></a><span id="l18.129"> </span>
<a href="#l18.130"></a><span id="l18.130">   close_dialog_immediately(aController);</span>
<a href="#l18.131"></a><span id="l18.131"> }</span>
<a href="#l18.132"></a><span id="l18.132"> </span>
<a href="#l18.133"></a><span id="l18.133"> /**</span>
<a href="#l18.134"></a><span id="l18.134">  * Tests that the search button is disabled if there is no initially</span>
<a href="#l18.135"></a><span id="l18.135">  * supported language for the user.</span>
<a href="#l18.136"></a><span id="l18.136" class="difflineat">@@ -1301,17 +1301,17 @@ function subtest_per_address_prices(w) {</span>
<a href="#l18.137"></a><span id="l18.137">       price = provider.parentNode.querySelector('.price');</span>
<a href="#l18.138"></a><span id="l18.138">       break;</span>
<a href="#l18.139"></a><span id="l18.139">     }</span>
<a href="#l18.140"></a><span id="l18.140">   }</span>
<a href="#l18.141"></a><span id="l18.141">   assert_equals(price.innerHTML, prices[0].slice(0, 6));</span>
<a href="#l18.142"></a><span id="l18.142"> </span>
<a href="#l18.143"></a><span id="l18.143">   // Click on the multi provider. This reveals the buttons with the prices.</span>
<a href="#l18.144"></a><span id="l18.144">   mc.click(new elib.Elem(multi));</span>
<a href="#l18.145"></a><span id="l18.145" class="difflineminus">-  mc.waitFor(function () w.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;).length &gt; 0);</span>
<a href="#l18.146"></a><span id="l18.146" class="difflineplus">+  mc.waitFor(() =&gt; w.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;).length &gt; 0);</span>
<a href="#l18.147"></a><span id="l18.147"> </span>
<a href="#l18.148"></a><span id="l18.148">   // For each button, make sure it has the correct price.</span>
<a href="#l18.149"></a><span id="l18.149">   let buttons = w.window.document.querySelectorAll(&quot;button.create:not([hidden=true])&quot;);</span>
<a href="#l18.150"></a><span id="l18.150">   let index = 0;</span>
<a href="#l18.151"></a><span id="l18.151">   for (let button of buttons) {</span>
<a href="#l18.152"></a><span id="l18.152">     // Emulate jquery's :visible selector</span>
<a href="#l18.153"></a><span id="l18.153">     if (button.offsetWidth == 0 &amp;&amp; button.offsetHeight == 0) {</span>
<a href="#l18.154"></a><span id="l18.154">       continue;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/test/mozmill/override-main-menu-collapse/test-override-mainmenu-collapse.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -35,17 +35,17 @@ function test_main_menu_not_collapsed() </span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5">   // Since no accounts were set up, and the account provisoner was disabled</span>
<a href="#l19.6"></a><span id="l19.6">   // in prefs.js, the wizard will show up. Find it, and close it. This will</span>
<a href="#l19.7"></a><span id="l19.7">   // cause mail-startup-done to eventually be fired.</span>
<a href="#l19.8"></a><span id="l19.8">   let wizard = wait_for_existing_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l19.9"></a><span id="l19.9">   close_window(wizard);</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">   // Spin the event loop until mail-startup-done is fired.</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  mc.waitFor(function () done);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  mc.waitFor(() =&gt; done);</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">   let mainMenu = mc.e(&quot;mail-toolbar-menubar2&quot;);</span>
<a href="#l19.16"></a><span id="l19.16">   assert_false(mainMenu.hasAttribute(&quot;autohide&quot;),</span>
<a href="#l19.17"></a><span id="l19.17">                &quot;The main menu should not have the autohide attribute.&quot;);</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19">   Services.obs.removeObserver(observer, &quot;mail-startup-done&quot;);</span>
<a href="#l19.20"></a><span id="l19.20"> }</span>
<a href="#l19.21"></a><span id="l19.21"> test_main_menu_not_collapsed.EXCLUDED_PLATFORMS = [&quot;Darwin&quot;];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/test/mozmill/quick-filter-bar/test-display-issues.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/test/mozmill/quick-filter-bar/test-display-issues.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -25,17 +25,17 @@ function setupModule(module) {</span>
<a href="#l20.4"></a><span id="l20.4">   collector.getModule('quick-filter-bar-helper').installInto(module);</span>
<a href="#l20.5"></a><span id="l20.5">   collector.getModule(&quot;dom-helpers&quot;).installInto(module);</span>
<a href="#l20.6"></a><span id="l20.6"> </span>
<a href="#l20.7"></a><span id="l20.7">   folder = create_folder(&quot;QuickFilterBarDisplayIssues&quot;);</span>
<a href="#l20.8"></a><span id="l20.8">   be_in_folder(folder);</span>
<a href="#l20.9"></a><span id="l20.9"> }</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11"> function wait_for_resize(width) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  mc.waitFor(function () (mc.window.outerWidth == width),</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  mc.waitFor(() =&gt; (mc.window.outerWidth == width),</span>
<a href="#l20.14"></a><span id="l20.14">              &quot;Timeout waiting for resize (is the screen resolution 1280 x 1024?)&quot;, 1000, 50);</span>
<a href="#l20.15"></a><span id="l20.15"> }</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17"> function resize_to(width, height) {</span>
<a href="#l20.18"></a><span id="l20.18">   mark_action(&quot;test&quot;, &quot;resize_to&quot;, [width, &quot;x&quot;, height]);</span>
<a href="#l20.19"></a><span id="l20.19">   mc.window.resizeTo(width, height);</span>
<a href="#l20.20"></a><span id="l20.20">   // Give the event loop a spin in order to let the reality of an asynchronously</span>
<a href="#l20.21"></a><span id="l20.21">   //  interacting window manager have its impact.  This still may not be</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -136,17 +136,17 @@ function test_buttons_collapse_and_expan</span>
<a href="#l20.23"></a><span id="l20.23"> </span>
<a href="#l20.24"></a><span id="l20.24">   // Now expand the folder pane to cause the QFB buttons to shrink</span>
<a href="#l20.25"></a><span id="l20.25">   let folderPaneBox = mc.e(&quot;folderPaneBox&quot;);</span>
<a href="#l20.26"></a><span id="l20.26">   folderPaneBox.width = 600;</span>
<a href="#l20.27"></a><span id="l20.27"> </span>
<a href="#l20.28"></a><span id="l20.28">   // Now spawn a new 3pane...</span>
<a href="#l20.29"></a><span id="l20.29">   let mc2 = open_folder_in_new_window(folder);</span>
<a href="#l20.30"></a><span id="l20.30">   let qfb = mc2.e(&quot;quick-filter-bar-collapsible-buttons&quot;);</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-  mc2.waitFor(function () (qfb.getAttribute(&quot;shrink&quot;) == &quot;true&quot;),</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+  mc2.waitFor(() =&gt; (qfb.getAttribute(&quot;shrink&quot;) == &quot;true&quot;),</span>
<a href="#l20.33"></a><span id="l20.33">               &quot;New 3pane should have had a collapsed QFB&quot;);</span>
<a href="#l20.34"></a><span id="l20.34">   close_window(mc2);</span>
<a href="#l20.35"></a><span id="l20.35"> </span>
<a href="#l20.36"></a><span id="l20.36">   set_pane_layout(kClassicMailLayout);</span>
<a href="#l20.37"></a><span id="l20.37"> }</span>
<a href="#l20.38"></a><span id="l20.38"> </span>
<a href="#l20.39"></a><span id="l20.39"> function teardownModule() {</span>
<a href="#l20.40"></a><span id="l20.40">   // restore window to nominal dimensions; saving was not working out</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-account-manager-helpers.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-account-manager-helpers.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -58,24 +58,24 @@ function open_advanced_settings_from_acc</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5"> /**</span>
<a href="#l21.6"></a><span id="l21.6">  * Click a row in the account settings tree</span>
<a href="#l21.7"></a><span id="l21.7">  *</span>
<a href="#l21.8"></a><span id="l21.8">  * @param controller the Mozmill controller for the account settings dialog</span>
<a href="#l21.9"></a><span id="l21.9">  * @param rowIndex the row to click</span>
<a href="#l21.10"></a><span id="l21.10">  */</span>
<a href="#l21.11"></a><span id="l21.11"> function click_account_tree_row(controller, rowIndex) {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  utils.waitFor(function () controller.window.currentAccount != null,</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  utils.waitFor(() =&gt; controller.window.currentAccount != null,</span>
<a href="#l21.14"></a><span id="l21.14">                 &quot;Timeout waiting for currentAccount to become non-null&quot;);</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16">   let tree = controller.window.document.getElementById(&quot;accounttree&quot;);</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18">   fdh.click_tree_row(tree, rowIndex, controller);</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-  utils.waitFor(function () controller.window.pendingAccount == null,</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineplus">+  utils.waitFor(() =&gt; controller.window.pendingAccount == null,</span>
<a href="#l21.22"></a><span id="l21.22">                 &quot;Timeout waiting for pendingAccount to become null&quot;);</span>
<a href="#l21.23"></a><span id="l21.23"> </span>
<a href="#l21.24"></a><span id="l21.24">   // Ensure the page is fully loaded (e.g. onInit functions).</span>
<a href="#l21.25"></a><span id="l21.25">   wh.wait_for_frame_load(controller.e(&quot;contentFrame&quot;),</span>
<a href="#l21.26"></a><span id="l21.26">     controller.window.pageURL(tree.contentView.getItemAtIndex(rowIndex)</span>
<a href="#l21.27"></a><span id="l21.27">                                               .getAttribute(&quot;PageTag&quot;)));</span>
<a href="#l21.28"></a><span id="l21.28"> }</span>
<a href="#l21.29"></a><span id="l21.29"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -148,17 +148,17 @@ MockHightailServer.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4">     this.preparer.shutdown();</span>
<a href="#l22.5"></a><span id="l22.5">     this.deleter.shutdown();</span>
<a href="#l22.6"></a><span id="l22.6">     this.committer.shutdown();</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8">     let allDone = false;</span>
<a href="#l22.9"></a><span id="l22.9">     this._server.stop(function() {</span>
<a href="#l22.10"></a><span id="l22.10">       allDone = true;</span>
<a href="#l22.11"></a><span id="l22.11">     });</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    aController.waitFor(function () allDone,</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+    aController.waitFor(() =&gt; allDone,</span>
<a href="#l22.14"></a><span id="l22.14">                         &quot;Timed out waiting for Hightail server to stop!&quot;,</span>
<a href="#l22.15"></a><span id="l22.15">                         10000);</span>
<a href="#l22.16"></a><span id="l22.16">   },</span>
<a href="#l22.17"></a><span id="l22.17"> </span>
<a href="#l22.18"></a><span id="l22.18">   setupUser: function MDBS_wireUser(aData) {</span>
<a href="#l22.19"></a><span id="l22.19">     this.userInfo.shutdown();</span>
<a href="#l22.20"></a><span id="l22.20">     this.userInfo.init(this._server);</span>
<a href="#l22.21"></a><span id="l22.21">     this.userInfo.setupUser(aData);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-compose-helpers.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-compose-helpers.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -228,17 +228,17 @@ function wait_for_compose_window(aContro</span>
<a href="#l23.4"></a><span id="l23.4">           this.editorLoaded = true;</span>
<a href="#l23.5"></a><span id="l23.5">         }</span>
<a href="#l23.6"></a><span id="l23.6">       }</span>
<a href="#l23.7"></a><span id="l23.7">     };</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9">     editor.commandManager.addCommandObserver(editorObserver,</span>
<a href="#l23.10"></a><span id="l23.10">                                              &quot;obs_documentCreated&quot;);</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    utils.waitFor(function () editorObserver.editorLoaded,</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    utils.waitFor(() =&gt; editorObserver.editorLoaded,</span>
<a href="#l23.14"></a><span id="l23.14">                   &quot;Timeout waiting for compose window editor to load&quot;,</span>
<a href="#l23.15"></a><span id="l23.15">                   10000, 100);</span>
<a href="#l23.16"></a><span id="l23.16"> </span>
<a href="#l23.17"></a><span id="l23.17">     // Let the event queue clear.</span>
<a href="#l23.18"></a><span id="l23.18">     aController.sleep(0);</span>
<a href="#l23.19"></a><span id="l23.19"> </span>
<a href="#l23.20"></a><span id="l23.20">     editor.commandManager.removeCommandObserver(editorObserver,</span>
<a href="#l23.21"></a><span id="l23.21">                                                 &quot;obs_documentCreated&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -131,17 +131,17 @@ let NotificationWatcher = {</span>
<a href="#l24.4"></a><span id="l24.4">     if (!this.alerted) {</span>
<a href="#l24.5"></a><span id="l24.5">       aController.waitFor(function () this.alerted, &quot;Timeout waiting for alert&quot;,</span>
<a href="#l24.6"></a><span id="l24.6">                           ALERT_TIMEOUT, 100, this);</span>
<a href="#l24.7"></a><span id="l24.7">     }</span>
<a href="#l24.8"></a><span id="l24.8">     // Double check the notification box has finished animating.</span>
<a href="#l24.9"></a><span id="l24.9">     let notificationBox =</span>
<a href="#l24.10"></a><span id="l24.10">       mc.tabmail.selectedTab.panel.querySelector(&quot;notificationbox&quot;);</span>
<a href="#l24.11"></a><span id="l24.11">     if (notificationBox &amp;&amp; notificationBox._animating)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-      aController.waitFor(function () !notificationBox._animating,</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+      aController.waitFor(() =&gt; !notificationBox._animating,</span>
<a href="#l24.14"></a><span id="l24.14">                           &quot;Timeout waiting for notification box animation to finish&quot;,</span>
<a href="#l24.15"></a><span id="l24.15">                           ALERT_TIMEOUT, 100);</span>
<a href="#l24.16"></a><span id="l24.16"> </span>
<a href="#l24.17"></a><span id="l24.17">     aController.window.document.removeEventListener(&quot;AlertActive&quot;,</span>
<a href="#l24.18"></a><span id="l24.18">                                                     this.alertActive, false);</span>
<a href="#l24.19"></a><span id="l24.19">   },</span>
<a href="#l24.20"></a><span id="l24.20">   alerted: false,</span>
<a href="#l24.21"></a><span id="l24.21">   alertActive: function() {</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -166,17 +166,17 @@ function open_content_tab_with_url(aURL,</span>
<a href="#l24.23"></a><span id="l24.23">     aBackground = false;</span>
<a href="#l24.24"></a><span id="l24.24">   if (aController === undefined)</span>
<a href="#l24.25"></a><span id="l24.25">     aController = mc;</span>
<a href="#l24.26"></a><span id="l24.26"> </span>
<a href="#l24.27"></a><span id="l24.27">   let preCount = mc.tabmail.tabContainer.childNodes.length;</span>
<a href="#l24.28"></a><span id="l24.28">   let newTab = mc.tabmail.openTab(&quot;contentTab&quot;, {contentPage: aURL,</span>
<a href="#l24.29"></a><span id="l24.29">                                                  background: aBackground,</span>
<a href="#l24.30"></a><span id="l24.30">                                                  clickHandler: aClickHandler});</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-  utils.waitFor(function () (</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+  utils.waitFor(() =&gt; (</span>
<a href="#l24.33"></a><span id="l24.33">                   aController.tabmail.tabContainer.childNodes.length == preCount + 1),</span>
<a href="#l24.34"></a><span id="l24.34">                 &quot;Timeout waiting for the content tab to open with URL: &quot; + aURL,</span>
<a href="#l24.35"></a><span id="l24.35">                 FAST_TIMEOUT, FAST_INTERVAL);</span>
<a href="#l24.36"></a><span id="l24.36"> </span>
<a href="#l24.37"></a><span id="l24.37">   // We append new tabs at the end, so check the last one.</span>
<a href="#l24.38"></a><span id="l24.38">   let expectedNewTab = aController.tabmail.tabInfo[preCount];</span>
<a href="#l24.39"></a><span id="l24.39">   folderDisplayHelper.assert_selected_tab(expectedNewTab);</span>
<a href="#l24.40"></a><span id="l24.40">   wait_for_content_tab_load(expectedNewTab, aURL);</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineat">@@ -195,17 +195,17 @@ function open_content_tab_with_url(aURL,</span>
<a href="#l24.42"></a><span id="l24.42">  * @returns The newly-opened tab.</span>
<a href="#l24.43"></a><span id="l24.43">  */</span>
<a href="#l24.44"></a><span id="l24.44"> function open_content_tab_with_click(aElem, aExpectedURL, aController) {</span>
<a href="#l24.45"></a><span id="l24.45">   if (aController === undefined)</span>
<a href="#l24.46"></a><span id="l24.46">     aController = mc;</span>
<a href="#l24.47"></a><span id="l24.47"> </span>
<a href="#l24.48"></a><span id="l24.48">   let preCount = aController.tabmail.tabContainer.childNodes.length;</span>
<a href="#l24.49"></a><span id="l24.49">   aController.click(new elib.Elem(aElem));</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-  utils.waitFor(function () (</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineplus">+  utils.waitFor(() =&gt; (</span>
<a href="#l24.52"></a><span id="l24.52">                   aController.tabmail.tabContainer.childNodes.length == preCount + 1),</span>
<a href="#l24.53"></a><span id="l24.53">                 &quot;Timeout waiting for the content tab to open&quot;,</span>
<a href="#l24.54"></a><span id="l24.54">                 FAST_TIMEOUT, FAST_INTERVAL);</span>
<a href="#l24.55"></a><span id="l24.55"> </span>
<a href="#l24.56"></a><span id="l24.56">   // We append new tabs at the end, so check the last one.</span>
<a href="#l24.57"></a><span id="l24.57">   let expectedNewTab = aController.tabmail.tabInfo[preCount];</span>
<a href="#l24.58"></a><span id="l24.58">   folderDisplayHelper.assert_selected_tab(expectedNewTab);</span>
<a href="#l24.59"></a><span id="l24.59">   folderDisplayHelper.assert_tab_mode_name(expectedNewTab, &quot;contentTab&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-dom-helpers.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-dom-helpers.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -157,17 +157,17 @@ function assert_previous_nodes(aNodeType</span>
<a href="#l25.4"></a><span id="l25.4">  * @param aNode the element to check.</span>
<a href="#l25.5"></a><span id="l25.5">  * @param aEnabled whether or not the node should be enabled, or disabled.</span>
<a href="#l25.6"></a><span id="l25.6">  */</span>
<a href="#l25.7"></a><span id="l25.7"> function wait_for_element_enabled(aController, aElement, aEnabled) {</span>
<a href="#l25.8"></a><span id="l25.8">   if (!(&quot;disabled&quot; in aElement))</span>
<a href="#l25.9"></a><span id="l25.9">     throw new Error(&quot;Element does not appear to have disabled property; id=&quot; +</span>
<a href="#l25.10"></a><span id="l25.10">                     aElement.id);</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  aController.waitFor(function() aElement.disabled != aEnabled,</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  aController.waitFor(() =&gt; aElement.disabled != aEnabled,</span>
<a href="#l25.14"></a><span id="l25.14">                       &quot;Element should have eventually been &quot; +</span>
<a href="#l25.15"></a><span id="l25.15">                       (aEnabled ? &quot;enabled&quot; : &quot;disabled&quot;) +</span>
<a href="#l25.16"></a><span id="l25.16">                       &quot;; id=&quot; + aElement.id);</span>
<a href="#l25.17"></a><span id="l25.17"> }</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19"> /**</span>
<a href="#l25.20"></a><span id="l25.20">  * Helper to collapse panes separated by splitters. If aElement is a splitter</span>
<a href="#l25.21"></a><span id="l25.21">  * itself, then this splitter is collapsed, otherwise all splitters that are</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -271,17 +271,17 @@ function installInto(module) {</span>
<a href="#l26.4"></a><span id="l26.4">   // now copy everything into the module they provided to us...</span>
<a href="#l26.5"></a><span id="l26.5">   let us = collector.getModule('folder-display-helpers');</span>
<a href="#l26.6"></a><span id="l26.6">   let self = this;</span>
<a href="#l26.7"></a><span id="l26.7">   for each (let [key, value] in Iterator(us)) {</span>
<a href="#l26.8"></a><span id="l26.8">     if (key in EXPORT_VIA_GETTER_SETTER) {</span>
<a href="#l26.9"></a><span id="l26.9">       // The value of |key| changes between iterations, so it's important to</span>
<a href="#l26.10"></a><span id="l26.10">       // capture the right key in a local variable.</span>
<a href="#l26.11"></a><span id="l26.11">       let thisKey = key;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-      module.__defineGetter__(thisKey, function () self[thisKey]);</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+      module.__defineGetter__(thisKey, () =&gt; self[thisKey]);</span>
<a href="#l26.14"></a><span id="l26.14">       module.__defineSetter__(thisKey, function (aNewValue) {</span>
<a href="#l26.15"></a><span id="l26.15">                                self[thisKey] = aNewValue;</span>
<a href="#l26.16"></a><span id="l26.16">                              });</span>
<a href="#l26.17"></a><span id="l26.17">     }</span>
<a href="#l26.18"></a><span id="l26.18">     else if (!(key in DO_NOT_EXPORT) &amp;&amp;</span>
<a href="#l26.19"></a><span id="l26.19">              key[0] != &quot;_&quot;) {</span>
<a href="#l26.20"></a><span id="l26.20">       module[key] = value;</span>
<a href="#l26.21"></a><span id="l26.21">     }</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineat">@@ -1377,17 +1377,17 @@ function delete_via_popup() {</span>
<a href="#l26.23"></a><span id="l26.23">   mc.click(mc.eid(&quot;mailContext-delete&quot;));</span>
<a href="#l26.24"></a><span id="l26.24">   // for reasons unknown, the pop-up does not close itself?</span>
<a href="#l26.25"></a><span id="l26.25">   close_popup(mc, mc.eid(&quot;mailContext&quot;));</span>
<a href="#l26.26"></a><span id="l26.26">   wait_for_folder_events();</span>
<a href="#l26.27"></a><span id="l26.27"> }</span>
<a href="#l26.28"></a><span id="l26.28"> </span>
<a href="#l26.29"></a><span id="l26.29"> function wait_for_popup_to_open(popupElem) {</span>
<a href="#l26.30"></a><span id="l26.30">   mark_action(&quot;fdh&quot;, &quot;wait_for_popup_to_open&quot;, [popupElem]);</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-  utils.waitFor(function () popupElem.state == &quot;open&quot;,</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+  utils.waitFor(() =&gt; popupElem.state == &quot;open&quot;,</span>
<a href="#l26.33"></a><span id="l26.33">                 &quot;Timeout waiting for popup to open&quot;, 1000, 50);</span>
<a href="#l26.34"></a><span id="l26.34"> }</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36"> /**</span>
<a href="#l26.37"></a><span id="l26.37">  * Close the open pop-up.</span>
<a href="#l26.38"></a><span id="l26.38">  */</span>
<a href="#l26.39"></a><span id="l26.39"> function close_popup(aController, eid) {</span>
<a href="#l26.40"></a><span id="l26.40">   if (aController == null)</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineat">@@ -1401,17 +1401,17 @@ function close_popup(aController, eid) {</span>
<a href="#l26.42"></a><span id="l26.42">   }</span>
<a href="#l26.43"></a><span id="l26.43">   mark_action(&quot;fdh&quot;, &quot;close_popup&quot;, [elem]);</span>
<a href="#l26.44"></a><span id="l26.44">   // if it's in the process of closing, don't push escape</span>
<a href="#l26.45"></a><span id="l26.45">   if (elem.state == &quot;hiding&quot;)</span>
<a href="#l26.46"></a><span id="l26.46">     mark_action(&quot;fdh&quot;, &quot;close_popup&quot;,</span>
<a href="#l26.47"></a><span id="l26.47">                 [&quot;popup suspiciously already closing...&quot;]);</span>
<a href="#l26.48"></a><span id="l26.48">   else // actually push escape because it's not closing/closed</span>
<a href="#l26.49"></a><span id="l26.49">     aController.keypress(eid, &quot;VK_ESCAPE&quot;, {});</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineminus">-  utils.waitFor(function () elem.state == &quot;closed&quot;, &quot;Popup did not close!&quot;,</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineplus">+  utils.waitFor(() =&gt; elem.state == &quot;closed&quot;, &quot;Popup did not close!&quot;,</span>
<a href="#l26.52"></a><span id="l26.52">                 1000, 50);</span>
<a href="#l26.53"></a><span id="l26.53"> }</span>
<a href="#l26.54"></a><span id="l26.54"> </span>
<a href="#l26.55"></a><span id="l26.55"> /**</span>
<a href="#l26.56"></a><span id="l26.56">  * Pretend we are pressing the delete key, triggering message deletion of the</span>
<a href="#l26.57"></a><span id="l26.57">  *  selected messages.</span>
<a href="#l26.58"></a><span id="l26.58">  *</span>
<a href="#l26.59"></a><span id="l26.59">  * @param aController The controller in whose context to do this, defaults to</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineat">@@ -1501,17 +1501,17 @@ function press_enter(aController) {</span>
<a href="#l26.61"></a><span id="l26.61">  *  search.</span>
<a href="#l26.62"></a><span id="l26.62">  * This method is generally called automatically most of the time, and you</span>
<a href="#l26.63"></a><span id="l26.63">  *  should not need to call it yourself unless you are operating outside the</span>
<a href="#l26.64"></a><span id="l26.64">  *  helper methods in this file.</span>
<a href="#l26.65"></a><span id="l26.65">  */</span>
<a href="#l26.66"></a><span id="l26.66"> function wait_for_all_messages_to_load(aController) {</span>
<a href="#l26.67"></a><span id="l26.67">   if (aController == null)</span>
<a href="#l26.68"></a><span id="l26.68">     aController = mc;</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineminus">-  utils.waitFor(function () aController.folderDisplay.allMessagesLoaded,</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineplus">+  utils.waitFor(() =&gt; aController.folderDisplay.allMessagesLoaded,</span>
<a href="#l26.71"></a><span id="l26.71">                 &quot;Messages never finished loading.  Timed Out.&quot;);</span>
<a href="#l26.72"></a><span id="l26.72">   // the above may return immediately, meaning the event queue might not get a</span>
<a href="#l26.73"></a><span id="l26.73">   //  chance.  give it a chance now.</span>
<a href="#l26.74"></a><span id="l26.74">   aController.sleep(0);</span>
<a href="#l26.75"></a><span id="l26.75"> }</span>
<a href="#l26.76"></a><span id="l26.76"> </span>
<a href="#l26.77"></a><span id="l26.77"> /**</span>
<a href="#l26.78"></a><span id="l26.78">  * Call this before triggering a message display that you are going to wait for</span>
<a href="#l26.79"></a><span id="l26.79" class="difflineat">@@ -1672,17 +1672,17 @@ var FolderListener = {</span>
<a href="#l26.80"></a><span id="l26.80">     for (let i = 0; i &lt; arguments.length; i++)</span>
<a href="#l26.81"></a><span id="l26.81">       this.watchingFor[i] = arguments[i];</span>
<a href="#l26.82"></a><span id="l26.82">   },</span>
<a href="#l26.83"></a><span id="l26.83">   waitForEvents: function FolderListener_waitForEvents() {</span>
<a href="#l26.84"></a><span id="l26.84">     if (this.sawEvents)</span>
<a href="#l26.85"></a><span id="l26.85">       return;</span>
<a href="#l26.86"></a><span id="l26.86">     let self = this;</span>
<a href="#l26.87"></a><span id="l26.87">     try {</span>
<a href="#l26.88"></a><span id="l26.88" class="difflineminus">-      utils.waitFor(function () self.sawEvents);</span>
<a href="#l26.89"></a><span id="l26.89" class="difflineplus">+      utils.waitFor(() =&gt; self.sawEvents);</span>
<a href="#l26.90"></a><span id="l26.90">     } catch (e if e instanceof utils.TimeoutError) {</span>
<a href="#l26.91"></a><span id="l26.91">       mark_failure([&quot;Timeout waiting for events:&quot;, this.watchingFor]);</span>
<a href="#l26.92"></a><span id="l26.92">     }</span>
<a href="#l26.93"></a><span id="l26.93">   },</span>
<a href="#l26.94"></a><span id="l26.94"> </span>
<a href="#l26.95"></a><span id="l26.95">   OnItemEvent: function FolderNotificationHelper_OnItemEvent(</span>
<a href="#l26.96"></a><span id="l26.96">       aFolder, aEvent) {</span>
<a href="#l26.97"></a><span id="l26.97">     if (!this.watchingFor)</span>
<a href="#l26.98"></a><span id="l26.98" class="difflineat">@@ -2454,19 +2454,19 @@ function assert_folders_selected() {</span>
<a href="#l26.99"></a><span id="l26.99">     _process_row_folder_arguments.apply(this, arguments);</span>
<a href="#l26.100"></a><span id="l26.100"> </span>
<a href="#l26.101"></a><span id="l26.101">   // - get the actual selection (already sorted by integer value)</span>
<a href="#l26.102"></a><span id="l26.102">   let selectedFolders = troller.folderTreeView.getSelectedFolders();</span>
<a href="#l26.103"></a><span id="l26.103">   // - test selection equivalence</span>
<a href="#l26.104"></a><span id="l26.104">   // no shortcuts here. check if each folder in either array is present in the</span>
<a href="#l26.105"></a><span id="l26.105">   // other array</span>
<a href="#l26.106"></a><span id="l26.106">   if (desiredFolders.some(</span>
<a href="#l26.107"></a><span id="l26.107" class="difflineminus">-      function (folder) _non_strict_index_of(selectedFolders, folder) == -1) ||</span>
<a href="#l26.108"></a><span id="l26.108" class="difflineplus">+      folder =&gt; _non_strict_index_of(selectedFolders, folder) == -1) ||</span>
<a href="#l26.109"></a><span id="l26.109">       selectedFolders.some(</span>
<a href="#l26.110"></a><span id="l26.110" class="difflineminus">-      function (folder) _non_strict_index_of(desiredFolders, folder) == -1))</span>
<a href="#l26.111"></a><span id="l26.111" class="difflineplus">+      folder =&gt; _non_strict_index_of(desiredFolders, folder) == -1))</span>
<a href="#l26.112"></a><span id="l26.112">     throw new Error(&quot;Desired selection is: &quot; +</span>
<a href="#l26.113"></a><span id="l26.113">                     _prettify_folder_array(desiredFolders) + &quot; but actual &quot; +</span>
<a href="#l26.114"></a><span id="l26.114">                     &quot;selection is: &quot; + _prettify_folder_array(selectedFolders));</span>
<a href="#l26.115"></a><span id="l26.115"> </span>
<a href="#l26.116"></a><span id="l26.116">   return [troller, desiredFolders];</span>
<a href="#l26.117"></a><span id="l26.117"> }</span>
<a href="#l26.118"></a><span id="l26.118"> </span>
<a href="#l26.119"></a><span id="l26.119"> let assert_folder_selected = assert_folders_selected;</span>
<a href="#l26.120"></a><span id="l26.120" class="difflineat">@@ -2550,17 +2550,17 @@ function _non_strict_index_of(aArray, aS</span>
<a href="#l26.121"></a><span id="l26.121">   for ([i, item] in Iterator(aArray)) {</span>
<a href="#l26.122"></a><span id="l26.122">     if (item == aSearchElement)</span>
<a href="#l26.123"></a><span id="l26.123">       return i;</span>
<a href="#l26.124"></a><span id="l26.124">   }</span>
<a href="#l26.125"></a><span id="l26.125">   return -1;</span>
<a href="#l26.126"></a><span id="l26.126"> }</span>
<a href="#l26.127"></a><span id="l26.127"> </span>
<a href="#l26.128"></a><span id="l26.128"> function _prettify_folder_array(aArray) {</span>
<a href="#l26.129"></a><span id="l26.129" class="difflineminus">-  return aArray.map(function (folder) folder.prettiestName).join(&quot;, &quot;);</span>
<a href="#l26.130"></a><span id="l26.130" class="difflineplus">+  return aArray.map(folder =&gt; folder.prettiestName).join(&quot;, &quot;);</span>
<a href="#l26.131"></a><span id="l26.131"> }</span>
<a href="#l26.132"></a><span id="l26.132"> </span>
<a href="#l26.133"></a><span id="l26.133"> /**</span>
<a href="#l26.134"></a><span id="l26.134">  * Put the view in unthreaded mode.</span>
<a href="#l26.135"></a><span id="l26.135">  */</span>
<a href="#l26.136"></a><span id="l26.136"> function make_display_unthreaded() {</span>
<a href="#l26.137"></a><span id="l26.137">   wait_for_message_display_completion();</span>
<a href="#l26.138"></a><span id="l26.138">   mark_action(&quot;fdh&quot;, &quot;make_folder_display_unthreaded&quot;, []);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-message-helpers.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-message-helpers.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -36,10 +36,10 @@ function to_mime_message(aMsgHdr, aCallb</span>
<a href="#l27.4"></a><span id="l27.4">       catch (ex) {</span>
<a href="#l27.5"></a><span id="l27.5">         Cu.reportError(ex);</span>
<a href="#l27.6"></a><span id="l27.6">         frame.events.fail({exception: ex, test: currentTest});</span>
<a href="#l27.7"></a><span id="l27.7">       }</span>
<a href="#l27.8"></a><span id="l27.8">       finally {</span>
<a href="#l27.9"></a><span id="l27.9">         called = true;</span>
<a href="#l27.10"></a><span id="l27.10">       }</span>
<a href="#l27.11"></a><span id="l27.11">     }, aAllowDownload, aOptions);</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  utils.waitFor(function () called, &quot;Timeout waiting for message to be parsed&quot;);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  utils.waitFor(() =&gt; called, &quot;Timeout waiting for message to be parsed&quot;);</span>
<a href="#l27.14"></a><span id="l27.14"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -137,17 +137,17 @@ function assert_links_not_shown(aControl</span>
<a href="#l28.4"></a><span id="l28.4">     let anchors = aController.window.document.querySelectorAll('a[href=&quot;' + aLink + '&quot;]');</span>
<a href="#l28.5"></a><span id="l28.5">     fdh.assert_equals(anchors.length, 0);</span>
<a href="#l28.6"></a><span id="l28.6">   });</span>
<a href="#l28.7"></a><span id="l28.7"> }</span>
<a href="#l28.8"></a><span id="l28.8"> </span>
<a href="#l28.9"></a><span id="l28.9"> /* Waits for account provisioner search results to come in.</span>
<a href="#l28.10"></a><span id="l28.10">  */</span>
<a href="#l28.11"></a><span id="l28.11"> function wait_for_search_results(w) {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  w.waitFor(function() w.e(&quot;results&quot;).childNodes.length &gt; 0,</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  w.waitFor(() =&gt; w.e(&quot;results&quot;).childNodes.length &gt; 0,</span>
<a href="#l28.14"></a><span id="l28.14">             &quot;Timed out waiting for search results to arrive.&quot;);</span>
<a href="#l28.15"></a><span id="l28.15"> }</span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17"> /* Waits for the account provisioner to be displaying the offline</span>
<a href="#l28.18"></a><span id="l28.18">  * message.</span>
<a href="#l28.19"></a><span id="l28.19">  */</span>
<a href="#l28.20"></a><span id="l28.20"> function wait_to_be_offline(w) {</span>
<a href="#l28.21"></a><span id="l28.21">   mc.waitFor(function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -87,17 +87,17 @@ function close_notification(aController,</span>
<a href="#l29.4"></a><span id="l29.4">  * @param aController the controller for the window with the notification</span>
<a href="#l29.5"></a><span id="l29.5">  * @param aBoxId the id of the notification box</span>
<a href="#l29.6"></a><span id="l29.6">  * @param aValue the value of the notification to wait to stop</span>
<a href="#l29.7"></a><span id="l29.7">  */</span>
<a href="#l29.8"></a><span id="l29.8"> function wait_for_notification_to_stop(aController, aBoxId, aValue) {</span>
<a href="#l29.9"></a><span id="l29.9">   let nb = aController.window.document.getElementById(aBoxId);</span>
<a href="#l29.10"></a><span id="l29.10">   if (!nb)</span>
<a href="#l29.11"></a><span id="l29.11">     throw new Error(&quot;Couldn't find a notification box for id=&quot; + aBoxId);</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  aController.waitFor(function() !nb.getNotificationWithValue(aValue),</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  aController.waitFor(() =&gt; !nb.getNotificationWithValue(aValue),</span>
<a href="#l29.14"></a><span id="l29.14">                       &quot;Timed out waiting for notification with value &quot; +</span>
<a href="#l29.15"></a><span id="l29.15">                       aValue + &quot; to stop.&quot;);</span>
<a href="#l29.16"></a><span id="l29.16"> }</span>
<a href="#l29.17"></a><span id="l29.17"> </span>
<a href="#l29.18"></a><span id="l29.18"> /**</span>
<a href="#l29.19"></a><span id="l29.19">  * A helper function that waits for a notification with value aValue</span>
<a href="#l29.20"></a><span id="l29.20">  * to show in the window.</span>
<a href="#l29.21"></a><span id="l29.21">  *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-observer-helpers.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-observer-helpers.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -104,17 +104,17 @@ ObservationRecorder.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4">    * Example:  obs.stopNoticing(&quot;topic&quot;);</span>
<a href="#l30.5"></a><span id="l30.5">    *           obs.stopNoticing([&quot;topic1&quot;, &quot;topic2&quot;]);</span>
<a href="#l30.6"></a><span id="l30.6">    */</span>
<a href="#l30.7"></a><span id="l30.7">   stopNoticing: function OR_stopNoticing(aTopics) {</span>
<a href="#l30.8"></a><span id="l30.8">     if (!Array.isArray(aTopics))</span>
<a href="#l30.9"></a><span id="l30.9">       aTopics = [aTopics];</span>
<a href="#l30.10"></a><span id="l30.10"> </span>
<a href="#l30.11"></a><span id="l30.11">     this._topics = this._topics.filter(</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-      function (topic) aTopics.indexOf(topic) == -1</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+      topic =&gt; aTopics.indexOf(topic) == -1</span>
<a href="#l30.14"></a><span id="l30.14">     );</span>
<a href="#l30.15"></a><span id="l30.15">   },</span>
<a href="#l30.16"></a><span id="l30.16"> </span>
<a href="#l30.17"></a><span id="l30.17"> </span>
<a href="#l30.18"></a><span id="l30.18">   /**</span>
<a href="#l30.19"></a><span id="l30.19">    * Returns true of a particular topic was observed at least once.</span>
<a href="#l30.20"></a><span id="l30.20">    *</span>
<a href="#l30.21"></a><span id="l30.21">    * @param aTopic the topic to check if the ObservationRecorder saw.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -370,18 +370,18 @@ var WindowWatcher = {</span>
<a href="#l31.4"></a><span id="l31.4">    * Symmetry for planForModalDialog; conceptually provides the waiting.  In</span>
<a href="#l31.5"></a><span id="l31.5">    *  reality, all we do is potentially soak up the event loop a little to</span>
<a href="#l31.6"></a><span id="l31.6">    */</span>
<a href="#l31.7"></a><span id="l31.7">   waitForModalDialog: function WindowWatcher_waitForModalDialog(aWindowType, aTimeout) {</span>
<a href="#l31.8"></a><span id="l31.8">     // did the window already come and go?</span>
<a href="#l31.9"></a><span id="l31.9">     if (this.subTestFunc == null)</span>
<a href="#l31.10"></a><span id="l31.10">       return;</span>
<a href="#l31.11"></a><span id="l31.11">     // spin the event loop until we the window has come and gone.</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    utils.waitFor(function () (this.waitingForOpen == null &amp;&amp;</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-                               this.monitorizeClose()),</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineplus">+    utils.waitFor(function () { return (this.waitingForOpen == null &amp;&amp;</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineplus">+                                        this.monitorizeClose()); },</span>
<a href="#l31.16"></a><span id="l31.16">                   &quot;Timeout waiting for modal dialog to open.&quot;,</span>
<a href="#l31.17"></a><span id="l31.17">                   aTimeout || WINDOW_OPEN_TIMEOUT_MS,</span>
<a href="#l31.18"></a><span id="l31.18">                   WINDOW_OPEN_CHECK_INTERVAL_MS, this);</span>
<a href="#l31.19"></a><span id="l31.19">     this.waitingForClose = null;</span>
<a href="#l31.20"></a><span id="l31.20">   },</span>
<a href="#l31.21"></a><span id="l31.21"> </span>
<a href="#l31.22"></a><span id="l31.22">   planForWindowClose: function WindowWatcher_planForWindowClose(aXULWindow) {</span>
<a href="#l31.23"></a><span id="l31.23">     let windowType =</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineat">@@ -677,17 +677,17 @@ function wait_for_window_focused(aWindow</span>
<a href="#l31.25"></a><span id="l31.25">     function onFocus(event) {</span>
<a href="#l31.26"></a><span id="l31.26">       targetWindow.removeEventListener(&quot;focus&quot;, onFocus, true);</span>
<a href="#l31.27"></a><span id="l31.27">       focused = true;</span>
<a href="#l31.28"></a><span id="l31.28">     }</span>
<a href="#l31.29"></a><span id="l31.29">     targetWindow.addEventListener(&quot;focus&quot;, onFocus, true);</span>
<a href="#l31.30"></a><span id="l31.30">     targetWindow.focus();</span>
<a href="#l31.31"></a><span id="l31.31">   }</span>
<a href="#l31.32"></a><span id="l31.32"> </span>
<a href="#l31.33"></a><span id="l31.33" class="difflineminus">-  utils.waitFor(function() focused,</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineplus">+  utils.waitFor(() =&gt; focused,</span>
<a href="#l31.35"></a><span id="l31.35">       &quot;Timeout waiting for window to be focused.&quot;,</span>
<a href="#l31.36"></a><span id="l31.36">       WINDOW_FOCUS_TIMEOUT_MS, 100, this);</span>
<a href="#l31.37"></a><span id="l31.37"> }</span>
<a href="#l31.38"></a><span id="l31.38"> </span>
<a href="#l31.39"></a><span id="l31.39"> /**</span>
<a href="#l31.40"></a><span id="l31.40">  * Given a &lt;browser&gt;, waits for it to completely load.</span>
<a href="#l31.41"></a><span id="l31.41">  *</span>
<a href="#l31.42"></a><span id="l31.42">  * @param aBrowser The &lt;browser&gt; element to wait for.</span>
<a href="#l31.43"></a><span id="l31.43" class="difflineat">@@ -707,37 +707,39 @@ function wait_for_browser_load(aBrowser,</span>
<a href="#l31.44"></a><span id="l31.44">  * @param aURLOrPredicate The URL that should be loaded (string) or a predicate</span>
<a href="#l31.45"></a><span id="l31.45">  *                        for the URL (function).</span>
<a href="#l31.46"></a><span id="l31.46">  * @returns The frame wrapped in a MozMillController.</span>
<a href="#l31.47"></a><span id="l31.47">  */</span>
<a href="#l31.48"></a><span id="l31.48"> function wait_for_frame_load(aFrame, aURLOrPredicate) {</span>
<a href="#l31.49"></a><span id="l31.49">   let details = {</span>
<a href="#l31.50"></a><span id="l31.50">     // Not sure whether all of these really need to be getters, but this is the</span>
<a href="#l31.51"></a><span id="l31.51">     // safest thing to do.</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineminus">-    get webProgress () (aFrame.contentWindow.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineminus">-                              .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineminus">-                              .QueryInterface(Ci.nsIWebProgress)),</span>
<a href="#l31.55"></a><span id="l31.55" class="difflineminus">-    get currentURI () (NetUtil.newURI(aFrame.contentDocument.location)),</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineminus">-    get contentWindow () (aFrame.contentWindow),</span>
<a href="#l31.57"></a><span id="l31.57" class="difflineplus">+    get webProgress () {</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineplus">+      return aFrame.contentWindow.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l31.59"></a><span id="l31.59" class="difflineplus">+             .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l31.60"></a><span id="l31.60" class="difflineplus">+             .QueryInterface(Ci.nsIWebProgress);</span>
<a href="#l31.61"></a><span id="l31.61" class="difflineplus">+    },</span>
<a href="#l31.62"></a><span id="l31.62" class="difflineplus">+    get currentURI () { return NetUtil.newURI(aFrame.contentDocument.location); },</span>
<a href="#l31.63"></a><span id="l31.63" class="difflineplus">+    get contentWindow () { return aFrame.contentWindow; },</span>
<a href="#l31.64"></a><span id="l31.64">   };</span>
<a href="#l31.65"></a><span id="l31.65">   return _wait_for_generic_load(details, aURLOrPredicate);</span>
<a href="#l31.66"></a><span id="l31.66"> }</span>
<a href="#l31.67"></a><span id="l31.67"> </span>
<a href="#l31.68"></a><span id="l31.68"> /**</span>
<a href="#l31.69"></a><span id="l31.69">  * Generic function to wait for some sort of document to load. We expect</span>
<a href="#l31.70"></a><span id="l31.70">  * aDetails to have three fields:</span>
<a href="#l31.71"></a><span id="l31.71">  * - webProgress: an nsIWebProgress associated with the contentWindow.</span>
<a href="#l31.72"></a><span id="l31.72">  * - currentURI: the currently loaded page (nsIURI).</span>
<a href="#l31.73"></a><span id="l31.73">  * - contentWindow: the content window.</span>
<a href="#l31.74"></a><span id="l31.74">  */</span>
<a href="#l31.75"></a><span id="l31.75"> function _wait_for_generic_load(aDetails, aURLOrPredicate) {</span>
<a href="#l31.76"></a><span id="l31.76">   let predicate;</span>
<a href="#l31.77"></a><span id="l31.77">   if (typeof aURLOrPredicate == &quot;string&quot;) {</span>
<a href="#l31.78"></a><span id="l31.78">     let expectedURL = NetUtil.newURI(aURLOrPredicate);</span>
<a href="#l31.79"></a><span id="l31.79" class="difflineminus">-    predicate = function (url) (expectedURL.equals(url));</span>
<a href="#l31.80"></a><span id="l31.80" class="difflineplus">+    predicate = url =&gt; expectedURL.equals(url);</span>
<a href="#l31.81"></a><span id="l31.81">   }</span>
<a href="#l31.82"></a><span id="l31.82">   else {</span>
<a href="#l31.83"></a><span id="l31.83">     predicate = aURLOrPredicate;</span>
<a href="#l31.84"></a><span id="l31.84">   }</span>
<a href="#l31.85"></a><span id="l31.85"> </span>
<a href="#l31.86"></a><span id="l31.86">   function isLoadedChecker() {</span>
<a href="#l31.87"></a><span id="l31.87">     if (aDetails.webProgress.isLoadingDocument !== false)</span>
<a href="#l31.88"></a><span id="l31.88">       return false;</span>
<a href="#l31.89"></a><span id="l31.89" class="difflineat">@@ -1840,17 +1842,17 @@ function captureWindowStatesForErrorRepo</span>
<a href="#l31.90"></a><span id="l31.90"> </span>
<a href="#l31.91"></a><span id="l31.91">     let winId = win.document.documentElement.getAttribute(&quot;windowtype&quot;) ||</span>
<a href="#l31.92"></a><span id="l31.92">                 win.document.documentElement.getAttribute(&quot;id&quot;) ||</span>
<a href="#l31.93"></a><span id="l31.93">                 (&quot;unnamed:&quot; + iWin);</span>
<a href="#l31.94"></a><span id="l31.94"> </span>
<a href="#l31.95"></a><span id="l31.95">     let openPopups =</span>
<a href="#l31.96"></a><span id="l31.96">       Array.prototype.slice.call(</span>
<a href="#l31.97"></a><span id="l31.97">           win.document.documentElement.getElementsByTagName(&quot;menupopup&quot;))</span>
<a href="#l31.98"></a><span id="l31.98" class="difflineminus">-        .filter(function(x) x.state != &quot;closed&quot;)</span>
<a href="#l31.99"></a><span id="l31.99" class="difflineplus">+        .filter(x =&gt; x.state != &quot;closed&quot;)</span>
<a href="#l31.100"></a><span id="l31.100">         .map(function (x) normalizeForJsonFunc(x));</span>
<a href="#l31.101"></a><span id="l31.101"> </span>
<a href="#l31.102"></a><span id="l31.102">     let ignoredFocusedWindow = {};</span>
<a href="#l31.103"></a><span id="l31.103">     let winfo = {</span>
<a href="#l31.104"></a><span id="l31.104">       id: winId,</span>
<a href="#l31.105"></a><span id="l31.105">       title: win.document.title,</span>
<a href="#l31.106"></a><span id="l31.106">       coords: {x: win.screenX, y: win.screenY},</span>
<a href="#l31.107"></a><span id="l31.107">       dims: {width: win.outerWidth, height: win.outerHeight},</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/test/mozmill/startup-firstrun/test-menubar-collapsed.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -32,17 +32,17 @@ function test_main_menu_collapsed() {</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5">   // Since no accounts were set up, and the account provisoner was disabled</span>
<a href="#l32.6"></a><span id="l32.6">   // in prefs.js, the wizard will show up. Find it, and close it. This will</span>
<a href="#l32.7"></a><span id="l32.7">   // cause mail-startup-done to eventually be fired.</span>
<a href="#l32.8"></a><span id="l32.8">   let wizard = wait_for_existing_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l32.9"></a><span id="l32.9">   close_window(wizard);</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11">   // Spin the event loop until mail-startup-done is fired.</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-  mc.waitFor(function () done);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+  mc.waitFor(() =&gt; done);</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15">   let mainMenu = mc.e(&quot;mail-toolbar-menubar2&quot;);</span>
<a href="#l32.16"></a><span id="l32.16">   assert_equals(mainMenu.getAttribute(&quot;autohide&quot;), &quot;true&quot;,</span>
<a href="#l32.17"></a><span id="l32.17">                 &quot;The main menu should have the autohide attribute set to true.&quot;);</span>
<a href="#l32.18"></a><span id="l32.18"> </span>
<a href="#l32.19"></a><span id="l32.19">   Services.obs.removeObserver(observer, &quot;mail-startup-done&quot;);</span>
<a href="#l32.20"></a><span id="l32.20"> }</span>
<a href="#l32.21"></a><span id="l32.21"> test_main_menu_collapsed.EXCLUDED_PLATFORMS = [&quot;Darwin&quot;];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/test/mozmill/subscribe/test-subscribe-news-filter.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/test/mozmill/subscribe/test-subscribe-news-filter.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -31,15 +31,15 @@ function test_subscribe_newsgroup_filter</span>
<a href="#l33.4"></a><span id="l33.4"> }</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6"> /**</span>
<a href="#l33.7"></a><span id="l33.7">  * Helper function (callback), needed because the subscribe window is modal.</span>
<a href="#l33.8"></a><span id="l33.8">  * @param swc Controller for the subscribe window</span>
<a href="#l33.9"></a><span id="l33.9">  */</span>
<a href="#l33.10"></a><span id="l33.10"> function filter_test_helper(swc) {</span>
<a href="#l33.11"></a><span id="l33.11">   enter_text_in_search_box(swc, &quot;subscribe empty&quot;);</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  utils.waitFor( function() check_newsgroup_displayed(swc, &quot;test.subscribe.empty&quot;),</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  utils.waitFor( () =&gt; check_newsgroup_displayed(swc, &quot;test.subscribe.empty&quot;),</span>
<a href="#l33.14"></a><span id="l33.14">     &quot;test.subscribe.empty not in the list&quot;);</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineminus">-  utils.waitFor( function() !check_newsgroup_displayed(swc, &quot;test.empty&quot;),</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineplus">+  utils.waitFor( () =&gt; !check_newsgroup_displayed(swc, &quot;test.empty&quot;),</span>
<a href="#l33.17"></a><span id="l33.17">     &quot;test.empty is in the list, but should not be&quot;);</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineminus">-  utils.waitFor( function() !check_newsgroup_displayed(swc, &quot;test.subscribe.simple&quot;),</span>
<a href="#l33.19"></a><span id="l33.19" class="difflineplus">+  utils.waitFor( () =&gt; !check_newsgroup_displayed(swc, &quot;test.subscribe.simple&quot;),</span>
<a href="#l33.20"></a><span id="l33.20">     &quot;test.subscribe.simple is in the list, but should not be&quot;);</span>
<a href="#l33.21"></a><span id="l33.21"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

