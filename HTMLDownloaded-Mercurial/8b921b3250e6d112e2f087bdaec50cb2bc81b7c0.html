<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 3036:8b921b3250e6d112e2f087bdaec50cb2bc81b7c0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 8b921b3250e6d112e2f087bdaec50cb2bc81b7c0" />
<meta property="og:url" content="/comm-central/rev/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0" />
<meta property="og:description" content="Bug 490464 Update the download pref pane for use with toolkit download manager r=mcsmurf a=KaiRo" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 8b921b3250e6d112e2f087bdaec50cb2bc81b7c0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">shortlog</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">files</a> |
changeset |
<a href="/comm-central/raw-rev/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">raw</a>  | <a href="/comm-central/archive/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=490464">Bug 490464</a> Update the download pref pane for use with toolkit download manager r=mcsmurf a=KaiRo
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#78;&#101;&#105;&#108;&#32;&#82;&#97;&#115;&#104;&#98;&#114;&#111;&#111;&#107;&#32;&#60;&#110;&#101;&#105;&#108;&#64;&#112;&#97;&#114;&#107;&#119;&#97;&#121;&#99;&#99;&#46;&#99;&#111;&#46;&#117;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 08 Jul 2009 10:40:56 +0100</td></tr>

<tr>
 <td>changeset 3036</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">8b921b3250e6d112e2f087bdaec50cb2bc81b7c0</a></td>
</tr>



<tr>
<td>parent 3035</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/4f6ab99f4b723b2c7c16ac4a02bd5d75af72fc2e">4f6ab99f4b723b2c7c16ac4a02bd5d75af72fc2e</a>
</td>
</tr>

<tr>
<td>child 3037</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7e75dc09719fb80211dca61c18aa32ed2afb48e7">7e75dc09719fb80211dca61c18aa32ed2afb48e7</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">2469</a></td></tr>
<tr><td>push user</td><td>neil@parkwaycc.co.uk</td></tr>
<tr><td>push date</td><td class="date age">Wed, 08 Jul 2009 09:44:46 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@8b921b3250e6 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&newProject=comm-central&newRevision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&newProject=comm-central&newRevision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&newProject=comm-central&newRevision=8b921b3250e6d112e2f087bdaec50cb2bc81b7c0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mcsmurf%29&revcount=50">mcsmurf</a>, <a href="/comm-central/log?rev=reviewer%28KaiRo%29&revcount=50">KaiRo</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=490464">490464</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=490464">Bug 490464</a> Update the download pref pane for use with toolkit download manager r=mcsmurf a=KaiRo</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/config/config.mk">config/config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/config/config.mk">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/config/config.mk">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/config/config.mk">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/config/config.mk">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/config/config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/browser-prefs.js">suite/browser/browser-prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/browser-prefs.js">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/browser-prefs.js">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/browser-prefs.js">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/browser-prefs.js">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/browser-prefs.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/mailNavigatorOverlay.xul">suite/browser/mailNavigatorOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/mailNavigatorOverlay.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/mailNavigatorOverlay.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/mailNavigatorOverlay.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/mailNavigatorOverlay.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/mailNavigatorOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/navigator.xul">suite/browser/navigator.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/navigator.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/navigator.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/navigator.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/navigator.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/navigator.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/test/browser/browser_bug462289.js">suite/browser/test/browser/browser_bug462289.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/test/browser/browser_bug462289.js">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/test/browser/browser_bug462289.js">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/test/browser/browser_bug462289.js">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/test/browser/browser_bug462289.js">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/browser/test/browser/browser_bug462289.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaContextOverlay.xul">suite/common/contentAreaContextOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaContextOverlay.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaContextOverlay.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaContextOverlay.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaContextOverlay.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaContextOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaUtils.js">suite/common/contentAreaUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaUtils.js">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaUtils.js">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaUtils.js">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaUtils.js">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/contentAreaUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.js">suite/common/downloads/downloadmanager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.js">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.js">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.js">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.js">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.xul">suite/common/downloads/downloadmanager.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/downloadmanager.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/Makefile.in">suite/common/downloads/tests/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/Makefile.in">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/Makefile.in">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/Makefile.in">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/Makefile.in">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_delete_key_removes.xul">suite/common/downloads/tests/chrome/test_delete_key_removes.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_delete_key_removes.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_delete_key_removes.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_delete_key_removes.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_delete_key_removes.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_delete_key_removes.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul">suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/treeView.js">suite/common/downloads/treeView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/treeView.js">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/treeView.js">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/treeView.js">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/treeView.js">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/downloads/treeView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.js">suite/common/pref/pref-download.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.js">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.js">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.js">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.js">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.xul">suite/common/pref/pref-download.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.xul">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.xul">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.xul">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.xul">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/common/pref/pref-download.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">suite/locales/en-US/chrome/common/contentAreaCommands.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.properties">suite/locales/en-US/chrome/common/contentAreaCommands.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.properties">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.properties">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.properties">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.properties">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/contentAreaCommands.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd">suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/pref-download.dtd">suite/locales/en-US/chrome/common/pref/pref-download.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/pref-download.dtd">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/pref-download.dtd">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/pref-download.dtd">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/pref-download.dtd">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/pref-download.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/prefutilities.properties">suite/locales/en-US/chrome/common/pref/prefutilities.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/prefutilities.properties">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/prefutilities.properties">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/prefutilities.properties">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/prefutilities.properties">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/locales/en-US/chrome/common/pref/prefutilities.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/themes/modern/jar.mn">suite/themes/modern/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/themes/modern/jar.mn">file</a> |
<a href="/comm-central/annotate/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/themes/modern/jar.mn">annotate</a> |
<a href="/comm-central/diff/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/themes/modern/jar.mn">diff</a> |
<a href="/comm-central/comparison/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/themes/modern/jar.mn">comparison</a> |
<a href="/comm-central/log/8b921b3250e6d112e2f087bdaec50cb2bc81b7c0/suite/themes/modern/jar.mn">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/config.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/config.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -451,24 +451,24 @@ MAKE_JARS_FLAGS = \</span>
<a href="#l1.4"></a><span id="l1.4"> ifdef USE_EXTENSION_MANIFEST</span>
<a href="#l1.5"></a><span id="l1.5"> MAKE_JARS_FLAGS += -e</span>
<a href="#l1.6"></a><span id="l1.6"> endif</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> ifdef BOTH_MANIFESTS</span>
<a href="#l1.9"></a><span id="l1.9"> MAKE_JARS_FLAGS += --both-manifests</span>
<a href="#l1.10"></a><span id="l1.10"> endif</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-TAR_CREATE_FLAGS = -cvhf</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+TAR_CREATE_FLAGS = -chf</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> ifeq ($(OS_ARCH),BSD_OS)</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-TAR_CREATE_FLAGS = -cvLf</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+TAR_CREATE_FLAGS = -cLf</span>
<a href="#l1.18"></a><span id="l1.18"> endif</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> ifeq ($(OS_ARCH),OS2)</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-TAR_CREATE_FLAGS = -cvf</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+TAR_CREATE_FLAGS = -cf</span>
<a href="#l1.23"></a><span id="l1.23"> endif</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25"> #</span>
<a href="#l1.26"></a><span id="l1.26"> # Personal makefile customizations go in these optional make include files.</span>
<a href="#l1.27"></a><span id="l1.27"> #</span>
<a href="#l1.28"></a><span id="l1.28"> MY_CONFIG	:= $(DEPTH)/config/myconfig.mk</span>
<a href="#l1.29"></a><span id="l1.29"> MY_RULES	:= $(DEPTH)/config/myrules.mk</span>
<a href="#l1.30"></a><span id="l1.30"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/browser-prefs.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/browser-prefs.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -79,17 +79,17 @@ pref(&quot;browser.chrome.load_toolbar_icons&quot;</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> pref(&quot;browser.toolbars.showbutton.go&quot;,      false);</span>
<a href="#l2.6"></a><span id="l2.6"> pref(&quot;browser.toolbars.showbutton.search&quot;,  true);</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> //XXXCallek sound is not implemented in new DLMGR yet</span>
<a href="#l2.9"></a><span id="l2.9"> pref(&quot;browser.download.finished_download_sound&quot;, false);</span>
<a href="#l2.10"></a><span id="l2.10"> pref(&quot;browser.download.finished_sound_url&quot;, &quot;&quot;);</span>
<a href="#l2.11"></a><span id="l2.11"> pref(&quot;browser.download.useDownloadDir&quot;, false);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-pref(&quot;browser.download.folderList&quot;, 2);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+pref(&quot;browser.download.folderList&quot;, 1);</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15"> pref(&quot;browser.download.manager.showAlertOnComplete&quot;, true);</span>
<a href="#l2.16"></a><span id="l2.16"> pref(&quot;browser.download.manager.showAlertInterval&quot;, 2000);</span>
<a href="#l2.17"></a><span id="l2.17"> pref(&quot;browser.download.manager.retention&quot;, 2);</span>
<a href="#l2.18"></a><span id="l2.18"> pref(&quot;browser.download.manager.quitBehavior&quot;, 0);</span>
<a href="#l2.19"></a><span id="l2.19"> pref(&quot;browser.download.manager.addToRecentDocs&quot;, true);</span>
<a href="#l2.20"></a><span id="l2.20"> pref(&quot;browser.download.manager.scanWhenDone&quot;, true);</span>
<a href="#l2.21"></a><span id="l2.21"> pref(&quot;browser.download.manager.resumeOnWakeDelay&quot;, 10000);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/browser/mailNavigatorOverlay.xul</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/browser/mailNavigatorOverlay.xul</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -230,17 +230,18 @@</span>
<a href="#l3.4"></a><span id="l3.4">               insertafter=&quot;context-saveaudio&quot;/&gt;</span>
<a href="#l3.5"></a><span id="l3.5">     &lt;menuitem id=&quot;context-sendlink&quot;</span>
<a href="#l3.6"></a><span id="l3.6">               label=&quot;&amp;contextSendThisLink.label;&quot;</span>
<a href="#l3.7"></a><span id="l3.7">               accesskey=&quot;&amp;contextSendThisLink.accesskey;&quot;</span>
<a href="#l3.8"></a><span id="l3.8">               oncommand=&quot;sendLink(gContextMenu.linkURL());&quot;</span>
<a href="#l3.9"></a><span id="l3.9">               insertafter=&quot;context-savelink&quot;/&gt;</span>
<a href="#l3.10"></a><span id="l3.10">     &lt;menu id=&quot;frame&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11">     &lt;menupopup id=&quot;frame_popup&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-      &lt;menuitem insertafter=&quot;saveframeas&quot;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+      &lt;menuitem id=&quot;context-sendframe&quot;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+                insertafter=&quot;context-saveframe&quot;</span>
<a href="#l3.15"></a><span id="l3.15">                 label=&quot;&amp;contextSendFrame.label;&quot;</span>
<a href="#l3.16"></a><span id="l3.16">                 accesskey=&quot;&amp;contextSendFrame.accesskey;&quot;</span>
<a href="#l3.17"></a><span id="l3.17">                 oncommand=&quot;sendPage(gContextMenu.target.ownerDocument);&quot;/&gt;</span>
<a href="#l3.18"></a><span id="l3.18">     &lt;/menupopup&gt;</span>
<a href="#l3.19"></a><span id="l3.19">     &lt;/menu&gt;</span>
<a href="#l3.20"></a><span id="l3.20">   &lt;/popup&gt;</span>
<a href="#l3.21"></a><span id="l3.21">   </span>
<a href="#l3.22"></a><span id="l3.22"> &lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/browser/navigator.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/browser/navigator.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -247,16 +247,17 @@</span>
<a href="#l4.4"></a><span id="l4.4">                      ondragexit=&quot;nsDragAndDrop.dragExit(event, homeButtonObserver); event.stopPropagation()&quot;</span>
<a href="#l4.5"></a><span id="l4.5">                      ondragover=&quot;nsDragAndDrop.dragOver(event, homeButtonObserver); event.stopPropagation()&quot;/&gt;</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7">       &lt;toolbaritem id=&quot;nav-bar-inner&quot; align=&quot;center&quot; flex=&quot;1&quot; persist=&quot;width&quot;</span>
<a href="#l4.8"></a><span id="l4.8">                  class=&quot;chromeclass-location&quot;</span>
<a href="#l4.9"></a><span id="l4.9">                  title=&quot;&amp;locationBar.title;&quot;&gt;</span>
<a href="#l4.10"></a><span id="l4.10">         &lt;textbox id=&quot;urlbar&quot; class=&quot;chromeclass-location uri-element&quot; flex=&quot;1&quot;</span>
<a href="#l4.11"></a><span id="l4.11">                  type=&quot;autocomplete&quot; autocompletesearch=&quot;history file&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+                 completedefaultindex=&quot;true&quot; forcecomplete=&quot;false&quot;</span>
<a href="#l4.13"></a><span id="l4.13">                  timeout=&quot;50&quot; maxrows=&quot;6&quot;</span>
<a href="#l4.14"></a><span id="l4.14">                  disablehistory=&quot;false&quot; accesskey=&quot;&amp;locationBar.accesskey;&quot;</span>
<a href="#l4.15"></a><span id="l4.15">                  defaultSearchEngine=&quot;true&quot; tabscrolling=&quot;true&quot;</span>
<a href="#l4.16"></a><span id="l4.16">                  showcommentcolumn=&quot;true&quot;</span>
<a href="#l4.17"></a><span id="l4.17">                  inputtooltiptext=&quot;&amp;locationBar.tooltip;&quot;</span>
<a href="#l4.18"></a><span id="l4.18">                  newlines=&quot;stripsurroundingwhitespace&quot;</span>
<a href="#l4.19"></a><span id="l4.19">                  aria-label=&quot;&amp;locationBar.title;&quot;</span>
<a href="#l4.20"></a><span id="l4.20">                  oninput=&quot;gBrowser.userTypedValue = this.value;&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/browser/test/browser/browser_bug462289.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_bug462289.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -30,16 +30,17 @@ function step3()</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">   EventUtils.synthesizeKey(&quot;VK_TAB&quot;, { });</span>
<a href="#l5.6"></a><span id="l5.6">   // give tab key a chance to settle</span>
<a href="#l5.7"></a><span id="l5.7">   setTimeout(step3_5, 0);</span>
<a href="#l5.8"></a><span id="l5.8"> }</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10"> function step3_5()</span>
<a href="#l5.11"></a><span id="l5.11"> {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+  is(document.activeElement.localName, &quot;tab&quot;, &quot;tab key to tab activeElement&quot;);</span>
<a href="#l5.13"></a><span id="l5.13">   is(document.activeElement, tab1, &quot;tab key to tab activeElement&quot;);</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15">   EventUtils.synthesizeMouse(tab1, 9, 9, {});</span>
<a href="#l5.16"></a><span id="l5.16">   setTimeout(step4, 0);</span>
<a href="#l5.17"></a><span id="l5.17"> }</span>
<a href="#l5.18"></a><span id="l5.18"> </span>
<a href="#l5.19"></a><span id="l5.19"> function step4()</span>
<a href="#l5.20"></a><span id="l5.20"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/common/contentAreaContextOverlay.xul</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/common/contentAreaContextOverlay.xul</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -244,44 +244,50 @@</span>
<a href="#l6.4"></a><span id="l6.4">                 accesskey=&quot;&amp;selectAllCmd.accesskey;&quot;</span>
<a href="#l6.5"></a><span id="l6.5">                 command=&quot;cmd_selectAll&quot;/&gt;      </span>
<a href="#l6.6"></a><span id="l6.6">       &lt;menuseparator id=&quot;context-sep-selectall&quot;/&gt;</span>
<a href="#l6.7"></a><span id="l6.7">       &lt;menuitem id=&quot;context-searchselect&quot;</span>
<a href="#l6.8"></a><span id="l6.8">                 oncommand=&quot;OpenSearch('internet', gContextMenu.searchSelected(), true, event.shiftKey);&quot;/&gt;</span>
<a href="#l6.9"></a><span id="l6.9">       &lt;menuseparator id=&quot;frame-sep&quot;/&gt;</span>
<a href="#l6.10"></a><span id="l6.10">       &lt;menu id=&quot;frame&quot; label=&quot;&amp;thisFrameMenu.label;&quot; accesskey=&quot;&amp;thisFrameMenu.accesskey;&quot;&gt;</span>
<a href="#l6.11"></a><span id="l6.11">         &lt;menupopup id=&quot;frame_popup&quot;&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-          &lt;menuitem label=&quot;&amp;showOnlyThisFrameCmd.label;&quot;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+          &lt;menuitem id=&quot;context-showonlythisframe&quot;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+                    label=&quot;&amp;showOnlyThisFrameCmd.label;&quot;</span>
<a href="#l6.15"></a><span id="l6.15">                     accesskey=&quot;&amp;showOnlyThisFrameCmd.accesskey;&quot;</span>
<a href="#l6.16"></a><span id="l6.16">                     oncommand=&quot;gContextMenu.showOnlyThisFrame();&quot;/&gt;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-          &lt;menuitem label=&quot;&amp;openFrameCmd.label;&quot;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+          &lt;menuitem id=&quot;context-openframe&quot;</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+                    label=&quot;&amp;openFrameCmd.label;&quot;</span>
<a href="#l6.20"></a><span id="l6.20">                     accesskey=&quot;&amp;openFrameCmd.accesskey;&quot;</span>
<a href="#l6.21"></a><span id="l6.21">                     oncommand=&quot;gContextMenu.openFrame();&quot;/&gt;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-          &lt;menuitem label=&quot;&amp;openFrameCmdInTab.label;&quot;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+          &lt;menuitem id=&quot;context-openframeintab&quot;</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+                    label=&quot;&amp;openFrameCmdInTab.label;&quot;</span>
<a href="#l6.25"></a><span id="l6.25">                     accesskey=&quot;&amp;openFrameCmdInTab.accesskey;&quot;</span>
<a href="#l6.26"></a><span id="l6.26">                     oncommand=&quot;gContextMenu.openFrameInTab(event.shiftKey);&quot;/&gt;</span>
<a href="#l6.27"></a><span id="l6.27">           &lt;menuseparator/&gt;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-          &lt;menuitem id=&quot;context-reload-frame&quot;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+          &lt;menuitem id=&quot;context-reloadframe&quot;</span>
<a href="#l6.30"></a><span id="l6.30">                     label=&quot;&amp;reloadFrameCmd.label;&quot;</span>
<a href="#l6.31"></a><span id="l6.31">                     accesskey=&quot;&amp;reloadFrameCmd.accesskey;&quot;</span>
<a href="#l6.32"></a><span id="l6.32">                     oncommand=&quot;gContextMenu.reloadFrame();&quot;/&gt;</span>
<a href="#l6.33"></a><span id="l6.33">           &lt;menuseparator/&gt;</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-          &lt;menuitem label=&quot;&amp;bookmarkFrameCmd.label;&quot;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+          &lt;menuitem id=&quot;context-bookmarkframe&quot;</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+                    label=&quot;&amp;bookmarkFrameCmd.label;&quot;</span>
<a href="#l6.37"></a><span id="l6.37">                     accesskey=&quot;&amp;bookmarkFrameCmd.accesskey;&quot;</span>
<a href="#l6.38"></a><span id="l6.38">                     oncommand=&quot;gContextMenu.addBookmarkForFrame();&quot;/&gt;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">-          &lt;menuitem id=&quot;saveframeas&quot;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+          &lt;menuitem id=&quot;context-saveframe&quot;</span>
<a href="#l6.41"></a><span id="l6.41">                     valueSaveAs=&quot;&amp;saveFrameAsCmd.label;&quot;</span>
<a href="#l6.42"></a><span id="l6.42">                     valueSave=&quot;&amp;saveFrameCmd.label;&quot;</span>
<a href="#l6.43"></a><span id="l6.43">                     accesskey=&quot;&amp;saveFrameCmd.accesskey;&quot;</span>
<a href="#l6.44"></a><span id="l6.44">                     oncommand=&quot;saveDocument(gContextMenu.target.ownerDocument);&quot;/&gt;</span>
<a href="#l6.45"></a><span id="l6.45">           &lt;menuseparator/&gt;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-          &lt;menuitem label=&quot;&amp;viewFrameSourceCmd.label;&quot;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+          &lt;menuitem id=&quot;context-viewframesource&quot;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+                    label=&quot;&amp;viewFrameSourceCmd.label;&quot;</span>
<a href="#l6.49"></a><span id="l6.49">                     accesskey=&quot;&amp;viewFrameSourceCmd.accesskey;&quot;</span>
<a href="#l6.50"></a><span id="l6.50">                     oncommand=&quot;gContextMenu.viewFrameSource();&quot;/&gt;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-          &lt;menuitem label=&quot;&amp;viewFrameInfoCmd.label;&quot;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+          &lt;menuitem id=&quot;context-viewframeinfo&quot;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+                    label=&quot;&amp;viewFrameInfoCmd.label;&quot;</span>
<a href="#l6.54"></a><span id="l6.54">                     accesskey=&quot;&amp;viewFrameInfoCmd.accesskey;&quot;</span>
<a href="#l6.55"></a><span id="l6.55">                     oncommand=&quot;gContextMenu.viewFrameInfo();&quot;/&gt;        </span>
<a href="#l6.56"></a><span id="l6.56">         &lt;/menupopup&gt;</span>
<a href="#l6.57"></a><span id="l6.57">       &lt;/menu&gt;</span>
<a href="#l6.58"></a><span id="l6.58">       &lt;menuseparator id=&quot;context-sep-properties&quot;/&gt;</span>
<a href="#l6.59"></a><span id="l6.59">       &lt;menuitem id=&quot;context-viewpartialsource-selection&quot;</span>
<a href="#l6.60"></a><span id="l6.60">                 label=&quot;&amp;viewPartialSourceForSelectionCmd.label;&quot;</span>
<a href="#l6.61"></a><span id="l6.61">                 accesskey=&quot;&amp;viewPartialSourceCmd.accesskey;&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/common/contentAreaUtils.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/common/contentAreaUtils.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -527,16 +527,18 @@ function initFileInfo(aFI, aURL, aURLCha</span>
<a href="#l7.4"></a><span id="l7.4">   }</span>
<a href="#l7.5"></a><span id="l7.5"> }</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> /** </span>
<a href="#l7.8"></a><span id="l7.8">  * Given the Filepicker Parameters (aFpP), show the file picker dialog,</span>
<a href="#l7.9"></a><span id="l7.9">  * prompting the user to confirm (or change) the fileName.</span>
<a href="#l7.10"></a><span id="l7.10">  * @param aFpP a structure (see definition in internalSave(...) method)</span>
<a href="#l7.11"></a><span id="l7.11">  *        containing all the data used within this method.</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+ * @param aSkipPrompt If true, we will attempt not to prompt the user for a</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+          download location</span>
<a href="#l7.14"></a><span id="l7.14">  * @return true if the user confirmed a filename in the picker; false if they</span>
<a href="#l7.15"></a><span id="l7.15">  *         dismissed the picker.</span>
<a href="#l7.16"></a><span id="l7.16">  */</span>
<a href="#l7.17"></a><span id="l7.17"> function getTargetFile(aFpP)</span>
<a href="#l7.18"></a><span id="l7.18"> {</span>
<a href="#l7.19"></a><span id="l7.19">   var prefs = getPrefsBrowserDownload(&quot;browser.download.&quot;);</span>
<a href="#l7.20"></a><span id="l7.20">   var useDownloadDir = prefs.getBoolPref(&quot;useDownloadDir&quot;);</span>
<a href="#l7.21"></a><span id="l7.21">   const nsILocalFile = Components.interfaces.nsILocalFile;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/suite/common/downloads/downloadmanager.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/suite/common/downloads/downloadmanager.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -70,16 +70,24 @@ function dmStartup()</span>
<a href="#l8.4"></a><span id="l8.4">                       .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l8.5"></a><span id="l8.5">   obs.addObserver(gDownloadObserver, &quot;download-manager-remove-download&quot;, false);</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7">   // The DownloadProgressListener (DownloadProgressListener.js) handles</span>
<a href="#l8.8"></a><span id="l8.8">   // progress notifications.</span>
<a href="#l8.9"></a><span id="l8.9">   gDownloadListener = new DownloadProgressListener();</span>
<a href="#l8.10"></a><span id="l8.10">   gDownloadManager.addListener(gDownloadListener);</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+  // correct keybinding command attributes which don't do our business yet</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  var key = document.getElementById(&quot;key_delete&quot;);</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+  if (key.hasAttribute(&quot;command&quot;))</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+    key.setAttribute(&quot;command&quot;, &quot;cmd_stop&quot;);</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+  key = document.getElementById(&quot;key_delete2&quot;);</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+  if (key.hasAttribute(&quot;command&quot;))</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+    key.setAttribute(&quot;command&quot;, &quot;cmd_stop&quot;);</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+</span>
<a href="#l8.20"></a><span id="l8.20">   gDownloadTree.focus();</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22">   if (gDownloadTree.view.rowCount &gt; 0)</span>
<a href="#l8.23"></a><span id="l8.23">     gDownloadTree.view.selection.select(0);</span>
<a href="#l8.24"></a><span id="l8.24"> }</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26"> function dmShutdown()</span>
<a href="#l8.27"></a><span id="l8.27"> {</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineat">@@ -428,21 +436,23 @@ var gDownloadObserver = {</span>
<a href="#l8.29"></a><span id="l8.29">     }</span>
<a href="#l8.30"></a><span id="l8.30">   }</span>
<a href="#l8.31"></a><span id="l8.31"> };</span>
<a href="#l8.32"></a><span id="l8.32"> </span>
<a href="#l8.33"></a><span id="l8.33"> var dlTreeController = {</span>
<a href="#l8.34"></a><span id="l8.34">   supportsCommand: function(aCommand)</span>
<a href="#l8.35"></a><span id="l8.35">   {</span>
<a href="#l8.36"></a><span id="l8.36">     switch (aCommand) {</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+      case &quot;cmd_play&quot;:</span>
<a href="#l8.38"></a><span id="l8.38">       case &quot;cmd_pause&quot;:</span>
<a href="#l8.39"></a><span id="l8.39">       case &quot;cmd_resume&quot;:</span>
<a href="#l8.40"></a><span id="l8.40">       case &quot;cmd_retry&quot;:</span>
<a href="#l8.41"></a><span id="l8.41">       case &quot;cmd_cancel&quot;:</span>
<a href="#l8.42"></a><span id="l8.42">       case &quot;cmd_remove&quot;:</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+      case &quot;cmd_stop&quot;:</span>
<a href="#l8.44"></a><span id="l8.44">       case &quot;cmd_open&quot;:</span>
<a href="#l8.45"></a><span id="l8.45">       case &quot;cmd_show&quot;:</span>
<a href="#l8.46"></a><span id="l8.46">       case &quot;cmd_openReferrer&quot;:</span>
<a href="#l8.47"></a><span id="l8.47">       case &quot;cmd_copyLocation&quot;:</span>
<a href="#l8.48"></a><span id="l8.48">       case &quot;cmd_selectAll&quot;:</span>
<a href="#l8.49"></a><span id="l8.49">       case &quot;cmd_clearList&quot;:</span>
<a href="#l8.50"></a><span id="l8.50">         return true;</span>
<a href="#l8.51"></a><span id="l8.51">     }</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineat">@@ -455,16 +465,23 @@ var dlTreeController = {</span>
<a href="#l8.53"></a><span id="l8.53">     if (gDownloadTreeView &amp;&amp; gDownloadTreeView.selection)</span>
<a href="#l8.54"></a><span id="l8.54">       selectionCount = gDownloadTreeView.selection.count;</span>
<a href="#l8.55"></a><span id="l8.55"> </span>
<a href="#l8.56"></a><span id="l8.56">     var selItemData = selectionCount ?</span>
<a href="#l8.57"></a><span id="l8.57">                       gDownloadTreeView.getRowData(gDownloadTree.currentIndex) :</span>
<a href="#l8.58"></a><span id="l8.58">                       null;</span>
<a href="#l8.59"></a><span id="l8.59"> </span>
<a href="#l8.60"></a><span id="l8.60">     switch (aCommand) {</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+      case &quot;cmd_play&quot;:</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+         return selectionCount == 1 &amp;&amp;</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+                ((selItemData.resumable &amp;&amp;</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+                 (selItemData.isActive ||</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+                  selItemData.state == nsIDownloadManager.DOWNLOAD_PAUSED)) ||</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+                (selItemData.state == nsIDownloadManager.DOWNLOAD_CANCELED ||</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+                 selItemData.state == nsIDownloadManager.DOWNLOAD_FAILED));</span>
<a href="#l8.68"></a><span id="l8.68">       case &quot;cmd_pause&quot;:</span>
<a href="#l8.69"></a><span id="l8.69">         return selectionCount == 1 &amp;&amp;</span>
<a href="#l8.70"></a><span id="l8.70">                selItemData.isActive &amp;&amp;</span>
<a href="#l8.71"></a><span id="l8.71">                selItemData.state != nsIDownloadManager.DOWNLOAD_PAUSED &amp;&amp;</span>
<a href="#l8.72"></a><span id="l8.72">                selItemData.resumable;</span>
<a href="#l8.73"></a><span id="l8.73">       case &quot;cmd_resume&quot;:</span>
<a href="#l8.74"></a><span id="l8.74">         return selectionCount == 1 &amp;&amp;</span>
<a href="#l8.75"></a><span id="l8.75">                selItemData.state == nsIDownloadManager.DOWNLOAD_PAUSED &amp;&amp;</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineat">@@ -479,16 +496,18 @@ var dlTreeController = {</span>
<a href="#l8.77"></a><span id="l8.77">       case &quot;cmd_cancel&quot;:</span>
<a href="#l8.78"></a><span id="l8.78">         return selectionCount == 1 &amp;&amp; selItemData.isActive;</span>
<a href="#l8.79"></a><span id="l8.79">       case &quot;cmd_retry&quot;:</span>
<a href="#l8.80"></a><span id="l8.80">         return selectionCount == 1 &amp;&amp;</span>
<a href="#l8.81"></a><span id="l8.81">                (selItemData.state == nsIDownloadManager.DOWNLOAD_CANCELED ||</span>
<a href="#l8.82"></a><span id="l8.82">                 selItemData.state == nsIDownloadManager.DOWNLOAD_FAILED);</span>
<a href="#l8.83"></a><span id="l8.83">       case &quot;cmd_remove&quot;:</span>
<a href="#l8.84"></a><span id="l8.84">         return selectionCount == 1 &amp;&amp; !selItemData.isActive;</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+      case &quot;cmd_stop&quot;:</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+        return selectionCount == 1;</span>
<a href="#l8.87"></a><span id="l8.87">       case &quot;cmd_openReferrer&quot;:</span>
<a href="#l8.88"></a><span id="l8.88">         return selectionCount == 1 &amp;&amp; !!selItemData.referrer;</span>
<a href="#l8.89"></a><span id="l8.89">       case &quot;cmd_copyLocation&quot;:</span>
<a href="#l8.90"></a><span id="l8.90">         return selectionCount &gt; 0;</span>
<a href="#l8.91"></a><span id="l8.91">       case &quot;cmd_selectAll&quot;:</span>
<a href="#l8.92"></a><span id="l8.92">         return gDownloadTreeView.rowCount != selectionCount;</span>
<a href="#l8.93"></a><span id="l8.93">       case &quot;cmd_clearList&quot;:</span>
<a href="#l8.94"></a><span id="l8.94">         return gDownloadTreeView.rowCount &amp;&amp; gDownloadManager.canCleanUp;</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineat">@@ -515,16 +534,30 @@ var dlTreeController = {</span>
<a href="#l8.96"></a><span id="l8.96">         gDownloadTreeView.selection.getRangeAt(rg, start, end);</span>
<a href="#l8.97"></a><span id="l8.97">         for (let row = start.value; row &lt;= end.value; row++){</span>
<a href="#l8.98"></a><span id="l8.98">           m_selIdx.push(row);</span>
<a href="#l8.99"></a><span id="l8.99">         }</span>
<a href="#l8.100"></a><span id="l8.100">       }</span>
<a href="#l8.101"></a><span id="l8.101">     }</span>
<a href="#l8.102"></a><span id="l8.102"> </span>
<a href="#l8.103"></a><span id="l8.103">     switch (aCommand) {</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineplus">+      case &quot;cmd_play&quot;:</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineplus">+        switch (selItemData.state) {</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineplus">+          case nsIDownloadManager.DOWNLOAD_DOWNLOADING:</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineplus">+            pauseDownload(selItemData.dlid);</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineplus">+            break;</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineplus">+          case nsIDownloadManager.DOWNLOAD_PAUSED:</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+            resumeDownload(selItemData.dlid);</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineplus">+            break;</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineplus">+          case nsIDownloadManager.DOWNLOAD_FAILED:</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineplus">+          case nsIDownloadManager.DOWNLOAD_CANCELED:</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineplus">+            retryDownload(selItemData.dlid);</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineplus">+            break;</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineplus">+         }</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineplus">+         break;</span>
<a href="#l8.118"></a><span id="l8.118">       case &quot;cmd_pause&quot;:</span>
<a href="#l8.119"></a><span id="l8.119">         pauseDownload(selItemData.dlid);</span>
<a href="#l8.120"></a><span id="l8.120">         break;</span>
<a href="#l8.121"></a><span id="l8.121">       case &quot;cmd_resume&quot;:</span>
<a href="#l8.122"></a><span id="l8.122">         resumeDownload(selItemData.dlid);</span>
<a href="#l8.123"></a><span id="l8.123">         break;</span>
<a href="#l8.124"></a><span id="l8.124">       case &quot;cmd_retry&quot;:</span>
<a href="#l8.125"></a><span id="l8.125">         retryDownload(selItemData.dlid);</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineat">@@ -532,16 +565,24 @@ var dlTreeController = {</span>
<a href="#l8.127"></a><span id="l8.127">       case &quot;cmd_cancel&quot;:</span>
<a href="#l8.128"></a><span id="l8.128">         // fake an nsIDownload with the properties needed by that function</span>
<a href="#l8.129"></a><span id="l8.129">         cancelDownload({id: selItemData.dlid,</span>
<a href="#l8.130"></a><span id="l8.130">                         targetFile: getLocalFileFromNativePathOrUrl(selItemData.file)});</span>
<a href="#l8.131"></a><span id="l8.131">         break;</span>
<a href="#l8.132"></a><span id="l8.132">       case &quot;cmd_remove&quot;:</span>
<a href="#l8.133"></a><span id="l8.133">         removeDownload(selItemData.dlid);</span>
<a href="#l8.134"></a><span id="l8.134">         break;</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+      case &quot;cmd_stop&quot;:</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineplus">+        if (selItemData.isActive)</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+          // fake an nsIDownload with the properties needed by that function</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineplus">+          cancelDownload({id: selItemData.dlid,</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineplus">+                          targetFile: getLocalFileFromNativePathOrUrl(selItemData.file)});</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineplus">+        else</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineplus">+          removeDownload(selItemData.dlid);</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineplus">+        break;</span>
<a href="#l8.143"></a><span id="l8.143">       case &quot;cmd_open&quot;:</span>
<a href="#l8.144"></a><span id="l8.144">         // fake an nsIDownload with the properties needed by that function</span>
<a href="#l8.145"></a><span id="l8.145">         openDownload({displayName: selItemData.target,</span>
<a href="#l8.146"></a><span id="l8.146">                       targetFile: getLocalFileFromNativePathOrUrl(selItemData.file)});</span>
<a href="#l8.147"></a><span id="l8.147">         break;</span>
<a href="#l8.148"></a><span id="l8.148">       case &quot;cmd_show&quot;:</span>
<a href="#l8.149"></a><span id="l8.149">         // fake an nsIDownload with the properties needed by that function</span>
<a href="#l8.150"></a><span id="l8.150">         showDownload({targetFile: getLocalFileFromNativePathOrUrl(selItemData.file)});</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineat">@@ -589,15 +630,16 @@ var dlTreeController = {</span>
<a href="#l8.152"></a><span id="l8.152">   onEvent: function(aEvent){</span>
<a href="#l8.153"></a><span id="l8.153">     switch (aEvent) {</span>
<a href="#l8.154"></a><span id="l8.154">     case &quot;tree-select&quot;:</span>
<a href="#l8.155"></a><span id="l8.155">       this.onCommandUpdate();</span>
<a href="#l8.156"></a><span id="l8.156">     }</span>
<a href="#l8.157"></a><span id="l8.157">   },</span>
<a href="#l8.158"></a><span id="l8.158"> </span>
<a href="#l8.159"></a><span id="l8.159">   onCommandUpdate: function() {</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineminus">-    var cmds = [&quot;cmd_pause&quot;, &quot;cmd_resume&quot;, &quot;cmd_retry&quot;, &quot;cmd_cancel&quot;,</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineminus">-                &quot;cmd_remove&quot;, &quot;cmd_open&quot;, &quot;cmd_show&quot;, &quot;cmd_openReferrer&quot;,</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineminus">-                &quot;cmd_copyLocation&quot;, &quot;cmd_selectAll&quot;, &quot;cmd_clearList&quot;];</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineplus">+    var cmds = [&quot;cmd_play&quot;, &quot;cmd_pause&quot;, &quot;cmd_resume&quot;, &quot;cmd_retry&quot;,</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineplus">+                &quot;cmd_cancel&quot;, &quot;cmd_remove&quot;, &quot;cmd_stop&quot;, &quot;cmd_open&quot;, &quot;cmd_show&quot;,</span>
<a href="#l8.165"></a><span id="l8.165" class="difflineplus">+                &quot;cmd_openReferrer&quot;, &quot;cmd_copyLocation&quot;, &quot;cmd_selectAll&quot;,</span>
<a href="#l8.166"></a><span id="l8.166" class="difflineplus">+                &quot;cmd_clearList&quot;];</span>
<a href="#l8.167"></a><span id="l8.167">     for (let command in cmds)</span>
<a href="#l8.168"></a><span id="l8.168">       goUpdateCommand(cmds[command]);</span>
<a href="#l8.169"></a><span id="l8.169">   }</span>
<a href="#l8.170"></a><span id="l8.170"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/common/downloads/downloadmanager.xul</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/common/downloads/downloadmanager.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -86,46 +86,59 @@</span>
<a href="#l9.4"></a><span id="l9.4">     &lt;/commandset&gt;</span>
<a href="#l9.5"></a><span id="l9.5">     &lt;commandset id=&quot;editMenuCommands&quot;/&gt;</span>
<a href="#l9.6"></a><span id="l9.6">     &lt;commandset id=&quot;commandUpdate_Downloads&quot;</span>
<a href="#l9.7"></a><span id="l9.7">                 commandupdater=&quot;true&quot;</span>
<a href="#l9.8"></a><span id="l9.8">                 events=&quot;focus,tree-select&quot;</span>
<a href="#l9.9"></a><span id="l9.9">                 oncommandupdate=&quot;dlTreeController.onCommandUpdate()&quot;/&gt;</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">     &lt;commandset id=&quot;downloadCommands&quot;&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+      &lt;command id=&quot;cmd_play&quot;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+               oncommand=&quot;goDoCommand('cmd_play');&quot;/&gt;</span>
<a href="#l9.14"></a><span id="l9.14">       &lt;command id=&quot;cmd_pause&quot;</span>
<a href="#l9.15"></a><span id="l9.15">                oncommand=&quot;goDoCommand('cmd_pause');&quot;/&gt;</span>
<a href="#l9.16"></a><span id="l9.16">       &lt;command id=&quot;cmd_resume&quot;</span>
<a href="#l9.17"></a><span id="l9.17">                oncommand=&quot;goDoCommand('cmd_resume');&quot;/&gt;</span>
<a href="#l9.18"></a><span id="l9.18">       &lt;command id=&quot;cmd_retry&quot;</span>
<a href="#l9.19"></a><span id="l9.19">                oncommand=&quot;goDoCommand('cmd_retry');&quot;/&gt;</span>
<a href="#l9.20"></a><span id="l9.20">       &lt;command id=&quot;cmd_cancel&quot;</span>
<a href="#l9.21"></a><span id="l9.21">                oncommand=&quot;goDoCommand('cmd_cancel');&quot;/&gt;</span>
<a href="#l9.22"></a><span id="l9.22">       &lt;command id=&quot;cmd_remove&quot;</span>
<a href="#l9.23"></a><span id="l9.23">                oncommand=&quot;goDoCommand('cmd_remove');&quot;/&gt;</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+      &lt;command id=&quot;cmd_stop&quot;</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+               oncommand=&quot;goDoCommand('cmd_stop');&quot;/&gt;</span>
<a href="#l9.26"></a><span id="l9.26">       &lt;command id=&quot;cmd_open&quot;</span>
<a href="#l9.27"></a><span id="l9.27">                oncommand=&quot;goDoCommand('cmd_open');&quot;/&gt;</span>
<a href="#l9.28"></a><span id="l9.28">       &lt;command id=&quot;cmd_show&quot;</span>
<a href="#l9.29"></a><span id="l9.29">                oncommand=&quot;goDoCommand('cmd_show');&quot;/&gt;</span>
<a href="#l9.30"></a><span id="l9.30">       &lt;command id=&quot;cmd_openReferrer&quot;</span>
<a href="#l9.31"></a><span id="l9.31">                oncommand=&quot;goDoCommand('cmd_openReferrer');&quot;/&gt;</span>
<a href="#l9.32"></a><span id="l9.32">       &lt;command id=&quot;cmd_copyLocation&quot;</span>
<a href="#l9.33"></a><span id="l9.33">                oncommand=&quot;goDoCommand('cmd_copyLocation');&quot;/&gt;</span>
<a href="#l9.34"></a><span id="l9.34">       &lt;command id=&quot;cmd_clearList&quot;</span>
<a href="#l9.35"></a><span id="l9.35">                oncommand=&quot;goDoCommand('cmd_clearList');&quot;/&gt;</span>
<a href="#l9.36"></a><span id="l9.36">     &lt;/commandset&gt;</span>
<a href="#l9.37"></a><span id="l9.37">   &lt;/commandset&gt;</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39">   &lt;keyset id=&quot;tasksKeys&quot;&gt;</span>
<a href="#l9.40"></a><span id="l9.40">     &lt;!-- File Menu --&gt;</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineplus">+    &lt;key id=&quot;key_open&quot;</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+         keycode=&quot;VK_ENTER&quot;</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+         command=&quot;cmd_open&quot;/&gt;</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+    &lt;key id=&quot;key_open2&quot;</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+         keycode=&quot;VK_RETURN&quot;</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+         command=&quot;cmd_open&quot;/&gt;</span>
<a href="#l9.47"></a><span id="l9.47">     &lt;key id=&quot;key_close&quot;/&gt;</span>
<a href="#l9.48"></a><span id="l9.48">     &lt;key id=&quot;key_quit&quot;/&gt;</span>
<a href="#l9.49"></a><span id="l9.49">     &lt;!-- Edit Menu --&gt;</span>
<a href="#l9.50"></a><span id="l9.50">     &lt;key id=&quot;key_cut&quot;/&gt;</span>
<a href="#l9.51"></a><span id="l9.51">     &lt;key id=&quot;key_copy&quot;/&gt;</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+    &lt;key id=&quot;key_play&quot;</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+         key=&quot; &quot;</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+         command=&quot;cmd_play&quot;/&gt;</span>
<a href="#l9.55"></a><span id="l9.55">     &lt;key id=&quot;key_delete&quot;/&gt;</span>
<a href="#l9.56"></a><span id="l9.56">     &lt;key id=&quot;key_delete2&quot;/&gt;</span>
<a href="#l9.57"></a><span id="l9.57">     &lt;key id=&quot;key_selectAll&quot;/&gt;</span>
<a href="#l9.58"></a><span id="l9.58">     &lt;!-- Search Box --&gt;</span>
<a href="#l9.59"></a><span id="l9.59">     &lt;key id=&quot;key_search_focus&quot;</span>
<a href="#l9.60"></a><span id="l9.60">          command=&quot;cmd_search_focus&quot;</span>
<a href="#l9.61"></a><span id="l9.61">          key=&quot;&amp;search.key;&quot;</span>
<a href="#l9.62"></a><span id="l9.62">          modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineat">@@ -178,16 +191,17 @@</span>
<a href="#l9.64"></a><span id="l9.64">     &lt;menubar id=&quot;download-menubar&quot;</span>
<a href="#l9.65"></a><span id="l9.65">              grippytooltiptext=&quot;&amp;menuBar.tooltip;&quot;</span>
<a href="#l9.66"></a><span id="l9.66">              chromedir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l9.67"></a><span id="l9.67">       &lt;menu id=&quot;menu_File&quot;&gt;</span>
<a href="#l9.68"></a><span id="l9.68">         &lt;menupopup id=&quot;menu_FilePopup&quot;&gt;</span>
<a href="#l9.69"></a><span id="l9.69">           &lt;menuitem id=&quot;dlMenu_open&quot;</span>
<a href="#l9.70"></a><span id="l9.70">                     label=&quot;&amp;cmd.open.label;&quot;</span>
<a href="#l9.71"></a><span id="l9.71">                     accesskey=&quot;&amp;cmd.open.accesskey;&quot;</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+                    key=&quot;key_open&quot;</span>
<a href="#l9.73"></a><span id="l9.73">                     command=&quot;cmd_open&quot;/&gt;</span>
<a href="#l9.74"></a><span id="l9.74">           &lt;menuitem id=&quot;dlMenu_show&quot;</span>
<a href="#l9.75"></a><span id="l9.75">                     label=&quot;&amp;cmd.show.label;&quot;</span>
<a href="#l9.76"></a><span id="l9.76">                     accesskey=&quot;&amp;cmd.show.accesskey;&quot;</span>
<a href="#l9.77"></a><span id="l9.77">                     command=&quot;cmd_show&quot;/&gt;</span>
<a href="#l9.78"></a><span id="l9.78">           &lt;menuitem id=&quot;dlMenu_openReferrer&quot;</span>
<a href="#l9.79"></a><span id="l9.79">                     label=&quot;&amp;cmd.goToDownloadPage.label;&quot;</span>
<a href="#l9.80"></a><span id="l9.80">                     accesskey=&quot;&amp;cmd.goToDownloadPage.accesskey;&quot;</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineat">@@ -350,16 +364,17 @@</span>
<a href="#l9.82"></a><span id="l9.82">     &lt;/toolbar&gt;</span>
<a href="#l9.83"></a><span id="l9.83">   &lt;/toolbox&gt;</span>
<a href="#l9.84"></a><span id="l9.84"> </span>
<a href="#l9.85"></a><span id="l9.85">   &lt;tree id=&quot;downloadTree&quot;</span>
<a href="#l9.86"></a><span id="l9.86">         flex=&quot;1&quot; type=&quot;downloads&quot;</span>
<a href="#l9.87"></a><span id="l9.87">         class=&quot;plain&quot;</span>
<a href="#l9.88"></a><span id="l9.88">         context=&quot;downloadContext&quot;</span>
<a href="#l9.89"></a><span id="l9.89">         enableColumnDrag=&quot;true&quot;</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+        ondblclick=&quot;goDoCommand('cmd_open');&quot;</span>
<a href="#l9.91"></a><span id="l9.91">         onselect=&quot;onTreeSelect(event);&quot;&gt;</span>
<a href="#l9.92"></a><span id="l9.92">     &lt;treecols context=&quot;&quot; onclick=&quot;sortDownloads(event.target)&quot;&gt;</span>
<a href="#l9.93"></a><span id="l9.93">       &lt;treecol id=&quot;Name&quot;</span>
<a href="#l9.94"></a><span id="l9.94">                label=&quot;&amp;col.name.label;&quot;</span>
<a href="#l9.95"></a><span id="l9.95">                tooltiptext=&quot;&amp;col.name.tooltip;&quot;</span>
<a href="#l9.96"></a><span id="l9.96">                class=&quot;sortDirectionIndicator&quot; flex=&quot;3&quot;</span>
<a href="#l9.97"></a><span id="l9.97">                persist=&quot;width hidden ordinal sortActive sortDirection&quot;/&gt;</span>
<a href="#l9.98"></a><span id="l9.98">       &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/suite/common/downloads/tests/Makefile.in</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/suite/common/downloads/tests/Makefile.in</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -39,28 +39,32 @@ topsrcdir	= @top_srcdir@</span>
<a href="#l10.4"></a><span id="l10.4"> srcdir		= @srcdir@</span>
<a href="#l10.5"></a><span id="l10.5"> VPATH		= @srcdir@</span>
<a href="#l10.6"></a><span id="l10.6"> relativesrcdir = suite/common/downloads/tests</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l10.9"></a><span id="l10.9"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l10.10"></a><span id="l10.10"> </span>
<a href="#l10.11"></a><span id="l10.11"> _CHROME_FILES = \</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+    test_action_keys_respect_focus.xul \</span>
<a href="#l10.13"></a><span id="l10.13">     test_basic_functionality.xul \</span>
<a href="#l10.14"></a><span id="l10.14">     test_cleanup_search.xul \</span>
<a href="#l10.15"></a><span id="l10.15">     test_clear_button_disabled.xul \</span>
<a href="#l10.16"></a><span id="l10.16">     test_close_download_manager.xul \</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+    test_delete_key_cancels.xul \</span>
<a href="#l10.18"></a><span id="l10.18">     test_delete_key_removes.xul \</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+    test_enter_dblclick_opens.xul \</span>
<a href="#l10.20"></a><span id="l10.20">     test_multi_select.xul \</span>
<a href="#l10.21"></a><span id="l10.21">     test_multiword_search.xul \</span>
<a href="#l10.22"></a><span id="l10.22">     test_removeDownload_updates_ui.xul \</span>
<a href="#l10.23"></a><span id="l10.23">     test_search_clearlist.xul \</span>
<a href="#l10.24"></a><span id="l10.24">     test_search_keys.xul \</span>
<a href="#l10.25"></a><span id="l10.25">     test_select_all.xul \</span>
<a href="#l10.26"></a><span id="l10.26">     test_space_key_pauses_resumes.xul \</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+    test_space_key_retries.xul \</span>
<a href="#l10.28"></a><span id="l10.28">     test_ui_stays_open_on_alert_clickback.xul \</span>
<a href="#l10.29"></a><span id="l10.29">     $(NULL)</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31"> _BROWSER_FILES = browser_nsISuiteDownloadManagerUI.js \</span>
<a href="#l10.32"></a><span id="l10.32">     $(NULL)</span>
<a href="#l10.33"></a><span id="l10.33"> </span>
<a href="#l10.34"></a><span id="l10.34"> libs:: $(addprefix chrome/, $(_CHROME_FILES))</span>
<a href="#l10.35"></a><span id="l10.35"> 	$(INSTALL) $(foreach f,$^,&quot;$f&quot;) $(MOZDEPTH)/_tests/testing/mochitest/chrome/$(relativesrcdir)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_delete_key_removes.xul</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_delete_key_removes.xul</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -165,17 +165,17 @@ function test()</span>
<a href="#l11.4"></a><span id="l11.4">            &quot;The database and the number of downloads display matches&quot;);</span>
<a href="#l11.5"></a><span id="l11.5">         stmt.reset();</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7">         let len = DownloadData.length;</span>
<a href="#l11.8"></a><span id="l11.8">         for (let i = 0; i &lt; len; i++) {</span>
<a href="#l11.9"></a><span id="l11.9">           synthesizeKey(&quot;VK_DELETE&quot;, {}, win);</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">           stmt.executeStep();</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-          todo_is(stmt.getInt32(0), len - (i + 1),</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+          is(stmt.getInt32(0), len - (i + 1),</span>
<a href="#l11.14"></a><span id="l11.14">              &quot;The download was properly removed&quot;);</span>
<a href="#l11.15"></a><span id="l11.15">           stmt.reset();</span>
<a href="#l11.16"></a><span id="l11.16">         }</span>
<a href="#l11.17"></a><span id="l11.17">       }</span>
<a href="#l11.18"></a><span id="l11.18">       finally {</span>
<a href="#l11.19"></a><span id="l11.19">         stmt.reset();</span>
<a href="#l11.20"></a><span id="l11.20">         stmt.finalize();</span>
<a href="#l11.21"></a><span id="l11.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_space_key_pauses_resumes.xul</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -62,42 +62,45 @@ function bug413985obs(aWin)</span>
<a href="#l12.4"></a><span id="l12.4">   this.mWin = aWin;</span>
<a href="#l12.5"></a><span id="l12.5">   this.wasPaused = false;</span>
<a href="#l12.6"></a><span id="l12.6">   this.wasResumed = false;</span>
<a href="#l12.7"></a><span id="l12.7"> }</span>
<a href="#l12.8"></a><span id="l12.8"> bug413985obs.prototype = {</span>
<a href="#l12.9"></a><span id="l12.9">   observe: function(aSubject, aTopic, aData)</span>
<a href="#l12.10"></a><span id="l12.10">   {</span>
<a href="#l12.11"></a><span id="l12.11">     if (&quot;timer-callback&quot; == aTopic) {</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-      // dispatch a space keypress to resume the download</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+      // dispatch a space keypress to pause/resume the download</span>
<a href="#l12.14"></a><span id="l12.14">       synthesizeKey(&quot; &quot;, {}, this.mWin);</span>
<a href="#l12.15"></a><span id="l12.15">     }</span>
<a href="#l12.16"></a><span id="l12.16">   },</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18">   onDownloadStateChange: function(aState, aDownload)</span>
<a href="#l12.19"></a><span id="l12.19">   {</span>
<a href="#l12.20"></a><span id="l12.20">     if (aDownload.state == Components.interfaces.nsIDownloadManager.DOWNLOAD_DOWNLOADING &amp;&amp;</span>
<a href="#l12.21"></a><span id="l12.21">         !this.wasPaused) {</span>
<a href="#l12.22"></a><span id="l12.22">       this.wasPaused = true;</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-      // dispatch a space keypress to pause the download</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-      synthesizeKey(&quot; &quot;, {}, this.mWin);</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+      // We have to do this on a timer so other JS stuff that handles the UI</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+      // can actually catch up to us...</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+      var timer = Components.classes[&quot;@mozilla.org/timer;1&quot;]</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+                            .createInstance(Components.interfaces.nsITimer);</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+      timer.init(this, 0, Components.interfaces.nsITimer.TYPE_ONE_SHOT);</span>
<a href="#l12.30"></a><span id="l12.30">     }</span>
<a href="#l12.31"></a><span id="l12.31"> </span>
<a href="#l12.32"></a><span id="l12.32">     if (aDownload.state == Components.interfaces.nsIDownloadManager.DOWNLOAD_PAUSED &amp;&amp;</span>
<a href="#l12.33"></a><span id="l12.33">         !this.wasResumed) {</span>
<a href="#l12.34"></a><span id="l12.34">       this.wasResumed = true;</span>
<a href="#l12.35"></a><span id="l12.35">       // We have to do this on a timer so other JS stuff that handles the UI</span>
<a href="#l12.36"></a><span id="l12.36">       // can actually catch up to us...</span>
<a href="#l12.37"></a><span id="l12.37">       var timer = Components.classes[&quot;@mozilla.org/timer;1&quot;]</span>
<a href="#l12.38"></a><span id="l12.38">                             .createInstance(Components.interfaces.nsITimer);</span>
<a href="#l12.39"></a><span id="l12.39">       timer.init(this, 0, Components.interfaces.nsITimer.TYPE_ONE_SHOT);</span>
<a href="#l12.40"></a><span id="l12.40">     }</span>
<a href="#l12.41"></a><span id="l12.41"> </span>
<a href="#l12.42"></a><span id="l12.42">     if (aDownload.state == Components.interfaces.nsIDownloadManager.DOWNLOAD_FINISHED) {</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-      todo(this.wasPaused &amp;&amp; this.wasResumed,</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+      ok(this.wasPaused &amp;&amp; this.wasResumed,</span>
<a href="#l12.45"></a><span id="l12.45">          &quot;The download was paused, and then resumed to completion&quot;);</span>
<a href="#l12.46"></a><span id="l12.46">       aDownload.targetFile.remove(false);</span>
<a href="#l12.47"></a><span id="l12.47"> </span>
<a href="#l12.48"></a><span id="l12.48">       var dm = Components.classes[&quot;@mozilla.org/download-manager;1&quot;]</span>
<a href="#l12.49"></a><span id="l12.49">                          .getService(Components.interfaces.nsIDownloadManager);</span>
<a href="#l12.50"></a><span id="l12.50">       dm.removeListener(this);</span>
<a href="#l12.51"></a><span id="l12.51"> </span>
<a href="#l12.52"></a><span id="l12.52">       SimpleTest.finish();</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineat">@@ -164,19 +167,19 @@ function test()</span>
<a href="#l12.54"></a><span id="l12.54">     {</span>
<a href="#l12.55"></a><span id="l12.55">       if (aTopic != DLMGR_UI_DONE)</span>
<a href="#l12.56"></a><span id="l12.56">         return;</span>
<a href="#l12.57"></a><span id="l12.57"> </span>
<a href="#l12.58"></a><span id="l12.58">       var win = aSubject;</span>
<a href="#l12.59"></a><span id="l12.59">       var doc = win.document;</span>
<a href="#l12.60"></a><span id="l12.60">       dm.addListener(new bug413985obs(win));</span>
<a href="#l12.61"></a><span id="l12.61"> </span>
<a href="#l12.62"></a><span id="l12.62" class="difflineminus">-      var dl = addDownload();</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineplus">+      addDownload();</span>
<a href="#l12.64"></a><span id="l12.64">       // we need to focus the download as well</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineminus">-      doc.getElementById(&quot;downloadTree&quot;).view.selecttion.select(0);</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineplus">+      doc.getElementById(&quot;downloadTree&quot;).view.selection.select(0);</span>
<a href="#l12.67"></a><span id="l12.67">       os.removeObserver(testObs, DLMGR_UI_DONE);</span>
<a href="#l12.68"></a><span id="l12.68">     }</span>
<a href="#l12.69"></a><span id="l12.69">   };</span>
<a href="#l12.70"></a><span id="l12.70"> </span>
<a href="#l12.71"></a><span id="l12.71">   // Register with the observer service</span>
<a href="#l12.72"></a><span id="l12.72">   os.addObserver(testObs, DLMGR_UI_DONE, false);</span>
<a href="#l12.73"></a><span id="l12.73"> </span>
<a href="#l12.74"></a><span id="l12.74">   // Show the Download Manager UI</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/suite/common/downloads/treeView.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/suite/common/downloads/treeView.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -314,20 +314,20 @@ DownloadTreeView.prototype = {</span>
<a href="#l13.4"></a><span id="l13.4">       this.addDownload(aDownload);</span>
<a href="#l13.5"></a><span id="l13.5">       return;</span>
<a href="#l13.6"></a><span id="l13.6">     }</span>
<a href="#l13.7"></a><span id="l13.7">     if (this._dlList[row].currBytes != aDownload.amountTransferred) {</span>
<a href="#l13.8"></a><span id="l13.8">       this._dlList[row].endTime = Date.now();</span>
<a href="#l13.9"></a><span id="l13.9">       this._dlList[row].currBytes = aDownload.amountTransferred;</span>
<a href="#l13.10"></a><span id="l13.10">       this._dlList[row].maxBytes = aDownload.size;</span>
<a href="#l13.11"></a><span id="l13.11">       this._dlList[row].progress = aDownload.percentComplete;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      this._dlList[row].resumable = aDownload.resumable;</span>
<a href="#l13.13"></a><span id="l13.13">     }</span>
<a href="#l13.14"></a><span id="l13.14">     if (this._dlList[row].state != aDownload.state) {</span>
<a href="#l13.15"></a><span id="l13.15">       this._dlList[row].state = aDownload.state;</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+      this._dlList[row].resumable = aDownload.resumable;</span>
<a href="#l13.17"></a><span id="l13.17">       switch (this._dlList[row].state) {</span>
<a href="#l13.18"></a><span id="l13.18">         case nsIDownloadManager.DOWNLOAD_NOTSTARTED:</span>
<a href="#l13.19"></a><span id="l13.19">         case nsIDownloadManager.DOWNLOAD_DOWNLOADING:</span>
<a href="#l13.20"></a><span id="l13.20">         case nsIDownloadManager.DOWNLOAD_PAUSED:</span>
<a href="#l13.21"></a><span id="l13.21">         case nsIDownloadManager.DOWNLOAD_QUEUED:</span>
<a href="#l13.22"></a><span id="l13.22">         case nsIDownloadManager.DOWNLOAD_SCANNING:</span>
<a href="#l13.23"></a><span id="l13.23">           this._dlList[row].isActive = 1;</span>
<a href="#l13.24"></a><span id="l13.24">           break;</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineat">@@ -350,22 +350,32 @@ DownloadTreeView.prototype = {</span>
<a href="#l13.26"></a><span id="l13.26">     window.updateCommands(&quot;tree-select&quot;);</span>
<a href="#l13.27"></a><span id="l13.27">   },</span>
<a href="#l13.28"></a><span id="l13.28"> </span>
<a href="#l13.29"></a><span id="l13.29">   removeDownload: function(aDownloadID) {</span>
<a href="#l13.30"></a><span id="l13.30">     var row = this._getIdxForID(aDownloadID);</span>
<a href="#l13.31"></a><span id="l13.31">     // Make sure we have an item to remove</span>
<a href="#l13.32"></a><span id="l13.32">     if (row &lt; 0) return;</span>
<a href="#l13.33"></a><span id="l13.33"> </span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+    var index = this.selection.currentIndex;</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+    var wasSingleSelection = this.selection.count == 1;</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+</span>
<a href="#l13.37"></a><span id="l13.37">     // Remove data from the download list</span>
<a href="#l13.38"></a><span id="l13.38">     this._dlList.splice(row, 1);</span>
<a href="#l13.39"></a><span id="l13.39"> </span>
<a href="#l13.40"></a><span id="l13.40">     // Tell the tree we removed 1 row at the given row index</span>
<a href="#l13.41"></a><span id="l13.41">     this._tree.rowCountChanged(row, -1);</span>
<a href="#l13.42"></a><span id="l13.42"> </span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+    // Update selection if only removed download was selected</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineplus">+    if (wasSingleSelection &amp;&amp; this.selection.count == 0) {</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineplus">+      index = Math.min(index, this.rowCount - 1);</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+      if (index &gt;= 0)</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineplus">+        this.selection.select(index);</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+    }</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineplus">+</span>
<a href="#l13.50"></a><span id="l13.50">     window.updateCommands(&quot;tree-select&quot;);</span>
<a href="#l13.51"></a><span id="l13.51">   },</span>
<a href="#l13.52"></a><span id="l13.52"> </span>
<a href="#l13.53"></a><span id="l13.53">   initTree: function() {</span>
<a href="#l13.54"></a><span id="l13.54">     if (!this._tree)</span>
<a href="#l13.55"></a><span id="l13.55">       return</span>
<a href="#l13.56"></a><span id="l13.56">     // We're resetting the whole list, either because we're creating the tree</span>
<a href="#l13.57"></a><span id="l13.57">     // or because we need to recreate it</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/suite/common/pref/pref-download.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/suite/common/pref/pref-download.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -33,78 +33,187 @@</span>
<a href="#l14.4"></a><span id="l14.4">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l14.5"></a><span id="l14.5">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l14.6"></a><span id="l14.6">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l14.7"></a><span id="l14.7">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l14.8"></a><span id="l14.8">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l14.9"></a><span id="l14.9">  *</span>
<a href="#l14.10"></a><span id="l14.10">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+const kDesktop = 0;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+const kDownloads = 1;</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+const kUserDir = 2;</span>
<a href="#l14.15"></a><span id="l14.15"> var gFPHandler;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17"> function Startup()</span>
<a href="#l14.18"></a><span id="l14.18"> {</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineminus">-  var pAutoDL = document.getElementById(&quot;browser.download.autoDownload&quot;);</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-  SetAutoDLEnabled(pAutoDL.value);</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-  var pDLSound = document.getElementById(&quot;browser.download.finished_download_sound&quot;);</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-  SetSoundEnabled(pDLSound.value);</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineminus">- </span>
<a href="#l14.24"></a><span id="l14.24">   // Define globals</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-  gFPHandler = Components.classes[&quot;@mozilla.org/network/protocol;1?name=file&quot;]</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineminus">-                         .getService(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineplus">+  gFPHandler = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineplus">+                         .getService(Components.interfaces.nsIIOService)</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineplus">+                         .getProtocolHandler(&quot;file&quot;)</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+                         .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l14.31"></a><span id="l14.31"> </span>
<a href="#l14.32"></a><span id="l14.32">   // if we don't have the alert service, hide the pref UI for using alerts to</span>
<a href="#l14.33"></a><span id="l14.33">   // notify on download completion</span>
<a href="#l14.34"></a><span id="l14.34">   // see bug #158711</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+  /* XXX: sound is to be reintroduced with bug 490467</span>
<a href="#l14.36"></a><span id="l14.36">   var downloadDoneNotificationAlertUI = document.getElementById(&quot;finishedNotificationAlert&quot;);</span>
<a href="#l14.37"></a><span id="l14.37">   downloadDoneNotificationAlertUI.hidden = !(&quot;@mozilla.org/alerts-service;1&quot; in Components.classes);</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+  */</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+}</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineplus">+/**</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+  * Enables/disables the folder field and Browse button based on whether a</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineplus">+  * default download directory is being used.</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineplus">+  */</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+function ReadUseDownloadDir()</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineplus">+{</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineplus">+  var downloadFolder = document.getElementById(&quot;downloadFolder&quot;);</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+  var chooseFolder = document.getElementById(&quot;chooseFolder&quot;);</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineplus">+  var preference = document.getElementById(&quot;browser.download.useDownloadDir&quot;);</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineplus">+  downloadFolder.disabled = !preference.value;</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+  chooseFolder.disabled = !preference.value;</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineplus">+}</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineplus">+</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineplus">+/**</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineplus">+  * Displays a file picker in which the user can choose the location where</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineplus">+  * downloads are automatically saved, updating preferences and UI in</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+  * response to the choice, if one is made.</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineplus">+  */</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineplus">+function ChooseFolder()</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineplus">+{</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineplus">+  const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineplus">+</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+  var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineplus">+                     .createInstance(nsIFilePicker);</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineplus">+  var prefutilitiesBundle = document.getElementById(&quot;bundle_prefutilities&quot;);</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineplus">+  var title = prefutilitiesBundle.getString(&quot;downloadfolder&quot;);</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineplus">+  fp.init(window, title, nsIFilePicker.modeGetFolder);</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineplus">+  fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineplus">+</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+  var folderListPref = document.getElementById(&quot;browser.download.folderList&quot;);</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineplus">+  fp.displayDirectory = IndexToFolder(folderListPref.value); // file</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineplus">+</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineplus">+  if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineplus">+    var currentDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineplus">+    currentDirPref.value = fp.file;</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+    folderListPref.value = FolderToIndex(fp.file);</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineplus">+    // Note, the real prefs will not be updated yet, so dnld manager's</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineplus">+    // userDownloadsDirectory may not return the right folder after</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineplus">+    // this code executes. displayDownloadDirPref will be called on</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineplus">+    // the assignment above to update the UI.</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineplus">+  }</span>
<a href="#l14.82"></a><span id="l14.82"> }</span>
<a href="#l14.83"></a><span id="l14.83"> </span>
<a href="#l14.84"></a><span id="l14.84" class="difflineminus">-function SetAutoDLEnabled(aEnable)</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineplus">+/**</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineplus">+  * Initializes the download folder display settings based on the user's</span>
<a href="#l14.87"></a><span id="l14.87" class="difflineplus">+  * preferences.</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineplus">+  */</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineplus">+function DisplayDownloadDirPref()</span>
<a href="#l14.90"></a><span id="l14.90"> {</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineminus">-  EnableElementById(&quot;downloadLocation&quot;, !aEnable, false);</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineplus">+  var folderListPref = document.getElementById(&quot;browser.download.folderList&quot;);</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineplus">+  var currentDirPref = IndexToFolder(folderListPref.value); // file</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineplus">+  var prefutilitiesBundle = document.getElementById(&quot;bundle_prefutilities&quot;);</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineplus">+  var iconUrlSpec = gFPHandler.getURLSpecFromFile(currentDirPref);</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineplus">+  var downloadFolder = document.getElementById(&quot;downloadFolder&quot;);</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineplus">+  downloadFolder.image = &quot;moz-icon://&quot; + iconUrlSpec + &quot;?size=16&quot;;</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineplus">+</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineplus">+  // Display a 'pretty' label or the path in the UI.</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineplus">+  switch (FolderToIndex(currentDirPref)) {</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineplus">+    case kDesktop:</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineplus">+      downloadFolder.label = prefutilitiesBundle.getString(&quot;desktopFolderName&quot;);</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineplus">+      break;</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineplus">+    case kDownloads:</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineplus">+      downloadFolder.label = prefutilitiesBundle.getString(&quot;downloadsFolderName&quot;);</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineplus">+      break;</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineplus">+    default:</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineplus">+      downloadFolder.label = currentDirPref ? currentDirPref.path : &quot;&quot;;</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineplus">+      break;</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineplus">+  }</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineplus">+}</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineplus">+</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineplus">+/**</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineplus">+  * Returns the Desktop folder.</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineplus">+  */</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineplus">+function GetDesktopFolder()</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineplus">+{</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineplus">+  return Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineplus">+                   .getService(Components.interfaces.nsIProperties)</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineplus">+                   .get(&quot;Desk&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l14.121"></a><span id="l14.121"> }</span>
<a href="#l14.122"></a><span id="l14.122"> </span>
<a href="#l14.123"></a><span id="l14.123" class="difflineplus">+/**</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineplus">+  * Returns the Downloads folder as determined by the XPCOM directory service</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineplus">+  * via the download manager's attribute defaultDownloadsDirectory.</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineplus">+  */</span>
<a href="#l14.127"></a><span id="l14.127" class="difflineplus">+function GetDownloadsFolder()</span>
<a href="#l14.128"></a><span id="l14.128" class="difflineplus">+{</span>
<a href="#l14.129"></a><span id="l14.129" class="difflineplus">+  return Components.classes[&quot;@mozilla.org/download-manager;1&quot;]</span>
<a href="#l14.130"></a><span id="l14.130" class="difflineplus">+                   .getService(Components.interfaces.nsIDownloadManager)</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineplus">+                   .defaultDownloadsDirectory;</span>
<a href="#l14.132"></a><span id="l14.132" class="difflineplus">+}</span>
<a href="#l14.133"></a><span id="l14.133" class="difflineplus">+</span>
<a href="#l14.134"></a><span id="l14.134" class="difflineplus">+/**</span>
<a href="#l14.135"></a><span id="l14.135" class="difflineplus">+  * Determines the type of the given folder.</span>
<a href="#l14.136"></a><span id="l14.136" class="difflineplus">+  *</span>
<a href="#l14.137"></a><span id="l14.137" class="difflineplus">+  * @param   aFolder</span>
<a href="#l14.138"></a><span id="l14.138" class="difflineplus">+  *          the folder whose type is to be determined</span>
<a href="#l14.139"></a><span id="l14.139" class="difflineplus">+  * @returns integer</span>
<a href="#l14.140"></a><span id="l14.140" class="difflineplus">+  *          kDesktop if aFolder is the Desktop or is unspecified,</span>
<a href="#l14.141"></a><span id="l14.141" class="difflineplus">+  *          kDownloads if aFolder is the Downloads folder,</span>
<a href="#l14.142"></a><span id="l14.142" class="difflineplus">+  *          kUserDir otherwise</span>
<a href="#l14.143"></a><span id="l14.143" class="difflineplus">+  */</span>
<a href="#l14.144"></a><span id="l14.144" class="difflineplus">+function FolderToIndex(aFolder)</span>
<a href="#l14.145"></a><span id="l14.145" class="difflineplus">+{</span>
<a href="#l14.146"></a><span id="l14.146" class="difflineplus">+  if (!aFolder || aFolder.equals(GetDesktopFolder()))</span>
<a href="#l14.147"></a><span id="l14.147" class="difflineplus">+    return kDesktop;</span>
<a href="#l14.148"></a><span id="l14.148" class="difflineplus">+  if (aFolder.equals(GetDownloadsFolder()))</span>
<a href="#l14.149"></a><span id="l14.149" class="difflineplus">+    return kDownloads;</span>
<a href="#l14.150"></a><span id="l14.150" class="difflineplus">+  return kUserDir;</span>
<a href="#l14.151"></a><span id="l14.151" class="difflineplus">+}</span>
<a href="#l14.152"></a><span id="l14.152" class="difflineplus">+</span>
<a href="#l14.153"></a><span id="l14.153" class="difflineplus">+/**</span>
<a href="#l14.154"></a><span id="l14.154" class="difflineplus">+  * Converts an integer into the corresponding folder.</span>
<a href="#l14.155"></a><span id="l14.155" class="difflineplus">+  *</span>
<a href="#l14.156"></a><span id="l14.156" class="difflineplus">+  * @param   aIndex</span>
<a href="#l14.157"></a><span id="l14.157" class="difflineplus">+  *          an integer</span>
<a href="#l14.158"></a><span id="l14.158" class="difflineplus">+  * @returns the Desktop folder if aIndex == kDesktop,</span>
<a href="#l14.159"></a><span id="l14.159" class="difflineplus">+  *          the Downloads folder if aIndex == kDownloads,</span>
<a href="#l14.160"></a><span id="l14.160" class="difflineplus">+  *          the folder stored in browser.download.dir</span>
<a href="#l14.161"></a><span id="l14.161" class="difflineplus">+  */</span>
<a href="#l14.162"></a><span id="l14.162" class="difflineplus">+function IndexToFolder(aIndex)</span>
<a href="#l14.163"></a><span id="l14.163" class="difflineplus">+{</span>
<a href="#l14.164"></a><span id="l14.164" class="difflineplus">+  var folder;</span>
<a href="#l14.165"></a><span id="l14.165" class="difflineplus">+  switch (aIndex) {</span>
<a href="#l14.166"></a><span id="l14.166" class="difflineplus">+    default:</span>
<a href="#l14.167"></a><span id="l14.167" class="difflineplus">+      folder = document.getElementById(&quot;browser.download.dir&quot;).value;</span>
<a href="#l14.168"></a><span id="l14.168" class="difflineplus">+      if (folder &amp;&amp; folder.exists())</span>
<a href="#l14.169"></a><span id="l14.169" class="difflineplus">+        return folder;</span>
<a href="#l14.170"></a><span id="l14.170" class="difflineplus">+    case kDownloads:</span>
<a href="#l14.171"></a><span id="l14.171" class="difflineplus">+      folder = GetDownloadsFolder();</span>
<a href="#l14.172"></a><span id="l14.172" class="difflineplus">+      if (folder &amp;&amp; folder.exists())</span>
<a href="#l14.173"></a><span id="l14.173" class="difflineplus">+        return folder;</span>
<a href="#l14.174"></a><span id="l14.174" class="difflineplus">+    case kDesktop:</span>
<a href="#l14.175"></a><span id="l14.175" class="difflineplus">+      return GetDesktopFolder();</span>
<a href="#l14.176"></a><span id="l14.176" class="difflineplus">+  }</span>
<a href="#l14.177"></a><span id="l14.177" class="difflineplus">+}</span>
<a href="#l14.178"></a><span id="l14.178" class="difflineplus">+</span>
<a href="#l14.179"></a><span id="l14.179" class="difflineplus">+/* XXX: sound is to be reintroduced with bug 490467</span>
<a href="#l14.180"></a><span id="l14.180"> function SetSoundEnabled(aEnable)</span>
<a href="#l14.181"></a><span id="l14.181"> {</span>
<a href="#l14.182"></a><span id="l14.182">   EnableElementById(&quot;downloadSndURL&quot;, aEnable, false);</span>
<a href="#l14.183"></a><span id="l14.183">   document.getElementById(&quot;downloadSndPreview&quot;).disabled = !aEnable;</span>
<a href="#l14.184"></a><span id="l14.184"> }</span>
<a href="#l14.185"></a><span id="l14.185"> </span>
<a href="#l14.186"></a><span id="l14.186" class="difflineminus">-function ReadDLFolder(aField)</span>
<a href="#l14.187"></a><span id="l14.187" class="difflineminus">-{</span>
<a href="#l14.188"></a><span id="l14.188" class="difflineminus">-  var file = document.getElementById(&quot;browser.download.dir&quot;).value;</span>
<a href="#l14.189"></a><span id="l14.189" class="difflineminus">-  if (file)</span>
<a href="#l14.190"></a><span id="l14.190" class="difflineminus">-  {</span>
<a href="#l14.191"></a><span id="l14.191" class="difflineminus">-    aField.file = file;</span>
<a href="#l14.192"></a><span id="l14.192" class="difflineminus">-    aField.label = (/Mac/.test(navigator.platform)) ? file.leafName : file.path;</span>
<a href="#l14.193"></a><span id="l14.193" class="difflineminus">-  }</span>
<a href="#l14.194"></a><span id="l14.194" class="difflineminus">-}</span>
<a href="#l14.195"></a><span id="l14.195" class="difflineminus">-</span>
<a href="#l14.196"></a><span id="l14.196" class="difflineminus">-function DownloadSelectFolder()</span>
<a href="#l14.197"></a><span id="l14.197" class="difflineminus">-{</span>
<a href="#l14.198"></a><span id="l14.198" class="difflineminus">-  var pref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l14.199"></a><span id="l14.199" class="difflineminus">-  const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l14.200"></a><span id="l14.200" class="difflineminus">-  var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l14.201"></a><span id="l14.201" class="difflineminus">-                     .createInstance(nsIFilePicker);</span>
<a href="#l14.202"></a><span id="l14.202" class="difflineminus">-  var prefutilitiesBundle = document.getElementById(&quot;bundle_prefutilities&quot;);</span>
<a href="#l14.203"></a><span id="l14.203" class="difflineminus">-  var title = prefutilitiesBundle.getString(&quot;downloadfolder&quot;);</span>
<a href="#l14.204"></a><span id="l14.204" class="difflineminus">-  fp.init(window, title, nsIFilePicker.modeGetFolder);</span>
<a href="#l14.205"></a><span id="l14.205" class="difflineminus">-  fp.displayDirectory = pref.value;</span>
<a href="#l14.206"></a><span id="l14.206" class="difflineminus">-  fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l14.207"></a><span id="l14.207" class="difflineminus">-  if (fp.show() == nsIFilePicker.returnOK)</span>
<a href="#l14.208"></a><span id="l14.208" class="difflineminus">-    pref.value = fp.file;</span>
<a href="#l14.209"></a><span id="l14.209" class="difflineminus">-}</span>
<a href="#l14.210"></a><span id="l14.210" class="difflineminus">-</span>
<a href="#l14.211"></a><span id="l14.211" class="difflineminus">-</span>
<a href="#l14.212"></a><span id="l14.212"> function BrowseSound()</span>
<a href="#l14.213"></a><span id="l14.213"> {</span>
<a href="#l14.214"></a><span id="l14.214">   var pref = document.getElementById(&quot;browser.download.finished_sound_url&quot;);</span>
<a href="#l14.215"></a><span id="l14.215"> </span>
<a href="#l14.216"></a><span id="l14.216">   const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l14.217"></a><span id="l14.217" class="difflineplus">+  const nsILocalFile = Components.interfaces.nsILocalFile;</span>
<a href="#l14.218"></a><span id="l14.218">   var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l14.219"></a><span id="l14.219">                      .createInstance(nsIFilePicker);</span>
<a href="#l14.220"></a><span id="l14.220">   var prefutilitiesBundle = document.getElementById(&quot;bundle_prefutilities&quot;);</span>
<a href="#l14.221"></a><span id="l14.221">   var title = prefutilitiesBundle.getString(&quot;choosesound&quot;);</span>
<a href="#l14.222"></a><span id="l14.222">   fp.init(window, title, nsIFilePicker.modeOpen);</span>
<a href="#l14.223"></a><span id="l14.223"> </span>
<a href="#l14.224"></a><span id="l14.224">   if (pref.value)</span>
<a href="#l14.225"></a><span id="l14.225">     fp.displayDirectory = gFPHandler.getFileFromURLSpec(pref.value)</span>
<a href="#l14.226"></a><span id="l14.226" class="difflineat">@@ -139,8 +248,9 @@ function ReadSndFile(aField)</span>
<a href="#l14.227"></a><span id="l14.227">   var pref = document.getElementById(&quot;browser.download.finished_sound_url&quot;);</span>
<a href="#l14.228"></a><span id="l14.228">   if (pref.value)</span>
<a href="#l14.229"></a><span id="l14.229">   {</span>
<a href="#l14.230"></a><span id="l14.230">     var file = gFPHandler.getFileFromURLSpec(pref.value);</span>
<a href="#l14.231"></a><span id="l14.231">     aField.file = file;</span>
<a href="#l14.232"></a><span id="l14.232">     aField.label = (/Mac/.test(navigator.platform)) ? file.leafName : file.path;</span>
<a href="#l14.233"></a><span id="l14.233">   }</span>
<a href="#l14.234"></a><span id="l14.234"> }</span>
<a href="#l14.235"></a><span id="l14.235" class="difflineplus">+*/</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/suite/common/pref/pref-download.xul</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/suite/common/pref/pref-download.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -43,110 +43,103 @@</span>
<a href="#l15.4"></a><span id="l15.4"> &lt;!DOCTYPE overlay SYSTEM &quot;chrome://communicator/locale/pref/pref-download.dtd&quot;&gt;</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6"> &lt;overlay xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l15.7"></a><span id="l15.7">   &lt;prefpane id=&quot;download_pane&quot;</span>
<a href="#l15.8"></a><span id="l15.8">             label=&quot;&amp;pref.download.title;&quot;</span>
<a href="#l15.9"></a><span id="l15.9">             script=&quot;chrome://communicator/content/pref/pref-download.js&quot;&gt;</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">     &lt;preferences&gt;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      &lt;preference id=&quot;browser.downloadmanager.behavior&quot;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-                  name=&quot;browser.downloadmanager.behavior&quot;</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+      &lt;preference id=&quot;browser.download.manager.focusWhenStarting&quot;</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+                  name=&quot;browser.download.manager.focusWhenStarting&quot;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+                  type=&quot;bool&quot; inverted=&quot;true&quot;/&gt;</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+      &lt;preference id=&quot;browser.download.manager.behavior&quot;</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineplus">+                  name=&quot;browser.download.manager.behavior&quot;</span>
<a href="#l15.19"></a><span id="l15.19">                   type=&quot;int&quot;/&gt;</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-      &lt;preference id=&quot;browser.download.autoDownload&quot;</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-                  name=&quot;browser.download.autoDownload&quot;</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-                  type=&quot;bool&quot;</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-                  onchange=&quot;SetAutoDLEnabled(this.value);&quot;/&gt;</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">-      &lt;preference id=&quot;browser.download.lastLocation&quot;</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-                  name=&quot;browser.download.lastLocation&quot;</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+      &lt;preference id=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineplus">+                  name=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l15.28"></a><span id="l15.28">                   type=&quot;bool&quot;/&gt;</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineminus">-      &lt;preference id=&quot;browser.download.finished_download_sound&quot;</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineplus">+      &lt;preference id=&quot;browser.download.dir&quot;</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineplus">+                  name=&quot;browser.download.dir&quot;</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+                  type=&quot;file&quot;/&gt;</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineplus">+      &lt;preference id=&quot;browser.download.folderList&quot;</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+                  name=&quot;browser.download.folderList&quot;</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+                  type=&quot;int&quot;</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+                  onchange=&quot;DisplayDownloadDirPref();&quot;/&gt;</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineplus">+      &lt;!-- XXX: to be reintroduced with bug 490467</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineplus">+       preference id=&quot;browser.download.finished_download_sound&quot;</span>
<a href="#l15.39"></a><span id="l15.39">                   name=&quot;browser.download.finished_download_sound&quot;</span>
<a href="#l15.40"></a><span id="l15.40">                   type=&quot;bool&quot;</span>
<a href="#l15.41"></a><span id="l15.41">                   onchange=&quot;SetSoundEnabled(this.value);&quot;/&gt;</span>
<a href="#l15.42"></a><span id="l15.42">       &lt;preference id=&quot;browser.download.finished_download_alert&quot;</span>
<a href="#l15.43"></a><span id="l15.43">                   name=&quot;browser.download.finished_download_alert&quot;</span>
<a href="#l15.44"></a><span id="l15.44">                   type=&quot;bool&quot;/&gt;</span>
<a href="#l15.45"></a><span id="l15.45">       &lt;preference id=&quot;browser.download.finished_sound_url&quot;</span>
<a href="#l15.46"></a><span id="l15.46">                   name=&quot;browser.download.finished_sound_url&quot;</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">-                  type=&quot;string&quot;/&gt;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineminus">-      &lt;preference id=&quot;browser.download.dir&quot;</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineminus">-                  name=&quot;browser.download.dir&quot;</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineminus">-                  type=&quot;file&quot;/&gt;</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineplus">+                  type=&quot;string&quot;/ --&gt;</span>
<a href="#l15.52"></a><span id="l15.52">     &lt;/preferences&gt;</span>
<a href="#l15.53"></a><span id="l15.53"> </span>
<a href="#l15.54"></a><span id="l15.54">     &lt;groupbox&gt;</span>
<a href="#l15.55"></a><span id="l15.55">       &lt;caption label=&quot;&amp;downloadBehavior.label;&quot;/&gt;</span>
<a href="#l15.56"></a><span id="l15.56" class="difflineplus">+      &lt;checkbox id=&quot;focusWhenStarting&quot;</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineplus">+                label=&quot;&amp;focusWhenStarting.label;&quot;</span>
<a href="#l15.58"></a><span id="l15.58" class="difflineplus">+                preference=&quot;browser.download.manager.focusWhenStarting&quot;</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineplus">+                accesskey=&quot;&amp;focusWhenStarting.accesskey;&quot;/&gt;</span>
<a href="#l15.60"></a><span id="l15.60">       &lt;radiogroup id=&quot;downloadBehavior&quot;</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineminus">-                  preference=&quot;browser.downloadmanager.behavior&quot;&gt;</span>
<a href="#l15.62"></a><span id="l15.62" class="difflineplus">+                  class=&quot;indent&quot;</span>
<a href="#l15.63"></a><span id="l15.63" class="difflineplus">+                  preference=&quot;browser.download.manager.behavior&quot;&gt;</span>
<a href="#l15.64"></a><span id="l15.64">         &lt;radio value=&quot;0&quot;</span>
<a href="#l15.65"></a><span id="l15.65">                label=&quot;&amp;openDM.label;&quot;</span>
<a href="#l15.66"></a><span id="l15.66">                accesskey=&quot;&amp;openDM.accesskey;&quot;/&gt;</span>
<a href="#l15.67"></a><span id="l15.67">         &lt;radio value=&quot;1&quot;</span>
<a href="#l15.68"></a><span id="l15.68">                label=&quot;&amp;openProgressDialog.label;&quot;</span>
<a href="#l15.69"></a><span id="l15.69">                accesskey=&quot;&amp;openProgressDialog.accesskey;&quot;/&gt;</span>
<a href="#l15.70"></a><span id="l15.70">         &lt;radio value=&quot;2&quot;</span>
<a href="#l15.71"></a><span id="l15.71">                label=&quot;&amp;doNothing.label;&quot;</span>
<a href="#l15.72"></a><span id="l15.72">                accesskey=&quot;&amp;doNothing.accesskey;&quot;/&gt;</span>
<a href="#l15.73"></a><span id="l15.73">       &lt;/radiogroup&gt;</span>
<a href="#l15.74"></a><span id="l15.74">     &lt;/groupbox&gt;</span>
<a href="#l15.75"></a><span id="l15.75"> </span>
<a href="#l15.76"></a><span id="l15.76">     &lt;groupbox&gt;</span>
<a href="#l15.77"></a><span id="l15.77">       &lt;caption label=&quot;&amp;downloadLocation.label;&quot;/&gt;</span>
<a href="#l15.78"></a><span id="l15.78" class="difflineminus">-      &lt;radiogroup id=&quot;autoDownload&quot;</span>
<a href="#l15.79"></a><span id="l15.79" class="difflineminus">-                  preference=&quot;browser.download.autoDownload&quot;&gt;</span>
<a href="#l15.80"></a><span id="l15.80" class="difflineminus">-        &lt;radio value=&quot;false&quot;</span>
<a href="#l15.81"></a><span id="l15.81" class="difflineminus">-               label=&quot;&amp;promptDownload.label;&quot;</span>
<a href="#l15.82"></a><span id="l15.82" class="difflineminus">-               accesskey=&quot;&amp;promptDownload.accesskey;&quot;/&gt;</span>
<a href="#l15.83"></a><span id="l15.83" class="difflineminus">-        &lt;radiogroup id=&quot;downloadLocation&quot;</span>
<a href="#l15.84"></a><span id="l15.84" class="difflineminus">-                    class=&quot;indent&quot;</span>
<a href="#l15.85"></a><span id="l15.85" class="difflineminus">-                    preference=&quot;browser.download.lastLocation&quot;&gt;</span>
<a href="#l15.86"></a><span id="l15.86" class="difflineminus">-          &lt;radio value=&quot;true&quot;</span>
<a href="#l15.87"></a><span id="l15.87" class="difflineminus">-                 label=&quot;&amp;lastLocation.label;&quot;</span>
<a href="#l15.88"></a><span id="l15.88" class="difflineminus">-                 accesskey=&quot;&amp;lastLocation.accesskey;&quot;/&gt;</span>
<a href="#l15.89"></a><span id="l15.89" class="difflineminus">-          &lt;radio value=&quot;false&quot;</span>
<a href="#l15.90"></a><span id="l15.90" class="difflineminus">-                 label=&quot;&amp;specifiedLocation.label;&quot;</span>
<a href="#l15.91"></a><span id="l15.91" class="difflineminus">-                 accesskey=&quot;&amp;specifiedLocation.accesskey;&quot;/&gt;</span>
<a href="#l15.92"></a><span id="l15.92" class="difflineminus">-        &lt;/radiogroup&gt;</span>
<a href="#l15.93"></a><span id="l15.93" class="difflineminus">-        &lt;radio value=&quot;true&quot;</span>
<a href="#l15.94"></a><span id="l15.94" class="difflineminus">-               label=&quot;&amp;autoDownload.label;&quot;</span>
<a href="#l15.95"></a><span id="l15.95" class="difflineminus">-               accesskey=&quot;&amp;autoDownload.accesskey;&quot;/&gt;</span>
<a href="#l15.96"></a><span id="l15.96" class="difflineminus">-      &lt;/radiogroup&gt;</span>
<a href="#l15.97"></a><span id="l15.97" class="difflineminus">-</span>
<a href="#l15.98"></a><span id="l15.98" class="difflineminus">-      &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l15.99"></a><span id="l15.99" class="difflineminus">-</span>
<a href="#l15.100"></a><span id="l15.100" class="difflineminus">-      &lt;vbox&gt;</span>
<a href="#l15.101"></a><span id="l15.101" class="difflineminus">-        &lt;label value=&quot;&amp;downloadFolder.label;&quot;/&gt;</span>
<a href="#l15.102"></a><span id="l15.102" class="difflineminus">-        &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l15.103"></a><span id="l15.103" class="difflineminus">-          &lt;filefield id=&quot;downloadFolder&quot;</span>
<a href="#l15.104"></a><span id="l15.104" class="difflineminus">-                     flex=&quot;1&quot;</span>
<a href="#l15.105"></a><span id="l15.105" class="difflineplus">+      &lt;radiogroup id=&quot;saveWhere&quot;</span>
<a href="#l15.106"></a><span id="l15.106" class="difflineplus">+                  preference=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l15.107"></a><span id="l15.107" class="difflineplus">+                  onsyncfrompreference=&quot;return document.getElementById('download_pane').ReadUseDownloadDir();&quot;&gt;</span>
<a href="#l15.108"></a><span id="l15.108" class="difflineplus">+        &lt;hbox id=&quot;saveToRow&quot;&gt;</span>
<a href="#l15.109"></a><span id="l15.109" class="difflineplus">+          &lt;radio id=&quot;saveTo&quot; value=&quot;true&quot;</span>
<a href="#l15.110"></a><span id="l15.110" class="difflineplus">+                 label=&quot;&amp;saveTo.label;&quot;</span>
<a href="#l15.111"></a><span id="l15.111" class="difflineplus">+                 accesskey=&quot;&amp;saveTo.accesskey;&quot;</span>
<a href="#l15.112"></a><span id="l15.112" class="difflineplus">+                 aria-labelledby=&quot;saveTo downloadFolder&quot;/&gt;</span>
<a href="#l15.113"></a><span id="l15.113" class="difflineplus">+          &lt;filefield id=&quot;downloadFolder&quot; flex=&quot;1&quot;</span>
<a href="#l15.114"></a><span id="l15.114">                      preference=&quot;browser.download.dir&quot;</span>
<a href="#l15.115"></a><span id="l15.115">                      preference-editable=&quot;true&quot;</span>
<a href="#l15.116"></a><span id="l15.116" class="difflineminus">-                     onsyncfrompreference=&quot;return document.getElementById('download_pane').ReadDLFolder(this);&quot;/&gt;</span>
<a href="#l15.117"></a><span id="l15.117" class="difflineminus">-          &lt;button id=&quot;chooseDownloadFolder&quot;</span>
<a href="#l15.118"></a><span id="l15.118" class="difflineplus">+                     aria-labelledby=&quot;saveTo&quot;</span>
<a href="#l15.119"></a><span id="l15.119" class="difflineplus">+                     onsyncfrompreference=&quot;document.getElementById('download_pane').DisplayDownloadDirPref();&quot;/&gt;</span>
<a href="#l15.120"></a><span id="l15.120" class="difflineplus">+          &lt;button id=&quot;chooseFolder&quot; oncommand=&quot;ChooseFolder();&quot;</span>
<a href="#l15.121"></a><span id="l15.121">                   label=&quot;&amp;chooseDownloadFolder.label;&quot;</span>
<a href="#l15.122"></a><span id="l15.122" class="difflineminus">-                  accesskey=&quot;&amp;chooseDownloadFolder.accesskey;&quot;</span>
<a href="#l15.123"></a><span id="l15.123" class="difflineminus">-                  oncommand=&quot;DownloadSelectFolder();&quot;&gt;</span>
<a href="#l15.124"></a><span id="l15.124" class="difflineminus">-            &lt;observes element=&quot;downloadFolder&quot; attribute=&quot;disabled&quot;/&gt;</span>
<a href="#l15.125"></a><span id="l15.125" class="difflineminus">-          &lt;/button&gt;</span>
<a href="#l15.126"></a><span id="l15.126" class="difflineplus">+                  accesskey=&quot;&amp;chooseDownloadFolder.accesskey;&quot;/&gt;</span>
<a href="#l15.127"></a><span id="l15.127">         &lt;/hbox&gt;</span>
<a href="#l15.128"></a><span id="l15.128" class="difflineminus">-      &lt;/vbox&gt;</span>
<a href="#l15.129"></a><span id="l15.129" class="difflineplus">+        &lt;radio id=&quot;alwaysAsk&quot; value=&quot;false&quot;</span>
<a href="#l15.130"></a><span id="l15.130" class="difflineplus">+               label=&quot;&amp;alwaysAsk.label;&quot;</span>
<a href="#l15.131"></a><span id="l15.131" class="difflineplus">+               accesskey=&quot;&amp;alwaysAsk.accesskey;&quot;/&gt;</span>
<a href="#l15.132"></a><span id="l15.132" class="difflineplus">+      &lt;/radiogroup&gt;</span>
<a href="#l15.133"></a><span id="l15.133">     &lt;/groupbox&gt;</span>
<a href="#l15.134"></a><span id="l15.134"> </span>
<a href="#l15.135"></a><span id="l15.135" class="difflineminus">-    &lt;groupbox&gt;</span>
<a href="#l15.136"></a><span id="l15.136" class="difflineplus">+    &lt;!-- XXX: to be reintroduced with bug 490467</span>
<a href="#l15.137"></a><span id="l15.137" class="difflineplus">+     groupbox&gt;</span>
<a href="#l15.138"></a><span id="l15.138">       &lt;caption label=&quot;&amp;finishedBehavior.label;&quot;/&gt;</span>
<a href="#l15.139"></a><span id="l15.139">       &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l15.140"></a><span id="l15.140" class="difflineminus">-	&lt;checkbox id=&quot;finishedNotificationSound&quot;</span>
<a href="#l15.141"></a><span id="l15.141" class="difflineplus">+        &lt;checkbox id=&quot;finishedNotificationSound&quot;</span>
<a href="#l15.142"></a><span id="l15.142">                   label=&quot;&amp;playSound.label;&quot;</span>
<a href="#l15.143"></a><span id="l15.143" class="difflineminus">-		  preference=&quot;browser.download.finished_download_sound&quot;</span>
<a href="#l15.144"></a><span id="l15.144" class="difflineminus">-		  accesskey=&quot;&amp;playSound.accesskey;&quot;/&gt;</span>
<a href="#l15.145"></a><span id="l15.145" class="difflineminus">-	&lt;checkbox id=&quot;finishedNotificationAlert&quot;</span>
<a href="#l15.146"></a><span id="l15.146" class="difflineplus">+                  preference=&quot;browser.download.finished_download_sound&quot;</span>
<a href="#l15.147"></a><span id="l15.147" class="difflineplus">+                  accesskey=&quot;&amp;playSound.accesskey;&quot;/&gt;</span>
<a href="#l15.148"></a><span id="l15.148" class="difflineplus">+        &lt;checkbox id=&quot;finishedNotificationAlert&quot;</span>
<a href="#l15.149"></a><span id="l15.149">                   label=&quot;&amp;showAlert.label;&quot;</span>
<a href="#l15.150"></a><span id="l15.150" class="difflineminus">-		  preference=&quot;browser.download.finished_download_alert&quot;</span>
<a href="#l15.151"></a><span id="l15.151" class="difflineminus">-		  accesskey=&quot;&amp;showAlert.accesskey;&quot;/&gt;</span>
<a href="#l15.152"></a><span id="l15.152" class="difflineplus">+                  preference=&quot;browser.download.finished_download_alert&quot;</span>
<a href="#l15.153"></a><span id="l15.153" class="difflineplus">+                  accesskey=&quot;&amp;showAlert.accesskey;&quot;/&gt;</span>
<a href="#l15.154"></a><span id="l15.154">       &lt;/hbox&gt;</span>
<a href="#l15.155"></a><span id="l15.155"> </span>
<a href="#l15.156"></a><span id="l15.156">       &lt;hbox align=&quot;center&quot; class=&quot;indent&quot;&gt;</span>
<a href="#l15.157"></a><span id="l15.157">         &lt;filefield id=&quot;downloadSndURL&quot;</span>
<a href="#l15.158"></a><span id="l15.158">                    flex=&quot;1&quot;</span>
<a href="#l15.159"></a><span id="l15.159">                    preference=&quot;browser.download.finished_sound_url&quot;</span>
<a href="#l15.160"></a><span id="l15.160">                    preference-editable=&quot;true&quot;</span>
<a href="#l15.161"></a><span id="l15.161">                    onsyncfrompreference=&quot;return document.getElementById('download_pane').ReadSndFile(this);&quot;/&gt;</span>
<a href="#l15.162"></a><span id="l15.162" class="difflineat">@@ -158,11 +151,11 @@</span>
<a href="#l15.163"></a><span id="l15.163">             &lt;observes element=&quot;downloadSndURL&quot; attribute=&quot;disabled&quot;/&gt;</span>
<a href="#l15.164"></a><span id="l15.164">           &lt;/button&gt;</span>
<a href="#l15.165"></a><span id="l15.165">           &lt;button id=&quot;downloadSndPreview&quot;</span>
<a href="#l15.166"></a><span id="l15.166">                   label=&quot;&amp;preview.label;&quot;</span>
<a href="#l15.167"></a><span id="l15.167">                   accesskey=&quot;&amp;preview.accesskey;&quot;</span>
<a href="#l15.168"></a><span id="l15.168">                   oncommand=&quot;PreviewSound();&quot;/&gt;</span>
<a href="#l15.169"></a><span id="l15.169">         &lt;/hbox&gt;</span>
<a href="#l15.170"></a><span id="l15.170">       &lt;/hbox&gt;</span>
<a href="#l15.171"></a><span id="l15.171" class="difflineminus">-    &lt;/groupbox&gt;</span>
<a href="#l15.172"></a><span id="l15.172" class="difflineplus">+    &lt;/groupbox --&gt;</span>
<a href="#l15.173"></a><span id="l15.173">   &lt;/prefpane&gt;</span>
<a href="#l15.174"></a><span id="l15.174"> &lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/contentAreaCommands.dtd</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/contentAreaCommands.dtd</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,13 +1,13 @@</span>
<a href="#l16.4"></a><span id="l16.4"> &lt;!-- Context Menu --&gt;</span>
<a href="#l16.5"></a><span id="l16.5"> &lt;!ENTITY popupWindowRejectCmd.label     &quot;Reject popup windows from this site&quot;&gt;</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-&lt;!ENTITY popupWindowRejectCmd.accesskey &quot;&quot;&gt;</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineplus">+&lt;!ENTITY popupWindowRejectCmd.accesskey &quot;o&quot;&gt;</span>
<a href="#l16.8"></a><span id="l16.8"> &lt;!ENTITY popupWindowAllowCmd.label      &quot;Allow popup windows from this site&quot;&gt;</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-&lt;!ENTITY popupWindowAllowCmd.accesskey  &quot;&quot;&gt;</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+&lt;!ENTITY popupWindowAllowCmd.accesskey  &quot;o&quot;&gt;</span>
<a href="#l16.11"></a><span id="l16.11"> &lt;!ENTITY openLinkCmd.label            &quot;Open Link in New Window&quot;&gt;</span>
<a href="#l16.12"></a><span id="l16.12"> &lt;!ENTITY openLinkCmd.accesskey        &quot;W&quot;&gt;</span>
<a href="#l16.13"></a><span id="l16.13"> &lt;!ENTITY openLinkCmdInTab.label       &quot;Open Link in New Tab&quot;&gt;</span>
<a href="#l16.14"></a><span id="l16.14"> &lt;!ENTITY openLinkCmdInTab.accesskey   &quot;T&quot;&gt;</span>
<a href="#l16.15"></a><span id="l16.15"> &lt;!ENTITY openLinkInWindowCmd.label    &quot;Open&quot;&gt;</span>
<a href="#l16.16"></a><span id="l16.16"> &lt;!ENTITY openLinkInWindowCmd.accesskey &quot;p&quot;&gt;</span>
<a href="#l16.17"></a><span id="l16.17"> &lt;!ENTITY openFrameCmd.label           &quot;Open Frame in New Window&quot;&gt;</span>
<a href="#l16.18"></a><span id="l16.18"> &lt;!ENTITY openFrameCmd.accesskey       &quot;W&quot;&gt;</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineat">@@ -25,74 +25,74 @@</span>
<a href="#l16.20"></a><span id="l16.20"> &lt;!ENTITY reloadCmd.accesskey          &quot;R&quot;&gt;</span>
<a href="#l16.21"></a><span id="l16.21"> &lt;!ENTITY reloadCmd.commandkey         &quot;r&quot;&gt;</span>
<a href="#l16.22"></a><span id="l16.22"> &lt;!ENTITY stopCmd.label                &quot;Stop&quot;&gt;</span>
<a href="#l16.23"></a><span id="l16.23"> &lt;!ENTITY stopCmd.accesskey            &quot;S&quot;&gt;</span>
<a href="#l16.24"></a><span id="l16.24"> &lt;!ENTITY reloadFrameCmd.label         &quot;Reload Frame&quot;&gt;</span>
<a href="#l16.25"></a><span id="l16.25"> &lt;!ENTITY reloadFrameCmd.accesskey     &quot;R&quot;&gt;</span>
<a href="#l16.26"></a><span id="l16.26"> &lt;!ENTITY viewPartialSourceForSelectionCmd.label &quot;View Selection Source&quot;&gt;</span>
<a href="#l16.27"></a><span id="l16.27"> &lt;!ENTITY viewPartialSourceForMathMLCmd.label    &quot;View MathML Source&quot;&gt;</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-&lt;!ENTITY viewPartialSourceCmd.accesskey &quot;e&quot;&gt;</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+&lt;!ENTITY viewPartialSourceCmd.accesskey &quot;u&quot;&gt;</span>
<a href="#l16.30"></a><span id="l16.30"> &lt;!ENTITY viewPageSourceCmd.label      &quot;View Page Source&quot;&gt;</span>
<a href="#l16.31"></a><span id="l16.31"> &lt;!ENTITY viewPageSourceCmd.accesskey  &quot;V&quot;&gt;</span>
<a href="#l16.32"></a><span id="l16.32"> &lt;!ENTITY viewFrameSourceCmd.label     &quot;View Frame Source&quot;&gt;</span>
<a href="#l16.33"></a><span id="l16.33"> &lt;!ENTITY viewFrameSourceCmd.accesskey &quot;V&quot;&gt;</span>
<a href="#l16.34"></a><span id="l16.34"> &lt;!ENTITY viewPageInfoCmd.label        &quot;View Page Info&quot;&gt;</span>
<a href="#l16.35"></a><span id="l16.35"> &lt;!ENTITY viewPageInfoCmd.accesskey    &quot;I&quot;&gt;</span>
<a href="#l16.36"></a><span id="l16.36"> &lt;!ENTITY viewFrameInfoCmd.label       &quot;View Frame Info&quot;&gt;</span>
<a href="#l16.37"></a><span id="l16.37"> &lt;!ENTITY viewFrameInfoCmd.accesskey   &quot;I&quot;&gt;</span>
<a href="#l16.38"></a><span id="l16.38"> &lt;!ENTITY fitImageCmd.label            &quot;Fit Image to Window&quot;&gt;</span>
<a href="#l16.39"></a><span id="l16.39"> &lt;!ENTITY fitImageCmd.accesskey        &quot;F&quot;&gt;</span>
<a href="#l16.40"></a><span id="l16.40"> &lt;!ENTITY reloadImageCmd.label         &quot;Reload Image&quot;&gt;</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-&lt;!ENTITY reloadImageCmd.accesskey     &quot;e&quot;&gt;</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineplus">+&lt;!ENTITY reloadImageCmd.accesskey     &quot;R&quot;&gt;</span>
<a href="#l16.43"></a><span id="l16.43"> &lt;!ENTITY viewImageCmd.label           &quot;View Image&quot;&gt;</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-&lt;!ENTITY viewImageCmd.accesskey       &quot;I&quot;&gt;</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+&lt;!ENTITY viewImageCmd.accesskey       &quot;w&quot;&gt;</span>
<a href="#l16.46"></a><span id="l16.46"> &lt;!ENTITY viewBGImageCmd.label         &quot;View Background Image&quot;&gt;</span>
<a href="#l16.47"></a><span id="l16.47"> &lt;!ENTITY viewBGImageCmd.accesskey     &quot;w&quot;&gt;</span>
<a href="#l16.48"></a><span id="l16.48"> &lt;!ENTITY setWallpaperCmd.label        &quot;Set As Wallpaper&quot;&gt;</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-&lt;!ENTITY setWallpaperCmd.accesskey    &quot;S&quot;&gt;</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+&lt;!ENTITY setWallpaperCmd.accesskey    &quot;e&quot;&gt;</span>
<a href="#l16.51"></a><span id="l16.51"> &lt;!ENTITY bookmarkPageCmd.label        &quot;Bookmark This Page&quot;&gt;</span>
<a href="#l16.52"></a><span id="l16.52"> &lt;!ENTITY bookmarkPageCmd.accesskey    &quot;m&quot;&gt;</span>
<a href="#l16.53"></a><span id="l16.53"> &lt;!ENTITY bookmarkLinkCmd.label        &quot;Bookmark This Link&quot;&gt;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-&lt;!ENTITY bookmarkLinkCmd.accesskey    &quot;L&quot;&gt;</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+&lt;!ENTITY bookmarkLinkCmd.accesskey    &quot;B&quot;&gt;</span>
<a href="#l16.56"></a><span id="l16.56"> &lt;!ENTITY bookmarkFrameCmd.label       &quot;Bookmark This Frame&quot;&gt;</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineminus">-&lt;!ENTITY bookmarkFrameCmd.accesskey   &quot;m&quot;&gt;</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+&lt;!ENTITY bookmarkFrameCmd.accesskey   &quot;B&quot;&gt;</span>
<a href="#l16.59"></a><span id="l16.59"> &lt;!ENTITY savePageAsCmd.label          &quot;Save Page As&quot;&gt;</span>
<a href="#l16.60"></a><span id="l16.60"> &lt;!ENTITY savePageCmd.label            &quot;Save Page&quot;&gt;</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineminus">-&lt;!ENTITY savePageCmd.accesskey        &quot;a&quot;&gt;</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+&lt;!ENTITY savePageCmd.accesskey        &quot;e&quot;&gt;</span>
<a href="#l16.63"></a><span id="l16.63"> &lt;!ENTITY savePageCmd.commandkey       &quot;s&quot;&gt;</span>
<a href="#l16.64"></a><span id="l16.64"> &lt;!ENTITY saveFrameAsCmd.label         &quot;Save Frame As&quot;&gt;</span>
<a href="#l16.65"></a><span id="l16.65"> &lt;!ENTITY saveFrameCmd.label           &quot;Save Frame&quot;&gt;</span>
<a href="#l16.66"></a><span id="l16.66"> &lt;!ENTITY saveFrameCmd.accesskey       &quot;m&quot;&gt;</span>
<a href="#l16.67"></a><span id="l16.67"> &lt;!ENTITY saveLinkAsCmd.label          &quot;Save Link Target As&quot;&gt;</span>
<a href="#l16.68"></a><span id="l16.68"> &lt;!ENTITY saveLinkCmd.label            &quot;Save Link Target&quot;&gt;</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineminus">-&lt;!ENTITY saveLinkCmd.accesskey        &quot;r&quot;&gt;</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+&lt;!ENTITY saveLinkCmd.accesskey        &quot;S&quot;&gt;</span>
<a href="#l16.71"></a><span id="l16.71"> &lt;!ENTITY saveImageAsCmd.label         &quot;Save Image As&quot;&gt;</span>
<a href="#l16.72"></a><span id="l16.72"> &lt;!ENTITY saveImageCmd.label           &quot;Save Image&quot;&gt;</span>
<a href="#l16.73"></a><span id="l16.73"> &lt;!ENTITY saveImageCmd.accesskey       &quot;v&quot;&gt;</span>
<a href="#l16.74"></a><span id="l16.74"> &lt;!ENTITY saveVideoCmd.label           &quot;Save Video As&quot;&gt;</span>
<a href="#l16.75"></a><span id="l16.75"> &lt;!ENTITY saveVideoCmd.accesskey       &quot;v&quot;&gt;</span>
<a href="#l16.76"></a><span id="l16.76"> &lt;!ENTITY saveAudioCmd.label           &quot;Save Audio As&quot;&gt;</span>
<a href="#l16.77"></a><span id="l16.77"> &lt;!ENTITY saveAudioCmd.accesskey       &quot;v&quot;&gt;</span>
<a href="#l16.78"></a><span id="l16.78"> &lt;!ENTITY copyCmd.label                &quot;Copy&quot;&gt;</span>
<a href="#l16.79"></a><span id="l16.79"> &lt;!ENTITY copyCmd.accesskey            &quot;C&quot;&gt;</span>
<a href="#l16.80"></a><span id="l16.80"> &lt;!ENTITY selectAllCmd.label           &quot;Select All&quot;&gt;</span>
<a href="#l16.81"></a><span id="l16.81"> &lt;!ENTITY selectAllCmd.accesskey       &quot;A&quot;&gt;</span>
<a href="#l16.82"></a><span id="l16.82"> &lt;!ENTITY copyLinkCmd.label            &quot;Copy Link Location&quot;&gt;</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineminus">-&lt;!ENTITY copyLinkCmd.accesskey        &quot;C&quot;&gt;</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineplus">+&lt;!ENTITY copyLinkCmd.accesskey        &quot;L&quot;&gt;</span>
<a href="#l16.85"></a><span id="l16.85"> &lt;!ENTITY copyImageCmd.label           &quot;Copy Image&quot;&gt;</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineminus">-&lt;!ENTITY copyImageCmd.accesskey       &quot;o&quot;&gt;</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+&lt;!ENTITY copyImageCmd.accesskey       &quot;I&quot;&gt;</span>
<a href="#l16.88"></a><span id="l16.88"> &lt;!ENTITY copyVideoURLCmd.label        &quot;Copy Video Location&quot;&gt;</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineminus">-&lt;!ENTITY copyVideoURLCmd.accesskey    &quot;o&quot;&gt;</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineplus">+&lt;!ENTITY copyVideoURLCmd.accesskey    &quot;L&quot;&gt;</span>
<a href="#l16.91"></a><span id="l16.91"> &lt;!ENTITY copyAudioURLCmd.label        &quot;Copy Audio Location&quot;&gt;</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineminus">-&lt;!ENTITY copyAudioURLCmd.accesskey    &quot;o&quot;&gt;</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineplus">+&lt;!ENTITY copyAudioURLCmd.accesskey    &quot;L&quot;&gt;</span>
<a href="#l16.94"></a><span id="l16.94"> &lt;!ENTITY metadataCmd.label            &quot;Properties&quot;&gt;</span>
<a href="#l16.95"></a><span id="l16.95"> &lt;!ENTITY metadataCmd.accesskey        &quot;P&quot;&gt;</span>
<a href="#l16.96"></a><span id="l16.96"> &lt;!ENTITY copyEmailCmd.label           &quot;Copy Email Address&quot;&gt;</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineminus">-&lt;!ENTITY copyEmailCmd.accesskey       &quot;E&quot;&gt;</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineplus">+&lt;!ENTITY copyEmailCmd.accesskey       &quot;A&quot;&gt;</span>
<a href="#l16.99"></a><span id="l16.99"> &lt;!ENTITY pasteCmd.label               &quot;Paste&quot;&gt;</span>
<a href="#l16.100"></a><span id="l16.100"> &lt;!ENTITY pasteCmd.accesskey           &quot;P&quot;&gt;</span>
<a href="#l16.101"></a><span id="l16.101"> &lt;!ENTITY cutCmd.label                 &quot;Cut&quot;&gt;</span>
<a href="#l16.102"></a><span id="l16.102"> &lt;!ENTITY cutCmd.accesskey             &quot;t&quot;&gt;</span>
<a href="#l16.103"></a><span id="l16.103"> &lt;!ENTITY deleteCmd.label              &quot;Delete&quot;&gt;</span>
<a href="#l16.104"></a><span id="l16.104"> &lt;!ENTITY deleteCmd.accesskey          &quot;D&quot;&gt;</span>
<a href="#l16.105"></a><span id="l16.105"> &lt;!ENTITY undoCmd.label                &quot;Undo&quot;&gt;</span>
<a href="#l16.106"></a><span id="l16.106"> &lt;!ENTITY undoCmd.accesskey            &quot;U&quot;&gt;</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineat">@@ -111,17 +111,17 @@</span>
<a href="#l16.108"></a><span id="l16.108"> &lt;!ENTITY mediaShowControls.label      &quot;Show Media Controls&quot;&gt;</span>
<a href="#l16.109"></a><span id="l16.109"> &lt;!ENTITY mediaShowControls.accesskey  &quot;a&quot;&gt;</span>
<a href="#l16.110"></a><span id="l16.110"> &lt;!ENTITY mediaHideControls.label      &quot;Hide Media Controls&quot;&gt;</span>
<a href="#l16.111"></a><span id="l16.111"> &lt;!ENTITY mediaHideControls.accesskey  &quot;a&quot;&gt;</span>
<a href="#l16.112"></a><span id="l16.112"> &lt;!ENTITY search.accesskey             &quot;W&quot;&gt;</span>
<a href="#l16.113"></a><span id="l16.113"> &lt;!ENTITY bidiSwitchPageDirectionItem.label        &quot;Switch Page Direction&quot;&gt;</span>
<a href="#l16.114"></a><span id="l16.114"> &lt;!ENTITY bidiSwitchPageDirectionItem.accesskey    &quot;g&quot;&gt;</span>
<a href="#l16.115"></a><span id="l16.115"> &lt;!ENTITY bidiSwitchTextDirectionItem.label        &quot;Switch Text Direction&quot;&gt;</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineminus">-&lt;!ENTITY bidiSwitchTextDirectionItem.accesskey    &quot;w&quot;&gt;</span>
<a href="#l16.117"></a><span id="l16.117" class="difflineplus">+&lt;!ENTITY bidiSwitchTextDirectionItem.accesskey    &quot;x&quot;&gt;</span>
<a href="#l16.118"></a><span id="l16.118"> &lt;!ENTITY spellAddToDictionary.label     &quot;Add to Dictionary&quot;&gt;</span>
<a href="#l16.119"></a><span id="l16.119"> &lt;!ENTITY spellAddToDictionary.accesskey &quot;o&quot;&gt;</span>
<a href="#l16.120"></a><span id="l16.120"> &lt;!ENTITY spellIgnoreWord.label          &quot;Ignore Word&quot;&gt;</span>
<a href="#l16.121"></a><span id="l16.121"> &lt;!ENTITY spellIgnoreWord.accesskey      &quot;W&quot;&gt;</span>
<a href="#l16.122"></a><span id="l16.122"> &lt;!ENTITY spellCheckEnable.label         &quot;Check Spelling&quot;&gt;</span>
<a href="#l16.123"></a><span id="l16.123"> &lt;!ENTITY spellCheckEnable.accesskey     &quot;S&quot;&gt;</span>
<a href="#l16.124"></a><span id="l16.124"> &lt;!ENTITY spellNoSuggestions.label       &quot;(No Spelling Suggestions)&quot;&gt;</span>
<a href="#l16.125"></a><span id="l16.125"> &lt;!ENTITY spellDictionaries.label        &quot;Languages&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/contentAreaCommands.properties</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/contentAreaCommands.properties</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l17.4"></a><span id="l17.4"> # context menu strings</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6"> searchText=Search Web for &quot;%S&quot;</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">-searchText.accesskey=W</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineplus">+searchText.accesskey=S</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10"> blockImage=Block Images from %S</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-blockImage.accesskey=B</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+blockImage.accesskey=k</span>
<a href="#l17.13"></a><span id="l17.13"> unblockImage=Unblock Images from %S</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-unblockImage.accesskey=b</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineplus">+unblockImage.accesskey=k</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17"> SaveImageTitle=Save Image</span>
<a href="#l17.18"></a><span id="l17.18"> SaveVideoTitle=Save Video</span>
<a href="#l17.19"></a><span id="l17.19"> SaveAudioTitle=Save Audio</span>
<a href="#l17.20"></a><span id="l17.20"> SaveLinkTitle=Save As</span>
<a href="#l17.21"></a><span id="l17.21"> SaveAttachmentTitle=Save Attachment</span>
<a href="#l17.22"></a><span id="l17.22"> DefaultSaveFileName=index</span>
<a href="#l17.23"></a><span id="l17.23"> WebPageCompleteFilter=Web Page, complete</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/downloads/downloadmanager.dtd</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -58,17 +58,17 @@</span>
<a href="#l18.4"></a><span id="l18.4"> &lt;!ENTITY view.sortDescending.label       &quot;Z &gt; A Sort Order&quot;&gt;</span>
<a href="#l18.5"></a><span id="l18.5"> &lt;!ENTITY view.sortDescending.accesskey   &quot;Z&quot;&gt;</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7"> &lt;!ENTITY cmd.pause.label                 &quot;Pause&quot;&gt;</span>
<a href="#l18.8"></a><span id="l18.8"> &lt;!ENTITY cmd.pause.accesskey             &quot;P&quot;&gt;</span>
<a href="#l18.9"></a><span id="l18.9"> &lt;!ENTITY cmd.resume.label                &quot;Resume&quot;&gt;</span>
<a href="#l18.10"></a><span id="l18.10"> &lt;!ENTITY cmd.resume.accesskey            &quot;R&quot;&gt;</span>
<a href="#l18.11"></a><span id="l18.11"> &lt;!ENTITY cmd.retry.label                 &quot;Retry&quot;&gt;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-&lt;!ENTITY cmd.retry.accesskey             &quot;R&quot;&gt;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+&lt;!ENTITY cmd.retry.accesskey             &quot;t&quot;&gt;</span>
<a href="#l18.14"></a><span id="l18.14"> &lt;!ENTITY cmd.cancel.label                &quot;Cancel&quot;&gt;</span>
<a href="#l18.15"></a><span id="l18.15"> &lt;!ENTITY cmd.cancel.accesskey            &quot;C&quot;&gt;</span>
<a href="#l18.16"></a><span id="l18.16"> &lt;!ENTITY cmd.remove.label                &quot;Remove From List&quot;&gt;</span>
<a href="#l18.17"></a><span id="l18.17"> &lt;!ENTITY cmd.remove.accesskey            &quot;e&quot;&gt;</span>
<a href="#l18.18"></a><span id="l18.18"> &lt;!ENTITY cmd.open.label                  &quot;Open&quot;&gt;</span>
<a href="#l18.19"></a><span id="l18.19"> &lt;!ENTITY cmd.open.accesskey              &quot;O&quot;&gt;</span>
<a href="#l18.20"></a><span id="l18.20"> &lt;!ENTITY cmd.show.label                  &quot;Open Containing Folder&quot;&gt;</span>
<a href="#l18.21"></a><span id="l18.21"> &lt;!ENTITY cmd.show.accesskey              &quot;F&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/pref/pref-download.dtd</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/pref/pref-download.dtd</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1,29 +1,29 @@</span>
<a href="#l19.4"></a><span id="l19.4"> &lt;!ENTITY pref.download.title            &quot;Downloads&quot;&gt;</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineplus">+</span>
<a href="#l19.6"></a><span id="l19.6"> &lt;!ENTITY downloadBehavior.label         &quot;When starting a download&quot;&gt;</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">-&lt;!ENTITY downloadLocation.label         &quot;When saving a file&quot;&gt;</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">-&lt;!ENTITY finishedBehavior.label         &quot;When a download completes&quot;&gt;</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineplus">+&lt;!ENTITY focusWhenStarting.label        &quot;Flash the download manager if it is already open, otherwise:&quot;&gt;</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineplus">+&lt;!ENTITY focusWhenStarting.accesskey    &quot;F&quot;&gt;</span>
<a href="#l19.11"></a><span id="l19.11"> &lt;!ENTITY openDM.label                   &quot;Open the download manager&quot;&gt;</span>
<a href="#l19.12"></a><span id="l19.12"> &lt;!ENTITY openDM.accesskey               &quot;m&quot;&gt;</span>
<a href="#l19.13"></a><span id="l19.13"> &lt;!ENTITY openProgressDialog.label       &quot;Open a progress dialog&quot;&gt;</span>
<a href="#l19.14"></a><span id="l19.14"> &lt;!ENTITY openProgressDialog.accesskey   &quot;O&quot;&gt;</span>
<a href="#l19.15"></a><span id="l19.15"> &lt;!ENTITY doNothing.label                &quot;Don't open anything&quot;&gt;</span>
<a href="#l19.16"></a><span id="l19.16"> &lt;!ENTITY doNothing.accesskey            &quot;D&quot;&gt;</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-&lt;!ENTITY promptDownload.label           &quot;Prompt for download location and default to&quot;&gt;</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-&lt;!ENTITY promptDownload.accesskey       &quot;P&quot;&gt;</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-&lt;!ENTITY lastLocation.label             &quot;Last download folder&quot;&gt;</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-&lt;!ENTITY lastLocation.accesskey         &quot;L&quot;&gt;</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-&lt;!ENTITY specifiedLocation.label        &quot;Specified download folder&quot;&gt;</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineminus">-&lt;!ENTITY specifiedLocation.accesskey    &quot;e&quot;&gt;</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineminus">-&lt;!ENTITY autoDownload.label             &quot;Automatically download files to specified download folder&quot;&gt;</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-&lt;!ENTITY autoDownload.accesskey         &quot;A&quot;&gt;</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-&lt;!ENTITY downloadFolder.label           &quot;Current Download Folder:&quot;&gt;</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+&lt;!ENTITY downloadLocation.label         &quot;When saving a file&quot;&gt;</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineplus">+&lt;!ENTITY saveTo.label                   &quot;Save files to&quot;&gt;</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineplus">+&lt;!ENTITY saveTo.accesskey               &quot;v&quot;&gt;</span>
<a href="#l19.30"></a><span id="l19.30"> &lt;!ENTITY chooseDownloadFolder.label     &quot;Choose Folder&quot;&gt;</span>
<a href="#l19.31"></a><span id="l19.31"> &lt;!ENTITY chooseDownloadFolder.accesskey &quot;C&quot;&gt;</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+&lt;!ENTITY alwaysAsk.label                &quot;Always ask me where to save files&quot;&gt;</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineplus">+&lt;!ENTITY alwaysAsk.accesskey            &quot;A&quot;&gt;</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineplus">+</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineplus">+&lt;!ENTITY finishedBehavior.label         &quot;When a download completes&quot;&gt;</span>
<a href="#l19.36"></a><span id="l19.36"> &lt;!ENTITY playSound.label                &quot;Play a sound&quot;&gt;</span>
<a href="#l19.37"></a><span id="l19.37"> &lt;!ENTITY playSound.accesskey            &quot;s&quot;&gt;</span>
<a href="#l19.38"></a><span id="l19.38"> &lt;!ENTITY showAlert.label                &quot;Show an alert&quot;&gt;</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineminus">-&lt;!ENTITY showAlert.accesskey            &quot;n&quot;&gt;</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineplus">+&lt;!ENTITY showAlert.accesskey            &quot;a&quot;&gt;</span>
<a href="#l19.41"></a><span id="l19.41"> &lt;!ENTITY browse.label                   &quot;Browse&quot;&gt;</span>
<a href="#l19.42"></a><span id="l19.42"> &lt;!ENTITY browse.accesskey               &quot;B&quot;&gt;</span>
<a href="#l19.43"></a><span id="l19.43"> &lt;!ENTITY preview.label                  &quot;Preview&quot;&gt;</span>
<a href="#l19.44"></a><span id="l19.44" class="difflineminus">-&lt;!ENTITY preview.accesskey              &quot;v&quot;&gt;</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineplus">+&lt;!ENTITY preview.accesskey              &quot;e&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/pref/prefutilities.properties</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/pref/prefutilities.properties</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,8 +1,10 @@</span>
<a href="#l20.4"></a><span id="l20.4"> cachefolder=Choose Cache Folder</span>
<a href="#l20.5"></a><span id="l20.5"> choosehomepage=Choose Home Page</span>
<a href="#l20.6"></a><span id="l20.6"> downloadfolder=Choose a Download Folder</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineplus">+desktopFolderName=Desktop</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineplus">+downloadsFolderName=Downloads</span>
<a href="#l20.9"></a><span id="l20.9"> choosesound=Choose a sound</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11"> SoundFiles=Sounds</span>
<a href="#l20.12"></a><span id="l20.12"> </span>
<a href="#l20.13"></a><span id="l20.13"> labelDefaultFont=Default (%font_family%)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/suite/themes/modern/jar.mn</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/suite/themes/modern/jar.mn</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -17,17 +17,19 @@ modern.jar:</span>
<a href="#l21.4"></a><span id="l21.4">   skin/modern/communicator/toolbar.css                             (communicator/toolbar.css)</span>
<a href="#l21.5"></a><span id="l21.5">   skin/modern/communicator/dialogs.css                             (communicator/dialogs.css)</span>
<a href="#l21.6"></a><span id="l21.6">   skin/modern/communicator/helpOverlay.css                         (communicator/helpOverlay.css)</span>
<a href="#l21.7"></a><span id="l21.7">   skin/modern/communicator/smileys.css                             (communicator/smileys.css)</span>
<a href="#l21.8"></a><span id="l21.8">   skin/modern/communicator/communicator.css                        (communicator/communicator.css)</span>
<a href="#l21.9"></a><span id="l21.9">   skin/modern/communicator/aboutSessionRestore.css                 (communicator/aboutSessionRestore.css)</span>
<a href="#l21.10"></a><span id="l21.10">   skin/modern/communicator/bookmarks/bookmark-folder-closed.gif    (communicator/bookmarks/bookmark-folder-closed.gif)</span>
<a href="#l21.11"></a><span id="l21.11">   skin/modern/communicator/bookmarks/bookmark-folder-dis.gif       (communicator/bookmarks/bookmark-folder-dis.gif)</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  skin/modern/communicator/bookmarks/bookmark-folder-open.gif      (communicator/bookmarks/bookmark-folder-open.gif)</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  skin/modern/communicator/downloads/dl-remove.png                 (communicator/downloads/dl-remove.png)</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+  skin/modern/communicator/downloads/downloadmanager.css           (communicator/downloads/downloadmanager.css)</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+ skin/modern/communicator/bookmarks/bookmark-folder-open.gif      (communicator/bookmarks/bookmark-folder-open.gif)</span>
<a href="#l21.16"></a><span id="l21.16">   skin/modern/communicator/bookmarks/bookmark-group.gif            (communicator/bookmarks/bookmark-group.gif)</span>
<a href="#l21.17"></a><span id="l21.17">   skin/modern/communicator/bookmarks/bookmark-item-dis.gif         (communicator/bookmarks/bookmark-item-dis.gif)</span>
<a href="#l21.18"></a><span id="l21.18">   skin/modern/communicator/bookmarks/bookmark-item-updated.gif     (communicator/bookmarks/bookmark-item-updated.gif)</span>
<a href="#l21.19"></a><span id="l21.19">   skin/modern/communicator/bookmarks/bookmark-item.gif             (communicator/bookmarks/bookmark-item.gif)</span>
<a href="#l21.20"></a><span id="l21.20">   skin/modern/communicator/bookmarks/bookmarks.css                 (communicator/bookmarks/bookmarks.css)</span>
<a href="#l21.21"></a><span id="l21.21">   skin/modern/communicator/bookmarks/bookmarksToolbar.css          (communicator/bookmarks/bookmarksToolbar.css)</span>
<a href="#l21.22"></a><span id="l21.22">   skin/modern/communicator/bookmarks/bookmarksWindow.css           (communicator/bookmarks/bookmarksWindow.css)</span>
<a href="#l21.23"></a><span id="l21.23">   skin/modern/communicator/brand/throbber-anim.png                 (communicator/brand/throbber-anim.png)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

