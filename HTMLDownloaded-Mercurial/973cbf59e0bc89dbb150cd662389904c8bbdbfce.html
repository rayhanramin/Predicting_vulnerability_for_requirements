<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26587:973cbf59e0bc89dbb150cd662389904c8bbdbfce</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 973cbf59e0bc89dbb150cd662389904c8bbdbfce" />
<meta property="og:url" content="/comm-central/rev/973cbf59e0bc89dbb150cd662389904c8bbdbfce" />
<meta property="og:description" content="Bug 1461330 - Add enterprise policy support to Thunderbird with a limited set of policies; r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 973cbf59e0bc89dbb150cd662389904c8bbdbfce 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/973cbf59e0bc89dbb150cd662389904c8bbdbfce">shortlog</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/973cbf59e0bc89dbb150cd662389904c8bbdbfce">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce">files</a> |
changeset |
<a href="/comm-central/raw-rev/973cbf59e0bc89dbb150cd662389904c8bbdbfce">raw</a>  | <a href="/comm-central/archive/973cbf59e0bc89dbb150cd662389904c8bbdbfce.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1461330">Bug 1461330</a> - Add enterprise policy support to Thunderbird with a limited set of policies; r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 13 May 2019 19:53:04 +1200</td></tr>

<tr>
 <td>changeset 26587</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/973cbf59e0bc89dbb150cd662389904c8bbdbfce">973cbf59e0bc89dbb150cd662389904c8bbdbfce</a></td>
</tr>



<tr>
<td>parent 26586</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/00dbf8bfc8eb2a26dcdbea3a13bb2e9085dde109">00dbf8bfc8eb2a26dcdbea3a13bb2e9085dde109</a>
</td>
</tr>

<tr>
<td>child 26588</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7f4b7f71868b363d54443e2ecaf8ec29f11c39cc">7f4b7f71868b363d54443e2ecaf8ec29f11c39cc</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=973cbf59e0bc89dbb150cd662389904c8bbdbfce">15903</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Mon, 13 May 2019 07:56:55 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@b2447f459283 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b2447f459283d075a942a40adcdb726471e543ba">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b2447f459283d075a942a40adcdb726471e543ba&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b2447f459283d075a942a40adcdb726471e543ba&newProject=comm-central&newRevision=973cbf59e0bc89dbb150cd662389904c8bbdbfce&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b2447f459283d075a942a40adcdb726471e543ba&newProject=comm-central&newRevision=973cbf59e0bc89dbb150cd662389904c8bbdbfce&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b2447f459283d075a942a40adcdb726471e543ba&newProject=comm-central&newRevision=973cbf59e0bc89dbb150cd662389904c8bbdbfce&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1461330">1461330</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1461330">Bug 1461330</a> - Add enterprise policy support to Thunderbird with a limited set of policies; r=mkmelin</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/.eslintignore">.eslintignore</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/.eslintignore">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/.eslintignore">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/.eslintignore">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/.eslintignore">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/.eslintignore">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/aboutRedirector.js">mail/components/aboutRedirector.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/aboutRedirector.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/aboutRedirector.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/aboutRedirector.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/aboutRedirector.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/aboutRedirector.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/Policies.jsm">mail/components/enterprisepolicies/Policies.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/Policies.jsm">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/Policies.jsm">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/Policies.jsm">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/Policies.jsm">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/Policies.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.css">mail/components/enterprisepolicies/content/aboutPolicies.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.css">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.css">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.css">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.css">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.js">mail/components/enterprisepolicies/content/aboutPolicies.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.xhtml">mail/components/enterprisepolicies/content/aboutPolicies.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.xhtml">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.xhtml">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.xhtml">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.xhtml">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/aboutPolicies.xhtml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-active.svg">mail/components/enterprisepolicies/content/policies-active.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-active.svg">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-active.svg">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-active.svg">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-active.svg">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-active.svg">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-documentation.svg">mail/components/enterprisepolicies/content/policies-documentation.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-documentation.svg">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-documentation.svg">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-documentation.svg">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-documentation.svg">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-documentation.svg">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-error.svg">mail/components/enterprisepolicies/content/policies-error.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-error.svg">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-error.svg">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-error.svg">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-error.svg">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/content/policies-error.svg">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm">mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/moz.build">mail/components/enterprisepolicies/helpers/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/moz.build">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/moz.build">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/moz.build">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/moz.build">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/helpers/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/jar.mn">mail/components/enterprisepolicies/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/jar.mn">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/jar.mn">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/jar.mn">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/jar.mn">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/moz.build">mail/components/enterprisepolicies/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/moz.build">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/moz.build">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/moz.build">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/moz.build">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/configuration.json">mail/components/enterprisepolicies/schemas/configuration.json</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/configuration.json">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/configuration.json">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/configuration.json">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/configuration.json">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/configuration.json">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/moz.build">mail/components/enterprisepolicies/schemas/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/moz.build">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/moz.build">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/moz.build">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/moz.build">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/policies-schema.json">mail/components/enterprisepolicies/schemas/policies-schema.json</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/policies-schema.json">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/policies-schema.json">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/policies-schema.json">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/policies-schema.json">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/policies-schema.json">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/schema.jsm">mail/components/enterprisepolicies/schemas/schema.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/schema.jsm">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/schema.jsm">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/schema.jsm">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/schema.jsm">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/schemas/schema.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/.eslintrc.js">mail/components/enterprisepolicies/tests/browser/.eslintrc.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/.eslintrc.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/.eslintrc.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/.eslintrc.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/.eslintrc.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/.eslintrc.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser.ini">mail/components/enterprisepolicies/tests/browser/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser.ini">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser.ini">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser.ini">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser.ini">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js">mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js">mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js">mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js">mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js">mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js">mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js">mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js">mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js">mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js">mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js">mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/head.js">mail/components/enterprisepolicies/tests/browser/head.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/head.js">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/head.js">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/head.js">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/head.js">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/browser/head.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/moz.build">mail/components/enterprisepolicies/tests/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/moz.build">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/moz.build">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/moz.build">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/moz.build">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/enterprisepolicies/tests/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/mailComponents.manifest">mail/components/mailComponents.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/mailComponents.manifest">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/mailComponents.manifest">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/mailComponents.manifest">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/mailComponents.manifest">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/mailComponents.manifest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/moz.build">mail/components/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/moz.build">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/moz.build">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/moz.build">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/moz.build">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/components/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/installer/package-manifest.in">mail/installer/package-manifest.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/installer/package-manifest.in">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/installer/package-manifest.in">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/installer/package-manifest.in">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/installer/package-manifest.in">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/installer/package-manifest.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/aboutPolicies.ftl">mail/locales/en-US/messenger/policies/aboutPolicies.ftl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/aboutPolicies.ftl">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/aboutPolicies.ftl">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/aboutPolicies.ftl">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/aboutPolicies.ftl">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/aboutPolicies.ftl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/policies-descriptions.ftl">mail/locales/en-US/messenger/policies/policies-descriptions.ftl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/policies-descriptions.ftl">file</a> |
<a href="/comm-central/annotate/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/policies-descriptions.ftl">annotate</a> |
<a href="/comm-central/diff/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/policies-descriptions.ftl">diff</a> |
<a href="/comm-central/comparison/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/policies-descriptions.ftl">comparison</a> |
<a href="/comm-central/log/973cbf59e0bc89dbb150cd662389904c8bbdbfce/mail/locales/en-US/messenger/policies/policies-descriptions.ftl">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/.eslintignore</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/.eslintignore</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -68,16 +68,20 @@ mailnews/mime/*</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> # mail exclusions</span>
<a href="#l1.6"></a><span id="l1.6"> mail/app/profile/all-thunderbird.js</span>
<a href="#l1.7"></a><span id="l1.7"> mail/app/profile/channel-prefs.js</span>
<a href="#l1.8"></a><span id="l1.8"> mail/app/profile/prefs.js</span>
<a href="#l1.9"></a><span id="l1.9"> mail/base/content/protovis-r2.6-modded.js</span>
<a href="#l1.10"></a><span id="l1.10"> mail/branding/nightly/thunderbird-branding.js</span>
<a href="#l1.11"></a><span id="l1.11"> mail/branding/thunderbird/thunderbird-branding.js</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+# This file is split into two in order to keep it as a valid json file</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+# for documentation purposes (policies.json) but to be accessed by the</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+# code as a .jsm (schema.jsm)</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+mail/components/enterprisepolicies/schemas/schema.jsm</span>
<a href="#l1.16"></a><span id="l1.16"> mail/components/im/all-im.js</span>
<a href="#l1.17"></a><span id="l1.17"> mail/locales/en-US/all-l10n.js</span>
<a href="#l1.18"></a><span id="l1.18"> mail/test/mozmill/**</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> # calendar/ exclusions</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22"> # prefs files</span>
<a href="#l1.23"></a><span id="l1.23"> calendar/lightning/content/lightning.js</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/aboutRedirector.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/aboutRedirector.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -20,16 +20,18 @@ AboutRedirector.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">                flags: (Ci.nsIAboutModule.ALLOW_SCRIPT |</span>
<a href="#l2.5"></a><span id="l2.5">                        Ci.nsIAboutModule.URI_SAFE_FOR_UNTRUSTED_CONTENT)},</span>
<a href="#l2.6"></a><span id="l2.6">     &quot;support&quot;: {url: &quot;chrome://messenger/content/about-support/aboutSupport.xhtml&quot;,</span>
<a href="#l2.7"></a><span id="l2.7">                 flags: Ci.nsIAboutModule.ALLOW_SCRIPT},</span>
<a href="#l2.8"></a><span id="l2.8">     &quot;preferences&quot;: {url: &quot;chrome://messenger/content/preferences/aboutPreferences.xul&quot;,</span>
<a href="#l2.9"></a><span id="l2.9">                     flags: Ci.nsIAboutModule.ALLOW_SCRIPT},</span>
<a href="#l2.10"></a><span id="l2.10">     &quot;downloads&quot;: {url: &quot;chrome://messenger/content/downloads/aboutDownloads.xul&quot;,</span>
<a href="#l2.11"></a><span id="l2.11">                   flags: Ci.nsIAboutModule.ALLOW_SCRIPT},</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+    &quot;policies&quot;: {url: &quot;chrome://messenger/content/policies/aboutPolicies.xhtml&quot;,</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                 flags: Ci.nsIAboutModule.ALLOW_SCRIPT},</span>
<a href="#l2.14"></a><span id="l2.14">   },</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">   /**</span>
<a href="#l2.17"></a><span id="l2.17">    * Gets the module name from the given URI.</span>
<a href="#l2.18"></a><span id="l2.18">    */</span>
<a href="#l2.19"></a><span id="l2.19">   _getModuleName(aURI) {</span>
<a href="#l2.20"></a><span id="l2.20">     // Strip out the first ? or #, and anything following it</span>
<a href="#l2.21"></a><span id="l2.21">     let name = (/[^?#]+/.exec(aURI.pathQueryRef))[0];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/Policies.jsm</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,193 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+ * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+const {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+const {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+XPCOMUtils.defineLazyModuleGetters(this, {</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+  ProxyPolicies: &quot;resource:///modules/policies/ProxyPolicies.jsm&quot;,</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+});</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+const PREF_LOGLEVEL = &quot;browser.policies.loglevel&quot;;</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+XPCOMUtils.defineLazyGetter(this, &quot;log&quot;, () =&gt; {</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+  let { ConsoleAPI } = ChromeUtils.import(&quot;resource://gre/modules/Console.jsm&quot;);</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+  return new ConsoleAPI({</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+    prefix: &quot;Policies.jsm&quot;,</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+    // tip: set maxLogLevel to &quot;debug&quot; and use log.debug() to create detailed</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+    // messages during development. See LOG_LEVELS in Console.jsm for details.</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+    maxLogLevel: &quot;error&quot;,</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+    maxLogLevelPref: PREF_LOGLEVEL,</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+  });</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+});</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;Policies&quot;];</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+/*</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+ * ============================</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+ * = POLICIES IMPLEMENTATIONS =</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+ * ============================</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+ *</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+ * The Policies object below is where the implementation for each policy</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+ * happens. An object for each policy should be defined, containing</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+ * callback functions that will be called by the engine.</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+ *</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+ * See the _callbacks object in EnterprisePolicies.js for the list of</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+ * possible callbacks and an explanation of each.</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+ *</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+ * Each callback will be called with two parameters:</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+ * - manager</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+ *   This is the EnterprisePoliciesManager singleton object from</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+ *   EnterprisePolicies.js</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+ *</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+ * - param</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+ *   The parameter defined for this policy in policies-schema.json.</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+ *   It will be different for each policy. It could be a boolean,</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+ *   a string, an array or a complex object. All parameters have</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+ *   been validated according to the schema, and no unknown</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+ *   properties will be present on them.</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+ *</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+ * The callbacks will be bound to their parent policy object.</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+ */</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+var Policies = {</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+  &quot;AppUpdateURL&quot;: {</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+    onBeforeAddons(manager, param) {</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+      setDefaultPref(&quot;app.update.url&quot;, param.href);</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+    },</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+  },</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+  &quot;DisableMasterPasswordCreation&quot;: {</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+    onBeforeUIStartup(manager, param) {</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+      if (param) {</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+        manager.disallowFeature(&quot;createMasterPassword&quot;);</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+      }</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+    },</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+  },</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+  &quot;ExtensionSettings&quot;: {</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+    onBeforeAddons(manager, param) {</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+      manager.setExtensionSettings(param);</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+    },</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+  },</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+  &quot;Preferences&quot;: {</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+    onBeforeAddons(manager, param) {</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+      for (let preference in param) {</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+        setAndLockPref(preference, param[preference]);</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+      }</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+    },</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+  },</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+  &quot;Proxy&quot;: {</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+    onBeforeAddons(manager, param) {</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+      if (param.Locked) {</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+        manager.disallowFeature(&quot;changeProxySettings&quot;);</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+        ProxyPolicies.configureProxySettings(param, setAndLockPref);</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+      } else {</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+        ProxyPolicies.configureProxySettings(param, setDefaultPref);</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+      }</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineplus">+    },</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+  },</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineplus">+</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineplus">+  &quot;RequestedLocales&quot;: {</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineplus">+    onBeforeAddons(manager, param) {</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineplus">+      if (Array.isArray(param)) {</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+        Services.locale.requestedLocales = param;</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+      } else {</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+        Services.locale.requestedLocales = param.split(&quot;,&quot;);</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+      }</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+    },</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineplus">+  },</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineplus">+};</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineplus">+</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+/*</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineplus">+ * ====================</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineplus">+ * = HELPER FUNCTIONS =</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineplus">+ * ====================</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineplus">+ *</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+ * The functions below are helpers to be used by several policies.</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+ */</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineplus">+/**</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineplus">+ * setAndLockPref</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineplus">+ *</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+ * Sets the _default_ value of a pref, and locks it (meaning that</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineplus">+ * the default value will always be returned, independent from what</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineplus">+ * is stored as the user value).</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+ * The value is only changed in memory, and not stored to disk.</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineplus">+ *</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineplus">+ * @param {string} prefName</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineplus">+ *        The pref to be changed</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineplus">+ * @param {boolean,number,string} prefValue</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineplus">+ *        The value to set and lock</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+ */</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+function setAndLockPref(prefName, prefValue) {</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+  setDefaultPref(prefName, prefValue, true);</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+}</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineplus">+</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+/**</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+ * setDefaultPref</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineplus">+ *</span>
<a href="#l3.138"></a><span id="l3.138" class="difflineplus">+ * Sets the _default_ value of a pref and optionally locks it.</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineplus">+ * The value is only changed in memory, and not stored to disk.</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineplus">+ *</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineplus">+ * @param {string} prefName</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+ *        The pref to be changed</span>
<a href="#l3.143"></a><span id="l3.143" class="difflineplus">+ * @param {boolean,number,string} prefValue</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineplus">+ *        The value to set</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineplus">+ * @param {boolean} locked</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineplus">+ *        Optionally lock the pref</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineplus">+ */</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineplus">+function setDefaultPref(prefName, prefValue, locked = false) {</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineplus">+  if (Services.prefs.prefIsLocked(prefName)) {</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+    Services.prefs.unlockPref(prefName);</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineplus">+  }</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineplus">+</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineplus">+  let defaults = Services.prefs.getDefaultBranch(&quot;&quot;);</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineplus">+</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+  switch (typeof(prefValue)) {</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineplus">+    case &quot;boolean&quot;:</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineplus">+      defaults.setBoolPref(prefName, prefValue);</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineplus">+      break;</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineplus">+</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineplus">+    case &quot;number&quot;:</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineplus">+      if (!Number.isInteger(prefValue)) {</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineplus">+        throw new Error(`Non-integer value for ${prefName}`);</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineplus">+      }</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineplus">+</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineplus">+      defaults.setIntPref(prefName, prefValue);</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineplus">+      break;</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineplus">+    case &quot;string&quot;:</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineplus">+      defaults.setStringPref(prefName, prefValue);</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineplus">+      break;</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineplus">+  }</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineplus">+</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineplus">+  if (locked) {</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineplus">+    Services.prefs.lockPref(prefName);</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+  }</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineplus">+}</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineplus">+</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineplus">+/**</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineplus">+ * runOnce</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineplus">+ *</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineplus">+ * Helper function to run a callback only once per policy.</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineplus">+ *</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineplus">+ * @param {string} actionName</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineplus">+ *        A given name which will be used to track if this callback has run.</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineplus">+ * @param {Functon} callback</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineplus">+ *        The callback to run only once.</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineplus">+ */</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineplus">+ // eslint-disable-next-line no-unused-vars</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineplus">+function runOnce(actionName, callback) {</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineplus">+  let prefName = `browser.policies.runonce.${actionName}`;</span>
<a href="#l3.191"></a><span id="l3.191" class="difflineplus">+  if (Services.prefs.getBoolPref(prefName, false)) {</span>
<a href="#l3.192"></a><span id="l3.192" class="difflineplus">+    log.debug(`Not running action ${actionName} again because it has already run.`);</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineplus">+    return;</span>
<a href="#l3.194"></a><span id="l3.194" class="difflineplus">+  }</span>
<a href="#l3.195"></a><span id="l3.195" class="difflineplus">+  Services.prefs.setBoolPref(prefName, true);</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineplus">+  callback();</span>
<a href="#l3.197"></a><span id="l3.197" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/content/aboutPolicies.css</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,164 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineplus">+</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineplus">+@import url(&quot;chrome://global/skin/in-content/common.css&quot;);</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineplus">+</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineplus">+html {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+  height: 100%;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+}</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+body {</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+  display: flex;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+  align-items: stretch;</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+  height: 100%;</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+}</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+#sectionTitle {</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+  float: left;</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+  padding-inline-start: 1rem;</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+}</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+#sectionTitle:dir(rtl) {</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+  float: right;</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+  padding-inline-end: 1rem;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+}</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+/** Categories **/</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+.category {</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+  cursor: pointer;</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+  /* Center category names */</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+  display: flex;</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+  align-items: center;</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+}</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+.category .category-name {</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+  pointer-events: none;</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+}</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+#categories hr {</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+  border-top-color: rgba(255,255,255,0.15);</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineplus">+}</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineplus">+</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+/** Content area **/</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+.main-content {</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+  flex: 1;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+}</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+.tab {</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+  padding: 0.5em 0;</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+}</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+.tab table {</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+  width: 100%;</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+}</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+tbody tr {</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineplus">+  transition: background cubic-bezier(.07, .95, 0, 1) 250ms;</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+}</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineplus">+tbody tr:hover {</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineplus">+  background-color: var(--in-content-item-hover);</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+}</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+th, td, table {</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+  border-collapse: collapse;</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+  border: none;</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+  text-align: start;</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+}</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+th {</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+  padding: 1rem;</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineplus">+  font-size: larger;</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+}</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+td {</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineplus">+  padding: 1rem;</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineplus">+}</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineplus">+</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineplus">+/*</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineplus">+ * In Documentation Tab, this property sets the policies row in an</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineplus">+ * alternate color scheme of white and grey as each policy comprises</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineplus">+ * of two tbody tags, one for the description and the other for the</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+ * collapsible information block.</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineplus">+ */</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineplus">+</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineplus">+.active-policies tr.odd:not(:hover),</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineplus">+.errors tr:nth-child(odd):not(:hover),</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineplus">+tbody:nth-child(4n + 1) {</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineplus">+  background-color: var(--in-content-box-background-odd);</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineplus">+}</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineplus">+</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineplus">+.arr_sep.odd:not(:last-child) td:not(:first-child) {</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineplus">+  border-bottom: 2px solid #f9f9fa;</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineplus">+}</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineplus">+</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineplus">+.arr_sep.even:not(:last-child) td:not(:first-child) {</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineplus">+  border-bottom: 2px solid #ededf0;</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineplus">+}</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineplus">+</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineplus">+.last_row:not(:last-child) td {</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineplus">+  border-bottom: 2px solid #d7d7db !important;</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineplus">+}</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineplus">+</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineplus">+.icon {</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineplus">+  background-position: center center;</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineplus">+  background-size: 16px;</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineplus">+  -moz-context-properties: fill;</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineplus">+  display: inline-block;</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineplus">+  fill: var(--newtab-icon-primary-color);</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineplus">+  height: 14px;</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineplus">+  vertical-align: middle;</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineplus">+  width: 14px;</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineplus">+  margin-top: -.125rem;</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineplus">+  margin-left: .5rem;</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineplus">+}</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineplus">+</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineplus">+.collapsible {</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineplus">+  cursor: pointer;</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineplus">+  border: none;</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineplus">+  outline: none;</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineplus">+}</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineplus">+</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineplus">+.content {</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineplus">+  display: none;</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineplus">+}</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineplus">+</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineplus">+.content-style {</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineplus">+  background-color: var(--in-content-box-background);</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineplus">+  color: var(--blue-50);</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineplus">+}</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineplus">+</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineplus">+tbody.collapsible td {</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineplus">+  padding-bottom: 1rem;</span>
<a href="#l4.141"></a><span id="l4.141" class="difflineplus">+}</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineplus">+</span>
<a href="#l4.143"></a><span id="l4.143" class="difflineplus">+.schema {</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineplus">+  font-family: monospace;</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineplus">+  white-space: pre;</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineplus">+  direction: ltr;</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineplus">+}</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineplus">+</span>
<a href="#l4.149"></a><span id="l4.149" class="difflineplus">+/*</span>
<a href="#l4.150"></a><span id="l4.150" class="difflineplus">+ * The Active tab has two messages: one for when the policy service</span>
<a href="#l4.151"></a><span id="l4.151" class="difflineplus">+ * is inactive and another for when the there are no specified</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineplus">+ * policies. The three classes below control which message to display</span>
<a href="#l4.153"></a><span id="l4.153" class="difflineplus">+ * or to show the policy table.</span>
<a href="#l4.154"></a><span id="l4.154" class="difflineplus">+ */</span>
<a href="#l4.155"></a><span id="l4.155" class="difflineplus">+.no-specified-policies &gt; table,</span>
<a href="#l4.156"></a><span id="l4.156" class="difflineplus">+.inactive-service &gt; table {</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineplus">+  display: none;</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineplus">+}</span>
<a href="#l4.159"></a><span id="l4.159" class="difflineplus">+</span>
<a href="#l4.160"></a><span id="l4.160" class="difflineplus">+:not(.no-specified-policies) &gt; .no-specified-policies-message,</span>
<a href="#l4.161"></a><span id="l4.161" class="difflineplus">+:not(.inactive-service) &gt; .inactive-service-message {</span>
<a href="#l4.162"></a><span id="l4.162" class="difflineplus">+  display: none;</span>
<a href="#l4.163"></a><span id="l4.163" class="difflineplus">+}</span>
<a href="#l4.164"></a><span id="l4.164" class="difflineplus">+</span>
<a href="#l4.165"></a><span id="l4.165" class="difflineplus">+.no-specified-policies-message,</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineplus">+.inactive-service-message {</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineplus">+  padding: 1rem;</span>
<a href="#l4.168"></a><span id="l4.168" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- /dev/null</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/content/aboutPolicies.js</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -0,0 +1,345 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+const {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+const {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+XPCOMUtils.defineLazyModuleGetters(this, {</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+  schema: &quot;resource:///modules/policies/schema.jsm&quot;,</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+});</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+function col(text, className) {</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+  let column = document.createElement(&quot;td&quot;);</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+  if (className) {</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+    column.classList.add(className);</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+  }</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+  let content = document.createTextNode(text);</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+  column.appendChild(content);</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+  return column;</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+}</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+function addMissingColumns() {</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+  const table = document.getElementById(&quot;activeContent&quot;);</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+  let maxColumns = 0;</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+  // count the number of columns per row and set the max number of columns</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+  for (let i = 0, length = table.rows.length; i &lt; length; i++) {</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+    if (maxColumns &lt; table.rows[i].cells.length) {</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+      maxColumns = table.rows[i].cells.length;</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+    }</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+  }</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+  // add the missing columns</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+  for (let i = 0, length = table.rows.length; i &lt; length; i++) {</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+    const rowLength = table.rows[i].cells.length;</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+    if (rowLength &lt; maxColumns) {</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+      let missingColumns = maxColumns - rowLength;</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+      while (missingColumns &gt; 0) {</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+        table.rows[i].insertCell();</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+        missingColumns--;</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+      }</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+    }</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+  }</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+}</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+/*</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+ * This function generates the Active Policies content to be displayed by calling</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+ * a recursive function called generatePolicy() according to the policy schema.</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+ */</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+function generateActivePolicies(data) {</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+  let new_cont = document.getElementById(&quot;activeContent&quot;);</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+  new_cont.classList.add(&quot;active-policies&quot;);</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+  let policy_count = 0;</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+  for (let policyName in data) {</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+    const color_class = ++policy_count % 2 === 0 ? &quot;even&quot; : &quot;odd&quot;;</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+    if (schema.properties[policyName].type == &quot;array&quot;) {</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+      for (let count in data[policyName]) {</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+        let isFirstRow = (count == 0);</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+        let isLastRow = (count == data[policyName].length - 1);</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+        let row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+        row.classList.add(color_class);</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineplus">+        row.appendChild(col(isFirstRow ? policyName : &quot;&quot;));</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+        generatePolicy(data[policyName][count], row, 1, new_cont, isLastRow, data[policyName].length &gt; 1);</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+      }</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+    } else if (schema.properties[policyName].type == &quot;object&quot;) {</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineplus">+      let count = 0;</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+      for (let obj in data[policyName]) {</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+        let isFirstRow = (count == 0);</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+        let isLastRow = (count == Object.keys(data[policyName]).length - 1);</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineplus">+        let row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineplus">+        row.classList.add(color_class);</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineplus">+        row.appendChild(col(isFirstRow ? policyName : &quot;&quot;));</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineplus">+        row.appendChild(col(obj));</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+        generatePolicy(data[policyName][obj], row, 2, new_cont, isLastRow, true);</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+        count++;</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+      }</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+    } else {</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+      let row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+      row.appendChild(col(policyName));</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+      row.appendChild(col(JSON.stringify(data[policyName])));</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+      row.classList.add(color_class, &quot;last_row&quot;);</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+      new_cont.appendChild(row);</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+    }</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+  }</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+  if (policy_count &lt; 1) {</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+    let current_tab = document.querySelector(&quot;.active&quot;);</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+    if (Services.policies.status == Services.policies.ACTIVE) {</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineplus">+      current_tab.classList.add(&quot;no-specified-policies&quot;);</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineplus">+    } else {</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineplus">+      current_tab.classList.add(&quot;inactive-service&quot;);</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineplus">+    }</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineplus">+  }</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineplus">+</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineplus">+  addMissingColumns();</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+}</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineplus">+</span>
<a href="#l5.110"></a><span id="l5.110" class="difflineplus">+/*</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineplus">+ * This is a helper recursive function that iterates levels of each</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineplus">+ * policy and formats the content to be displayed accordingly.</span>
<a href="#l5.113"></a><span id="l5.113" class="difflineplus">+ */</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineplus">+</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineplus">+function generatePolicy(data, row, depth, new_cont, islast, arr_sep = false) {</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineplus">+  const color_class = row.classList.contains(&quot;odd&quot;) ? &quot;odd&quot; : &quot;even&quot;;</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineplus">+</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineplus">+  if (Array.isArray(data)) {</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineplus">+    for (let count in data) {</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineplus">+      if (count == 0) {</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineplus">+        if (count == data.length - 1) {</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineplus">+          generatePolicy(data[count], row, depth + 1, new_cont, islast ? islast : false, true);</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineplus">+        } else {</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineplus">+          generatePolicy(data[count], row, depth + 1, new_cont, false, false);</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineplus">+        }</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineplus">+      } else if (count == data.length - 1) {</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+        let last_row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineplus">+        last_row.classList.add(color_class, &quot;arr_sep&quot;);</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineplus">+</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineplus">+        for (let i = 0; i &lt; depth; i++) {</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineplus">+            last_row.appendChild(col(&quot;&quot;));</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineplus">+        }</span>
<a href="#l5.133"></a><span id="l5.133" class="difflineplus">+</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineplus">+        generatePolicy(data[count], last_row, depth + 1, new_cont, islast ? islast : false, arr_sep);</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineplus">+      } else {</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineplus">+        let new_row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineplus">+        new_row.classList.add(color_class);</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineplus">+</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineplus">+        for (let i = 0; i &lt; depth; i++) {</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineplus">+          new_row.appendChild(col(&quot;&quot;));</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineplus">+        }</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineplus">+</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineplus">+        generatePolicy(data[count], new_row, depth + 1, new_cont, false, false);</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineplus">+      }</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineplus">+    }</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineplus">+  } else if (typeof data == &quot;object&quot; &amp;&amp; Object.keys(data).length &gt; 0) {</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineplus">+    let count = 0;</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineplus">+      for (let obj in data) {</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineplus">+        if (count == 0) {</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineplus">+          row.appendChild(col(obj));</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineplus">+          if (count == Object.keys(data).length - 1) {</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineplus">+            generatePolicy(data[obj], row, depth + 1, new_cont, islast ? islast : false, arr_sep);</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineplus">+          } else {</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineplus">+            generatePolicy(data[obj], row, depth + 1, new_cont, false, false);</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineplus">+          }</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineplus">+        } else if (count == Object.keys(data).length - 1) {</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineplus">+          let last_row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineplus">+          for (let i = 0; i &lt; depth; i++) {</span>
<a href="#l5.159"></a><span id="l5.159" class="difflineplus">+            last_row.appendChild(col(&quot;&quot;));</span>
<a href="#l5.160"></a><span id="l5.160" class="difflineplus">+          }</span>
<a href="#l5.161"></a><span id="l5.161" class="difflineplus">+</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineplus">+          last_row.appendChild(col(obj));</span>
<a href="#l5.163"></a><span id="l5.163" class="difflineplus">+          last_row.classList.add(color_class);</span>
<a href="#l5.164"></a><span id="l5.164" class="difflineplus">+</span>
<a href="#l5.165"></a><span id="l5.165" class="difflineplus">+          if (arr_sep) {</span>
<a href="#l5.166"></a><span id="l5.166" class="difflineplus">+            last_row.classList.add(&quot;arr_sep&quot;);</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineplus">+          }</span>
<a href="#l5.168"></a><span id="l5.168" class="difflineplus">+</span>
<a href="#l5.169"></a><span id="l5.169" class="difflineplus">+          generatePolicy(data[obj], last_row, depth + 1, new_cont, islast ? islast : false, false);</span>
<a href="#l5.170"></a><span id="l5.170" class="difflineplus">+        } else {</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineplus">+          let new_row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineplus">+          new_row.classList.add(color_class);</span>
<a href="#l5.173"></a><span id="l5.173" class="difflineplus">+</span>
<a href="#l5.174"></a><span id="l5.174" class="difflineplus">+          for (let i = 0; i &lt; depth; i++) {</span>
<a href="#l5.175"></a><span id="l5.175" class="difflineplus">+            new_row.appendChild(col(&quot;&quot;));</span>
<a href="#l5.176"></a><span id="l5.176" class="difflineplus">+          }</span>
<a href="#l5.177"></a><span id="l5.177" class="difflineplus">+</span>
<a href="#l5.178"></a><span id="l5.178" class="difflineplus">+          new_row.appendChild(col(obj));</span>
<a href="#l5.179"></a><span id="l5.179" class="difflineplus">+          generatePolicy(data[obj], new_row, depth + 1, new_cont, false, false);</span>
<a href="#l5.180"></a><span id="l5.180" class="difflineplus">+        }</span>
<a href="#l5.181"></a><span id="l5.181" class="difflineplus">+        count++;</span>
<a href="#l5.182"></a><span id="l5.182" class="difflineplus">+      }</span>
<a href="#l5.183"></a><span id="l5.183" class="difflineplus">+  } else {</span>
<a href="#l5.184"></a><span id="l5.184" class="difflineplus">+    row.appendChild(col(JSON.stringify(data)));</span>
<a href="#l5.185"></a><span id="l5.185" class="difflineplus">+</span>
<a href="#l5.186"></a><span id="l5.186" class="difflineplus">+    if (arr_sep) {</span>
<a href="#l5.187"></a><span id="l5.187" class="difflineplus">+      row.classList.add(&quot;arr_sep&quot;);</span>
<a href="#l5.188"></a><span id="l5.188" class="difflineplus">+    }</span>
<a href="#l5.189"></a><span id="l5.189" class="difflineplus">+    if (islast) {</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineplus">+      row.classList.add(&quot;last_row&quot;);</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineplus">+    }</span>
<a href="#l5.192"></a><span id="l5.192" class="difflineplus">+    new_cont.appendChild(row);</span>
<a href="#l5.193"></a><span id="l5.193" class="difflineplus">+  }</span>
<a href="#l5.194"></a><span id="l5.194" class="difflineplus">+}</span>
<a href="#l5.195"></a><span id="l5.195" class="difflineplus">+</span>
<a href="#l5.196"></a><span id="l5.196" class="difflineplus">+function generateErrors() {</span>
<a href="#l5.197"></a><span id="l5.197" class="difflineplus">+  const consoleStorage = Cc[&quot;@mozilla.org/consoleAPI-storage;1&quot;];</span>
<a href="#l5.198"></a><span id="l5.198" class="difflineplus">+  const storage = consoleStorage.getService(Ci.nsIConsoleAPIStorage);</span>
<a href="#l5.199"></a><span id="l5.199" class="difflineplus">+  const consoleEvents = storage.getEvents();</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineplus">+  const prefixes = [&quot;Enterprise Policies&quot;,</span>
<a href="#l5.201"></a><span id="l5.201" class="difflineplus">+                    &quot;JsonSchemaValidator.jsm&quot;,</span>
<a href="#l5.202"></a><span id="l5.202" class="difflineplus">+                    &quot;Policies.jsm&quot;,</span>
<a href="#l5.203"></a><span id="l5.203" class="difflineplus">+                    &quot;GPOParser.jsm&quot;,</span>
<a href="#l5.204"></a><span id="l5.204" class="difflineplus">+                    &quot;Enterprise Policies Child&quot;,</span>
<a href="#l5.205"></a><span id="l5.205" class="difflineplus">+                    &quot;BookmarksPolicies.jsm&quot;,</span>
<a href="#l5.206"></a><span id="l5.206" class="difflineplus">+                    &quot;ProxyPolicies.jsm&quot;,</span>
<a href="#l5.207"></a><span id="l5.207" class="difflineplus">+                    &quot;WebsiteFilter Policy&quot;,</span>
<a href="#l5.208"></a><span id="l5.208" class="difflineplus">+                    &quot;macOSPoliciesParser.jsm&quot;];</span>
<a href="#l5.209"></a><span id="l5.209" class="difflineplus">+</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineplus">+  let new_cont = document.getElementById(&quot;errorsContent&quot;);</span>
<a href="#l5.211"></a><span id="l5.211" class="difflineplus">+  new_cont.classList.add(&quot;errors&quot;);</span>
<a href="#l5.212"></a><span id="l5.212" class="difflineplus">+</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineplus">+  let flag = false;</span>
<a href="#l5.214"></a><span id="l5.214" class="difflineplus">+  for (let err of consoleEvents) {</span>
<a href="#l5.215"></a><span id="l5.215" class="difflineplus">+    if (prefixes.includes(err.prefix)) {</span>
<a href="#l5.216"></a><span id="l5.216" class="difflineplus">+      flag = true;</span>
<a href="#l5.217"></a><span id="l5.217" class="difflineplus">+      let row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.218"></a><span id="l5.218" class="difflineplus">+      row.appendChild(col(err.arguments[0]));</span>
<a href="#l5.219"></a><span id="l5.219" class="difflineplus">+      new_cont.appendChild(row);</span>
<a href="#l5.220"></a><span id="l5.220" class="difflineplus">+    }</span>
<a href="#l5.221"></a><span id="l5.221" class="difflineplus">+  }</span>
<a href="#l5.222"></a><span id="l5.222" class="difflineplus">+  if (!flag) {</span>
<a href="#l5.223"></a><span id="l5.223" class="difflineplus">+    let errors_tab = document.getElementById(&quot;category-errors&quot;);</span>
<a href="#l5.224"></a><span id="l5.224" class="difflineplus">+    errors_tab.style.display = &quot;none&quot;;</span>
<a href="#l5.225"></a><span id="l5.225" class="difflineplus">+  }</span>
<a href="#l5.226"></a><span id="l5.226" class="difflineplus">+}</span>
<a href="#l5.227"></a><span id="l5.227" class="difflineplus">+</span>
<a href="#l5.228"></a><span id="l5.228" class="difflineplus">+function generateDocumentation() {</span>
<a href="#l5.229"></a><span id="l5.229" class="difflineplus">+  let new_cont = document.getElementById(&quot;documentationContent&quot;);</span>
<a href="#l5.230"></a><span id="l5.230" class="difflineplus">+  new_cont.setAttribute(&quot;id&quot;, &quot;documentationContent&quot;);</span>
<a href="#l5.231"></a><span id="l5.231" class="difflineplus">+</span>
<a href="#l5.232"></a><span id="l5.232" class="difflineplus">+  // map specific policies to a different string ID, to allow updates to</span>
<a href="#l5.233"></a><span id="l5.233" class="difflineplus">+  // existing descriptions</span>
<a href="#l5.234"></a><span id="l5.234" class="difflineplus">+  let string_mapping = {</span>
<a href="#l5.235"></a><span id="l5.235" class="difflineplus">+  };</span>
<a href="#l5.236"></a><span id="l5.236" class="difflineplus">+</span>
<a href="#l5.237"></a><span id="l5.237" class="difflineplus">+  for (let policyName in schema.properties) {</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineplus">+    let main_tbody = document.createElement(&quot;tbody&quot;);</span>
<a href="#l5.239"></a><span id="l5.239" class="difflineplus">+    main_tbody.classList.add(&quot;collapsible&quot;);</span>
<a href="#l5.240"></a><span id="l5.240" class="difflineplus">+    main_tbody.addEventListener(&quot;click&quot;, function() {</span>
<a href="#l5.241"></a><span id="l5.241" class="difflineplus">+      let content = this.nextElementSibling;</span>
<a href="#l5.242"></a><span id="l5.242" class="difflineplus">+      content.classList.toggle(&quot;content&quot;);</span>
<a href="#l5.243"></a><span id="l5.243" class="difflineplus">+    });</span>
<a href="#l5.244"></a><span id="l5.244" class="difflineplus">+    let row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.245"></a><span id="l5.245" class="difflineplus">+    row.appendChild(col(policyName));</span>
<a href="#l5.246"></a><span id="l5.246" class="difflineplus">+    let descriptionColumn = col(&quot;&quot;);</span>
<a href="#l5.247"></a><span id="l5.247" class="difflineplus">+    let stringID = string_mapping[policyName] || policyName;</span>
<a href="#l5.248"></a><span id="l5.248" class="difflineplus">+    descriptionColumn.setAttribute(&quot;data-l10n-id&quot;, `policy-${stringID}`);</span>
<a href="#l5.249"></a><span id="l5.249" class="difflineplus">+    row.appendChild(descriptionColumn);</span>
<a href="#l5.250"></a><span id="l5.250" class="difflineplus">+    main_tbody.appendChild(row);</span>
<a href="#l5.251"></a><span id="l5.251" class="difflineplus">+    let sec_tbody = document.createElement(&quot;tbody&quot;);</span>
<a href="#l5.252"></a><span id="l5.252" class="difflineplus">+    sec_tbody.classList.add(&quot;content&quot;);</span>
<a href="#l5.253"></a><span id="l5.253" class="difflineplus">+    sec_tbody.classList.add(&quot;content-style&quot;);</span>
<a href="#l5.254"></a><span id="l5.254" class="difflineplus">+    let schema_row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.255"></a><span id="l5.255" class="difflineplus">+    if (schema.properties[policyName].properties) {</span>
<a href="#l5.256"></a><span id="l5.256" class="difflineplus">+      let column = col(JSON.stringify(schema.properties[policyName].properties, null, 1), &quot;schema&quot;);</span>
<a href="#l5.257"></a><span id="l5.257" class="difflineplus">+      column.colSpan = &quot;2&quot;;</span>
<a href="#l5.258"></a><span id="l5.258" class="difflineplus">+      schema_row.appendChild(column);</span>
<a href="#l5.259"></a><span id="l5.259" class="difflineplus">+      sec_tbody.appendChild(schema_row);</span>
<a href="#l5.260"></a><span id="l5.260" class="difflineplus">+    } else if (schema.properties[policyName].items) {</span>
<a href="#l5.261"></a><span id="l5.261" class="difflineplus">+      let column = col(JSON.stringify(schema.properties[policyName], null, 1), &quot;schema&quot;);</span>
<a href="#l5.262"></a><span id="l5.262" class="difflineplus">+      column.colSpan = &quot;2&quot;;</span>
<a href="#l5.263"></a><span id="l5.263" class="difflineplus">+      schema_row.appendChild(column);</span>
<a href="#l5.264"></a><span id="l5.264" class="difflineplus">+      sec_tbody.appendChild(schema_row);</span>
<a href="#l5.265"></a><span id="l5.265" class="difflineplus">+    } else {</span>
<a href="#l5.266"></a><span id="l5.266" class="difflineplus">+      let column = col(&quot;type: &quot; + schema.properties[policyName].type, &quot;schema&quot;);</span>
<a href="#l5.267"></a><span id="l5.267" class="difflineplus">+      column.colSpan = &quot;2&quot;;</span>
<a href="#l5.268"></a><span id="l5.268" class="difflineplus">+      schema_row.appendChild(column);</span>
<a href="#l5.269"></a><span id="l5.269" class="difflineplus">+      sec_tbody.appendChild(schema_row);</span>
<a href="#l5.270"></a><span id="l5.270" class="difflineplus">+      if (schema.properties[policyName].enum) {</span>
<a href="#l5.271"></a><span id="l5.271" class="difflineplus">+        let enum_row = document.createElement(&quot;tr&quot;);</span>
<a href="#l5.272"></a><span id="l5.272" class="difflineplus">+        column = col(&quot;enum: &quot; + JSON.stringify(schema.properties[policyName].enum, null, 1), &quot;schema&quot;);</span>
<a href="#l5.273"></a><span id="l5.273" class="difflineplus">+        column.colSpan = &quot;2&quot;;</span>
<a href="#l5.274"></a><span id="l5.274" class="difflineplus">+        enum_row.appendChild(column);</span>
<a href="#l5.275"></a><span id="l5.275" class="difflineplus">+        sec_tbody.appendChild(enum_row);</span>
<a href="#l5.276"></a><span id="l5.276" class="difflineplus">+      }</span>
<a href="#l5.277"></a><span id="l5.277" class="difflineplus">+    }</span>
<a href="#l5.278"></a><span id="l5.278" class="difflineplus">+    new_cont.appendChild(main_tbody);</span>
<a href="#l5.279"></a><span id="l5.279" class="difflineplus">+    new_cont.appendChild(sec_tbody);</span>
<a href="#l5.280"></a><span id="l5.280" class="difflineplus">+  }</span>
<a href="#l5.281"></a><span id="l5.281" class="difflineplus">+}</span>
<a href="#l5.282"></a><span id="l5.282" class="difflineplus">+</span>
<a href="#l5.283"></a><span id="l5.283" class="difflineplus">+let gInited = false;</span>
<a href="#l5.284"></a><span id="l5.284" class="difflineplus">+function init() {</span>
<a href="#l5.285"></a><span id="l5.285" class="difflineplus">+  if (gInited) {</span>
<a href="#l5.286"></a><span id="l5.286" class="difflineplus">+    return;</span>
<a href="#l5.287"></a><span id="l5.287" class="difflineplus">+  }</span>
<a href="#l5.288"></a><span id="l5.288" class="difflineplus">+  gInited = true;</span>
<a href="#l5.289"></a><span id="l5.289" class="difflineplus">+</span>
<a href="#l5.290"></a><span id="l5.290" class="difflineplus">+  let data = Services.policies.getActivePolicies();</span>
<a href="#l5.291"></a><span id="l5.291" class="difflineplus">+  generateActivePolicies(data);</span>
<a href="#l5.292"></a><span id="l5.292" class="difflineplus">+  generateErrors();</span>
<a href="#l5.293"></a><span id="l5.293" class="difflineplus">+  generateDocumentation();</span>
<a href="#l5.294"></a><span id="l5.294" class="difflineplus">+</span>
<a href="#l5.295"></a><span id="l5.295" class="difflineplus">+  // Event delegation on #categories element</span>
<a href="#l5.296"></a><span id="l5.296" class="difflineplus">+  let menu = document.getElementById(&quot;categories&quot;);</span>
<a href="#l5.297"></a><span id="l5.297" class="difflineplus">+  for (let category of menu.children) {</span>
<a href="#l5.298"></a><span id="l5.298" class="difflineplus">+    category.addEventListener(&quot;click&quot;, () =&gt; show(category));</span>
<a href="#l5.299"></a><span id="l5.299" class="difflineplus">+  }</span>
<a href="#l5.300"></a><span id="l5.300" class="difflineplus">+</span>
<a href="#l5.301"></a><span id="l5.301" class="difflineplus">+  if (location.hash) {</span>
<a href="#l5.302"></a><span id="l5.302" class="difflineplus">+    let sectionButton = document.getElementById(&quot;category-&quot; + location.hash.substring(1));</span>
<a href="#l5.303"></a><span id="l5.303" class="difflineplus">+    if (sectionButton) {</span>
<a href="#l5.304"></a><span id="l5.304" class="difflineplus">+      sectionButton.click();</span>
<a href="#l5.305"></a><span id="l5.305" class="difflineplus">+    }</span>
<a href="#l5.306"></a><span id="l5.306" class="difflineplus">+  }</span>
<a href="#l5.307"></a><span id="l5.307" class="difflineplus">+</span>
<a href="#l5.308"></a><span id="l5.308" class="difflineplus">+  window.addEventListener(&quot;hashchange&quot;, function() {</span>
<a href="#l5.309"></a><span id="l5.309" class="difflineplus">+   if (location.hash) {</span>
<a href="#l5.310"></a><span id="l5.310" class="difflineplus">+      let sectionButton = document.getElementById(&quot;category-&quot; + location.hash.substring(1));</span>
<a href="#l5.311"></a><span id="l5.311" class="difflineplus">+      sectionButton.click();</span>
<a href="#l5.312"></a><span id="l5.312" class="difflineplus">+    }</span>
<a href="#l5.313"></a><span id="l5.313" class="difflineplus">+  });</span>
<a href="#l5.314"></a><span id="l5.314" class="difflineplus">+}</span>
<a href="#l5.315"></a><span id="l5.315" class="difflineplus">+</span>
<a href="#l5.316"></a><span id="l5.316" class="difflineplus">+function show(button) {</span>
<a href="#l5.317"></a><span id="l5.317" class="difflineplus">+  let current_tab = document.querySelector(&quot;.active&quot;);</span>
<a href="#l5.318"></a><span id="l5.318" class="difflineplus">+  let category = button.getAttribute(&quot;id&quot;).substring(&quot;category-&quot;.length);</span>
<a href="#l5.319"></a><span id="l5.319" class="difflineplus">+  let content = document.getElementById(category);</span>
<a href="#l5.320"></a><span id="l5.320" class="difflineplus">+  if (current_tab == content)</span>
<a href="#l5.321"></a><span id="l5.321" class="difflineplus">+    return;</span>
<a href="#l5.322"></a><span id="l5.322" class="difflineplus">+  saveScrollPosition(current_tab.id);</span>
<a href="#l5.323"></a><span id="l5.323" class="difflineplus">+  current_tab.classList.remove(&quot;active&quot;);</span>
<a href="#l5.324"></a><span id="l5.324" class="difflineplus">+  current_tab.hidden = true;</span>
<a href="#l5.325"></a><span id="l5.325" class="difflineplus">+  content.classList.add(&quot;active&quot;);</span>
<a href="#l5.326"></a><span id="l5.326" class="difflineplus">+  content.hidden = false;</span>
<a href="#l5.327"></a><span id="l5.327" class="difflineplus">+</span>
<a href="#l5.328"></a><span id="l5.328" class="difflineplus">+  let current_button = document.querySelector(&quot;[selected=true]&quot;);</span>
<a href="#l5.329"></a><span id="l5.329" class="difflineplus">+  current_button.removeAttribute(&quot;selected&quot;);</span>
<a href="#l5.330"></a><span id="l5.330" class="difflineplus">+  button.setAttribute(&quot;selected&quot;, &quot;true&quot;);</span>
<a href="#l5.331"></a><span id="l5.331" class="difflineplus">+</span>
<a href="#l5.332"></a><span id="l5.332" class="difflineplus">+  let title = document.getElementById(&quot;sectionTitle&quot;);</span>
<a href="#l5.333"></a><span id="l5.333" class="difflineplus">+  title.textContent = button.children[1].textContent;</span>
<a href="#l5.334"></a><span id="l5.334" class="difflineplus">+  location.hash = category;</span>
<a href="#l5.335"></a><span id="l5.335" class="difflineplus">+  restoreScrollPosition(category);</span>
<a href="#l5.336"></a><span id="l5.336" class="difflineplus">+}</span>
<a href="#l5.337"></a><span id="l5.337" class="difflineplus">+</span>
<a href="#l5.338"></a><span id="l5.338" class="difflineplus">+const scrollPositions = {};</span>
<a href="#l5.339"></a><span id="l5.339" class="difflineplus">+function saveScrollPosition(category) {</span>
<a href="#l5.340"></a><span id="l5.340" class="difflineplus">+  const mainContent = document.querySelector(&quot;.main-content&quot;);</span>
<a href="#l5.341"></a><span id="l5.341" class="difflineplus">+  scrollPositions[category] = mainContent.scrollTop;</span>
<a href="#l5.342"></a><span id="l5.342" class="difflineplus">+}</span>
<a href="#l5.343"></a><span id="l5.343" class="difflineplus">+</span>
<a href="#l5.344"></a><span id="l5.344" class="difflineplus">+function restoreScrollPosition(category) {</span>
<a href="#l5.345"></a><span id="l5.345" class="difflineplus">+  const scrollY = scrollPositions[category] || 0;</span>
<a href="#l5.346"></a><span id="l5.346" class="difflineplus">+  const mainContent = document.querySelector(&quot;.main-content&quot;);</span>
<a href="#l5.347"></a><span id="l5.347" class="difflineplus">+  mainContent.scrollTo(0, scrollY);</span>
<a href="#l5.348"></a><span id="l5.348" class="difflineplus">+}</span>
<a href="#l5.349"></a><span id="l5.349" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/content/aboutPolicies.xhtml</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,75 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+&lt;!--</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+--&gt;</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+&lt;!DOCTYPE html&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+    &lt;head&gt;</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+        &lt;title data-l10n-id=&quot;about-policies-title&quot;/&gt;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+        &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/content/policies/aboutPolicies.css&quot; type=&quot;text/css&quot; /&gt;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+        &lt;link rel=&quot;localization&quot; href=&quot;branding/brand.ftl&quot;/&gt;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+        &lt;link rel=&quot;localization&quot; href=&quot;messenger/policies/aboutPolicies.ftl&quot;/&gt;</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+        &lt;link rel=&quot;localization&quot; href=&quot;messenger/policies/policies-descriptions.ftl&quot;/&gt;</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+        &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/policies/aboutPolicies.js&quot; /&gt;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+    &lt;/head&gt;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+    &lt;body id=&quot;body&quot; onload=&quot;init()&quot;&gt;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+        &lt;div id=&quot;categories&quot;&gt;</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+            &lt;div class=&quot;category&quot; selected=&quot;true&quot; id=&quot;category-active&quot;&gt;</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+                &lt;img class=&quot;category-icon&quot; src=&quot;chrome://messenger/content/policies/policies-active.svg&quot;&gt;&lt;/img&gt;</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+                &lt;label class=&quot;category-name&quot; data-l10n-id=&quot;active-policies-tab&quot;&gt;&lt;/label&gt;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+            &lt;div class=&quot;category&quot; id=&quot;category-documentation&quot;&gt;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+                &lt;img class=&quot;category-icon&quot; src=&quot;chrome://messenger/content/policies/policies-documentation.svg&quot;&gt;&lt;/img&gt;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+                &lt;label class=&quot;category-name&quot; data-l10n-id=&quot;documentation-tab&quot;&gt;&lt;/label&gt;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+            &lt;div class=&quot;category&quot; id=&quot;category-errors&quot;&gt;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+                &lt;img class=&quot;category-icon&quot; src=&quot;chrome://messenger/content/policies/policies-error.svg&quot;&gt;&lt;/img&gt;</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+                &lt;label class=&quot;category-name&quot; data-l10n-id=&quot;errors-tab&quot;&gt;&lt;/label&gt;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+        &lt;/div&gt;</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+        &lt;div class=&quot;main-content&quot;&gt;</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+            &lt;div class=&quot;header&quot;&gt;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+                &lt;div id=&quot;sectionTitle&quot; class=&quot;header-name&quot; data-l10n-id=&quot;active-policies-tab&quot;/&gt;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+            &lt;div id=&quot;active&quot; class=&quot;tab active&quot;&gt;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+                &lt;h3 class=&quot;inactive-service-message&quot; data-l10n-id=&quot;inactive-message&quot;&gt;&lt;/h3&gt;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+                &lt;h3 class=&quot;no-specified-policies-message&quot; data-l10n-id=&quot;no-specified-policies-message&quot;&gt;&lt;/h3&gt;</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+                &lt;table&gt;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+                    &lt;thead&gt;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+                        &lt;tr&gt;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+                            &lt;th data-l10n-id=&quot;policy-name&quot;/&gt;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+                            &lt;th data-l10n-id=&quot;policy-value&quot;/&gt;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+                        &lt;/tr&gt;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+                    &lt;/thead&gt;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+                    &lt;tbody id=&quot;activeContent&quot; /&gt;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+                &lt;/table&gt;</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+            &lt;div id=&quot;documentation&quot; class=&quot;tab&quot; hidden=&quot;true&quot;&gt;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+                &lt;table&gt;</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+                    &lt;thead&gt;</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+                        &lt;tr&gt;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+                            &lt;th data-l10n-id=&quot;policy-name&quot;/&gt;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+                        &lt;/tr&gt;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+                    &lt;/thead&gt;</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+                    &lt;tbody id=&quot;documentationContent&quot; /&gt;</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+                &lt;/table&gt;</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+             &lt;div id=&quot;errors&quot; class=&quot;tab&quot; hidden=&quot;true&quot;&gt;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+                &lt;table&gt;</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+                    &lt;thead&gt;</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+                        &lt;tr&gt;</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+                            &lt;th data-l10n-id=&quot;policy-errors&quot;/&gt;</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+                        &lt;/tr&gt;</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+                    &lt;/thead&gt;</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+                    &lt;tbody id=&quot;errorsContent&quot; /&gt;</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+                &lt;/table&gt;</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+        &lt;/div&gt;</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineplus">+    &lt;/body&gt;</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineplus">+&lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/content/policies-active.svg</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+&lt;svg height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+    &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;m11 10c-.5522847 0-1-.44771525-1-1v-4h-7v8c0 .5522847.44771525 1 1 1h2c.55228475 0 1 .4477153 1 1s-.44771525 1-1 1h-3c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2h1.05c.23659623-1.16516199 1.26105919-2.00250628 2.45-2.00250628s2.21340377.83734429 2.45 2.00250628h1.05c1.1045695 0 2 .8954305 2 2v5c0 .55228475-.4477153 1-1 1zm-1-6v-1h-1.051c-.47526862.000097-.88494628-.33433375-.98-.8-.14293517-.69793844-.7570756-1.19905191-1.4695-1.19905191s-1.32656483.50111347-1.4695 1.19905191c-.09505372.46566625-.50473138.800097-.98.8h-1.05v1zm-3.5-2c.27614237 0 .5.22385763.5.5s-.22385763.5-.5.5-.5-.22385763-.5-.5.22385763-.5.5-.5zm-2 5c-.27614237 0-.5-.22385763-.5-.5s.22385763-.5.5-.5h4c.27614237 0 .5.22385763.5.5s-.22385763.5-.5.5zm0 2c-.27614237 0-.5-.22385763-.5-.5s.22385763-.5.5-.5h2c.27614237 0 .5.22385763.5.5s-.22385763.5-.5.5zm0 2c-.27614237 0-.5-.2238576-.5-.5s.22385763-.5.5-.5h3c.27614237 0 .5.2238576.5.5s-.22385763.5-.5.5zm5.16250363 4.9969649c-.17706448-.0000378-.34686306-.070407-.47204764-.1956294l-2.00303103-2.003031c-.25303103-.2619823-.24941233-.6784164.00813326-.935962s.67397967-.2611643.93596203-.0081333l1.44017931 1.4401793 4.21704794-6.02444961c.2127301-.29815587.6259441-.36927468.9261129-.15939456.3001689.20988012.3752209.62239779.1682098.92455241l-4.6737391 6.67677006c-.1126024.1627768-.29162177.2672048-.48873957.2850981-.01935032.0009766-.03873758.0009766-.0580879 0z&quot;/&gt;</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/content/policies-documentation.svg</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+&lt;svg height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+    &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;m11 7.00250628c-.5522847 0-1-.44771525-1-1v-1h-7v8.00000002c0 .5522847.44771525 1 1 1h2c.55228475 0 1 .4477152 1 1 0 .5522847-.44771525 1-1 1h-3c-1.1045695 0-2-.8954305-2-2v-10.00000002c0-1.1045695.8954305-2 2-2h1.05c.23659623-1.16516199 1.26105919-2.00250628 2.45-2.00250628s2.21340377.83734429 2.45 2.00250628h1.05c1.1045695 0 2 .8954305 2 2v2c0 .55228475-.4477153 1-1 1zm-1-3v-1h-1.051c-.47526862.000097-.88494628-.33433374-.98-.8-.14293517-.69793844-.7570756-1.19905191-1.4695-1.19905191s-1.32656483.50111347-1.4695 1.19905191c-.09505372.46566626-.50473138.800097-.98.8h-1.05v1zm-3.5-2c.27614237 0 .5.22385763.5.5 0 .27614238-.22385763.5-.5.5s-.5-.22385762-.5-.5c0-.27614237.22385763-.5.5-.5zm-2 5c-.27614237 0-.5-.22385762-.5-.5 0-.27614237.22385763-.5.5-.5h4c.27614237 0 .5.22385763.5.5 0 .27614238-.22385763.5-.5.5zm0 2c-.27614237 0-.5-.22385762-.5-.5 0-.27614237.22385763-.5.5-.5h2c.27614237 0 .5.22385763.5.5 0 .27614238-.22385763.5-.5.5zm0 2.00000002c-.27614237 0-.5-.2238576-.5-.5s.22385763-.5.5-.5h1c.27614237 0 .5.2238576.5.5s-.22385763.5-.5.5zm6.5 4.9974937c-2.2092 0-4-1.7908-4-4s1.7908-4 4-4 4 1.7908 4 4-1.7908 4-4 4zm.46-2c0-.254051-.205949-.46-.46-.46s-.46.205949-.46.46.205949.46.46.46.46-.205949.46-.46zm-1.06-3c0-.3056.2464-.6.6-.6s.6.2944.6.6c0 .1244-.0576.254-.1632.3896-.0796.1016-.1544.172-.228.24-.0308.0288-.0612.0572-.092.0876-.0062816.0061251-.0126828.0121262-.0192.018-.052.0468-.1864.168-.2792.3028-.1304.1896-.2184.434-.2184.762 0 .2209139.1790861.4.4.4s.4-.1790861.4-.4c0-.1724.0424-.258.0776-.3088.0204-.0296.0456-.0576.0788-.09.016-.0156.032-.03.0516-.048l.0012-.0008.0036-.0032c.02-.018.0456-.0416.07-.0664l.0344-.032c.1262825-.1138504.2434416-.2374293.3504-.3696.16-.2048.3324-.5056.3324-.8812 0-.6944-.5536-1.4-1.4-1.4s-1.4.7056-1.4 1.4c0 .2209139.1790861.4.4.4s.4-.1790861.4-.4z&quot;/&gt;</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- /dev/null</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/content/policies-error.svg</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineplus">+&lt;svg height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+    &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;m11 7.00250628c-.5522847 0-1-.44771525-1-1v-1h-7v8.00000002c0 .5522847.44771525 1 1 1h1c.55228475 0 1 .4477152 1 1 0 .5522847-.44771525 1-1 1h-2c-1.1045695 0-2-.8954305-2-2v-10.00000002c0-1.1045695.8954305-2 2-2h1.05c.23659623-1.16516199 1.26105919-2.00250628 2.45-2.00250628s2.21340377.83734429 2.45 2.00250628h1.05c1.1045695 0 2 .8954305 2 2v2c0 .55228475-.4477153 1-1 1zm-1-3v-1h-1.051c-.47526862.000097-.88494628-.33433374-.98-.8-.14293517-.69793844-.7570756-1.19905191-1.4695-1.19905191s-1.32656483.50111347-1.4695 1.19905191c-.09505372.46566626-.50473138.800097-.98.8h-1.05v1zm-3.5-2c.27614237 0 .5.22385763.5.5 0 .27614238-.22385763.5-.5.5s-.5-.22385762-.5-.5c0-.27614237.22385763-.5.5-.5zm-2 5c-.27614237 0-.5-.22385762-.5-.5 0-.27614237.22385763-.5.5-.5h4c.27614237 0 .5.22385763.5.5 0 .27614238-.22385763.5-.5.5zm0 2c-.27614237 0-.5-.22385762-.5-.5 0-.27614237.22385763-.5.5-.5h3c.27614237 0 .5.22385763.5.5 0 .27614238-.22385763.5-.5.5zm0 2.00000002c-.27614237 0-.5-.2238576-.5-.5s.22385763-.5.5-.5h2c.27614237 0 .5.2238576.5.5s-.22385763.5-.5.5zm10.4094737 3.3385315c.1818196.3660605.1556801.8011195-.0686611 1.1427768-.2243412.3416572-.6131685.5385659-1.0213389.5172232h-5.70000002c-.39222659-.0104155-.75207561-.2200879-.95454083-.5561802-.20246523-.3360923-.21960272-.7522174-.04545917-1.1038198l2.85-5.69999999c.19423612-.39115456.59327402-.63853153 1.03000002-.63853153.4367259 0 .8357638.24737697 1.03.63853153zm-4.45-3.78v1.73c.0381214.2884432.2840486.5040066.575.5040066s.5368786-.2155634.575-.5040066v-1.73c.0295426-.2235324-.0731401-.4439283-.2632845-.56510838-.1901445-.12118005-.4332866-.12118005-.623431 0-.1901445.12118008-.2928271.34157598-.2632845.56510838zm.57 4.13c.3755536 0 .68-.3044464.68-.68 0-.2750343-.1656767-.522987-.4197753-.6282381s-.5465787-.0470731-.7410573.1474055c-.1944787.1944786-.2526566.4869588-.1474055.7410573.1052511.2540986.3532038.4197753.6282381.4197753z&quot;/&gt;</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/helpers/ProxyPolicies.jsm</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,110 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+ * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+const {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+XPCOMUtils.defineLazyGlobalGetters(this, [&quot;URL&quot;]);</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+const PREF_LOGLEVEL = &quot;browser.policies.loglevel&quot;;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+XPCOMUtils.defineLazyGetter(this, &quot;log&quot;, () =&gt; {</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+  let { ConsoleAPI } = ChromeUtils.import(&quot;resource://gre/modules/Console.jsm&quot;);</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+  return new ConsoleAPI({</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+    prefix: &quot;ProxyPolicies.jsm&quot;,</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+    // tip: set maxLogLevel to &quot;debug&quot; and use log.debug() to create detailed</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+    // messages during development. See LOG_LEVELS in Console.jsm for details.</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+    maxLogLevel: &quot;error&quot;,</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+    maxLogLevelPref: PREF_LOGLEVEL,</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+  });</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+});</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+// Don't use const here because this is acessed by</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+// tests through the BackstagePass object.</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+var PROXY_TYPES_MAP = new Map([</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+  [&quot;none&quot;, Ci.nsIProtocolProxyService.PROXYCONFIG_DIRECT],</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+  [&quot;system&quot;, Ci.nsIProtocolProxyService.PROXYCONFIG_SYSTEM],</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+  [&quot;manual&quot;, Ci.nsIProtocolProxyService.PROXYCONFIG_MANUAL],</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+  [&quot;autoDetect&quot;, Ci.nsIProtocolProxyService.PROXYCONFIG_WPAD],</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+  [&quot;autoConfig&quot;, Ci.nsIProtocolProxyService.PROXYCONFIG_PAC],</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+]);</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+var EXPORTED_SYMBOLS = [ &quot;ProxyPolicies&quot; ];</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineplus">+</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+var ProxyPolicies = {</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+  configureProxySettings(param, setPref) {</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+    if (param.Mode) {</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineplus">+      setPref(&quot;network.proxy.type&quot;, PROXY_TYPES_MAP.get(param.Mode));</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineplus">+    }</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineplus">+</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineplus">+    if (param.AutoConfigURL) {</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineplus">+      setPref(&quot;network.proxy.autoconfig_url&quot;, param.AutoConfigURL.href);</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+    }</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+    if (param.UseProxyForDNS !== undefined) {</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+      setPref(&quot;network.proxy.socks_remote_dns&quot;, param.UseProxyForDNS);</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineplus">+    }</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineplus">+</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineplus">+    if (param.AutoLogin !== undefined) {</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+      setPref(&quot;signon.autologin.proxy&quot;, param.AutoLogin);</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+    }</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+    if (param.SOCKSVersion !== undefined) {</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+      if (param.SOCKSVersion != 4 &amp;&amp; param.SOCKSVersion != 5) {</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+        log.error(&quot;Invalid SOCKS version&quot;);</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+      } else {</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+        setPref(&quot;network.proxy.socks_version&quot;, param.SOCKSVersion);</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+      }</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+    }</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+    if (param.Passthrough !== undefined) {</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+      setPref(&quot;network.proxy.no_proxies_on&quot;, param.Passthrough);</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+    }</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+    if (param.UseHTTPProxyForAllProtocols !== undefined) {</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+      setPref(&quot;network.proxy.share_proxy_settings&quot;, param.UseHTTPProxyForAllProtocols);</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+    }</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+    function setProxyHostAndPort(type, address) {</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+      let url;</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+      try {</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+        // Prepend https just so we can use the URL parser</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+        // instead of parsing manually.</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+        url = new URL(`https://${address}`);</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+      } catch (e) {</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+        log.error(`Invalid address for ${type} proxy: ${address}`);</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+        return;</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+      }</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineplus">+</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineplus">+      setPref(`network.proxy.${type}`, url.hostname);</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineplus">+      if (url.port) {</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineplus">+        setPref(`network.proxy.${type}_port`, Number(url.port));</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineplus">+      }</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineplus">+    }</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineplus">+</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineplus">+    if (param.HTTPProxy) {</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineplus">+      setProxyHostAndPort(&quot;http&quot;, param.HTTPProxy);</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineplus">+</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineplus">+      // network.proxy.share_proxy_settings is a UI feature, not handled by the</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineplus">+      // network code. That pref only controls if the checkbox is checked, and</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineplus">+      // then we must manually set the other values.</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineplus">+      if (param.UseHTTPProxyForAllProtocols) {</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineplus">+        param.FTPProxy = param.SSLProxy = param.SOCKSProxy = param.HTTPProxy;</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineplus">+      }</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineplus">+    }</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineplus">+</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineplus">+    if (param.FTPProxy) {</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineplus">+      setProxyHostAndPort(&quot;ftp&quot;, param.FTPProxy);</span>
<a href="#l10.104"></a><span id="l10.104" class="difflineplus">+    }</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineplus">+</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineplus">+    if (param.SSLProxy) {</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineplus">+      setProxyHostAndPort(&quot;ssl&quot;, param.SSLProxy);</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineplus">+    }</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineplus">+</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineplus">+    if (param.SOCKSProxy) {</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineplus">+      setProxyHostAndPort(&quot;socks&quot;, param.SOCKSProxy);</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineplus">+    }</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineplus">+  },</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/helpers/moz.build</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,12 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+# vim: set filetype=python:</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+with Files('**'):</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+    BUG_COMPONENT = ('Thunderbird', 'OS Integration')</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+EXTRA_JS_MODULES.policies += [</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+    'ProxyPolicies.jsm',</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/jar.mn</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,11 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+messenger.jar:</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+    content/messenger/policies/aboutPolicies.css              (content/aboutPolicies.css)</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+    content/messenger/policies/aboutPolicies.xhtml            (content/aboutPolicies.xhtml)</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+    content/messenger/policies/aboutPolicies.js               (content/aboutPolicies.js)</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    content/messenger/policies/policies-active.svg            (content/policies-active.svg)</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+    content/messenger/policies/policies-documentation.svg     (content/policies-documentation.svg)</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+    content/messenger/policies/policies-error.svg             (content/policies-error.svg)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/moz.build</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,25 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+# vim: set filetype=python:</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+with Files('**'):</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+    BUG_COMPONENT = ('Thunderbird', 'OS Integration')</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+DIRS += [</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+    'helpers',</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+    'schemas',</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+]</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+TEST_DIRS += [</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+    'tests'</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+]</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+EXTRA_JS_MODULES.policies += [</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+    'Policies.jsm',</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+]</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+JAR_MANIFESTS += [</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+    'jar.mn',</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineplus">+]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- /dev/null</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/schemas/configuration.json</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -0,0 +1,10 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+{</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+  &quot;type&quot;: &quot;object&quot;,</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+  &quot;properties&quot;: {</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+      &quot;$ref&quot;: &quot;policies.json&quot;</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineplus">+    }</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+  },</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  &quot;required&quot;: [&quot;policies&quot;]</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">new file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- /dev/null</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/schemas/moz.build</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -0,0 +1,12 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineplus">+# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineplus">+# vim: set filetype=python:</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineplus">+with Files('**'):</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+    BUG_COMPONENT = ('Thunderbird', 'OS Integration')</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+EXTRA_PP_JS_MODULES.policies += [</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+    'schema.jsm',</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">new file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- /dev/null</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/schemas/policies-schema.json</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -0,0 +1,113 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineplus">+{</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineplus">+  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineplus">+  &quot;type&quot;: &quot;object&quot;,</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineplus">+  &quot;properties&quot;: {</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineplus">+    &quot;AppUpdateURL&quot;: {</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+      &quot;type&quot;: &quot;URL&quot;</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineplus">+    },</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    &quot;DisableMasterPasswordCreation&quot;: {</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+      &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+    },</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+    &quot;ExtensionSettings&quot;: {</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+      &quot;type&quot;: &quot;object&quot;,</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineplus">+      &quot;patternProperties&quot;: {</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineplus">+        &quot;^.*$&quot;: {</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+          &quot;type&quot;: &quot;object&quot;,</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+          &quot;properties&quot;: {</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineplus">+            &quot;blocked_install_message&quot;: {</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineplus">+              &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineplus">+            }</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+          }</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+        }</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+      }</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+    },</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineplus">+</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineplus">+    &quot;Preferences&quot;: {</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+      &quot;type&quot;: &quot;object&quot;,</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+      &quot;properties&quot;: {</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+        &quot;network.IDN_show_punycode&quot;: {</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+        },</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineplus">+        &quot;browser.fixup.dns_first_for_single_words&quot;: {</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineplus">+        },</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+        &quot;browser.cache.disk.parent_directory&quot;: {</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineplus">+        },</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineplus">+        &quot;browser.urlbar.suggest.openpage&quot;: {</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+        },</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineplus">+        &quot;browser.urlbar.suggest.history&quot;: {</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+        },</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineplus">+        &quot;browser.urlbar.suggest.bookmark&quot;: {</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+        }</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineplus">+      }</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+    },</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineplus">+</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+    &quot;Proxy&quot;: {</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineplus">+      &quot;type&quot;: &quot;object&quot;,</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+      &quot;properties&quot;: {</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+        &quot;Mode&quot;: {</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;,</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+          &quot;enum&quot;: [&quot;none&quot;, &quot;system&quot;, &quot;manual&quot;, &quot;autoDetect&quot;, &quot;autoConfig&quot;]</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineplus">+        },</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+        &quot;Locked&quot;: {</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+        },</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineplus">+</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+        &quot;AutoConfigURL&quot;: {</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineplus">+          &quot;type&quot;: &quot;URLorEmpty&quot;</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineplus">+        },</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineplus">+        &quot;FTPProxy&quot;: {</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineplus">+        },</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineplus">+        &quot;HTTPProxy&quot;: {</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineplus">+        },</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineplus">+</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineplus">+        &quot;SSLProxy&quot;: {</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineplus">+        },</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineplus">+</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineplus">+        &quot;SOCKSProxy&quot;: {</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineplus">+        },</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineplus">+</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+        &quot;SOCKSVersion&quot;: {</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineplus">+          &quot;type&quot;: &quot;number&quot;,</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineplus">+          &quot;enum&quot;: [4, 5]</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineplus">+        },</span>
<a href="#l16.91"></a><span id="l16.91" class="difflineplus">+</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineplus">+        &quot;UseHTTPProxyForAllProtocols&quot;: {</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+        },</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineplus">+</span>
<a href="#l16.96"></a><span id="l16.96" class="difflineplus">+        &quot;Passthrough&quot;: {</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineplus">+        },</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineplus">+</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+        &quot;UseProxyForDNS&quot;: {</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.102"></a><span id="l16.102" class="difflineplus">+        },</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineplus">+</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineplus">+        &quot;AutoLogin&quot;: {</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineplus">+        }</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineplus">+      }</span>
<a href="#l16.108"></a><span id="l16.108" class="difflineplus">+    },</span>
<a href="#l16.109"></a><span id="l16.109" class="difflineplus">+</span>
<a href="#l16.110"></a><span id="l16.110" class="difflineplus">+    &quot;RequestedLocales&quot;: {</span>
<a href="#l16.111"></a><span id="l16.111" class="difflineplus">+      &quot;type&quot;: [&quot;string&quot;, &quot;array&quot;],</span>
<a href="#l16.112"></a><span id="l16.112" class="difflineplus">+      &quot;items&quot;: {</span>
<a href="#l16.113"></a><span id="l16.113" class="difflineplus">+        &quot;type&quot;: &quot;string&quot;</span>
<a href="#l16.114"></a><span id="l16.114" class="difflineplus">+      }</span>
<a href="#l16.115"></a><span id="l16.115" class="difflineplus">+    }</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineplus">+  }</span>
<a href="#l16.117"></a><span id="l16.117" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">new file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- /dev/null</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/schemas/schema.jsm</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -0,0 +1,10 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineplus">+ * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineplus">+</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineplus">+</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineplus">+this.EXPORTED_SYMBOLS = [&quot;schema&quot;];</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+this.schema =</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineplus">+#include policies-schema.json</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">new file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- /dev/null</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/.eslintrc.js</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -0,0 +1,10 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineplus">+</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineplus">+module.exports = {</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+  &quot;extends&quot;: &quot;plugin:mozilla/browser-test&quot;,</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineplus">+</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+  &quot;rules&quot;: {</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineplus">+    &quot;func-names&quot;: &quot;off&quot;,</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+    &quot;mozilla/import-headjs-globals&quot;: &quot;error&quot;,</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  },</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">new file mode 100644</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineminus">--- /dev/null</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser.ini</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineat">@@ -0,0 +1,24 @@</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineplus">+[DEFAULT]</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineplus">+head = head.js</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineplus">+prefs =</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineplus">+  ldap_2.servers.osx.description=</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineplus">+  ldap_2.servers.osx.dirType=-1</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineplus">+  ldap_2.servers.osx.uri=</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineplus">+  mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineplus">+  mail.spotlight.firstRunDone=true</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  mail.winsearch.firstRunDone=true</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+  mailnews.start_page.override_url=about:blank</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+  mailnews.start_page.url=about:blank</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+subsuite = thunderbird</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineplus">+</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+[browser_policies_macosparser_unflatten.js]</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+skip-if = os != 'mac'</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+[browser_policies_runOnce_helper.js]</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineplus">+[browser_policies_setAndLockPref_API.js]</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+[browser_policies_sorted_alphabetically.js]</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+[browser_policy_app_update.js]</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineplus">+[browser_policy_app_update_URL.js]</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineplus">+[browser_policy_extensionsettings.js]</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+[browser_policy_locale.js]</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+[browser_policy_proxy.js]</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineplus">+[browser_policy_preferences.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">new file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- /dev/null</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policies_macosparser_unflatten.js</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -0,0 +1,120 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineplus">+</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineplus">+</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineplus">+let { macOSPoliciesParser } = ChromeUtils.import(&quot;resource://gre/modules/policies/macOSPoliciesParser.jsm&quot;);</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+add_task(async function test_object_unflatten() {</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  // Note: these policies are just examples and they won't actually</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineplus">+  // run through the policy engine on this test. We're just testing</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+  // that the unflattening algorithm produces the correct output.</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+  let input = {</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+    &quot;DisplayBookmarksToolbar&quot;: true,</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineplus">+    &quot;Homepage__URL&quot;: &quot;https://www.mozilla.org&quot;,</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+    &quot;Homepage__Locked&quot;: &quot;true&quot;,</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineplus">+    &quot;Homepage__Additional__0&quot;: &quot;https://extra-homepage-1.example.com&quot;,</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+    &quot;Homepage__Additional__1&quot;: &quot;https://extra-homepage-2.example.com&quot;,</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineplus">+    &quot;WebsiteFilter__Block__0&quot;: &quot;*://*.example.org/*&quot;,</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineplus">+    &quot;WebsiteFilter__Block__1&quot;: &quot;*://*.example.net/*&quot;,</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineplus">+    &quot;WebsiteFilter__Exceptions__0&quot;: &quot;*://*.example.org/*exception*&quot;,</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineplus">+</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineplus">+    &quot;Permissions__Camera__Allow__0&quot;: &quot;https://www.example.com&quot;,</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineplus">+</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineplus">+    &quot;Permissions__Notifications__Allow__0&quot;: &quot;https://www.example.com&quot;,</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineplus">+    &quot;Permissions__Notifications__Allow__1&quot;: &quot;https://www.example.org&quot;,</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+    &quot;Permissions__Notifications__Block__0&quot;: &quot;https://www.example.net&quot;,</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineplus">+</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineplus">+    &quot;Permissions__Notifications__BlockNewRequests&quot;: true,</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+    &quot;Permissions__Notifications__Locked&quot;: true,</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineplus">+</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineplus">+    &quot;Bookmarks__0__Title&quot;: &quot;Bookmark 1&quot;,</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineplus">+    &quot;Bookmarks__0__URL&quot;: &quot;https://bookmark1.example.com&quot;,</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineplus">+</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineplus">+    &quot;Bookmarks__1__Title&quot;: &quot;Bookmark 2&quot;,</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineplus">+    &quot;Bookmarks__1__URL&quot;: &quot;https://bookmark2.example.com&quot;,</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineplus">+    &quot;Bookmarks__1__Folder&quot;: &quot;Folder&quot;,</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineplus">+  };</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineplus">+</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineplus">+  let expected = {</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineplus">+    &quot;DisplayBookmarksToolbar&quot;: true,</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineplus">+</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineplus">+    &quot;Homepage&quot;: {</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineplus">+      &quot;URL&quot;: &quot;https://www.mozilla.org&quot;,</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineplus">+      &quot;Locked&quot;: &quot;true&quot;,</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineplus">+      &quot;Additional&quot;: [</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineplus">+        &quot;https://extra-homepage-1.example.com&quot;,</span>
<a href="#l20.53"></a><span id="l20.53" class="difflineplus">+        &quot;https://extra-homepage-2.example.com&quot;,</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineplus">+      ],</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineplus">+    },</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineplus">+</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineplus">+    &quot;WebsiteFilter&quot;: {</span>
<a href="#l20.58"></a><span id="l20.58" class="difflineplus">+      &quot;Block&quot;: [</span>
<a href="#l20.59"></a><span id="l20.59" class="difflineplus">+        &quot;*://*.example.org/*&quot;,</span>
<a href="#l20.60"></a><span id="l20.60" class="difflineplus">+        &quot;*://*.example.net/*&quot;,</span>
<a href="#l20.61"></a><span id="l20.61" class="difflineplus">+      ],</span>
<a href="#l20.62"></a><span id="l20.62" class="difflineplus">+      &quot;Exceptions&quot;: [</span>
<a href="#l20.63"></a><span id="l20.63" class="difflineplus">+        &quot;*://*.example.org/*exception*&quot;,</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineplus">+      ],</span>
<a href="#l20.65"></a><span id="l20.65" class="difflineplus">+    },</span>
<a href="#l20.66"></a><span id="l20.66" class="difflineplus">+</span>
<a href="#l20.67"></a><span id="l20.67" class="difflineplus">+    &quot;Permissions&quot;: {</span>
<a href="#l20.68"></a><span id="l20.68" class="difflineplus">+      &quot;Camera&quot;: {</span>
<a href="#l20.69"></a><span id="l20.69" class="difflineplus">+        &quot;Allow&quot;: [</span>
<a href="#l20.70"></a><span id="l20.70" class="difflineplus">+          &quot;https://www.example.com&quot;,</span>
<a href="#l20.71"></a><span id="l20.71" class="difflineplus">+        ],</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineplus">+      },</span>
<a href="#l20.73"></a><span id="l20.73" class="difflineplus">+</span>
<a href="#l20.74"></a><span id="l20.74" class="difflineplus">+      &quot;Notifications&quot;: {</span>
<a href="#l20.75"></a><span id="l20.75" class="difflineplus">+        &quot;Allow&quot;: [</span>
<a href="#l20.76"></a><span id="l20.76" class="difflineplus">+          &quot;https://www.example.com&quot;,</span>
<a href="#l20.77"></a><span id="l20.77" class="difflineplus">+          &quot;https://www.example.org&quot;,</span>
<a href="#l20.78"></a><span id="l20.78" class="difflineplus">+        ],</span>
<a href="#l20.79"></a><span id="l20.79" class="difflineplus">+        &quot;Block&quot;: [</span>
<a href="#l20.80"></a><span id="l20.80" class="difflineplus">+          &quot;https://www.example.net&quot;,</span>
<a href="#l20.81"></a><span id="l20.81" class="difflineplus">+        ],</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineplus">+        &quot;BlockNewRequests&quot;: true,</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineplus">+        &quot;Locked&quot;: true,</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineplus">+      },</span>
<a href="#l20.85"></a><span id="l20.85" class="difflineplus">+    },</span>
<a href="#l20.86"></a><span id="l20.86" class="difflineplus">+</span>
<a href="#l20.87"></a><span id="l20.87" class="difflineplus">+    &quot;Bookmarks&quot;: [</span>
<a href="#l20.88"></a><span id="l20.88" class="difflineplus">+      {</span>
<a href="#l20.89"></a><span id="l20.89" class="difflineplus">+        &quot;Title&quot;: &quot;Bookmark 1&quot;,</span>
<a href="#l20.90"></a><span id="l20.90" class="difflineplus">+        &quot;URL&quot;: &quot;https://bookmark1.example.com&quot;,</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineplus">+      },</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineplus">+      {</span>
<a href="#l20.93"></a><span id="l20.93" class="difflineplus">+        &quot;Title&quot;: &quot;Bookmark 2&quot;,</span>
<a href="#l20.94"></a><span id="l20.94" class="difflineplus">+        &quot;URL&quot;: &quot;https://bookmark2.example.com&quot;,</span>
<a href="#l20.95"></a><span id="l20.95" class="difflineplus">+        &quot;Folder&quot;: &quot;Folder&quot;,</span>
<a href="#l20.96"></a><span id="l20.96" class="difflineplus">+      },</span>
<a href="#l20.97"></a><span id="l20.97" class="difflineplus">+    ],</span>
<a href="#l20.98"></a><span id="l20.98" class="difflineplus">+  };</span>
<a href="#l20.99"></a><span id="l20.99" class="difflineplus">+</span>
<a href="#l20.100"></a><span id="l20.100" class="difflineplus">+  let unflattened = macOSPoliciesParser.unflatten(input);</span>
<a href="#l20.101"></a><span id="l20.101" class="difflineplus">+</span>
<a href="#l20.102"></a><span id="l20.102" class="difflineplus">+  Assert.deepEqual(unflattened, expected, &quot;Input was unflattened correctly.&quot;);</span>
<a href="#l20.103"></a><span id="l20.103" class="difflineplus">+});</span>
<a href="#l20.104"></a><span id="l20.104" class="difflineplus">+</span>
<a href="#l20.105"></a><span id="l20.105" class="difflineplus">+add_task(async function test_array_unflatten() {</span>
<a href="#l20.106"></a><span id="l20.106" class="difflineplus">+  let input = {</span>
<a href="#l20.107"></a><span id="l20.107" class="difflineplus">+    &quot;Foo__1&quot;: 1,</span>
<a href="#l20.108"></a><span id="l20.108" class="difflineplus">+    &quot;Foo__5&quot;: 5,</span>
<a href="#l20.109"></a><span id="l20.109" class="difflineplus">+    &quot;Foo__10&quot;: 10,</span>
<a href="#l20.110"></a><span id="l20.110" class="difflineplus">+    &quot;Foo__30&quot;: 30,</span>
<a href="#l20.111"></a><span id="l20.111" class="difflineplus">+    &quot;Foo__51&quot;: 51, // This one should not be included as the limit is 50</span>
<a href="#l20.112"></a><span id="l20.112" class="difflineplus">+  };</span>
<a href="#l20.113"></a><span id="l20.113" class="difflineplus">+</span>
<a href="#l20.114"></a><span id="l20.114" class="difflineplus">+  let unflattened = macOSPoliciesParser.unflatten(input);</span>
<a href="#l20.115"></a><span id="l20.115" class="difflineplus">+  is(unflattened.Foo.length, 31, &quot;Array size is correct&quot;);</span>
<a href="#l20.116"></a><span id="l20.116" class="difflineplus">+</span>
<a href="#l20.117"></a><span id="l20.117" class="difflineplus">+  let expected = {</span>
<a href="#l20.118"></a><span id="l20.118" class="difflineplus">+    Foo: [, 1, , , , 5], // eslint-disable-line no-sparse-arrays</span>
<a href="#l20.119"></a><span id="l20.119" class="difflineplus">+  };</span>
<a href="#l20.120"></a><span id="l20.120" class="difflineplus">+  expected.Foo[10] = 10;</span>
<a href="#l20.121"></a><span id="l20.121" class="difflineplus">+  expected.Foo[30] = 30;</span>
<a href="#l20.122"></a><span id="l20.122" class="difflineplus">+</span>
<a href="#l20.123"></a><span id="l20.123" class="difflineplus">+  Assert.deepEqual(unflattened, expected, &quot;Array was unflattened correctly.&quot;);</span>
<a href="#l20.124"></a><span id="l20.124" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">new file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- /dev/null</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policies_runOnce_helper.js</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -0,0 +1,19 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineplus">+</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineplus">+</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineplus">+let { runOnce } = ChromeUtils.import(&quot;resource:///modules/policies/Policies.jsm&quot;, null);</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineplus">+</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+let runCount = 0;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+function callback() {</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+  runCount++;</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+}</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineplus">+add_task(async function test_runonce_helper() {</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineplus">+  runOnce(&quot;test_action&quot;, callback);</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineplus">+  is(runCount, 1, &quot;Callback ran for the first time.&quot;);</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineplus">+</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineplus">+  runOnce(&quot;test_action&quot;, callback);</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineplus">+  is(runCount, 1, &quot;Callback didn't run again.&quot;);</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">new file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineminus">--- /dev/null</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policies_setAndLockPref_API.js</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineat">@@ -0,0 +1,150 @@</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineplus">+</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l22.9"></a><span id="l22.9" class="difflineplus">+</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineplus">+let {</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineplus">+  Policies,</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+  setAndLockPref,</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  setDefaultPref,</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+} = ChromeUtils.import(&quot;resource:///modules/policies/Policies.jsm&quot;, null);</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+add_task(async function test_API_directly() {</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+  await setupPolicyEngineWithJson(&quot;&quot;);</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+  setAndLockPref(&quot;policies.test.boolPref&quot;, true);</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+  checkLockedPref(&quot;policies.test.boolPref&quot;, true);</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineplus">+  // Check that a previously-locked pref can be changed</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+  // (it will be unlocked first).</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineplus">+  setAndLockPref(&quot;policies.test.boolPref&quot;, false);</span>
<a href="#l22.24"></a><span id="l22.24" class="difflineplus">+  checkLockedPref(&quot;policies.test.boolPref&quot;, false);</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineplus">+</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineplus">+  setAndLockPref(&quot;policies.test.intPref&quot;, 0);</span>
<a href="#l22.27"></a><span id="l22.27" class="difflineplus">+  checkLockedPref(&quot;policies.test.intPref&quot;, 0);</span>
<a href="#l22.28"></a><span id="l22.28" class="difflineplus">+</span>
<a href="#l22.29"></a><span id="l22.29" class="difflineplus">+  setAndLockPref(&quot;policies.test.stringPref&quot;, &quot;policies test&quot;);</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineplus">+  checkLockedPref(&quot;policies.test.stringPref&quot;, &quot;policies test&quot;);</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineplus">+</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+  setDefaultPref(&quot;policies.test.lockedPref&quot;, &quot;policies test&quot;, true);</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineplus">+  checkLockedPref(&quot;policies.test.lockedPref&quot;, &quot;policies test&quot;);</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineplus">+</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineplus">+  // Test that user values do not override the prefs, and the get*Pref call</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineplus">+  // still return the value set through setAndLockPref</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineplus">+  Services.prefs.setBoolPref(&quot;policies.test.boolPref&quot;, true);</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineplus">+  checkLockedPref(&quot;policies.test.boolPref&quot;, false);</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineplus">+</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineplus">+  Services.prefs.setIntPref(&quot;policies.test.intPref&quot;, 10);</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineplus">+  checkLockedPref(&quot;policies.test.intPref&quot;, 0);</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineplus">+</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineplus">+  Services.prefs.setStringPref(&quot;policies.test.stringPref&quot;, &quot;policies test&quot;);</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineplus">+  checkLockedPref(&quot;policies.test.stringPref&quot;, &quot;policies test&quot;);</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineplus">+</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineplus">+  try {</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineplus">+    // Test that a non-integer value is correctly rejected, even though</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineplus">+    // typeof(val) == &quot;number&quot;</span>
<a href="#l22.49"></a><span id="l22.49" class="difflineplus">+    setAndLockPref(&quot;policies.test.intPref&quot;, 1.5);</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineplus">+    ok(false, &quot;Integer value should be rejected&quot;);</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineplus">+  } catch (ex) {</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineplus">+    ok(true, &quot;Integer value was rejected&quot;);</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineplus">+  }</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineplus">+});</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineplus">+</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineplus">+add_task(async function test_API_through_policies() {</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineplus">+  // Ensure that the values received by the policies have the correct</span>
<a href="#l22.58"></a><span id="l22.58" class="difflineplus">+  // type to make sure things are properly working.</span>
<a href="#l22.59"></a><span id="l22.59" class="difflineplus">+</span>
<a href="#l22.60"></a><span id="l22.60" class="difflineplus">+  // Implement functions to handle the three simple policies</span>
<a href="#l22.61"></a><span id="l22.61" class="difflineplus">+  // that will be added to the schema.</span>
<a href="#l22.62"></a><span id="l22.62" class="difflineplus">+  Policies.bool_policy = {</span>
<a href="#l22.63"></a><span id="l22.63" class="difflineplus">+    onBeforeUIStartup(manager, param) {</span>
<a href="#l22.64"></a><span id="l22.64" class="difflineplus">+      setAndLockPref(&quot;policies.test2.boolPref&quot;, param);</span>
<a href="#l22.65"></a><span id="l22.65" class="difflineplus">+    },</span>
<a href="#l22.66"></a><span id="l22.66" class="difflineplus">+  };</span>
<a href="#l22.67"></a><span id="l22.67" class="difflineplus">+</span>
<a href="#l22.68"></a><span id="l22.68" class="difflineplus">+  Policies.int_policy = {</span>
<a href="#l22.69"></a><span id="l22.69" class="difflineplus">+    onBeforeUIStartup(manager, param) {</span>
<a href="#l22.70"></a><span id="l22.70" class="difflineplus">+      setAndLockPref(&quot;policies.test2.intPref&quot;, param);</span>
<a href="#l22.71"></a><span id="l22.71" class="difflineplus">+    },</span>
<a href="#l22.72"></a><span id="l22.72" class="difflineplus">+  };</span>
<a href="#l22.73"></a><span id="l22.73" class="difflineplus">+</span>
<a href="#l22.74"></a><span id="l22.74" class="difflineplus">+  Policies.string_policy = {</span>
<a href="#l22.75"></a><span id="l22.75" class="difflineplus">+    onBeforeUIStartup(manager, param) {</span>
<a href="#l22.76"></a><span id="l22.76" class="difflineplus">+      setAndLockPref(&quot;policies.test2.stringPref&quot;, param);</span>
<a href="#l22.77"></a><span id="l22.77" class="difflineplus">+    },</span>
<a href="#l22.78"></a><span id="l22.78" class="difflineplus">+  };</span>
<a href="#l22.79"></a><span id="l22.79" class="difflineplus">+</span>
<a href="#l22.80"></a><span id="l22.80" class="difflineplus">+  await setupPolicyEngineWithJson(</span>
<a href="#l22.81"></a><span id="l22.81" class="difflineplus">+    // policies.json</span>
<a href="#l22.82"></a><span id="l22.82" class="difflineplus">+    {</span>
<a href="#l22.83"></a><span id="l22.83" class="difflineplus">+      &quot;policies&quot;: {</span>
<a href="#l22.84"></a><span id="l22.84" class="difflineplus">+        &quot;bool_policy&quot;: true,</span>
<a href="#l22.85"></a><span id="l22.85" class="difflineplus">+        &quot;int_policy&quot;: 42,</span>
<a href="#l22.86"></a><span id="l22.86" class="difflineplus">+        &quot;string_policy&quot;: &quot;policies test 2&quot;,</span>
<a href="#l22.87"></a><span id="l22.87" class="difflineplus">+      },</span>
<a href="#l22.88"></a><span id="l22.88" class="difflineplus">+    },</span>
<a href="#l22.89"></a><span id="l22.89" class="difflineplus">+</span>
<a href="#l22.90"></a><span id="l22.90" class="difflineplus">+    // custom schema</span>
<a href="#l22.91"></a><span id="l22.91" class="difflineplus">+    {</span>
<a href="#l22.92"></a><span id="l22.92" class="difflineplus">+      properties: {</span>
<a href="#l22.93"></a><span id="l22.93" class="difflineplus">+        &quot;bool_policy&quot;: {</span>
<a href="#l22.94"></a><span id="l22.94" class="difflineplus">+          &quot;type&quot;: &quot;boolean&quot;,</span>
<a href="#l22.95"></a><span id="l22.95" class="difflineplus">+        },</span>
<a href="#l22.96"></a><span id="l22.96" class="difflineplus">+</span>
<a href="#l22.97"></a><span id="l22.97" class="difflineplus">+        &quot;int_policy&quot;: {</span>
<a href="#l22.98"></a><span id="l22.98" class="difflineplus">+          &quot;type&quot;: &quot;integer&quot;,</span>
<a href="#l22.99"></a><span id="l22.99" class="difflineplus">+        },</span>
<a href="#l22.100"></a><span id="l22.100" class="difflineplus">+</span>
<a href="#l22.101"></a><span id="l22.101" class="difflineplus">+        &quot;string_policy&quot;: {</span>
<a href="#l22.102"></a><span id="l22.102" class="difflineplus">+          &quot;type&quot;: &quot;string&quot;,</span>
<a href="#l22.103"></a><span id="l22.103" class="difflineplus">+        },</span>
<a href="#l22.104"></a><span id="l22.104" class="difflineplus">+      },</span>
<a href="#l22.105"></a><span id="l22.105" class="difflineplus">+    }</span>
<a href="#l22.106"></a><span id="l22.106" class="difflineplus">+  );</span>
<a href="#l22.107"></a><span id="l22.107" class="difflineplus">+</span>
<a href="#l22.108"></a><span id="l22.108" class="difflineplus">+  is(Services.policies.status, Ci.nsIEnterprisePolicies.ACTIVE, &quot;Engine is active&quot;);</span>
<a href="#l22.109"></a><span id="l22.109" class="difflineplus">+</span>
<a href="#l22.110"></a><span id="l22.110" class="difflineplus">+  // The expected values come from config_setAndLockPref.json</span>
<a href="#l22.111"></a><span id="l22.111" class="difflineplus">+  checkLockedPref(&quot;policies.test2.boolPref&quot;, true);</span>
<a href="#l22.112"></a><span id="l22.112" class="difflineplus">+  checkLockedPref(&quot;policies.test2.intPref&quot;, 42);</span>
<a href="#l22.113"></a><span id="l22.113" class="difflineplus">+  checkLockedPref(&quot;policies.test2.stringPref&quot;, &quot;policies test 2&quot;);</span>
<a href="#l22.114"></a><span id="l22.114" class="difflineplus">+</span>
<a href="#l22.115"></a><span id="l22.115" class="difflineplus">+  delete Policies.bool_policy;</span>
<a href="#l22.116"></a><span id="l22.116" class="difflineplus">+  delete Policies.int_policy;</span>
<a href="#l22.117"></a><span id="l22.117" class="difflineplus">+  delete Policies.string_policy;</span>
<a href="#l22.118"></a><span id="l22.118" class="difflineplus">+});</span>
<a href="#l22.119"></a><span id="l22.119" class="difflineplus">+</span>
<a href="#l22.120"></a><span id="l22.120" class="difflineplus">+add_task(async function test_pref_tracker() {</span>
<a href="#l22.121"></a><span id="l22.121" class="difflineplus">+  // Tests the test harness functionality that tracks usage of</span>
<a href="#l22.122"></a><span id="l22.122" class="difflineplus">+  // the setAndLockPref and setDefualtPref APIs.</span>
<a href="#l22.123"></a><span id="l22.123" class="difflineplus">+</span>
<a href="#l22.124"></a><span id="l22.124" class="difflineplus">+  let defaults = Services.prefs.getDefaultBranch(&quot;&quot;);</span>
<a href="#l22.125"></a><span id="l22.125" class="difflineplus">+</span>
<a href="#l22.126"></a><span id="l22.126" class="difflineplus">+  // Test prefs that had a default value and got changed to another</span>
<a href="#l22.127"></a><span id="l22.127" class="difflineplus">+  defaults.setIntPref(&quot;test1.pref1&quot;, 10);</span>
<a href="#l22.128"></a><span id="l22.128" class="difflineplus">+  defaults.setStringPref(&quot;test1.pref2&quot;, &quot;test&quot;);</span>
<a href="#l22.129"></a><span id="l22.129" class="difflineplus">+</span>
<a href="#l22.130"></a><span id="l22.130" class="difflineplus">+  setAndLockPref(&quot;test1.pref1&quot;, 20);</span>
<a href="#l22.131"></a><span id="l22.131" class="difflineplus">+  setDefaultPref(&quot;test1.pref2&quot;, &quot;NEW VALUE&quot;);</span>
<a href="#l22.132"></a><span id="l22.132" class="difflineplus">+  setAndLockPref(&quot;test1.pref3&quot;, &quot;NEW VALUE&quot;);</span>
<a href="#l22.133"></a><span id="l22.133" class="difflineplus">+  setDefaultPref(&quot;test1.pref4&quot;, 20);</span>
<a href="#l22.134"></a><span id="l22.134" class="difflineplus">+</span>
<a href="#l22.135"></a><span id="l22.135" class="difflineplus">+  PoliciesPrefTracker.restoreDefaultValues();</span>
<a href="#l22.136"></a><span id="l22.136" class="difflineplus">+</span>
<a href="#l22.137"></a><span id="l22.137" class="difflineplus">+  is(Services.prefs.getIntPref(&quot;test1.pref1&quot;), 10, &quot;Expected value for test1.pref1&quot;);</span>
<a href="#l22.138"></a><span id="l22.138" class="difflineplus">+  is(Services.prefs.getStringPref(&quot;test1.pref2&quot;), &quot;test&quot;, &quot;Expected value for test1.pref2&quot;);</span>
<a href="#l22.139"></a><span id="l22.139" class="difflineplus">+  is(Services.prefs.prefIsLocked(&quot;test1.pref1&quot;), false, &quot;test1.pref1 got unlocked&quot;);</span>
<a href="#l22.140"></a><span id="l22.140" class="difflineplus">+  is(Services.prefs.getStringPref(&quot;test1.pref3&quot;, undefined), undefined, &quot;test1.pref3 should have had its value unset&quot;);</span>
<a href="#l22.141"></a><span id="l22.141" class="difflineplus">+  is(Services.prefs.getIntPref(&quot;test1.pref4&quot;, -1), -1, &quot;test1.pref4 should have had its value unset&quot;);</span>
<a href="#l22.142"></a><span id="l22.142" class="difflineplus">+</span>
<a href="#l22.143"></a><span id="l22.143" class="difflineplus">+  // Test a pref that had a default value and a user value</span>
<a href="#l22.144"></a><span id="l22.144" class="difflineplus">+  defaults.setIntPref(&quot;test2.pref1&quot;, 10);</span>
<a href="#l22.145"></a><span id="l22.145" class="difflineplus">+  Services.prefs.setIntPref(&quot;test2.pref1&quot;, 20);</span>
<a href="#l22.146"></a><span id="l22.146" class="difflineplus">+</span>
<a href="#l22.147"></a><span id="l22.147" class="difflineplus">+  setAndLockPref(&quot;test2.pref1&quot;, 20);</span>
<a href="#l22.148"></a><span id="l22.148" class="difflineplus">+</span>
<a href="#l22.149"></a><span id="l22.149" class="difflineplus">+  PoliciesPrefTracker.restoreDefaultValues();</span>
<a href="#l22.150"></a><span id="l22.150" class="difflineplus">+</span>
<a href="#l22.151"></a><span id="l22.151" class="difflineplus">+  is(Services.prefs.getIntPref(&quot;test2.pref1&quot;), 20, &quot;Correct user value&quot;);</span>
<a href="#l22.152"></a><span id="l22.152" class="difflineplus">+  is(defaults.getIntPref(&quot;test2.pref1&quot;), 10, &quot;Correct default value&quot;);</span>
<a href="#l22.153"></a><span id="l22.153" class="difflineplus">+  is(Services.prefs.prefIsLocked(&quot;test2.pref1&quot;), false, &quot;felipe pref is not locked&quot;);</span>
<a href="#l22.154"></a><span id="l22.154" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">new file mode 100644</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineminus">--- /dev/null</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policies_sorted_alphabetically.js</span>
<a href="#l23.4"></a><span id="l23.4" class="difflineat">@@ -0,0 +1,30 @@</span>
<a href="#l23.5"></a><span id="l23.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l23.6"></a><span id="l23.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l23.7"></a><span id="l23.7" class="difflineplus">+</span>
<a href="#l23.8"></a><span id="l23.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l23.9"></a><span id="l23.9" class="difflineplus">+</span>
<a href="#l23.10"></a><span id="l23.10" class="difflineplus">+function checkArrayIsSorted(array, msg) {</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineplus">+  let sorted = true;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineplus">+  let sortedArray = array.slice().sort(function(a, b) { return a.localeCompare(b); });</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+  for (let i = 0; i &lt; array.length; i++) {</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+    if (array[i] != sortedArray[i]) {</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+      sorted = false;</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+      break;</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineplus">+    }</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineplus">+  }</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineplus">+  ok(sorted, msg);</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineplus">+}</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineplus">+add_task(async function test_policies_sorted() {</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineplus">+  let { schema } = ChromeUtils.import(&quot;resource:///modules/policies/schema.jsm&quot;);</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineplus">+  let { Policies } = ChromeUtils.import(&quot;resource:///modules/policies/Policies.jsm&quot;);</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineplus">+</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+  checkArrayIsSorted(Object.keys(schema.properties), &quot;policies-schema.json is alphabetically sorted.&quot;);</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+  checkArrayIsSorted(Object.keys(Policies), &quot;Policies.jsm is alphabetically sorted.&quot;);</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineplus">+});</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineplus">+</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineplus">+add_task(async function check_naming_conventions() {</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+  let { schema } = ChromeUtils.import(&quot;resource:///modules/policies/schema.jsm&quot;);</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineplus">+  is(Object.keys(schema.properties).some(key =&gt; key.includes(&quot;__&quot;)), false, &quot;Can't use __ in a policy name as it's used as a delimiter&quot;);</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">new file mode 100644</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineminus">--- /dev/null</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update.js</span>
<a href="#l24.4"></a><span id="l24.4" class="difflineat">@@ -0,0 +1,31 @@</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l24.6"></a><span id="l24.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l24.7"></a><span id="l24.7" class="difflineplus">+</span>
<a href="#l24.8"></a><span id="l24.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l24.9"></a><span id="l24.9" class="difflineplus">+ChromeUtils.defineModuleGetter(this, &quot;UpdateUtils&quot;,</span>
<a href="#l24.10"></a><span id="l24.10" class="difflineplus">+                               &quot;resource://gre/modules/UpdateUtils.jsm&quot;);</span>
<a href="#l24.11"></a><span id="l24.11" class="difflineplus">+var updateService = Cc[&quot;@mozilla.org/updates/update-service;1&quot;].</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+                    getService(Ci.nsIApplicationUpdateService);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+// This test is intended to ensure that nsIUpdateService::canCheckForUpdates</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+// is true before the &quot;DisableAppUpdate&quot; policy is applied. Testing that</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+// nsIUpdateService::canCheckForUpdates is false after the &quot;DisableAppUpdate&quot;</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+// policy is applied needs to occur in a different test since the policy does</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineplus">+// not properly take effect unless it is applied during application startup.</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineplus">+add_task(async function test_updates_pre_policy() {</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineplus">+  // Turn off automatic update before we set app.update.disabledForTesting to</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineplus">+  // false so that we don't cause an actual update.</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineplus">+  let originalUpdateAutoValue = await UpdateUtils.getAppUpdateAutoEnabled();</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineplus">+  await UpdateUtils.setAppUpdateAutoEnabled(false);</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineplus">+  registerCleanupFunction(async () =&gt; {</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineplus">+    await UpdateUtils.setAppUpdateAutoEnabled(originalUpdateAutoValue);</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineplus">+  });</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineplus">+</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineplus">+  await SpecialPowers.pushPrefEnv({&quot;set&quot;: [[&quot;app.update.disabledForTesting&quot;, false]]});</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineplus">+</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineplus">+  is(Services.policies.isAllowed(&quot;appUpdate&quot;), true,</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineplus">+     &quot;Since no policies have been set, appUpdate should be allowed by default&quot;);</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineplus">+  is(updateService.canCheckForUpdates, true,</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineplus">+     &quot;Should be able to check for updates before any policies are in effect.&quot;);</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">new file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineminus">--- /dev/null</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_app_update_URL.js</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineat">@@ -0,0 +1,19 @@</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineplus">+</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineplus">+</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+add_task(async function test_app_update_URL() {</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+      &quot;AppUpdateURL&quot;: &quot;https://www.example.com/&quot;,</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+    },</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+  });</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+  is(Services.policies.status, Ci.nsIEnterprisePolicies.ACTIVE, &quot;Engine is active&quot;);</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineplus">+</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineplus">+  // The app.update.url preference is read from the default preferences.</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineplus">+  let expected = Services.prefs.getDefaultBranch(null).getCharPref(&quot;app.update.url&quot;, undefined);</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineplus">+</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineplus">+  is(&quot;https://www.example.com/&quot;, expected, &quot;Correct app update URL&quot;);</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">new file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineminus">--- /dev/null</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_disable_masterpassword.js</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineat">@@ -0,0 +1,75 @@</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l26.6"></a><span id="l26.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l26.7"></a><span id="l26.7" class="difflineplus">+</span>
<a href="#l26.8"></a><span id="l26.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineplus">+</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineplus">+const MASTER_PASSWORD = &quot;omgsecret!&quot;;</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineplus">+const mpToken = Cc[&quot;@mozilla.org/security/pk11tokendb;1&quot;]</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+                  .getService(Ci.nsIPK11TokenDB)</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+                  .getInternalKeyToken();</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+async function checkDeviceManager({buttonIsDisabled}) {</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineplus">+  let deviceManagerWindow = window.openDialog(&quot;chrome://pippki/content/device_manager.xul&quot;, &quot;&quot;, &quot;&quot;);</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineplus">+  await BrowserTestUtils.waitForEvent(deviceManagerWindow, &quot;load&quot;);</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineplus">+</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineplus">+  let tree = deviceManagerWindow.document.getElementById(&quot;device_tree&quot;);</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineplus">+  ok(tree, &quot;The device tree exists&quot;);</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineplus">+</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineplus">+  // Find and select the item related to the internal key token</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineplus">+  for (let i = 0; i &lt; tree.view.rowCount; i++) {</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineplus">+    tree.view.selection.select(i);</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineplus">+    try {</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineplus">+      let selected_token = deviceManagerWindow.selected_slot.getToken();</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineplus">+      if (selected_token.isInternalKeyToken) {</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+        break;</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+      }</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineplus">+    } catch (e) {}</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+  }</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineplus">+</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineplus">+  // Check to see if the button was updated correctly</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineplus">+  let changePwButton = deviceManagerWindow.document.getElementById(&quot;change_pw_button&quot;);</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineplus">+  is(changePwButton.getAttribute(&quot;disabled&quot;) == &quot;true&quot;, buttonIsDisabled,</span>
<a href="#l26.37"></a><span id="l26.37" class="difflineplus">+     &quot;Change Password button is in the correct state: &quot; + buttonIsDisabled);</span>
<a href="#l26.38"></a><span id="l26.38" class="difflineplus">+</span>
<a href="#l26.39"></a><span id="l26.39" class="difflineplus">+  await BrowserTestUtils.closeWindow(deviceManagerWindow);</span>
<a href="#l26.40"></a><span id="l26.40" class="difflineplus">+}</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineplus">+</span>
<a href="#l26.42"></a><span id="l26.42" class="difflineplus">+async function checkAboutPreferences({checkboxIsDisabled}) {</span>
<a href="#l26.43"></a><span id="l26.43" class="difflineplus">+  await BrowserTestUtils.withNewTab(&quot;about:preferences#privacy&quot;, async browser =&gt; {</span>
<a href="#l26.44"></a><span id="l26.44" class="difflineplus">+  is(browser.contentDocument.getElementById(&quot;useMasterPassword&quot;).disabled, checkboxIsDisabled,</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineplus">+    &quot;Master Password checkbox is in the correct state: &quot; + checkboxIsDisabled);</span>
<a href="#l26.46"></a><span id="l26.46" class="difflineplus">+});</span>
<a href="#l26.47"></a><span id="l26.47" class="difflineplus">+}</span>
<a href="#l26.48"></a><span id="l26.48" class="difflineplus">+</span>
<a href="#l26.49"></a><span id="l26.49" class="difflineplus">+add_task(async function test_policy_disable_masterpassword() {</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineplus">+  ok(!mpToken.hasPassword, &quot;Starting the test with no password&quot;);</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineplus">+</span>
<a href="#l26.52"></a><span id="l26.52" class="difflineplus">+  // No password and no policy: access to setting a master password</span>
<a href="#l26.53"></a><span id="l26.53" class="difflineplus">+  // should be enabled.</span>
<a href="#l26.54"></a><span id="l26.54" class="difflineplus">+  await checkDeviceManager({buttonIsDisabled: false});</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineplus">+  await checkAboutPreferences({checkboxIsDisabled: false});</span>
<a href="#l26.56"></a><span id="l26.56" class="difflineplus">+</span>
<a href="#l26.57"></a><span id="l26.57" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l26.58"></a><span id="l26.58" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l26.59"></a><span id="l26.59" class="difflineplus">+      &quot;DisableMasterPasswordCreation&quot;: true,</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineplus">+    },</span>
<a href="#l26.61"></a><span id="l26.61" class="difflineplus">+  });</span>
<a href="#l26.62"></a><span id="l26.62" class="difflineplus">+</span>
<a href="#l26.63"></a><span id="l26.63" class="difflineplus">+  // With the `DisableMasterPasswordCreation: true` policy active, the</span>
<a href="#l26.64"></a><span id="l26.64" class="difflineplus">+  // UI entry points for creating a Master Password should be disabled.</span>
<a href="#l26.65"></a><span id="l26.65" class="difflineplus">+  await checkDeviceManager({buttonIsDisabled: true});</span>
<a href="#l26.66"></a><span id="l26.66" class="difflineplus">+  await checkAboutPreferences({checkboxIsDisabled: true});</span>
<a href="#l26.67"></a><span id="l26.67" class="difflineplus">+</span>
<a href="#l26.68"></a><span id="l26.68" class="difflineplus">+  mpToken.changePassword(&quot;&quot;, MASTER_PASSWORD);</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineplus">+  ok(mpToken.hasPassword, &quot;Master password was set&quot;);</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineplus">+</span>
<a href="#l26.71"></a><span id="l26.71" class="difflineplus">+  // If a Master Password is already set, there's no point in disabling</span>
<a href="#l26.72"></a><span id="l26.72" class="difflineplus">+  // the</span>
<a href="#l26.73"></a><span id="l26.73" class="difflineplus">+  await checkDeviceManager({buttonIsDisabled: false});</span>
<a href="#l26.74"></a><span id="l26.74" class="difflineplus">+  await checkAboutPreferences({checkboxIsDisabled: false});</span>
<a href="#l26.75"></a><span id="l26.75" class="difflineplus">+</span>
<a href="#l26.76"></a><span id="l26.76" class="difflineplus">+  // Clean up</span>
<a href="#l26.77"></a><span id="l26.77" class="difflineplus">+  mpToken.changePassword(MASTER_PASSWORD, &quot;&quot;);</span>
<a href="#l26.78"></a><span id="l26.78" class="difflineplus">+  ok(!mpToken.hasPassword, &quot;Master password was cleaned up&quot;);</span>
<a href="#l26.79"></a><span id="l26.79" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">new file mode 100644</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineminus">--- /dev/null</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_extensionsettings.js</span>
<a href="#l27.4"></a><span id="l27.4" class="difflineat">@@ -0,0 +1,23 @@</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l27.6"></a><span id="l27.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l27.7"></a><span id="l27.7" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l27.8"></a><span id="l27.8" class="difflineplus">+</span>
<a href="#l27.9"></a><span id="l27.9" class="difflineplus">+add_task(async function test_extensionsettings() {</span>
<a href="#l27.10"></a><span id="l27.10" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l27.11"></a><span id="l27.11" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+      &quot;ExtensionSettings&quot;: {</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+        &quot;extension1@mozilla.com&quot;: {</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineplus">+          &quot;blocked_install_message&quot;: &quot;Extension1 error message.&quot;,</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineplus">+        },</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineplus">+        &quot;*&quot;: {</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+          &quot;blocked_install_message&quot;: &quot;Generic error message.&quot;,</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+        },</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineplus">+      },</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineplus">+    },</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+  });</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineplus">+</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineplus">+  let extensionSettings =  Services.policies.getExtensionSettings(&quot;extension1@mozilla.com&quot;);</span>
<a href="#l27.24"></a><span id="l27.24" class="difflineplus">+  is(extensionSettings.blocked_install_message, &quot;Extension1 error message.&quot;, &quot;Should have extension specific message.&quot;);</span>
<a href="#l27.25"></a><span id="l27.25" class="difflineplus">+  extensionSettings =  Services.policies.getExtensionSettings(&quot;extension2@mozilla.com&quot;);</span>
<a href="#l27.26"></a><span id="l27.26" class="difflineplus">+  is(extensionSettings.blocked_install_message, &quot;Generic error message.&quot;, &quot;Should have generic message.&quot;);</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">new file mode 100644</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineminus">--- /dev/null</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_locale.js</span>
<a href="#l28.4"></a><span id="l28.4" class="difflineat">@@ -0,0 +1,47 @@</span>
<a href="#l28.5"></a><span id="l28.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l28.6"></a><span id="l28.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l28.7"></a><span id="l28.7" class="difflineplus">+</span>
<a href="#l28.8"></a><span id="l28.8" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l28.9"></a><span id="l28.9" class="difflineplus">+</span>
<a href="#l28.10"></a><span id="l28.10" class="difflineplus">+const REQ_LOC_CHANGE_EVENT = &quot;intl:requested-locales-changed&quot;;</span>
<a href="#l28.11"></a><span id="l28.11" class="difflineplus">+</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+function promiseLocaleChanged(requestedLocale) {</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  return new Promise(resolve =&gt; {</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineplus">+    let localeObserver = {</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineplus">+      observe(aSubject, aTopic, aData) {</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineplus">+        switch (aTopic) {</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineplus">+          case REQ_LOC_CHANGE_EVENT:</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineplus">+            let reqLocs = Services.locale.requestedLocales;</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineplus">+            is(reqLocs[0], requestedLocale);</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineplus">+            Services.obs.removeObserver(localeObserver, REQ_LOC_CHANGE_EVENT);</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineplus">+            resolve();</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+        }</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineplus">+      },</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineplus">+    };</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+    Services.obs.addObserver(localeObserver, REQ_LOC_CHANGE_EVENT);</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+  });</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineplus">+}</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+</span>
<a href="#l28.29"></a><span id="l28.29" class="difflineplus">+add_task(async function test_requested_locale_array() {</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineplus">+  let originalLocales = Services.locale.requestedLocales;</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineplus">+  let localePromise = promiseLocaleChanged(&quot;de&quot;);</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+      &quot;RequestedLocales&quot;: [&quot;de&quot;],</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineplus">+    },</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineplus">+  });</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineplus">+  await localePromise;</span>
<a href="#l28.38"></a><span id="l28.38" class="difflineplus">+  Services.locale.requestedLocales = originalLocales;</span>
<a href="#l28.39"></a><span id="l28.39" class="difflineplus">+});</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineplus">+</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineplus">+add_task(async function test_requested_locale_string() {</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineplus">+  let originalLocales = Services.locale.requestedLocales;</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineplus">+  let localePromise = promiseLocaleChanged(&quot;fr&quot;);</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineplus">+      &quot;RequestedLocales&quot;: &quot;fr&quot;,</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineplus">+    },</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineplus">+  });</span>
<a href="#l28.49"></a><span id="l28.49" class="difflineplus">+  await localePromise;</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineplus">+  Services.locale.requestedLocales = originalLocales;</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">new file mode 100644</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineminus">--- /dev/null</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_preferences.js</span>
<a href="#l29.4"></a><span id="l29.4" class="difflineat">@@ -0,0 +1,22 @@</span>
<a href="#l29.5"></a><span id="l29.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l29.6"></a><span id="l29.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l29.7"></a><span id="l29.7" class="difflineplus">+</span>
<a href="#l29.8"></a><span id="l29.8" class="difflineplus">+/* This test is not intended to test all preferences that</span>
<a href="#l29.9"></a><span id="l29.9" class="difflineplus">+   can be set with Preferences, just a subset to verify</span>
<a href="#l29.10"></a><span id="l29.10" class="difflineplus">+   the overall functionality */</span>
<a href="#l29.11"></a><span id="l29.11" class="difflineplus">+</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineplus">+add_task(async function test_policy_preferences() {</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l29.16"></a><span id="l29.16" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l29.17"></a><span id="l29.17" class="difflineplus">+      &quot;Preferences&quot;: {</span>
<a href="#l29.18"></a><span id="l29.18" class="difflineplus">+        &quot;network.IDN_show_punycode&quot;: true,</span>
<a href="#l29.19"></a><span id="l29.19" class="difflineplus">+        &quot;app.update.log&quot;: true,</span>
<a href="#l29.20"></a><span id="l29.20" class="difflineplus">+      },</span>
<a href="#l29.21"></a><span id="l29.21" class="difflineplus">+    },</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineplus">+  });</span>
<a href="#l29.23"></a><span id="l29.23" class="difflineplus">+</span>
<a href="#l29.24"></a><span id="l29.24" class="difflineplus">+  checkLockedPref(&quot;network.IDN_show_punycode&quot;, true);</span>
<a href="#l29.25"></a><span id="l29.25" class="difflineplus">+  is(Services.prefs.getBoolPref(&quot;app.update.log&quot;), false, &quot;Disallowed pref was not been changed&quot;);</span>
<a href="#l29.26"></a><span id="l29.26" class="difflineplus">+ });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">new file mode 100644</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineminus">--- /dev/null</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/browser_policy_proxy.js</span>
<a href="#l30.4"></a><span id="l30.4" class="difflineat">@@ -0,0 +1,107 @@</span>
<a href="#l30.5"></a><span id="l30.5" class="difflineplus">+/* Any copyright is dedicated to the Public Domain.</span>
<a href="#l30.6"></a><span id="l30.6" class="difflineplus">+ * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l30.7"></a><span id="l30.7" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l30.8"></a><span id="l30.8" class="difflineplus">+</span>
<a href="#l30.9"></a><span id="l30.9" class="difflineplus">+add_task(async function test_proxy_modes_and_autoconfig() {</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineplus">+  // Directly test the proxy Mode and AutoconfigURL parameters through</span>
<a href="#l30.11"></a><span id="l30.11" class="difflineplus">+  // the API instead of the policy engine, because the test harness</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineplus">+  // uses these prefs, and changing them interfere with the harness.</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+  // Checks that every Mode value translates correctly to the expected pref value</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+  let { ProxyPolicies, PROXY_TYPES_MAP } = ChromeUtils.import(&quot;resource:///modules/policies/ProxyPolicies.jsm&quot;, null);</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineplus">+</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+  for (let [mode, expectedValue] of PROXY_TYPES_MAP) {</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineplus">+    ProxyPolicies.configureProxySettings({Mode: mode}, (_, value) =&gt; {</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineplus">+      is(value, expectedValue, &quot;Correct proxy mode&quot;);</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineplus">+    });</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineplus">+  }</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineplus">+</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineplus">+  let autoconfigURL = new URL(&quot;data:text/plain,test&quot;);</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineplus">+  ProxyPolicies.configureProxySettings({AutoConfigURL: autoconfigURL}, (_, value) =&gt; {</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineplus">+    is(value, autoconfigURL.href, &quot;AutoconfigURL correctly set&quot;);</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineplus">+  });</span>
<a href="#l30.27"></a><span id="l30.27" class="difflineplus">+});</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineplus">+</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineplus">+add_task(async function test_proxy_boolean_settings() {</span>
<a href="#l30.30"></a><span id="l30.30" class="difflineplus">+  // Tests that both false and true values are correctly set and locked</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineplus">+      &quot;Proxy&quot;: {</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineplus">+        &quot;UseProxyForDNS&quot;: false,</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineplus">+        &quot;AutoLogin&quot;: false,</span>
<a href="#l30.36"></a><span id="l30.36" class="difflineplus">+      },</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineplus">+    },</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineplus">+  });</span>
<a href="#l30.39"></a><span id="l30.39" class="difflineplus">+</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineplus">+  checkUnlockedPref(&quot;network.proxy.socks_remote_dns&quot;, false);</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineplus">+  checkUnlockedPref(&quot;signon.autologin.proxy&quot;, false);</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineplus">+</span>
<a href="#l30.43"></a><span id="l30.43" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l30.44"></a><span id="l30.44" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l30.45"></a><span id="l30.45" class="difflineplus">+      &quot;Proxy&quot;: {</span>
<a href="#l30.46"></a><span id="l30.46" class="difflineplus">+        &quot;UseProxyForDNS&quot;: true,</span>
<a href="#l30.47"></a><span id="l30.47" class="difflineplus">+        &quot;AutoLogin&quot;: true,</span>
<a href="#l30.48"></a><span id="l30.48" class="difflineplus">+      },</span>
<a href="#l30.49"></a><span id="l30.49" class="difflineplus">+    },</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineplus">+  });</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineplus">+</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineplus">+  checkUnlockedPref(&quot;network.proxy.socks_remote_dns&quot;, true);</span>
<a href="#l30.53"></a><span id="l30.53" class="difflineplus">+  checkUnlockedPref(&quot;signon.autologin.proxy&quot;, true);</span>
<a href="#l30.54"></a><span id="l30.54" class="difflineplus">+});</span>
<a href="#l30.55"></a><span id="l30.55" class="difflineplus">+</span>
<a href="#l30.56"></a><span id="l30.56" class="difflineplus">+add_task(async function test_proxy_socks_and_passthrough() {</span>
<a href="#l30.57"></a><span id="l30.57" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l30.58"></a><span id="l30.58" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l30.59"></a><span id="l30.59" class="difflineplus">+      &quot;Proxy&quot;: {</span>
<a href="#l30.60"></a><span id="l30.60" class="difflineplus">+        &quot;SOCKSVersion&quot;: 4,</span>
<a href="#l30.61"></a><span id="l30.61" class="difflineplus">+        &quot;Passthrough&quot;: &quot;a, b, c&quot;,</span>
<a href="#l30.62"></a><span id="l30.62" class="difflineplus">+      },</span>
<a href="#l30.63"></a><span id="l30.63" class="difflineplus">+    },</span>
<a href="#l30.64"></a><span id="l30.64" class="difflineplus">+  });</span>
<a href="#l30.65"></a><span id="l30.65" class="difflineplus">+</span>
<a href="#l30.66"></a><span id="l30.66" class="difflineplus">+  checkUnlockedPref(&quot;network.proxy.socks_version&quot;, 4);</span>
<a href="#l30.67"></a><span id="l30.67" class="difflineplus">+  checkUnlockedPref(&quot;network.proxy.no_proxies_on&quot;, &quot;a, b, c&quot;);</span>
<a href="#l30.68"></a><span id="l30.68" class="difflineplus">+});</span>
<a href="#l30.69"></a><span id="l30.69" class="difflineplus">+</span>
<a href="#l30.70"></a><span id="l30.70" class="difflineplus">+add_task(async function test_proxy_addresses() {</span>
<a href="#l30.71"></a><span id="l30.71" class="difflineplus">+  function checkProxyPref(proxytype, address, port) {</span>
<a href="#l30.72"></a><span id="l30.72" class="difflineplus">+    checkUnlockedPref(`network.proxy.${proxytype}`, address);</span>
<a href="#l30.73"></a><span id="l30.73" class="difflineplus">+    checkUnlockedPref(`network.proxy.${proxytype}_port`, port);</span>
<a href="#l30.74"></a><span id="l30.74" class="difflineplus">+  }</span>
<a href="#l30.75"></a><span id="l30.75" class="difflineplus">+</span>
<a href="#l30.76"></a><span id="l30.76" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l30.77"></a><span id="l30.77" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l30.78"></a><span id="l30.78" class="difflineplus">+      &quot;Proxy&quot;: {</span>
<a href="#l30.79"></a><span id="l30.79" class="difflineplus">+        &quot;HTTPProxy&quot;: &quot;http.proxy.example.com:10&quot;,</span>
<a href="#l30.80"></a><span id="l30.80" class="difflineplus">+        &quot;FTPProxy&quot;: &quot;ftp.proxy.example.com:20&quot;,</span>
<a href="#l30.81"></a><span id="l30.81" class="difflineplus">+        &quot;SSLProxy&quot;: &quot;ssl.proxy.example.com:30&quot;,</span>
<a href="#l30.82"></a><span id="l30.82" class="difflineplus">+        &quot;SOCKSProxy&quot;: &quot;socks.proxy.example.com:40&quot;,</span>
<a href="#l30.83"></a><span id="l30.83" class="difflineplus">+      },</span>
<a href="#l30.84"></a><span id="l30.84" class="difflineplus">+    },</span>
<a href="#l30.85"></a><span id="l30.85" class="difflineplus">+  });</span>
<a href="#l30.86"></a><span id="l30.86" class="difflineplus">+</span>
<a href="#l30.87"></a><span id="l30.87" class="difflineplus">+  checkProxyPref(&quot;http&quot;, &quot;http.proxy.example.com&quot;, 10);</span>
<a href="#l30.88"></a><span id="l30.88" class="difflineplus">+  checkProxyPref(&quot;ftp&quot;, &quot;ftp.proxy.example.com&quot;, 20);</span>
<a href="#l30.89"></a><span id="l30.89" class="difflineplus">+  checkProxyPref(&quot;ssl&quot;, &quot;ssl.proxy.example.com&quot;, 30);</span>
<a href="#l30.90"></a><span id="l30.90" class="difflineplus">+  checkProxyPref(&quot;socks&quot;, &quot;socks.proxy.example.com&quot;, 40);</span>
<a href="#l30.91"></a><span id="l30.91" class="difflineplus">+</span>
<a href="#l30.92"></a><span id="l30.92" class="difflineplus">+  // Do the same, but now use the UseHTTPProxyForAllProtocols option</span>
<a href="#l30.93"></a><span id="l30.93" class="difflineplus">+  // and check that it takes effect.</span>
<a href="#l30.94"></a><span id="l30.94" class="difflineplus">+  await setupPolicyEngineWithJson({</span>
<a href="#l30.95"></a><span id="l30.95" class="difflineplus">+    &quot;policies&quot;: {</span>
<a href="#l30.96"></a><span id="l30.96" class="difflineplus">+      &quot;Proxy&quot;: {</span>
<a href="#l30.97"></a><span id="l30.97" class="difflineplus">+        &quot;HTTPProxy&quot;: &quot;http.proxy.example.com:10&quot;,</span>
<a href="#l30.98"></a><span id="l30.98" class="difflineplus">+        &quot;FTPProxy&quot;: &quot;ftp.proxy.example.com:20&quot;,</span>
<a href="#l30.99"></a><span id="l30.99" class="difflineplus">+        &quot;SSLProxy&quot;: &quot;ssl.proxy.example.com:30&quot;,</span>
<a href="#l30.100"></a><span id="l30.100" class="difflineplus">+        &quot;SOCKSProxy&quot;: &quot;socks.proxy.example.com:40&quot;,</span>
<a href="#l30.101"></a><span id="l30.101" class="difflineplus">+        &quot;UseHTTPProxyForAllProtocols&quot;: true,</span>
<a href="#l30.102"></a><span id="l30.102" class="difflineplus">+      },</span>
<a href="#l30.103"></a><span id="l30.103" class="difflineplus">+    },</span>
<a href="#l30.104"></a><span id="l30.104" class="difflineplus">+  });</span>
<a href="#l30.105"></a><span id="l30.105" class="difflineplus">+</span>
<a href="#l30.106"></a><span id="l30.106" class="difflineplus">+</span>
<a href="#l30.107"></a><span id="l30.107" class="difflineplus">+  checkProxyPref(&quot;http&quot;, &quot;http.proxy.example.com&quot;, 10);</span>
<a href="#l30.108"></a><span id="l30.108" class="difflineplus">+  checkProxyPref(&quot;ftp&quot;, &quot;http.proxy.example.com&quot;, 10);</span>
<a href="#l30.109"></a><span id="l30.109" class="difflineplus">+  checkProxyPref(&quot;ssl&quot;, &quot;http.proxy.example.com&quot;, 10);</span>
<a href="#l30.110"></a><span id="l30.110" class="difflineplus">+  checkProxyPref(&quot;socks&quot;, &quot;http.proxy.example.com&quot;, 10);</span>
<a href="#l30.111"></a><span id="l30.111" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">new file mode 100644</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineminus">--- /dev/null</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/browser/head.js</span>
<a href="#l31.4"></a><span id="l31.4" class="difflineat">@@ -0,0 +1,64 @@</span>
<a href="#l31.5"></a><span id="l31.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l31.6"></a><span id="l31.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l31.7"></a><span id="l31.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l31.8"></a><span id="l31.8" class="difflineplus">+</span>
<a href="#l31.9"></a><span id="l31.9" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l31.10"></a><span id="l31.10" class="difflineplus">+</span>
<a href="#l31.11"></a><span id="l31.11" class="difflineplus">+const {</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineplus">+  EnterprisePolicyTesting,</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  PoliciesPrefTracker,</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/EnterprisePolicyTesting.jsm&quot;, null);</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineplus">+const {TestUtils} = ChromeUtils.import(&quot;resource://testing-common/TestUtils.jsm&quot;, null);</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineplus">+</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineplus">+PoliciesPrefTracker.start();</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineplus">+</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineplus">+async function setupPolicyEngineWithJson(json, customSchema) {</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineplus">+  PoliciesPrefTracker.restoreDefaultValues();</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineplus">+  if (typeof(json) != &quot;object&quot;) {</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineplus">+    let filePath = getTestFilePath(json ? json : &quot;non-existing-file.json&quot;);</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineplus">+    return EnterprisePolicyTesting.setupPolicyEngineWithJson(filePath, customSchema);</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineplus">+  }</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineplus">+  return EnterprisePolicyTesting.setupPolicyEngineWithJson(json, customSchema);</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineplus">+}</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineplus">+</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineplus">+function checkLockedPref(prefName, prefValue) {</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineplus">+  EnterprisePolicyTesting.checkPolicyPref(prefName, prefValue, true);</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineplus">+}</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineplus">+</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+function checkUnlockedPref(prefName, prefValue) {</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineplus">+  EnterprisePolicyTesting.checkPolicyPref(prefName, prefValue, false);</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineplus">+}</span>
<a href="#l31.35"></a><span id="l31.35" class="difflineplus">+</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineplus">+// Checks that a page was blocked by seeing if it was replaced with about:neterror</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineplus">+async function checkBlockedPage(url, expectedBlocked) {</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineplus">+  await BrowserTestUtils.withNewTab({</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineplus">+    gBrowser,</span>
<a href="#l31.40"></a><span id="l31.40" class="difflineplus">+    url,</span>
<a href="#l31.41"></a><span id="l31.41" class="difflineplus">+    waitForLoad: false,</span>
<a href="#l31.42"></a><span id="l31.42" class="difflineplus">+    waitForStateStop: true,</span>
<a href="#l31.43"></a><span id="l31.43" class="difflineplus">+  }, async function() {</span>
<a href="#l31.44"></a><span id="l31.44" class="difflineplus">+    await BrowserTestUtils.waitForCondition(async function() {</span>
<a href="#l31.45"></a><span id="l31.45" class="difflineplus">+      let blocked = await ContentTask.spawn(gBrowser.selectedBrowser, null, async function() {</span>
<a href="#l31.46"></a><span id="l31.46" class="difflineplus">+        return content.document.documentURI.startsWith(&quot;about:neterror&quot;);</span>
<a href="#l31.47"></a><span id="l31.47" class="difflineplus">+      });</span>
<a href="#l31.48"></a><span id="l31.48" class="difflineplus">+      return blocked == expectedBlocked;</span>
<a href="#l31.49"></a><span id="l31.49" class="difflineplus">+    }, `Page ${url} block was correct (expected=${expectedBlocked}).`);</span>
<a href="#l31.50"></a><span id="l31.50" class="difflineplus">+  });</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineplus">+}</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineplus">+</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineplus">+add_task(async function policies_headjs_startWithCleanSlate() {</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineplus">+  if (Services.policies.status != Ci.nsIEnterprisePolicies.INACTIVE) {</span>
<a href="#l31.55"></a><span id="l31.55" class="difflineplus">+    await setupPolicyEngineWithJson(&quot;&quot;);</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineplus">+  }</span>
<a href="#l31.57"></a><span id="l31.57" class="difflineplus">+  is(Services.policies.status, Ci.nsIEnterprisePolicies.INACTIVE, &quot;Engine is inactive at the start of the test&quot;);</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineplus">+});</span>
<a href="#l31.59"></a><span id="l31.59" class="difflineplus">+</span>
<a href="#l31.60"></a><span id="l31.60" class="difflineplus">+registerCleanupFunction(async function policies_headjs_finishWithCleanSlate() {</span>
<a href="#l31.61"></a><span id="l31.61" class="difflineplus">+  if (Services.policies.status != Ci.nsIEnterprisePolicies.INACTIVE) {</span>
<a href="#l31.62"></a><span id="l31.62" class="difflineplus">+    await setupPolicyEngineWithJson(&quot;&quot;);</span>
<a href="#l31.63"></a><span id="l31.63" class="difflineplus">+  }</span>
<a href="#l31.64"></a><span id="l31.64" class="difflineplus">+  is(Services.policies.status, Ci.nsIEnterprisePolicies.INACTIVE, &quot;Engine is inactive at the end of the test&quot;);</span>
<a href="#l31.65"></a><span id="l31.65" class="difflineplus">+</span>
<a href="#l31.66"></a><span id="l31.66" class="difflineplus">+  EnterprisePolicyTesting.resetRunOnceState();</span>
<a href="#l31.67"></a><span id="l31.67" class="difflineplus">+  PoliciesPrefTracker.stop();</span>
<a href="#l31.68"></a><span id="l31.68" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">new file mode 100644</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineminus">--- /dev/null</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineplus">+++ b/mail/components/enterprisepolicies/tests/moz.build</span>
<a href="#l32.4"></a><span id="l32.4" class="difflineat">@@ -0,0 +1,9 @@</span>
<a href="#l32.5"></a><span id="l32.5" class="difflineplus">+# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-</span>
<a href="#l32.6"></a><span id="l32.6" class="difflineplus">+# vim: set filetype=python:</span>
<a href="#l32.7"></a><span id="l32.7" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l32.8"></a><span id="l32.8" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l32.9"></a><span id="l32.9" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l32.10"></a><span id="l32.10" class="difflineplus">+</span>
<a href="#l32.11"></a><span id="l32.11" class="difflineplus">+BROWSER_CHROME_MANIFESTS += [</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineplus">+    'browser/browser.ini',</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/components/mailComponents.manifest</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/components/mailComponents.manifest</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l33.4"></a><span id="l33.4"> component {8cc51368-6aa0-43e8-b762-bde9b9fd828c} aboutRedirector.js</span>
<a href="#l33.5"></a><span id="l33.5"> # Each addition here should be coupled with a corresponding addition in</span>
<a href="#l33.6"></a><span id="l33.6"> # aboutRedirector.js.</span>
<a href="#l33.7"></a><span id="l33.7"> contract @mozilla.org/network/protocol/about;1?what=newserror {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l33.8"></a><span id="l33.8"> contract @mozilla.org/network/protocol/about;1?what=rights {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l33.9"></a><span id="l33.9"> contract @mozilla.org/network/protocol/about;1?what=support {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l33.10"></a><span id="l33.10"> contract @mozilla.org/network/protocol/about;1?what=preferences {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l33.11"></a><span id="l33.11"> contract @mozilla.org/network/protocol/about;1?what=downloads {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineplus">+contract @mozilla.org/network/protocol/about;1?what=policies {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l33.13"></a><span id="l33.13"> </span>
<a href="#l33.14"></a><span id="l33.14"> component {44346520-c5d2-44e5-a1ec-034e04d7fac4} nsMailDefaultHandler.js</span>
<a href="#l33.15"></a><span id="l33.15"> contract @mozilla.org/mail/clh;1 {44346520-c5d2-44e5-a1ec-034e04d7fac4}</span>
<a href="#l33.16"></a><span id="l33.16"> category command-line-handler x-default @mozilla.org/mail/clh;1</span>
<a href="#l33.17"></a><span id="l33.17"> category command-line-validator b-default @mozilla.org/mail/clh;1</span>
<a href="#l33.18"></a><span id="l33.18"> </span>
<a href="#l33.19"></a><span id="l33.19"> component {1c73f03a-b817-4640-b984-18c3478a9ae3} mailContentHandler.js</span>
<a href="#l33.20"></a><span id="l33.20"> contract @mozilla.org/uriloader/content-handler;1?type=text/html {1c73f03a-b817-4640-b984-18c3478a9ae3}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/components/moz.build</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/components/moz.build</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -1,32 +1,33 @@</span>
<a href="#l34.4"></a><span id="l34.4"> # vim: set filetype=python:</span>
<a href="#l34.5"></a><span id="l34.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l34.6"></a><span id="l34.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l34.7"></a><span id="l34.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l34.8"></a><span id="l34.8"> </span>
<a href="#l34.9"></a><span id="l34.9"> # Only Mac and Windows have search integration components, but we include at</span>
<a href="#l34.10"></a><span id="l34.10"> # least one module from search/ on all platforms</span>
<a href="#l34.11"></a><span id="l34.11"> DIRS += [</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineplus">+    'about-support',</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+    'accountcreation',</span>
<a href="#l34.14"></a><span id="l34.14" class="difflineplus">+    'activity',</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineplus">+    'addrbook',</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineplus">+    'cloudfile',</span>
<a href="#l34.17"></a><span id="l34.17">     'compose',</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineminus">-    'cloudfile',</span>
<a href="#l34.19"></a><span id="l34.19">     'devtools',</span>
<a href="#l34.20"></a><span id="l34.20">     'downloads',</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineplus">+    'enterprisepolicies',</span>
<a href="#l34.22"></a><span id="l34.22">     'extensions',</span>
<a href="#l34.23"></a><span id="l34.23" class="difflineplus">+    'im',</span>
<a href="#l34.24"></a><span id="l34.24" class="difflineplus">+    'migration',</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineplus">+    'newmailaccount',</span>
<a href="#l34.26"></a><span id="l34.26">     'preferences',</span>
<a href="#l34.27"></a><span id="l34.27" class="difflineminus">-    'addrbook',</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineminus">-    'migration',</span>
<a href="#l34.29"></a><span id="l34.29" class="difflineminus">-    'activity',</span>
<a href="#l34.30"></a><span id="l34.30">     'search',</span>
<a href="#l34.31"></a><span id="l34.31">     'shell',</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineminus">-    'about-support',</span>
<a href="#l34.33"></a><span id="l34.33" class="difflineminus">-    'accountcreation',</span>
<a href="#l34.34"></a><span id="l34.34">     'wintaskbar',</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-    'newmailaccount',</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineminus">-    'im',</span>
<a href="#l34.37"></a><span id="l34.37"> ]</span>
<a href="#l34.38"></a><span id="l34.38"> </span>
<a href="#l34.39"></a><span id="l34.39"> TEST_DIRS += ['test']</span>
<a href="#l34.40"></a><span id="l34.40"> </span>
<a href="#l34.41"></a><span id="l34.41"> DIRS += ['build']</span>
<a href="#l34.42"></a><span id="l34.42"> </span>
<a href="#l34.43"></a><span id="l34.43"> XPIDL_SOURCES += [</span>
<a href="#l34.44"></a><span id="l34.44">     'nsIMailGlue.idl',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/installer/package-manifest.in</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/installer/package-manifest.in</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -159,16 +159,19 @@</span>
<a href="#l35.4"></a><span id="l35.4"> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<a href="#l35.5"></a><span id="l35.5"> @RESPATH@/defaults/messenger/mailViews.dat</span>
<a href="#l35.6"></a><span id="l35.6"> @RESPATH@/defaults/profile/prefs.js</span>
<a href="#l35.7"></a><span id="l35.7"> </span>
<a href="#l35.8"></a><span id="l35.8"> @RESPATH@/isp/*</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10"> @RESPATH@/components/aboutRedirector.js</span>
<a href="#l35.11"></a><span id="l35.11"> @RESPATH@/components/activityComponents.manifest</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineplus">+@RESPATH@/components/EnterprisePolicies.js</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+@RESPATH@/components/EnterprisePolicies.manifest</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineplus">+@RESPATH@/components/EnterprisePoliciesContent.js</span>
<a href="#l35.15"></a><span id="l35.15"> @RESPATH@/components/folderLookupService.js</span>
<a href="#l35.16"></a><span id="l35.16"> ; interfaces.manifest doesn't get packaged because it is dynamically</span>
<a href="#l35.17"></a><span id="l35.17"> ; re-created at packaging time when linking the xpts that will actually</span>
<a href="#l35.18"></a><span id="l35.18"> ; go into the package, so the test related interfaces aren't included.</span>
<a href="#l35.19"></a><span id="l35.19"> @RESPATH@/components/mimeJSComponents.js</span>
<a href="#l35.20"></a><span id="l35.20"> @RESPATH@/components/msgMime.manifest</span>
<a href="#l35.21"></a><span id="l35.21"> @RESPATH@/components/msgAsyncPrompter.js</span>
<a href="#l35.22"></a><span id="l35.22"> @RESPATH@/components/msgBase.manifest</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">new file mode 100644</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineminus">--- /dev/null</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineplus">+++ b/mail/locales/en-US/messenger/policies/aboutPolicies.ftl</span>
<a href="#l36.4"></a><span id="l36.4" class="difflineat">@@ -0,0 +1,17 @@</span>
<a href="#l36.5"></a><span id="l36.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l36.6"></a><span id="l36.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l36.7"></a><span id="l36.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l36.8"></a><span id="l36.8" class="difflineplus">+</span>
<a href="#l36.9"></a><span id="l36.9" class="difflineplus">+about-policies-title = Enterprise Policies</span>
<a href="#l36.10"></a><span id="l36.10" class="difflineplus">+</span>
<a href="#l36.11"></a><span id="l36.11" class="difflineplus">+# 'Active' is used to describe the policies that are currently active</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineplus">+active-policies-tab = Active</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+errors-tab = Errors</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineplus">+documentation-tab = Documentation</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineplus">+</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineplus">+no-specified-policies-message = The Enterprise Policies service is active but there are no policies enabled.</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineplus">+inactive-message = The Enterprise Policies service is inactive.</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineplus">+</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineplus">+policy-name = Policy Name</span>
<a href="#l36.20"></a><span id="l36.20" class="difflineplus">+policy-value = Policy Value</span>
<a href="#l36.21"></a><span id="l36.21" class="difflineplus">+policy-errors = Policy Errors</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">new file mode 100644</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineminus">--- /dev/null</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineplus">+++ b/mail/locales/en-US/messenger/policies/policies-descriptions.ftl</span>
<a href="#l37.4"></a><span id="l37.4" class="difflineat">@@ -0,0 +1,108 @@</span>
<a href="#l37.5"></a><span id="l37.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l37.6"></a><span id="l37.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l37.7"></a><span id="l37.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l37.8"></a><span id="l37.8" class="difflineplus">+</span>
<a href="#l37.9"></a><span id="l37.9" class="difflineplus">+## The Enterprise Policies feature is aimed at system administrators</span>
<a href="#l37.10"></a><span id="l37.10" class="difflineplus">+## who want to deploy these settings across several Thunderbird installations</span>
<a href="#l37.11"></a><span id="l37.11" class="difflineplus">+## all at once. This is traditionally done through the Windows Group Policy</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineplus">+## feature, but the system also supports other forms of deployment.</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+## These are short descriptions for individual policies, to be displayed</span>
<a href="#l37.14"></a><span id="l37.14" class="difflineplus">+## in the documentation section in about:policies.</span>
<a href="#l37.15"></a><span id="l37.15" class="difflineplus">+</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineplus">+policy-3rdparty = Set policies that WebExtensions can access via chrome.storage.managed.</span>
<a href="#l37.17"></a><span id="l37.17" class="difflineplus">+</span>
<a href="#l37.18"></a><span id="l37.18" class="difflineplus">+policy-AppUpdateURL = Set custom app update URL.</span>
<a href="#l37.19"></a><span id="l37.19" class="difflineplus">+</span>
<a href="#l37.20"></a><span id="l37.20" class="difflineplus">+policy-Authentication = Configure integrated authentication for websites that support it.</span>
<a href="#l37.21"></a><span id="l37.21" class="difflineplus">+</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineplus">+policy-BlockAboutAddons = Block access to the Add-ons Manager (about:addons).</span>
<a href="#l37.23"></a><span id="l37.23" class="difflineplus">+</span>
<a href="#l37.24"></a><span id="l37.24" class="difflineplus">+policy-BlockAboutConfig = Block access to the about:config page.</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineplus">+</span>
<a href="#l37.26"></a><span id="l37.26" class="difflineplus">+policy-BlockAboutProfiles = Block access to the about:profiles page.</span>
<a href="#l37.27"></a><span id="l37.27" class="difflineplus">+</span>
<a href="#l37.28"></a><span id="l37.28" class="difflineplus">+policy-BlockAboutSupport = Block access to the about:support page.</span>
<a href="#l37.29"></a><span id="l37.29" class="difflineplus">+</span>
<a href="#l37.30"></a><span id="l37.30" class="difflineplus">+policy-CaptivePortal = Enable or disable captive portal support.</span>
<a href="#l37.31"></a><span id="l37.31" class="difflineplus">+</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineplus">+policy-CertificatesDescription = Add certificates or use built-in certificates.</span>
<a href="#l37.33"></a><span id="l37.33" class="difflineplus">+</span>
<a href="#l37.34"></a><span id="l37.34" class="difflineplus">+policy-Cookies = Allow or deny websites to set cookies.</span>
<a href="#l37.35"></a><span id="l37.35" class="difflineplus">+</span>
<a href="#l37.36"></a><span id="l37.36" class="difflineplus">+policy-DefaultDownloadDirectory = Set the default download directory.</span>
<a href="#l37.37"></a><span id="l37.37" class="difflineplus">+</span>
<a href="#l37.38"></a><span id="l37.38" class="difflineplus">+policy-DisableAppUpdate = Prevent { -brand-short-name } from updating.</span>
<a href="#l37.39"></a><span id="l37.39" class="difflineplus">+</span>
<a href="#l37.40"></a><span id="l37.40" class="difflineplus">+policy-DisableDeveloperTools = Block access to the developer tools.</span>
<a href="#l37.41"></a><span id="l37.41" class="difflineplus">+</span>
<a href="#l37.42"></a><span id="l37.42" class="difflineplus">+policy-DisableFeedbackCommands = Disable commands to send feedback from the Help menu (Submit Feedback and Report Deceptive Site).</span>
<a href="#l37.43"></a><span id="l37.43" class="difflineplus">+</span>
<a href="#l37.44"></a><span id="l37.44" class="difflineplus">+policy-DisableForgetButton = Prevent access to the Forget button.</span>
<a href="#l37.45"></a><span id="l37.45" class="difflineplus">+</span>
<a href="#l37.46"></a><span id="l37.46" class="difflineplus">+policy-DisableMasterPasswordCreation = If true, a master password cant be created.</span>
<a href="#l37.47"></a><span id="l37.47" class="difflineplus">+</span>
<a href="#l37.48"></a><span id="l37.48" class="difflineplus">+policy-DisableProfileImport = Disable the menu command to Import data from another application.</span>
<a href="#l37.49"></a><span id="l37.49" class="difflineplus">+</span>
<a href="#l37.50"></a><span id="l37.50" class="difflineplus">+policy-DisableSafeMode = Disable the feature to restart in Safe Mode. Note: the Shift key to enter Safe Mode can only be disabled on Windows using Group Policy.</span>
<a href="#l37.51"></a><span id="l37.51" class="difflineplus">+</span>
<a href="#l37.52"></a><span id="l37.52" class="difflineplus">+policy-DisableSecurityBypass = Prevent the user from bypassing certain security warnings.</span>
<a href="#l37.53"></a><span id="l37.53" class="difflineplus">+</span>
<a href="#l37.54"></a><span id="l37.54" class="difflineplus">+policy-DisableSystemAddonUpdate = Prevent { -brand-short-name } from installing and updating system add-ons.</span>
<a href="#l37.55"></a><span id="l37.55" class="difflineplus">+</span>
<a href="#l37.56"></a><span id="l37.56" class="difflineplus">+policy-DisableTelemetry = Turn off Telemetry.</span>
<a href="#l37.57"></a><span id="l37.57" class="difflineplus">+</span>
<a href="#l37.58"></a><span id="l37.58" class="difflineplus">+policy-DisplayMenuBar = Display the Menu Bar by default.</span>
<a href="#l37.59"></a><span id="l37.59" class="difflineplus">+</span>
<a href="#l37.60"></a><span id="l37.60" class="difflineplus">+policy-DNSOverHTTPS = Configure DNS over HTTPS.</span>
<a href="#l37.61"></a><span id="l37.61" class="difflineplus">+</span>
<a href="#l37.62"></a><span id="l37.62" class="difflineplus">+policy-DontCheckDefaultClient = Disable check for default client on startup.</span>
<a href="#l37.63"></a><span id="l37.63" class="difflineplus">+</span>
<a href="#l37.64"></a><span id="l37.64" class="difflineplus">+policy-DownloadDirectory = Set and lock the download directory.</span>
<a href="#l37.65"></a><span id="l37.65" class="difflineplus">+</span>
<a href="#l37.66"></a><span id="l37.66" class="difflineplus">+# lock means that the user wont be able to change this setting</span>
<a href="#l37.67"></a><span id="l37.67" class="difflineplus">+policy-EnableTrackingProtection = Enable or disable Content Blocking and optionally lock it.</span>
<a href="#l37.68"></a><span id="l37.68" class="difflineplus">+</span>
<a href="#l37.69"></a><span id="l37.69" class="difflineplus">+# A locked extension cant be disabled or removed by the user. This policy</span>
<a href="#l37.70"></a><span id="l37.70" class="difflineplus">+# takes 3 keys (Install, Uninstall, Locked), you can either keep them in</span>
<a href="#l37.71"></a><span id="l37.71" class="difflineplus">+# English or translate them as verbs.</span>
<a href="#l37.72"></a><span id="l37.72" class="difflineplus">+policy-Extensions = Install, uninstall or lock extensions. The Install option takes URLs or paths as parameters. The Uninstall and Locked options take extension IDs.</span>
<a href="#l37.73"></a><span id="l37.73" class="difflineplus">+</span>
<a href="#l37.74"></a><span id="l37.74" class="difflineplus">+policy-ExtensionUpdate = Enable or disable automatic extension updates.</span>
<a href="#l37.75"></a><span id="l37.75" class="difflineplus">+</span>
<a href="#l37.76"></a><span id="l37.76" class="difflineplus">+policy-HardwareAcceleration = If false, turn off hardware acceleration.</span>
<a href="#l37.77"></a><span id="l37.77" class="difflineplus">+</span>
<a href="#l37.78"></a><span id="l37.78" class="difflineplus">+policy-InstallAddonsPermission = Allow certain websites to install add-ons.</span>
<a href="#l37.79"></a><span id="l37.79" class="difflineplus">+</span>
<a href="#l37.80"></a><span id="l37.80" class="difflineplus">+policy-LocalFileLinks = Allow specific websites to link to local files.</span>
<a href="#l37.81"></a><span id="l37.81" class="difflineplus">+</span>
<a href="#l37.82"></a><span id="l37.82" class="difflineplus">+policy-NetworkPrediction = Enable or disable network prediction (DNS prefetching).</span>
<a href="#l37.83"></a><span id="l37.83" class="difflineplus">+</span>
<a href="#l37.84"></a><span id="l37.84" class="difflineplus">+policy-OfferToSaveLogins = Enforce the setting to allow { -brand-short-name } to offer to remember saved logins and passwords. Both true and false values are accepted.</span>
<a href="#l37.85"></a><span id="l37.85" class="difflineplus">+</span>
<a href="#l37.86"></a><span id="l37.86" class="difflineplus">+policy-OverrideFirstRunPage = Override the first run page. Set this policy to blank if you want to disable the first run page.</span>
<a href="#l37.87"></a><span id="l37.87" class="difflineplus">+</span>
<a href="#l37.88"></a><span id="l37.88" class="difflineplus">+policy-OverridePostUpdatePage = Override the post-update Whats New page. Set this policy to blank if you want to disable the post-update page.</span>
<a href="#l37.89"></a><span id="l37.89" class="difflineplus">+</span>
<a href="#l37.90"></a><span id="l37.90" class="difflineplus">+policy-Preferences = Set and lock the value for a subset of preferences.</span>
<a href="#l37.91"></a><span id="l37.91" class="difflineplus">+</span>
<a href="#l37.92"></a><span id="l37.92" class="difflineplus">+policy-PromptForDownloadLocation = Ask where to save files when downloading.</span>
<a href="#l37.93"></a><span id="l37.93" class="difflineplus">+</span>
<a href="#l37.94"></a><span id="l37.94" class="difflineplus">+policy-Proxy = Configure proxy settings.</span>
<a href="#l37.95"></a><span id="l37.95" class="difflineplus">+</span>
<a href="#l37.96"></a><span id="l37.96" class="difflineplus">+policy-RequestedLocales = Set the list of requested locales for the application in order of preference.</span>
<a href="#l37.97"></a><span id="l37.97" class="difflineplus">+</span>
<a href="#l37.98"></a><span id="l37.98" class="difflineplus">+policy-SanitizeOnShutdown2 = Clear navigation data on shutdown.</span>
<a href="#l37.99"></a><span id="l37.99" class="difflineplus">+</span>
<a href="#l37.100"></a><span id="l37.100" class="difflineplus">+policy-SearchEngines = Configure search engine settings. This policy is only available on the Extended Support Release (ESR) version.</span>
<a href="#l37.101"></a><span id="l37.101" class="difflineplus">+</span>
<a href="#l37.102"></a><span id="l37.102" class="difflineplus">+# For more information, see https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/PKCS11/Module_Installation</span>
<a href="#l37.103"></a><span id="l37.103" class="difflineplus">+policy-SecurityDevices = Install PKCS #11 modules.</span>
<a href="#l37.104"></a><span id="l37.104" class="difflineplus">+</span>
<a href="#l37.105"></a><span id="l37.105" class="difflineplus">+policy-SSLVersionMax = Set the maximum SSL version.</span>
<a href="#l37.106"></a><span id="l37.106" class="difflineplus">+</span>
<a href="#l37.107"></a><span id="l37.107" class="difflineplus">+policy-SSLVersionMin = Set the minimum SSL version.</span>
<a href="#l37.108"></a><span id="l37.108" class="difflineplus">+</span>
<a href="#l37.109"></a><span id="l37.109" class="difflineplus">+policy-SupportMenu = Add a custom support menu item to the help menu.</span>
<a href="#l37.110"></a><span id="l37.110" class="difflineplus">+</span>
<a href="#l37.111"></a><span id="l37.111" class="difflineplus">+# format refers to the format used for the value of this policy.</span>
<a href="#l37.112"></a><span id="l37.112" class="difflineplus">+policy-WebsiteFilter = Block websites from being visited. See documentation for more details on the format.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

