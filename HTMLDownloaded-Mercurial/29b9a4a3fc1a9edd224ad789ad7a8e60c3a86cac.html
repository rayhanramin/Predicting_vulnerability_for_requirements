<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21697:29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac" />
<meta property="og:url" content="/comm-central/rev/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac" />
<meta property="og:description" content="Bug 1373908 - Port bug 1340987 to TB [Improve subdialog.js to support multiple dialogs]. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">shortlog</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">files</a> |
changeset |
<a href="/comm-central/raw-rev/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">raw</a>  | <a href="/comm-central/archive/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1373908">Bug 1373908</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1340987">bug 1340987</a> to TB [Improve subdialog.js to support multiple dialogs]. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#105;&#99;&#104;&#97;&#114;&#100;&#32;&#77;&#97;&#114;&#116;&#105;&#32;&#60;&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#46;&#109;&#97;&#114;&#116;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 17 Jun 2017 10:08:07 +0200</td></tr>

<tr>
 <td>changeset 21697</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac</a></td>
</tr>



<tr>
<td>parent 21696</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/167a8565ea427bfdd897a1f3835b075a7091a150">167a8565ea427bfdd897a1f3835b075a7091a150</a>
</td>
</tr>

<tr>
<td>child 21698</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/b6669e74cafa0fba300b034dcbb7f7b832a812a7">b6669e74cafa0fba300b034dcbb7f7b832a812a7</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">13229</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 21 Jun 2017 07:28:39 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@29b9a4a3fc1a [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac&newProject=comm-central&newRevision=da8d01df61c1ddf7aac9d8bbcef3d0ca95237aaf&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac&newProject=comm-central&newRevision=da8d01df61c1ddf7aac9d8bbcef3d0ca95237aaf&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac&newProject=comm-central&newRevision=da8d01df61c1ddf7aac9d8bbcef3d0ca95237aaf&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1373908">1373908</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1340987">1340987</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1373908">Bug 1373908</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1340987">bug 1340987</a> to TB [Improve subdialog.js to support multiple dialogs]. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/calendar/base/content/preferences/categories.js">calendar/base/content/preferences/categories.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/calendar/base/content/preferences/categories.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/calendar/base/content/preferences/categories.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/calendar/base/content/preferences/categories.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/calendar/base/content/preferences/categories.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/calendar/base/content/preferences/categories.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/aboutPreferences.xul">mail/components/preferences/aboutPreferences.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/aboutPreferences.xul">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/aboutPreferences.xul">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/aboutPreferences.xul">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/aboutPreferences.xul">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/aboutPreferences.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/advanced.js">mail/components/preferences/advanced.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/advanced.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/advanced.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/advanced.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/advanced.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/advanced.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/compose.js">mail/components/preferences/compose.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/compose.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/compose.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/compose.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/compose.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/compose.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/display.js">mail/components/preferences/display.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/display.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/display.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/display.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/display.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/display.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/preferences.xml">mail/components/preferences/preferences.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/preferences.xml">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/preferences.xml">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/preferences.xml">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/preferences.xml">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/preferences.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/privacy.js">mail/components/preferences/privacy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/privacy.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/privacy.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/privacy.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/privacy.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/privacy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/security.js">mail/components/preferences/security.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/security.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/security.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/security.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/security.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/security.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/subdialogs.js">mail/components/preferences/subdialogs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/subdialogs.js">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/subdialogs.js">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/subdialogs.js">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/subdialogs.js">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/components/preferences/subdialogs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/themes/shared/mail/incontentprefs/aboutPreferences.css">mail/themes/shared/mail/incontentprefs/aboutPreferences.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/themes/shared/mail/incontentprefs/aboutPreferences.css">file</a> |
<a href="/comm-central/annotate/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/themes/shared/mail/incontentprefs/aboutPreferences.css">annotate</a> |
<a href="/comm-central/diff/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/themes/shared/mail/incontentprefs/aboutPreferences.css">diff</a> |
<a href="/comm-central/comparison/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/themes/shared/mail/incontentprefs/aboutPreferences.css">comparison</a> |
<a href="/comm-central/log/29b9a4a3fc1a9edd224ad789ad7a8e60c3a86cac/mail/themes/shared/mail/incontentprefs/aboutPreferences.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/preferences/categories.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/preferences/categories.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -70,19 +70,16 @@ var gCategoriesPane = {</span>
<a href="#l1.4"></a><span id="l1.4">         if (AppConstants.platform != &quot;linux&quot;) {</span>
<a href="#l1.5"></a><span id="l1.5">             this.mWinProp += &quot;, modal&quot;;</span>
<a href="#l1.6"></a><span id="l1.6">         }</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8">         this.mLoadInContent = Preferences.get(</span>
<a href="#l1.9"></a><span id="l1.9">             &quot;mail.preferences.inContent&quot;,</span>
<a href="#l1.10"></a><span id="l1.10">             false</span>
<a href="#l1.11"></a><span id="l1.11">         );</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-        if (this.mLoadInContent) {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-            gSubDialog.init();</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-        }</span>
<a href="#l1.15"></a><span id="l1.15">     },</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17">     /**</span>
<a href="#l1.18"></a><span id="l1.18">      * Updates the listbox containing the categories from the categories saved</span>
<a href="#l1.19"></a><span id="l1.19">      * in preferences.</span>
<a href="#l1.20"></a><span id="l1.20">      */</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22">     updatePrefs: function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/preferences/aboutPreferences.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/preferences/aboutPreferences.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -25,16 +25,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> %brandDTD;</span>
<a href="#l2.5"></a><span id="l2.5"> %preferencesDTD;</span>
<a href="#l2.6"></a><span id="l2.6"> ]&gt;</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> &lt;preftab id=&quot;MailPreferences&quot; flex=&quot;1&quot;</span>
<a href="#l2.9"></a><span id="l2.9">          windowtype=&quot;Mail:Preferences&quot;</span>
<a href="#l2.10"></a><span id="l2.10">          xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l2.11"></a><span id="l2.11">          xmlns:xhtml=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+         onload=&quot;gSubDialog.init();&quot;</span>
<a href="#l2.13"></a><span id="l2.13"> #ifdef XP_WIN</span>
<a href="#l2.14"></a><span id="l2.14">          title=&quot;&amp;prefWindow.titleWin;&quot;&gt;</span>
<a href="#l2.15"></a><span id="l2.15"> #endif</span>
<a href="#l2.16"></a><span id="l2.16"> #ifdef XP_UNIX</span>
<a href="#l2.17"></a><span id="l2.17"> #ifndef XP_MACOSX</span>
<a href="#l2.18"></a><span id="l2.18">          title=&quot;&amp;prefWindow.titleGNOME;&quot;&gt;</span>
<a href="#l2.19"></a><span id="l2.19"> #else</span>
<a href="#l2.20"></a><span id="l2.20">          title=&quot;&amp;prefWindow.titleMAC;&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/preferences/advanced.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/preferences/advanced.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -122,20 +122,16 @@ var gAdvancedPane = {</span>
<a href="#l3.4"></a><span id="l3.4">       let arch = bundle.GetStringFromName(archResource);</span>
<a href="#l3.5"></a><span id="l3.5">       version += ` (${arch})`;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">       document.getElementById(&quot;version&quot;).textContent = version;</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9">       gAppUpdater = new appUpdater();</span>
<a href="#l3.10"></a><span id="l3.10">     }</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    if (this._loadInContent) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-    }</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-</span>
<a href="#l3.16"></a><span id="l3.16">     this.mInitialized = true;</span>
<a href="#l3.17"></a><span id="l3.17">   },</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">   tabSelectionChanged: function ()</span>
<a href="#l3.20"></a><span id="l3.20">   {</span>
<a href="#l3.21"></a><span id="l3.21">     if (this.mInitialized)</span>
<a href="#l3.22"></a><span id="l3.22">     {</span>
<a href="#l3.23"></a><span id="l3.23">       document.getElementById(&quot;mail.preferences.advanced.selectedTabIndex&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -414,19 +414,16 @@ var gApplicationsTabController = {</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5">     if (!((&quot;arguments&quot; in window) &amp;&amp; window.arguments[1])) {</span>
<a href="#l4.6"></a><span id="l4.6">       // If no tab was specified, select the last used tab.</span>
<a href="#l4.7"></a><span id="l4.7">       let preference = document.getElementById(&quot;mail.preferences.applications.selectedTabIndex&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">       tabbox.selectedIndex = preference.value != null ? preference.value : this.mDefaultIndex;</span>
<a href="#l4.9"></a><span id="l4.9">     }</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">     let loadInContent = Services.prefs.getBoolPref(&quot;mail.preferences.inContent&quot;);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    if (loadInContent) {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-    }</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">     this.mInitialized = true;</span>
<a href="#l4.17"></a><span id="l4.17">   },</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">   tabSelectionChanged: function() {</span>
<a href="#l4.20"></a><span id="l4.20">     if (this.mInitialized)</span>
<a href="#l4.21"></a><span id="l4.21">       document.getElementById(&quot;mail.preferences.applications.selectedTabIndex&quot;)</span>
<a href="#l4.22"></a><span id="l4.22">               .valueFromPreferences = document.getElementById(&quot;attachmentPrefs&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/components/preferences/compose.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/components/preferences/compose.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -30,20 +30,16 @@ var gComposePane = {</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">     if (!((&quot;arguments&quot; in window) &amp;&amp; window.arguments[1])) {</span>
<a href="#l5.6"></a><span id="l5.6">       // If no tab was specified, select the last used tab.</span>
<a href="#l5.7"></a><span id="l5.7">       let preference = document.getElementById(&quot;mail.preferences.compose.selectedTabIndex&quot;);</span>
<a href="#l5.8"></a><span id="l5.8">       if (preference.value)</span>
<a href="#l5.9"></a><span id="l5.9">         document.getElementById(&quot;composePrefs&quot;).selectedIndex = preference.value;</span>
<a href="#l5.10"></a><span id="l5.10">     }</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    if (this._loadInContent) {</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-    }</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-</span>
<a href="#l5.16"></a><span id="l5.16">     this.mInitialized = true;</span>
<a href="#l5.17"></a><span id="l5.17">   },</span>
<a href="#l5.18"></a><span id="l5.18"> </span>
<a href="#l5.19"></a><span id="l5.19">   tabSelectionChanged: function ()</span>
<a href="#l5.20"></a><span id="l5.20">   {</span>
<a href="#l5.21"></a><span id="l5.21">     if (this.mInitialized)</span>
<a href="#l5.22"></a><span id="l5.22">     {</span>
<a href="#l5.23"></a><span id="l5.23">       var preference = document.getElementById(&quot;mail.preferences.compose.selectedTabIndex&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/components/preferences/display.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/components/preferences/display.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -20,20 +20,16 @@ var gDisplayPane = {</span>
<a href="#l6.4"></a><span id="l6.4">     this._rebuildFonts();</span>
<a href="#l6.5"></a><span id="l6.5">     this.updateMarkAsReadOptions(document.getElementById(&quot;automaticallyMarkAsRead&quot;).checked);</span>
<a href="#l6.6"></a><span id="l6.6">     var menulist = document.getElementById(&quot;defaultFont&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">     if (menulist.selectedIndex == -1) {</span>
<a href="#l6.8"></a><span id="l6.8">       menulist.insertItemAt(0, &quot;&quot;, &quot;&quot;, &quot;&quot;);</span>
<a href="#l6.9"></a><span id="l6.9">       menulist.selectedIndex = 0;</span>
<a href="#l6.10"></a><span id="l6.10">     }</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    if (this._loadInContent) {</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-    }</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-</span>
<a href="#l6.16"></a><span id="l6.16">     this.mInitialized = true;</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18">     this.mTagListBox = document.getElementById(&quot;tagList&quot;);</span>
<a href="#l6.19"></a><span id="l6.19">     this.buildTagList();</span>
<a href="#l6.20"></a><span id="l6.20">   },</span>
<a href="#l6.21"></a><span id="l6.21"> </span>
<a href="#l6.22"></a><span id="l6.22">   // FONTS</span>
<a href="#l6.23"></a><span id="l6.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -12,20 +12,16 @@ var gGeneralPane = {</span>
<a href="#l7.4"></a><span id="l7.4">   init: function ()</span>
<a href="#l7.5"></a><span id="l7.5">   {</span>
<a href="#l7.6"></a><span id="l7.6">     this.mPane = document.getElementById(&quot;paneGeneral&quot;);</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8">     this.updateStartPage();</span>
<a href="#l7.9"></a><span id="l7.9">     this.updatePlaySound();</span>
<a href="#l7.10"></a><span id="l7.10">     this.updateCustomizeAlert();</span>
<a href="#l7.11"></a><span id="l7.11">     this.updateWebSearch();</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-    if (this._loadInContent) {</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-    }</span>
<a href="#l7.16"></a><span id="l7.16">   },</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18">   /**</span>
<a href="#l7.19"></a><span id="l7.19">    * Restores the default start page as the user's start page</span>
<a href="#l7.20"></a><span id="l7.20">    */</span>
<a href="#l7.21"></a><span id="l7.21">   restoreDefaultStartPage: function()</span>
<a href="#l7.22"></a><span id="l7.22">   {</span>
<a href="#l7.23"></a><span id="l7.23">     var startPage = document.getElementById(&quot;mailnews.start_page.url&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/preferences/preferences.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/preferences/preferences.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -20,54 +20,55 @@</span>
<a href="#l8.4"></a><span id="l8.4">            extends=&quot;chrome://global/content/bindings/preferences.xml#prefwindow&quot;&gt;</span>
<a href="#l8.5"></a><span id="l8.5">     &lt;resources&gt;</span>
<a href="#l8.6"></a><span id="l8.6">       &lt;stylesheet src=&quot;chrome://global/skin/preferences.css&quot;/&gt;</span>
<a href="#l8.7"></a><span id="l8.7">     &lt;/resources&gt;</span>
<a href="#l8.8"></a><span id="l8.8">     &lt;content dlgbuttons=&quot;accept,cancel&quot; persist=&quot;lastSelected&quot;</span>
<a href="#l8.9"></a><span id="l8.9">              closebuttonlabel=&quot;&amp;preferencesCloseButton.label;&quot;</span>
<a href="#l8.10"></a><span id="l8.10">              closebuttonaccesskey=&quot;&amp;preferencesCloseButton.accesskey;&quot;</span>
<a href="#l8.11"></a><span id="l8.11">              role=&quot;dialog&quot;&gt;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-      &lt;xul:hbox id=&quot;prefBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-        &lt;xul:windowdragbox orient=&quot;vertical&quot;&gt;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-          &lt;xul:radiogroup anonid=&quot;selector&quot; orient=&quot;vertical&quot; class=&quot;paneSelector chromeclass-toolbar&quot;</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-                          role=&quot;listbox&quot;/&gt; &lt;!-- Expose to accessibility APIs as a listbox --&gt;</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-        &lt;/xul:windowdragbox&gt;</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-        &lt;xul:hbox id=&quot;preferencesContainer&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-          &lt;xul:hbox class=&quot;paneDeckContainer&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-            &lt;xul:deck anonid=&quot;paneDeck&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-              &lt;children includes=&quot;prefpane&quot;/&gt;</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-            &lt;/xul:deck&gt;</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-            &lt;xul:vbox id=&quot;dialogOverlay&quot;</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-                      align=&quot;center&quot;</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-                      pack=&quot;center&quot;&gt;</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-              &lt;xul:vbox id=&quot;dialogContainer&quot;&gt;</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-                &lt;xul:groupbox id=&quot;dialogBox&quot;</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-                              orient=&quot;vertical&quot;</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-                              pack=&quot;end&quot;</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-                              role=&quot;dialog&quot;</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-                              aria-labelledby=&quot;dialogTitle&quot;&gt;</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-                  &lt;xul:caption class=&quot;titlebar&quot;</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-                               flex=&quot;1&quot;</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-                               align=&quot;center&quot;&gt;</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-                    &lt;xul:label id=&quot;dialogTitle&quot;</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-                               class=&quot;title&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-                    &lt;/xul:label&gt;</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-                    &lt;xul:button id=&quot;dialogClose&quot;</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-                                class=&quot;close-icon&quot;/&gt;</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-                  &lt;/xul:caption&gt;</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-                  &lt;xul:browser id=&quot;dialogFrame&quot;</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-                               name=&quot;dialogFrame&quot;</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-                               autoscroll=&quot;false&quot;</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-                               disablehistory=&quot;true&quot;/&gt;</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-                &lt;/xul:groupbox&gt;</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-              &lt;/xul:vbox&gt;</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-            &lt;/xul:vbox&gt;</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+      &lt;xul:stack flex=&quot;1&quot;&gt;</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+        &lt;xul:hbox id=&quot;prefBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+          &lt;xul:windowdragbox orient=&quot;vertical&quot;&gt;</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+            &lt;xul:radiogroup anonid=&quot;selector&quot; orient=&quot;vertical&quot; class=&quot;paneSelector chromeclass-toolbar&quot;</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+                            role=&quot;listbox&quot;/&gt; &lt;!-- Expose to accessibility APIs as a listbox --&gt;</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+          &lt;/xul:windowdragbox&gt;</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+          &lt;xul:hbox id=&quot;preferencesContainer&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+            &lt;xul:hbox class=&quot;paneDeckContainer&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+              &lt;xul:deck anonid=&quot;paneDeck&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+                &lt;children includes=&quot;prefpane&quot;/&gt;</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+              &lt;/xul:deck&gt;</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+            &lt;/xul:hbox&gt;</span>
<a href="#l8.59"></a><span id="l8.59">           &lt;/xul:hbox&gt;</span>
<a href="#l8.60"></a><span id="l8.60">         &lt;/xul:hbox&gt;</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-      &lt;/xul:hbox&gt;</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+        &lt;xul:stack id=&quot;dialogStack&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+        &lt;xul:vbox id=&quot;dialogTemplate&quot;</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+                  class=&quot;dialogOverlay&quot;</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+                  align=&quot;center&quot;</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+                  pack=&quot;center&quot;</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+                  topmost=&quot;true&quot;</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+                  hidden=&quot;true&quot;&gt;</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+            &lt;xul:groupbox class=&quot;dialogBox&quot;</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+                          orient=&quot;vertical&quot;</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+                          pack=&quot;end&quot;</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+                          role=&quot;dialog&quot;</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+                          aria-labelledby=&quot;dialogTitle&quot;&gt;</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+              &lt;xul:caption class=&quot;titlebar&quot;</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+                           flex=&quot;1&quot;</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+                           align=&quot;center&quot;&gt;</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+                &lt;xul:label class=&quot;dialogTitle&quot; flex=&quot;1&quot;&gt;&lt;/xul:label&gt;</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+                &lt;xul:button class=&quot;dialogClose close-icon&quot;</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+                            aria-label=&quot;&amp;preferencesCloseButton.label;&quot;/&gt;</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+              &lt;/xul:caption&gt;</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+              &lt;xul:browser class=&quot;dialogFrame&quot;</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+                           autoscroll=&quot;false&quot;</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+                           disablehistory=&quot;true&quot;/&gt;</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+            &lt;/xul:groupbox&gt;</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+        &lt;/xul:vbox&gt;</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+      &lt;/xul:stack&gt;</span>
<a href="#l8.87"></a><span id="l8.87">       &lt;xul:hbox anonid=&quot;dlg-buttons&quot; class=&quot;prefWindow-dlgbuttons&quot;</span>
<a href="#l8.88"></a><span id="l8.88">                 pack=&quot;end&quot;&gt;</span>
<a href="#l8.89"></a><span id="l8.89">         &lt;xul:button dlgtype=&quot;extra2&quot; class=&quot;dialog-button&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l8.90"></a><span id="l8.90">         &lt;xul:spacer anonid=&quot;spacer&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l8.91"></a><span id="l8.91">         &lt;xul:button dlgtype=&quot;accept&quot; class=&quot;dialog-button&quot; icon=&quot;accept&quot;/&gt;</span>
<a href="#l8.92"></a><span id="l8.92">         &lt;xul:button dlgtype=&quot;extra1&quot; class=&quot;dialog-button&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l8.93"></a><span id="l8.93">         &lt;xul:button dlgtype=&quot;cancel&quot; class=&quot;dialog-button&quot; icon=&quot;cancel&quot;/&gt;</span>
<a href="#l8.94"></a><span id="l8.94">         &lt;xul:button dlgtype=&quot;help&quot; class=&quot;dialog-button&quot; hidden=&quot;true&quot; icon=&quot;help&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/preferences/privacy.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/preferences/privacy.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -4,19 +4,16 @@</span>
<a href="#l9.4"></a><span id="l9.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> var gPrivacyPane = {</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">   _loadInContent: Services.prefs.getBoolPref(&quot;mail.preferences.inContent&quot;),</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10">   init: function()</span>
<a href="#l9.11"></a><span id="l9.11">   {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-    if (this._loadInContent) {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-    }</span>
<a href="#l9.15"></a><span id="l9.15">   },</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17">   /**</span>
<a href="#l9.18"></a><span id="l9.18">    * Reload the current message after a preference affecting the view</span>
<a href="#l9.19"></a><span id="l9.19">    * has been changed and we are in instantApply mode.</span>
<a href="#l9.20"></a><span id="l9.20">    */</span>
<a href="#l9.21"></a><span id="l9.21">   reloadMessageInOpener: function()</span>
<a href="#l9.22"></a><span id="l9.22">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/components/preferences/security.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/components/preferences/security.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -26,20 +26,16 @@ var gSecurityPane = {</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5">     if (!((&quot;arguments&quot; in window) &amp;&amp; window.arguments[1])) {</span>
<a href="#l10.6"></a><span id="l10.6">       // If no tab was specified, select the last used tab.</span>
<a href="#l10.7"></a><span id="l10.7">       let preference = document.getElementById(&quot;mail.preferences.security.selectedTabIndex&quot;);</span>
<a href="#l10.8"></a><span id="l10.8">       if (preference.value)</span>
<a href="#l10.9"></a><span id="l10.9">         document.getElementById(&quot;securityPrefs&quot;).selectedIndex = preference.value;</span>
<a href="#l10.10"></a><span id="l10.10">     }</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    if (this._loadInContent) {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-      gSubDialog.init();</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-    }</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-</span>
<a href="#l10.16"></a><span id="l10.16">     this.mInitialized = true;</span>
<a href="#l10.17"></a><span id="l10.17">   },</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">   tabSelectionChanged: function ()</span>
<a href="#l10.20"></a><span id="l10.20">   {</span>
<a href="#l10.21"></a><span id="l10.21">     if (this.mInitialized)</span>
<a href="#l10.22"></a><span id="l10.22">       document.getElementById(&quot;mail.preferences.security.selectedTabIndex&quot;)</span>
<a href="#l10.23"></a><span id="l10.23">               .valueFromPreferences = document.getElementById(&quot;securityPrefs&quot;).selectedIndex;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/preferences/subdialogs.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/preferences/subdialogs.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1,91 +1,113 @@</span>
<a href="#l11.4"></a><span id="l11.4"> /* - This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.5"></a><span id="l11.5">    - License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l11.6"></a><span id="l11.6">    - You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8"> &quot;use strict&quot;;</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-var gSubDialog = {</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+/**</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+ * SubDialog constructor creates a new subdialog from a template and appends</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+ * it to the parentElement.</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+ * @param {DOMNode} template: The template is copied to create a new dialog.</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+ * @param {DOMNode} parentElement: New dialog is appended onto parentElement.</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+ * @param {String}  id: A unique identifier for the dialog.</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+ */</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+function SubDialog({template, parentElement, id}) {</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+  this._id = id;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+  this._overlay = template.cloneNode(true);</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+  this._frame = this._overlay.querySelector(&quot;.dialogFrame&quot;);</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+  this._box = this._overlay.querySelector(&quot;.dialogBox&quot;);</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+  this._closeButton = this._overlay.querySelector(&quot;.dialogClose&quot;);</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+  this._titleElement = this._overlay.querySelector(&quot;.dialogTitle&quot;);</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+  this._overlay.id = `dialogOverlay-${id}`;</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+  this._frame.setAttribute(&quot;name&quot;, `dialogFrame-${id}`);</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+  this._frameCreated = new Promise(resolve =&gt; {</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+    this._frame.addEventListener(&quot;load&quot;, resolve, {once: true});</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+  });</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+  parentElement.appendChild(this._overlay);</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+  this._overlay.hidden = false;</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+}</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+SubDialog.prototype = {</span>
<a href="#l11.38"></a><span id="l11.38">   _closingCallback: null,</span>
<a href="#l11.39"></a><span id="l11.39">   _closingEvent: null,</span>
<a href="#l11.40"></a><span id="l11.40">   _isClosing: false,</span>
<a href="#l11.41"></a><span id="l11.41">   _frame: null,</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+  _frameCreated: null,</span>
<a href="#l11.43"></a><span id="l11.43">   _overlay: null,</span>
<a href="#l11.44"></a><span id="l11.44">   _box: null,</span>
<a href="#l11.45"></a><span id="l11.45">   _openedURL: null,</span>
<a href="#l11.46"></a><span id="l11.46">   _injectedStyleSheets: [</span>
<a href="#l11.47"></a><span id="l11.47">     &quot;chrome://messenger/skin/preferences/preferences.css&quot;,</span>
<a href="#l11.48"></a><span id="l11.48">     &quot;chrome://global/skin/in-content/common.css&quot;,</span>
<a href="#l11.49"></a><span id="l11.49">     &quot;chrome://messenger/skin/preferences/aboutPreferences.css&quot;,</span>
<a href="#l11.50"></a><span id="l11.50">     &quot;chrome://messenger/skin/preferences/dialog.css&quot;],</span>
<a href="#l11.51"></a><span id="l11.51"> </span>
<a href="#l11.52"></a><span id="l11.52">   // Store the original instantApply pref for restoring after closing the dialog</span>
<a href="#l11.53"></a><span id="l11.53">   _instantApplyOrig: Services.prefs.getBoolPref(&quot;browser.preferences.instantApply&quot;),</span>
<a href="#l11.54"></a><span id="l11.54">   _resizeObserver: null,</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineplus">+  _template: null,</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineplus">+  _id: null,</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineplus">+  _titleElement: null,</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineplus">+  _closeButton: null,</span>
<a href="#l11.59"></a><span id="l11.59"> </span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-  init: function() {</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">-    this._frame = document.getElementById(&quot;dialogFrame&quot;);</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-    this._overlay = document.getElementById(&quot;dialogOverlay&quot;);</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-    this._box = document.getElementById(&quot;dialogBox&quot;);</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-    this._closeButton = document.getElementById(&quot;dialogClose&quot;);</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineplus">+  updateTitle(aEvent) {</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineplus">+    if (aEvent.target != this._frame.contentDocument)</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+      return;</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineplus">+    this._titleElement.textContent = this._frame.contentDocument.title;</span>
<a href="#l11.69"></a><span id="l11.69">   },</span>
<a href="#l11.70"></a><span id="l11.70"> </span>
<a href="#l11.71"></a><span id="l11.71" class="difflineminus">-  updateTitle: function(aEvent) {</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-    if (aEvent.target != gSubDialog._frame.contentDocument)</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-      return;</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-    document.getElementById(&quot;dialogTitle&quot;).textContent = gSubDialog._frame.contentDocument.title;</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineminus">-  },</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineminus">-</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineminus">-  injectXMLStylesheet: function(aStylesheetURL) {</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineplus">+  injectXMLStylesheet(aStylesheetURL) {</span>
<a href="#l11.79"></a><span id="l11.79">     let contentStylesheet = this._frame.contentDocument.createProcessingInstruction(</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineminus">-      'xml-stylesheet',</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineplus">+      &quot;xml-stylesheet&quot;,</span>
<a href="#l11.82"></a><span id="l11.82">       'href=&quot;' + aStylesheetURL + '&quot; type=&quot;text/css&quot;'</span>
<a href="#l11.83"></a><span id="l11.83">     );</span>
<a href="#l11.84"></a><span id="l11.84">     this._frame.contentDocument.insertBefore(contentStylesheet,</span>
<a href="#l11.85"></a><span id="l11.85">                                              this._frame.contentDocument.documentElement);</span>
<a href="#l11.86"></a><span id="l11.86">   },</span>
<a href="#l11.87"></a><span id="l11.87"> </span>
<a href="#l11.88"></a><span id="l11.88" class="difflineminus">-  open: function(aURL, aFeatures = null, aParams = null, aClosingCallback = null) {</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineminus">-    // If we're already open/opening on this URL, do nothing.</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineminus">-    if (this._openedURL == aURL &amp;&amp; !this._isClosing) {</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-      return;</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-    }</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineplus">+  async open(aURL, aFeatures = null, aParams = null, aClosingCallback = null) {</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineplus">+    // Wait until frame is ready to prevent browser crash in tests</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineplus">+    await this._frameCreated;</span>
<a href="#l11.96"></a><span id="l11.96">     // If we're open on some (other) URL or we're closing, open when closing has finished.</span>
<a href="#l11.97"></a><span id="l11.97">     if (this._openedURL || this._isClosing) {</span>
<a href="#l11.98"></a><span id="l11.98">       if (!this._isClosing) {</span>
<a href="#l11.99"></a><span id="l11.99">         this.close();</span>
<a href="#l11.100"></a><span id="l11.100">       }</span>
<a href="#l11.101"></a><span id="l11.101">       let args = Array.from(arguments);</span>
<a href="#l11.102"></a><span id="l11.102">       this._closingPromise.then(() =&gt; {</span>
<a href="#l11.103"></a><span id="l11.103">         this.open.apply(this, args);</span>
<a href="#l11.104"></a><span id="l11.104">       });</span>
<a href="#l11.105"></a><span id="l11.105">       return;</span>
<a href="#l11.106"></a><span id="l11.106">     }</span>
<a href="#l11.107"></a><span id="l11.107">     this._addDialogEventListeners();</span>
<a href="#l11.108"></a><span id="l11.108"> </span>
<a href="#l11.109"></a><span id="l11.109">     Services.prefs.setBoolPref(&quot;browser.preferences.instantApply&quot;, true);</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineminus">-    let features = (!!aFeatures ? aFeatures + &quot;,&quot; : &quot;&quot;) + &quot;resizable,dialog=no,centerscreen&quot;;</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineminus">-    let dialog = window.openDialog(aURL, &quot;dialogFrame&quot;, features, aParams);</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineplus">+    let features = (aFeatures ? aFeatures + &quot;,&quot; : &quot;&quot;) + &quot;resizable,dialog=no,centerscreen&quot;;</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineplus">+    let dialog = window.openDialog(aURL, `dialogFrame-${this._id}`, features, aParams);</span>
<a href="#l11.114"></a><span id="l11.114">     if (aClosingCallback) {</span>
<a href="#l11.115"></a><span id="l11.115">       this._closingCallback = aClosingCallback.bind(dialog);</span>
<a href="#l11.116"></a><span id="l11.116">     }</span>
<a href="#l11.117"></a><span id="l11.117"> </span>
<a href="#l11.118"></a><span id="l11.118">     this._closingEvent = null;</span>
<a href="#l11.119"></a><span id="l11.119">     this._isClosing = false;</span>
<a href="#l11.120"></a><span id="l11.120">     this._openedURL = aURL;</span>
<a href="#l11.121"></a><span id="l11.121"> </span>
<a href="#l11.122"></a><span id="l11.122">     features = features.replace(/,/g, &quot;&amp;&quot;);</span>
<a href="#l11.123"></a><span id="l11.123">     let featureParams = new URLSearchParams(features.toLowerCase());</span>
<a href="#l11.124"></a><span id="l11.124">     this._box.setAttribute(&quot;resizable&quot;, featureParams.has(&quot;resizable&quot;) &amp;&amp;</span>
<a href="#l11.125"></a><span id="l11.125">                                         featureParams.get(&quot;resizable&quot;) != &quot;no&quot; &amp;&amp;</span>
<a href="#l11.126"></a><span id="l11.126">                                         featureParams.get(&quot;resizable&quot;) != &quot;0&quot;);</span>
<a href="#l11.127"></a><span id="l11.127">   },</span>
<a href="#l11.128"></a><span id="l11.128"> </span>
<a href="#l11.129"></a><span id="l11.129" class="difflineminus">-  close: function(aEvent = null) {</span>
<a href="#l11.130"></a><span id="l11.130" class="difflineplus">+  close(aEvent = null) {</span>
<a href="#l11.131"></a><span id="l11.131">     if (this._isClosing) {</span>
<a href="#l11.132"></a><span id="l11.132">       return;</span>
<a href="#l11.133"></a><span id="l11.133">     }</span>
<a href="#l11.134"></a><span id="l11.134">     this._isClosing = true;</span>
<a href="#l11.135"></a><span id="l11.135">     this._closingPromise = new Promise(resolve =&gt; {</span>
<a href="#l11.136"></a><span id="l11.136">       this._resolveClosePromise = resolve;</span>
<a href="#l11.137"></a><span id="l11.137">     });</span>
<a href="#l11.138"></a><span id="l11.138"> </span>
<a href="#l11.139"></a><span id="l11.139" class="difflineat">@@ -105,16 +127,21 @@ var gSubDialog = {</span>
<a href="#l11.140"></a><span id="l11.140">     // Clear the sizing inline styles.</span>
<a href="#l11.141"></a><span id="l11.141">     this._frame.removeAttribute(&quot;style&quot;);</span>
<a href="#l11.142"></a><span id="l11.142">     // Clear the sizing attributes</span>
<a href="#l11.143"></a><span id="l11.143">     this._box.removeAttribute(&quot;width&quot;);</span>
<a href="#l11.144"></a><span id="l11.144">     this._box.removeAttribute(&quot;height&quot;);</span>
<a href="#l11.145"></a><span id="l11.145">     this._box.style.removeProperty(&quot;min-height&quot;);</span>
<a href="#l11.146"></a><span id="l11.146">     this._box.style.removeProperty(&quot;min-width&quot;);</span>
<a href="#l11.147"></a><span id="l11.147"> </span>
<a href="#l11.148"></a><span id="l11.148" class="difflineplus">+    this._overlay.dispatchEvent(new CustomEvent(&quot;dialogclose&quot;, {</span>
<a href="#l11.149"></a><span id="l11.149" class="difflineplus">+      bubbles: true,</span>
<a href="#l11.150"></a><span id="l11.150" class="difflineplus">+      detail: { dialog: this },</span>
<a href="#l11.151"></a><span id="l11.151" class="difflineplus">+    }));</span>
<a href="#l11.152"></a><span id="l11.152" class="difflineplus">+</span>
<a href="#l11.153"></a><span id="l11.153">     setTimeout(() =&gt; {</span>
<a href="#l11.154"></a><span id="l11.154">       // Unload the dialog after the event listeners run so that the load of about:blank isn't</span>
<a href="#l11.155"></a><span id="l11.155">       // cancelled by the ESC &lt;key&gt;.</span>
<a href="#l11.156"></a><span id="l11.156">       let onBlankLoad = e =&gt; {</span>
<a href="#l11.157"></a><span id="l11.157">         if (this._frame.contentWindow.location.href == &quot;about:blank&quot;) {</span>
<a href="#l11.158"></a><span id="l11.158">           this._frame.removeEventListener(&quot;load&quot;, onBlankLoad);</span>
<a href="#l11.159"></a><span id="l11.159">           // We're now officially done closing, so update the state to reflect that.</span>
<a href="#l11.160"></a><span id="l11.160">           this._openedURL = null;</span>
<a href="#l11.161"></a><span id="l11.161" class="difflineat">@@ -122,17 +149,17 @@ var gSubDialog = {</span>
<a href="#l11.162"></a><span id="l11.162">           this._resolveClosePromise();</span>
<a href="#l11.163"></a><span id="l11.163">         }</span>
<a href="#l11.164"></a><span id="l11.164">       };</span>
<a href="#l11.165"></a><span id="l11.165">       this._frame.addEventListener(&quot;load&quot;, onBlankLoad);</span>
<a href="#l11.166"></a><span id="l11.166">       this._frame.loadURI(&quot;about:blank&quot;);</span>
<a href="#l11.167"></a><span id="l11.167">     }, 0);</span>
<a href="#l11.168"></a><span id="l11.168">   },</span>
<a href="#l11.169"></a><span id="l11.169"> </span>
<a href="#l11.170"></a><span id="l11.170" class="difflineminus">-  handleEvent: function(aEvent) {</span>
<a href="#l11.171"></a><span id="l11.171" class="difflineplus">+  handleEvent(aEvent) {</span>
<a href="#l11.172"></a><span id="l11.172">     switch (aEvent.type) {</span>
<a href="#l11.173"></a><span id="l11.173">       case &quot;click&quot;:</span>
<a href="#l11.174"></a><span id="l11.174">         // Close the dialog if the user clicked the overlay background, just</span>
<a href="#l11.175"></a><span id="l11.175">         // like when the user presses the ESC key (case &quot;command&quot; below).</span>
<a href="#l11.176"></a><span id="l11.176">         if (aEvent.target === this._overlay) {</span>
<a href="#l11.177"></a><span id="l11.177">           this._frame.contentWindow.close();</span>
<a href="#l11.178"></a><span id="l11.178">         }</span>
<a href="#l11.179"></a><span id="l11.179">         break;</span>
<a href="#l11.180"></a><span id="l11.180" class="difflineat">@@ -160,73 +187,73 @@ var gSubDialog = {</span>
<a href="#l11.181"></a><span id="l11.181">       case &quot;focus&quot;:</span>
<a href="#l11.182"></a><span id="l11.182">         this._onParentWinFocus(aEvent);</span>
<a href="#l11.183"></a><span id="l11.183">         break;</span>
<a href="#l11.184"></a><span id="l11.184">     }</span>
<a href="#l11.185"></a><span id="l11.185">   },</span>
<a href="#l11.186"></a><span id="l11.186"> </span>
<a href="#l11.187"></a><span id="l11.187">   /* Private methods */</span>
<a href="#l11.188"></a><span id="l11.188"> </span>
<a href="#l11.189"></a><span id="l11.189" class="difflineminus">-  _onUnload: function(aEvent) {</span>
<a href="#l11.190"></a><span id="l11.190" class="difflineplus">+  _onUnload(aEvent) {</span>
<a href="#l11.191"></a><span id="l11.191">     if (aEvent.target.location.href == this._openedURL) {</span>
<a href="#l11.192"></a><span id="l11.192">       this._frame.contentWindow.close();</span>
<a href="#l11.193"></a><span id="l11.193">     }</span>
<a href="#l11.194"></a><span id="l11.194">   },</span>
<a href="#l11.195"></a><span id="l11.195"> </span>
<a href="#l11.196"></a><span id="l11.196" class="difflineminus">-  _onContentLoaded: function(aEvent) {</span>
<a href="#l11.197"></a><span id="l11.197" class="difflineplus">+  _onContentLoaded(aEvent) {</span>
<a href="#l11.198"></a><span id="l11.198">     if (aEvent.target != this._frame || aEvent.target.contentWindow.location == &quot;about:blank&quot;) {</span>
<a href="#l11.199"></a><span id="l11.199">       return;</span>
<a href="#l11.200"></a><span id="l11.200">     }</span>
<a href="#l11.201"></a><span id="l11.201"> </span>
<a href="#l11.202"></a><span id="l11.202">     for (let styleSheetURL of this._injectedStyleSheets) {</span>
<a href="#l11.203"></a><span id="l11.203">       this.injectXMLStylesheet(styleSheetURL);</span>
<a href="#l11.204"></a><span id="l11.204">     }</span>
<a href="#l11.205"></a><span id="l11.205"> </span>
<a href="#l11.206"></a><span id="l11.206">     // Provide the ability for the dialog to know that it is being loaded &quot;in-content&quot;.</span>
<a href="#l11.207"></a><span id="l11.207">     this._frame.contentDocument.documentElement.setAttribute(&quot;subdialog&quot;, &quot;true&quot;);</span>
<a href="#l11.208"></a><span id="l11.208"> </span>
<a href="#l11.209"></a><span id="l11.209">     this._frame.contentWindow.addEventListener(&quot;dialogclosing&quot;, this);</span>
<a href="#l11.210"></a><span id="l11.210"> </span>
<a href="#l11.211"></a><span id="l11.211">     let oldResizeBy = this._frame.contentWindow.resizeBy;</span>
<a href="#l11.212"></a><span id="l11.212" class="difflineminus">-    this._frame.contentWindow.resizeBy = function(resizeByWidth, resizeByHeight) {</span>
<a href="#l11.213"></a><span id="l11.213" class="difflineplus">+    this._frame.contentWindow.resizeBy = (resizeByWidth, resizeByHeight) =&gt; {</span>
<a href="#l11.214"></a><span id="l11.214">       // Only handle resizeByHeight currently.</span>
<a href="#l11.215"></a><span id="l11.215" class="difflineminus">-      let frameHeight = gSubDialog._frame.clientHeight;</span>
<a href="#l11.216"></a><span id="l11.216" class="difflineminus">-      let boxMinHeight = parseFloat(getComputedStyle(gSubDialog._box).minHeight, 10);</span>
<a href="#l11.217"></a><span id="l11.217" class="difflineplus">+      let frameHeight = this._frame.clientHeight;</span>
<a href="#l11.218"></a><span id="l11.218" class="difflineplus">+      let boxMinHeight = parseFloat(getComputedStyle(this._box).minHeight, 10);</span>
<a href="#l11.219"></a><span id="l11.219"> </span>
<a href="#l11.220"></a><span id="l11.220" class="difflineminus">-      gSubDialog._frame.style.height = (frameHeight + resizeByHeight) + &quot;px&quot;;</span>
<a href="#l11.221"></a><span id="l11.221" class="difflineminus">-      gSubDialog._box.style.minHeight = (boxMinHeight + resizeByHeight) + &quot;px&quot;;</span>
<a href="#l11.222"></a><span id="l11.222" class="difflineplus">+      this._frame.style.height = (frameHeight + resizeByHeight) + &quot;px&quot;;</span>
<a href="#l11.223"></a><span id="l11.223" class="difflineplus">+      this._box.style.minHeight = (boxMinHeight + resizeByHeight) + &quot;px&quot;;</span>
<a href="#l11.224"></a><span id="l11.224"> </span>
<a href="#l11.225"></a><span id="l11.225" class="difflineminus">-      oldResizeBy.call(gSubDialog._frame.contentWindow, resizeByWidth, resizeByHeight);</span>
<a href="#l11.226"></a><span id="l11.226" class="difflineplus">+      oldResizeBy.call(this._frame.contentWindow, resizeByWidth, resizeByHeight);</span>
<a href="#l11.227"></a><span id="l11.227">     };</span>
<a href="#l11.228"></a><span id="l11.228"> </span>
<a href="#l11.229"></a><span id="l11.229">     // Make window.close calls work like dialog closing.</span>
<a href="#l11.230"></a><span id="l11.230">     let oldClose = this._frame.contentWindow.close;</span>
<a href="#l11.231"></a><span id="l11.231" class="difflineminus">-    this._frame.contentWindow.close = function() {</span>
<a href="#l11.232"></a><span id="l11.232" class="difflineminus">-      var closingEvent = gSubDialog._closingEvent;</span>
<a href="#l11.233"></a><span id="l11.233" class="difflineplus">+    this._frame.contentWindow.close = () =&gt; {</span>
<a href="#l11.234"></a><span id="l11.234" class="difflineplus">+      var closingEvent = this._closingEvent;</span>
<a href="#l11.235"></a><span id="l11.235">       if (!closingEvent) {</span>
<a href="#l11.236"></a><span id="l11.236">         closingEvent = new CustomEvent(&quot;dialogclosing&quot;, {</span>
<a href="#l11.237"></a><span id="l11.237">           bubbles: true,</span>
<a href="#l11.238"></a><span id="l11.238">           detail: { button: null },</span>
<a href="#l11.239"></a><span id="l11.239">         });</span>
<a href="#l11.240"></a><span id="l11.240"> </span>
<a href="#l11.241"></a><span id="l11.241" class="difflineminus">-        gSubDialog._frame.contentWindow.dispatchEvent(closingEvent);</span>
<a href="#l11.242"></a><span id="l11.242" class="difflineplus">+        this._frame.contentWindow.dispatchEvent(closingEvent);</span>
<a href="#l11.243"></a><span id="l11.243">       }</span>
<a href="#l11.244"></a><span id="l11.244"> </span>
<a href="#l11.245"></a><span id="l11.245" class="difflineminus">-      gSubDialog.close(closingEvent);</span>
<a href="#l11.246"></a><span id="l11.246" class="difflineminus">-      oldClose.call(gSubDialog._frame.contentWindow);</span>
<a href="#l11.247"></a><span id="l11.247" class="difflineplus">+      this.close(closingEvent);</span>
<a href="#l11.248"></a><span id="l11.248" class="difflineplus">+      oldClose.call(this._frame.contentWindow);</span>
<a href="#l11.249"></a><span id="l11.249">     };</span>
<a href="#l11.250"></a><span id="l11.250"> </span>
<a href="#l11.251"></a><span id="l11.251">     // XXX: Hack to make focus during the dialog's load functions work. Make the element visible</span>
<a href="#l11.252"></a><span id="l11.252">     // sooner in DOMContentLoaded but mostly invisible instead of changing visibility just before</span>
<a href="#l11.253"></a><span id="l11.253">     // the dialog's load event.</span>
<a href="#l11.254"></a><span id="l11.254">     this._overlay.style.visibility = &quot;visible&quot;;</span>
<a href="#l11.255"></a><span id="l11.255">     this._overlay.style.opacity = &quot;0.01&quot;;</span>
<a href="#l11.256"></a><span id="l11.256">   },</span>
<a href="#l11.257"></a><span id="l11.257"> </span>
<a href="#l11.258"></a><span id="l11.258" class="difflineminus">-  _onLoad: function(aEvent) {</span>
<a href="#l11.259"></a><span id="l11.259" class="difflineplus">+  _onLoad(aEvent) {</span>
<a href="#l11.260"></a><span id="l11.260">     if (aEvent.target.contentWindow.location == &quot;about:blank&quot;) {</span>
<a href="#l11.261"></a><span id="l11.261">       return;</span>
<a href="#l11.262"></a><span id="l11.262">     }</span>
<a href="#l11.263"></a><span id="l11.263"> </span>
<a href="#l11.264"></a><span id="l11.264">     // Do this on load to wait for the CSS to load and apply before calculating the size.</span>
<a href="#l11.265"></a><span id="l11.265">     let docEl = this._frame.contentDocument.documentElement;</span>
<a href="#l11.266"></a><span id="l11.266"> </span>
<a href="#l11.267"></a><span id="l11.267">     let groupBoxTitle = document.getAnonymousElementByAttribute(this._box, &quot;class&quot;, &quot;groupbox-title&quot;);</span>
<a href="#l11.268"></a><span id="l11.268" class="difflineat">@@ -279,40 +306,44 @@ var gSubDialog = {</span>
<a href="#l11.269"></a><span id="l11.269">                      &quot;Please consider changing this.&quot;);</span>
<a href="#l11.270"></a><span id="l11.270">       comparisonFrameHeight = parseFloat(frameHeight);</span>
<a href="#l11.271"></a><span id="l11.271">     }</span>
<a href="#l11.272"></a><span id="l11.272"> </span>
<a href="#l11.273"></a><span id="l11.273">     if (comparisonFrameHeight &gt; maxHeight) {</span>
<a href="#l11.274"></a><span id="l11.274">       // If the height is bigger than that of the window, we should let the contents scroll:</span>
<a href="#l11.275"></a><span id="l11.275">       frameHeight = maxHeight + &quot;px&quot;;</span>
<a href="#l11.276"></a><span id="l11.276">       frameMinHeight = maxHeight + &quot;px&quot;;</span>
<a href="#l11.277"></a><span id="l11.277" class="difflineminus">-      let containers = this._frame.contentDocument.querySelectorAll('.largeDialogContainer');</span>
<a href="#l11.278"></a><span id="l11.278" class="difflineplus">+      let containers = this._frame.contentDocument.querySelectorAll(&quot;.largeDialogContainer&quot;);</span>
<a href="#l11.279"></a><span id="l11.279">       for (let container of containers) {</span>
<a href="#l11.280"></a><span id="l11.280">         container.classList.add(&quot;doScroll&quot;);</span>
<a href="#l11.281"></a><span id="l11.281">       }</span>
<a href="#l11.282"></a><span id="l11.282">     }</span>
<a href="#l11.283"></a><span id="l11.283"> </span>
<a href="#l11.284"></a><span id="l11.284">     this._frame.style.height = frameHeight;</span>
<a href="#l11.285"></a><span id="l11.285">     this._box.style.minHeight = &quot;calc(&quot; +</span>
<a href="#l11.286"></a><span id="l11.286">                                 (boxVerticalBorder + groupBoxTitleHeight + boxVerticalPadding) +</span>
<a href="#l11.287"></a><span id="l11.287">                                 &quot;px + &quot; + frameMinHeight + &quot;)&quot;;</span>
<a href="#l11.288"></a><span id="l11.288"> </span>
<a href="#l11.289"></a><span id="l11.289" class="difflineplus">+    this._overlay.dispatchEvent(new CustomEvent(&quot;dialogopen&quot;, {</span>
<a href="#l11.290"></a><span id="l11.290" class="difflineplus">+      bubbles: true,</span>
<a href="#l11.291"></a><span id="l11.291" class="difflineplus">+      detail: { dialog: this },</span>
<a href="#l11.292"></a><span id="l11.292" class="difflineplus">+    }));</span>
<a href="#l11.293"></a><span id="l11.293">     this._overlay.style.visibility = &quot;visible&quot;;</span>
<a href="#l11.294"></a><span id="l11.294">     this._overlay.style.opacity = &quot;&quot;; // XXX: focus hack continued from _onContentLoaded</span>
<a href="#l11.295"></a><span id="l11.295"> </span>
<a href="#l11.296"></a><span id="l11.296">     if (this._box.getAttribute(&quot;resizable&quot;) == &quot;true&quot;) {</span>
<a href="#l11.297"></a><span id="l11.297">       this._resizeObserver = new MutationObserver(this._onResize);</span>
<a href="#l11.298"></a><span id="l11.298">       this._resizeObserver.observe(this._box, {attributes: true});</span>
<a href="#l11.299"></a><span id="l11.299">     }</span>
<a href="#l11.300"></a><span id="l11.300"> </span>
<a href="#l11.301"></a><span id="l11.301">     this._trapFocus();</span>
<a href="#l11.302"></a><span id="l11.302">   },</span>
<a href="#l11.303"></a><span id="l11.303"> </span>
<a href="#l11.304"></a><span id="l11.304" class="difflineminus">-  _onResize: function(mutations) {</span>
<a href="#l11.305"></a><span id="l11.305" class="difflineminus">-    let frame = gSubDialog._frame;</span>
<a href="#l11.306"></a><span id="l11.306" class="difflineplus">+  _onResize(mutations) {</span>
<a href="#l11.307"></a><span id="l11.307" class="difflineplus">+    let frame = this._frame;</span>
<a href="#l11.308"></a><span id="l11.308">     // The width and height styles are needed for the initial</span>
<a href="#l11.309"></a><span id="l11.309">     // layout of the frame, but afterward they need to be removed</span>
<a href="#l11.310"></a><span id="l11.310">     // or their presence will restrict the contents of the &lt;browser&gt;</span>
<a href="#l11.311"></a><span id="l11.311">     // from resizing to a smaller size.</span>
<a href="#l11.312"></a><span id="l11.312">     frame.style.removeProperty(&quot;width&quot;);</span>
<a href="#l11.313"></a><span id="l11.313">     frame.style.removeProperty(&quot;height&quot;);</span>
<a href="#l11.314"></a><span id="l11.314"> </span>
<a href="#l11.315"></a><span id="l11.315">     let docEl = frame.contentDocument.documentElement;</span>
<a href="#l11.316"></a><span id="l11.316" class="difflineat">@@ -327,41 +358,41 @@ var gSubDialog = {</span>
<a href="#l11.317"></a><span id="l11.317">       if (mutation.attributeName == &quot;width&quot;) {</span>
<a href="#l11.318"></a><span id="l11.318">         docEl.setAttribute(&quot;width&quot;, docEl.scrollWidth);</span>
<a href="#l11.319"></a><span id="l11.319">       } else if (mutation.attributeName == &quot;height&quot;) {</span>
<a href="#l11.320"></a><span id="l11.320">         docEl.setAttribute(&quot;height&quot;, docEl.scrollHeight);</span>
<a href="#l11.321"></a><span id="l11.321">       }</span>
<a href="#l11.322"></a><span id="l11.322">     }</span>
<a href="#l11.323"></a><span id="l11.323">   },</span>
<a href="#l11.324"></a><span id="l11.324"> </span>
<a href="#l11.325"></a><span id="l11.325" class="difflineminus">-  _onDialogClosing: function(aEvent) {</span>
<a href="#l11.326"></a><span id="l11.326" class="difflineplus">+  _onDialogClosing(aEvent) {</span>
<a href="#l11.327"></a><span id="l11.327">     this._frame.contentWindow.removeEventListener(&quot;dialogclosing&quot;, this);</span>
<a href="#l11.328"></a><span id="l11.328">     this._closingEvent = aEvent;</span>
<a href="#l11.329"></a><span id="l11.329">   },</span>
<a href="#l11.330"></a><span id="l11.330"> </span>
<a href="#l11.331"></a><span id="l11.331" class="difflineminus">-  _onKeyDown: function(aEvent) {</span>
<a href="#l11.332"></a><span id="l11.332" class="difflineplus">+  _onKeyDown(aEvent) {</span>
<a href="#l11.333"></a><span id="l11.333">     if (aEvent.currentTarget == window &amp;&amp; aEvent.keyCode == aEvent.DOM_VK_ESCAPE &amp;&amp;</span>
<a href="#l11.334"></a><span id="l11.334">         !aEvent.defaultPrevented) {</span>
<a href="#l11.335"></a><span id="l11.335">       this.close(aEvent);</span>
<a href="#l11.336"></a><span id="l11.336">       return;</span>
<a href="#l11.337"></a><span id="l11.337">     }</span>
<a href="#l11.338"></a><span id="l11.338">     if (aEvent.keyCode != aEvent.DOM_VK_TAB ||</span>
<a href="#l11.339"></a><span id="l11.339">         aEvent.ctrlKey || aEvent.altKey || aEvent.metaKey) {</span>
<a href="#l11.340"></a><span id="l11.340">       return;</span>
<a href="#l11.341"></a><span id="l11.341">     }</span>
<a href="#l11.342"></a><span id="l11.342"> </span>
<a href="#l11.343"></a><span id="l11.343">     let fm = Services.focus;</span>
<a href="#l11.344"></a><span id="l11.344"> </span>
<a href="#l11.345"></a><span id="l11.345" class="difflineminus">-    function isLastFocusableElement(el) {</span>
<a href="#l11.346"></a><span id="l11.346" class="difflineminus">-      //XXXgijs unfortunately there is no way to get the last focusable element without asking</span>
<a href="#l11.347"></a><span id="l11.347" class="difflineplus">+    let isLastFocusableElement = el =&gt; {</span>
<a href="#l11.348"></a><span id="l11.348" class="difflineplus">+      // XXXgijs unfortunately there is no way to get the last focusable element without asking</span>
<a href="#l11.349"></a><span id="l11.349">       // the focus manager to move focus to it.</span>
<a href="#l11.350"></a><span id="l11.350" class="difflineminus">-      let rv = el == fm.moveFocus(gSubDialog._frame.contentWindow, null, fm.MOVEFOCUS_LAST, 0);</span>
<a href="#l11.351"></a><span id="l11.351" class="difflineplus">+      let rv = el == fm.moveFocus(this._frame.contentWindow, null, fm.MOVEFOCUS_LAST, 0);</span>
<a href="#l11.352"></a><span id="l11.352">       fm.setFocus(el, 0);</span>
<a href="#l11.353"></a><span id="l11.353">       return rv;</span>
<a href="#l11.354"></a><span id="l11.354" class="difflineminus">-    }</span>
<a href="#l11.355"></a><span id="l11.355" class="difflineplus">+    };</span>
<a href="#l11.356"></a><span id="l11.356"> </span>
<a href="#l11.357"></a><span id="l11.357">     let forward = !aEvent.shiftKey;</span>
<a href="#l11.358"></a><span id="l11.358">     // check if focus is leaving the frame (incl. the close button):</span>
<a href="#l11.359"></a><span id="l11.359">     if ((aEvent.target == this._closeButton &amp;&amp; !forward) ||</span>
<a href="#l11.360"></a><span id="l11.360">         (isLastFocusableElement(aEvent.originalTarget) &amp;&amp; forward)) {</span>
<a href="#l11.361"></a><span id="l11.361">       aEvent.preventDefault();</span>
<a href="#l11.362"></a><span id="l11.362">       aEvent.stopImmediatePropagation();</span>
<a href="#l11.363"></a><span id="l11.363">       let parentWin = this._getBrowser().ownerGlobal;</span>
<a href="#l11.364"></a><span id="l11.364" class="difflineat">@@ -370,25 +401,25 @@ var gSubDialog = {</span>
<a href="#l11.365"></a><span id="l11.365">       } else {</span>
<a href="#l11.366"></a><span id="l11.366">         // Somehow, moving back 'past' the opening doc is not trivial. Cheat by doing it in 2 steps:</span>
<a href="#l11.367"></a><span id="l11.367">         fm.moveFocus(window, null, fm.MOVEFOCUS_ROOT, fm.FLAG_BYKEY);</span>
<a href="#l11.368"></a><span id="l11.368">         fm.moveFocus(parentWin, null, fm.MOVEFOCUS_BACKWARD, fm.FLAG_BYKEY);</span>
<a href="#l11.369"></a><span id="l11.369">       }</span>
<a href="#l11.370"></a><span id="l11.370">     }</span>
<a href="#l11.371"></a><span id="l11.371">   },</span>
<a href="#l11.372"></a><span id="l11.372"> </span>
<a href="#l11.373"></a><span id="l11.373" class="difflineminus">-  _onParentWinFocus: function(aEvent) {</span>
<a href="#l11.374"></a><span id="l11.374" class="difflineplus">+  _onParentWinFocus(aEvent) {</span>
<a href="#l11.375"></a><span id="l11.375">     // Explicitly check for the focus target of |window| to avoid triggering this when the window</span>
<a href="#l11.376"></a><span id="l11.376">     // is refocused</span>
<a href="#l11.377"></a><span id="l11.377">     if (aEvent.target != this._closeButton &amp;&amp; aEvent.target != window) {</span>
<a href="#l11.378"></a><span id="l11.378">       this._closeButton.focus();</span>
<a href="#l11.379"></a><span id="l11.379">     }</span>
<a href="#l11.380"></a><span id="l11.380">   },</span>
<a href="#l11.381"></a><span id="l11.381"> </span>
<a href="#l11.382"></a><span id="l11.382" class="difflineminus">-  _addDialogEventListeners: function() {</span>
<a href="#l11.383"></a><span id="l11.383" class="difflineplus">+  _addDialogEventListeners() {</span>
<a href="#l11.384"></a><span id="l11.384">     // Make the close button work.</span>
<a href="#l11.385"></a><span id="l11.385">     this._closeButton.addEventListener(&quot;command&quot;, this);</span>
<a href="#l11.386"></a><span id="l11.386"> </span>
<a href="#l11.387"></a><span id="l11.387">     // DOMTitleChanged isn't fired on the frame, only on the chromeEventHandler</span>
<a href="#l11.388"></a><span id="l11.388">     let chromeBrowser = this._getBrowser();</span>
<a href="#l11.389"></a><span id="l11.389">     chromeBrowser.addEventListener(&quot;DOMTitleChanged&quot;, this, true);</span>
<a href="#l11.390"></a><span id="l11.390"> </span>
<a href="#l11.391"></a><span id="l11.391">     // Similarly DOMFrameContentLoaded only fires on the top window</span>
<a href="#l11.392"></a><span id="l11.392" class="difflineat">@@ -403,17 +434,17 @@ var gSubDialog = {</span>
<a href="#l11.393"></a><span id="l11.393">     // Ensure we get &lt;esc&gt; keypresses even if nothing in the subdialog is focusable</span>
<a href="#l11.394"></a><span id="l11.394">     // (happens on OS X when only text inputs and lists are focusable, and</span>
<a href="#l11.395"></a><span id="l11.395">     //  the subdialog only has checkboxes/radiobuttons/buttons)</span>
<a href="#l11.396"></a><span id="l11.396">     window.addEventListener(&quot;keydown&quot;, this, true);</span>
<a href="#l11.397"></a><span id="l11.397"> </span>
<a href="#l11.398"></a><span id="l11.398">     this._overlay.addEventListener(&quot;click&quot;, this, true);</span>
<a href="#l11.399"></a><span id="l11.399">   },</span>
<a href="#l11.400"></a><span id="l11.400"> </span>
<a href="#l11.401"></a><span id="l11.401" class="difflineminus">-  _removeDialogEventListeners: function() {</span>
<a href="#l11.402"></a><span id="l11.402" class="difflineplus">+  _removeDialogEventListeners() {</span>
<a href="#l11.403"></a><span id="l11.403">     let chromeBrowser = this._getBrowser();</span>
<a href="#l11.404"></a><span id="l11.404">     chromeBrowser.removeEventListener(&quot;DOMTitleChanged&quot;, this, true);</span>
<a href="#l11.405"></a><span id="l11.405">     chromeBrowser.removeEventListener(&quot;unload&quot;, this, true);</span>
<a href="#l11.406"></a><span id="l11.406"> </span>
<a href="#l11.407"></a><span id="l11.407">     this._closeButton.removeEventListener(&quot;command&quot;, this);</span>
<a href="#l11.408"></a><span id="l11.408"> </span>
<a href="#l11.409"></a><span id="l11.409">     window.removeEventListener(&quot;DOMFrameContentLoaded&quot;, this, true);</span>
<a href="#l11.410"></a><span id="l11.410">     this._frame.removeEventListener(&quot;load&quot;, this);</span>
<a href="#l11.411"></a><span id="l11.411" class="difflineat">@@ -424,30 +455,131 @@ var gSubDialog = {</span>
<a href="#l11.412"></a><span id="l11.412"> </span>
<a href="#l11.413"></a><span id="l11.413">     if (this._resizeObserver) {</span>
<a href="#l11.414"></a><span id="l11.414">       this._resizeObserver.disconnect();</span>
<a href="#l11.415"></a><span id="l11.415">       this._resizeObserver = null;</span>
<a href="#l11.416"></a><span id="l11.416">     }</span>
<a href="#l11.417"></a><span id="l11.417">     this._untrapFocus();</span>
<a href="#l11.418"></a><span id="l11.418">   },</span>
<a href="#l11.419"></a><span id="l11.419"> </span>
<a href="#l11.420"></a><span id="l11.420" class="difflineminus">-  _trapFocus: function() {</span>
<a href="#l11.421"></a><span id="l11.421" class="difflineplus">+  _trapFocus() {</span>
<a href="#l11.422"></a><span id="l11.422">     let fm = Services.focus;</span>
<a href="#l11.423"></a><span id="l11.423">     fm.moveFocus(this._frame.contentWindow, null, fm.MOVEFOCUS_FIRST, 0);</span>
<a href="#l11.424"></a><span id="l11.424">     this._frame.contentDocument.addEventListener(&quot;keydown&quot;, this, true);</span>
<a href="#l11.425"></a><span id="l11.425">     this._closeButton.addEventListener(&quot;keydown&quot;, this);</span>
<a href="#l11.426"></a><span id="l11.426"> </span>
<a href="#l11.427"></a><span id="l11.427">     window.addEventListener(&quot;focus&quot;, this, true);</span>
<a href="#l11.428"></a><span id="l11.428">   },</span>
<a href="#l11.429"></a><span id="l11.429"> </span>
<a href="#l11.430"></a><span id="l11.430" class="difflineminus">-  _untrapFocus: function() {</span>
<a href="#l11.431"></a><span id="l11.431" class="difflineplus">+  _untrapFocus() {</span>
<a href="#l11.432"></a><span id="l11.432">     this._frame.contentDocument.removeEventListener(&quot;keydown&quot;, this, true);</span>
<a href="#l11.433"></a><span id="l11.433">     this._closeButton.removeEventListener(&quot;keydown&quot;, this);</span>
<a href="#l11.434"></a><span id="l11.434">     window.removeEventListener(&quot;focus&quot;, this);</span>
<a href="#l11.435"></a><span id="l11.435">   },</span>
<a href="#l11.436"></a><span id="l11.436"> </span>
<a href="#l11.437"></a><span id="l11.437" class="difflineminus">-  _getBrowser: function() {</span>
<a href="#l11.438"></a><span id="l11.438" class="difflineplus">+  _getBrowser() {</span>
<a href="#l11.439"></a><span id="l11.439">     return window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l11.440"></a><span id="l11.440">                  .getInterface(Components.interfaces.nsIWebNavigation)</span>
<a href="#l11.441"></a><span id="l11.441">                  .QueryInterface(Components.interfaces.nsIDocShell)</span>
<a href="#l11.442"></a><span id="l11.442">                  .chromeEventHandler;</span>
<a href="#l11.443"></a><span id="l11.443">   },</span>
<a href="#l11.444"></a><span id="l11.444"> };</span>
<a href="#l11.445"></a><span id="l11.445" class="difflineplus">+</span>
<a href="#l11.446"></a><span id="l11.446" class="difflineplus">+var gSubDialog = {</span>
<a href="#l11.447"></a><span id="l11.447" class="difflineplus">+  /**</span>
<a href="#l11.448"></a><span id="l11.448" class="difflineplus">+   * New dialogs are stacked on top of the existing ones, and they are pushed</span>
<a href="#l11.449"></a><span id="l11.449" class="difflineplus">+   * to the end of the _dialogs array.</span>
<a href="#l11.450"></a><span id="l11.450" class="difflineplus">+   * @type {Array}</span>
<a href="#l11.451"></a><span id="l11.451" class="difflineplus">+   */</span>
<a href="#l11.452"></a><span id="l11.452" class="difflineplus">+  _dialogs: [],</span>
<a href="#l11.453"></a><span id="l11.453" class="difflineplus">+  _dialogStack: null,</span>
<a href="#l11.454"></a><span id="l11.454" class="difflineplus">+  _dialogTemplate: null,</span>
<a href="#l11.455"></a><span id="l11.455" class="difflineplus">+  _nextDialogID: 0,</span>
<a href="#l11.456"></a><span id="l11.456" class="difflineplus">+  _preloadDialog: null,</span>
<a href="#l11.457"></a><span id="l11.457" class="difflineplus">+  get _topDialog() {</span>
<a href="#l11.458"></a><span id="l11.458" class="difflineplus">+    return this._dialogs.length &gt; 0 ? this._dialogs[this._dialogs.length - 1] : undefined;</span>
<a href="#l11.459"></a><span id="l11.459" class="difflineplus">+  },</span>
<a href="#l11.460"></a><span id="l11.460" class="difflineplus">+</span>
<a href="#l11.461"></a><span id="l11.461" class="difflineplus">+  init() {</span>
<a href="#l11.462"></a><span id="l11.462" class="difflineplus">+    this._dialogStack = document.getElementById(&quot;dialogStack&quot;);</span>
<a href="#l11.463"></a><span id="l11.463" class="difflineplus">+    this._dialogTemplate = document.getElementById(&quot;dialogTemplate&quot;);</span>
<a href="#l11.464"></a><span id="l11.464" class="difflineplus">+    this._preloadDialog = new SubDialog({template: this._dialogTemplate,</span>
<a href="#l11.465"></a><span id="l11.465" class="difflineplus">+                                         parentElement: this._dialogStack,</span>
<a href="#l11.466"></a><span id="l11.466" class="difflineplus">+                                         id: this._nextDialogID++});</span>
<a href="#l11.467"></a><span id="l11.467" class="difflineplus">+  },</span>
<a href="#l11.468"></a><span id="l11.468" class="difflineplus">+</span>
<a href="#l11.469"></a><span id="l11.469" class="difflineplus">+  open(aURL, aFeatures = null, aParams = null, aClosingCallback = null) {</span>
<a href="#l11.470"></a><span id="l11.470" class="difflineplus">+    // If we're already open/opening on this URL, do nothing.</span>
<a href="#l11.471"></a><span id="l11.471" class="difflineplus">+    if (this._topDialog &amp;&amp; this._topDialog._openedURL == aURL) {</span>
<a href="#l11.472"></a><span id="l11.472" class="difflineplus">+      return;</span>
<a href="#l11.473"></a><span id="l11.473" class="difflineplus">+    }</span>
<a href="#l11.474"></a><span id="l11.474" class="difflineplus">+</span>
<a href="#l11.475"></a><span id="l11.475" class="difflineplus">+    this._preloadDialog.open(aURL, aFeatures, aParams, aClosingCallback);</span>
<a href="#l11.476"></a><span id="l11.476" class="difflineplus">+    this._dialogs.push(this._preloadDialog);</span>
<a href="#l11.477"></a><span id="l11.477" class="difflineplus">+    this._preloadDialog = new SubDialog({template: this._dialogTemplate,</span>
<a href="#l11.478"></a><span id="l11.478" class="difflineplus">+                                         parentElement: this._dialogStack,</span>
<a href="#l11.479"></a><span id="l11.479" class="difflineplus">+                                         id: this._nextDialogID++});</span>
<a href="#l11.480"></a><span id="l11.480" class="difflineplus">+</span>
<a href="#l11.481"></a><span id="l11.481" class="difflineplus">+    if (this._dialogs.length == 1) {</span>
<a href="#l11.482"></a><span id="l11.482" class="difflineplus">+      this._dialogStack.hidden = false;</span>
<a href="#l11.483"></a><span id="l11.483" class="difflineplus">+      this._ensureStackEventListeners();</span>
<a href="#l11.484"></a><span id="l11.484" class="difflineplus">+    }</span>
<a href="#l11.485"></a><span id="l11.485" class="difflineplus">+  },</span>
<a href="#l11.486"></a><span id="l11.486" class="difflineplus">+</span>
<a href="#l11.487"></a><span id="l11.487" class="difflineplus">+  close() {</span>
<a href="#l11.488"></a><span id="l11.488" class="difflineplus">+    this._topDialog.close();</span>
<a href="#l11.489"></a><span id="l11.489" class="difflineplus">+  },</span>
<a href="#l11.490"></a><span id="l11.490" class="difflineplus">+</span>
<a href="#l11.491"></a><span id="l11.491" class="difflineplus">+  handleEvent(aEvent) {</span>
<a href="#l11.492"></a><span id="l11.492" class="difflineplus">+    switch (aEvent.type) {</span>
<a href="#l11.493"></a><span id="l11.493" class="difflineplus">+      case &quot;dialogopen&quot;: {</span>
<a href="#l11.494"></a><span id="l11.494" class="difflineplus">+        this._onDialogOpen();</span>
<a href="#l11.495"></a><span id="l11.495" class="difflineplus">+        break;</span>
<a href="#l11.496"></a><span id="l11.496" class="difflineplus">+      }</span>
<a href="#l11.497"></a><span id="l11.497" class="difflineplus">+      case &quot;dialogclose&quot;: {</span>
<a href="#l11.498"></a><span id="l11.498" class="difflineplus">+        this._onDialogClose(aEvent.detail.dialog);</span>
<a href="#l11.499"></a><span id="l11.499" class="difflineplus">+        break;</span>
<a href="#l11.500"></a><span id="l11.500" class="difflineplus">+      }</span>
<a href="#l11.501"></a><span id="l11.501" class="difflineplus">+    }</span>
<a href="#l11.502"></a><span id="l11.502" class="difflineplus">+  },</span>
<a href="#l11.503"></a><span id="l11.503" class="difflineplus">+</span>
<a href="#l11.504"></a><span id="l11.504" class="difflineplus">+  _onDialogOpen() {</span>
<a href="#l11.505"></a><span id="l11.505" class="difflineplus">+    let lowerDialog = this._dialogs.length &gt; 1 ? this._dialogs[this._dialogs.length - 2] : undefined;</span>
<a href="#l11.506"></a><span id="l11.506" class="difflineplus">+    if (lowerDialog) {</span>
<a href="#l11.507"></a><span id="l11.507" class="difflineplus">+      lowerDialog._overlay.removeAttribute(&quot;topmost&quot;);</span>
<a href="#l11.508"></a><span id="l11.508" class="difflineplus">+      lowerDialog._removeDialogEventListeners();</span>
<a href="#l11.509"></a><span id="l11.509" class="difflineplus">+    }</span>
<a href="#l11.510"></a><span id="l11.510" class="difflineplus">+  },</span>
<a href="#l11.511"></a><span id="l11.511" class="difflineplus">+</span>
<a href="#l11.512"></a><span id="l11.512" class="difflineplus">+  _onDialogClose(dialog) {</span>
<a href="#l11.513"></a><span id="l11.513" class="difflineplus">+    let fm = Services.focus;</span>
<a href="#l11.514"></a><span id="l11.514" class="difflineplus">+    if (this._topDialog == dialog) {</span>
<a href="#l11.515"></a><span id="l11.515" class="difflineplus">+      // XXX: When a top-most dialog is closed, we reuse the closed dialog and</span>
<a href="#l11.516"></a><span id="l11.516" class="difflineplus">+      //      remove the preloadDialog. This is a temporary solution before we</span>
<a href="#l11.517"></a><span id="l11.517" class="difflineplus">+      //      rewrite all the test cases in Bug 1359023.</span>
<a href="#l11.518"></a><span id="l11.518" class="difflineplus">+      this._preloadDialog._overlay.remove();</span>
<a href="#l11.519"></a><span id="l11.519" class="difflineplus">+      this._preloadDialog = this._dialogs.pop();</span>
<a href="#l11.520"></a><span id="l11.520" class="difflineplus">+    } else {</span>
<a href="#l11.521"></a><span id="l11.521" class="difflineplus">+      dialog._overlay.remove();</span>
<a href="#l11.522"></a><span id="l11.522" class="difflineplus">+      this._dialogs.splice(this._dialogs.indexOf(dialog), 1);</span>
<a href="#l11.523"></a><span id="l11.523" class="difflineplus">+    }</span>
<a href="#l11.524"></a><span id="l11.524" class="difflineplus">+</span>
<a href="#l11.525"></a><span id="l11.525" class="difflineplus">+    if (this._topDialog) {</span>
<a href="#l11.526"></a><span id="l11.526" class="difflineplus">+      fm.moveFocus(this._topDialog._frame.contentWindow, null, fm.MOVEFOCUS_FIRST, fm.FLAG_BYKEY);</span>
<a href="#l11.527"></a><span id="l11.527" class="difflineplus">+      this._topDialog._overlay.setAttribute(&quot;topmost&quot;, true);</span>
<a href="#l11.528"></a><span id="l11.528" class="difflineplus">+      this._topDialog._addDialogEventListeners();</span>
<a href="#l11.529"></a><span id="l11.529" class="difflineplus">+    } else {</span>
<a href="#l11.530"></a><span id="l11.530" class="difflineplus">+      fm.moveFocus(window, null, fm.MOVEFOCUS_ROOT, fm.FLAG_BYKEY);</span>
<a href="#l11.531"></a><span id="l11.531" class="difflineplus">+      this._dialogStack.hidden = true;</span>
<a href="#l11.532"></a><span id="l11.532" class="difflineplus">+      this._removeStackEventListeners();</span>
<a href="#l11.533"></a><span id="l11.533" class="difflineplus">+    }</span>
<a href="#l11.534"></a><span id="l11.534" class="difflineplus">+  },</span>
<a href="#l11.535"></a><span id="l11.535" class="difflineplus">+</span>
<a href="#l11.536"></a><span id="l11.536" class="difflineplus">+  _ensureStackEventListeners() {</span>
<a href="#l11.537"></a><span id="l11.537" class="difflineplus">+    this._dialogStack.addEventListener(&quot;dialogopen&quot;, this);</span>
<a href="#l11.538"></a><span id="l11.538" class="difflineplus">+    this._dialogStack.addEventListener(&quot;dialogclose&quot;, this);</span>
<a href="#l11.539"></a><span id="l11.539" class="difflineplus">+  },</span>
<a href="#l11.540"></a><span id="l11.540" class="difflineplus">+</span>
<a href="#l11.541"></a><span id="l11.541" class="difflineplus">+  _removeStackEventListeners() {</span>
<a href="#l11.542"></a><span id="l11.542" class="difflineplus">+    this._dialogStack.removeEventListener(&quot;dialogopen&quot;, this);</span>
<a href="#l11.543"></a><span id="l11.543" class="difflineplus">+    this._dialogStack.removeEventListener(&quot;dialogclose&quot;, this);</span>
<a href="#l11.544"></a><span id="l11.544" class="difflineplus">+  },</span>
<a href="#l11.545"></a><span id="l11.545" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/themes/shared/mail/incontentprefs/aboutPreferences.css</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/themes/shared/mail/incontentprefs/aboutPreferences.css</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -255,81 +255,69 @@ tabs {</span>
<a href="#l12.4"></a><span id="l12.4"> #monospace {</span>
<a href="#l12.5"></a><span id="l12.5">   min-width: 30ch;</span>
<a href="#l12.6"></a><span id="l12.6"> }</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> /**</span>
<a href="#l12.9"></a><span id="l12.9">  * Dialog</span>
<a href="#l12.10"></a><span id="l12.10">  */</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-#dialogOverlay {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-  position: absolute;</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-  top: 0;</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-  right: 0;</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-  bottom: 0;</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-  left: 0;</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+.dialogOverlay {</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+  visibility: hidden;</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+}</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+.dialogOverlay[topmost=&quot;true&quot;] {</span>
<a href="#l12.22"></a><span id="l12.22">   background-color: rgba(0,0,0,0.5);</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-  visibility: hidden;</span>
<a href="#l12.24"></a><span id="l12.24"> }</span>
<a href="#l12.25"></a><span id="l12.25"> </span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-#dialogContainer {</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-  -moz-box-align: center;</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-  -moz-box-pack: center;</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineminus">-  width: 100%;</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-  height: 100%;</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-  pointer-events: none;</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-}</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">-#dialogBox {</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+.dialogBox {</span>
<a href="#l12.36"></a><span id="l12.36">   background-color: #fbfbfb;</span>
<a href="#l12.37"></a><span id="l12.37">   color: #424e5a;</span>
<a href="#l12.38"></a><span id="l12.38">   font-size: 14px;</span>
<a href="#l12.39"></a><span id="l12.39">   /* `transparent` will use the dialogText color in high-contrast themes and</span>
<a href="#l12.40"></a><span id="l12.40">      when page colors are disabled */</span>
<a href="#l12.41"></a><span id="l12.41">   border: 1px solid transparent;</span>
<a href="#l12.42"></a><span id="l12.42">   border-radius: 2.5px;</span>
<a href="#l12.43"></a><span id="l12.43">   box-shadow: 0 2px 4px 0 rgba(0,0,0,0.5);</span>
<a href="#l12.44"></a><span id="l12.44">   display: -moz-box;</span>
<a href="#l12.45"></a><span id="l12.45">   margin: 0;</span>
<a href="#l12.46"></a><span id="l12.46">   padding: 0;</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-  pointer-events: auto;</span>
<a href="#l12.48"></a><span id="l12.48"> }</span>
<a href="#l12.49"></a><span id="l12.49"> </span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-#dialogBox[resizable=&quot;true&quot;] {</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+.dialogBox[resizable=&quot;true&quot;] {</span>
<a href="#l12.52"></a><span id="l12.52">   resize: both;</span>
<a href="#l12.53"></a><span id="l12.53">   overflow: hidden;</span>
<a href="#l12.54"></a><span id="l12.54">   min-height: 20em;</span>
<a href="#l12.55"></a><span id="l12.55">   min-width: 66ch;</span>
<a href="#l12.56"></a><span id="l12.56"> }</span>
<a href="#l12.57"></a><span id="l12.57"> </span>
<a href="#l12.58"></a><span id="l12.58" class="difflineminus">-#dialogBox &gt; .groupbox-title {</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineplus">+.dialogBox &gt; .groupbox-title {</span>
<a href="#l12.60"></a><span id="l12.60">   padding: 3.5px 0;</span>
<a href="#l12.61"></a><span id="l12.61">   background-color: #f1f1f1;</span>
<a href="#l12.62"></a><span id="l12.62">   border-bottom: 1px solid #c1c1c1;</span>
<a href="#l12.63"></a><span id="l12.63"> }</span>
<a href="#l12.64"></a><span id="l12.64"> </span>
<a href="#l12.65"></a><span id="l12.65" class="difflineminus">-#dialogTitle {</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineplus">+.dialogTitle {</span>
<a href="#l12.67"></a><span id="l12.67">   text-align: center;</span>
<a href="#l12.68"></a><span id="l12.68"> }</span>
<a href="#l12.69"></a><span id="l12.69"> </span>
<a href="#l12.70"></a><span id="l12.70"> .close-icon {</span>
<a href="#l12.71"></a><span id="l12.71">   background-color: transparent !important;</span>
<a href="#l12.72"></a><span id="l12.72">   border: none;</span>
<a href="#l12.73"></a><span id="l12.73">   box-shadow: none;</span>
<a href="#l12.74"></a><span id="l12.74">   height: 18px;</span>
<a href="#l12.75"></a><span id="l12.75">   padding: 0;</span>
<a href="#l12.76"></a><span id="l12.76">   min-width: 18px;</span>
<a href="#l12.77"></a><span id="l12.77"> }</span>
<a href="#l12.78"></a><span id="l12.78"> </span>
<a href="#l12.79"></a><span id="l12.79" class="difflineminus">-#dialogBox &gt; .groupbox-body {</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineplus">+.dialogBox &gt; .groupbox-body {</span>
<a href="#l12.81"></a><span id="l12.81">   -moz-appearance: none;</span>
<a href="#l12.82"></a><span id="l12.82">   padding: 20px;</span>
<a href="#l12.83"></a><span id="l12.83"> }</span>
<a href="#l12.84"></a><span id="l12.84"> </span>
<a href="#l12.85"></a><span id="l12.85" class="difflineminus">-#dialogFrame {</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineplus">+.dialogFrame {</span>
<a href="#l12.87"></a><span id="l12.87">   -moz-box-flex: 1;</span>
<a href="#l12.88"></a><span id="l12.88">   /* Default dialog dimensions */</span>
<a href="#l12.89"></a><span id="l12.89">   height: 12em;</span>
<a href="#l12.90"></a><span id="l12.90">   width: 40ch;</span>
<a href="#l12.91"></a><span id="l12.91"> }</span>
<a href="#l12.92"></a><span id="l12.92"> </span>
<a href="#l12.93"></a><span id="l12.93"> .largeDialogContainer.doScroll {</span>
<a href="#l12.94"></a><span id="l12.94">   overflow-y: auto;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

