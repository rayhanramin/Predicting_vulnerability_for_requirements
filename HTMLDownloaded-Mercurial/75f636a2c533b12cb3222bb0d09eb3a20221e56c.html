<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 11330:75f636a2c533b12cb3222bb0d09eb3a20221e56c</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 75f636a2c533b12cb3222bb0d09eb3a20221e56c" />
<meta property="og:url" content="/comm-central/rev/75f636a2c533b12cb3222bb0d09eb3a20221e56c" />
<meta property="og:description" content="Bug 775665 - Change Filter Context UI to checkboxes. ui-r=bwinton, r=IanN, r=Neil, r=rkent" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 75f636a2c533b12cb3222bb0d09eb3a20221e56c 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/75f636a2c533b12cb3222bb0d09eb3a20221e56c">shortlog</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/75f636a2c533b12cb3222bb0d09eb3a20221e56c">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c">files</a> |
changeset |
<a href="/comm-central/raw-rev/75f636a2c533b12cb3222bb0d09eb3a20221e56c">raw</a>  | <a href="/comm-central/archive/75f636a2c533b12cb3222bb0d09eb3a20221e56c.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=775665">Bug 775665</a> - Change Filter Context UI to checkboxes. ui-r=bwinton, r=IanN, r=Neil, r=rkent
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 19 Oct 2012 20:08:46 -0400</td></tr>

<tr>
 <td>changeset 11330</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/75f636a2c533b12cb3222bb0d09eb3a20221e56c">75f636a2c533b12cb3222bb0d09eb3a20221e56c</a></td>
</tr>



<tr>
<td>parent 11329</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/4dae5d540baf62cc1ed38b31a9b87972964f22bd">4dae5d540baf62cc1ed38b31a9b87972964f22bd</a>
</td>
</tr>

<tr>
<td>child 11331</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6fcff08e997e0f63fca8420e569371b84111fb78">6fcff08e997e0f63fca8420e569371b84111fb78</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=75f636a2c533b12cb3222bb0d09eb3a20221e56c">8479</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Sat, 20 Oct 2012 00:16:58 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@cc3fee7931ec [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=cc3fee7931ec5b4ad1f21b1ddecc693030f39d7e">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=cc3fee7931ec5b4ad1f21b1ddecc693030f39d7e&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=cc3fee7931ec5b4ad1f21b1ddecc693030f39d7e&newProject=comm-central&newRevision=4dae5d540baf62cc1ed38b31a9b87972964f22bd&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=cc3fee7931ec5b4ad1f21b1ddecc693030f39d7e&newProject=comm-central&newRevision=4dae5d540baf62cc1ed38b31a9b87972964f22bd&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=cc3fee7931ec5b4ad1f21b1ddecc693030f39d7e&newProject=comm-central&newRevision=4dae5d540baf62cc1ed38b31a9b87972964f22bd&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bwinton%29&revcount=50">bwinton</a>, <a href="/comm-central/log?rev=reviewer%28IanN%29&revcount=50">IanN</a>, <a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a>, <a href="/comm-central/log?rev=reviewer%28rkent%29&revcount=50">rkent</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=775665">775665</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=775665">Bug 775665</a> - Change Filter Context UI to checkboxes. ui-r=bwinton, r=IanN, r=Neil, r=rkent</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/FilterEditor.dtd">mail/locales/en-US/chrome/messenger/FilterEditor.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/FilterEditor.dtd">file</a> |
<a href="/comm-central/annotate/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/FilterEditor.dtd">annotate</a> |
<a href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/FilterEditor.dtd">diff</a> |
<a href="/comm-central/comparison/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/FilterEditor.dtd">comparison</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/FilterEditor.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/filter.properties">mail/locales/en-US/chrome/messenger/filter.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/filter.properties">file</a> |
<a href="/comm-central/annotate/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/filter.properties">annotate</a> |
<a href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/filter.properties">diff</a> |
<a href="/comm-central/comparison/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/filter.properties">comparison</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mail/locales/en-US/chrome/messenger/filter.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.js">mailnews/base/search/content/FilterEditor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.js">file</a> |
<a href="/comm-central/annotate/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.js">annotate</a> |
<a href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.js">diff</a> |
<a href="/comm-central/comparison/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.js">comparison</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.xul">mailnews/base/search/content/FilterEditor.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.xul">file</a> |
<a href="/comm-central/annotate/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.xul">annotate</a> |
<a href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.xul">diff</a> |
<a href="/comm-central/comparison/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.xul">comparison</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c/mailnews/base/search/content/FilterEditor.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd">suite/locales/en-US/chrome/mailnews/FilterEditor.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd">file</a> |
<a href="/comm-central/annotate/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd">annotate</a> |
<a href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd">diff</a> |
<a href="/comm-central/comparison/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd">comparison</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/filter.properties">suite/locales/en-US/chrome/mailnews/filter.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/filter.properties">file</a> |
<a href="/comm-central/annotate/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/filter.properties">annotate</a> |
<a href="/comm-central/diff/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/filter.properties">diff</a> |
<a href="/comm-central/comparison/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/filter.properties">comparison</a> |
<a href="/comm-central/log/75f636a2c533b12cb3222bb0d09eb3a20221e56c/suite/locales/en-US/chrome/mailnews/filter.properties">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/FilterEditor.dtd</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/FilterEditor.dtd</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -12,22 +12,23 @@</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> &lt;!ENTITY lowestPriorityCmd.label &quot;Lowest&quot;&gt;</span>
<a href="#l1.6"></a><span id="l1.6"> &lt;!ENTITY lowPriorityCmd.label &quot;Low&quot;&gt;</span>
<a href="#l1.7"></a><span id="l1.7"> &lt;!ENTITY normalPriorityCmd.label &quot;Normal&quot;&gt;</span>
<a href="#l1.8"></a><span id="l1.8"> &lt;!ENTITY highPriorityCmd.label &quot;High&quot;&gt;</span>
<a href="#l1.9"></a><span id="l1.9"> &lt;!ENTITY highestPriorityCmd.label &quot;Highest&quot;&gt;</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> &lt;!ENTITY contextDesc.label &quot;Apply filter when:&quot;&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-&lt;!ENTITY contextDesc.accesskey &quot;w&quot;&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-&lt;!ENTITY contextIncoming.label &quot;Checking Mail&quot;&gt;</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+&lt;!ENTITY contextIncomingMail.label &quot;Getting New Mail:&quot;&gt;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+&lt;!ENTITY contextIncomingMail.accesskey &quot;G&quot;&gt;</span>
<a href="#l1.16"></a><span id="l1.16"> &lt;!ENTITY contextManual.label &quot;Manually Run&quot;&gt;</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-&lt;!ENTITY contextBoth.label &quot;Checking Mail or Manually Run&quot;&gt;</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-&lt;!ENTITY contextPostPlugin.label &quot;Checking Mail (after classification)&quot;&gt;</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">-&lt;!ENTITY contextPostPluginBoth.label &quot;Checking Mail (after classification) or Manually Run&quot;&gt;</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+&lt;!ENTITY contextManual.accesskey &quot;R&quot;&gt;</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+&lt;!ENTITY contextBeforeCls.label &quot;Filter before Junk Classification&quot;&gt;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+&lt;!ENTITY contextAfterCls.label &quot;Filter after Junk Classification&quot;&gt;</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+</span>
<a href="#l1.24"></a><span id="l1.24"> &lt;!ENTITY filterActionDesc.label &quot;Perform these actions:&quot;&gt;</span>
<a href="#l1.25"></a><span id="l1.25"> &lt;!ENTITY filterActionDesc.accesskey &quot;P&quot;&gt;</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27"> &lt;!-- New Style Filter Rule Actions --&gt;</span>
<a href="#l1.28"></a><span id="l1.28"> &lt;!ENTITY moveMessage.label &quot;Move Message to&quot;&gt;</span>
<a href="#l1.29"></a><span id="l1.29"> &lt;!ENTITY copyMessage.label &quot;Copy Message to&quot;&gt;</span>
<a href="#l1.30"></a><span id="l1.30"> &lt;!ENTITY forwardTo.label &quot;Forward Message to&quot;&gt;</span>
<a href="#l1.31"></a><span id="l1.31"> &lt;!ENTITY replyWithTemplate.label &quot;Reply with Template&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/filter.properties</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/filter.properties</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -3,16 +3,18 @@</span>
<a href="#l2.4"></a><span id="l2.4"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> mustSelectFolder=You must select a target folder.</span>
<a href="#l2.7"></a><span id="l2.7"> enterValidEmailAddress=Enter a valid e-mail address to forward to.</span>
<a href="#l2.8"></a><span id="l2.8"> pickTemplateToReplyWith=Choose a template to reply with.</span>
<a href="#l2.9"></a><span id="l2.9"> mustEnterName=You must give this filter a name.</span>
<a href="#l2.10"></a><span id="l2.10"> cannotHaveDuplicateFilterTitle=Duplicate Filter Name</span>
<a href="#l2.11"></a><span id="l2.11"> cannotHaveDuplicateFilterMessage=The filter name you entered already exists. Please enter a different filter name.</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+mustHaveFilterTypeTitle=No filter event selected</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+mustHaveFilterTypeMessage=You must select at least one event when this filter is applied. If you temporarily do not wish the filter to run at any event, uncheck its enabled state from the Message Filters dialog.</span>
<a href="#l2.14"></a><span id="l2.14"> deleteFilterConfirmation=Are you sure you want to delete the selected filter(s)?</span>
<a href="#l2.15"></a><span id="l2.15"> untitledFilterName=Untitled Filter</span>
<a href="#l2.16"></a><span id="l2.16"> matchAllFilterName=Match All Messages</span>
<a href="#l2.17"></a><span id="l2.17"> filterListBackUpMsg=Your filters do not work because the msgFilterRules.dat file, which contains your filters, could not be read. A new msgFilterRules.dat file will be created and a backup of the old file, called rulesbackup.dat, will be created in the same directory.</span>
<a href="#l2.18"></a><span id="l2.18"> customHeaderOverflow=You've exceeded the limit of 50 custom headers. Please remove one or more custom headers and try again.</span>
<a href="#l2.19"></a><span id="l2.19"> filterCustomHeaderOverflow=Your filters have exceeded the limit of 50 custom headers. Please edit the msgFilterRules.dat file, which contains your filters, to use fewer custom headers.</span>
<a href="#l2.20"></a><span id="l2.20"> invalidCustomHeader=One of your filters uses a custom header that contains an invalid character, such as ':', a non-printable character, a non-ascii character, or an eight-bit ascii character. Please edit the msgFilterRules.dat file, which contains your filters, to remove invalid characters from your custom headers.</span>
<a href="#l2.21"></a><span id="l2.21"> continueFilterExecution=Applying filter %S failed. Would you like to continue applying filters?</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/base/search/content/FilterEditor.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/base/search/content/FilterEditor.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,27 +1,26 @@</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineminus">-/* -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l3.6"></a><span id="l3.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.7"></a><span id="l3.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.8"></a><span id="l3.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.11"></a><span id="l3.11"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l3.12"></a><span id="l3.12"> </span>
<a href="#l3.13"></a><span id="l3.13"> // The actual filter that we're editing if it is a _saved_ filter or prefill;</span>
<a href="#l3.14"></a><span id="l3.14"> // void otherwise.</span>
<a href="#l3.15"></a><span id="l3.15"> var gFilter;</span>
<a href="#l3.16"></a><span id="l3.16"> // cache the key elements we need</span>
<a href="#l3.17"></a><span id="l3.17"> var gFilterList;</span>
<a href="#l3.18"></a><span id="l3.18"> // The filter name as it appears in the &quot;Filter Name&quot; field of dialog.</span>
<a href="#l3.19"></a><span id="l3.19"> var gFilterNameElement;</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-var gFilterContext;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+var gFilterTypeSelector;</span>
<a href="#l3.22"></a><span id="l3.22"> var gFilterBundle;</span>
<a href="#l3.23"></a><span id="l3.23"> var gPreFillName;</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-var nsMsgSearchScope = Components.interfaces.nsMsgSearchScope;</span>
<a href="#l3.25"></a><span id="l3.25"> var gSessionFolderListenerAdded = false;</span>
<a href="#l3.26"></a><span id="l3.26"> var gFilterActionList;</span>
<a href="#l3.27"></a><span id="l3.27"> var gCustomActions = null;</span>
<a href="#l3.28"></a><span id="l3.28"> var gFilterType;</span>
<a href="#l3.29"></a><span id="l3.29"> var gFilterPosition = 0;</span>
<a href="#l3.30"></a><span id="l3.30"> </span>
<a href="#l3.31"></a><span id="l3.31"> var gFilterActionStrings = [&quot;none&quot;, &quot;movemessage&quot;, &quot;setpriorityto&quot;, &quot;deletemessage&quot;,</span>
<a href="#l3.32"></a><span id="l3.32">                             &quot;markasread&quot;, &quot;ignorethread&quot;, &quot;watchthread&quot;, &quot;markasflagged&quot;,</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineat">@@ -29,16 +28,19 @@ var gFilterActionStrings = [&quot;none&quot;, &quot;mov</span>
<a href="#l3.34"></a><span id="l3.34">                             &quot;deletefrompopserver&quot;,  &quot;leaveonpopserver&quot;, &quot;setjunkscore&quot;,</span>
<a href="#l3.35"></a><span id="l3.35">                             &quot;fetchfrompopserver&quot;, &quot;copymessage&quot;, &quot;addtagtomessage&quot;,</span>
<a href="#l3.36"></a><span id="l3.36">                             &quot;ignoresubthread&quot;, &quot;markasunread&quot;];</span>
<a href="#l3.37"></a><span id="l3.37"> </span>
<a href="#l3.38"></a><span id="l3.38"> var nsMsgFilterAction = Components.interfaces.nsMsgFilterAction;</span>
<a href="#l3.39"></a><span id="l3.39"> </span>
<a href="#l3.40"></a><span id="l3.40"> var gFilterEditorMsgWindow = null;</span>
<a href="#l3.41"></a><span id="l3.41"> </span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+const nsMsgFilterType = Components.interfaces.nsMsgFilterType;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+const nsMsgSearchScope = Components.interfaces.nsMsgSearchScope;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+</span>
<a href="#l3.45"></a><span id="l3.45"> function filterEditorOnLoad()</span>
<a href="#l3.46"></a><span id="l3.46"> {</span>
<a href="#l3.47"></a><span id="l3.47">   getCustomActions();</span>
<a href="#l3.48"></a><span id="l3.48">   initializeSearchWidgets();</span>
<a href="#l3.49"></a><span id="l3.49">   initializeFilterWidgets();</span>
<a href="#l3.50"></a><span id="l3.50"> </span>
<a href="#l3.51"></a><span id="l3.51">   gFilterBundle = document.getElementById(&quot;bundle_filter&quot;);</span>
<a href="#l3.52"></a><span id="l3.52"> </span>
<a href="#l3.53"></a><span id="l3.53" class="difflineat">@@ -47,21 +49,18 @@ function filterEditorOnLoad()</span>
<a href="#l3.54"></a><span id="l3.54">     var args = window.arguments[0];</span>
<a href="#l3.55"></a><span id="l3.55"> </span>
<a href="#l3.56"></a><span id="l3.56">     if (&quot;filterList&quot; in args)</span>
<a href="#l3.57"></a><span id="l3.57">     {</span>
<a href="#l3.58"></a><span id="l3.58">       gFilterList = args.filterList;</span>
<a href="#l3.59"></a><span id="l3.59">       // the postPlugin filters cannot be applied to servers that are</span>
<a href="#l3.60"></a><span id="l3.60">       // deferred, (you must define them on the deferredTo server instead).</span>
<a href="#l3.61"></a><span id="l3.61">       let server = gFilterList.folder.server;</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-      let postPluginDisabled = server.rootFolder != server.rootMsgFolder;</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-      document.getElementById(&quot;contextMenuListPostPlugin&quot;)</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-              .disabled = postPluginDisabled;</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineminus">-      document.getElementById(&quot;contextMenuListPostPluginBoth&quot;)</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-              .disabled = postPluginDisabled;</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+      if (server.rootFolder != server.rootMsgFolder)</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+        gFilterTypeSelector.disableAfterPlugins();</span>
<a href="#l3.69"></a><span id="l3.69">     }</span>
<a href="#l3.70"></a><span id="l3.70"> </span>
<a href="#l3.71"></a><span id="l3.71">     if (&quot;filterPosition&quot; in args)</span>
<a href="#l3.72"></a><span id="l3.72">     {</span>
<a href="#l3.73"></a><span id="l3.73">       gFilterPosition = args.filterPosition;</span>
<a href="#l3.74"></a><span id="l3.74">     }</span>
<a href="#l3.75"></a><span id="l3.75"> </span>
<a href="#l3.76"></a><span id="l3.76">     if (&quot;filter&quot; in args)</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineat">@@ -96,38 +95,38 @@ function filterEditorOnLoad()</span>
<a href="#l3.78"></a><span id="l3.78">         term.value = termValue;</span>
<a href="#l3.79"></a><span id="l3.79"> </span>
<a href="#l3.80"></a><span id="l3.80">         gFilter.appendTerm(term);</span>
<a href="#l3.81"></a><span id="l3.81"> </span>
<a href="#l3.82"></a><span id="l3.82">         // the default action for news filters is Delete</span>
<a href="#l3.83"></a><span id="l3.83">         // for everything else, it's MoveToFolder</span>
<a href="#l3.84"></a><span id="l3.84">         var filterAction = gFilter.createAction();</span>
<a href="#l3.85"></a><span id="l3.85">         filterAction.type = (getScopeFromFilterList(gFilterList) ==</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineminus">-            Components.interfaces.nsMsgSearchScope.newsFilter) ?</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+            nsMsgSearchScope.newsFilter) ?</span>
<a href="#l3.88"></a><span id="l3.88">             nsMsgFilterAction.Delete : nsMsgFilterAction.MoveToFolder;</span>
<a href="#l3.89"></a><span id="l3.89">         gFilter.appendAction(filterAction);</span>
<a href="#l3.90"></a><span id="l3.90">         initializeDialog(gFilter);</span>
<a href="#l3.91"></a><span id="l3.91">       }</span>
<a href="#l3.92"></a><span id="l3.92">       else</span>
<a href="#l3.93"></a><span id="l3.93">       {</span>
<a href="#l3.94"></a><span id="l3.94">         // fake the first more button press</span>
<a href="#l3.95"></a><span id="l3.95">         onMore(null);</span>
<a href="#l3.96"></a><span id="l3.96">       }</span>
<a href="#l3.97"></a><span id="l3.97">     }</span>
<a href="#l3.98"></a><span id="l3.98">   }</span>
<a href="#l3.99"></a><span id="l3.99"> </span>
<a href="#l3.100"></a><span id="l3.100">   if (!gFilter)</span>
<a href="#l3.101"></a><span id="l3.101">   {</span>
<a href="#l3.102"></a><span id="l3.102">     // This is a new filter. Set to both Incoming and Manual contexts.</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineminus">-    gFilterContext.selectedIndex = 2;</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+    gFilterTypeSelector.setType(nsMsgFilterType.Incoming | nsMsgFilterType.Manual);</span>
<a href="#l3.105"></a><span id="l3.105">   }</span>
<a href="#l3.106"></a><span id="l3.106"> </span>
<a href="#l3.107"></a><span id="l3.107">   // in the case of a new filter, we may not have an action row yet.</span>
<a href="#l3.108"></a><span id="l3.108">   ensureActionRow();</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineminus">-  gFilterType = determineFilterType();</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+  gFilterType = gFilterTypeSelector.getType();</span>
<a href="#l3.111"></a><span id="l3.111"> </span>
<a href="#l3.112"></a><span id="l3.112">   gFilterNameElement.select();</span>
<a href="#l3.113"></a><span id="l3.113">   // This call is required on mac and linux.  It has no effect under win32.  See bug 94800.</span>
<a href="#l3.114"></a><span id="l3.114">   gFilterNameElement.focus();</span>
<a href="#l3.115"></a><span id="l3.115"> }</span>
<a href="#l3.116"></a><span id="l3.116"> </span>
<a href="#l3.117"></a><span id="l3.117"> function filterEditorOnUnload()</span>
<a href="#l3.118"></a><span id="l3.118"> {</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineat">@@ -212,46 +211,109 @@ function getScope(filter)</span>
<a href="#l3.120"></a><span id="l3.120"> {</span>
<a href="#l3.121"></a><span id="l3.121">   return getScopeFromFilterList(filter.filterList);</span>
<a href="#l3.122"></a><span id="l3.122"> }</span>
<a href="#l3.123"></a><span id="l3.123"> </span>
<a href="#l3.124"></a><span id="l3.124"> function initializeFilterWidgets()</span>
<a href="#l3.125"></a><span id="l3.125"> {</span>
<a href="#l3.126"></a><span id="l3.126">   gFilterNameElement = document.getElementById(&quot;filterName&quot;);</span>
<a href="#l3.127"></a><span id="l3.127">   gFilterActionList = document.getElementById(&quot;filterActionList&quot;);</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-  gFilterContext = document.getElementById(&quot;contextMenuList&quot;);</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineplus">+  initializeFilterTypeSelector();</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+}</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+function initializeFilterTypeSelector()</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+{</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineplus">+  /**</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+   * This object controls code interaction with the widget allowing specifying</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+   * the filter type (event when the filter is run).</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineplus">+   */</span>
<a href="#l3.138"></a><span id="l3.138" class="difflineplus">+  gFilterTypeSelector = {</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineplus">+    checkBoxManual: document.getElementById(&quot;runManual&quot;),</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineplus">+    checkBoxIncoming : document.getElementById(&quot;runIncoming&quot;),</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineplus">+</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+    menulistIncoming: document.getElementById(&quot;pluginsRunOrder&quot;),</span>
<a href="#l3.143"></a><span id="l3.143" class="difflineplus">+</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineplus">+    menuitemBeforePlugins: document.getElementById(&quot;runBeforePlugins&quot;),</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineplus">+    menuitemAfterPlugins: document.getElementById(&quot;runAfterPlugins&quot;),</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineplus">+</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineplus">+    /**</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineplus">+     * Returns the currently set filter type (checkboxes) in terms</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineplus">+     * of a Components.interfaces.nsMsgFilterType value.</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+     */</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineplus">+    getType: function()</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineplus">+    {</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineplus">+      let type = nsMsgFilterType.None;</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineplus">+</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+      if (this.checkBoxManual.checked)</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineplus">+        type |= nsMsgFilterType.Manual;</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineplus">+</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineplus">+      if (this.checkBoxIncoming.checked) {</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineplus">+        if (this.menulistIncoming.selectedItem == this.menuitemAfterPlugins) {</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineplus">+          type |= nsMsgFilterType.PostPlugin;</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineplus">+        } else {</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineplus">+          // this.menuitemBeforePlugins selected</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineplus">+          if (getScopeFromFilterList(gFilterList) ==</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineplus">+              nsMsgSearchScope.newsFilter)</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineplus">+            type |= nsMsgFilterType.NewsRule;</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineplus">+          else</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+            type |= nsMsgFilterType.InboxRule;</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineplus">+        }</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineplus">+      }</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineplus">+</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineplus">+      return type;</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineplus">+    },</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineplus">+</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineplus">+    /**</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+     * Sets the checkboxes to represent the filter type passed in.</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineplus">+     *</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineplus">+     * @param aType  the filter type to set in terms</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineplus">+     *               of Components.interfaces.nsMsgFilterType values.</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineplus">+     */</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineplus">+    setType: function(aType)</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineplus">+    {</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineplus">+      // If there is no type (event) requested, force &quot;when manually run&quot;</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineplus">+      if (aType == nsMsgFilterType.None)</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineplus">+        aType = nsMsgFilterType.Manual;</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineplus">+</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineplus">+      this.checkBoxManual.checked   = aType &amp; nsMsgFilterType.Manual;</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineplus">+</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineplus">+      this.checkBoxIncoming.checked = aType &amp; (nsMsgFilterType.PostPlugin |</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineplus">+                                               nsMsgFilterType.Incoming);</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineplus">+</span>
<a href="#l3.191"></a><span id="l3.191" class="difflineplus">+      this.menulistIncoming.selectedItem = aType &amp; nsMsgFilterType.PostPlugin ?</span>
<a href="#l3.192"></a><span id="l3.192" class="difflineplus">+        this.menuitemAfterPlugins : this.menuitemBeforePlugins;</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineplus">+</span>
<a href="#l3.194"></a><span id="l3.194" class="difflineplus">+      this.updateClassificationMenu();</span>
<a href="#l3.195"></a><span id="l3.195" class="difflineplus">+    },</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineplus">+</span>
<a href="#l3.197"></a><span id="l3.197" class="difflineplus">+    /**</span>
<a href="#l3.198"></a><span id="l3.198" class="difflineplus">+     * Enable the &quot;before/after classification&quot; menulist depending on</span>
<a href="#l3.199"></a><span id="l3.199" class="difflineplus">+     * whether &quot;run when incoming mail&quot; is selected.</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineplus">+     */</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineplus">+    updateClassificationMenu: function()</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineplus">+    {</span>
<a href="#l3.203"></a><span id="l3.203" class="difflineplus">+      this.menulistIncoming.disabled = !this.checkBoxIncoming.checked;</span>
<a href="#l3.204"></a><span id="l3.204" class="difflineplus">+      updateFilterType();</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineplus">+    },</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineplus">+</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineplus">+    /**</span>
<a href="#l3.208"></a><span id="l3.208" class="difflineplus">+     * Disable the &quot;After classification&quot; option for this filter.</span>
<a href="#l3.209"></a><span id="l3.209" class="difflineplus">+     */</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineplus">+    disableAfterPlugins: function()</span>
<a href="#l3.211"></a><span id="l3.211" class="difflineplus">+    {</span>
<a href="#l3.212"></a><span id="l3.212" class="difflineplus">+      this.menuitemAfterPlugins.disabled = true;</span>
<a href="#l3.213"></a><span id="l3.213" class="difflineplus">+    }</span>
<a href="#l3.214"></a><span id="l3.214" class="difflineplus">+  };</span>
<a href="#l3.215"></a><span id="l3.215"> }</span>
<a href="#l3.216"></a><span id="l3.216"> </span>
<a href="#l3.217"></a><span id="l3.217"> function initializeDialog(filter)</span>
<a href="#l3.218"></a><span id="l3.218"> {</span>
<a href="#l3.219"></a><span id="l3.219">   gFilterNameElement.value = filter.filterName;</span>
<a href="#l3.220"></a><span id="l3.220" class="difflineminus">-  /*</span>
<a href="#l3.221"></a><span id="l3.221" class="difflineminus">-   * contextIndex = 0: checking mail</span>
<a href="#l3.222"></a><span id="l3.222" class="difflineminus">-   *              = 1: manually run</span>
<a href="#l3.223"></a><span id="l3.223" class="difflineminus">-   *              = 2: checking mail or manually run</span>
<a href="#l3.224"></a><span id="l3.224" class="difflineminus">-   *              = 3: post analysis</span>
<a href="#l3.225"></a><span id="l3.225" class="difflineminus">-   *              = 4: post analysis or manually run</span>
<a href="#l3.226"></a><span id="l3.226" class="difflineminus">-   */</span>
<a href="#l3.227"></a><span id="l3.227">   let filterType = filter.filterType;</span>
<a href="#l3.228"></a><span id="l3.228" class="difflineminus">-  let nsMsgFilterType = Components.interfaces.nsMsgFilterType;</span>
<a href="#l3.229"></a><span id="l3.229" class="difflineminus">-  let contextIndex;</span>
<a href="#l3.230"></a><span id="l3.230" class="difflineminus">-  if (filterType &amp; nsMsgFilterType.Manual)</span>
<a href="#l3.231"></a><span id="l3.231" class="difflineminus">-  {</span>
<a href="#l3.232"></a><span id="l3.232" class="difflineminus">-    if (filterType &amp; nsMsgFilterType.Incoming)</span>
<a href="#l3.233"></a><span id="l3.233" class="difflineminus">-      contextIndex = 2;</span>
<a href="#l3.234"></a><span id="l3.234" class="difflineminus">-    else if (filterType &amp; nsMsgFilterType.PostPlugin)</span>
<a href="#l3.235"></a><span id="l3.235" class="difflineminus">-      contextIndex = 4;</span>
<a href="#l3.236"></a><span id="l3.236" class="difflineminus">-    else</span>
<a href="#l3.237"></a><span id="l3.237" class="difflineminus">-      contextIndex = 1;</span>
<a href="#l3.238"></a><span id="l3.238" class="difflineminus">-  }</span>
<a href="#l3.239"></a><span id="l3.239" class="difflineminus">-  else if (filterType &amp; nsMsgFilterType.PostPlugin)</span>
<a href="#l3.240"></a><span id="l3.240" class="difflineminus">-    contextIndex = 3;</span>
<a href="#l3.241"></a><span id="l3.241" class="difflineminus">-  else</span>
<a href="#l3.242"></a><span id="l3.242" class="difflineminus">-    contextIndex = 0;</span>
<a href="#l3.243"></a><span id="l3.243" class="difflineminus">-  gFilterContext.selectedIndex = contextIndex;</span>
<a href="#l3.244"></a><span id="l3.244" class="difflineplus">+  gFilterTypeSelector.setType(filter.filterType);</span>
<a href="#l3.245"></a><span id="l3.245"> </span>
<a href="#l3.246"></a><span id="l3.246">   var actionList = filter.actionList;</span>
<a href="#l3.247"></a><span id="l3.247">   var numActions = actionList.Count();</span>
<a href="#l3.248"></a><span id="l3.248"> </span>
<a href="#l3.249"></a><span id="l3.249">   for (var actionIndex=0; actionIndex &lt; numActions; actionIndex++)</span>
<a href="#l3.250"></a><span id="l3.250">   {</span>
<a href="#l3.251"></a><span id="l3.251">     var filterAction = actionList.QueryElementAt(actionIndex, Components.interfaces.nsIMsgRuleAction);</span>
<a href="#l3.252"></a><span id="l3.252"> </span>
<a href="#l3.253"></a><span id="l3.253" class="difflineat">@@ -279,16 +341,24 @@ function ensureActionRow()</span>
<a href="#l3.254"></a><span id="l3.254">     gFilterActionList.appendChild(newActionRow);</span>
<a href="#l3.255"></a><span id="l3.255">     newActionRow.mRemoveButton.disabled = true;</span>
<a href="#l3.256"></a><span id="l3.256">   }</span>
<a href="#l3.257"></a><span id="l3.257"> }</span>
<a href="#l3.258"></a><span id="l3.258"> </span>
<a href="#l3.259"></a><span id="l3.259"> // move to overlay</span>
<a href="#l3.260"></a><span id="l3.260"> function saveFilter()</span>
<a href="#l3.261"></a><span id="l3.261"> {</span>
<a href="#l3.262"></a><span id="l3.262" class="difflineplus">+  // See if at least one filter type (activation event) is selected.</span>
<a href="#l3.263"></a><span id="l3.263" class="difflineplus">+  if (gFilterType == nsMsgFilterType.None) {</span>
<a href="#l3.264"></a><span id="l3.264" class="difflineplus">+    Services.prompt.alert(window,</span>
<a href="#l3.265"></a><span id="l3.265" class="difflineplus">+                          gFilterBundle.getString(&quot;mustHaveFilterTypeTitle&quot;),</span>
<a href="#l3.266"></a><span id="l3.266" class="difflineplus">+                          gFilterBundle.getString(&quot;mustHaveFilterTypeMessage&quot;));</span>
<a href="#l3.267"></a><span id="l3.267" class="difflineplus">+    return false;</span>
<a href="#l3.268"></a><span id="l3.268" class="difflineplus">+  }</span>
<a href="#l3.269"></a><span id="l3.269" class="difflineplus">+</span>
<a href="#l3.270"></a><span id="l3.270">   let filterName = gFilterNameElement.value;</span>
<a href="#l3.271"></a><span id="l3.271">   // If we think have a duplicate, then we need to check that if we</span>
<a href="#l3.272"></a><span id="l3.272">   // have an original filter name (i.e. we are editing a filter), then</span>
<a href="#l3.273"></a><span id="l3.273">   // we must check that the original is not the current as that is what</span>
<a href="#l3.274"></a><span id="l3.274">   // the duplicateFilterNameExists function will have picked up.</span>
<a href="#l3.275"></a><span id="l3.275">   if ((!gFilter || gFilter.filterName != filterName) &amp;&amp; duplicateFilterNameExists(filterName))</span>
<a href="#l3.276"></a><span id="l3.276">   {</span>
<a href="#l3.277"></a><span id="l3.277">     Services.prompt.alert(window,</span>
<a href="#l3.278"></a><span id="l3.278" class="difflineat">@@ -591,70 +661,42 @@ function getCustomActions()</span>
<a href="#l3.279"></a><span id="l3.279">     while (customActionsEnum.hasMoreElements())</span>
<a href="#l3.280"></a><span id="l3.280">       gCustomActions.push(customActionsEnum.getNext().QueryInterface(</span>
<a href="#l3.281"></a><span id="l3.281">                            Components.interfaces.nsIMsgFilterCustomAction));</span>
<a href="#l3.282"></a><span id="l3.282">   }</span>
<a href="#l3.283"></a><span id="l3.283"> }</span>
<a href="#l3.284"></a><span id="l3.284"> </span>
<a href="#l3.285"></a><span id="l3.285"> function updateFilterType()</span>
<a href="#l3.286"></a><span id="l3.286"> {</span>
<a href="#l3.287"></a><span id="l3.287" class="difflineminus">-  gFilterType = determineFilterType();</span>
<a href="#l3.288"></a><span id="l3.288" class="difflineplus">+  gFilterType = gFilterTypeSelector.getType();</span>
<a href="#l3.289"></a><span id="l3.289">   setFilterScope(gFilterType, gFilterList);</span>
<a href="#l3.290"></a><span id="l3.290"> </span>
<a href="#l3.291"></a><span id="l3.291">   // set valid actions</span>
<a href="#l3.292"></a><span id="l3.292">   var ruleActions = gFilterActionList.getElementsByAttribute('class', 'ruleaction');</span>
<a href="#l3.293"></a><span id="l3.293">   for (var i = 0; i &lt; ruleActions.length; i++)</span>
<a href="#l3.294"></a><span id="l3.294">     ruleActions[i].mRuleActionType.hideInvalidActions();</span>
<a href="#l3.295"></a><span id="l3.295"> }</span>
<a href="#l3.296"></a><span id="l3.296"> </span>
<a href="#l3.297"></a><span id="l3.297" class="difflineminus">-function determineFilterType()</span>
<a href="#l3.298"></a><span id="l3.298" class="difflineminus">-{</span>
<a href="#l3.299"></a><span id="l3.299" class="difflineminus">-  /*</span>
<a href="#l3.300"></a><span id="l3.300" class="difflineminus">-   * contextIndex = 0: checking mail</span>
<a href="#l3.301"></a><span id="l3.301" class="difflineminus">-   *              = 1: manually run</span>
<a href="#l3.302"></a><span id="l3.302" class="difflineminus">-   *              = 2: checking mail or manually run</span>
<a href="#l3.303"></a><span id="l3.303" class="difflineminus">-   *              = 3: post analysis</span>
<a href="#l3.304"></a><span id="l3.304" class="difflineminus">-   *              = 4: post analysis or manually run</span>
<a href="#l3.305"></a><span id="l3.305" class="difflineminus">-   */</span>
<a href="#l3.306"></a><span id="l3.306" class="difflineminus">-  let contextIndex = gFilterContext.selectedIndex;</span>
<a href="#l3.307"></a><span id="l3.307" class="difflineminus">-  let filterType = 0;</span>
<a href="#l3.308"></a><span id="l3.308" class="difflineminus">-  if (contextIndex == 1 || contextIndex == 2 || contextIndex == 4) // manual</span>
<a href="#l3.309"></a><span id="l3.309" class="difflineminus">-    filterType |= Components.interfaces.nsMsgFilterType.Manual;</span>
<a href="#l3.310"></a><span id="l3.310" class="difflineminus">-  if (contextIndex == 3 || contextIndex == 4) // post analysis</span>
<a href="#l3.311"></a><span id="l3.311" class="difflineminus">-    filterType |= Components.interfaces.nsMsgFilterType.PostPlugin;</span>
<a href="#l3.312"></a><span id="l3.312" class="difflineminus">-  if (contextIndex == 0 || contextIndex == 2) // checking mail</span>
<a href="#l3.313"></a><span id="l3.313" class="difflineminus">-  {</span>
<a href="#l3.314"></a><span id="l3.314" class="difflineminus">-    if (getScopeFromFilterList(gFilterList) ==</span>
<a href="#l3.315"></a><span id="l3.315" class="difflineminus">-        Components.interfaces.nsMsgSearchScope.newsFilter)</span>
<a href="#l3.316"></a><span id="l3.316" class="difflineminus">-      filterType |= Components.interfaces.nsMsgFilterType.NewsRule;</span>
<a href="#l3.317"></a><span id="l3.317" class="difflineminus">-    else</span>
<a href="#l3.318"></a><span id="l3.318" class="difflineminus">-      filterType |= Components.interfaces.nsMsgFilterType.InboxRule;</span>
<a href="#l3.319"></a><span id="l3.319" class="difflineminus">-  }</span>
<a href="#l3.320"></a><span id="l3.320" class="difflineminus">-  return filterType;</span>
<a href="#l3.321"></a><span id="l3.321" class="difflineminus">-}</span>
<a href="#l3.322"></a><span id="l3.322" class="difflineminus">-</span>
<a href="#l3.323"></a><span id="l3.323"> // Given a filter type, set the global search scope to the filter scope</span>
<a href="#l3.324"></a><span id="l3.324"> function setFilterScope(aFilterType, aFilterList) </span>
<a href="#l3.325"></a><span id="l3.325"> {</span>
<a href="#l3.326"></a><span id="l3.326">   let filterScope = getFilterScope(getScopeFromFilterList(aFilterList),</span>
<a href="#l3.327"></a><span id="l3.327">                                    aFilterType, aFilterList);</span>
<a href="#l3.328"></a><span id="l3.328">   setSearchScope(filterScope);</span>
<a href="#l3.329"></a><span id="l3.329"> }</span>
<a href="#l3.330"></a><span id="l3.330"> </span>
<a href="#l3.331"></a><span id="l3.331"> //</span>
<a href="#l3.332"></a><span id="l3.332"> // Given the base filter scope for a server, and the filter</span>
<a href="#l3.333"></a><span id="l3.333"> // type, return the scope used for filter. This assumes a</span>
<a href="#l3.334"></a><span id="l3.334"> // hierarchy of contexts, with incoming the most restrictive,</span>
<a href="#l3.335"></a><span id="l3.335"> // followed by manual and post-plugin.</span>
<a href="#l3.336"></a><span id="l3.336"> function getFilterScope(aServerFilterScope, aFilterType, aFilterList)</span>
<a href="#l3.337"></a><span id="l3.337"> {</span>
<a href="#l3.338"></a><span id="l3.338" class="difflineminus">-  let Ci = Components.interfaces;</span>
<a href="#l3.339"></a><span id="l3.339" class="difflineminus">-</span>
<a href="#l3.340"></a><span id="l3.340" class="difflineminus">-  if (aFilterType &amp; Ci.nsMsgFilterType.Incoming)</span>
<a href="#l3.341"></a><span id="l3.341" class="difflineplus">+  if (aFilterType &amp; nsMsgFilterType.Incoming)</span>
<a href="#l3.342"></a><span id="l3.342">     return aServerFilterScope;</span>
<a href="#l3.343"></a><span id="l3.343"> </span>
<a href="#l3.344"></a><span id="l3.344">   // Manual or PostPlugin</span>
<a href="#l3.345"></a><span id="l3.345">   // local mail allows body and junk types</span>
<a href="#l3.346"></a><span id="l3.346" class="difflineminus">-  if (aServerFilterScope == Ci.nsMsgSearchScope.offlineMailFilter)</span>
<a href="#l3.347"></a><span id="l3.347" class="difflineminus">-    return Ci.nsMsgSearchScope.offlineMail;</span>
<a href="#l3.348"></a><span id="l3.348" class="difflineplus">+  if (aServerFilterScope == nsMsgSearchScope.offlineMailFilter)</span>
<a href="#l3.349"></a><span id="l3.349" class="difflineplus">+    return nsMsgSearchScope.offlineMail;</span>
<a href="#l3.350"></a><span id="l3.350">   // IMAP and NEWS online don't allow body</span>
<a href="#l3.351"></a><span id="l3.351" class="difflineminus">-  return Ci.nsMsgSearchScope.onlineManual;</span>
<a href="#l3.352"></a><span id="l3.352" class="difflineplus">+  return nsMsgSearchScope.onlineManual;</span>
<a href="#l3.353"></a><span id="l3.353"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/base/search/content/FilterEditor.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/base/search/content/FilterEditor.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -31,52 +31,66 @@</span>
<a href="#l4.4"></a><span id="l4.4">   &lt;/stringbundleset&gt;</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/mailWindowOverlay.js&quot;/&gt;</span>
<a href="#l4.7"></a><span id="l4.7">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/mailCommands.js&quot;/&gt;</span>
<a href="#l4.8"></a><span id="l4.8">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/FilterEditor.js&quot;/&gt;</span>
<a href="#l4.9"></a><span id="l4.9">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/widgetglue.js&quot;/&gt;</span>
<a href="#l4.10"></a><span id="l4.10">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/msgFolderPickerOverlay.js&quot;/&gt;</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+  &lt;commandset&gt;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    &lt;command id=&quot;cmd_updateFilterType&quot; oncommand=&quot;updateFilterType();&quot;/&gt;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+    &lt;command id=&quot;cmd_updateClassificationMenu&quot; oncommand=&quot;gFilterTypeSelector.updateClassificationMenu();&quot;/&gt;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+  &lt;/commandset&gt;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+</span>
<a href="#l4.17"></a><span id="l4.17">   &lt;vbox&gt;</span>
<a href="#l4.18"></a><span id="l4.18">     &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l4.19"></a><span id="l4.19">       &lt;label value=&quot;&amp;filterName.label;&quot; accesskey=&quot;&amp;filterName.accesskey;&quot; control=&quot;filterName&quot;/&gt;</span>
<a href="#l4.20"></a><span id="l4.20">       &lt;textbox flex=&quot;1&quot; id=&quot;filterName&quot;/&gt;</span>
<a href="#l4.21"></a><span id="l4.21">       &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l4.22"></a><span id="l4.22">     &lt;/hbox&gt;</span>
<a href="#l4.23"></a><span id="l4.23">   &lt;/vbox&gt;</span>
<a href="#l4.24"></a><span id="l4.24"> </span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-  &lt;separator/&gt;</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+  &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l4.27"></a><span id="l4.27"> </span>
<a href="#l4.28"></a><span id="l4.28">   &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-    &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-      &lt;label value=&quot;&amp;contextDesc.label;&quot;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-             accesskey=&quot;&amp;contextDesc.accesskey;&quot;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-             control=&quot;contextMenuList&quot;/&gt;</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-      &lt;menulist id=&quot;contextMenuList&quot;</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-                value=&quot;both&quot; oncommand=&quot;updateFilterType();&quot;&gt;</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-        &lt;menupopup&gt;</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-          &lt;menuitem label=&quot;&amp;contextIncoming.label;&quot;</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-                    value=&quot;incoming&quot;/&gt;</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-          &lt;menuitem label=&quot;&amp;contextManual.label;&quot;</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineminus">-                    value=&quot;manual&quot;/&gt;</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-          &lt;menuitem label=&quot;&amp;contextBoth.label;&quot;</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-                    value=&quot;both&quot;/&gt;</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineminus">-          &lt;menuitem label=&quot;&amp;contextPostPlugin.label;&quot;</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-                    value=&quot;postPlugin&quot;</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-                    id=&quot;contextMenuListPostPlugin&quot;/&gt;</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-          &lt;menuitem label=&quot;&amp;contextPostPluginBoth.label;&quot;</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-                    value=&quot;postPluginBoth&quot;</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-                    id=&quot;contextMenuListPostPluginBoth&quot;/&gt;</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-        &lt;/menupopup&gt;</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-      &lt;/menulist&gt;</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-    &lt;/hbox&gt;</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+    &lt;groupbox&gt;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+      &lt;caption label=&quot;&amp;contextDesc.label;&quot;/&gt;</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+      &lt;grid&gt;</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+        &lt;columns&gt;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+          &lt;column/&gt;</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+          &lt;column/&gt;</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+        &lt;/columns&gt;</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+        &lt;rows&gt;</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+          &lt;row&gt;</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+            &lt;checkbox id=&quot;runManual&quot;</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+                      label=&quot;&amp;contextManual.label;&quot;</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+                      accesskey=&quot;&amp;contextManual.accesskey;&quot;</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineplus">+                      command=&quot;cmd_updateFilterType&quot;/&gt;</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+          &lt;/row&gt;</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+          &lt;row&gt;</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineplus">+            &lt;checkbox id=&quot;runIncoming&quot;</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineplus">+                      label=&quot;&amp;contextIncomingMail.label;&quot;</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+                      accesskey=&quot;&amp;contextIncomingMail.accesskey;&quot;</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+                      command=&quot;cmd_updateClassificationMenu&quot;/&gt;</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+            &lt;menulist id=&quot;pluginsRunOrder&quot;</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+                      command=&quot;cmd_updateFilterType&quot;&gt;</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+              &lt;menupopup&gt;</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+                &lt;menuitem id=&quot;runBeforePlugins&quot;</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+                          label=&quot;&amp;contextBeforeCls.label;&quot;/&gt;</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+                &lt;menuitem id=&quot;runAfterPlugins&quot;</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+                          label=&quot;&amp;contextAfterCls.label;&quot;/&gt;</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+              &lt;/menupopup&gt;</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineplus">+            &lt;/menulist&gt;</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+          &lt;/row&gt;</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+        &lt;/rows&gt;</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+      &lt;/grid&gt;</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineplus">+    &lt;/groupbox&gt;</span>
<a href="#l4.83"></a><span id="l4.83"> </span>
<a href="#l4.84"></a><span id="l4.84">     &lt;vbox id=&quot;searchTermListBox&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-</span>
<a href="#l4.86"></a><span id="l4.86">   &lt;/vbox&gt;</span>
<a href="#l4.87"></a><span id="l4.87"> </span>
<a href="#l4.88"></a><span id="l4.88">   &lt;splitter id=&quot;gray_horizontal_splitter&quot; persist=&quot;state&quot;/&gt;</span>
<a href="#l4.89"></a><span id="l4.89"> </span>
<a href="#l4.90"></a><span id="l4.90">   &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.91"></a><span id="l4.91">     &lt;label value=&quot;&amp;filterActionDesc.label;&quot; accesskey=&quot;&amp;filterActionDesc.accesskey;&quot; control=&quot;filterActionList&quot;/&gt;</span>
<a href="#l4.92"></a><span id="l4.92">     &lt;listbox id=&quot;filterActionList&quot; flex=&quot;1&quot; rows=&quot;4&quot; minheight=&quot;35%&quot;&gt;</span>
<a href="#l4.93"></a><span id="l4.93">       &lt;listcols&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/FilterEditor.dtd</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -12,22 +12,22 @@</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5"> &lt;!ENTITY lowestPriorityCmd.label &quot;Lowest&quot;&gt;</span>
<a href="#l5.6"></a><span id="l5.6"> &lt;!ENTITY lowPriorityCmd.label &quot;Low&quot;&gt;</span>
<a href="#l5.7"></a><span id="l5.7"> &lt;!ENTITY normalPriorityCmd.label &quot;Normal&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8"> &lt;!ENTITY highPriorityCmd.label &quot;High&quot;&gt;</span>
<a href="#l5.9"></a><span id="l5.9"> &lt;!ENTITY highestPriorityCmd.label &quot;Highest&quot;&gt;</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> &lt;!ENTITY contextDesc.label &quot;Apply filter when:&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-&lt;!ENTITY contextDesc.accesskey &quot;w&quot;&gt;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-&lt;!ENTITY contextIncoming.label &quot;Checking Mail&quot;&gt;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+&lt;!ENTITY contextIncomingMail.label &quot;Getting New Mail:&quot;&gt;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+&lt;!ENTITY contextIncomingMail.accesskey &quot;G&quot;&gt;</span>
<a href="#l5.16"></a><span id="l5.16"> &lt;!ENTITY contextManual.label &quot;Manually Run&quot;&gt;</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-&lt;!ENTITY contextBoth.label &quot;Checking Mail or Manually Run&quot;&gt;</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-&lt;!ENTITY contextPostPlugin.label &quot;Checking Mail (after classification)&quot;&gt;</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-&lt;!ENTITY contextPostPluginBoth.label &quot;Checking Mail (after classification) or Manually Run&quot;&gt;</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+&lt;!ENTITY contextManual.accesskey &quot;R&quot;&gt;</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+&lt;!ENTITY contextBeforeCls.label &quot;Filter before Junk Classification&quot;&gt;</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+&lt;!ENTITY contextAfterCls.label &quot;Filter after Junk Classification&quot;&gt;</span>
<a href="#l5.23"></a><span id="l5.23"> </span>
<a href="#l5.24"></a><span id="l5.24"> &lt;!ENTITY filterActionDesc.label &quot;Perform these actions:&quot;&gt;</span>
<a href="#l5.25"></a><span id="l5.25"> &lt;!ENTITY filterActionDesc.accesskey &quot;P&quot;&gt;</span>
<a href="#l5.26"></a><span id="l5.26"> </span>
<a href="#l5.27"></a><span id="l5.27"> &lt;!-- New Style Filter Rule Actions --&gt;</span>
<a href="#l5.28"></a><span id="l5.28"> &lt;!ENTITY moveMessage.label &quot;Move Message to&quot;&gt;</span>
<a href="#l5.29"></a><span id="l5.29"> &lt;!ENTITY copyMessage.label &quot;Copy Message to&quot;&gt;</span>
<a href="#l5.30"></a><span id="l5.30"> &lt;!ENTITY forwardTo.label &quot;Forward Message to&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/filter.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/filter.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -3,16 +3,18 @@</span>
<a href="#l6.4"></a><span id="l6.4"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.5"></a><span id="l6.5"> </span>
<a href="#l6.6"></a><span id="l6.6"> mustSelectFolder=You must select a target folder.</span>
<a href="#l6.7"></a><span id="l6.7"> enterValidEmailAddress=Enter a valid e-mail address to forward to.</span>
<a href="#l6.8"></a><span id="l6.8"> pickTemplateToReplyWith=Choose a template to reply with.</span>
<a href="#l6.9"></a><span id="l6.9"> mustEnterName=You must give this filter a name.</span>
<a href="#l6.10"></a><span id="l6.10"> cannotHaveDuplicateFilterTitle=Duplicate Filter Name</span>
<a href="#l6.11"></a><span id="l6.11"> cannotHaveDuplicateFilterMessage=The filter name you entered already exists. Please enter a different filter name.</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+mustHaveFilterTypeTitle=No filter event selected</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+mustHaveFilterTypeMessage=You must select at least one event when this filter is applied. If you temporarily do not wish the filter to run at any event, uncheck its enabled state from the Message Filters dialog.</span>
<a href="#l6.14"></a><span id="l6.14"> deleteFilterConfirmation=Are you sure you want to delete the selected filter(s)?</span>
<a href="#l6.15"></a><span id="l6.15"> untitledFilterName=Untitled Filter</span>
<a href="#l6.16"></a><span id="l6.16"> matchAllFilterName=Match All Messages</span>
<a href="#l6.17"></a><span id="l6.17"> filterListBackUpMsg=Your filters do not work because the msgFilterRules.dat file, which contains your filters, could not be read. A new msgFilterRules.dat file will be created and a backup of the old file, called rulesbackup.dat, will be created in the same directory.</span>
<a href="#l6.18"></a><span id="l6.18"> customHeaderOverflow=You've exceeded the limit of 50 custom headers. Please remove one or more custom headers and try again.</span>
<a href="#l6.19"></a><span id="l6.19"> filterCustomHeaderOverflow=Your filters have exceeded the limit of 50 custom headers. Please edit the msgFilterRules.dat file, which contains your filters, to use fewer custom headers.</span>
<a href="#l6.20"></a><span id="l6.20"> invalidCustomHeader=One of your filters uses a custom header that contains an invalid character, such as ':', a non-printable character, a non-ascii character, or an eight-bit ascii character. Please edit the msgFilterRules.dat file, which contains your filters, to remove invalid characters from your custom headers.</span>
<a href="#l6.21"></a><span id="l6.21"> continueFilterExecution=Applying filter %S failed. Would you like to continue applying filters?</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

