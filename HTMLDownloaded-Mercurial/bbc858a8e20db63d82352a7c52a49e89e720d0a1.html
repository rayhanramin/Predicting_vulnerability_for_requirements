<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26136:bbc858a8e20db63d82352a7c52a49e89e720d0a1</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ bbc858a8e20db63d82352a7c52a49e89e720d0a1" />
<meta property="og:url" content="/comm-central/rev/bbc858a8e20db63d82352a7c52a49e89e720d0a1" />
<meta property="og:description" content="Bug 1463266 - remove trailing spaces in ldap. rs=white-space-only" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / bbc858a8e20db63d82352a7c52a49e89e720d0a1 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/bbc858a8e20db63d82352a7c52a49e89e720d0a1">shortlog</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/bbc858a8e20db63d82352a7c52a49e89e720d0a1">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1">files</a> |
changeset |
<a href="/comm-central/raw-rev/bbc858a8e20db63d82352a7c52a49e89e720d0a1">raw</a>  | <a href="/comm-central/archive/bbc858a8e20db63d82352a7c52a49e89e720d0a1.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1463266">Bug 1463266</a> - remove trailing spaces in ldap. rs=white-space-only
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 21 Mar 2019 12:08:01 +0100</td></tr>

<tr>
 <td>changeset 26136</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/bbc858a8e20db63d82352a7c52a49e89e720d0a1">bbc858a8e20db63d82352a7c52a49e89e720d0a1</a></td>
</tr>



<tr>
<td>parent 26135</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">470f4c1ed97e2d69806d1be58b5e342fa5d825d4</a>
</td>
</tr>

<tr>
<td>child 26137</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/a682f8ba00ff3feae6895e30269eac8b8261822b">a682f8ba00ff3feae6895e30269eac8b8261822b</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=bbc858a8e20db63d82352a7c52a49e89e720d0a1">15690</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 21 Mar 2019 11:21:13 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@bbc858a8e20d [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=bbc858a8e20db63d82352a7c52a49e89e720d0a1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&newProject=comm-central&newRevision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&newProject=comm-central&newRevision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&newProject=comm-central&newRevision=bbc858a8e20db63d82352a7c52a49e89e720d0a1&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28white-space-only%29&revcount=50">white-space-only</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1463266">1463266</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1463266">Bug 1463266</a> - remove trailing spaces in ldap. rs=white-space-only</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/c-sdk/libraries/moz.build">ldap/c-sdk/libraries/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/c-sdk/libraries/moz.build">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/c-sdk/libraries/moz.build">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/c-sdk/libraries/moz.build">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/c-sdk/libraries/moz.build">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/c-sdk/libraries/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/TODO.txt">ldap/xpcom/TODO.txt</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/TODO.txt">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/TODO.txt">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/TODO.txt">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/TODO.txt">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/TODO.txt">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERElement.idl">ldap/xpcom/public/nsILDAPBERElement.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERElement.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERElement.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERElement.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERElement.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERElement.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERValue.idl">ldap/xpcom/public/nsILDAPBERValue.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERValue.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERValue.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERValue.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERValue.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPBERValue.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPConnection.idl">ldap/xpcom/public/nsILDAPConnection.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPConnection.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPConnection.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPConnection.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPConnection.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPConnection.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPControl.idl">ldap/xpcom/public/nsILDAPControl.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPControl.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPControl.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPControl.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPControl.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPControl.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPErrors.idl">ldap/xpcom/public/nsILDAPErrors.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPErrors.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPErrors.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPErrors.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPErrors.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPErrors.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessage.idl">ldap/xpcom/public/nsILDAPMessage.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessage.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessage.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessage.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessage.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessage.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessageListener.idl">ldap/xpcom/public/nsILDAPMessageListener.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessageListener.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessageListener.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessageListener.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessageListener.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPMessageListener.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPModification.idl">ldap/xpcom/public/nsILDAPModification.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPModification.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPModification.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPModification.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPModification.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPModification.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPOperation.idl">ldap/xpcom/public/nsILDAPOperation.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPOperation.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPOperation.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPOperation.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPOperation.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPOperation.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPService.idl">ldap/xpcom/public/nsILDAPService.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPService.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPService.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPService.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPService.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPService.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPSyncQuery.idl">ldap/xpcom/public/nsILDAPSyncQuery.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPSyncQuery.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPSyncQuery.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPSyncQuery.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPSyncQuery.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPSyncQuery.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPURL.idl">ldap/xpcom/public/nsILDAPURL.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPURL.idl">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPURL.idl">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPURL.idl">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPURL.idl">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/public/nsILDAPURL.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/src/nsLDAPMessage.cpp">ldap/xpcom/src/nsLDAPMessage.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/src/nsLDAPMessage.cpp">file</a> |
<a href="/comm-central/annotate/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/src/nsLDAPMessage.cpp">annotate</a> |
<a href="/comm-central/diff/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/src/nsLDAPMessage.cpp">diff</a> |
<a href="/comm-central/comparison/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/src/nsLDAPMessage.cpp">comparison</a> |
<a href="/comm-central/log/bbc858a8e20db63d82352a7c52a49e89e720d0a1/ldap/xpcom/src/nsLDAPMessage.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/ldap/c-sdk/libraries/moz.build</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/moz.build</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,11 +1,11 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # vim: set filetype=python:</span>
<a href="#l1.5"></a><span id="l1.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.6"></a><span id="l1.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.7"></a><span id="l1.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l1.8"></a><span id="l1.8" class="difflineminus">- </span>
<a href="#l1.9"></a><span id="l1.9" class="difflineplus">+</span>
<a href="#l1.10"></a><span id="l1.10"> DIRS += [</span>
<a href="#l1.11"></a><span id="l1.11">     'liblber',</span>
<a href="#l1.12"></a><span id="l1.12">     'libldif',</span>
<a href="#l1.13"></a><span id="l1.13">     'libldap',</span>
<a href="#l1.14"></a><span id="l1.14">     'libprldap'</span>
<a href="#l1.15"></a><span id="l1.15"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/ldap/xpcom/TODO.txt</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/ldap/xpcom/TODO.txt</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,52 +1,52 @@</span>
<a href="#l2.4"></a><span id="l2.4"> housecleaning for first 0.x release</span>
<a href="#l2.5"></a><span id="l2.5"> -----------------------------------</span>
<a href="#l2.6"></a><span id="l2.6"> * error handling: sort out what should be NS_ASSERTIONs vs. normal</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineminus">-  error conditions (eg network &amp; data errors), especially in nsLDAPChannel.  </span>
<a href="#l2.8"></a><span id="l2.8" class="difflineplus">+  error conditions (eg network &amp; data errors), especially in nsLDAPChannel. </span>
<a href="#l2.9"></a><span id="l2.9">   also shouldn't be casting results of nsILDAPConnection::GetErrorString to</span>
<a href="#l2.10"></a><span id="l2.10">   void in ldapSearch.  (ideally this would use xpidl nsresult decls</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-  (bug 13423), but that's not done yet).  This also requires some </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  threadsafety work related to the data and interfaces touched by </span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  (bug 13423), but that's not done yet).  This also requires some</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+  threadsafety work related to the data and interfaces touched by</span>
<a href="#l2.15"></a><span id="l2.15">   nsLDAPChannel::Cancel, since these are used in the connection</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-  callbacks, and we also need to be able to cancel from the connection </span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-  callbacks themselves. </span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+  callbacks, and we also need to be able to cancel from the connection</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+  callbacks themselves.</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21"> * audit for and fix leaks / bloat</span>
<a href="#l2.22"></a><span id="l2.22"> </span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-* destroy connection &amp; thread when done with it; deal with timeouts </span>
<a href="#l2.24"></a><span id="l2.24" class="difflineminus">-  (blocked on LDAP C SDK 4.1, in the hopes that the NSPR </span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+* destroy connection &amp; thread when done with it; deal with timeouts</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+  (blocked on LDAP C SDK 4.1, in the hopes that the NSPR</span>
<a href="#l2.27"></a><span id="l2.27">   binding of the IO functions will provide us with some way to pop out</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-  of the select() that's called under ldap_result().  It may not be worth </span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+  of the select() that's called under ldap_result().  It may not be worth</span>
<a href="#l2.30"></a><span id="l2.30">   implementing this until nsLDAPService is resurrected.  If this</span>
<a href="#l2.31"></a><span id="l2.31">   doesn't work, we may have to give nsLDAPConnection an event queue &amp;</span>
<a href="#l2.32"></a><span id="l2.32">   loop of its own, instead of using the LDAP C SDK as a vector to get</span>
<a href="#l2.33"></a><span id="l2.33">   events over there.</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35"> items blocked waiting for other work</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">------------------------------------- </span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-* go through the various options that can be used with the SDK function </span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-  ldap_set_options() and decide if and where the various functions should </span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-  be used.  This will include memory allocator settings, and possibly </span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+------------------------------------</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+* go through the various options that can be used with the SDK function</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+  ldap_set_options() and decide if and where the various functions should</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+  be used.  This will include memory allocator settings, and possibly</span>
<a href="#l2.44"></a><span id="l2.44">   threadsafety callbacks (if necessary).  (blocked waiting on LDAP C</span>
<a href="#l2.45"></a><span id="l2.45">   SDK 4.1 to land, since it contains NSPR bindings for some of this).</span>
<a href="#l2.46"></a><span id="l2.46"> </span>
<a href="#l2.47"></a><span id="l2.47"> * searches that return lots of entries to the nsLDAPChannel</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-  (eg (sn=Smith) at netcenter) mostly stall out the UI.  moving most of the </span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-  callback work off the UI thread to the LDAP connection thread didn't </span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+  (eg (sn=Smith) at netcenter) mostly stall out the UI.  moving most of the</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+  callback work off the UI thread to the LDAP connection thread didn't</span>
<a href="#l2.52"></a><span id="l2.52">   help; so this seems to be lossage in the event system itself (bug 50104).</span>
<a href="#l2.53"></a><span id="l2.53"> </span>
<a href="#l2.54"></a><span id="l2.54"> * deal with race condition that happens if data comes back after</span>
<a href="#l2.55"></a><span id="l2.55">   nsLDAPChannel::Cancel is called.  AsyncStreamListener expects</span>
<a href="#l2.56"></a><span id="l2.56">   GetStatus to return OK, and asserts when it doesn't.  (blocked waiting</span>
<a href="#l2.57"></a><span id="l2.57">   on insight from Warren about nsSocketTransport's use of mCancelStatus).</span>
<a href="#l2.58"></a><span id="l2.58"> </span>
<a href="#l2.59"></a><span id="l2.59"> * ensure that multiple calls to Cancel don't do the wrong thing</span>
<a href="#l2.60"></a><span id="l2.60"> </span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-* move the ldap_unbind() call out of the nsLDAPConnection destructor, </span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+* move the ldap_unbind() call out of the nsLDAPConnection destructor,</span>
<a href="#l2.63"></a><span id="l2.63">   since nsLDAPConnection will soon go back to being callable from the</span>
<a href="#l2.64"></a><span id="l2.64">   UI thread, and ldap_unbind() is actually synchronous.  additionally,</span>
<a href="#l2.65"></a><span id="l2.65">   arrange for the connection thread to shutdown.  (waiting for</span>
<a href="#l2.66"></a><span id="l2.66">   nsILDAPService to be implemented on the theory that nsILDAPService</span>
<a href="#l2.67"></a><span id="l2.67">   might have it's own thread and it would be reasonable to call</span>
<a href="#l2.68"></a><span id="l2.68">   ldap_unbind() from that thread).</span>
<a href="#l2.69"></a><span id="l2.69"> </span>
<a href="#l2.70"></a><span id="l2.70"> * currently nsILDAPOperation::SimpleBind is called as though it were</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineat">@@ -66,22 +66,22 @@ misc</span>
<a href="#l2.72"></a><span id="l2.72">   before the thread-specific ldaperrno has a chance to change.  Note:</span>
<a href="#l2.73"></a><span id="l2.73">   now that ldap_parse_result is only called inside the initializer</span>
<a href="#l2.74"></a><span id="l2.74">   nsLDAPMessage::Init(), this is probably no longer an issue there at</span>
<a href="#l2.75"></a><span id="l2.75">   least.  Need to confirm.</span>
<a href="#l2.76"></a><span id="l2.76"> </span>
<a href="#l2.77"></a><span id="l2.77"> * replace instances of (obsolete) |static NS_DEFINE_IID| variables</span>
<a href="#l2.78"></a><span id="l2.78">   with direct calls to NS_GET_IID in the code.</span>
<a href="#l2.79"></a><span id="l2.79"> </span>
<a href="#l2.80"></a><span id="l2.80" class="difflineminus">-* investigate use of DNS in LDAP sdk.  I think sync functions used in the </span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+* investigate use of DNS in LDAP sdk.  I think sync functions used in the</span>
<a href="#l2.82"></a><span id="l2.82">   wrong places (eg they end up getting called from Mozilla on the UI thread)?</span>
<a href="#l2.83"></a><span id="l2.83"> </span>
<a href="#l2.84"></a><span id="l2.84"> * audit for and implement any appropriate NOT_IMPLEMENTED functions</span>
<a href="#l2.85"></a><span id="l2.85"> </span>
<a href="#l2.86"></a><span id="l2.86" class="difflineminus">-* re-read the IDL for interfaces implemented by nsLDAPChannel.cpp make sure </span>
<a href="#l2.87"></a><span id="l2.87" class="difflineplus">+* re-read the IDL for interfaces implemented by nsLDAPChannel.cpp make sure</span>
<a href="#l2.88"></a><span id="l2.88">   all interfaces are implemented correctly</span>
<a href="#l2.89"></a><span id="l2.89"> </span>
<a href="#l2.90"></a><span id="l2.90"> * implement progress info interfaces, if possible (% done)</span>
<a href="#l2.91"></a><span id="l2.91"> </span>
<a href="#l2.92"></a><span id="l2.92"> * investigate the MOZILLA_CLIENT define as used by the SDK. eg do we still</span>
<a href="#l2.93"></a><span id="l2.93">   want the reference to &quot;xp_sort.h&quot;?</span>
<a href="#l2.94"></a><span id="l2.94"> </span>
<a href="#l2.95"></a><span id="l2.95"> * i18n / l10n (any text strings)</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineat">@@ -95,30 +95,30 @@ misc</span>
<a href="#l2.97"></a><span id="l2.97">   off to callers as ASCII.  How does this all relate to the stated</span>
<a href="#l2.98"></a><span id="l2.98">   UCS2 policy in Mozilla?</span>
<a href="#l2.99"></a><span id="l2.99"> </span>
<a href="#l2.100"></a><span id="l2.100"> * all attributes are assumed to be strings right now.  This probably</span>
<a href="#l2.101"></a><span id="l2.101">   needs to change: assume all attributes are binary, use some</span>
<a href="#l2.102"></a><span id="l2.102">   heuristic to figure out if they're a string.  I wonder how</span>
<a href="#l2.103"></a><span id="l2.103">   ldapsearch does this.</span>
<a href="#l2.104"></a><span id="l2.104"> </span>
<a href="#l2.105"></a><span id="l2.105" class="difflineminus">-* grep for XXXs and fix the issues </span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+* grep for XXXs and fix the issues</span>
<a href="#l2.107"></a><span id="l2.107"> </span>
<a href="#l2.108"></a><span id="l2.108"> * revamp nsILDAPService (currently unused code) to manage LDAP</span>
<a href="#l2.109"></a><span id="l2.109">   connections and allow for sharing connections between browser</span>
<a href="#l2.110"></a><span id="l2.110">   clients.  I think this should obviate the need to hold onto the</span>
<a href="#l2.111"></a><span id="l2.111">   connection with a delegate factory.</span>
<a href="#l2.112"></a><span id="l2.112"> </span>
<a href="#l2.113"></a><span id="l2.113"> * non-anonymous binding (ie nsLDAPURL supports x-bind-name -- I</span>
<a href="#l2.114"></a><span id="l2.114">   suspect this may come with the LDAP C SDK version after 4.1,</span>
<a href="#l2.115"></a><span id="l2.115">   though.)</span>
<a href="#l2.116"></a><span id="l2.116"> </span>
<a href="#l2.117"></a><span id="l2.117"> testing</span>
<a href="#l2.118"></a><span id="l2.118"> -------</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineminus">-* see how the browser copes when it does such a big search that the server </span>
<a href="#l2.120"></a><span id="l2.120" class="difflineplus">+* see how the browser copes when it does such a big search that the server</span>
<a href="#l2.121"></a><span id="l2.121">   only returns partial results and an error.</span>
<a href="#l2.122"></a><span id="l2.122"> </span>
<a href="#l2.123"></a><span id="l2.123"> perf</span>
<a href="#l2.124"></a><span id="l2.124"> ----</span>
<a href="#l2.125"></a><span id="l2.125"> * rather than having one thread per nsILDAPConnection, have multiple</span>
<a href="#l2.126"></a><span id="l2.126">   nsILDAPConnections share the same thread.  possibly pre-spin up a</span>
<a href="#l2.127"></a><span id="l2.127">   thread-pool to handle this?</span>
<a href="#l2.128"></a><span id="l2.128"> </span>
<a href="#l2.129"></a><span id="l2.129" class="difflineat">@@ -128,20 +128,20 @@ perf</span>
<a href="#l2.130"></a><span id="l2.130">   but how does nsIShutdownListener fit in here? and CanUnload?)</span>
<a href="#l2.131"></a><span id="l2.131"> </span>
<a href="#l2.132"></a><span id="l2.132"> * remove any unnecessary thread-safety code (NS_IMPL_THREADSAFE) to avoid</span>
<a href="#l2.133"></a><span id="l2.133">   locking overhead.  need to figure out if everything must be</span>
<a href="#l2.134"></a><span id="l2.134">   threadsafe or not.</span>
<a href="#l2.135"></a><span id="l2.135"> </span>
<a href="#l2.136"></a><span id="l2.136"> later</span>
<a href="#l2.137"></a><span id="l2.137"> -----</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineminus">-* rationalize the logging strategy.  right now there is a mix of </span>
<a href="#l2.139"></a><span id="l2.139" class="difflineminus">-  PR_LOG/NS{WARNING|ERROR} and nsIConsoleService and non-logging, </span>
<a href="#l2.140"></a><span id="l2.140" class="difflineplus">+* rationalize the logging strategy.  right now there is a mix of</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineplus">+  PR_LOG/NS{WARNING|ERROR} and nsIConsoleService and non-logging,</span>
<a href="#l2.142"></a><span id="l2.142">   as I have been vacillating on how much logging it's really important to have</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineminus">-  (part of my thought process about the XPCOM-wrapper being part of </span>
<a href="#l2.144"></a><span id="l2.144" class="difflineplus">+  (part of my thought process about the XPCOM-wrapper being part of</span>
<a href="#l2.145"></a><span id="l2.145">   Mozilla-as-platform)</span>
<a href="#l2.146"></a><span id="l2.146"> * get rid of inappropriate use of nsVoidKey by implementing an nsPRInt32Key</span>
<a href="#l2.147"></a><span id="l2.147"> * handle referrals</span>
<a href="#l2.148"></a><span id="l2.148"> * failover</span>
<a href="#l2.149"></a><span id="l2.149"> * addressbook/mail UI glue</span>
<a href="#l2.150"></a><span id="l2.150"> * PSM certs from directory glue(?)</span>
<a href="#l2.151"></a><span id="l2.151"> * secure (&amp; proxied/socksified?) ldap</span>
<a href="#l2.152"></a><span id="l2.152"> * make the LDAP C SDK autoconf glue not be a shim and not require</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPBERElement.idl</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPBERElement.idl</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,63 +1,63 @@</span>
<a href="#l3.4"></a><span id="l3.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineminus">- * </span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+ *</span>
<a href="#l3.7"></a><span id="l3.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.8"></a><span id="l3.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.9"></a><span id="l3.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l3.12"></a><span id="l3.12"> </span>
<a href="#l3.13"></a><span id="l3.13"> interface nsILDAPBERValue;</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> /**</span>
<a href="#l3.17"></a><span id="l3.17">  * nsILDAPBERElement is a wrapper interface for a C-SDK BerElement object.</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">- * Typically, this is used as an intermediate object to aid in the manual </span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+ * Typically, this is used as an intermediate object to aid in the manual</span>
<a href="#l3.20"></a><span id="l3.20">  * construction of a BER value.  Once the construction is completed by calling</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">- * methods on this object, an nsILDAPBERValue can be retrieved from the </span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+ * methods on this object, an nsILDAPBERValue can be retrieved from the</span>
<a href="#l3.23"></a><span id="l3.23">  * asValue attribute on this interface.</span>
<a href="#l3.24"></a><span id="l3.24">  *</span>
<a href="#l3.25"></a><span id="l3.25">  * &lt;http://www.mozilla.org/directory/ietf-docs/draft-ietf-ldapext-ldap-c-api-05.txt&gt;</span>
<a href="#l3.26"></a><span id="l3.26">  * contains some documentation that mostly (but not exactly) matches</span>
<a href="#l3.27"></a><span id="l3.27">  * the code that this wraps in section 17.</span>
<a href="#l3.28"></a><span id="l3.28">  */</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30"> [scriptable, uuid(409f5b31-c062-4d11-a35b-0a09e7967bf2)]</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-interface nsILDAPBERElement : nsISupports </span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+interface nsILDAPBERElement : nsISupports</span>
<a href="#l3.33"></a><span id="l3.33"> {</span>
<a href="#l3.34"></a><span id="l3.34">   /**</span>
<a href="#l3.35"></a><span id="l3.35">    * Initialize this object.  Must be called before calling any other method</span>
<a href="#l3.36"></a><span id="l3.36">    * on this interface.</span>
<a href="#l3.37"></a><span id="l3.37">    *</span>
<a href="#l3.38"></a><span id="l3.38">    * @param  aValue  value to preinitialize with; 0 for a new empty object</span>
<a href="#l3.39"></a><span id="l3.39">    *</span>
<a href="#l3.40"></a><span id="l3.40">    * @exception  NS_ERROR_NOT_IMPLEMENTED  preinitialization is currently</span>
<a href="#l3.41"></a><span id="l3.41">    *                                       not implemented</span>
<a href="#l3.42"></a><span id="l3.42">    * @exception  NS_ERROR_OUT_OF_MEMORY    unable to allocate the internal</span>
<a href="#l3.43"></a><span id="l3.43">    *                                       BerElement</span>
<a href="#l3.44"></a><span id="l3.44">    */</span>
<a href="#l3.45"></a><span id="l3.45">   void init(in nsILDAPBERValue aValue);</span>
<a href="#l3.46"></a><span id="l3.46"> </span>
<a href="#l3.47"></a><span id="l3.47">   /**</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-   * Most TAG_* constants can be used in the construction or passing in of </span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+   * Most TAG_* constants can be used in the construction or passing in of</span>
<a href="#l3.50"></a><span id="l3.50">    * values to the aTag arguments to most of the methods in this interface.</span>
<a href="#l3.51"></a><span id="l3.51">    */</span>
<a href="#l3.52"></a><span id="l3.52"> </span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-  /** </span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-   * When returned from a parsing method, 0xffffffff is referred to </span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+  /**</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+   * When returned from a parsing method, 0xffffffff is referred to</span>
<a href="#l3.57"></a><span id="l3.57">    * has the parse-error semantic (ie TAG_LBER_ERROR); when passing it to</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-   * a construction method, it is used to mean &quot;pick the default tag for </span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+   * a construction method, it is used to mean &quot;pick the default tag for</span>
<a href="#l3.60"></a><span id="l3.60">    * this type&quot; (ie TAG_LBER_DEFAULT).</span>
<a href="#l3.61"></a><span id="l3.61">    */</span>
<a href="#l3.62"></a><span id="l3.62">   const unsigned long TAG_LBER_ERROR = 0xffffffff;</span>
<a href="#l3.63"></a><span id="l3.63">   const unsigned long TAG_LBER_DEFAULT = 0xffffffff;</span>
<a href="#l3.64"></a><span id="l3.64">   const unsigned long TAG_LBER_END_OF_SEQORSET = 0xfffffffe;</span>
<a href="#l3.65"></a><span id="l3.65"> </span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-  /** </span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+  /**</span>
<a href="#l3.68"></a><span id="l3.68">    * BER encoding types and masks</span>
<a href="#l3.69"></a><span id="l3.69">    */</span>
<a href="#l3.70"></a><span id="l3.70">   const unsigned long TAG_LBER_PRIMITIVE = 0x00;</span>
<a href="#l3.71"></a><span id="l3.71"> </span>
<a href="#l3.72"></a><span id="l3.72">   /**</span>
<a href="#l3.73"></a><span id="l3.73">    * The following two tags are carried over from the LDAP C SDK; their</span>
<a href="#l3.74"></a><span id="l3.74">    * exact purpose there is not well documented.  They both have</span>
<a href="#l3.75"></a><span id="l3.75">    * the same value there as well.</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineat">@@ -76,32 +76,32 @@ interface nsILDAPBERElement : nsISupport</span>
<a href="#l3.77"></a><span id="l3.77">   const unsigned long TAG_LBER_BITSTRING = 0x03;</span>
<a href="#l3.78"></a><span id="l3.78">   const unsigned long TAG_LBER_OCTETSTRING = 0x04;</span>
<a href="#l3.79"></a><span id="l3.79">   const unsigned long TAG_LBER_NULL = 0x05;</span>
<a href="#l3.80"></a><span id="l3.80">   const unsigned long TAG_LBER_ENUMERATED = 0x0a;</span>
<a href="#l3.81"></a><span id="l3.81">   const unsigned long TAG_LBER_SEQUENCE = 0x30;</span>
<a href="#l3.82"></a><span id="l3.82">   const unsigned long TAG_LBER_SET = 0x31;</span>
<a href="#l3.83"></a><span id="l3.83"> </span>
<a href="#l3.84"></a><span id="l3.84">   /**</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineminus">-   * Write a string to this element.  </span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+   * Write a string to this element. </span>
<a href="#l3.87"></a><span id="l3.87">    *</span>
<a href="#l3.88"></a><span id="l3.88">    * @param  aString  string to write</span>
<a href="#l3.89"></a><span id="l3.89">    * @param  aTag     tag for this string (if TAG_LBER_DEFAULT is used,</span>
<a href="#l3.90"></a><span id="l3.90">    *                  TAG_LBER_OCTETSTRING will be written).</span>
<a href="#l3.91"></a><span id="l3.91">    *</span>
<a href="#l3.92"></a><span id="l3.92">    * @return     number of bytes written</span>
<a href="#l3.93"></a><span id="l3.93">    *</span>
<a href="#l3.94"></a><span id="l3.94">    * @exception  NS_ERROR_FAILUE   C-SDK returned error</span>
<a href="#l3.95"></a><span id="l3.95">    */</span>
<a href="#l3.96"></a><span id="l3.96">   unsigned long putString(in AUTF8String aString, in unsigned long aTag);</span>
<a href="#l3.97"></a><span id="l3.97"> </span>
<a href="#l3.98"></a><span id="l3.98">   /**</span>
<a href="#l3.99"></a><span id="l3.99">    * Start a set.  Sets may be nested.</span>
<a href="#l3.100"></a><span id="l3.100">    *</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineminus">-   * @param  aTag  tag for this set (if TAG_LBER_DEFAULT is used, </span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+   * @param  aTag  tag for this set (if TAG_LBER_DEFAULT is used,</span>
<a href="#l3.103"></a><span id="l3.103">    *               TAG_LBER_SET will be written).</span>
<a href="#l3.104"></a><span id="l3.104">    *</span>
<a href="#l3.105"></a><span id="l3.105">    * @exception  NS_ERROR_FAILUE   C-SDK returned an error</span>
<a href="#l3.106"></a><span id="l3.106">    */</span>
<a href="#l3.107"></a><span id="l3.107">   void startSet(in unsigned long aTag);</span>
<a href="#l3.108"></a><span id="l3.108"> </span>
<a href="#l3.109"></a><span id="l3.109">   /**</span>
<a href="#l3.110"></a><span id="l3.110">    * Cause the entire set started by the last startSet() call to be written.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPBERValue.idl</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPBERValue.idl</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1,44 +1,44 @@</span>
<a href="#l4.4"></a><span id="l4.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">- * </span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+ *</span>
<a href="#l4.7"></a><span id="l4.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.8"></a><span id="l4.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.9"></a><span id="l4.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l4.12"></a><span id="l4.12"> </span>
<a href="#l4.13"></a><span id="l4.13"> /**</span>
<a href="#l4.14"></a><span id="l4.14">  * Representation of a BER value as an interface containing an array of</span>
<a href="#l4.15"></a><span id="l4.15">  * bytes.  Someday this should perhaps be obsoleted by a better, more</span>
<a href="#l4.16"></a><span id="l4.16">  * generalized version of nsIByteBuffer, but that's currently not even</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">- * scriptable (see bug 125596).  </span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+ * scriptable (see bug 125596). </span>
<a href="#l4.19"></a><span id="l4.19">  */</span>
<a href="#l4.20"></a><span id="l4.20"> [scriptable, uuid(c817c5fe-1dd1-11b2-a10b-ae9885762ea9)]</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-interface nsILDAPBERValue : nsISupports </span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+interface nsILDAPBERValue : nsISupports</span>
<a href="#l4.23"></a><span id="l4.23"> {</span>
<a href="#l4.24"></a><span id="l4.24">     /**</span>
<a href="#l4.25"></a><span id="l4.25">      * Set the BER value from an array of bytes (copies).</span>
<a href="#l4.26"></a><span id="l4.26">      *</span>
<a href="#l4.27"></a><span id="l4.27">      * @exception NS_ERROR_OUT_OF_MEMORY    couldn't allocate buffer to copy to</span>
<a href="#l4.28"></a><span id="l4.28">      */</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-    void set(in unsigned long aCount, </span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+    void set(in unsigned long aCount,</span>
<a href="#l4.31"></a><span id="l4.31">              [array, size_is(aCount)] in octet aValue);</span>
<a href="#l4.32"></a><span id="l4.32"> </span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-    /** </span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+    /**</span>
<a href="#l4.35"></a><span id="l4.35">      * Set the BER value from a UTF8 string (copies).</span>
<a href="#l4.36"></a><span id="l4.36">      *</span>
<a href="#l4.37"></a><span id="l4.37">      * @exception NS_ERROR_OUT_OF_MEMORY    couldn't allocate buffer to copy to</span>
<a href="#l4.38"></a><span id="l4.38">      */</span>
<a href="#l4.39"></a><span id="l4.39">     void setFromUTF8(in AUTF8String aValue);</span>
<a href="#l4.40"></a><span id="l4.40"> </span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-    /** </span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+    /**</span>
<a href="#l4.43"></a><span id="l4.43">      * Get the BER value as an array of bytes.  Note that if this value is</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-     * zero-length, aCount and aRetVal will both be 0.  This means that </span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+     * zero-length, aCount and aRetVal will both be 0.  This means that</span>
<a href="#l4.46"></a><span id="l4.46">      * (in C++ anyway) the caller MUST test either aCount or aRetval before</span>
<a href="#l4.47"></a><span id="l4.47">      * dereferencing aRetVal.</span>
<a href="#l4.48"></a><span id="l4.48">      *</span>
<a href="#l4.49"></a><span id="l4.49">      * @exception NS_ERROR_OUT_OF_MEMORY    couldn't allocate buffer to copy to</span>
<a href="#l4.50"></a><span id="l4.50">      */</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-    void get(out unsigned long aCount, </span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+    void get(out unsigned long aCount,</span>
<a href="#l4.53"></a><span id="l4.53">              [retval, array, size_is(aCount)] out octet aRetVal);</span>
<a href="#l4.54"></a><span id="l4.54"> };</span>
<a href="#l4.55"></a><span id="l4.55"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPConnection.idl</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPConnection.idl</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -6,72 +6,72 @@</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7"> interface nsILDAPOperation;</span>
<a href="#l5.8"></a><span id="l5.8"> interface nsILDAPMessageListener;</span>
<a href="#l5.9"></a><span id="l5.9"> interface nsILDAPURL;</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> %{C++</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-#define NS_LDAPCONNECTION_CONTRACTID &quot;@mozilla.org/network/ldap-connection;1&quot; </span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+#define NS_LDAPCONNECTION_CONTRACTID &quot;@mozilla.org/network/ldap-connection;1&quot;</span>
<a href="#l5.14"></a><span id="l5.14"> %}</span>
<a href="#l5.15"></a><span id="l5.15"> </span>
<a href="#l5.16"></a><span id="l5.16"> [scriptable, uuid(360c1ff7-15e3-4ffe-b4b8-0eda72ebc096)]</span>
<a href="#l5.17"></a><span id="l5.17"> interface nsILDAPConnection : nsISupports</span>
<a href="#l5.18"></a><span id="l5.18"> {</span>
<a href="#l5.19"></a><span id="l5.19">     /**</span>
<a href="#l5.20"></a><span id="l5.20">      * the string version of lderrno</span>
<a href="#l5.21"></a><span id="l5.21">      */</span>
<a href="#l5.22"></a><span id="l5.22">     readonly attribute wstring errorString;</span>
<a href="#l5.23"></a><span id="l5.23"> </span>
<a href="#l5.24"></a><span id="l5.24">     /**</span>
<a href="#l5.25"></a><span id="l5.25">      * DN to bind as.  use the init() method to set this.</span>
<a href="#l5.26"></a><span id="l5.26">      *</span>
<a href="#l5.27"></a><span id="l5.27">      * @exception NS_ERROR_OUT_OF_MEMORY</span>
<a href="#l5.28"></a><span id="l5.28">      */</span>
<a href="#l5.29"></a><span id="l5.29">     readonly attribute AUTF8String bindName;</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-    </span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+   </span>
<a href="#l5.32"></a><span id="l5.32">     /**</span>
<a href="#l5.33"></a><span id="l5.33">      * private parameter (anything caller desires)</span>
<a href="#l5.34"></a><span id="l5.34">      */</span>
<a href="#l5.35"></a><span id="l5.35">     attribute nsISupports closure;</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-    /** </span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+    /**</span>
<a href="#l5.39"></a><span id="l5.39">      * Set up the connection.  Note that init() must be called on a thread</span>
<a href="#l5.40"></a><span id="l5.40">      * that already has an nsIEventQueue.</span>
<a href="#l5.41"></a><span id="l5.41">      *</span>
<a href="#l5.42"></a><span id="l5.42">      * @param aUrl              A URL for the ldap server. The host, port and</span>
<a href="#l5.43"></a><span id="l5.43">      *                          ssl connection type will be extracted from this</span>
<a href="#l5.44"></a><span id="l5.44">      * @param aBindName         DN to bind as</span>
<a href="#l5.45"></a><span id="l5.45">      * @param aMessageListener  Callback for DNS resolution completion</span>
<a href="#l5.46"></a><span id="l5.46">      * @param aClosure          private parameter (anything caller desires)</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-     * @param aVersion          LDAP version to use (currently VERSION2 or </span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+     * @param aVersion          LDAP version to use (currently VERSION2 or</span>
<a href="#l5.49"></a><span id="l5.49">      *                          VERSION3)</span>
<a href="#l5.50"></a><span id="l5.50">      *</span>
<a href="#l5.51"></a><span id="l5.51">      * @exception NS_ERROR_ILLEGAL_VALUE        null pointer or invalid version</span>
<a href="#l5.52"></a><span id="l5.52">      * @exception NS_ERROR_OUT_OF_MEMORY        ran out of memory</span>
<a href="#l5.53"></a><span id="l5.53">      * @exception NS_ERROR_OFFLINE              we are in off-line mode</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-     * @exception NS_ERROR_FAILURE              </span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+     * @exception NS_ERROR_FAILURE             </span>
<a href="#l5.56"></a><span id="l5.56">      * @exception NS_ERROR_UNEXPECTED           internal error</span>
<a href="#l5.57"></a><span id="l5.57">      */</span>
<a href="#l5.58"></a><span id="l5.58">     void init(in nsILDAPURL aUrl,</span>
<a href="#l5.59"></a><span id="l5.59">               in AUTF8String aBindName,</span>
<a href="#l5.60"></a><span id="l5.60">               in nsILDAPMessageListener aMessageListener,</span>
<a href="#l5.61"></a><span id="l5.61">               in nsISupports aClosure, in unsigned long aVersion);</span>
<a href="#l5.62"></a><span id="l5.62"> </span>
<a href="#l5.63"></a><span id="l5.63">     const unsigned long VERSION2 = 2;</span>
<a href="#l5.64"></a><span id="l5.64">     const unsigned long VERSION3 = 3;</span>
<a href="#l5.65"></a><span id="l5.65"> </span>
<a href="#l5.66"></a><span id="l5.66">     /**</span>
<a href="#l5.67"></a><span id="l5.67">      * Get information about the last error that occured on this connection.</span>
<a href="#l5.68"></a><span id="l5.68">      *</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-     * @param matched   if the server is returning LDAP_NO_SUCH_OBJECT, </span>
<a href="#l5.70"></a><span id="l5.70" class="difflineminus">-     *                  LDAP_ALIAS_PROBLEM, LDAP_INVALID_DN_SYNTAX, </span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+     * @param matched   if the server is returning LDAP_NO_SUCH_OBJECT,</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+     *                  LDAP_ALIAS_PROBLEM, LDAP_INVALID_DN_SYNTAX,</span>
<a href="#l5.73"></a><span id="l5.73">      *                  or LDAP_ALIAS_DEREF_PROBLEM, this will contain</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineminus">-     *                  the portion of DN that matches the entry that is </span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+     *                  the portion of DN that matches the entry that is</span>
<a href="#l5.76"></a><span id="l5.76">      *                  closest to the requested entry</span>
<a href="#l5.77"></a><span id="l5.77">      *</span>
<a href="#l5.78"></a><span id="l5.78">      * @param s         additional error information from the server</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineminus">-     * </span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+     *</span>
<a href="#l5.81"></a><span id="l5.81">      * @return          the error code, as defined in nsILDAPErrors.idl</span>
<a href="#l5.82"></a><span id="l5.82">      */</span>
<a href="#l5.83"></a><span id="l5.83">     long getLdErrno(out AUTF8String matched, out AUTF8String s);</span>
<a href="#l5.84"></a><span id="l5.84"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPControl.idl</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPControl.idl</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l6.4"></a><span id="l6.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">- * </span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+ *</span>
<a href="#l6.7"></a><span id="l6.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.8"></a><span id="l6.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.9"></a><span id="l6.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l6.12"></a><span id="l6.12"> </span>
<a href="#l6.13"></a><span id="l6.13"> interface nsILDAPBERValue;</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15" class="difflineat">@@ -17,19 +17,19 @@ interface nsILDAPControl : nsISupports</span>
<a href="#l6.16"></a><span id="l6.16">   /**</span>
<a href="#l6.17"></a><span id="l6.17">    * Control type, represented as a string.</span>
<a href="#l6.18"></a><span id="l6.18">    *</span>
<a href="#l6.19"></a><span id="l6.19">    * @exceptions   none</span>
<a href="#l6.20"></a><span id="l6.20">    */</span>
<a href="#l6.21"></a><span id="l6.21">   attribute ACString oid;</span>
<a href="#l6.22"></a><span id="l6.22"> </span>
<a href="#l6.23"></a><span id="l6.23">   /**</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-   * The data associated with a control, if any.  To specify that no data </span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+   * The data associated with a control, if any.  To specify that no data</span>
<a href="#l6.26"></a><span id="l6.26">    * is to be associated with the control, don't set this at all (which</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-   * is equivalent to setting it to null).  </span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+   * is equivalent to setting it to null). </span>
<a href="#l6.29"></a><span id="l6.29">    *</span>
<a href="#l6.30"></a><span id="l6.30">    * @note Specifying a zero-length value is not currently supported.  At some</span>
<a href="#l6.31"></a><span id="l6.31">    * date, setting this to an nsILDAPBERValue which has not had any of the</span>
<a href="#l6.32"></a><span id="l6.32">    * set methods called will be the appropriate way to do that.</span>
<a href="#l6.33"></a><span id="l6.33">    *</span>
<a href="#l6.34"></a><span id="l6.34">    * @exceptions   none</span>
<a href="#l6.35"></a><span id="l6.35">    */</span>
<a href="#l6.36"></a><span id="l6.36">   attribute nsILDAPBERValue value;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPErrors.idl</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPErrors.idl</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -5,18 +5,18 @@</span>
<a href="#l7.4"></a><span id="l7.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8"> /**</span>
<a href="#l7.9"></a><span id="l7.9">  * Error codes used in the LDAP XPCOM SDK.</span>
<a href="#l7.10"></a><span id="l7.10">  *</span>
<a href="#l7.11"></a><span id="l7.11">  * Taken from the Mozilla C SDK's ldap.h include file, these should be</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">- * the same as those specified in the draft-ietf-ldapext-ldap-c-api-04.txt </span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">- * Internet Draft.  </span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+ * the same as those specified in the draft-ietf-ldapext-ldap-c-api-04.txt</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+ * Internet Draft. </span>
<a href="#l7.16"></a><span id="l7.16">  *</span>
<a href="#l7.17"></a><span id="l7.17">  * The only good documentation I'm aware of for these error codes is</span>
<a href="#l7.18"></a><span id="l7.18">  * at &lt;http://docs.iplanet.com/docs/manuals/directory.html#SDKC&gt;.</span>
<a href="#l7.19"></a><span id="l7.19">  * Unfortunately, this does not currently seem to be available under any</span>
<a href="#l7.20"></a><span id="l7.20">  * open source license, so I can't include that documentation here as</span>
<a href="#l7.21"></a><span id="l7.21">  * doxygen comments.</span>
<a href="#l7.22"></a><span id="l7.22">  *</span>
<a href="#l7.23"></a><span id="l7.23">  */</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineat">@@ -96,22 +96,22 @@ interface nsILDAPErrors : nsISupports</span>
<a href="#l7.25"></a><span id="l7.25">      */</span>
<a href="#l7.26"></a><span id="l7.26">     const long IS_LEAF = 0x23;</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28">     const long ALIAS_DEREF_PROBLEM = 0x24;</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30">     const long INAPPROPRIATE_AUTH = 0x30;</span>
<a href="#l7.31"></a><span id="l7.31"> </span>
<a href="#l7.32"></a><span id="l7.32">     const long INVALID_CREDENTIALS = 0x31;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">- </span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+</span>
<a href="#l7.35"></a><span id="l7.35">     const long INSUFFICIENT_ACCESS = 0x32;</span>
<a href="#l7.36"></a><span id="l7.36"> </span>
<a href="#l7.37"></a><span id="l7.37">     const long BUSY = 0x33;</span>
<a href="#l7.38"></a><span id="l7.38"> </span>
<a href="#l7.39"></a><span id="l7.39" class="difflineminus">-    const long UNAVAILABLE = 0x34;    </span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+    const long UNAVAILABLE = 0x34;   </span>
<a href="#l7.41"></a><span id="l7.41"> </span>
<a href="#l7.42"></a><span id="l7.42">     const long UNWILLING_TO_PERFORM = 0x35;</span>
<a href="#l7.43"></a><span id="l7.43"> </span>
<a href="#l7.44"></a><span id="l7.44">     const long LOOP_DETECT = 0x36;</span>
<a href="#l7.45"></a><span id="l7.45"> </span>
<a href="#l7.46"></a><span id="l7.46">     /**</span>
<a href="#l7.47"></a><span id="l7.47">      * server side sort extension</span>
<a href="#l7.48"></a><span id="l7.48">      */</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineat">@@ -194,17 +194,17 @@ interface nsILDAPErrors : nsISupports</span>
<a href="#l7.50"></a><span id="l7.50">     const long CLIENT_LOOP = 0x60;</span>
<a href="#l7.51"></a><span id="l7.51"> </span>
<a href="#l7.52"></a><span id="l7.52">     /**</span>
<a href="#l7.53"></a><span id="l7.53">      * new in LDAPv3</span>
<a href="#l7.54"></a><span id="l7.54">      */</span>
<a href="#l7.55"></a><span id="l7.55">     const long REFERRAL_LIMIT_EXCEEDED = 0x61;</span>
<a href="#l7.56"></a><span id="l7.56"> };</span>
<a href="#l7.57"></a><span id="l7.57"> </span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-/* </span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+/*</span>
<a href="#l7.60"></a><span id="l7.60">  * Map these errors codes into the nsresult namespace in C++</span>
<a href="#l7.61"></a><span id="l7.61">  */</span>
<a href="#l7.62"></a><span id="l7.62"> %{C++</span>
<a href="#l7.63"></a><span id="l7.63"> </span>
<a href="#l7.64"></a><span id="l7.64"> #define NS_ERROR_LDAP_OPERATIONS_ERROR \</span>
<a href="#l7.65"></a><span id="l7.65">     NS_ERROR_GENERATE_FAILURE(NS_ERROR_MODULE_LDAP, \</span>
<a href="#l7.66"></a><span id="l7.66">                               nsILDAPErrors::OPERATIONS_ERROR)</span>
<a href="#l7.67"></a><span id="l7.67"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPMessage.idl</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPMessage.idl</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l8.4"></a><span id="l8.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">- * </span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+ *</span>
<a href="#l8.7"></a><span id="l8.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.8"></a><span id="l8.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.9"></a><span id="l8.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l8.12"></a><span id="l8.12"> </span>
<a href="#l8.13"></a><span id="l8.13"> interface nsILDAPBERValue;</span>
<a href="#l8.14"></a><span id="l8.14"> interface nsILDAPOperation;</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineat">@@ -13,17 +13,17 @@ interface nsILDAPOperation;</span>
<a href="#l8.16"></a><span id="l8.16"> #define NS_LDAPMESSAGE_CONTRACTID &quot;@mozilla.org/network/ldap-message;1&quot;</span>
<a href="#l8.17"></a><span id="l8.17"> %}</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19"> [scriptable, uuid(973ff50f-2002-4f0c-b57d-2242156139a2)]</span>
<a href="#l8.20"></a><span id="l8.20"> interface nsILDAPMessage : nsISupports</span>
<a href="#l8.21"></a><span id="l8.21"> {</span>
<a href="#l8.22"></a><span id="l8.22">     /**</span>
<a href="#l8.23"></a><span id="l8.23">      * The Distinguished Name of the entry associated with this message.</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-     * </span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+     *</span>
<a href="#l8.26"></a><span id="l8.26">      * @exception NS_ERROR_OUT_OF_MEMORY        ran out of memory</span>
<a href="#l8.27"></a><span id="l8.27">      * @exception NS_ERROR_ILLEGAL_VALUE        null pointer passed in</span>
<a href="#l8.28"></a><span id="l8.28">      * @exception NS_ERROR_LDAP_DECODING_ERROR  problem during BER-decoding</span>
<a href="#l8.29"></a><span id="l8.29">      * @exception NS_ERROR_UNEXPECTED           bug or memory corruption</span>
<a href="#l8.30"></a><span id="l8.30">      */</span>
<a href="#l8.31"></a><span id="l8.31">     readonly attribute AUTF8String dn;</span>
<a href="#l8.32"></a><span id="l8.32"> </span>
<a href="#l8.33"></a><span id="l8.33">     /**</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineat">@@ -31,52 +31,52 @@ interface nsILDAPMessage : nsISupports</span>
<a href="#l8.35"></a><span id="l8.35">      *</span>
<a href="#l8.36"></a><span id="l8.36">      * @exception NS_ERROR_OUT_OF_MEMORY</span>
<a href="#l8.37"></a><span id="l8.37">      * @exception NS_ERROR_ILLEGAL_VALUE        null pointer passed in</span>
<a href="#l8.38"></a><span id="l8.38">      * @exception NS_ERROR_UNEXPECTED           bug or memory corruption</span>
<a href="#l8.39"></a><span id="l8.39">      * @exception NS_ERROR_LDAP_DECODING_ERROR  problem during BER decoding</span>
<a href="#l8.40"></a><span id="l8.40">      *</span>
<a href="#l8.41"></a><span id="l8.41">      * @return  array of all attributes in the current message</span>
<a href="#l8.42"></a><span id="l8.42">      */</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-    void getAttributes(out unsigned long count, </span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+    void getAttributes(out unsigned long count,</span>
<a href="#l8.45"></a><span id="l8.45">                        [retval, array, size_is(count)] out string aAttributes);</span>
<a href="#l8.46"></a><span id="l8.46"> </span>
<a href="#l8.47"></a><span id="l8.47">     /**</span>
<a href="#l8.48"></a><span id="l8.48">      * Get an array of all the attribute values in this message.</span>
<a href="#l8.49"></a><span id="l8.49">      *</span>
<a href="#l8.50"></a><span id="l8.50">      * @param attr      The attribute whose values are to be returned</span>
<a href="#l8.51"></a><span id="l8.51">      * @param count     Number of values in the outbound array.</span>
<a href="#l8.52"></a><span id="l8.52">      * @param values    Array of values</span>
<a href="#l8.53"></a><span id="l8.53">      *</span>
<a href="#l8.54"></a><span id="l8.54">      * @exception NS_ERROR_UNEXPECTED           Bug or memory corruption</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-     * @exception NS_ERROR_LDAP_DECODING_ERROR  Attribute not found or other </span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+     * @exception NS_ERROR_LDAP_DECODING_ERROR  Attribute not found or other</span>
<a href="#l8.57"></a><span id="l8.57">      *                                          decoding error.</span>
<a href="#l8.58"></a><span id="l8.58">      * @exception NS_ERROR_OUT_OF_MEMORY</span>
<a href="#l8.59"></a><span id="l8.59">      */</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-    void getValues(in string attr, out unsigned long count, </span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+    void getValues(in string attr, out unsigned long count,</span>
<a href="#l8.62"></a><span id="l8.62">                    [retval, array, size_is(count)] out wstring values);</span>
<a href="#l8.63"></a><span id="l8.63"> </span>
<a href="#l8.64"></a><span id="l8.64">     /**</span>
<a href="#l8.65"></a><span id="l8.65">      * The operation this message originated from</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineminus">-     * </span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+     *</span>
<a href="#l8.68"></a><span id="l8.68">      * @exception NS_ERROR_NULL_POINTER         NULL pointer to getter</span>
<a href="#l8.69"></a><span id="l8.69">      */</span>
<a href="#l8.70"></a><span id="l8.70">     readonly attribute nsILDAPOperation operation;</span>
<a href="#l8.71"></a><span id="l8.71"> </span>
<a href="#l8.72"></a><span id="l8.72">     /**</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineminus">-     * The result code (aka lderrno) for this message.  </span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+     * The result code (aka lderrno) for this message. </span>
<a href="#l8.75"></a><span id="l8.75">      *</span>
<a href="#l8.76"></a><span id="l8.76">      * IDL definitions for these constants live in nsILDAPErrors.idl.</span>
<a href="#l8.77"></a><span id="l8.77">      *</span>
<a href="#l8.78"></a><span id="l8.78">      * @exception NS_ERROR_ILLEGAL_VALUE    null pointer passed in</span>
<a href="#l8.79"></a><span id="l8.79">      */</span>
<a href="#l8.80"></a><span id="l8.80">     readonly attribute long errorCode;</span>
<a href="#l8.81"></a><span id="l8.81"> </span>
<a href="#l8.82"></a><span id="l8.82">     /**</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineminus">-     * The result type of this message.  Possible types listed below, the </span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+     * The result type of this message.  Possible types listed below, the</span>
<a href="#l8.85"></a><span id="l8.85">      * values chosen are taken from the draft-ietf-ldapext-ldap-c-api-04.txt</span>
<a href="#l8.86"></a><span id="l8.86">      * and are the same ones used in the ldap.h include file from the Mozilla</span>
<a href="#l8.87"></a><span id="l8.87">      * LDAP C SDK.</span>
<a href="#l8.88"></a><span id="l8.88">      *</span>
<a href="#l8.89"></a><span id="l8.89">      * @exception NS_ERROR_ILLEGAL_VALUE    null pointer passed in</span>
<a href="#l8.90"></a><span id="l8.90">      * @exception NS_ERROR_UNEXPECTED       internal error (possible memory</span>
<a href="#l8.91"></a><span id="l8.91">      *                                                      corruption)</span>
<a href="#l8.92"></a><span id="l8.92">      */</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineat">@@ -92,48 +92,48 @@ interface nsILDAPMessage : nsISupports</span>
<a href="#l8.94"></a><span id="l8.94">      */</span>
<a href="#l8.95"></a><span id="l8.95">     const long RES_SEARCH_ENTRY = 0x64;</span>
<a href="#l8.96"></a><span id="l8.96"> </span>
<a href="#l8.97"></a><span id="l8.97">     /**</span>
<a href="#l8.98"></a><span id="l8.98">      * An LDAPv3 search reference (a referral to another server)</span>
<a href="#l8.99"></a><span id="l8.99">      */</span>
<a href="#l8.100"></a><span id="l8.100">     const long RES_SEARCH_REFERENCE = 0x73;</span>
<a href="#l8.101"></a><span id="l8.101"> </span>
<a href="#l8.102"></a><span id="l8.102" class="difflineminus">-    /** </span>
<a href="#l8.103"></a><span id="l8.103" class="difflineplus">+    /**</span>
<a href="#l8.104"></a><span id="l8.104">      * The result of a search operation (i.e. the search is done; no more</span>
<a href="#l8.105"></a><span id="l8.105">      * entries to follow).</span>
<a href="#l8.106"></a><span id="l8.106">      */</span>
<a href="#l8.107"></a><span id="l8.107">     const long RES_SEARCH_RESULT = 0x65;</span>
<a href="#l8.108"></a><span id="l8.108"> </span>
<a href="#l8.109"></a><span id="l8.109">     /**</span>
<a href="#l8.110"></a><span id="l8.110">      * The result of a modify operation.</span>
<a href="#l8.111"></a><span id="l8.111">      */</span>
<a href="#l8.112"></a><span id="l8.112">     const long RES_MODIFY = 0x67;</span>
<a href="#l8.113"></a><span id="l8.113"> </span>
<a href="#l8.114"></a><span id="l8.114" class="difflineminus">-    /** </span>
<a href="#l8.115"></a><span id="l8.115" class="difflineplus">+    /**</span>
<a href="#l8.116"></a><span id="l8.116">      * The result of an add operation</span>
<a href="#l8.117"></a><span id="l8.117">      */</span>
<a href="#l8.118"></a><span id="l8.118">     const long RES_ADD = 0x69;</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineminus">-    </span>
<a href="#l8.120"></a><span id="l8.120" class="difflineplus">+   </span>
<a href="#l8.121"></a><span id="l8.121">     /**</span>
<a href="#l8.122"></a><span id="l8.122">      * The result of a delete operation</span>
<a href="#l8.123"></a><span id="l8.123">      */</span>
<a href="#l8.124"></a><span id="l8.124">     const long RES_DELETE = 0x6B;</span>
<a href="#l8.125"></a><span id="l8.125"> </span>
<a href="#l8.126"></a><span id="l8.126">     /**</span>
<a href="#l8.127"></a><span id="l8.127">      * The result of an modify DN operation</span>
<a href="#l8.128"></a><span id="l8.128">      */</span>
<a href="#l8.129"></a><span id="l8.129">     const long RES_MODDN = 0x6D;</span>
<a href="#l8.130"></a><span id="l8.130"> </span>
<a href="#l8.131"></a><span id="l8.131">     /**</span>
<a href="#l8.132"></a><span id="l8.132">      * The result of a compare operation</span>
<a href="#l8.133"></a><span id="l8.133">      */</span>
<a href="#l8.134"></a><span id="l8.134">     const long RES_COMPARE = 0x6F;</span>
<a href="#l8.135"></a><span id="l8.135"> </span>
<a href="#l8.136"></a><span id="l8.136" class="difflineminus">-    /** </span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+    /**</span>
<a href="#l8.138"></a><span id="l8.138">      * The result of an LDAPv3 extended operation</span>
<a href="#l8.139"></a><span id="l8.139">      */</span>
<a href="#l8.140"></a><span id="l8.140">     const long RES_EXTENDED = 0x78;</span>
<a href="#l8.141"></a><span id="l8.141"> </span>
<a href="#l8.142"></a><span id="l8.142">     /**</span>
<a href="#l8.143"></a><span id="l8.143">      * get an LDIF-like string representation of this message</span>
<a href="#l8.144"></a><span id="l8.144">      *</span>
<a href="#l8.145"></a><span id="l8.145">      * @return unicode encoded string representation.</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineat">@@ -156,15 +156,15 @@ interface nsILDAPMessage : nsISupports</span>
<a href="#l8.147"></a><span id="l8.147">      * Get an array of all the attribute values in this message (a wrapper</span>
<a href="#l8.148"></a><span id="l8.148">      * around the LDAP C SDK's get_values_len()).</span>
<a href="#l8.149"></a><span id="l8.149">      *</span>
<a href="#l8.150"></a><span id="l8.150">      * @param attr      The attribute whose values are to be returned</span>
<a href="#l8.151"></a><span id="l8.151">      * @param count     Number of values in the outbound array.</span>
<a href="#l8.152"></a><span id="l8.152">      * @param values    Array of nsILDAPBERValue objects</span>
<a href="#l8.153"></a><span id="l8.153">      *</span>
<a href="#l8.154"></a><span id="l8.154">      * @exception NS_ERROR_UNEXPECTED           Bug or memory corruption</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineminus">-     * @exception NS_ERROR_LDAP_DECODING_ERROR  Attribute not found or other </span>
<a href="#l8.156"></a><span id="l8.156" class="difflineplus">+     * @exception NS_ERROR_LDAP_DECODING_ERROR  Attribute not found or other</span>
<a href="#l8.157"></a><span id="l8.157">      *                                          decoding error.</span>
<a href="#l8.158"></a><span id="l8.158">      * @exception NS_ERROR_OUT_OF_MEMORY</span>
<a href="#l8.159"></a><span id="l8.159">      */</span>
<a href="#l8.160"></a><span id="l8.160">     void getBinaryValues(in string attr, out unsigned long count,</span>
<a href="#l8.161"></a><span id="l8.161">                          [retval, array, size_is(count)] out nsILDAPBERValue values);</span>
<a href="#l8.162"></a><span id="l8.162"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPMessageListener.idl</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPMessageListener.idl</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,22 +1,22 @@</span>
<a href="#l9.4"></a><span id="l9.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">- * </span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+ *</span>
<a href="#l9.7"></a><span id="l9.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.8"></a><span id="l9.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.9"></a><span id="l9.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l9.12"></a><span id="l9.12"> </span>
<a href="#l9.13"></a><span id="l9.13"> interface nsILDAPMessage;</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15"> interface nsILDAPConnection;</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-/** </span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">- * A callback interface to be implemented by any objects that want to </span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+/**</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+ * A callback interface to be implemented by any objects that want to</span>
<a href="#l9.21"></a><span id="l9.21">  * receive results from an nsILDAPOperation (ie nsILDAPMessages) as they</span>
<a href="#l9.22"></a><span id="l9.22">  * come in.</span>
<a href="#l9.23"></a><span id="l9.23">  */</span>
<a href="#l9.24"></a><span id="l9.24"> [scriptable, uuid(dc721d4b-3ff2-4387-a80c-5e29545f774a)]</span>
<a href="#l9.25"></a><span id="l9.25"> interface nsILDAPMessageListener : nsISupports</span>
<a href="#l9.26"></a><span id="l9.26"> {</span>
<a href="#l9.27"></a><span id="l9.27">     /**</span>
<a href="#l9.28"></a><span id="l9.28">      * Messages received are passed back via this function.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPModification.idl</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPModification.idl</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -41,17 +41,17 @@ interface nsILDAPModification : nsISuppo</span>
<a href="#l10.4"></a><span id="l10.4">    */</span>
<a href="#l10.5"></a><span id="l10.5">   attribute ACString type;</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7">   /**</span>
<a href="#l10.8"></a><span id="l10.8">    * The array of values this modification sets for the attribute</span>
<a href="#l10.9"></a><span id="l10.9">    */</span>
<a href="#l10.10"></a><span id="l10.10">   attribute nsIArray values;</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  /** </span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  /**</span>
<a href="#l10.14"></a><span id="l10.14">    * Function that allows all the attributes to be set at the same</span>
<a href="#l10.15"></a><span id="l10.15">    * time to avoid multiple function calls.</span>
<a href="#l10.16"></a><span id="l10.16">    */</span>
<a href="#l10.17"></a><span id="l10.17">   void setUpModification(in long aOperation, in ACString aType,</span>
<a href="#l10.18"></a><span id="l10.18">                          in nsIArray aValues);</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">   void setUpModificationOneValue(in long aOperation, in ACString aType,</span>
<a href="#l10.21"></a><span id="l10.21">                                  in nsILDAPBERValue aValue);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPOperation.idl</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPOperation.idl</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1,47 +1,47 @@</span>
<a href="#l11.4"></a><span id="l11.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">- * </span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+ *</span>
<a href="#l11.7"></a><span id="l11.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.8"></a><span id="l11.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.9"></a><span id="l11.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l11.12"></a><span id="l11.12"> #include &quot;nsILDAPConnection.idl&quot;</span>
<a href="#l11.13"></a><span id="l11.13"> #include &quot;nsIAuthModule.idl&quot;</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> interface nsILDAPMessage;</span>
<a href="#l11.16"></a><span id="l11.16"> interface nsILDAPMessageListener;</span>
<a href="#l11.17"></a><span id="l11.17"> interface nsILDAPModification;</span>
<a href="#l11.18"></a><span id="l11.18"> interface nsIMutableArray;</span>
<a href="#l11.19"></a><span id="l11.19"> interface nsIArray;</span>
<a href="#l11.20"></a><span id="l11.20"> </span>
<a href="#l11.21"></a><span id="l11.21"> %{C++</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-#define NS_LDAPOPERATION_CONTRACTID &quot;@mozilla.org/network/ldap-operation;1&quot; </span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+#define NS_LDAPOPERATION_CONTRACTID &quot;@mozilla.org/network/ldap-operation;1&quot;</span>
<a href="#l11.24"></a><span id="l11.24"> %}</span>
<a href="#l11.25"></a><span id="l11.25"> </span>
<a href="#l11.26"></a><span id="l11.26"> // XXXdmose check to make sure ctl-related err codes documented</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28"> typedef uint32_t PRIntervalTime;</span>
<a href="#l11.29"></a><span id="l11.29"> </span>
<a href="#l11.30"></a><span id="l11.30"> [scriptable, uuid(4dfb1b19-fc8f-4525-92e7-f97b78a9747a)]</span>
<a href="#l11.31"></a><span id="l11.31"> interface nsILDAPOperation : nsISupports</span>
<a href="#l11.32"></a><span id="l11.32"> {</span>
<a href="#l11.33"></a><span id="l11.33">     /**</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-     * The connection this operation is on. </span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-     * </span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+     * The connection this operation is on.</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+     *</span>
<a href="#l11.38"></a><span id="l11.38">      * @exception NS_ERROR_ILLEGAL_VALUE        a NULL pointer was passed in</span>
<a href="#l11.39"></a><span id="l11.39">      */</span>
<a href="#l11.40"></a><span id="l11.40">     readonly attribute nsILDAPConnection connection;</span>
<a href="#l11.41"></a><span id="l11.41"> </span>
<a href="#l11.42"></a><span id="l11.42">     /**</span>
<a href="#l11.43"></a><span id="l11.43">      * Callback for individual result messages related to this operation (set</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-     * by the init() method).  This is actually an nsISupports proxy object, </span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+     * by the init() method).  This is actually an nsISupports proxy object,</span>
<a href="#l11.46"></a><span id="l11.46">      * as the callback will happen from another thread.</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-     * </span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+     *</span>
<a href="#l11.49"></a><span id="l11.49">      * @exception NS_ERROR_ILLEGAL_VALUE        a NULL pointer was passed in</span>
<a href="#l11.50"></a><span id="l11.50">      */</span>
<a href="#l11.51"></a><span id="l11.51">     readonly attribute nsILDAPMessageListener messageListener;</span>
<a href="#l11.52"></a><span id="l11.52"> </span>
<a href="#l11.53"></a><span id="l11.53">     /**</span>
<a href="#l11.54"></a><span id="l11.54">      * The message-id associated with this operation.</span>
<a href="#l11.55"></a><span id="l11.55">      *</span>
<a href="#l11.56"></a><span id="l11.56">      * @exception NS_ERROR_ILLEGAL_VALUE        a NULL pointer was passed in</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineat">@@ -79,23 +79,23 @@ interface nsILDAPOperation : nsISupports</span>
<a href="#l11.58"></a><span id="l11.58">      *</span>
<a href="#l11.59"></a><span id="l11.59">      * @param aConnection       connection this operation should use</span>
<a href="#l11.60"></a><span id="l11.60">      * @param aMessageListener  interface used to call back the results.</span>
<a href="#l11.61"></a><span id="l11.61">      * @param aClosure          private parameter (anything caller desires)</span>
<a href="#l11.62"></a><span id="l11.62">      *</span>
<a href="#l11.63"></a><span id="l11.63">      * @exception NS_ERROR_ILLEGAL_VALUE        a NULL pointer was passed in</span>
<a href="#l11.64"></a><span id="l11.64">      * @exception NS_ERROR_UNEXPECTED           failed to get connection handle</span>
<a href="#l11.65"></a><span id="l11.65">      */</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-    void init(in nsILDAPConnection aConnection, </span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+    void init(in nsILDAPConnection aConnection,</span>
<a href="#l11.68"></a><span id="l11.68">               in nsILDAPMessageListener aMessageListener,</span>
<a href="#l11.69"></a><span id="l11.69">               in nsISupports aClosure);</span>
<a href="#l11.70"></a><span id="l11.70"> </span>
<a href="#l11.71"></a><span id="l11.71">     /**</span>
<a href="#l11.72"></a><span id="l11.72">      * Asynchronously authenticate to the LDAP server.</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-     * </span>
<a href="#l11.74"></a><span id="l11.74" class="difflineplus">+     *</span>
<a href="#l11.75"></a><span id="l11.75">      * @param passwd    the password used for binding; NULL for anon-binds</span>
<a href="#l11.76"></a><span id="l11.76">      *</span>
<a href="#l11.77"></a><span id="l11.77">      * @exception NS_ERROR_LDAP_ENCODING_ERROR  problem encoding bind request</span>
<a href="#l11.78"></a><span id="l11.78">      * @exception NS_ERROR_LDAP_SERVER_DOWN     server down (XXX rebinds?)</span>
<a href="#l11.79"></a><span id="l11.79">      * @exception NS_ERROR_LDAP_CONNECT_ERROR   connection failed or lost</span>
<a href="#l11.80"></a><span id="l11.80">      * @exception NS_ERROR_OUT_OF_MEMORY        ran out of memory</span>
<a href="#l11.81"></a><span id="l11.81">      * @exception NS_ERROR_UNEXPECTED           internal error</span>
<a href="#l11.82"></a><span id="l11.82">      */</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineat">@@ -104,30 +104,30 @@ interface nsILDAPOperation : nsISupports</span>
<a href="#l11.84"></a><span id="l11.84">     /**</span>
<a href="#l11.85"></a><span id="l11.85">      * Asynchronously perform a SASL bind against the LDAP server</span>
<a href="#l11.86"></a><span id="l11.86">      *</span>
<a href="#l11.87"></a><span id="l11.87">      * @param service    the host name of the service being connected to</span>
<a href="#l11.88"></a><span id="l11.88">      * @param mechanism  the name of the SASL mechanism in use</span>
<a href="#l11.89"></a><span id="l11.89">      * @param authModule the nsIAuthModule to be used to perform the operation</span>
<a href="#l11.90"></a><span id="l11.90">      *</span>
<a href="#l11.91"></a><span id="l11.91">      */</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-    void saslBind(in ACString service, in ACString mechanism, </span>
<a href="#l11.93"></a><span id="l11.93" class="difflineplus">+    void saslBind(in ACString service, in ACString mechanism,</span>
<a href="#l11.94"></a><span id="l11.94">                   in nsIAuthModule authModule);</span>
<a href="#l11.95"></a><span id="l11.95"> </span>
<a href="#l11.96"></a><span id="l11.96">     /**</span>
<a href="#l11.97"></a><span id="l11.97">      * Continue a SASL bind operation</span>
<a href="#l11.98"></a><span id="l11.98">      *</span>
<a href="#l11.99"></a><span id="l11.99">      * @param token     the next SASL token to send to the server</span>
<a href="#l11.100"></a><span id="l11.100">      * @param tokenLen  the length of the token to send</span>
<a href="#l11.101"></a><span id="l11.101">      *</span>
<a href="#l11.102"></a><span id="l11.102">      */</span>
<a href="#l11.103"></a><span id="l11.103">     void saslStep(in string token, in unsigned long tokenLen);</span>
<a href="#l11.104"></a><span id="l11.104"> </span>
<a href="#l11.105"></a><span id="l11.105">     /**</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineminus">-     * Kicks off an asynchronous add request.  The &quot;ext&quot; stands for </span>
<a href="#l11.107"></a><span id="l11.107" class="difflineplus">+     * Kicks off an asynchronous add request.  The &quot;ext&quot; stands for</span>
<a href="#l11.108"></a><span id="l11.108">      * &quot;extensions&quot;, and is intended to convey that this method will</span>
<a href="#l11.109"></a><span id="l11.109">      * eventually support the extensions described in the</span>
<a href="#l11.110"></a><span id="l11.110">      * draft-ietf-ldapext-ldap-c-api-04.txt Internet Draft.</span>
<a href="#l11.111"></a><span id="l11.111">      *</span>
<a href="#l11.112"></a><span id="l11.112">      * @param aBaseDn           Base DN to add</span>
<a href="#l11.113"></a><span id="l11.113">      * @param aModCount         Number of modifications</span>
<a href="#l11.114"></a><span id="l11.114">      * @param aMods             Array of modifications</span>
<a href="#l11.115"></a><span id="l11.115">      *</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineat">@@ -144,17 +144,17 @@ interface nsILDAPOperation : nsISupports</span>
<a href="#l11.117"></a><span id="l11.117">      * @exception NS_ERROR_UNEXPECTED           an unexpected error has</span>
<a href="#l11.118"></a><span id="l11.118">      *                                          occurred</span>
<a href="#l11.119"></a><span id="l11.119">      *</span>
<a href="#l11.120"></a><span id="l11.120">      * XXX doesn't currently handle LDAPControl params</span>
<a href="#l11.121"></a><span id="l11.121">      */</span>
<a href="#l11.122"></a><span id="l11.122">     void addExt(in AUTF8String aBaseDn, in nsIArray aMods);</span>
<a href="#l11.123"></a><span id="l11.123"> </span>
<a href="#l11.124"></a><span id="l11.124">     /**</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineminus">-     * Kicks off an asynchronous delete request.  The &quot;ext&quot; stands for </span>
<a href="#l11.126"></a><span id="l11.126" class="difflineplus">+     * Kicks off an asynchronous delete request.  The &quot;ext&quot; stands for</span>
<a href="#l11.127"></a><span id="l11.127">      * &quot;extensions&quot;, and is intended to convey that this method will</span>
<a href="#l11.128"></a><span id="l11.128">      * eventually support the extensions described in the</span>
<a href="#l11.129"></a><span id="l11.129">      * draft-ietf-ldapext-ldap-c-api-04.txt Internet Draft.</span>
<a href="#l11.130"></a><span id="l11.130">      *</span>
<a href="#l11.131"></a><span id="l11.131">      * @param aBaseDn           Base DN to delete</span>
<a href="#l11.132"></a><span id="l11.132">      *</span>
<a href="#l11.133"></a><span id="l11.133">      * @exception NS_ERROR_NOT_INITIALIZED      operation not initialized</span>
<a href="#l11.134"></a><span id="l11.134">      * @exception NS_ERROR_INVALID_ARG          invalid argument</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineat">@@ -169,17 +169,17 @@ interface nsILDAPOperation : nsISupports</span>
<a href="#l11.136"></a><span id="l11.136">      * @exception NS_ERROR_UNEXPECTED           an unexpected error has</span>
<a href="#l11.137"></a><span id="l11.137">      *                                          occurred</span>
<a href="#l11.138"></a><span id="l11.138">      *</span>
<a href="#l11.139"></a><span id="l11.139">      * XXX doesn't currently handle LDAPControl params</span>
<a href="#l11.140"></a><span id="l11.140">      */</span>
<a href="#l11.141"></a><span id="l11.141">     void deleteExt(in AUTF8String aBaseDn);</span>
<a href="#l11.142"></a><span id="l11.142"> </span>
<a href="#l11.143"></a><span id="l11.143">     /**</span>
<a href="#l11.144"></a><span id="l11.144" class="difflineminus">-     * Kicks off an asynchronous modify request.  The &quot;ext&quot; stands for </span>
<a href="#l11.145"></a><span id="l11.145" class="difflineplus">+     * Kicks off an asynchronous modify request.  The &quot;ext&quot; stands for</span>
<a href="#l11.146"></a><span id="l11.146">      * &quot;extensions&quot;, and is intended to convey that this method will</span>
<a href="#l11.147"></a><span id="l11.147">      * eventually support the extensions described in the</span>
<a href="#l11.148"></a><span id="l11.148">      * draft-ietf-ldapext-ldap-c-api-04.txt Internet Draft.</span>
<a href="#l11.149"></a><span id="l11.149">      *</span>
<a href="#l11.150"></a><span id="l11.150">      * @param aBaseDn           Base DN to modify</span>
<a href="#l11.151"></a><span id="l11.151">      * @param aModCount         Number of modifications</span>
<a href="#l11.152"></a><span id="l11.152">      * @param aMods             Array of modifications</span>
<a href="#l11.153"></a><span id="l11.153">      *</span>
<a href="#l11.154"></a><span id="l11.154" class="difflineat">@@ -224,17 +224,17 @@ interface nsILDAPOperation : nsISupports</span>
<a href="#l11.155"></a><span id="l11.155">      *                                          occurred</span>
<a href="#l11.156"></a><span id="l11.156">      *</span>
<a href="#l11.157"></a><span id="l11.157">      * XXX doesn't currently handle LDAPControl params</span>
<a href="#l11.158"></a><span id="l11.158">      */</span>
<a href="#l11.159"></a><span id="l11.159">     void rename(in AUTF8String aBaseDn, in AUTF8String aNewRDn,</span>
<a href="#l11.160"></a><span id="l11.160">                 in AUTF8String aNewParent, in boolean aDeleteOldRDn);</span>
<a href="#l11.161"></a><span id="l11.161"> </span>
<a href="#l11.162"></a><span id="l11.162">     /**</span>
<a href="#l11.163"></a><span id="l11.163" class="difflineminus">-     * Kicks off an asynchronous search request.  The &quot;ext&quot; stands for </span>
<a href="#l11.164"></a><span id="l11.164" class="difflineplus">+     * Kicks off an asynchronous search request.  The &quot;ext&quot; stands for</span>
<a href="#l11.165"></a><span id="l11.165">      * &quot;extensions&quot;, and is intended to convey that this method will</span>
<a href="#l11.166"></a><span id="l11.166">      * eventually support the extensions described in the</span>
<a href="#l11.167"></a><span id="l11.167">      * draft-ietf-ldapext-ldap-c-api-04.txt Internet Draft.</span>
<a href="#l11.168"></a><span id="l11.168">      *</span>
<a href="#l11.169"></a><span id="l11.169">      * @param aBaseDn           Base DN to search</span>
<a href="#l11.170"></a><span id="l11.170">      * @param aScope            One of SCOPE_{BASE,ONELEVEL,SUBTREE}</span>
<a href="#l11.171"></a><span id="l11.171">      * @param aFilter           Search filter</span>
<a href="#l11.172"></a><span id="l11.172">      * @param aAttributes       Comma separated list of values, holding the</span>
<a href="#l11.173"></a><span id="l11.173" class="difflineat">@@ -254,17 +254,17 @@ interface nsILDAPOperation : nsISupports</span>
<a href="#l11.174"></a><span id="l11.174">      *                                          client is using</span>
<a href="#l11.175"></a><span id="l11.175">      * @exception NS_ERROR_LDAP_FILTER_ERROR</span>
<a href="#l11.176"></a><span id="l11.176">      * @exception NS_ERROR_UNEXPECTED</span>
<a href="#l11.177"></a><span id="l11.177">      */</span>
<a href="#l11.178"></a><span id="l11.178">     void searchExt(in AUTF8String aBaseDn, in int32_t aScope,</span>
<a href="#l11.179"></a><span id="l11.179">                    in AUTF8String aFilter, in ACString aAttributes,</span>
<a href="#l11.180"></a><span id="l11.180">                    in PRIntervalTime aTimeOut, in int32_t aSizeLimit);</span>
<a href="#l11.181"></a><span id="l11.181"> </span>
<a href="#l11.182"></a><span id="l11.182" class="difflineminus">-    /**  </span>
<a href="#l11.183"></a><span id="l11.183" class="difflineplus">+    /** </span>
<a href="#l11.184"></a><span id="l11.184">      * Cancels an async operation that is in progress.</span>
<a href="#l11.185"></a><span id="l11.185">      *</span>
<a href="#l11.186"></a><span id="l11.186">      * XXX controls not supported yet</span>
<a href="#l11.187"></a><span id="l11.187">      *</span>
<a href="#l11.188"></a><span id="l11.188">      * @exception NS_ERROR_NOT_IMPLEMENTED      server or client controls</span>
<a href="#l11.189"></a><span id="l11.189">      *                                          were set on this object</span>
<a href="#l11.190"></a><span id="l11.190">      * @exception NS_ERROR_NOT_INITIALIZED      operation not initialized</span>
<a href="#l11.191"></a><span id="l11.191">      * @exception NS_ERROR_LDAP_ENCODING_ERROR  error during BER-encoding</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPService.idl</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPService.idl</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -71,17 +71,17 @@ interface nsILDAPService : nsISupports {</span>
<a href="#l12.4"></a><span id="l12.4">      * before returning from this function. This might be considered a bug,</span>
<a href="#l12.5"></a><span id="l12.5">      * but for now be aware of this (see Bugzilla bug #75989).</span>
<a href="#l12.6"></a><span id="l12.6">      *</span>
<a href="#l12.7"></a><span id="l12.7">      * Calling this method does not increment the leases on this connection,</span>
<a href="#l12.8"></a><span id="l12.8">      * you'll have to use the getConnection() method to actually get the</span>
<a href="#l12.9"></a><span id="l12.9">      * connection itself (presumably from the callback/listener object).</span>
<a href="#l12.10"></a><span id="l12.10">      * The listener needs to implement nsILDAPMessageListener, providing</span>
<a href="#l12.11"></a><span id="l12.11">      * the OnLDAPMessage() method.</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-     * </span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+     *</span>
<a href="#l12.14"></a><span id="l12.14">      * @param aKey             unique key identifying the server entry</span>
<a href="#l12.15"></a><span id="l12.15">      * @param aMessageListener the listener object, which we will call</span>
<a href="#l12.16"></a><span id="l12.16">      *                         when the LDAP bind message is available</span>
<a href="#l12.17"></a><span id="l12.17">      *</span>
<a href="#l12.18"></a><span id="l12.18">      * @exception NS_ERROR_FAILURE          there is no server registered</span>
<a href="#l12.19"></a><span id="l12.19">      *                                      in the service with this key,</span>
<a href="#l12.20"></a><span id="l12.20">      *                                      or we were unable to get a</span>
<a href="#l12.21"></a><span id="l12.21">      *                                      connection properly to the server</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -151,37 +151,37 @@ interface nsILDAPService : nsISupports {</span>
<a href="#l12.23"></a><span id="l12.23">                              in nsILDAPMessageListener aListener);</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25">     /**</span>
<a href="#l12.26"></a><span id="l12.26">      * Generates and returns an LDAP search filter by substituting</span>
<a href="#l12.27"></a><span id="l12.27">      * aValue, aAttr, aPrefix, and aSuffix into aPattern.</span>
<a href="#l12.28"></a><span id="l12.28">      *</span>
<a href="#l12.29"></a><span id="l12.29">      * The only good documentation I'm aware of for this function is</span>
<a href="#l12.30"></a><span id="l12.30">      * at &lt;http://docs.iplanet.com/docs/manuals/dirsdk/csdk41/html/filter.htm&gt;</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-     * and </span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+     * and</span>
<a href="#l12.33"></a><span id="l12.33">      * &lt;http://docs.iplanet.com/docs/manuals/dirsdk/csdk41/html/function.htm#17835&gt;</span>
<a href="#l12.34"></a><span id="l12.34">      * Unfortunately, this does not currently seem to be available</span>
<a href="#l12.35"></a><span id="l12.35">      * under any open source license, so I can't include that</span>
<a href="#l12.36"></a><span id="l12.36">      * documentation here in the doxygen comments.</span>
<a href="#l12.37"></a><span id="l12.37">      *</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineminus">-     * @param aMaxSize   maximum size (in char) of string to be </span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+     * @param aMaxSize   maximum size (in char) of string to be</span>
<a href="#l12.40"></a><span id="l12.40">      *                   created and returned (including final \0)</span>
<a href="#l12.41"></a><span id="l12.41">      * @param aPattern   pattern to be used for the filter</span>
<a href="#l12.42"></a><span id="l12.42">      * @param aPrefix    prefix to prepend to the filter</span>
<a href="#l12.43"></a><span id="l12.43">      * @param aSuffix    suffix to be appended to the filer</span>
<a href="#l12.44"></a><span id="l12.44">      * @param aAttr      replacement for %a in the pattern</span>
<a href="#l12.45"></a><span id="l12.45">      * @param aValue     replacement for %v in the pattern</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineminus">-     *  </span>
<a href="#l12.47"></a><span id="l12.47" class="difflineplus">+     * </span>
<a href="#l12.48"></a><span id="l12.48">      * @exception NS_ERROR_INVALID_ARG      invalid parameter passed in</span>
<a href="#l12.49"></a><span id="l12.49">      * @exception NS_ERROR_OUT_OF_MEMORY    allocation failed</span>
<a href="#l12.50"></a><span id="l12.50">      * @exception NS_ERROR_NOT_AVAILABLE    filter longer than maxsiz chars</span>
<a href="#l12.51"></a><span id="l12.51">      * @exception NS_ERROR_UNEXPECTED       ldap_create_filter returned</span>
<a href="#l12.52"></a><span id="l12.52">      *                                      unexpected error code</span>
<a href="#l12.53"></a><span id="l12.53">      */</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineminus">-    AUTF8String createFilter(in unsigned long aMaxSize, in AUTF8String aPattern, </span>
<a href="#l12.55"></a><span id="l12.55" class="difflineplus">+    AUTF8String createFilter(in unsigned long aMaxSize, in AUTF8String aPattern,</span>
<a href="#l12.56"></a><span id="l12.56">                              in AUTF8String aPrefix, in AUTF8String aSuffix,</span>
<a href="#l12.57"></a><span id="l12.57">                              in AUTF8String aAttr, in AUTF8String aValue);</span>
<a href="#l12.58"></a><span id="l12.58"> </span>
<a href="#l12.59"></a><span id="l12.59">     /**</span>
<a href="#l12.60"></a><span id="l12.60">      * Parses a distinguished name (DN) and returns the relative DN,</span>
<a href="#l12.61"></a><span id="l12.61">      * base DN and the list of attributes that make up the relative DN.</span>
<a href="#l12.62"></a><span id="l12.62">      *</span>
<a href="#l12.63"></a><span id="l12.63">      * @param dn        DN to parse</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPSyncQuery.idl</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPSyncQuery.idl</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -4,23 +4,23 @@</span>
<a href="#l13.4"></a><span id="l13.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l13.7"></a><span id="l13.7"> interface nsILDAPURL;</span>
<a href="#l13.8"></a><span id="l13.8"> </span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10"> [scriptable, uuid (0308fb36-1dd2-11b2-b16f-8510e8c5311a)]</span>
<a href="#l13.11"></a><span id="l13.11"> interface nsILDAPSyncQuery : nsISupports {</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  </span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+ </span>
<a href="#l13.14"></a><span id="l13.14">   /**</span>
<a href="#l13.15"></a><span id="l13.15">    * getQueryResults</span>
<a href="#l13.16"></a><span id="l13.16">    *</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-   * Create a new LDAP connection do a synchronous LDAP search and return </span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+   * Create a new LDAP connection do a synchronous LDAP search and return</span>
<a href="#l13.19"></a><span id="l13.19">    * the results.</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-   * @param aServerURL - LDAP URL with parameters to a LDAP search </span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+   * @param aServerURL - LDAP URL with parameters to a LDAP search</span>
<a href="#l13.22"></a><span id="l13.22">    *                     (&quot;ldap://host/base?attributes?one/sub?filter&quot;)</span>
<a href="#l13.23"></a><span id="l13.23">    * @param aProtocolVersion - LDAP protocol version to use for connection</span>
<a href="#l13.24"></a><span id="l13.24">    *                           (nsILDAPConnection.idl has symbolic constants)</span>
<a href="#l13.25"></a><span id="l13.25">    * @return results</span>
<a href="#l13.26"></a><span id="l13.26">    */</span>
<a href="#l13.27"></a><span id="l13.27">    wstring getQueryResults (in nsILDAPURL aServerURL,</span>
<a href="#l13.28"></a><span id="l13.28">                             in unsigned long aProtocolVersion);</span>
<a href="#l13.29"></a><span id="l13.29"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/ldap/xpcom/public/nsILDAPURL.idl</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/ldap/xpcom/public/nsILDAPURL.idl</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l14.4"></a><span id="l14.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">- * </span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+ *</span>
<a href="#l14.7"></a><span id="l14.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.8"></a><span id="l14.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.9"></a><span id="l14.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> #include &quot;nsIURI.idl&quot;</span>
<a href="#l14.12"></a><span id="l14.12"> </span>
<a href="#l14.13"></a><span id="l14.13"> %{C++</span>
<a href="#l14.14"></a><span id="l14.14"> #define NS_LDAPURL_CONTRACTID &quot;@mozilla.org/network/ldap-url;1&quot;</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineat">@@ -85,46 +85,46 @@ interface nsILDAPURL : nsIURI {</span>
<a href="#l14.16"></a><span id="l14.16">      *</span>
<a href="#l14.17"></a><span id="l14.17">      * @param aAttribute                    An LDAP attribute (e.g. &quot;cn&quot;)</span>
<a href="#l14.18"></a><span id="l14.18">      * @return boolean                      Truth value</span>
<a href="#l14.19"></a><span id="l14.19">      * @exception NS_ERROR_NULL_POINTER     NULL pointer to GET method</span>
<a href="#l14.20"></a><span id="l14.20">      */</span>
<a href="#l14.21"></a><span id="l14.21">     boolean hasAttribute(in ACString aAttribute);</span>
<a href="#l14.22"></a><span id="l14.22"> </span>
<a href="#l14.23"></a><span id="l14.23">     /**</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-     * The scope of the search.  defaults to SCOPE_BASE. </span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+     * The scope of the search.  defaults to SCOPE_BASE.</span>
<a href="#l14.26"></a><span id="l14.26">      *</span>
<a href="#l14.27"></a><span id="l14.27">      * @exception NS_ERROR_NULL_POINTER     NULL pointer to GET method</span>
<a href="#l14.28"></a><span id="l14.28">      * @exception NS_ERROR_MALFORMED_URI    Illegal base to SET method</span>
<a href="#l14.29"></a><span id="l14.29">      */</span>
<a href="#l14.30"></a><span id="l14.30">     attribute long scope;</span>
<a href="#l14.31"></a><span id="l14.31"> </span>
<a href="#l14.32"></a><span id="l14.32">     /**</span>
<a href="#l14.33"></a><span id="l14.33">      * Search just the base object</span>
<a href="#l14.34"></a><span id="l14.34">      */</span>
<a href="#l14.35"></a><span id="l14.35">     const long SCOPE_BASE = 0;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineminus">-    </span>
<a href="#l14.37"></a><span id="l14.37" class="difflineminus">-    /** </span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+   </span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+    /**</span>
<a href="#l14.40"></a><span id="l14.40">      * Search only the children of the base object</span>
<a href="#l14.41"></a><span id="l14.41">      */</span>
<a href="#l14.42"></a><span id="l14.42">     const long SCOPE_ONELEVEL = 1;</span>
<a href="#l14.43"></a><span id="l14.43"> </span>
<a href="#l14.44"></a><span id="l14.44">     /**</span>
<a href="#l14.45"></a><span id="l14.45">      * Search the entire subtree under and including the base object</span>
<a href="#l14.46"></a><span id="l14.46">      */</span>
<a href="#l14.47"></a><span id="l14.47">     const long SCOPE_SUBTREE = 2;</span>
<a href="#l14.48"></a><span id="l14.48"> </span>
<a href="#l14.49"></a><span id="l14.49">     /**</span>
<a href="#l14.50"></a><span id="l14.50">      * The search filter. &quot;(objectClass=*)&quot; is the default.</span>
<a href="#l14.51"></a><span id="l14.51">      */</span>
<a href="#l14.52"></a><span id="l14.52">     attribute AUTF8String filter;</span>
<a href="#l14.53"></a><span id="l14.53"> </span>
<a href="#l14.54"></a><span id="l14.54">     /**</span>
<a href="#l14.55"></a><span id="l14.55">      * Any options defined for this URL (check options using a bitwise and)</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineminus">-     * </span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+     *</span>
<a href="#l14.58"></a><span id="l14.58">      * @exception NS_ERROR_NULL_POINTER     NULL pointer to GET method</span>
<a href="#l14.59"></a><span id="l14.59">      * @exception NS_ERROR_OUT_OF_MEMORY    Ran out of memory</span>
<a href="#l14.60"></a><span id="l14.60">      */</span>
<a href="#l14.61"></a><span id="l14.61">     attribute unsigned long options;</span>
<a href="#l14.62"></a><span id="l14.62"> </span>
<a href="#l14.63"></a><span id="l14.63">     /**</span>
<a href="#l14.64"></a><span id="l14.64">      * If this is set/true, this is an ldaps: URL, not an ldap: URL</span>
<a href="#l14.65"></a><span id="l14.65">      */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPMessage.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPMessage.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -366,17 +366,17 @@ nsLDAPMessage::IterateAttributes(uint32_</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5">         // get the next attribute</span>
<a href="#l15.6"></a><span id="l15.6">         //</span>
<a href="#l15.7"></a><span id="l15.7">         attr = ldap_next_attribute(mConnectionHandle, mMsgHandle, position);</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9">         // check to see if there is an error, or if we're just done iterating</span>
<a href="#l15.10"></a><span id="l15.10">         //</span>
<a href="#l15.11"></a><span id="l15.11">         if (!attr) {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">- </span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+</span>
<a href="#l15.14"></a><span id="l15.14">             // bail out if there's an error</span>
<a href="#l15.15"></a><span id="l15.15">             //</span>
<a href="#l15.16"></a><span id="l15.16">             int32_t lderrno = ldap_get_lderrno(mConnectionHandle, 0, 0);</span>
<a href="#l15.17"></a><span id="l15.17">             if (lderrno != LDAP_SUCCESS) {</span>
<a href="#l15.18"></a><span id="l15.18">                 return IterateAttrErrHandler(lderrno, aAttrCount, aAttributes,</span>
<a href="#l15.19"></a><span id="l15.19">                                              position);</span>
<a href="#l15.20"></a><span id="l15.20">             }</span>
<a href="#l15.21"></a><span id="l15.21"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:32Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

