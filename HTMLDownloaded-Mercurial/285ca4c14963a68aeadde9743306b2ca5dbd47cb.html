<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 6955:285ca4c14963a68aeadde9743306b2ca5dbd47cb</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 285ca4c14963a68aeadde9743306b2ca5dbd47cb" />
<meta property="og:url" content="/comm-central/rev/285ca4c14963a68aeadde9743306b2ca5dbd47cb" />
<meta property="og:description" content="Bug 624108 - Land about:support in the tree. r=bwinton, sr=Standard8, ui-r=clarkbw" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 285ca4c14963a68aeadde9743306b2ca5dbd47cb 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/285ca4c14963a68aeadde9743306b2ca5dbd47cb">shortlog</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/285ca4c14963a68aeadde9743306b2ca5dbd47cb">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb">files</a> |
changeset |
<a href="/comm-central/raw-rev/285ca4c14963a68aeadde9743306b2ca5dbd47cb">raw</a>  | <a href="/comm-central/archive/285ca4c14963a68aeadde9743306b2ca5dbd47cb.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=624108">Bug 624108</a> - Land about:support in the tree. r=bwinton, sr=Standard8, ui-r=clarkbw
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#105;&#100;&#100;&#104;&#97;&#114;&#116;&#104;&#32;&#65;&#103;&#97;&#114;&#119;&#97;&#108;&#32;&#60;&#115;&#105;&#100;&#46;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 15 Jan 2011 00:30:37 +0530</td></tr>

<tr>
 <td>changeset 6955</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/285ca4c14963a68aeadde9743306b2ca5dbd47cb">285ca4c14963a68aeadde9743306b2ca5dbd47cb</a></td>
</tr>



<tr>
<td>parent 6954</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/21421642db18e4c316eb9276e4a0e8f40190e75e">21421642db18e4c316eb9276e4a0e8f40190e75e</a>
</td>
</tr>

<tr>
<td>child 6956</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/8aceaf24369903ac240048fa32e112d6ee3f4d6f">8aceaf24369903ac240048fa32e112d6ee3f4d6f</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=285ca4c14963a68aeadde9743306b2ca5dbd47cb">5331</a></td></tr>
<tr><td>push user</td><td>sid.bugzilla@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 14 Jan 2011 19:03:07 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@285ca4c14963 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=285ca4c14963a68aeadde9743306b2ca5dbd47cb">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&newProject=comm-central&newRevision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&newProject=comm-central&newRevision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&newProject=comm-central&newRevision=285ca4c14963a68aeadde9743306b2ca5dbd47cb&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bwinton%29&revcount=50">bwinton</a>, <a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a>, <a href="/comm-central/log?rev=reviewer%28clarkbw%29&revcount=50">clarkbw</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=624108">624108</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=624108">Bug 624108</a> - Land about:support in the tree. r=bwinton, sr=Standard8, ui-r=clarkbw

about:support is a useful troubleshooting tool. The idea is to have a list of
account settings, modified prefs and installed extensions in one spot, and to
provide easy and safe means of communicating these settings to people who can
help troubleshoot an issue.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/Makefile.in">mail/components/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/Makefile.in">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/Makefile.in">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/Makefile.in">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/Makefile.in">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/Makefile.in">mail/components/about-support/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/Makefile.in">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/Makefile.in">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/Makefile.in">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/Makefile.in">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupport.js">mail/components/about-support/aboutSupport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupport.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupport.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupport.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupport.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportMac.js">mail/components/about-support/aboutSupportMac.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportMac.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportMac.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportMac.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportMac.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportMac.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportUnix.js">mail/components/about-support/aboutSupportUnix.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportUnix.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportUnix.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportUnix.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportUnix.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportUnix.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportWin32.js">mail/components/about-support/aboutSupportWin32.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportWin32.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportWin32.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportWin32.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportWin32.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/aboutSupportWin32.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/aboutSupport.xhtml">mail/components/about-support/content/aboutSupport.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/aboutSupport.xhtml">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/aboutSupport.xhtml">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/aboutSupport.xhtml">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/aboutSupport.xhtml">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/aboutSupport.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/accounts.js">mail/components/about-support/content/accounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/accounts.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/accounts.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/accounts.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/accounts.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/accounts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/export.js">mail/components/about-support/content/export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/export.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/export.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/export.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/export.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/export.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/extensions.js">mail/components/about-support/content/extensions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/extensions.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/extensions.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/extensions.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/extensions.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/extensions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/gfx.js">mail/components/about-support/content/gfx.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/gfx.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/gfx.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/gfx.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/gfx.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/gfx.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/hide-private.css">mail/components/about-support/content/hide-private.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/hide-private.css">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/hide-private.css">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/hide-private.css">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/hide-private.css">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/hide-private.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/init.js">mail/components/about-support/content/init.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/init.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/init.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/init.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/init.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/init.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.js">mail/components/about-support/content/overlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.xul">mail/components/about-support/content/overlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.xul">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.xul">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.xul">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.xul">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/overlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/prefs.js">mail/components/about-support/content/prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/prefs.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/prefs.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/prefs.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/prefs.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/prefs.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/show-private.css">mail/components/about-support/content/show-private.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/show-private.css">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/show-private.css">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/show-private.css">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/show-private.css">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/content/show-private.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/jar.mn">mail/components/about-support/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/jar.mn">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/jar.mn">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/jar.mn">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/jar.mn">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/about-support/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/aboutRedirector.js">mail/components/aboutRedirector.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/aboutRedirector.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/aboutRedirector.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/aboutRedirector.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/aboutRedirector.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/aboutRedirector.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/mailComponents.manifest">mail/components/mailComponents.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/mailComponents.manifest">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/mailComponents.manifest">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/mailComponents.manifest">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/mailComponents.manifest">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/components/mailComponents.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd">mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties">mail/locales/en-US/chrome/messenger/aboutSupportMail.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd">mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/jar.mn">mail/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/content-tabs/test-about-support.js">mail/test/mozmill/content-tabs/test-about-support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/content-tabs/test-about-support.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/content-tabs/test-about-support.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/content-tabs/test-about-support.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/content-tabs/test-about-support.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/content-tabs/test-about-support.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">mail/test/mozmill/shared-modules/test-content-tab-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/gnomestripe/jar.mn">mail/themes/gnomestripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/gnomestripe/jar.mn">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/gnomestripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/gnomestripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/gnomestripe/jar.mn">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/gnomestripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/pinstripe/jar.mn">mail/themes/pinstripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/pinstripe/jar.mn">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/pinstripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/pinstripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/pinstripe/jar.mn">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/pinstripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/jar.mn">mail/themes/qute/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/jar.mn">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/jar.mn">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/jar.mn">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/jar.mn">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/mail/aboutSupport.css">mail/themes/qute/mail/aboutSupport.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/mail/aboutSupport.css">file</a> |
<a href="/comm-central/annotate/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/mail/aboutSupport.css">annotate</a> |
<a href="/comm-central/diff/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/mail/aboutSupport.css">diff</a> |
<a href="/comm-central/comparison/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/mail/aboutSupport.css">comparison</a> |
<a href="/comm-central/log/285ca4c14963a68aeadde9743306b2ca5dbd47cb/mail/themes/qute/mail/aboutSupport.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/Makefile.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/Makefile.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -39,17 +39,17 @@ DEPTH   = ../..</span>
<a href="#l1.4"></a><span id="l1.4"> topsrcdir = @top_srcdir@</span>
<a href="#l1.5"></a><span id="l1.5"> srcdir    = @srcdir@</span>
<a href="#l1.6"></a><span id="l1.6"> VPATH   = @srcdir@</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> # Only Mac and Windows have search integration components, but we include at</span>
<a href="#l1.11"></a><span id="l1.11"> # least one module from search/ on all platforms</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-DIRS    = compose preferences addrbook migration activity search</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+DIRS    = compose preferences addrbook migration activity search about-support</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> ifneq (,$(filter windows gtk2 cocoa, $(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.16"></a><span id="l1.16"> DIRS += shell</span>
<a href="#l1.17"></a><span id="l1.17"> endif</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19"> ifdef MOZ_SAFE_BROWSING</span>
<a href="#l1.20"></a><span id="l1.20"> DIRS += phishing </span>
<a href="#l1.21"></a><span id="l1.21"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">new file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- /dev/null</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ b/mail/components/about-support/Makefile.in</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -0,0 +1,21 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+DEPTH     = ../../..</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+topsrcdir = @top_srcdir@</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineplus">+srcdir    = @srcdir@</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineplus">+VPATH     = @srcdir@</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineplus">+</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineplus">+include $(DEPTH)/config/autoconf.mk</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineplus">+</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+EXTRA_JS_MODULES = aboutSupport.js</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+# Include the platform-specific module</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+ifeq ($(MOZ_WIDGET_TOOLKIT), windows)</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+EXTRA_JS_MODULES += aboutSupportWin32.js</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+else</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+ifeq ($(MOZ_WIDGET_TOOLKIT), cocoa)</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+EXTRA_JS_MODULES += aboutSupportMac.js</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+else</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+EXTRA_JS_MODULES += aboutSupportUnix.js</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+endif</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+endif</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/mail/components/about-support/aboutSupport.js</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,186 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+ *</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+ *</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+ * License.</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+ *</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+ *</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+ *</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+ *</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+ *</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;AboutSupport&quot;];</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+const Cc = Components.classes;</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+const Ci = Components.interfaces;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+// Platform-specific includes</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+if (&quot;@mozilla.org/windows-registry-key;1&quot; in Components.classes)</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+  Components.utils.import(&quot;resource:///modules/aboutSupportWin32.js&quot;);</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+else if (&quot;nsILocalFileMac&quot; in Components.interfaces)</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+  Components.utils.import(&quot;resource:///modules/aboutSupportMac.js&quot;);</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+else</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+  Components.utils.import(&quot;resource:///modules/aboutSupportUnix.js&quot;);</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+var gMessengerBundle = Services.strings.createBundle(</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+  &quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+var gSMTPService = Cc[&quot;@mozilla.org/messengercompose/smtp;1&quot;]</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+                     .getService(Ci.nsISmtpService);</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+var gSocketTypes = {};</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+for (let [str, index] in Iterator(Ci.nsMsgSocketType))</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+  gSocketTypes[index] = str;</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+var gAuthMethods = {};</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+for (let [str, index] in Iterator(Ci.nsMsgAuthMethod))</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+  gAuthMethods[index] = str;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+// l10n properties in messenger.properties corresponding to each auth method</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+var gAuthMethodProperties = {</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+  &quot;1&quot;: &quot;authOld&quot;,</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+  &quot;2&quot;: &quot;authPasswordCleartextInsecurely&quot;,</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+  &quot;3&quot;: &quot;authPasswordCleartextViaSSL&quot;,</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+  &quot;4&quot;: &quot;authPasswordEncrypted&quot;,</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+  &quot;5&quot;: &quot;authKerberos&quot;,</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+  &quot;6&quot;: &quot;authNTLM&quot;,</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+  &quot;8&quot;: &quot;authAnySecure&quot;</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+};</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+var AboutSupport = {</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+  __proto__: AboutSupportPlatform,</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+  /**</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+   * Gets details about SMTP servers for a given nsIMsgAccount.</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+   *</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+   * @returns A list of records, each record containing the name and other details</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+   *          about one SMTP server.</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+   */</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+  _getSMTPDetails: function AboutSupport__getSMTPDetails(aAccount) {</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+    let identities = aAccount.identities;</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+    let defaultIdentity = aAccount.defaultIdentity;</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+    let smtpDetails = [];</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineplus">+</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+    for each (let identity in fixIterator(identities, Ci.nsIMsgIdentity)) {</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineplus">+      let isDefault = identity == defaultIdentity;</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineplus">+      let smtpServer = {};</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineplus">+      gSMTPService.GetSmtpServerByIdentity(identity, smtpServer);</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineplus">+      smtpDetails.push({name: smtpServer.value.displayname,</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+                        authMethod: smtpServer.value.authMethod,</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+                        socketType: smtpServer.value.socketType,</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+                        isDefault: isDefault});</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+    }</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineplus">+    return smtpDetails;</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineplus">+  },</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineplus">+</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+  /**</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineplus">+   * Returns account details as a list of records.</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineplus">+   */</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineplus">+  getAccountDetails: function AboutSupport_getAccountDetails() {</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineplus">+    let accountDetails = [];</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+    let accountManager = Cc[&quot;@mozilla.org/messenger/account-manager;1&quot;]</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+                           .getService(Ci.nsIMsgAccountManager);</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+    let accounts = accountManager.accounts;</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineplus">+</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineplus">+    for (let account in fixIterator(accounts, Ci.nsIMsgAccount)) {</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineplus">+      let server = account.incomingServer;</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+      accountDetails.push({</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineplus">+        key: account.key,</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineplus">+        name: server.prettyName,</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+        hostDetails: &quot;(&quot; + server.type + &quot;) &quot; + server.hostName +</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineplus">+                     (server.port != -1 ? (&quot;:&quot; + server.port) : &quot;&quot;),</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineplus">+        socketType: server.socketType,</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineplus">+        authMethod: server.authMethod,</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineplus">+        smtpServers: this._getSMTPDetails(account),</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineplus">+      });</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+    }</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+    function idCompare(accountA, accountB) {</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+      let regex = /^account([0-9]+)$/;</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineplus">+      let regexA = regex.exec(accountA.key);</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+      let regexB = regex.exec(accountB.key);</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+      // There's an off chance that the account ID isn't in the standard</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineplus">+      // accountN form. If so, use the standard string compare against a fixed</span>
<a href="#l3.138"></a><span id="l3.138" class="difflineplus">+      // string (&quot;account&quot;) to avoid correctness issues.</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineplus">+      if (!regexA || !regexB) {</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineplus">+        let keyA = regexA ? &quot;account&quot; : accountA.key;</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineplus">+        let keyB = regexB ? &quot;account&quot; : accountB.key;</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+        return keyA.localeCompare(keyB);</span>
<a href="#l3.143"></a><span id="l3.143" class="difflineplus">+      }</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineplus">+      let idA = parseInt(regexA[1]);</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineplus">+      let idB = parseInt(regexB[1]);</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineplus">+      return idB - idA;</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineplus">+    }</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineplus">+</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineplus">+    // Sort accountDetails by account ID.</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+    accountDetails.sort(idCompare);</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineplus">+    return accountDetails;</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineplus">+  },</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineplus">+</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineplus">+  /**</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+   * Returns the corresponding text for a given socket type index. The text is</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineplus">+   * returned as a record with &quot;localized&quot; and &quot;neutral&quot; entries.</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineplus">+   */</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineplus">+  getSocketTypeText: function AboutSupport_getSocketTypeText(aIndex) {</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineplus">+    let plainSocketType = (aIndex in gSocketTypes ?</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineplus">+                           gSocketTypes[aIndex] : aIndex);</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineplus">+    let prettySocketType;</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineplus">+    try {</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineplus">+      prettySocketType = gMessengerBundle.GetStringFromName(</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineplus">+        &quot;smtpServer-ConnectionSecurityType-&quot; + aIndex);</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineplus">+    }</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineplus">+    catch (e if e.result == Components.results.NS_ERROR_FAILURE) {</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+      // The string wasn't found in the bundle. Make do without it.</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineplus">+      prettySocketType = plainSocketType;</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineplus">+    }</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineplus">+    return {localized: prettySocketType, neutral: plainSocketType};</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineplus">+  },</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineplus">+</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineplus">+  /**</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineplus">+   * Returns the corresponding text for a given authentication method index. The</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+   * text is returned as a record with &quot;localized&quot; and &quot;neutral&quot; entries.</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineplus">+   */</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineplus">+  getAuthMethodText: function AboutSupport_getAuthMethodText(aIndex) {</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineplus">+    let prettyAuthMethod;</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineplus">+    let plainAuthMethod = (aIndex in gAuthMethods ?</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineplus">+                           gAuthMethods[aIndex] : aIndex);</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineplus">+    if (aIndex in gAuthMethodProperties) {</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineplus">+      prettyAuthMethod =</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineplus">+        gMessengerBundle.GetStringFromName(gAuthMethodProperties[aIndex]);</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineplus">+    }</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineplus">+    else {</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineplus">+      prettyAuthMethod = plainAuthMethod;</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineplus">+    }</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineplus">+    return {localized: prettyAuthMethod, neutral: plainAuthMethod};</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineplus">+  }</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/mail/components/about-support/aboutSupportMac.js</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,49 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineplus">+ *</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+ *</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+ * License.</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+ *</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+ *</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+ *</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+ *</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+ *</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;AboutSupportPlatform&quot;];</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+var AboutSupportPlatform = {</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+  /**</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineplus">+   * Given an nsIFile, gets the file system type. The type is returned as a</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineplus">+   * string. Possible values are &quot;network&quot;, &quot;local&quot;, &quot;unknown&quot; and null.</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+   */</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+  getFileSystemType: function ASPMac_getFileSystemType(aFile) {</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+    // Not implemented</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+    return null;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+  },</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- /dev/null</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ b/mail/components/about-support/aboutSupportUnix.js</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -0,0 +1,148 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+ *</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+ *</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+ * License.</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+ *</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+ *</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+ *</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+ *</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+ *</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;AboutSupportPlatform&quot;];</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+// JS ctypes are needed to get at the data we need</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/ctypes.jsm&quot;);</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+const GFile = ctypes.StructType(&quot;GFile&quot;);</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+const GFileInfo = ctypes.StructType(&quot;GFileInfo&quot;);</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+const GError = ctypes.StructType(&quot;GError&quot;);</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+const GCancellable = ctypes.StructType(&quot;GCancellable&quot;);</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+const G_FILE_ATTRIBUTE_FILESYSTEM_TYPE = &quot;filesystem::type&quot;;</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+const kNetworkFilesystems = [&quot;afs&quot;, &quot;cifs&quot;, &quot;nfs&quot;, &quot;smb&quot;];</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+// GC is responsible for closing these libraries</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+var glib = ctypes.open(&quot;libglib-2.0.so&quot;);</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+var gobject = ctypes.open(&quot;libgobject-2.0.so&quot;);</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+var g_free = glib.declare(</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+  &quot;g_free&quot;,</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+  ctypes.default_abi,</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+  ctypes.void_t,</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+  ctypes.voidptr_t</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+);</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+var g_object_unref = gobject.declare(</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+  &quot;g_object_unref&quot;,</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+  ctypes.default_abi,</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+  ctypes.void_t,</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+  ctypes.voidptr_t</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+);</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+var AboutSupportPlatform = {</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineplus">+  /**</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+   * Given an nsIFile, gets the file system type. The type is returned as a</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+   * string. Possible values are &quot;network&quot;, &quot;local&quot;, &quot;unknown&quot; and null.</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+   */</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineplus">+  getFileSystemType: function ASPUnix_getFileSystemType(aFile) {</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+    let gio = ctypes.open(&quot;libgio-2.0.so&quot;);</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+    try {</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+      // Given a UTF-8 string, converts it to the current Glib locale.</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineplus">+      let g_filename_from_utf8 = glib.declare(</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineplus">+        &quot;g_filename_from_utf8&quot;,</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineplus">+        ctypes.default_abi,</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineplus">+        ctypes.char.ptr,   // return type: glib locale string</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+        ctypes.char.ptr,   // in: utf8string</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+        ctypes.ssize_t,    // in: len</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+        ctypes.size_t.ptr, // out: bytes_read</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+        ctypes.size_t.ptr, // out: bytes_written</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+        GError.ptr         // out: error</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+      );</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+      // Yes, we want function scoping for variables we need to free in the</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+      // finally block. I think this is better than declaring lots of variables</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+      // on top.</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+      var filePath = g_filename_from_utf8(aFile.path, -1, null, null, null);</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+      if (filePath.isNull()) {</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+        throw new Error(&quot;Unable to convert &quot; + aFile.path +</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+                        &quot; into GLib encoding&quot;);</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+      }</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineplus">+      // Given a path, creates a new GFile for it.</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineplus">+      let g_file_new_for_path = gio.declare(</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineplus">+        &quot;g_file_new_for_path&quot;,</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineplus">+        ctypes.default_abi,</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineplus">+        GFile.ptr,      // return type: a newly-allocated GFile</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineplus">+        ctypes.char.ptr // in: path</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineplus">+      );</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+      var glibFile = g_file_new_for_path(filePath);</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineplus">+</span>
<a href="#l5.110"></a><span id="l5.110" class="difflineplus">+      // Given a GFile, queries the given attributes and returns them</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineplus">+      // as a GFileInfo.</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineplus">+      let g_file_query_filesystem_info = gio.declare(</span>
<a href="#l5.113"></a><span id="l5.113" class="difflineplus">+        &quot;g_file_query_filesystem_info&quot;,</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineplus">+        ctypes.default_abi,</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineplus">+        GFileInfo.ptr,    // return type</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineplus">+        GFile.ptr,        // in: file</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineplus">+        ctypes.char.ptr,  // in: attributes</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineplus">+        GCancellable.ptr, // in: cancellable</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineplus">+        GError.ptr        // out: error</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineplus">+      );</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineplus">+      var glibFileInfo = g_file_query_filesystem_info(</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineplus">+        glibFile, G_FILE_ATTRIBUTE_FILESYSTEM_TYPE, null, null);</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineplus">+      if (glibFileInfo.isNull())</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineplus">+        throw new Error(&quot;Unabled to retrieve GLib file info for &quot; + aFile.path);</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineplus">+</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineplus">+      let g_file_info_get_attribute_string = gio.declare(</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+        &quot;g_file_info_get_attribute_string&quot;,</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineplus">+        ctypes.default_abi,</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineplus">+        ctypes.char.ptr, // return type: file system type (do not free)</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineplus">+        GFileInfo.ptr,   // in: info</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineplus">+        ctypes.char.ptr  // in: attribute</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineplus">+      );</span>
<a href="#l5.133"></a><span id="l5.133" class="difflineplus">+      let fsType = g_file_info_get_attribute_string(</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineplus">+        glibFileInfo, G_FILE_ATTRIBUTE_FILESYSTEM_TYPE);</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineplus">+      if (fsType.isNull())</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineplus">+        return &quot;unknown&quot;;</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineplus">+      else if (kNetworkFilesystems.indexOf(fsType.readString()) != -1)</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineplus">+        return &quot;network&quot;;</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineplus">+      else</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineplus">+        return &quot;local&quot;;</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineplus">+    }</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineplus">+    finally {</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineplus">+      if (filePath)</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineplus">+        g_free(filePath);</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineplus">+      if (glibFile &amp;&amp; !glibFile.isNull())</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineplus">+        g_object_unref(glibFile);</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineplus">+      if (glibFileInfo &amp;&amp; !glibFileInfo.isNull())</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineplus">+        g_object_unref(glibFileInfo);</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineplus">+      gio.close();</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineplus">+    }</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineplus">+  },</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/mail/components/about-support/aboutSupportWin32.js</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,105 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+ *</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+ *</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+ * License.</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+ *</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+ *</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+ *</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+ *</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+ *</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;AboutSupportPlatform&quot;];</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+// JS ctypes are needed to get at the data we need</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/ctypes.jsm&quot;);</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+const BOOL = ctypes.int32_t;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+const DRIVE_UNKNOWN = 0;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+const DRIVE_NETWORK = 4;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+var AboutSupportPlatform = {</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+  /**</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+   * Given an nsIFile, gets the file system type. The type is returned as a</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+   * string. Possible values are &quot;network&quot;, &quot;local&quot;, &quot;unknown&quot; and null.</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+   */</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+  getFileSystemType: function ASPWin32_getFileSystemType(aFile) {</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+    let kernel32 = ctypes.open(&quot;kernel32.dll&quot;);</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+    try {</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+      // Returns the path of the volume a file is on.</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+      let GetVolumePathName = kernel32.declare(</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+        &quot;GetVolumePathNameW&quot;,</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+        ctypes.winapi_abi,</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+        BOOL,              // return type: 1 indicates success, 0 failure</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+        ctypes.jschar.ptr, // in: lpszFileName</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+        ctypes.jschar.ptr, // out: lpszVolumePathName</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+        ctypes.uint32_t    // in: cchBufferLength</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+      );</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+      // Returns the last error.</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+      let GetLastError = kernel32.declare(</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+        &quot;GetLastError&quot;,</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+        ctypes.winapi_abi,</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+        ctypes.uint32_t // return type: the last error</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+      );</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+      let filePath = aFile.path;</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineplus">+      // The volume path should be at most 1 greater than than the length of the</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineplus">+      // path -- add 1 for a trailing backslash if necessary, and 1 for the</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+      // terminating null character. Note that the parentheses around the type are</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+      // necessary for new to apply correctly.</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineplus">+      let volumePath = new (ctypes.jschar.array(filePath.length + 2));</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+      if (!GetVolumePathName(filePath, volumePath, volumePath.length)) {</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineplus">+        throw new Error(&quot;Unable to get volume path for &quot; + filePath + &quot;, error &quot; +</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+                        GetLastError());</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+      }</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineplus">+</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+      // Returns the type of the drive.</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineplus">+      let GetDriveType = kernel32.declare(</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineplus">+        &quot;GetDriveTypeW&quot;,</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+        ctypes.winapi_abi,</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+        ctypes.uint32_t,  // return type: the drive type</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+        ctypes.jschar.ptr // in: lpRootPathName</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineplus">+      );</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+      let type = GetDriveType(volumePath);</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineplus">+      // http://msdn.microsoft.com/en-us/library/aa364939</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+      if (type == DRIVE_UNKNOWN)</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+        return &quot;unknown&quot;;</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+      else if (type == DRIVE_NETWORK)</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineplus">+        return &quot;network&quot;;</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+      else</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+        return &quot;local&quot;;</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+    }</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+    finally {</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineplus">+      kernel32.close();</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+    }</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineplus">+  },</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/mail/components/about-support/content/aboutSupport.xhtml</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,314 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+  -   Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+  -</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+  -  The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+  -  1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+  -  the License. You may obtain a copy of the License at</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+  -  http://www.mozilla.org/MPL/</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  -</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+  -  Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+  -  WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+  -  for the specific language governing rights and limitations under the</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+  -  License.</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+  -</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+  -  The Original Code is aboutSupport.xhtml.</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+  -</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+  -  The Initial Developer of the Original Code is</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+  -  Mozilla Foundation</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+  -  Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+  -  the Initial Developer. All Rights Reserved.</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+  -</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+  -  Contributor(s):</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+  -    Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+  -    Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+  -</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+  -  Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+  -  either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+  -  the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+  -  in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+  -  of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+  -  under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+  -  use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+  -  decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+  -  and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+  -  the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+  -  the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+  -</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+  -  ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+&lt;!DOCTYPE html [</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+  &lt;!ENTITY % htmlDTD PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;DTD/xhtml1-strict.dtd&quot;&gt; %htmlDTD;</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+  &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://global/locale/global.dtd&quot;&gt; %globalDTD;</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+  &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt; %brandDTD;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+  &lt;!ENTITY % aboutSupportDTD SYSTEM &quot;chrome://global/locale/aboutSupport.dtd&quot;&gt; %aboutSupportDTD;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+  &lt;!ENTITY % aboutSupportMailDTD SYSTEM &quot;chrome://messenger/locale/aboutSupportMail.dtd&quot;&gt; %aboutSupportMailDTD;</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+]&gt;</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+  &lt;head&gt;</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+    &lt;title&gt;&amp;aboutSupport.pageTitle;&lt;/title&gt;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+    &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://global/skin/aboutSupport.css&quot;</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+          type=&quot;text/css&quot;/&gt;</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+    &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/skin/aboutSupport.css&quot;</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+          type=&quot;text/css&quot;/&gt;</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+    &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/content/about-support/show-private.css&quot;</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+          type=&quot;text/css&quot;/&gt;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+    &lt;!-- Private data is hidden by default. --&gt;</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+    &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/content/about-support/hide-private.css&quot;</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+          type=&quot;text/css&quot; id=&quot;about-support-private&quot;/&gt;</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/init.js&quot;/&gt;</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/accounts.js&quot;/&gt;</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/extensions.js&quot;/&gt;</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/prefs.js&quot;/&gt;</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/gfx.js&quot;/&gt;</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/export.js&quot;/&gt;</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+  &lt;/head&gt;</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+  &lt;body dir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+    &lt;h1&gt;</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+      &amp;aboutSupport.pageTitle;</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineplus">+    &lt;/h1&gt;</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineplus">+</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineplus">+    &lt;div class=&quot;page-subtitle&quot;&gt;</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+        &amp;aboutSupport.pageSubtitle;</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+    &lt;/div&gt;</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+    &lt;div&gt;</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+      &lt;button onclick=&quot;copyToClipboard()&quot;&gt;</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+        &amp;aboutSupport.copyToClipboard.label;</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+      &lt;/button&gt;</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineplus">+      &lt;button onclick=&quot;sendViaEmail()&quot;&gt;</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineplus">+        &amp;aboutSupport.sendViaEmail.label;</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+      &lt;/button&gt;</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineplus">+      &lt;input type=&quot;checkbox&quot; id=&quot;check-show-private-data&quot; class=&quot;data-uionly&quot;</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineplus">+             onchange=&quot;onShowPrivateDataChange(this);&quot; /&gt;</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+      &lt;label for=&quot;check-show-private-data&quot;&gt;&amp;aboutSupport.showPrivateData.mainText;</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+      &lt;span class=&quot;gray-text&quot;&gt;&amp;aboutSupport.showPrivateData.explanationText;&lt;/span&gt;&lt;/label&gt;</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+    &lt;/div&gt;</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineplus">+    &lt;div id=&quot;contents&quot;&gt;</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+        &amp;aboutSupport.appBasicsTitle;</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineplus">+</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineplus">+      &lt;table&gt;</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineplus">+        &lt;tbody&gt;</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineplus">+              &amp;aboutSupport.appBasicsName;</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineplus">+</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineplus">+            &lt;td id=&quot;application-box&quot;&gt;</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineplus">+</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineplus">+              &amp;aboutSupport.appBasicsVersion;</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineplus">+</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+            &lt;td id=&quot;version-box&quot;&gt;</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineplus">+</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineplus">+              &amp;aboutSupport.appBasicsUserAgent;</span>
<a href="#l7.134"></a><span id="l7.134" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.135"></a><span id="l7.135" class="difflineplus">+</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineplus">+            &lt;td id=&quot;useragent-box&quot;&gt;</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineplus">+</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineplus">+              &amp;aboutSupport.appBasicsProfileDir;</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineplus">+</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineplus">+            &lt;td&gt;</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineplus">+              &lt;div id=&quot;profile-dir-button-box&quot; class=&quot;data-public&quot;&gt;</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineplus">+                &lt;button onclick=&quot;openProfileDirectory()&quot;&gt;</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineplus">+                  &amp;aboutSupport.showMac.label;</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineplus">+#else</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineplus">+                  &amp;aboutSupport.show.label;</span>
<a href="#l7.152"></a><span id="l7.152" class="difflineplus">+#endif</span>
<a href="#l7.153"></a><span id="l7.153" class="difflineplus">+                &lt;/button&gt;</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineplus">+              &lt;/div&gt;</span>
<a href="#l7.155"></a><span id="l7.155" class="difflineplus">+              &lt;span id=&quot;profile-dir-box&quot; class=&quot;data-private&quot;&gt;&lt;/span&gt;</span>
<a href="#l7.156"></a><span id="l7.156" class="difflineplus">+              &lt;span id=&quot;profile-fs-type-box&quot;&gt;&lt;/span&gt;</span>
<a href="#l7.157"></a><span id="l7.157" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineplus">+</span>
<a href="#l7.160"></a><span id="l7.160" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.161"></a><span id="l7.161" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineplus">+              &amp;aboutSupport.appBasicsAppBuildID;</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineplus">+</span>
<a href="#l7.165"></a><span id="l7.165" class="difflineplus">+            &lt;td id=&quot;buildid-box&quot;&gt;</span>
<a href="#l7.166"></a><span id="l7.166" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.167"></a><span id="l7.167" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineplus">+</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.171"></a><span id="l7.171" class="difflineplus">+              &amp;aboutSupport.appBasicsEnabledPlugins;</span>
<a href="#l7.172"></a><span id="l7.172" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineplus">+</span>
<a href="#l7.174"></a><span id="l7.174" class="difflineplus">+            &lt;td&gt;</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineplus">+              &lt;a href=&quot;about:plugins&quot; target=&quot;_blank&quot;&gt;about:plugins&lt;/a&gt;</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.177"></a><span id="l7.177" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.178"></a><span id="l7.178" class="difflineplus">+</span>
<a href="#l7.179"></a><span id="l7.179" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.180"></a><span id="l7.180" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l7.181"></a><span id="l7.181" class="difflineplus">+              &amp;aboutSupport.appBasicsBuildConfig;</span>
<a href="#l7.182"></a><span id="l7.182" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.183"></a><span id="l7.183" class="difflineplus">+</span>
<a href="#l7.184"></a><span id="l7.184" class="difflineplus">+            &lt;td&gt;</span>
<a href="#l7.185"></a><span id="l7.185" class="difflineplus">+              &lt;a href=&quot;about:buildconfig&quot; target=&quot;_blank&quot;&gt;about:buildconfig&lt;/a&gt;</span>
<a href="#l7.186"></a><span id="l7.186" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l7.187"></a><span id="l7.187" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.188"></a><span id="l7.188" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l7.189"></a><span id="l7.189" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l7.190"></a><span id="l7.190" class="difflineplus">+</span>
<a href="#l7.191"></a><span id="l7.191" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l7.192"></a><span id="l7.192" class="difflineplus">+</span>
<a href="#l7.193"></a><span id="l7.193" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l7.194"></a><span id="l7.194" class="difflineplus">+        &amp;aboutSupport.accountsTitle;</span>
<a href="#l7.195"></a><span id="l7.195" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l7.196"></a><span id="l7.196" class="difflineplus">+</span>
<a href="#l7.197"></a><span id="l7.197" class="difflineplus">+      &lt;table id=&quot;accounts-table&quot;&gt;</span>
<a href="#l7.198"></a><span id="l7.198" class="difflineplus">+        &lt;thead&gt;</span>
<a href="#l7.199"></a><span id="l7.199" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.200"></a><span id="l7.200" class="difflineplus">+            &lt;th rowspan=&quot;2&quot;&gt;</span>
<a href="#l7.201"></a><span id="l7.201" class="difflineplus">+              &amp;aboutSupport.accountsID;</span>
<a href="#l7.202"></a><span id="l7.202" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.203"></a><span id="l7.203" class="difflineplus">+</span>
<a href="#l7.204"></a><span id="l7.204" class="difflineplus">+            &lt;th rowspan=&quot;2&quot; class=&quot;data-private&quot;&gt;</span>
<a href="#l7.205"></a><span id="l7.205" class="difflineplus">+              &amp;aboutSupport.accountsName;</span>
<a href="#l7.206"></a><span id="l7.206" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.207"></a><span id="l7.207" class="difflineplus">+</span>
<a href="#l7.208"></a><span id="l7.208" class="difflineplus">+            &lt;th colspan=&quot;3&quot;&gt;</span>
<a href="#l7.209"></a><span id="l7.209" class="difflineplus">+              &amp;aboutSupport.accountsIncomingServer;</span>
<a href="#l7.210"></a><span id="l7.210" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.211"></a><span id="l7.211" class="difflineplus">+</span>
<a href="#l7.212"></a><span id="l7.212" class="difflineplus">+            &lt;th colspan=&quot;4&quot;&gt;</span>
<a href="#l7.213"></a><span id="l7.213" class="difflineplus">+              &amp;aboutSupport.accountsOutgoingServers;</span>
<a href="#l7.214"></a><span id="l7.214" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.215"></a><span id="l7.215" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.216"></a><span id="l7.216" class="difflineplus">+          &lt;tr class=&quot;thead-level2&quot;&gt;</span>
<a href="#l7.217"></a><span id="l7.217" class="difflineplus">+            &lt;!-- Incoming server --&gt;</span>
<a href="#l7.218"></a><span id="l7.218" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.219"></a><span id="l7.219" class="difflineplus">+              &amp;aboutSupport.accountsName;</span>
<a href="#l7.220"></a><span id="l7.220" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.221"></a><span id="l7.221" class="difflineplus">+</span>
<a href="#l7.222"></a><span id="l7.222" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.223"></a><span id="l7.223" class="difflineplus">+              &amp;aboutSupport.accountsConnSecurity;</span>
<a href="#l7.224"></a><span id="l7.224" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.225"></a><span id="l7.225" class="difflineplus">+</span>
<a href="#l7.226"></a><span id="l7.226" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.227"></a><span id="l7.227" class="difflineplus">+              &amp;aboutSupport.accountsAuthMethod;</span>
<a href="#l7.228"></a><span id="l7.228" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.229"></a><span id="l7.229" class="difflineplus">+</span>
<a href="#l7.230"></a><span id="l7.230" class="difflineplus">+            &lt;!-- Outgoing servers --&gt;</span>
<a href="#l7.231"></a><span id="l7.231" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.232"></a><span id="l7.232" class="difflineplus">+              &amp;aboutSupport.accountsName;</span>
<a href="#l7.233"></a><span id="l7.233" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.234"></a><span id="l7.234" class="difflineplus">+</span>
<a href="#l7.235"></a><span id="l7.235" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.236"></a><span id="l7.236" class="difflineplus">+              &amp;aboutSupport.accountsConnSecurity;</span>
<a href="#l7.237"></a><span id="l7.237" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.238"></a><span id="l7.238" class="difflineplus">+</span>
<a href="#l7.239"></a><span id="l7.239" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.240"></a><span id="l7.240" class="difflineplus">+              &amp;aboutSupport.accountsAuthMethod;</span>
<a href="#l7.241"></a><span id="l7.241" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.242"></a><span id="l7.242" class="difflineplus">+</span>
<a href="#l7.243"></a><span id="l7.243" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.244"></a><span id="l7.244" class="difflineplus">+              &amp;aboutSupport.accountsDefault;</span>
<a href="#l7.245"></a><span id="l7.245" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.246"></a><span id="l7.246" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.247"></a><span id="l7.247" class="difflineplus">+        &lt;/thead&gt;</span>
<a href="#l7.248"></a><span id="l7.248" class="difflineplus">+</span>
<a href="#l7.249"></a><span id="l7.249" class="difflineplus">+        &lt;tbody id=&quot;accounts-tbody&quot;&gt;</span>
<a href="#l7.250"></a><span id="l7.250" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l7.251"></a><span id="l7.251" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l7.252"></a><span id="l7.252" class="difflineplus">+</span>
<a href="#l7.253"></a><span id="l7.253" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l7.254"></a><span id="l7.254" class="difflineplus">+</span>
<a href="#l7.255"></a><span id="l7.255" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l7.256"></a><span id="l7.256" class="difflineplus">+        &amp;aboutSupport.extensionsTitle;</span>
<a href="#l7.257"></a><span id="l7.257" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l7.258"></a><span id="l7.258" class="difflineplus">+</span>
<a href="#l7.259"></a><span id="l7.259" class="difflineplus">+      &lt;table id=&quot;extensions-table&quot;&gt;</span>
<a href="#l7.260"></a><span id="l7.260" class="difflineplus">+        &lt;thead&gt;</span>
<a href="#l7.261"></a><span id="l7.261" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.262"></a><span id="l7.262" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.263"></a><span id="l7.263" class="difflineplus">+              &amp;aboutSupport.extensionName;</span>
<a href="#l7.264"></a><span id="l7.264" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.265"></a><span id="l7.265" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.266"></a><span id="l7.266" class="difflineplus">+              &amp;aboutSupport.extensionVersion;</span>
<a href="#l7.267"></a><span id="l7.267" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.268"></a><span id="l7.268" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.269"></a><span id="l7.269" class="difflineplus">+              &amp;aboutSupport.extensionEnabled;</span>
<a href="#l7.270"></a><span id="l7.270" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.271"></a><span id="l7.271" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l7.272"></a><span id="l7.272" class="difflineplus">+              &amp;aboutSupport.extensionId;</span>
<a href="#l7.273"></a><span id="l7.273" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.274"></a><span id="l7.274" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.275"></a><span id="l7.275" class="difflineplus">+        &lt;/thead&gt;</span>
<a href="#l7.276"></a><span id="l7.276" class="difflineplus">+        &lt;tbody id=&quot;extensions-tbody&quot;&gt;</span>
<a href="#l7.277"></a><span id="l7.277" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l7.278"></a><span id="l7.278" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l7.279"></a><span id="l7.279" class="difflineplus">+</span>
<a href="#l7.280"></a><span id="l7.280" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l7.281"></a><span id="l7.281" class="difflineplus">+</span>
<a href="#l7.282"></a><span id="l7.282" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l7.283"></a><span id="l7.283" class="difflineplus">+        &amp;aboutSupport.modifiedPrefsTitle;</span>
<a href="#l7.284"></a><span id="l7.284" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l7.285"></a><span id="l7.285" class="difflineplus">+</span>
<a href="#l7.286"></a><span id="l7.286" class="difflineplus">+      &lt;table class=&quot;prefs-table&quot;&gt;</span>
<a href="#l7.287"></a><span id="l7.287" class="difflineplus">+        &lt;thead&gt;</span>
<a href="#l7.288"></a><span id="l7.288" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l7.289"></a><span id="l7.289" class="difflineplus">+            &lt;th class=&quot;name&quot;&gt;</span>
<a href="#l7.290"></a><span id="l7.290" class="difflineplus">+              &amp;aboutSupport.modifiedPrefsName;</span>
<a href="#l7.291"></a><span id="l7.291" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.292"></a><span id="l7.292" class="difflineplus">+</span>
<a href="#l7.293"></a><span id="l7.293" class="difflineplus">+            &lt;th class=&quot;value&quot;&gt;</span>
<a href="#l7.294"></a><span id="l7.294" class="difflineplus">+              &amp;aboutSupport.modifiedPrefsValue;</span>
<a href="#l7.295"></a><span id="l7.295" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l7.296"></a><span id="l7.296" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l7.297"></a><span id="l7.297" class="difflineplus">+        &lt;/thead&gt;</span>
<a href="#l7.298"></a><span id="l7.298" class="difflineplus">+</span>
<a href="#l7.299"></a><span id="l7.299" class="difflineplus">+        &lt;tbody id=&quot;prefs-tbody&quot;&gt;</span>
<a href="#l7.300"></a><span id="l7.300" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l7.301"></a><span id="l7.301" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l7.302"></a><span id="l7.302" class="difflineplus">+</span>
<a href="#l7.303"></a><span id="l7.303" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l7.304"></a><span id="l7.304" class="difflineplus">+</span>
<a href="#l7.305"></a><span id="l7.305" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l7.306"></a><span id="l7.306" class="difflineplus">+        &amp;aboutSupport.graphicsTitle;</span>
<a href="#l7.307"></a><span id="l7.307" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l7.308"></a><span id="l7.308" class="difflineplus">+</span>
<a href="#l7.309"></a><span id="l7.309" class="difflineplus">+      &lt;table&gt;</span>
<a href="#l7.310"></a><span id="l7.310" class="difflineplus">+        &lt;tbody id=&quot;graphics-tbody&quot;&gt;</span>
<a href="#l7.311"></a><span id="l7.311" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l7.312"></a><span id="l7.312" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l7.313"></a><span id="l7.313" class="difflineplus">+</span>
<a href="#l7.314"></a><span id="l7.314" class="difflineplus">+    &lt;/div&gt;</span>
<a href="#l7.315"></a><span id="l7.315" class="difflineplus">+</span>
<a href="#l7.316"></a><span id="l7.316" class="difflineplus">+  &lt;/body&gt;</span>
<a href="#l7.317"></a><span id="l7.317" class="difflineplus">+</span>
<a href="#l7.318"></a><span id="l7.318" class="difflineplus">+&lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/mail/components/about-support/content/accounts.js</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,160 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+ *</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+ *</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+ * License.</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+ *</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+ * The Original Code is aboutSupport.xhtml.</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+ *</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+ * Mozilla Foundation</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineplus">+ *</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+ *   Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+ *</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+ *</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+/**</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+ * Coerces x into a string.</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+ */</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+function toStr(x) {</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+  return &quot;&quot; + x;</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+}</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+/**</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+ * Marks x as private (see below).</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+ */</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+function toPrivate(x) {</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+  return {localized: x, neutral: x, isPrivate: true};</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+}</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+/**</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+ * A list of fields for the incoming server of an account. Each element of the</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+ * list is a pair of [property name, transforming function]. The transforming</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+ * function should take the property and return either a string or an object</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+ * with the following properties:</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+ * - localized: the data in (possibly) localized form</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+ * - neutral: the data in language-neutral form</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+ * - isPrivate (optional): true if the data is private-only, false if public-only,</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+ *                         not stated otherwise</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+ */</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+var gIncomingDetails = [</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+  [&quot;key&quot;, toStr],</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+  [&quot;name&quot;, toPrivate],</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+  [&quot;hostDetails&quot;, toStr],</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+  [&quot;socketType&quot;, AboutSupport.getSocketTypeText.bind(AboutSupport)],</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+  [&quot;authMethod&quot;, AboutSupport.getAuthMethodText.bind(AboutSupport)],</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+];</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+/**</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+ * A list of fields for the outgoing servers associated with an account. This is</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+ * similar to gIncomingDetails above.</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+ */</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+var gOutgoingDetails = [</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+  [&quot;name&quot;, toStr],</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+  [&quot;socketType&quot;, AboutSupport.getSocketTypeText.bind(AboutSupport)],</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+  [&quot;authMethod&quot;, AboutSupport.getAuthMethodText.bind(AboutSupport)],</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+  [&quot;isDefault&quot;, toStr],</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+];</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+/**</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+ * A list of account details.</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineplus">+ */</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineplus">+XPCOMUtils.defineLazyGetter(window, &quot;gAccountDetails&quot;,</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineplus">+                            function () AboutSupport.getAccountDetails());</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineplus">+</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineplus">+function populateAccountsSection() {</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineplus">+  let trAccounts = [];</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineplus">+</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineplus">+  function createTD(data, rowSpan) {</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineplus">+    let text = (typeof data == &quot;string&quot;) ? data : data.localized;</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+    let copyData = (typeof data == &quot;string&quot;) ? null : data.neutral;</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+    let attributes = {rowspan: rowSpan};</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+    if (typeof data == &quot;object&quot; &amp;&amp; &quot;isPrivate&quot; in data)</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+      attributes.class = data.isPrivate ? CLASS_DATA_PRIVATE : CLASS_DATA_PUBLIC;</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineplus">+    return createElement(&quot;td&quot;, text, attributes, copyData);</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineplus">+  }</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineplus">+</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineplus">+  for (let [, account] in Iterator(gAccountDetails)) {</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineplus">+    // We want a minimum rowspan of 1</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineplus">+    let rowSpan = account.smtpServers.length || 1;</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineplus">+    // incomingTDs is a list of TDs</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineplus">+    let incomingTDs = [createTD(fn(account[prop]), rowSpan)</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+                       for ([, [prop, fn]] in Iterator(gIncomingDetails))];</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineplus">+    // outgoingTDs is a list of list of TDs</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineplus">+    let outgoingTDs = [[createTD(fn(smtp[prop]), 1)</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineplus">+                        for ([, [prop, fn]] in Iterator(gOutgoingDetails))]</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineplus">+                       for ([, smtp] in Iterator(account.smtpServers))];</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineplus">+</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineplus">+    // If there are no SMTP servers, add a dummy element to make life easier below</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineplus">+    if (outgoingTDs.length == 0)</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineplus">+      outgoingTDs = [[]];</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineplus">+</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineplus">+    // Add the first SMTP server to this tr.</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineplus">+    let tr = createParentElement(&quot;tr&quot;, incomingTDs.concat(outgoingTDs[0]));</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineplus">+    trAccounts.push(tr);</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineplus">+    // Add the remaining SMTP servers as separate trs</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineplus">+    for each (let [, tds] in Iterator(outgoingTDs.slice(1)))</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineplus">+      trAccounts.push(createParentElement(&quot;tr&quot;, tds));</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineplus">+  }</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineplus">+</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineplus">+  appendChildren(document.getElementById(&quot;accounts-tbody&quot;), trAccounts);</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineplus">+}</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineplus">+</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineplus">+/**</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineplus">+ * Returns a plaintext representation of the accounts data.</span>
<a href="#l8.133"></a><span id="l8.133" class="difflineplus">+ */</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineplus">+function getAccountsText(aHidePrivateData, aIndent) {</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+  let accumulator = [];</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineplus">+</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+  // Given a string or object, converts it into a language-neutral form</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineplus">+  function neutralizer(data) {</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineplus">+    if (typeof data == &quot;string&quot;)</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineplus">+      return data;</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineplus">+    if (&quot;isPrivate&quot; in data &amp;&amp; (aHidePrivateData == data.isPrivate))</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineplus">+      return &quot;&quot;;</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineplus">+    return data.neutral;</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineplus">+  }</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineplus">+</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineplus">+  for (let [, account] in Iterator(gAccountDetails)) {</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineplus">+    accumulator.push(aIndent + account.key + &quot;:&quot;);</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineplus">+    // incomingData is a list of strings</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineplus">+    let incomingData = [neutralizer(fn(account[prop]))</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineplus">+                        for ([, [prop, fn]] in Iterator(gIncomingDetails))];</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineplus">+    accumulator.push(aIndent + &quot;  INCOMING: &quot; + incomingData.join(&quot;, &quot;));</span>
<a href="#l8.152"></a><span id="l8.152" class="difflineplus">+</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineplus">+    // outgoingData is a list of list of strings</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineplus">+    let outgoingData = [[neutralizer(fn(smtp[prop]))</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineplus">+                         for ([, [prop, fn]] in Iterator(gOutgoingDetails))]</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineplus">+                        for ([, smtp] in Iterator(account.smtpServers))];</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineplus">+    for (let [, data] in Iterator(outgoingData))</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineplus">+      accumulator.push(aIndent + &quot;  OUTGOING: &quot; + data.join(&quot;, &quot;));</span>
<a href="#l8.159"></a><span id="l8.159" class="difflineplus">+</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineplus">+    accumulator.push(&quot;&quot;);</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineplus">+  }</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineplus">+</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineplus">+  return accumulator.join(&quot;\n&quot;);</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- /dev/null</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ b/mail/components/about-support/content/export.js</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -0,0 +1,257 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineplus">+ *</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+ *</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+ * License.</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+ *</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+ * The Original Code is aboutSupport.xhtml.</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+ *</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+ * Mozilla Foundation</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+ *</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+ *   Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+ *</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+ *</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+/**</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+ * Create warning text to add to any private data.</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+ * @returns A HTML paragraph node containing the warning.</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineplus">+ */</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+function createWarning() {</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineplus">+  let bundle = Services.strings.createBundle(</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineplus">+    &quot;chrome://messenger/locale/aboutSupportMail.properties&quot;);</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+  return createParentElement(&quot;p&quot;, [</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+    createElement(&quot;strong&quot;, bundle.GetStringFromName(&quot;warningLabel&quot;)),</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+    // Add some whitespace between the label and the text</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+    document.createTextNode(&quot; &quot;),</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineplus">+    document.createTextNode(bundle.GetStringFromName(&quot;warningText&quot;)),</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+  ]);</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineplus">+}</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineplus">+function getClipboardTransferable() {</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineplus">+  // Get the HTML and text representations for the important part of the page.</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineplus">+  let hidePrivateData = !document.getElementById(&quot;check-show-private-data&quot;).checked;</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineplus">+  let contentsDiv = createCleanedUpContents(hidePrivateData);</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineplus">+  let dataHtml = contentsDiv.innerHTML;</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineplus">+  let dataText = createTextForElement(contentsDiv, hidePrivateData);</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineplus">+</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineplus">+  // We can't use plain strings, we have to use nsSupportsString.</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineplus">+  let supportsStringClass = Cc[&quot;@mozilla.org/supports-string;1&quot;];</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineplus">+  let ssHtml = supportsStringClass.createInstance(Ci.nsISupportsString);</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineplus">+  let ssText = supportsStringClass.createInstance(Ci.nsISupportsString);</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+  let transferable = Cc[&quot;@mozilla.org/widget/transferable;1&quot;]</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+                       .createInstance(Ci.nsITransferable);</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+  // Add the HTML flavor.</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+  transferable.addDataFlavor(&quot;text/html&quot;);</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+  ssHtml.data = dataHtml;</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+  transferable.setTransferData(&quot;text/html&quot;, ssHtml, dataHtml.length * 2);</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+  // Add the plain text flavor.</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+  transferable.addDataFlavor(&quot;text/unicode&quot;);</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+  ssText.data = dataText;</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+  transferable.setTransferData(&quot;text/unicode&quot;, ssText, dataText.length * 2);</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+  return transferable;</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+}</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+function copyToClipboard() {</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+  let transferable = getClipboardTransferable();</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+  // Store the data into the clipboard.</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+  let clipboard = Cc[&quot;@mozilla.org/widget/clipboard;1&quot;]</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+                    .getService(Ci.nsIClipboard);</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+  clipboard.setData(transferable, null, clipboard.kGlobalClipboard);</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+}</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+function sendViaEmail() {</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+  // Get the HTML representation for the important part of the page.</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+  let hidePrivateData = !document.getElementById(&quot;check-show-private-data&quot;).checked;</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+  let contentsDiv = createCleanedUpContents(hidePrivateData);</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineplus">+  let dataHtml = contentsDiv.innerHTML;</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineplus">+  // The editor considers whitespace to be significant, so replace all</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineplus">+  // whitespace with a single space.</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineplus">+  dataHtml = dataHtml.replace(/\s+/g, &quot; &quot;);</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineplus">+</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineplus">+  // Set up parameters and fields to use for the compose window.</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineplus">+  let params = Cc[&quot;@mozilla.org/messengercompose/composeparams;1&quot;]</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineplus">+                 .createInstance(Ci.nsIMsgComposeParams);</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineplus">+  params.type = Ci.nsIMsgCompType.New;</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+  params.format = Ci.nsIMsgCompFormat.HTML;</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+  let fields = Cc[&quot;@mozilla.org/messengercompose/composefields;1&quot;]</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+                 .createInstance(Ci.nsIMsgCompFields);</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineplus">+  fields.forcePlainText = false;</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineplus">+  fields.body = dataHtml;</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineplus">+  // In general we can have non-ASCII characters, and compose's charset</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineplus">+  // detection doesn't seem to work when the HTML part is pure ASCII but the</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineplus">+  // text isn't. So take the easy way out and force UTF-8.</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineplus">+  fields.characterSet = &quot;UTF-8&quot;;</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineplus">+  fields.bodyIsAsciiOnly = false;</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineplus">+  params.composeFields = fields;</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineplus">+</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineplus">+  // Our params are set up. Now open a compose window.</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineplus">+  let composeService = Cc[&quot;@mozilla.org/messengercompose;1&quot;]</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineplus">+                         .getService(Ci.nsIMsgComposeService);</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineplus">+  composeService.OpenComposeWindowWithParams(null, params);</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineplus">+}</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineplus">+</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineplus">+function createCleanedUpContents(aHidePrivateData) {</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineplus">+  // Get the important part of the page.</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineplus">+  let contentsDiv = document.getElementById(&quot;contents&quot;);</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineplus">+  // Deep-clone the entire div.</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineplus">+  let clonedDiv = contentsDiv.cloneNode(true);</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineplus">+  // Go in and replace text with the text we actually want to copy.</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineplus">+  // (this mutates the cloned node)</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineplus">+  cleanUpText(clonedDiv, aHidePrivateData);</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineplus">+  // Insert a warning if we need to</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineplus">+  if (!aHidePrivateData)</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineplus">+    clonedDiv.insertBefore(createWarning(), clonedDiv.firstChild);</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineplus">+  return clonedDiv;</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineplus">+}</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineplus">+</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineplus">+function cleanUpText(aElem, aHidePrivateData) {</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineplus">+  let node = aElem.firstChild;</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineplus">+  while (node) {</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineplus">+    let className = (&quot;className&quot; in node &amp;&amp; node.className) || &quot;&quot;;</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineplus">+    // Delete uionly nodes.</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineplus">+    if (className.indexOf(CLASS_DATA_UIONLY) != -1) {</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineplus">+      // Advance to the next node before removing the current node, since</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineplus">+      // node.nextSibling is null after removeChild</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineplus">+      let nextNode = node.nextSibling;</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineplus">+      aElem.removeChild(node);</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineplus">+      node = nextNode;</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineplus">+      continue;</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineplus">+    }</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineplus">+    // Replace private data with a blank string</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineplus">+    else if (aHidePrivateData &amp;&amp; className.indexOf(CLASS_DATA_PRIVATE) != -1) {</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineplus">+      node.textContent = &quot;&quot;;</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineplus">+    }</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineplus">+    // Replace public data with a blank string</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineplus">+    else if (!aHidePrivateData &amp;&amp; className.indexOf(CLASS_DATA_PUBLIC) != -1) {</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineplus">+      node.textContent = &quot;&quot;;</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineplus">+    }</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineplus">+    else {</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineplus">+      // Replace localized text with non-localized text</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineplus">+      let copyData = node.getUserData(&quot;copyData&quot;);</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineplus">+      if (copyData != null)</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineplus">+        node.textContent = copyData;</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineplus">+    }</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineplus">+</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineplus">+    if (node.nodeType == Node.ELEMENT_NODE)</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineplus">+      cleanUpText(node, aHidePrivateData);</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineplus">+</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineplus">+    // Advance!</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineplus">+    node = node.nextSibling;</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineplus">+  }</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineplus">+}</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineplus">+</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineplus">+// Return the plain text representation of an element.  Do a little bit</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineplus">+// of pretty-printing to make it human-readable.</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineplus">+function createTextForElement(elem, aHidePrivateData) {</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineplus">+  // Generate the initial text.</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineplus">+  let textFragmentAccumulator = [];</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineplus">+  generateTextForElement(elem, aHidePrivateData, &quot;&quot;, textFragmentAccumulator);</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineplus">+  let text = textFragmentAccumulator.join(&quot;&quot;);</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineplus">+</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineplus">+  // Trim extraneous whitespace before newlines, then squash extraneous</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineplus">+  // blank lines.</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineplus">+  text = text.replace(/[ \t]+\n/g, &quot;\n&quot;);</span>
<a href="#l9.188"></a><span id="l9.188" class="difflineplus">+  text = text.replace(/\n{3,}/g, &quot;\n\n&quot;);</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineplus">+</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineplus">+  // Actual CR/LF pairs are needed for some Windows text editors.</span>
<a href="#l9.191"></a><span id="l9.191" class="difflineplus">+  if (&quot;@mozilla.org/windows-registry-key;1&quot; in Cc)</span>
<a href="#l9.192"></a><span id="l9.192" class="difflineplus">+    text = text.replace(/\n/g, &quot;\r\n&quot;);</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineplus">+</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineplus">+  return text;</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineplus">+}</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineplus">+</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineplus">+/**</span>
<a href="#l9.198"></a><span id="l9.198" class="difflineplus">+ * Elements to replace entirely with custom text. Keys are element ids, values</span>
<a href="#l9.199"></a><span id="l9.199" class="difflineplus">+ * are functions that return the text. The functions themselves are defined in</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineplus">+ * the files for their respective sections.</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineplus">+ */</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineplus">+var gElementsToReplace = {</span>
<a href="#l9.203"></a><span id="l9.203" class="difflineplus">+  &quot;accounts-table&quot;: getAccountsText,</span>
<a href="#l9.204"></a><span id="l9.204" class="difflineplus">+  &quot;extensions-table&quot;: getExtensionsText,</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineplus">+};</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineplus">+</span>
<a href="#l9.207"></a><span id="l9.207" class="difflineplus">+function generateTextForElement(elem, aHidePrivateData, indent,</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineplus">+                                textFragmentAccumulator) {</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineplus">+  // Add a little extra spacing around most elements.</span>
<a href="#l9.210"></a><span id="l9.210" class="difflineplus">+  if ([&quot;td&quot;, &quot;th&quot;, &quot;span&quot;, &quot;a&quot;].indexOf(elem.tagName) == -1)</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineplus">+    textFragmentAccumulator.push(&quot;\n&quot;);</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineplus">+</span>
<a href="#l9.213"></a><span id="l9.213" class="difflineplus">+  // If this element is one of our elements to replace with text, do it.</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineplus">+  if (elem.id in gElementsToReplace) {</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineplus">+    let replaceFn = gElementsToReplace[elem.id];</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineplus">+    textFragmentAccumulator.push(replaceFn(aHidePrivateData, indent + &quot;  &quot;));</span>
<a href="#l9.217"></a><span id="l9.217" class="difflineplus">+    return;</span>
<a href="#l9.218"></a><span id="l9.218" class="difflineplus">+  };</span>
<a href="#l9.219"></a><span id="l9.219" class="difflineplus">+</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineplus">+  let childCount = elem.childElementCount;</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineplus">+</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineplus">+  // We're not going to spread a two-column &lt;tr&gt; across multiple lines, so</span>
<a href="#l9.223"></a><span id="l9.223" class="difflineplus">+  // handle that separately.</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineplus">+  if (elem.tagName == &quot;tr&quot; &amp;&amp; childCount == 2) {</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineplus">+    textFragmentAccumulator.push(indent);</span>
<a href="#l9.226"></a><span id="l9.226" class="difflineplus">+    textFragmentAccumulator.push(elem.children[0].textContent.trim() + &quot;: &quot; +</span>
<a href="#l9.227"></a><span id="l9.227" class="difflineplus">+                                 elem.children[1].textContent.trim());</span>
<a href="#l9.228"></a><span id="l9.228" class="difflineplus">+    return;</span>
<a href="#l9.229"></a><span id="l9.229" class="difflineplus">+  }</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineplus">+</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineplus">+  // Generate the text representation for each child node.</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineplus">+  let node = elem.firstChild;</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineplus">+  while (node) {</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineplus">+    if (node.nodeType == Node.TEXT_NODE) {</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineplus">+      // Text belonging to this element uses its indentation level.</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineplus">+      generateTextForTextNode(node, indent, textFragmentAccumulator);</span>
<a href="#l9.237"></a><span id="l9.237" class="difflineplus">+    }</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineplus">+    else if (node.nodeType == Node.ELEMENT_NODE) {</span>
<a href="#l9.239"></a><span id="l9.239" class="difflineplus">+      // Recurse on the child element with an extra level of indentation (but</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineplus">+      // only if there's more than one child).</span>
<a href="#l9.241"></a><span id="l9.241" class="difflineplus">+      generateTextForElement(node, aHidePrivateData,</span>
<a href="#l9.242"></a><span id="l9.242" class="difflineplus">+                             indent + (childCount &gt; 1 ? &quot;  &quot; : &quot;&quot;),</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineplus">+                             textFragmentAccumulator);</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineplus">+    }</span>
<a href="#l9.245"></a><span id="l9.245" class="difflineplus">+    // Advance!</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineplus">+    node = node.nextSibling;</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineplus">+  }</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineplus">+}</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineplus">+</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineplus">+function generateTextForTextNode(node, indent, textFragmentAccumulator) {</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineplus">+  // If the text node is the first of a run of text nodes, then start</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineplus">+  // a new line and add the initial indentation.</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineplus">+  let prevNode = node.previousSibling;</span>
<a href="#l9.254"></a><span id="l9.254" class="difflineplus">+  if (!prevNode || prevNode.nodeType == Node.TEXT_NODE)</span>
<a href="#l9.255"></a><span id="l9.255" class="difflineplus">+    textFragmentAccumulator.push(&quot;\n&quot; + indent);</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineplus">+</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineplus">+  // Trim the text node's text content and add proper indentation after</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineplus">+  // any internal line breaks.</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineplus">+  let text = node.textContent.trim().replace(&quot;\n&quot;, &quot;\n&quot; + indent, &quot;g&quot;);</span>
<a href="#l9.260"></a><span id="l9.260" class="difflineplus">+  textFragmentAccumulator.push(text);</span>
<a href="#l9.261"></a><span id="l9.261" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/mail/components/about-support/content/extensions.js</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,75 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+ *</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+ *</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+ * License.</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+ *</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+ * The Original Code is aboutSupport.xhtml.</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+ *</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+ * Mozilla Foundation</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+ *</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+ *   Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+ *</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+ *</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineplus">+/**</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineplus">+ * A list of extensions. This is assigned to by</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineplus">+ * populateExtensionsSection. There's a potential race condition here, but it's</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineplus">+ * not really going to happen in practice.</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineplus">+ */</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+var gExtensions;</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+/**</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+ * A list of fields for each extension.</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineplus">+ */</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineplus">+var gExtensionDetails = [&quot;name&quot;, &quot;version&quot;, &quot;isActive&quot;, &quot;id&quot;];</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineplus">+</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+function populateExtensionsSection() {</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+  AddonManager.getAddonsByTypes([&quot;extension&quot;], function (extensions) {</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+    gExtensions = extensions;</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+    let trExtensions = [];</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+    for (let i = 0; i &lt; extensions.length; i++) {</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+      let extension = extensions[i];</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+      let extensionTDs = [createElement(&quot;td&quot;, extension[prop])</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+                          for ([, prop] in Iterator(gExtensionDetails))];</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+      let tr = createParentElement(&quot;tr&quot;, extensionTDs);</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+      trExtensions.push(tr);</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+    }</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+    appendChildren(document.getElementById(&quot;extensions-tbody&quot;), trExtensions);</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+  });</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+}</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+/**</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+ * Returns a plaintext representation of extension data.</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+ */</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+function getExtensionsText(aHidePrivateData, aIndent) {</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+  let extensionData = [aIndent +</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+                       [extension[prop]</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+                        for ([, prop] in Iterator(gExtensionDetails))].join(&quot;, &quot;)</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+                       for ([, extension] in Iterator(gExtensions))];</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+  return extensionData.join(&quot;\n&quot;);</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/mail/components/about-support/content/gfx.js</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,172 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+ *</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+ *</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+ * License.</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+ *</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+ * The Original Code is aboutSupport.xhtml.</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+ *</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+ * Mozilla Foundation</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+ *</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+ *   Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+ *</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineplus">+ *</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+function populateGraphicsSection() {</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+  function createHeader(name)</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+  {</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+    let elem = createElement(&quot;th&quot;, name);</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineplus">+    elem.className = &quot;column&quot;;</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+    return elem;</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineplus">+  }</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineplus">+</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+  let bundle = Services.strings.createBundle(&quot;chrome://global/locale/aboutSupport.properties&quot;);</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+  let graphics_tbody = document.getElementById(&quot;graphics-tbody&quot;);</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineplus">+</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineplus">+  var gfxInfo = null;</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineplus">+  try {</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineplus">+    // nsIGfxInfo is currently only implemented on Windows</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineplus">+    gfxInfo = Cc[&quot;@mozilla.org/gfx/info;1&quot;].getService(Ci.nsIGfxInfo);</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineplus">+  } catch(e) {}</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineplus">+</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineplus">+  if (gfxInfo) {</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineplus">+    let trGraphics = [];</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;adapterDescription&quot;)),</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineplus">+      createElement(&quot;td&quot;, gfxInfo.adapterDescription),</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineplus">+    ]));</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;adapterVendorID&quot;)),</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineplus">+      // pad with zeros. (printf would be nicer)</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineplus">+      createElement(&quot;td&quot;, String('0000'+gfxInfo.adapterVendorID.toString(16)).slice(-4)),</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+    ]));</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;adapterDeviceID&quot;)),</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineplus">+      // pad with zeros. (printf would be nicer)</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineplus">+      createElement(&quot;td&quot;, String('0000'+gfxInfo.adapterDeviceID.toString(16)).slice(-4)),</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineplus">+    ]));</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;adapterRAM&quot;)),</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineplus">+      createElement(&quot;td&quot;, gfxInfo.adapterRAM),</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineplus">+    ]));</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;adapterDrivers&quot;)),</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineplus">+      createElement(&quot;td&quot;, gfxInfo.adapterDriver),</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineplus">+    ]));</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;driverVersion&quot;)),</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineplus">+      createElement(&quot;td&quot;, gfxInfo.adapterDriverVersion),</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineplus">+    ]));</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;driverDate&quot;)),</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineplus">+      createElement(&quot;td&quot;, gfxInfo.adapterDriverDate),</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineplus">+    ]));</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineplus">+</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineplus">+    var d2dEnabled = false;</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineplus">+    try {</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineplus">+      d2dEnabled = gfxInfo.D2DEnabled;</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineplus">+    } catch(e) {}</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineplus">+    var d2dMessage = d2dEnabled;</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineplus">+    if (!d2dEnabled) {</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineplus">+      var d2dStatus = -1; // different from any status value defined in the IDL</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineplus">+      try {</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineplus">+        d2dStatus = gfxInfo.getFeatureStatus(gfxInfo.FEATURE_DIRECT2D);</span>
<a href="#l11.102"></a><span id="l11.102" class="difflineplus">+      } catch(e) {</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineplus">+        window.dump(e + '\n');</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineplus">+      }</span>
<a href="#l11.105"></a><span id="l11.105" class="difflineplus">+      if (d2dStatus == gfxInfo.FEATURE_BLOCKED_DEVICE ||</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineplus">+          d2dStatus == gfxInfo.FEATURE_DISCOURAGED)</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineplus">+      {</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineplus">+        d2dMessage = bundle.GetStringFromName(&quot;blockedGraphicsCard&quot;);</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineplus">+      }</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineplus">+      else if (d2dStatus == gfxInfo.FEATURE_BLOCKED_DRIVER_VERSION)</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineplus">+      {</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineplus">+        var d2dSuggestedDriverVersion = null;</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineplus">+        try {</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineplus">+          d2dSuggestedDriverVersion = gfxInfo.getFeatureSuggestedDriverVersion(gfxInfo.FEATURE_DIRECT2D);</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineplus">+        } catch(e) {</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineplus">+          window.dump(e + '\n');</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineplus">+        }</span>
<a href="#l11.118"></a><span id="l11.118" class="difflineplus">+        if (d2dSuggestedDriverVersion) {</span>
<a href="#l11.119"></a><span id="l11.119" class="difflineplus">+          d2dMessage = bundle.GetStringFromName(&quot;tryNewerDriverVersion&quot;).replace(&quot;%1&quot;, d2dSuggestedDriverVersion);</span>
<a href="#l11.120"></a><span id="l11.120" class="difflineplus">+        }</span>
<a href="#l11.121"></a><span id="l11.121" class="difflineplus">+      }</span>
<a href="#l11.122"></a><span id="l11.122" class="difflineplus">+    }</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;direct2DEnabled&quot;)),</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineplus">+      createElement(&quot;td&quot;, d2dMessage),</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineplus">+    ]));</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineplus">+</span>
<a href="#l11.128"></a><span id="l11.128" class="difflineplus">+    var dwEnabled = false;</span>
<a href="#l11.129"></a><span id="l11.129" class="difflineplus">+    try {</span>
<a href="#l11.130"></a><span id="l11.130" class="difflineplus">+      dwEnabled = gfxInfo.DWriteEnabled;</span>
<a href="#l11.131"></a><span id="l11.131" class="difflineplus">+    } catch(e) {}</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.133"></a><span id="l11.133" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;directWriteEnabled&quot;)),</span>
<a href="#l11.134"></a><span id="l11.134" class="difflineplus">+      createElement(&quot;td&quot;, dwEnabled),</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineplus">+    ]));</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineplus">+</span>
<a href="#l11.137"></a><span id="l11.137" class="difflineplus">+    var webglrenderer;</span>
<a href="#l11.138"></a><span id="l11.138" class="difflineplus">+    try {</span>
<a href="#l11.139"></a><span id="l11.139" class="difflineplus">+      webglrenderer = gfxInfo.getWebGLParameter(&quot;full-renderer&quot;);</span>
<a href="#l11.140"></a><span id="l11.140" class="difflineplus">+    } catch (e) {</span>
<a href="#l11.141"></a><span id="l11.141" class="difflineplus">+      webglrenderer = &quot;(WebGL unavailable)&quot;;</span>
<a href="#l11.142"></a><span id="l11.142" class="difflineplus">+    }</span>
<a href="#l11.143"></a><span id="l11.143" class="difflineplus">+    trGraphics.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.144"></a><span id="l11.144" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;webglRenderer&quot;)),</span>
<a href="#l11.145"></a><span id="l11.145" class="difflineplus">+      createElement(&quot;td&quot;, webglrenderer)</span>
<a href="#l11.146"></a><span id="l11.146" class="difflineplus">+    ]));</span>
<a href="#l11.147"></a><span id="l11.147" class="difflineplus">+</span>
<a href="#l11.148"></a><span id="l11.148" class="difflineplus">+    appendChildren(graphics_tbody, trGraphics);</span>
<a href="#l11.149"></a><span id="l11.149" class="difflineplus">+  } // end if (gfxInfo)</span>
<a href="#l11.150"></a><span id="l11.150" class="difflineplus">+</span>
<a href="#l11.151"></a><span id="l11.151" class="difflineplus">+  let windows = Services.ww.getWindowEnumerator();</span>
<a href="#l11.152"></a><span id="l11.152" class="difflineplus">+  let acceleratedWindows = 0;</span>
<a href="#l11.153"></a><span id="l11.153" class="difflineplus">+  let totalWindows = 0;</span>
<a href="#l11.154"></a><span id="l11.154" class="difflineplus">+  let mgrType;</span>
<a href="#l11.155"></a><span id="l11.155" class="difflineplus">+  while (windows.hasMoreElements()) {</span>
<a href="#l11.156"></a><span id="l11.156" class="difflineplus">+    totalWindows++;</span>
<a href="#l11.157"></a><span id="l11.157" class="difflineplus">+</span>
<a href="#l11.158"></a><span id="l11.158" class="difflineplus">+    let awindow = windows.getNext().QueryInterface(Ci.nsIInterfaceRequestor);</span>
<a href="#l11.159"></a><span id="l11.159" class="difflineplus">+    let windowutils = awindow.getInterface(Ci.nsIDOMWindowUtils);</span>
<a href="#l11.160"></a><span id="l11.160" class="difflineplus">+    if (windowutils.layerManagerType != &quot;Basic&quot;) {</span>
<a href="#l11.161"></a><span id="l11.161" class="difflineplus">+      acceleratedWindows++;</span>
<a href="#l11.162"></a><span id="l11.162" class="difflineplus">+      mgrType = windowutils.layerManagerType;</span>
<a href="#l11.163"></a><span id="l11.163" class="difflineplus">+    }</span>
<a href="#l11.164"></a><span id="l11.164" class="difflineplus">+  }</span>
<a href="#l11.165"></a><span id="l11.165" class="difflineplus">+</span>
<a href="#l11.166"></a><span id="l11.166" class="difflineplus">+  let msg = acceleratedWindows + &quot;/&quot; + totalWindows;</span>
<a href="#l11.167"></a><span id="l11.167" class="difflineplus">+  if (acceleratedWindows)</span>
<a href="#l11.168"></a><span id="l11.168" class="difflineplus">+    msg += &quot; &quot; + mgrType;</span>
<a href="#l11.169"></a><span id="l11.169" class="difflineplus">+</span>
<a href="#l11.170"></a><span id="l11.170" class="difflineplus">+  appendChildren(graphics_tbody, [</span>
<a href="#l11.171"></a><span id="l11.171" class="difflineplus">+    createParentElement(&quot;tr&quot;, [</span>
<a href="#l11.172"></a><span id="l11.172" class="difflineplus">+      createHeader(bundle.GetStringFromName(&quot;acceleratedWindows&quot;)),</span>
<a href="#l11.173"></a><span id="l11.173" class="difflineplus">+      createElement(&quot;td&quot;, msg),</span>
<a href="#l11.174"></a><span id="l11.174" class="difflineplus">+    ])</span>
<a href="#l11.175"></a><span id="l11.175" class="difflineplus">+  ]);</span>
<a href="#l11.176"></a><span id="l11.176" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/mail/components/about-support/content/hide-private.css</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,44 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+ *</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+ *</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+ * License.</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+ *</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+ *</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineplus">+ *</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+ *</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+ *</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineplus">+</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+.data-private {</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineplus">+  display: none;</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+}</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineplus">+</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineplus">+.data-public {</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineplus">+  display: inline;</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/mail/components/about-support/content/init.js</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,153 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+ *</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+ *</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+ * License.</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+ *</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+ * The Original Code is aboutSupport.xhtml.</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+ *</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+ * Mozilla Foundation</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+ *</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+ *   Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+ *</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineplus">+ *</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineplus">+</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+const Cc = Components.classes;</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineplus">+const Ci = Components.interfaces;</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineplus">+</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AddonManager.jsm&quot;);</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineplus">+</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+Components.utils.import(&quot;resource:///modules/aboutSupport.js&quot;);</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineplus">+</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineplus">+/* Node classes. All of these are mutually exclusive. */</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineplus">+</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineplus">+// Any nodes marked with this class will be considered part of the UI only,</span>
<a href="#l13.56"></a><span id="l13.56" class="difflineplus">+// and therefore will not be copied.</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineplus">+const CLASS_DATA_UIONLY = &quot;data-uionly&quot;;</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineplus">+</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineplus">+// Any nodes marked with this class will be considered private and will be</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineplus">+// hidden if the user requests only public data to be shown or copied.</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineplus">+const CLASS_DATA_PRIVATE = &quot;data-private&quot;;</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineplus">+</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineplus">+// Any nodes marked with this class will only be displayed when the user chooses</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineplus">+// to not display private data.</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineplus">+const CLASS_DATA_PUBLIC = &quot;data-public&quot;;</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineplus">+</span>
<a href="#l13.67"></a><span id="l13.67" class="difflineplus">+window.onload = function () {</span>
<a href="#l13.68"></a><span id="l13.68" class="difflineplus">+  // Get the support URL.</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineplus">+  let supportUrl = Services.urlFormatter.formatURLPref(&quot;app.support.baseURL&quot;);</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineplus">+</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineplus">+  // Update the application basics section.</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineplus">+  document.getElementById(&quot;application-box&quot;).textContent = Application.name;</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineplus">+  document.getElementById(&quot;version-box&quot;).textContent = Application.version;</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineplus">+  document.getElementById(&quot;useragent-box&quot;).textContent = navigator.userAgent;</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineplus">+  document.getElementById(&quot;supportLink&quot;).href = supportUrl;</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineplus">+  let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineplus">+  appendChildren(document.getElementById(&quot;profile-dir-box&quot;),</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineplus">+    [createElement(&quot;a&quot;, currProfD.path,</span>
<a href="#l13.79"></a><span id="l13.79" class="difflineplus">+      {&quot;href&quot;: Services.io.newFileURI(currProfD).spec,</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineplus">+       &quot;onclick&quot;: &quot;openProfileDirectory(); event.preventDefault();&quot;</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineplus">+      })]);</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineplus">+</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineplus">+  let fsType;</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineplus">+  try {</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineplus">+    fsType = AboutSupport.getFileSystemType(currProfD);</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineplus">+  }</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineplus">+  catch (x) {</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineplus">+    Components.utils.reportError(x);</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineplus">+  }</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineplus">+</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineplus">+  if (fsType) {</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineplus">+    let bundle = Services.strings.createBundle(</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineplus">+      &quot;chrome://messenger/locale/aboutSupportMail.properties&quot;);</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineplus">+    let fsText = bundle.GetStringFromName(&quot;fsType.&quot; + fsType);</span>
<a href="#l13.95"></a><span id="l13.95" class="difflineplus">+    document.getElementById(&quot;profile-fs-type-box&quot;).textContent = fsText;</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineplus">+  }</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineplus">+</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineplus">+  document.getElementById(&quot;buildid-box&quot;).textContent = Services.appinfo.appBuildID;</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineplus">+</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineplus">+  // Update the other sections.</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineplus">+  populateAccountsSection();</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineplus">+  populatePreferencesSection();</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineplus">+  populateExtensionsSection();</span>
<a href="#l13.104"></a><span id="l13.104" class="difflineplus">+  populateGraphicsSection();</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineplus">+}</span>
<a href="#l13.106"></a><span id="l13.106" class="difflineplus">+</span>
<a href="#l13.107"></a><span id="l13.107" class="difflineplus">+function userDataHandler(aOp, aKey, aData, aSrc, aDest) {</span>
<a href="#l13.108"></a><span id="l13.108" class="difflineplus">+  if (aOp == UserDataHandler.NODE_CLONED || aOp == UserDataHandler.NODE_IMPORTED)</span>
<a href="#l13.109"></a><span id="l13.109" class="difflineplus">+    aDest.setUserData(aKey, aData, userDataHandler);</span>
<a href="#l13.110"></a><span id="l13.110" class="difflineplus">+}</span>
<a href="#l13.111"></a><span id="l13.111" class="difflineplus">+</span>
<a href="#l13.112"></a><span id="l13.112" class="difflineplus">+function onShowPrivateDataChange(aCheckbox) {</span>
<a href="#l13.113"></a><span id="l13.113" class="difflineplus">+  document.getElementById(&quot;about-support-private&quot;).disabled = aCheckbox.checked;</span>
<a href="#l13.114"></a><span id="l13.114" class="difflineplus">+}</span>
<a href="#l13.115"></a><span id="l13.115" class="difflineplus">+</span>
<a href="#l13.116"></a><span id="l13.116" class="difflineplus">+function createParentElement(tagName, childElems) {</span>
<a href="#l13.117"></a><span id="l13.117" class="difflineplus">+  let elem = document.createElement(tagName);</span>
<a href="#l13.118"></a><span id="l13.118" class="difflineplus">+  appendChildren(elem, childElems);</span>
<a href="#l13.119"></a><span id="l13.119" class="difflineplus">+  return elem;</span>
<a href="#l13.120"></a><span id="l13.120" class="difflineplus">+}</span>
<a href="#l13.121"></a><span id="l13.121" class="difflineplus">+</span>
<a href="#l13.122"></a><span id="l13.122" class="difflineplus">+function createElement(tagName, textContent, opt_attributes, opt_copyData) {</span>
<a href="#l13.123"></a><span id="l13.123" class="difflineplus">+  if (opt_attributes == null)</span>
<a href="#l13.124"></a><span id="l13.124" class="difflineplus">+    opt_attributes = [];</span>
<a href="#l13.125"></a><span id="l13.125" class="difflineplus">+  let elem = document.createElement(tagName);</span>
<a href="#l13.126"></a><span id="l13.126" class="difflineplus">+  elem.textContent = textContent;</span>
<a href="#l13.127"></a><span id="l13.127" class="difflineplus">+  for each (let [key, value] in Iterator(opt_attributes))</span>
<a href="#l13.128"></a><span id="l13.128" class="difflineplus">+    elem.setAttribute(key, &quot;&quot; + value);</span>
<a href="#l13.129"></a><span id="l13.129" class="difflineplus">+</span>
<a href="#l13.130"></a><span id="l13.130" class="difflineplus">+  if (opt_copyData != null) {</span>
<a href="#l13.131"></a><span id="l13.131" class="difflineplus">+    // Look for the (only) text node.</span>
<a href="#l13.132"></a><span id="l13.132" class="difflineplus">+    let textNode = elem.firstChild;</span>
<a href="#l13.133"></a><span id="l13.133" class="difflineplus">+    while (textNode &amp;&amp; textNode.nodeType != Node.TEXT_NODE)</span>
<a href="#l13.134"></a><span id="l13.134" class="difflineplus">+      textNode = textNode.nextSibling;</span>
<a href="#l13.135"></a><span id="l13.135" class="difflineplus">+    // XXX warn here if textNode not found</span>
<a href="#l13.136"></a><span id="l13.136" class="difflineplus">+    if (textNode)</span>
<a href="#l13.137"></a><span id="l13.137" class="difflineplus">+      textNode.setUserData(&quot;copyData&quot;, opt_copyData, userDataHandler);</span>
<a href="#l13.138"></a><span id="l13.138" class="difflineplus">+  }</span>
<a href="#l13.139"></a><span id="l13.139" class="difflineplus">+</span>
<a href="#l13.140"></a><span id="l13.140" class="difflineplus">+  return elem;</span>
<a href="#l13.141"></a><span id="l13.141" class="difflineplus">+}</span>
<a href="#l13.142"></a><span id="l13.142" class="difflineplus">+</span>
<a href="#l13.143"></a><span id="l13.143" class="difflineplus">+function appendChildren(parentElem, childNodes) {</span>
<a href="#l13.144"></a><span id="l13.144" class="difflineplus">+  for (let i = 0; i &lt; childNodes.length; i++)</span>
<a href="#l13.145"></a><span id="l13.145" class="difflineplus">+    parentElem.appendChild(childNodes[i]);</span>
<a href="#l13.146"></a><span id="l13.146" class="difflineplus">+}</span>
<a href="#l13.147"></a><span id="l13.147" class="difflineplus">+</span>
<a href="#l13.148"></a><span id="l13.148" class="difflineplus">+function openProfileDirectory() {</span>
<a href="#l13.149"></a><span id="l13.149" class="difflineplus">+  // Get the profile directory.</span>
<a href="#l13.150"></a><span id="l13.150" class="difflineplus">+  let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l13.151"></a><span id="l13.151" class="difflineplus">+  let profileDir = currProfD.path;</span>
<a href="#l13.152"></a><span id="l13.152" class="difflineplus">+</span>
<a href="#l13.153"></a><span id="l13.153" class="difflineplus">+  // Show the profile directory.</span>
<a href="#l13.154"></a><span id="l13.154" class="difflineplus">+  let nsLocalFile = Components.Constructor(&quot;@mozilla.org/file/local;1&quot;,</span>
<a href="#l13.155"></a><span id="l13.155" class="difflineplus">+                                           &quot;nsILocalFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l13.156"></a><span id="l13.156" class="difflineplus">+  new nsLocalFile(profileDir).reveal();</span>
<a href="#l13.157"></a><span id="l13.157" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- /dev/null</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ b/mail/components/about-support/content/overlay.js</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -0,0 +1,45 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+ *</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+ *</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+ * License.</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+ *</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+ *</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineplus">+ *</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineplus">+ *</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+ *</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineplus">+</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+var AboutSupportOverlay = {</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineplus">+  openInNewTab: function AboutSupportOverlay_openInNewTab() {</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineplus">+    let tabmail = document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+    tabmail.openTab(&quot;contentTab&quot;,</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineplus">+                    {contentPage: &quot;about:support&quot;,</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineplus">+                     clickHandler: &quot;specialTabs.aboutClickHandler(event);&quot; });</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+  }</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">new file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- /dev/null</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ b/mail/components/about-support/content/overlay.xul</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -0,0 +1,54 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineplus">+  -   Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineplus">+  -</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineplus">+  -  The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+  -  1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineplus">+  -  the License. You may obtain a copy of the License at</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+  -  http://www.mozilla.org/MPL/</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  -</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+  -  Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+  -  WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+  -  for the specific language governing rights and limitations under the</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+  -  License.</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineplus">+  -</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineplus">+  -  The Original Code is Thunderbird about:support.</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineplus">+  -</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineplus">+  -  The Initial Developer of the Original Code is</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineplus">+  -  the Mozilla Foundation.</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineplus">+  -  Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineplus">+  -  the Initial Developer. All Rights Reserved.</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineplus">+  -</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+  -  Contributor(s):</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineplus">+  -    Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineplus">+  -</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineplus">+  -  Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineplus">+  -  either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineplus">+  -  the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+  -  in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineplus">+  -  of those above. If you wish to allow use of your version of this file only</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+  -  under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+  -  use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+  -  decision by deleting the provisions above and replace them with the notice</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineplus">+  -  and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineplus">+  -  the provisions above, a recipient may use your version of this file under</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineplus">+  -  the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineplus">+  -</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineplus">+  -  ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineplus">+</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineplus">+&lt;!DOCTYPE overlay [</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineplus">+&lt;!ENTITY % baseMenuOverlayDTD SYSTEM &quot;chrome://messenger/locale/baseMenuOverlay.dtd&quot;&gt; %baseMenuOverlayDTD;</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineplus">+]&gt;</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineplus">+</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineplus">+&lt;overlay id=&quot;tb-about-support-overlay&quot;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineplus">+         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineplus">+  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/about-support/overlay.js&quot; /&gt;</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineplus">+  &lt;menupopup id=&quot;menu_HelpPopup&quot;&gt;</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineplus">+    &lt;menuitem id=&quot;aboutsupport_open&quot;</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineplus">+              label=&quot;&amp;helpTroubleshootingInfo.label;&quot;</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineplus">+              accesskey=&quot;&amp;helpTroubleshootingInfo.accesskey;&quot;</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineplus">+              insertafter=&quot;menu_openHelp&quot;</span>
<a href="#l15.55"></a><span id="l15.55" class="difflineplus">+              oncommand=&quot;AboutSupportOverlay.openInNewTab();&quot; /&gt;</span>
<a href="#l15.56"></a><span id="l15.56" class="difflineplus">+  &lt;/menupopup&gt;</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineplus">+</span>
<a href="#l15.58"></a><span id="l15.58" class="difflineplus">+&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">new file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- /dev/null</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ b/mail/components/about-support/content/prefs.js</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -0,0 +1,141 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineplus">+ *</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+ *</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+ * License.</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+ *</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+ * The Original Code is aboutSupport.xhtml.</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineplus">+ *</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+ * Mozilla Foundation</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineplus">+ *</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+ *   Curtis Bartley &lt;cbartley@mozilla.com&gt;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+ *</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+ *</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineplus">+</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineplus">+</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineplus">+const ELLIPSIS = Services.prefs.getComplexValue(&quot;intl.ellipsis&quot;,</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+                                                Ci.nsIPrefLocalizedString).data;</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineplus">+</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineplus">+// We use a preferences whitelist to make sure we only show preferences that</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+// are useful for support and won't compromise the user's privacy.  Note that</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineplus">+// entries are *prefixes*: for example, &quot;accessibility.&quot; applies to all prefs</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+// under the &quot;accessibility.*&quot; branch.</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+const PREFS_WHITELIST = [</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineplus">+  &quot;accessibility.&quot;,</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+  &quot;browser.fixup.&quot;,</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineplus">+  &quot;browser.history_expire_&quot;,</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+  &quot;browser.link.open_newwindow&quot;,</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineplus">+  &quot;browser.mousewheel.&quot;,</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+  &quot;browser.places.&quot;,</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+  &quot;browser.startup.homepage&quot;,</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+  &quot;browser.tabs.&quot;,</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+  &quot;browser.zoom.&quot;,</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineplus">+  &quot;dom.&quot;,</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+  &quot;extensions.checkCompatibility&quot;,</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+  &quot;extensions.lastAppVersion&quot;,</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+  &quot;font.&quot;,</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+  &quot;general.useragent.&quot;,</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineplus">+  &quot;gfx.color_management.mode&quot;,</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+  &quot;javascript.&quot;,</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineplus">+  &quot;keyword.&quot;,</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineplus">+  &quot;layout.css.dpi&quot;,</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+  &quot;mail.openMessageBehavior.&quot;,</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineplus">+  &quot;mail.spotlight.&quot;,</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+  &quot;mail.winsearch.&quot;,</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineplus">+  &quot;mailnews.database.&quot;,</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+  &quot;network.&quot;,</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineplus">+  &quot;places.&quot;,</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineplus">+  &quot;print.&quot;,</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineplus">+  &quot;privacy.&quot;,</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineplus">+  &quot;security.&quot;</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineplus">+];</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineplus">+</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineplus">+// The blacklist, unlike the whitelist, is a list of regular expressions.</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineplus">+const PREFS_BLACKLIST = [</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineplus">+  /^network[.]proxy[.]/,</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineplus">+  /[.]print_to_filename$/,</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineplus">+  /[.]lastFolderIndexedUri/,</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineplus">+];</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineplus">+function populatePreferencesSection() {</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineplus">+  let modifiedPrefs = getModifiedPrefs();</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineplus">+</span>
<a href="#l16.91"></a><span id="l16.91" class="difflineplus">+  function comparePrefs(pref1, pref2) {</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineplus">+    return pref1.name.localeCompare(pref2.name);</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineplus">+  }</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineplus">+  modifiedPrefs.sort(comparePrefs);</span>
<a href="#l16.96"></a><span id="l16.96" class="difflineplus">+</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineplus">+  let trPrefs = [];</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineplus">+  modifiedPrefs.forEach(function (pref) {</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineplus">+    let tdName = createElement(&quot;td&quot;, pref.name, {&quot;class&quot;: &quot;pref-name&quot;});</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+    let tdValue = createElement(&quot;td&quot;, formatPrefValue(pref.value),</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineplus">+                                {&quot;class&quot;: &quot;pref-value&quot;});</span>
<a href="#l16.102"></a><span id="l16.102" class="difflineplus">+    let tr = createParentElement(&quot;tr&quot;, [tdName, tdValue]);</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineplus">+    trPrefs.push(tr);</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineplus">+  });</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineplus">+</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineplus">+  appendChildren(document.getElementById(&quot;prefs-tbody&quot;), trPrefs);</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineplus">+}</span>
<a href="#l16.108"></a><span id="l16.108" class="difflineplus">+</span>
<a href="#l16.109"></a><span id="l16.109" class="difflineplus">+function formatPrefValue(prefValue) {</span>
<a href="#l16.110"></a><span id="l16.110" class="difflineplus">+  // Some pref values are really long and don't have spaces.  This can cause</span>
<a href="#l16.111"></a><span id="l16.111" class="difflineplus">+  // problems when copying and pasting into some WYSIWYG editors.  In general</span>
<a href="#l16.112"></a><span id="l16.112" class="difflineplus">+  // the exact contents of really long pref values aren't particularly useful,</span>
<a href="#l16.113"></a><span id="l16.113" class="difflineplus">+  // so we truncate them to some reasonable length.</span>
<a href="#l16.114"></a><span id="l16.114" class="difflineplus">+  let maxPrefValueLen = 120;</span>
<a href="#l16.115"></a><span id="l16.115" class="difflineplus">+  let text = &quot;&quot; + prefValue;</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineplus">+  if (text.length &gt; maxPrefValueLen)</span>
<a href="#l16.117"></a><span id="l16.117" class="difflineplus">+    text = text.substring(0, maxPrefValueLen) + ELLIPSIS;</span>
<a href="#l16.118"></a><span id="l16.118" class="difflineplus">+  return text;</span>
<a href="#l16.119"></a><span id="l16.119" class="difflineplus">+}</span>
<a href="#l16.120"></a><span id="l16.120" class="difflineplus">+</span>
<a href="#l16.121"></a><span id="l16.121" class="difflineplus">+function getModifiedPrefs() {</span>
<a href="#l16.122"></a><span id="l16.122" class="difflineplus">+  // We use the low-level prefs API to identify prefs that have been</span>
<a href="#l16.123"></a><span id="l16.123" class="difflineplus">+  // modified, rather that Application.prefs.all since the latter is</span>
<a href="#l16.124"></a><span id="l16.124" class="difflineplus">+  // much, much slower.  Application.prefs.all also gets slower each</span>
<a href="#l16.125"></a><span id="l16.125" class="difflineplus">+  // time it's called.  See bug 517312.</span>
<a href="#l16.126"></a><span id="l16.126" class="difflineplus">+  let prefNames = getWhitelistedPrefNames();</span>
<a href="#l16.127"></a><span id="l16.127" class="difflineplus">+  let prefs = [Application.prefs.get(prefName)</span>
<a href="#l16.128"></a><span id="l16.128" class="difflineplus">+                      for each (prefName in prefNames)</span>
<a href="#l16.129"></a><span id="l16.129" class="difflineplus">+                          if (Services.prefs.prefHasUserValue(prefName)</span>
<a href="#l16.130"></a><span id="l16.130" class="difflineplus">+                            &amp;&amp; !isBlacklisted(prefName))];</span>
<a href="#l16.131"></a><span id="l16.131" class="difflineplus">+  return prefs;</span>
<a href="#l16.132"></a><span id="l16.132" class="difflineplus">+}</span>
<a href="#l16.133"></a><span id="l16.133" class="difflineplus">+</span>
<a href="#l16.134"></a><span id="l16.134" class="difflineplus">+function getWhitelistedPrefNames() {</span>
<a href="#l16.135"></a><span id="l16.135" class="difflineplus">+  let results = [];</span>
<a href="#l16.136"></a><span id="l16.136" class="difflineplus">+  PREFS_WHITELIST.forEach(function (prefStem) {</span>
<a href="#l16.137"></a><span id="l16.137" class="difflineplus">+    let prefNames = Services.prefs.getChildList(prefStem, {});</span>
<a href="#l16.138"></a><span id="l16.138" class="difflineplus">+    results = results.concat(prefNames);</span>
<a href="#l16.139"></a><span id="l16.139" class="difflineplus">+  });</span>
<a href="#l16.140"></a><span id="l16.140" class="difflineplus">+  return results;</span>
<a href="#l16.141"></a><span id="l16.141" class="difflineplus">+}</span>
<a href="#l16.142"></a><span id="l16.142" class="difflineplus">+</span>
<a href="#l16.143"></a><span id="l16.143" class="difflineplus">+function isBlacklisted(prefName) {</span>
<a href="#l16.144"></a><span id="l16.144" class="difflineplus">+  return PREFS_BLACKLIST.some(function (re) re.test(prefName));</span>
<a href="#l16.145"></a><span id="l16.145" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">new file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- /dev/null</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ b/mail/components/about-support/content/show-private.css</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -0,0 +1,40 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineplus">+ *</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+ *</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+ * License.</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineplus">+ *</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineplus">+ * The Original Code is Thunderbird about:support.</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineplus">+ *</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineplus">+ *</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineplus">+ *</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineplus">+ *</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineplus">+</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineplus">+.data-public {</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+  display: none;</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">new file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- /dev/null</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ b/mail/components/about-support/jar.mn</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -0,0 +1,13 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineplus">+messenger.jar:</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineplus">+%   overlay chrome://messenger/content/messenger.xul           chrome://messenger/content/about-support/overlay.xul</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineplus">+    content/messenger/about-support/hide-private.css           (content/hide-private.css)</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+    content/messenger/about-support/show-private.css           (content/show-private.css)</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineplus">+    content/messenger/about-support/init.js                    (content/init.js)</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+    content/messenger/about-support/accounts.js                (content/accounts.js)</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineplus">+    content/messenger/about-support/extensions.js              (content/extensions.js)</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+    content/messenger/about-support/prefs.js                   (content/prefs.js)</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    content/messenger/about-support/gfx.js                     (content/gfx.js)</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+    content/messenger/about-support/export.js                  (content/export.js)</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+*   content/messenger/about-support/aboutSupport.xhtml         (content/aboutSupport.xhtml)</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+    content/messenger/about-support/overlay.js                 (content/overlay.js)</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+    content/messenger/about-support/overlay.xul                (content/overlay.xul)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/components/aboutRedirector.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/components/aboutRedirector.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -44,21 +44,24 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5"> function AboutRedirector() {}</span>
<a href="#l19.6"></a><span id="l19.6"> AboutRedirector.prototype = {</span>
<a href="#l19.7"></a><span id="l19.7">   classDescription: &quot;Mail about: Redirector&quot;,</span>
<a href="#l19.8"></a><span id="l19.8">   classID: Components.ID(&quot;{8cc51368-6aa0-43e8-b762-bde9b9fd828c}&quot;),</span>
<a href="#l19.9"></a><span id="l19.9">   QueryInterface: XPCOMUtils.generateQI([Ci.nsIAboutModule]),</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">   // Each entry in the map has the key as the part after the &quot;about:&quot; and the</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  // value as a record with url and flags entries.</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  // value as a record with url and flags entries. Note that each addition here</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+  // should be coupled with a corresponding addition in mailComponents.manifest.</span>
<a href="#l19.15"></a><span id="l19.15">   _redirMap: {</span>
<a href="#l19.16"></a><span id="l19.16">     &quot;rights&quot;: {url: &quot;chrome://messenger/content/aboutRights.xhtml&quot;,</span>
<a href="#l19.17"></a><span id="l19.17">                flags: (Ci.nsIAboutModule.ALLOW_SCRIPT |</span>
<a href="#l19.18"></a><span id="l19.18">                        Ci.nsIAboutModule.URI_SAFE_FOR_UNTRUSTED_CONTENT)},</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+    &quot;support&quot;: {url: &quot;chrome://messenger/content/about-support/aboutSupport.xhtml&quot;,</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+                flags: Ci.nsIAboutModule.ALLOW_SCRIPT},</span>
<a href="#l19.21"></a><span id="l19.21">   },</span>
<a href="#l19.22"></a><span id="l19.22"> </span>
<a href="#l19.23"></a><span id="l19.23">   /**</span>
<a href="#l19.24"></a><span id="l19.24">    * Gets the module name from the given URI.</span>
<a href="#l19.25"></a><span id="l19.25">    */</span>
<a href="#l19.26"></a><span id="l19.26">   _getModuleName: function AboutRedirector__getModuleName(aURI) {</span>
<a href="#l19.27"></a><span id="l19.27">     // Strip out the first ? or #, and anything following it</span>
<a href="#l19.28"></a><span id="l19.28">     let name = (/[^?#]+/.exec(aURI.path))[0];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/components/mailComponents.manifest</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/components/mailComponents.manifest</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,10 +1,13 @@</span>
<a href="#l20.4"></a><span id="l20.4"> component {8cc51368-6aa0-43e8-b762-bde9b9fd828c} aboutRedirector.js</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineplus">+# Each addition here should be coupled with a corresponding addition in</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineplus">+# aboutRedirector.js.</span>
<a href="#l20.7"></a><span id="l20.7"> contract @mozilla.org/network/protocol/about;1?what=rights {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineplus">+contract @mozilla.org/network/protocol/about;1?what=support {8cc51368-6aa0-43e8-b762-bde9b9fd828c}</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10"> component {44346520-c5d2-44e5-a1ec-034e04d7fac4} nsMailDefaultHandler.js</span>
<a href="#l20.11"></a><span id="l20.11"> contract @mozilla.org/mail/clh;1 {44346520-c5d2-44e5-a1ec-034e04d7fac4}</span>
<a href="#l20.12"></a><span id="l20.12"> category command-line-handler x-default @mozilla.org/mail/clh;1</span>
<a href="#l20.13"></a><span id="l20.13"> category command-line-validator b-default @mozilla.org/mail/clh;1</span>
<a href="#l20.14"></a><span id="l20.14"> </span>
<a href="#l20.15"></a><span id="l20.15"> component {1c73f03a-b817-4640-b984-18c3478a9ae3} mailContentHandler.js</span>
<a href="#l20.16"></a><span id="l20.16"> contract @mozilla.org/uriloader/content-handler;1?type=text/html {1c73f03a-b817-4640-b984-18c3478a9ae3}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">new file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- /dev/null</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/aboutSupportMail.dtd</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -0,0 +1,14 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineplus">+&lt;!ENTITY aboutSupport.appBasicsAppBuildID &quot;Application Build ID&quot;&gt;</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineplus">+</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsTitle &quot;Mail and News Accounts&quot;&gt;</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineplus">+&lt;!ENTITY aboutSupport.showPrivateData.mainText &quot;Include account names&quot;&gt;</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineplus">+&lt;!ENTITY aboutSupport.showPrivateData.explanationText &quot;(possibly identifying information)&quot;&gt;</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsID &quot;ID&quot;&gt;</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsName &quot;Name&quot;&gt;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsIncomingServer &quot;Incoming server&quot;&gt;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsOutgoingServers &quot;Outgoing servers&quot;&gt;</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsConnSecurity &quot;Connection security&quot;&gt;</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsAuthMethod &quot;Authentication method&quot;&gt;</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+&lt;!ENTITY aboutSupport.accountsDefault &quot;Default?&quot;&gt;</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineplus">+</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineplus">+&lt;!ENTITY aboutSupport.sendViaEmail.label &quot;Send via email&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">new file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineminus">--- /dev/null</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/aboutSupportMail.properties</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineat">@@ -0,0 +1,11 @@</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineplus">+# LOCALIZATION NOTE (warningLabel): Label for warning text that shows up when private data is included</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineplus">+warningLabel=WARNING:</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineplus">+# LOCALIZATION NOTE (warningText): Warning text that shows up when private data is included</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineplus">+warningText=This contains sensitive information which shouldn't be forwarded or published without permission.</span>
<a href="#l22.9"></a><span id="l22.9" class="difflineplus">+</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineplus">+# LOCALIZATION NOTE (fsType.local): Indicator that the displayed directory is on a local drive</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineplus">+fsType.local = (Local drive)</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+# LOCALIZATION NOTE (fsType.network): Indicator that the displayed directory is on the network</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+fsType.network = (Network drive)</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+# LOCALIZATION NOTE (fsType.unknown): Indicator that we couldn't figure out whether the directory is local or on a network</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+fsType.unknown = (Unknown location)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/baseMenuOverlay.dtd</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,15 +1,17 @@</span>
<a href="#l23.4"></a><span id="l23.4"> &lt;!-- Help Menu --&gt;</span>
<a href="#l23.5"></a><span id="l23.5"> &lt;!ENTITY helpMenu.label &quot;Help&quot;&gt;</span>
<a href="#l23.6"></a><span id="l23.6"> &lt;!ENTITY helpMenu.accesskey &quot;H&quot;&gt;</span>
<a href="#l23.7"></a><span id="l23.7"> &lt;!-- LOCALIZATION NOTE some localizations of Windows use &quot;?&quot;</span>
<a href="#l23.8"></a><span id="l23.8">                        for the help button in the menubar but Gnome does not.   --&gt;</span>
<a href="#l23.9"></a><span id="l23.9"> &lt;!ENTITY helpMenuWin.label &quot;Help&quot;&gt;</span>
<a href="#l23.10"></a><span id="l23.10"> &lt;!ENTITY helpMenuWin.accesskey &quot;H&quot;&gt;</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineplus">+&lt;!ENTITY helpTroubleshootingInfo.label     &quot;Troubleshooting Information&quot;&gt;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineplus">+&lt;!ENTITY helpTroubleshootingInfo.accesskey &quot;T&quot;&gt;</span>
<a href="#l23.13"></a><span id="l23.13"> &lt;!ENTITY releaseCmd.label &quot;Release Notes&quot;&gt;</span>
<a href="#l23.14"></a><span id="l23.14"> &lt;!ENTITY releaseCmd.accesskey &quot;R&quot;&gt;</span>
<a href="#l23.15"></a><span id="l23.15"> &lt;!ENTITY whatsNewCmd.label &quot;What's New&quot;&gt;</span>
<a href="#l23.16"></a><span id="l23.16"> &lt;!ENTITY whatsNewCmd.accesskey &quot;W&quot;&gt;</span>
<a href="#l23.17"></a><span id="l23.17"> &lt;!ENTITY featureConfiguratorCmd.label &quot;Migration Assistant&quot;&gt;</span>
<a href="#l23.18"></a><span id="l23.18"> &lt;!ENTITY featureConfiguratorCmd.accesskey &quot;M&quot;&gt;</span>
<a href="#l23.19"></a><span id="l23.19"> &lt;!ENTITY openHelp.label &quot;Help Contents&quot;&gt;</span>
<a href="#l23.20"></a><span id="l23.20"> &lt;!ENTITY openHelp.accesskey &quot;H&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/locales/jar.mn</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/locales/jar.mn</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -4,16 +4,18 @@</span>
<a href="#l24.4"></a><span id="l24.4"> @AB_CD@.jar:</span>
<a href="#l24.5"></a><span id="l24.5"> % locale messenger @AB_CD@ %locale/@AB_CD@/messenger/</span>
<a href="#l24.6"></a><span id="l24.6"> % override chrome://mozapps/locale/downloads/settingsChange.dtd chrome://messenger/locale/downloads/settingsChange.dtd</span>
<a href="#l24.7"></a><span id="l24.7"> % override chrome://global/locale/netError.dtd chrome://messenger/locale/netError.dtd</span>
<a href="#l24.8"></a><span id="l24.8">   locale/@AB_CD@/messenger/credits.dtd                                  (%chrome/messenger/credits.dtd)</span>
<a href="#l24.9"></a><span id="l24.9">   locale/@AB_CD@/messenger/aboutDialog.dtd                              (%chrome/messenger/aboutDialog.dtd)</span>
<a href="#l24.10"></a><span id="l24.10">   locale/@AB_CD@/messenger/aboutRights.dtd                              (%chrome/messenger/aboutRights.dtd)</span>
<a href="#l24.11"></a><span id="l24.11">   locale/@AB_CD@/messenger/aboutRights.properties                       (%chrome/messenger/aboutRights.properties)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+  locale/@AB_CD@/messenger/aboutSupportMail.dtd                         (%chrome/messenger/aboutSupportMail.dtd)</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  locale/@AB_CD@/messenger/aboutSupportMail.properties                  (%chrome/messenger/aboutSupportMail.properties)</span>
<a href="#l24.14"></a><span id="l24.14">   locale/@AB_CD@/messenger/accountCreation.dtd                          (%chrome/messenger/accountCreation.dtd)</span>
<a href="#l24.15"></a><span id="l24.15">   locale/@AB_CD@/messenger/accountCreation.properties                   (%chrome/messenger/accountCreation.properties)</span>
<a href="#l24.16"></a><span id="l24.16">   locale/@AB_CD@/messenger/accountCreationModel.properties              (%chrome/messenger/accountCreationModel.properties)</span>
<a href="#l24.17"></a><span id="l24.17">   locale/@AB_CD@/messenger/accountCreationUtil.properties               (%chrome/messenger/accountCreationUtil.properties)</span>
<a href="#l24.18"></a><span id="l24.18">   locale/@AB_CD@/messenger/systemIntegrationDialog.dtd                  (%chrome/messenger/systemIntegrationDialog.dtd)  </span>
<a href="#l24.19"></a><span id="l24.19">   locale/@AB_CD@/messenger/virtualFolderProperties.dtd                  (%chrome/messenger/virtualFolderProperties.dtd)</span>
<a href="#l24.20"></a><span id="l24.20">   locale/@AB_CD@/messenger/virtualFolderListDialog.dtd                  (%chrome/messenger/virtualFolderListDialog.dtd)</span>
<a href="#l24.21"></a><span id="l24.21">   locale/@AB_CD@/messenger/multimessageview.properties                  (%chrome/messenger/multimessageview.properties)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">new file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineminus">--- /dev/null</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-about-support.js</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineat">@@ -0,0 +1,268 @@</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineplus">+ *   Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineplus">+ *</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+ *</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+ * License.</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+ *</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineplus">+ * The Original Code is Thunderbird Mail Client.</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineplus">+ *</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineplus">+ * the Mozilla Foundation.</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2011</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineplus">+ *</span>
<a href="#l25.25"></a><span id="l25.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l25.26"></a><span id="l25.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l25.27"></a><span id="l25.27" class="difflineplus">+ *</span>
<a href="#l25.28"></a><span id="l25.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l25.29"></a><span id="l25.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l25.30"></a><span id="l25.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l25.33"></a><span id="l25.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l25.34"></a><span id="l25.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l25.35"></a><span id="l25.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l25.36"></a><span id="l25.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l25.37"></a><span id="l25.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l25.38"></a><span id="l25.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l25.39"></a><span id="l25.39" class="difflineplus">+ *</span>
<a href="#l25.40"></a><span id="l25.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineplus">+</span>
<a href="#l25.42"></a><span id="l25.42" class="difflineplus">+var MODULE_NAME = 'test-about-support';</span>
<a href="#l25.43"></a><span id="l25.43" class="difflineplus">+</span>
<a href="#l25.44"></a><span id="l25.44" class="difflineplus">+var RELATIVE_ROOT = '../shared-modules';</span>
<a href="#l25.45"></a><span id="l25.45" class="difflineplus">+var MODULE_REQUIRES = ['folder-display-helpers', 'content-tab-helpers'];</span>
<a href="#l25.46"></a><span id="l25.46" class="difflineplus">+</span>
<a href="#l25.47"></a><span id="l25.47" class="difflineplus">+var controller = {};</span>
<a href="#l25.48"></a><span id="l25.48" class="difflineplus">+Components.utils.import('resource://mozmill/modules/controller.js', controller);</span>
<a href="#l25.49"></a><span id="l25.49" class="difflineplus">+</span>
<a href="#l25.50"></a><span id="l25.50" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l25.51"></a><span id="l25.51" class="difflineplus">+</span>
<a href="#l25.52"></a><span id="l25.52" class="difflineplus">+function setupModule(module) {</span>
<a href="#l25.53"></a><span id="l25.53" class="difflineplus">+  let fdh = collector.getModule(&quot;folder-display-helpers&quot;);</span>
<a href="#l25.54"></a><span id="l25.54" class="difflineplus">+  fdh.installInto(module);</span>
<a href="#l25.55"></a><span id="l25.55" class="difflineplus">+  let cth = collector.getModule(&quot;content-tab-helpers&quot;);</span>
<a href="#l25.56"></a><span id="l25.56" class="difflineplus">+  cth.installInto(module);</span>
<a href="#l25.57"></a><span id="l25.57" class="difflineplus">+}</span>
<a href="#l25.58"></a><span id="l25.58" class="difflineplus">+</span>
<a href="#l25.59"></a><span id="l25.59" class="difflineplus">+// After every test we want to close the about:support tab so that failures</span>
<a href="#l25.60"></a><span id="l25.60" class="difflineplus">+// don't cascade.</span>
<a href="#l25.61"></a><span id="l25.61" class="difflineplus">+function teardownTest(module) {</span>
<a href="#l25.62"></a><span id="l25.62" class="difflineplus">+  mc.tabmail.closeOtherTabs(mc.tabmail.tabInfo[0]);</span>
<a href="#l25.63"></a><span id="l25.63" class="difflineplus">+}</span>
<a href="#l25.64"></a><span id="l25.64" class="difflineplus">+</span>
<a href="#l25.65"></a><span id="l25.65" class="difflineplus">+/**</span>
<a href="#l25.66"></a><span id="l25.66" class="difflineplus">+ * Strings found in the about:support HTML or text that should clearly mark the</span>
<a href="#l25.67"></a><span id="l25.67" class="difflineplus">+ * data as being from about:support.</span>
<a href="#l25.68"></a><span id="l25.68" class="difflineplus">+ */</span>
<a href="#l25.69"></a><span id="l25.69" class="difflineplus">+const ABOUT_SUPPORT_STRINGS = [&quot;Application Basics&quot;, &quot;Mail and News Accounts&quot;,</span>
<a href="#l25.70"></a><span id="l25.70" class="difflineplus">+                               &quot;Extensions&quot;, &quot;Modified Preferences&quot;, &quot;Graphics&quot;];</span>
<a href="#l25.71"></a><span id="l25.71" class="difflineplus">+</span>
<a href="#l25.72"></a><span id="l25.72" class="difflineplus">+/**</span>
<a href="#l25.73"></a><span id="l25.73" class="difflineplus">+ * Strings that if found in the about:support text or HTML usually indicate an</span>
<a href="#l25.74"></a><span id="l25.74" class="difflineplus">+ * error.</span>
<a href="#l25.75"></a><span id="l25.75" class="difflineplus">+ */</span>
<a href="#l25.76"></a><span id="l25.76" class="difflineplus">+const ABOUT_SUPPORT_ERROR_STRINGS = [&quot;undefined&quot;, &quot;null&quot;];</span>
<a href="#l25.77"></a><span id="l25.77" class="difflineplus">+</span>
<a href="#l25.78"></a><span id="l25.78" class="difflineplus">+</span>
<a href="#l25.79"></a><span id="l25.79" class="difflineplus">+/*</span>
<a href="#l25.80"></a><span id="l25.80" class="difflineplus">+ * Helpers</span>
<a href="#l25.81"></a><span id="l25.81" class="difflineplus">+ */</span>
<a href="#l25.82"></a><span id="l25.82" class="difflineplus">+</span>
<a href="#l25.83"></a><span id="l25.83" class="difflineplus">+/**</span>
<a href="#l25.84"></a><span id="l25.84" class="difflineplus">+ * Opens about:support and waits for it to load.</span>
<a href="#l25.85"></a><span id="l25.85" class="difflineplus">+ *</span>
<a href="#l25.86"></a><span id="l25.86" class="difflineplus">+ * @returns the about:support tab.</span>
<a href="#l25.87"></a><span id="l25.87" class="difflineplus">+ */</span>
<a href="#l25.88"></a><span id="l25.88" class="difflineplus">+function open_about_support() {</span>
<a href="#l25.89"></a><span id="l25.89" class="difflineplus">+  let tab = open_content_tab_with_click(mc.menus.helpMenu.aboutsupport_open);</span>
<a href="#l25.90"></a><span id="l25.90" class="difflineplus">+  assert_content_tab_has_url(tab, &quot;about:support&quot;);</span>
<a href="#l25.91"></a><span id="l25.91" class="difflineplus">+  // We have one variable that's asynchronously populated -- wait for it to be</span>
<a href="#l25.92"></a><span id="l25.92" class="difflineplus">+  // populated.</span>
<a href="#l25.93"></a><span id="l25.93" class="difflineplus">+  if (!controller.waitForEval(&quot;subject.gExtensions !== undefined&quot;,</span>
<a href="#l25.94"></a><span id="l25.94" class="difflineplus">+                              NORMAL_TIMEOUT, FAST_INTERVAL,</span>
<a href="#l25.95"></a><span id="l25.95" class="difflineplus">+                              tab.browser.contentWindow)) {</span>
<a href="#l25.96"></a><span id="l25.96" class="difflineplus">+    mark_failure([&quot;Timeout waiting for about:support's gExtensions to populate.&quot;]);</span>
<a href="#l25.97"></a><span id="l25.97" class="difflineplus">+  }</span>
<a href="#l25.98"></a><span id="l25.98" class="difflineplus">+  return tab;</span>
<a href="#l25.99"></a><span id="l25.99" class="difflineplus">+}</span>
<a href="#l25.100"></a><span id="l25.100" class="difflineplus">+</span>
<a href="#l25.101"></a><span id="l25.101" class="difflineplus">+</span>
<a href="#l25.102"></a><span id="l25.102" class="difflineplus">+/*</span>
<a href="#l25.103"></a><span id="l25.103" class="difflineplus">+ * Tests</span>
<a href="#l25.104"></a><span id="l25.104" class="difflineplus">+ */</span>
<a href="#l25.105"></a><span id="l25.105" class="difflineplus">+</span>
<a href="#l25.106"></a><span id="l25.106" class="difflineplus">+/**</span>
<a href="#l25.107"></a><span id="l25.107" class="difflineplus">+ * Test displaying the about:support page. Also perform a couple of basic tests</span>
<a href="#l25.108"></a><span id="l25.108" class="difflineplus">+ * to check that no major errors have occurred. The basic tests are by no means</span>
<a href="#l25.109"></a><span id="l25.109" class="difflineplus">+ * comprehensive.</span>
<a href="#l25.110"></a><span id="l25.110" class="difflineplus">+ */</span>
<a href="#l25.111"></a><span id="l25.111" class="difflineplus">+function test_display_about_support() {</span>
<a href="#l25.112"></a><span id="l25.112" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.113"></a><span id="l25.113" class="difflineplus">+  // Check that the document has a few strings that indicate that we've loaded</span>
<a href="#l25.114"></a><span id="l25.114" class="difflineplus">+  // the right page.</span>
<a href="#l25.115"></a><span id="l25.115" class="difflineplus">+  for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l25.116"></a><span id="l25.116" class="difflineplus">+    assert_content_tab_text_present(tab, str);</span>
<a href="#l25.117"></a><span id="l25.117" class="difflineplus">+  }</span>
<a href="#l25.118"></a><span id="l25.118" class="difflineplus">+</span>
<a href="#l25.119"></a><span id="l25.119" class="difflineplus">+  // Check that error strings aren't present anywhere</span>
<a href="#l25.120"></a><span id="l25.120" class="difflineplus">+  for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l25.121"></a><span id="l25.121" class="difflineplus">+    assert_content_tab_text_absent(tab, str);</span>
<a href="#l25.122"></a><span id="l25.122" class="difflineplus">+  }</span>
<a href="#l25.123"></a><span id="l25.123" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.124"></a><span id="l25.124" class="difflineplus">+}</span>
<a href="#l25.125"></a><span id="l25.125" class="difflineplus">+</span>
<a href="#l25.126"></a><span id="l25.126" class="difflineplus">+const UNIQUE_ID = &quot;3a9e1694-7115-4237-8b1e-1cabe6e35073&quot;;</span>
<a href="#l25.127"></a><span id="l25.127" class="difflineplus">+</span>
<a href="#l25.128"></a><span id="l25.128" class="difflineplus">+/**</span>
<a href="#l25.129"></a><span id="l25.129" class="difflineplus">+ * Test that a modified preference on the whitelist but not on the blacklist</span>
<a href="#l25.130"></a><span id="l25.130" class="difflineplus">+ * shows up.</span>
<a href="#l25.131"></a><span id="l25.131" class="difflineplus">+ */</span>
<a href="#l25.132"></a><span id="l25.132" class="difflineplus">+function test_modified_pref_on_whitelist() {</span>
<a href="#l25.133"></a><span id="l25.133" class="difflineplus">+  const PREFIX = &quot;accessibility.&quot;;</span>
<a href="#l25.134"></a><span id="l25.134" class="difflineplus">+  let prefName = PREFIX + UNIQUE_ID;</span>
<a href="#l25.135"></a><span id="l25.135" class="difflineplus">+  Services.prefs.setBoolPref(prefName, true);</span>
<a href="#l25.136"></a><span id="l25.136" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.137"></a><span id="l25.137" class="difflineplus">+  // Check that the prefix is actually in the whitelist.</span>
<a href="#l25.138"></a><span id="l25.138" class="difflineplus">+  if (tab.browser.contentWindow.PREFS_WHITELIST.indexOf(PREFIX) == -1)</span>
<a href="#l25.139"></a><span id="l25.139" class="difflineplus">+    mark_failure([&quot;The prefs whitelist doesn't contain &quot; + PREFIX]);</span>
<a href="#l25.140"></a><span id="l25.140" class="difflineplus">+</span>
<a href="#l25.141"></a><span id="l25.141" class="difflineplus">+  assert_content_tab_text_present(tab, prefName);</span>
<a href="#l25.142"></a><span id="l25.142" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.143"></a><span id="l25.143" class="difflineplus">+  Services.prefs.clearUserPref(prefName);</span>
<a href="#l25.144"></a><span id="l25.144" class="difflineplus">+}</span>
<a href="#l25.145"></a><span id="l25.145" class="difflineplus">+</span>
<a href="#l25.146"></a><span id="l25.146" class="difflineplus">+/**</span>
<a href="#l25.147"></a><span id="l25.147" class="difflineplus">+ * Test that a modified preference not on the whitelist doesn't show up.</span>
<a href="#l25.148"></a><span id="l25.148" class="difflineplus">+ */</span>
<a href="#l25.149"></a><span id="l25.149" class="difflineplus">+function test_modified_pref_not_on_whitelist() {</span>
<a href="#l25.150"></a><span id="l25.150" class="difflineplus">+  Services.prefs.setBoolPref(UNIQUE_ID, true);</span>
<a href="#l25.151"></a><span id="l25.151" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.152"></a><span id="l25.152" class="difflineplus">+  assert_content_tab_text_absent(tab, UNIQUE_ID);</span>
<a href="#l25.153"></a><span id="l25.153" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.154"></a><span id="l25.154" class="difflineplus">+  Services.prefs.clearUserPref(UNIQUE_ID);</span>
<a href="#l25.155"></a><span id="l25.155" class="difflineplus">+}</span>
<a href="#l25.156"></a><span id="l25.156" class="difflineplus">+</span>
<a href="#l25.157"></a><span id="l25.157" class="difflineplus">+/**</span>
<a href="#l25.158"></a><span id="l25.158" class="difflineplus">+ * Test that a modified preference on the blacklist doesn't show up.</span>
<a href="#l25.159"></a><span id="l25.159" class="difflineplus">+ */</span>
<a href="#l25.160"></a><span id="l25.160" class="difflineplus">+function test_modified_pref_on_blacklist() {</span>
<a href="#l25.161"></a><span id="l25.161" class="difflineplus">+  const PREFIX = &quot;network.proxy.&quot;;</span>
<a href="#l25.162"></a><span id="l25.162" class="difflineplus">+  let prefName = PREFIX + UNIQUE_ID;</span>
<a href="#l25.163"></a><span id="l25.163" class="difflineplus">+  Services.prefs.setBoolPref(prefName, true);</span>
<a href="#l25.164"></a><span id="l25.164" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.165"></a><span id="l25.165" class="difflineplus">+  // Check that the prefix is in the blacklist.</span>
<a href="#l25.166"></a><span id="l25.166" class="difflineplus">+  if (!tab.browser.contentWindow.PREFS_BLACKLIST.some(</span>
<a href="#l25.167"></a><span id="l25.167" class="difflineplus">+        function(regex) regex.test(PREFIX))) {</span>
<a href="#l25.168"></a><span id="l25.168" class="difflineplus">+    mark_failure([&quot;The prefs blacklist doesn't include &quot; + PREFIX]);</span>
<a href="#l25.169"></a><span id="l25.169" class="difflineplus">+  }</span>
<a href="#l25.170"></a><span id="l25.170" class="difflineplus">+  assert_content_tab_text_absent(tab, prefName);</span>
<a href="#l25.171"></a><span id="l25.171" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.172"></a><span id="l25.172" class="difflineplus">+  Services.prefs.clearUserPref(prefName);</span>
<a href="#l25.173"></a><span id="l25.173" class="difflineplus">+}</span>
<a href="#l25.174"></a><span id="l25.174" class="difflineplus">+</span>
<a href="#l25.175"></a><span id="l25.175" class="difflineplus">+/**</span>
<a href="#l25.176"></a><span id="l25.176" class="difflineplus">+ * Test that private data isn't displayed by default, and that when it is</span>
<a href="#l25.177"></a><span id="l25.177" class="difflineplus">+ * displayed, it actually shows up.</span>
<a href="#l25.178"></a><span id="l25.178" class="difflineplus">+ */</span>
<a href="#l25.179"></a><span id="l25.179" class="difflineplus">+function test_private_data() {</span>
<a href="#l25.180"></a><span id="l25.180" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.181"></a><span id="l25.181" class="difflineplus">+  let checkbox = content_tab_e(tab, &quot;check-show-private-data&quot;);</span>
<a href="#l25.182"></a><span id="l25.182" class="difflineplus">+  // We use the profile button's div as an example of a public-only element, and</span>
<a href="#l25.183"></a><span id="l25.183" class="difflineplus">+  // the profile directory display as an example of a private-only element.</span>
<a href="#l25.184"></a><span id="l25.184" class="difflineplus">+  let privateElem = content_tab_e(tab, &quot;profile-dir-box&quot;);</span>
<a href="#l25.185"></a><span id="l25.185" class="difflineplus">+  let publicElem = content_tab_e(tab, &quot;profile-dir-button-box&quot;);</span>
<a href="#l25.186"></a><span id="l25.186" class="difflineplus">+  assert_true(!checkbox.checked,</span>
<a href="#l25.187"></a><span id="l25.187" class="difflineplus">+              &quot;Private data checkbox shouldn't be checked by default&quot;);</span>
<a href="#l25.188"></a><span id="l25.188" class="difflineplus">+  assert_element_visible(tab, publicElem);</span>
<a href="#l25.189"></a><span id="l25.189" class="difflineplus">+  assert_element_hidden(tab, privateElem);</span>
<a href="#l25.190"></a><span id="l25.190" class="difflineplus">+</span>
<a href="#l25.191"></a><span id="l25.191" class="difflineplus">+  // Now check the checkbox and see what happens</span>
<a href="#l25.192"></a><span id="l25.192" class="difflineplus">+  checkbox.click();</span>
<a href="#l25.193"></a><span id="l25.193" class="difflineplus">+  wait_for_element_display_value(tab, publicElem, &quot;none&quot;);</span>
<a href="#l25.194"></a><span id="l25.194" class="difflineplus">+  wait_for_element_display_value(tab, privateElem, &quot;inline&quot;);</span>
<a href="#l25.195"></a><span id="l25.195" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.196"></a><span id="l25.196" class="difflineplus">+}</span>
<a href="#l25.197"></a><span id="l25.197" class="difflineplus">+</span>
<a href="#l25.198"></a><span id="l25.198" class="difflineplus">+/**</span>
<a href="#l25.199"></a><span id="l25.199" class="difflineplus">+ * Test (well, sort of) the copy to clipboard function with public data.</span>
<a href="#l25.200"></a><span id="l25.200" class="difflineplus">+ */</span>
<a href="#l25.201"></a><span id="l25.201" class="difflineplus">+function test_copy_to_clipboard_public() {</span>
<a href="#l25.202"></a><span id="l25.202" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.203"></a><span id="l25.203" class="difflineplus">+  // To avoid destroying the current contents of the clipboard, instead of</span>
<a href="#l25.204"></a><span id="l25.204" class="difflineplus">+  // actually copying to it, we just retrieve what would have been copied to it</span>
<a href="#l25.205"></a><span id="l25.205" class="difflineplus">+  let transferable = tab.browser.contentWindow.getClipboardTransferable();</span>
<a href="#l25.206"></a><span id="l25.206" class="difflineplus">+  for (let [, flavor] in Iterator([&quot;text/html&quot;, &quot;text/unicode&quot;])) {</span>
<a href="#l25.207"></a><span id="l25.207" class="difflineplus">+    let data = {};</span>
<a href="#l25.208"></a><span id="l25.208" class="difflineplus">+    transferable.getTransferData(flavor, data, {});</span>
<a href="#l25.209"></a><span id="l25.209" class="difflineplus">+    let text = data.value.data;</span>
<a href="#l25.210"></a><span id="l25.210" class="difflineplus">+</span>
<a href="#l25.211"></a><span id="l25.211" class="difflineplus">+    for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l25.212"></a><span id="l25.212" class="difflineplus">+      if (text.indexOf(str) == -1)</span>
<a href="#l25.213"></a><span id="l25.213" class="difflineplus">+        mark_failure([&quot;Unable to find \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.214"></a><span id="l25.214" class="difflineplus">+    }</span>
<a href="#l25.215"></a><span id="l25.215" class="difflineplus">+</span>
<a href="#l25.216"></a><span id="l25.216" class="difflineplus">+    for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l25.217"></a><span id="l25.217" class="difflineplus">+      if (text.indexOf(str) != -1)</span>
<a href="#l25.218"></a><span id="l25.218" class="difflineplus">+        mark_failure([&quot;Found \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.219"></a><span id="l25.219" class="difflineplus">+    }</span>
<a href="#l25.220"></a><span id="l25.220" class="difflineplus">+</span>
<a href="#l25.221"></a><span id="l25.221" class="difflineplus">+    // Check that private data (profile directory) isn't in the output.</span>
<a href="#l25.222"></a><span id="l25.222" class="difflineplus">+    let profD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile).path;</span>
<a href="#l25.223"></a><span id="l25.223" class="difflineplus">+    if (text.indexOf(profD) != -1)</span>
<a href="#l25.224"></a><span id="l25.224" class="difflineplus">+      mark_failure([&quot;Found profile directory in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.225"></a><span id="l25.225" class="difflineplus">+  }</span>
<a href="#l25.226"></a><span id="l25.226" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.227"></a><span id="l25.227" class="difflineplus">+}</span>
<a href="#l25.228"></a><span id="l25.228" class="difflineplus">+</span>
<a href="#l25.229"></a><span id="l25.229" class="difflineplus">+/**</span>
<a href="#l25.230"></a><span id="l25.230" class="difflineplus">+ * Test (well, sort of) the copy to clipboard function with private data.</span>
<a href="#l25.231"></a><span id="l25.231" class="difflineplus">+ */</span>
<a href="#l25.232"></a><span id="l25.232" class="difflineplus">+function test_copy_to_clipboard_private() {</span>
<a href="#l25.233"></a><span id="l25.233" class="difflineplus">+  let bundle = Services.strings.createBundle(</span>
<a href="#l25.234"></a><span id="l25.234" class="difflineplus">+    &quot;chrome://messenger/locale/aboutSupportMail.properties&quot;);</span>
<a href="#l25.235"></a><span id="l25.235" class="difflineplus">+  let warningText = bundle.GetStringFromName(&quot;warningText&quot;);</span>
<a href="#l25.236"></a><span id="l25.236" class="difflineplus">+</span>
<a href="#l25.237"></a><span id="l25.237" class="difflineplus">+  let tab = open_about_support();</span>
<a href="#l25.238"></a><span id="l25.238" class="difflineplus">+</span>
<a href="#l25.239"></a><span id="l25.239" class="difflineplus">+  // Display private data.</span>
<a href="#l25.240"></a><span id="l25.240" class="difflineplus">+  let privateElem = content_tab_e(tab, &quot;profile-dir-box&quot;);</span>
<a href="#l25.241"></a><span id="l25.241" class="difflineplus">+  content_tab_e(tab, &quot;check-show-private-data&quot;).click();</span>
<a href="#l25.242"></a><span id="l25.242" class="difflineplus">+  wait_for_element_display_value(tab, privateElem, &quot;inline&quot;);</span>
<a href="#l25.243"></a><span id="l25.243" class="difflineplus">+</span>
<a href="#l25.244"></a><span id="l25.244" class="difflineplus">+  // To avoid destroying the current contents of the clipboard, instead of</span>
<a href="#l25.245"></a><span id="l25.245" class="difflineplus">+  // actually copying to it, we just retrieve what would have been copied to it</span>
<a href="#l25.246"></a><span id="l25.246" class="difflineplus">+  let transferable = tab.browser.contentWindow.getClipboardTransferable();</span>
<a href="#l25.247"></a><span id="l25.247" class="difflineplus">+  for (let [, flavor] in Iterator([&quot;text/html&quot;, &quot;text/unicode&quot;])) {</span>
<a href="#l25.248"></a><span id="l25.248" class="difflineplus">+    let data = {};</span>
<a href="#l25.249"></a><span id="l25.249" class="difflineplus">+    transferable.getTransferData(flavor, data, {});</span>
<a href="#l25.250"></a><span id="l25.250" class="difflineplus">+    let text = data.value.data;</span>
<a href="#l25.251"></a><span id="l25.251" class="difflineplus">+</span>
<a href="#l25.252"></a><span id="l25.252" class="difflineplus">+    for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l25.253"></a><span id="l25.253" class="difflineplus">+      if (text.indexOf(str) == -1)</span>
<a href="#l25.254"></a><span id="l25.254" class="difflineplus">+        mark_failure([&quot;Unable to find \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.255"></a><span id="l25.255" class="difflineplus">+    }</span>
<a href="#l25.256"></a><span id="l25.256" class="difflineplus">+</span>
<a href="#l25.257"></a><span id="l25.257" class="difflineplus">+    for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l25.258"></a><span id="l25.258" class="difflineplus">+      if (text.indexOf(str) != -1)</span>
<a href="#l25.259"></a><span id="l25.259" class="difflineplus">+        mark_failure([&quot;Found \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.260"></a><span id="l25.260" class="difflineplus">+    }</span>
<a href="#l25.261"></a><span id="l25.261" class="difflineplus">+</span>
<a href="#l25.262"></a><span id="l25.262" class="difflineplus">+    // Check that private data (profile directory) is in the output.</span>
<a href="#l25.263"></a><span id="l25.263" class="difflineplus">+    let profD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile).path;</span>
<a href="#l25.264"></a><span id="l25.264" class="difflineplus">+    if (text.indexOf(profD) == -1)</span>
<a href="#l25.265"></a><span id="l25.265" class="difflineplus">+      mark_failure([&quot;Unable to find profile directory in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.266"></a><span id="l25.266" class="difflineplus">+</span>
<a href="#l25.267"></a><span id="l25.267" class="difflineplus">+    // Check that the warning text is in the output.</span>
<a href="#l25.268"></a><span id="l25.268" class="difflineplus">+    if (text.indexOf(warningText) == -1)</span>
<a href="#l25.269"></a><span id="l25.269" class="difflineplus">+      mark_failure([&quot;Unable to find warning text in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l25.270"></a><span id="l25.270" class="difflineplus">+  }</span>
<a href="#l25.271"></a><span id="l25.271" class="difflineplus">+  close_tab(tab);</span>
<a href="#l25.272"></a><span id="l25.272" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -73,16 +73,23 @@ function installInto(module) {</span>
<a href="#l26.4"></a><span id="l26.4">   setupModule();</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6">   // Now copy helper functions</span>
<a href="#l26.7"></a><span id="l26.7">   module.open_content_tab_with_url = open_content_tab_with_url;</span>
<a href="#l26.8"></a><span id="l26.8">   module.open_content_tab_with_click = open_content_tab_with_click;</span>
<a href="#l26.9"></a><span id="l26.9">   module.plan_for_content_tab_load = plan_for_content_tab_load;</span>
<a href="#l26.10"></a><span id="l26.10">   module.wait_for_content_tab_load = wait_for_content_tab_load;</span>
<a href="#l26.11"></a><span id="l26.11">   module.assert_content_tab_has_url = assert_content_tab_has_url;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+  module.content_tab_e = content_tab_e;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  module.get_element_display = get_element_display;</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+  module.assert_element_hidden = assert_element_hidden;</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+  module.assert_element_visible = assert_element_visible;</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineplus">+  module.wait_for_element_display_value = wait_for_element_display_value;</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineplus">+  module.assert_content_tab_text_present = assert_content_tab_text_present;</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineplus">+  module.assert_content_tab_text_absent = assert_content_tab_text_absent;</span>
<a href="#l26.19"></a><span id="l26.19"> }</span>
<a href="#l26.20"></a><span id="l26.20"> </span>
<a href="#l26.21"></a><span id="l26.21"> /**</span>
<a href="#l26.22"></a><span id="l26.22">  * Opens a content tab with the given URL.</span>
<a href="#l26.23"></a><span id="l26.23">  *</span>
<a href="#l26.24"></a><span id="l26.24">  * @param aURL The URL to load (string).</span>
<a href="#l26.25"></a><span id="l26.25">  * @param [aBackground] Whether the tab is opened in the background. Defaults to</span>
<a href="#l26.26"></a><span id="l26.26">  *                      false.</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineat">@@ -130,16 +137,17 @@ function open_content_tab_with_click(aEl</span>
<a href="#l26.28"></a><span id="l26.28">   if (!controller.waitForEval(&quot;subject.childNodes.length == &quot; + (preCount + 1),</span>
<a href="#l26.29"></a><span id="l26.29">                               FAST_TIMEOUT, FAST_INTERVAL,</span>
<a href="#l26.30"></a><span id="l26.30">                               aController.tabmail.tabContainer))</span>
<a href="#l26.31"></a><span id="l26.31">     mark_failure([&quot;Timeout waiting for the content tab to open&quot;]);</span>
<a href="#l26.32"></a><span id="l26.32"> </span>
<a href="#l26.33"></a><span id="l26.33">   // We append new tabs at the end, so check the last one.</span>
<a href="#l26.34"></a><span id="l26.34">   let expectedNewTab = aController.tabmail.tabInfo[preCount];</span>
<a href="#l26.35"></a><span id="l26.35">   folderDisplayHelper.assert_selected_tab(expectedNewTab);</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineplus">+  folderDisplayHelper.assert_tab_mode_name(expectedNewTab, &quot;contentTab&quot;);</span>
<a href="#l26.37"></a><span id="l26.37">   wait_for_content_tab_load(expectedNewTab);</span>
<a href="#l26.38"></a><span id="l26.38">   return expectedNewTab;</span>
<a href="#l26.39"></a><span id="l26.39"> }</span>
<a href="#l26.40"></a><span id="l26.40"> </span>
<a href="#l26.41"></a><span id="l26.41"> /**</span>
<a href="#l26.42"></a><span id="l26.42">  * Call this before triggering a page load that you are going to wait for using</span>
<a href="#l26.43"></a><span id="l26.43">  * |wait_for_content_tab_load|. This ensures that if a page is already displayed</span>
<a href="#l26.44"></a><span id="l26.44">  * in the given tab that state is sufficiently cleaned up so it doesn't trick us</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineat">@@ -189,8 +197,79 @@ function wait_for_content_tab_load(aTab)</span>
<a href="#l26.46"></a><span id="l26.46"> /**</span>
<a href="#l26.47"></a><span id="l26.47">  * Assert that the given content tab has the given URL (string) loaded.</span>
<a href="#l26.48"></a><span id="l26.48">  */</span>
<a href="#l26.49"></a><span id="l26.49"> function assert_content_tab_has_url(aTab, aURL) {</span>
<a href="#l26.50"></a><span id="l26.50">   if (aTab.browser.currentURI.spec != aURL)</span>
<a href="#l26.51"></a><span id="l26.51">     mark_failure([&quot;The tab&quot;, aTab, &quot;should have URL&quot;, aURL, &quot;but instead has&quot;,</span>
<a href="#l26.52"></a><span id="l26.52">                   aTab.browser.currentURI.spec]);</span>
<a href="#l26.53"></a><span id="l26.53"> }</span>
<a href="#l26.54"></a><span id="l26.54" class="difflineplus">+</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineplus">+/**</span>
<a href="#l26.56"></a><span id="l26.56" class="difflineplus">+ * Get the element with the given ID from the content tab's displayed page.</span>
<a href="#l26.57"></a><span id="l26.57" class="difflineplus">+ */</span>
<a href="#l26.58"></a><span id="l26.58" class="difflineplus">+function content_tab_e(aTab, aId) {</span>
<a href="#l26.59"></a><span id="l26.59" class="difflineplus">+  return aTab.browser.contentDocument.getElementById(aId);</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineplus">+}</span>
<a href="#l26.61"></a><span id="l26.61" class="difflineplus">+</span>
<a href="#l26.62"></a><span id="l26.62" class="difflineplus">+/**</span>
<a href="#l26.63"></a><span id="l26.63" class="difflineplus">+ * Returns the current &quot;display&quot; style property of an element.</span>
<a href="#l26.64"></a><span id="l26.64" class="difflineplus">+ */</span>
<a href="#l26.65"></a><span id="l26.65" class="difflineplus">+function get_element_display(aTab, aElem) {</span>
<a href="#l26.66"></a><span id="l26.66" class="difflineplus">+  let style = aTab.browser.contentWindow.getComputedStyle(aElem);</span>
<a href="#l26.67"></a><span id="l26.67" class="difflineplus">+  return style.getPropertyValue(&quot;display&quot;);</span>
<a href="#l26.68"></a><span id="l26.68" class="difflineplus">+}</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineplus">+</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineplus">+/**</span>
<a href="#l26.71"></a><span id="l26.71" class="difflineplus">+ * Asserts that the given element is hidden from view on the page.</span>
<a href="#l26.72"></a><span id="l26.72" class="difflineplus">+ */</span>
<a href="#l26.73"></a><span id="l26.73" class="difflineplus">+function assert_element_hidden(aTab, aElem) {</span>
<a href="#l26.74"></a><span id="l26.74" class="difflineplus">+  let display = get_element_display(aTab, aElem);</span>
<a href="#l26.75"></a><span id="l26.75" class="difflineplus">+  if (display != &quot;none&quot;) {</span>
<a href="#l26.76"></a><span id="l26.76" class="difflineplus">+    mark_failure([&quot;Element&quot;, aElem, &quot;should be hidden but has display&quot;, display,</span>
<a href="#l26.77"></a><span id="l26.77" class="difflineplus">+                  &quot;instead&quot;]);</span>
<a href="#l26.78"></a><span id="l26.78" class="difflineplus">+  }</span>
<a href="#l26.79"></a><span id="l26.79" class="difflineplus">+}</span>
<a href="#l26.80"></a><span id="l26.80" class="difflineplus">+</span>
<a href="#l26.81"></a><span id="l26.81" class="difflineplus">+/**</span>
<a href="#l26.82"></a><span id="l26.82" class="difflineplus">+ * Asserts that the given element is visible on the page.</span>
<a href="#l26.83"></a><span id="l26.83" class="difflineplus">+ */</span>
<a href="#l26.84"></a><span id="l26.84" class="difflineplus">+function assert_element_visible(aTab, aElem) {</span>
<a href="#l26.85"></a><span id="l26.85" class="difflineplus">+  let display = get_element_display(aTab, aElem);</span>
<a href="#l26.86"></a><span id="l26.86" class="difflineplus">+  if (display != &quot;inline&quot;) {</span>
<a href="#l26.87"></a><span id="l26.87" class="difflineplus">+    mark_failure([&quot;Element&quot;, aElem, &quot;should be visible but has display&quot;, display,</span>
<a href="#l26.88"></a><span id="l26.88" class="difflineplus">+                  &quot;instead&quot;]);</span>
<a href="#l26.89"></a><span id="l26.89" class="difflineplus">+  }</span>
<a href="#l26.90"></a><span id="l26.90" class="difflineplus">+}</span>
<a href="#l26.91"></a><span id="l26.91" class="difflineplus">+</span>
<a href="#l26.92"></a><span id="l26.92" class="difflineplus">+/**</span>
<a href="#l26.93"></a><span id="l26.93" class="difflineplus">+ * Waits for the element's display property to be the given value.</span>
<a href="#l26.94"></a><span id="l26.94" class="difflineplus">+ */</span>
<a href="#l26.95"></a><span id="l26.95" class="difflineplus">+function wait_for_element_display_value(aTab, aElem, aValue) {</span>
<a href="#l26.96"></a><span id="l26.96" class="difflineplus">+  function isValue() {</span>
<a href="#l26.97"></a><span id="l26.97" class="difflineplus">+    return get_element_display(aTab, aElem) == aValue;</span>
<a href="#l26.98"></a><span id="l26.98" class="difflineplus">+  }</span>
<a href="#l26.99"></a><span id="l26.99" class="difflineplus">+  if (!controller.waitForEval(&quot;subject()&quot;, NORMAL_TIMEOUT, FAST_INTERVAL,</span>
<a href="#l26.100"></a><span id="l26.100" class="difflineplus">+                              isValue)) {</span>
<a href="#l26.101"></a><span id="l26.101" class="difflineplus">+    mark_failure([&quot;Timeout waiting for element&quot;, aElem, &quot;to have display value&quot;,</span>
<a href="#l26.102"></a><span id="l26.102" class="difflineplus">+                  aValue]);</span>
<a href="#l26.103"></a><span id="l26.103" class="difflineplus">+  }</span>
<a href="#l26.104"></a><span id="l26.104" class="difflineplus">+}</span>
<a href="#l26.105"></a><span id="l26.105" class="difflineplus">+</span>
<a href="#l26.106"></a><span id="l26.106" class="difflineplus">+/**</span>
<a href="#l26.107"></a><span id="l26.107" class="difflineplus">+ * Asserts that the given text is present on the content tab's page.</span>
<a href="#l26.108"></a><span id="l26.108" class="difflineplus">+ */</span>
<a href="#l26.109"></a><span id="l26.109" class="difflineplus">+function assert_content_tab_text_present(aTab, aText) {</span>
<a href="#l26.110"></a><span id="l26.110" class="difflineplus">+  let html = aTab.browser.contentDocument.documentElement.innerHTML;</span>
<a href="#l26.111"></a><span id="l26.111" class="difflineplus">+  if (html.indexOf(aText) == -1) {</span>
<a href="#l26.112"></a><span id="l26.112" class="difflineplus">+    mark_failure([&quot;Unable to find string \&quot;&quot; + aText + &quot;\&quot; on the content tab's page&quot;]);</span>
<a href="#l26.113"></a><span id="l26.113" class="difflineplus">+  }</span>
<a href="#l26.114"></a><span id="l26.114" class="difflineplus">+}</span>
<a href="#l26.115"></a><span id="l26.115" class="difflineplus">+</span>
<a href="#l26.116"></a><span id="l26.116" class="difflineplus">+/**</span>
<a href="#l26.117"></a><span id="l26.117" class="difflineplus">+ * Asserts that the given text is absent on the content tab's page.</span>
<a href="#l26.118"></a><span id="l26.118" class="difflineplus">+ */</span>
<a href="#l26.119"></a><span id="l26.119" class="difflineplus">+function assert_content_tab_text_absent(aTab, aText) {</span>
<a href="#l26.120"></a><span id="l26.120" class="difflineplus">+  let html = aTab.browser.contentDocument.documentElement.innerHTML;</span>
<a href="#l26.121"></a><span id="l26.121" class="difflineplus">+  if (html.indexOf(aText) != -1) {</span>
<a href="#l26.122"></a><span id="l26.122" class="difflineplus">+    mark_failure([&quot;Found string \&quot;&quot; + aText + &quot;\&quot; on the content tab's page&quot;]);</span>
<a href="#l26.123"></a><span id="l26.123" class="difflineplus">+  }</span>
<a href="#l26.124"></a><span id="l26.124" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/themes/gnomestripe/jar.mn</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/themes/gnomestripe/jar.mn</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -3,16 +3,17 @@ classic.jar:</span>
<a href="#l27.4"></a><span id="l27.4"> % skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l27.5"></a><span id="l27.5">   skin/classic/messenger/featureConfigurator.css              (mail/featureConfigurator.css)</span>
<a href="#l27.6"></a><span id="l27.6">   skin/classic/messenger/featureConfigurators/subpage.css     (mail/featureConfigurators/subpage.css)</span>
<a href="#l27.7"></a><span id="l27.7">   skin/classic/messenger/featureConfigurators/animation.png   (mail/featureConfigurators/animation.png)</span>
<a href="#l27.8"></a><span id="l27.8">   skin/classic/messenger/featureConfigurators/compact-header.png    (mail/featureConfigurators/compact-header.png)</span>
<a href="#l27.9"></a><span id="l27.9">   skin/classic/messenger/featureConfigurators/folder-columns.png    (mail/featureConfigurators/folder-columns.png)</span>
<a href="#l27.10"></a><span id="l27.10">   skin/classic/messenger/featureConfigurators/toolbars.png    (mail/featureConfigurators/toolbars.png)</span>
<a href="#l27.11"></a><span id="l27.11">   skin/classic/messenger/primaryToolbar.css                   (mail/primaryToolbar.css)</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+  skin/classic/messenger/aboutSupport.css                     (../qute/mail/aboutSupport.css)</span>
<a href="#l27.13"></a><span id="l27.13">   skin/classic/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l27.14"></a><span id="l27.14">   skin/classic/messenger/accountCreation.css                  (mail/accountCreation.css)</span>
<a href="#l27.15"></a><span id="l27.15">   skin/classic/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l27.16"></a><span id="l27.16">   skin/classic/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l27.17"></a><span id="l27.17">   skin/classic/messenger/section_collapsed.png                (mail/section_collapsed.png)</span>
<a href="#l27.18"></a><span id="l27.18">   skin/classic/messenger/section_expanded.png                 (mail/section_expanded.png)</span>
<a href="#l27.19"></a><span id="l27.19">   skin/classic/messenger/messageHeader.css                    (mail/messageHeader.css)</span>
<a href="#l27.20"></a><span id="l27.20">   skin/classic/messenger/messageBody.css                      (mail/messageBody.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/themes/pinstripe/jar.mn</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/themes/pinstripe/jar.mn</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -6,16 +6,17 @@ classic.jar:</span>
<a href="#l28.4"></a><span id="l28.4">   skin/classic/messenger/featureConfigurators/compact-header.png (mail/featureConfigurators/compact-header.png)</span>
<a href="#l28.5"></a><span id="l28.5">   skin/classic/messenger/featureConfigurators/folder-columns.png (mail/featureConfigurators/folder-columns.png)</span>
<a href="#l28.6"></a><span id="l28.6">   skin/classic/messenger/featureConfigurators/toolbars.png       (mail/featureConfigurators/toolbars.png)</span>
<a href="#l28.7"></a><span id="l28.7">   skin/classic/messenger/glodaFacetView.css                      (mail/glodaFacetView.css)</span>
<a href="#l28.8"></a><span id="l28.8">   skin/classic/messenger/multimessageview.css                    (mail/multimessageview.css)</span>
<a href="#l28.9"></a><span id="l28.9">   skin/classic/messenger/dialogs.css                             (mail/dialogs.css)</span>
<a href="#l28.10"></a><span id="l28.10">   skin/classic/messenger/messenger.css                           (mail/messenger.css)</span>
<a href="#l28.11"></a><span id="l28.11">   skin/classic/messenger/primaryToolbar.css                      (mail/primaryToolbar.css)</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+  skin/classic/messenger/aboutSupport.css                        (../qute/mail/aboutSupport.css)</span>
<a href="#l28.13"></a><span id="l28.13">   skin/classic/messenger/accountCentral.css                      (mail/accountCentral.css)</span>
<a href="#l28.14"></a><span id="l28.14">   skin/classic/messenger/accountCreation.css                     (mail/accountCreation.css)</span>
<a href="#l28.15"></a><span id="l28.15">   skin/classic/messenger/accountManage.css                       (mail/accountManage.css)</span>
<a href="#l28.16"></a><span id="l28.16">   skin/classic/messenger/accountWizard.css                       (mail/accountWizard.css)</span>
<a href="#l28.17"></a><span id="l28.17">   skin/classic/messenger/section_collapsed.png                   (mail/section_collapsed.png)</span>
<a href="#l28.18"></a><span id="l28.18">   skin/classic/messenger/section_expanded.png                    (mail/section_expanded.png)</span>
<a href="#l28.19"></a><span id="l28.19">   skin/classic/messenger/messageHeader.css                       (mail/messageHeader.css)</span>
<a href="#l28.20"></a><span id="l28.20">   skin/classic/messenger/messageWindow.css                       (mail/messageWindow.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/themes/qute/jar.mn</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/themes/qute/jar.mn</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -43,16 +43,17 @@ classic.jar:</span>
<a href="#l29.4"></a><span id="l29.4"> % skin messenger classic/1.0 %skin/classic/messenger/ os!=WINNT</span>
<a href="#l29.5"></a><span id="l29.5">   skin/classic/messenger/featureConfigurator.css              (mail/featureConfigurator.css)</span>
<a href="#l29.6"></a><span id="l29.6">   skin/classic/messenger/featureConfigurators/subpage.css     (mail/featureConfigurators/subpage.css)</span>
<a href="#l29.7"></a><span id="l29.7">   skin/classic/messenger/featureConfigurators/animation.png   (mail/featureConfigurators/animation.png)</span>
<a href="#l29.8"></a><span id="l29.8">   skin/classic/messenger/featureConfigurators/compact-header.png  (mail/featureConfigurators/compact-header.png)</span>
<a href="#l29.9"></a><span id="l29.9">   skin/classic/messenger/featureConfigurators/folder-columns.png  (mail/featureConfigurators/folder-columns.png)</span>
<a href="#l29.10"></a><span id="l29.10">   skin/classic/messenger/featureConfigurators/toolbars.png    (mail/featureConfigurators/toolbars.png)</span>
<a href="#l29.11"></a><span id="l29.11">   skin/classic/messenger/primaryToolbar.css                   (mail/primaryToolbar.css)</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineplus">+  skin/classic/messenger/aboutSupport.css                     (mail/aboutSupport.css)</span>
<a href="#l29.13"></a><span id="l29.13">   skin/classic/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l29.14"></a><span id="l29.14">   skin/classic/messenger/accountCreation.css                  (mail/accountCreation.css)</span>
<a href="#l29.15"></a><span id="l29.15">   skin/classic/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l29.16"></a><span id="l29.16">   skin/classic/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l29.17"></a><span id="l29.17">   skin/classic/messenger/section_collapsed.png                (mail/section_collapsed.png)</span>
<a href="#l29.18"></a><span id="l29.18">   skin/classic/messenger/section_expanded.png                 (mail/section_expanded.png)</span>
<a href="#l29.19"></a><span id="l29.19">   skin/classic/messenger/messageHeader.css                    (mail/messageHeader.css)</span>
<a href="#l29.20"></a><span id="l29.20">   skin/classic/messenger/messageBody.css                      (mail/messageBody.css)</span>
<a href="#l29.21"></a><span id="l29.21" class="difflineat">@@ -271,16 +272,17 @@ classic.jar:</span>
<a href="#l29.22"></a><span id="l29.22"> % skin messenger classic/1.0 %skin/classic/aero/messenger/ os=WINNT osversion&gt;=6</span>
<a href="#l29.23"></a><span id="l29.23">   skin/classic/aero/messenger/featureConfigurator.css              (mail/featureConfigurator.css)</span>
<a href="#l29.24"></a><span id="l29.24">   skin/classic/aero/messenger/featureConfigurators/subpage.css     (mail/featureConfigurators/subpage.css)</span>
<a href="#l29.25"></a><span id="l29.25">   skin/classic/aero/messenger/featureConfigurators/animation.png   (mail/featureConfigurators/animation.png)</span>
<a href="#l29.26"></a><span id="l29.26">   skin/classic/aero/messenger/featureConfigurators/compact-header.png  (mail/featureConfigurators/compact-header.png)</span>
<a href="#l29.27"></a><span id="l29.27">   skin/classic/aero/messenger/featureConfigurators/folder-columns.png  (mail/featureConfigurators/folder-columns.png)</span>
<a href="#l29.28"></a><span id="l29.28">   skin/classic/aero/messenger/featureConfigurators/toolbars.png    (mail/featureConfigurators/toolbars.png)</span>
<a href="#l29.29"></a><span id="l29.29"> * skin/classic/aero/messenger/primaryToolbar.css                   (mail/primaryToolbar-aero.css)</span>
<a href="#l29.30"></a><span id="l29.30" class="difflineplus">+  skin/classic/aero/messenger/aboutSupport.css                     (mail/aboutSupport.css)</span>
<a href="#l29.31"></a><span id="l29.31">   skin/classic/aero/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l29.32"></a><span id="l29.32">   skin/classic/aero/messenger/accountCreation.css                  (mail/accountCreation.css)</span>
<a href="#l29.33"></a><span id="l29.33">   skin/classic/aero/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l29.34"></a><span id="l29.34">   skin/classic/aero/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l29.35"></a><span id="l29.35">   skin/classic/aero/messenger/section_collapsed.png                (mail/section_collapsed.png)</span>
<a href="#l29.36"></a><span id="l29.36">   skin/classic/aero/messenger/section_expanded.png                 (mail/section_expanded.png)</span>
<a href="#l29.37"></a><span id="l29.37"> * skin/classic/aero/messenger/messageHeader.css                    (mail/messageHeader-aero.css)</span>
<a href="#l29.38"></a><span id="l29.38">   skin/classic/aero/messenger/messageBody.css                      (mail/messageBody.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">new file mode 100644</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineminus">--- /dev/null</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineplus">+++ b/mail/themes/qute/mail/aboutSupport.css</span>
<a href="#l30.4"></a><span id="l30.4" class="difflineat">@@ -0,0 +1,50 @@</span>
<a href="#l30.5"></a><span id="l30.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l30.6"></a><span id="l30.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l30.7"></a><span id="l30.7" class="difflineplus">+ *</span>
<a href="#l30.8"></a><span id="l30.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l30.9"></a><span id="l30.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l30.11"></a><span id="l30.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineplus">+ *</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineplus">+ * License.</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+ *</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineplus">+ * The Original Code is aboutSupport.css.</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineplus">+ *</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineplus">+ * Mozilla Foundation.</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2011</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineplus">+ *</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineplus">+ *   Siddharth Agarwal &lt;sid.bugzilla@gmail.com&gt;</span>
<a href="#l30.27"></a><span id="l30.27" class="difflineplus">+ *</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l30.30"></a><span id="l30.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l30.36"></a><span id="l30.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l30.39"></a><span id="l30.39" class="difflineplus">+ *</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineplus">+</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineplus">+.gray-text {</span>
<a href="#l30.43"></a><span id="l30.43" class="difflineplus">+  color: GrayText;</span>
<a href="#l30.44"></a><span id="l30.44" class="difflineplus">+}</span>
<a href="#l30.45"></a><span id="l30.45" class="difflineplus">+</span>
<a href="#l30.46"></a><span id="l30.46" class="difflineplus">+.thead-level2 &gt; th {</span>
<a href="#l30.47"></a><span id="l30.47" class="difflineplus">+  background-color: -moz-Dialog;</span>
<a href="#l30.48"></a><span id="l30.48" class="difflineplus">+  color: -moz-DialogText;</span>
<a href="#l30.49"></a><span id="l30.49" class="difflineplus">+}</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineplus">+</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineplus">+td.data-private {</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineplus">+  background-color: infobackground;</span>
<a href="#l30.53"></a><span id="l30.53" class="difflineplus">+  color: infotext;</span>
<a href="#l30.54"></a><span id="l30.54" class="difflineplus">+}</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

