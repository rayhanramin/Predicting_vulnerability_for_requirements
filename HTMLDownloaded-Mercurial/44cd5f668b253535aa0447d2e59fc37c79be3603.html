<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 7447:44cd5f668b253535aa0447d2e59fc37c79be3603</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 44cd5f668b253535aa0447d2e59fc37c79be3603" />
<meta property="og:url" content="/comm-central/rev/44cd5f668b253535aa0447d2e59fc37c79be3603" />
<meta property="og:description" content="Bug 623151 - Migration assistant installation of add-ons no longer works on trunk builds; r=Standard8 ui-r=clarkbw" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 44cd5f668b253535aa0447d2e59fc37c79be3603 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/44cd5f668b253535aa0447d2e59fc37c79be3603">shortlog</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/44cd5f668b253535aa0447d2e59fc37c79be3603">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603">files</a> |
changeset |
<a href="/comm-central/raw-rev/44cd5f668b253535aa0447d2e59fc37c79be3603">raw</a>  | <a href="/comm-central/archive/44cd5f668b253535aa0447d2e59fc37c79be3603.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=623151">Bug 623151</a> - Migration assistant installation of add-ons no longer works on trunk builds; r=Standard8 ui-r=clarkbw
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#105;&#109;&#32;&#80;&#111;&#114;&#116;&#101;&#114;&#32;&#60;&#115;&#113;&#117;&#105;&#98;&#98;&#108;&#121;&#102;&#108;&#97;&#98;&#98;&#101;&#116;&#121;&#100;&#111;&#111;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 27 Mar 2011 22:25:57 -0500</td></tr>

<tr>
 <td>changeset 7447</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/44cd5f668b253535aa0447d2e59fc37c79be3603">44cd5f668b253535aa0447d2e59fc37c79be3603</a></td>
</tr>



<tr>
<td>parent 7446</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9289be84876e4d74de3f4a35ce51c5651786d3aa">9289be84876e4d74de3f4a35ce51c5651786d3aa</a>
</td>
</tr>

<tr>
<td>child 7448</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/edb9543af082c25fe204f47597f1a469b734b51b">edb9543af082c25fe204f47597f1a469b734b51b</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=44cd5f668b253535aa0447d2e59fc37c79be3603">5711</a></td></tr>
<tr><td>push user</td><td>squibblyflabbetydoo@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 28 Mar 2011 03:27:00 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@44cd5f668b25 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=44cd5f668b253535aa0447d2e59fc37c79be3603">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=44cd5f668b253535aa0447d2e59fc37c79be3603&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=44cd5f668b253535aa0447d2e59fc37c79be3603&newProject=comm-central&newRevision=44cd5f668b253535aa0447d2e59fc37c79be3603&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=44cd5f668b253535aa0447d2e59fc37c79be3603&newProject=comm-central&newRevision=44cd5f668b253535aa0447d2e59fc37c79be3603&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=44cd5f668b253535aa0447d2e59fc37c79be3603&newProject=comm-central&newRevision=44cd5f668b253535aa0447d2e59fc37c79be3603&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a>, <a href="/comm-central/log?rev=reviewer%28clarkbw%29&revcount=50">clarkbw</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=623151">623151</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=623151">Bug 623151</a> - Migration assistant installation of add-ons no longer works on trunk builds; r=Standard8 ui-r=clarkbw</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/compactheader.xhtml">mail/base/content/featureConfigurators/compactheader.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/compactheader.xhtml">file</a> |
<a href="/comm-central/annotate/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/compactheader.xhtml">annotate</a> |
<a href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/compactheader.xhtml">diff</a> |
<a href="/comm-central/comparison/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/compactheader.xhtml">comparison</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/compactheader.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/extensions.js">mail/base/content/featureConfigurators/extensions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/extensions.js">file</a> |
<a href="/comm-central/annotate/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/extensions.js">annotate</a> |
<a href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/extensions.js">diff</a> |
<a href="/comm-central/comparison/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/extensions.js">comparison</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/extensions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/folderpanecolumns.xhtml">mail/base/content/featureConfigurators/folderpanecolumns.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/folderpanecolumns.xhtml">file</a> |
<a href="/comm-central/annotate/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/folderpanecolumns.xhtml">annotate</a> |
<a href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/folderpanecolumns.xhtml">diff</a> |
<a href="/comm-central/comparison/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/folderpanecolumns.xhtml">comparison</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/folderpanecolumns.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/subpage.css">mail/base/content/featureConfigurators/subpage.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/subpage.css">file</a> |
<a href="/comm-central/annotate/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/subpage.css">annotate</a> |
<a href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/subpage.css">diff</a> |
<a href="/comm-central/comparison/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/subpage.css">comparison</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/featureConfigurators/subpage.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/specialTabs.js">mail/base/content/specialTabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/specialTabs.js">file</a> |
<a href="/comm-central/annotate/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/specialTabs.js">annotate</a> |
<a href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/specialTabs.js">diff</a> |
<a href="/comm-central/comparison/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/specialTabs.js">comparison</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/base/content/specialTabs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd">mail/locales/en-US/chrome/messenger/featureConfigurator.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd">file</a> |
<a href="/comm-central/annotate/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd">annotate</a> |
<a href="/comm-central/diff/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd">diff</a> |
<a href="/comm-central/comparison/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd">comparison</a> |
<a href="/comm-central/log/44cd5f668b253535aa0447d2e59fc37c79be3603/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/featureConfigurators/compactheader.xhtml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/featureConfigurators/compactheader.xhtml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -66,33 +66,38 @@</span>
<a href="#l1.4"></a><span id="l1.4">       &gt;&lt;/script&gt;</span>
<a href="#l1.5"></a><span id="l1.5">   &lt;!-- Libs --&gt;</span>
<a href="#l1.6"></a><span id="l1.6">   &lt;script type=&quot;application/javascript;version=1.8&quot;</span>
<a href="#l1.7"></a><span id="l1.7">       src=&quot;chrome://messenger/content/jquery.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l1.8"></a><span id="l1.8">   &lt;script type=&quot;application/javascript;version=1.8&quot;</span>
<a href="#l1.9"></a><span id="l1.9">       src=&quot;chrome://messenger/content/jquery-ui.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l1.10"></a><span id="l1.10">   &lt;title&gt;&amp;featureConfigurator.title;&lt;/title&gt;</span>
<a href="#l1.11"></a><span id="l1.11"> &lt;/head&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-&lt;body onload=&quot;compactHeaderConfigurator.onLoad()&quot; dir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+&lt;body onload=&quot;compactHeaderConfigurator.onLoad()&quot;</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+      onunload=&quot;compactHeaderConfigurator.onUnload()&quot;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+      dir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l1.16"></a><span id="l1.16">   &lt;table&gt;</span>
<a href="#l1.17"></a><span id="l1.17">     &lt;tbody&gt;</span>
<a href="#l1.18"></a><span id="l1.18">       &lt;tr&gt;</span>
<a href="#l1.19"></a><span id="l1.19">         &lt;td class=&quot;column left&quot;&gt;</span>
<a href="#l1.20"></a><span id="l1.20">           &lt;form&gt;</span>
<a href="#l1.21"></a><span id="l1.21">             &lt;h1&gt;&amp;featureConfigurator.collapsedHeaders.heading;&lt;/h1&gt;</span>
<a href="#l1.22"></a><span id="l1.22">             &lt;img class=&quot;screenshot&quot; src=&quot;chrome://messenger/skin/featureConfigurators/compact-header.png&quot;/&gt;</span>
<a href="#l1.23"></a><span id="l1.23">             &lt;p id=&quot;weak&quot;&gt;&amp;featureConfigurator.collapsedHeaders.para.weak;&lt;/p&gt;</span>
<a href="#l1.24"></a><span id="l1.24">             &lt;p id=&quot;strong&quot;&gt;&amp;featureConfigurator.collapsedHeaders.para.strong;&lt;/p&gt;</span>
<a href="#l1.25"></a><span id="l1.25">             &lt;div&gt;</span>
<a href="#l1.26"></a><span id="l1.26">               &lt;input type=&quot;button&quot;</span>
<a href="#l1.27"></a><span id="l1.27">                      id=&quot;addon-install-button&quot;</span>
<a href="#l1.28"></a><span id="l1.28">                      value=&quot;&amp;featureConfigurator.collapsedHeaders.install;&quot;</span>
<a href="#l1.29"></a><span id="l1.29">                      onclick=&quot;compactHeaderConfigurator.install()&quot;/&gt;</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-              &lt;span id=&quot;installing&quot;&gt;&lt;img class=&quot;spinner&quot; src=&quot;chrome://global/skin/icons/loading_16.png&quot;/&gt;&amp;featureConfigurator.addOn.installing;&lt;/span&gt;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+              &lt;img id=&quot;spinner&quot; src=&quot;chrome://global/skin/icons/loading_16.png&quot;/&gt;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+              &lt;span id=&quot;downloading&quot;&gt;&amp;featureConfigurator.addOn.downloading;&lt;/span&gt;</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+              &lt;span id=&quot;installing&quot;&gt;&amp;featureConfigurator.addOn.installing;&lt;/span&gt;</span>
<a href="#l1.34"></a><span id="l1.34">               &lt;span id=&quot;installed&quot;&gt;&amp;featureConfigurator.addOn.installed;&lt;/span&gt;</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+              &lt;span id=&quot;failure&quot;&gt;&amp;featureConfigurator.addOn.failure;&lt;/span&gt;</span>
<a href="#l1.36"></a><span id="l1.36">               &lt;span id=&quot;alreadyInstalled&quot;&gt;&amp;featureConfigurator.addOn.alreadyInstalled;&lt;/span&gt;</span>
<a href="#l1.37"></a><span id="l1.37">             &lt;/div&gt;</span>
<a href="#l1.38"></a><span id="l1.38">           &lt;/form&gt;</span>
<a href="#l1.39"></a><span id="l1.39">         &lt;/td&gt;</span>
<a href="#l1.40"></a><span id="l1.40">         &lt;td class=&quot;column right&quot;&gt;</span>
<a href="#l1.41"></a><span id="l1.41">         &lt;/td&gt;</span>
<a href="#l1.42"></a><span id="l1.42">       &lt;/tr&gt;</span>
<a href="#l1.43"></a><span id="l1.43">     &lt;/tbody&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/featureConfigurators/extensions.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/featureConfigurators/extensions.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -34,46 +34,104 @@</span>
<a href="#l2.4"></a><span id="l2.4">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l2.5"></a><span id="l2.5">  *</span>
<a href="#l2.6"></a><span id="l2.6">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> const Cc = Components.classes;</span>
<a href="#l2.9"></a><span id="l2.9"> const Ci = Components.interfaces;</span>
<a href="#l2.10"></a><span id="l2.10"> const Cu = Components.utils;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+Cu.import(&quot;resource://gre/modules/AddonManager.jsm&quot;);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+Cu.import(&quot;resource:///modules/errUtils.js&quot;);</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+</span>
<a href="#l2.16"></a><span id="l2.16"> var extensionConfigurator = {</span>
<a href="#l2.17"></a><span id="l2.17">   /**</span>
<a href="#l2.18"></a><span id="l2.18">    * Figure out what we want to display on the extension page.</span>
<a href="#l2.19"></a><span id="l2.19">    *</span>
<a href="#l2.20"></a><span id="l2.20">    * @param subpageData data we might need.</span>
<a href="#l2.21"></a><span id="l2.21">    */</span>
<a href="#l2.22"></a><span id="l2.22">   onLoad: function ex_onLoad() {</span>
<a href="#l2.23"></a><span id="l2.23">     this.subpageData = parent.gSubpageData;</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+    Services.obs.addObserver(this.onInstallFailed, &quot;addon-install-failed&quot;,</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+                             false);</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+</span>
<a href="#l2.27"></a><span id="l2.27">     try {</span>
<a href="#l2.28"></a><span id="l2.28">       if (this.shouldShowStrongMessage()) {</span>
<a href="#l2.29"></a><span id="l2.29">         // Show the more blatant warning.</span>
<a href="#l2.30"></a><span id="l2.30">         $(&quot;#weak&quot;).hide();</span>
<a href="#l2.31"></a><span id="l2.31">         $(&quot;#strong&quot;).show();</span>
<a href="#l2.32"></a><span id="l2.32">       }</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-      var Application = Cc[&quot;@mozilla.org/steel/application;1&quot;]</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-                          .getService(Ci.steelIApplication);</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-      if (Application.extensions.has(this.extensionId)) {</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-        $(&quot;#addon-install-button&quot;).hide();</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-        $(&quot;#alreadyInstalled&quot;).show();</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-      }</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+      // Check if this addon is installed (or will be installed when</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+      // Thunderbird is restarted).</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+      let self = this;</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+      AddonManager.getAllAddons(function(extensions) {</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+        if (extensions.some(function(e) e.id == self.extensionId))</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+          self.onAlreadyInstalled();</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+      });</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+      AddonManager.getAllInstalls(function(extensions) {</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+        if (extensions.some(function(e) e.addon.id == self.extensionId))</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+          self.onAlreadyInstalled();</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+      });</span>
<a href="#l2.51"></a><span id="l2.51">     } catch (e) {</span>
<a href="#l2.52"></a><span id="l2.52">       logException(e);</span>
<a href="#l2.53"></a><span id="l2.53">     }</span>
<a href="#l2.54"></a><span id="l2.54">   },</span>
<a href="#l2.55"></a><span id="l2.55"> </span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+  onUnload: function ex_onUnload() {</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+    Services.obs.removeObserver(this.onInstallFailed, &quot;addon-install-failed&quot;);</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+  },</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+  /**</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineplus">+   * This addon has already been installed, so hide the install button.</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+   */</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineplus">+  onAlreadyInstalled: function ex_onAlreadyInstalled() {</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineplus">+    $(&quot;#addon-install-button&quot;).hide();</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+    $(&quot;#alreadyInstalled&quot;).show();</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+  },</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+  /**</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+   * Installation of the addon failed for some reason, so update the UI to</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+   * indicate this.</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineplus">+   */</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+  onInstallFailed: function ex_onInstallFailed() {</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineplus">+    $(&quot;#addon-install-button&quot;).hide();</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineplus">+    $(&quot;#spinner&quot;).hide();</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineplus">+    $(&quot;#downloading&quot;).hide();</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineplus">+    $(&quot;#installing&quot;).hide();</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineplus">+    $(&quot;#failure&quot;).show();</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+  },</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+</span>
<a href="#l2.80"></a><span id="l2.80">   /**</span>
<a href="#l2.81"></a><span id="l2.81">    * Install an extension for our subclass.</span>
<a href="#l2.82"></a><span id="l2.82">    */</span>
<a href="#l2.83"></a><span id="l2.83">   install: function ex_install() {</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineminus">-    location.href = this.extensionUrl;</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineminus">-    $(&quot;#addon-install-button&quot;).hide();</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineminus">-    $(&quot;#installing&quot;).fadeIn();</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineminus">-    // XXX: possibly load the extension inside another iframe, and possibly</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-    //      hook into the extension manager to get to know when the</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">-    //      extension's been installed.</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineplus">+    AddonManager.getInstallForURL(this.extensionUrl, function(aInstall) {</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineplus">+      aInstall.addListener({</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineplus">+        onDownloadStarted: function(aInstall) {</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineplus">+          $(&quot;#addon-install-button&quot;).hide();</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineplus">+          $(&quot;#spinner&quot;).fadeIn();</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineplus">+          $(&quot;#downloading&quot;).fadeIn();</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+        },</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+        onDownloadCancelled: function(aInstall) {</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+          $(&quot;#spinner&quot;).hide();</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineplus">+          $(&quot;#downloading&quot;).hide();</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineplus">+          $(&quot;#addon-install-button&quot;).show();</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineplus">+        },</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+        onInstallStarted: function(aInstall) {</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineplus">+          $(&quot;#downloading&quot;).hide();</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineplus">+          $(&quot;#installing&quot;).fadeIn();</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineplus">+        },</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+        onInstallEnded: function(aInstall, aAddon) {</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+          $(&quot;#spinner&quot;).hide();</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+          $(&quot;#installing&quot;).hide();</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+          $(&quot;#installed&quot;).show();</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineplus">+        },</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineplus">+      });</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineplus">+</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+      AddonManager.installAddonsFromWebpage(&quot;application/x-xpinstall&quot;,</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+                                            window, null, [aInstall]);</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+    }, &quot;application/x-xpinstall&quot;);</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+</span>
<a href="#l2.117"></a><span id="l2.117">   },</span>
<a href="#l2.118"></a><span id="l2.118"> </span>
<a href="#l2.119"></a><span id="l2.119"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/featureConfigurators/folderpanecolumns.xhtml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/featureConfigurators/folderpanecolumns.xhtml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -66,33 +66,38 @@</span>
<a href="#l3.4"></a><span id="l3.4">       &gt;&lt;/script&gt;</span>
<a href="#l3.5"></a><span id="l3.5">   &lt;!-- Libs --&gt;</span>
<a href="#l3.6"></a><span id="l3.6">   &lt;script type=&quot;application/javascript;version=1.8&quot;</span>
<a href="#l3.7"></a><span id="l3.7">       src=&quot;chrome://messenger/content/jquery.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l3.8"></a><span id="l3.8">   &lt;script type=&quot;application/javascript;version=1.8&quot;</span>
<a href="#l3.9"></a><span id="l3.9">       src=&quot;chrome://messenger/content/jquery-ui.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l3.10"></a><span id="l3.10">   &lt;title&gt;&amp;featureConfigurator.title;&lt;/title&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;/head&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-&lt;body onload=&quot;folderPaneConfigurator.onLoad()&quot; dir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+&lt;body onload=&quot;folderPaneConfigurator.onLoad()&quot;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+      onunload=&quot;folderPaneConfigurator.onUnload()&quot;</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+      dir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l3.16"></a><span id="l3.16">   &lt;table&gt;</span>
<a href="#l3.17"></a><span id="l3.17">     &lt;tbody&gt;</span>
<a href="#l3.18"></a><span id="l3.18">       &lt;tr&gt;</span>
<a href="#l3.19"></a><span id="l3.19">         &lt;td class=&quot;column left&quot;&gt;</span>
<a href="#l3.20"></a><span id="l3.20">           &lt;form&gt;</span>
<a href="#l3.21"></a><span id="l3.21">             &lt;h1&gt;&amp;featureConfigurator.folderColumns.heading;&lt;/h1&gt;</span>
<a href="#l3.22"></a><span id="l3.22">             &lt;img class=&quot;screenshot&quot; src=&quot;chrome://messenger/skin/featureConfigurators/folder-columns.png&quot;/&gt;</span>
<a href="#l3.23"></a><span id="l3.23">             &lt;p id=&quot;weak&quot;&gt;&amp;featureConfigurator.folderColumns.para.weak;&lt;/p&gt;</span>
<a href="#l3.24"></a><span id="l3.24">             &lt;p id=&quot;strong&quot;&gt;&amp;featureConfigurator.folderColumns.para.strong;&lt;/p&gt;</span>
<a href="#l3.25"></a><span id="l3.25">             &lt;div&gt;</span>
<a href="#l3.26"></a><span id="l3.26">               &lt;input type=&quot;button&quot;</span>
<a href="#l3.27"></a><span id="l3.27">                      id=&quot;addon-install-button&quot;</span>
<a href="#l3.28"></a><span id="l3.28">                      value=&quot;&amp;featureConfigurator.folderColumns.install;&quot;</span>
<a href="#l3.29"></a><span id="l3.29">                      onclick=&quot;folderPaneConfigurator.install();&quot; /&gt;</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-              &lt;span id=&quot;installing&quot;&gt;&lt;img class=&quot;spinner&quot; src=&quot;chrome://global/skin/icons/loading_16.png&quot;/&gt;&amp;featureConfigurator.addOn.installing;&lt;/span&gt;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+              &lt;img id=&quot;spinner&quot; src=&quot;chrome://global/skin/icons/loading_16.png&quot;/&gt;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+              &lt;span id=&quot;downloading&quot;&gt;&amp;featureConfigurator.addOn.downloading;&lt;/span&gt;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+              &lt;span id=&quot;installing&quot;&gt;&amp;featureConfigurator.addOn.installing;&lt;/span&gt;</span>
<a href="#l3.34"></a><span id="l3.34">               &lt;span id=&quot;installed&quot;&gt;&amp;featureConfigurator.addOn.installed;&lt;/span&gt;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+              &lt;span id=&quot;failure&quot;&gt;&amp;featureConfigurator.addOn.failure;&lt;/span&gt;</span>
<a href="#l3.36"></a><span id="l3.36">               &lt;span id=&quot;alreadyInstalled&quot;&gt;&amp;featureConfigurator.addOn.alreadyInstalled;&lt;/span&gt;</span>
<a href="#l3.37"></a><span id="l3.37">             &lt;/div&gt;</span>
<a href="#l3.38"></a><span id="l3.38">           &lt;/form&gt;</span>
<a href="#l3.39"></a><span id="l3.39">         &lt;/td&gt;</span>
<a href="#l3.40"></a><span id="l3.40">         &lt;td class=&quot;column right&quot;&gt;</span>
<a href="#l3.41"></a><span id="l3.41">         &lt;/td&gt;</span>
<a href="#l3.42"></a><span id="l3.42">       &lt;/tr&gt;</span>
<a href="#l3.43"></a><span id="l3.43">     &lt;/tbody&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/featureConfigurators/subpage.css</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/featureConfigurators/subpage.css</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -147,28 +147,37 @@ html[dir=&quot;rtl&quot;] #disk-space-used {</span>
<a href="#l4.4"></a><span id="l4.4">   color: GrayText;</span>
<a href="#l4.5"></a><span id="l4.5"> }</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7"> /* :::: Add-ons Pages :::: */</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9"> #addon-install-button {</span>
<a href="#l4.10"></a><span id="l4.10"> }</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-#installing {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+#spinner {</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+  display: none;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+  vertical-align: middle;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+  -moz-margin-end: 1em;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+}</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+#downloading {</span>
<a href="#l4.20"></a><span id="l4.20">   display: none;</span>
<a href="#l4.21"></a><span id="l4.21"> }</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-#installing .spinner {</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-  vertical-align: middle;</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-  -moz-margin-end: 1em;</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+#installing {</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+  display: none;</span>
<a href="#l4.28"></a><span id="l4.28"> }</span>
<a href="#l4.29"></a><span id="l4.29"> </span>
<a href="#l4.30"></a><span id="l4.30"> #installed {</span>
<a href="#l4.31"></a><span id="l4.31">   display: none;</span>
<a href="#l4.32"></a><span id="l4.32"> }</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34"> #alreadyInstalled {</span>
<a href="#l4.35"></a><span id="l4.35">   display: none;</span>
<a href="#l4.36"></a><span id="l4.36"> }</span>
<a href="#l4.37"></a><span id="l4.37"> </span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+#failure {</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+  display: none;</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+}</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+</span>
<a href="#l4.42"></a><span id="l4.42"> #strong {</span>
<a href="#l4.43"></a><span id="l4.43">   display: none;</span>
<a href="#l4.44"></a><span id="l4.44"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/specialTabs.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/specialTabs.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1060,17 +1060,17 @@ var specialTabs = {</span>
<a href="#l5.4"></a><span id="l5.4">             accessKey: messengerBundle.getString(&quot;xpinstallDisabledButton.accesskey&quot;),</span>
<a href="#l5.5"></a><span id="l5.5">             popup: null,</span>
<a href="#l5.6"></a><span id="l5.6">             callback: function editPrefs() {</span>
<a href="#l5.7"></a><span id="l5.7">               Services.prefs.setBoolPref(&quot;xpinstall.enabled&quot;, true);</span>
<a href="#l5.8"></a><span id="l5.8">               return false;</span>
<a href="#l5.9"></a><span id="l5.9">             }</span>
<a href="#l5.10"></a><span id="l5.10">           }];</span>
<a href="#l5.11"></a><span id="l5.11">         }</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        if (!notificationBox.getNotificationWithValue(notificationID)) {</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        if (notificationBox &amp;&amp; !notificationBox.getNotificationWithValue(notificationID)) {</span>
<a href="#l5.14"></a><span id="l5.14">           notificationBox.appendNotification(messageString, notificationID,</span>
<a href="#l5.15"></a><span id="l5.15">                                              iconURL,</span>
<a href="#l5.16"></a><span id="l5.16">                                              notificationBox.PRIORITY_CRITICAL_HIGH,</span>
<a href="#l5.17"></a><span id="l5.17">                                              buttons);</span>
<a href="#l5.18"></a><span id="l5.18">         }</span>
<a href="#l5.19"></a><span id="l5.19">         break;</span>
<a href="#l5.20"></a><span id="l5.20">       case &quot;addon-install-blocked&quot;:</span>
<a href="#l5.21"></a><span id="l5.21">         messageString =</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -1081,17 +1081,17 @@ var specialTabs = {</span>
<a href="#l5.23"></a><span id="l5.23">           label: messengerBundle.getString(&quot;xpinstallPromptAllowButton&quot;),</span>
<a href="#l5.24"></a><span id="l5.24">           accessKey: messengerBundle.getString(&quot;xpinstallPromptAllowButton.accesskey&quot;),</span>
<a href="#l5.25"></a><span id="l5.25">           popup: null,</span>
<a href="#l5.26"></a><span id="l5.26">           callback: function() {</span>
<a href="#l5.27"></a><span id="l5.27">             installInfo.install();</span>
<a href="#l5.28"></a><span id="l5.28">           }</span>
<a href="#l5.29"></a><span id="l5.29">         }];</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-        if (!notificationBox.getNotificationWithValue(notificationName)) {</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+        if (notificationBox &amp;&amp; !notificationBox.getNotificationWithValue(notificationName)) {</span>
<a href="#l5.33"></a><span id="l5.33">             notificationBox.appendNotification(messageString, notificationName,</span>
<a href="#l5.34"></a><span id="l5.34">                                                iconURL,</span>
<a href="#l5.35"></a><span id="l5.35">                                                notificationBox.PRIORITY_MEDIUM_HIGH,</span>
<a href="#l5.36"></a><span id="l5.36">                                                buttons);</span>
<a href="#l5.37"></a><span id="l5.37">           }</span>
<a href="#l5.38"></a><span id="l5.38">         break;</span>
<a href="#l5.39"></a><span id="l5.39">       case &quot;addon-install-failed&quot;:</span>
<a href="#l5.40"></a><span id="l5.40">         // XXX TODO This isn't terribly ideal for the multiple failure case</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineat">@@ -1113,17 +1113,17 @@ var specialTabs = {</span>
<a href="#l5.42"></a><span id="l5.42"> </span>
<a href="#l5.43"></a><span id="l5.43">           messageString = messengerBundle.getString(error);</span>
<a href="#l5.44"></a><span id="l5.44">           messageString = messageString.replace(&quot;#1&quot;, install.name);</span>
<a href="#l5.45"></a><span id="l5.45">           if (host)</span>
<a href="#l5.46"></a><span id="l5.46">             messageString = messageString.replace(&quot;#2&quot;, host);</span>
<a href="#l5.47"></a><span id="l5.47">           messageString = messageString.replace(&quot;#3&quot;, brandShortName);</span>
<a href="#l5.48"></a><span id="l5.48">           messageString = messageString.replace(&quot;#4&quot;, Services.appinfo.version);</span>
<a href="#l5.49"></a><span id="l5.49"> </span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-          if (!notificationBox.getNotificationWithValue(notificationID)) {</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+          if (notificationBox &amp;&amp; !notificationBox.getNotificationWithValue(notificationID)) {</span>
<a href="#l5.52"></a><span id="l5.52">             notificationBox.appendNotification(messageString,</span>
<a href="#l5.53"></a><span id="l5.53">                                                notificationID,</span>
<a href="#l5.54"></a><span id="l5.54">                                                iconURL,</span>
<a href="#l5.55"></a><span id="l5.55">                                                notificationBox.PRIORITY_CRITICAL_HIGH,</span>
<a href="#l5.56"></a><span id="l5.56">                                                []);</span>
<a href="#l5.57"></a><span id="l5.57">           }</span>
<a href="#l5.58"></a><span id="l5.58">         }</span>
<a href="#l5.59"></a><span id="l5.59">         break;</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineat">@@ -1169,21 +1169,22 @@ var specialTabs = {</span>
<a href="#l5.61"></a><span id="l5.61">           }];</span>
<a href="#l5.62"></a><span id="l5.62">         }</span>
<a href="#l5.63"></a><span id="l5.63"> </span>
<a href="#l5.64"></a><span id="l5.64">         messageString = PluralForm.get(installInfo.installs.length, messageString);</span>
<a href="#l5.65"></a><span id="l5.65">         messageString = messageString.replace(&quot;#1&quot;, installInfo.installs[0].name);</span>
<a href="#l5.66"></a><span id="l5.66">         messageString = messageString.replace(&quot;#2&quot;, installInfo.installs.length);</span>
<a href="#l5.67"></a><span id="l5.67">         messageString = messageString.replace(&quot;#3&quot;, brandShortName);</span>
<a href="#l5.68"></a><span id="l5.68"> </span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-        notificationBox.appendNotification(messageString,</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineminus">-                                           notificationID,</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineminus">-                                           iconURL,</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineminus">-                                           notificationBox.PRIORITY_INFO_MEDIUM,</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineminus">-                                           buttons);</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineplus">+        if (notificationBox)</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+          notificationBox.appendNotification(messageString,</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+                                             notificationID,</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+                                             iconURL,</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineplus">+                                             notificationBox.PRIORITY_INFO_MEDIUM,</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+                                             buttons);</span>
<a href="#l5.80"></a><span id="l5.80">         break;</span>
<a href="#l5.81"></a><span id="l5.81">       }</span>
<a href="#l5.82"></a><span id="l5.82">     }</span>
<a href="#l5.83"></a><span id="l5.83">   },</span>
<a href="#l5.84"></a><span id="l5.84"> </span>
<a href="#l5.85"></a><span id="l5.85">   /**</span>
<a href="#l5.86"></a><span id="l5.86">    * Determine if we should load fav icons or not.</span>
<a href="#l5.87"></a><span id="l5.87">    *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/featureConfigurator.dtd</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -15,22 +15,28 @@</span>
<a href="#l6.4"></a><span id="l6.4"> &lt;!ENTITY featureConfigurator.toolbar.new.status.explanation &quot;A clean toolbar with all your messaging buttons at your fingertips.&quot;&gt;</span>
<a href="#l6.5"></a><span id="l6.5"> </span>
<a href="#l6.6"></a><span id="l6.6"> &lt;!-- LOCALIZATION NOTE (featureConfigurator.toolbar.original): The word 'original' is chosen deliberately to be neutral, vs. 'old' which in English at least had a negative connotation.--&gt;</span>
<a href="#l6.7"></a><span id="l6.7"> &lt;!ENTITY featureConfigurator.toolbar.original &quot;Keep your original Toolbar buttons&quot;&gt;</span>
<a href="#l6.8"></a><span id="l6.8"> &lt;!ENTITY featureConfigurator.toolbar.original.status.explanation &quot;Keep any custom toolbar buttons in addition to the new Message Buttons.&quot;&gt;</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> &lt;!ENTITY featureConfigurator.toolbarBenefits.para &quot;Message actions such as reply and forward have moved from the toolbar and onto the message header itself. This ties the action buttons directly to the message, which leaves more room in the toolbar for the richer search textbox, as well as add-ons.&quot;&gt;</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+&lt;!-- LOCALIZATION NOTE (featureConfigurator.addOn.downloading): The text to display while downloading the addon. --&gt;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+&lt;!ENTITY featureConfigurator.addOn.downloading &quot;Downloading…&quot;&gt;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+</span>
<a href="#l6.15"></a><span id="l6.15"> &lt;!-- LOCALIZATION NOTE (featureConfigurator.addOn.installing): The text to display while installing the addon. --&gt;</span>
<a href="#l6.16"></a><span id="l6.16"> &lt;!ENTITY featureConfigurator.addOn.installing &quot;Installing…&quot;&gt;</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18"> &lt;!-- LOCALIZATION NOTE (featureConfigurator.addOn.installed): The text to display after the user installs the addon from the configurator. --&gt;</span>
<a href="#l6.19"></a><span id="l6.19"> &lt;!ENTITY featureConfigurator.addOn.installed &quot;Installed&quot;&gt;</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+&lt;!-- LOCALIZATION NOTE (featureConfigurator.addOn.failure): The text to display when there is a problem installing the addon. --&gt;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+&lt;!ENTITY featureConfigurator.addOn.failure &quot;There was a problem installing this extension!&quot;&gt;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+</span>
<a href="#l6.24"></a><span id="l6.24"> &lt;!-- LOCALIZATION NOTE (featureConfigurator.addOn.alreadyInstalled): The label to display when the addon is already installed. --&gt;</span>
<a href="#l6.25"></a><span id="l6.25"> &lt;!ENTITY featureConfigurator.addOn.alreadyInstalled &quot;This extension is already installed.&quot;&gt;</span>
<a href="#l6.26"></a><span id="l6.26"> </span>
<a href="#l6.27"></a><span id="l6.27"> &lt;!-- LOCALIZATION NOTE (featureConfigurator.collapsedHeaders.heading): The heading for the Compact Header page. --&gt;</span>
<a href="#l6.28"></a><span id="l6.28"> &lt;!ENTITY featureConfigurator.collapsedHeaders.heading &quot;Compact Header&quot;&gt;</span>
<a href="#l6.29"></a><span id="l6.29"> </span>
<a href="#l6.30"></a><span id="l6.30"> &lt;!-- LOCALIZATION NOTE (featureConfigurator.collapsedHeaders.para.weak): The paragraph to display if the user hadn't previously used the collapsed headers feature. --&gt;</span>
<a href="#l6.31"></a><span id="l6.31"> &lt;!ENTITY featureConfigurator.collapsedHeaders.para.weak &quot;The compact message reader view has been moved into its own extension where it is now getting much more attention and options.&quot;&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

