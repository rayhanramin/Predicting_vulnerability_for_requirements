<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 3683:264657d5fbe8e88bf503d478250bfa4790bc119f</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 264657d5fbe8e88bf503d478250bfa4790bc119f" />
<meta property="og:url" content="/comm-central/rev/264657d5fbe8e88bf503d478250bfa4790bc119f" />
<meta property="og:description" content="1) improvements to the css in the autocomplete dialog (and remove use of gravatars)" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 264657d5fbe8e88bf503d478250bfa4790bc119f 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/264657d5fbe8e88bf503d478250bfa4790bc119f">shortlog</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/264657d5fbe8e88bf503d478250bfa4790bc119f">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f">files</a> |
changeset |
<a href="/comm-central/raw-rev/264657d5fbe8e88bf503d478250bfa4790bc119f">raw</a>  | <a href="/comm-central/archive/264657d5fbe8e88bf503d478250bfa4790bc119f.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
1) improvements to the css in the autocomplete dialog (and remove use of gravatars)
<span class="logtags"><span class="inbranchtag" title="gloda-facet">gloda-facet</span> </span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#68;&#97;&#118;&#105;&#100;&#32;&#65;&#115;&#99;&#104;&#101;&#114;&#32;&#60;&#100;&#97;&#118;&#105;&#100;&#64;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#109;&#101;&#115;&#115;&#97;&#103;&#105;&#110;&#103;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 03 Sep 2009 14:25:35 -0700</td></tr>
<tr><td>branch</td><td>gloda-facet</td></tr>
<tr>
 <td>changeset 3683</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/264657d5fbe8e88bf503d478250bfa4790bc119f">264657d5fbe8e88bf503d478250bfa4790bc119f</a></td>
</tr>



<tr>
<td>parent 3682</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/af3e12560484c522e87120c80529b70fb4c1e778">af3e12560484c522e87120c80529b70fb4c1e778</a>
</td>
</tr>

<tr>
<td>child 3684</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/fc8136426e05b2cc90473388a13ad54ac66c3fcc">fc8136426e05b2cc90473388a13ad54ac66c3fcc</a>
</td>
</tr>
<tr>
<td>child 3688</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/0e73d775b190fe022397e33355e843dd2e90152c">0e73d775b190fe022397e33355e843dd2e90152c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=264657d5fbe8e88bf503d478250bfa4790bc119f">2927</a></td></tr>
<tr><td>push user</td><td>bugmail@asutherland.org</td></tr>
<tr><td>push date</td><td class="date age">Thu, 10 Sep 2009 01:15:56 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@0b161ed73eb6 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=0b161ed73eb66538ade852cb5a4b9b1b2c319a33">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=0b161ed73eb66538ade852cb5a4b9b1b2c319a33&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0b161ed73eb66538ade852cb5a4b9b1b2c319a33&newProject=comm-central&newRevision=b5e0aff84bf4077a47919481912ad0bd11c6a8d8&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0b161ed73eb66538ade852cb5a4b9b1b2c319a33&newProject=comm-central&newRevision=b5e0aff84bf4077a47919481912ad0bd11c6a8d8&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0b161ed73eb66538ade852cb5a4b9b1b2c319a33&newProject=comm-central&newRevision=b5e0aff84bf4077a47919481912ad0bd11c6a8d8&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1">1</a></td></tr>




</table></div>

<div class="page_body description">1) improvements to the css in the autocomplete dialog (and remove use of gravatars)
2) make message body darker, so it's more legible
3) still struggle with left sidebar if the results pane is too short, but this should be cleaner
4) fix the gSelectionSummaryString booboo i left in templateUtils.js, by adding it its own properties file.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetBindings.xml">mail/base/content/glodaFacetBindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetBindings.xml">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetBindings.xml">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetBindings.xml">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetBindings.xml">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetBindings.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.css">mail/base/content/glodaFacetView.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.css">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.css">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.css">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.css">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.xhtml">mail/base/content/glodaFacetView.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.xhtml">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.xhtml">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.xhtml">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.xhtml">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/glodaFacetView.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/selectionsummaries.js">mail/base/content/selectionsummaries.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/selectionsummaries.js">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/selectionsummaries.js">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/selectionsummaries.js">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/selectionsummaries.js">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/base/content/selectionsummaries.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/en-US/chrome/messenger/multimessageview.properties">mail/locales/en-US/chrome/messenger/multimessageview.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/en-US/chrome/messenger/multimessageview.properties">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/en-US/chrome/messenger/multimessageview.properties">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/en-US/chrome/messenger/multimessageview.properties">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/en-US/chrome/messenger/multimessageview.properties">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/en-US/chrome/messenger/multimessageview.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/jar.mn">mail/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mail/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/base/util/templateUtils.js">mailnews/base/util/templateUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/base/util/templateUtils.js">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/base/util/templateUtils.js">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/base/util/templateUtils.js">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/base/util/templateUtils.js">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/base/util/templateUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/components/glautocomp.js">mailnews/db/gloda/components/glautocomp.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/components/glautocomp.js">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/components/glautocomp.js">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/components/glautocomp.js">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/components/glautocomp.js">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/components/glautocomp.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.css">mailnews/db/gloda/content/glodacomplete.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.css">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.css">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.css">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.css">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.xml">mailnews/db/gloda/content/glodacomplete.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.xml">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.xml">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.xml">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.xml">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/content/glodacomplete.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/modules/datamodel.js">mailnews/db/gloda/modules/datamodel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/modules/datamodel.js">file</a> |
<a href="/comm-central/annotate/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/modules/datamodel.js">annotate</a> |
<a href="/comm-central/diff/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/modules/datamodel.js">diff</a> |
<a href="/comm-central/comparison/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/modules/datamodel.js">comparison</a> |
<a href="/comm-central/log/264657d5fbe8e88bf503d478250bfa4790bc119f/mailnews/db/gloda/modules/datamodel.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/glodaFacetBindings.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/glodaFacetBindings.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1092,24 +1092,27 @@</span>
<a href="#l1.4"></a><span id="l1.4">         }</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">         this.updateSortLabels(FacetContext.sortBy);</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8">         let messagesNode = document.getAnonymousElementByAttribute(</span>
<a href="#l1.9"></a><span id="l1.9">                              this, &quot;anonid&quot;, &quot;messages&quot;);</span>
<a href="#l1.10"></a><span id="l1.10">         while (messagesNode.lastChild)</span>
<a href="#l1.11"></a><span id="l1.11">           messagesNode.removeChild(messagesNode.lastChild);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      try {</span>
<a href="#l1.14"></a><span id="l1.14">         // -- Messages</span>
<a href="#l1.15"></a><span id="l1.15">         for each (let [, message] in Iterator(aMessages)) {</span>
<a href="#l1.16"></a><span id="l1.16">           let msgNode = document.createElement(&quot;message&quot;);</span>
<a href="#l1.17"></a><span id="l1.17">           msgNode.message = message;</span>
<a href="#l1.18"></a><span id="l1.18">           msgNode.setAttribute(&quot;class&quot;, &quot;message&quot;);</span>
<a href="#l1.19"></a><span id="l1.19">           messagesNode.appendChild(msgNode);</span>
<a href="#l1.20"></a><span id="l1.20">         }</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+      } catch (e) {</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+        logException(e);</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+      }</span>
<a href="#l1.24"></a><span id="l1.24">       ]]&gt;&lt;/body&gt;</span>
<a href="#l1.25"></a><span id="l1.25">     &lt;/method&gt;</span>
<a href="#l1.26"></a><span id="l1.26">     &lt;method name=&quot;updateSortLabels&quot;&gt;</span>
<a href="#l1.27"></a><span id="l1.27">       &lt;body&gt;&lt;![CDATA[</span>
<a href="#l1.28"></a><span id="l1.28">       try {</span>
<a href="#l1.29"></a><span id="l1.29">         let sortBy = FacetContext.sortBy;</span>
<a href="#l1.30"></a><span id="l1.30">         let sortRelevanceNode = document.getAnonymousElementByAttribute(</span>
<a href="#l1.31"></a><span id="l1.31">                           this, &quot;anonid&quot;, &quot;sort-relevance&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/glodaFacetView.css</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/glodaFacetView.css</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -32,36 +32,47 @@</span>
<a href="#l2.4"></a><span id="l2.4">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l2.5"></a><span id="l2.5">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l2.6"></a><span id="l2.6">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l2.7"></a><span id="l2.7">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l2.8"></a><span id="l2.8">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l2.9"></a><span id="l2.9">  *</span>
<a href="#l2.10"></a><span id="l2.10">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+html {</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  background:white;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+}</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+</span>
<a href="#l2.16"></a><span id="l2.16"> body {</span>
<a href="#l2.17"></a><span id="l2.17">   padding: 0;</span>
<a href="#l2.18"></a><span id="l2.18">   margin: 0;</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+  font-family: sans-serif;</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+  background: white;</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+}</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+#table {</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+  display: table;</span>
<a href="#l2.25"></a><span id="l2.25">   width: 100%;</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-  font-family: sans-serif;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+  height: 100%;</span>
<a href="#l2.28"></a><span id="l2.28">   position: relative;</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-  display: table;</span>
<a href="#l2.30"></a><span id="l2.30">   background: white;</span>
<a href="#l2.31"></a><span id="l2.31"> }</span>
<a href="#l2.32"></a><span id="l2.32"> </span>
<a href="#l2.33"></a><span id="l2.33"> .facets-sidebar {</span>
<a href="#l2.34"></a><span id="l2.34">   display: table-cell;</span>
<a href="#l2.35"></a><span id="l2.35">   width: 20em;</span>
<a href="#l2.36"></a><span id="l2.36">   background-color: #eeeeee;</span>
<a href="#l2.37"></a><span id="l2.37">   padding: 4px;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+  height: 100%;</span>
<a href="#l2.39"></a><span id="l2.39">   padding-left: 1em;</span>
<a href="#l2.40"></a><span id="l2.40">   font-size: 90%;</span>
<a href="#l2.41"></a><span id="l2.41"> }</span>
<a href="#l2.42"></a><span id="l2.42"> </span>
<a href="#l2.43"></a><span id="l2.43"> #main-column {</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+  padding-left: 1em;</span>
<a href="#l2.45"></a><span id="l2.45">   display: table-cell;</span>
<a href="#l2.46"></a><span id="l2.46"> }</span>
<a href="#l2.47"></a><span id="l2.47"> </span>
<a href="#l2.48"></a><span id="l2.48"> /* ===== Query Explanation ===== */</span>
<a href="#l2.49"></a><span id="l2.49"> </span>
<a href="#l2.50"></a><span id="l2.50"> #query-explanation {</span>
<a href="#l2.51"></a><span id="l2.51">   display: block;</span>
<a href="#l2.52"></a><span id="l2.52">   height: 40px;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineat">@@ -542,20 +553,20 @@ h3 {</span>
<a href="#l2.54"></a><span id="l2.54"> </span>
<a href="#l2.55"></a><span id="l2.55"> .message-subject {</span>
<a href="#l2.56"></a><span id="l2.56">   font-size: 115%;</span>
<a href="#l2.57"></a><span id="l2.57">   font-weight: bold;</span>
<a href="#l2.58"></a><span id="l2.58">   line-height: 1.2em;</span>
<a href="#l2.59"></a><span id="l2.59">   color: #555;</span>
<a href="#l2.60"></a><span id="l2.60"> }</span>
<a href="#l2.61"></a><span id="l2.61"> .message-body {</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-  color: #555;</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineplus">+  color: black;</span>
<a href="#l2.64"></a><span id="l2.64">   padding-left: 1em;</span>
<a href="#l2.65"></a><span id="l2.65">   font-family: monospace;</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-  font-size: 110%;</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+  font-size: 120%;</span>
<a href="#l2.68"></a><span id="l2.68">   white-space: pre-wrap;</span>
<a href="#l2.69"></a><span id="l2.69"> }</span>
<a href="#l2.70"></a><span id="l2.70"> </span>
<a href="#l2.71"></a><span id="l2.71"> .message-tag {</span>
<a href="#l2.72"></a><span id="l2.72">   display: inline-block; /* to avoid splitting 'To' and 'Do' e.g. */</span>
<a href="#l2.73"></a><span id="l2.73">   -moz-margin-start: 0px;</span>
<a href="#l2.74"></a><span id="l2.74">   background-image: url(&quot;chrome://messenger/skin/tagbg.png&quot;);</span>
<a href="#l2.75"></a><span id="l2.75">   color: black;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/glodaFacetView.xhtml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/glodaFacetView.xhtml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -32,30 +32,32 @@</span>
<a href="#l3.4"></a><span id="l3.4">       src=&quot;chrome://messenger/content/jquery.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l3.5"></a><span id="l3.5">   &lt;script type=&quot;application/javascript;version=1.8&quot;</span>
<a href="#l3.6"></a><span id="l3.6">       src=&quot;chrome://messenger/content/protovis-r2.6-modded.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l3.7"></a><span id="l3.7">   &lt;!-- Facet Binding Stuff that doesn't belong in XBL --&gt;</span>
<a href="#l3.8"></a><span id="l3.8">   &lt;script type=&quot;application/javascript;version=1.8&quot;</span>
<a href="#l3.9"></a><span id="l3.9">       src=&quot;chrome://messenger/content/glodaFacetVis.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;/head&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;body id=&quot;body&quot; onload=&quot;reachOutAndTouchFrame()&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  &lt;div class=&quot;facets facets-sidebar&quot; id=&quot;facets&quot;&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-    &lt;h1 id=&quot;filter-header-label&quot;&gt;&amp;glodaFacetView.filters.label;&lt;/h1&gt;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-    &lt;div&gt;</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-      &lt;div id=&quot;facet-fromMe&quot; class=&quot;facetious&quot; type=&quot;boolean&quot; attr=&quot;fromMe&quot;</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-           uninitialized=&quot;true&quot; /&gt;</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-      &lt;div id=&quot;facet-toMe&quot; class=&quot;facetious&quot; type=&quot;boolean&quot; attr=&quot;toMe&quot;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-           uninitialized=&quot;true&quot; /&gt;</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-      &lt;div id=&quot;facet-star&quot; class=&quot;facetious&quot; type=&quot;boolean&quot; attr=&quot;star&quot;</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-           uninitialized=&quot;true&quot;/&gt;&lt;br /&gt;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-      &lt;div id=&quot;facet-attachmentTypes&quot; class=&quot;facetious&quot; type=&quot;boolean-filtered&quot;</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-           attr=&quot;attachmentTypes&quot;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-           groupDisplayProperty=&quot;categoryLabel&quot;</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-           uninitialized=&quot;true&quot;/&gt;</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+  &lt;div id=&quot;table&quot;&gt;</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+    &lt;div class=&quot;facets facets-sidebar&quot; id=&quot;facets&quot;&gt;</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+      &lt;h1 id=&quot;filter-header-label&quot;&gt;&amp;glodaFacetView.filters.label;&lt;/h1&gt;</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+      &lt;div&gt;</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+        &lt;div id=&quot;facet-fromMe&quot; class=&quot;facetious&quot; type=&quot;boolean&quot; attr=&quot;fromMe&quot;</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+             uninitialized=&quot;true&quot; /&gt;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+        &lt;div id=&quot;facet-toMe&quot; class=&quot;facetious&quot; type=&quot;boolean&quot; attr=&quot;toMe&quot;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+             uninitialized=&quot;true&quot; /&gt;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+        &lt;div id=&quot;facet-star&quot; class=&quot;facetious&quot; type=&quot;boolean&quot; attr=&quot;star&quot;</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+             uninitialized=&quot;true&quot;/&gt;&lt;br /&gt;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+        &lt;div id=&quot;facet-attachmentTypes&quot; class=&quot;facetious&quot; type=&quot;boolean-filtered&quot;</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+             attr=&quot;attachmentTypes&quot;</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+             groupDisplayProperty=&quot;categoryLabel&quot;</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+             uninitialized=&quot;true&quot;/&gt;</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+      &lt;/div&gt;</span>
<a href="#l3.40"></a><span id="l3.40">     &lt;/div&gt;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-  &lt;/div&gt;</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-  &lt;div id=&quot;main-column&quot;&gt;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-    &lt;div id=&quot;query-explanation&quot;/&gt;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-    &lt;div id=&quot;facet-date&quot; class=&quot;facetious&quot; type=&quot;date&quot; /&gt;</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-    &lt;div class=&quot;results&quot; id=&quot;results&quot; type=&quot;message&quot; /&gt;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+    &lt;div id=&quot;main-column&quot;&gt;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+      &lt;div id=&quot;query-explanation&quot;/&gt;</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+      &lt;div id=&quot;facet-date&quot; class=&quot;facetious&quot; type=&quot;date&quot; /&gt;</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+      &lt;div class=&quot;results&quot; id=&quot;results&quot; type=&quot;message&quot; /&gt;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+    &lt;/div&gt;</span>
<a href="#l3.51"></a><span id="l3.51">   &lt;/div&gt;</span>
<a href="#l3.52"></a><span id="l3.52"> &lt;/body&gt;</span>
<a href="#l3.53"></a><span id="l3.53"> &lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/selectionsummaries.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/selectionsummaries.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -43,17 +43,16 @@ Components.utils.import(&quot;resource://app/</span>
<a href="#l4.4"></a><span id="l4.4"> Components.utils.import(&quot;resource://app/modules/gloda/connotent.js&quot;);</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6"> let gSelectionSummaryStrings = {</span>
<a href="#l4.7"></a><span id="l4.7">   NConversations: &quot;NConversations&quot;,</span>
<a href="#l4.8"></a><span id="l4.8">   numMsgs: &quot;numMsgs&quot;,</span>
<a href="#l4.9"></a><span id="l4.9">   countUnread: &quot;countUnread&quot;,</span>
<a href="#l4.10"></a><span id="l4.10">   Nmessages: &quot;Nmessages&quot;,</span>
<a href="#l4.11"></a><span id="l4.11">   messagesSize: &quot;messagesSize&quot;,</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  yesterday: &quot;yesterday&quot;,</span>
<a href="#l4.13"></a><span id="l4.13">   noticeText: &quot;noticeText&quot;,</span>
<a href="#l4.14"></a><span id="l4.14">   noSubject: &quot;noSubject&quot;,</span>
<a href="#l4.15"></a><span id="l4.15"> }</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17"> /**</span>
<a href="#l4.18"></a><span id="l4.18">  * loadSelectionSummaryStrings does the routine localization of non-pluralized</span>
<a href="#l4.19"></a><span id="l4.19">  * strings, populating the gSelectionSummaryStrings array based on the current</span>
<a href="#l4.20"></a><span id="l4.20">  * locale.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/multimessageview.properties</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/multimessageview.properties</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -7,10 +7,9 @@ NConversations=#1 conversation; #1 conve</span>
<a href="#l5.4"></a><span id="l5.4"> numMsgs=#1 message;#1 messages</span>
<a href="#l5.5"></a><span id="l5.5"> countUnread=, #1 unread;, #1 unread</span>
<a href="#l5.6"></a><span id="l5.6"> Nmessages=(#1 message);(#1 messages)</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8"> noSubject=(no subject)</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10"> # thread and multiple message selection summaries</span>
<a href="#l5.11"></a><span id="l5.11"> messagesSize=These messages take up: #1 #2.</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-yesterday=yesterday</span>
<a href="#l5.13"></a><span id="l5.13"> noticeText= (Note: #1 messages are selected, the first #2 are shown)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/locales/jar.mn</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/locales/jar.mn</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -92,16 +92,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">   locale/@AB_CD@/messenger/comm4xMailImportMsgs.properties              (%chrome/messenger/comm4xMailImportMsgs.properties)</span>
<a href="#l6.5"></a><span id="l6.5">   locale/@AB_CD@/messenger/eudoraImportMsgs.properties                  (%chrome/messenger/eudoraImportMsgs.properties)</span>
<a href="#l6.6"></a><span id="l6.6">   locale/@AB_CD@/messenger/oeImportMsgs.properties                      (%chrome/messenger/oeImportMsgs.properties)</span>
<a href="#l6.7"></a><span id="l6.7">   locale/@AB_CD@/messenger/outlookImportMsgs.properties                 (%chrome/messenger/outlookImportMsgs.properties)</span>
<a href="#l6.8"></a><span id="l6.8">   locale/@AB_CD@/messenger/shutdownWindow.properties                    (%chrome/messenger/shutdownWindow.properties)</span>
<a href="#l6.9"></a><span id="l6.9">   locale/@AB_CD@/messenger/configEditorOverlay.dtd                      (%chrome/messenger/configEditorOverlay.dtd)</span>
<a href="#l6.10"></a><span id="l6.10">   locale/@AB_CD@/messenger/quickSearch.properties                       (%chrome/messenger/quickSearch.properties)</span>
<a href="#l6.11"></a><span id="l6.11">   locale/@AB_CD@/messenger/gloda.properties                             (%chrome/messenger/gloda.properties)</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+  locale/@AB_CD@/messenger/templateUtils.properties                     (%chrome/messenger/templateUtils.properties)</span>
<a href="#l6.13"></a><span id="l6.13">   locale/@AB_CD@/messenger/glodaFacetView.properties                    (%chrome/messenger/glodaFacetView.properties)</span>
<a href="#l6.14"></a><span id="l6.14">   locale/@AB_CD@/messenger/glodaFacetView.dtd                           (%chrome/messenger/glodaFacetView.dtd)</span>
<a href="#l6.15"></a><span id="l6.15">   locale/@AB_CD@/messenger/addressbook/abMainWindow.dtd                 (%chrome/messenger/addressbook/abMainWindow.dtd)</span>
<a href="#l6.16"></a><span id="l6.16">   locale/@AB_CD@/messenger/addressbook/abNewCardDialog.dtd              (%chrome/messenger/addressbook/abNewCardDialog.dtd)</span>
<a href="#l6.17"></a><span id="l6.17">   locale/@AB_CD@/messenger/addressbook/abContactsPanel.dtd              (%chrome/messenger/addressbook/abContactsPanel.dtd)</span>
<a href="#l6.18"></a><span id="l6.18">   locale/@AB_CD@/messenger/addressbook/abAddressBookNameDialog.dtd      (%chrome/messenger/addressbook/abAddressBookNameDialog.dtd)</span>
<a href="#l6.19"></a><span id="l6.19">   locale/@AB_CD@/messenger/addressbook/abCardOverlay.dtd                (%chrome/messenger/addressbook/abCardOverlay.dtd)</span>
<a href="#l6.20"></a><span id="l6.20">   locale/@AB_CD@/messenger/addressbook/abCardViewOverlay.dtd            (%chrome/messenger/addressbook/abCardViewOverlay.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/base/util/templateUtils.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/base/util/templateUtils.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -36,16 +36,21 @@</span>
<a href="#l7.4"></a><span id="l7.4"> </span>
<a href="#l7.5"></a><span id="l7.5"> let EXPORTED_SYMBOLS = [&quot;makeFriendlyDateAgo&quot;, &quot;replaceInsert&quot;];</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> const Cc = Components.classes;</span>
<a href="#l7.8"></a><span id="l7.8"> const Ci = Components.interfaces;</span>
<a href="#l7.9"></a><span id="l7.9"> const Cr = Components.results;</span>
<a href="#l7.10"></a><span id="l7.10"> const Cu = Components.utils;</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+Cu.import(&quot;resource://app/modules/StringBundle.js&quot;);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+const gTemplateUtilsStrings =</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+  new StringBundle(&quot;chrome://messenger/locale/templateUtils.properties&quot;);</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+</span>
<a href="#l7.17"></a><span id="l7.17"> /**</span>
<a href="#l7.18"></a><span id="l7.18">  * Helper function to generate a localized &quot;friendly&quot; representation of</span>
<a href="#l7.19"></a><span id="l7.19">  * time relative to the present.  If the time input is &quot;today&quot;, it returns</span>
<a href="#l7.20"></a><span id="l7.20">  * a string corresponding to just the time.  If it's yesterday, it returns</span>
<a href="#l7.21"></a><span id="l7.21">  * &quot;yesterday&quot; (localized).  If it's in the last week, it returns the day</span>
<a href="#l7.22"></a><span id="l7.22">  * of the week. If it's before that, it returns the date.</span>
<a href="#l7.23"></a><span id="l7.23">  *</span>
<a href="#l7.24"></a><span id="l7.24">  * @param time</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineat">@@ -72,17 +77,17 @@ function makeFriendlyDateAgo(time)</span>
<a href="#l7.26"></a><span id="l7.26">   let kDayInMsecs = 24 * 60 * 60 * 1000;</span>
<a href="#l7.27"></a><span id="l7.27">   let k6DaysInMsecs = 6 * kDayInMsecs;</span>
<a href="#l7.28"></a><span id="l7.28">   if (end &gt;= today) {</span>
<a href="#l7.29"></a><span id="l7.29">     // activity finished after today started, show the time</span>
<a href="#l7.30"></a><span id="l7.30">     dateTime = dts.FormatTime(&quot;&quot;, dts.timeFormatNoSeconds,</span>
<a href="#l7.31"></a><span id="l7.31">                                   end.getHours(), end.getMinutes(),0);</span>
<a href="#l7.32"></a><span id="l7.32">   } else if (today - end &lt; kDayInMsecs) {</span>
<a href="#l7.33"></a><span id="l7.33">     // activity finished after yesterday started, show yesterday</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-    dateTime = gSelectionSummaryStrings.yesterday;</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+    dateTime = gTemplateUtilsStrings.get('yesterday');</span>
<a href="#l7.36"></a><span id="l7.36">   } else if (today - end &lt; k6DaysInMsecs) {</span>
<a href="#l7.37"></a><span id="l7.37">     // activity finished after last week started, show day of week</span>
<a href="#l7.38"></a><span id="l7.38">     dateTime = end.toLocaleFormat(&quot;%A&quot;);</span>
<a href="#l7.39"></a><span id="l7.39">   } else if (now.getFullYear() == end.getFullYear()) {</span>
<a href="#l7.40"></a><span id="l7.40">     // activity must have been from some time ago.. show month/day</span>
<a href="#l7.41"></a><span id="l7.41">     let month = end.toLocaleFormat(&quot;%B&quot;);</span>
<a href="#l7.42"></a><span id="l7.42">     // Remove leading 0 by converting the date string to a number</span>
<a href="#l7.43"></a><span id="l7.43">     let date = Number(end.toLocaleFormat(&quot;%d&quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/db/gloda/components/glautocomp.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/db/gloda/components/glautocomp.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -168,16 +168,18 @@ nsAutoCompleteGlodaResult.prototype = {</span>
<a href="#l8.4"></a><span id="l8.4">     return row.typeForStyle;</span>
<a href="#l8.5"></a><span id="l8.5">   },</span>
<a href="#l8.6"></a><span id="l8.6">   // rich uses this to be the icon</span>
<a href="#l8.7"></a><span id="l8.7">   getImageAt: function(aIndex) {</span>
<a href="#l8.8"></a><span id="l8.8">     let thing = this._results[aIndex];</span>
<a href="#l8.9"></a><span id="l8.9">     if (!thing.value)</span>
<a href="#l8.10"></a><span id="l8.10">       return null;</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+    return &quot;&quot;; // we don't want to use gravatars as is.</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+</span>
<a href="#l8.14"></a><span id="l8.14">     let md5hash = GlodaUtils.md5HashString(thing.value);</span>
<a href="#l8.15"></a><span id="l8.15">     let gravURL = &quot;http://www.gravatar.com/avatar/&quot; + md5hash +</span>
<a href="#l8.16"></a><span id="l8.16">                                 &quot;?d=identicon&amp;s=32&amp;r=g&quot;;</span>
<a href="#l8.17"></a><span id="l8.17">     return gravURL;</span>
<a href="#l8.18"></a><span id="l8.18">   },</span>
<a href="#l8.19"></a><span id="l8.19">   removeValueAt: function() {},</span>
<a href="#l8.20"></a><span id="l8.20"> </span>
<a href="#l8.21"></a><span id="l8.21">   _stop: function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/db/gloda/content/glodacomplete.css</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/db/gloda/content/glodacomplete.css</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -12,23 +12,46 @@ panel[type=&quot;glodacomplete-richlistbox&quot;] </span>
<a href="#l9.4"></a><span id="l9.4">   -moz-user-focus: ignore;</span>
<a href="#l9.5"></a><span id="l9.5">   -moz-appearance: none;</span>
<a href="#l9.6"></a><span id="l9.6"> }</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> .autocomplete-richlistbox &gt; scrollbox {</span>
<a href="#l9.9"></a><span id="l9.9">   overflow-x: hidden !important;</span>
<a href="#l9.10"></a><span id="l9.10"> }</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+.explanation, .gloda-single-identity {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  margin-left: 1em;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+  margin-bottom: 2px;</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+}</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+.ac-comment {</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+  font-size: 1.1em;</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+}</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+.ac-url-text {</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+  color: -moz-nativehyperlinktext;</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+  font-size: 0.95em;</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+}</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+.ac-url-text[selected=&quot;true&quot;] {</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+  color: inherit !important;</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+}</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+.gloda-single-identity[selected=&quot;true&quot;] .ac-url{</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  color: white;</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+}</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+</span>
<a href="#l9.35"></a><span id="l9.35"> .parameters {</span>
<a href="#l9.36"></a><span id="l9.36">   font-style: italic;</span>
<a href="#l9.37"></a><span id="l9.37">   margin-left: 1em;</span>
<a href="#l9.38"></a><span id="l9.38"> }</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+</span>
<a href="#l9.40"></a><span id="l9.40"> .picture {</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-  margin: 1ex;</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-  margin-right: 1em;</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+  /*margin-right: 1em;*/</span>
<a href="#l9.44"></a><span id="l9.44"> }</span>
<a href="#l9.45"></a><span id="l9.45"> </span>
<a href="#l9.46"></a><span id="l9.46"> .autocomplete-richlistitem[type=&quot;gloda-single-tag&quot;] {</span>
<a href="#l9.47"></a><span id="l9.47">   -moz-binding: url(&quot;chrome://gloda/content/glodacomplete.xml#gloda-single-tag-item&quot;);</span>
<a href="#l9.48"></a><span id="l9.48">   overflow: -moz-hidden-unscrollable;</span>
<a href="#l9.49"></a><span id="l9.49"> }</span>
<a href="#l9.50"></a><span id="l9.50"> </span>
<a href="#l9.51"></a><span id="l9.51"> .autocomplete-richlistitem[type=&quot;gloda-single-identity&quot;] {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -333,17 +333,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">         &lt;/body&gt;</span>
<a href="#l10.5"></a><span id="l10.5">       &lt;/method&gt;</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7">     &lt;/implementation&gt;</span>
<a href="#l10.8"></a><span id="l10.8">   &lt;/binding&gt;</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">   &lt;binding id=&quot;gloda-single-tag-item&quot; extends=&quot;chrome://gloda/content/glodacomplete.xml#glodacomplete-base-richlistitem&quot;&gt;</span>
<a href="#l10.11"></a><span id="l10.11">     &lt;content orient=&quot;vertical&quot;&gt;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      &lt;xul:description anonid=&quot;explanation&quot;/&gt;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+      &lt;xul:description anonid=&quot;explanation&quot; class=&quot;explanation gloda-single&quot;/&gt;</span>
<a href="#l10.14"></a><span id="l10.14">     &lt;/content&gt;</span>
<a href="#l10.15"></a><span id="l10.15">     &lt;implementation implements=&quot;nsIDOMXULSelectControlItemElement&quot;&gt;</span>
<a href="#l10.16"></a><span id="l10.16">       &lt;constructor&gt;</span>
<a href="#l10.17"></a><span id="l10.17">         &lt;![CDATA[</span>
<a href="#l10.18"></a><span id="l10.18">             this._explanation = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;explanation&quot;);</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">             this._adjustAcItem();</span>
<a href="#l10.21"></a><span id="l10.21">           ]]&gt;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -365,17 +365,17 @@</span>
<a href="#l10.23"></a><span id="l10.23">         &lt;/body&gt;</span>
<a href="#l10.24"></a><span id="l10.24">       &lt;/method&gt;</span>
<a href="#l10.25"></a><span id="l10.25">     &lt;/implementation&gt;</span>
<a href="#l10.26"></a><span id="l10.26">   &lt;/binding&gt;</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28"> </span>
<a href="#l10.29"></a><span id="l10.29">   &lt;binding id=&quot;gloda-fulltext-single-item&quot; extends=&quot;chrome://gloda/content/glodacomplete.xml#glodacomplete-base-richlistitem&quot;&gt;</span>
<a href="#l10.30"></a><span id="l10.30">     &lt;content orient=&quot;vertical&quot;&gt;</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-      &lt;xul:description anonid=&quot;explanation&quot;/&gt;</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+      &lt;xul:description anonid=&quot;explanation&quot; class=&quot;explanation gloda-fulltext-single&quot;/&gt;</span>
<a href="#l10.33"></a><span id="l10.33">       &lt;xul:description anonid=&quot;parameters&quot;/&gt;</span>
<a href="#l10.34"></a><span id="l10.34">     &lt;/content&gt;</span>
<a href="#l10.35"></a><span id="l10.35">     &lt;implementation implements=&quot;nsIDOMXULSelectControlItemElement&quot;&gt;</span>
<a href="#l10.36"></a><span id="l10.36">       &lt;constructor&gt;</span>
<a href="#l10.37"></a><span id="l10.37">         &lt;![CDATA[</span>
<a href="#l10.38"></a><span id="l10.38">             this._explanation = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;explanation&quot;);</span>
<a href="#l10.39"></a><span id="l10.39"> </span>
<a href="#l10.40"></a><span id="l10.40">             this._adjustAcItem();</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -403,17 +403,17 @@</span>
<a href="#l10.42"></a><span id="l10.42">       &lt;/method&gt;</span>
<a href="#l10.43"></a><span id="l10.43">     &lt;/implementation&gt;</span>
<a href="#l10.44"></a><span id="l10.44">   &lt;/binding&gt;</span>
<a href="#l10.45"></a><span id="l10.45"> </span>
<a href="#l10.46"></a><span id="l10.46"> </span>
<a href="#l10.47"></a><span id="l10.47"> </span>
<a href="#l10.48"></a><span id="l10.48">   &lt;binding id=&quot;gloda-fulltext-any-item&quot; extends=&quot;chrome://gloda/content/glodacomplete.xml#glodacomplete-base-richlistitem&quot;&gt;</span>
<a href="#l10.49"></a><span id="l10.49">     &lt;content orient=&quot;vertical&quot;&gt;</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-      &lt;xul:description anonid=&quot;explanation&quot;/&gt;</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+      &lt;xul:description anonid=&quot;explanation&quot; class=&quot;explanation&quot;/&gt;</span>
<a href="#l10.52"></a><span id="l10.52">       &lt;xul:description anonid=&quot;parameters&quot; class=&quot;parameters&quot;/&gt;</span>
<a href="#l10.53"></a><span id="l10.53">     &lt;/content&gt;</span>
<a href="#l10.54"></a><span id="l10.54">     &lt;implementation implements=&quot;nsIDOMXULSelectControlItemElement&quot;&gt;</span>
<a href="#l10.55"></a><span id="l10.55">       &lt;constructor&gt;</span>
<a href="#l10.56"></a><span id="l10.56">         &lt;![CDATA[</span>
<a href="#l10.57"></a><span id="l10.57">             this._explanation = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;explanation&quot;);</span>
<a href="#l10.58"></a><span id="l10.58">             this._parameters = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;parameters&quot;);</span>
<a href="#l10.59"></a><span id="l10.59"> </span>
<a href="#l10.60"></a><span id="l10.60" class="difflineat">@@ -437,17 +437,17 @@</span>
<a href="#l10.61"></a><span id="l10.61">           ]]&gt;</span>
<a href="#l10.62"></a><span id="l10.62">         &lt;/body&gt;</span>
<a href="#l10.63"></a><span id="l10.63">       &lt;/method&gt;</span>
<a href="#l10.64"></a><span id="l10.64">     &lt;/implementation&gt;</span>
<a href="#l10.65"></a><span id="l10.65">   &lt;/binding&gt;</span>
<a href="#l10.66"></a><span id="l10.66"> </span>
<a href="#l10.67"></a><span id="l10.67">   &lt;binding id=&quot;gloda-fulltext-all-item&quot; extends=&quot;chrome://gloda/content/glodacomplete.xml#glodacomplete-base-richlistitem&quot;&gt;</span>
<a href="#l10.68"></a><span id="l10.68">     &lt;content orient=&quot;vertical&quot;&gt;</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">-      &lt;xul:description anonid=&quot;explanation&quot;/&gt;</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+      &lt;xul:description anonid=&quot;explanation&quot; class=&quot;explanation&quot;/&gt;</span>
<a href="#l10.71"></a><span id="l10.71">       &lt;xul:description anonid=&quot;parameters&quot; class=&quot;parameters&quot;/&gt;</span>
<a href="#l10.72"></a><span id="l10.72">     &lt;/content&gt;</span>
<a href="#l10.73"></a><span id="l10.73">     &lt;implementation implements=&quot;nsIDOMXULSelectControlItemElement&quot;&gt;</span>
<a href="#l10.74"></a><span id="l10.74">       &lt;constructor&gt;</span>
<a href="#l10.75"></a><span id="l10.75">         &lt;![CDATA[</span>
<a href="#l10.76"></a><span id="l10.76">             this._explanation = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;explanation&quot;);</span>
<a href="#l10.77"></a><span id="l10.77">             this._parameters = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;parameters&quot;);</span>
<a href="#l10.78"></a><span id="l10.78"> </span>
<a href="#l10.79"></a><span id="l10.79" class="difflineat">@@ -471,40 +471,40 @@</span>
<a href="#l10.80"></a><span id="l10.80">           ]]&gt;</span>
<a href="#l10.81"></a><span id="l10.81">         &lt;/body&gt;</span>
<a href="#l10.82"></a><span id="l10.82">       &lt;/method&gt;</span>
<a href="#l10.83"></a><span id="l10.83">     &lt;/implementation&gt;</span>
<a href="#l10.84"></a><span id="l10.84">   &lt;/binding&gt;</span>
<a href="#l10.85"></a><span id="l10.85"> </span>
<a href="#l10.86"></a><span id="l10.86">   &lt;binding id=&quot;gloda-single-identity-item&quot; extends=&quot;chrome://gloda/content/glodacomplete.xml#glodacomplete-base-richlistitem&quot;&gt;</span>
<a href="#l10.87"></a><span id="l10.87">     &lt;content&gt;</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineminus">-      &lt;xul:hbox&gt;</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineminus">-	    &lt;xul:image anonid=&quot;picture&quot; class=&quot;picture&quot;/&gt;</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineminus">-	    &lt;xul:vbox&gt;</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineminus">-	      &lt;xul:hbox&gt;</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineminus">-	        &lt;xul:hbox anonid=&quot;name-box&quot; class=&quot;ac-title&quot; flex=&quot;1&quot;</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineminus">-	                  onunderflow=&quot;_doUnderflow('_name');&quot;&gt;</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineminus">-	          &lt;xul:description anonid=&quot;name&quot; class=&quot;ac-normal-text ac-comment&quot;</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineminus">-	                           xbl:inherits=&quot;selected&quot;/&gt;</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineminus">-	        &lt;/xul:hbox&gt;</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineminus">-	        &lt;xul:label anonid=&quot;name-overflow-ellipsis&quot; xbl:inherits=&quot;selected&quot;</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineminus">-	                   class=&quot;ac-ellipsis-after ac-comment&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineminus">-	      &lt;/xul:hbox&gt;</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineminus">-	      &lt;xul:hbox&gt;</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineminus">-	        &lt;xul:hbox anonid=&quot;identity-box&quot; class=&quot;ac-url&quot; flex=&quot;1&quot;</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineminus">-	                  onunderflow=&quot;_doUnderflow('_identity');&quot;&gt;</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineminus">-	          &lt;xul:description anonid=&quot;identity&quot; class=&quot;ac-normal-text ac-url-text&quot;</span>
<a href="#l10.104"></a><span id="l10.104" class="difflineminus">-	                           xbl:inherits=&quot;selected&quot;/&gt;</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineminus">-	        &lt;/xul:hbox&gt;</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineminus">-	        &lt;xul:label anonid=&quot;identity-overflow-ellipsis&quot; xbl:inherits=&quot;selected&quot;</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineminus">-	                   class=&quot;ac-ellipsis-after ac-url-text&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineminus">-	        &lt;xul:image anonid=&quot;type-image&quot; class=&quot;ac-type-icon&quot;/&gt;</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineminus">-	      &lt;/xul:hbox&gt;</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineminus">-	    &lt;/xul:vbox&gt;</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineminus">-	  &lt;/xul:hbox&gt;</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineplus">+      &lt;xul:hbox class=&quot;gloda-single-identity&quot;&gt;</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineplus">+        &lt;xul:image anonid=&quot;picture&quot; class=&quot;picture&quot;/&gt;</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineplus">+        &lt;xul:vbox&gt;</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineplus">+          &lt;xul:hbox&gt;</span>
<a href="#l10.116"></a><span id="l10.116" class="difflineplus">+            &lt;xul:hbox anonid=&quot;name-box&quot; class=&quot;ac-title&quot; flex=&quot;1&quot;</span>
<a href="#l10.117"></a><span id="l10.117" class="difflineplus">+                      onunderflow=&quot;_doUnderflow('_name');&quot;&gt;</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineplus">+              &lt;xul:description anonid=&quot;name&quot; class=&quot;ac-normal-text ac-comment&quot;</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineplus">+                               xbl:inherits=&quot;selected&quot;/&gt;</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineplus">+            &lt;/xul:hbox&gt;</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineplus">+            &lt;xul:label anonid=&quot;name-overflow-ellipsis&quot; xbl:inherits=&quot;selected&quot;</span>
<a href="#l10.122"></a><span id="l10.122" class="difflineplus">+                       class=&quot;ac-ellipsis-after ac-comment&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineplus">+          &lt;/xul:hbox&gt;</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineplus">+          &lt;xul:hbox&gt;</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineplus">+            &lt;xul:hbox anonid=&quot;identity-box&quot; class=&quot;ac-url&quot; flex=&quot;1&quot;</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineplus">+                      onunderflow=&quot;_doUnderflow('_identity');&quot;&gt;</span>
<a href="#l10.127"></a><span id="l10.127" class="difflineplus">+              &lt;xul:description anonid=&quot;identity&quot; class=&quot;ac-normal-text ac-url-text&quot;</span>
<a href="#l10.128"></a><span id="l10.128" class="difflineplus">+                               xbl:inherits=&quot;selected&quot;/&gt;</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineplus">+            &lt;/xul:hbox&gt;</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineplus">+            &lt;xul:label anonid=&quot;identity-overflow-ellipsis&quot; xbl:inherits=&quot;selected&quot;</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineplus">+                       class=&quot;ac-ellipsis-after ac-url-text&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineplus">+            &lt;xul:image anonid=&quot;type-image&quot; class=&quot;ac-type-icon&quot;/&gt;</span>
<a href="#l10.133"></a><span id="l10.133" class="difflineplus">+          &lt;/xul:hbox&gt;</span>
<a href="#l10.134"></a><span id="l10.134" class="difflineplus">+        &lt;/xul:vbox&gt;</span>
<a href="#l10.135"></a><span id="l10.135" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l10.136"></a><span id="l10.136">     &lt;/content&gt;</span>
<a href="#l10.137"></a><span id="l10.137">     &lt;implementation implements=&quot;nsIDOMXULSelectControlItemElement&quot;&gt;</span>
<a href="#l10.138"></a><span id="l10.138">       &lt;constructor&gt;</span>
<a href="#l10.139"></a><span id="l10.139">         &lt;![CDATA[</span>
<a href="#l10.140"></a><span id="l10.140">             let ellipsis = &quot;\u2026&quot;;</span>
<a href="#l10.141"></a><span id="l10.141">             try {</span>
<a href="#l10.142"></a><span id="l10.142">               ellipsis = Components.classes[&quot;@mozilla.org/preferences-service;1&quot;].</span>
<a href="#l10.143"></a><span id="l10.143">                 getService(Components.interfaces.nsIPrefBranch).</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/db/gloda/modules/datamodel.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/datamodel.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -671,14 +671,14 @@ GlodaIdentity.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">    */</span>
<a href="#l11.5"></a><span id="l11.5">   get inAddressBook() {</span>
<a href="#l11.6"></a><span id="l11.6">     if (this._hasAddressBookCard)</span>
<a href="#l11.7"></a><span id="l11.7">       return true;</span>
<a href="#l11.8"></a><span id="l11.8">     return this.abCard &amp;&amp; true;</span>
<a href="#l11.9"></a><span id="l11.9">   },</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">   pictureURL: function(aSize) {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    let md5hash = GlodaUtils.md5HashString(this._value);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-    let gravURL = &quot;http://www.gravatar.com/avatar/&quot; + md5hash +</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-                                &quot;?d=identicon&amp;s=&quot; + aSize + &quot;&amp;r=g&quot;;</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-    return gravURL;</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+    if (this.inAddressBook) {</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+      // XXX should get the photo if we have it.</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+    }</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l11.20"></a><span id="l11.20">   }</span>
<a href="#l11.21"></a><span id="l11.21"> };</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

