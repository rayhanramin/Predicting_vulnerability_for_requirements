<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27303:dd2b0261882efa38526aa58778fb7d166bf41fe0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ dd2b0261882efa38526aa58778fb7d166bf41fe0" />
<meta property="og:url" content="/comm-central/rev/dd2b0261882efa38526aa58778fb7d166bf41fe0" />
<meta property="og:description" content="Bug 1572379 - adjust invitation related toolbarbuttons to make default actions work again. r=Fallen" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / dd2b0261882efa38526aa58778fb7d166bf41fe0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/dd2b0261882efa38526aa58778fb7d166bf41fe0">shortlog</a> |
<a href="/comm-central/log/dd2b0261882efa38526aa58778fb7d166bf41fe0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/dd2b0261882efa38526aa58778fb7d166bf41fe0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/dd2b0261882efa38526aa58778fb7d166bf41fe0">files</a> |
changeset |
<a href="/comm-central/raw-rev/dd2b0261882efa38526aa58778fb7d166bf41fe0">raw</a>  | <a href="/comm-central/archive/dd2b0261882efa38526aa58778fb7d166bf41fe0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1572379">Bug 1572379</a> - adjust invitation related toolbarbuttons to make default actions work again. r=Fallen
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#103;&#110;&#117;&#115;&#32;&#77;&#101;&#108;&#105;&#110;&#32;&#60;&#109;&#107;&#109;&#101;&#108;&#105;&#110;&#43;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#105;&#107;&#105;&#46;&#102;&#105;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 12 Aug 2019 09:59:24 +0200</td></tr>

<tr>
 <td>changeset 27303</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/dd2b0261882efa38526aa58778fb7d166bf41fe0">dd2b0261882efa38526aa58778fb7d166bf41fe0</a></td>
</tr>



<tr>
<td>parent 27302</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/67b687a5aad61528a86c439d950662aa5881e0c8">67b687a5aad61528a86c439d950662aa5881e0c8</a>
</td>
</tr>

<tr>
<td>child 27304</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ef868ddafb000927531dfb9458dca2a0d0eaa9bc">ef868ddafb000927531dfb9458dca2a0d0eaa9bc</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=dd2b0261882efa38526aa58778fb7d166bf41fe0">16273</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 12 Aug 2019 08:40:35 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@ef868ddafb00 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ef868ddafb000927531dfb9458dca2a0d0eaa9bc">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ef868ddafb000927531dfb9458dca2a0d0eaa9bc&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ef868ddafb000927531dfb9458dca2a0d0eaa9bc&newProject=comm-central&newRevision=79d57af23f2e15da1f52a75bae78d373e31cdfef&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ef868ddafb000927531dfb9458dca2a0d0eaa9bc&newProject=comm-central&newRevision=79d57af23f2e15da1f52a75bae78d373e31cdfef&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ef868ddafb000927531dfb9458dca2a0d0eaa9bc&newProject=comm-central&newRevision=79d57af23f2e15da1f52a75bae78d373e31cdfef&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Fallen%29&revcount=50">Fallen</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1572379">1572379</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1547233">1547233</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1572379">Bug 1572379</a> - adjust invitation related toolbarbuttons to make default actions work again. r=Fallen

Adjustment needed due to event target being different in custom element vs xbl.

<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1547233">Bug 1547233</a> converted the toolbarbutton-menu-button binding to a Custom Element. Due to this
the event target is now the toolbarbuttons no longer anonymous child element.

There is no id to match on now, and therefore event propagation needs to be taken care of not to get child+parent event executions.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.js">calendar/base/content/dialogs/calendar-summary-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.js">file</a> |
<a href="/comm-central/annotate/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.js">annotate</a> |
<a href="/comm-central/diff/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.js">diff</a> |
<a href="/comm-central/comparison/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.js">comparison</a> |
<a href="/comm-central/log/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.xul">calendar/base/content/dialogs/calendar-summary-dialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.xul">file</a> |
<a href="/comm-central/annotate/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.xul">annotate</a> |
<a href="/comm-central/diff/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.xul">diff</a> |
<a href="/comm-central/comparison/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.xul">comparison</a> |
<a href="/comm-central/log/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/base/content/dialogs/calendar-summary-dialog.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/lightning/content/imip-bar-overlay.xul">calendar/lightning/content/imip-bar-overlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/lightning/content/imip-bar-overlay.xul">file</a> |
<a href="/comm-central/annotate/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/lightning/content/imip-bar-overlay.xul">annotate</a> |
<a href="/comm-central/diff/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/lightning/content/imip-bar-overlay.xul">diff</a> |
<a href="/comm-central/comparison/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/lightning/content/imip-bar-overlay.xul">comparison</a> |
<a href="/comm-central/log/dd2b0261882efa38526aa58778fb7d166bf41fe0/calendar/lightning/content/imip-bar-overlay.xul">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-summary-dialog.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-summary-dialog.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -298,49 +298,50 @@ document.addEventListener(&quot;dialogaccept&quot;</span>
<a href="#l1.4"></a><span id="l1.4"> /**</span>
<a href="#l1.5"></a><span id="l1.5">  * Called when closing the dialog and any changes should be thrown away.</span>
<a href="#l1.6"></a><span id="l1.6">  */</span>
<a href="#l1.7"></a><span id="l1.7"> document.addEventListener(&quot;dialogcancel&quot;, () =&gt; {</span>
<a href="#l1.8"></a><span id="l1.8">     dispose();</span>
<a href="#l1.9"></a><span id="l1.9"> });</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> /**</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">- * Updates the user's partstat, sends a notification if requested and closes the</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">- * dialog</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+ * Updates the user's participation status (PARTSTAT from see RFC5545), and</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+ * send a notification if requested. Then close the dialog.</span>
<a href="#l1.16"></a><span id="l1.16">  *</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">- * @param {string}  aResponse  a literal of one of the response modes defined</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">- *                               in calIItipItem (like 'NONE')</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">- * @param {string}  aPartStat  (optional) a partstat as per RfC5545</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+ * @param {string} aResponseMode - a literal of one of the response modes defined</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+ *                                 in calIItipItem (like 'NONE')</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+ * @param {string} aPartStat - participation status; a PARTSTAT value</span>
<a href="#l1.23"></a><span id="l1.23">  */</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-function reply(aResponse, aPartStat=null) {</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-    if (aPartStat &amp;&amp; window.attendee) {</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+function reply(aResponseMode, aPartStat) {</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+    // Set participation status.</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+    if (window.attendee) {</span>
<a href="#l1.29"></a><span id="l1.29">         let aclEntry = window.calendarItem.calendar.aclEntry;</span>
<a href="#l1.30"></a><span id="l1.30">         if (aclEntry) {</span>
<a href="#l1.31"></a><span id="l1.31">             let userAddresses = aclEntry.getUserAddresses({});</span>
<a href="#l1.32"></a><span id="l1.32">             if (userAddresses.length &gt; 0 &amp;&amp;</span>
<a href="#l1.33"></a><span id="l1.33">                 !cal.email.attendeeMatchesAddresses(window.attendee, userAddresses)) {</span>
<a href="#l1.34"></a><span id="l1.34">                 window.attendee.setProperty(&quot;SENT-BY&quot;, &quot;mailto:&quot; + userAddresses[0]);</span>
<a href="#l1.35"></a><span id="l1.35">             }</span>
<a href="#l1.36"></a><span id="l1.36">         }</span>
<a href="#l1.37"></a><span id="l1.37">         window.attendee.participationStatus = aPartStat;</span>
<a href="#l1.38"></a><span id="l1.38">         updateToolbar();</span>
<a href="#l1.39"></a><span id="l1.39">     }</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-    saveAndClose(aResponse);</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineplus">+</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+    // Send notification and close window.</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+    saveAndClose(aResponseMode);</span>
<a href="#l1.44"></a><span id="l1.44"> }</span>
<a href="#l1.45"></a><span id="l1.45"> </span>
<a href="#l1.46"></a><span id="l1.46"> /**</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">- * Stores the event in the calendar and closes the dialog</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">- *</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">- * @param {string}  aResponse  a literal of one of the response modes defined</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">- *                               in calIItipItem (like 'NONE')</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+ * Stores the event in the calendar, sends a notification if requested and</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+ * closes the dialog.</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+ * @param {string} aResponseMode - a literal of one of the response modes defined</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+ *                                 in calIItipItem (like 'NONE')</span>
<a href="#l1.55"></a><span id="l1.55">  */</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-function saveAndClose(aResponse=&quot;NONE&quot;) {</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineminus">-    // we use NONE as default since we don't want to send out notifications if</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineminus">-    // the user just updates the reminder settings</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-    window.responseMode = aResponse;</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineplus">+function saveAndClose(aResponseMode) {</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+    window.responseMode = aResponseMode;</span>
<a href="#l1.62"></a><span id="l1.62">     document.documentElement.acceptDialog();</span>
<a href="#l1.63"></a><span id="l1.63"> }</span>
<a href="#l1.64"></a><span id="l1.64"> </span>
<a href="#l1.65"></a><span id="l1.65"> function updateToolbar() {</span>
<a href="#l1.66"></a><span id="l1.66">     if (window.readOnly) {</span>
<a href="#l1.67"></a><span id="l1.67">         document.getElementById(&quot;summary-toolbar&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l1.68"></a><span id="l1.68">         return;</span>
<a href="#l1.69"></a><span id="l1.69">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-summary-dialog.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-summary-dialog.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -59,70 +59,67 @@</span>
<a href="#l2.4"></a><span id="l2.4">              toolboxid=&quot;summary-toolbox&quot;</span>
<a href="#l2.5"></a><span id="l2.5">              class=&quot;chromeclass-toolbar&quot;</span>
<a href="#l2.6"></a><span id="l2.6">              customizable=&quot;false&quot;</span>
<a href="#l2.7"></a><span id="l2.7">              labelalign=&quot;end&quot;</span>
<a href="#l2.8"></a><span id="l2.8">              defaultlabelalign=&quot;end&quot;&gt;</span>
<a href="#l2.9"></a><span id="l2.9">       &lt;toolbarbutton id=&quot;saveandcloseButton&quot;</span>
<a href="#l2.10"></a><span id="l2.10">                      tooltiptext=&quot;&amp;summary.dialog.saveclose.tooltiptext;&quot;</span>
<a href="#l2.11"></a><span id="l2.11">                      label=&quot;&amp;summary.dialog.saveclose.label;&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                     oncommand=&quot;saveAndClose();&quot;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                     oncommand=&quot;saveAndClose('NONE');&quot;</span>
<a href="#l2.14"></a><span id="l2.14">                      class=&quot;cal-event-toolbarbutton toolbarbutton-1 saveandcloseButton&quot;/&gt;</span>
<a href="#l2.15"></a><span id="l2.15">       &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;acceptButton&quot;</span>
<a href="#l2.16"></a><span id="l2.16">                      type=&quot;menu-button&quot;</span>
<a href="#l2.17"></a><span id="l2.17">                      tooltiptext=&quot;&amp;summary.dialog.accept.tooltiptext;&quot;</span>
<a href="#l2.18"></a><span id="l2.18">                      label=&quot;&amp;summary.dialog.accept.label;&quot;</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-                     oncommand=&quot;if (event.target.id == this.id) { reply('AUTO', 'ACCEPTED'); }&quot;</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-                     value=&quot;ACCEPTED&quot;</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+                     oncommand=&quot;reply('AUTO', 'ACCEPTED');&quot;</span>
<a href="#l2.22"></a><span id="l2.22">                      class=&quot;cal-event-toolbarbutton toolbarbutton-1 replyButton&quot;&gt;</span>
<a href="#l2.23"></a><span id="l2.23">         &lt;menupopup id=&quot;acceptDropdown&quot;&gt;</span>
<a href="#l2.24"></a><span id="l2.24">           &lt;menuitem id=&quot;acceptButton_Send&quot;</span>
<a href="#l2.25"></a><span id="l2.25">                     tooltiptext=&quot;&amp;summary.dialog.send.tooltiptext;&quot;</span>
<a href="#l2.26"></a><span id="l2.26">                     label=&quot;&amp;summary.dialog.send.label;&quot;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-                    oncommand=&quot;reply('AUTO', 'ACCEPTED');&quot;/&gt;</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+                    oncommand=&quot;reply('AUTO', 'ACCEPTED'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l2.29"></a><span id="l2.29">           &lt;menuitem id=&quot;acceptButton_DontSend&quot;</span>
<a href="#l2.30"></a><span id="l2.30">                     tooltiptext=&quot;&amp;summary.dialog.dontsend.tooltiptext;&quot;</span>
<a href="#l2.31"></a><span id="l2.31">                     label=&quot;&amp;summary.dialog.dontsend.label;&quot;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-                    oncommand=&quot;reply('NONE', 'ACCEPTED');&quot;/&gt;</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+                    oncommand=&quot;reply('NONE', 'ACCEPTED'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l2.34"></a><span id="l2.34">         &lt;/menupopup&gt;</span>
<a href="#l2.35"></a><span id="l2.35">       &lt;/toolbarbutton&gt;</span>
<a href="#l2.36"></a><span id="l2.36">       &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;tentativeButton&quot;</span>
<a href="#l2.37"></a><span id="l2.37">                      type=&quot;menu-button&quot;</span>
<a href="#l2.38"></a><span id="l2.38">                      tooltiptext=&quot;&amp;summary.dialog.tentative.tooltiptext;&quot;</span>
<a href="#l2.39"></a><span id="l2.39">                      label=&quot;&amp;summary.dialog.tentative.label;&quot;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-                     oncommand=&quot;if (event.target.id == this.id) { reply('AUTO', 'TENTATIVE'); }&quot;</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-                     value=&quot;TENTATIVE&quot;</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+                     oncommand=&quot;reply('AUTO', 'TENTATIVE');&quot;</span>
<a href="#l2.43"></a><span id="l2.43">                      class=&quot;cal-event-toolbarbutton toolbarbutton-1 replyButton&quot;&gt;</span>
<a href="#l2.44"></a><span id="l2.44">         &lt;menupopup id=&quot;tentativeDropdown&quot;&gt;</span>
<a href="#l2.45"></a><span id="l2.45">           &lt;menuitem id=&quot;tenatativeButton_Send&quot;</span>
<a href="#l2.46"></a><span id="l2.46">                     tooltiptext=&quot;&amp;summary.dialog.send.tooltiptext;&quot;</span>
<a href="#l2.47"></a><span id="l2.47">                     label=&quot;&amp;summary.dialog.send.label;&quot;</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-                    oncommand=&quot;reply('AUTO', 'TENTATIVE');&quot;/&gt;</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+                    oncommand=&quot;reply('AUTO', 'TENTATIVE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l2.50"></a><span id="l2.50">           &lt;menuitem id=&quot;tenativeButton_DontSend&quot;</span>
<a href="#l2.51"></a><span id="l2.51">                     tooltiptext=&quot;&amp;summary.dialog.dontsend.tooltiptext;&quot;</span>
<a href="#l2.52"></a><span id="l2.52">                     label=&quot;&amp;summary.dialog.dontsend.label;&quot;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-                    oncommand=&quot;reply('NONE', 'TENTATIVE');&quot;/&gt;</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+                    oncommand=&quot;reply('NONE', 'TENTATIVE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l2.55"></a><span id="l2.55">         &lt;/menupopup&gt;</span>
<a href="#l2.56"></a><span id="l2.56">       &lt;/toolbarbutton&gt;</span>
<a href="#l2.57"></a><span id="l2.57">       &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;declineButton&quot;</span>
<a href="#l2.58"></a><span id="l2.58">                      type=&quot;menu-button&quot;</span>
<a href="#l2.59"></a><span id="l2.59">                      tooltiptext=&quot;&amp;summary.dialog.decline.tooltiptext;&quot;</span>
<a href="#l2.60"></a><span id="l2.60">                      label=&quot;&amp;summary.dialog.decline.label;&quot;</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-                     oncommand=&quot;if (event.target.id == this.id) { reply('AUTO', 'DECLINED'); }&quot;</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-                     value=&quot;DECLINED&quot;</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineplus">+                     oncommand=&quot;reply('AUTO', 'DECLINED');&quot;</span>
<a href="#l2.64"></a><span id="l2.64">                      class=&quot;cal-event-toolbarbutton toolbarbutton-1 replyButton&quot;&gt;</span>
<a href="#l2.65"></a><span id="l2.65">         &lt;menupopup id=&quot;declineDropdown&quot;&gt;</span>
<a href="#l2.66"></a><span id="l2.66">           &lt;menuitem id=&quot;declineButton_Send&quot;</span>
<a href="#l2.67"></a><span id="l2.67">                     tooltiptext=&quot;&amp;summary.dialog.send.tooltiptext;&quot;</span>
<a href="#l2.68"></a><span id="l2.68">                     label=&quot;&amp;summary.dialog.send.label;&quot;</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-                    oncommand=&quot;reply('AUTO', 'DECLINED');&quot;/&gt;</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+                    oncommand=&quot;reply('AUTO', 'DECLINED'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l2.71"></a><span id="l2.71">           &lt;menuitem id=&quot;declineButton_DontSend&quot;</span>
<a href="#l2.72"></a><span id="l2.72">                     tooltiptext=&quot;&amp;summary.dialog.dontsend.tooltiptext;&quot;</span>
<a href="#l2.73"></a><span id="l2.73">                     label=&quot;&amp;summary.dialog.dontsend.label;&quot;</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineminus">-                    oncommand=&quot;reply('NONE', 'DECLINED');&quot;/&gt;</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineplus">+                    oncommand=&quot;reply('NONE', 'DECLINED'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l2.76"></a><span id="l2.76">         &lt;/menupopup&gt;</span>
<a href="#l2.77"></a><span id="l2.77">       &lt;/toolbarbutton&gt;</span>
<a href="#l2.78"></a><span id="l2.78">     &lt;/toolbar&gt;</span>
<a href="#l2.79"></a><span id="l2.79">   &lt;/toolbox&gt;</span>
<a href="#l2.80"></a><span id="l2.80"> </span>
<a href="#l2.81"></a><span id="l2.81">   &lt;hbox id=&quot;status-notifications&quot;&gt;</span>
<a href="#l2.82"></a><span id="l2.82">     &lt;!-- notificationbox will be added here lazily. --&gt;</span>
<a href="#l2.83"></a><span id="l2.83">   &lt;/hbox&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/lightning/content/imip-bar-overlay.xul</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/lightning/content/imip-bar-overlay.xul</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -45,26 +45,19 @@</span>
<a href="#l3.4"></a><span id="l3.4">              -    * must be hidden by default</span>
<a href="#l3.5"></a><span id="l3.5">              -    * menuitem inside must not be hidden by default</span>
<a href="#l3.6"></a><span id="l3.6">              - simple button:</span>
<a href="#l3.7"></a><span id="l3.7">              -    * must not have a type attribute</span>
<a href="#l3.8"></a><span id="l3.8">              -    * may have menupopup/menuitem within (not displayed though)</span>
<a href="#l3.9"></a><span id="l3.9">              - dropdown only:</span>
<a href="#l3.10"></a><span id="l3.10">              -    * must have type=menu</span>
<a href="#l3.11"></a><span id="l3.11">              -    * should have a menupopup with at least one menuitem</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-             - smart-dropdown:</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+             - smart-dropdown (toolbarbutton-menu-button)</span>
<a href="#l3.14"></a><span id="l3.14">              -    * must have type=menu-button</span>
<a href="#l3.15"></a><span id="l3.15">              -    * should have a menupopup with at least one menuitem</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-             -    * bubbling up of events from menuitems to toolbarbutton must be prevented</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-             -      by adding a trailing &quot;if (event.target.id == this.id) &quot; to the respective</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-             -      ltnImipBar.executeAction(...)</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-             -    * toolbarbutton's oncommand should end with the first menuitem's oncommand</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-             -      to not break automated conforming</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-             -      e.g. &quot;if (event.target.id == this.id) ltnImipBar.executeAction('ACCEPTED');&quot;</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-             -      and &quot;ltnImipBar.executeAction('ACCEPTED');&quot;</span>
<a href="#l3.23"></a><span id="l3.23">              //--&gt;</span>
<a href="#l3.24"></a><span id="l3.24">           &lt;vbox id=&quot;imip-view-toolbox&quot; class=&quot;inline-toolbox&quot;&gt;</span>
<a href="#l3.25"></a><span id="l3.25">             &lt;hbox id=&quot;imip-view-toolbar&quot;&gt;</span>
<a href="#l3.26"></a><span id="l3.26"> </span>
<a href="#l3.27"></a><span id="l3.27">               &lt;!-- show event/invitation details --&gt;</span>
<a href="#l3.28"></a><span id="l3.28">               &lt;toolbarbutton id=&quot;imipDetailsButton&quot;</span>
<a href="#l3.29"></a><span id="l3.29">                              label=&quot;&amp;lightning.imipbar.btnDetails.label;&quot;</span>
<a href="#l3.30"></a><span id="l3.30">                              tooltiptext=&quot;&amp;lightning.imipbar.btnDetails.tooltiptext;&quot;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineat">@@ -119,186 +112,186 @@</span>
<a href="#l3.32"></a><span id="l3.32">                              class=&quot;toolbarbutton-1 msgHeaderView-button imipReconfirmButton&quot;</span>
<a href="#l3.33"></a><span id="l3.33">                              oncommand=&quot;ltnImipBar.executeAction()&quot;</span>
<a href="#l3.34"></a><span id="l3.34">                              hidden=&quot;true&quot;/&gt;</span>
<a href="#l3.35"></a><span id="l3.35"> </span>
<a href="#l3.36"></a><span id="l3.36">               &lt;!-- accept --&gt;</span>
<a href="#l3.37"></a><span id="l3.37">               &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;imipAcceptButton&quot;</span>
<a href="#l3.38"></a><span id="l3.38">                              tooltiptext=&quot;&amp;lightning.imipbar.btnAccept2.tooltiptext;&quot;</span>
<a href="#l3.39"></a><span id="l3.39">                              label=&quot;&amp;lightning.imipbar.btnAccept.label;&quot;</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-                             oncommand=&quot;if (event.target.id == this.id) { ltnImipBar.executeAction('ACCEPTED', 'AUTO'); }&quot;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+                             oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'AUTO');&quot;</span>
<a href="#l3.42"></a><span id="l3.42">                              type=&quot;menu-button&quot;</span>
<a href="#l3.43"></a><span id="l3.43">                              class=&quot;imip-button toolbarbutton-1 msgHeaderView-button imipAcceptButton&quot;</span>
<a href="#l3.44"></a><span id="l3.44">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.45"></a><span id="l3.45">                 &lt;menupopup id=&quot;imipAcceptDropdown&quot;&gt;</span>
<a href="#l3.46"></a><span id="l3.46">                   &lt;label id=&quot;imipAcceptButton_AcceptLabel&quot;</span>
<a href="#l3.47"></a><span id="l3.47">                          class=&quot;imipAcceptLabel&quot;</span>
<a href="#l3.48"></a><span id="l3.48">                          tooltiptext=&quot;&amp;lightning.imipbar.btnAccept2.tooltiptext;&quot;</span>
<a href="#l3.49"></a><span id="l3.49">                          value=&quot;&amp;lightning.imipbar.btnAccept.label;&quot;/&gt;</span>
<a href="#l3.50"></a><span id="l3.50">                   &lt;menuitem id=&quot;imipAcceptButton_Accept&quot;</span>
<a href="#l3.51"></a><span id="l3.51">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSend.tooltiptext;&quot;</span>
<a href="#l3.52"></a><span id="l3.52">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'AUTO');&quot;/&gt;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.55"></a><span id="l3.55">                   &lt;menuitem id=&quot;imipAcceptButton_AcceptDontSend&quot;</span>
<a href="#l3.56"></a><span id="l3.56">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSend.tooltiptext;&quot;</span>
<a href="#l3.57"></a><span id="l3.57">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'NONE');&quot;/&gt;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.60"></a><span id="l3.60">                   &lt;separatpor flex=&quot;1&quot; class=&quot;groove&quot;/&gt;</span>
<a href="#l3.61"></a><span id="l3.61">                   &lt;label id=&quot;imipAcceptButton_TentativeLabel&quot;</span>
<a href="#l3.62"></a><span id="l3.62">                          class=&quot;imipAcceptLabel&quot;</span>
<a href="#l3.63"></a><span id="l3.63">                          tooltiptext=&quot;&amp;lightning.imipbar.btnTentative2.tooltiptext;&quot;</span>
<a href="#l3.64"></a><span id="l3.64">                          value=&quot;&amp;lightning.imipbar.btnTentative.label;&quot;/&gt;</span>
<a href="#l3.65"></a><span id="l3.65">                   &lt;menuitem id=&quot;imipAcceptButton_Tentative&quot;</span>
<a href="#l3.66"></a><span id="l3.66">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSend.tooltiptext;&quot;</span>
<a href="#l3.67"></a><span id="l3.67">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO');&quot;/&gt;</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.70"></a><span id="l3.70">                   &lt;menuitem id=&quot;imipAcceptButton_TentativeDontSend&quot;</span>
<a href="#l3.71"></a><span id="l3.71">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSend.tooltiptext;&quot;</span>
<a href="#l3.72"></a><span id="l3.72">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE');&quot;/&gt;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.75"></a><span id="l3.75">                   &lt;!-- add here more menuitem as needed --&gt;</span>
<a href="#l3.76"></a><span id="l3.76">                 &lt;/menupopup&gt;</span>
<a href="#l3.77"></a><span id="l3.77">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.78"></a><span id="l3.78"> </span>
<a href="#l3.79"></a><span id="l3.79">               &lt;!-- accept recurrences --&gt;</span>
<a href="#l3.80"></a><span id="l3.80">               &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;imipAcceptRecurrencesButton&quot;</span>
<a href="#l3.81"></a><span id="l3.81">                              tooltiptext=&quot;&amp;lightning.imipbar.btnAcceptRecurrences2.tooltiptext;&quot;</span>
<a href="#l3.82"></a><span id="l3.82">                              label=&quot;&amp;lightning.imipbar.btnAcceptRecurrences.label;&quot;</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-                             oncommand=&quot;if (event.target.id == this.id) { ltnImipBar.executeAction('ACCEPTED', 'AUTO'); }&quot;</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+                             oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'AUTO');&quot;</span>
<a href="#l3.85"></a><span id="l3.85">                              type=&quot;menu-button&quot;</span>
<a href="#l3.86"></a><span id="l3.86">                              class=&quot;imip-button toolbarbutton-1 msgHeaderView-button imipAcceptRecurrencesButton&quot;</span>
<a href="#l3.87"></a><span id="l3.87">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.88"></a><span id="l3.88">                 &lt;menupopup id=&quot;imipAcceptRecurrencesDropdown&quot;&gt;</span>
<a href="#l3.89"></a><span id="l3.89">                   &lt;label id=&quot;imipAcceptRecurrencesButton_AcceptLabel&quot;</span>
<a href="#l3.90"></a><span id="l3.90">                          class=&quot;imipAcceptLabel&quot;</span>
<a href="#l3.91"></a><span id="l3.91">                          tooltiptext=&quot;&amp;lightning.imipbar.btnAcceptRecurrences2.tooltiptext;&quot;</span>
<a href="#l3.92"></a><span id="l3.92">                          value=&quot;&amp;lightning.imipbar.btnAcceptRecurrences.label;&quot;/&gt;</span>
<a href="#l3.93"></a><span id="l3.93">                   &lt;menuitem id=&quot;imipAcceptRecurrencesButton_Accept&quot;</span>
<a href="#l3.94"></a><span id="l3.94">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSendSeries.tooltiptext;&quot;</span>
<a href="#l3.95"></a><span id="l3.95">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'AUTO');&quot;/&gt;</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.98"></a><span id="l3.98">                   &lt;menuitem id=&quot;imipAcceptRecurrencesButton_AcceptDontSend&quot;</span>
<a href="#l3.99"></a><span id="l3.99">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSendSeries.tooltiptext;&quot;</span>
<a href="#l3.100"></a><span id="l3.100">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'NONE');&quot;/&gt;</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('ACCEPTED', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.103"></a><span id="l3.103">                   &lt;separatpor flex=&quot;1&quot; class=&quot;groove&quot;/&gt;</span>
<a href="#l3.104"></a><span id="l3.104">                   &lt;label id=&quot;imipAcceptRecurrencesButton_TentativeLabel&quot;</span>
<a href="#l3.105"></a><span id="l3.105">                          class=&quot;imipAcceptLabel&quot;</span>
<a href="#l3.106"></a><span id="l3.106">                          tooltiptext=&quot;&amp;lightning.imipbar.btnTentativeRecurrences2.tooltiptext;&quot;</span>
<a href="#l3.107"></a><span id="l3.107">                          value=&quot;&amp;lightning.imipbar.btnTentativeRecurrences.label;&quot;/&gt;</span>
<a href="#l3.108"></a><span id="l3.108">                   &lt;menuitem id=&quot;imipAcceptRecurrencesButton_Tentative&quot;</span>
<a href="#l3.109"></a><span id="l3.109">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSendSeries.tooltiptext;&quot;</span>
<a href="#l3.110"></a><span id="l3.110">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO');&quot;/&gt;</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.113"></a><span id="l3.113">                   &lt;menuitem id=&quot;imipAcceptRecurrencesButton_TentativeDontSend&quot;</span>
<a href="#l3.114"></a><span id="l3.114">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSendSeries.tooltiptext;&quot;</span>
<a href="#l3.115"></a><span id="l3.115">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE');&quot;/&gt;</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.118"></a><span id="l3.118">                   &lt;!-- add here more menuitem as needed --&gt;</span>
<a href="#l3.119"></a><span id="l3.119">                 &lt;/menupopup&gt;</span>
<a href="#l3.120"></a><span id="l3.120">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.121"></a><span id="l3.121"> </span>
<a href="#l3.122"></a><span id="l3.122">               &lt;!-- tentative; should only be used, if no imipMoreButton is used and</span>
<a href="#l3.123"></a><span id="l3.123">                  - imipDeclineButton/imipAcceptButton have no visible menuitems //--&gt;</span>
<a href="#l3.124"></a><span id="l3.124">               &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;imipTentativeButton&quot;</span>
<a href="#l3.125"></a><span id="l3.125">                              label=&quot;&amp;lightning.imipbar.btnTentative.label;&quot;</span>
<a href="#l3.126"></a><span id="l3.126">                              tooltiptext=&quot;&amp;lightning.imipbar.btnTentative2.tooltiptext;&quot;</span>
<a href="#l3.127"></a><span id="l3.127">                              class=&quot;toolbarbutton-1 msgHeaderView-button imipTentativeButton&quot;</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-                             oncommand=&quot;if (event.target.id == this.id) { ltnImipBar.executeAction('TENTATIVE', 'AUTO'); }&quot;</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineplus">+                             oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO');&quot;</span>
<a href="#l3.130"></a><span id="l3.130">                              type=&quot;menu-button&quot;</span>
<a href="#l3.131"></a><span id="l3.131">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.132"></a><span id="l3.132">                 &lt;menupopup id=&quot;imipTentativeDropdown&quot;&gt;</span>
<a href="#l3.133"></a><span id="l3.133">                   &lt;menuitem id=&quot;imipTentativeButton_Tentative&quot;</span>
<a href="#l3.134"></a><span id="l3.134">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSend.tooltiptext;&quot;</span>
<a href="#l3.135"></a><span id="l3.135">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO');&quot;/&gt;</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.138"></a><span id="l3.138">                   &lt;menuitem id=&quot;imipTentativeButton_TentativeDontSend&quot;</span>
<a href="#l3.139"></a><span id="l3.139">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSend.tooltiptext;&quot;</span>
<a href="#l3.140"></a><span id="l3.140">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE');&quot;/&gt;</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.143"></a><span id="l3.143">                   &lt;!-- add here more menuitem as needed --&gt;</span>
<a href="#l3.144"></a><span id="l3.144">                 &lt;/menupopup&gt;</span>
<a href="#l3.145"></a><span id="l3.145">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.146"></a><span id="l3.146"> </span>
<a href="#l3.147"></a><span id="l3.147">               &lt;!-- tentative recurrences; should only be used, if no imipMoreButton is used and</span>
<a href="#l3.148"></a><span id="l3.148">                  - imipDeclineRecurrencesButton/imipAcceptRecurrencesButton have no visible menuitems //--&gt;</span>
<a href="#l3.149"></a><span id="l3.149">               &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;imipTentativeRecurrencesButton&quot;</span>
<a href="#l3.150"></a><span id="l3.150">                              label=&quot;&amp;lightning.imipbar.btnTentativeRecurrences.label;&quot;</span>
<a href="#l3.151"></a><span id="l3.151">                              tooltiptext=&quot;&amp;lightning.imipbar.btnTentativeRecurrences2.tooltiptext;&quot;</span>
<a href="#l3.152"></a><span id="l3.152">                              class=&quot;toolbarbutton-1 msgHeaderView-button imipTentativeRecurrencesButton&quot;</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineminus">-                             oncommand=&quot;if (event.target.id == this.id) { ltnImipBar.executeAction('TENTATIVE', 'AUTO'); }&quot;</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineplus">+                             oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO');&quot;</span>
<a href="#l3.155"></a><span id="l3.155">                              type=&quot;menu-button&quot;</span>
<a href="#l3.156"></a><span id="l3.156">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.157"></a><span id="l3.157">                 &lt;menupopup id=&quot;imipTentativeRecurrencesDropdown&quot;&gt;</span>
<a href="#l3.158"></a><span id="l3.158">                   &lt;menuitem id=&quot;imipTentativeRecurrencesButton_Tentative&quot;</span>
<a href="#l3.159"></a><span id="l3.159">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSendSeries.tooltiptext;&quot;</span>
<a href="#l3.160"></a><span id="l3.160">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO');&quot;/&gt;</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.163"></a><span id="l3.163">                   &lt;menuitem id=&quot;imipTentativeRecurrencesButton_TentativeDontSend&quot;</span>
<a href="#l3.164"></a><span id="l3.164">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSendSeries.tooltiptext;&quot;</span>
<a href="#l3.165"></a><span id="l3.165">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE');&quot;/&gt;</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('TENTATIVE', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.168"></a><span id="l3.168">                   &lt;!-- add here more menuitem as needed --&gt;</span>
<a href="#l3.169"></a><span id="l3.169">                 &lt;/menupopup&gt;</span>
<a href="#l3.170"></a><span id="l3.170">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.171"></a><span id="l3.171"> </span>
<a href="#l3.172"></a><span id="l3.172">               &lt;!-- decline --&gt;</span>
<a href="#l3.173"></a><span id="l3.173">               &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;imipDeclineButton&quot;</span>
<a href="#l3.174"></a><span id="l3.174">                              tooltiptext=&quot;&amp;lightning.imipbar.btnDecline2.tooltiptext;&quot;</span>
<a href="#l3.175"></a><span id="l3.175">                              label=&quot;&amp;lightning.imipbar.btnDecline.label;&quot;</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineminus">-                             oncommand=&quot;if (event.target.id == this.id) { ltnImipBar.executeAction('DECLINED', 'AUTO'); }&quot;</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineplus">+                             oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'AUTO');&quot;</span>
<a href="#l3.178"></a><span id="l3.178">                              type=&quot;menu-button&quot;</span>
<a href="#l3.179"></a><span id="l3.179">                              class=&quot;toolbarbutton-1 msgHeaderView-button imipDeclineButton&quot;</span>
<a href="#l3.180"></a><span id="l3.180">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.181"></a><span id="l3.181">                 &lt;menupopup id=&quot;imipDeclineDropdown&quot;&gt;</span>
<a href="#l3.182"></a><span id="l3.182">                   &lt;menuitem id=&quot;imipDeclineButton_Decline&quot;</span>
<a href="#l3.183"></a><span id="l3.183">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSend.tooltiptext;&quot;</span>
<a href="#l3.184"></a><span id="l3.184">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'AUTO');&quot;/&gt;</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'AUTO'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.187"></a><span id="l3.187">                   &lt;menuitem id=&quot;imipDeclineButton_DeclineDontSend&quot;</span>
<a href="#l3.188"></a><span id="l3.188">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSend.tooltiptext;&quot;</span>
<a href="#l3.189"></a><span id="l3.189">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'NONE');&quot;/&gt;</span>
<a href="#l3.191"></a><span id="l3.191" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.192"></a><span id="l3.192">                   &lt;!-- add here more menuitem as needed --&gt;</span>
<a href="#l3.193"></a><span id="l3.193">                 &lt;/menupopup&gt;</span>
<a href="#l3.194"></a><span id="l3.194">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.195"></a><span id="l3.195"> </span>
<a href="#l3.196"></a><span id="l3.196">               &lt;!-- decline recurrences --&gt;</span>
<a href="#l3.197"></a><span id="l3.197">               &lt;toolbarbutton is=&quot;toolbarbutton-menu-button&quot; id=&quot;imipDeclineRecurrencesButton&quot;</span>
<a href="#l3.198"></a><span id="l3.198">                              tooltiptext=&quot;&amp;lightning.imipbar.btnDeclineRecurrences2.tooltiptext;&quot;</span>
<a href="#l3.199"></a><span id="l3.199">                              label=&quot;&amp;lightning.imipbar.btnDeclineRecurrences.label;&quot;</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineminus">-                             oncommand=&quot;if (event.target.id == this.id) { ltnImipBar.executeAction('DECLINED'); }&quot;</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineplus">+                             oncommand=&quot;ltnImipBar.executeAction('DECLINED');&quot;</span>
<a href="#l3.202"></a><span id="l3.202">                              type=&quot;menu-button&quot;</span>
<a href="#l3.203"></a><span id="l3.203">                              class=&quot;toolbarbutton-1 msgHeaderView-button imipDeclineRecurrencesButton&quot;</span>
<a href="#l3.204"></a><span id="l3.204">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.205"></a><span id="l3.205">                 &lt;menupopup id=&quot;imipDeclineRecurrencesDropdown&quot;&gt;</span>
<a href="#l3.206"></a><span id="l3.206">                   &lt;menuitem id=&quot;imipDeclineRecurrencesButton_DeclineAll&quot;</span>
<a href="#l3.207"></a><span id="l3.207">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSendSeries.tooltiptext;&quot;</span>
<a href="#l3.208"></a><span id="l3.208">                             label=&quot;&amp;lightning.imipbar.btnSend.label;&quot;</span>
<a href="#l3.209"></a><span id="l3.209" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('DECLINED');&quot;/&gt;</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('DECLINED'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.211"></a><span id="l3.211">                   &lt;menuitem id=&quot;imipDeclineRecurrencesButton_DeclineAllDontSend&quot;</span>
<a href="#l3.212"></a><span id="l3.212">                             tooltiptext=&quot;&amp;lightning.imipbar.btnDontSendSeries.tooltiptext;&quot;</span>
<a href="#l3.213"></a><span id="l3.213">                             label=&quot;&amp;lightning.imipbar.btnDontSend.label;&quot;</span>
<a href="#l3.214"></a><span id="l3.214" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'NONE');&quot;/&gt;</span>
<a href="#l3.215"></a><span id="l3.215" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('DECLINED', 'NONE'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.216"></a><span id="l3.216">                   &lt;!-- add here more menuitem as needed --&gt;</span>
<a href="#l3.217"></a><span id="l3.217">                 &lt;/menupopup&gt;</span>
<a href="#l3.218"></a><span id="l3.218">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.219"></a><span id="l3.219"> </span>
<a href="#l3.220"></a><span id="l3.220">               &lt;!-- more options --&gt;</span>
<a href="#l3.221"></a><span id="l3.221">               &lt;toolbarbutton id=&quot;imipMoreButton&quot;</span>
<a href="#l3.222"></a><span id="l3.222">                              type=&quot;menu&quot;</span>
<a href="#l3.223"></a><span id="l3.223">                              tooltiptext=&quot;&amp;lightning.imipbar.btnMore.tooltiptext;&quot;</span>
<a href="#l3.224"></a><span id="l3.224">                              label=&quot;&amp;lightning.imipbar.btnMore.label;&quot;</span>
<a href="#l3.225"></a><span id="l3.225">                              class=&quot;toolbarbutton-1 msgHeaderView-button imipMoreButton&quot;</span>
<a href="#l3.226"></a><span id="l3.226">                              hidden=&quot;true&quot;&gt;</span>
<a href="#l3.227"></a><span id="l3.227">                 &lt;menupopup id=&quot;imipMoreDropdown&quot;&gt;</span>
<a href="#l3.228"></a><span id="l3.228">                   &lt;menuitem id=&quot;imipMoreButton_SaveCopy&quot;</span>
<a href="#l3.229"></a><span id="l3.229">                             tooltiptext=&quot;&amp;lightning.imipbar.btnSaveCopy.tooltiptext;&quot;</span>
<a href="#l3.230"></a><span id="l3.230">                             label=&quot;&amp;lightning.imipbar.btnSaveCopy.label;&quot;</span>
<a href="#l3.231"></a><span id="l3.231" class="difflineminus">-                            oncommand=&quot;ltnImipBar.executeAction('X-SAVECOPY');&quot;/&gt;</span>
<a href="#l3.232"></a><span id="l3.232" class="difflineplus">+                            oncommand=&quot;ltnImipBar.executeAction('X-SAVECOPY'); event.stopPropagation();&quot;/&gt;</span>
<a href="#l3.233"></a><span id="l3.233">                   &lt;!-- add here a menuitem as needed --&gt;</span>
<a href="#l3.234"></a><span id="l3.234">                 &lt;/menupopup&gt;</span>
<a href="#l3.235"></a><span id="l3.235">               &lt;/toolbarbutton&gt;</span>
<a href="#l3.236"></a><span id="l3.236">             &lt;/hbox&gt;</span>
<a href="#l3.237"></a><span id="l3.237">           &lt;/vbox&gt;</span>
<a href="#l3.238"></a><span id="l3.238">         &lt;/hbox&gt;</span>
<a href="#l3.239"></a><span id="l3.239">       &lt;/vbox&gt;</span>
<a href="#l3.240"></a><span id="l3.240">     &lt;/vbox&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

