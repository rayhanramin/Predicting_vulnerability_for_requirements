<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 8923:0999ba0a3515ae02daa5715247d86ae7d189030c</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 0999ba0a3515ae02daa5715247d86ae7d189030c" />
<meta property="og:url" content="/comm-central/rev/0999ba0a3515ae02daa5715247d86ae7d189030c" />
<meta property="og:description" content="get rid of eudora/outlook import dependence on nsIEditor, r=standard8, sr=neil, bug 681647" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 0999ba0a3515ae02daa5715247d86ae7d189030c 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/0999ba0a3515ae02daa5715247d86ae7d189030c">shortlog</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/0999ba0a3515ae02daa5715247d86ae7d189030c">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c">files</a> |
changeset |
<a href="/comm-central/raw-rev/0999ba0a3515ae02daa5715247d86ae7d189030c">raw</a>  | <a href="/comm-central/archive/0999ba0a3515ae02daa5715247d86ae7d189030c.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
get rid of eudora/outlook import dependence on nsIEditor, r=standard8, sr=neil, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=681647">bug 681647</a>
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#68;&#97;&#118;&#105;&#100;&#32;&#66;&#105;&#101;&#110;&#118;&#101;&#110;&#117;&#32;&#60;&#98;&#105;&#101;&#110;&#118;&#101;&#110;&#117;&#64;&#110;&#118;&#101;&#110;&#116;&#117;&#114;&#101;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 01 Dec 2011 16:00:07 -0800</td></tr>

<tr>
 <td>changeset 8923</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/0999ba0a3515ae02daa5715247d86ae7d189030c">0999ba0a3515ae02daa5715247d86ae7d189030c</a></td>
</tr>



<tr>
<td>parent 8922</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1263a80679867cc5d8a91bfe4969e289ee708d33">1263a80679867cc5d8a91bfe4969e289ee708d33</a>
</td>
</tr>

<tr>
<td>child 8924</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5e2c9c9d03b539e42490fcf14db6612d38d92e92">5e2c9c9d03b539e42490fcf14db6612d38d92e92</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=0999ba0a3515ae02daa5715247d86ae7d189030c">6845</a></td></tr>
<tr><td>push user</td><td>bienvenu@nventure.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 02 Dec 2011 00:00:03 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@0999ba0a3515 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=0999ba0a3515ae02daa5715247d86ae7d189030c">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=0999ba0a3515ae02daa5715247d86ae7d189030c&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0999ba0a3515ae02daa5715247d86ae7d189030c&newProject=comm-central&newRevision=0999ba0a3515ae02daa5715247d86ae7d189030c&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0999ba0a3515ae02daa5715247d86ae7d189030c&newProject=comm-central&newRevision=0999ba0a3515ae02daa5715247d86ae7d189030c&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0999ba0a3515ae02daa5715247d86ae7d189030c&newProject=comm-central&newRevision=0999ba0a3515ae02daa5715247d86ae7d189030c&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28standard8%29&revcount=50">standard8</a>, <a href="/comm-central/log?rev=reviewer%28neil%29&revcount=50">neil</a>, <a href="/comm-central/log?rev=reviewer%28bug%29&revcount=50">bug</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=681647">681647</a></td></tr>




</table></div>

<div class="page_body description">get rid of eudora/outlook import dependence on nsIEditor, r=standard8, sr=neil, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=681647">bug 681647</a></div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/public/nsIMsgSend.idl">mailnews/compose/public/nsIMsgSend.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/public/nsIMsgSend.idl">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/public/nsIMsgSend.idl">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/public/nsIMsgSend.idl">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/public/nsIMsgSend.idl">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/public/nsIMsgSend.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraCompose.cpp">mailnews/import/eudora/src/nsEudoraCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraCompose.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraCompose.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraCompose.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraCompose.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.cpp">mailnews/import/eudora/src/nsEudoraEditor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.h">mailnews/import/eudora/src/nsEudoraEditor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.h">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.h">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.h">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.h">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraEditor.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraWin32.cpp">mailnews/import/eudora/src/nsEudoraWin32.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraWin32.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraWin32.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraWin32.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraWin32.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/eudora/src/nsEudoraWin32.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.cpp">mailnews/import/outlook/src/nsOutlookCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.h">mailnews/import/outlook/src/nsOutlookCompose.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.h">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.h">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.h">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.h">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookCompose.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.cpp">mailnews/import/outlook/src/nsOutlookEditor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.h">mailnews/import/outlook/src/nsOutlookEditor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.h">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.h">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.h">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.h">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/outlook/src/nsOutlookEditor.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/public/nsIImportService.idl">mailnews/import/public/nsIImportService.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/public/nsIImportService.idl">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/public/nsIImportService.idl">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/public/nsIImportService.idl">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/public/nsIImportService.idl">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/public/nsIImportService.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/src/nsImportService.cpp">mailnews/import/src/nsImportService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/src/nsImportService.cpp">file</a> |
<a href="/comm-central/annotate/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/src/nsImportService.cpp">annotate</a> |
<a href="/comm-central/diff/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/src/nsImportService.cpp">diff</a> |
<a href="/comm-central/comparison/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/src/nsImportService.cpp">comparison</a> |
<a href="/comm-central/log/0999ba0a3515ae02daa5715247d86ae7d189030c/mailnews/import/src/nsImportService.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/compose/public/nsIMsgSend.idl</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/compose/public/nsIMsgSend.idl</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -67,20 +67,21 @@ interface nsIMsgHdr;</span>
<a href="#l1.4"></a><span id="l1.4"> interface nsIDocShell;</span>
<a href="#l1.5"></a><span id="l1.5"> interface nsIFile;</span>
<a href="#l1.6"></a><span id="l1.6"> interface nsILocalFile;</span>
<a href="#l1.7"></a><span id="l1.7"> interface nsIOutputStream;</span>
<a href="#l1.8"></a><span id="l1.8"> interface nsIMsgComposeSecure;</span>
<a href="#l1.9"></a><span id="l1.9"> interface nsIMsgStatusFeedback;</span>
<a href="#l1.10"></a><span id="l1.10"> interface nsIEditor;</span>
<a href="#l1.11"></a><span id="l1.11"> interface nsIArray;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+interface nsISupportsArray;</span>
<a href="#l1.13"></a><span id="l1.13"> </span>
<a href="#l1.14"></a><span id="l1.14"> typedef long nsMsgDeliverMode;</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-[scriptable, uuid(d664fd40-87b6-487f-a01f-c54ab2e29314)]</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+[scriptable, uuid(c658cd1f-dc4a-43c0-911c-c6d3e569ca7e)]</span>
<a href="#l1.18"></a><span id="l1.18"> interface nsIMsgAttachmentData : nsISupports</span>
<a href="#l1.19"></a><span id="l1.19"> {</span>
<a href="#l1.20"></a><span id="l1.20">   /// The URL to attach.</span>
<a href="#l1.21"></a><span id="l1.21">   attribute nsIURI url;</span>
<a href="#l1.22"></a><span id="l1.22"> </span>
<a href="#l1.23"></a><span id="l1.23">   /**</span>
<a href="#l1.24"></a><span id="l1.24">    * The type to which this document should be</span>
<a href="#l1.25"></a><span id="l1.25">    * converted.  Legal values are NULL, TEXT_PLAIN</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineat">@@ -320,16 +321,47 @@ interface nsIMsgSend : nsISupports</span>
<a href="#l1.27"></a><span id="l1.27">                               in nsIDOMWindow aParentWindow,</span>
<a href="#l1.28"></a><span id="l1.28">                               in nsIMsgProgress aProgress,</span>
<a href="#l1.29"></a><span id="l1.29">                               in nsIMsgSendListener aListener,</span>
<a href="#l1.30"></a><span id="l1.30">                               in string aPassword,</span>
<a href="#l1.31"></a><span id="l1.31">                               in AUTF8String aOriginalMsgURI,</span>
<a href="#l1.32"></a><span id="l1.32">                               in MSG_ComposeType aType);</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34">   /**</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+   * Creates a file containing an rfc822 message, using the passed information.</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+   * aListener's OnStopSending method will get called with the file the message</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+   * was stored in. OnStopSending may be called sync or async, depending on</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+   * content, so you need to handle both cases.</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+   *</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineplus">+   * @param aUserIdentity    The user identity to use for sending this email.</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineplus">+   * @param aFields          An nsIMsgCompFields object containing information</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+   *                         on who to send the message to.</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+   * @param aBodyType content type of message body</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineplus">+   * @param aBody message body text (should have native line endings)</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineplus">+   * @param aBodyLength passed in to avoid extra strlen call.</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineplus">+   * @param aCreateAsDraft If true, this message will be put in a drafts folder</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineplus">+   * @param aAttachments Array of nsIMsgAttachmentData</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineplus">+   * @param aEmbeddedObjects Array of nsIDomNode objects for MHTML messages.</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+   *                         Primarily used for embedded images.</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineplus">+   *                         Almost all methods can be noops, but</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+   *                         GetNodeValue should return the</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+   *                         cid of the embedded object.</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+   * @param aListener listener for msg creation progress and resulting file.</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+   */</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+  void createRFC822Message(in nsIMsgIdentity aUserIdentity,</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineplus">+                           in nsIMsgCompFields aFields,</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+                           in string aBodyType,</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+                           in string aBody,</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineplus">+                           in unsigned long aBodyLength,</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineplus">+                           in boolean aCreateAsDraft,</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+                           in nsIArray aAttachments,</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+                           in nsISupportsArray aEmbeddedObjects,</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineplus">+                           in nsIMsgSendListener aListener);</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineplus">+</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineplus">+  /**</span>
<a href="#l1.66"></a><span id="l1.66">    * Sends a file to the specified composition fields, via the user identity</span>
<a href="#l1.67"></a><span id="l1.67">    * provided.</span>
<a href="#l1.68"></a><span id="l1.68">    *</span>
<a href="#l1.69"></a><span id="l1.69">    * @param aUserIdentity    The user identity to use for sending this email.</span>
<a href="#l1.70"></a><span id="l1.70">    * @param aAccountKey      The key of the account that this message relates</span>
<a href="#l1.71"></a><span id="l1.71">    *                         to.</span>
<a href="#l1.72"></a><span id="l1.72">    * @param aFields          An nsIMsgCompFields object containing information</span>
<a href="#l1.73"></a><span id="l1.73">    *                         on who to send the message to.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1544,22 +1544,27 @@ nsMsgComposeAndSend::GetMultipartRelated</span>
<a href="#l2.4"></a><span id="l2.4">   nsresult                  rv = NS_OK;</span>
<a href="#l2.5"></a><span id="l2.5">   PRUint32                  count;</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7">   if (mMultipartRelatedAttachmentCount != -1 &amp;&amp; !forceToBeCalculated)</span>
<a href="#l2.8"></a><span id="l2.8">     return (PRUint32)mMultipartRelatedAttachmentCount;</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10">   //First time here, let's calculate the correct number of related part we need to generate</span>
<a href="#l2.11"></a><span id="l2.11">   mMultipartRelatedAttachmentCount = 0;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  nsCOMPtr&lt;nsIEditorMailSupport&gt; mailEditor (do_QueryInterface(mEditor));</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-  if (!mailEditor)</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-    return 0;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-  rv = mailEditor-&gt;GetEmbeddedObjects(getter_AddRefs(mEmbeddedObjectList));</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-  if ((NS_FAILED(rv) || (!mEmbeddedObjectList)))</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+  if (mEditor)</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+  {</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+    nsCOMPtr&lt;nsIEditorMailSupport&gt; mailEditor (do_QueryInterface(mEditor));</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+    if (!mailEditor)</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+      return 0;</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+    rv = mailEditor-&gt;GetEmbeddedObjects(getter_AddRefs(mEmbeddedObjectList));</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+    if (NS_FAILED(rv))</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+      return 0;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+  }</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+  if (!mEmbeddedObjectList)</span>
<a href="#l2.29"></a><span id="l2.29">     return 0;</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31">   if (NS_SUCCEEDED(mEmbeddedObjectList-&gt;Count(&amp;count)))</span>
<a href="#l2.32"></a><span id="l2.32">   {</span>
<a href="#l2.33"></a><span id="l2.33">     if (count &gt; 0)</span>
<a href="#l2.34"></a><span id="l2.34">     {</span>
<a href="#l2.35"></a><span id="l2.35">       // preallocate space for part numbers</span>
<a href="#l2.36"></a><span id="l2.36">       m_partNumbers.SetLength(count);</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineat">@@ -1610,17 +1615,20 @@ nsMsgComposeAndSend::GetBodyFromEditor()</span>
<a href="#l2.38"></a><span id="l2.38">   PRUint32  flags = nsIDocumentEncoder::OutputFormatted  | nsIDocumentEncoder::OutputNoFormattingInPre;</span>
<a href="#l2.39"></a><span id="l2.39">   nsAutoString bodyStr;</span>
<a href="#l2.40"></a><span id="l2.40">   PRUnichar* bodyText = nsnull;</span>
<a href="#l2.41"></a><span id="l2.41">   nsresult rv;</span>
<a href="#l2.42"></a><span id="l2.42">   PRUnichar *origHTMLBody = nsnull;</span>
<a href="#l2.43"></a><span id="l2.43"> </span>
<a href="#l2.44"></a><span id="l2.44">   // Ok, get the body...the DOM should have been whacked with</span>
<a href="#l2.45"></a><span id="l2.45">   // Content ID's already</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-  mEditor-&gt;OutputToString(format, flags, bodyStr);</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+  if (mEditor)</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+    mEditor-&gt;OutputToString(format, flags, bodyStr);</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+  else</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+    bodyStr = NS_ConvertASCIItoUTF16(m_attachment1_body);</span>
<a href="#l2.51"></a><span id="l2.51"> </span>
<a href="#l2.52"></a><span id="l2.52">  //</span>
<a href="#l2.53"></a><span id="l2.53">   // If we really didn't get a body, just return NS_OK</span>
<a href="#l2.54"></a><span id="l2.54">   //</span>
<a href="#l2.55"></a><span id="l2.55">   if (bodyStr.IsEmpty())</span>
<a href="#l2.56"></a><span id="l2.56">     return NS_OK;</span>
<a href="#l2.57"></a><span id="l2.57">   bodyText = ToNewUnicode(bodyStr);</span>
<a href="#l2.58"></a><span id="l2.58">   if (!bodyText)</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineat">@@ -1863,20 +1871,16 @@ nsMsgComposeAndSend::ProcessMultipartRel</span>
<a href="#l2.60"></a><span id="l2.60">   PRUint32                  multipartCount = GetMultipartRelatedCount();</span>
<a href="#l2.61"></a><span id="l2.61">   nsresult                  rv = NS_OK;</span>
<a href="#l2.62"></a><span id="l2.62">   PRUint32                  i;</span>
<a href="#l2.63"></a><span id="l2.63">   PRInt32                   j = -1;</span>
<a href="#l2.64"></a><span id="l2.64">   PRUint32                  k;</span>
<a href="#l2.65"></a><span id="l2.65">   PRInt32                   duplicateOf;</span>
<a href="#l2.66"></a><span id="l2.66">   domSaveStruct             *domSaveArray = nsnull;</span>
<a href="#l2.67"></a><span id="l2.67"> </span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-  // Sanity check to see if we should be here or not...if not, just return</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-  if (!mEditor)</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-    return NS_OK;</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-</span>
<a href="#l2.72"></a><span id="l2.72">    if (!mEmbeddedObjectList)</span>
<a href="#l2.73"></a><span id="l2.73">     return NS_ERROR_MIME_MPART_ATTACHMENT_ERROR;</span>
<a href="#l2.74"></a><span id="l2.74"> </span>
<a href="#l2.75"></a><span id="l2.75">   nsMsgAttachmentData   attachment;</span>
<a href="#l2.76"></a><span id="l2.76">   PRInt32               locCount = -1;</span>
<a href="#l2.77"></a><span id="l2.77"> </span>
<a href="#l2.78"></a><span id="l2.78">   if (multipartCount &gt; 0)</span>
<a href="#l2.79"></a><span id="l2.79">   {</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineat">@@ -1945,23 +1949,29 @@ nsMsgComposeAndSend::ProcessMultipartRel</span>
<a href="#l2.81"></a><span id="l2.81">       m_attachments[i].m_xMacCreator = attachment.m_xMacCreator;</span>
<a href="#l2.82"></a><span id="l2.82"> </span>
<a href="#l2.83"></a><span id="l2.83">       m_attachments[i].m_charset = mCompFields-&gt;GetCharacterSet();</span>
<a href="#l2.84"></a><span id="l2.84">       m_attachments[i].m_encoding = &quot;7bit&quot;;</span>
<a href="#l2.85"></a><span id="l2.85"> </span>
<a href="#l2.86"></a><span id="l2.86">       if (m_attachments[i].mURL)</span>
<a href="#l2.87"></a><span id="l2.87">         msg_pick_real_name(&amp;m_attachments[i], nsnull, mCompFields-&gt;GetCharacterSet());</span>
<a href="#l2.88"></a><span id="l2.88"> </span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">-      //</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineminus">-      // Next, generate a content id for use with this part</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-      //</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineminus">-      nsCString email;</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-      mUserIdentity-&gt;GetEmail(email);</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-      email.StripWhitespace();</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-      m_attachments[i].m_contentId = mime_gen_content_id(locCount+1, email.get());</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+      nsString contentId;</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+      node-&gt;GetNodeValue(contentId);</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+      if (!contentId.IsEmpty())</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineplus">+        m_attachments[i].m_contentId = NS_LossyConvertUTF16toASCII(contentId);</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineplus">+      else</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineplus">+      {</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+        //</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineplus">+        // Next, generate a content id for use with this part</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineplus">+        //</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineplus">+        nsCString email;</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+        mUserIdentity-&gt;GetEmail(email);</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+        m_attachments[i].m_contentId = mime_gen_content_id(locCount+1, email.get());</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+      }</span>
<a href="#l2.109"></a><span id="l2.109"> </span>
<a href="#l2.110"></a><span id="l2.110">       //</span>
<a href="#l2.111"></a><span id="l2.111">       // Start counting the attachments which are going to come from mail folders</span>
<a href="#l2.112"></a><span id="l2.112">       // and from NNTP servers.</span>
<a href="#l2.113"></a><span id="l2.113">       //</span>
<a href="#l2.114"></a><span id="l2.114">       if (m_attachments[i].mURL)</span>
<a href="#l2.115"></a><span id="l2.115">       {</span>
<a href="#l2.116"></a><span id="l2.116">         nsIURI *uri = m_attachments[i].mURL;</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineat">@@ -4232,16 +4242,61 @@ nsMsgComposeAndSend::CreateAndSendMessag</span>
<a href="#l2.118"></a><span id="l2.118">           password, aOriginalMsgURI, aType);</span>
<a href="#l2.119"></a><span id="l2.119"> </span>
<a href="#l2.120"></a><span id="l2.120">   if (NS_FAILED(rv) &amp;&amp; mSendReport)</span>
<a href="#l2.121"></a><span id="l2.121">     mSendReport-&gt;SetError(nsIMsgSendReport::process_Current, rv, PR_FALSE);</span>
<a href="#l2.122"></a><span id="l2.122"> </span>
<a href="#l2.123"></a><span id="l2.123">   return rv;</span>
<a href="#l2.124"></a><span id="l2.124"> }</span>
<a href="#l2.125"></a><span id="l2.125"> </span>
<a href="#l2.126"></a><span id="l2.126" class="difflineplus">+NS_IMETHODIMP</span>
<a href="#l2.127"></a><span id="l2.127" class="difflineplus">+nsMsgComposeAndSend::CreateRFC822Message(</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineplus">+              nsIMsgIdentity *aUserIdentity,</span>
<a href="#l2.129"></a><span id="l2.129" class="difflineplus">+              nsIMsgCompFields *aFields,</span>
<a href="#l2.130"></a><span id="l2.130" class="difflineplus">+              const char *aMsgType,</span>
<a href="#l2.131"></a><span id="l2.131" class="difflineplus">+              const char *aMsgBody,</span>
<a href="#l2.132"></a><span id="l2.132" class="difflineplus">+              PRUint32 aMsgBodyLength,</span>
<a href="#l2.133"></a><span id="l2.133" class="difflineplus">+              bool aIsDraft,</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineplus">+              nsIArray *aAttachments,</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineplus">+              nsISupportsArray *aEmbeddedObjects,</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineplus">+              nsIMsgSendListener *aListener</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineplus">+              )</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineplus">+{</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineplus">+  nsresult rv;</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineplus">+  nsMsgDeliverMode mode = aIsDraft ? nsIMsgSend::nsMsgSaveAsDraft :</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineplus">+                                     nsIMsgSend::nsMsgDeliverNow;</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineplus">+</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineplus">+  /* First thing to do is to reset the send errors report */</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineplus">+  mSendReport-&gt;Reset();</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineplus">+  mSendReport-&gt;SetDeliveryMode(mode);</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineplus">+</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineplus">+  mParentWindow = nsnull;</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineplus">+  mSendProgress = nsnull;</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineplus">+  mListener = aListener;</span>
<a href="#l2.150"></a><span id="l2.150" class="difflineplus">+  mEmbeddedObjectList = aEmbeddedObjects;</span>
<a href="#l2.151"></a><span id="l2.151" class="difflineplus">+</span>
<a href="#l2.152"></a><span id="l2.152" class="difflineplus">+  if (!aMsgBody || !*aMsgBody)</span>
<a href="#l2.153"></a><span id="l2.153" class="difflineplus">+  {</span>
<a href="#l2.154"></a><span id="l2.154" class="difflineplus">+    aMsgBodyLength = 0;</span>
<a href="#l2.155"></a><span id="l2.155" class="difflineplus">+    aMsgBody = (char *) nsnull;</span>
<a href="#l2.156"></a><span id="l2.156" class="difflineplus">+  }</span>
<a href="#l2.157"></a><span id="l2.157" class="difflineplus">+</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineplus">+  rv = Init(aUserIdentity, nsnull, (nsMsgCompFields *)aFields, nsnull,</span>
<a href="#l2.159"></a><span id="l2.159" class="difflineplus">+            false, true, mode, nsnull,</span>
<a href="#l2.160"></a><span id="l2.160" class="difflineplus">+            aMsgType, aMsgBody,</span>
<a href="#l2.161"></a><span id="l2.161" class="difflineplus">+            aMsgBodyLength,</span>
<a href="#l2.162"></a><span id="l2.162" class="difflineplus">+            nsnull, aAttachments,</span>
<a href="#l2.163"></a><span id="l2.163" class="difflineplus">+            nsnull, EmptyCString(), nsnull);</span>
<a href="#l2.164"></a><span id="l2.164" class="difflineplus">+</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineplus">+  if (NS_FAILED(rv) &amp;&amp; mSendReport)</span>
<a href="#l2.166"></a><span id="l2.166" class="difflineplus">+    mSendReport-&gt;SetError(nsIMsgSendReport::process_Current, rv, PR_FALSE);</span>
<a href="#l2.167"></a><span id="l2.167" class="difflineplus">+</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineplus">+  return rv;</span>
<a href="#l2.169"></a><span id="l2.169" class="difflineplus">+}</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineplus">+</span>
<a href="#l2.171"></a><span id="l2.171"> nsresult</span>
<a href="#l2.172"></a><span id="l2.172"> nsMsgComposeAndSend::SendMessageFile(</span>
<a href="#l2.173"></a><span id="l2.173">               nsIMsgIdentity                    *aUserIndentity,</span>
<a href="#l2.174"></a><span id="l2.174">               const char                        *aAccountKey,</span>
<a href="#l2.175"></a><span id="l2.175">               nsIMsgCompFields                  *fields,</span>
<a href="#l2.176"></a><span id="l2.176">               nsIFile                           *sendIFile,</span>
<a href="#l2.177"></a><span id="l2.177">               bool                              deleteSendFileOnCompletion,</span>
<a href="#l2.178"></a><span id="l2.178">               bool                              digest_p,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraCompose.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraCompose.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -609,32 +609,35 @@ nsresult nsEudoraCompose::SendTheMessage</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5">   // what about all of the other headers?!?!?!?!?!?!</span>
<a href="#l3.6"></a><span id="l3.6">   char *pMimeType;</span>
<a href="#l3.7"></a><span id="l3.7">   if (!bodyType.IsEmpty())</span>
<a href="#l3.8"></a><span id="l3.8">     pMimeType = ToNewCString(NS_LossyConvertUTF16toASCII(bodyType));</span>
<a href="#l3.9"></a><span id="l3.9">   else</span>
<a href="#l3.10"></a><span id="l3.10">     pMimeType = ToNewCString(m_bodyType);</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  // IMPORT_LOG0( &quot;Outlook compose calling CreateAndSendMessage\n&quot;);</span>
<a href="#l3.13"></a><span id="l3.13">   nsCOMPtr&lt;nsIArray&gt; pAttach;</span>
<a href="#l3.14"></a><span id="l3.14">   GetLocalAttachments(getter_AddRefs(pAttach));</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+  nsEudoraEditor eudoraEditor(m_pBody, pMailImportLocation);</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+  nsCOMPtr&lt;nsISupportsArray&gt; embeddedObjects;</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+  if (eudoraEditor.HasEmbeddedContent())</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+    eudoraEditor.GetEmbeddedObjects(getter_AddRefs(embeddedObjects));</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+  nsString uniBody;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+  NS_CopyNativeToUnicode(nsDependentCString(m_pBody), uniBody);</span>
<a href="#l3.22"></a><span id="l3.22"> </span>
<a href="#l3.23"></a><span id="l3.23">   /*</span>
<a href="#l3.24"></a><span id="l3.24">     l10n - I have the body of the message in the system charset,</span>
<a href="#l3.25"></a><span id="l3.25">     I need to &quot;encode&quot; it to be the charset for the message</span>
<a href="#l3.26"></a><span id="l3.26">     *UNLESS* of course, I don't know what the charset of the message</span>
<a href="#l3.27"></a><span id="l3.27">     should be?  How do I determine what the charset should</span>
<a href="#l3.28"></a><span id="l3.28">     be if it doesn't exist?</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30">   */</span>
<a href="#l3.31"></a><span id="l3.31"> </span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-  nsString uniBody;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-  NS_CopyNativeToUnicode( nsDependentCString(m_pBody), uniBody);</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-</span>
<a href="#l3.35"></a><span id="l3.35">   nsCString body;</span>
<a href="#l3.36"></a><span id="l3.36"> </span>
<a href="#l3.37"></a><span id="l3.37">   rv = nsMsgI18NConvertFromUnicode( NS_LossyConvertUTF16toASCII(charSet).get(),</span>
<a href="#l3.38"></a><span id="l3.38">                                     uniBody, body);</span>
<a href="#l3.39"></a><span id="l3.39">   if (NS_FAILED( rv)) {</span>
<a href="#l3.40"></a><span id="l3.40">     // in this case, if we did not use the default compose</span>
<a href="#l3.41"></a><span id="l3.41">     // charset, then try that.</span>
<a href="#l3.42"></a><span id="l3.42">     if (!charSet.Equals( m_defCharset)) {</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineat">@@ -644,48 +647,36 @@ nsresult nsEudoraCompose::SendTheMessage</span>
<a href="#l3.44"></a><span id="l3.44">     }</span>
<a href="#l3.45"></a><span id="l3.45">   }</span>
<a href="#l3.46"></a><span id="l3.46">   uniBody.Truncate();</span>
<a href="#l3.47"></a><span id="l3.47"> </span>
<a href="#l3.48"></a><span id="l3.48"> </span>
<a href="#l3.49"></a><span id="l3.49">   // See if it's a draft msg (ie, no From: or no To: AND no Cc: AND no Bcc:).</span>
<a href="#l3.50"></a><span id="l3.50">   // Eudora saves sent and draft msgs in Out folder (ie, mixed) and it does</span>
<a href="#l3.51"></a><span id="l3.51">   // store Bcc: header in the msg itself.</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-  nsMsgDeliverMode mode = nsIMsgSend::nsMsgDeliverNow;</span>
<a href="#l3.53"></a><span id="l3.53">   nsAutoString from, to, cc, bcc;</span>
<a href="#l3.54"></a><span id="l3.54">   rv = m_pMsgFields-&gt;GetFrom(from);</span>
<a href="#l3.55"></a><span id="l3.55">   rv = m_pMsgFields-&gt;GetTo(to);</span>
<a href="#l3.56"></a><span id="l3.56">   rv = m_pMsgFields-&gt;GetCc(cc);</span>
<a href="#l3.57"></a><span id="l3.57">   rv = m_pMsgFields-&gt;GetBcc(bcc);</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-  if ( from.IsEmpty() || to.IsEmpty() &amp;&amp; cc.IsEmpty() &amp;&amp; bcc.IsEmpty() )</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineminus">-    mode = nsIMsgSend::nsMsgSaveAsDraft;</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineminus">-</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineminus">-  // We only get the editor interface when there's embedded content.</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-  // Otherwise pEditor remains NULL. That way we only import with the pseudo</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-  // editor when it helps.</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-  nsRefPtr&lt;nsEudoraEditor&gt;  pEudoraEditor = new nsEudoraEditor(m_pBody, pMailImportLocation);</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineminus">-  nsCOMPtr&lt;nsIEditor&gt;       pEditor;</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-  if (pEudoraEditor-&gt;HasEmbeddedContent())</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-    // There's embedded content that we need to import, so query for the editor interface</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-    pEudoraEditor-&gt;QueryInterface( NS_GET_IID(nsIEditor), getter_AddRefs(pEditor) );</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+  bool createAsDraft = from.IsEmpty() || to.IsEmpty() &amp;&amp; cc.IsEmpty() &amp;&amp; bcc.IsEmpty();</span>
<a href="#l3.71"></a><span id="l3.71"> </span>
<a href="#l3.72"></a><span id="l3.72">   nsCOMPtr&lt;nsIImportService&gt; impService(do_GetService(NS_IMPORTSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l3.73"></a><span id="l3.73">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineminus">-  impService-&gt;ProxySend(pEditor,                       // pseudo editor shell when there's embedded content</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+  rv = impService-&gt;CreateRFC822Message(</span>
<a href="#l3.77"></a><span id="l3.77">                         s_pIdentity,                  // dummy identity</span>
<a href="#l3.78"></a><span id="l3.78">                         m_pMsgFields,                 // message fields</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-                        mode,                         // mode</span>
<a href="#l3.80"></a><span id="l3.80">                         pMimeType,                    // body type</span>
<a href="#l3.81"></a><span id="l3.81">                         body.get(),                   // body pointer</span>
<a href="#l3.82"></a><span id="l3.82">                         body.Length(),                // body length</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+                        createAsDraft,</span>
<a href="#l3.84"></a><span id="l3.84">                         pAttach,                      // local attachments</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineminus">-                        m_pListener);              // originalMsgURI</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineminus">-</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineminus">-  // IMPORT_LOG0( &quot;Returned from ProxySend\n&quot;);</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+                        embeddedObjects,</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+                        m_pListener);                 // listener</span>
<a href="#l3.90"></a><span id="l3.90"> </span>
<a href="#l3.91"></a><span id="l3.91">   EudoraSendListener *pListen = (EudoraSendListener *)m_pListener;</span>
<a href="#l3.92"></a><span id="l3.92">   if (NS_FAILED( rv)) {</span>
<a href="#l3.93"></a><span id="l3.93">     IMPORT_LOG1( &quot;*** Error, CreateAndSendMessage FAILED: 0x%lx\n&quot;, rv);</span>
<a href="#l3.94"></a><span id="l3.94">     // IMPORT_LOG1( &quot;Headers: %80s\n&quot;, m_pHeaders);</span>
<a href="#l3.95"></a><span id="l3.95">   }</span>
<a href="#l3.96"></a><span id="l3.96">   else {</span>
<a href="#l3.97"></a><span id="l3.97">     // wait for the listener to get done!</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraEditor.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraEditor.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -39,21 +39,20 @@</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> #include &quot;nsEudoraEditor.h&quot;</span>
<a href="#l4.6"></a><span id="l4.6"> #include &quot;nsISupportsArray.h&quot;</span>
<a href="#l4.7"></a><span id="l4.7"> #include &quot;nsIDOMHTMLImageElement.h&quot;</span>
<a href="#l4.8"></a><span id="l4.8"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l4.9"></a><span id="l4.9"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l4.10"></a><span id="l4.10"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l4.11"></a><span id="l4.11"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+#include &quot;nsIMsgSend.h&quot;</span>
<a href="#l4.13"></a><span id="l4.13"> </span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-NS_IMPL_ISUPPORTS2(nsEudoraEditor, nsIEditor, nsIEditorMailSupport)</span>
<a href="#l4.15"></a><span id="l4.15"> NS_IMPL_ISUPPORTS4(nsEudoraHTMLImageElement, nsIDOMNode, nsIDOMElement, nsIDOMHTMLElement, nsIDOMHTMLImageElement)</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-</span>
<a href="#l4.18"></a><span id="l4.18"> static char *     sEudoraEmbeddedContentLines[] = {</span>
<a href="#l4.19"></a><span id="l4.19">   &quot;Embedded Content: &quot;,</span>
<a href="#l4.20"></a><span id="l4.20">   &quot;\0&quot;  //  Explicit terminating string</span>
<a href="#l4.21"></a><span id="l4.21"> };</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23"> // Lightly adapted from code in Windows Eudora that hashes the img src cid.</span>
<a href="#l4.24"></a><span id="l4.24"> static PRUint32 EudoraHashString(const char* pszStr)</span>
<a href="#l4.25"></a><span id="l4.25"> {</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineat">@@ -89,604 +88,17 @@ nsEudoraEditor::nsEudoraEditor(const cha</span>
<a href="#l4.27"></a><span id="l4.27">   m_pMailImportLocation = pMailImportLocation;</span>
<a href="#l4.28"></a><span id="l4.28"> }</span>
<a href="#l4.29"></a><span id="l4.29"> </span>
<a href="#l4.30"></a><span id="l4.30"> </span>
<a href="#l4.31"></a><span id="l4.31"> nsEudoraEditor::~nsEudoraEditor()</span>
<a href="#l4.32"></a><span id="l4.32"> {</span>
<a href="#l4.33"></a><span id="l4.33"> }</span>
<a href="#l4.34"></a><span id="l4.34"> </span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-// readonly attribute nsISelection selection</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetSelection(nsISelection * *aSelection)</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-{</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-}</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineminus">-</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-// [noscript] void init (in nsIDOMDocument doc, in nsIContentPtr aRoot, in nsISelectionController aSelCon, in unsigned long aFlags)</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Init(nsIDOMDocument *doc, nsIContent * aRoot, nsISelectionController *aSelCon, PRUint32 aFlags)</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-{</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-}</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-// void setAttributeOrEquivalent (in nsIDOMElement element, in AString sourceAttrName, in AString sourceAttrValue, in boolean aSuppressTransaction)</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetAttributeOrEquivalent(nsIDOMElement *element, const nsAString &amp; sourceAttrName, const nsAString &amp; sourceAttrValue, bool aSuppressTransaction)</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-{</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-}</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-// void removeAttributeOrEquivalent (in nsIDOMElement element, in DOMString sourceAttrName, in boolean aSuppressTransaction)</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::RemoveAttributeOrEquivalent(nsIDOMElement *element, const nsAString &amp; sourceAttrName, bool aSuppressTransaction)</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-{</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineminus">-}</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineminus">-</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineminus">-// void postCreate ()</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::PostCreate()</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineminus">-{</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineminus">-}</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineminus">-</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineminus">-// void preDestroy (in boolean aDestroyingFrames)</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::PreDestroy(bool aDestroyingFrames)</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-{</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineminus">-}</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineminus">-</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineminus">-</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineminus">-// attribute unsigned long flags</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetFlags(PRUint32 *aFlags)</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineminus">-{</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineminus">-}</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineminus">-</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineminus">-</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetFlags(PRUint32 aFlags)</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineminus">-{</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-}</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineminus">-</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineminus">-</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineminus">-// attribute string contentsMIMEType</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetContentsMIMEType(char * *aContentsMIMEType)</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineminus">-{</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineminus">-}</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineminus">-</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineminus">-</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetContentsMIMEType(const char * aContentsMIMEType)</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineminus">-{</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineminus">-}</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineminus">-</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineminus">-</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineminus">-// readonly attribute boolean isDocumentEditable</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetIsDocumentEditable(bool *aIsDocumentEditable)</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-{</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineminus">-}</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineminus">-</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetIsSelectionEditable(bool *aIsSelectionEditable)</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineminus">-{</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineminus">-}</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineminus">-</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineminus">-// readonly attribute nsIDOMDocument document</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetDocument(nsIDOMDocument * *aDocument)</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineminus">-{</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineminus">-}</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineminus">-// readonly attribute nsIDOMElement rootElement</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetRootElement(nsIDOMElement * *aRootElement)</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineminus">-{</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-}</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineminus">-</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineminus">-// readonly attribute nsISelectionController selectionController</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetSelectionController(nsISelectionController * *aSelectionController)</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineminus">-{</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineminus">-}</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineminus">-</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineminus">-</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineminus">-// void deleteSelection (in short action)</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DeleteSelection(PRInt16 action)</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineminus">-{</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineminus">-}</span>
<a href="#l4.141"></a><span id="l4.141" class="difflineminus">-</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineminus">-</span>
<a href="#l4.143"></a><span id="l4.143" class="difflineminus">-// readonly attribute boolean documentIsEmpty</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetDocumentIsEmpty(bool *aDocumentIsEmpty)</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineminus">-{</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineminus">-}</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineminus">-</span>
<a href="#l4.149"></a><span id="l4.149" class="difflineminus">-</span>
<a href="#l4.150"></a><span id="l4.150" class="difflineminus">-// readonly attribute boolean documentModified</span>
<a href="#l4.151"></a><span id="l4.151" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetDocumentModified(bool *aDocumentModified)</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineminus">-{</span>
<a href="#l4.153"></a><span id="l4.153" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.154"></a><span id="l4.154" class="difflineminus">-}</span>
<a href="#l4.155"></a><span id="l4.155" class="difflineminus">-</span>
<a href="#l4.156"></a><span id="l4.156" class="difflineminus">-</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineminus">-// attribute ACString documentCharacterSet</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetDocumentCharacterSet(nsACString &amp; aDocumentCharacterSet)</span>
<a href="#l4.159"></a><span id="l4.159" class="difflineminus">-{</span>
<a href="#l4.160"></a><span id="l4.160" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.161"></a><span id="l4.161" class="difflineminus">-}</span>
<a href="#l4.162"></a><span id="l4.162" class="difflineminus">-</span>
<a href="#l4.163"></a><span id="l4.163" class="difflineminus">-</span>
<a href="#l4.164"></a><span id="l4.164" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetDocumentCharacterSet(const nsACString &amp; aDocumentCharacterSet)</span>
<a href="#l4.165"></a><span id="l4.165" class="difflineminus">-{</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineminus">-}</span>
<a href="#l4.168"></a><span id="l4.168" class="difflineminus">-</span>
<a href="#l4.169"></a><span id="l4.169" class="difflineminus">-</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineminus">-// void resetModificationCount ()</span>
<a href="#l4.171"></a><span id="l4.171" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::ResetModificationCount()</span>
<a href="#l4.172"></a><span id="l4.172" class="difflineminus">-{</span>
<a href="#l4.173"></a><span id="l4.173" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.174"></a><span id="l4.174" class="difflineminus">-}</span>
<a href="#l4.175"></a><span id="l4.175" class="difflineminus">-</span>
<a href="#l4.176"></a><span id="l4.176" class="difflineminus">-</span>
<a href="#l4.177"></a><span id="l4.177" class="difflineminus">-// long getModificationCount ()</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetModificationCount(PRInt32 *_retval)</span>
<a href="#l4.179"></a><span id="l4.179" class="difflineminus">-{</span>
<a href="#l4.180"></a><span id="l4.180" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.181"></a><span id="l4.181" class="difflineminus">-}</span>
<a href="#l4.182"></a><span id="l4.182" class="difflineminus">-</span>
<a href="#l4.183"></a><span id="l4.183" class="difflineminus">-</span>
<a href="#l4.184"></a><span id="l4.184" class="difflineminus">-// void incrementModificationCount (in long aModCount)</span>
<a href="#l4.185"></a><span id="l4.185" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::IncrementModificationCount(PRInt32 aModCount)</span>
<a href="#l4.186"></a><span id="l4.186" class="difflineminus">-{</span>
<a href="#l4.187"></a><span id="l4.187" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineminus">-}</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineminus">-</span>
<a href="#l4.190"></a><span id="l4.190" class="difflineminus">-</span>
<a href="#l4.191"></a><span id="l4.191" class="difflineminus">-//  attribute nsITransactionManager transactionManager</span>
<a href="#l4.192"></a><span id="l4.192" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetTransactionManager(nsITransactionManager * *aTransactionManager)</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineminus">-{</span>
<a href="#l4.194"></a><span id="l4.194" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.195"></a><span id="l4.195" class="difflineminus">-}</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineminus">-</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetTransactionManager(nsITransactionManager *aTxnManager)</span>
<a href="#l4.198"></a><span id="l4.198" class="difflineminus">-{</span>
<a href="#l4.199"></a><span id="l4.199" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.200"></a><span id="l4.200" class="difflineminus">-}</span>
<a href="#l4.201"></a><span id="l4.201" class="difflineminus">-</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineminus">-</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineminus">-// void doTransaction (in nsITransaction txn)</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DoTransaction(nsITransaction *txn)</span>
<a href="#l4.205"></a><span id="l4.205" class="difflineminus">-{</span>
<a href="#l4.206"></a><span id="l4.206" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.207"></a><span id="l4.207" class="difflineminus">-}</span>
<a href="#l4.208"></a><span id="l4.208" class="difflineminus">-</span>
<a href="#l4.209"></a><span id="l4.209" class="difflineminus">-</span>
<a href="#l4.210"></a><span id="l4.210" class="difflineminus">-// void enableUndo (in boolean enable)</span>
<a href="#l4.211"></a><span id="l4.211" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::EnableUndo(bool enable)</span>
<a href="#l4.212"></a><span id="l4.212" class="difflineminus">-{</span>
<a href="#l4.213"></a><span id="l4.213" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.214"></a><span id="l4.214" class="difflineminus">-}</span>
<a href="#l4.215"></a><span id="l4.215" class="difflineminus">-</span>
<a href="#l4.216"></a><span id="l4.216" class="difflineminus">-</span>
<a href="#l4.217"></a><span id="l4.217" class="difflineminus">-// void undo (in unsigned long count)</span>
<a href="#l4.218"></a><span id="l4.218" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Undo(PRUint32 count)</span>
<a href="#l4.219"></a><span id="l4.219" class="difflineminus">-{</span>
<a href="#l4.220"></a><span id="l4.220" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.221"></a><span id="l4.221" class="difflineminus">-}</span>
<a href="#l4.222"></a><span id="l4.222" class="difflineminus">-</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineminus">-</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineminus">-// void canUndo (out boolean isEnabled, out boolean canUndo)</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanUndo(bool *isEnabled, bool *canUndo)</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineminus">-{</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineminus">-}</span>
<a href="#l4.229"></a><span id="l4.229" class="difflineminus">-</span>
<a href="#l4.230"></a><span id="l4.230" class="difflineminus">-</span>
<a href="#l4.231"></a><span id="l4.231" class="difflineminus">-// void redo (in unsigned long count)</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Redo(PRUint32 count)</span>
<a href="#l4.233"></a><span id="l4.233" class="difflineminus">-{</span>
<a href="#l4.234"></a><span id="l4.234" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.235"></a><span id="l4.235" class="difflineminus">-}</span>
<a href="#l4.236"></a><span id="l4.236" class="difflineminus">-</span>
<a href="#l4.237"></a><span id="l4.237" class="difflineminus">-</span>
<a href="#l4.238"></a><span id="l4.238" class="difflineminus">-// void canRedo (out boolean isEnabled, out boolean canRedo)</span>
<a href="#l4.239"></a><span id="l4.239" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanRedo(bool *isEnabled, bool *canRedo)</span>
<a href="#l4.240"></a><span id="l4.240" class="difflineminus">-{</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineminus">-}</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineminus">-</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineminus">-</span>
<a href="#l4.245"></a><span id="l4.245" class="difflineminus">-// void beginTransaction ()</span>
<a href="#l4.246"></a><span id="l4.246" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::BeginTransaction()</span>
<a href="#l4.247"></a><span id="l4.247" class="difflineminus">-{</span>
<a href="#l4.248"></a><span id="l4.248" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.249"></a><span id="l4.249" class="difflineminus">-}</span>
<a href="#l4.250"></a><span id="l4.250" class="difflineminus">-</span>
<a href="#l4.251"></a><span id="l4.251" class="difflineminus">-</span>
<a href="#l4.252"></a><span id="l4.252" class="difflineminus">-// void endTransaction ()</span>
<a href="#l4.253"></a><span id="l4.253" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::EndTransaction()</span>
<a href="#l4.254"></a><span id="l4.254" class="difflineminus">-{</span>
<a href="#l4.255"></a><span id="l4.255" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.256"></a><span id="l4.256" class="difflineminus">-}</span>
<a href="#l4.257"></a><span id="l4.257" class="difflineminus">-</span>
<a href="#l4.258"></a><span id="l4.258" class="difflineminus">-</span>
<a href="#l4.259"></a><span id="l4.259" class="difflineminus">-// void beginPlaceHolderTransaction (in nsIAtom name)</span>
<a href="#l4.260"></a><span id="l4.260" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::BeginPlaceHolderTransaction(nsIAtom *name)</span>
<a href="#l4.261"></a><span id="l4.261" class="difflineminus">-{</span>
<a href="#l4.262"></a><span id="l4.262" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.263"></a><span id="l4.263" class="difflineminus">-}</span>
<a href="#l4.264"></a><span id="l4.264" class="difflineminus">-</span>
<a href="#l4.265"></a><span id="l4.265" class="difflineminus">-</span>
<a href="#l4.266"></a><span id="l4.266" class="difflineminus">-// void endPlaceHolderTransaction ()</span>
<a href="#l4.267"></a><span id="l4.267" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::EndPlaceHolderTransaction()</span>
<a href="#l4.268"></a><span id="l4.268" class="difflineminus">-{</span>
<a href="#l4.269"></a><span id="l4.269" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.270"></a><span id="l4.270" class="difflineminus">-}</span>
<a href="#l4.271"></a><span id="l4.271" class="difflineminus">-</span>
<a href="#l4.272"></a><span id="l4.272" class="difflineminus">-</span>
<a href="#l4.273"></a><span id="l4.273" class="difflineminus">-// boolean shouldTxnSetSelection ()</span>
<a href="#l4.274"></a><span id="l4.274" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::ShouldTxnSetSelection(bool *_retval)</span>
<a href="#l4.275"></a><span id="l4.275" class="difflineminus">-{</span>
<a href="#l4.276"></a><span id="l4.276" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.277"></a><span id="l4.277" class="difflineminus">-}</span>
<a href="#l4.278"></a><span id="l4.278" class="difflineminus">-</span>
<a href="#l4.279"></a><span id="l4.279" class="difflineminus">-</span>
<a href="#l4.280"></a><span id="l4.280" class="difflineminus">-// void setShouldTxnSetSelection (in boolean should)</span>
<a href="#l4.281"></a><span id="l4.281" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetShouldTxnSetSelection(bool should)</span>
<a href="#l4.282"></a><span id="l4.282" class="difflineminus">-{</span>
<a href="#l4.283"></a><span id="l4.283" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.284"></a><span id="l4.284" class="difflineminus">-}</span>
<a href="#l4.285"></a><span id="l4.285" class="difflineminus">-</span>
<a href="#l4.286"></a><span id="l4.286" class="difflineminus">-</span>
<a href="#l4.287"></a><span id="l4.287" class="difflineminus">-// readonly attribute nsIInlineSpellChecker inlineSpellChecker</span>
<a href="#l4.288"></a><span id="l4.288" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetInlineSpellChecker(bool autoCreate, nsIInlineSpellChecker * *aInlineSpellChecker)</span>
<a href="#l4.289"></a><span id="l4.289" class="difflineminus">-{</span>
<a href="#l4.290"></a><span id="l4.290" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.291"></a><span id="l4.291" class="difflineminus">-}</span>
<a href="#l4.292"></a><span id="l4.292" class="difflineminus">-</span>
<a href="#l4.293"></a><span id="l4.293" class="difflineminus">-</span>
<a href="#l4.294"></a><span id="l4.294" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SyncRealTimeSpell()</span>
<a href="#l4.295"></a><span id="l4.295" class="difflineminus">-{</span>
<a href="#l4.296"></a><span id="l4.296" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.297"></a><span id="l4.297" class="difflineminus">-}</span>
<a href="#l4.298"></a><span id="l4.298" class="difflineminus">-</span>
<a href="#l4.299"></a><span id="l4.299" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetSpellcheckUserOverride(bool enable)</span>
<a href="#l4.300"></a><span id="l4.300" class="difflineminus">-{</span>
<a href="#l4.301"></a><span id="l4.301" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.302"></a><span id="l4.302" class="difflineminus">-}</span>
<a href="#l4.303"></a><span id="l4.303" class="difflineminus">-</span>
<a href="#l4.304"></a><span id="l4.304" class="difflineminus">-bool</span>
<a href="#l4.305"></a><span id="l4.305" class="difflineminus">-nsEudoraEditor::IsModifiableNode(nsIDOMNode *aNode)</span>
<a href="#l4.306"></a><span id="l4.306" class="difflineminus">-{</span>
<a href="#l4.307"></a><span id="l4.307" class="difflineminus">-  return PR_TRUE;</span>
<a href="#l4.308"></a><span id="l4.308" class="difflineminus">-}</span>
<a href="#l4.309"></a><span id="l4.309" class="difflineminus">-// void cut ()</span>
<a href="#l4.310"></a><span id="l4.310" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Cut()</span>
<a href="#l4.311"></a><span id="l4.311" class="difflineminus">-{</span>
<a href="#l4.312"></a><span id="l4.312" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.313"></a><span id="l4.313" class="difflineminus">-}</span>
<a href="#l4.314"></a><span id="l4.314" class="difflineminus">-</span>
<a href="#l4.315"></a><span id="l4.315" class="difflineminus">-</span>
<a href="#l4.316"></a><span id="l4.316" class="difflineminus">-// boolean canCut ()</span>
<a href="#l4.317"></a><span id="l4.317" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanCut(bool *_retval)</span>
<a href="#l4.318"></a><span id="l4.318" class="difflineminus">-{</span>
<a href="#l4.319"></a><span id="l4.319" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.320"></a><span id="l4.320" class="difflineminus">-}</span>
<a href="#l4.321"></a><span id="l4.321" class="difflineminus">-</span>
<a href="#l4.322"></a><span id="l4.322" class="difflineminus">-</span>
<a href="#l4.323"></a><span id="l4.323" class="difflineminus">-// void copy ()</span>
<a href="#l4.324"></a><span id="l4.324" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Copy()</span>
<a href="#l4.325"></a><span id="l4.325" class="difflineminus">-{</span>
<a href="#l4.326"></a><span id="l4.326" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.327"></a><span id="l4.327" class="difflineminus">-}</span>
<a href="#l4.328"></a><span id="l4.328" class="difflineminus">-</span>
<a href="#l4.329"></a><span id="l4.329" class="difflineminus">-</span>
<a href="#l4.330"></a><span id="l4.330" class="difflineminus">-// boolean canCopy ()</span>
<a href="#l4.331"></a><span id="l4.331" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanCopy(bool *_retval)</span>
<a href="#l4.332"></a><span id="l4.332" class="difflineminus">-{</span>
<a href="#l4.333"></a><span id="l4.333" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.334"></a><span id="l4.334" class="difflineminus">-}</span>
<a href="#l4.335"></a><span id="l4.335" class="difflineminus">-</span>
<a href="#l4.336"></a><span id="l4.336" class="difflineminus">-</span>
<a href="#l4.337"></a><span id="l4.337" class="difflineminus">-// void paste (in long aSelectionType)</span>
<a href="#l4.338"></a><span id="l4.338" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Paste(PRInt32 aSelectionType)</span>
<a href="#l4.339"></a><span id="l4.339" class="difflineminus">-{</span>
<a href="#l4.340"></a><span id="l4.340" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.341"></a><span id="l4.341" class="difflineminus">-}</span>
<a href="#l4.342"></a><span id="l4.342" class="difflineminus">-</span>
<a href="#l4.343"></a><span id="l4.343" class="difflineminus">-</span>
<a href="#l4.344"></a><span id="l4.344" class="difflineminus">-// boolean canPaste (in long aSelectionType)</span>
<a href="#l4.345"></a><span id="l4.345" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanPaste(PRInt32 aSelectionType, bool *_retval)</span>
<a href="#l4.346"></a><span id="l4.346" class="difflineminus">-{</span>
<a href="#l4.347"></a><span id="l4.347" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.348"></a><span id="l4.348" class="difflineminus">-}</span>
<a href="#l4.349"></a><span id="l4.349" class="difflineminus">-</span>
<a href="#l4.350"></a><span id="l4.350" class="difflineminus">-</span>
<a href="#l4.351"></a><span id="l4.351" class="difflineminus">-class nsITransferable;</span>
<a href="#l4.352"></a><span id="l4.352" class="difflineminus">-</span>
<a href="#l4.353"></a><span id="l4.353" class="difflineminus">-// void pasteTransferable(in nsITransferable aTransferable)</span>
<a href="#l4.354"></a><span id="l4.354" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::PasteTransferable(nsITransferable *aTransferable)</span>
<a href="#l4.355"></a><span id="l4.355" class="difflineminus">-{</span>
<a href="#l4.356"></a><span id="l4.356" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.357"></a><span id="l4.357" class="difflineminus">-}</span>
<a href="#l4.358"></a><span id="l4.358" class="difflineminus">-</span>
<a href="#l4.359"></a><span id="l4.359" class="difflineminus">-</span>
<a href="#l4.360"></a><span id="l4.360" class="difflineminus">-// boolean canPasteTransferable([optional] in nsITransferable aTransferable)</span>
<a href="#l4.361"></a><span id="l4.361" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanPasteTransferable(nsITransferable *aTransferable, bool *aCanPaste)</span>
<a href="#l4.362"></a><span id="l4.362" class="difflineminus">-{</span>
<a href="#l4.363"></a><span id="l4.363" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.364"></a><span id="l4.364" class="difflineminus">-}</span>
<a href="#l4.365"></a><span id="l4.365" class="difflineminus">-</span>
<a href="#l4.366"></a><span id="l4.366" class="difflineminus">-</span>
<a href="#l4.367"></a><span id="l4.367" class="difflineminus">-// void selectAll ()</span>
<a href="#l4.368"></a><span id="l4.368" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SelectAll()</span>
<a href="#l4.369"></a><span id="l4.369" class="difflineminus">-{</span>
<a href="#l4.370"></a><span id="l4.370" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.371"></a><span id="l4.371" class="difflineminus">-}</span>
<a href="#l4.372"></a><span id="l4.372" class="difflineminus">-</span>
<a href="#l4.373"></a><span id="l4.373" class="difflineminus">-</span>
<a href="#l4.374"></a><span id="l4.374" class="difflineminus">-// void beginningOfDocument ()</span>
<a href="#l4.375"></a><span id="l4.375" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::BeginningOfDocument()</span>
<a href="#l4.376"></a><span id="l4.376" class="difflineminus">-{</span>
<a href="#l4.377"></a><span id="l4.377" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.378"></a><span id="l4.378" class="difflineminus">-}</span>
<a href="#l4.379"></a><span id="l4.379" class="difflineminus">-</span>
<a href="#l4.380"></a><span id="l4.380" class="difflineminus">-</span>
<a href="#l4.381"></a><span id="l4.381" class="difflineminus">-// void endOfDocument ()</span>
<a href="#l4.382"></a><span id="l4.382" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::EndOfDocument()</span>
<a href="#l4.383"></a><span id="l4.383" class="difflineminus">-{</span>
<a href="#l4.384"></a><span id="l4.384" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.385"></a><span id="l4.385" class="difflineminus">-}</span>
<a href="#l4.386"></a><span id="l4.386" class="difflineminus">-</span>
<a href="#l4.387"></a><span id="l4.387" class="difflineminus">-</span>
<a href="#l4.388"></a><span id="l4.388" class="difflineminus">-// boolean canDrag (in nsIDOMEvent aEvent)</span>
<a href="#l4.389"></a><span id="l4.389" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CanDrag(nsIDOMEvent *aEvent, bool *_retval)</span>
<a href="#l4.390"></a><span id="l4.390" class="difflineminus">-{</span>
<a href="#l4.391"></a><span id="l4.391" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.392"></a><span id="l4.392" class="difflineminus">-}</span>
<a href="#l4.393"></a><span id="l4.393" class="difflineminus">-</span>
<a href="#l4.394"></a><span id="l4.394" class="difflineminus">-</span>
<a href="#l4.395"></a><span id="l4.395" class="difflineminus">-// void doDrag (in nsIDOMEvent aEvent)</span>
<a href="#l4.396"></a><span id="l4.396" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DoDrag(nsIDOMEvent *aEvent)</span>
<a href="#l4.397"></a><span id="l4.397" class="difflineminus">-{</span>
<a href="#l4.398"></a><span id="l4.398" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.399"></a><span id="l4.399" class="difflineminus">-}</span>
<a href="#l4.400"></a><span id="l4.400" class="difflineminus">-</span>
<a href="#l4.401"></a><span id="l4.401" class="difflineminus">-</span>
<a href="#l4.402"></a><span id="l4.402" class="difflineminus">-// void insertFromDrop (in nsIDOMEvent aEvent)</span>
<a href="#l4.403"></a><span id="l4.403" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::InsertFromDrop(nsIDOMEvent *aEvent)</span>
<a href="#l4.404"></a><span id="l4.404" class="difflineminus">-{</span>
<a href="#l4.405"></a><span id="l4.405" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.406"></a><span id="l4.406" class="difflineminus">-}</span>
<a href="#l4.407"></a><span id="l4.407" class="difflineminus">-</span>
<a href="#l4.408"></a><span id="l4.408" class="difflineminus">-</span>
<a href="#l4.409"></a><span id="l4.409" class="difflineminus">-// void setAttribute (in nsIDOMElement aElement, in AString attributestr, in AString attvalue)</span>
<a href="#l4.410"></a><span id="l4.410" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SetAttribute(nsIDOMElement *aElement, const nsAString &amp; attributestr, const nsAString &amp; attvalue)</span>
<a href="#l4.411"></a><span id="l4.411" class="difflineminus">-{</span>
<a href="#l4.412"></a><span id="l4.412" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.413"></a><span id="l4.413" class="difflineminus">-}</span>
<a href="#l4.414"></a><span id="l4.414" class="difflineminus">-</span>
<a href="#l4.415"></a><span id="l4.415" class="difflineminus">-/* boolean getAttributeValue (in nsIDOMElement aElement, in AString attributestr, out AString resultValue); */</span>
<a href="#l4.416"></a><span id="l4.416" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetAttributeValue(nsIDOMElement *aElement, const nsAString &amp; attributestr, nsAString &amp; resultValue, bool *_retval)</span>
<a href="#l4.417"></a><span id="l4.417" class="difflineminus">-{</span>
<a href="#l4.418"></a><span id="l4.418" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.419"></a><span id="l4.419" class="difflineminus">-}</span>
<a href="#l4.420"></a><span id="l4.420" class="difflineminus">-</span>
<a href="#l4.421"></a><span id="l4.421" class="difflineminus">-/* void removeAttribute (in nsIDOMElement aElement, in AString aAttribute); */</span>
<a href="#l4.422"></a><span id="l4.422" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::RemoveAttribute(nsIDOMElement *aElement, const nsAString &amp; aAttribute)</span>
<a href="#l4.423"></a><span id="l4.423" class="difflineminus">-{</span>
<a href="#l4.424"></a><span id="l4.424" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.425"></a><span id="l4.425" class="difflineminus">-}</span>
<a href="#l4.426"></a><span id="l4.426" class="difflineminus">-</span>
<a href="#l4.427"></a><span id="l4.427" class="difflineminus">-/* void cloneAttribute (in AString aAttribute, in nsIDOMNode aDestNode, in nsIDOMNode aSourceNode); */</span>
<a href="#l4.428"></a><span id="l4.428" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CloneAttribute(const nsAString &amp; aAttribute, nsIDOMNode *aDestNode, nsIDOMNode *aSourceNode)</span>
<a href="#l4.429"></a><span id="l4.429" class="difflineminus">-{</span>
<a href="#l4.430"></a><span id="l4.430" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.431"></a><span id="l4.431" class="difflineminus">-}</span>
<a href="#l4.432"></a><span id="l4.432" class="difflineminus">-</span>
<a href="#l4.433"></a><span id="l4.433" class="difflineminus">-/* void cloneAttributes (in nsIDOMNode destNode, in nsIDOMNode sourceNode); */</span>
<a href="#l4.434"></a><span id="l4.434" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CloneAttributes(nsIDOMNode *destNode, nsIDOMNode *sourceNode)</span>
<a href="#l4.435"></a><span id="l4.435" class="difflineminus">-{</span>
<a href="#l4.436"></a><span id="l4.436" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.437"></a><span id="l4.437" class="difflineminus">-}</span>
<a href="#l4.438"></a><span id="l4.438" class="difflineminus">-</span>
<a href="#l4.439"></a><span id="l4.439" class="difflineminus">-/* nsIDOMNode createNode (in AString tag, in nsIDOMNode parent, in long position); */</span>
<a href="#l4.440"></a><span id="l4.440" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::CreateNode(const nsAString &amp; tag, nsIDOMNode *parent, PRInt32 position, nsIDOMNode **_retval)</span>
<a href="#l4.441"></a><span id="l4.441" class="difflineminus">-{</span>
<a href="#l4.442"></a><span id="l4.442" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.443"></a><span id="l4.443" class="difflineminus">-}</span>
<a href="#l4.444"></a><span id="l4.444" class="difflineminus">-</span>
<a href="#l4.445"></a><span id="l4.445" class="difflineminus">-</span>
<a href="#l4.446"></a><span id="l4.446" class="difflineminus">-// void insertNode (in nsIDOMNode node, in nsIDOMNode parent, in long aPosition)</span>
<a href="#l4.447"></a><span id="l4.447" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::InsertNode(nsIDOMNode *node, nsIDOMNode *parent, PRInt32 aPosition)</span>
<a href="#l4.448"></a><span id="l4.448" class="difflineminus">-{</span>
<a href="#l4.449"></a><span id="l4.449" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.450"></a><span id="l4.450" class="difflineminus">-}</span>
<a href="#l4.451"></a><span id="l4.451" class="difflineminus">-</span>
<a href="#l4.452"></a><span id="l4.452" class="difflineminus">-</span>
<a href="#l4.453"></a><span id="l4.453" class="difflineminus">-// void splitNode (in nsIDOMNode existingRightNode, in long offset, out nsIDOMNode newLeftNode)</span>
<a href="#l4.454"></a><span id="l4.454" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SplitNode(nsIDOMNode *existingRightNode, PRInt32 offset, nsIDOMNode **newLeftNode)</span>
<a href="#l4.455"></a><span id="l4.455" class="difflineminus">-{</span>
<a href="#l4.456"></a><span id="l4.456" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.457"></a><span id="l4.457" class="difflineminus">-}</span>
<a href="#l4.458"></a><span id="l4.458" class="difflineminus">-</span>
<a href="#l4.459"></a><span id="l4.459" class="difflineminus">-</span>
<a href="#l4.460"></a><span id="l4.460" class="difflineminus">-// void joinNodes (in nsIDOMNode leftNode, in nsIDOMNode rightNode, in nsIDOMNode parent)</span>
<a href="#l4.461"></a><span id="l4.461" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::JoinNodes(nsIDOMNode *leftNode, nsIDOMNode *rightNode, nsIDOMNode *parent)</span>
<a href="#l4.462"></a><span id="l4.462" class="difflineminus">-{</span>
<a href="#l4.463"></a><span id="l4.463" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.464"></a><span id="l4.464" class="difflineminus">-}</span>
<a href="#l4.465"></a><span id="l4.465" class="difflineminus">-</span>
<a href="#l4.466"></a><span id="l4.466" class="difflineminus">-</span>
<a href="#l4.467"></a><span id="l4.467" class="difflineminus">-// void deleteNode (in nsIDOMNode child)</span>
<a href="#l4.468"></a><span id="l4.468" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DeleteNode(nsIDOMNode *child)</span>
<a href="#l4.469"></a><span id="l4.469" class="difflineminus">-{</span>
<a href="#l4.470"></a><span id="l4.470" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.471"></a><span id="l4.471" class="difflineminus">-}</span>
<a href="#l4.472"></a><span id="l4.472" class="difflineminus">-</span>
<a href="#l4.473"></a><span id="l4.473" class="difflineminus">-</span>
<a href="#l4.474"></a><span id="l4.474" class="difflineminus">-// void markNodeDirty (in nsIDOMNode node)</span>
<a href="#l4.475"></a><span id="l4.475" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::MarkNodeDirty(nsIDOMNode *node)</span>
<a href="#l4.476"></a><span id="l4.476" class="difflineminus">-{</span>
<a href="#l4.477"></a><span id="l4.477" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.478"></a><span id="l4.478" class="difflineminus">-}</span>
<a href="#l4.479"></a><span id="l4.479" class="difflineminus">-</span>
<a href="#l4.480"></a><span id="l4.480" class="difflineminus">-</span>
<a href="#l4.481"></a><span id="l4.481" class="difflineminus">-// void switchTextDirection ()</span>
<a href="#l4.482"></a><span id="l4.482" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::SwitchTextDirection()</span>
<a href="#l4.483"></a><span id="l4.483" class="difflineminus">-{</span>
<a href="#l4.484"></a><span id="l4.484" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.485"></a><span id="l4.485" class="difflineminus">-}</span>
<a href="#l4.486"></a><span id="l4.486" class="difflineminus">-</span>
<a href="#l4.487"></a><span id="l4.487" class="difflineminus">-</span>
<a href="#l4.488"></a><span id="l4.488" class="difflineminus">-// AString outputToString (in AString formatType, in unsigned long flags)</span>
<a href="#l4.489"></a><span id="l4.489" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::OutputToString(const nsAString &amp; formatType, PRUint32 flags, nsAString &amp; _retval)</span>
<a href="#l4.490"></a><span id="l4.490" class="difflineminus">-{</span>
<a href="#l4.491"></a><span id="l4.491" class="difflineminus">-  _retval = m_body;</span>
<a href="#l4.492"></a><span id="l4.492" class="difflineminus">-</span>
<a href="#l4.493"></a><span id="l4.493" class="difflineminus">-  return NS_OK;</span>
<a href="#l4.494"></a><span id="l4.494" class="difflineminus">-}</span>
<a href="#l4.495"></a><span id="l4.495" class="difflineminus">-</span>
<a href="#l4.496"></a><span id="l4.496" class="difflineminus">-</span>
<a href="#l4.497"></a><span id="l4.497" class="difflineminus">-// void outputToStream (in nsIOutputStream aStream, in AString formatType, in ACString charsetOverride, in unsigned long flags)</span>
<a href="#l4.498"></a><span id="l4.498" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::OutputToStream(nsIOutputStream *aStream, const nsAString &amp; formatType, const nsACString &amp; charsetOverride, PRUint32 flags)</span>
<a href="#l4.499"></a><span id="l4.499" class="difflineminus">-{</span>
<a href="#l4.500"></a><span id="l4.500" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.501"></a><span id="l4.501" class="difflineminus">-}</span>
<a href="#l4.502"></a><span id="l4.502" class="difflineminus">-</span>
<a href="#l4.503"></a><span id="l4.503" class="difflineminus">-</span>
<a href="#l4.504"></a><span id="l4.504" class="difflineminus">-// void addEditorObserver (in nsIEditorObserver observer)</span>
<a href="#l4.505"></a><span id="l4.505" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::AddEditorObserver(nsIEditorObserver *observer)</span>
<a href="#l4.506"></a><span id="l4.506" class="difflineminus">-{</span>
<a href="#l4.507"></a><span id="l4.507" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.508"></a><span id="l4.508" class="difflineminus">-}</span>
<a href="#l4.509"></a><span id="l4.509" class="difflineminus">-</span>
<a href="#l4.510"></a><span id="l4.510" class="difflineminus">-</span>
<a href="#l4.511"></a><span id="l4.511" class="difflineminus">-// void removeEditorObserver (in nsIEditorObserver observer)</span>
<a href="#l4.512"></a><span id="l4.512" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::RemoveEditorObserver(nsIEditorObserver *observer)</span>
<a href="#l4.513"></a><span id="l4.513" class="difflineminus">-{</span>
<a href="#l4.514"></a><span id="l4.514" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.515"></a><span id="l4.515" class="difflineminus">-}</span>
<a href="#l4.516"></a><span id="l4.516" class="difflineminus">-</span>
<a href="#l4.517"></a><span id="l4.517" class="difflineminus">-</span>
<a href="#l4.518"></a><span id="l4.518" class="difflineminus">-// void addEditActionListener (in nsIEditActionListener listener)</span>
<a href="#l4.519"></a><span id="l4.519" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::AddEditActionListener(nsIEditActionListener *listener)</span>
<a href="#l4.520"></a><span id="l4.520" class="difflineminus">-{</span>
<a href="#l4.521"></a><span id="l4.521" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.522"></a><span id="l4.522" class="difflineminus">-}</span>
<a href="#l4.523"></a><span id="l4.523" class="difflineminus">-</span>
<a href="#l4.524"></a><span id="l4.524" class="difflineminus">-</span>
<a href="#l4.525"></a><span id="l4.525" class="difflineminus">-// void removeEditActionListener (in nsIEditActionListener listener)</span>
<a href="#l4.526"></a><span id="l4.526" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::RemoveEditActionListener(nsIEditActionListener *listener)</span>
<a href="#l4.527"></a><span id="l4.527" class="difflineminus">-{</span>
<a href="#l4.528"></a><span id="l4.528" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.529"></a><span id="l4.529" class="difflineminus">-}</span>
<a href="#l4.530"></a><span id="l4.530" class="difflineminus">-</span>
<a href="#l4.531"></a><span id="l4.531" class="difflineminus">-</span>
<a href="#l4.532"></a><span id="l4.532" class="difflineminus">-// void addDocumentStateListener (in nsIDocumentStateListener listener)</span>
<a href="#l4.533"></a><span id="l4.533" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::AddDocumentStateListener(nsIDocumentStateListener *listener)</span>
<a href="#l4.534"></a><span id="l4.534" class="difflineminus">-{</span>
<a href="#l4.535"></a><span id="l4.535" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.536"></a><span id="l4.536" class="difflineminus">-}</span>
<a href="#l4.537"></a><span id="l4.537" class="difflineminus">-</span>
<a href="#l4.538"></a><span id="l4.538" class="difflineminus">-</span>
<a href="#l4.539"></a><span id="l4.539" class="difflineminus">-// void removeDocumentStateListener (in nsIDocumentStateListener listener)</span>
<a href="#l4.540"></a><span id="l4.540" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::RemoveDocumentStateListener(nsIDocumentStateListener *listener)</span>
<a href="#l4.541"></a><span id="l4.541" class="difflineminus">-{</span>
<a href="#l4.542"></a><span id="l4.542" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.543"></a><span id="l4.543" class="difflineminus">-}</span>
<a href="#l4.544"></a><span id="l4.544" class="difflineminus">-</span>
<a href="#l4.545"></a><span id="l4.545" class="difflineminus">-</span>
<a href="#l4.546"></a><span id="l4.546" class="difflineminus">-// void dumpContentTree ()</span>
<a href="#l4.547"></a><span id="l4.547" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DumpContentTree()</span>
<a href="#l4.548"></a><span id="l4.548" class="difflineminus">-{</span>
<a href="#l4.549"></a><span id="l4.549" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.550"></a><span id="l4.550" class="difflineminus">-}</span>
<a href="#l4.551"></a><span id="l4.551" class="difflineminus">-</span>
<a href="#l4.552"></a><span id="l4.552" class="difflineminus">-</span>
<a href="#l4.553"></a><span id="l4.553" class="difflineminus">-// void debugDumpContent ()</span>
<a href="#l4.554"></a><span id="l4.554" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DebugDumpContent()</span>
<a href="#l4.555"></a><span id="l4.555" class="difflineminus">-{</span>
<a href="#l4.556"></a><span id="l4.556" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.557"></a><span id="l4.557" class="difflineminus">-}</span>
<a href="#l4.558"></a><span id="l4.558" class="difflineminus">-</span>
<a href="#l4.559"></a><span id="l4.559" class="difflineminus">-</span>
<a href="#l4.560"></a><span id="l4.560" class="difflineminus">-// void debugUnitTests (out long outNumTests, out long outNumTestsFailed)</span>
<a href="#l4.561"></a><span id="l4.561" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::DebugUnitTests(PRInt32 *outNumTests, PRInt32 *outNumTestsFailed)</span>
<a href="#l4.562"></a><span id="l4.562" class="difflineminus">-{</span>
<a href="#l4.563"></a><span id="l4.563" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.564"></a><span id="l4.564" class="difflineminus">-}</span>
<a href="#l4.565"></a><span id="l4.565" class="difflineminus">-</span>
<a href="#l4.566"></a><span id="l4.566" class="difflineminus">-//  readonly attribute boolean transactionManager</span>
<a href="#l4.567"></a><span id="l4.567" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetLastKeypressEventTrusted(bool *aResult)</span>
<a href="#l4.568"></a><span id="l4.568" class="difflineminus">-{</span>
<a href="#l4.569"></a><span id="l4.569" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.570"></a><span id="l4.570" class="difflineminus">-}</span>
<a href="#l4.571"></a><span id="l4.571" class="difflineminus">-</span>
<a href="#l4.572"></a><span id="l4.572" class="difflineminus">-// void pasteAsQuotation (in long aSelectionType)</span>
<a href="#l4.573"></a><span id="l4.573" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::PasteAsQuotation(PRInt32 aSelectionType)</span>
<a href="#l4.574"></a><span id="l4.574" class="difflineminus">-{</span>
<a href="#l4.575"></a><span id="l4.575" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.576"></a><span id="l4.576" class="difflineminus">-}</span>
<a href="#l4.577"></a><span id="l4.577" class="difflineminus">-</span>
<a href="#l4.578"></a><span id="l4.578" class="difflineminus">-</span>
<a href="#l4.579"></a><span id="l4.579" class="difflineminus">-// nsIDOMNode insertAsQuotation (in AString aQuotedText)</span>
<a href="#l4.580"></a><span id="l4.580" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::InsertAsQuotation(const nsAString &amp; aQuotedText, nsIDOMNode **_retval)</span>
<a href="#l4.581"></a><span id="l4.581" class="difflineminus">-{</span>
<a href="#l4.582"></a><span id="l4.582" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.583"></a><span id="l4.583" class="difflineminus">-}</span>
<a href="#l4.584"></a><span id="l4.584" class="difflineminus">-</span>
<a href="#l4.585"></a><span id="l4.585" class="difflineminus">-</span>
<a href="#l4.586"></a><span id="l4.586" class="difflineminus">-// void insertTextWithQuotations (in DOMString aStringToInsert)</span>
<a href="#l4.587"></a><span id="l4.587" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::InsertTextWithQuotations(const nsAString &amp; aStringToInsert)</span>
<a href="#l4.588"></a><span id="l4.588" class="difflineminus">-{</span>
<a href="#l4.589"></a><span id="l4.589" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.590"></a><span id="l4.590" class="difflineminus">-}</span>
<a href="#l4.591"></a><span id="l4.591" class="difflineminus">-</span>
<a href="#l4.592"></a><span id="l4.592" class="difflineminus">-</span>
<a href="#l4.593"></a><span id="l4.593" class="difflineminus">-// void pasteAsCitedQuotation (in AString aCitation, in long aSelectionType)</span>
<a href="#l4.594"></a><span id="l4.594" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::PasteAsCitedQuotation(const nsAString &amp; aCitation, PRInt32 aSelectionType)</span>
<a href="#l4.595"></a><span id="l4.595" class="difflineminus">-{</span>
<a href="#l4.596"></a><span id="l4.596" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.597"></a><span id="l4.597" class="difflineminus">-}</span>
<a href="#l4.598"></a><span id="l4.598" class="difflineminus">-</span>
<a href="#l4.599"></a><span id="l4.599" class="difflineminus">-</span>
<a href="#l4.600"></a><span id="l4.600" class="difflineminus">-// nsIDOMNode insertAsCitedQuotation (in AString aQuotedText, in AString aCitation, in boolean aInsertHTML)</span>
<a href="#l4.601"></a><span id="l4.601" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::InsertAsCitedQuotation(const nsAString &amp; aQuotedText, const nsAString &amp; aCitation, bool aInsertHTML, nsIDOMNode **_retval)</span>
<a href="#l4.602"></a><span id="l4.602" class="difflineminus">-{</span>
<a href="#l4.603"></a><span id="l4.603" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.604"></a><span id="l4.604" class="difflineminus">-}</span>
<a href="#l4.605"></a><span id="l4.605" class="difflineminus">-</span>
<a href="#l4.606"></a><span id="l4.606" class="difflineminus">-</span>
<a href="#l4.607"></a><span id="l4.607" class="difflineminus">-// void rewrap (in boolean aRespectNewlines)</span>
<a href="#l4.608"></a><span id="l4.608" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::Rewrap(bool aRespectNewlines)</span>
<a href="#l4.609"></a><span id="l4.609" class="difflineminus">-{</span>
<a href="#l4.610"></a><span id="l4.610" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.611"></a><span id="l4.611" class="difflineminus">-}</span>
<a href="#l4.612"></a><span id="l4.612" class="difflineminus">-</span>
<a href="#l4.613"></a><span id="l4.613" class="difflineminus">-</span>
<a href="#l4.614"></a><span id="l4.614" class="difflineminus">-// void stripCites ()</span>
<a href="#l4.615"></a><span id="l4.615" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::StripCites()</span>
<a href="#l4.616"></a><span id="l4.616" class="difflineminus">-{</span>
<a href="#l4.617"></a><span id="l4.617" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.618"></a><span id="l4.618" class="difflineminus">-}</span>
<a href="#l4.619"></a><span id="l4.619" class="difflineminus">-</span>
<a href="#l4.620"></a><span id="l4.620" class="difflineminus">-</span>
<a href="#l4.621"></a><span id="l4.621" class="difflineminus">-// nsISupportsArray getEmbeddedObjects ()</span>
<a href="#l4.622"></a><span id="l4.622" class="difflineminus">-NS_IMETHODIMP nsEudoraEditor::GetEmbeddedObjects(nsISupportsArray ** aNodeList)</span>
<a href="#l4.623"></a><span id="l4.623" class="difflineplus">+nsresult nsEudoraEditor::GetEmbeddedObjects(nsISupportsArray ** aNodeList)</span>
<a href="#l4.624"></a><span id="l4.624"> {</span>
<a href="#l4.625"></a><span id="l4.625">   NS_ENSURE_ARG_POINTER(aNodeList);</span>
<a href="#l4.626"></a><span id="l4.626"> </span>
<a href="#l4.627"></a><span id="l4.627">   // Check to see if we were already called</span>
<a href="#l4.628"></a><span id="l4.628">   if (m_EmbeddedObjectList != nsnull)</span>
<a href="#l4.629"></a><span id="l4.629">   {</span>
<a href="#l4.630"></a><span id="l4.630">     *aNodeList = m_EmbeddedObjectList;</span>
<a href="#l4.631"></a><span id="l4.631">     return NS_OK;</span>
<a href="#l4.632"></a><span id="l4.632" class="difflineat">@@ -777,18 +189,24 @@ NS_IMETHODIMP nsEudoraEditor::GetEmbedde</span>
<a href="#l4.633"></a><span id="l4.633">         }</span>
<a href="#l4.634"></a><span id="l4.634">       }</span>
<a href="#l4.635"></a><span id="l4.635"> </span>
<a href="#l4.636"></a><span id="l4.636">       // Get the URL for the embedded image</span>
<a href="#l4.637"></a><span id="l4.637">       nsCString     embeddedImageURL;</span>
<a href="#l4.638"></a><span id="l4.638">       rv = NS_GetURLSpecFromFile(embeddedImageSpec, embeddedImageURL);</span>
<a href="#l4.639"></a><span id="l4.639">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l4.640"></a><span id="l4.640"> </span>
<a href="#l4.641"></a><span id="l4.641" class="difflineplus">+      NS_ConvertASCIItoUTF16 srcUrl(embeddedImageURL);</span>
<a href="#l4.642"></a><span id="l4.642" class="difflineplus">+      nsString cid;</span>
<a href="#l4.643"></a><span id="l4.643" class="difflineplus">+      // We're going to remember the original cid in the image element,</span>
<a href="#l4.644"></a><span id="l4.644" class="difflineplus">+      // which the send code will retrieve as the kMozCIDAttrName property.</span>
<a href="#l4.645"></a><span id="l4.645" class="difflineplus">+      GetEmbeddedImageCID(cidHashValue, srcUrl, cid);</span>
<a href="#l4.646"></a><span id="l4.646">       // Create the embedded image node</span>
<a href="#l4.647"></a><span id="l4.647" class="difflineminus">-      nsEudoraHTMLImageElement *         image = new nsEudoraHTMLImageElement(this, NS_ConvertASCIItoUTF16(embeddedImageURL), cidHashValue);</span>
<a href="#l4.648"></a><span id="l4.648" class="difflineplus">+      nsEudoraHTMLImageElement *image =</span>
<a href="#l4.649"></a><span id="l4.649" class="difflineplus">+        new nsEudoraHTMLImageElement(srcUrl, cid);</span>
<a href="#l4.650"></a><span id="l4.650"> </span>
<a href="#l4.651"></a><span id="l4.651">       nsCOMPtr&lt;nsIDOMHTMLImageElement&gt;   imageNode;</span>
<a href="#l4.652"></a><span id="l4.652">       image-&gt;QueryInterface( NS_GET_IID(nsIDOMHTMLImageElement), getter_AddRefs(imageNode) );</span>
<a href="#l4.653"></a><span id="l4.653"> </span>
<a href="#l4.654"></a><span id="l4.654">       // Append the embedded image node to the list</span>
<a href="#l4.655"></a><span id="l4.655">       (*aNodeList)-&gt;AppendElement(imageNode);</span>
<a href="#l4.656"></a><span id="l4.656"> </span>
<a href="#l4.657"></a><span id="l4.657">       PRInt32   endEmbeddedContentLine = m_body.Find(&quot;\r\n&quot;, PR_TRUE, startEmbeddedContentLine+1);</span>
<a href="#l4.658"></a><span id="l4.658" class="difflineat">@@ -806,32 +224,32 @@ NS_IMETHODIMP nsEudoraEditor::GetEmbedde</span>
<a href="#l4.659"></a><span id="l4.659">     // Assume at most one translation for &quot;Embedded Content: &quot; in a given message</span>
<a href="#l4.660"></a><span id="l4.660">     if (foundEmbeddedContentLines)</span>
<a href="#l4.661"></a><span id="l4.661">       break;</span>
<a href="#l4.662"></a><span id="l4.662">   }</span>
<a href="#l4.663"></a><span id="l4.663"> </span>
<a href="#l4.664"></a><span id="l4.664">   return NS_OK;</span>
<a href="#l4.665"></a><span id="l4.665"> }</span>
<a href="#l4.666"></a><span id="l4.666"> </span>
<a href="#l4.667"></a><span id="l4.667" class="difflineminus">-bool nsEudoraEditor::UpdateEmbeddedImageReference(PRUint32 aCIDHash, const nsAString &amp; aOldRef, const nsAString &amp; aUpdatedRef)</span>
<a href="#l4.668"></a><span id="l4.668" class="difflineplus">+bool nsEudoraEditor::GetEmbeddedImageCID(PRUint32 aCIDHash, const nsAString &amp; aOldRef, nsString &amp;aCID)</span>
<a href="#l4.669"></a><span id="l4.669"> {</span>
<a href="#l4.670"></a><span id="l4.670">   bool      foundMatch = false;</span>
<a href="#l4.671"></a><span id="l4.671">   PRInt32   startImageTag = 0;</span>
<a href="#l4.672"></a><span id="l4.672">   PRInt32   closeImageTag = 0;</span>
<a href="#l4.673"></a><span id="l4.673"> </span>
<a href="#l4.674"></a><span id="l4.674" class="difflineminus">-  while ( (startImageTag = m_body.Find(&quot;&lt;img&quot;, PR_TRUE, closeImageTag)) != kNotFound )</span>
<a href="#l4.675"></a><span id="l4.675" class="difflineplus">+  while ( (startImageTag = m_body.Find(&quot;&lt;img&quot;, true, closeImageTag)) != kNotFound )</span>
<a href="#l4.676"></a><span id="l4.676">   {</span>
<a href="#l4.677"></a><span id="l4.677" class="difflineminus">-    closeImageTag = m_body.Find(&quot;&gt;&quot;, PR_FALSE, startImageTag);</span>
<a href="#l4.678"></a><span id="l4.678" class="difflineplus">+    closeImageTag = m_body.Find(&quot;&gt;&quot;, false, startImageTag);</span>
<a href="#l4.679"></a><span id="l4.679"> </span>
<a href="#l4.680"></a><span id="l4.680">     // We should always find a close tag, bail if we don't</span>
<a href="#l4.681"></a><span id="l4.681">     if (closeImageTag == kNotFound)</span>
<a href="#l4.682"></a><span id="l4.682">       break;</span>
<a href="#l4.683"></a><span id="l4.683"> </span>
<a href="#l4.684"></a><span id="l4.684">     // Find the source attribute and make sure it's for our image tag</span>
<a href="#l4.685"></a><span id="l4.685" class="difflineminus">-    PRInt32   startSrcValue = m_body.Find(&quot;src&quot;, PR_TRUE, startImageTag);</span>
<a href="#l4.686"></a><span id="l4.686" class="difflineplus">+    PRInt32   startSrcValue = m_body.Find(&quot;src&quot;, true, startImageTag);</span>
<a href="#l4.687"></a><span id="l4.687">     if ( (startSrcValue == kNotFound) || (startSrcValue &gt; closeImageTag) )</span>
<a href="#l4.688"></a><span id="l4.688">       continue;</span>
<a href="#l4.689"></a><span id="l4.689"> </span>
<a href="#l4.690"></a><span id="l4.690">     // Move past the src</span>
<a href="#l4.691"></a><span id="l4.691">     startSrcValue += 3;</span>
<a href="#l4.692"></a><span id="l4.692"> </span>
<a href="#l4.693"></a><span id="l4.693">     // Move past any whitespace</span>
<a href="#l4.694"></a><span id="l4.694">     while ( isspace(m_body.CharAt(startSrcValue)) )</span>
<a href="#l4.695"></a><span id="l4.695" class="difflineat">@@ -855,39 +273,33 @@ bool nsEudoraEditor::UpdateEmbeddedImage</span>
<a href="#l4.696"></a><span id="l4.696"> </span>
<a href="#l4.697"></a><span id="l4.697">     // Move past the quote</span>
<a href="#l4.698"></a><span id="l4.698">     ++startSrcValue;</span>
<a href="#l4.699"></a><span id="l4.699"> </span>
<a href="#l4.700"></a><span id="l4.700">     PRInt32   endSrcValue = m_body.FindChar(quoteChar, startSrcValue);</span>
<a href="#l4.701"></a><span id="l4.701">     PRInt32   srcLength = endSrcValue - startSrcValue;</span>
<a href="#l4.702"></a><span id="l4.702"> </span>
<a href="#l4.703"></a><span id="l4.703">     nsString  srcValue;</span>
<a href="#l4.704"></a><span id="l4.704" class="difflineminus">-    srcValue.Assign(Substring(m_body, startSrcValue, srcLength));</span>
<a href="#l4.705"></a><span id="l4.705" class="difflineplus">+    aCID.Assign(Substring(m_body, startSrcValue, srcLength));</span>
<a href="#l4.706"></a><span id="l4.706"> </span>
<a href="#l4.707"></a><span id="l4.707">     if (aCIDHash != 0)</span>
<a href="#l4.708"></a><span id="l4.708">     {</span>
<a href="#l4.709"></a><span id="l4.709">       // Verify source value starts with &quot;cid:&quot;</span>
<a href="#l4.710"></a><span id="l4.710" class="difflineminus">-      if (!StringBeginsWith(srcValue, NS_LITERAL_STRING(&quot;cid:&quot;), nsCaseInsensitiveStringComparator()))</span>
<a href="#l4.711"></a><span id="l4.711" class="difflineplus">+      if (!StringBeginsWith(aCID, NS_LITERAL_STRING(&quot;cid:&quot;), nsCaseInsensitiveStringComparator()))</span>
<a href="#l4.712"></a><span id="l4.712">         continue;</span>
<a href="#l4.713"></a><span id="l4.713"> </span>
<a href="#l4.714"></a><span id="l4.714">       // Remove &quot;cid:&quot; from the start</span>
<a href="#l4.715"></a><span id="l4.715" class="difflineminus">-      srcValue.Cut(0, 4);</span>
<a href="#l4.716"></a><span id="l4.716" class="difflineplus">+      aCID.Cut(0, 4);</span>
<a href="#l4.717"></a><span id="l4.717"> </span>
<a href="#l4.718"></a><span id="l4.718" class="difflineminus">-      PRUint32  hashValue = EudoraHashString( NS_LossyConvertUTF16toASCII(srcValue).get() );</span>
<a href="#l4.719"></a><span id="l4.719" class="difflineplus">+      PRUint32  hashValue = EudoraHashString( NS_LossyConvertUTF16toASCII(aCID).get() );</span>
<a href="#l4.720"></a><span id="l4.720">       foundMatch = (hashValue == aCIDHash);</span>
<a href="#l4.721"></a><span id="l4.721">     }</span>
<a href="#l4.722"></a><span id="l4.722">     else</span>
<a href="#l4.723"></a><span id="l4.723">     {</span>
<a href="#l4.724"></a><span id="l4.724" class="difflineminus">-      foundMatch = srcValue.Equals(aOldRef);</span>
<a href="#l4.725"></a><span id="l4.725" class="difflineminus">-    }</span>
<a href="#l4.726"></a><span id="l4.726" class="difflineminus">-</span>
<a href="#l4.727"></a><span id="l4.727" class="difflineminus">-    if (foundMatch)</span>
<a href="#l4.728"></a><span id="l4.728" class="difflineminus">-    {</span>
<a href="#l4.729"></a><span id="l4.729" class="difflineminus">-      m_body.Replace(startSrcValue, srcLength, aUpdatedRef);</span>
<a href="#l4.730"></a><span id="l4.730" class="difflineminus">-      break;</span>
<a href="#l4.731"></a><span id="l4.731" class="difflineplus">+      foundMatch = aCID.Equals(aOldRef);</span>
<a href="#l4.732"></a><span id="l4.732">     }</span>
<a href="#l4.733"></a><span id="l4.733">   }</span>
<a href="#l4.734"></a><span id="l4.734"> </span>
<a href="#l4.735"></a><span id="l4.735">   return foundMatch;</span>
<a href="#l4.736"></a><span id="l4.736"> }</span>
<a href="#l4.737"></a><span id="l4.737"> </span>
<a href="#l4.738"></a><span id="l4.738"> </span>
<a href="#l4.739"></a><span id="l4.739"> bool nsEudoraEditor::HasEmbeddedContent()</span>
<a href="#l4.740"></a><span id="l4.740" class="difflineat">@@ -902,39 +314,39 @@ bool nsEudoraEditor::HasEmbeddedContent(</span>
<a href="#l4.741"></a><span id="l4.741">     if (bHasEmbeddedContent)</span>
<a href="#l4.742"></a><span id="l4.742">       break;</span>
<a href="#l4.743"></a><span id="l4.743">   }</span>
<a href="#l4.744"></a><span id="l4.744"> </span>
<a href="#l4.745"></a><span id="l4.745">   return bHasEmbeddedContent;</span>
<a href="#l4.746"></a><span id="l4.746"> }</span>
<a href="#l4.747"></a><span id="l4.747"> </span>
<a href="#l4.748"></a><span id="l4.748"> </span>
<a href="#l4.749"></a><span id="l4.749" class="difflineminus">-nsEudoraHTMLImageElement::nsEudoraHTMLImageElement(nsEudoraEditor * pEditor, const nsAString &amp; aSrc, PRUint32 aCIDHash)</span>
<a href="#l4.750"></a><span id="l4.750" class="difflineminus">-  : m_pEditor(pEditor), m_src(aSrc), m_cidHash(aCIDHash)</span>
<a href="#l4.751"></a><span id="l4.751" class="difflineplus">+nsEudoraHTMLImageElement::nsEudoraHTMLImageElement(const nsAString &amp; aSrc,</span>
<a href="#l4.752"></a><span id="l4.752" class="difflineplus">+                                                   const nsAString &amp;aCID)</span>
<a href="#l4.753"></a><span id="l4.753" class="difflineplus">+  : m_src(aSrc), m_cidOrig(aCID)</span>
<a href="#l4.754"></a><span id="l4.754"> {</span>
<a href="#l4.755"></a><span id="l4.755" class="difflineminus">-  /* member initializers and constructor code */</span>
<a href="#l4.756"></a><span id="l4.756"> }</span>
<a href="#l4.757"></a><span id="l4.757"> </span>
<a href="#l4.758"></a><span id="l4.758"> nsEudoraHTMLImageElement::~nsEudoraHTMLImageElement()</span>
<a href="#l4.759"></a><span id="l4.759"> {</span>
<a href="#l4.760"></a><span id="l4.760" class="difflineminus">-  /* destructor code */</span>
<a href="#l4.761"></a><span id="l4.761"> }</span>
<a href="#l4.762"></a><span id="l4.762"> </span>
<a href="#l4.763"></a><span id="l4.763"> </span>
<a href="#l4.764"></a><span id="l4.764"> // readonly attribute DOMString nodeName</span>
<a href="#l4.765"></a><span id="l4.765"> NS_IMETHODIMP nsEudoraHTMLImageElement::GetNodeName(nsAString &amp; aNodeName)</span>
<a href="#l4.766"></a><span id="l4.766"> {</span>
<a href="#l4.767"></a><span id="l4.767">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.768"></a><span id="l4.768"> }</span>
<a href="#l4.769"></a><span id="l4.769"> </span>
<a href="#l4.770"></a><span id="l4.770"> </span>
<a href="#l4.771"></a><span id="l4.771"> // attribute DOMString nodeValue</span>
<a href="#l4.772"></a><span id="l4.772"> NS_IMETHODIMP nsEudoraHTMLImageElement::GetNodeValue(nsAString &amp; aNodeValue)</span>
<a href="#l4.773"></a><span id="l4.773"> {</span>
<a href="#l4.774"></a><span id="l4.774" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.775"></a><span id="l4.775" class="difflineplus">+  aNodeValue = m_cidOrig;</span>
<a href="#l4.776"></a><span id="l4.776" class="difflineplus">+  return NS_OK;</span>
<a href="#l4.777"></a><span id="l4.777"> }</span>
<a href="#l4.778"></a><span id="l4.778"> </span>
<a href="#l4.779"></a><span id="l4.779"> </span>
<a href="#l4.780"></a><span id="l4.780"> NS_IMETHODIMP nsEudoraHTMLImageElement::SetNodeValue(const nsAString &amp; aNodeValue)</span>
<a href="#l4.781"></a><span id="l4.781"> {</span>
<a href="#l4.782"></a><span id="l4.782">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.783"></a><span id="l4.783"> }</span>
<a href="#l4.784"></a><span id="l4.784"> </span>
<a href="#l4.785"></a><span id="l4.785" class="difflineat">@@ -1091,24 +503,22 @@ NS_IMETHODIMP nsEudoraHTMLImageElement::</span>
<a href="#l4.786"></a><span id="l4.786"> </span>
<a href="#l4.787"></a><span id="l4.787"> </span>
<a href="#l4.788"></a><span id="l4.788"> // readonly attribute DOMString tagName</span>
<a href="#l4.789"></a><span id="l4.789"> NS_IMETHODIMP nsEudoraHTMLImageElement::GetTagName(nsAString &amp; aTagName)</span>
<a href="#l4.790"></a><span id="l4.790"> {</span>
<a href="#l4.791"></a><span id="l4.791">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.792"></a><span id="l4.792"> }</span>
<a href="#l4.793"></a><span id="l4.793"> </span>
<a href="#l4.794"></a><span id="l4.794" class="difflineminus">-</span>
<a href="#l4.795"></a><span id="l4.795"> // DOMString getAttribute (in DOMString name)</span>
<a href="#l4.796"></a><span id="l4.796"> NS_IMETHODIMP nsEudoraHTMLImageElement::GetAttribute(const nsAString &amp; name, nsAString &amp; _retval)</span>
<a href="#l4.797"></a><span id="l4.797"> {</span>
<a href="#l4.798"></a><span id="l4.798">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.799"></a><span id="l4.799"> }</span>
<a href="#l4.800"></a><span id="l4.800"> </span>
<a href="#l4.801"></a><span id="l4.801" class="difflineminus">-</span>
<a href="#l4.802"></a><span id="l4.802"> // void setAttribute (in DOMString name, in DOMString value)  raises (DOMException)</span>
<a href="#l4.803"></a><span id="l4.803"> NS_IMETHODIMP nsEudoraHTMLImageElement::SetAttribute(const nsAString &amp; name, const nsAString &amp; value)</span>
<a href="#l4.804"></a><span id="l4.804"> {</span>
<a href="#l4.805"></a><span id="l4.805">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.806"></a><span id="l4.806"> }</span>
<a href="#l4.807"></a><span id="l4.807"> </span>
<a href="#l4.808"></a><span id="l4.808"> </span>
<a href="#l4.809"></a><span id="l4.809"> // void removeAttribute (in DOMString name)  raises (DOMException)</span>
<a href="#l4.810"></a><span id="l4.810" class="difflineat">@@ -1613,38 +1023,28 @@ NS_IMETHODIMP nsEudoraHTMLImageElement::</span>
<a href="#l4.811"></a><span id="l4.811"> }</span>
<a href="#l4.812"></a><span id="l4.812"> </span>
<a href="#l4.813"></a><span id="l4.813"> </span>
<a href="#l4.814"></a><span id="l4.814"> NS_IMETHODIMP nsEudoraHTMLImageElement::SetLongDesc(const nsAString &amp; aLongDesc)</span>
<a href="#l4.815"></a><span id="l4.815"> {</span>
<a href="#l4.816"></a><span id="l4.816">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.817"></a><span id="l4.817"> }</span>
<a href="#l4.818"></a><span id="l4.818"> </span>
<a href="#l4.819"></a><span id="l4.819" class="difflineminus">-</span>
<a href="#l4.820"></a><span id="l4.820" class="difflineminus">-// attribute DOMString src</span>
<a href="#l4.821"></a><span id="l4.821"> NS_IMETHODIMP nsEudoraHTMLImageElement::GetSrc(nsAString &amp; aSrc)</span>
<a href="#l4.822"></a><span id="l4.822"> {</span>
<a href="#l4.823"></a><span id="l4.823">   aSrc = m_src;</span>
<a href="#l4.824"></a><span id="l4.824" class="difflineminus">-</span>
<a href="#l4.825"></a><span id="l4.825">   return NS_OK;</span>
<a href="#l4.826"></a><span id="l4.826"> }</span>
<a href="#l4.827"></a><span id="l4.827"> </span>
<a href="#l4.828"></a><span id="l4.828" class="difflineminus">-</span>
<a href="#l4.829"></a><span id="l4.829"> NS_IMETHODIMP nsEudoraHTMLImageElement::SetSrc(const nsAString &amp; aSrc)</span>
<a href="#l4.830"></a><span id="l4.830"> {</span>
<a href="#l4.831"></a><span id="l4.831" class="difflineminus">-  nsEudoraEditor *    pEditor = static_cast &lt;nsEudoraEditor *&gt; (static_cast &lt;nsIEditor *&gt; (m_pEditor.get()));</span>
<a href="#l4.832"></a><span id="l4.832" class="difflineminus">-</span>
<a href="#l4.833"></a><span id="l4.833" class="difflineminus">-  if ( pEditor-&gt;UpdateEmbeddedImageReference(m_cidHash, m_src, aSrc) )</span>
<a href="#l4.834"></a><span id="l4.834" class="difflineminus">-    m_cidHash = 0;</span>
<a href="#l4.835"></a><span id="l4.835">   m_src = aSrc;</span>
<a href="#l4.836"></a><span id="l4.836" class="difflineminus">-</span>
<a href="#l4.837"></a><span id="l4.837">   return NS_OK;</span>
<a href="#l4.838"></a><span id="l4.838"> }</span>
<a href="#l4.839"></a><span id="l4.839"> </span>
<a href="#l4.840"></a><span id="l4.840" class="difflineminus">-</span>
<a href="#l4.841"></a><span id="l4.841"> // attribute DOMString useMap</span>
<a href="#l4.842"></a><span id="l4.842"> NS_IMETHODIMP nsEudoraHTMLImageElement::GetUseMap(nsAString &amp; aUseMap)</span>
<a href="#l4.843"></a><span id="l4.843"> {</span>
<a href="#l4.844"></a><span id="l4.844">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.845"></a><span id="l4.845"> }</span>
<a href="#l4.846"></a><span id="l4.846"> </span>
<a href="#l4.847"></a><span id="l4.847"> </span>
<a href="#l4.848"></a><span id="l4.848"> NS_IMETHODIMP nsEudoraHTMLImageElement::SetUseMap(const nsAString &amp; aUseMap)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraEditor.h</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraEditor.h</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -40,49 +40,43 @@</span>
<a href="#l5.4"></a><span id="l5.4"> #include &quot;nsIEditor.h&quot;</span>
<a href="#l5.5"></a><span id="l5.5"> #include &quot;nsIEditorMailSupport.h&quot;</span>
<a href="#l5.6"></a><span id="l5.6"> #include &quot;nsIDOMHTMLImageElement.h&quot;</span>
<a href="#l5.7"></a><span id="l5.7"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l5.8"></a><span id="l5.8"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l5.9"></a><span id="l5.9"> #include &quot;nsIFile.h&quot;</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-class nsEudoraEditor : public nsIEditor, public nsIEditorMailSupport</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+class nsEudoraEditor</span>
<a href="#l5.14"></a><span id="l5.14"> {</span>
<a href="#l5.15"></a><span id="l5.15">   public:</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-    NS_DECL_ISUPPORTS</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-    NS_DECL_NSIEDITOR</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-    NS_DECL_NSIEDITORMAILSUPPORT</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-                                nsEudoraEditor(const char * pBody, nsIFile * pMailImportLocation);</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-    bool                        UpdateEmbeddedImageReference(PRUint32 aCIDHash, const nsAString &amp; aOldRef, const nsAString &amp; aUpdatedRef);</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineminus">-    bool                        HasEmbeddedContent();</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">-</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+    nsEudoraEditor(const char * pBody, nsIFile * pMailImportLocation);</span>
<a href="#l5.27"></a><span id="l5.27">     ~nsEudoraEditor();</span>
<a href="#l5.28"></a><span id="l5.28"> </span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+    bool GetEmbeddedImageCID(PRUint32 aCIDHash, const nsAString &amp; aOldRef, nsString &amp;aCID);</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+    bool HasEmbeddedContent();</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+    nsresult GetEmbeddedObjects(nsISupportsArray ** aNodeList);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+    nsresult GetBody(nsAString &amp; _retval) {_retval = m_body; return NS_OK;}</span>
<a href="#l5.33"></a><span id="l5.33">   protected:</span>
<a href="#l5.34"></a><span id="l5.34">     NS_ConvertASCIItoUTF16      m_body;</span>
<a href="#l5.35"></a><span id="l5.35">     nsCOMPtr &lt;nsIFile&gt;          m_pMailImportLocation;</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-    nsCOMPtr&lt;nsISupportsArray&gt;  m_EmbeddedObjectList; // it's initialized when GetEmbeddedObjects is called</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+    nsCOMPtr&lt;nsISupportsArray&gt;  m_EmbeddedObjectList; // Initialized when GetEmbeddedObjects is called</span>
<a href="#l5.38"></a><span id="l5.38"> };</span>
<a href="#l5.39"></a><span id="l5.39"> </span>
<a href="#l5.40"></a><span id="l5.40"> </span>
<a href="#l5.41"></a><span id="l5.41"> class nsEudoraHTMLImageElement : public nsIDOMHTMLImageElement</span>
<a href="#l5.42"></a><span id="l5.42"> {</span>
<a href="#l5.43"></a><span id="l5.43">   public:</span>
<a href="#l5.44"></a><span id="l5.44">     NS_DECL_ISUPPORTS</span>
<a href="#l5.45"></a><span id="l5.45">     NS_DECL_NSIDOMNODE</span>
<a href="#l5.46"></a><span id="l5.46">     NS_DECL_NSIDOMELEMENT</span>
<a href="#l5.47"></a><span id="l5.47">     NS_DECL_NSIDOMHTMLELEMENT</span>
<a href="#l5.48"></a><span id="l5.48">     NS_DECL_NSIDOMHTMLIMAGEELEMENT</span>
<a href="#l5.49"></a><span id="l5.49"> </span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-                                nsEudoraHTMLImageElement(nsEudoraEditor * pEditor, const nsAString &amp; aSrc, PRUint32 aCIDHash);</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+    nsEudoraHTMLImageElement(const nsAString &amp; aSrc, const nsAString &amp;aCID);</span>
<a href="#l5.52"></a><span id="l5.52"> </span>
<a href="#l5.53"></a><span id="l5.53">   private:</span>
<a href="#l5.54"></a><span id="l5.54">     ~nsEudoraHTMLImageElement();</span>
<a href="#l5.55"></a><span id="l5.55"> </span>
<a href="#l5.56"></a><span id="l5.56">   protected:</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineminus">-    nsCOMPtr&lt;nsIEditor&gt;         m_pEditor;</span>
<a href="#l5.58"></a><span id="l5.58">     nsString                    m_src;</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineminus">-    PRUint32                    m_cidHash;</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+    nsString                    m_cidOrig;</span>
<a href="#l5.61"></a><span id="l5.61"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraWin32.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraWin32.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -157,18 +157,21 @@ bool nsEudoraWin32::FindEudoraLocation( </span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">         if (idx != -1)</span>
<a href="#l6.6"></a><span id="l6.6">         {</span>
<a href="#l6.7"></a><span id="l6.7">           idx++;</span>
<a href="#l6.8"></a><span id="l6.8">           while (str.CharAt( idx) == ' ') idx++;</span>
<a href="#l6.9"></a><span id="l6.9">           int endIdx = -1;</span>
<a href="#l6.10"></a><span id="l6.10">           if (str.CharAt( idx) == '&quot;')</span>
<a href="#l6.11"></a><span id="l6.11">             endIdx = str.FindChar( '&quot;', idx);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-          else</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+          else {</span>
<a href="#l6.14"></a><span id="l6.14">             endIdx = str.FindChar( ' ', idx);</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+            if (endIdx == -1)</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+              endIdx = str.Length();</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+          }</span>
<a href="#l6.18"></a><span id="l6.18">           if (endIdx != -1)</span>
<a href="#l6.19"></a><span id="l6.19">           {</span>
<a href="#l6.20"></a><span id="l6.20">             eudoraPath-&gt;InitWithNativePath(Substring(str, idx, endIdx - idx));</span>
<a href="#l6.21"></a><span id="l6.21"> </span>
<a href="#l6.22"></a><span id="l6.22">             if (NS_SUCCEEDED( eudoraPath-&gt;IsDirectory( &amp;exists)))</span>
<a href="#l6.23"></a><span id="l6.23">               result = exists;</span>
<a href="#l6.24"></a><span id="l6.24">           }</span>
<a href="#l6.25"></a><span id="l6.25">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookCompose.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookCompose.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -234,23 +234,16 @@ nsOutlookCompose::~nsOutlookCompose()</span>
<a href="#l7.4"></a><span id="l7.4">     nsresult rv = m_pIdentity-&gt;ClearAllValues();</span>
<a href="#l7.5"></a><span id="l7.5">     NS_ASSERTION(NS_SUCCEEDED(rv),&quot;failed to clear values&quot;);</span>
<a href="#l7.6"></a><span id="l7.6">     if (NS_FAILED(rv))</span>
<a href="#l7.7"></a><span id="l7.7">       return;</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9">     NS_RELEASE(m_pIdentity);</span>
<a href="#l7.10"></a><span id="l7.10">   }</span>
<a href="#l7.11"></a><span id="l7.11">   delete[] m_optimizationBuffer;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  ClearReplaceCids();</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-}</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-void nsOutlookCompose::ClearReplaceCids()</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-{</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-  std::for_each(m_replacedCids.begin(), m_replacedCids.end(), ClearReplaceCid);</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-  m_replacedCids.clear();</span>
<a href="#l7.19"></a><span id="l7.19"> }</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21"> nsIMsgIdentity * nsOutlookCompose::m_pIdentity = nsnull;</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23"> nsresult nsOutlookCompose::CreateIdentity( void)</span>
<a href="#l7.24"></a><span id="l7.24"> {</span>
<a href="#l7.25"></a><span id="l7.25">   if (m_pIdentity)</span>
<a href="#l7.26"></a><span id="l7.26">     return NS_OK;</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineat">@@ -327,61 +320,56 @@ nsresult nsOutlookCompose::ComposeTheMes</span>
<a href="#l7.28"></a><span id="l7.28"> </span>
<a href="#l7.29"></a><span id="l7.29">   nsCOMPtr&lt;nsIArray&gt; pAttach;</span>
<a href="#l7.30"></a><span id="l7.30">   msg.GetAttachments(getter_AddRefs(pAttach));</span>
<a href="#l7.31"></a><span id="l7.31"> </span>
<a href="#l7.32"></a><span id="l7.32">   nsString bodyW;</span>
<a href="#l7.33"></a><span id="l7.33">   // Bug 593907</span>
<a href="#l7.34"></a><span id="l7.34">   if (GenerateHackSequence(msg.GetBody(), msg.GetBodyLen()))</span>
<a href="#l7.35"></a><span id="l7.35">     HackBody(msg.GetBody(), msg.GetBodyLen(), bodyW);</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+  else</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+    bodyW = msg.GetBody();</span>
<a href="#l7.38"></a><span id="l7.38">   // End Bug 593907</span>
<a href="#l7.39"></a><span id="l7.39"> </span>
<a href="#l7.40"></a><span id="l7.40" class="difflineminus">-  // We only get the editor interface when there's embedded content.</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineminus">-  // Otherwise pEditor remains NULL. That way we only import with the pseudo</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">-  // editor when it helps.</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-  nsRefPtr&lt;nsOutlookEditor&gt; pOutlookEditor = new nsOutlookEditor(bodyW.IsEmpty() ? msg.GetBody() : bodyW.get());</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-  nsCOMPtr&lt;nsIEditor&gt; pEditor;</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+  nsCOMPtr&lt;nsISupportsArray&gt; embeddedObjects;</span>
<a href="#l7.46"></a><span id="l7.46"> </span>
<a href="#l7.47"></a><span id="l7.47">   if (msg.BodyIsHtml()) {</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-    for (unsigned int i = 0; i&lt;msg.EmbeddedAttachmentsCount(); i++) {</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+    for (unsigned int i = 0; i &lt;msg.EmbeddedAttachmentsCount(); i++) {</span>
<a href="#l7.50"></a><span id="l7.50">       nsIURI *uri;</span>
<a href="#l7.51"></a><span id="l7.51">       const char* cid;</span>
<a href="#l7.52"></a><span id="l7.52">       const char* name;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-      if (msg.GetEmbeddedAttachmentInfo(i, &amp;uri, &amp;cid, &amp;name))</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-        pOutlookEditor-&gt;AddEmbeddedImage(uri, NS_ConvertASCIItoUTF16(cid).get(), NS_ConvertASCIItoUTF16(name).get());</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+      if (msg.GetEmbeddedAttachmentInfo(i, &amp;uri, &amp;cid, &amp;name)) {</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+        if (!embeddedObjects) {</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+          embeddedObjects = do_CreateInstance(NS_SUPPORTSARRAY_CONTRACTID, &amp;rv);</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+          NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+        }</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+        nsCOMPtr&lt;nsIDOMHTMLImageElement&gt; imageNode =</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+          new nsOutlookHTMLImageElement(uri, NS_ConvertASCIItoUTF16(cid),</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+                                             NS_ConvertASCIItoUTF16(name));</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+        embeddedObjects-&gt;AppendElement(imageNode);</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+      }</span>
<a href="#l7.65"></a><span id="l7.65">     }</span>
<a href="#l7.66"></a><span id="l7.66">   }</span>
<a href="#l7.67"></a><span id="l7.67"> </span>
<a href="#l7.68"></a><span id="l7.68">   nsCString bodyA;</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-  if (pOutlookEditor &amp;&amp; pOutlookEditor-&gt;HasEmbeddedContent()) {</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-    // There's embedded content that we need to import, so query for the editor interface</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-    pEditor = do_QueryObject(pOutlookEditor);</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-  }</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineminus">-  else {</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-    if (bodyW.IsEmpty())</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-      msg.GetBody(bodyA);</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-    else</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineminus">-      nsMsgI18NConvertFromUnicode(msg.GetBodyCharset(), bodyW, bodyA);</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineminus">-  }</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+  nsMsgI18NConvertFromUnicode(msg.GetBodyCharset(), bodyW, bodyA);</span>
<a href="#l7.80"></a><span id="l7.80"> </span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-  // IMPORT_LOG0( &quot;Outlook compose calling CreateAndSendMessage\n&quot;);</span>
<a href="#l7.82"></a><span id="l7.82">   nsCOMPtr&lt;nsIImportService&gt; impService(do_GetService(NS_IMPORTSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l7.83"></a><span id="l7.83">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l7.84"></a><span id="l7.84"> </span>
<a href="#l7.85"></a><span id="l7.85" class="difflineminus">-  rv = impService-&gt;ProxySend(</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineminus">-                    pEditor,                      // editor shell</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineminus">-                    m_pIdentity,                  // dummy identity</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineminus">-                    m_pMsgFields,                 // message fields</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineminus">-                    mode,                         // mode</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineminus">-                    msg.BodyIsHtml() ? &quot;text/html&quot; : &quot;text/plain&quot;,           // body type</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineminus">-                    bodyA.get(),                  // body pointer</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineminus">-                    bodyA.Length(),               // body length</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineminus">-                    pAttach,                      // local attachments</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineminus">-                    m_pListener);              // originalMsgURI</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineminus">-  // IMPORT_LOG0( &quot;Returned from CreateAndSendMessage\n&quot;);</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+  rv = impService-&gt;CreateRFC822Message(</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineplus">+                        m_pIdentity,                  // dummy identity</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineplus">+                        m_pMsgFields,                 // message fields</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+                        msg.BodyIsHtml() ? &quot;text/html&quot; : &quot;text/plain&quot;,</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+                        bodyA.get(),                  // body pointer</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+                        bodyA.Length(),               // body length</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+                        mode == nsIMsgSend::nsMsgSaveAsDraft,</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineplus">+                        pAttach,                      // local attachments</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+                        embeddedObjects,</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+                        m_pListener);                 // listener</span>
<a href="#l7.106"></a><span id="l7.106"> </span>
<a href="#l7.107"></a><span id="l7.107">   OutlookSendListener *pListen = (OutlookSendListener *)m_pListener;</span>
<a href="#l7.108"></a><span id="l7.108">   if (NS_FAILED(rv)) {</span>
<a href="#l7.109"></a><span id="l7.109">     IMPORT_LOG1( &quot;*** Error, CreateAndSendMessage FAILED: 0x%lx\n&quot;, rv);</span>
<a href="#l7.110"></a><span id="l7.110">   }</span>
<a href="#l7.111"></a><span id="l7.111">   else {</span>
<a href="#l7.112"></a><span id="l7.112">     // wait for the listener to get done!</span>
<a href="#l7.113"></a><span id="l7.113">     PRInt32 abortCnt = 0;</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineat">@@ -410,48 +398,19 @@ nsresult nsOutlookCompose::ComposeTheMes</span>
<a href="#l7.115"></a><span id="l7.115">     rv = NS_OK;</span>
<a href="#l7.116"></a><span id="l7.116">   }</span>
<a href="#l7.117"></a><span id="l7.117">   else {</span>
<a href="#l7.118"></a><span id="l7.118">     rv = NS_ERROR_FAILURE;</span>
<a href="#l7.119"></a><span id="l7.119">     IMPORT_LOG0( &quot;*** Error, Outlook compose unsuccessful\n&quot;);</span>
<a href="#l7.120"></a><span id="l7.120">   }</span>
<a href="#l7.121"></a><span id="l7.121"> </span>
<a href="#l7.122"></a><span id="l7.122">   pListen-&gt;Reset();</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineminus">-</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineminus">-  if (NS_SUCCEEDED(rv) &amp;&amp; pEditor) {</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineminus">-    PRUint32 embedCount = pOutlookEditor-&gt;EmbeddedObjectsCount();</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineminus">-    for (PRUint32 i=0; i&lt;embedCount; i++) {</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineminus">-      CidReplacePair *pair = new CidReplacePair;</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineminus">-      if (NS_SUCCEEDED(pOutlookEditor-&gt;GetCids(i, pair-&gt;cidOrig, pair-&gt;cidNew)))</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineminus">-        m_replacedCids.push_back(pair);</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineminus">-      else delete pair;</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineminus">-    }</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineminus">-  }</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineminus">-</span>
<a href="#l7.134"></a><span id="l7.134">   return rv;</span>
<a href="#l7.135"></a><span id="l7.135"> }</span>
<a href="#l7.136"></a><span id="l7.136"> </span>
<a href="#l7.137"></a><span id="l7.137" class="difflineminus">-nsOutlookCompose::ReplaceCidInLine::ReplaceCidInLine(nsCString&amp; line)</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineminus">-  : m_line(line)</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineminus">-{</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineminus">-  // If the line begins with Content-ID: string, process it! Otherwise, no need to waste time</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineminus">-  m_finishedReplacing = StringBeginsWith(line, NS_LITERAL_CSTRING(&quot;Content-ID:&quot;), nsCaseInsensitiveCStringComparator());</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineminus">-}</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineminus">-</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineminus">-void nsOutlookCompose::ReplaceCidInLine::operator () (const CidReplacePair* pair)</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineminus">-{</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineminus">-  if (m_finishedReplacing)</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineminus">-    return; // Only one cid per line possible!</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineminus">-  PRInt32 pos = MsgFind(m_line, pair-&gt;cidNew, false, 12);</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineminus">-  if (pos != kNotFound) {</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineminus">-    m_finishedReplacing = true; // Stop further search</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineminus">-    m_line.Replace(pos, pair-&gt;cidNew.Length(), pair-&gt;cidOrig);</span>
<a href="#l7.152"></a><span id="l7.152" class="difflineminus">-  }</span>
<a href="#l7.153"></a><span id="l7.153" class="difflineminus">-}</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineminus">-</span>
<a href="#l7.155"></a><span id="l7.155"> nsresult nsOutlookCompose::CopyComposedMessage(nsIFile *pSrc,</span>
<a href="#l7.156"></a><span id="l7.156">                                                nsIOutputStream *pDst,</span>
<a href="#l7.157"></a><span id="l7.157">                                                CMapiMessage&amp; origMsg)</span>
<a href="#l7.158"></a><span id="l7.158"> {</span>
<a href="#l7.159"></a><span id="l7.159">   // I'm unsure if we really need the convertCRs feature here.</span>
<a href="#l7.160"></a><span id="l7.160">   // The headers in the file are generated by TB, the body was generated by rtf reader that always used CRLF,</span>
<a href="#l7.161"></a><span id="l7.161">   // and the attachments were processed by TB either... However, I let it stay as it was in the original code.</span>
<a href="#l7.162"></a><span id="l7.162">   CCompositionFile f(pSrc, m_optimizationBuffer, m_optimizationBufferSize, true);</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineat">@@ -515,18 +474,16 @@ nsresult nsOutlookCompose::CopyComposedM</span>
<a href="#l7.164"></a><span id="l7.164">   // gets split over two sequential reads and thus will not be escaped.</span>
<a href="#l7.165"></a><span id="l7.165">   // This is done by reading up to CRLF (one line every time), though it may be slower</span>
<a href="#l7.166"></a><span id="l7.166"> </span>
<a href="#l7.167"></a><span id="l7.167">   // Here I revert the changes that were made when the multipart/related message</span>
<a href="#l7.168"></a><span id="l7.168">   // was composed in nsMsgSend::ProcessMultipartRelated() - the Content-Ids of</span>
<a href="#l7.169"></a><span id="l7.169">   // attachments were replaced with new ones.</span>
<a href="#l7.170"></a><span id="l7.170">   nsCString line;</span>
<a href="#l7.171"></a><span id="l7.171">   while (NS_SUCCEEDED(f.ToString(line, MSG_LINEBREAK))) {</span>
<a href="#l7.172"></a><span id="l7.172" class="difflineminus">-    if (!m_replacedCids.empty())</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineminus">-      std::for_each(m_replacedCids.begin(), m_replacedCids.end(), ReplaceCidInLine(line));</span>
<a href="#l7.174"></a><span id="l7.174">     EscapeFromSpaceLine(pDst, const_cast&lt;char*&gt;(line.get()), line.get()+line.Length());</span>
<a href="#l7.175"></a><span id="l7.175">   }</span>
<a href="#l7.176"></a><span id="l7.176"> </span>
<a href="#l7.177"></a><span id="l7.177">   if (f.LastChar() != 0x0A) {</span>
<a href="#l7.178"></a><span id="l7.178">     rv = pDst-&gt;Write( MSG_LINEBREAK, 2, &amp;written);</span>
<a href="#l7.179"></a><span id="l7.179">     if (written != 2)</span>
<a href="#l7.180"></a><span id="l7.180">       rv = NS_ERROR_FAILURE;</span>
<a href="#l7.181"></a><span id="l7.181">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookCompose.h</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookCompose.h</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -64,50 +64,31 @@ class nsOutlookCompose {</span>
<a href="#l8.4"></a><span id="l8.4"> public:</span>
<a href="#l8.5"></a><span id="l8.5">   nsOutlookCompose();</span>
<a href="#l8.6"></a><span id="l8.6">   ~nsOutlookCompose();</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">   nsresult ProcessMessage(nsMsgDeliverMode mode, CMapiMessage &amp;msg, nsIOutputStream *pDst);</span>
<a href="#l8.9"></a><span id="l8.9">   static nsresult CreateIdentity(void);</span>
<a href="#l8.10"></a><span id="l8.10">   static void ReleaseIdentity(void);</span>
<a href="#l8.11"></a><span id="l8.11"> private:</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  struct CidReplacePair {</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-    nsCString cidOrig;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-    nsCString cidNew;</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-  };</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-</span>
<a href="#l8.17"></a><span id="l8.17">   nsresult  CreateComponents( void);</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19">   void      UpdateHeader(CMapiMessageHeaders&amp; oldHeaders, const CMapiMessageHeaders&amp; newHeaders, CMapiMessageHeaders::SpecialHeader header, bool addIfAbsent = true);</span>
<a href="#l8.20"></a><span id="l8.20">   void      UpdateHeaders(CMapiMessageHeaders&amp; oldHeaders, const CMapiMessageHeaders&amp; newHeaders);</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22">   nsresult  ComposeTheMessage(nsMsgDeliverMode mode, CMapiMessage &amp;msg, nsIFile **pMsg);</span>
<a href="#l8.23"></a><span id="l8.23">   nsresult  CopyComposedMessage( nsIFile *pSrc, nsIOutputStream *pDst, CMapiMessage&amp; origMsg);</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25">   // Bug 593907</span>
<a href="#l8.26"></a><span id="l8.26">   void HackBody(const wchar_t* orig, size_t origLen, nsString&amp; hack);</span>
<a href="#l8.27"></a><span id="l8.27">   void UnhackBody(nsCString&amp; body);</span>
<a href="#l8.28"></a><span id="l8.28">   bool GenerateHackSequence(const wchar_t* body, size_t origLen);</span>
<a href="#l8.29"></a><span id="l8.29">   // End Bug 593907</span>
<a href="#l8.30"></a><span id="l8.30"> </span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-  static void ClearReplaceCid(CidReplacePair* pair) { delete pair; }</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-  void ClearReplaceCids();</span>
<a href="#l8.33"></a><span id="l8.33"> private:</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-  std::list&lt;CidReplacePair*&gt; m_replacedCids;</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-  class ReplaceCidInLine {</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-  public:</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-    ReplaceCidInLine(nsCString&amp; line);</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-    void operator () (const CidReplacePair* pair);</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-  private:</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-    nsCString&amp; m_line;</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-    bool m_finishedReplacing;</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-  };</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-</span>
<a href="#l8.46"></a><span id="l8.46">   nsIMsgSendListener *  m_pListener;</span>
<a href="#l8.47"></a><span id="l8.47">   nsIMsgCompFields *    m_pMsgFields;</span>
<a href="#l8.48"></a><span id="l8.48">   static nsIMsgIdentity *    m_pIdentity;</span>
<a href="#l8.49"></a><span id="l8.49">   char* m_optimizationBuffer;</span>
<a href="#l8.50"></a><span id="l8.50">   unsigned int m_optimizationBufferSize;</span>
<a href="#l8.51"></a><span id="l8.51">   nsCOMPtr&lt;nsIImportService&gt;  m_pImportService;</span>
<a href="#l8.52"></a><span id="l8.52"> </span>
<a href="#l8.53"></a><span id="l8.53">   // Bug 593907</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookEditor.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookEditor.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -38,621 +38,30 @@</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> #include &quot;nsOutlookEditor.h&quot;</span>
<a href="#l9.7"></a><span id="l9.7"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l9.8"></a><span id="l9.8"> #include &quot;nsIDOMHTMLImageElement.h&quot;</span>
<a href="#l9.9"></a><span id="l9.9"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l9.10"></a><span id="l9.10"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l9.11"></a><span id="l9.11"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+#include &quot;nsIMsgSend.h&quot;</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-NS_IMPL_ISUPPORTS2(nsOutlookEditor, nsIEditor, nsIEditorMailSupport)</span>
<a href="#l9.15"></a><span id="l9.15"> NS_IMPL_THREADSAFE_ISUPPORTS5(nsOutlookHTMLImageElement,</span>
<a href="#l9.16"></a><span id="l9.16">                               nsOutlookHTMLImageElement,</span>
<a href="#l9.17"></a><span id="l9.17">                               nsIDOMHTMLImageElement,</span>
<a href="#l9.18"></a><span id="l9.18">                               nsIDOMHTMLElement,</span>
<a href="#l9.19"></a><span id="l9.19">                               nsIDOMElement,</span>
<a href="#l9.20"></a><span id="l9.20">                               nsIDOMNode)</span>
<a href="#l9.21"></a><span id="l9.21"> </span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-nsOutlookEditor::nsOutlookEditor(const wchar_t * body)</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-  : m_body(body)</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-{</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-}</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineminus">-nsOutlookEditor::~nsOutlookEditor()</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">-{</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineminus">-}</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-// readonly attribute nsISelection selection</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetSelection(nsISelection * *aSelection)</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-{</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineminus">-}</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">-</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-// [noscript] void init (in nsIDOMDocument doc, in nsIPresShellPtr shell, in nsIContentPtr aRoot, in nsISelectionController aSelCon, in unsigned long aFlags)</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Init(nsIDOMDocument *doc, nsIContent * aRoot, nsISelectionController *aSelCon, PRUint32 aFlags)</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">-{</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-}</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-// void setAttributeOrEquivalent (in nsIDOMElement element, in AString sourceAttrName, in AString sourceAttrValue, in boolean aSuppressTransaction)</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetAttributeOrEquivalent(nsIDOMElement *element, const nsAString &amp; sourceAttrName, const nsAString &amp; sourceAttrValue, bool aSuppressTransaction)</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-{</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">-}</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">-</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">-// void removeAttributeOrEquivalent (in nsIDOMElement element, in DOMString sourceAttrName, in boolean aSuppressTransaction)</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::RemoveAttributeOrEquivalent(nsIDOMElement *element, const nsAString &amp; sourceAttrName, bool aSuppressTransaction)</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineminus">-{</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-}</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-// void postCreate ()</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::PostCreate()</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-{</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-}</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-// void preDestroy (in boolean aDestroyingFrames)</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::PreDestroy(bool aDestroyingFrames)</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-{</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-}</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-// attribute unsigned long flags</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetFlags(PRUint32 *aFlags)</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-{</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-}</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetFlags(PRUint32 aFlags)</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-{</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineminus">-}</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineminus">-</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineminus">-// attribute string contentsMIMEType</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetContentsMIMEType(char * *aContentsMIMEType)</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineminus">-{</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineminus">-}</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineminus">-</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetContentsMIMEType(const char * aContentsMIMEType)</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineminus">-{</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineminus">-}</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineminus">-</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-// readonly attribute boolean isDocumentEditable</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetIsDocumentEditable(bool *aIsDocumentEditable)</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineminus">-{</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineminus">-}</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineminus">-</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetIsSelectionEditable(bool *aIsSelectionEditable)</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineminus">-{</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineminus">-}</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineminus">-</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineminus">-// readonly attribute nsIDOMDocument document</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetDocument(nsIDOMDocument * *aDocument)</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineminus">-{</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-}</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-// readonly attribute nsIDOMElement rootElement</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetRootElement(nsIDOMElement * *aRootElement)</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineminus">-{</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineminus">-}</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineminus">-</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineminus">-// readonly attribute nsISelectionController selectionController</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetSelectionController(nsISelectionController * *aSelectionController)</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineminus">-{</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineminus">-}</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineminus">-</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineminus">-// void deleteSelection (in short action)</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DeleteSelection(PRInt16 action)</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineminus">-{</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineminus">-}</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineminus">-</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineminus">-// readonly attribute boolean documentIsEmpty</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetDocumentIsEmpty(bool *aDocumentIsEmpty)</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineminus">-{</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineminus">-}</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineminus">-</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineminus">-// readonly attribute boolean documentModified</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetDocumentModified(bool *aDocumentModified)</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineminus">-{</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineminus">-}</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineminus">-</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineminus">-// attribute ACString documentCharacterSet</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetDocumentCharacterSet(nsACString &amp; aDocumentCharacterSet)</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineminus">-{</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineminus">-}</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineminus">-</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetDocumentCharacterSet(const nsACString &amp; aDocumentCharacterSet)</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineminus">-{</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineminus">-}</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineminus">-</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineminus">-// void resetModificationCount ()</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::ResetModificationCount()</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineminus">-{</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineminus">-}</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineminus">-</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineminus">-// long getModificationCount ()</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetModificationCount(PRInt32 *_retval)</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineminus">-{</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineminus">-}</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineminus">-</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineminus">-// void incrementModificationCount (in long aModCount)</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::IncrementModificationCount(PRInt32 aModCount)</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineminus">-{</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineminus">-}</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineminus">-</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineminus">-//  attribute nsITransactionManager transactionManager</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetTransactionManager(nsITransactionManager * *aTransactionManager)</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineminus">-{</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineminus">-}</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineminus">-</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetTransactionManager(nsITransactionManager *aTxnManager)</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineminus">-{</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineminus">-}</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineminus">-</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineminus">-// void doTransaction (in nsITransaction txn)</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DoTransaction(nsITransaction *txn)</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineminus">-{</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineminus">-}</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineminus">-</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineminus">-// void enableUndo (in boolean enable)</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::EnableUndo(bool enable)</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineminus">-{</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineminus">-}</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineminus">-</span>
<a href="#l9.188"></a><span id="l9.188" class="difflineminus">-// void undo (in unsigned long count)</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Undo(PRUint32 count)</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineminus">-{</span>
<a href="#l9.191"></a><span id="l9.191" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.192"></a><span id="l9.192" class="difflineminus">-}</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineminus">-</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineminus">-// void canUndo (out boolean isEnabled, out boolean canUndo)</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanUndo(bool *isEnabled, bool *canUndo)</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineminus">-{</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.198"></a><span id="l9.198" class="difflineminus">-}</span>
<a href="#l9.199"></a><span id="l9.199" class="difflineminus">-</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineminus">-// void redo (in unsigned long count)</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Redo(PRUint32 count)</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineminus">-{</span>
<a href="#l9.203"></a><span id="l9.203" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.204"></a><span id="l9.204" class="difflineminus">-}</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineminus">-</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineminus">-// void canRedo (out boolean isEnabled, out boolean canRedo)</span>
<a href="#l9.207"></a><span id="l9.207" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanRedo(bool *isEnabled, bool *canRedo)</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineminus">-{</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.210"></a><span id="l9.210" class="difflineminus">-}</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineminus">-</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineminus">-// void beginTransaction ()</span>
<a href="#l9.213"></a><span id="l9.213" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::BeginTransaction()</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineminus">-{</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineminus">-}</span>
<a href="#l9.217"></a><span id="l9.217" class="difflineminus">-</span>
<a href="#l9.218"></a><span id="l9.218" class="difflineminus">-// void endTransaction ()</span>
<a href="#l9.219"></a><span id="l9.219" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::EndTransaction()</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineminus">-{</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineminus">-}</span>
<a href="#l9.223"></a><span id="l9.223" class="difflineminus">-</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineminus">-// void beginPlaceHolderTransaction (in nsIAtom name)</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::BeginPlaceHolderTransaction(nsIAtom *name)</span>
<a href="#l9.226"></a><span id="l9.226" class="difflineminus">-{</span>
<a href="#l9.227"></a><span id="l9.227" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.228"></a><span id="l9.228" class="difflineminus">-}</span>
<a href="#l9.229"></a><span id="l9.229" class="difflineminus">-</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineminus">-// void endPlaceHolderTransaction ()</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::EndPlaceHolderTransaction()</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineminus">-{</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineminus">-}</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineminus">-</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineminus">-// boolean shouldTxnSetSelection ()</span>
<a href="#l9.237"></a><span id="l9.237" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::ShouldTxnSetSelection(bool *_retval)</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineminus">-{</span>
<a href="#l9.239"></a><span id="l9.239" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineminus">-}</span>
<a href="#l9.241"></a><span id="l9.241" class="difflineminus">-</span>
<a href="#l9.242"></a><span id="l9.242" class="difflineminus">-// void setShouldTxnSetSelection (in boolean should)</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetShouldTxnSetSelection(bool should)</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineminus">-{</span>
<a href="#l9.245"></a><span id="l9.245" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineminus">-}</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineminus">-</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineminus">-// readonly attribute nsIInlineSpellChecker inlineSpellChecker</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetInlineSpellChecker(bool autoCreate, nsIInlineSpellChecker * *aInlineSpellChecker)</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineminus">-{</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineminus">-}</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineminus">-</span>
<a href="#l9.254"></a><span id="l9.254" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SyncRealTimeSpell()</span>
<a href="#l9.255"></a><span id="l9.255" class="difflineminus">-{</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineminus">-}</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineminus">-</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetSpellcheckUserOverride(bool enable)</span>
<a href="#l9.260"></a><span id="l9.260" class="difflineminus">-{</span>
<a href="#l9.261"></a><span id="l9.261" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineminus">-}</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineminus">-</span>
<a href="#l9.264"></a><span id="l9.264" class="difflineminus">-bool</span>
<a href="#l9.265"></a><span id="l9.265" class="difflineminus">-nsOutlookEditor::IsModifiableNode(nsIDOMNode *aNode)</span>
<a href="#l9.266"></a><span id="l9.266" class="difflineminus">-{</span>
<a href="#l9.267"></a><span id="l9.267" class="difflineminus">-  return PR_TRUE;</span>
<a href="#l9.268"></a><span id="l9.268" class="difflineminus">-}</span>
<a href="#l9.269"></a><span id="l9.269" class="difflineminus">-// void cut ()</span>
<a href="#l9.270"></a><span id="l9.270" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Cut()</span>
<a href="#l9.271"></a><span id="l9.271" class="difflineminus">-{</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.273"></a><span id="l9.273" class="difflineminus">-}</span>
<a href="#l9.274"></a><span id="l9.274" class="difflineminus">-</span>
<a href="#l9.275"></a><span id="l9.275" class="difflineminus">-// boolean canCut ()</span>
<a href="#l9.276"></a><span id="l9.276" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanCut(bool *_retval)</span>
<a href="#l9.277"></a><span id="l9.277" class="difflineminus">-{</span>
<a href="#l9.278"></a><span id="l9.278" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.279"></a><span id="l9.279" class="difflineminus">-}</span>
<a href="#l9.280"></a><span id="l9.280" class="difflineminus">-</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineminus">-// void copy ()</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Copy()</span>
<a href="#l9.283"></a><span id="l9.283" class="difflineminus">-{</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.285"></a><span id="l9.285" class="difflineminus">-}</span>
<a href="#l9.286"></a><span id="l9.286" class="difflineminus">-</span>
<a href="#l9.287"></a><span id="l9.287" class="difflineminus">-// boolean canCopy ()</span>
<a href="#l9.288"></a><span id="l9.288" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanCopy(bool *_retval)</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineminus">-{</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineminus">-}</span>
<a href="#l9.292"></a><span id="l9.292" class="difflineminus">-</span>
<a href="#l9.293"></a><span id="l9.293" class="difflineminus">-// void paste (in long aSelectionType)</span>
<a href="#l9.294"></a><span id="l9.294" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Paste(PRInt32 aSelectionType)</span>
<a href="#l9.295"></a><span id="l9.295" class="difflineminus">-{</span>
<a href="#l9.296"></a><span id="l9.296" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.297"></a><span id="l9.297" class="difflineminus">-}</span>
<a href="#l9.298"></a><span id="l9.298" class="difflineminus">-</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineminus">-// boolean canPaste (in long aSelectionType)</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanPaste(PRInt32 aSelectionType, bool *_retval)</span>
<a href="#l9.301"></a><span id="l9.301" class="difflineminus">-{</span>
<a href="#l9.302"></a><span id="l9.302" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.303"></a><span id="l9.303" class="difflineminus">-}</span>
<a href="#l9.304"></a><span id="l9.304" class="difflineminus">-</span>
<a href="#l9.305"></a><span id="l9.305" class="difflineminus">-class nsITransferable;</span>
<a href="#l9.306"></a><span id="l9.306" class="difflineminus">-</span>
<a href="#l9.307"></a><span id="l9.307" class="difflineminus">-// void pasteTransferable(in nsITransferable aTransferable)</span>
<a href="#l9.308"></a><span id="l9.308" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::PasteTransferable(nsITransferable *aTransferable)</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineminus">-{</span>
<a href="#l9.310"></a><span id="l9.310" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.311"></a><span id="l9.311" class="difflineminus">-}</span>
<a href="#l9.312"></a><span id="l9.312" class="difflineminus">-</span>
<a href="#l9.313"></a><span id="l9.313" class="difflineminus">-// boolean canPasteTransferable([optional] in nsITransferable aTransferable)</span>
<a href="#l9.314"></a><span id="l9.314" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanPasteTransferable(nsITransferable *aTransferable, bool *aCanPaste)</span>
<a href="#l9.315"></a><span id="l9.315" class="difflineminus">-{</span>
<a href="#l9.316"></a><span id="l9.316" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.317"></a><span id="l9.317" class="difflineminus">-}</span>
<a href="#l9.318"></a><span id="l9.318" class="difflineminus">-</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineminus">-// void selectAll ()</span>
<a href="#l9.320"></a><span id="l9.320" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SelectAll()</span>
<a href="#l9.321"></a><span id="l9.321" class="difflineminus">-{</span>
<a href="#l9.322"></a><span id="l9.322" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.323"></a><span id="l9.323" class="difflineminus">-}</span>
<a href="#l9.324"></a><span id="l9.324" class="difflineminus">-</span>
<a href="#l9.325"></a><span id="l9.325" class="difflineminus">-// void beginningOfDocument ()</span>
<a href="#l9.326"></a><span id="l9.326" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::BeginningOfDocument()</span>
<a href="#l9.327"></a><span id="l9.327" class="difflineminus">-{</span>
<a href="#l9.328"></a><span id="l9.328" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.329"></a><span id="l9.329" class="difflineminus">-}</span>
<a href="#l9.330"></a><span id="l9.330" class="difflineminus">-</span>
<a href="#l9.331"></a><span id="l9.331" class="difflineminus">-// void endOfDocument ()</span>
<a href="#l9.332"></a><span id="l9.332" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::EndOfDocument()</span>
<a href="#l9.333"></a><span id="l9.333" class="difflineminus">-{</span>
<a href="#l9.334"></a><span id="l9.334" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.335"></a><span id="l9.335" class="difflineminus">-}</span>
<a href="#l9.336"></a><span id="l9.336" class="difflineminus">-</span>
<a href="#l9.337"></a><span id="l9.337" class="difflineminus">-// boolean canDrag (in nsIDOMEvent aEvent)</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CanDrag(nsIDOMEvent *aEvent, bool *_retval)</span>
<a href="#l9.339"></a><span id="l9.339" class="difflineminus">-{</span>
<a href="#l9.340"></a><span id="l9.340" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.341"></a><span id="l9.341" class="difflineminus">-}</span>
<a href="#l9.342"></a><span id="l9.342" class="difflineminus">-</span>
<a href="#l9.343"></a><span id="l9.343" class="difflineminus">-// void doDrag (in nsIDOMEvent aEvent)</span>
<a href="#l9.344"></a><span id="l9.344" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DoDrag(nsIDOMEvent *aEvent)</span>
<a href="#l9.345"></a><span id="l9.345" class="difflineminus">-{</span>
<a href="#l9.346"></a><span id="l9.346" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.347"></a><span id="l9.347" class="difflineminus">-}</span>
<a href="#l9.348"></a><span id="l9.348" class="difflineminus">-</span>
<a href="#l9.349"></a><span id="l9.349" class="difflineminus">-// void insertFromDrop (in nsIDOMEvent aEvent)</span>
<a href="#l9.350"></a><span id="l9.350" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::InsertFromDrop(nsIDOMEvent *aEvent)</span>
<a href="#l9.351"></a><span id="l9.351" class="difflineminus">-{</span>
<a href="#l9.352"></a><span id="l9.352" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.353"></a><span id="l9.353" class="difflineminus">-}</span>
<a href="#l9.354"></a><span id="l9.354" class="difflineminus">-</span>
<a href="#l9.355"></a><span id="l9.355" class="difflineminus">-// void setAttribute (in nsIDOMElement aElement, in AString attributestr, in AString attvalue)</span>
<a href="#l9.356"></a><span id="l9.356" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SetAttribute(nsIDOMElement *aElement, const nsAString &amp; attributestr, const nsAString &amp; attvalue)</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineminus">-{</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.359"></a><span id="l9.359" class="difflineminus">-}</span>
<a href="#l9.360"></a><span id="l9.360" class="difflineminus">-</span>
<a href="#l9.361"></a><span id="l9.361" class="difflineminus">-/* boolean getAttributeValue (in nsIDOMElement aElement, in AString attributestr, out AString resultValue); */</span>
<a href="#l9.362"></a><span id="l9.362" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetAttributeValue(nsIDOMElement *aElement, const nsAString &amp; attributestr, nsAString &amp; resultValue, bool *_retval)</span>
<a href="#l9.363"></a><span id="l9.363" class="difflineminus">-{</span>
<a href="#l9.364"></a><span id="l9.364" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.365"></a><span id="l9.365" class="difflineminus">-}</span>
<a href="#l9.366"></a><span id="l9.366" class="difflineminus">-</span>
<a href="#l9.367"></a><span id="l9.367" class="difflineminus">-/* void removeAttribute (in nsIDOMElement aElement, in AString aAttribute); */</span>
<a href="#l9.368"></a><span id="l9.368" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::RemoveAttribute(nsIDOMElement *aElement, const nsAString &amp; aAttribute)</span>
<a href="#l9.369"></a><span id="l9.369" class="difflineminus">-{</span>
<a href="#l9.370"></a><span id="l9.370" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.371"></a><span id="l9.371" class="difflineminus">-}</span>
<a href="#l9.372"></a><span id="l9.372" class="difflineminus">-</span>
<a href="#l9.373"></a><span id="l9.373" class="difflineminus">-/* void cloneAttribute (in AString aAttribute, in nsIDOMNode aDestNode, in nsIDOMNode aSourceNode); */</span>
<a href="#l9.374"></a><span id="l9.374" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CloneAttribute(const nsAString &amp; aAttribute, nsIDOMNode *aDestNode, nsIDOMNode *aSourceNode)</span>
<a href="#l9.375"></a><span id="l9.375" class="difflineminus">-{</span>
<a href="#l9.376"></a><span id="l9.376" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.377"></a><span id="l9.377" class="difflineminus">-}</span>
<a href="#l9.378"></a><span id="l9.378" class="difflineminus">-</span>
<a href="#l9.379"></a><span id="l9.379" class="difflineminus">-/* void cloneAttributes (in nsIDOMNode destNode, in nsIDOMNode sourceNode); */</span>
<a href="#l9.380"></a><span id="l9.380" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CloneAttributes(nsIDOMNode *destNode, nsIDOMNode *sourceNode)</span>
<a href="#l9.381"></a><span id="l9.381" class="difflineminus">-{</span>
<a href="#l9.382"></a><span id="l9.382" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.383"></a><span id="l9.383" class="difflineminus">-}</span>
<a href="#l9.384"></a><span id="l9.384" class="difflineminus">-</span>
<a href="#l9.385"></a><span id="l9.385" class="difflineminus">-/* nsIDOMNode createNode (in AString tag, in nsIDOMNode parent, in long position); */</span>
<a href="#l9.386"></a><span id="l9.386" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::CreateNode(const nsAString &amp; tag, nsIDOMNode *parent, PRInt32 position, nsIDOMNode **_retval)</span>
<a href="#l9.387"></a><span id="l9.387" class="difflineminus">-{</span>
<a href="#l9.388"></a><span id="l9.388" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.389"></a><span id="l9.389" class="difflineminus">-}</span>
<a href="#l9.390"></a><span id="l9.390" class="difflineminus">-</span>
<a href="#l9.391"></a><span id="l9.391" class="difflineminus">-// void insertNode (in nsIDOMNode node, in nsIDOMNode parent, in long aPosition)</span>
<a href="#l9.392"></a><span id="l9.392" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::InsertNode(nsIDOMNode *node, nsIDOMNode *parent, PRInt32 aPosition)</span>
<a href="#l9.393"></a><span id="l9.393" class="difflineminus">-{</span>
<a href="#l9.394"></a><span id="l9.394" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.395"></a><span id="l9.395" class="difflineminus">-}</span>
<a href="#l9.396"></a><span id="l9.396" class="difflineminus">-</span>
<a href="#l9.397"></a><span id="l9.397" class="difflineminus">-// void splitNode (in nsIDOMNode existingRightNode, in long offset, out nsIDOMNode newLeftNode)</span>
<a href="#l9.398"></a><span id="l9.398" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SplitNode(nsIDOMNode *existingRightNode, PRInt32 offset, nsIDOMNode **newLeftNode)</span>
<a href="#l9.399"></a><span id="l9.399" class="difflineminus">-{</span>
<a href="#l9.400"></a><span id="l9.400" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.401"></a><span id="l9.401" class="difflineminus">-}</span>
<a href="#l9.402"></a><span id="l9.402" class="difflineminus">-</span>
<a href="#l9.403"></a><span id="l9.403" class="difflineminus">-// void joinNodes (in nsIDOMNode leftNode, in nsIDOMNode rightNode, in nsIDOMNode parent)</span>
<a href="#l9.404"></a><span id="l9.404" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::JoinNodes(nsIDOMNode *leftNode, nsIDOMNode *rightNode, nsIDOMNode *parent)</span>
<a href="#l9.405"></a><span id="l9.405" class="difflineminus">-{</span>
<a href="#l9.406"></a><span id="l9.406" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.407"></a><span id="l9.407" class="difflineminus">-}</span>
<a href="#l9.408"></a><span id="l9.408" class="difflineminus">-</span>
<a href="#l9.409"></a><span id="l9.409" class="difflineminus">-// void deleteNode (in nsIDOMNode child)</span>
<a href="#l9.410"></a><span id="l9.410" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DeleteNode(nsIDOMNode *child)</span>
<a href="#l9.411"></a><span id="l9.411" class="difflineminus">-{</span>
<a href="#l9.412"></a><span id="l9.412" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.413"></a><span id="l9.413" class="difflineminus">-}</span>
<a href="#l9.414"></a><span id="l9.414" class="difflineminus">-</span>
<a href="#l9.415"></a><span id="l9.415" class="difflineminus">-// void markNodeDirty (in nsIDOMNode node)</span>
<a href="#l9.416"></a><span id="l9.416" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::MarkNodeDirty(nsIDOMNode *node)</span>
<a href="#l9.417"></a><span id="l9.417" class="difflineminus">-{</span>
<a href="#l9.418"></a><span id="l9.418" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.419"></a><span id="l9.419" class="difflineminus">-}</span>
<a href="#l9.420"></a><span id="l9.420" class="difflineminus">-</span>
<a href="#l9.421"></a><span id="l9.421" class="difflineminus">-// void switchTextDirection ()</span>
<a href="#l9.422"></a><span id="l9.422" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::SwitchTextDirection()</span>
<a href="#l9.423"></a><span id="l9.423" class="difflineminus">-{</span>
<a href="#l9.424"></a><span id="l9.424" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.425"></a><span id="l9.425" class="difflineminus">-}</span>
<a href="#l9.426"></a><span id="l9.426" class="difflineminus">-</span>
<a href="#l9.427"></a><span id="l9.427" class="difflineminus">-// AString outputToString (in AString formatType, in unsigned long flags)</span>
<a href="#l9.428"></a><span id="l9.428" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l9.429"></a><span id="l9.429" class="difflineminus">-nsOutlookEditor::OutputToString(const nsAString &amp; formatType,</span>
<a href="#l9.430"></a><span id="l9.430" class="difflineminus">-                                PRUint32 flags, nsAString &amp; _retval)</span>
<a href="#l9.431"></a><span id="l9.431" class="difflineminus">-{</span>
<a href="#l9.432"></a><span id="l9.432" class="difflineminus">-  _retval.Assign(m_body);</span>
<a href="#l9.433"></a><span id="l9.433" class="difflineminus">-  return NS_OK;</span>
<a href="#l9.434"></a><span id="l9.434" class="difflineminus">-}</span>
<a href="#l9.435"></a><span id="l9.435" class="difflineminus">-</span>
<a href="#l9.436"></a><span id="l9.436" class="difflineminus">-// void outputToStream (in nsIOutputStream aStream, in AString formatType, in ACString charsetOverride, in unsigned long flags)</span>
<a href="#l9.437"></a><span id="l9.437" class="difflineminus">-</span>
<a href="#l9.438"></a><span id="l9.438" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::OutputToStream(nsIOutputStream *aStream,</span>
<a href="#l9.439"></a><span id="l9.439" class="difflineminus">-                                              const nsAString &amp;formatType,</span>
<a href="#l9.440"></a><span id="l9.440" class="difflineminus">-                                              const nsACString &amp;charsetOverride,</span>
<a href="#l9.441"></a><span id="l9.441" class="difflineminus">-                                              PRUint32 flags)</span>
<a href="#l9.442"></a><span id="l9.442" class="difflineminus">-{</span>
<a href="#l9.443"></a><span id="l9.443" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.444"></a><span id="l9.444" class="difflineminus">-}</span>
<a href="#l9.445"></a><span id="l9.445" class="difflineminus">-</span>
<a href="#l9.446"></a><span id="l9.446" class="difflineminus">-// void addEditorObserver (in nsIEditorObserver observer)</span>
<a href="#l9.447"></a><span id="l9.447" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::AddEditorObserver(nsIEditorObserver *observer)</span>
<a href="#l9.448"></a><span id="l9.448" class="difflineminus">-{</span>
<a href="#l9.449"></a><span id="l9.449" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.450"></a><span id="l9.450" class="difflineminus">-}</span>
<a href="#l9.451"></a><span id="l9.451" class="difflineminus">-</span>
<a href="#l9.452"></a><span id="l9.452" class="difflineminus">-// void removeEditorObserver (in nsIEditorObserver observer)</span>
<a href="#l9.453"></a><span id="l9.453" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::RemoveEditorObserver(nsIEditorObserver *observer)</span>
<a href="#l9.454"></a><span id="l9.454" class="difflineminus">-{</span>
<a href="#l9.455"></a><span id="l9.455" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.456"></a><span id="l9.456" class="difflineminus">-}</span>
<a href="#l9.457"></a><span id="l9.457" class="difflineminus">-</span>
<a href="#l9.458"></a><span id="l9.458" class="difflineminus">-// void addEditActionListener (in nsIEditActionListener listener)</span>
<a href="#l9.459"></a><span id="l9.459" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::AddEditActionListener(nsIEditActionListener *listener)</span>
<a href="#l9.460"></a><span id="l9.460" class="difflineminus">-{</span>
<a href="#l9.461"></a><span id="l9.461" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.462"></a><span id="l9.462" class="difflineminus">-}</span>
<a href="#l9.463"></a><span id="l9.463" class="difflineminus">-</span>
<a href="#l9.464"></a><span id="l9.464" class="difflineminus">-// void removeEditActionListener (in nsIEditActionListener listener)</span>
<a href="#l9.465"></a><span id="l9.465" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::RemoveEditActionListener(nsIEditActionListener *listener)</span>
<a href="#l9.466"></a><span id="l9.466" class="difflineminus">-{</span>
<a href="#l9.467"></a><span id="l9.467" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.468"></a><span id="l9.468" class="difflineminus">-}</span>
<a href="#l9.469"></a><span id="l9.469" class="difflineminus">-</span>
<a href="#l9.470"></a><span id="l9.470" class="difflineminus">-// void addDocumentStateListener (in nsIDocumentStateListener listener)</span>
<a href="#l9.471"></a><span id="l9.471" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l9.472"></a><span id="l9.472" class="difflineminus">-nsOutlookEditor::AddDocumentStateListener(nsIDocumentStateListener *listener)</span>
<a href="#l9.473"></a><span id="l9.473" class="difflineminus">-{</span>
<a href="#l9.474"></a><span id="l9.474" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.475"></a><span id="l9.475" class="difflineminus">-}</span>
<a href="#l9.476"></a><span id="l9.476" class="difflineminus">-</span>
<a href="#l9.477"></a><span id="l9.477" class="difflineminus">-// void removeDocumentStateListener (in nsIDocumentStateListener listener)</span>
<a href="#l9.478"></a><span id="l9.478" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l9.479"></a><span id="l9.479" class="difflineminus">-nsOutlookEditor::RemoveDocumentStateListener(nsIDocumentStateListener *listener)</span>
<a href="#l9.480"></a><span id="l9.480" class="difflineminus">-{</span>
<a href="#l9.481"></a><span id="l9.481" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.482"></a><span id="l9.482" class="difflineminus">-}</span>
<a href="#l9.483"></a><span id="l9.483" class="difflineminus">-</span>
<a href="#l9.484"></a><span id="l9.484" class="difflineminus">-// void dumpContentTree ()</span>
<a href="#l9.485"></a><span id="l9.485" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DumpContentTree()</span>
<a href="#l9.486"></a><span id="l9.486" class="difflineminus">-{</span>
<a href="#l9.487"></a><span id="l9.487" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.488"></a><span id="l9.488" class="difflineminus">-}</span>
<a href="#l9.489"></a><span id="l9.489" class="difflineminus">-</span>
<a href="#l9.490"></a><span id="l9.490" class="difflineminus">-// void debugDumpContent ()</span>
<a href="#l9.491"></a><span id="l9.491" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DebugDumpContent()</span>
<a href="#l9.492"></a><span id="l9.492" class="difflineminus">-{</span>
<a href="#l9.493"></a><span id="l9.493" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.494"></a><span id="l9.494" class="difflineminus">-}</span>
<a href="#l9.495"></a><span id="l9.495" class="difflineminus">-</span>
<a href="#l9.496"></a><span id="l9.496" class="difflineminus">-// void debugUnitTests (out long outNumTests, out long outNumTestsFailed)</span>
<a href="#l9.497"></a><span id="l9.497" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::DebugUnitTests(PRInt32 *outNumTests,</span>
<a href="#l9.498"></a><span id="l9.498" class="difflineminus">-                                              PRInt32 *outNumTestsFailed)</span>
<a href="#l9.499"></a><span id="l9.499" class="difflineminus">-{</span>
<a href="#l9.500"></a><span id="l9.500" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.501"></a><span id="l9.501" class="difflineminus">-}</span>
<a href="#l9.502"></a><span id="l9.502" class="difflineminus">-</span>
<a href="#l9.503"></a><span id="l9.503" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetLastKeypressEventTrusted(bool *aResult)</span>
<a href="#l9.504"></a><span id="l9.504" class="difflineminus">-{</span>
<a href="#l9.505"></a><span id="l9.505" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.506"></a><span id="l9.506" class="difflineminus">-}</span>
<a href="#l9.507"></a><span id="l9.507" class="difflineminus">-</span>
<a href="#l9.508"></a><span id="l9.508" class="difflineminus">-// void pasteAsQuotation (in long aSelectionType)</span>
<a href="#l9.509"></a><span id="l9.509" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::PasteAsQuotation(PRInt32 aSelectionType)</span>
<a href="#l9.510"></a><span id="l9.510" class="difflineminus">-{</span>
<a href="#l9.511"></a><span id="l9.511" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.512"></a><span id="l9.512" class="difflineminus">-}</span>
<a href="#l9.513"></a><span id="l9.513" class="difflineminus">-</span>
<a href="#l9.514"></a><span id="l9.514" class="difflineminus">-// nsIDOMNode insertAsQuotation (in AString aQuotedText)</span>
<a href="#l9.515"></a><span id="l9.515" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::InsertAsQuotation(const nsAString &amp;aQuotedText,</span>
<a href="#l9.516"></a><span id="l9.516" class="difflineminus">-                                                 nsIDOMNode **_retval)</span>
<a href="#l9.517"></a><span id="l9.517" class="difflineminus">-{</span>
<a href="#l9.518"></a><span id="l9.518" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.519"></a><span id="l9.519" class="difflineminus">-}</span>
<a href="#l9.520"></a><span id="l9.520" class="difflineminus">-</span>
<a href="#l9.521"></a><span id="l9.521" class="difflineminus">-// void insertTextWithQuotations (in DOMString aStringToInsert)</span>
<a href="#l9.522"></a><span id="l9.522" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l9.523"></a><span id="l9.523" class="difflineminus">-nsOutlookEditor::InsertTextWithQuotations(const nsAString &amp; aStringToInsert)</span>
<a href="#l9.524"></a><span id="l9.524" class="difflineminus">-{</span>
<a href="#l9.525"></a><span id="l9.525" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.526"></a><span id="l9.526" class="difflineminus">-}</span>
<a href="#l9.527"></a><span id="l9.527" class="difflineminus">-</span>
<a href="#l9.528"></a><span id="l9.528" class="difflineminus">-// void pasteAsCitedQuotation (in AString aCitation, in long aSelectionType)</span>
<a href="#l9.529"></a><span id="l9.529" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l9.530"></a><span id="l9.530" class="difflineminus">-nsOutlookEditor::PasteAsCitedQuotation(const nsAString &amp; aCitation,</span>
<a href="#l9.531"></a><span id="l9.531" class="difflineminus">-                                       PRInt32 aSelectionType)</span>
<a href="#l9.532"></a><span id="l9.532" class="difflineminus">-{</span>
<a href="#l9.533"></a><span id="l9.533" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.534"></a><span id="l9.534" class="difflineminus">-}</span>
<a href="#l9.535"></a><span id="l9.535" class="difflineminus">-</span>
<a href="#l9.536"></a><span id="l9.536" class="difflineminus">-// nsIDOMNode insertAsCitedQuotation (in AString aQuotedText, in AString aCitation, in boolean aInsertHTML)</span>
<a href="#l9.537"></a><span id="l9.537" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l9.538"></a><span id="l9.538" class="difflineminus">-nsOutlookEditor::InsertAsCitedQuotation(const nsAString &amp;aQuotedText,</span>
<a href="#l9.539"></a><span id="l9.539" class="difflineminus">-                                        const nsAString &amp; aCitation,</span>
<a href="#l9.540"></a><span id="l9.540" class="difflineminus">-                                        bool aInsertHTML,</span>
<a href="#l9.541"></a><span id="l9.541" class="difflineminus">-                                        nsIDOMNode **_retval)</span>
<a href="#l9.542"></a><span id="l9.542" class="difflineminus">-{</span>
<a href="#l9.543"></a><span id="l9.543" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.544"></a><span id="l9.544" class="difflineminus">-}</span>
<a href="#l9.545"></a><span id="l9.545" class="difflineminus">-</span>
<a href="#l9.546"></a><span id="l9.546" class="difflineminus">-// void rewrap (in boolean aRespectNewlines)</span>
<a href="#l9.547"></a><span id="l9.547" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::Rewrap(bool aRespectNewlines)</span>
<a href="#l9.548"></a><span id="l9.548" class="difflineminus">-{</span>
<a href="#l9.549"></a><span id="l9.549" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.550"></a><span id="l9.550" class="difflineminus">-}</span>
<a href="#l9.551"></a><span id="l9.551" class="difflineminus">-</span>
<a href="#l9.552"></a><span id="l9.552" class="difflineminus">-// void stripCites ()</span>
<a href="#l9.553"></a><span id="l9.553" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::StripCites()</span>
<a href="#l9.554"></a><span id="l9.554" class="difflineminus">-{</span>
<a href="#l9.555"></a><span id="l9.555" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.556"></a><span id="l9.556" class="difflineminus">-}</span>
<a href="#l9.557"></a><span id="l9.557" class="difflineminus">-</span>
<a href="#l9.558"></a><span id="l9.558" class="difflineminus">-// nsISupportsArray getEmbeddedObjects ()</span>
<a href="#l9.559"></a><span id="l9.559" class="difflineminus">-NS_IMETHODIMP nsOutlookEditor::GetEmbeddedObjects(nsISupportsArray ** aNodeList)</span>
<a href="#l9.560"></a><span id="l9.560" class="difflineminus">-{</span>
<a href="#l9.561"></a><span id="l9.561" class="difflineminus">-  NS_ENSURE_ARG_POINTER(aNodeList);</span>
<a href="#l9.562"></a><span id="l9.562" class="difflineminus">-</span>
<a href="#l9.563"></a><span id="l9.563" class="difflineminus">-  NS_IF_ADDREF(*aNodeList = m_EmbeddedObjectList);</span>
<a href="#l9.564"></a><span id="l9.564" class="difflineminus">-  return (m_EmbeddedObjectList == nsnull) ? NS_ERROR_NULL_POINTER : NS_OK;</span>
<a href="#l9.565"></a><span id="l9.565" class="difflineminus">-}</span>
<a href="#l9.566"></a><span id="l9.566" class="difflineminus">-</span>
<a href="#l9.567"></a><span id="l9.567" class="difflineminus">-nsresult nsOutlookEditor::AddEmbeddedImage(nsIURI *uri, const wchar_t* cid,</span>
<a href="#l9.568"></a><span id="l9.568" class="difflineminus">-                                           const wchar_t *name)</span>
<a href="#l9.569"></a><span id="l9.569" class="difflineminus">-{</span>
<a href="#l9.570"></a><span id="l9.570" class="difflineminus">-  // Check to see if we were already called</span>
<a href="#l9.571"></a><span id="l9.571" class="difflineminus">-  if (!m_EmbeddedObjectList) {</span>
<a href="#l9.572"></a><span id="l9.572" class="difflineminus">-    // Create array in m_EmbeddedObjectList</span>
<a href="#l9.573"></a><span id="l9.573" class="difflineminus">-    nsresult rv = NS_NewISupportsArray(getter_AddRefs(m_EmbeddedObjectList) );</span>
<a href="#l9.574"></a><span id="l9.574" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.575"></a><span id="l9.575" class="difflineminus">-  }</span>
<a href="#l9.576"></a><span id="l9.576" class="difflineminus">-</span>
<a href="#l9.577"></a><span id="l9.577" class="difflineminus">-  // Create the embedded image node</span>
<a href="#l9.578"></a><span id="l9.578" class="difflineminus">-  nsCOMPtr&lt;nsIDOMHTMLImageElement&gt; imageNode =</span>
<a href="#l9.579"></a><span id="l9.579" class="difflineminus">-    new nsOutlookHTMLImageElement(this, uri, cid, name);</span>
<a href="#l9.580"></a><span id="l9.580" class="difflineminus">-</span>
<a href="#l9.581"></a><span id="l9.581" class="difflineminus">-  // Append the embedded image node to the list</span>
<a href="#l9.582"></a><span id="l9.582" class="difflineminus">-  m_EmbeddedObjectList-&gt;AppendElement(imageNode);</span>
<a href="#l9.583"></a><span id="l9.583" class="difflineminus">-</span>
<a href="#l9.584"></a><span id="l9.584" class="difflineminus">-  return NS_OK;</span>
<a href="#l9.585"></a><span id="l9.585" class="difflineminus">-}</span>
<a href="#l9.586"></a><span id="l9.586" class="difflineminus">-</span>
<a href="#l9.587"></a><span id="l9.587" class="difflineminus">-PRUint32 nsOutlookEditor::EmbeddedObjectsCount() const</span>
<a href="#l9.588"></a><span id="l9.588" class="difflineminus">-{</span>
<a href="#l9.589"></a><span id="l9.589" class="difflineminus">-  if (!m_EmbeddedObjectList)</span>
<a href="#l9.590"></a><span id="l9.590" class="difflineminus">-    return 0;</span>
<a href="#l9.591"></a><span id="l9.591" class="difflineminus">-  PRUint32 res;</span>
<a href="#l9.592"></a><span id="l9.592" class="difflineminus">-  nsresult rv = m_EmbeddedObjectList-&gt;Count(&amp;res);</span>
<a href="#l9.593"></a><span id="l9.593" class="difflineminus">-  return (NS_FAILED(rv)) ? 0 : res;</span>
<a href="#l9.594"></a><span id="l9.594" class="difflineminus">-}</span>
<a href="#l9.595"></a><span id="l9.595" class="difflineminus">-</span>
<a href="#l9.596"></a><span id="l9.596" class="difflineminus">-nsresult nsOutlookEditor::GetCids(PRUint32 embedIndex, nsACString&amp; origCid,</span>
<a href="#l9.597"></a><span id="l9.597" class="difflineminus">-                                  nsACString&amp; newCid) const</span>
<a href="#l9.598"></a><span id="l9.598" class="difflineminus">-{</span>
<a href="#l9.599"></a><span id="l9.599" class="difflineminus">-  if (!m_EmbeddedObjectList)</span>
<a href="#l9.600"></a><span id="l9.600" class="difflineminus">-    return NS_ERROR_FAILURE;</span>
<a href="#l9.601"></a><span id="l9.601" class="difflineminus">-  nsCOMPtr&lt;nsOutlookHTMLImageElement&gt; node;</span>
<a href="#l9.602"></a><span id="l9.602" class="difflineminus">-  nsresult rv = m_EmbeddedObjectList-&gt;QueryElementAt(</span>
<a href="#l9.603"></a><span id="l9.603" class="difflineminus">-    embedIndex, NS_GET_IID(nsOutlookHTMLImageElement), getter_AddRefs(node));</span>
<a href="#l9.604"></a><span id="l9.604" class="difflineminus">-  if (node) {</span>
<a href="#l9.605"></a><span id="l9.605" class="difflineminus">-    if (!node-&gt;NewCid())</span>
<a href="#l9.606"></a><span id="l9.606" class="difflineminus">-      return NS_ERROR_FAILURE; // no need to replace anything!</span>
<a href="#l9.607"></a><span id="l9.607" class="difflineminus">-    LossyCopyUTF16toASCII(nsDependentString(node-&gt;OrigCid()), origCid);</span>
<a href="#l9.608"></a><span id="l9.608" class="difflineminus">-    LossyCopyUTF16toASCII(nsDependentString(node-&gt;NewCid()), newCid);</span>
<a href="#l9.609"></a><span id="l9.609" class="difflineminus">-  }</span>
<a href="#l9.610"></a><span id="l9.610" class="difflineminus">-  return rv;</span>
<a href="#l9.611"></a><span id="l9.611" class="difflineminus">-}</span>
<a href="#l9.612"></a><span id="l9.612" class="difflineminus">-</span>
<a href="#l9.613"></a><span id="l9.613"> /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l9.614"></a><span id="l9.614"> </span>
<a href="#l9.615"></a><span id="l9.615"> nsOutlookHTMLImageElement::nsOutlookHTMLImageElement</span>
<a href="#l9.616"></a><span id="l9.616" class="difflineminus">-  (nsOutlookEditor *pEditor, nsIURI *uri, const wchar_t *cid, const wchar_t *name)</span>
<a href="#l9.617"></a><span id="l9.617" class="difflineminus">-  : m_pEditor(pEditor), m_name(name), m_cid_orig(cid)</span>
<a href="#l9.618"></a><span id="l9.618" class="difflineplus">+   (nsIURI *uri, const nsAString &amp;cid, const nsAString &amp;name)</span>
<a href="#l9.619"></a><span id="l9.619" class="difflineplus">+   : m_name(name), m_cid_orig(cid)</span>
<a href="#l9.620"></a><span id="l9.620"> {</span>
<a href="#l9.621"></a><span id="l9.621">   // Get the URL for the embedded image</span>
<a href="#l9.622"></a><span id="l9.622">   nsCString embeddedImageURL;</span>
<a href="#l9.623"></a><span id="l9.623">   uri-&gt;GetSpec(embeddedImageURL);</span>
<a href="#l9.624"></a><span id="l9.624">   CopyASCIItoUTF16(embeddedImageURL, m_src);</span>
<a href="#l9.625"></a><span id="l9.625"> </span>
<a href="#l9.626"></a><span id="l9.626">   // The cid that is passed here is not prepended with &quot;cid:&quot;, so if it</span>
<a href="#l9.627"></a><span id="l9.627">   // becomes important that it is, we'd need to prepend it here.</span>
<a href="#l9.628"></a><span id="l9.628" class="difflineat">@@ -666,17 +75,18 @@ nsOutlookHTMLImageElement::~nsOutlookHTM</span>
<a href="#l9.629"></a><span id="l9.629"> NS_IMETHODIMP nsOutlookHTMLImageElement::GetNodeName(nsAString &amp; aNodeName)</span>
<a href="#l9.630"></a><span id="l9.630"> {</span>
<a href="#l9.631"></a><span id="l9.631">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.632"></a><span id="l9.632"> }</span>
<a href="#l9.633"></a><span id="l9.633"> </span>
<a href="#l9.634"></a><span id="l9.634"> // attribute DOMString nodeValue</span>
<a href="#l9.635"></a><span id="l9.635"> NS_IMETHODIMP nsOutlookHTMLImageElement::GetNodeValue(nsAString &amp; aNodeValue)</span>
<a href="#l9.636"></a><span id="l9.636"> {</span>
<a href="#l9.637"></a><span id="l9.637" class="difflineminus">-  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.638"></a><span id="l9.638" class="difflineplus">+  aNodeValue = m_cid_orig;</span>
<a href="#l9.639"></a><span id="l9.639" class="difflineplus">+  return NS_OK;</span>
<a href="#l9.640"></a><span id="l9.640"> }</span>
<a href="#l9.641"></a><span id="l9.641"> </span>
<a href="#l9.642"></a><span id="l9.642"> NS_IMETHODIMP nsOutlookHTMLImageElement::SetNodeValue(const nsAString &amp; aNodeValue)</span>
<a href="#l9.643"></a><span id="l9.643"> {</span>
<a href="#l9.644"></a><span id="l9.644">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.645"></a><span id="l9.645"> }</span>
<a href="#l9.646"></a><span id="l9.646"> </span>
<a href="#l9.647"></a><span id="l9.647"> // readonly attribute unsigned short nodeType</span>
<a href="#l9.648"></a><span id="l9.648" class="difflineat">@@ -1321,25 +731,17 @@ NS_IMETHODIMP nsOutlookHTMLImageElement:</span>
<a href="#l9.649"></a><span id="l9.649"> NS_IMETHODIMP nsOutlookHTMLImageElement::GetSrc(nsAString &amp; aSrc)</span>
<a href="#l9.650"></a><span id="l9.650"> {</span>
<a href="#l9.651"></a><span id="l9.651">   aSrc = m_src;</span>
<a href="#l9.652"></a><span id="l9.652">   return NS_OK;</span>
<a href="#l9.653"></a><span id="l9.653"> }</span>
<a href="#l9.654"></a><span id="l9.654"> </span>
<a href="#l9.655"></a><span id="l9.655"> NS_IMETHODIMP nsOutlookHTMLImageElement::SetSrc(const nsAString &amp; aSrc)</span>
<a href="#l9.656"></a><span id="l9.656"> {</span>
<a href="#l9.657"></a><span id="l9.657" class="difflineminus">-  // nsEudoraHTMLImageElement calls UpdateEmbeddedImageReference(m_cid, aSrc)</span>
<a href="#l9.658"></a><span id="l9.658" class="difflineminus">-  // on the editor here, but our editor doen't implement it.</span>
<a href="#l9.659"></a><span id="l9.659" class="difflineminus">-</span>
<a href="#l9.660"></a><span id="l9.660" class="difflineminus">-  // The nsMsgNend::ProcessMultipartRelated seems to call SetSrc twice.</span>
<a href="#l9.661"></a><span id="l9.661" class="difflineminus">-  // I'm not sure if I need to do it second time.</span>
<a href="#l9.662"></a><span id="l9.662" class="difflineminus">-  if (m_cid_new.IsEmpty()) </span>
<a href="#l9.663"></a><span id="l9.663" class="difflineminus">-    m_cid_new.Assign(Substring(aSrc, 4)); // strip the &quot;cid:&quot;</span>
<a href="#l9.664"></a><span id="l9.664" class="difflineminus">-</span>
<a href="#l9.665"></a><span id="l9.665" class="difflineminus">-  return NS_OK;</span>
<a href="#l9.666"></a><span id="l9.666" class="difflineplus">+  return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.667"></a><span id="l9.667"> }</span>
<a href="#l9.668"></a><span id="l9.668"> </span>
<a href="#l9.669"></a><span id="l9.669"> // attribute DOMString useMap</span>
<a href="#l9.670"></a><span id="l9.670"> NS_IMETHODIMP nsOutlookHTMLImageElement::GetUseMap(nsAString &amp; aUseMap)</span>
<a href="#l9.671"></a><span id="l9.671"> {</span>
<a href="#l9.672"></a><span id="l9.672">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.673"></a><span id="l9.673"> }</span>
<a href="#l9.674"></a><span id="l9.674"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookEditor.h</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookEditor.h</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -32,45 +32,22 @@</span>
<a href="#l10.4"></a><span id="l10.4"> * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.5"></a><span id="l10.5"> * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.6"></a><span id="l10.6"> * the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.7"></a><span id="l10.7"> * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.8"></a><span id="l10.8"> *</span>
<a href="#l10.9"></a><span id="l10.9"> * ***** END LICENSE BLOCK ***** */</span>
<a href="#l10.10"></a><span id="l10.10"> </span>
<a href="#l10.11"></a><span id="l10.11"> #include &quot;nscore.h&quot;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-#include &quot;nsIEditor.h&quot;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-#include &quot;nsIEditorMailSupport.h&quot;</span>
<a href="#l10.14"></a><span id="l10.14"> #include &quot;nsIDOMHTMLImageElement.h&quot;</span>
<a href="#l10.15"></a><span id="l10.15"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l10.16"></a><span id="l10.16"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l10.17"></a><span id="l10.17"> #include &quot;nsIFile.h&quot;</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-class nsOutlookEditor : public nsIEditor, public nsIEditorMailSupport</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-{</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-  public:</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineminus">-    NS_DECL_ISUPPORTS</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineminus">-    NS_DECL_NSIEDITOR</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineminus">-    NS_DECL_NSIEDITORMAILSUPPORT</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineminus">-</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineminus">-    nsOutlookEditor(const wchar_t * body);</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineminus">-</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineminus">-    nsresult AddEmbeddedImage(nsIURI *uri, const wchar_t *cid, const wchar_t *name);</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineminus">-</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineminus">-    inline bool HasEmbeddedContent() const { return (m_EmbeddedObjectList != nsnull); }</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-    PRUint32 EmbeddedObjectsCount() const;</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-    nsresult GetCids(PRUint32 embedIndex, nsACString&amp; origCid, nsACString&amp; newCid) const;</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineminus">-</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-    ~nsOutlookEditor();</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-  private:</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-//    nsString                    m_body;</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineminus">-    const wchar_t*              m_body;</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-    nsCOMPtr&lt;nsISupportsArray&gt;  m_EmbeddedObjectList; // it's initialized when AddEmbeddedImage is called</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineminus">-};</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+#include &quot;nsISupportsArray.h&quot;</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+#include &quot;nsIURI.h&quot;</span>
<a href="#l10.43"></a><span id="l10.43"> </span>
<a href="#l10.44"></a><span id="l10.44"> #define NS_OUTLOOKHTMLIMAGEELEMENT_IID_STR &quot;5fb3c060-20b5-11e0-b2ba-0002a5d5c51b&quot;</span>
<a href="#l10.45"></a><span id="l10.45"> </span>
<a href="#l10.46"></a><span id="l10.46"> #define NS_OUTLOOKHTMLIMAGEELEMENT_IID \</span>
<a href="#l10.47"></a><span id="l10.47">   {0x5fb3c060, 0x20b5, 0x11e0, \</span>
<a href="#l10.48"></a><span id="l10.48">     { 0xb2, 0xba, 0x00, 0x02, 0xa5, 0xd5, 0xc5, 0x1b }}</span>
<a href="#l10.49"></a><span id="l10.49"> </span>
<a href="#l10.50"></a><span id="l10.50"> class nsOutlookHTMLImageElement : public nsIDOMHTMLImageElement</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineat">@@ -79,23 +56,20 @@ class nsOutlookHTMLImageElement : public</span>
<a href="#l10.52"></a><span id="l10.52">     NS_DECLARE_STATIC_IID_ACCESSOR(NS_OUTLOOKHTMLIMAGEELEMENT_IID)</span>
<a href="#l10.53"></a><span id="l10.53"> </span>
<a href="#l10.54"></a><span id="l10.54">     NS_DECL_ISUPPORTS</span>
<a href="#l10.55"></a><span id="l10.55">     NS_DECL_NSIDOMNODE</span>
<a href="#l10.56"></a><span id="l10.56">     NS_DECL_NSIDOMELEMENT</span>
<a href="#l10.57"></a><span id="l10.57">     NS_DECL_NSIDOMHTMLELEMENT</span>
<a href="#l10.58"></a><span id="l10.58">     NS_DECL_NSIDOMHTMLIMAGEELEMENT</span>
<a href="#l10.59"></a><span id="l10.59"> </span>
<a href="#l10.60"></a><span id="l10.60" class="difflineminus">-    nsOutlookHTMLImageElement(nsOutlookEditor *pEditor, nsIURI *uri, const wchar_t *cid, const wchar_t *name);</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+    nsOutlookHTMLImageElement(nsIURI *uri, const nsAString &amp;cid, const nsAString &amp;name);</span>
<a href="#l10.62"></a><span id="l10.62">     inline const wchar_t* OrigCid() const { return m_cid_orig.get(); }</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineminus">-    inline const wchar_t* NewCid() const { return m_cid_new.IsEmpty() ? 0 : m_cid_new.get(); }</span>
<a href="#l10.64"></a><span id="l10.64"> </span>
<a href="#l10.65"></a><span id="l10.65">   private:</span>
<a href="#l10.66"></a><span id="l10.66">     ~nsOutlookHTMLImageElement();</span>
<a href="#l10.67"></a><span id="l10.67"> </span>
<a href="#l10.68"></a><span id="l10.68" class="difflineminus">-    nsCOMPtr&lt;nsIEditor&gt;         m_pEditor;</span>
<a href="#l10.69"></a><span id="l10.69">     nsString                    m_src;</span>
<a href="#l10.70"></a><span id="l10.70">     nsString                    m_cid_orig;</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineminus">-    nsString                    m_cid_new;</span>
<a href="#l10.72"></a><span id="l10.72">     nsString                    m_name;</span>
<a href="#l10.73"></a><span id="l10.73"> };</span>
<a href="#l10.74"></a><span id="l10.74"> </span>
<a href="#l10.75"></a><span id="l10.75"> NS_DEFINE_STATIC_IID_ACCESSOR(nsOutlookHTMLImageElement, NS_OUTLOOKHTMLIMAGEELEMENT_IID)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/import/public/nsIImportService.idl</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/import/public/nsIImportService.idl</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -49,41 +49,42 @@ interface nsIImportMailboxDescriptor;</span>
<a href="#l11.4"></a><span id="l11.4"> interface nsIImportABDescriptor;</span>
<a href="#l11.5"></a><span id="l11.5"> interface nsIImportGeneric;</span>
<a href="#l11.6"></a><span id="l11.6"> interface nsIImportFieldMap;</span>
<a href="#l11.7"></a><span id="l11.7"> interface nsIMsgSendListener;</span>
<a href="#l11.8"></a><span id="l11.8"> interface nsIMsgCompFields;</span>
<a href="#l11.9"></a><span id="l11.9"> interface nsIMsgSendListener;</span>
<a href="#l11.10"></a><span id="l11.10"> interface nsIArray;</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-[scriptable, uuid(8de585fc-8557-402e-b784-875b82e79b1a)]</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+[scriptable, uuid(376fc4c2-76d3-4b47-8095-406260cb9b1f)]</span>
<a href="#l11.14"></a><span id="l11.14"> interface nsIImportService : nsISupports</span>
<a href="#l11.15"></a><span id="l11.15"> {</span>
<a href="#l11.16"></a><span id="l11.16">     void DiscoverModules();</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18">   long GetModuleCount( in string filter);</span>
<a href="#l11.19"></a><span id="l11.19">   void GetModuleInfo( in string filter, in long index, out wstring name, out wstring description);</span>
<a href="#l11.20"></a><span id="l11.20">   wstring GetModuleName( in string filter, in long index);</span>
<a href="#l11.21"></a><span id="l11.21">   wstring GetModuleDescription( in string filter, in long index);</span>
<a href="#l11.22"></a><span id="l11.22">   nsIImportModule  GetModule( in string filter, in long index);</span>
<a href="#l11.23"></a><span id="l11.23">   nsIImportModule GetModuleWithCID( in nsCIDRef cid);</span>
<a href="#l11.24"></a><span id="l11.24"> </span>
<a href="#l11.25"></a><span id="l11.25">   nsIImportFieldMap      CreateNewFieldMap();</span>
<a href="#l11.26"></a><span id="l11.26">   nsIImportMailboxDescriptor  CreateNewMailboxDescriptor();</span>
<a href="#l11.27"></a><span id="l11.27">   nsIImportABDescriptor    CreateNewABDescriptor();</span>
<a href="#l11.28"></a><span id="l11.28">   nsIImportGeneric      CreateNewGenericMail();</span>
<a href="#l11.29"></a><span id="l11.29">   nsIImportGeneric      CreateNewGenericAddressBooks();</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-  [noscript] void ProxySend(in nsIEditor aEditor, in nsIMsgIdentity aIdentity,</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-                            in nsIMsgCompFields aMsgFields,</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-                            in nsMsgDeliverMode aDeliverMode,</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-                            in string attachment1_type,</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-                            in string attachment1_body,</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-                            in PRUint32 attachment1_body_length,</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-                            in nsIArray loaded_attachments,</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-                            in nsIMsgSendListener aListener);</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+  void CreateRFC822Message(in nsIMsgIdentity aIdentity,</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+                           in nsIMsgCompFields aMsgFields,</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineplus">+                           in string aBodytype,</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+                           in string aBody,</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+                           in unsigned long aBodyLength,</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+                           in boolean aCreateAsDraft,</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+                           in nsIArray aLoadedAttachments,</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+                           in nsISupportsArray aEmbeddedObjects,</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+                           in nsIMsgSendListener aListener);</span>
<a href="#l11.47"></a><span id="l11.47"> </span>
<a href="#l11.48"></a><span id="l11.48"> };</span>
<a href="#l11.49"></a><span id="l11.49"> </span>
<a href="#l11.50"></a><span id="l11.50"> %{ C++</span>
<a href="#l11.51"></a><span id="l11.51"> #define NS_IMPORTSERVICE_CID              \</span>
<a href="#l11.52"></a><span id="l11.52"> { /* 5df96d60-1726-11d3-a206-00a0cc26da63 */      \</span>
<a href="#l11.53"></a><span id="l11.53">    0x5df96d60, 0x1726, 0x11d3,                   \</span>
<a href="#l11.54"></a><span id="l11.54">    {0xa2, 0x06, 0x0, 0xa0, 0xcc, 0x26, 0xda, 0x63}}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/import/src/nsImportService.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/import/src/nsImportService.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -67,16 +67,17 @@</span>
<a href="#l12.4"></a><span id="l12.4"> #include &quot;nsIEditor.h&quot;</span>
<a href="#l12.5"></a><span id="l12.5"> #include &quot;ImportDebug.h&quot;</span>
<a href="#l12.6"></a><span id="l12.6"> #include &quot;nsImportService.h&quot;</span>
<a href="#l12.7"></a><span id="l12.7"> #include &quot;nsImportStringBundle.h&quot;</span>
<a href="#l12.8"></a><span id="l12.8"> #include &quot;nsCRTGlue.h&quot;</span>
<a href="#l12.9"></a><span id="l12.9"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l12.10"></a><span id="l12.10"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l12.11"></a><span id="l12.11"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+#include &quot;nsISupportsArray.h&quot;</span>
<a href="#l12.13"></a><span id="l12.13"> </span>
<a href="#l12.14"></a><span id="l12.14"> PRLogModuleInfo *IMPORTLOGMODULE = nsnull;</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16"> static nsIImportService *  gImportService = nsnull;</span>
<a href="#l12.17"></a><span id="l12.17"> static const char *  kWhitespace = &quot;\b\t\r\n &quot;;</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20"> ////////////////////////////////////////////////////////////////////////</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineat">@@ -315,86 +316,91 @@ NS_IMETHODIMP nsImportService::GetModule</span>
<a href="#l12.22"></a><span id="l12.22">   }</span>
<a href="#l12.23"></a><span id="l12.23"> </span>
<a href="#l12.24"></a><span id="l12.24">   return( NS_ERROR_FAILURE);</span>
<a href="#l12.25"></a><span id="l12.25"> }</span>
<a href="#l12.26"></a><span id="l12.26"> </span>
<a href="#l12.27"></a><span id="l12.27"> class nsProxySendRunnable : public nsRunnable</span>
<a href="#l12.28"></a><span id="l12.28"> {</span>
<a href="#l12.29"></a><span id="l12.29"> public:</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-  nsProxySendRunnable(nsIEditor *aEditor, nsIMsgIdentity *aIdentity,</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+  nsProxySendRunnable(nsIMsgIdentity *aIdentity,</span>
<a href="#l12.32"></a><span id="l12.32">                        nsIMsgCompFields *aMsgFields,</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-                       nsMsgDeliverMode aDeliverMode,</span>
<a href="#l12.34"></a><span id="l12.34">                        const char *attachment1_type,</span>
<a href="#l12.35"></a><span id="l12.35">                        const char *attachment1_body,</span>
<a href="#l12.36"></a><span id="l12.36">                        PRUint32 attachment1_body_length,</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-                       nsIArray *loaded_attachments,</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+                       bool aIsDraft,</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+                       nsIArray *aLoadedAttachments,</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineplus">+                       nsISupportsArray *aEmbeddedAttachments,</span>
<a href="#l12.41"></a><span id="l12.41">                        nsIMsgSendListener *aListener);</span>
<a href="#l12.42"></a><span id="l12.42">   NS_DECL_NSIRUNNABLE</span>
<a href="#l12.43"></a><span id="l12.43"> private:</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-  nsCOMPtr&lt;nsIEditor&gt; m_editor;</span>
<a href="#l12.45"></a><span id="l12.45">   nsCOMPtr&lt;nsIMsgIdentity&gt; m_identity;</span>
<a href="#l12.46"></a><span id="l12.46">   nsCOMPtr&lt;nsIMsgCompFields&gt; m_compFields;</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-  nsMsgDeliverMode m_deliverMode;</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineplus">+  bool m_isDraft;</span>
<a href="#l12.49"></a><span id="l12.49">   nsCString m_bodyType;</span>
<a href="#l12.50"></a><span id="l12.50">   nsCString m_body;</span>
<a href="#l12.51"></a><span id="l12.51">   PRUint32 m_bodyLength;</span>
<a href="#l12.52"></a><span id="l12.52">   nsCOMPtr&lt;nsIArray&gt; m_loadedAttachments;</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineplus">+  nsCOMPtr&lt;nsISupportsArray&gt; m_embeddedAttachments;</span>
<a href="#l12.54"></a><span id="l12.54">   nsCOMPtr&lt;nsIMsgSendListener&gt; m_listener;</span>
<a href="#l12.55"></a><span id="l12.55"> </span>
<a href="#l12.56"></a><span id="l12.56"> };</span>
<a href="#l12.57"></a><span id="l12.57"> </span>
<a href="#l12.58"></a><span id="l12.58" class="difflineminus">-nsProxySendRunnable::nsProxySendRunnable(nsIEditor *aEditor, nsIMsgIdentity *aIdentity,</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineplus">+nsProxySendRunnable::nsProxySendRunnable(nsIMsgIdentity *aIdentity,</span>
<a href="#l12.60"></a><span id="l12.60">                                          nsIMsgCompFields *aMsgFields,</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineminus">-                                         nsMsgDeliverMode aDeliverMode,</span>
<a href="#l12.62"></a><span id="l12.62">                                          const char *aBodyType,</span>
<a href="#l12.63"></a><span id="l12.63">                                          const char *aBody,</span>
<a href="#l12.64"></a><span id="l12.64">                                          PRUint32 aBodyLength,</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineplus">+                                         bool aIsDraft,</span>
<a href="#l12.66"></a><span id="l12.66">                                          nsIArray *aLoadedAttachments,</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineplus">+                                         nsISupportsArray *aEmbeddedAttachments,</span>
<a href="#l12.68"></a><span id="l12.68">                                          nsIMsgSendListener *aListener) :</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineminus">-  m_editor(aEditor), m_identity(aIdentity), m_compFields(aMsgFields),</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineminus">-  m_deliverMode(aDeliverMode), m_bodyType(aBodyType),</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineplus">+  m_identity(aIdentity), m_compFields(aMsgFields),</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineplus">+  m_isDraft(aIsDraft), m_bodyType(aBodyType),</span>
<a href="#l12.73"></a><span id="l12.73">   m_body(aBody), m_bodyLength(aBodyLength), m_loadedAttachments(aLoadedAttachments),</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineplus">+  m_embeddedAttachments(aEmbeddedAttachments),</span>
<a href="#l12.75"></a><span id="l12.75">   m_listener(aListener)</span>
<a href="#l12.76"></a><span id="l12.76"> {</span>
<a href="#l12.77"></a><span id="l12.77"> }</span>
<a href="#l12.78"></a><span id="l12.78"> </span>
<a href="#l12.79"></a><span id="l12.79"> NS_IMETHODIMP nsProxySendRunnable::Run()</span>
<a href="#l12.80"></a><span id="l12.80"> {</span>
<a href="#l12.81"></a><span id="l12.81">   nsresult rv;</span>
<a href="#l12.82"></a><span id="l12.82">   nsCOMPtr&lt;nsIMsgSend&gt; msgSend = do_CreateInstance(NS_MSGSEND_CONTRACTID, &amp;rv);</span>
<a href="#l12.83"></a><span id="l12.83">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l12.84"></a><span id="l12.84"> </span>
<a href="#l12.85"></a><span id="l12.85" class="difflineminus">-  return msgSend-&gt;CreateAndSendMessage(m_editor, m_identity, nsnull, m_compFields,</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineminus">-                                       PR_FALSE, PR_TRUE, </span>
<a href="#l12.87"></a><span id="l12.87" class="difflineminus">-                                       m_deliverMode, nsnull, m_bodyType.get(), m_body.get(),</span>
<a href="#l12.88"></a><span id="l12.88" class="difflineminus">-                                       m_bodyLength, nsnull, m_loadedAttachments,</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineminus">-                                       nsnull, nsnull, m_listener, nsnull,</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineminus">-                                       EmptyCString(), nsnull);</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineplus">+  return msgSend-&gt;CreateRFC822Message(m_identity, m_compFields,</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineplus">+                                      m_bodyType.get(), m_body.get(),</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineplus">+                                      m_bodyLength, m_isDraft, m_loadedAttachments,</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineplus">+                                      m_embeddedAttachments,</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineplus">+                                      m_listener);</span>
<a href="#l12.96"></a><span id="l12.96"> }</span>
<a href="#l12.97"></a><span id="l12.97"> </span>
<a href="#l12.98"></a><span id="l12.98"> </span>
<a href="#l12.99"></a><span id="l12.99" class="difflineminus">-NS_IMETHODIMP nsImportService::ProxySend(nsIEditor *aEditor, nsIMsgIdentity *aIdentity,</span>
<a href="#l12.100"></a><span id="l12.100" class="difflineminus">-                                         nsIMsgCompFields *aMsgFields,</span>
<a href="#l12.101"></a><span id="l12.101" class="difflineminus">-                                         nsMsgDeliverMode aDeliverMode,</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineminus">-                                         const char *attachment1_type,</span>
<a href="#l12.103"></a><span id="l12.103" class="difflineminus">-                                         const char *attachment1_body,</span>
<a href="#l12.104"></a><span id="l12.104" class="difflineminus">-                                         PRUint32 attachment1_body_length,</span>
<a href="#l12.105"></a><span id="l12.105" class="difflineminus">-                                         nsIArray *loaded_attachments,</span>
<a href="#l12.106"></a><span id="l12.106" class="difflineminus">-                                         nsIMsgSendListener *aListener)</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineplus">+NS_IMETHODIMP</span>
<a href="#l12.108"></a><span id="l12.108" class="difflineplus">+nsImportService::CreateRFC822Message(nsIMsgIdentity *aIdentity,</span>
<a href="#l12.109"></a><span id="l12.109" class="difflineplus">+                                     nsIMsgCompFields *aMsgFields,</span>
<a href="#l12.110"></a><span id="l12.110" class="difflineplus">+                                     const char *aBodyType,</span>
<a href="#l12.111"></a><span id="l12.111" class="difflineplus">+                                     const char *aBody,</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineplus">+                                     PRUint32 aBodyLength,</span>
<a href="#l12.113"></a><span id="l12.113" class="difflineplus">+                                     bool aIsDraft,</span>
<a href="#l12.114"></a><span id="l12.114" class="difflineplus">+                                     nsIArray *aLoadedAttachments,</span>
<a href="#l12.115"></a><span id="l12.115" class="difflineplus">+                                     nsISupportsArray *aEmbeddedAttachments,</span>
<a href="#l12.116"></a><span id="l12.116" class="difflineplus">+                                     nsIMsgSendListener *aListener)</span>
<a href="#l12.117"></a><span id="l12.117"> {</span>
<a href="#l12.118"></a><span id="l12.118">     nsRefPtr&lt;nsProxySendRunnable&gt; runnable =</span>
<a href="#l12.119"></a><span id="l12.119" class="difflineminus">-      new nsProxySendRunnable(aEditor, aIdentity,</span>
<a href="#l12.120"></a><span id="l12.120" class="difflineminus">-                                       aMsgFields,</span>
<a href="#l12.121"></a><span id="l12.121" class="difflineminus">-                                       aDeliverMode,</span>
<a href="#l12.122"></a><span id="l12.122" class="difflineminus">-                                       attachment1_type,</span>
<a href="#l12.123"></a><span id="l12.123" class="difflineminus">-                                       attachment1_body,</span>
<a href="#l12.124"></a><span id="l12.124" class="difflineminus">-                                       attachment1_body_length,</span>
<a href="#l12.125"></a><span id="l12.125" class="difflineminus">-                                       loaded_attachments,</span>
<a href="#l12.126"></a><span id="l12.126" class="difflineminus">-                                       aListener);</span>
<a href="#l12.127"></a><span id="l12.127" class="difflineplus">+      new nsProxySendRunnable(aIdentity,</span>
<a href="#l12.128"></a><span id="l12.128" class="difflineplus">+                              aMsgFields,</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineplus">+                              aBodyType,</span>
<a href="#l12.130"></a><span id="l12.130" class="difflineplus">+                              aBody,</span>
<a href="#l12.131"></a><span id="l12.131" class="difflineplus">+                              aBodyLength,</span>
<a href="#l12.132"></a><span id="l12.132" class="difflineplus">+                              aIsDraft,</span>
<a href="#l12.133"></a><span id="l12.133" class="difflineplus">+                              aLoadedAttachments,</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineplus">+                              aEmbeddedAttachments,</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineplus">+                              aListener);</span>
<a href="#l12.136"></a><span id="l12.136">     // invoke the callback</span>
<a href="#l12.137"></a><span id="l12.137">     return NS_DispatchToMainThread(runnable);</span>
<a href="#l12.138"></a><span id="l12.138"> }</span>
<a href="#l12.139"></a><span id="l12.139"> </span>
<a href="#l12.140"></a><span id="l12.140"> NS_IMETHODIMP nsImportService::GetModule( const char *filter, PRInt32 index, nsIImportModule **_retval)</span>
<a href="#l12.141"></a><span id="l12.141"> {</span>
<a href="#l12.142"></a><span id="l12.142">     NS_PRECONDITION(_retval != nsnull, &quot;null ptr&quot;);</span>
<a href="#l12.143"></a><span id="l12.143">     if (!_retval)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

