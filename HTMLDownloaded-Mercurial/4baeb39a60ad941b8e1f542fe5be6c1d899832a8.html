<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 1241:4baeb39a60ad941b8e1f542fe5be6c1d899832a8</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 4baeb39a60ad941b8e1f542fe5be6c1d899832a8" />
<meta property="og:url" content="/comm-central/rev/4baeb39a60ad941b8e1f542fe5be6c1d899832a8" />
<meta property="og:description" content="bug 466795 - MailNews Buttons and Menu-Items are mostly greyed out, no function - fork mailWidgets.xml for SeaMonkey and restore state before the recent Thunderbird patch, r=Standard8 sr=Neil a=Standard8 for 2.0a2" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 4baeb39a60ad941b8e1f542fe5be6c1d899832a8 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/4baeb39a60ad941b8e1f542fe5be6c1d899832a8">shortlog</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/4baeb39a60ad941b8e1f542fe5be6c1d899832a8">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8">files</a> |
changeset |
<a href="/comm-central/raw-rev/4baeb39a60ad941b8e1f542fe5be6c1d899832a8">raw</a>  | <a href="/comm-central/archive/4baeb39a60ad941b8e1f542fe5be6c1d899832a8.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=466795">bug 466795</a> - MailNews Buttons and Menu-Items are mostly greyed out, no function - fork mailWidgets.xml for SeaMonkey and restore state before the recent Thunderbird patch, r=Standard8 sr=Neil a=Standard8 for 2.0a2
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#111;&#98;&#101;&#114;&#116;&#32;&#75;&#97;&#105;&#115;&#101;&#114;&#32;&#60;&#107;&#97;&#105;&#114;&#111;&#64;&#107;&#97;&#105;&#114;&#111;&#46;&#97;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 26 Nov 2008 21:06:53 +0100</td></tr>

<tr>
 <td>changeset 1241</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/4baeb39a60ad941b8e1f542fe5be6c1d899832a8">4baeb39a60ad941b8e1f542fe5be6c1d899832a8</a></td>
</tr>



<tr>
<td>parent 1240</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6463e9ac9b66b8ac26a862ff62ce20bd0ca3c11b">6463e9ac9b66b8ac26a862ff62ce20bd0ca3c11b</a>
</td>
</tr>

<tr>
<td>child 1242</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/dced3f5e4c42b872823d63380f616d4d326c964c">dced3f5e4c42b872823d63380f616d4d326c964c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=4baeb39a60ad941b8e1f542fe5be6c1d899832a8">966</a></td></tr>
<tr><td>push user</td><td>kairo@kairo.at</td></tr>
<tr><td>push date</td><td class="date age">Wed, 26 Nov 2008 20:04:54 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@4baeb39a60ad [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&newProject=comm-central&newRevision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&newProject=comm-central&newRevision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&newProject=comm-central&newRevision=4baeb39a60ad941b8e1f542fe5be6c1d899832a8&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a>, <a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a>, <a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=466795">466795</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=466795">bug 466795</a> - MailNews Buttons and Menu-Items are mostly greyed out, no function - fork mailWidgets.xml for SeaMonkey and restore state before the recent Thunderbird patch, r=Standard8 sr=Neil a=Standard8 for 2.0a2</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/mailnews/jar.mn">mailnews/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/mailnews/jar.mn">file</a> |
<a href="/comm-central/annotate/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/mailnews/jar.mn">annotate</a> |
<a href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/mailnews/jar.mn">diff</a> |
<a href="/comm-central/comparison/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/mailnews/jar.mn">comparison</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/mailnews/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/Makefile.in">suite/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/Makefile.in">file</a> |
<a href="/comm-central/annotate/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/Makefile.in">annotate</a> |
<a href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/Makefile.in">diff</a> |
<a href="/comm-central/comparison/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/Makefile.in">comparison</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/Makefile.in">suite/mailnews/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/Makefile.in">file</a> |
<a href="/comm-central/annotate/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/Makefile.in">annotate</a> |
<a href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/Makefile.in">diff</a> |
<a href="/comm-central/comparison/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/Makefile.in">comparison</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/jar.mn">suite/mailnews/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/jar.mn">file</a> |
<a href="/comm-central/annotate/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/jar.mn">annotate</a> |
<a href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/jar.mn">diff</a> |
<a href="/comm-central/comparison/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/jar.mn">comparison</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/mailWidgets.xml">suite/mailnews/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/mailnews/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/makefiles.sh">suite/makefiles.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/makefiles.sh">file</a> |
<a href="/comm-central/annotate/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/makefiles.sh">annotate</a> |
<a href="/comm-central/diff/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/makefiles.sh">diff</a> |
<a href="/comm-central/comparison/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/makefiles.sh">comparison</a> |
<a href="/comm-central/log/4baeb39a60ad941b8e1f542fe5be6c1d899832a8/suite/makefiles.sh">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/jar.mn</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/jar.mn</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -156,17 +156,16 @@ messenger.jar:</span>
<a href="#l1.4"></a><span id="l1.4">     content/messenger/msgPrintEngine.xul                                       (base/resources/content/msgPrintEngine.xul)</span>
<a href="#l1.5"></a><span id="l1.5">     content/messenger/mailTasksOverlay.xul                                     (base/resources/content/mailTasksOverlay.xul)</span>
<a href="#l1.6"></a><span id="l1.6">     content/messenger/mailTasksOverlay.js                                      (base/resources/content/mailTasksOverlay.js)</span>
<a href="#l1.7"></a><span id="l1.7">     content/messenger/mailEditorOverlay.xul                                    (base/resources/content/mailEditorOverlay.xul)</span>
<a href="#l1.8"></a><span id="l1.8">     content/messenger/mailABOverlay.xul                                        (base/resources/content/mailABOverlay.xul)</span>
<a href="#l1.9"></a><span id="l1.9">     content/messenger/mailMessengerOverlay.xul                                 (base/resources/content/mailMessengerOverlay.xul)</span>
<a href="#l1.10"></a><span id="l1.10">     content/messenger/mailMessengerComposeOverlay.xul                          (base/resources/content/mailMessengerComposeOverlay.xul)</span>
<a href="#l1.11"></a><span id="l1.11">     content/messenger/mailOverlay.xul                                          (base/resources/content/mailOverlay.xul)</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-*   content/messenger/mailWidgets.xml                                          (base/resources/content/mailWidgets.xml)</span>
<a href="#l1.13"></a><span id="l1.13"> *   content/messenger/junkMailInfo.xul                                         (base/resources/content/junkMailInfo.xul)</span>
<a href="#l1.14"></a><span id="l1.14">     content/messenger/phishingDetector.js                                      (base/resources/content/phishingDetector.js)</span>
<a href="#l1.15"></a><span id="l1.15">     content/messenger/junkCommands.js                                          (base/resources/content/junkCommands.js)</span>
<a href="#l1.16"></a><span id="l1.16">     content/messenger/SearchDialog.xul                                         (base/search/resources/content/SearchDialog.xul)</span>
<a href="#l1.17"></a><span id="l1.17">     content/messenger/ABSearchDialog.xul                                       (base/search/resources/content/ABSearchDialog.xul)</span>
<a href="#l1.18"></a><span id="l1.18">     content/messenger/SearchDialog.js                                          (base/search/resources/content/SearchDialog.js)</span>
<a href="#l1.19"></a><span id="l1.19">     content/messenger/ABSearchDialog.js                                        (base/search/resources/content/ABSearchDialog.js)</span>
<a href="#l1.20"></a><span id="l1.20">     content/messenger/searchTermOverlay.js                                     (base/search/resources/content/searchTermOverlay.js)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/Makefile.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/Makefile.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -61,16 +61,20 @@ PARALLEL_DIRS	+= \</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l2.6"></a><span id="l2.6"> PARALLEL_DIRS += shell/src</span>
<a href="#l2.7"></a><span id="l2.7"> ifdef MOZ_INSTALLER</span>
<a href="#l2.8"></a><span id="l2.8"> PARALLEL_DIRS += installer/windows</span>
<a href="#l2.9"></a><span id="l2.9"> endif</span>
<a href="#l2.10"></a><span id="l2.10"> endif</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+ifdef MOZ_MAIL_NEWS</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+PARALLEL_DIRS += mailnews</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+endif</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+</span>
<a href="#l2.16"></a><span id="l2.16"> # app is always last as it packages up the built files on mac</span>
<a href="#l2.17"></a><span id="l2.17"> DIRS = build app</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21"> # For Windows build the uninstaller during the application build since the</span>
<a href="#l2.22"></a><span id="l2.22"> # uninstaller is included with the application for mar file generation.</span>
<a href="#l2.23"></a><span id="l2.23"> libs::</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/suite/mailnews/Makefile.in</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,44 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+#</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+#</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+#</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+# License.</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+#</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+#</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+# the mozilla.org SeaMonkey project.</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+#</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+# Contributor(s):</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+#   Robert Kaiser &lt;kairo@kairo.at&gt;</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+#</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+#</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+DEPTH=../..</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+topsrcdir=@top_srcdir@</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+srcdir=@srcdir@</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+VPATH=@srcdir@</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/suite/mailnews/jar.mn</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,2 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+messenger.jar:</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+   content/messenger/mailWidgets.xml</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">copy from mailnews/base/resources/content/mailWidgets.xml</span>
<a href="#l5.2"></a><span id="l5.2">copy to suite/mailnews/mailWidgets.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineminus">--- a/mailnews/base/resources/content/mailWidgets.xml</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineplus">+++ b/suite/mailnews/mailWidgets.xml</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineat">@@ -1,17 +1,10 @@</span>
<a href="#l5.6"></a><span id="l5.6"> &lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">-&lt;!DOCTYPE bindings [</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">-&lt;!ENTITY % msgHdrViewOverlayDTD SYSTEM &quot;chrome://messenger/locale/msgHdrViewOverlay.dtd&quot; &gt;</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineminus">-%msgHdrViewOverlayDTD;</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineminus">-&lt;!ENTITY % messengerDTD SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot; &gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-%messengerDTD;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-]&gt;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-</span>
<a href="#l5.15"></a><span id="l5.15"> &lt;bindings   id=&quot;mailBindings&quot;</span>
<a href="#l5.16"></a><span id="l5.16">             xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l5.17"></a><span id="l5.17">             xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l5.18"></a><span id="l5.18">             xmlns:nc=&quot;http://home.netscape.com/NC-rdf#&quot;</span>
<a href="#l5.19"></a><span id="l5.19">             xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">   &lt;!-- dummy widget to force this file to load --&gt;</span>
<a href="#l5.22"></a><span id="l5.22">   &lt;binding id=&quot;dummy&quot; extends=&quot;xul:box&quot;/&gt;</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineat">@@ -157,124 +150,98 @@</span>
<a href="#l5.24"></a><span id="l5.24">         &lt;xul:image class=&quot;descriptioncell-icon&quot; xbl:inherits=&quot;src=image&quot;/&gt;</span>
<a href="#l5.25"></a><span id="l5.25">         &lt;xul:label class=&quot;descriptioncell-label&quot; xbl:inherits=&quot;value=label,flex=flexlabel,crop,disabled,context&quot; flex=&quot;1&quot; dir=&quot;ltr&quot; crop=&quot;center&quot;/&gt;</span>
<a href="#l5.26"></a><span id="l5.26">       &lt;/xul:hbox&gt;</span>
<a href="#l5.27"></a><span id="l5.27">     &lt;/content&gt;</span>
<a href="#l5.28"></a><span id="l5.28">   &lt;/binding&gt;</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30">   &lt;!-- Message Pane Widgets --&gt;</span>
<a href="#l5.31"></a><span id="l5.31"> </span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-  &lt;!-- mail-toggle-headerfield: Non-email addrs headers which have a toggle</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-       associated with them (i.e. the subject).</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-         Use label to set the header name.</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-         Use headerValue to set the header value. --&gt;</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+  &lt;!-- mail-toggle-headerfield: non email addrss headers which have a toggle associated with them (i.e. the subject).</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+       use label to set the header name.</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+       use headerValue to set the header value. --&gt;</span>
<a href="#l5.39"></a><span id="l5.39">   &lt;binding id=&quot;mail-toggle-headerfield&quot;&gt;</span>
<a href="#l5.40"></a><span id="l5.40">     &lt;content&gt;</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l5.43"></a><span id="l5.43">         &lt;xul:image class=&quot;expandHeaderViewButton&quot; xbl:inherits=&quot;onclick=ontwistyclick&quot;/&gt;</span>
<a href="#l5.44"></a><span id="l5.44">         &lt;xul:spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l5.45"></a><span id="l5.45">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; control=&quot;headerValue&quot;/&gt;</span>
<a href="#l5.46"></a><span id="l5.46">       &lt;/xul:hbox&gt;</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-      &lt;xul:textbox class=&quot;headerValue&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+      &lt;xul:textbox class=&quot;headerValue plain&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.49"></a><span id="l5.49">     &lt;/content&gt;</span>
<a href="#l5.50"></a><span id="l5.50"> </span>
<a href="#l5.51"></a><span id="l5.51">     &lt;implementation&gt;</span>
<a href="#l5.52"></a><span id="l5.52">       &lt;property name=&quot;headerValue&quot; onset=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'headerValue').value = val;&quot;/&gt;</span>
<a href="#l5.53"></a><span id="l5.53">     &lt;/implementation&gt;</span>
<a href="#l5.54"></a><span id="l5.54">   &lt;/binding&gt;</span>
<a href="#l5.55"></a><span id="l5.55"> </span>
<a href="#l5.56"></a><span id="l5.56">   &lt;!-- mail-headerfield: presents standard text header name &amp; value pairs. Don't use this for email addresses.</span>
<a href="#l5.57"></a><span id="l5.57">        use label to set the header name.</span>
<a href="#l5.58"></a><span id="l5.58">        use headerValue to set the header value. --&gt;</span>
<a href="#l5.59"></a><span id="l5.59">   &lt;binding id=&quot;mail-headerfield&quot;&gt;</span>
<a href="#l5.60"></a><span id="l5.60">     &lt;content&gt;</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineminus">-      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l5.63"></a><span id="l5.63">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; control=&quot;headerValue&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.64"></a><span id="l5.64">       &lt;/xul:hbox&gt;</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineminus">-      &lt;xul:textbox class=&quot;headerValue&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+      &lt;xul:textbox class=&quot;headerValue plain&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.67"></a><span id="l5.67">     &lt;/content&gt;</span>
<a href="#l5.68"></a><span id="l5.68"> </span>
<a href="#l5.69"></a><span id="l5.69">     &lt;implementation&gt;</span>
<a href="#l5.70"></a><span id="l5.70">       &lt;property name=&quot;headerValue&quot; onset=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'headerValue').value = val;&quot;/&gt;</span>
<a href="#l5.71"></a><span id="l5.71">     &lt;/implementation&gt;</span>
<a href="#l5.72"></a><span id="l5.72">   &lt;/binding&gt;</span>
<a href="#l5.73"></a><span id="l5.73"> </span>
<a href="#l5.74"></a><span id="l5.74">   &lt;binding id=&quot;mail-urlfield&quot; extends=&quot;chrome://messenger/content/mailWidgets.xml#mail-headerfield&quot;&gt;</span>
<a href="#l5.75"></a><span id="l5.75">     &lt;content&gt;</span>
<a href="#l5.76"></a><span id="l5.76">       &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l5.77"></a><span id="l5.77">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.78"></a><span id="l5.78">       &lt;/xul:hbox&gt;</span>
<a href="#l5.79"></a><span id="l5.79">       &lt;xul:label onclick=&quot;if (event.button != 2) openUILink(event.target.value, event);&quot;</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineminus">-                 class=&quot;headerValue text-link headerValueUrl&quot;</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+                 class=&quot;headerValue plain text-link headerValueUrl&quot;</span>
<a href="#l5.82"></a><span id="l5.82">                  anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot; context=&quot;copyUrlPopup&quot;/&gt;</span>
<a href="#l5.83"></a><span id="l5.83">     &lt;/content&gt;</span>
<a href="#l5.84"></a><span id="l5.84">   &lt;/binding&gt;</span>
<a href="#l5.85"></a><span id="l5.85"> </span>
<a href="#l5.86"></a><span id="l5.86">   &lt;binding id=&quot;mail-emailheaderfield&quot;&gt;</span>
<a href="#l5.87"></a><span id="l5.87">     &lt;content&gt;</span>
<a href="#l5.88"></a><span id="l5.88">       &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l5.89"></a><span id="l5.89">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.90"></a><span id="l5.90">       &lt;/xul:hbox&gt;</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineminus">-      &lt;xul:mail-emailaddress class=&quot;headerValue&quot; containsEmail=&quot;true&quot;</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineminus">-                             anonid=&quot;emailAddressNode&quot;/&gt;</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+      &lt;xul:mail-emailaddress class=&quot;headerValue&quot; anonid=&quot;emailAddressNode&quot;/&gt;</span>
<a href="#l5.94"></a><span id="l5.94">     &lt;/content&gt;</span>
<a href="#l5.95"></a><span id="l5.95"> </span>
<a href="#l5.96"></a><span id="l5.96">     &lt;implementation&gt;</span>
<a href="#l5.97"></a><span id="l5.97">       &lt;property name=&quot;emailAddressNode&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'emailAddressNode');&quot;</span>
<a href="#l5.98"></a><span id="l5.98">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.99"></a><span id="l5.99">     &lt;/implementation&gt;</span>
<a href="#l5.100"></a><span id="l5.100">   &lt;/binding&gt;</span>
<a href="#l5.101"></a><span id="l5.101"> </span>
<a href="#l5.102"></a><span id="l5.102">   &lt;!-- multi-emailHeaderField: presents multiple emailheaderfields with a toggle --&gt;</span>
<a href="#l5.103"></a><span id="l5.103">   &lt;binding id=&quot;mail-multi-emailHeaderField&quot;&gt;</span>
<a href="#l5.104"></a><span id="l5.104">     &lt;content&gt;</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineminus">-        &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;baseline&quot; pack=&quot;end&quot;&gt;</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineminus">-          &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineminus">-        &lt;/xul:hbox&gt;</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot; pack=&quot;end&quot;&gt;</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineplus">+        &lt;xul:image class=&quot;addresstwisty&quot; anonid=&quot;toggleIcon&quot;</span>
<a href="#l5.110"></a><span id="l5.110" class="difflineplus">+                   collapsed=&quot;true&quot; onclick=&quot;toggleWrap();&quot;/&gt;</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineplus">+        &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l5.113"></a><span id="l5.113"> </span>
<a href="#l5.114"></a><span id="l5.114" class="difflineminus">-        &lt;xul:hbox class=&quot;headerValueBox&quot; anonid=&quot;longEmailAddresses&quot; flex=&quot;1&quot;</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineminus">-                  singleline=&quot;true&quot;</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineminus">-                  align=&quot;baseline&quot;</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineminus">-                  onoverflow=&quot;this.parentNode.overflow(event)&quot;</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineminus">-                  onunderflow=&quot;this.parentNode.underflow(event)&quot;&gt;</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineminus">-          &lt;xul:description class=&quot;headerValue&quot; containsEmail=&quot;true&quot;</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineminus">-                           anonid=&quot;emailAddresses&quot; flex=&quot;1&quot;</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineminus">-                           orient=&quot;vertical&quot; pack=&quot;start&quot; /&gt;</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineminus">-          &lt;xul:label class=&quot;moreIndicator&quot; value=&quot;&amp;more.label;&quot; anonid=&quot;more&quot;</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineminus">-                     collapsed=&quot;true&quot;</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineminus">-                     onclick=&quot;this.parentNode.parentNode.toggleWrap()&quot;/&gt;</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineminus">-        &lt;/xul:hbox&gt;</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineplus">+      &lt;xul:hbox class=&quot;headerValueBox&quot; anonid=&quot;longEmailAddresses&quot; flex=&quot;1&quot;</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+                onoverflow=&quot;if (event.detail != 1) this.parentNode.toggleIcon.collapsed = false;&quot;</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineplus">+                onunderflow=&quot;if (event.detail != 1) this.parentNode.toggleIcon.collapsed = true;&quot;&gt;</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineplus">+        &lt;xul:description class=&quot;headerValue&quot; anonid=&quot;emailAddresses&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l5.131"></a><span id="l5.131">     &lt;/content&gt;</span>
<a href="#l5.132"></a><span id="l5.132"> </span>
<a href="#l5.133"></a><span id="l5.133">     &lt;implementation&gt;</span>
<a href="#l5.134"></a><span id="l5.134">       &lt;constructor&gt;</span>
<a href="#l5.135"></a><span id="l5.135">         &lt;![CDATA[</span>
<a href="#l5.136"></a><span id="l5.136">           this.mAddresses = new Array;</span>
<a href="#l5.137"></a><span id="l5.137">         ]]&gt;</span>
<a href="#l5.138"></a><span id="l5.138">       &lt;/constructor&gt;</span>
<a href="#l5.139"></a><span id="l5.139"> </span>
<a href="#l5.140"></a><span id="l5.140" class="difflineminus">-</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineminus">-      &lt;method name=&quot;overflow&quot;&gt;</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineminus">-        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineminus">-        &lt;body&gt;</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineminus">-        &lt;![CDATA[</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineminus">-        if (event.detail != 1) this.more.collapsed = false;</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineminus">-        ]]&gt;</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineminus">-        &lt;/body&gt;</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineminus">-</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineminus">-      &lt;method name=&quot;underflow&quot;&gt;</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineminus">-        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineminus">-        &lt;body&gt;</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineminus">-        &lt;![CDATA[</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineminus">-          if (event.detail != 1) this.more.collapsed = true;</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineminus">-        ]]&gt;</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineminus">-        &lt;/body&gt;</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineminus">-</span>
<a href="#l5.159"></a><span id="l5.159">       &lt;field name=&quot;mAddresses&quot;/&gt;</span>
<a href="#l5.160"></a><span id="l5.160">       &lt;!-- as a perf optimization we are going to keep a cache of email address nodes which we've</span>
<a href="#l5.161"></a><span id="l5.161">            created around for the lifetime of the widget. mSizeOfAddressCache controls how many of these</span>
<a href="#l5.162"></a><span id="l5.162">            elements we keep around --&gt;</span>
<a href="#l5.163"></a><span id="l5.163">       &lt;field name=&quot;mSizeOfAddressCache&quot;&gt;3&lt;/field&gt;</span>
<a href="#l5.164"></a><span id="l5.164"> </span>
<a href="#l5.165"></a><span id="l5.165">       &lt;!-- addAddressView: a public method used to add an address to this widget.</span>
<a href="#l5.166"></a><span id="l5.166">            aAddresses is an object with 3 properties: displayName, emailAddress and fullAddress</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineat">@@ -310,17 +277,17 @@</span>
<a href="#l5.168"></a><span id="l5.168"> </span>
<a href="#l5.169"></a><span id="l5.169">             try</span>
<a href="#l5.170"></a><span id="l5.170">             {</span>
<a href="#l5.171"></a><span id="l5.171">               if (&quot;AddExtraAddressProcessing&quot; in top)</span>
<a href="#l5.172"></a><span id="l5.172">                 AddExtraAddressProcessing(aAddress.emailAddress, aEmailNode);</span>
<a href="#l5.173"></a><span id="l5.173">             }</span>
<a href="#l5.174"></a><span id="l5.174">             catch(ex)</span>
<a href="#l5.175"></a><span id="l5.175">             {</span>
<a href="#l5.176"></a><span id="l5.176" class="difflineminus">-              dump(&quot;AddExtraAddressProcessing failed: &quot; + ex + &quot;\n&quot;);</span>
<a href="#l5.177"></a><span id="l5.177" class="difflineplus">+              dump(&quot;AddExtraAddressProcessing failed: &quot; + ex);</span>
<a href="#l5.178"></a><span id="l5.178">             }</span>
<a href="#l5.179"></a><span id="l5.179">           ]]&gt;</span>
<a href="#l5.180"></a><span id="l5.180">         &lt;/body&gt;</span>
<a href="#l5.181"></a><span id="l5.181">       &lt;/method&gt;</span>
<a href="#l5.182"></a><span id="l5.182"> </span>
<a href="#l5.183"></a><span id="l5.183">       &lt;!-- fillCachedAddresses: private method used to fill up any cached pre-existing</span>
<a href="#l5.184"></a><span id="l5.184">            emailAddress fields without creating new email address fields. Returns a remainder</span>
<a href="#l5.185"></a><span id="l5.185">            for the # of addresses which require new addresses being created.</span>
<a href="#l5.186"></a><span id="l5.186" class="difflineat">@@ -385,34 +352,34 @@</span>
<a href="#l5.187"></a><span id="l5.187">             var remainder = this.fillCachedAddresses(aAddressesNode, aNumAddressesToShow);</span>
<a href="#l5.188"></a><span id="l5.188">             var index = numAddresses - remainder;</span>
<a href="#l5.189"></a><span id="l5.189">             while (index &lt; numAddresses &amp;&amp; index &lt; aNumAddressesToShow)</span>
<a href="#l5.190"></a><span id="l5.190">             {</span>
<a href="#l5.191"></a><span id="l5.191">               var newAddressNode = document.createElement(&quot;mail-emailaddress&quot;);</span>
<a href="#l5.192"></a><span id="l5.192">               if (index)</span>
<a href="#l5.193"></a><span id="l5.193">               {</span>
<a href="#l5.194"></a><span id="l5.194">                 var textNode = document.createElement(&quot;text&quot;);</span>
<a href="#l5.195"></a><span id="l5.195" class="difflineminus">-                textNode.setAttribute(&quot;value&quot;, &quot;,&quot;);</span>
<a href="#l5.196"></a><span id="l5.196" class="difflineplus">+                textNode.setAttribute(&quot;value&quot;, &quot;, &quot;);</span>
<a href="#l5.197"></a><span id="l5.197">                 textNode.setAttribute(&quot;class&quot;, &quot;emailSeparator&quot;);</span>
<a href="#l5.198"></a><span id="l5.198">                 aAddressesNode.appendChild(textNode);</span>
<a href="#l5.199"></a><span id="l5.199">               }</span>
<a href="#l5.200"></a><span id="l5.200"> </span>
<a href="#l5.201"></a><span id="l5.201">               var itemInDocument = aAddressesNode.appendChild(newAddressNode);</span>
<a href="#l5.202"></a><span id="l5.202">               this.updateEmailAddressNode(itemInDocument, this.mAddresses[index]);</span>
<a href="#l5.203"></a><span id="l5.203">               index++;</span>
<a href="#l5.204"></a><span id="l5.204">             }</span>
<a href="#l5.205"></a><span id="l5.205">           ]]&gt;</span>
<a href="#l5.206"></a><span id="l5.206">         &lt;/body&gt;</span>
<a href="#l5.207"></a><span id="l5.207">       &lt;/method&gt;</span>
<a href="#l5.208"></a><span id="l5.208"> </span>
<a href="#l5.209"></a><span id="l5.209">       &lt;property name=&quot;emailAddresses&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'emailAddresses');&quot;</span>
<a href="#l5.210"></a><span id="l5.210">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.211"></a><span id="l5.211">       &lt;property name=&quot;longEmailAddresses&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'longEmailAddresses');&quot;</span>
<a href="#l5.212"></a><span id="l5.212">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineminus">-      &lt;property name=&quot;more&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'more');&quot;</span>
<a href="#l5.214"></a><span id="l5.214" class="difflineplus">+      &lt;property name=&quot;toggleIcon&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'toggleIcon');&quot;</span>
<a href="#l5.215"></a><span id="l5.215">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l5.216"></a><span id="l5.216"> </span>
<a href="#l5.217"></a><span id="l5.217">       &lt;!-- buildView: public method used by callers when they are done adding all the email addresses to the widget</span>
<a href="#l5.218"></a><span id="l5.218">            aNumAddressesToShow: total # of addresses to show in the short view --&gt;</span>
<a href="#l5.219"></a><span id="l5.219">       &lt;method name=&quot;buildViews&quot;&gt;</span>
<a href="#l5.220"></a><span id="l5.220">         &lt;body&gt;</span>
<a href="#l5.221"></a><span id="l5.221">           &lt;![CDATA[</span>
<a href="#l5.222"></a><span id="l5.222">             this.fillAddressesNode(this.emailAddresses, -1);</span>
<a href="#l5.223"></a><span id="l5.223" class="difflineat">@@ -441,18 +408,23 @@</span>
<a href="#l5.224"></a><span id="l5.224">             }</span>
<a href="#l5.225"></a><span id="l5.225">           ]]&gt;</span>
<a href="#l5.226"></a><span id="l5.226"> 	&lt;/body&gt;</span>
<a href="#l5.227"></a><span id="l5.227">       &lt;/method&gt;</span>
<a href="#l5.228"></a><span id="l5.228"> </span>
<a href="#l5.229"></a><span id="l5.229">       &lt;method name=&quot;toggleWrap&quot;&gt;</span>
<a href="#l5.230"></a><span id="l5.230">         &lt;body&gt;</span>
<a href="#l5.231"></a><span id="l5.231">           &lt;![CDATA[</span>
<a href="#l5.232"></a><span id="l5.232" class="difflineminus">-            this.more.collapsed = true;</span>
<a href="#l5.233"></a><span id="l5.233" class="difflineminus">-            this.longEmailAddresses.removeAttribute(&quot;singleline&quot;);</span>
<a href="#l5.234"></a><span id="l5.234" class="difflineplus">+            if (this.toggleIcon.hasAttribute(&quot;open&quot;)) {</span>
<a href="#l5.235"></a><span id="l5.235" class="difflineplus">+              this.toggleIcon.removeAttribute(&quot;open&quot;);</span>
<a href="#l5.236"></a><span id="l5.236" class="difflineplus">+              this.longEmailAddresses.setAttribute(&quot;singleline&quot;, &quot;true&quot;);</span>
<a href="#l5.237"></a><span id="l5.237" class="difflineplus">+            } else {</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineplus">+              this.toggleIcon.setAttribute(&quot;open&quot;, &quot;true&quot;);</span>
<a href="#l5.239"></a><span id="l5.239" class="difflineplus">+              this.longEmailAddresses.removeAttribute(&quot;singleline&quot;);</span>
<a href="#l5.240"></a><span id="l5.240" class="difflineplus">+            }</span>
<a href="#l5.241"></a><span id="l5.241">           ]]&gt;</span>
<a href="#l5.242"></a><span id="l5.242">         &lt;/body&gt;</span>
<a href="#l5.243"></a><span id="l5.243">       &lt;/method&gt;</span>
<a href="#l5.244"></a><span id="l5.244"> </span>
<a href="#l5.245"></a><span id="l5.245">       &lt;!-- internal method used to clear both our divs --&gt;</span>
<a href="#l5.246"></a><span id="l5.246">       &lt;method name=&quot;clearChildNodes&quot;&gt;</span>
<a href="#l5.247"></a><span id="l5.247">         &lt;parameter name=&quot;aParentNode&quot;/&gt;</span>
<a href="#l5.248"></a><span id="l5.248">         &lt;body&gt;</span>
<a href="#l5.249"></a><span id="l5.249" class="difflineat">@@ -472,63 +444,48 @@</span>
<a href="#l5.250"></a><span id="l5.250">         &lt;/body&gt;</span>
<a href="#l5.251"></a><span id="l5.251">       &lt;/method&gt;</span>
<a href="#l5.252"></a><span id="l5.252"> </span>
<a href="#l5.253"></a><span id="l5.253">       &lt;method name=&quot;clearHeaderValues&quot;&gt;</span>
<a href="#l5.254"></a><span id="l5.254">         &lt;body&gt;</span>
<a href="#l5.255"></a><span id="l5.255">           &lt;![CDATA[</span>
<a href="#l5.256"></a><span id="l5.256">             // clear out our local state</span>
<a href="#l5.257"></a><span id="l5.257">             this.mAddresses = new Array;</span>
<a href="#l5.258"></a><span id="l5.258" class="difflineplus">+            if (this.toggleIcon.hasAttribute(&quot;open&quot;))</span>
<a href="#l5.259"></a><span id="l5.259" class="difflineplus">+              // no automatic overflow tracking in this case</span>
<a href="#l5.260"></a><span id="l5.260" class="difflineplus">+              this.toggleIcon.collapsed = true;</span>
<a href="#l5.261"></a><span id="l5.261" class="difflineplus">+            this.toggleIcon.removeAttribute(&quot;open&quot;);</span>
<a href="#l5.262"></a><span id="l5.262">             this.longEmailAddresses.setAttribute(&quot;singleline&quot;, &quot;true&quot;);</span>
<a href="#l5.263"></a><span id="l5.263">             // remove anything inside of each of our labels....</span>
<a href="#l5.264"></a><span id="l5.264">             this.clearChildNodes(this.emailAddresses);</span>
<a href="#l5.265"></a><span id="l5.265">           ]]&gt;</span>
<a href="#l5.266"></a><span id="l5.266">         &lt;/body&gt;</span>
<a href="#l5.267"></a><span id="l5.267">       &lt;/method&gt;</span>
<a href="#l5.268"></a><span id="l5.268">     &lt;/implementation&gt;</span>
<a href="#l5.269"></a><span id="l5.269">   &lt;/binding&gt;</span>
<a href="#l5.270"></a><span id="l5.270"> </span>
<a href="#l5.271"></a><span id="l5.271">   &lt;binding id=&quot;mail-emailaddress&quot;&gt;</span>
<a href="#l5.272"></a><span id="l5.272" class="difflineminus">-#ifndef MOZ_THUNDERBIRD</span>
<a href="#l5.273"></a><span id="l5.273">     &lt;content popup=&quot;emailAddressPopup&quot; context=&quot;emailAddressPopup&quot;&gt;</span>
<a href="#l5.274"></a><span id="l5.274" class="difflineminus">-      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton&quot;</span>
<a href="#l5.275"></a><span id="l5.275" class="difflineplus">+      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton plain&quot;</span>
<a href="#l5.276"></a><span id="l5.276">                  xbl:inherits=&quot;xbl:text=label,crop&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.277"></a><span id="l5.277">       &lt;xul:image class=&quot;emailDisplayImage&quot; anonid=&quot;emailImage&quot;</span>
<a href="#l5.278"></a><span id="l5.278">                  xbl:inherits=&quot;src=image&quot;/&gt;</span>
<a href="#l5.279"></a><span id="l5.279">     &lt;/content&gt;</span>
<a href="#l5.280"></a><span id="l5.280" class="difflineminus">-#else</span>
<a href="#l5.281"></a><span id="l5.281" class="difflineminus">-    &lt;content&gt;</span>
<a href="#l5.282"></a><span id="l5.282" class="difflineminus">-      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton&quot;</span>
<a href="#l5.283"></a><span id="l5.283" class="difflineminus">-                       xbl:inherits=&quot;hascard&quot;</span>
<a href="#l5.284"></a><span id="l5.284" class="difflineminus">-                       context=&quot;emailAddressPopup&quot; popup=&quot;emailAddressPopup&quot;</span>
<a href="#l5.285"></a><span id="l5.285" class="difflineminus">-                       flex=&quot;1&quot;&gt;</span>
<a href="#l5.286"></a><span id="l5.286" class="difflineminus">-        &lt;xul:label class=&quot;emaillabel&quot; anonid=&quot;emaillabel&quot;</span>
<a href="#l5.287"></a><span id="l5.287" class="difflineminus">-                   xbl:inherits=&quot;value=label,crop&quot;/&gt;</span>
<a href="#l5.288"></a><span id="l5.288" class="difflineminus">-        &lt;xul:image class=&quot;emailStar&quot; anonid=&quot;emailStar&quot;</span>
<a href="#l5.289"></a><span id="l5.289" class="difflineminus">-                   context=&quot;emailAddressPopup&quot;</span>
<a href="#l5.290"></a><span id="l5.290" class="difflineminus">-                   onmousedown=&quot;event.preventDefault();&quot;</span>
<a href="#l5.291"></a><span id="l5.291" class="difflineminus">-                   onclick=&quot;onClickEmailStar(event, this.parentNode.parentNode);&quot;</span>
<a href="#l5.292"></a><span id="l5.292" class="difflineminus">-                   xbl:inherits=&quot;hascard,tooltiptext=tooltipstar&quot;/&gt;</span>
<a href="#l5.293"></a><span id="l5.293" class="difflineminus">-      &lt;/xul:description&gt;</span>
<a href="#l5.294"></a><span id="l5.294" class="difflineminus">-    &lt;/content&gt;</span>
<a href="#l5.295"></a><span id="l5.295" class="difflineminus">-#endif</span>
<a href="#l5.296"></a><span id="l5.296"> </span>
<a href="#l5.297"></a><span id="l5.297">     &lt;implementation&gt;</span>
<a href="#l5.298"></a><span id="l5.298">       &lt;property name=&quot;label&quot;      onset=&quot;this.getPart('emailValue').setAttribute('label',val); return val;&quot;</span>
<a href="#l5.299"></a><span id="l5.299">                                   onget=&quot;return this.getPart('emailValue').getAttribute('label');&quot;/&gt;</span>
<a href="#l5.300"></a><span id="l5.300">       &lt;property name=&quot;crop&quot;       onset=&quot;this.getPart('emailValue').setAttribute('crop',val); return val;&quot;</span>
<a href="#l5.301"></a><span id="l5.301">                                   onget=&quot;return this.getPart('emailValue').getAttribute('crop');&quot;/&gt;</span>
<a href="#l5.302"></a><span id="l5.302">       &lt;property name=&quot;disabled&quot;   onset=&quot;this.getPart('emailValue').setAttribute('disabled',val); return val;&quot;</span>
<a href="#l5.303"></a><span id="l5.303">                                   onget=&quot;return this.getPart('emailValue').getAttribute('disabled');&quot;/&gt;</span>
<a href="#l5.304"></a><span id="l5.304" class="difflineminus">-#ifndef MOZ_THUNDERBIRD</span>
<a href="#l5.305"></a><span id="l5.305">       &lt;property name=&quot;src&quot;        onset=&quot;this.getPart('emailImage').setAttribute('src',val); return val;&quot;</span>
<a href="#l5.306"></a><span id="l5.306">                                   onget=&quot;return this.getPart('emailImage').getAttribute('src');&quot;/&gt;</span>
<a href="#l5.307"></a><span id="l5.307">       &lt;property name=&quot;imgalign&quot;   onset=&quot;this.getPart('emailImage').setAttribute('imgalign',val); return val;&quot;</span>
<a href="#l5.308"></a><span id="l5.308">                                   onget=&quot;return this.getPart('emailImage').getAttribute('imgalign');&quot;/&gt;</span>
<a href="#l5.309"></a><span id="l5.309" class="difflineminus">-#endif</span>
<a href="#l5.310"></a><span id="l5.310"> </span>
<a href="#l5.311"></a><span id="l5.311">       &lt;method name=&quot;getPart&quot;&gt;</span>
<a href="#l5.312"></a><span id="l5.312">         &lt;parameter name=&quot;aPartId&quot;/&gt;</span>
<a href="#l5.313"></a><span id="l5.313">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l5.314"></a><span id="l5.314">           return document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, aPartId);</span>
<a href="#l5.315"></a><span id="l5.315">         ]]&gt;&lt;/body&gt;</span>
<a href="#l5.316"></a><span id="l5.316">       &lt;/method&gt;</span>
<a href="#l5.317"></a><span id="l5.317">     &lt;/implementation&gt;</span>
<a href="#l5.318"></a><span id="l5.318" class="difflineat">@@ -675,17 +632,17 @@</span>
<a href="#l5.319"></a><span id="l5.319">           ]]&gt;</span>
<a href="#l5.320"></a><span id="l5.320">         &lt;/body&gt;</span>
<a href="#l5.321"></a><span id="l5.321">       &lt;/method&gt;</span>
<a href="#l5.322"></a><span id="l5.322">     &lt;/implementation&gt;</span>
<a href="#l5.323"></a><span id="l5.323">   &lt;/binding&gt;</span>
<a href="#l5.324"></a><span id="l5.324"> </span>
<a href="#l5.325"></a><span id="l5.325">   &lt;binding id=&quot;mail-messageid&quot;&gt;</span>
<a href="#l5.326"></a><span id="l5.326">     &lt;content context=&quot;messageIdContext&quot; onclick=&quot;MessageIdClick(this, event);&quot;&gt;</span>
<a href="#l5.327"></a><span id="l5.327" class="difflineminus">-      &lt;xul:label anonid=&quot;messageIdValue&quot; class=&quot;messageIdDisplayButton&quot;</span>
<a href="#l5.328"></a><span id="l5.328" class="difflineplus">+      &lt;xul:label anonid=&quot;messageIdValue&quot; class=&quot;messageIdDisplayButton plain&quot;</span>
<a href="#l5.329"></a><span id="l5.329">                  xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l5.330"></a><span id="l5.330">       &lt;xul:image class=&quot;messageIdDisplayImage&quot; anonid=&quot;messageIdImage&quot;/&gt;</span>
<a href="#l5.331"></a><span id="l5.331">     &lt;/content&gt;</span>
<a href="#l5.332"></a><span id="l5.332"> </span>
<a href="#l5.333"></a><span id="l5.333">     &lt;implementation&gt;</span>
<a href="#l5.334"></a><span id="l5.334">       &lt;property name=&quot;label&quot;      onset=&quot;this.getPart().setAttribute('label',val); return val;&quot;</span>
<a href="#l5.335"></a><span id="l5.335">                                   onget=&quot;return this.getPart('messageIdValue').getAttribute('label');&quot;/&gt;</span>
<a href="#l5.336"></a><span id="l5.336"> </span>
<a href="#l5.337"></a><span id="l5.337" class="difflineat">@@ -699,17 +656,17 @@</span>
<a href="#l5.338"></a><span id="l5.338">   &lt;/binding&gt;</span>
<a href="#l5.339"></a><span id="l5.339"> </span>
<a href="#l5.340"></a><span id="l5.340">   &lt;!-- Header field for showing the tags associated with a message --&gt;</span>
<a href="#l5.341"></a><span id="l5.341">   &lt;binding id=&quot;mail-headerfield-tags&quot;&gt;</span>
<a href="#l5.342"></a><span id="l5.342">     &lt;content&gt;</span>
<a href="#l5.343"></a><span id="l5.343">       &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l5.344"></a><span id="l5.344">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.345"></a><span id="l5.345">       &lt;/xul:hbox&gt;</span>
<a href="#l5.346"></a><span id="l5.346" class="difflineminus">-      &lt;xul:label class=&quot;headerValue&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.347"></a><span id="l5.347" class="difflineplus">+      &lt;xul:label class=&quot;headerValue plain&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.348"></a><span id="l5.348">     &lt;/content&gt;</span>
<a href="#l5.349"></a><span id="l5.349"> </span>
<a href="#l5.350"></a><span id="l5.350">     &lt;implementation&gt;</span>
<a href="#l5.351"></a><span id="l5.351">       &lt;property name=&quot;headerValue&quot; onset=&quot;return this.buildTags(val);&quot;/&gt;</span>
<a href="#l5.352"></a><span id="l5.352">       &lt;method name=&quot;buildTags&quot;&gt;</span>
<a href="#l5.353"></a><span id="l5.353">         &lt;parameter name=&quot;aTags&quot;/&gt;</span>
<a href="#l5.354"></a><span id="l5.354">         &lt;body&gt;</span>
<a href="#l5.355"></a><span id="l5.355">           &lt;![CDATA[</span>
<a href="#l5.356"></a><span id="l5.356" class="difflineat">@@ -737,19 +694,17 @@</span>
<a href="#l5.357"></a><span id="l5.357">                 tagName = tagService.getTagForKey(tagsArray[index]);</span>
<a href="#l5.358"></a><span id="l5.358">               } catch (ex) { continue; }</span>
<a href="#l5.359"></a><span id="l5.359"> </span>
<a href="#l5.360"></a><span id="l5.360">               var color = tagService.getColorForKey(tagsArray[index]);</span>
<a href="#l5.361"></a><span id="l5.361"> </span>
<a href="#l5.362"></a><span id="l5.362">               // now create a label for the tag name, and set the color</span>
<a href="#l5.363"></a><span id="l5.363">               var label = document.createElement(&quot;label&quot;);</span>
<a href="#l5.364"></a><span id="l5.364">               label.setAttribute('value', tagName);</span>
<a href="#l5.365"></a><span id="l5.365" class="difflineminus">-#ifndef MOZ_THUNDERBIRD</span>
<a href="#l5.366"></a><span id="l5.366">               label.style.color = color;</span>
<a href="#l5.367"></a><span id="l5.367" class="difflineminus">-#endif</span>
<a href="#l5.368"></a><span id="l5.368">               label.className = &quot;tagvalue blc-&quot; + color.substr(1);</span>
<a href="#l5.369"></a><span id="l5.369">               headerValueNode.appendChild(label);</span>
<a href="#l5.370"></a><span id="l5.370">             }</span>
<a href="#l5.371"></a><span id="l5.371">         ]]&gt;</span>
<a href="#l5.372"></a><span id="l5.372">         &lt;/body&gt;</span>
<a href="#l5.373"></a><span id="l5.373">       &lt;/method&gt;</span>
<a href="#l5.374"></a><span id="l5.374">     &lt;/implementation&gt;</span>
<a href="#l5.375"></a><span id="l5.375">   &lt;/binding&gt;</span>
<a href="#l5.376"></a><span id="l5.376" class="difflineat">@@ -1879,31 +1834,22 @@</span>
<a href="#l5.377"></a><span id="l5.377">     &lt;content&gt;</span>
<a href="#l5.378"></a><span id="l5.378">       &lt;children&gt;</span>
<a href="#l5.379"></a><span id="l5.379">         &lt;xul:folderSummary/&gt;</span>
<a href="#l5.380"></a><span id="l5.380">       &lt;/children&gt;</span>
<a href="#l5.381"></a><span id="l5.381">     &lt;/content&gt;</span>
<a href="#l5.382"></a><span id="l5.382">     &lt;handlers&gt;</span>
<a href="#l5.383"></a><span id="l5.383">       &lt;handler event=&quot;popupshowing&quot;&gt;</span>
<a href="#l5.384"></a><span id="l5.384">         &lt;![CDATA[</span>
<a href="#l5.385"></a><span id="l5.385" class="difflineminus">-          var msgFolder;</span>
<a href="#l5.386"></a><span id="l5.386" class="difflineminus">-          // Allow for differences between Thunderbird and SeaMonkey folder pane</span>
<a href="#l5.387"></a><span id="l5.387" class="difflineminus">-          if (&quot;gFolderTreeView&quot; in window) {</span>
<a href="#l5.388"></a><span id="l5.388" class="difflineminus">-            msgFolder = gFolderTreeView.getFolderAtCoords(event.clientX,</span>
<a href="#l5.389"></a><span id="l5.389" class="difflineminus">-                                                          event.clientY);</span>
<a href="#l5.390"></a><span id="l5.390" class="difflineminus">-            if (!msgFolder)</span>
<a href="#l5.391"></a><span id="l5.391" class="difflineminus">-              return false;</span>
<a href="#l5.392"></a><span id="l5.392" class="difflineminus">-          } else {</span>
<a href="#l5.393"></a><span id="l5.393" class="difflineminus">-            var folderTree = GetFolderTree();</span>
<a href="#l5.394"></a><span id="l5.394" class="difflineminus">-            var row = folderTree.treeBoxObject.getRowAt(event.clientX,</span>
<a href="#l5.395"></a><span id="l5.395" class="difflineminus">-                                                        event.clientY);</span>
<a href="#l5.396"></a><span id="l5.396" class="difflineminus">-            if (row == -1)</span>
<a href="#l5.397"></a><span id="l5.397" class="difflineminus">-              return false;</span>
<a href="#l5.398"></a><span id="l5.398" class="difflineminus">-            msgFolder = GetFolderResource(folderTree, row).QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l5.399"></a><span id="l5.399" class="difflineminus">-          }</span>
<a href="#l5.400"></a><span id="l5.400" class="difflineplus">+          var folderTree = GetFolderTree();</span>
<a href="#l5.401"></a><span id="l5.401" class="difflineplus">+          var row = folderTree.treeBoxObject.getRowAt(event.clientX,</span>
<a href="#l5.402"></a><span id="l5.402" class="difflineplus">+                                                      event.clientY);</span>
<a href="#l5.403"></a><span id="l5.403" class="difflineplus">+          if (row == -1)</span>
<a href="#l5.404"></a><span id="l5.404" class="difflineplus">+            return false;</span>
<a href="#l5.405"></a><span id="l5.405" class="difflineplus">+          var msgFolder = GetFolderResource(folderTree, row).QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l5.406"></a><span id="l5.406">           if (!msgFolder || msgFolder.isServer)</span>
<a href="#l5.407"></a><span id="l5.407">             return false;</span>
<a href="#l5.408"></a><span id="l5.408">           var asyncResults = {};</span>
<a href="#l5.409"></a><span id="l5.409">           return document.getAnonymousNodes(this)[0].parseFolder(msgFolder, null, asyncResults);</span>
<a href="#l5.410"></a><span id="l5.410">         ]]&gt;</span>
<a href="#l5.411"></a><span id="l5.411">       &lt;/handler&gt;</span>
<a href="#l5.412"></a><span id="l5.412"> </span>
<a href="#l5.413"></a><span id="l5.413">       &lt;handler event=&quot;popuphiding&quot;&gt;</span>
<a href="#l5.414"></a><span id="l5.414" class="difflineat">@@ -2105,49 +2051,9 @@</span>
<a href="#l5.415"></a><span id="l5.415">           }</span>
<a href="#l5.416"></a><span id="l5.416"> </span>
<a href="#l5.417"></a><span id="l5.417">           if (gAlertListener)</span>
<a href="#l5.418"></a><span id="l5.418">             gAlertListener.observe(null, &quot;alertclickcallback&quot;, &quot;&quot;);</span>
<a href="#l5.419"></a><span id="l5.419">         ]]&gt;</span>
<a href="#l5.420"></a><span id="l5.420">       &lt;/handler&gt;</span>
<a href="#l5.421"></a><span id="l5.421">     &lt;/handlers&gt;</span>
<a href="#l5.422"></a><span id="l5.422">   &lt;/binding&gt;</span>
<a href="#l5.423"></a><span id="l5.423" class="difflineminus">-</span>
<a href="#l5.424"></a><span id="l5.424" class="difflineminus">-  &lt;binding id=&quot;header-view-button-box&quot;&gt;</span>
<a href="#l5.425"></a><span id="l5.425" class="difflineminus">-    &lt;content&gt;</span>
<a href="#l5.426"></a><span id="l5.426" class="difflineminus">-      &lt;!-- It might be nice to allow a UI for customization of these buttons --&gt;</span>
<a href="#l5.427"></a><span id="l5.427" class="difflineminus">-      &lt;xul:hbox align=&quot;start&quot;&gt;</span>
<a href="#l5.428"></a><span id="l5.428" class="difflineminus">-</span>
<a href="#l5.429"></a><span id="l5.429" class="difflineminus">-        &lt;!-- XXXdmose need to move these commands to a controller, either</span>
<a href="#l5.430"></a><span id="l5.430" class="difflineminus">-             on the header view, the message pane, or the default</span>
<a href="#l5.431"></a><span id="l5.431" class="difflineminus">-             controller --&gt;</span>
<a href="#l5.432"></a><span id="l5.432" class="difflineminus">-</span>
<a href="#l5.433"></a><span id="l5.433" class="difflineminus">-        &lt;!-- XXXdmose need to audit our shortcut/a11y setup and make sure</span>
<a href="#l5.434"></a><span id="l5.434" class="difflineminus">-             these buttons are doing the right thing --&gt;</span>
<a href="#l5.435"></a><span id="l5.435" class="difflineminus">-</span>
<a href="#l5.436"></a><span id="l5.436" class="difflineminus">-       &lt;xul:button anonid=&quot;hdrReplyButton&quot; label=&quot;&amp;replyButton.label;&quot;</span>
<a href="#l5.437"></a><span id="l5.437" class="difflineminus">-                   oncommand=&quot;MsgReplyMessage(event);&quot; observes=&quot;button_reply&quot;</span>
<a href="#l5.438"></a><span id="l5.438" class="difflineminus">-                   class=&quot;msgHeaderView-button hdrReplyButton&quot;/&gt;</span>
<a href="#l5.439"></a><span id="l5.439" class="difflineminus">-       &lt;xul:button anonid=&quot;hdrForwardButton&quot; label=&quot;&amp;forwardButton.label;&quot;</span>
<a href="#l5.440"></a><span id="l5.440" class="difflineminus">-                   oncommand=&quot;MsgForwardMessage(event);&quot;</span>
<a href="#l5.441"></a><span id="l5.441" class="difflineminus">-                   observes=&quot;button_forward&quot; class=&quot;msgHeaderView-button hdrForwardButton&quot;/&gt;</span>
<a href="#l5.442"></a><span id="l5.442" class="difflineminus">-       &lt;xul:button anonid=&quot;hdrJunkButton&quot; label=&quot;&amp;junkButton.label;&quot;</span>
<a href="#l5.443"></a><span id="l5.443" class="difflineminus">-                   observes=&quot;button_junk&quot; class=&quot;msgHeaderView-button hdrJunkButton&quot;</span>
<a href="#l5.444"></a><span id="l5.444" class="difflineminus">-                   oncommand=&quot;goDoCommand('button_junk')&quot;/&gt;</span>
<a href="#l5.445"></a><span id="l5.445" class="difflineminus">-       &lt;xul:button anonid=&quot;hdrTrashButton&quot; tooltiptext=&quot;&amp;trashButton.tooltiptext;&quot;</span>
<a href="#l5.446"></a><span id="l5.446" class="difflineminus">-                   observes=&quot;button_delete&quot; trash=&quot;true&quot;</span>
<a href="#l5.447"></a><span id="l5.447" class="difflineminus">-                   class=&quot;msgHeaderView-button hdrTrashButton&quot; </span>
<a href="#l5.448"></a><span id="l5.448" class="difflineminus">-                   oncommand=&quot;goDoCommand(event.shiftKey ? 'cmd_shiftDelete' : 'cmd_delete')&quot;/&gt;</span>
<a href="#l5.449"></a><span id="l5.449" class="difflineminus">-      &lt;/xul:hbox&gt;</span>
<a href="#l5.450"></a><span id="l5.450" class="difflineminus">-    &lt;/content&gt;</span>
<a href="#l5.451"></a><span id="l5.451" class="difflineminus">-</span>
<a href="#l5.452"></a><span id="l5.452" class="difflineminus">-    &lt;implementation&gt;</span>
<a href="#l5.453"></a><span id="l5.453" class="difflineminus">-      &lt;method name=&quot;getButton&quot;&gt;</span>
<a href="#l5.454"></a><span id="l5.454" class="difflineminus">-        &lt;parameter name=&quot;id&quot;/&gt;</span>
<a href="#l5.455"></a><span id="l5.455" class="difflineminus">-        &lt;body&gt;</span>
<a href="#l5.456"></a><span id="l5.456" class="difflineminus">-          &lt;![CDATA[</span>
<a href="#l5.457"></a><span id="l5.457" class="difflineminus">-          return document.getAnonymousElementByAttribute(this, 'anonid', id);</span>
<a href="#l5.458"></a><span id="l5.458" class="difflineminus">-          ]]&gt;</span>
<a href="#l5.459"></a><span id="l5.459" class="difflineminus">-        &lt;/body&gt;</span>
<a href="#l5.460"></a><span id="l5.460" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l5.461"></a><span id="l5.461" class="difflineminus">-    &lt;/implementation&gt;</span>
<a href="#l5.462"></a><span id="l5.462" class="difflineminus">-  &lt;/binding&gt;</span>
<a href="#l5.463"></a><span id="l5.463"> &lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/makefiles.sh</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/makefiles.sh</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -48,16 +48,17 @@ add_makefiles &quot;</span>
<a href="#l6.4"></a><span id="l6.4">   suite/debugQA/locales/Makefile</span>
<a href="#l6.5"></a><span id="l6.5">   suite/common/Makefile</span>
<a href="#l6.6"></a><span id="l6.6">   suite/common/public/Makefile</span>
<a href="#l6.7"></a><span id="l6.7">   suite/common/src/Makefile</span>
<a href="#l6.8"></a><span id="l6.8">   suite/common/tests/Makefile</span>
<a href="#l6.9"></a><span id="l6.9">   suite/installer/Makefile</span>
<a href="#l6.10"></a><span id="l6.10">   suite/installer/windows/Makefile</span>
<a href="#l6.11"></a><span id="l6.11">   suite/locales/Makefile</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+  suite/mailnews/Makefile</span>
<a href="#l6.13"></a><span id="l6.13">   suite/modules/Makefile</span>
<a href="#l6.14"></a><span id="l6.14">   suite/modules/test/Makefile</span>
<a href="#l6.15"></a><span id="l6.15">   suite/profile/Makefile</span>
<a href="#l6.16"></a><span id="l6.16">   suite/profile/migration/public/Makefile</span>
<a href="#l6.17"></a><span id="l6.17">   suite/profile/migration/src/Makefile</span>
<a href="#l6.18"></a><span id="l6.18">   suite/shell/public/Makefile</span>
<a href="#l6.19"></a><span id="l6.19">   suite/shell/src/Makefile</span>
<a href="#l6.20"></a><span id="l6.20">   suite/themes/modern/Makefile</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

