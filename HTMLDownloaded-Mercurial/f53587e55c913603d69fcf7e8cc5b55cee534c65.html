<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 29594:f53587e55c913603d69fcf7e8cc5b55cee534c65</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ f53587e55c913603d69fcf7e8cc5b55cee534c65" />
<meta property="og:url" content="/comm-central/rev/f53587e55c913603d69fcf7e8cc5b55cee534c65" />
<meta property="og:description" content="Bug 1638398 - Remove Gine-Liam strings from OpenPGP UI. r=PatrickBrunschwig" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / f53587e55c913603d69fcf7e8cc5b55cee534c65 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/f53587e55c913603d69fcf7e8cc5b55cee534c65">shortlog</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/f53587e55c913603d69fcf7e8cc5b55cee534c65">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65">files</a> |
changeset |
<a href="/comm-central/raw-rev/f53587e55c913603d69fcf7e8cc5b55cee534c65">raw</a>  | <a href="/comm-central/archive/f53587e55c913603d69fcf7e8cc5b55cee534c65.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638398">Bug 1638398</a> - Remove Gine-Liam strings from OpenPGP UI. r=PatrickBrunschwig
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#75;&#97;&#105;&#32;&#69;&#110;&#103;&#101;&#114;&#116;&#32;&#60;&#107;&#97;&#105;&#101;&#64;&#107;&#117;&#105;&#120;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 16 May 2020 01:30:21 +0200</td></tr>

<tr>
 <td>changeset 29594</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/f53587e55c913603d69fcf7e8cc5b55cee534c65">f53587e55c913603d69fcf7e8cc5b55cee534c65</a></td>
</tr>



<tr>
<td>parent 29593</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5c0ce2a8339d6e0e12f3c07ade5ef6ddd5683bd4">5c0ce2a8339d6e0e12f3c07ade5ef6ddd5683bd4</a>
</td>
</tr>

<tr>
<td>child 29595</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1ba0182395a43f7d51f3286a1490af7945ad5e55">1ba0182395a43f7d51f3286a1490af7945ad5e55</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=f53587e55c913603d69fcf7e8cc5b55cee534c65">17447</a></td></tr>
<tr><td>push user</td><td>kaie@kuix.de</td></tr>
<tr><td>push date</td><td class="date age">Sat, 16 May 2020 21:18:36 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f53587e55c91 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f53587e55c913603d69fcf7e8cc5b55cee534c65">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f53587e55c913603d69fcf7e8cc5b55cee534c65&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f53587e55c913603d69fcf7e8cc5b55cee534c65&newProject=comm-central&newRevision=b0aeb62aae1d2e1e82163866add7d05a95583d31&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f53587e55c913603d69fcf7e8cc5b55cee534c65&newProject=comm-central&newRevision=b0aeb62aae1d2e1e82163866add7d05a95583d31&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f53587e55c913603d69fcf7e8cc5b55cee534c65&newProject=comm-central&newRevision=b0aeb62aae1d2e1e82163866add7d05a95583d31&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28PatrickBrunschwig%29&revcount=50">PatrickBrunschwig</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638398">1638398</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638398">Bug 1638398</a> - Remove Gine-Liam strings from OpenPGP UI. r=PatrickBrunschwig

Differential Revision: <a href="https://phabricator.services.mozilla.com/D75649">https://phabricator.services.mozilla.com/D75649</a></div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/autoSetup.jsm">mail/extensions/openpgp/content/modules/autoSetup.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/autoSetup.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/autoSetup.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/autoSetup.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/autoSetup.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/autoSetup.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/core.jsm">mail/extensions/openpgp/content/modules/core.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/core.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/core.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/core.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/core.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/core.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/decryption.jsm">mail/extensions/openpgp/content/modules/decryption.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/decryption.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/decryption.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/decryption.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/decryption.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/decryption.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/dialog.jsm">mail/extensions/openpgp/content/modules/dialog.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/dialog.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/dialog.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/dialog.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/dialog.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/dialog.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/encryption.jsm">mail/extensions/openpgp/content/modules/encryption.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/encryption.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/encryption.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/encryption.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/encryption.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/encryption.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">mail/extensions/openpgp/content/modules/filtersWrapper.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyObj.jsm">mail/extensions/openpgp/content/modules/keyObj.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyObj.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyObj.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyObj.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyObj.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyObj.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyUsability.jsm">mail/extensions/openpgp/content/modules/keyUsability.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyUsability.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyUsability.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyUsability.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyUsability.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyUsability.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyserver.jsm">mail/extensions/openpgp/content/modules/keyserver.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyserver.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyserver.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyserver.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyserver.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/keyserver.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/windows.jsm">mail/extensions/openpgp/content/modules/windows.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/windows.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/windows.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/windows.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/windows.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/windows.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">mail/extensions/openpgp/content/modules/wksMimeHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.dtd">mail/extensions/openpgp/content/strings/enigmail.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.dtd">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.dtd">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.dtd">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.dtd">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.properties">mail/extensions/openpgp/content/strings/enigmail.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.properties">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.properties">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.properties">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.properties">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/strings/enigmail.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailCommon.js">mail/extensions/openpgp/content/ui/enigmailCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailCommon.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailCommon.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailCommon.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailCommon.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailCommon.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">mail/extensions/openpgp/content/ui/enigmailKeyManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml">mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">mail/extensions/openpgp/content/ui/enigmailKeySelection.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml">mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeygen.js">mail/extensions/openpgp/content/ui/enigmailKeygen.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeygen.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeygen.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeygen.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeygen.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailKeygen.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">mail/extensions/openpgp/content/ui/enigmailMsgBox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">mail/extensions/openpgp/content/ui/keyDetailsDlg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">file</a> |
<a href="/comm-central/annotate/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">annotate</a> |
<a href="/comm-central/diff/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">diff</a> |
<a href="/comm-central/comparison/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">comparison</a> |
<a href="/comm-central/log/f53587e55c913603d69fcf7e8cc5b55cee534c65/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/autoSetup.jsm</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/autoSetup.jsm</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -263,56 +263,17 @@ var EnigmailAutoSetup = {</span>
<a href="#l1.4"></a><span id="l1.4">   ) {</span>
<a href="#l1.5"></a><span id="l1.5">     EnigmailLog.DEBUG(&quot;autoSetup.jsm: performAutocryptSetup()\n&quot;);</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7">     EnigmailDialog.alert(</span>
<a href="#l1.8"></a><span id="l1.8">       confirmWindow,</span>
<a href="#l1.9"></a><span id="l1.9">       &quot;EnigmailAutocrypt.handleBackupMessage not implemented&quot;</span>
<a href="#l1.10"></a><span id="l1.10">     );</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    let imported = 0;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-    /*</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-    if (headerValue.attachment.contentType.search(/^application\/autocrypt-setup$/i) === 0) {</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-      try {</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-        let res = await EnigmailAutocrypt.getSetupMessageData(headerValue.attachment.url);</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-        let passwd = EnigmailWindows.autocryptSetupPasswd(passwordWindow, &quot;input&quot;, res.passphraseFormat, res.passphraseHint);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">-        if ((!passwd) || passwd == &quot;&quot;) {</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-          throw new Error(&quot;noPasswd&quot;);</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-        }</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineminus">-        // TODO: await EnigmailAutocrypt.handleBackupMessage(passwd, res.attachmentData, headerValue.acSetupMessage.author);</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-        EnigmailDialog.info(confirmWindow, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.success&quot;, headerValue.acSetupMessage.author));</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-        imported = 1;</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineminus">-      }</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineminus">-      catch (err) {</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-        EnigmailLog.DEBUG(&quot;autoSetup.jsm: performAutocryptSetup got cancel status=&quot; + err + &quot;\n&quot;);</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-        imported = -1;</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-        switch (err) {</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-          case &quot;getSetupMessageData&quot;:</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-            EnigmailDialog.alert(confirmWindow, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.invalidMessage&quot;));</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-            break;</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-          case &quot;wrongPasswd&quot;:</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-            if (EnigmailDialog.confirmDlg(confirmWindow, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.wrongPasswd&quot;), EnigmailLocale.getString(&quot;dlg.button.retry&quot;),</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineminus">-                EnigmailLocale.getString(&quot;dlg.button.cancel&quot;))) {</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineminus">-              EnigmailAutoSetup.performAutocryptSetup(headerValue);</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineminus">-            }</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-            break;</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineminus">-          case &quot;keyImportFailed&quot;:</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineminus">-            EnigmailDialog.alert(confirmWindow, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.invalidKey&quot;));</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineminus">-            break;</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-          default:</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">-            EnigmailDialog.alert(confirmWindow, EnigmailLocale.getString(&quot;keyserver.error.unknown&quot;));</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-        }</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">-      }</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-    }</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-    */</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-    return imported;</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+    return 0;</span>
<a href="#l1.53"></a><span id="l1.53">   },</span>
<a href="#l1.54"></a><span id="l1.54"> </span>
<a href="#l1.55"></a><span id="l1.55">   /**</span>
<a href="#l1.56"></a><span id="l1.56">    * Process accounts with Autocrypt headers</span>
<a href="#l1.57"></a><span id="l1.57">    *</span>
<a href="#l1.58"></a><span id="l1.58">    * @param {Object} setupType: containing Autocrypt headers from accounts</span>
<a href="#l1.59"></a><span id="l1.59">    *</span>
<a href="#l1.60"></a><span id="l1.60">    * @return {Promise&lt;Number&gt;}: Result: 0: OK / 1: failure</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/core.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/core.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -151,21 +151,16 @@ var EnigmailCore = {</span>
<a href="#l2.4"></a><span id="l2.4">         );</span>
<a href="#l2.5"></a><span id="l2.5">       }</span>
<a href="#l2.6"></a><span id="l2.6">     }</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">     getEnigmailVerify().registerContentTypeHandler();</span>
<a href="#l2.9"></a><span id="l2.9">     //getEnigmailWksMimeHandler().registerContentTypeHandler();</span>
<a href="#l2.10"></a><span id="l2.10">     //getEnigmailFiltersWrapper().onStartup();</span>
<a href="#l2.11"></a><span id="l2.11">     continueStartup(1);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-    let myName = getEnigmailLocale().getString(&quot;Enigmail&quot;);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-    if (!myName) {</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-      console.log(&quot;core.jsm: couldn't load string from properties &quot; + myName);</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-    }</span>
<a href="#l2.17"></a><span id="l2.17">   },</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">   shutdown(reason) {</span>
<a href="#l2.20"></a><span id="l2.20">     getEnigmailLog().DEBUG(&quot;core.jsm: shutdown():\n&quot;);</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22">     let cLineReg = getEnigmailCommandLine().categoryRegistry;</span>
<a href="#l2.23"></a><span id="l2.23">     Services.catMan.deleteCategoryEntry(</span>
<a href="#l2.24"></a><span id="l2.24">       cLineReg.category,</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineat">@@ -285,24 +280,17 @@ function initializeLogging(env) {</span>
<a href="#l2.26"></a><span id="l2.26">     getEnigmailLog().setLogLevel(Number(matches[1]));</span>
<a href="#l2.27"></a><span id="l2.27">     getEnigmailLog().WARNING(</span>
<a href="#l2.28"></a><span id="l2.28">       &quot;core.jsm: Enigmail: LogLevel=&quot; + matches[1] + &quot;\n&quot;</span>
<a href="#l2.29"></a><span id="l2.29">     );</span>
<a href="#l2.30"></a><span id="l2.30">   }</span>
<a href="#l2.31"></a><span id="l2.31"> }</span>
<a href="#l2.32"></a><span id="l2.32"> </span>
<a href="#l2.33"></a><span id="l2.33"> function failureOn(ex, status) {</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-  status.initializationError = getEnigmailLocale().getString(</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-    &quot;enigmailNotAvailable&quot;</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-  );</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-  getEnigmailLog().ERROR(</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-    &quot;core.jsm: Enigmail.initialize: Error - &quot; +</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-      status.initializationError +</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-      &quot;\n&quot;</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-  );</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+  getEnigmailLog().ERROR(&quot;core.jsm: Enigmail.initialize: Error\n&quot;);</span>
<a href="#l2.43"></a><span id="l2.43">   getEnigmailLog().DEBUG(</span>
<a href="#l2.44"></a><span id="l2.44">     &quot;core.jsm: Enigmail.initialize: exception=&quot; + ex.toString() + &quot;\n&quot;</span>
<a href="#l2.45"></a><span id="l2.45">   );</span>
<a href="#l2.46"></a><span id="l2.46">   throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l2.47"></a><span id="l2.47"> }</span>
<a href="#l2.48"></a><span id="l2.48"> </span>
<a href="#l2.49"></a><span id="l2.49"> function getEnvironment(status) {</span>
<a href="#l2.50"></a><span id="l2.50">   try {</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineat">@@ -406,17 +394,16 @@ function initializeEnvironment(env) {</span>
<a href="#l2.52"></a><span id="l2.52"> </span>
<a href="#l2.53"></a><span id="l2.53"> function Enigmail() {</span>
<a href="#l2.54"></a><span id="l2.54">   this.wrappedJSObject = this;</span>
<a href="#l2.55"></a><span id="l2.55"> }</span>
<a href="#l2.56"></a><span id="l2.56"> </span>
<a href="#l2.57"></a><span id="l2.57"> Enigmail.prototype = {</span>
<a href="#l2.58"></a><span id="l2.58">   initialized: false,</span>
<a href="#l2.59"></a><span id="l2.59">   initializationAttempted: false,</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-  initializationError: &quot;&quot;,</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62">   initialize(domWindow, version) {</span>
<a href="#l2.63"></a><span id="l2.63">     this.initializationAttempted = true;</span>
<a href="#l2.64"></a><span id="l2.64"> </span>
<a href="#l2.65"></a><span id="l2.65">     getEnigmailLog().DEBUG(&quot;core.jsm: Enigmail.initialize: START\n&quot;);</span>
<a href="#l2.66"></a><span id="l2.66"> </span>
<a href="#l2.67"></a><span id="l2.67">     if (this.initialized) {</span>
<a href="#l2.68"></a><span id="l2.68">       return;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -290,22 +290,19 @@ var EnigmailDecryption = {</span>
<a href="#l3.4"></a><span id="l3.4">         errorMsgObj.value = EnigmailLocale.getString(&quot;sigMismatch&quot;);</span>
<a href="#l3.5"></a><span id="l3.5">         statusFlagsObj.value |= EnigmailConstants.DISPLAY_MESSAGE;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">         return &quot;&quot;;</span>
<a href="#l3.8"></a><span id="l3.8">       }</span>
<a href="#l3.9"></a><span id="l3.9">     }</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">     if (!EnigmailCore.getService(parent)) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-      EnigmailLog.ERROR(</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-        &quot;decryption.jsm: decryptMessage: not yet initialized\n&quot;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-      );</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-      errorMsgObj.value = EnigmailLocale.getString(&quot;notInit&quot;);</span>
<a href="#l3.16"></a><span id="l3.16">       statusFlagsObj.value |= EnigmailConstants.DISPLAY_MESSAGE;</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-      return &quot;&quot;;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+      throw new Error(&quot;decryption.jsm: decryptMessage: not yet initialized&quot;);</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+      //return &quot;&quot;;</span>
<a href="#l3.20"></a><span id="l3.20">     }</span>
<a href="#l3.21"></a><span id="l3.21"> </span>
<a href="#l3.22"></a><span id="l3.22">     /*</span>
<a href="#l3.23"></a><span id="l3.23">     if (EnigmailKeyRing.isGeneratingKey()) {</span>
<a href="#l3.24"></a><span id="l3.24">       errorMsgObj.value = EnigmailLocale.getString(&quot;notComplete&quot;);</span>
<a href="#l3.25"></a><span id="l3.25">       statusFlagsObj.value |= EnigmailConstants.DISPLAY_MESSAGE;</span>
<a href="#l3.26"></a><span id="l3.26">       return &quot;&quot;;</span>
<a href="#l3.27"></a><span id="l3.27">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/dialog.jsm</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/dialog.jsm</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -44,17 +44,17 @@ var EnigmailDialog = {</span>
<a href="#l4.4"></a><span id="l4.4">       win,</span>
<a href="#l4.5"></a><span id="l4.5">       {</span>
<a href="#l4.6"></a><span id="l4.6">         msgtext: mesg,</span>
<a href="#l4.7"></a><span id="l4.7">         button1: okLabel ? okLabel : EnigmailLocale.getString(&quot;dlg.button.ok&quot;),</span>
<a href="#l4.8"></a><span id="l4.8">         cancelButton: cancelLabel</span>
<a href="#l4.9"></a><span id="l4.9">           ? cancelLabel</span>
<a href="#l4.10"></a><span id="l4.10">           : EnigmailLocale.getString(&quot;dlg.button.cancel&quot;),</span>
<a href="#l4.11"></a><span id="l4.11">         iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-        dialogTitle: EnigmailLocale.getString(&quot;enigConfirm&quot;),</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l4.14"></a><span id="l4.14">       },</span>
<a href="#l4.15"></a><span id="l4.15">       null</span>
<a href="#l4.16"></a><span id="l4.16">     );</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18">     return buttonPressed === 0;</span>
<a href="#l4.19"></a><span id="l4.19">   },</span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21">   /**</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -67,17 +67,17 @@ var EnigmailDialog = {</span>
<a href="#l4.23"></a><span id="l4.23">    */</span>
<a href="#l4.24"></a><span id="l4.24">   alert(win, mesg) {</span>
<a href="#l4.25"></a><span id="l4.25">     EnigmailDialog.msgBox(</span>
<a href="#l4.26"></a><span id="l4.26">       win,</span>
<a href="#l4.27"></a><span id="l4.27">       {</span>
<a href="#l4.28"></a><span id="l4.28">         msgtext: mesg,</span>
<a href="#l4.29"></a><span id="l4.29">         button1: EnigmailLocale.getString(&quot;dlg.button.close&quot;),</span>
<a href="#l4.30"></a><span id="l4.30">         iconType: EnigmailConstants.ICONTYPE_ALERT,</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-        dialogTitle: EnigmailLocale.getString(&quot;enigAlert&quot;),</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigAlert2&quot;),</span>
<a href="#l4.33"></a><span id="l4.33">       },</span>
<a href="#l4.34"></a><span id="l4.34">       null</span>
<a href="#l4.35"></a><span id="l4.35">     );</span>
<a href="#l4.36"></a><span id="l4.36">   },</span>
<a href="#l4.37"></a><span id="l4.37"> </span>
<a href="#l4.38"></a><span id="l4.38">   /**</span>
<a href="#l4.39"></a><span id="l4.39">    * Displays an information dialog.</span>
<a href="#l4.40"></a><span id="l4.40">    *</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineat">@@ -88,17 +88,17 @@ var EnigmailDialog = {</span>
<a href="#l4.42"></a><span id="l4.42">    */</span>
<a href="#l4.43"></a><span id="l4.43">   info(win, mesg) {</span>
<a href="#l4.44"></a><span id="l4.44">     EnigmailDialog.msgBox(</span>
<a href="#l4.45"></a><span id="l4.45">       win,</span>
<a href="#l4.46"></a><span id="l4.46">       {</span>
<a href="#l4.47"></a><span id="l4.47">         msgtext: mesg,</span>
<a href="#l4.48"></a><span id="l4.48">         button1: EnigmailLocale.getString(&quot;dlg.button.close&quot;),</span>
<a href="#l4.49"></a><span id="l4.49">         iconType: EnigmailConstants.ICONTYPE_INFO,</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-        dialogTitle: EnigmailLocale.getString(&quot;enigInfo&quot;),</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigInfo2&quot;),</span>
<a href="#l4.52"></a><span id="l4.52">       },</span>
<a href="#l4.53"></a><span id="l4.53">       null</span>
<a href="#l4.54"></a><span id="l4.54">     );</span>
<a href="#l4.55"></a><span id="l4.55">   },</span>
<a href="#l4.56"></a><span id="l4.56"> </span>
<a href="#l4.57"></a><span id="l4.57">   /**</span>
<a href="#l4.58"></a><span id="l4.58">    * Displays an alert dialog with 1-3 optional buttons.</span>
<a href="#l4.59"></a><span id="l4.59">    *</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineat">@@ -209,17 +209,17 @@ var EnigmailDialog = {</span>
<a href="#l4.61"></a><span id="l4.61">    * @mesg:     String    - message text</span>
<a href="#l4.62"></a><span id="l4.62">    * @valueObj: Object    - object to hold the entered text in .value</span>
<a href="#l4.63"></a><span id="l4.63">    *</span>
<a href="#l4.64"></a><span id="l4.64">    * @return:   Boolean - true if OK was pressed / false otherwise</span>
<a href="#l4.65"></a><span id="l4.65">    */</span>
<a href="#l4.66"></a><span id="l4.66">   promptValue(win, mesg, valueObj) {</span>
<a href="#l4.67"></a><span id="l4.67">     return Services.prompt.prompt(</span>
<a href="#l4.68"></a><span id="l4.68">       win,</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-      EnigmailLocale.getString(&quot;enigPrompt&quot;),</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+      EnigmailLocale.getString(&quot;enigPrompt2&quot;),</span>
<a href="#l4.71"></a><span id="l4.71">       mesg,</span>
<a href="#l4.72"></a><span id="l4.72">       valueObj,</span>
<a href="#l4.73"></a><span id="l4.73">       &quot;&quot;,</span>
<a href="#l4.74"></a><span id="l4.74">       {}</span>
<a href="#l4.75"></a><span id="l4.75">     );</span>
<a href="#l4.76"></a><span id="l4.76">   },</span>
<a href="#l4.77"></a><span id="l4.77"> </span>
<a href="#l4.78"></a><span id="l4.78">   /**</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineat">@@ -241,17 +241,17 @@ var EnigmailDialog = {</span>
<a href="#l4.80"></a><span id="l4.80">       let checkBoxObj = {</span>
<a href="#l4.81"></a><span id="l4.81">         value: false,</span>
<a href="#l4.82"></a><span id="l4.82">       };</span>
<a href="#l4.83"></a><span id="l4.83"> </span>
<a href="#l4.84"></a><span id="l4.84">       let buttonPressed = EnigmailDialog.msgBox(</span>
<a href="#l4.85"></a><span id="l4.85">         win,</span>
<a href="#l4.86"></a><span id="l4.86">         {</span>
<a href="#l4.87"></a><span id="l4.87">           msgtext: mesg,</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-          dialogTitle: EnigmailLocale.getString(&quot;enigInfo&quot;),</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+          dialogTitle: EnigmailLocale.getString(&quot;enigInfo2&quot;),</span>
<a href="#l4.90"></a><span id="l4.90">           iconType: EnigmailConstants.ICONTYPE_INFO,</span>
<a href="#l4.91"></a><span id="l4.91">           checkboxLabel: EnigmailLocale.getString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l4.92"></a><span id="l4.92">         },</span>
<a href="#l4.93"></a><span id="l4.93">         checkBoxObj</span>
<a href="#l4.94"></a><span id="l4.94">       );</span>
<a href="#l4.95"></a><span id="l4.95"> </span>
<a href="#l4.96"></a><span id="l4.96">       if (checkBoxObj.value &amp;&amp; buttonPressed === 0) {</span>
<a href="#l4.97"></a><span id="l4.97">         EnigmailPrefs.setPref(prefText, dontDisplay);</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineat">@@ -282,17 +282,17 @@ var EnigmailDialog = {</span>
<a href="#l4.99"></a><span id="l4.99"> </span>
<a href="#l4.100"></a><span id="l4.100">     if (alertCount &gt; 0) {</span>
<a href="#l4.101"></a><span id="l4.101">       mesg += EnigmailLocale.getString(&quot;repeatPrefix&quot;, [alertCount]) + &quot; &quot;;</span>
<a href="#l4.102"></a><span id="l4.102">       mesg +=</span>
<a href="#l4.103"></a><span id="l4.103">         alertCount == 1</span>
<a href="#l4.104"></a><span id="l4.104">           ? EnigmailLocale.getString(&quot;repeatSuffixSingular&quot;)</span>
<a href="#l4.105"></a><span id="l4.105">           : EnigmailLocale.getString(&quot;repeatSuffixPlural&quot;);</span>
<a href="#l4.106"></a><span id="l4.106">     } else {</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-      mesg += EnigmailLocale.getString(&quot;noRepeat&quot;);</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineplus">+      mesg += EnigmailLocale.getString(&quot;noRepeat2&quot;);</span>
<a href="#l4.109"></a><span id="l4.109">     }</span>
<a href="#l4.110"></a><span id="l4.110"> </span>
<a href="#l4.111"></a><span id="l4.111">     EnigmailDialog.alert(win, mesg);</span>
<a href="#l4.112"></a><span id="l4.112">   },</span>
<a href="#l4.113"></a><span id="l4.113"> </span>
<a href="#l4.114"></a><span id="l4.114">   /**</span>
<a href="#l4.115"></a><span id="l4.115">    * Display a confirmation dialog with OK / Cancel buttons (both customizable) and</span>
<a href="#l4.116"></a><span id="l4.116">    * a checkbox to remember the selected choice.</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineat">@@ -335,17 +335,17 @@ var EnigmailDialog = {</span>
<a href="#l4.118"></a><span id="l4.118">               button1: okLabel</span>
<a href="#l4.119"></a><span id="l4.119">                 ? okLabel</span>
<a href="#l4.120"></a><span id="l4.120">                 : EnigmailLocale.getString(&quot;dlg.button.ok&quot;),</span>
<a href="#l4.121"></a><span id="l4.121">               cancelButton: cancelLabel</span>
<a href="#l4.122"></a><span id="l4.122">                 ? cancelLabel</span>
<a href="#l4.123"></a><span id="l4.123">                 : EnigmailLocale.getString(&quot;dlg.button.cancel&quot;),</span>
<a href="#l4.124"></a><span id="l4.124">               checkboxLabel: EnigmailLocale.getString(&quot;dlgKeepSetting&quot;),</span>
<a href="#l4.125"></a><span id="l4.125">               iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-              dialogTitle: EnigmailLocale.getString(&quot;enigConfirm&quot;),</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineplus">+              dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l4.128"></a><span id="l4.128">             },</span>
<a href="#l4.129"></a><span id="l4.129">             checkBoxObj</span>
<a href="#l4.130"></a><span id="l4.130">           );</span>
<a href="#l4.131"></a><span id="l4.131"> </span>
<a href="#l4.132"></a><span id="l4.132">           if (checkBoxObj.value) {</span>
<a href="#l4.133"></a><span id="l4.133">             EnigmailPrefs.setPref(prefText, buttonPressed === 0 ? yes : no);</span>
<a href="#l4.134"></a><span id="l4.134">           }</span>
<a href="#l4.135"></a><span id="l4.135">           return buttonPressed === 0 ? 1 : 0;</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineat">@@ -371,17 +371,17 @@ var EnigmailDialog = {</span>
<a href="#l4.137"></a><span id="l4.137">               button1: okLabel</span>
<a href="#l4.138"></a><span id="l4.138">                 ? okLabel</span>
<a href="#l4.139"></a><span id="l4.139">                 : EnigmailLocale.getString(&quot;dlg.button.ok&quot;),</span>
<a href="#l4.140"></a><span id="l4.140">               cancelButton: cancelLabel</span>
<a href="#l4.141"></a><span id="l4.141">                 ? cancelLabel</span>
<a href="#l4.142"></a><span id="l4.142">                 : EnigmailLocale.getString(&quot;dlg.button.cancel&quot;),</span>
<a href="#l4.143"></a><span id="l4.143">               checkboxLabel: EnigmailLocale.getString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l4.144"></a><span id="l4.144">               iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineminus">-              dialogTitle: EnigmailLocale.getString(&quot;enigConfirm&quot;),</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineplus">+              dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l4.147"></a><span id="l4.147">             },</span>
<a href="#l4.148"></a><span id="l4.148">             checkBoxObj</span>
<a href="#l4.149"></a><span id="l4.149">           );</span>
<a href="#l4.150"></a><span id="l4.150"> </span>
<a href="#l4.151"></a><span id="l4.151">           if (checkBoxObj.value) {</span>
<a href="#l4.152"></a><span id="l4.152">             EnigmailPrefs.setPref(prefText, false);</span>
<a href="#l4.153"></a><span id="l4.153">           }</span>
<a href="#l4.154"></a><span id="l4.154">           return buttonPressed === 0 ? 1 : 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/encryption.jsm</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/encryption.jsm</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -469,21 +469,19 @@ var EnigmailEncryption = {</span>
<a href="#l5.4"></a><span id="l5.4">       EnigmailLog.DEBUG(</span>
<a href="#l5.5"></a><span id="l5.5">         &quot;encryption.jsm: encryptMessageStart: NO ENCRYPTION!\n&quot;</span>
<a href="#l5.6"></a><span id="l5.6">       );</span>
<a href="#l5.7"></a><span id="l5.7">       errorMsgObj.value = EnigmailLocale.getString(&quot;notRequired&quot;);</span>
<a href="#l5.8"></a><span id="l5.8">       return null;</span>
<a href="#l5.9"></a><span id="l5.9">     }</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">     if (!EnigmailCore.getService(win)) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      EnigmailLog.ERROR(</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-        &quot;encryption.jsm: encryptMessageStart: not yet initialized\n&quot;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+      throw new Error(</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+        &quot;encryption.jsm: encryptMessageStart: not yet initialized&quot;</span>
<a href="#l5.16"></a><span id="l5.16">       );</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-      errorMsgObj.value = EnigmailLocale.getString(&quot;notInit&quot;);</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-      return null;</span>
<a href="#l5.19"></a><span id="l5.19">     }</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">     let logFileObj = {};</span>
<a href="#l5.22"></a><span id="l5.22"> </span>
<a href="#l5.23"></a><span id="l5.23">     // GnuPG</span>
<a href="#l5.24"></a><span id="l5.24">     // let encryptArgs = EnigmailEncryption.getEncryptCommand(fromMailAddr, toMailAddr, bccMailAddr, hashAlgo, sendFlags, ENC_TYPE_MSG, errorMsgObj, logFileObj);</span>
<a href="#l5.25"></a><span id="l5.25">     let encryptArgs = EnigmailEncryption.getCryptParams(</span>
<a href="#l5.26"></a><span id="l5.26">       fromMailAddr,</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineat">@@ -559,21 +557,17 @@ var EnigmailEncryption = {</span>
<a href="#l5.28"></a><span id="l5.28">     var signMsg = sendFlags &amp; EnigmailConstants.SEND_SIGNED;</span>
<a href="#l5.29"></a><span id="l5.29">     var encryptMsg = sendFlags &amp; EnigmailConstants.SEND_ENCRYPTED;</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31">     retStatusObj.statusFlags = 0;</span>
<a href="#l5.32"></a><span id="l5.32">     retStatusObj.errorMsg = &quot;&quot;;</span>
<a href="#l5.33"></a><span id="l5.33">     retStatusObj.blockSeparation = &quot;&quot;;</span>
<a href="#l5.34"></a><span id="l5.34"> </span>
<a href="#l5.35"></a><span id="l5.35">     if (!EnigmailCore.getService().initialized) {</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-      EnigmailLog.ERROR(</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-        &quot;encryption.jsm: encryptMessageEnd: not yet initialized\n&quot;</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-      );</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-      retStatusObj.errorMsg = EnigmailLocale.getString(&quot;notInit&quot;);</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-      return -1;</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+      throw new Error(&quot;encryption.jsm: encryptMessageEnd: not yet initialized&quot;);</span>
<a href="#l5.42"></a><span id="l5.42">     }</span>
<a href="#l5.43"></a><span id="l5.43"> </span>
<a href="#l5.44"></a><span id="l5.44">     //EnigmailErrorHandling.parseErrorOutput(stderrStr, retStatusObj);</span>
<a href="#l5.45"></a><span id="l5.45"> </span>
<a href="#l5.46"></a><span id="l5.46">     //exitCode = EnigmailExecution.fixExitCode(exitCode, retStatusObj);</span>
<a href="#l5.47"></a><span id="l5.47">     if (exitCode === 0 &amp;&amp; !outputLen) {</span>
<a href="#l5.48"></a><span id="l5.48">       exitCode = -1;</span>
<a href="#l5.49"></a><span id="l5.49">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/filtersWrapper.jsm</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/filtersWrapper.jsm</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -19,17 +19,17 @@ let { EnigmailLocale } = ChromeUtils.imp</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> /**</span>
<a href="#l6.6"></a><span id="l6.6">  * filter action for creating a decrypted version of the mail and</span>
<a href="#l6.7"></a><span id="l6.7">  * deleting the original mail at the same time</span>
<a href="#l6.8"></a><span id="l6.8">  */</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> const filterActionMoveDecrypt = {</span>
<a href="#l6.11"></a><span id="l6.11">   id: EnigmailConstants.FILTER_MOVE_DECRYPT,</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.decryptMove.label&quot;),</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  name: EnigmailLocale.getString(&quot;filter.decryptMove2.label&quot;),</span>
<a href="#l6.14"></a><span id="l6.14">   value: &quot;movemessage&quot;,</span>
<a href="#l6.15"></a><span id="l6.15">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l6.16"></a><span id="l6.16">     if (gEnigmailFilters) {</span>
<a href="#l6.17"></a><span id="l6.17">       gEnigmailFilters.moveDecrypt.apply(</span>
<a href="#l6.18"></a><span id="l6.18">         aMsgHdrs,</span>
<a href="#l6.19"></a><span id="l6.19">         aActionValue,</span>
<a href="#l6.20"></a><span id="l6.20">         aListener,</span>
<a href="#l6.21"></a><span id="l6.21">         aType,</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -64,17 +64,17 @@ const filterActionMoveDecrypt = {</span>
<a href="#l6.23"></a><span id="l6.23"> };</span>
<a href="#l6.24"></a><span id="l6.24"> </span>
<a href="#l6.25"></a><span id="l6.25"> /**</span>
<a href="#l6.26"></a><span id="l6.26">  * filter action for creating a decrypted copy of the mail, leaving the original</span>
<a href="#l6.27"></a><span id="l6.27">  * message untouched</span>
<a href="#l6.28"></a><span id="l6.28">  */</span>
<a href="#l6.29"></a><span id="l6.29"> const filterActionCopyDecrypt = {</span>
<a href="#l6.30"></a><span id="l6.30">   id: EnigmailConstants.FILTER_COPY_DECRYPT,</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.decryptCopy.label&quot;),</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  name: EnigmailLocale.getString(&quot;filter.decryptCopy2.label&quot;),</span>
<a href="#l6.33"></a><span id="l6.33">   value: &quot;copymessage&quot;,</span>
<a href="#l6.34"></a><span id="l6.34">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l6.35"></a><span id="l6.35">     if (gEnigmailFilters) {</span>
<a href="#l6.36"></a><span id="l6.36">       gEnigmailFilters.copyDecrypt.apply(</span>
<a href="#l6.37"></a><span id="l6.37">         aMsgHdrs,</span>
<a href="#l6.38"></a><span id="l6.38">         aActionValue,</span>
<a href="#l6.39"></a><span id="l6.39">         aListener,</span>
<a href="#l6.40"></a><span id="l6.40">         aType,</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineat">@@ -108,17 +108,17 @@ const filterActionCopyDecrypt = {</span>
<a href="#l6.42"></a><span id="l6.42">   needsBody: true,</span>
<a href="#l6.43"></a><span id="l6.43"> };</span>
<a href="#l6.44"></a><span id="l6.44"> </span>
<a href="#l6.45"></a><span id="l6.45"> /**</span>
<a href="#l6.46"></a><span id="l6.46">  * filter action for to encrypt a mail to a specific key</span>
<a href="#l6.47"></a><span id="l6.47">  */</span>
<a href="#l6.48"></a><span id="l6.48"> const filterActionEncrypt = {</span>
<a href="#l6.49"></a><span id="l6.49">   id: EnigmailConstants.FILTER_ENCRYPT,</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.encrypt.label&quot;),</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+  name: EnigmailLocale.getString(&quot;filter.encrypt2.label&quot;),</span>
<a href="#l6.52"></a><span id="l6.52">   value: &quot;encryptto&quot;,</span>
<a href="#l6.53"></a><span id="l6.53">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l6.54"></a><span id="l6.54">     if (gEnigmailFilters) {</span>
<a href="#l6.55"></a><span id="l6.55">       gEnigmailFilters.encrypt.apply(</span>
<a href="#l6.56"></a><span id="l6.56">         aMsgHdrs,</span>
<a href="#l6.57"></a><span id="l6.57">         aActionValue,</span>
<a href="#l6.58"></a><span id="l6.58">         aListener,</span>
<a href="#l6.59"></a><span id="l6.59">         aType,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyObj.jsm</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyObj.jsm</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -254,17 +254,17 @@ class EnigmailKeyObj {</span>
<a href="#l7.4"></a><span id="l7.4">     ) {</span>
<a href="#l7.5"></a><span id="l7.5">       // public key disabled</span>
<a href="#l7.6"></a><span id="l7.6">       retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyDisabled&quot;, [</span>
<a href="#l7.7"></a><span id="l7.7">         this.userId,</span>
<a href="#l7.8"></a><span id="l7.8">         &quot;0x&quot; + this.keyId,</span>
<a href="#l7.9"></a><span id="l7.9">       ]);</span>
<a href="#l7.10"></a><span id="l7.10">     } else if (this.keyTrust.search(/i/i) &gt;= 0) {</span>
<a href="#l7.11"></a><span id="l7.11">       // public key invalid</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyInvalid&quot;, [</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+      retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyInvalid2&quot;, [</span>
<a href="#l7.14"></a><span id="l7.14">         this.userId,</span>
<a href="#l7.15"></a><span id="l7.15">         &quot;0x&quot; + this.keyId,</span>
<a href="#l7.16"></a><span id="l7.16">       ]);</span>
<a href="#l7.17"></a><span id="l7.17">     } else {</span>
<a href="#l7.18"></a><span id="l7.18">       retVal.keyValid = true;</span>
<a href="#l7.19"></a><span id="l7.19">     }</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21">     return retVal;</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -368,17 +368,17 @@ class EnigmailKeyObj {</span>
<a href="#l7.23"></a><span id="l7.23">       return retVal;</span>
<a href="#l7.24"></a><span id="l7.24">     }</span>
<a href="#l7.25"></a><span id="l7.25"> </span>
<a href="#l7.26"></a><span id="l7.26">     if (this.keyUseFor.search(/E/) &lt; 0) {</span>
<a href="#l7.27"></a><span id="l7.27">       retVal.keyValid = false;</span>
<a href="#l7.28"></a><span id="l7.28"> </span>
<a href="#l7.29"></a><span id="l7.29">       if (this.keyTrust.search(/u/i) &lt; 0) {</span>
<a href="#l7.30"></a><span id="l7.30">         // public key invalid</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-        retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyInvalid&quot;, [</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+        retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyInvalid2&quot;, [</span>
<a href="#l7.33"></a><span id="l7.33">           this.userId,</span>
<a href="#l7.34"></a><span id="l7.34">           &quot;0x&quot; + this.keyId,</span>
<a href="#l7.35"></a><span id="l7.35">         ]);</span>
<a href="#l7.36"></a><span id="l7.36">       } else {</span>
<a href="#l7.37"></a><span id="l7.37">         let expired = 0,</span>
<a href="#l7.38"></a><span id="l7.38">           revoked = 0,</span>
<a href="#l7.39"></a><span id="l7.39">           unusable = 0,</span>
<a href="#l7.40"></a><span id="l7.40">           found = 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyUsability.jsm</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyUsability.jsm</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -307,25 +307,25 @@ var EnigmailKeyUsability = {</span>
<a href="#l8.4"></a><span id="l8.4">     ) {</span>
<a href="#l8.5"></a><span id="l8.5">       let actionButtonText = &quot;&quot;;</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7">       if (resultObj &amp;&amp; resultObj.Count === 1) {</span>
<a href="#l8.8"></a><span id="l8.8">         // single key is concerned</span>
<a href="#l8.9"></a><span id="l8.9">         actionButtonText = EnigmailLocale.getString(&quot;expiry.OpenKeyProperties&quot;);</span>
<a href="#l8.10"></a><span id="l8.10">       } else {</span>
<a href="#l8.11"></a><span id="l8.11">         // Multiple keys concerned</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-        actionButtonText = EnigmailLocale.getString(&quot;expiry.OpenKeyManager&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+        actionButtonText = EnigmailLocale.getString(&quot;expiry.OpenKeyManager2&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">       }</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16">       let checkedObj = {};</span>
<a href="#l8.17"></a><span id="l8.17">       let r = getDialog().msgBox(</span>
<a href="#l8.18"></a><span id="l8.18">         null,</span>
<a href="#l8.19"></a><span id="l8.19">         {</span>
<a href="#l8.20"></a><span id="l8.20">           msgtext: msg,</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-          dialogTitle: EnigmailLocale.getString(&quot;enigInfo&quot;),</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+          dialogTitle: EnigmailLocale.getString(&quot;enigInfo2&quot;),</span>
<a href="#l8.23"></a><span id="l8.23">           checkboxLabel: EnigmailLocale.getString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l8.24"></a><span id="l8.24">           button1: EnigmailLocale.getString(&quot;dlg.button.close&quot;),</span>
<a href="#l8.25"></a><span id="l8.25">           button2: actionButtonText,</span>
<a href="#l8.26"></a><span id="l8.26">           iconType: EnigmailConstants.ICONTYPE_INFO,</span>
<a href="#l8.27"></a><span id="l8.27">         },</span>
<a href="#l8.28"></a><span id="l8.28">         checkedObj</span>
<a href="#l8.29"></a><span id="l8.29">       );</span>
<a href="#l8.30"></a><span id="l8.30">       if (r &gt;= 0 &amp;&amp; checkedObj.value) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyserver.jsm</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyserver.jsm</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -518,17 +518,17 @@ const accessHkpInternal = {</span>
<a href="#l9.4"></a><span id="l9.4">         }</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6">         switch (line[0]) {</span>
<a href="#l9.7"></a><span id="l9.7">           case &quot;info&quot;:</span>
<a href="#l9.8"></a><span id="l9.8">             if (line[1] !== &quot;1&quot;) {</span>
<a href="#l9.9"></a><span id="l9.9">               // protocol version not supported</span>
<a href="#l9.10"></a><span id="l9.10">               retObj.result = 7;</span>
<a href="#l9.11"></a><span id="l9.11">               retObj.errorDetails = EnigmailLocale.getString(</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-                &quot;keyserver.error.unsupported&quot;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                &quot;keyserver.error.unsupported2&quot;</span>
<a href="#l9.14"></a><span id="l9.14">               );</span>
<a href="#l9.15"></a><span id="l9.15">               retObj.pubKeys = [];</span>
<a href="#l9.16"></a><span id="l9.16">               return retObj;</span>
<a href="#l9.17"></a><span id="l9.17">             }</span>
<a href="#l9.18"></a><span id="l9.18">             break;</span>
<a href="#l9.19"></a><span id="l9.19">           case &quot;pub&quot;:</span>
<a href="#l9.20"></a><span id="l9.20">             if (line.length &gt;= 6) {</span>
<a href="#l9.21"></a><span id="l9.21">               if (key) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/windows.jsm</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/windows.jsm</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -254,17 +254,17 @@ var EnigmailWindows = {</span>
<a href="#l10.4"></a><span id="l10.4">    * @win       - |object| holding the parent window for the dialog</span>
<a href="#l10.5"></a><span id="l10.5">    *</span>
<a href="#l10.6"></a><span id="l10.6">    * no return value</span>
<a href="#l10.7"></a><span id="l10.7">    */</span>
<a href="#l10.8"></a><span id="l10.8">   openDebugLog(win) {</span>
<a href="#l10.9"></a><span id="l10.9">     EnigmailWindows.openWin(</span>
<a href="#l10.10"></a><span id="l10.10">       &quot;enigmail:logFile&quot;,</span>
<a href="#l10.11"></a><span id="l10.11">       &quot;chrome://openpgp/content/ui/enigmailViewFile.xhtml?viewLog=1&amp;title=&quot; +</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-        escape(EnigmailLocale.getString(&quot;debugLog.title&quot;)),</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+        escape(EnigmailLocale.getString(&quot;debugLog2.title&quot;)),</span>
<a href="#l10.14"></a><span id="l10.14">       &quot;centerscreen&quot;</span>
<a href="#l10.15"></a><span id="l10.15">     );</span>
<a href="#l10.16"></a><span id="l10.16">   },</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18">   /**</span>
<a href="#l10.19"></a><span id="l10.19">    * Display the dialog for changing the expiry date of one or several keys</span>
<a href="#l10.20"></a><span id="l10.20">    *</span>
<a href="#l10.21"></a><span id="l10.21">    * @win        - |object| holding the parent window for the dialog</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/wksMimeHandler.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -125,17 +125,17 @@ PgpWkdHandler.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">     if (this.data.search(/-----BEGIN PGP MESSAGE-----/i) &gt;= 0) {</span>
<a href="#l11.5"></a><span id="l11.5">       this.decryptChallengeData();</span>
<a href="#l11.6"></a><span id="l11.6">     }</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8">     let jsonStr = this.requestToJsonString(this.data);</span>
<a href="#l11.9"></a><span id="l11.9">     let msg = &quot;&quot;;</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">     if (this.data.search(/^\s*type:\s+confirmation-request/im) &gt;= 0) {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-      msg = EnigmailLocale.getString(&quot;wkdMessage.body.req&quot;);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+      msg = EnigmailLocale.getString(&quot;wkdMessage.body.req2&quot;);</span>
<a href="#l11.14"></a><span id="l11.14">     } else {</span>
<a href="#l11.15"></a><span id="l11.15">       msg = EnigmailLocale.getString(&quot;wkdMessage.body.process&quot;);</span>
<a href="#l11.16"></a><span id="l11.16">     }</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18">     this.returnData(msg);</span>
<a href="#l11.19"></a><span id="l11.19">     this.displayStatus(jsonStr);</span>
<a href="#l11.20"></a><span id="l11.20">   },</span>
<a href="#l11.21"></a><span id="l11.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/extensions/openpgp/content/strings/enigmail.dtd</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/strings/enigmail.dtd</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -1,9 +1,8 @@</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineminus">-&lt;!ENTITY enigmail.label                   &quot;Gine-Liam&quot;&gt;</span>
<a href="#l12.5"></a><span id="l12.5"> &lt;!ENTITY enigmail.autocrypt.label         &quot;Autocrypt&quot;&gt;</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> &lt;!ENTITY enigmail.keyUserId.label         &quot;Account / User ID&quot;&gt;</span>
<a href="#l12.8"></a><span id="l12.8"> &lt;!ENTITY enigmail.keygenTitle.label       &quot;Generate OpenPGP Key&quot;&gt;</span>
<a href="#l12.9"></a><span id="l12.9"> &lt;!ENTITY enigmail.keyNoPassphrase.label   &quot;No passphrase&quot;&gt;</span>
<a href="#l12.10"></a><span id="l12.10"> &lt;!ENTITY enigmail.keyPassphrase.label     &quot;Passphrase&quot;&gt;</span>
<a href="#l12.11"></a><span id="l12.11"> &lt;!ENTITY enigmail.keyPassphraseRepeat.label &quot;Passphrase (repeat)&quot;&gt;</span>
<a href="#l12.12"></a><span id="l12.12"> &lt;!ENTITY enigmail.generateKey.tooltip     &quot;Generates a new OpenPGP compliant key for encryption and/or signing&quot;&gt;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineat">@@ -16,18 +15,16 @@</span>
<a href="#l12.14"></a><span id="l12.14"> &lt;!ENTITY enigmail.keyGen.years.label      &quot;years&quot;&gt;</span>
<a href="#l12.15"></a><span id="l12.15"> &lt;!ENTITY enigmail.keyGen.noExpiry.label   &quot;Key does not expire&quot;&gt;</span>
<a href="#l12.16"></a><span id="l12.16"> &lt;!ENTITY enigmail.keyGen.keySize.label    &quot;Key size&quot;&gt;</span>
<a href="#l12.17"></a><span id="l12.17"> &lt;!ENTITY enigmail.keyGen.console.label    &quot;Key Generation&quot;&gt;</span>
<a href="#l12.18"></a><span id="l12.18"> &lt;!ENTITY enigmail.keyGen.keyType.label    &quot;Key type&quot;&gt;</span>
<a href="#l12.19"></a><span id="l12.19"> &lt;!ENTITY enigmail.keyGen.keyType.rsa      &quot;RSA&quot;&gt;</span>
<a href="#l12.20"></a><span id="l12.20"> &lt;!ENTITY enigmail.keyGen.keyType.ecc      &quot;ECC (Elliptic Curve)&quot;&gt;</span>
<a href="#l12.21"></a><span id="l12.21"> </span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-&lt;!ENTITY enigmail.preferences.label       &quot;Gine-Liam Preferences&quot;&gt;</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-</span>
<a href="#l12.24"></a><span id="l12.24"> &lt;!ENTITY enigmail.passwordSettings.label   &quot;Passphrase Timeout&quot;&gt;</span>
<a href="#l12.25"></a><span id="l12.25"> &lt;!ENTITY enigmail.expertUserMenus.label    &quot;Display Expert Settings and Menus&quot;&gt;</span>
<a href="#l12.26"></a><span id="l12.26"> &lt;!ENTITY enigmail.expertUser.tooltip       &quot;Press if you want to see menu items and options for advanced users.&quot;&gt;</span>
<a href="#l12.27"></a><span id="l12.27"> &lt;!ENTITY enigmail.basicUserMenus.label     &quot;Hide Expert Settings and Menus&quot;&gt;</span>
<a href="#l12.28"></a><span id="l12.28"> &lt;!ENTITY enigmail.basicUser.tooltip        &quot;Press if you do not want to see menu items and options for advanced users.&quot;&gt;</span>
<a href="#l12.29"></a><span id="l12.29"> </span>
<a href="#l12.30"></a><span id="l12.30"> &lt;!ENTITY enigmail.prefs.pathsTitle.label      &quot;Files and Directories&quot;&gt;</span>
<a href="#l12.31"></a><span id="l12.31"> &lt;!ENTITY enigmail.prefs.overrideGpg.label     &quot;Override with&quot;&gt;</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineat">@@ -48,28 +45,23 @@</span>
<a href="#l12.33"></a><span id="l12.33"> &lt;!ENTITY enigmail.mime_parts_on_demand.label  &quot;Only download attachments when opened (IMAP only)&quot;&gt;</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36"> &lt;!ENTITY enigmail.maxIdleMinutesHead.label &quot;Remember passphrase for&quot;&gt;</span>
<a href="#l12.37"></a><span id="l12.37"> &lt;!ENTITY enigmail.maxIdleMinutesTail.label &quot;minutes of inactivity (before needing to re-enter it)&quot;&gt;</span>
<a href="#l12.38"></a><span id="l12.38"> &lt;!ENTITY enigmail.maxIdleMinutes.tooltip   &quot;Remember passphrase for a limited time.&quot;&gt;</span>
<a href="#l12.39"></a><span id="l12.39"> </span>
<a href="#l12.40"></a><span id="l12.40"> &lt;!ENTITY enigmail.resetPrefsButton.label &quot;Reset&quot;&gt;</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-&lt;!ENTITY enigmail.resetPrefs.tooltip     &quot;Set all Gine-Liam preferences back to their default value.&quot;&gt;</span>
<a href="#l12.42"></a><span id="l12.42"> </span>
<a href="#l12.43"></a><span id="l12.43"> &lt;!ENTITY enigmail.backupPrefsButton.label &quot;Export Settings and Keys&quot;&gt;</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-&lt;!ENTITY enigmail.backupPrefs.tooltip     &quot;Save all Gine-Liam preferences including your OpenPGP keys to a file.&quot;&gt;</span>
<a href="#l12.45"></a><span id="l12.45"> </span>
<a href="#l12.46"></a><span id="l12.46"> &lt;!ENTITY enigmail.restorePrefsButton.label &quot;Restore Settings and Keys&quot;&gt;</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-&lt;!ENTITY enigmail.restorePrefs.tooltip     &quot;Restore all Gine-Liam preferences including your OpenPGP keys from a file.&quot;&gt;</span>
<a href="#l12.48"></a><span id="l12.48"> </span>
<a href="#l12.49"></a><span id="l12.49"> &lt;!ENTITY enigmail.pref.acSetupMessage.button &quot;Initiate Autocrypt Setup&quot;&gt;</span>
<a href="#l12.50"></a><span id="l12.50"> </span>
<a href="#l12.51"></a><span id="l12.51" class="difflineminus">-&lt;!ENTITY enigmail.backupRestore.desc       &quot;Export (backup) and Restore your Gine-Liam settings including your OpenPGP keys.&quot;&gt;</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-</span>
<a href="#l12.53"></a><span id="l12.53"> &lt;!ENTITY enigmail.acceptance.label            &quot;Your Acceptance&quot;&gt;</span>
<a href="#l12.54"></a><span id="l12.54"> &lt;!ENTITY enigmail.acceptance.rejected.label   &quot;No, never use this key. (rejected)&quot;&gt;</span>
<a href="#l12.55"></a><span id="l12.55"> &lt;!ENTITY enigmail.acceptance.undecided.label  &quot;Not yet, maybe later. (undecided)&quot;&gt;</span>
<a href="#l12.56"></a><span id="l12.56"> &lt;!ENTITY enigmail.acceptance.unverified.label &quot;Yes, but I don't know if it is the correct key. (unverified)&quot;&gt;</span>
<a href="#l12.57"></a><span id="l12.57"> &lt;!ENTITY enigmail.acceptance.verified.label   &quot;Yes, I've verified in person this key has the correct fingerprint. (verified)&quot;&gt;</span>
<a href="#l12.58"></a><span id="l12.58"> </span>
<a href="#l12.59"></a><span id="l12.59"> &lt;!ENTITY enigmail.sending.label          &quot;Sending&quot;&gt;</span>
<a href="#l12.60"></a><span id="l12.60"> &lt;!ENTITY enigmail.keySel.label           &quot;Key Selection&quot;&gt;</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineat">@@ -77,18 +69,16 @@</span>
<a href="#l12.62"></a><span id="l12.62"> &lt;!ENTITY enigmail.advanced.label         &quot;Advanced&quot;&gt;</span>
<a href="#l12.63"></a><span id="l12.63"> &lt;!ENTITY enigmail.transferSettings.label &quot;Transfer Settings&quot;&gt;</span>
<a href="#l12.64"></a><span id="l12.64"> </span>
<a href="#l12.65"></a><span id="l12.65"> &lt;!ENTITY enigmail.basicPrefs.label       &quot;Basic Settings&quot;&gt;</span>
<a href="#l12.66"></a><span id="l12.66"> </span>
<a href="#l12.67"></a><span id="l12.67"> &lt;!ENTITY enigmail.moreOptions.label       &quot;More Options&quot;&gt;</span>
<a href="#l12.68"></a><span id="l12.68"> &lt;!ENTITY enigmail.general.okLabel         &quot;OK&quot;&gt;</span>
<a href="#l12.69"></a><span id="l12.69"> </span>
<a href="#l12.70"></a><span id="l12.70" class="difflineminus">-&lt;!ENTITY enigmail.useNonDefaultComment.label &quot;Add Gine-Liam comment in OpenPGP signature&quot;&gt;</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineminus">-</span>
<a href="#l12.72"></a><span id="l12.72"> &lt;!ENTITY enigmail.keyserver.label         &quot;Keyserver&quot;&gt;</span>
<a href="#l12.73"></a><span id="l12.73"> &lt;!ENTITY enigmail.keyserverDlg.label      &quot;Select Keyserver&quot;&gt;</span>
<a href="#l12.74"></a><span id="l12.74"> &lt;!ENTITY enigmail.keyservers.label        &quot;Specify your keyserver(s):&quot;&gt;</span>
<a href="#l12.75"></a><span id="l12.75"> &lt;!ENTITY enigmail.keyservers.sample2      &quot;Example: keys.openpgp.org, pool.sks-keyservers.net&quot;&gt;</span>
<a href="#l12.76"></a><span id="l12.76"> </span>
<a href="#l12.77"></a><span id="l12.77"> &lt;!ENTITY enigmail.searchForKey.example    &quot;Example: 'Forename Surname &amp;lt;user@example.com&amp;gt;'&quot;&gt;</span>
<a href="#l12.78"></a><span id="l12.78"> &lt;!ENTITY enigmail.searchForKey.desc1	    &quot;'Forename Surname' finds all keys that contain 'Forename' OR 'Surname'&quot;&gt;</span>
<a href="#l12.79"></a><span id="l12.79"> &lt;!ENTITY enigmail.searchForKey.desc2      &quot;'Forename+Surname' finds all keys that contain both 'Forename' AND 'Surname'&quot;&gt;</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineat">@@ -102,17 +92,16 @@</span>
<a href="#l12.81"></a><span id="l12.81"> &lt;!ENTITY enigmail.noHushMailSupport.tooltip    &quot;Use the '&amp;lt;' and '&amp;gt;' characters to specify email addresses for GnuPG. Disable if recipients have old Hushmail keys.&quot;&gt;</span>
<a href="#l12.82"></a><span id="l12.82"> &lt;!ENTITY enigmail.mime_parts_on_demand.tooltip &quot;You should turn this OFF if you are receiving PGP/MIME messages on IMAP folders.&quot;&gt;</span>
<a href="#l12.83"></a><span id="l12.83"> &lt;!ENTITY enigmail.disableSMIMEui.tooltip       &quot;Remove the S/MIME button from the message composition window toolbar&quot;&gt;</span>
<a href="#l12.84"></a><span id="l12.84"> </span>
<a href="#l12.85"></a><span id="l12.85"> &lt;!ENTITY enigmail.autoKeyServerSelection.label     &quot;Always use first keyserver&quot;&gt;</span>
<a href="#l12.86"></a><span id="l12.86"> &lt;!ENTITY enigmail.autoKeyServerSelection.tooltip   &quot;Take the first keyserver from the list as default&quot;&gt;</span>
<a href="#l12.87"></a><span id="l12.87"> </span>
<a href="#l12.88"></a><span id="l12.88"> &lt;!ENTITY enigmail.decryptbutton.label     &quot;Decrypt&quot;&gt;</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineminus">-&lt;!ENTITY enigmail.decryptbutton.tip       &quot;Decrypt or verify the message with Gine-Liam&quot;&gt;</span>
<a href="#l12.90"></a><span id="l12.90"> </span>
<a href="#l12.91"></a><span id="l12.91"> &lt;!ENTITY enigmail.doneButton.label        &quot;Done&quot;&gt;</span>
<a href="#l12.92"></a><span id="l12.92"> &lt;!ENTITY enigmail.doneButton.accesskey    &quot;D&quot;&gt;</span>
<a href="#l12.93"></a><span id="l12.93"> </span>
<a href="#l12.94"></a><span id="l12.94"> &lt;!ENTITY enigmail.messengermenu.accesskey &quot;a&quot;&gt;</span>
<a href="#l12.95"></a><span id="l12.95"> </span>
<a href="#l12.96"></a><span id="l12.96"> &lt;!ENTITY enigmail.decryptverify.label    &quot;Decrypt/Verify&quot;&gt;</span>
<a href="#l12.97"></a><span id="l12.97"> &lt;!ENTITY enigmail.importpublickey.label  &quot;Import Public Key&quot;&gt;</span>
<a href="#l12.98"></a><span id="l12.98" class="difflineat">@@ -132,46 +121,41 @@</span>
<a href="#l12.99"></a><span id="l12.99"> &lt;!ENTITY enigmail.prefs.label            &quot;Preferences&quot;&gt;</span>
<a href="#l12.100"></a><span id="l12.100"> </span>
<a href="#l12.101"></a><span id="l12.101"> &lt;!ENTITY enigmail.debugMenu.label        &quot;Debugging Options&quot;&gt;</span>
<a href="#l12.102"></a><span id="l12.102"> &lt;!ENTITY enigmail.viewconsole.label      &quot;View Console&quot;&gt;</span>
<a href="#l12.103"></a><span id="l12.103"> &lt;!ENTITY enigmail.viewlog.label          &quot;View Log&quot;&gt;</span>
<a href="#l12.104"></a><span id="l12.104"> </span>
<a href="#l12.105"></a><span id="l12.105"> &lt;!ENTITY enigmail.generateKey.label        &quot;Generate key&quot;&gt;</span>
<a href="#l12.106"></a><span id="l12.106"> &lt;!ENTITY enigmail.help.label               &quot;Help&quot;&gt;</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineminus">-&lt;!ENTITY enigmail.about.label              &quot;About Gine-Liam&quot;&gt;</span>
<a href="#l12.108"></a><span id="l12.108"> &lt;!ENTITY enigmail.reload.label             &quot;Reload Message&quot;&gt;</span>
<a href="#l12.109"></a><span id="l12.109"> &lt;!ENTITY enigmail.browse.label             &quot;Browse...&quot;&gt;</span>
<a href="#l12.110"></a><span id="l12.110"> &lt;!ENTITY enigmail.sendersKeyMenu.label     &quot;Sender's Key&quot;&gt;</span>
<a href="#l12.111"></a><span id="l12.111"> &lt;!ENTITY enigmail.adminSmartCard.label     &quot;Manage SmartCard ...&quot;&gt;</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.label           &quot;Setup Wizard&quot;&gt;</span>
<a href="#l12.113"></a><span id="l12.113"> </span>
<a href="#l12.114"></a><span id="l12.114"> &lt;!ENTITY enigmail.decryptverify.accesskey   &quot;D&quot;&gt;</span>
<a href="#l12.115"></a><span id="l12.115"> &lt;!ENTITY enigmail.importpublickey.accesskey &quot;I&quot;&gt;</span>
<a href="#l12.116"></a><span id="l12.116"> &lt;!ENTITY enigmail.reload.accesskey          &quot;E&quot;&gt;</span>
<a href="#l12.117"></a><span id="l12.117"> &lt;!ENTITY enigmail.adminSmartCard.accesskey  &quot;M&quot;&gt;</span>
<a href="#l12.118"></a><span id="l12.118"> </span>
<a href="#l12.119"></a><span id="l12.119"> &lt;!ENTITY enigmail.autoDecrypt.accesskey     &quot;A&quot;&gt;</span>
<a href="#l12.120"></a><span id="l12.120"> &lt;!ENTITY enigmail.debugMenu.accesskey       &quot;g&quot;&gt;</span>
<a href="#l12.121"></a><span id="l12.121"> </span>
<a href="#l12.122"></a><span id="l12.122"> &lt;!ENTITY enigmail.clearPassphrase.accesskey &quot;l&quot;&gt;</span>
<a href="#l12.123"></a><span id="l12.123"> &lt;!ENTITY enigmail.editRules.accesskey       &quot;R&quot;&gt;</span>
<a href="#l12.124"></a><span id="l12.124" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.accesskey        &quot;S&quot;&gt;</span>
<a href="#l12.125"></a><span id="l12.125"> </span>
<a href="#l12.126"></a><span id="l12.126"> </span>
<a href="#l12.127"></a><span id="l12.127"> &lt;!ENTITY enigmail.prefs.accesskey           &quot;P&quot;&gt;</span>
<a href="#l12.128"></a><span id="l12.128"> &lt;!ENTITY enigmail.viewconsole.accesskey     &quot;c&quot;&gt;</span>
<a href="#l12.129"></a><span id="l12.129"> &lt;!ENTITY enigmail.viewlog.accesskey         &quot;g&quot;&gt;</span>
<a href="#l12.130"></a><span id="l12.130"> </span>
<a href="#l12.131"></a><span id="l12.131"> &lt;!ENTITY enigmail.help.accesskey            &quot;H&quot;&gt;</span>
<a href="#l12.132"></a><span id="l12.132"> &lt;!ENTITY enigmail.about.accesskey           &quot;b&quot;&gt;</span>
<a href="#l12.133"></a><span id="l12.133"> &lt;!ENTITY enigmail.sendersKeyMenu.accesskey  &quot;K&quot;&gt;</span>
<a href="#l12.134"></a><span id="l12.134"> </span>
<a href="#l12.135"></a><span id="l12.135" class="difflineminus">-&lt;!ENTITY enigmail.composetoolbar.desc         &quot;Gine-Liam Encryption Info&quot;&gt;</span>
<a href="#l12.136"></a><span id="l12.136" class="difflineminus">-</span>
<a href="#l12.137"></a><span id="l12.137"> &lt;!ENTITY enigmail.signedsend.label            &quot;Sign Message&quot;&gt;</span>
<a href="#l12.138"></a><span id="l12.138"> &lt;!ENTITY enigmail.encryptedsend.label         &quot;Encrypt Message&quot;&gt;</span>
<a href="#l12.139"></a><span id="l12.139"> </span>
<a href="#l12.140"></a><span id="l12.140"> &lt;!ENTITY enigmail.pgpAccountSettings.label     &quot;Signing/Encryption Options...&quot;&gt;</span>
<a href="#l12.141"></a><span id="l12.141"> &lt;!ENTITY enigmail.sendOptionsMenu.label        &quot;Send Options...&quot;&gt;</span>
<a href="#l12.142"></a><span id="l12.142"> &lt;!ENTITY enigmail.defaultKeySelOpts.label      &quot;Key Selection Options...&quot;&gt;</span>
<a href="#l12.143"></a><span id="l12.143"> &lt;!ENTITY enigmail.usePgpMime.label             &quot;Protocol: PGP/MIME&quot;&gt;</span>
<a href="#l12.144"></a><span id="l12.144"> &lt;!ENTITY enigmail.useInline.label              &quot;Protocol: Inline PGP&quot;&gt;</span>
<a href="#l12.145"></a><span id="l12.145" class="difflineat">@@ -212,23 +196,21 @@</span>
<a href="#l12.146"></a><span id="l12.146"> </span>
<a href="#l12.147"></a><span id="l12.147"> &lt;!ENTITY enigmail.afterDefaultsAndRules.label     &quot;After application of defaults and rules:&quot;&gt;</span>
<a href="#l12.148"></a><span id="l12.148"> &lt;!ENTITY enigmail.finallySignEncrypted.label      &quot;Sign encrypted messages&quot;&gt;</span>
<a href="#l12.149"></a><span id="l12.149"> &lt;!ENTITY enigmail.finallySignNotEncrypted.label   &quot;Sign non-encrypted messages&quot;&gt;</span>
<a href="#l12.150"></a><span id="l12.150"> </span>
<a href="#l12.151"></a><span id="l12.151"> &lt;!ENTITY enigmail.autoEncryptDrafts.label         &quot;Encrypt draft messages on saving&quot;&gt;</span>
<a href="#l12.152"></a><span id="l12.152"> </span>
<a href="#l12.153"></a><span id="l12.153"> &lt;!ENTITY enigmail.advancedPrefsButton.label       &quot;Advanced...&quot;&gt;</span>
<a href="#l12.154"></a><span id="l12.154" class="difflineminus">-&lt;!ENTITY enigmail.openpgpPrefsButton.label        &quot;Gine-Liam Preferences...&quot;&gt;</span>
<a href="#l12.155"></a><span id="l12.155"> </span>
<a href="#l12.156"></a><span id="l12.156"> </span>
<a href="#l12.157"></a><span id="l12.157"> &lt;!-- Sending Preferences --&gt;</span>
<a href="#l12.158"></a><span id="l12.158"> </span>
<a href="#l12.159"></a><span id="l12.159"> &lt;!ENTITY enigmail.SendingPrefs.label              &quot;General Preferences for Sending&quot;&gt;</span>
<a href="#l12.160"></a><span id="l12.160" class="difflineminus">-&lt;!ENTITY enigmail.seeAccountSettings.label        &quot;See also account specific Gine-Liam settings (see Account Settings -&gt; OpenPGP Security)&quot;&gt;</span>
<a href="#l12.161"></a><span id="l12.161"> </span>
<a href="#l12.162"></a><span id="l12.162"> &lt;!ENTITY enigmail.encryptionModelConvenient.label &quot;Use default encryption settings&quot;&gt;</span>
<a href="#l12.163"></a><span id="l12.163"> &lt;!ENTITY enigmail.encryptionModelManually.label   &quot;Manually configure encryption settings&quot;&gt;</span>
<a href="#l12.164"></a><span id="l12.164"> </span>
<a href="#l12.165"></a><span id="l12.165"> &lt;!ENTITY enigmail.keepCryptoSettingsForReply.label   &quot;Encrypt/sign replies to encrypted/signed messages&quot;&gt;</span>
<a href="#l12.166"></a><span id="l12.166"> &lt;!ENTITY enigmail.keepCryptoSettingsForReply.tooltip &quot;When possible, encrypt/sign responses to encrypted/signed email&quot;&gt;</span>
<a href="#l12.167"></a><span id="l12.167"> </span>
<a href="#l12.168"></a><span id="l12.168"> &lt;!ENTITY enigmail.autoSendEncryptedOption.label   &quot;Automatically send encrypted&quot;&gt;</span>
<a href="#l12.169"></a><span id="l12.169" class="difflineat">@@ -274,17 +256,16 @@</span>
<a href="#l12.170"></a><span id="l12.170"> &lt;!ENTITY enigmail.wrapHtmlBeforeSend.tooltip      &quot;Rearrange the text to ensure that the signature will remain intact.&quot;&gt;</span>
<a href="#l12.171"></a><span id="l12.171"> &lt;!ENTITY enigmail.autoKeyRetrieve.label           &quot;Automatically download keys for signature verification&quot;&gt;</span>
<a href="#l12.172"></a><span id="l12.172"> &lt;!ENTITY enigmail.autoKeyRetrieve2.label          &quot;from the following keyserver:&quot;&gt;</span>
<a href="#l12.173"></a><span id="l12.173"> &lt;!ENTITY enigmail.resetRememberedValues.label     &quot;Reset Warnings&quot;&gt;</span>
<a href="#l12.174"></a><span id="l12.174"> &lt;!ENTITY enigmail.resetRememberedValues.tooltip   &quot;Re-display all warning dialogs and questions that you have hidden in the past.&quot;&gt;</span>
<a href="#l12.175"></a><span id="l12.175"> </span>
<a href="#l12.176"></a><span id="l12.176"> &lt;!ENTITY enigmail.keygen.desc &quot;&lt;a class='enigmailStrong'&gt;NOTE: Key generation may take up to several minutes to complete.&lt;/a&gt; Do not exit the application while key generation is in progress. Actively browsing or performing disk-intensive operations during key generation will replenish the 'randomness pool' and speed-up the process. You will be alerted when key generation is completed.&quot;&gt;</span>
<a href="#l12.177"></a><span id="l12.177"> </span>
<a href="#l12.178"></a><span id="l12.178" class="difflineminus">-&lt;!ENTITY enigmail.userSelectionList.label           &quot;Gine-Liam Key Selection&quot;&gt;</span>
<a href="#l12.179"></a><span id="l12.179"> &lt;!ENTITY enigmail.usersNotFound.label               &quot;Recipients not valid, not trusted or not found&quot;&gt;</span>
<a href="#l12.180"></a><span id="l12.180"> &lt;!ENTITY enigmail.keyExpiry.label                   &quot;Expiry&quot;&gt;</span>
<a href="#l12.181"></a><span id="l12.181"> &lt;!ENTITY enigmail.uidValidity.label                 &quot;Validity&quot;&gt;</span>
<a href="#l12.182"></a><span id="l12.182"> &lt;!ENTITY enigmail.keySelection.label                &quot;Selection&quot;&gt;</span>
<a href="#l12.183"></a><span id="l12.183"> &lt;!ENTITY enigmail.keyId.label                       &quot;Key ID&quot;&gt;</span>
<a href="#l12.184"></a><span id="l12.184"> &lt;!ENTITY enigmail.userSelSendSigned.label           &quot;Send signed&quot;&gt;</span>
<a href="#l12.185"></a><span id="l12.185"> &lt;!ENTITY enigmail.userSelSendSigned.accesskey       &quot;S&quot;&gt;</span>
<a href="#l12.186"></a><span id="l12.186"> &lt;!ENTITY enigmail.userSelSendEncrypted.label        &quot;Send encrypted&quot;&gt;</span>
<a href="#l12.187"></a><span id="l12.187" class="difflineat">@@ -320,17 +301,16 @@</span>
<a href="#l12.188"></a><span id="l12.188"> &lt;!ENTITY enigmail.detailsHdrButton.label            &quot;Details&quot;&gt;</span>
<a href="#l12.189"></a><span id="l12.189"> &lt;!ENTITY enigmail.revealAttachmentsButton.label     &quot;The names of the files attached are hidden. Press the 'Reveal' button to retrieve the original file names.&quot;&gt;</span>
<a href="#l12.190"></a><span id="l12.190"> &lt;!ENTITY enigmail.revealAttachments.button          &quot;Reveal&quot;&gt;</span>
<a href="#l12.191"></a><span id="l12.191"> </span>
<a href="#l12.192"></a><span id="l12.192"> &lt;!ENTITY enigmail.exchangeGarbage.desc              &quot;This is a broken PGP/MIME message from MS-Exchange. If you cannot access the attachments or have problems with replying or forwarding, press the 'Repair message' button to fix the message&quot;&gt;</span>
<a href="#l12.193"></a><span id="l12.193"> &lt;!ENTITY enigmail.exchangeGarbage.fixButton.label   &quot;Repair message&quot;&gt;</span>
<a href="#l12.194"></a><span id="l12.194"> &lt;!ENTITY enigmail.exchangeGarbage.waitMessage       &quot;Please wait ...&quot;&gt;</span>
<a href="#l12.195"></a><span id="l12.195"> </span>
<a href="#l12.196"></a><span id="l12.196" class="difflineminus">-&lt;!ENTITY enigmail.encryptionDlg.label               &quot;Gine-Liam Encryption &amp;amp; Signing Settings&quot;&gt;</span>
<a href="#l12.197"></a><span id="l12.197"> &lt;!ENTITY enigmail.encDlgProtocol.label              &quot;Encryption/Signing Standard&quot;&gt;</span>
<a href="#l12.198"></a><span id="l12.198"> &lt;!ENTITY enigmail.encDlgEncrypt.label               &quot;Encrypt Message&quot;&gt;</span>
<a href="#l12.199"></a><span id="l12.199"> &lt;!ENTITY enigmail.encDlgEncrypt.accesskey           &quot;E&quot;&gt;</span>
<a href="#l12.200"></a><span id="l12.200"> &lt;!ENTITY enigmail.encDlgSign.label                  &quot;Sign Message&quot;&gt;</span>
<a href="#l12.201"></a><span id="l12.201"> &lt;!ENTITY enigmail.encDlgSign.accesskey              &quot;S&quot;&gt;</span>
<a href="#l12.202"></a><span id="l12.202"> &lt;!ENTITY enigmail.encDlgPgpMime.label               &quot;Use PGP/MIME&quot;&gt;</span>
<a href="#l12.203"></a><span id="l12.203"> &lt;!ENTITY enigmail.encDlgPgpMime.accesskey           &quot;P&quot;&gt;</span>
<a href="#l12.204"></a><span id="l12.204"> &lt;!ENTITY enigmail.encDlgInlinePgp.label             &quot;Use Inline PGP&quot;&gt;</span>
<a href="#l12.205"></a><span id="l12.205" class="difflineat">@@ -339,31 +319,26 @@</span>
<a href="#l12.206"></a><span id="l12.206"> &lt;!ENTITY enigmail.encDlgSMime.accesskey             &quot;M&quot;&gt;</span>
<a href="#l12.207"></a><span id="l12.207"> &lt;!ENTITY enigmail.encDlgReset.label                 &quot;Reset to Defaults&quot;&gt;</span>
<a href="#l12.208"></a><span id="l12.208"> &lt;!ENTITY enigmail.encDlgReset.accesskey             &quot;R&quot;&gt;</span>
<a href="#l12.209"></a><span id="l12.209"> </span>
<a href="#l12.210"></a><span id="l12.210"> &lt;!ENTITY enigmail.progressText.label               &quot;Progress:&quot;&gt;</span>
<a href="#l12.211"></a><span id="l12.211"> </span>
<a href="#l12.212"></a><span id="l12.212"> &lt;!ENTITY enigmail.openPgpSecurity.label            &quot;OpenPGP Security&quot;&gt;</span>
<a href="#l12.213"></a><span id="l12.213"> </span>
<a href="#l12.214"></a><span id="l12.214" class="difflineminus">-&lt;!ENTITY enigmail.pgpSecurityInfo.label            &quot;Gine-Liam Security Info ...&quot;&gt;</span>
<a href="#l12.215"></a><span id="l12.215" class="difflineminus">-&lt;!ENTITY enigmail.copySecurityInfo.label           &quot;Copy Gine-Liam Security Info&quot;&gt;</span>
<a href="#l12.216"></a><span id="l12.216"> &lt;!ENTITY enigmail.showPhoto.label                  &quot;View OpenPGP Photo ID&quot;&gt;</span>
<a href="#l12.217"></a><span id="l12.217"> &lt;!ENTITY enigmail.photoViewer.title                &quot;OpenPGP Photo Viewer&quot;&gt;</span>
<a href="#l12.218"></a><span id="l12.218"> &lt;!ENTITY enigmail.displayKeyProperties.label       &quot;View Key Properties&quot;&gt;</span>
<a href="#l12.219"></a><span id="l12.219"> &lt;!ENTITY enigmail.signSenderKey.label              &quot;Sign Key ...&quot;&gt;</span>
<a href="#l12.220"></a><span id="l12.220"> &lt;!ENTITY enigmail.trustSenderKey.label             &quot;Set Owner Trust ...&quot;&gt;</span>
<a href="#l12.221"></a><span id="l12.221"> &lt;!ENTITY enigmail.signSenderKeyPopup.label         &quot;Sign Sender's Key ...&quot;&gt;</span>
<a href="#l12.222"></a><span id="l12.222"> &lt;!ENTITY enigmail.trustSenderKeyPopup.label        &quot;Set Owner Trust of Sender's Key...&quot;&gt;</span>
<a href="#l12.223"></a><span id="l12.223" class="difflineminus">-&lt;!ENTITY enigmail.createRuleFromAddr.label         &quot;Create Gine-Liam Rule from Address...&quot;&gt;</span>
<a href="#l12.224"></a><span id="l12.224"> &lt;!ENTITY enigmail.keyManWindow.label               &quot;Key Management&quot;&gt;</span>
<a href="#l12.225"></a><span id="l12.225"> &lt;!ENTITY enigmail.keyManWindow.accesskey           &quot;y&quot;&gt;</span>
<a href="#l12.226"></a><span id="l12.226"> </span>
<a href="#l12.227"></a><span id="l12.227" class="difflineminus">-&lt;!ENTITY enigmail.singleRcptSettings.label          &quot;Gine-Liam - Recipient Settings&quot;&gt;</span>
<a href="#l12.228"></a><span id="l12.228" class="difflineminus">-</span>
<a href="#l12.229"></a><span id="l12.229"> &lt;!ENTITY enigmail.compose.excesslength.label        &quot;You have very long lines in your email. They should be handled differently to avoid bad signatures.&quot;&gt;</span>
<a href="#l12.230"></a><span id="l12.230"> &lt;!ENTITY enigmail.compose.excesslength_action.label &quot;How do you want to proceed?&quot;&gt;</span>
<a href="#l12.231"></a><span id="l12.231"> &lt;!ENTITY enigmail.wrapSelectionList.label           &quot;Select wrap&quot;&gt;</span>
<a href="#l12.232"></a><span id="l12.232"> &lt;!ENTITY enigmail.compose.wrap_radio.label          &quot;Wrap automatically (good signature, but may not look good)&quot;&gt;</span>
<a href="#l12.233"></a><span id="l12.233"> &lt;!ENTITY enigmail.compose.sendasis_radio.label      &quot;Send as is (and risk a bad signature)&quot;&gt;</span>
<a href="#l12.234"></a><span id="l12.234"> &lt;!ENTITY enigmail.compose.use_mime_radio.label      &quot;Use PGP/MIME (good signature, but some receivers cannot decode it)&quot;&gt;</span>
<a href="#l12.235"></a><span id="l12.235"> &lt;!ENTITY enigmail.compose.editmanually.label        &quot;Edit manually&quot;&gt;</span>
<a href="#l12.236"></a><span id="l12.236"> </span>
<a href="#l12.237"></a><span id="l12.237" class="difflineat">@@ -375,28 +350,26 @@</span>
<a href="#l12.238"></a><span id="l12.238"> &lt;!ENTITY enigmail.selKeysButton.accesskey           &quot;S&quot;&gt;</span>
<a href="#l12.239"></a><span id="l12.239"> &lt;!ENTITY enigmail.setDefaultsFor.label              &quot;Defaults for ...&quot;&gt;</span>
<a href="#l12.240"></a><span id="l12.240"> &lt;!ENTITY enigmail.encryption.label                  &quot;Encryption&quot;&gt;</span>
<a href="#l12.241"></a><span id="l12.241"> &lt;!ENTITY enigmail.signing.label                     &quot;Signing&quot;&gt;</span>
<a href="#l12.242"></a><span id="l12.242"> &lt;!ENTITY enigmail.never.label                       &quot;Never&quot;&gt;</span>
<a href="#l12.243"></a><span id="l12.243"> &lt;!ENTITY enigmail.always.label                      &quot;Always&quot;&gt;</span>
<a href="#l12.244"></a><span id="l12.244"> &lt;!ENTITY enigmail.maybe.label                       &quot;Yes, if selected in Message Composition&quot;&gt;</span>
<a href="#l12.245"></a><span id="l12.245"> &lt;!ENTITY enigmail.singleRcptSettings.desc           &quot;(Note: in case of conflicts, 'Never' overrules 'Always')&quot;&gt;</span>
<a href="#l12.246"></a><span id="l12.246" class="difflineminus">-&lt;!ENTITY enigmail.ruleEmail.label                   &quot;Set Gine-Liam Rules for&quot;&gt;</span>
<a href="#l12.247"></a><span id="l12.247"> &lt;!ENTITY enigmail.ruleEmail.tooltip                 &quot;Only fill in email addresses, do NOT set the names of the recipients\nE.g. 'Some Name &amp;lt;some.name@address.net&amp;gt;' is invalid&quot;&gt;</span>
<a href="#l12.248"></a><span id="l12.248"> &lt;!ENTITY enigmail.sepratationDesc.label             &quot;(Separate several email addresses with spaces)&quot;&gt;</span>
<a href="#l12.249"></a><span id="l12.249"> &lt;!ENTITY enigmail.matchDescStart.label              &quot;Apply rule if recipient&quot;&gt;</span>
<a href="#l12.250"></a><span id="l12.250"> &lt;!ENTITY enigmail.matchDescEnd.label                &quot;one of the above addresses&quot;&gt;</span>
<a href="#l12.251"></a><span id="l12.251"> &lt;!ENTITY enigmail.matchExact.label                  &quot;is exactly&quot;&gt;</span>
<a href="#l12.252"></a><span id="l12.252"> &lt;!ENTITY enigmail.matchContains.label               &quot;contains&quot;&gt;</span>
<a href="#l12.253"></a><span id="l12.253"> &lt;!ENTITY enigmail.matchBegin.label                  &quot;starts with&quot;&gt;</span>
<a href="#l12.254"></a><span id="l12.254"> &lt;!ENTITY enigmail.matchEnd.label                    &quot;ends with&quot;&gt;</span>
<a href="#l12.255"></a><span id="l12.255"> &lt;!ENTITY enigmail.not.label                         &quot;Not&quot;&gt;</span>
<a href="#l12.256"></a><span id="l12.256"> </span>
<a href="#l12.257"></a><span id="l12.257" class="difflineminus">-&lt;!ENTITY enigmail.rulesEditor.label                 &quot;Gine-Liam - Per-Recipient Rules Editor&quot;&gt;</span>
<a href="#l12.258"></a><span id="l12.258"> &lt;!ENTITY enigmail.email.label                       &quot;Email&quot;&gt;</span>
<a href="#l12.259"></a><span id="l12.259"> &lt;!ENTITY enigmail.pgpKeys.label                     &quot;OpenPGP Key(s)&quot;&gt;</span>
<a href="#l12.260"></a><span id="l12.260"> &lt;!ENTITY enigmail.sign.label                        &quot;Sign&quot;&gt;</span>
<a href="#l12.261"></a><span id="l12.261"> &lt;!ENTITY enigmail.encrypt.label                     &quot;Encrypt&quot;&gt;</span>
<a href="#l12.262"></a><span id="l12.262"> &lt;!ENTITY enigmail.edit.label                        &quot;Modify&quot;&gt;</span>
<a href="#l12.263"></a><span id="l12.263"> &lt;!ENTITY enigmail.edit.accesskey                    &quot;M&quot;&gt;</span>
<a href="#l12.264"></a><span id="l12.264"> &lt;!ENTITY enigmail.add.label                         &quot;Add&quot;&gt;</span>
<a href="#l12.265"></a><span id="l12.265"> &lt;!ENTITY enigmail.add.accesskey                     &quot;A&quot;&gt;</span>
<a href="#l12.266"></a><span id="l12.266" class="difflineat">@@ -413,46 +386,42 @@</span>
<a href="#l12.267"></a><span id="l12.267"> &lt;!ENTITY enigmail.searchKeyDlg.label               &quot;Download OpenPGP Keys&quot;&gt;</span>
<a href="#l12.268"></a><span id="l12.268"> &lt;!ENTITY enigmail.searchKeyDlgCapt.label           &quot;Found Keys - Select to Import&quot;&gt;</span>
<a href="#l12.269"></a><span id="l12.269"> &lt;!ENTITY enigmail.searchKeyDlgSelAll.label         &quot;Select/Deselect all&quot;&gt;</span>
<a href="#l12.270"></a><span id="l12.270"> </span>
<a href="#l12.271"></a><span id="l12.271"> &lt;!ENTITY enigmail.created.label                    &quot;Created&quot;&gt;</span>
<a href="#l12.272"></a><span id="l12.272"> </span>
<a href="#l12.273"></a><span id="l12.273"> &lt;!ENTITY enigmail.progress.label                   &quot;Progress&quot;&gt;</span>
<a href="#l12.274"></a><span id="l12.274"> </span>
<a href="#l12.275"></a><span id="l12.275" class="difflineminus">-&lt;!ENTITY enigmail.sKeyDlg.title                    &quot;Gine-Liam - Sign Key&quot;&gt;</span>
<a href="#l12.276"></a><span id="l12.276"> &lt;!ENTITY enigmail.sKeyDlg.signKey.label            &quot;Key to be signed:&quot;&gt;</span>
<a href="#l12.277"></a><span id="l12.277"> &lt;!ENTITY enigmail.sKeyDlg.fingerprint.label        &quot;Fingerprint:&quot;&gt;</span>
<a href="#l12.278"></a><span id="l12.278"> &lt;!ENTITY enigmail.sKeyDlg.signWithKey.label        &quot;Key for signing:&quot;&gt;</span>
<a href="#l12.279"></a><span id="l12.279"> &lt;!ENTITY enigmail.sKeyDlg.ownKeyTrust.label        &quot;Note: you have to set owner trust to ultimate for your own keys to be shown here.&quot;&gt;</span>
<a href="#l12.280"></a><span id="l12.280"> &lt;!ENTITY enigmail.sKeyDlg.checked.label            &quot;How carefully have you verified that the key you are about to sign actually belongs to the person(s) named above?&quot;&gt;</span>
<a href="#l12.281"></a><span id="l12.281"> &lt;!ENTITY enigmail.sKeyDlg.noAnswer.label           &quot;I will not answer&quot;&gt;</span>
<a href="#l12.282"></a><span id="l12.282"> &lt;!ENTITY enigmail.sKeyDlg.notChecked.label         &quot;I have not checked at all&quot;&gt;</span>
<a href="#l12.283"></a><span id="l12.283"> &lt;!ENTITY enigmail.sKeyDlg.casualCheck.label        &quot;I did a quick check&quot;&gt;</span>
<a href="#l12.284"></a><span id="l12.284"> &lt;!ENTITY enigmail.sKeyDlg.carefulCheck.label       &quot;I have checked very carefully&quot;&gt;</span>
<a href="#l12.285"></a><span id="l12.285"> &lt;!ENTITY enigmail.sKeyDlg.createLocal.label        &quot;Local signature (cannot be exported)&quot;&gt;</span>
<a href="#l12.286"></a><span id="l12.286"> </span>
<a href="#l12.287"></a><span id="l12.287" class="difflineminus">-&lt;!ENTITY enigmail.addUidDlg.title                  &quot;Gine-Liam - Add User ID&quot;&gt;</span>
<a href="#l12.288"></a><span id="l12.288"> &lt;!ENTITY enigmail.addUidDlg.name.label             &quot;Name&quot;&gt;</span>
<a href="#l12.289"></a><span id="l12.289"> &lt;!ENTITY enigmail.addUidDlg.email.label            &quot;Email&quot;&gt;</span>
<a href="#l12.290"></a><span id="l12.290"> </span>
<a href="#l12.291"></a><span id="l12.291" class="difflineminus">-&lt;!ENTITY enigmail.keyTrust.title                   &quot;Gine-Liam - Set Owner Trust&quot;&gt;</span>
<a href="#l12.292"></a><span id="l12.292"> &lt;!ENTITY enigmail.keyTrust.trustKey.label          &quot;Key To Trust:&quot;&gt;</span>
<a href="#l12.293"></a><span id="l12.293"> &lt;!ENTITY enigmail.keyTrust.trustLevel.label        &quot;How much do you trust the owner of the key to sign other keys properly?&quot;&gt;</span>
<a href="#l12.294"></a><span id="l12.294"> &lt;!ENTITY enigmail.keyTrust.trustLevel.tooltip      &quot;For further information about keytrust levels visit: https://gpgtools.tenderapp.com/kb/faq/what-is-ownertrust-trust-levels-explained&quot;&gt;</span>
<a href="#l12.295"></a><span id="l12.295"> &lt;!ENTITY enigmail.keyTrust.dontKnow.label          &quot;Unknown (Not yet specified)&quot;&gt;</span>
<a href="#l12.296"></a><span id="l12.296"> &lt;!ENTITY enigmail.keyTrust.noTrust.label           &quot;Not Trusted (Not trusted to sign keys properly)&quot;&gt;</span>
<a href="#l12.297"></a><span id="l12.297"> &lt;!ENTITY enigmail.keyTrust.marginalTrust.label     &quot;Marginal (Somewhat trusted to sign keys properly)&quot;&gt;</span>
<a href="#l12.298"></a><span id="l12.298"> &lt;!ENTITY enigmail.keyTrust.fullTrust.label         &quot;Complete (Fully trusted to sign keys properly)&quot;&gt;</span>
<a href="#l12.299"></a><span id="l12.299"> &lt;!ENTITY enigmail.keyTrust.ultimateTrust.label     &quot;Ultimate (Only use for keys you own yourself)&quot;&gt;</span>
<a href="#l12.300"></a><span id="l12.300"> </span>
<a href="#l12.301"></a><span id="l12.301" class="difflineminus">-&lt;!ENTITY enigmail.keyExpiry.title                   &quot;Gine-Liam - Change Expiration Date&quot;&gt;</span>
<a href="#l12.302"></a><span id="l12.302"> &lt;!ENTITY enigmail.keyExpiry.expiryKey.label         &quot;Keys to change expiration date:&quot;&gt;</span>
<a href="#l12.303"></a><span id="l12.303"> </span>
<a href="#l12.304"></a><span id="l12.304" class="difflineminus">-&lt;!ENTITY enigmail.keyMan.title                     &quot;Gine-Liam Key Management&quot;&gt;</span>
<a href="#l12.305"></a><span id="l12.305" class="difflineplus">+&lt;!ENTITY openpgp.keyMan.title                     &quot;OpenPGP Key Management&quot;&gt;</span>
<a href="#l12.306"></a><span id="l12.306"> &lt;!ENTITY enigmail.keyMan.close.label               &quot;Close Window&quot;&gt;</span>
<a href="#l12.307"></a><span id="l12.307"> &lt;!ENTITY enigmail.keyMan.generate.label            &quot;New Key Pair&quot;&gt;</span>
<a href="#l12.308"></a><span id="l12.308"> &lt;!ENTITY enigmail.keyMan.genRevoke.label           &quot;Revocation Certificate&quot;&gt;</span>
<a href="#l12.309"></a><span id="l12.309"> &lt;!ENTITY enigmail.keyMan.ctxGenRevoke.label        &quot;Generate &amp;amp; Save Revocation Certificate&quot;&gt;</span>
<a href="#l12.310"></a><span id="l12.310"> </span>
<a href="#l12.311"></a><span id="l12.311"> &lt;!ENTITY enigmail.keyMan.fileMenu.label            &quot;File&quot;&gt;</span>
<a href="#l12.312"></a><span id="l12.312"> &lt;!ENTITY enigmail.keyMan.editMenu.label            &quot;Edit&quot;&gt;</span>
<a href="#l12.313"></a><span id="l12.313"> &lt;!ENTITY enigmail.keyMan.viewMenu.label            &quot;View&quot;&gt;</span>
<a href="#l12.314"></a><span id="l12.314" class="difflineat">@@ -595,75 +564,29 @@</span>
<a href="#l12.315"></a><span id="l12.315"> &lt;!ENTITY enigmail.cardPin.unblockPin.label           &quot;Unblock PIN&quot;&gt;</span>
<a href="#l12.316"></a><span id="l12.316"> &lt;!ENTITY enigmail.cardPin.currAdmPin.label           &quot;Current ADMIN PIN&quot;&gt;</span>
<a href="#l12.317"></a><span id="l12.317"> &lt;!ENTITY enigmail.cardPin.newAdminPin.label          &quot;New admin PIN&quot;&gt;</span>
<a href="#l12.318"></a><span id="l12.318"> &lt;!ENTITY enigmail.cardPin.adminPinRepeat.label       &quot;Repeat new PIN&quot;&gt;</span>
<a href="#l12.319"></a><span id="l12.319"> &lt;!ENTITY enigmail.cardPin.currPin.label              &quot;Current PIN&quot;&gt;</span>
<a href="#l12.320"></a><span id="l12.320"> &lt;!ENTITY enigmail.cardPin.newPin.label               &quot;New PIN&quot;&gt;</span>
<a href="#l12.321"></a><span id="l12.321"> &lt;!ENTITY enigmail.cardPin.pinRepeat.label            &quot;Repeat new PIN&quot;&gt;</span>
<a href="#l12.322"></a><span id="l12.322"> </span>
<a href="#l12.323"></a><span id="l12.323" class="difflineminus">-&lt;!-- wizard: welcome step --&gt;</span>
<a href="#l12.324"></a><span id="l12.324" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.title                     &quot;Gine-Liam Setup&quot;&gt;</span>
<a href="#l12.325"></a><span id="l12.325" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgIntro.desc              &quot;It looks like you started Gine-Liam for the first time on this computer.</span>
<a href="#l12.326"></a><span id="l12.326" class="difflineminus">-                                                      In order to use Gine-Liam, you need to first set it up properly.</span>
<a href="#l12.327"></a><span id="l12.327" class="difflineminus">-                                                      This assistant will guide you through the setup process.&quot;&gt;</span>
<a href="#l12.328"></a><span id="l12.328" class="difflineminus">-&lt;!-- wizard: install GnuPG step --&gt;</span>
<a href="#l12.329"></a><span id="l12.329" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.desc            &quot;Gine-Liam requires GnuPG for doing the cryptographic work.</span>
<a href="#l12.330"></a><span id="l12.330" class="difflineminus">-                                                      The wizard tried to locate the GnuPG executable, but it could not be found.&quot;&gt;</span>
<a href="#l12.331"></a><span id="l12.331" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.installDesc1    &quot;Gine-Liam can download GnuPG and launch the installer for you.</span>
<a href="#l12.332"></a><span id="l12.332" class="difflineminus">-                                                      If you wish to do so, click on the 'Install GnuPG' button to download and install GnuPG.&quot;&gt;</span>
<a href="#l12.333"></a><span id="l12.333" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.installDesc2    &quot;Alternatively, if you already installed GnuPG, use the 'Browse' button to specify the path to GnuPG manually.&quot;&gt;</span>
<a href="#l12.334"></a><span id="l12.334" class="difflineminus">-</span>
<a href="#l12.335"></a><span id="l12.335" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.locateDesc      &quot;Please locate GnuPG using the Browse button.&quot;&gt;</span>
<a href="#l12.336"></a><span id="l12.336" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.installButton   &quot;Install GnuPG ...&quot;&gt;</span>
<a href="#l12.337"></a><span id="l12.337" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.locateButton    &quot;Browse ...&quot;&gt;</span>
<a href="#l12.338"></a><span id="l12.338" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.downloadLabel   &quot;Downloading GnuPG ...&quot;&gt;</span>
<a href="#l12.339"></a><span id="l12.339" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.pgInstall.installLabel    &quot;Starting the installer. Please follow the steps of the GnuPG installer wizard.&quot;&gt;</span>
<a href="#l12.340"></a><span id="l12.340" class="difflineminus">-</span>
<a href="#l12.341"></a><span id="l12.341" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.searchingGnuPG            &quot;Looking for GnuPG ...&quot;&gt;</span>
<a href="#l12.342"></a><span id="l12.342" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.checkingSetup             &quot;Checking your existing setup ...&quot;&gt;</span>
<a href="#l12.343"></a><span id="l12.343" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.startSetupButton          &quot;Start Setup&quot;&gt;</span>
<a href="#l12.344"></a><span id="l12.344" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.useImportKeys             &quot;Alternatively, you can import your keys using the 'Import Keys' button below.&quot;&gt;</span>
<a href="#l12.345"></a><span id="l12.345" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.existingEncryptedMsg      &quot;We found that you have encrypted messages in your mail folders. We recommend that you export your keys on your existing device, and import them here. (Hint: you may use the 'Import Keys' multiple times, for example to import public and secret keys).&quot;&gt;</span>
<a href="#l12.346"></a><span id="l12.346" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.existingKeysFound         &quot;We found that you already have OpenPGP keys. We recommend that we set up Gine-Liam for you so that you can continue to work with these keys.&quot;&gt;</span>
<a href="#l12.347"></a><span id="l12.347" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.applyExistingKeysBtn      &quot;Apply my Keys&quot;&gt;</span>
<a href="#l12.348"></a><span id="l12.348" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.rescanInboxBtn            &quot;Rescan Inbox&quot;&gt;</span>
<a href="#l12.349"></a><span id="l12.349" class="difflineminus">-&lt;!ENTITY enigmail.setupWiz.importKeysBtn             &quot;Import Keys&quot;&gt;</span>
<a href="#l12.350"></a><span id="l12.350" class="difflineminus">-</span>
<a href="#l12.351"></a><span id="l12.351" class="difflineminus">-&lt;!ENTITY enigmail.advancedIdentityDlg.title          &quot;Advanced Gine-Liam Identity Settings&quot;&gt;</span>
<a href="#l12.352"></a><span id="l12.352" class="difflineminus">-</span>
<a href="#l12.353"></a><span id="l12.353"> &lt;!ENTITY enigmail.addPhoto.question.label            &quot;Do you want to add the following picture to the key?&quot;&gt;</span>
<a href="#l12.354"></a><span id="l12.354"> &lt;!ENTITY enigmail.addPhoto.title                     &quot;Add Photo to Key&quot;&gt;</span>
<a href="#l12.355"></a><span id="l12.355"> &lt;!ENTITY enigmail.msgViewColumn.tooltip              &quot;Sort by the OpenPGP status&quot;&gt;</span>
<a href="#l12.356"></a><span id="l12.356"> &lt;!ENTITY enigmail.addToRule.title                    &quot;Add Key to Per-Recipient Rule&quot;&gt;</span>
<a href="#l12.357"></a><span id="l12.357"> &lt;!ENTITY enigmail.addToRule.useRuleButton.label      &quot;Add Key to Selected Rule&quot;&gt;</span>
<a href="#l12.358"></a><span id="l12.358"> &lt;!ENTITY enigmail.addToRule.useRuleButton.accesskey  &quot;A&quot;&gt;</span>
<a href="#l12.359"></a><span id="l12.359"> &lt;!ENTITY enigmail.addToRule.newRuleButton.label      &quot;Create New Rule&quot;&gt;</span>
<a href="#l12.360"></a><span id="l12.360"> &lt;!ENTITY enigmail.addToRule.newRuleButton.accesskey  &quot;N&quot;&gt;</span>
<a href="#l12.361"></a><span id="l12.361"> </span>
<a href="#l12.362"></a><span id="l12.362"> &lt;!ENTITY enigmail.savelogfile.label                   &quot;Save Log to File ...&quot;&gt;</span>
<a href="#l12.363"></a><span id="l12.363"> </span>
<a href="#l12.364"></a><span id="l12.364"> &lt;!ENTITY enigmail.filterEditor.moveError.label       &quot;Actions that follow the 'Decrypt Permanently' action are not supported.&quot;&gt;</span>
<a href="#l12.365"></a><span id="l12.365"> </span>
<a href="#l12.366"></a><span id="l12.366" class="difflineminus">-&lt;!-- Export wizard --&gt;</span>
<a href="#l12.367"></a><span id="l12.367" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.title                    &quot;Export your Gine-Liam Settings&quot;&gt;</span>
<a href="#l12.368"></a><span id="l12.368" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgIntro.title            &quot;Welcome to the Export Settings Wizard&quot;&gt;</span>
<a href="#l12.369"></a><span id="l12.369" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgIntro.desc             &quot;Gine-Liam allows to transfer all its settings including your OpenPGP</span>
<a href="#l12.370"></a><span id="l12.370" class="difflineminus">-                                                      keys to a new computer. This is done in two steps:&quot;&gt;</span>
<a href="#l12.371"></a><span id="l12.371" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgIntro.step1            &quot;export your data from your old computer using this wizard&quot;&gt;</span>
<a href="#l12.372"></a><span id="l12.372" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgIntro.step2            &quot;import the data to your new computer using the Setup Wizard.&quot;&gt;</span>
<a href="#l12.373"></a><span id="l12.373" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgIntro.specifyFile      &quot;Please specify the export file:&quot;&gt;</span>
<a href="#l12.374"></a><span id="l12.374" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgExport.title           &quot;Exporting Gine-Liam Settings&quot;&gt;</span>
<a href="#l12.375"></a><span id="l12.375" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgExport.exporting       &quot;Saving in progress. You might be asked for the passphrase(s) of your key(s).&quot;&gt;</span>
<a href="#l12.376"></a><span id="l12.376" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgExport.done            &quot;Your OpenPGP keys and your Gine-Liam settings are now saved.</span>
<a href="#l12.377"></a><span id="l12.377" class="difflineminus">-                                                      Please transfer the generated file to your new computer, launch</span>
<a href="#l12.378"></a><span id="l12.378" class="difflineminus">-                                                      Thunderbird and start the Setup Wizard from the Gine-Liam menu.&quot;&gt;</span>
<a href="#l12.379"></a><span id="l12.379" class="difflineminus">-&lt;!ENTITY enigmail.exportWiz.pgExport.failed          &quot;An error occurred during the export. The settings could not be exported.&quot;&gt;</span>
<a href="#l12.380"></a><span id="l12.380" class="difflineminus">-</span>
<a href="#l12.381"></a><span id="l12.381" class="difflineminus">-</span>
<a href="#l12.382"></a><span id="l12.382"> &lt;!ENTITY enigmail.acPreferEncrypt.label              &quot;Prefer encrypted emails from the people you exchange email with&quot;&gt;</span>
<a href="#l12.383"></a><span id="l12.383"> &lt;!ENTITY enigmail.enableAutocrypt.label              &quot;Enable Autocrypt&quot;&gt;</span>
<a href="#l12.384"></a><span id="l12.384"> </span>
<a href="#l12.385"></a><span id="l12.385"> &lt;!ENTITY enigmail.acSetupPasswd.dlgTitle             &quot;Autocrypt Setup Code&quot;&gt;</span>
<a href="#l12.386"></a><span id="l12.386"> &lt;!ENTITY enigmail.acSetupPasswd.password             &quot;Setup Code:&quot;&gt;</span>
<a href="#l12.387"></a><span id="l12.387"> </span>
<a href="#l12.388"></a><span id="l12.388"> &lt;!ENTITY enigmail.acKeyTransfer.window.title         &quot;Autocrypt Key Transfer&quot;&gt;</span>
<a href="#l12.389"></a><span id="l12.389"> &lt;!ENTITY enigmail.acKeyTransfer.welcome.title        &quot;Start Key Transfer&quot;&gt;</span>
<a href="#l12.390"></a><span id="l12.390" class="difflineat">@@ -673,17 +596,9 @@</span>
<a href="#l12.391"></a><span id="l12.391">                                                       We will display a setup code (password) on the following screen that you will need to enter on the other device in order to import your key and related settings.&quot;&gt;</span>
<a href="#l12.392"></a><span id="l12.392"> </span>
<a href="#l12.393"></a><span id="l12.393"> &lt;!ENTITY enigmail.acKeyTransfer.selectAccount.label  &quot;Create Setup Message for Account:&quot;&gt;</span>
<a href="#l12.394"></a><span id="l12.394"> &lt;!ENTITY enigmail.acKeyTransfer.displayPasswd.title  &quot;Code for Autocrypt Setup Message&quot;&gt;</span>
<a href="#l12.395"></a><span id="l12.395"> &lt;!ENTITY enigmail.acKeyTransfer.msgCreated.desc1     &quot;The setup message has been sent to yourself.&quot;&gt;</span>
<a href="#l12.396"></a><span id="l12.396"> &lt;!ENTITY enigmail.acKeyTransfer.msgCreated.desc2     &quot;Please switch to the other device now and open the message. You should be prompted for a setup code. Please type the following digits into the prompt:&quot;&gt;</span>
<a href="#l12.397"></a><span id="l12.397"> &lt;!ENTITY enigmail.acKeyTransfer.switchDevice.desc    &quot;Once you're done, your other device will be ready to use Autocrypt.&quot;&gt;</span>
<a href="#l12.398"></a><span id="l12.398"> </span>
<a href="#l12.399"></a><span id="l12.399" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.dlgTitle               &quot;Restore Settings and Keys&quot;&gt;</span>
<a href="#l12.400"></a><span id="l12.400" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.topDesc                &quot;Using this dialog, you can restore your settings and keys from an existing Gine-Liam installation. To create a backup of your settings and keys, use the 'Transfer Settings' tab in the Gine-Liam preferences.&quot;&gt;</span>
<a href="#l12.401"></a><span id="l12.401" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.specifyImportFile      &quot;Please specify the backup file to use for restoring your settings and keys:&quot;&gt;</span>
<a href="#l12.402"></a><span id="l12.402" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.startRestoreLabel      &quot;Start Restoring&quot;&gt;</span>
<a href="#l12.403"></a><span id="l12.403" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.importingKeys          &quot;Importing keys in GnuPG. This may take a while ...&quot;&gt;</span>
<a href="#l12.404"></a><span id="l12.404" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.restoringGnupgSettings &quot;Restoring GnuPG settings ...&quot;&gt;</span>
<a href="#l12.405"></a><span id="l12.405" class="difflineminus">-&lt;!ENTITY enigmail.importSetup.restoringEnigmail      &quot;Restoring Gine-Liam settings ...&quot;&gt;</span>
<a href="#l12.406"></a><span id="l12.406" class="difflineminus">-</span>
<a href="#l12.407"></a><span id="l12.407"> &lt;!ENTITY copyCmd.label            &quot;Copy&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/extensions/openpgp/content/strings/enigmail.properties</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/strings/enigmail.properties</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,20 +1,17 @@</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineminus">-Enigmail=Gine-Liam</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-</span>
<a href="#l13.7"></a><span id="l13.7"> #####################################################################</span>
<a href="#l13.8"></a><span id="l13.8"> # Strings used within enigmailCommon.js and enigmailCommon.jsm</span>
<a href="#l13.9"></a><span id="l13.9"> #####################################################################</span>
<a href="#l13.10"></a><span id="l13.10"> </span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-enigAlert=Gine-Liam Alert</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-enigConfirm=Gine-Liam Confirmation</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-enigInfo=Gine-Liam Information</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-enigError=Gine-Liam Error</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-enigPrompt=Gine-Liam Prompt</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+enigAlert2=OpenPGP Alert</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+enigConfirm2=OpenPGP Confirmation</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+enigInfo2=OpenPGP Information</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+enigError2=OpenPGP Error</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+enigPrompt2=OpenPGP Prompt</span>
<a href="#l13.21"></a><span id="l13.21"> </span>
<a href="#l13.22"></a><span id="l13.22"> dlgYes=&amp;Yes</span>
<a href="#l13.23"></a><span id="l13.23"> dlgNo=&amp;No</span>
<a href="#l13.24"></a><span id="l13.24"> dlgKeepSetting=Remember my answer and do not ask me again</span>
<a href="#l13.25"></a><span id="l13.25"> dlgNoPrompt=Do not show me this dialog again</span>
<a href="#l13.26"></a><span id="l13.26"> dlg.button.delete=&amp;Delete</span>
<a href="#l13.27"></a><span id="l13.27"> dlg.button.cancel=&amp;Cancel</span>
<a href="#l13.28"></a><span id="l13.28"> dlg.button.close=&amp;Close</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineat">@@ -25,45 +22,37 @@ dlg.button.view=&amp;View</span>
<a href="#l13.30"></a><span id="l13.30"> dlg.button.retry=&amp;Retry</span>
<a href="#l13.31"></a><span id="l13.31"> dlg.button.ignore=&amp;Ignore</span>
<a href="#l13.32"></a><span id="l13.32"> dlg.button.install=&amp;Install</span>
<a href="#l13.33"></a><span id="l13.33"> dlg.button.ok=&amp;OK</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35"> repeatPrefix=\n\nThis alert will repeat %S</span>
<a href="#l13.36"></a><span id="l13.36"> repeatSuffixSingular=more time.</span>
<a href="#l13.37"></a><span id="l13.37"> repeatSuffixPlural=more times.</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineminus">-noRepeat=\n\nThis alert will not repeat until you upgrade Gine-Liam.</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+noRepeat2=\n\nThis alert will not be shown again.</span>
<a href="#l13.40"></a><span id="l13.40"> </span>
<a href="#l13.41"></a><span id="l13.41" class="difflineminus">-pgpNotSupported=You seem to be using Gine-Liam together with PGP 6.x\n\nUnfortunately, PGP 6.x has a number of issues that prevent Gine-Liam from working correctly. Therefore, Gine-Liam does not support PGP 6.x anymore; please switch to GnuPG (GPG) instead.\n\nIf you need help on switching to GnuPG, check the Help section of the Gine-Liam homepage.</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">-initErr.howToFixIt=In order to use Gine-Liam, GnuPG is required. If you did not install GnuPG yet, the easiest way to do this is using the &quot;Setup Wizard&quot; button below.</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineminus">-initErr.setupWizard.button=&amp;Setup Wizard</span>
<a href="#l13.44"></a><span id="l13.44"> noPhotoAvailable=No Photo available</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineminus">-debugLog.title=Gine-Liam Debug Log</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+debugLog2.title=OpenPGP Debug Log</span>
<a href="#l13.47"></a><span id="l13.47"> error.photoPathNotReadable=Photo path '%S' is not readable</span>
<a href="#l13.48"></a><span id="l13.48"> </span>
<a href="#l13.49"></a><span id="l13.49"> generalError=Error: %S</span>
<a href="#l13.50"></a><span id="l13.50"> </span>
<a href="#l13.51"></a><span id="l13.51"> # Strings in configure.jsm</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineminus">-enigmailCommon.versionSignificantlyChanged=This new version of Gine-Liam has significant changes in the handling of preferences and options. We tried to transfer the old settings to this new version. However, we cannot cover all cases automatically. Please double check the resulting new preferences and options.</span>
<a href="#l13.53"></a><span id="l13.53"> enigmailCommon.checkPreferences=Check Preferences ...</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineminus">-preferences.defaultToPgpMime=We have changed the default message encoding in Gine-Liam from Inline-PGP to PGP/MIME. We recommend you keep this as default.\n\nIf you still wish to use Inline-PGP by default, you can do so in the Account Settings under OpenPGP Security.</span>
<a href="#l13.55"></a><span id="l13.55"> </span>
<a href="#l13.56"></a><span id="l13.56"> #####################################################################</span>
<a href="#l13.57"></a><span id="l13.57"> # Strings in enigmailAbout.js</span>
<a href="#l13.58"></a><span id="l13.58"> #####################################################################</span>
<a href="#l13.59"></a><span id="l13.59"> </span>
<a href="#l13.60"></a><span id="l13.60" class="difflineminus">-usingVersion=Running Gine-Liam version %S</span>
<a href="#l13.61"></a><span id="l13.61"> usingAgent=Using %1$S executable %2$S to encrypt and decrypt</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineminus">-agentError=ERROR: Failed to access Gine-Liam core service!</span>
<a href="#l13.63"></a><span id="l13.63"> </span>
<a href="#l13.64"></a><span id="l13.64"> #####################################################################</span>
<a href="#l13.65"></a><span id="l13.65"> # Strings in enigmailKeygen.js</span>
<a href="#l13.66"></a><span id="l13.66"> #####################################################################</span>
<a href="#l13.67"></a><span id="l13.67"> </span>
<a href="#l13.68"></a><span id="l13.68" class="difflineminus">-accessError=Error in accessing Gine-Liam service</span>
<a href="#l13.69"></a><span id="l13.69"> onlyGPG=Key generation only works with GnuPG (not with PGP)!</span>
<a href="#l13.70"></a><span id="l13.70"> </span>
<a href="#l13.71"></a><span id="l13.71"> keygenComplete=Key generation completed! Identity &lt;%S&gt; will be used for signing.</span>
<a href="#l13.72"></a><span id="l13.72"> revokeCertRecommended=We highly recommend to create a revocation certificate for your key. This certificate can be used to invalidate your key, e.g. in case your secret key gets lost or compromised. Do you want to create such a revocation certificate now?</span>
<a href="#l13.73"></a><span id="l13.73"> keyMan.button.generateCert=&amp;Generate Certificate</span>
<a href="#l13.74"></a><span id="l13.74"> genCompleteNoSign=Key generation completed!</span>
<a href="#l13.75"></a><span id="l13.75"> genGoing=Key generation already in progress!</span>
<a href="#l13.76"></a><span id="l13.76"> </span>
<a href="#l13.77"></a><span id="l13.77" class="difflineat">@@ -78,64 +67,51 @@ changePassFailed=Changing the passphrase</span>
<a href="#l13.78"></a><span id="l13.78"> keyConfirm=Generate public and secret key for '%S'?</span>
<a href="#l13.79"></a><span id="l13.79"> keyMan.button.generateKey=&amp;Generate Key</span>
<a href="#l13.80"></a><span id="l13.80"> keyAbort=Abort key generation?</span>
<a href="#l13.81"></a><span id="l13.81"> keyMan.button.generateKeyAbort=&amp;Abort Key Generation</span>
<a href="#l13.82"></a><span id="l13.82"> keyMan.button.generateKeyContinue=&amp;Continue Key Generation</span>
<a href="#l13.83"></a><span id="l13.83"> expiryTooLong=You cannot create a key that expires in more than 100 years.</span>
<a href="#l13.84"></a><span id="l13.84"> expiryTooLongShorter=You cannot create a key that expires in more than 90 years.</span>
<a href="#l13.85"></a><span id="l13.85"> expiryTooShort=Your key must be valid for at least one day.</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineminus">-keyGenFailed=The key generation failed. Please check the Gine-Liam console (Menu Gine-Liam &gt; Debugging Options) for details.</span>
<a href="#l13.87"></a><span id="l13.87"> setKeyExpirationDateFailed=The expiration date could not be changed</span>
<a href="#l13.88"></a><span id="l13.88"> </span>
<a href="#l13.89"></a><span id="l13.89" class="difflineminus">-# Strings in enigmailMessengerOverlay.js</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineminus">-securityInfo=Gine-Liam Security Info\n\n</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineminus">-</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineminus">-enigHeader=Gine-Liam:</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineminus">-enigContentNote=Gine-Liam: *Attachments to this message have not been signed nor encrypted*\r\n\r\n</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineplus">+enigContentNote2=*Attachments to this message have not been signed nor encrypted*\r\n\r\n</span>
<a href="#l13.95"></a><span id="l13.95"> possiblyPgpMime=Possibly PGP/MIME encrypted or signed message; use 'Decrypt/Verify' function to verify</span>
<a href="#l13.96"></a><span id="l13.96"> </span>
<a href="#l13.97"></a><span id="l13.97" class="difflineminus">-saveAttachmentHeader=Gine-Liam: Save decrypted attachment</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineplus">+saveAttachmentHeader2=Save decrypted attachment</span>
<a href="#l13.99"></a><span id="l13.99"> noTempDir=Could not find a temporary directory to write to\nPlease set the TEMP environment variable</span>
<a href="#l13.100"></a><span id="l13.100"> attachmentPgpKey=The attachment '%S' you are opening appears to be an OpenPGP key file.\n\nClick 'Import' to import the keys contained or 'View' to view the file contents in a browser window</span>
<a href="#l13.101"></a><span id="l13.101"> </span>
<a href="#l13.102"></a><span id="l13.102"> beginPgpPart=********* *BEGIN ENCRYPTED or SIGNED PART* *********</span>
<a href="#l13.103"></a><span id="l13.103"> endPgpPart=********** *END ENCRYPTED or SIGNED PART* **********</span>
<a href="#l13.104"></a><span id="l13.104" class="difflineminus">-notePartEncrypted=Gine-Liam: *Parts of the message have NOT been signed nor encrypted*</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineminus">-noteCutMessage=Gine-Liam: *Multiple message blocks found -- decryption/verification aborted*</span>
<a href="#l13.106"></a><span id="l13.106" class="difflineplus">+notePartEncrypted2=*Parts of the message have NOT been signed nor encrypted*</span>
<a href="#l13.107"></a><span id="l13.107" class="difflineplus">+noteCutMessage2=*Multiple message blocks found -- decryption/verification aborted*</span>
<a href="#l13.108"></a><span id="l13.108"> </span>
<a href="#l13.109"></a><span id="l13.109"> decryptOkNoSig=Warning\n\nDecryption was successful, but the signature could not be verified correctly</span>
<a href="#l13.110"></a><span id="l13.110"> msgOvl.button.contAnyway=&amp;Continue Anyway</span>
<a href="#l13.111"></a><span id="l13.111"> signature.verifiedOK=The signature for attachment %S was successfully verified</span>
<a href="#l13.112"></a><span id="l13.112"> signature.verifyFailed=The signature for attachment %S could not be verified</span>
<a href="#l13.113"></a><span id="l13.113"> attachment.noMatchToSignature=Could not match attachment '%S' to a signature file</span>
<a href="#l13.114"></a><span id="l13.114"> attachment.noMatchFromSignature=Could not match signature file '%S' to an attachment</span>
<a href="#l13.115"></a><span id="l13.115"> fixBrokenExchangeMsg.failed=Did not succeed to repair message.</span>
<a href="#l13.116"></a><span id="l13.116" class="difflineminus">-enigmail.msgViewColumn.label=Gine-Liam</span>
<a href="#l13.117"></a><span id="l13.117"> detailsDlg.importKey=Import key</span>
<a href="#l13.118"></a><span id="l13.118"> wksNoIdentity=This key is not linked to any of your email accounts. Please add an account for at least one of the following email addresse(s):\n\n%S</span>
<a href="#l13.119"></a><span id="l13.119"> wksConfirmSuccess=Confirmation email sent.</span>
<a href="#l13.120"></a><span id="l13.120"> wksConfirmFailure=Sending the confirmation email failed.</span>
<a href="#l13.121"></a><span id="l13.121" class="difflineminus">-autocrypt.importSetupKey.accountPreconfigured=Your account is already correctly configured for Autocrypt.\n\nDo you really want to overwrite your settings with this setup message?</span>
<a href="#l13.122"></a><span id="l13.122" class="difflineminus">-autocrypt.importSetupKey.selfCreated=This message was created by your currently running instance of Gine-Liam.\n\nPlease switch to the email client to which you want to transfer the settings, and click on the message on that email client to import the settings.</span>
<a href="#l13.123"></a><span id="l13.123" class="difflineminus">-autocrypt.importSetupKey.invalidMessage=Error - could not read setup message. The message seems to be corrupted. Please try to create a new setup message on your &quot;other&quot; device.</span>
<a href="#l13.124"></a><span id="l13.124" class="difflineminus">-autocrypt.importSetupKey.invalidKey=Error - the key could not be imported. The key is either not supported by your version of GnuPG, or it got corrupted.</span>
<a href="#l13.125"></a><span id="l13.125" class="difflineminus">-autocrypt.importSetupKey.wrongPasswd=The password you entered is wrong. Do you want to retry?</span>
<a href="#l13.126"></a><span id="l13.126" class="difflineminus">-autocrypt.importSetupKey.success=The Autocrypt setup message was processed successfully. Autocrypt is now available for your account '%S'.</span>
<a href="#l13.127"></a><span id="l13.127"> </span>
<a href="#l13.128"></a><span id="l13.128"> #####################################################################</span>
<a href="#l13.129"></a><span id="l13.129"> # Strings in enigmailMsgComposeOverlay.js</span>
<a href="#l13.130"></a><span id="l13.130"> #####################################################################</span>
<a href="#l13.131"></a><span id="l13.131"> </span>
<a href="#l13.132"></a><span id="l13.132"> keysToExport=Select OpenPGP Keys to Insert</span>
<a href="#l13.133"></a><span id="l13.133"> keysToUse=Select OpenPGP Key(s) to use for %S</span>
<a href="#l13.134"></a><span id="l13.134"> pubKey=Public key for %S\n</span>
<a href="#l13.135"></a><span id="l13.135"> </span>
<a href="#l13.136"></a><span id="l13.136"> windowLocked=Compose window is locked; send cancelled</span>
<a href="#l13.137"></a><span id="l13.137" class="difflineminus">-sendUnencrypted=Failed to initialize Gine-Liam.\nSend unencrypted message?</span>
<a href="#l13.138"></a><span id="l13.138"> composeSpecifyEmail=Please specify your primary email address, which will be used to choose the signing key for outgoing messages.\n If you leave it blank, the FROM address of the message will be used to choose the signing key.</span>
<a href="#l13.139"></a><span id="l13.139"> sendingHiddenRcpt=This message has BCC (blind copy) recipients. If this message is encrypted, it is possible to hide the BCC recipients but users of some products (e.g. PGP Corp.) will not be able to decrypt the message. Given this, we recommend to avoid BCC-emails with encrypted messages.</span>
<a href="#l13.140"></a><span id="l13.140"> sendWithHiddenBcc=Hide BCC recipients</span>
<a href="#l13.141"></a><span id="l13.141"> sendWithShownBcc=Encrypt normally</span>
<a href="#l13.142"></a><span id="l13.142"> sendingNews=Encrypted send operation aborted.\n\nThis message cannot be encrypted because there are newsgroup recipients. Please re-send the message without encryption.</span>
<a href="#l13.143"></a><span id="l13.143"> sendToNewsWarning=Warning: you are about to send an encrypted email to a newsgroup.\n\nThis is discouraged because it only makes sense if all members of the group can decrypt the message, i.e. the message needs to be encrypted with the keys of all group participants. Please send this message only if you know exactly what you are doing.\n\nContinue?</span>
<a href="#l13.144"></a><span id="l13.144"> hasHTML=HTML email warning:\nThis message may contain HTML, which could cause signing/encryption to fail. To avoid this in the future, you should press the SHIFT key when clicking on the Compose/Reply button to send signed email.\nIf you sign email by default, you should uncheck the 'Compose Messages in HTML' preference box to permanently disable HTML email for this email account.</span>
<a href="#l13.145"></a><span id="l13.145"> strippingHTML=Message contains HTML formatting information that will be lost when converting to plain text for signing/encryption. Do you wish to proceed?</span>
<a href="#l13.146"></a><span id="l13.146" class="difflineat">@@ -148,21 +124,16 @@ signIconClicked=You have manually modifi</span>
<a href="#l13.147"></a><span id="l13.147"> errorOwnKeyUnusable=The key ID '%S' configured for the current identity does not yield a usable OpenPGP key.\n\nPlease ensure that you have a valid, not expired OpenPGP key and that your account settings point to that key.\nIf your key is not expired, then check if you did set Owner trust to &quot;full&quot; or &quot;ultimate&quot;.</span>
<a href="#l13.148"></a><span id="l13.148"> msgCompose.cannotSaveDraft=Error while saving draft</span>
<a href="#l13.149"></a><span id="l13.149"> msgCompose.partiallyEncrypted.short=Beware of leaking sensitive information - partially encrypted email.</span>
<a href="#l13.150"></a><span id="l13.150"> msgCompose.partiallyEncrypted.inlinePGP=The message you are replying to contained both unencrypted and encrypted parts. If the sender was not able to decrypt some message parts originally, you may be leaking confidential information that the sender was not able to originally decrypt themselves.\n\nPlease consider removing all quoted text from your reply to this sender.</span>
<a href="#l13.151"></a><span id="l13.151"> </span>
<a href="#l13.152"></a><span id="l13.152"> msgCompose.internalEncryptionError=Internal Error: promised encryption disabled</span>
<a href="#l13.153"></a><span id="l13.153"> msgCompose.internalError=An internal error has occurred.</span>
<a href="#l13.154"></a><span id="l13.154"> </span>
<a href="#l13.155"></a><span id="l13.155" class="difflineminus">-msgCompose.toolbarTxt.signAndEncrypt=This message will be signed and encrypted</span>
<a href="#l13.156"></a><span id="l13.156" class="difflineminus">-msgCompose.toolbarTxt.signOnly=This message will be signed</span>
<a href="#l13.157"></a><span id="l13.157" class="difflineminus">-msgCompose.toolbarTxt.encryptOnly=This message will be encrypted</span>
<a href="#l13.158"></a><span id="l13.158" class="difflineminus">-msgCompose.toolbarTxt.noEncryption=This message will be unsigned and unencrypted</span>
<a href="#l13.159"></a><span id="l13.159" class="difflineminus">-msgCompose.toolbarTxt.disabled=Gine-Liam is disabled for the selected identity</span>
<a href="#l13.160"></a><span id="l13.160"> msgCompose.protectSubject.tooltip=Protect the message subject</span>
<a href="#l13.161"></a><span id="l13.161"> msgCompose.noSubjectProtection.tooltip=Do not protect the message subject</span>
<a href="#l13.162"></a><span id="l13.162"> msgCompose.protectSubject.dialogTitle=Enable Protection of Subject?</span>
<a href="#l13.163"></a><span id="l13.163"> msgCompose.protectSubject.question=Regular encrypted emails contain the unredacted subject.\n\nWe have established a standard to hide the original subject in the encrypted message\nand replace it with a dummy text, such that the subject is only visible after the email is decrypted.\n\nDo you want to protect the subject in encrypted messages?</span>
<a href="#l13.164"></a><span id="l13.164"> msgCompose.protectSubject.yesButton=&amp;Protect subject</span>
<a href="#l13.165"></a><span id="l13.165"> msgCompose.protectSubject.noButton=&amp;Leave subject unprotected</span>
<a href="#l13.166"></a><span id="l13.166"> </span>
<a href="#l13.167"></a><span id="l13.167"> msgCompose.detailsButton.label=Details ...</span>
<a href="#l13.168"></a><span id="l13.168" class="difflineat">@@ -184,22 +155,19 @@ statEncrypted=ENCRYPTED</span>
<a href="#l13.169"></a><span id="l13.169"> statPlain=UNSIGNED and UNENCRYPTED</span>
<a href="#l13.170"></a><span id="l13.170"> </span>
<a href="#l13.171"></a><span id="l13.171"> offlineSave=Save %1$S message to %2$S in Unsent Messages folder?</span>
<a href="#l13.172"></a><span id="l13.172"> </span>
<a href="#l13.173"></a><span id="l13.173"> onlineSend=Send %1$S message to %2$S?</span>
<a href="#l13.174"></a><span id="l13.174"> encryptKeysNote=Note: The message is encrypted for the following User IDs / Keys: %S</span>
<a href="#l13.175"></a><span id="l13.175"> hiddenKey=&lt;hidden key&gt;</span>
<a href="#l13.176"></a><span id="l13.176"> </span>
<a href="#l13.177"></a><span id="l13.177" class="difflineminus">-signFailed=Error in Gine-Liam: encryption/signing failed. Send the message unencrypted?</span>
<a href="#l13.178"></a><span id="l13.178"> msgCompose.button.sendUnencrypted=&amp;Send Unencrypted Message</span>
<a href="#l13.179"></a><span id="l13.179"> recipientsSelectionHdr=Select Recipients for Encryption</span>
<a href="#l13.180"></a><span id="l13.180"> </span>
<a href="#l13.181"></a><span id="l13.181" class="difflineminus">-configureNow=You did not yet configure Gine-Liam security for the selected identity. Do you want to do this now?</span>
<a href="#l13.182"></a><span id="l13.182" class="difflineminus">-</span>
<a href="#l13.183"></a><span id="l13.183"> # encryption/signing status and associated reasons:</span>
<a href="#l13.184"></a><span id="l13.184"> encryptMessageAuto=Encrypt Message (auto)</span>
<a href="#l13.185"></a><span id="l13.185"> encryptMessageNorm=Encrypt Message</span>
<a href="#l13.186"></a><span id="l13.186"> signMessageAuto=Sign Message (auto)</span>
<a href="#l13.187"></a><span id="l13.187"> signMessageNorm=Sign Message</span>
<a href="#l13.188"></a><span id="l13.188"> </span>
<a href="#l13.189"></a><span id="l13.189"> encryptOff=Encryption: OFF</span>
<a href="#l13.190"></a><span id="l13.190"> encryptOnWithReason=Encryption: ON (%S)</span>
<a href="#l13.191"></a><span id="l13.191" class="difflineat">@@ -280,43 +248,34 @@ decryptedMsg=Decrypted message</span>
<a href="#l13.192"></a><span id="l13.192"> decryptedMsgWithFormatError=Decrypted message (restored broken PGP email format probably caused by an old Exchange server, so that the result might not be perfect to read)</span>
<a href="#l13.193"></a><span id="l13.193"> </span>
<a href="#l13.194"></a><span id="l13.194"> usedAlgorithms=Used Algorithms: %1$S and %2$S</span>
<a href="#l13.195"></a><span id="l13.195"> </span>
<a href="#l13.196"></a><span id="l13.196"> wksConfirmationReq=Web Key Directory Confirmation Request</span>
<a href="#l13.197"></a><span id="l13.197"> wksConfirmationReq.message=This message has been sent by your email provider to confirm deployment of your OpenPGP public key\nin their Web Key Directory.\nProviding your public key helps others to discover your key and thus being able to encrypt messages to you.\n\nIf you want to deploy your key in the Web Key Directory now, please click on the button &quot;Confirm Request&quot; in the status bar.\nOtherwise, simply ignore this message.</span>
<a href="#l13.198"></a><span id="l13.198"> wksConfirmationReq.button.label=Confirm Request</span>
<a href="#l13.199"></a><span id="l13.199"> </span>
<a href="#l13.200"></a><span id="l13.200" class="difflineminus">-autocryptSetupReq=Perform Autocrypt Setup</span>
<a href="#l13.201"></a><span id="l13.201" class="difflineminus">-autocryptSetupReq.button.label=Start Setup</span>
<a href="#l13.202"></a><span id="l13.202"> autocryptSetupReq.setupMsg.desc=This message contains all information to transfer your Autocrypt settings along with your secret key securely from your original device.</span>
<a href="#l13.203"></a><span id="l13.203"> autocryptSetupReq.setupMsg.backup=You can keep this message and use it as a backup for your secret key. If you want to do this, you should write down the password and store it securely.</span>
<a href="#l13.204"></a><span id="l13.204" class="difflineminus">-autocryptSetupReq.message.import=To import the settings and key(s) in Gine-Liam, please click on the &quot;Start Setup&quot; button in the status bar.</span>
<a href="#l13.205"></a><span id="l13.205"> autocryptSetupReq.message.sent=Please click on the message on your new device and follow the instuctions to import the settings.</span>
<a href="#l13.206"></a><span id="l13.206"> </span>
<a href="#l13.207"></a><span id="l13.207"> # strings in pref-enigmail.js</span>
<a href="#l13.208"></a><span id="l13.208" class="difflineminus">-oldGpgVersion20=Gine-Liam initialization failed.\n\nYou are using GnuPG version %1$S, which is not supported anymore. Gine-Liam requires GnuPG version %2$S or newer. Please upgrade your GnuPG installation, or Gine-Liam will not work.</span>
<a href="#l13.209"></a><span id="l13.209"> locateGpg=Locate GnuPG program</span>
<a href="#l13.210"></a><span id="l13.210" class="difflineminus">-invalidGpgPath=GnuPG cannot be executed with the path provided. Gine-Liam is therefore deactivated until you change the path to GnuPG again or until you restart the application.</span>
<a href="#l13.211"></a><span id="l13.211"> warningsAreReset=All warnings have been reset.</span>
<a href="#l13.212"></a><span id="l13.212"> prefs.gpgFound=GnuPG was found in %S</span>
<a href="#l13.213"></a><span id="l13.213"> prefs.gpgNotFound=Could not find GnuPG</span>
<a href="#l13.214"></a><span id="l13.214" class="difflineminus">-prefs.warnAskNever=Warning: activating this option will result in unencrypted emails without any further information if there is no key for one of the recipients -- Gine-Liam will not inform you if this happens!</span>
<a href="#l13.215"></a><span id="l13.215" class="difflineminus">-prefs.warnIdleTimeForUnknownAgent=Cannot connect to gpg-agent. Maybe your system uses a specialized tool for passphrase handling (e.g. gnome-keyring, seahorse-agent, KDE wallet manager, ...). Unfortunately Gine-Liam cannot control the passphrase timeout for the tool you are using. Therefore the respective timeout settings in Gine-Liam are disregarded.</span>
<a href="#l13.216"></a><span id="l13.216"> prefEnigmail.oneKeyserverOnly=Error - you can only specify one keyserver for automatic downloading of missing OpenPGP keys.</span>
<a href="#l13.217"></a><span id="l13.217"> acSetupMessage.desc=Transfer your key to another Autocrypt-enabled device. (&lt;html:span class='enigmailLink' href='https://autocrypt.org'&gt;What is Autocrypt&lt;/html:span&gt;)</span>
<a href="#l13.218"></a><span id="l13.218" class="difflineminus">-aboutLicense.desc=Gine-Liam is open source and licensed under the &lt;html:a href='https://www.mozilla.org/MPL/2.0/' class='enigmailLink'&gt;Mozilla Public License 2.0&lt;/html:a&gt;.</span>
<a href="#l13.219"></a><span id="l13.219"> </span>
<a href="#l13.220"></a><span id="l13.220"> # Strings used in core.jsm</span>
<a href="#l13.221"></a><span id="l13.221"> # (said file also re-uses some strings from above)</span>
<a href="#l13.222"></a><span id="l13.222"> </span>
<a href="#l13.223"></a><span id="l13.223"> enterAdminPin=Please type in the ADMIN PIN of your SmartCard</span>
<a href="#l13.224"></a><span id="l13.224"> enterCardPin=Please type your SmartCard PIN</span>
<a href="#l13.225"></a><span id="l13.225"> </span>
<a href="#l13.226"></a><span id="l13.226" class="difflineminus">-notInit=Error - Gine-Liam service not yet initialized</span>
<a href="#l13.227"></a><span id="l13.227"> badCommand=Error - encryption command failed</span>
<a href="#l13.228"></a><span id="l13.228"> cmdLine=command line and output:</span>
<a href="#l13.229"></a><span id="l13.229"> notRequired=Error - no encryption required</span>
<a href="#l13.230"></a><span id="l13.230"> notComplete=Error - key generation not yet completed</span>
<a href="#l13.231"></a><span id="l13.231"> invalidEmail=Error - invalid email address(es)</span>
<a href="#l13.232"></a><span id="l13.232"> noPassphrase=Error - no passphrase supplied</span>
<a href="#l13.233"></a><span id="l13.233"> noPGPblock=Error - No valid armored OpenPGP data block found</span>
<a href="#l13.234"></a><span id="l13.234"> unverifiedReply=Indented message part (reply) was probably modified</span>
<a href="#l13.235"></a><span id="l13.235" class="difflineat">@@ -336,22 +295,16 @@ sc.noCardAvailable=No SmartCard could be</span>
<a href="#l13.236"></a><span id="l13.236"> sc.noReaderAvailable=Your SmartCard reader could not be accessed\nPlease attach your SmartCard reader, insert your card, and repeat the operation.</span>
<a href="#l13.237"></a><span id="l13.237"> keyError.keySpecNotFound=The email address '%S' cannot be matched to a key on your keyring.</span>
<a href="#l13.238"></a><span id="l13.238"> keyError.keyIdNotFound=The configured key ID '%S' cannot be found on your keyring.</span>
<a href="#l13.239"></a><span id="l13.239"> keyError.resolutionAction=Please select a valid key in the OpenPGP section of your Account Settings.</span>
<a href="#l13.240"></a><span id="l13.240"> missingPassphrase=Missing passphrase</span>
<a href="#l13.241"></a><span id="l13.241"> errorHandling.gpgAgentInvalid=Your system is running a version of gpg-agent that is not suitable for your GnuPG version.</span>
<a href="#l13.242"></a><span id="l13.242"> errorHandling.gpgAgentError=GnuPG reported an error in the communication with gpg-agent (a component of GnuPG).</span>
<a href="#l13.243"></a><span id="l13.243"> errorHandling.pinentryError=GnuPG cannot query your passphrase via pinentry.</span>
<a href="#l13.244"></a><span id="l13.244" class="difflineminus">-errorHandling.pinentryCursesError=Your GnuPG installation is configured to use the console for pinentry. However, when using Gine-Liam you need a graphical version of pinentry.</span>
<a href="#l13.245"></a><span id="l13.245" class="difflineminus">-errorHandling.readFaq=This is a system setup or configuration error that prevents Gine-Liam from working properly and cannot be fixed automatically.\n\nWe strongly recommend that you consult our support web site at https://doesnotexist-openpgp-integration.thunderbird/faq.</span>
<a href="#l13.246"></a><span id="l13.246" class="difflineminus">-</span>
<a href="#l13.247"></a><span id="l13.247" class="difflineminus">-gpgNotFound=Unable to locate GnuPG program '%S'.\nMake sure you have set the GnuPG executable path correctly in the Gine-Liam Preferences.</span>
<a href="#l13.248"></a><span id="l13.248" class="difflineminus">-gpgNotInPath=Unable to locate GnuPG executable in the PATH.\nMake sure you have set the GnuPG executable path correctly in the Gine-Liam Preferences.</span>
<a href="#l13.249"></a><span id="l13.249" class="difflineminus">-enigmailNotAvailable=Gine-Liam core Service not available</span>
<a href="#l13.250"></a><span id="l13.250"> </span>
<a href="#l13.251"></a><span id="l13.251"> prefGood=Good signature from %S</span>
<a href="#l13.252"></a><span id="l13.252"> prefBad=BAD signature from %S</span>
<a href="#l13.253"></a><span id="l13.253"> </span>
<a href="#l13.254"></a><span id="l13.254"> failCancel=Error - Key receive cancelled by user</span>
<a href="#l13.255"></a><span id="l13.255"> failKeyExtract=Error - key extraction command failed</span>
<a href="#l13.256"></a><span id="l13.256"> failKeyNoSubkey=No valid (sub-)key</span>
<a href="#l13.257"></a><span id="l13.257"> notFirstBlock=Error - First OpenPGP block not public key block</span>
<a href="#l13.258"></a><span id="l13.258" class="difflineat">@@ -362,31 +315,16 @@ fileWriteFailed=Failed to write to file </span>
<a href="#l13.259"></a><span id="l13.259"> importKey=Import public key %S from keyserver:</span>
<a href="#l13.260"></a><span id="l13.260"> uploadKey=Send public key %S to keyserver:</span>
<a href="#l13.261"></a><span id="l13.261"> keyId=Key ID</span>
<a href="#l13.262"></a><span id="l13.262"> keyAndSigDate=Key ID: 0x%1$S / Signed on: %2$S</span>
<a href="#l13.263"></a><span id="l13.263"> keyFpr=Key fingerprint: %S</span>
<a href="#l13.264"></a><span id="l13.264"> noEmailProvided=You did not provide an email address!</span>
<a href="#l13.265"></a><span id="l13.265"> keyAlreadySigned=The key is already signed, you cannot sign it twice.</span>
<a href="#l13.266"></a><span id="l13.266"> </span>
<a href="#l13.267"></a><span id="l13.267" class="difflineminus">-#####################################################################</span>
<a href="#l13.268"></a><span id="l13.268" class="difflineminus">-# Strings used in enigmailKeySelection.js</span>
<a href="#l13.269"></a><span id="l13.269" class="difflineminus">-#####################################################################</span>
<a href="#l13.270"></a><span id="l13.270" class="difflineminus">-</span>
<a href="#l13.271"></a><span id="l13.271" class="difflineminus">-selKeyExpired=expired %S</span>
<a href="#l13.272"></a><span id="l13.272" class="difflineminus">-createdHeader=Created</span>
<a href="#l13.273"></a><span id="l13.273" class="difflineminus">-atLeastOneKey=No key selected! You have to select at least one key to accept this dialog</span>
<a href="#l13.274"></a><span id="l13.274" class="difflineminus">-fewerKeysThanRecipients=You have selected a smaller number of keys than recipients. Are you sure that the list of keys to encrypt is complete?</span>
<a href="#l13.275"></a><span id="l13.275" class="difflineminus">-userSel.button.goBack=Select more Keys</span>
<a href="#l13.276"></a><span id="l13.276" class="difflineminus">-userSel.secretKeySel.title=Select a Secret OpenPGP Key to Sign Your Messages</span>
<a href="#l13.277"></a><span id="l13.277" class="difflineminus">-userSel.problemNoKey=No valid key</span>
<a href="#l13.278"></a><span id="l13.278" class="difflineminus">-userSel.problemMultipleKeys=Multiple keys</span>
<a href="#l13.279"></a><span id="l13.279" class="difflineminus">-# should be same as thunderbird ENTITY sendLaterCmd.label:</span>
<a href="#l13.280"></a><span id="l13.280" class="difflineminus">-sendLaterCmd.label=Send Later</span>
<a href="#l13.281"></a><span id="l13.281" class="difflineminus">-</span>
<a href="#l13.282"></a><span id="l13.282"> # Strings used in enigmailAttachmentDialog.js</span>
<a href="#l13.283"></a><span id="l13.283"> pgpMimeNote=NOTE: PGP/MIME is not supported by all email clients. If you are unsure, select the %S option.</span>
<a href="#l13.284"></a><span id="l13.284"> first=first</span>
<a href="#l13.285"></a><span id="l13.285"> second=second</span>
<a href="#l13.286"></a><span id="l13.286"> </span>
<a href="#l13.287"></a><span id="l13.287"> # Strings used in enigmailSingleRcptSettings.js</span>
<a href="#l13.288"></a><span id="l13.288"> noEncryption=You have activated encryption, but you did not select a key. In order to encrypt emails sent to %1$S, you need to specify one or several valid key(s) from your key list. Do you want to disable encryption for %2$S?</span>
<a href="#l13.289"></a><span id="l13.289"> noKeyToUse=(none - no encryption)</span>
<a href="#l13.290"></a><span id="l13.290" class="difflineat">@@ -563,31 +501,16 @@ keyserverTitle.refreshing=Refresh Keys</span>
<a href="#l13.291"></a><span id="l13.291"> keyserverTitle.uploading=Key Upload</span>
<a href="#l13.292"></a><span id="l13.292"> keyserver.result.download.none=No key downloaded.</span>
<a href="#l13.293"></a><span id="l13.293"> keyserver.result.download.1of1=Key successfully downloaded.</span>
<a href="#l13.294"></a><span id="l13.294"> keyserver.result.download.1ofN=Successfully downloaded 1 of %S keys.</span>
<a href="#l13.295"></a><span id="l13.295"> keyserver.result.download.NofN=Successfully downloaded %1$S of %2$S keys.</span>
<a href="#l13.296"></a><span id="l13.296"> keyserver.result.uploadOne=Successfully uploaded 1 key.</span>
<a href="#l13.297"></a><span id="l13.297"> keyserver.result.uploadMany=Successfully uploaded %S keys.</span>
<a href="#l13.298"></a><span id="l13.298"> </span>
<a href="#l13.299"></a><span id="l13.299" class="difflineminus">-# Strings in enigmailSetupWizard</span>
<a href="#l13.300"></a><span id="l13.300" class="difflineminus">-setupWizard.invalidGpg=The file you specified is not a GnuPG executable. Please specify a different file.</span>
<a href="#l13.301"></a><span id="l13.301" class="difflineminus">-setupWizard.installFailed=It seems that the installation was not successful. Please either retry the installation, or install GnuPG manually and locate it using the Browse button.</span>
<a href="#l13.302"></a><span id="l13.302" class="difflineminus">-setupWizard.downloadForbidden=For your own security, we will not download GnuPG. Please visit https://gnupg.org/ in order to download GnuPG.</span>
<a href="#l13.303"></a><span id="l13.303" class="difflineminus">-setupWizard.downloadImpossible=We cannot download GnuPG currently. Please try later or visit https://gnupg.org/ in order to download GnuPG.</span>
<a href="#l13.304"></a><span id="l13.304" class="difflineminus">-setupWizard.hashSumError=The wizard could not verify the integrity of the downloaded file. The file may be broken or tampered with. Do you want to continue the installation anyway?</span>
<a href="#l13.305"></a><span id="l13.305" class="difflineminus">-setupWizard.importSettingsFile=Specify backup file to load from</span>
<a href="#l13.306"></a><span id="l13.306" class="difflineminus">-setupWizard.invalidSettingsFile=The specified file is not a valid Gine-Liam Settings backup file.</span>
<a href="#l13.307"></a><span id="l13.307" class="difflineminus">-setupWizard.gpgConfExists=The GnuPG config file already exists. Do you want to overwrite it with the one from your old installation?</span>
<a href="#l13.308"></a><span id="l13.308" class="difflineminus">-setupWizard.noGpgHomeDir=It appears that you configured %S to be used with GnuPG. However, this is not a directory - you cannot use it.</span>
<a href="#l13.309"></a><span id="l13.309" class="difflineminus">-setupWizard.unmachtedIds=The following identities of your old setup could not be matched:\n%S\nThe settings for these identities were skipped.</span>
<a href="#l13.310"></a><span id="l13.310" class="difflineminus">-setupWizard.foundAcSetupMessage=Found &lt;html:span class='enigmailLink' href='https://autocrypt.org'&gt;Autocrypt&lt;/html:span&gt; Setup Message. To initiate the Autocrypt setup procedure, click on the &lt;html:em&gt;Start Setup&lt;/html:em&gt; button below.</span>
<a href="#l13.311"></a><span id="l13.311" class="difflineminus">-setupWizard.foundAcNoSetupMsg=We determined that you are using an &lt;html:span class='enigmailLink' href='https://autocrypt.org'&gt;Autocrypt-compliant&lt;/html:span&gt; email client, but we could not find any Autocrypt Setup Message. We recommend that you create an Autocrypt Setup Message on your existing device and then click on &lt;html:em&gt;Rescan Inbox&lt;/html:em&gt;. Alternatively, you can export your settings and keys from an existing Gine-Liam installation, and restore these settings here.</span>
<a href="#l13.312"></a><span id="l13.312" class="difflineminus">-setupWizard.setupComplete=Gine-Liam is now properly configured and ready to use. For further information about using Gine-Liam please visit &lt;html:span class='enigmailLink' href='https://doesnotexist-openpgp-integration.thunderbird'&gt;our homepage&lt;/html:span&gt;.</span>
<a href="#l13.313"></a><span id="l13.313" class="difflineminus">-</span>
<a href="#l13.314"></a><span id="l13.314"> # Strings in installGnuPG.jsm</span>
<a href="#l13.315"></a><span id="l13.315"> installGnuPG.downloadFailed=An error occurred while trying to download GnuPG. Please check the console log for further details.</span>
<a href="#l13.316"></a><span id="l13.316"> installGnuPG.installFailed=An error occurred while installing GnuPG. Please check the console log for further details.</span>
<a href="#l13.317"></a><span id="l13.317"> </span>
<a href="#l13.318"></a><span id="l13.318"> # Strings in enigmailAddUidDlg.xhtml</span>
<a href="#l13.319"></a><span id="l13.319"> addUidDlg.nameOrEmailError=You have to fill in a name and an email address</span>
<a href="#l13.320"></a><span id="l13.320"> addUidDlg.nameMinLengthError=The name must at least have 5 characters</span>
<a href="#l13.321"></a><span id="l13.321"> addUidDlg.invalidEmailError=You must specify a valid email address</span>
<a href="#l13.322"></a><span id="l13.322" class="difflineat">@@ -598,21 +521,21 @@ Carddetails.NoASCII=OpenPGP Smartcards o</span>
<a href="#l13.323"></a><span id="l13.323"> </span>
<a href="#l13.324"></a><span id="l13.324"> # network error types</span>
<a href="#l13.325"></a><span id="l13.325"> errorType.SecurityCertificate=The security certificate presented by the web service is not valid.</span>
<a href="#l13.326"></a><span id="l13.326"> errorType.SecurityProtocol=The security protocol used by the web service is unknown.</span>
<a href="#l13.327"></a><span id="l13.327"> errorType.Network=A network error has occurred.</span>
<a href="#l13.328"></a><span id="l13.328"> </span>
<a href="#l13.329"></a><span id="l13.329"> # filter stuff</span>
<a href="#l13.330"></a><span id="l13.330"> filter.folderRequired=You must select a target folder.</span>
<a href="#l13.331"></a><span id="l13.331" class="difflineminus">-filter.decryptMove.label=Decrypt permanently (Gine-Liam)</span>
<a href="#l13.332"></a><span id="l13.332" class="difflineminus">-filter.decryptCopy.label=Create decrypted Copy (Gine-Liam)</span>
<a href="#l13.333"></a><span id="l13.333" class="difflineplus">+filter.decryptMove2.label=Decrypt permanently (OpenPGP)</span>
<a href="#l13.334"></a><span id="l13.334" class="difflineplus">+filter.decryptCopy2.label=Create decrypted Copy (OpenPGP)</span>
<a href="#l13.335"></a><span id="l13.335"> filter.decryptMove.warnExperimental=Warning - the filter action &quot;Decrypt permanently&quot; may lead to destroyed messages.\n\nWe strongly recommend that you first try the &quot;Create decrypted Copy&quot; filter, test the result carefully, and only start using this filter once you are satisified with the result.</span>
<a href="#l13.336"></a><span id="l13.336"> filter.term.pgpencrypted.label=OpenPGP Encrypted</span>
<a href="#l13.337"></a><span id="l13.337" class="difflineminus">-filter.encrypt.label=Encrypt to key (Gine-Liam)</span>
<a href="#l13.338"></a><span id="l13.338" class="difflineplus">+filter.encrypt2.label=Encrypt to key (OpenPGP)</span>
<a href="#l13.339"></a><span id="l13.339"> filter.keyRequired=You must select a recipient key.</span>
<a href="#l13.340"></a><span id="l13.340"> filter.keyNotFound=Could not find an encryption key for '%S'.</span>
<a href="#l13.341"></a><span id="l13.341"> filter.warn.keyNotSecret=Warning - the filter action &quot;Encrypt to key&quot; replaces the recipients.\n\nIf you do not have the secret key for '%S' you will no longer be able to read the emails.</span>
<a href="#l13.342"></a><span id="l13.342"> </span>
<a href="#l13.343"></a><span id="l13.343"> # strings in enigmailConvert.jsm</span>
<a href="#l13.344"></a><span id="l13.344"> converter.decryptBody.failed=Could not decrypt message with subject\n'%S'.\nDo you want to retry with a different passphrase or do you want to skip the message?</span>
<a href="#l13.345"></a><span id="l13.345"> converter.decryptAtt.failed=Could not decrypt attachment '%1$S'\nof message with subject\n'%2$S'.\nDo you want to retry with a different passphrase or do you want to skip the message?</span>
<a href="#l13.346"></a><span id="l13.346"> </span>
<a href="#l13.347"></a><span id="l13.347" class="difflineat">@@ -625,51 +548,48 @@ unknownHashAlg=Unknown cryptographic has</span>
<a href="#l13.348"></a><span id="l13.348"> # strings in keyRing.jsm</span>
<a href="#l13.349"></a><span id="l13.349"> keyring.photo=Photo</span>
<a href="#l13.350"></a><span id="l13.350"> keyRing.pubKeyRevoked=The key %1$S (key ID %2$S) is revoked.</span>
<a href="#l13.351"></a><span id="l13.351"> keyRing.pubKeyExpired=The key %1$S (key ID %2$S) has expired.</span>
<a href="#l13.352"></a><span id="l13.352"> keyRing.pubKeyNotForSigning=The key %1$S (key ID %2$S) cannot be used for signing.</span>
<a href="#l13.353"></a><span id="l13.353"> keyRing.pubKeyNotForEncryption=The key %1$S (key ID %2$S) cannot be used for encryption.</span>
<a href="#l13.354"></a><span id="l13.354"> keyRing.keyDisabled=The key %1$S (key ID %2$S) is disabled; it cannot be used.</span>
<a href="#l13.355"></a><span id="l13.355"> keyRing.keyNotTrusted=The key %1$S (key ID %2$S) is not trusted enough. Please set the trust level of your key to &quot;ultimate&quot; to use it for signing.</span>
<a href="#l13.356"></a><span id="l13.356" class="difflineminus">-keyRing.keyInvalid=The key %1$S (key ID %2$S) is not valid. Please consider verifying it correctly. Alternatively use the Default encryption settings in the Gine-Liam preferences dialog.</span>
<a href="#l13.357"></a><span id="l13.357" class="difflineplus">+keyRing.keyInvalid2=The key %1$S (key ID %2$S) is not valid. Please consider verifying it correctly.</span>
<a href="#l13.358"></a><span id="l13.358"> keyRing.signSubKeysRevoked=All signing-subkeys of key %1$S (key ID %2$S) are revoked.</span>
<a href="#l13.359"></a><span id="l13.359"> keyRing.signSubKeysExpired=All signing-subkeys of key %1$S (key ID %2$S) have expired.</span>
<a href="#l13.360"></a><span id="l13.360"> keyRing.signSubKeysUnusable=All signing-subkeys of key %1$S (key ID %2$S) are revoked, expired or otherwise unusable.</span>
<a href="#l13.361"></a><span id="l13.361"> keyRing.encSubKeysRevoked=All encryption subkeys of key %1$S (key ID %2$S) are revoked.</span>
<a href="#l13.362"></a><span id="l13.362"> keyRing.encSubKeysExpired=All encryption subkeys of key %1$S (key ID %2$S) have expired.</span>
<a href="#l13.363"></a><span id="l13.363"> keyRing.noSecretKey=You do not seem to have the secret key for %1$S (key ID %2$S) on your keyring; you cannot use the key for signing.</span>
<a href="#l13.364"></a><span id="l13.364"> keyRing.encSubKeysUnusable=All encryption subkeys of key %1$S (key ID %2$S) are revoked, expired or otherwise unusable.</span>
<a href="#l13.365"></a><span id="l13.365"> </span>
<a href="#l13.366"></a><span id="l13.366"> </span>
<a href="#l13.367"></a><span id="l13.367"> #strings in exportSettingsWizard.js</span>
<a href="#l13.368"></a><span id="l13.368"> cannotWriteToFile=Cannot save to file '%S'. Please select a different file.</span>
<a href="#l13.369"></a><span id="l13.369"> dataExportError=An error occurred during exporting your data.</span>
<a href="#l13.370"></a><span id="l13.370" class="difflineminus">-enigmailSettings=Gine-LiamSettings</span>
<a href="#l13.371"></a><span id="l13.371" class="difflineminus">-defaultBackupFileName=Gine-Liam-export</span>
<a href="#l13.372"></a><span id="l13.372"> specifyExportFile=Specify file name for exporting</span>
<a href="#l13.373"></a><span id="l13.373"> homedirParamNotSUpported=Additional parameters that configure paths such as --homedir and --keyring are not supported for exporting/restoring your settings. Please use alternative methods such as setting the environment variable GNUPGHOME.</span>
<a href="#l13.374"></a><span id="l13.374"> </span>
<a href="#l13.375"></a><span id="l13.375"> #strings in expiry.jsm</span>
<a href="#l13.376"></a><span id="l13.376"> expiry.keyExpiresSoon=Your key %1$S will expire in less than %2$S days.\n\nWe recommend that you create a new key pair and configure the corresponding accounts to use it.</span>
<a href="#l13.377"></a><span id="l13.377"> expiry.keysExpireSoon=Your following keys will expire in less than %1$S days:\n%2$S. We recommend that you create new keys and configure the corresponding accounts to use them.</span>
<a href="#l13.378"></a><span id="l13.378"> expiry.keyMissingOwnerTrust=Your secret key %S has missing trust.\n\nWe recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l13.379"></a><span id="l13.379"> expiry.keysMissingOwnerTrust=The following of your secret keys have missing trust.\n%S.\nWe recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l13.380"></a><span id="l13.380" class="difflineminus">-expiry.OpenKeyManager=Open Gine-Liam Key Management</span>
<a href="#l13.381"></a><span id="l13.381" class="difflineplus">+expiry.OpenKeyManager2=Open OpenPGP Key Management</span>
<a href="#l13.382"></a><span id="l13.382"> expiry.OpenKeyProperties=Open Key Properties</span>
<a href="#l13.383"></a><span id="l13.383"> </span>
<a href="#l13.384"></a><span id="l13.384"> #strings in gpgAgent.jsm</span>
<a href="#l13.385"></a><span id="l13.385"> gpghomedir.notexists=The directory '%S' containing your OpenPGP keys does not exist and cannot be created.</span>
<a href="#l13.386"></a><span id="l13.386"> gpghomedir.notwritable=The directory '%S' containing your OpenPGP keys is not writable.</span>
<a href="#l13.387"></a><span id="l13.387"> gpghomedir.notdirectory=The directory '%S' containing your OpenPGP keys is a file instead of a directory.</span>
<a href="#l13.388"></a><span id="l13.388"> gpghomedir.notusable=Please fix the directory permissions or change the location of your GnuPG &quot;home&quot; directory. GnuPG cannot work correctly otherwise.</span>
<a href="#l13.389"></a><span id="l13.389" class="difflineminus">-gpgAgent.noAutostart=You are using GnuPG version %S. This version requires that you pre-start gpg-agent before Thunderdbird is started, and that the environment variable &quot;GPG_AGENT_INFO&quot; is pre-loaded.\n\nThese preconditions are not met - you cannot use Gine-Liam until you resolve this issue.</span>
<a href="#l13.390"></a><span id="l13.390"> </span>
<a href="#l13.391"></a><span id="l13.391"> #strings in mimeWkdHandler.jsm</span>
<a href="#l13.392"></a><span id="l13.392" class="difflineminus">-wkdMessage.body.req=Your email provider processed your request to upload your public key to the OpenPGP Web Key Directory.\n\nPlease click the confirmation button in the Gine-Liam header to complete the publishing of your public key.</span>
<a href="#l13.393"></a><span id="l13.393" class="difflineplus">+wkdMessage.body.req2=Your email provider processed your request to upload your public key to the OpenPGP Web Key Directory.\n\nPlease confirm to complete the publishing of your public key.</span>
<a href="#l13.394"></a><span id="l13.394"> wkdMessage.body.process=This is an email related to the automatic processing to upload your public key to the OpenPGP Web Key Directory.\n\nYou do not need to take any manual action at this point.</span>
<a href="#l13.395"></a><span id="l13.395"> </span>
<a href="#l13.396"></a><span id="l13.396"> handshakeDlg.button.initHandshake=Handshake...</span>
<a href="#l13.397"></a><span id="l13.397"> handshakeDlg.button.stopTrust=Stop Trusting</span>
<a href="#l13.398"></a><span id="l13.398"> handshakeDlg.button.reTrust=Stop Mistrusting</span>
<a href="#l13.399"></a><span id="l13.399"> handshakeDlg.label.outgoingMessage=Outgoing message</span>
<a href="#l13.400"></a><span id="l13.400"> handshakeDlg.label.incomingMessage=Incoming message</span>
<a href="#l13.401"></a><span id="l13.401"> handshakeDlg.error.noPeers=Cannot handshake without any correspondents.</span>
<a href="#l13.402"></a><span id="l13.402" class="difflineat">@@ -679,38 +599,25 @@ enigmail.acSetupPasswd.descEnterPasswd=P</span>
<a href="#l13.403"></a><span id="l13.403">   enigmail.acSetupPasswd.descCopyPasswd=Please enter the setup code below on your other device to proceed with the setup.</span>
<a href="#l13.404"></a><span id="l13.404"> </span>
<a href="#l13.405"></a><span id="l13.405"> #strings in autocrypt.jsm</span>
<a href="#l13.406"></a><span id="l13.406"> </span>
<a href="#l13.407"></a><span id="l13.407"> autocrypt.setupMsg.subject=Autocrypt Setup Message</span>
<a href="#l13.408"></a><span id="l13.408"> autocrypt.setupMsg.msgBody=To set up your new device for Autocrypt, please follow the instuctions that should be presented by your new device.</span>
<a href="#l13.409"></a><span id="l13.409"> autocrypt.setupMsg.fileTxt=This is the Autocrypt setup file used to transfer settings and keys between clients. You can decrypt it using the setup code displayed on your old device, then import the key to your keyring.</span>
<a href="#l13.410"></a><span id="l13.410"> </span>
<a href="#l13.411"></a><span id="l13.411" class="difflineminus">-#strings in updateGnuPG.html</span>
<a href="#l13.412"></a><span id="l13.412" class="difflineminus">-updateGnuPG.tabName=GnuPG Update</span>
<a href="#l13.413"></a><span id="l13.413" class="difflineminus">-updateGnuPG.title=Updates for GnuPG</span>
<a href="#l13.414"></a><span id="l13.414" class="difflineminus">-updateGnuPG.introduction.desc=Gine-Liam requires GnuPG to perform its cryptographic functions. We recommend that you keep your installation of GnuPG up to date.</span>
<a href="#l13.415"></a><span id="l13.415" class="difflineminus">-updateGnuPG.updateRequired=A newer version of GnuPG is available. We strongly recommend that you keep your GnuPG installation up to date. Please click on the &lt;em&gt;Install Update&lt;/em&gt; button to download and install the update.</span>
<a href="#l13.416"></a><span id="l13.416" class="difflineminus">-updateGnuPG.noUpdateRequired=GnuPG is up to date.</span>
<a href="#l13.417"></a><span id="l13.417" class="difflineminus">-updateGnuPG.cannotUpdate.header=Gine-Liam only supports updating the following packages:</span>
<a href="#l13.418"></a><span id="l13.418" class="difflineminus">-updateGnuPG.cannotUpdate.footer=You seem to use some other variant of GnuGP; unfortunately it is therefore not possible for Gine-Liam to update your GnuGP installation.</span>
<a href="#l13.419"></a><span id="l13.419" class="difflineminus">-updateGnuPG.installUpdate=Install Update</span>
<a href="#l13.420"></a><span id="l13.420" class="difflineminus">-updateGnuPG.noMoreUpdates=Don't check for future updates</span>
<a href="#l13.421"></a><span id="l13.421" class="difflineminus">-updateGnuPG.checkUpdate=Check for GnuPG Updates</span>
<a href="#l13.422"></a><span id="l13.422" class="difflineminus">-</span>
<a href="#l13.423"></a><span id="l13.423" class="difflineminus">-</span>
<a href="#l13.424"></a><span id="l13.424"> #strings in keyserver.jsm</span>
<a href="#l13.425"></a><span id="l13.425"> keyserver.error.aborted=Aborted</span>
<a href="#l13.426"></a><span id="l13.426"> keyserver.error.unknown=An unknown error occurred</span>
<a href="#l13.427"></a><span id="l13.427"> keyserver.error.serverError=The keyserver reported an error.</span>
<a href="#l13.428"></a><span id="l13.428"> keyserver.error.importError=Failed to import the downloaded key.</span>
<a href="#l13.429"></a><span id="l13.429"> keyserver.error.unavailable=The keyserver is not available.</span>
<a href="#l13.430"></a><span id="l13.430"> keyserver.error.securityError=The keyserver does not support encrypted access.</span>
<a href="#l13.431"></a><span id="l13.431"> keyserver.error.certificateError=The keyservers certificate is not valid.</span>
<a href="#l13.432"></a><span id="l13.432" class="difflineminus">-keyserver.error.unsupported=The keyserver is not supported by Gine-Liam.</span>
<a href="#l13.433"></a><span id="l13.433" class="difflineplus">+keyserver.error.unsupported2=The keyserver is not supported.</span>
<a href="#l13.434"></a><span id="l13.434"> </span>
<a href="#l13.435"></a><span id="l13.435"> #strings in mimeDecrypt.jsm</span>
<a href="#l13.436"></a><span id="l13.436"> mimeDecrypt.encryptedPart.attachmentLabel=Encrypted message part</span>
<a href="#l13.437"></a><span id="l13.437"> mimeDecrypt.encryptedPart.concealedData=This is an encrypted message part. You need to open it in a separate window by clicking on the attachment.</span>
<a href="#l13.438"></a><span id="l13.438"> </span>
<a href="#l13.439"></a><span id="l13.439"> #strings in gnupg-key.jsm</span>
<a href="#l13.440"></a><span id="l13.440"> import.secretKeyImportError=An error has occurred in GnuPG while importing secret keys. The import was not successful.</span>
<a href="#l13.441"></a><span id="l13.441"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -314,17 +314,17 @@ function EnigAlertPref(mesg, prefText) {</span>
<a href="#l14.4"></a><span id="l14.4"> }</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6"> // Confirmation dialog with OK / Cancel buttons (both customizable)</span>
<a href="#l14.7"></a><span id="l14.7"> function EnigConfirm(mesg, okLabel, cancelLabel) {</span>
<a href="#l14.8"></a><span id="l14.8">   return EnigmailDialog.confirmDlg(window, mesg, okLabel, cancelLabel);</span>
<a href="#l14.9"></a><span id="l14.9"> }</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> function EnigError(mesg) {</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  return gEnigPromptSvc.alert(window, EnigGetString(&quot;enigError&quot;), mesg);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  return gEnigPromptSvc.alert(window, EnigGetString(&quot;enigError2&quot;), mesg);</span>
<a href="#l14.14"></a><span id="l14.14"> }</span>
<a href="#l14.15"></a><span id="l14.15"> </span>
<a href="#l14.16"></a><span id="l14.16"> function EnigHelpWindow(source) {</span>
<a href="#l14.17"></a><span id="l14.17">   EnigmailWindows.openHelpWindow(source);</span>
<a href="#l14.18"></a><span id="l14.18"> }</span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20"> function EnigDisplayRadioPref(prefName, prefValue, optionElementIds) {</span>
<a href="#l14.21"></a><span id="l14.21">   EnigmailLog.DEBUG(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -586,17 +586,17 @@ function enigmailExportKeys() {</span>
<a href="#l15.4"></a><span id="l15.4">     }</span>
<a href="#l15.5"></a><span id="l15.5">   }</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">   var exportSecretKey = false;</span>
<a href="#l15.8"></a><span id="l15.8">   if (secretFound) {</span>
<a href="#l15.9"></a><span id="l15.9">     // double check that also the pivate keys shall be exportet</span>
<a href="#l15.10"></a><span id="l15.10">     var r = EnigmailDialog.msgBox(window, {</span>
<a href="#l15.11"></a><span id="l15.11">       msgtext: EnigGetString(&quot;exportSecretKey&quot;),</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      dialogTitle: EnigGetString(&quot;enigConfirm&quot;),</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+      dialogTitle: EnigGetString(&quot;enigConfirm2&quot;),</span>
<a href="#l15.14"></a><span id="l15.14">       button1: EnigGetString(&quot;keyMan.button.exportPubKey&quot;),</span>
<a href="#l15.15"></a><span id="l15.15">       button2: EnigGetString(&quot;keyMan.button.exportSecKey&quot;),</span>
<a href="#l15.16"></a><span id="l15.16">       cancelButton: &quot;:cancel&quot;,</span>
<a href="#l15.17"></a><span id="l15.17">       iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l15.18"></a><span id="l15.18">     });</span>
<a href="#l15.19"></a><span id="l15.19">     switch (r) {</span>
<a href="#l15.20"></a><span id="l15.20">       case 0: // export pub key only</span>
<a href="#l15.21"></a><span id="l15.21">         break;</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -898,17 +898,17 @@ function userAcceptsWarning(warningMessa</span>
<a href="#l15.23"></a><span id="l15.23">     EnigmailDialog.msgBox(</span>
<a href="#l15.24"></a><span id="l15.24">       window,</span>
<a href="#l15.25"></a><span id="l15.25">       {</span>
<a href="#l15.26"></a><span id="l15.26">         msgtext: warningMessage,</span>
<a href="#l15.27"></a><span id="l15.27">         checkboxLabel: EnigGetString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l15.28"></a><span id="l15.28">         button1: EnigGetString(&quot;dlg.button.continue&quot;),</span>
<a href="#l15.29"></a><span id="l15.29">         cancelButton: &quot;:cancel&quot;,</span>
<a href="#l15.30"></a><span id="l15.30">         iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-        dialogTitle: EnigmailLocale.getString(&quot;enigConfirm&quot;),</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l15.33"></a><span id="l15.33">       },</span>
<a href="#l15.34"></a><span id="l15.34">       checkedObj</span>
<a href="#l15.35"></a><span id="l15.35">     ) === 0;</span>
<a href="#l15.36"></a><span id="l15.36"> </span>
<a href="#l15.37"></a><span id="l15.37">   if (checkedObj.value) {</span>
<a href="#l15.38"></a><span id="l15.38">     EnigSetPref(&quot;warnRefreshAll&quot;, false);</span>
<a href="#l15.39"></a><span id="l15.39">   }</span>
<a href="#l15.40"></a><span id="l15.40">   return confirm;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyManager.xhtml</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l16.4"></a><span id="l16.4">    %brandDTD;</span>
<a href="#l16.5"></a><span id="l16.5">   &lt;!ENTITY % enigMailDTD SYSTEM &quot;chrome://openpgp/content/strings/enigmail.dtd&quot; &gt;</span>
<a href="#l16.6"></a><span id="l16.6">   %enigMailDTD;</span>
<a href="#l16.7"></a><span id="l16.7">   &lt;!ENTITY % utilDTD SYSTEM &quot;chrome://communicator/locale/utilityOverlay.dtd&quot;&gt;</span>
<a href="#l16.8"></a><span id="l16.8">    %utilDTD;</span>
<a href="#l16.9"></a><span id="l16.9"> ]&gt;</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11"> &lt;window id=&quot;enigmailKeyManager&quot;</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-        title=&quot;&amp;enigmail.keyMan.title;&quot;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+        title=&quot;&amp;openpgp.keyMan.title;&quot;</span>
<a href="#l16.14"></a><span id="l16.14">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l16.15"></a><span id="l16.15">         xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l16.16"></a><span id="l16.16">         onload=&quot;enigmailKeyManagerLoad();&quot;</span>
<a href="#l16.17"></a><span id="l16.17">         height=&quot;450&quot;</span>
<a href="#l16.18"></a><span id="l16.18">         width=&quot;700&quot;</span>
<a href="#l16.19"></a><span id="l16.19">         windowtype=&quot;enigmail:KeyManager&quot;</span>
<a href="#l16.20"></a><span id="l16.20">         persist=&quot;screenX screenY width height&quot;&gt;</span>
<a href="#l16.21"></a><span id="l16.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeySelection.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,1120 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-/*</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">- * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">- * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">- */</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-// Uses: chrome://openpgp/content/ui/enigmailCommon.js</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-/* global EnigInitCommon: false, EnigmailTrust: false, EnigGetString: false, EnigmailCore: false, EnigmailLog: false */</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-/* global EnigmailKeyRing: false, EnigGetPref: false, EnigGetTrustLabel: false, EnigSetActive: false, EnigAlert: false */</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">-/* global EnigSetPref: false, EnigConfirm: false, EnigmailPrefs: false, EnigDownloadKeys: false */</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineminus">-</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineminus">-// Initialize enigmailCommon</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineminus">-EnigInitCommon(&quot;enigmailKeySelection&quot;);</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">-var EnigmailFuncs = ChromeUtils.import(</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineminus">-  &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">-).EnigmailFuncs;</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineminus">-var { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">-  &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-);</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">-var EnigmailSearchCallback = ChromeUtils.import(</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineminus">-  &quot;chrome://openpgp/content/modules/searchCallback.jsm&quot;</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineminus">-).EnigmailSearchCallback;</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">-var EnigmailCryptoAPI = ChromeUtils.import(</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-  &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineminus">-).EnigmailCryptoAPI;</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-var newEnigmailKeyObj = ChromeUtils.import(</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-  &quot;chrome://openpgp/content/modules/keyObj.jsm&quot;</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-).newEnigmailKeyObj;</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-var EnigmailCompat = ChromeUtils.import(</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">-  &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineminus">-).EnigmailCompat;</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">-var getCellAt = null;</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-const INPUT = 0;</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-const RESULT = 1;</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">-</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineminus">-// field ID's of key list (as described in the doc/DETAILS file in the GnuPG distribution)</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-const KEY_TRUST = 1;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-const KEY_ID = 4;</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-const CREATED = 5;</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">-const EXPIRY = 6;</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">-const USER_ID = 9;</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-const KEY_USE_FOR = 11;</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-const FPR = 9;</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">-</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">-// key trust values for field 1 (as described in the doc/DETAILS file in the GnuPG distribution)</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">-const KEY_EXPIRED = &quot;e&quot;;</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-const KEY_REVOKED = &quot;r&quot;;</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineminus">-const KEY_INVALID = &quot;i&quot;;</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-const KEY_DISABLED = &quot;d&quot;;</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-const KEY_NOT_VALID = KEY_EXPIRED + KEY_REVOKED + KEY_INVALID + KEY_DISABLED;</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineminus">-const KEY_IS_GROUP = &quot;g&quot;;</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-// HKP related stuff</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-const ENIG_DEFAULT_HKP_PORT = &quot;11371&quot;;</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-const TRUSTLEVELS_SORTED = EnigmailTrust.trustLevelsSorted();</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-var gUserList;</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineminus">-var gResult;</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineminus">-var gAlwaysTrust = false;</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineminus">-var gSendEncrypted = true;</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-var gSendSigned = true;</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-var gAllowExpired = false;</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineminus">-var gIpcRequest;</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineminus">-var gTimeoutId = {};</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-var gEnigRemoveListener = false;</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-var gKeysNotFound = [];</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-const EMPTY_UID = &quot; -&quot;;</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineminus">-function onLoad() {</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-  EnigmailLog.DEBUG(&quot;enigmailKeySelection.js: onLoad\n&quot;);</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineminus">-</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineminus">-  gIpcRequest = null;</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;private&quot;)) {</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineminus">-    document</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">-      .getElementById(&quot;enigmailKeySelectionDlg&quot;)</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineminus">-      .setAttribute(&quot;title&quot;, EnigGetString(&quot;userSel.secretKeySel.title&quot;));</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineminus">-  }</span>
<a href="#l17.88"></a><span id="l17.88" class="difflineminus">-</span>
<a href="#l17.89"></a><span id="l17.89" class="difflineminus">-  let tree = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineminus">-  getCellAt = EnigmailCompat.getTreeCompatibleFuncs(tree, null).getCellAt;</span>
<a href="#l17.91"></a><span id="l17.91" class="difflineminus">-  tree.addEventListener(&quot;click&quot;, onClickCallback, true);</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineminus">-  EnigmailSearchCallback.setup(</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineminus">-    document.getElementById(&quot;filterKey&quot;),</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineminus">-    gTimeoutId,</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineminus">-    applyFilter,</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineminus">-    200</span>
<a href="#l17.97"></a><span id="l17.97" class="difflineminus">-  );</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineminus">-</span>
<a href="#l17.99"></a><span id="l17.99" class="difflineminus">-  let enigmailSvc = EnigmailCore.getService(window);</span>
<a href="#l17.100"></a><span id="l17.100" class="difflineminus">-  if (!enigmailSvc) {</span>
<a href="#l17.101"></a><span id="l17.101" class="difflineminus">-    return false;</span>
<a href="#l17.102"></a><span id="l17.102" class="difflineminus">-  }</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineminus">-  buildList(false);</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineminus">-  return true;</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineminus">-}</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">-</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineminus">-function refreshKeys() {</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineminus">-  // delete existing entries:</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineminus">-  var userTreeList = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineminus">-  var treeChildren = userTreeList.getElementsByAttribute(</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineminus">-    &quot;id&quot;,</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineminus">-    &quot;enigmailUserIdSelectionChildren&quot;</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineminus">-  )[0];</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineminus">-  while (treeChildren.firstChild) {</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineminus">-    treeChildren.firstChild.remove();</span>
<a href="#l17.117"></a><span id="l17.117" class="difflineminus">-  }</span>
<a href="#l17.118"></a><span id="l17.118" class="difflineminus">-  // rebuild new entries:</span>
<a href="#l17.119"></a><span id="l17.119" class="difflineminus">-  buildList(true);</span>
<a href="#l17.120"></a><span id="l17.120" class="difflineminus">-}</span>
<a href="#l17.121"></a><span id="l17.121" class="difflineminus">-</span>
<a href="#l17.122"></a><span id="l17.122" class="difflineminus">-function getKeyList(secretOnly, refresh) {</span>
<a href="#l17.123"></a><span id="l17.123" class="difflineminus">-  EnigmailLog.DEBUG(&quot;enigmailMessengerOverlay.js: getKeyList\n&quot;);</span>
<a href="#l17.124"></a><span id="l17.124" class="difflineminus">-</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineminus">-  //const cApi = EnigmailCryptoAPI();</span>
<a href="#l17.126"></a><span id="l17.126" class="difflineminus">-  let userList, keyList;</span>
<a href="#l17.127"></a><span id="l17.127" class="difflineminus">-  try {</span>
<a href="#l17.128"></a><span id="l17.128" class="difflineminus">-    if (refresh) {</span>
<a href="#l17.129"></a><span id="l17.129" class="difflineminus">-      EnigmailKeyRing.clearCache();</span>
<a href="#l17.130"></a><span id="l17.130" class="difflineminus">-    }</span>
<a href="#l17.131"></a><span id="l17.131" class="difflineminus">-</span>
<a href="#l17.132"></a><span id="l17.132" class="difflineminus">-    if (secretOnly) {</span>
<a href="#l17.133"></a><span id="l17.133" class="difflineminus">-      userList = EnigmailKeyRing.getAllSecretKeys(window);</span>
<a href="#l17.134"></a><span id="l17.134" class="difflineminus">-      if (!userList) {</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineminus">-        return null;</span>
<a href="#l17.136"></a><span id="l17.136" class="difflineminus">-      }</span>
<a href="#l17.137"></a><span id="l17.137" class="difflineminus">-      keyList = EnigmailFuncs.cloneObj(userList);</span>
<a href="#l17.138"></a><span id="l17.138" class="difflineminus">-    } else {</span>
<a href="#l17.139"></a><span id="l17.139" class="difflineminus">-      userList = EnigmailKeyRing.getAllKeys(window);</span>
<a href="#l17.140"></a><span id="l17.140" class="difflineminus">-      if (!userList) {</span>
<a href="#l17.141"></a><span id="l17.141" class="difflineminus">-        return null;</span>
<a href="#l17.142"></a><span id="l17.142" class="difflineminus">-      }</span>
<a href="#l17.143"></a><span id="l17.143" class="difflineminus">-</span>
<a href="#l17.144"></a><span id="l17.144" class="difflineminus">-      if (userList.trustModel === &quot;t&quot;) {</span>
<a href="#l17.145"></a><span id="l17.145" class="difflineminus">-        gAlwaysTrust = true;</span>
<a href="#l17.146"></a><span id="l17.146" class="difflineminus">-      }</span>
<a href="#l17.147"></a><span id="l17.147" class="difflineminus">-</span>
<a href="#l17.148"></a><span id="l17.148" class="difflineminus">-      keyList = EnigmailFuncs.cloneObj(userList.keyList);</span>
<a href="#l17.149"></a><span id="l17.149" class="difflineminus">-    }</span>
<a href="#l17.150"></a><span id="l17.150" class="difflineminus">-  } catch (ex) {</span>
<a href="#l17.151"></a><span id="l17.151" class="difflineminus">-    EnigmailLog.writeException(&quot;enigmailKeySelection.js: getKeyList&quot;, ex);</span>
<a href="#l17.152"></a><span id="l17.152" class="difflineminus">-  }</span>
<a href="#l17.153"></a><span id="l17.153" class="difflineminus">-</span>
<a href="#l17.154"></a><span id="l17.154" class="difflineminus">-  return keyList;</span>
<a href="#l17.155"></a><span id="l17.155" class="difflineminus">-}</span>
<a href="#l17.156"></a><span id="l17.156" class="difflineminus">-</span>
<a href="#l17.157"></a><span id="l17.157" class="difflineminus">-/**</span>
<a href="#l17.158"></a><span id="l17.158" class="difflineminus">- * Helper function to sort keys in the order specific for this dialog</span>
<a href="#l17.159"></a><span id="l17.159" class="difflineminus">- */</span>
<a href="#l17.160"></a><span id="l17.160" class="difflineminus">-</span>
<a href="#l17.161"></a><span id="l17.161" class="difflineminus">-function sortKeys(a, b) {</span>
<a href="#l17.162"></a><span id="l17.162" class="difflineminus">-  // sorting criterion for dialog entries</span>
<a href="#l17.163"></a><span id="l17.163" class="difflineminus">-  // - note: for active state we have values:</span>
<a href="#l17.164"></a><span id="l17.164" class="difflineminus">-  //         0: not active</span>
<a href="#l17.165"></a><span id="l17.165" class="difflineminus">-  //         1: active</span>
<a href="#l17.166"></a><span id="l17.166" class="difflineminus">-  //         2: not selectable (red because invalid)</span>
<a href="#l17.167"></a><span id="l17.167" class="difflineminus">-  var r = 0;</span>
<a href="#l17.168"></a><span id="l17.168" class="difflineminus">-  // 1st: sort active keys in front of not active keys</span>
<a href="#l17.169"></a><span id="l17.169" class="difflineminus">-  if (</span>
<a href="#l17.170"></a><span id="l17.170" class="difflineminus">-    a.activeState != b.activeState &amp;&amp;</span>
<a href="#l17.171"></a><span id="l17.171" class="difflineminus">-    (a.activeState == 1 || b.activeState == 1)</span>
<a href="#l17.172"></a><span id="l17.172" class="difflineminus">-  ) {</span>
<a href="#l17.173"></a><span id="l17.173" class="difflineminus">-    r = a.activeState == 1 ? -1 : 1;</span>
<a href="#l17.174"></a><span id="l17.174" class="difflineminus">-  }</span>
<a href="#l17.175"></a><span id="l17.175" class="difflineminus">-  // 2nd: sort keys matching invalid addresses in front non-matching addresses</span>
<a href="#l17.176"></a><span id="l17.176" class="difflineminus">-  else if (a.uidMatchInvalid != b.uidMatchInvalid) {</span>
<a href="#l17.177"></a><span id="l17.177" class="difflineminus">-    r = a.uidMatchInvalid == 1 ? -1 : 1;</span>
<a href="#l17.178"></a><span id="l17.178" class="difflineminus">-  }</span>
<a href="#l17.179"></a><span id="l17.179" class="difflineminus">-  // 3rd: sort non-activateable keys to the end</span>
<a href="#l17.180"></a><span id="l17.180" class="difflineminus">-  else if (</span>
<a href="#l17.181"></a><span id="l17.181" class="difflineminus">-    a.activeState != b.activeState &amp;&amp;</span>
<a href="#l17.182"></a><span id="l17.182" class="difflineminus">-    (a.activeState == 2 || b.activeState == 2)</span>
<a href="#l17.183"></a><span id="l17.183" class="difflineminus">-  ) {</span>
<a href="#l17.184"></a><span id="l17.184" class="difflineminus">-    r = a.activeState === 0 ? -1 : 1;</span>
<a href="#l17.185"></a><span id="l17.185" class="difflineminus">-  }</span>
<a href="#l17.186"></a><span id="l17.186" class="difflineminus">-  // 4th: sort according to user IDs</span>
<a href="#l17.187"></a><span id="l17.187" class="difflineminus">-  else if (a.userId.toLowerCase() &lt; b.userId.toLowerCase()) {</span>
<a href="#l17.188"></a><span id="l17.188" class="difflineminus">-    r = -1;</span>
<a href="#l17.189"></a><span id="l17.189" class="difflineminus">-  } else if (a.userId.toLowerCase() &gt; b.userId.toLowerCase()) {</span>
<a href="#l17.190"></a><span id="l17.190" class="difflineminus">-    r = 1;</span>
<a href="#l17.191"></a><span id="l17.191" class="difflineminus">-  }</span>
<a href="#l17.192"></a><span id="l17.192" class="difflineminus">-  // 5th: sort according to trust level (higher index value in front)</span>
<a href="#l17.193"></a><span id="l17.193" class="difflineminus">-  else if (</span>
<a href="#l17.194"></a><span id="l17.194" class="difflineminus">-    TRUSTLEVELS_SORTED.indexOf(a.keyTrust) &gt;</span>
<a href="#l17.195"></a><span id="l17.195" class="difflineminus">-    TRUSTLEVELS_SORTED.indexOf(b.keyTrust)</span>
<a href="#l17.196"></a><span id="l17.196" class="difflineminus">-  ) {</span>
<a href="#l17.197"></a><span id="l17.197" class="difflineminus">-    r = -1;</span>
<a href="#l17.198"></a><span id="l17.198" class="difflineminus">-  } else {</span>
<a href="#l17.199"></a><span id="l17.199" class="difflineminus">-    r = 1;</span>
<a href="#l17.200"></a><span id="l17.200" class="difflineminus">-  }</span>
<a href="#l17.201"></a><span id="l17.201" class="difflineminus">-  return r;</span>
<a href="#l17.202"></a><span id="l17.202" class="difflineminus">-}</span>
<a href="#l17.203"></a><span id="l17.203" class="difflineminus">-</span>
<a href="#l17.204"></a><span id="l17.204" class="difflineminus">-/**</span>
<a href="#l17.205"></a><span id="l17.205" class="difflineminus">- * Set up the dialog in terms of visible columns and top-level message(s)</span>
<a href="#l17.206"></a><span id="l17.206" class="difflineminus">- */</span>
<a href="#l17.207"></a><span id="l17.207" class="difflineminus">-function prepareDialog(secretOnly) {</span>
<a href="#l17.208"></a><span id="l17.208" class="difflineminus">-  throw new Error(&quot;Not implemented&quot;);</span>
<a href="#l17.209"></a><span id="l17.209" class="difflineminus">-  /*</span>
<a href="#l17.210"></a><span id="l17.210" class="difflineminus">-  UI part is removed from here.</span>
<a href="#l17.211"></a><span id="l17.211" class="difflineminus">-  https://searchfox.org/comm-central/rev/32109474297be91179f5f8388e778ef9ab5d38ce/mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml#34-42</span>
<a href="#l17.212"></a><span id="l17.212" class="difflineminus">-  if (window.arguments[INPUT].dialogHeader) {</span>
<a href="#l17.213"></a><span id="l17.213" class="difflineminus">-    var dialogHeader = document.getElementById(&quot;dialogHeader&quot;);</span>
<a href="#l17.214"></a><span id="l17.214" class="difflineminus">-    if (dialogHeader) {</span>
<a href="#l17.215"></a><span id="l17.215" class="difflineminus">-      dialogHeader.innerHTML = window.arguments[INPUT].dialogHeader;</span>
<a href="#l17.216"></a><span id="l17.216" class="difflineminus">-      dialogHeader.style.visibility = &quot;visible&quot;;</span>
<a href="#l17.217"></a><span id="l17.217" class="difflineminus">-    }</span>
<a href="#l17.218"></a><span id="l17.218" class="difflineminus">-  } else {</span>
<a href="#l17.219"></a><span id="l17.219" class="difflineminus">-    let box = document.getElementById(&quot;dialogHeaderBox&quot;);</span>
<a href="#l17.220"></a><span id="l17.220" class="difflineminus">-    box.setAttribute(&quot;class&quot;, &quot;enigmailCaptionboxNoTitle&quot;);</span>
<a href="#l17.221"></a><span id="l17.221" class="difflineminus">-    box.removeChild(box.firstChild);</span>
<a href="#l17.222"></a><span id="l17.222" class="difflineminus">-  }</span>
<a href="#l17.223"></a><span id="l17.223" class="difflineminus">-  var dialogMsgList = document.getElementById(&quot;dialogMsgList&quot;);</span>
<a href="#l17.224"></a><span id="l17.224" class="difflineminus">-  var dialogMsgListRows = document.getElementById(&quot;dialogMsgListRows&quot;);</span>
<a href="#l17.225"></a><span id="l17.225" class="difflineminus">-  if (dialogMsgListRows) {</span>
<a href="#l17.226"></a><span id="l17.226" class="difflineminus">-    // clear the list (otherwise it grows with each loaded missing key)</span>
<a href="#l17.227"></a><span id="l17.227" class="difflineminus">-    while (dialogMsgListRows.firstChild) {</span>
<a href="#l17.228"></a><span id="l17.228" class="difflineminus">-      dialogMsgListRows.removeChild(dialogMsgListRows.firstChild);</span>
<a href="#l17.229"></a><span id="l17.229" class="difflineminus">-    }</span>
<a href="#l17.230"></a><span id="l17.230" class="difflineminus">-</span>
<a href="#l17.231"></a><span id="l17.231" class="difflineminus">-    // fill the list according to the error messages</span>
<a href="#l17.232"></a><span id="l17.232" class="difflineminus">-    if (</span>
<a href="#l17.233"></a><span id="l17.233" class="difflineminus">-      window.arguments[INPUT].errArray &amp;&amp;</span>
<a href="#l17.234"></a><span id="l17.234" class="difflineminus">-      window.arguments[INPUT].errArray.length &gt; 0</span>
<a href="#l17.235"></a><span id="l17.235" class="difflineminus">-    ) {</span>
<a href="#l17.236"></a><span id="l17.236" class="difflineminus">-      var array = window.arguments[INPUT].errArray;</span>
<a href="#l17.237"></a><span id="l17.237" class="difflineminus">-      for (var detIdx = 0; detIdx &lt; array.length; ++detIdx) {</span>
<a href="#l17.238"></a><span id="l17.238" class="difflineminus">-        var msg = null;</span>
<a href="#l17.239"></a><span id="l17.239" class="difflineminus">-        switch (array[detIdx].msg) {</span>
<a href="#l17.240"></a><span id="l17.240" class="difflineminus">-          case &quot;ProblemNoKey&quot;:</span>
<a href="#l17.241"></a><span id="l17.241" class="difflineminus">-            msg = EnigGetString(&quot;userSel.problemNoKey&quot;);</span>
<a href="#l17.242"></a><span id="l17.242" class="difflineminus">-            if (!window.arguments[INPUT].options.includes(&quot;nosending&quot;)) {</span>
<a href="#l17.243"></a><span id="l17.243" class="difflineminus">-              document</span>
<a href="#l17.244"></a><span id="l17.244" class="difflineminus">-                .getElementById(&quot;importMissingKeys&quot;)</span>
<a href="#l17.245"></a><span id="l17.245" class="difflineminus">-                .removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l17.246"></a><span id="l17.246" class="difflineminus">-            }</span>
<a href="#l17.247"></a><span id="l17.247" class="difflineminus">-            break;</span>
<a href="#l17.248"></a><span id="l17.248" class="difflineminus">-          case &quot;ProblemMultipleKeys&quot;:</span>
<a href="#l17.249"></a><span id="l17.249" class="difflineminus">-            msg = EnigGetString(&quot;userSel.problemMultipleKeys&quot;);</span>
<a href="#l17.250"></a><span id="l17.250" class="difflineminus">-            break;</span>
<a href="#l17.251"></a><span id="l17.251" class="difflineminus">-          default:</span>
<a href="#l17.252"></a><span id="l17.252" class="difflineminus">-            EnigmailLog.DEBUG(</span>
<a href="#l17.253"></a><span id="l17.253" class="difflineminus">-              &quot;missing label for '&quot; + array[detIdx].msg + &quot;'\n&quot;</span>
<a href="#l17.254"></a><span id="l17.254" class="difflineminus">-            );</span>
<a href="#l17.255"></a><span id="l17.255" class="difflineminus">-            msg = &quot;???&quot;;</span>
<a href="#l17.256"></a><span id="l17.256" class="difflineminus">-            break;</span>
<a href="#l17.257"></a><span id="l17.257" class="difflineminus">-        }</span>
<a href="#l17.258"></a><span id="l17.258" class="difflineminus">-        var row = document.createXULElement(&quot;row&quot;);</span>
<a href="#l17.259"></a><span id="l17.259" class="difflineminus">-        var cell = document.createXULElement(&quot;label&quot;);</span>
<a href="#l17.260"></a><span id="l17.260" class="difflineminus">-        cell.setAttribute(&quot;value&quot;, array[detIdx].addr + &quot;:&quot;);</span>
<a href="#l17.261"></a><span id="l17.261" class="difflineminus">-        row.appendChild(cell);</span>
<a href="#l17.262"></a><span id="l17.262" class="difflineminus">-        cell = document.createXULElement(&quot;label&quot;);</span>
<a href="#l17.263"></a><span id="l17.263" class="difflineminus">-        cell.setAttribute(&quot;value&quot;, msg);</span>
<a href="#l17.264"></a><span id="l17.264" class="difflineminus">-        row.appendChild(cell);</span>
<a href="#l17.265"></a><span id="l17.265" class="difflineminus">-        dialogMsgListRows.appendChild(row);</span>
<a href="#l17.266"></a><span id="l17.266" class="difflineminus">-      }</span>
<a href="#l17.267"></a><span id="l17.267" class="difflineminus">-      dialogMsgList.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l17.268"></a><span id="l17.268" class="difflineminus">-    } else {</span>
<a href="#l17.269"></a><span id="l17.269" class="difflineminus">-      dialogMsgList.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.270"></a><span id="l17.270" class="difflineminus">-    }</span>
<a href="#l17.271"></a><span id="l17.271" class="difflineminus">-  }</span>
<a href="#l17.272"></a><span id="l17.272" class="difflineminus">-</span>
<a href="#l17.273"></a><span id="l17.273" class="difflineminus">-  if (secretOnly) {</span>
<a href="#l17.274"></a><span id="l17.274" class="difflineminus">-    // rename expired row to created</span>
<a href="#l17.275"></a><span id="l17.275" class="difflineminus">-    document</span>
<a href="#l17.276"></a><span id="l17.276" class="difflineminus">-      .getElementById(&quot;expCol&quot;)</span>
<a href="#l17.277"></a><span id="l17.277" class="difflineminus">-      .setAttribute(&quot;label&quot;, EnigGetString(&quot;createdHeader&quot;));</span>
<a href="#l17.278"></a><span id="l17.278" class="difflineminus">-  }</span>
<a href="#l17.279"></a><span id="l17.279" class="difflineminus">-</span>
<a href="#l17.280"></a><span id="l17.280" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;unsigned&quot;)) {</span>
<a href="#l17.281"></a><span id="l17.281" class="difflineminus">-    gSendSigned = false;</span>
<a href="#l17.282"></a><span id="l17.282" class="difflineminus">-    var sendSignedCheckbox = document.getElementById(</span>
<a href="#l17.283"></a><span id="l17.283" class="difflineminus">-      &quot;enigmailUserSelSendSigned&quot;</span>
<a href="#l17.284"></a><span id="l17.284" class="difflineminus">-    );</span>
<a href="#l17.285"></a><span id="l17.285" class="difflineminus">-    sendSignedCheckbox.setAttribute(&quot;checked&quot;, &quot;false&quot;);</span>
<a href="#l17.286"></a><span id="l17.286" class="difflineminus">-  }</span>
<a href="#l17.287"></a><span id="l17.287" class="difflineminus">-  if (!window.arguments[INPUT].options.includes(&quot;rulesOption&quot;)) {</span>
<a href="#l17.288"></a><span id="l17.288" class="difflineminus">-    var rulesOption = document</span>
<a href="#l17.289"></a><span id="l17.289" class="difflineminus">-      .getElementById(&quot;enigmailKeySelectionDlg&quot;)</span>
<a href="#l17.290"></a><span id="l17.290" class="difflineminus">-      .getButton(&quot;extra1&quot;);</span>
<a href="#l17.291"></a><span id="l17.291" class="difflineminus">-    rulesOption.setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l17.292"></a><span id="l17.292" class="difflineminus">-  }</span>
<a href="#l17.293"></a><span id="l17.293" class="difflineminus">-</span>
<a href="#l17.294"></a><span id="l17.294" class="difflineminus">-  var dialogHeaderDesc = document.getElementById(&quot;dialogHeaderDesc&quot;);</span>
<a href="#l17.295"></a><span id="l17.295" class="difflineminus">-  var notFoundCapt = document.getElementById(&quot;usersNotFoundCapt&quot;);</span>
<a href="#l17.296"></a><span id="l17.296" class="difflineminus">-</span>
<a href="#l17.297"></a><span id="l17.297" class="difflineminus">-  if (!window.arguments[INPUT].options.includes(&quot;multisel&quot;)) {</span>
<a href="#l17.298"></a><span id="l17.298" class="difflineminus">-    // single key selection -&gt; hide selection col</span>
<a href="#l17.299"></a><span id="l17.299" class="difflineminus">-    var selColumn = document.getElementById(&quot;selectionCol&quot;);</span>
<a href="#l17.300"></a><span id="l17.300" class="difflineminus">-    selColumn.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.301"></a><span id="l17.301" class="difflineminus">-    gUserList.setAttribute(&quot;hidecolumnpicker&quot;, &quot;true&quot;);</span>
<a href="#l17.302"></a><span id="l17.302" class="difflineminus">-  }</span>
<a href="#l17.303"></a><span id="l17.303" class="difflineminus">-</span>
<a href="#l17.304"></a><span id="l17.304" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;nosending&quot;)) {</span>
<a href="#l17.305"></a><span id="l17.305" class="difflineminus">-    // hide not found recipients, hide &quot;send unencrypted&quot;</span>
<a href="#l17.306"></a><span id="l17.306" class="difflineminus">-    document.getElementById(&quot;dialogHeadline&quot;).setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.307"></a><span id="l17.307" class="difflineminus">-    document</span>
<a href="#l17.308"></a><span id="l17.308" class="difflineminus">-      .getElementById(&quot;enigmailUserSelSendSigned&quot;)</span>
<a href="#l17.309"></a><span id="l17.309" class="difflineminus">-      .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.310"></a><span id="l17.310" class="difflineminus">-    document</span>
<a href="#l17.311"></a><span id="l17.311" class="difflineminus">-      .getElementById(&quot;enigmailUserSelSendEncrypted&quot;)</span>
<a href="#l17.312"></a><span id="l17.312" class="difflineminus">-      .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.313"></a><span id="l17.313" class="difflineminus">-  } else if (window.arguments[INPUT].options.includes(&quot;noforcedisp&quot;)) {</span>
<a href="#l17.314"></a><span id="l17.314" class="difflineminus">-    document.getElementById(&quot;displayNoLonger&quot;).removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l17.315"></a><span id="l17.315" class="difflineminus">-  }</span>
<a href="#l17.316"></a><span id="l17.316" class="difflineminus">-</span>
<a href="#l17.317"></a><span id="l17.317" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;noplaintext&quot;)) {</span>
<a href="#l17.318"></a><span id="l17.318" class="difflineminus">-    // hide &quot;send unencrypted&quot;</span>
<a href="#l17.319"></a><span id="l17.319" class="difflineminus">-    document</span>
<a href="#l17.320"></a><span id="l17.320" class="difflineminus">-      .getElementById(&quot;enigmailUserSelSendEncrypted&quot;)</span>
<a href="#l17.321"></a><span id="l17.321" class="difflineminus">-      .setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.322"></a><span id="l17.322" class="difflineminus">-  }</span>
<a href="#l17.323"></a><span id="l17.323" class="difflineminus">-</span>
<a href="#l17.324"></a><span id="l17.324" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;forUser&quot;)) {</span>
<a href="#l17.325"></a><span id="l17.325" class="difflineminus">-    // display title message for Per-Recipient Rule</span>
<a href="#l17.326"></a><span id="l17.326" class="difflineminus">-    dialogHeaderDesc.firstChild.data = EnigGetString(</span>
<a href="#l17.327"></a><span id="l17.327" class="difflineminus">-      &quot;keysToUse&quot;,</span>
<a href="#l17.328"></a><span id="l17.328" class="difflineminus">-      window.arguments[INPUT].forUser</span>
<a href="#l17.329"></a><span id="l17.329" class="difflineminus">-    );</span>
<a href="#l17.330"></a><span id="l17.330" class="difflineminus">-    dialogHeaderDesc.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l17.331"></a><span id="l17.331" class="difflineminus">-    notFoundCapt.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l17.332"></a><span id="l17.332" class="difflineminus">-  }</span>
<a href="#l17.333"></a><span id="l17.333" class="difflineminus">-</span>
<a href="#l17.334"></a><span id="l17.334" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;,sendlabel=&quot;)) {</span>
<a href="#l17.335"></a><span id="l17.335" class="difflineminus">-    var pos1 = window.arguments[INPUT].options.indexOf(&quot;,sendlabel=&quot;);</span>
<a href="#l17.336"></a><span id="l17.336" class="difflineminus">-    pos1 = window.arguments[INPUT].options.indexOf(&quot;=&quot;, pos1);</span>
<a href="#l17.337"></a><span id="l17.337" class="difflineminus">-    var pos2 = window.arguments[INPUT].options.indexOf(&quot;,&quot;, pos1);</span>
<a href="#l17.338"></a><span id="l17.338" class="difflineminus">-    var acceptButton = document</span>
<a href="#l17.339"></a><span id="l17.339" class="difflineminus">-      .getElementById(&quot;enigmailKeySelectionDlg&quot;)</span>
<a href="#l17.340"></a><span id="l17.340" class="difflineminus">-      .getButton(&quot;accept&quot;);</span>
<a href="#l17.341"></a><span id="l17.341" class="difflineminus">-    acceptButton.setAttribute(</span>
<a href="#l17.342"></a><span id="l17.342" class="difflineminus">-      &quot;label&quot;,</span>
<a href="#l17.343"></a><span id="l17.343" class="difflineminus">-      window.arguments[INPUT].options.substring(pos1 + 1, pos2)</span>
<a href="#l17.344"></a><span id="l17.344" class="difflineminus">-    );</span>
<a href="#l17.345"></a><span id="l17.345" class="difflineminus">-  }</span>
<a href="#l17.346"></a><span id="l17.346" class="difflineminus">-  */</span>
<a href="#l17.347"></a><span id="l17.347" class="difflineminus">-}</span>
<a href="#l17.348"></a><span id="l17.348" class="difflineminus">-</span>
<a href="#l17.349"></a><span id="l17.349" class="difflineminus">-function buildList(refresh) {</span>
<a href="#l17.350"></a><span id="l17.350" class="difflineminus">-  EnigmailLog.DEBUG(&quot;enigmailKeySelection.js: buildList\n&quot;);</span>
<a href="#l17.351"></a><span id="l17.351" class="difflineminus">-</span>
<a href="#l17.352"></a><span id="l17.352" class="difflineminus">-  window.arguments[RESULT].cancelled = true;</span>
<a href="#l17.353"></a><span id="l17.353" class="difflineminus">-</span>
<a href="#l17.354"></a><span id="l17.354" class="difflineminus">-  gAlwaysTrust = EnigGetPref(&quot;acceptedKeys&quot;) == 1;</span>
<a href="#l17.355"></a><span id="l17.355" class="difflineminus">-</span>
<a href="#l17.356"></a><span id="l17.356" class="difflineminus">-  var secretOnly = window.arguments[INPUT].options.includes(&quot;private&quot;);</span>
<a href="#l17.357"></a><span id="l17.357" class="difflineminus">-  var hideExpired = window.arguments[INPUT].options.includes(&quot;hidexpired&quot;);</span>
<a href="#l17.358"></a><span id="l17.358" class="difflineminus">-  gAllowExpired = window.arguments[INPUT].options.includes(&quot;allowexpired&quot;);</span>
<a href="#l17.359"></a><span id="l17.359" class="difflineminus">-</span>
<a href="#l17.360"></a><span id="l17.360" class="difflineminus">-  if (window.arguments[INPUT].options.includes(&quot;trustallkeys&quot;)) {</span>
<a href="#l17.361"></a><span id="l17.361" class="difflineminus">-    gAlwaysTrust = true;</span>
<a href="#l17.362"></a><span id="l17.362" class="difflineminus">-  }</span>
<a href="#l17.363"></a><span id="l17.363" class="difflineminus">-</span>
<a href="#l17.364"></a><span id="l17.364" class="difflineminus">-  var aUserList = getKeyList(secretOnly, refresh);</span>
<a href="#l17.365"></a><span id="l17.365" class="difflineminus">-</span>
<a href="#l17.366"></a><span id="l17.366" class="difflineminus">-  if (!aUserList) {</span>
<a href="#l17.367"></a><span id="l17.367" class="difflineminus">-    return;</span>
<a href="#l17.368"></a><span id="l17.368" class="difflineminus">-  }</span>
<a href="#l17.369"></a><span id="l17.369" class="difflineminus">-  var uidNotValid;</span>
<a href="#l17.370"></a><span id="l17.370" class="difflineminus">-  if (gAlwaysTrust) {</span>
<a href="#l17.371"></a><span id="l17.371" class="difflineminus">-    uidNotValid = &quot;&quot;;</span>
<a href="#l17.372"></a><span id="l17.372" class="difflineminus">-  } else {</span>
<a href="#l17.373"></a><span id="l17.373" class="difflineminus">-    uidNotValid = &quot;o-qn&quot;;</span>
<a href="#l17.374"></a><span id="l17.374" class="difflineminus">-  }</span>
<a href="#l17.375"></a><span id="l17.375" class="difflineminus">-</span>
<a href="#l17.376"></a><span id="l17.376" class="difflineminus">-  gUserList = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.377"></a><span id="l17.377" class="difflineminus">-  gUserList.currentItem = null;</span>
<a href="#l17.378"></a><span id="l17.378" class="difflineminus">-</span>
<a href="#l17.379"></a><span id="l17.379" class="difflineminus">-  try {</span>
<a href="#l17.380"></a><span id="l17.380" class="difflineminus">-    prepareDialog(secretOnly);</span>
<a href="#l17.381"></a><span id="l17.381" class="difflineminus">-  } catch (ex) {</span>
<a href="#l17.382"></a><span id="l17.382" class="difflineminus">-    EnigmailLog.DEBUG(&quot;EXCEPTION: &quot; + ex.toString() + &quot;\n&quot;);</span>
<a href="#l17.383"></a><span id="l17.383" class="difflineminus">-  }</span>
<a href="#l17.384"></a><span id="l17.384" class="difflineminus">-</span>
<a href="#l17.385"></a><span id="l17.385" class="difflineminus">-  var i;</span>
<a href="#l17.386"></a><span id="l17.386" class="difflineminus">-  var j;</span>
<a href="#l17.387"></a><span id="l17.387" class="difflineminus">-  var toKeys = &quot;&quot;;</span>
<a href="#l17.388"></a><span id="l17.388" class="difflineminus">-  try {</span>
<a href="#l17.389"></a><span id="l17.389" class="difflineminus">-    if (typeof window.arguments[INPUT].toKeys == &quot;string&quot;) {</span>
<a href="#l17.390"></a><span id="l17.390" class="difflineminus">-      toKeys = window.arguments[INPUT].toKeys;</span>
<a href="#l17.391"></a><span id="l17.391" class="difflineminus">-    }</span>
<a href="#l17.392"></a><span id="l17.392" class="difflineminus">-  } catch (ex) {}</span>
<a href="#l17.393"></a><span id="l17.393" class="difflineminus">-</span>
<a href="#l17.394"></a><span id="l17.394" class="difflineminus">-  var invalidAddr = &quot;&quot;;</span>
<a href="#l17.395"></a><span id="l17.395" class="difflineminus">-  try {</span>
<a href="#l17.396"></a><span id="l17.396" class="difflineminus">-    // the test below had &quot;&amp;&amp; !refresh&quot; probably not to list invalid keys</span>
<a href="#l17.397"></a><span id="l17.397" class="difflineminus">-    // anymore after refreshing.</span>
<a href="#l17.398"></a><span id="l17.398" class="difflineminus">-    // However, that's confusing because with the after refreshing keys</span>
<a href="#l17.399"></a><span id="l17.399" class="difflineminus">-    // with no change in the key set, different items are selected.</span>
<a href="#l17.400"></a><span id="l17.400" class="difflineminus">-    // Thus, this is disabled until there is a reprocessing of validity.</span>
<a href="#l17.401"></a><span id="l17.401" class="difflineminus">-    if (typeof window.arguments[INPUT].invalidAddr == &quot;string&quot;) {</span>
<a href="#l17.402"></a><span id="l17.402" class="difflineminus">-      invalidAddr = &quot; &quot; + window.arguments[INPUT].invalidAddr + &quot; &quot;;</span>
<a href="#l17.403"></a><span id="l17.403" class="difflineminus">-    }</span>
<a href="#l17.404"></a><span id="l17.404" class="difflineminus">-  } catch (ex) {}</span>
<a href="#l17.405"></a><span id="l17.405" class="difflineminus">-</span>
<a href="#l17.406"></a><span id="l17.406" class="difflineminus">-  // sort out PGP keys in toAddr</span>
<a href="#l17.407"></a><span id="l17.407" class="difflineminus">-  var toAddrList = getToAddrList();</span>
<a href="#l17.408"></a><span id="l17.408" class="difflineminus">-  for (i = 0; i &lt; toAddrList.length; i++) {</span>
<a href="#l17.409"></a><span id="l17.409" class="difflineminus">-    if (toAddrList[i].search(/^0x([0-9A-Fa-f]{8}|[0-9A-Fa-f]{16})$/) &gt;= 0) {</span>
<a href="#l17.410"></a><span id="l17.410" class="difflineminus">-      var newKey = toAddrList.splice(i, 1);</span>
<a href="#l17.411"></a><span id="l17.411" class="difflineminus">-      toKeys += &quot; &quot; + newKey;</span>
<a href="#l17.412"></a><span id="l17.412" class="difflineminus">-      i--;</span>
<a href="#l17.413"></a><span id="l17.413" class="difflineminus">-    }</span>
<a href="#l17.414"></a><span id="l17.414" class="difflineminus">-  }</span>
<a href="#l17.415"></a><span id="l17.415" class="difflineminus">-  var toAddr = &quot;&lt;&quot; + toAddrList.join(&quot;&gt;&lt;&quot;) + &quot;&gt;&quot;;</span>
<a href="#l17.416"></a><span id="l17.416" class="difflineminus">-</span>
<a href="#l17.417"></a><span id="l17.417" class="difflineminus">-  var d = new Date();</span>
<a href="#l17.418"></a><span id="l17.418" class="difflineminus">-  var now = d.valueOf() / 1000;</span>
<a href="#l17.419"></a><span id="l17.419" class="difflineminus">-  var aValidUsers = [];</span>
<a href="#l17.420"></a><span id="l17.420" class="difflineminus">-</span>
<a href="#l17.421"></a><span id="l17.421" class="difflineminus">-  var mailAddr, escapedMailAddr;</span>
<a href="#l17.422"></a><span id="l17.422" class="difflineminus">-  var s1;</span>
<a href="#l17.423"></a><span id="l17.423" class="difflineminus">-  // Replace any non-text character c with \\c</span>
<a href="#l17.424"></a><span id="l17.424" class="difflineminus">-  var escapeRegExp = new RegExp(&quot;([^a-zA-Z0-9])&quot;, &quot;g&quot;);</span>
<a href="#l17.425"></a><span id="l17.425" class="difflineminus">-</span>
<a href="#l17.426"></a><span id="l17.426" class="difflineminus">-  // delete &quot;empty&quot; entries</span>
<a href="#l17.427"></a><span id="l17.427" class="difflineminus">-  for (i = 0; i &lt; aUserList.length; i++) {</span>
<a href="#l17.428"></a><span id="l17.428" class="difflineminus">-    if (typeof aUserList[i].userId != &quot;string&quot;) {</span>
<a href="#l17.429"></a><span id="l17.429" class="difflineminus">-      aUserList.splice(i, 1);</span>
<a href="#l17.430"></a><span id="l17.430" class="difflineminus">-    }</span>
<a href="#l17.431"></a><span id="l17.431" class="difflineminus">-  }</span>
<a href="#l17.432"></a><span id="l17.432" class="difflineminus">-</span>
<a href="#l17.433"></a><span id="l17.433" class="difflineminus">-  let user;</span>
<a href="#l17.434"></a><span id="l17.434" class="difflineminus">-</span>
<a href="#l17.435"></a><span id="l17.435" class="difflineminus">-  // find and activate keys</span>
<a href="#l17.436"></a><span id="l17.436" class="difflineminus">-  try {</span>
<a href="#l17.437"></a><span id="l17.437" class="difflineminus">-    for (i = 0; i &lt; aUserList.length; i++) {</span>
<a href="#l17.438"></a><span id="l17.438" class="difflineminus">-      // prepare key obj</span>
<a href="#l17.439"></a><span id="l17.439" class="difflineminus">-      if (aUserList[i].keyUseFor.includes(&quot;D&quot;)) {</span>
<a href="#l17.440"></a><span id="l17.440" class="difflineminus">-        aUserList[i].keyTrust = KEY_DISABLED;</span>
<a href="#l17.441"></a><span id="l17.441" class="difflineminus">-      }</span>
<a href="#l17.442"></a><span id="l17.442" class="difflineminus">-      aUserList[i].subkeyOK =</span>
<a href="#l17.443"></a><span id="l17.443" class="difflineminus">-        aUserList[i].keyUseFor.includes(&quot;e&quot;) || secretOnly;</span>
<a href="#l17.444"></a><span id="l17.444" class="difflineminus">-      aUserList[i].valid = false;</span>
<a href="#l17.445"></a><span id="l17.445" class="difflineminus">-      aUserList[i].uidValid = true;</span>
<a href="#l17.446"></a><span id="l17.446" class="difflineminus">-      aUserList[i].uidMatchInvalid = false; // by default don't match list of invalid emails</span>
<a href="#l17.447"></a><span id="l17.447" class="difflineminus">-</span>
<a href="#l17.448"></a><span id="l17.448" class="difflineminus">-      if (aUserList[i].type === &quot;grp&quot;) {</span>
<a href="#l17.449"></a><span id="l17.449" class="difflineminus">-        // groups</span>
<a href="#l17.450"></a><span id="l17.450" class="difflineminus">-        aUserList[i].valid = true;</span>
<a href="#l17.451"></a><span id="l17.451" class="difflineminus">-        aUserList[i].uidValid = true;</span>
<a href="#l17.452"></a><span id="l17.452" class="difflineminus">-        aUserList[i].subkeyOK = true;</span>
<a href="#l17.453"></a><span id="l17.453" class="difflineminus">-      }</span>
<a href="#l17.454"></a><span id="l17.454" class="difflineminus">-</span>
<a href="#l17.455"></a><span id="l17.455" class="difflineminus">-      for (let s in aUserList[i].subKeys) {</span>
<a href="#l17.456"></a><span id="l17.456" class="difflineminus">-        if (</span>
<a href="#l17.457"></a><span id="l17.457" class="difflineminus">-          aUserList[i].subKeys[s].keyUseFor.includes(&quot;e&quot;) &amp;&amp;</span>
<a href="#l17.458"></a><span id="l17.458" class="difflineminus">-          !KEY_NOT_VALID.includes(aUserList[i].subKeys[s].keyTrust)</span>
<a href="#l17.459"></a><span id="l17.459" class="difflineminus">-        ) {</span>
<a href="#l17.460"></a><span id="l17.460" class="difflineminus">-          aUserList[i].subkeyOK = true;</span>
<a href="#l17.461"></a><span id="l17.461" class="difflineminus">-        }</span>
<a href="#l17.462"></a><span id="l17.462" class="difflineminus">-      }</span>
<a href="#l17.463"></a><span id="l17.463" class="difflineminus">-</span>
<a href="#l17.464"></a><span id="l17.464" class="difflineminus">-      // work on key obj</span>
<a href="#l17.465"></a><span id="l17.465" class="difflineminus">-</span>
<a href="#l17.466"></a><span id="l17.466" class="difflineminus">-      var toKeyList = toKeys.split(/[, ]+/);</span>
<a href="#l17.467"></a><span id="l17.467" class="difflineminus">-</span>
<a href="#l17.468"></a><span id="l17.468" class="difflineminus">-      aUserList[i].activeState = gAllowExpired ? 0 : 2; // default: not activated/activateable</span>
<a href="#l17.469"></a><span id="l17.469" class="difflineminus">-      if (aUserList[i].keyTrust != KEY_IS_GROUP) {</span>
<a href="#l17.470"></a><span id="l17.470" class="difflineminus">-        // handling of &quot;normal&quot; keys</span>
<a href="#l17.471"></a><span id="l17.471" class="difflineminus">-</span>
<a href="#l17.472"></a><span id="l17.472" class="difflineminus">-        mailAddr = stripEmailFromKey(aUserList[i].userId);</span>
<a href="#l17.473"></a><span id="l17.473" class="difflineminus">-</span>
<a href="#l17.474"></a><span id="l17.474" class="difflineminus">-        if (</span>
<a href="#l17.475"></a><span id="l17.475" class="difflineminus">-          mailAddr != EMPTY_UID &amp;&amp;</span>
<a href="#l17.476"></a><span id="l17.476" class="difflineminus">-          invalidAddr.includes(&quot; &quot; + mailAddr + &quot; &quot;)</span>
<a href="#l17.477"></a><span id="l17.477" class="difflineminus">-        ) {</span>
<a href="#l17.478"></a><span id="l17.478" class="difflineminus">-          aUserList[i].uidMatchInvalid = true; // found matching but invalid email</span>
<a href="#l17.479"></a><span id="l17.479" class="difflineminus">-        }</span>
<a href="#l17.480"></a><span id="l17.480" class="difflineminus">-        if (</span>
<a href="#l17.481"></a><span id="l17.481" class="difflineminus">-          (!aUserList[i].keyTrust ||</span>
<a href="#l17.482"></a><span id="l17.482" class="difflineminus">-            !KEY_NOT_VALID.includes(aUserList[i].keyTrust)) &amp;&amp;</span>
<a href="#l17.483"></a><span id="l17.483" class="difflineminus">-          aUserList[i].subkeyOK &amp;&amp;</span>
<a href="#l17.484"></a><span id="l17.484" class="difflineminus">-          (aUserList[i].expiryTime &lt;= 0 || aUserList[i].expiryTime &gt;= now)</span>
<a href="#l17.485"></a><span id="l17.485" class="difflineminus">-        ) {</span>
<a href="#l17.486"></a><span id="l17.486" class="difflineminus">-          // key still valid</span>
<a href="#l17.487"></a><span id="l17.487" class="difflineminus">-          aUserList[i].valid = true;</span>
<a href="#l17.488"></a><span id="l17.488" class="difflineminus">-          escapedMailAddr = mailAddr.replace(escapeRegExp, &quot;\\$1&quot;);</span>
<a href="#l17.489"></a><span id="l17.489" class="difflineminus">-</span>
<a href="#l17.490"></a><span id="l17.490" class="difflineminus">-          s1 = new RegExp(&quot;&lt;&quot; + escapedMailAddr + &quot;&gt;&quot;, &quot;i&quot;);</span>
<a href="#l17.491"></a><span id="l17.491" class="difflineminus">-          if (mailAddr != EMPTY_UID) {</span>
<a href="#l17.492"></a><span id="l17.492" class="difflineminus">-            if (!invalidAddr.includes(&quot; &quot; + mailAddr + &quot; &quot;)) {</span>
<a href="#l17.493"></a><span id="l17.493" class="difflineminus">-              aValidUsers.push(mailAddr);</span>
<a href="#l17.494"></a><span id="l17.494" class="difflineminus">-              aUserList[i].activeState = toAddr.search(s1) &gt;= 0 ? 1 : 0;</span>
<a href="#l17.495"></a><span id="l17.495" class="difflineminus">-            } else {</span>
<a href="#l17.496"></a><span id="l17.496" class="difflineminus">-              // mail address found as invalid address: marks that to sort them to the beginning</span>
<a href="#l17.497"></a><span id="l17.497" class="difflineminus">-              aUserList[i].uidMatchInvalid = true;</span>
<a href="#l17.498"></a><span id="l17.498" class="difflineminus">-              aUserList[i].uidValid = false;</span>
<a href="#l17.499"></a><span id="l17.499" class="difflineminus">-              aUserList[i].activeState = 0;</span>
<a href="#l17.500"></a><span id="l17.500" class="difflineminus">-            }</span>
<a href="#l17.501"></a><span id="l17.501" class="difflineminus">-          } else {</span>
<a href="#l17.502"></a><span id="l17.502" class="difflineminus">-            aUserList[i].uidValid = false;</span>
<a href="#l17.503"></a><span id="l17.503" class="difflineminus">-            aUserList[i].activeState = 0;</span>
<a href="#l17.504"></a><span id="l17.504" class="difflineminus">-          }</span>
<a href="#l17.505"></a><span id="l17.505" class="difflineminus">-          if (aUserList[i].activeState === 0 &amp;&amp; toKeys.length &gt; 0) {</span>
<a href="#l17.506"></a><span id="l17.506" class="difflineminus">-            // Now loop through toKeyList and search for matching keyIds</span>
<a href="#l17.507"></a><span id="l17.507" class="difflineminus">-            for (j = 0; j &lt; toKeyList.length; j++) {</span>
<a href="#l17.508"></a><span id="l17.508" class="difflineminus">-              if (toKeyList[j].length &gt; 0) {</span>
<a href="#l17.509"></a><span id="l17.509" class="difflineminus">-                if (</span>
<a href="#l17.510"></a><span id="l17.510" class="difflineminus">-                  EnigmailKey.compareKeyIds(aUserList[i].keyId, toKeyList[j])</span>
<a href="#l17.511"></a><span id="l17.511" class="difflineminus">-                ) {</span>
<a href="#l17.512"></a><span id="l17.512" class="difflineminus">-                  aUserList[i].activeState = 1;</span>
<a href="#l17.513"></a><span id="l17.513" class="difflineminus">-                }</span>
<a href="#l17.514"></a><span id="l17.514" class="difflineminus">-              }</span>
<a href="#l17.515"></a><span id="l17.515" class="difflineminus">-            }</span>
<a href="#l17.516"></a><span id="l17.516" class="difflineminus">-          }</span>
<a href="#l17.517"></a><span id="l17.517" class="difflineminus">-        }</span>
<a href="#l17.518"></a><span id="l17.518" class="difflineminus">-      } else {</span>
<a href="#l17.519"></a><span id="l17.519" class="difflineminus">-        // special handling for gpg groups</span>
<a href="#l17.520"></a><span id="l17.520" class="difflineminus">-        mailAddr = stripEmailFromKey(aUserList[i].userId);</span>
<a href="#l17.521"></a><span id="l17.521" class="difflineminus">-        aValidUsers.push(mailAddr);</span>
<a href="#l17.522"></a><span id="l17.522" class="difflineminus">-        aUserList[i].valid = true;</span>
<a href="#l17.523"></a><span id="l17.523" class="difflineminus">-        aUserList[i].uidValid = true;</span>
<a href="#l17.524"></a><span id="l17.524" class="difflineminus">-        if (toKeys.length &gt; 0) {</span>
<a href="#l17.525"></a><span id="l17.525" class="difflineminus">-          aUserList[i].activeState = toKeys.includes(</span>
<a href="#l17.526"></a><span id="l17.526" class="difflineminus">-            &quot;GROUP:&quot; + aUserList[i].keyId + &quot;,&quot;</span>
<a href="#l17.527"></a><span id="l17.527" class="difflineminus">-          )</span>
<a href="#l17.528"></a><span id="l17.528" class="difflineminus">-            ? 1</span>
<a href="#l17.529"></a><span id="l17.529" class="difflineminus">-            : 0;</span>
<a href="#l17.530"></a><span id="l17.530" class="difflineminus">-        } else {</span>
<a href="#l17.531"></a><span id="l17.531" class="difflineminus">-          aUserList[i].activeState = 0;</span>
<a href="#l17.532"></a><span id="l17.532" class="difflineminus">-        }</span>
<a href="#l17.533"></a><span id="l17.533" class="difflineminus">-      }</span>
<a href="#l17.534"></a><span id="l17.534" class="difflineminus">-</span>
<a href="#l17.535"></a><span id="l17.535" class="difflineminus">-      if (!hideExpired || aUserList[i].activeState &lt; 2) {</span>
<a href="#l17.536"></a><span id="l17.536" class="difflineminus">-        if (</span>
<a href="#l17.537"></a><span id="l17.537" class="difflineminus">-          aUserList[i].keyTrust != KEY_IS_GROUP &amp;&amp;</span>
<a href="#l17.538"></a><span id="l17.538" class="difflineminus">-          aUserList[i].hasSubUserIds()</span>
<a href="#l17.539"></a><span id="l17.539" class="difflineminus">-        ) {</span>
<a href="#l17.540"></a><span id="l17.540" class="difflineminus">-          for (user = 1; user &lt; aUserList[i].userIds.length; user++) {</span>
<a href="#l17.541"></a><span id="l17.541" class="difflineminus">-            if (!KEY_NOT_VALID.includes(aUserList[i].userIds[user].keyTrust)) {</span>
<a href="#l17.542"></a><span id="l17.542" class="difflineminus">-              if (aUserList[i].activeState &lt; 2 || gAllowExpired) {</span>
<a href="#l17.543"></a><span id="l17.543" class="difflineminus">-                // add uid's for valid keys</span>
<a href="#l17.544"></a><span id="l17.544" class="difflineminus">-                mailAddr = stripEmailFromKey(aUserList[i].userIds[user].userId);</span>
<a href="#l17.545"></a><span id="l17.545" class="difflineminus">-                if (</span>
<a href="#l17.546"></a><span id="l17.546" class="difflineminus">-                  !uidNotValid.includes(aUserList[i].userIds[user].keyTrust)</span>
<a href="#l17.547"></a><span id="l17.547" class="difflineminus">-                ) {</span>
<a href="#l17.548"></a><span id="l17.548" class="difflineminus">-                  aValidUsers.push(mailAddr);</span>
<a href="#l17.549"></a><span id="l17.549" class="difflineminus">-                  aUserList[i].valid = true;</span>
<a href="#l17.550"></a><span id="l17.550" class="difflineminus">-                  escapedMailAddr = mailAddr.replace(escapeRegExp, &quot;\\$1&quot;);</span>
<a href="#l17.551"></a><span id="l17.551" class="difflineminus">-                  s1 = new RegExp(&quot;&lt;&quot; + escapedMailAddr + &quot;&gt;&quot;, &quot;i&quot;);</span>
<a href="#l17.552"></a><span id="l17.552" class="difflineminus">-                  if (mailAddr != EMPTY_UID &amp;&amp; toAddr.search(s1) &gt;= 0) {</span>
<a href="#l17.553"></a><span id="l17.553" class="difflineminus">-                    aUserList[i].activeState = 1;</span>
<a href="#l17.554"></a><span id="l17.554" class="difflineminus">-                  }</span>
<a href="#l17.555"></a><span id="l17.555" class="difflineminus">-                }</span>
<a href="#l17.556"></a><span id="l17.556" class="difflineminus">-              }</span>
<a href="#l17.557"></a><span id="l17.557" class="difflineminus">-            }</span>
<a href="#l17.558"></a><span id="l17.558" class="difflineminus">-          }</span>
<a href="#l17.559"></a><span id="l17.559" class="difflineminus">-        }</span>
<a href="#l17.560"></a><span id="l17.560" class="difflineminus">-      }</span>
<a href="#l17.561"></a><span id="l17.561" class="difflineminus">-    }</span>
<a href="#l17.562"></a><span id="l17.562" class="difflineminus">-  } catch (ex) {</span>
<a href="#l17.563"></a><span id="l17.563" class="difflineminus">-    EnigmailLog.ERROR(</span>
<a href="#l17.564"></a><span id="l17.564" class="difflineminus">-      &quot;enigmailKeySelection.js: ERROR in buildList: &quot; +</span>
<a href="#l17.565"></a><span id="l17.565" class="difflineminus">-        ex.toString() +</span>
<a href="#l17.566"></a><span id="l17.566" class="difflineminus">-        &quot;\n&quot; +</span>
<a href="#l17.567"></a><span id="l17.567" class="difflineminus">-        ex.stack +</span>
<a href="#l17.568"></a><span id="l17.568" class="difflineminus">-        &quot;\n&quot;</span>
<a href="#l17.569"></a><span id="l17.569" class="difflineminus">-    );</span>
<a href="#l17.570"></a><span id="l17.570" class="difflineminus">-  }</span>
<a href="#l17.571"></a><span id="l17.571" class="difflineminus">-</span>
<a href="#l17.572"></a><span id="l17.572" class="difflineminus">-  // sort items according to sorting criterion</span>
<a href="#l17.573"></a><span id="l17.573" class="difflineminus">-  aUserList.sort(sortKeys);</span>
<a href="#l17.574"></a><span id="l17.574" class="difflineminus">-  buildTreeView(aUserList, hideExpired, secretOnly);</span>
<a href="#l17.575"></a><span id="l17.575" class="difflineminus">-  buildNotFoundKeys(aUserList, aValidUsers, toAddrList, toKeys);</span>
<a href="#l17.576"></a><span id="l17.576" class="difflineminus">-</span>
<a href="#l17.577"></a><span id="l17.577" class="difflineminus">-  EnigmailLog.DEBUG(&quot;  &lt;=== buildList()\n&quot;);</span>
<a href="#l17.578"></a><span id="l17.578" class="difflineminus">-}</span>
<a href="#l17.579"></a><span id="l17.579" class="difflineminus">-</span>
<a href="#l17.580"></a><span id="l17.580" class="difflineminus">-/**</span>
<a href="#l17.581"></a><span id="l17.581" class="difflineminus">- * Build up tree view for displaying keys</span>
<a href="#l17.582"></a><span id="l17.582" class="difflineminus">- */</span>
<a href="#l17.583"></a><span id="l17.583" class="difflineminus">-function buildTreeView(aUserList, hideExpired, secretOnly) {</span>
<a href="#l17.584"></a><span id="l17.584" class="difflineminus">-  EnigmailLog.DEBUG(&quot;enigmailKeySelection.js: buildTreeView\n&quot;);</span>
<a href="#l17.585"></a><span id="l17.585" class="difflineminus">-</span>
<a href="#l17.586"></a><span id="l17.586" class="difflineminus">-  let i;</span>
<a href="#l17.587"></a><span id="l17.587" class="difflineminus">-  let treeChildren = gUserList.getElementsByAttribute(</span>
<a href="#l17.588"></a><span id="l17.588" class="difflineminus">-    &quot;id&quot;,</span>
<a href="#l17.589"></a><span id="l17.589" class="difflineminus">-    &quot;enigmailUserIdSelectionChildren&quot;</span>
<a href="#l17.590"></a><span id="l17.590" class="difflineminus">-  )[0];</span>
<a href="#l17.591"></a><span id="l17.591" class="difflineminus">-</span>
<a href="#l17.592"></a><span id="l17.592" class="difflineminus">-  for (i = 0; i &lt; aUserList.length; i++) {</span>
<a href="#l17.593"></a><span id="l17.593" class="difflineminus">-    var treeItem = null;</span>
<a href="#l17.594"></a><span id="l17.594" class="difflineminus">-    if (!hideExpired || aUserList[i].activeState &lt; 2) {</span>
<a href="#l17.595"></a><span id="l17.595" class="difflineminus">-      // do not show if expired keys are hidden</span>
<a href="#l17.596"></a><span id="l17.596" class="difflineminus">-      if (secretOnly) {</span>
<a href="#l17.597"></a><span id="l17.597" class="difflineminus">-        treeItem = enigUserSelCreateRow(</span>
<a href="#l17.598"></a><span id="l17.598" class="difflineminus">-          aUserList[i],</span>
<a href="#l17.599"></a><span id="l17.599" class="difflineminus">-          aUserList[i].activeState,</span>
<a href="#l17.600"></a><span id="l17.600" class="difflineminus">-          aUserList[i].userId,</span>
<a href="#l17.601"></a><span id="l17.601" class="difflineminus">-          aUserList[i].keyId,</span>
<a href="#l17.602"></a><span id="l17.602" class="difflineminus">-          aUserList[i].created,</span>
<a href="#l17.603"></a><span id="l17.603" class="difflineminus">-          &quot;&quot;,</span>
<a href="#l17.604"></a><span id="l17.604" class="difflineminus">-          true</span>
<a href="#l17.605"></a><span id="l17.605" class="difflineminus">-        );</span>
<a href="#l17.606"></a><span id="l17.606" class="difflineminus">-      } else {</span>
<a href="#l17.607"></a><span id="l17.607" class="difflineminus">-        treeItem = enigUserSelCreateRow(</span>
<a href="#l17.608"></a><span id="l17.608" class="difflineminus">-          aUserList[i],</span>
<a href="#l17.609"></a><span id="l17.609" class="difflineminus">-          aUserList[i].activeState,</span>
<a href="#l17.610"></a><span id="l17.610" class="difflineminus">-          aUserList[i].userId,</span>
<a href="#l17.611"></a><span id="l17.611" class="difflineminus">-          aUserList[i].keyId,</span>
<a href="#l17.612"></a><span id="l17.612" class="difflineminus">-          aUserList[i].expiry,</span>
<a href="#l17.613"></a><span id="l17.613" class="difflineminus">-          aUserList[i].keyTrust,</span>
<a href="#l17.614"></a><span id="l17.614" class="difflineminus">-          aUserList[i].uidValid</span>
<a href="#l17.615"></a><span id="l17.615" class="difflineminus">-        );</span>
<a href="#l17.616"></a><span id="l17.616" class="difflineminus">-      }</span>
<a href="#l17.617"></a><span id="l17.617" class="difflineminus">-      if (aUserList[i].hasSubUserIds()) {</span>
<a href="#l17.618"></a><span id="l17.618" class="difflineminus">-        var subChildren = document.createXULElement(&quot;treechildren&quot;);</span>
<a href="#l17.619"></a><span id="l17.619" class="difflineminus">-        for (let user = 1; user &lt; aUserList[i].userIds.length; user++) {</span>
<a href="#l17.620"></a><span id="l17.620" class="difflineminus">-          if (!KEY_NOT_VALID.includes(aUserList[i].userIds[user].keyTrust)) {</span>
<a href="#l17.621"></a><span id="l17.621" class="difflineminus">-            var subItem = enigUserSelCreateRow(</span>
<a href="#l17.622"></a><span id="l17.622" class="difflineminus">-              aUserList[i],</span>
<a href="#l17.623"></a><span id="l17.623" class="difflineminus">-              -1,</span>
<a href="#l17.624"></a><span id="l17.624" class="difflineminus">-              aUserList[i].userIds[user].userId,</span>
<a href="#l17.625"></a><span id="l17.625" class="difflineminus">-              &quot;&quot;,</span>
<a href="#l17.626"></a><span id="l17.626" class="difflineminus">-              &quot;&quot;,</span>
<a href="#l17.627"></a><span id="l17.627" class="difflineminus">-              aUserList[i].userIds[user].keyTrust,</span>
<a href="#l17.628"></a><span id="l17.628" class="difflineminus">-              true</span>
<a href="#l17.629"></a><span id="l17.629" class="difflineminus">-            );</span>
<a href="#l17.630"></a><span id="l17.630" class="difflineminus">-            subChildren.appendChild(subItem);</span>
<a href="#l17.631"></a><span id="l17.631" class="difflineminus">-          }</span>
<a href="#l17.632"></a><span id="l17.632" class="difflineminus">-        }</span>
<a href="#l17.633"></a><span id="l17.633" class="difflineminus">-        if (subChildren.hasChildNodes()) {</span>
<a href="#l17.634"></a><span id="l17.634" class="difflineminus">-          treeItem.setAttribute(&quot;container&quot;, &quot;true&quot;);</span>
<a href="#l17.635"></a><span id="l17.635" class="difflineminus">-          treeItem.appendChild(subChildren);</span>
<a href="#l17.636"></a><span id="l17.636" class="difflineminus">-        }</span>
<a href="#l17.637"></a><span id="l17.637" class="difflineminus">-      }</span>
<a href="#l17.638"></a><span id="l17.638" class="difflineminus">-    }</span>
<a href="#l17.639"></a><span id="l17.639" class="difflineminus">-    if (treeItem) {</span>
<a href="#l17.640"></a><span id="l17.640" class="difflineminus">-      treeChildren.appendChild(treeItem);</span>
<a href="#l17.641"></a><span id="l17.641" class="difflineminus">-    }</span>
<a href="#l17.642"></a><span id="l17.642" class="difflineminus">-  }</span>
<a href="#l17.643"></a><span id="l17.643" class="difflineminus">-}</span>
<a href="#l17.644"></a><span id="l17.644" class="difflineminus">-</span>
<a href="#l17.645"></a><span id="l17.645" class="difflineminus">-/**</span>
<a href="#l17.646"></a><span id="l17.646" class="difflineminus">- * Build up list of not found recipients</span>
<a href="#l17.647"></a><span id="l17.647" class="difflineminus">- */</span>
<a href="#l17.648"></a><span id="l17.648" class="difflineminus">-</span>
<a href="#l17.649"></a><span id="l17.649" class="difflineminus">-function buildNotFoundKeys(aUserList, aValidUsers, toAddrList, toKeys) {</span>
<a href="#l17.650"></a><span id="l17.650" class="difflineminus">-  EnigmailLog.DEBUG(&quot;enigmailKeySelection.js: buildNotFoundKeys\n&quot;);</span>
<a href="#l17.651"></a><span id="l17.651" class="difflineminus">-</span>
<a href="#l17.652"></a><span id="l17.652" class="difflineminus">-  gKeysNotFound = [];</span>
<a href="#l17.653"></a><span id="l17.653" class="difflineminus">-  let i, j;</span>
<a href="#l17.654"></a><span id="l17.654" class="difflineminus">-  for (i = 0; i &lt; toAddrList.length; i++) {</span>
<a href="#l17.655"></a><span id="l17.655" class="difflineminus">-    if (toAddrList[i].length &gt; 0) {</span>
<a href="#l17.656"></a><span id="l17.656" class="difflineminus">-      let found = false;</span>
<a href="#l17.657"></a><span id="l17.657" class="difflineminus">-      for (j = 0; j &lt; aValidUsers.length; j++) {</span>
<a href="#l17.658"></a><span id="l17.658" class="difflineminus">-        EnigmailLog.DEBUG(</span>
<a href="#l17.659"></a><span id="l17.659" class="difflineminus">-          &quot;enigmailKeySelection.js: buildNotFoundKeys: comparing aValidUsers member &quot; +</span>
<a href="#l17.660"></a><span id="l17.660" class="difflineminus">-            aValidUsers[j].toLowerCase() +</span>
<a href="#l17.661"></a><span id="l17.661" class="difflineminus">-            &quot; and toAddrList member &quot; +</span>
<a href="#l17.662"></a><span id="l17.662" class="difflineminus">-            toAddrList[i].toLowerCase() +</span>
<a href="#l17.663"></a><span id="l17.663" class="difflineminus">-            &quot;\n&quot;</span>
<a href="#l17.664"></a><span id="l17.664" class="difflineminus">-        );</span>
<a href="#l17.665"></a><span id="l17.665" class="difflineminus">-        if (aValidUsers[j].toLowerCase() == toAddrList[i].toLowerCase()) {</span>
<a href="#l17.666"></a><span id="l17.666" class="difflineminus">-          EnigmailLog.DEBUG(</span>
<a href="#l17.667"></a><span id="l17.667" class="difflineminus">-            &quot;enigmailKeySelection.js: buildNotFoundKeys: aValidUsers member matches toAddrList member...\n&quot;</span>
<a href="#l17.668"></a><span id="l17.668" class="difflineminus">-          );</span>
<a href="#l17.669"></a><span id="l17.669" class="difflineminus">-          found = true;</span>
<a href="#l17.670"></a><span id="l17.670" class="difflineminus">-          break; // the inner loop</span>
<a href="#l17.671"></a><span id="l17.671" class="difflineminus">-        }</span>
<a href="#l17.672"></a><span id="l17.672" class="difflineminus">-      }</span>
<a href="#l17.673"></a><span id="l17.673" class="difflineminus">-      if (!found) {</span>
<a href="#l17.674"></a><span id="l17.674" class="difflineminus">-        EnigmailLog.DEBUG(</span>
<a href="#l17.675"></a><span id="l17.675" class="difflineminus">-          &quot;enigmailKeySelection.js: buildNotFoundKeys: not found &quot; +</span>
<a href="#l17.676"></a><span id="l17.676" class="difflineminus">-            toAddrList[i] +</span>
<a href="#l17.677"></a><span id="l17.677" class="difflineminus">-            &quot;\n&quot;</span>
<a href="#l17.678"></a><span id="l17.678" class="difflineminus">-        );</span>
<a href="#l17.679"></a><span id="l17.679" class="difflineminus">-        gKeysNotFound.push(toAddrList[i]);</span>
<a href="#l17.680"></a><span id="l17.680" class="difflineminus">-      }</span>
<a href="#l17.681"></a><span id="l17.681" class="difflineminus">-    }</span>
<a href="#l17.682"></a><span id="l17.682" class="difflineminus">-  }</span>
<a href="#l17.683"></a><span id="l17.683" class="difflineminus">-  var toKeyList = toKeys.split(/[, ]+/);</span>
<a href="#l17.684"></a><span id="l17.684" class="difflineminus">-  for (i = 0; i &lt; toKeyList.length; i++) {</span>
<a href="#l17.685"></a><span id="l17.685" class="difflineminus">-    if (toKeyList[i].length &gt; 0) {</span>
<a href="#l17.686"></a><span id="l17.686" class="difflineminus">-      let found = false;</span>
<a href="#l17.687"></a><span id="l17.687" class="difflineminus">-      for (j = 0; j &lt; aUserList.length; j++) {</span>
<a href="#l17.688"></a><span id="l17.688" class="difflineminus">-        EnigmailLog.DEBUG(</span>
<a href="#l17.689"></a><span id="l17.689" class="difflineminus">-          &quot;enigmailKeySelection.js: buildNotFoundKeys: comparing toKeyList member &quot; +</span>
<a href="#l17.690"></a><span id="l17.690" class="difflineminus">-            toKeyList[i] +</span>
<a href="#l17.691"></a><span id="l17.691" class="difflineminus">-            &quot; and aUserList member 0x&quot; +</span>
<a href="#l17.692"></a><span id="l17.692" class="difflineminus">-            aUserList[j].keyId +</span>
<a href="#l17.693"></a><span id="l17.693" class="difflineminus">-            &quot;\n&quot;</span>
<a href="#l17.694"></a><span id="l17.694" class="difflineminus">-        );</span>
<a href="#l17.695"></a><span id="l17.695" class="difflineminus">-        if (</span>
<a href="#l17.696"></a><span id="l17.696" class="difflineminus">-          aUserList[j].valid &amp;&amp;</span>
<a href="#l17.697"></a><span id="l17.697" class="difflineminus">-          EnigmailKey.compareKeyIds(aUserList[j].keyId, toKeyList[i])</span>
<a href="#l17.698"></a><span id="l17.698" class="difflineminus">-        ) {</span>
<a href="#l17.699"></a><span id="l17.699" class="difflineminus">-          EnigmailLog.DEBUG(</span>
<a href="#l17.700"></a><span id="l17.700" class="difflineminus">-            &quot;enigmailKeySelection.js: buildNotFoundKeys: aUserList member is valid and key Id matches...\n&quot;</span>
<a href="#l17.701"></a><span id="l17.701" class="difflineminus">-          );</span>
<a href="#l17.702"></a><span id="l17.702" class="difflineminus">-          found = true;</span>
<a href="#l17.703"></a><span id="l17.703" class="difflineminus">-          break; // the inner loop</span>
<a href="#l17.704"></a><span id="l17.704" class="difflineminus">-        }</span>
<a href="#l17.705"></a><span id="l17.705" class="difflineminus">-      }</span>
<a href="#l17.706"></a><span id="l17.706" class="difflineminus">-      if (!found) {</span>
<a href="#l17.707"></a><span id="l17.707" class="difflineminus">-        EnigmailLog.DEBUG(</span>
<a href="#l17.708"></a><span id="l17.708" class="difflineminus">-          &quot;enigmailKeySelection.js: buildNotFoundKeys: not found &quot; +</span>
<a href="#l17.709"></a><span id="l17.709" class="difflineminus">-            toKeyList[i] +</span>
<a href="#l17.710"></a><span id="l17.710" class="difflineminus">-            &quot;\n&quot;</span>
<a href="#l17.711"></a><span id="l17.711" class="difflineminus">-        );</span>
<a href="#l17.712"></a><span id="l17.712" class="difflineminus">-        gKeysNotFound.push(toKeyList[i]);</span>
<a href="#l17.713"></a><span id="l17.713" class="difflineminus">-      }</span>
<a href="#l17.714"></a><span id="l17.714" class="difflineminus">-    }</span>
<a href="#l17.715"></a><span id="l17.715" class="difflineminus">-  }</span>
<a href="#l17.716"></a><span id="l17.716" class="difflineminus">-}</span>
<a href="#l17.717"></a><span id="l17.717" class="difflineminus">-</span>
<a href="#l17.718"></a><span id="l17.718" class="difflineminus">-// create a (sub) row for the user tree</span>
<a href="#l17.719"></a><span id="l17.719" class="difflineminus">-function enigUserSelCreateRow(</span>
<a href="#l17.720"></a><span id="l17.720" class="difflineminus">-  userObj,</span>
<a href="#l17.721"></a><span id="l17.721" class="difflineminus">-  activeState,</span>
<a href="#l17.722"></a><span id="l17.722" class="difflineminus">-  userId,</span>
<a href="#l17.723"></a><span id="l17.723" class="difflineminus">-  keyValue,</span>
<a href="#l17.724"></a><span id="l17.724" class="difflineminus">-  dateField,</span>
<a href="#l17.725"></a><span id="l17.725" class="difflineminus">-  uidValidityStatus,</span>
<a href="#l17.726"></a><span id="l17.726" class="difflineminus">-  uidValid</span>
<a href="#l17.727"></a><span id="l17.727" class="difflineminus">-) {</span>
<a href="#l17.728"></a><span id="l17.728" class="difflineminus">-  var selectCol = document.createXULElement(&quot;treecell&quot;);</span>
<a href="#l17.729"></a><span id="l17.729" class="difflineminus">-  selectCol.setAttribute(&quot;id&quot;, &quot;indicator&quot;);</span>
<a href="#l17.730"></a><span id="l17.730" class="difflineminus">-  var uidValidityCol = document.createXULElement(&quot;treecell&quot;);</span>
<a href="#l17.731"></a><span id="l17.731" class="difflineminus">-  var expCol = document.createXULElement(&quot;treecell&quot;);</span>
<a href="#l17.732"></a><span id="l17.732" class="difflineminus">-  var userCol = document.createXULElement(&quot;treecell&quot;);</span>
<a href="#l17.733"></a><span id="l17.733" class="difflineminus">-</span>
<a href="#l17.734"></a><span id="l17.734" class="difflineminus">-  userCol.setAttribute(&quot;id&quot;, &quot;name&quot;);</span>
<a href="#l17.735"></a><span id="l17.735" class="difflineminus">-  expCol.setAttribute(&quot;id&quot;, &quot;expiry&quot;);</span>
<a href="#l17.736"></a><span id="l17.736" class="difflineminus">-  uidValidityCol.setAttribute(&quot;id&quot;, &quot;validity&quot;);</span>
<a href="#l17.737"></a><span id="l17.737" class="difflineminus">-</span>
<a href="#l17.738"></a><span id="l17.738" class="difflineminus">-  userCol.setAttribute(&quot;label&quot;, userId);</span>
<a href="#l17.739"></a><span id="l17.739" class="difflineminus">-  expCol.setAttribute(&quot;label&quot;, dateField);</span>
<a href="#l17.740"></a><span id="l17.740" class="difflineminus">-</span>
<a href="#l17.741"></a><span id="l17.741" class="difflineminus">-  var keyCol = document.createXULElement(&quot;treecell&quot;);</span>
<a href="#l17.742"></a><span id="l17.742" class="difflineminus">-  if (userObj.keyTrust != KEY_IS_GROUP) {</span>
<a href="#l17.743"></a><span id="l17.743" class="difflineminus">-    keyCol.setAttribute(&quot;label&quot;, &quot;0x&quot; + keyValue);</span>
<a href="#l17.744"></a><span id="l17.744" class="difflineminus">-  } else {</span>
<a href="#l17.745"></a><span id="l17.745" class="difflineminus">-    keyCol.setAttribute(&quot;label&quot;, EnigGetString(&quot;keyTrust.group&quot;));</span>
<a href="#l17.746"></a><span id="l17.746" class="difflineminus">-  }</span>
<a href="#l17.747"></a><span id="l17.747" class="difflineminus">-  keyCol.setAttribute(&quot;id&quot;, &quot;keyid&quot;);</span>
<a href="#l17.748"></a><span id="l17.748" class="difflineminus">-</span>
<a href="#l17.749"></a><span id="l17.749" class="difflineminus">-  // process validity label</span>
<a href="#l17.750"></a><span id="l17.750" class="difflineminus">-  var validity = EnigGetTrustLabel(uidValidityStatus.charAt(0));</span>
<a href="#l17.751"></a><span id="l17.751" class="difflineminus">-  if (!uidValid) {</span>
<a href="#l17.752"></a><span id="l17.752" class="difflineminus">-    if (validity == &quot;-&quot;) {</span>
<a href="#l17.753"></a><span id="l17.753" class="difflineminus">-      validity =</span>
<a href="#l17.754"></a><span id="l17.754" class="difflineminus">-        &quot;-  (&quot; + EnigGetString(&quot;keyTrust.untrusted&quot;).toUpperCase() + &quot;)&quot;;</span>
<a href="#l17.755"></a><span id="l17.755" class="difflineminus">-    }</span>
<a href="#l17.756"></a><span id="l17.756" class="difflineminus">-  }</span>
<a href="#l17.757"></a><span id="l17.757" class="difflineminus">-  if (</span>
<a href="#l17.758"></a><span id="l17.758" class="difflineminus">-    !userObj.subkeyOK &amp;&amp;</span>
<a href="#l17.759"></a><span id="l17.759" class="difflineminus">-    !KEY_NOT_VALID.includes(uidValidityStatus.charAt(0))</span>
<a href="#l17.760"></a><span id="l17.760" class="difflineminus">-  ) {</span>
<a href="#l17.761"></a><span id="l17.761" class="difflineminus">-    validity = EnigGetString(&quot;keyValid.noSubkey&quot;);</span>
<a href="#l17.762"></a><span id="l17.762" class="difflineminus">-  }</span>
<a href="#l17.763"></a><span id="l17.763" class="difflineminus">-</span>
<a href="#l17.764"></a><span id="l17.764" class="difflineminus">-  // process which row elements to make insensitive</span>
<a href="#l17.765"></a><span id="l17.765" class="difflineminus">-  if (</span>
<a href="#l17.766"></a><span id="l17.766" class="difflineminus">-    (userObj.keyTrust.length &gt; 0 &amp;&amp;</span>
<a href="#l17.767"></a><span id="l17.767" class="difflineminus">-      KEY_NOT_VALID.includes(userObj.keyTrust.charAt(0))) ||</span>
<a href="#l17.768"></a><span id="l17.768" class="difflineminus">-    !userObj.subkeyOK</span>
<a href="#l17.769"></a><span id="l17.769" class="difflineminus">-  ) {</span>
<a href="#l17.770"></a><span id="l17.770" class="difflineminus">-    // disabled/revoked/expired/invalid (sub)keys inactivate whole row</span>
<a href="#l17.771"></a><span id="l17.771" class="difflineminus">-    userCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.772"></a><span id="l17.772" class="difflineminus">-    uidValidityCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.773"></a><span id="l17.773" class="difflineminus">-    expCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.774"></a><span id="l17.774" class="difflineminus">-    keyCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.775"></a><span id="l17.775" class="difflineminus">-    if (!gAllowExpired &amp;&amp; activeState &gt;= 0) {</span>
<a href="#l17.776"></a><span id="l17.776" class="difflineminus">-      activeState = 2;</span>
<a href="#l17.777"></a><span id="l17.777" class="difflineminus">-    }</span>
<a href="#l17.778"></a><span id="l17.778" class="difflineminus">-  } else if (!gAlwaysTrust) {</span>
<a href="#l17.779"></a><span id="l17.779" class="difflineminus">-    if (</span>
<a href="#l17.780"></a><span id="l17.780" class="difflineminus">-      !&quot;mfu&quot;.includes(userObj.keyTrust.charAt(0)) ||</span>
<a href="#l17.781"></a><span id="l17.781" class="difflineminus">-      (uidValidityStatus.length &gt; 0 &amp;&amp;</span>
<a href="#l17.782"></a><span id="l17.782" class="difflineminus">-        &quot;o-qn&quot;.includes(uidValidityStatus.charAt(0)))</span>
<a href="#l17.783"></a><span id="l17.783" class="difflineminus">-    ) {</span>
<a href="#l17.784"></a><span id="l17.784" class="difflineminus">-      // keys with not enough trust have insensitive elements, but are activateable</span>
<a href="#l17.785"></a><span id="l17.785" class="difflineminus">-      userCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.786"></a><span id="l17.786" class="difflineminus">-      uidValidityCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.787"></a><span id="l17.787" class="difflineminus">-      expCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.788"></a><span id="l17.788" class="difflineminus">-      keyCol.setAttribute(&quot;properties&quot;, &quot;enigKeyInactive&quot;);</span>
<a href="#l17.789"></a><span id="l17.789" class="difflineminus">-    }</span>
<a href="#l17.790"></a><span id="l17.790" class="difflineminus">-  }</span>
<a href="#l17.791"></a><span id="l17.791" class="difflineminus">-</span>
<a href="#l17.792"></a><span id="l17.792" class="difflineminus">-  EnigSetActive(selectCol, activeState);</span>
<a href="#l17.793"></a><span id="l17.793" class="difflineminus">-  uidValidityCol.setAttribute(&quot;label&quot;, validity);</span>
<a href="#l17.794"></a><span id="l17.794" class="difflineminus">-  var userRow = document.createXULElement(&quot;treerow&quot;);</span>
<a href="#l17.795"></a><span id="l17.795" class="difflineminus">-  userRow.appendChild(selectCol);</span>
<a href="#l17.796"></a><span id="l17.796" class="difflineminus">-  userRow.appendChild(userCol);</span>
<a href="#l17.797"></a><span id="l17.797" class="difflineminus">-  userRow.appendChild(uidValidityCol);</span>
<a href="#l17.798"></a><span id="l17.798" class="difflineminus">-  userRow.appendChild(expCol);</span>
<a href="#l17.799"></a><span id="l17.799" class="difflineminus">-  userRow.appendChild(keyCol);</span>
<a href="#l17.800"></a><span id="l17.800" class="difflineminus">-  var treeItem = document.createXULElement(&quot;treeitem&quot;);</span>
<a href="#l17.801"></a><span id="l17.801" class="difflineminus">-  if (userObj.keyTrust == KEY_IS_GROUP) {</span>
<a href="#l17.802"></a><span id="l17.802" class="difflineminus">-    treeItem.setAttribute(&quot;id&quot;, &quot;GROUP:&quot; + userObj.keyId);</span>
<a href="#l17.803"></a><span id="l17.803" class="difflineminus">-  } else {</span>
<a href="#l17.804"></a><span id="l17.804" class="difflineminus">-    treeItem.setAttribute(&quot;id&quot;, &quot;0x&quot; + userObj.keyId);</span>
<a href="#l17.805"></a><span id="l17.805" class="difflineminus">-    if (userObj.fpr.length &gt; 0) {</span>
<a href="#l17.806"></a><span id="l17.806" class="difflineminus">-      treeItem.setAttribute(&quot;fpr&quot;, &quot;0x&quot; + userObj.fpr);</span>
<a href="#l17.807"></a><span id="l17.807" class="difflineminus">-    }</span>
<a href="#l17.808"></a><span id="l17.808" class="difflineminus">-  }</span>
<a href="#l17.809"></a><span id="l17.809" class="difflineminus">-  treeItem.appendChild(userRow);</span>
<a href="#l17.810"></a><span id="l17.810" class="difflineminus">-  return treeItem;</span>
<a href="#l17.811"></a><span id="l17.811" class="difflineminus">-}</span>
<a href="#l17.812"></a><span id="l17.812" class="difflineminus">-</span>
<a href="#l17.813"></a><span id="l17.813" class="difflineminus">-function onAccept() {</span>
<a href="#l17.814"></a><span id="l17.814" class="difflineminus">-  EnigmailLog.DEBUG(&quot;enigmailKeySelection.js: Accept\n&quot;);</span>
<a href="#l17.815"></a><span id="l17.815" class="difflineminus">-</span>
<a href="#l17.816"></a><span id="l17.816" class="difflineminus">-  var resultObj = window.arguments[RESULT];</span>
<a href="#l17.817"></a><span id="l17.817" class="difflineminus">-  resultObj.userList = [];</span>
<a href="#l17.818"></a><span id="l17.818" class="difflineminus">-  resultObj.perRecipientRules = false;</span>
<a href="#l17.819"></a><span id="l17.819" class="difflineminus">-  resultObj.repeatEvaluation = false;</span>
<a href="#l17.820"></a><span id="l17.820" class="difflineminus">-  gUserList = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.821"></a><span id="l17.821" class="difflineminus">-  var treeChildren = gUserList.getElementsByAttribute(</span>
<a href="#l17.822"></a><span id="l17.822" class="difflineminus">-    &quot;id&quot;,</span>
<a href="#l17.823"></a><span id="l17.823" class="difflineminus">-    &quot;enigmailUserIdSelectionChildren&quot;</span>
<a href="#l17.824"></a><span id="l17.824" class="difflineminus">-  )[0];</span>
<a href="#l17.825"></a><span id="l17.825" class="difflineminus">-  var item;</span>
<a href="#l17.826"></a><span id="l17.826" class="difflineminus">-</span>
<a href="#l17.827"></a><span id="l17.827" class="difflineminus">-  if (!window.arguments[INPUT].options.includes(&quot;multisel&quot;)) {</span>
<a href="#l17.828"></a><span id="l17.828" class="difflineminus">-    if (gUserList.currentIndex &gt;= 0) {</span>
<a href="#l17.829"></a><span id="l17.829" class="difflineminus">-      item = gUserList.view.getItemAtIndex(gUserList.currentIndex);</span>
<a href="#l17.830"></a><span id="l17.830" class="difflineminus">-      if (item.getAttribute(&quot;fpr&quot;)) {</span>
<a href="#l17.831"></a><span id="l17.831" class="difflineminus">-        resultObj.userList.push(item.getAttribute(&quot;fpr&quot;));</span>
<a href="#l17.832"></a><span id="l17.832" class="difflineminus">-      } else {</span>
<a href="#l17.833"></a><span id="l17.833" class="difflineminus">-        resultObj.userList.push(item.getAttribute(&quot;id&quot;));</span>
<a href="#l17.834"></a><span id="l17.834" class="difflineminus">-      }</span>
<a href="#l17.835"></a><span id="l17.835" class="difflineminus">-    }</span>
<a href="#l17.836"></a><span id="l17.836" class="difflineminus">-  } else {</span>
<a href="#l17.837"></a><span id="l17.837" class="difflineminus">-    item = treeChildren.firstChild;</span>
<a href="#l17.838"></a><span id="l17.838" class="difflineminus">-    while (item) {</span>
<a href="#l17.839"></a><span id="l17.839" class="difflineminus">-      var aRows = item.getElementsByAttribute(&quot;id&quot;, &quot;indicator&quot;);</span>
<a href="#l17.840"></a><span id="l17.840" class="difflineminus">-      if (aRows.length) {</span>
<a href="#l17.841"></a><span id="l17.841" class="difflineminus">-        var elem = aRows[0];</span>
<a href="#l17.842"></a><span id="l17.842" class="difflineminus">-        if (elem.getAttribute(&quot;active&quot;) == &quot;1&quot;) {</span>
<a href="#l17.843"></a><span id="l17.843" class="difflineminus">-          if (item.getAttribute(&quot;fpr&quot;)) {</span>
<a href="#l17.844"></a><span id="l17.844" class="difflineminus">-            resultObj.userList.push(item.getAttribute(&quot;fpr&quot;));</span>
<a href="#l17.845"></a><span id="l17.845" class="difflineminus">-          } else {</span>
<a href="#l17.846"></a><span id="l17.846" class="difflineminus">-            resultObj.userList.push(item.getAttribute(&quot;id&quot;));</span>
<a href="#l17.847"></a><span id="l17.847" class="difflineminus">-          }</span>
<a href="#l17.848"></a><span id="l17.848" class="difflineminus">-        }</span>
<a href="#l17.849"></a><span id="l17.849" class="difflineminus">-      }</span>
<a href="#l17.850"></a><span id="l17.850" class="difflineminus">-      item = item.nextSibling;</span>
<a href="#l17.851"></a><span id="l17.851" class="difflineminus">-    }</span>
<a href="#l17.852"></a><span id="l17.852" class="difflineminus">-  }</span>
<a href="#l17.853"></a><span id="l17.853" class="difflineminus">-</span>
<a href="#l17.854"></a><span id="l17.854" class="difflineminus">-  if (document.getElementById(&quot;displayNoLonger&quot;).checked) {</span>
<a href="#l17.855"></a><span id="l17.855" class="difflineminus">-    // no longer force manual disalog even if no keys missing</span>
<a href="#l17.856"></a><span id="l17.856" class="difflineminus">-    EnigSetPref(&quot;assignKeysByManuallyAlways&quot;, false);</span>
<a href="#l17.857"></a><span id="l17.857" class="difflineminus">-  }</span>
<a href="#l17.858"></a><span id="l17.858" class="difflineminus">-  if (resultObj.userList.length === 0 &amp;&amp; gSendEncrypted) {</span>
<a href="#l17.859"></a><span id="l17.859" class="difflineminus">-    EnigAlert(EnigGetString(&quot;atLeastOneKey&quot;));</span>
<a href="#l17.860"></a><span id="l17.860" class="difflineminus">-    return false;</span>
<a href="#l17.861"></a><span id="l17.861" class="difflineminus">-  }</span>
<a href="#l17.862"></a><span id="l17.862" class="difflineminus">-</span>
<a href="#l17.863"></a><span id="l17.863" class="difflineminus">-  if (resultObj.userList.length &lt; getToAddrList().length &amp;&amp; gSendEncrypted) {</span>
<a href="#l17.864"></a><span id="l17.864" class="difflineminus">-    if (</span>
<a href="#l17.865"></a><span id="l17.865" class="difflineminus">-      !EnigConfirm(</span>
<a href="#l17.866"></a><span id="l17.866" class="difflineminus">-        EnigGetString(&quot;fewerKeysThanRecipients&quot;),</span>
<a href="#l17.867"></a><span id="l17.867" class="difflineminus">-        EnigGetString(&quot;dlg.button.continue&quot;),</span>
<a href="#l17.868"></a><span id="l17.868" class="difflineminus">-        EnigGetString(&quot;userSel.button.goBack&quot;)</span>
<a href="#l17.869"></a><span id="l17.869" class="difflineminus">-      )</span>
<a href="#l17.870"></a><span id="l17.870" class="difflineminus">-    ) {</span>
<a href="#l17.871"></a><span id="l17.871" class="difflineminus">-      return false;</span>
<a href="#l17.872"></a><span id="l17.872" class="difflineminus">-    }</span>
<a href="#l17.873"></a><span id="l17.873" class="difflineminus">-  }</span>
<a href="#l17.874"></a><span id="l17.874" class="difflineminus">-</span>
<a href="#l17.875"></a><span id="l17.875" class="difflineminus">-  resultObj.cancelled = false;</span>
<a href="#l17.876"></a><span id="l17.876" class="difflineminus">-</span>
<a href="#l17.877"></a><span id="l17.877" class="difflineminus">-  resultObj.encrypt = gSendEncrypted;</span>
<a href="#l17.878"></a><span id="l17.878" class="difflineminus">-  resultObj.sign = gSendSigned;</span>
<a href="#l17.879"></a><span id="l17.879" class="difflineminus">-  return true;</span>
<a href="#l17.880"></a><span id="l17.880" class="difflineminus">-}</span>
<a href="#l17.881"></a><span id="l17.881" class="difflineminus">-</span>
<a href="#l17.882"></a><span id="l17.882" class="difflineminus">-function getToAddrList() {</span>
<a href="#l17.883"></a><span id="l17.883" class="difflineminus">-  var toAddrList;</span>
<a href="#l17.884"></a><span id="l17.884" class="difflineminus">-  try {</span>
<a href="#l17.885"></a><span id="l17.885" class="difflineminus">-    toAddrList = EnigmailFuncs.stripEmail(window.arguments[INPUT].toAddr).split(</span>
<a href="#l17.886"></a><span id="l17.886" class="difflineminus">-      /[ ,]+/</span>
<a href="#l17.887"></a><span id="l17.887" class="difflineminus">-    );</span>
<a href="#l17.888"></a><span id="l17.888" class="difflineminus">-  } catch (ex) {</span>
<a href="#l17.889"></a><span id="l17.889" class="difflineminus">-    toAddrList = [];</span>
<a href="#l17.890"></a><span id="l17.890" class="difflineminus">-  }</span>
<a href="#l17.891"></a><span id="l17.891" class="difflineminus">-  return toAddrList;</span>
<a href="#l17.892"></a><span id="l17.892" class="difflineminus">-}</span>
<a href="#l17.893"></a><span id="l17.893" class="difflineminus">-</span>
<a href="#l17.894"></a><span id="l17.894" class="difflineminus">-function onClickCallback(event) {</span>
<a href="#l17.895"></a><span id="l17.895" class="difflineminus">-  userSelCallback(event);</span>
<a href="#l17.896"></a><span id="l17.896" class="difflineminus">-}</span>
<a href="#l17.897"></a><span id="l17.897" class="difflineminus">-</span>
<a href="#l17.898"></a><span id="l17.898" class="difflineminus">-function userSelCallback(event) {</span>
<a href="#l17.899"></a><span id="l17.899" class="difflineminus">-  if (!gSendEncrypted) {</span>
<a href="#l17.900"></a><span id="l17.900" class="difflineminus">-    return;</span>
<a href="#l17.901"></a><span id="l17.901" class="difflineminus">-  }</span>
<a href="#l17.902"></a><span id="l17.902" class="difflineminus">-</span>
<a href="#l17.903"></a><span id="l17.903" class="difflineminus">-  let Tree;</span>
<a href="#l17.904"></a><span id="l17.904" class="difflineminus">-  let row;</span>
<a href="#l17.905"></a><span id="l17.905" class="difflineminus">-  let col;</span>
<a href="#l17.906"></a><span id="l17.906" class="difflineminus">-  if (event.type == &quot;keypress&quot;) {</span>
<a href="#l17.907"></a><span id="l17.907" class="difflineminus">-    // key event</span>
<a href="#l17.908"></a><span id="l17.908" class="difflineminus">-    if (event.charCode == 32) {</span>
<a href="#l17.909"></a><span id="l17.909" class="difflineminus">-      Tree = event.target;</span>
<a href="#l17.910"></a><span id="l17.910" class="difflineminus">-      if (Tree.view.selection.count &gt; 0) {</span>
<a href="#l17.911"></a><span id="l17.911" class="difflineminus">-        row = Tree.view.selection.currentIndex;</span>
<a href="#l17.912"></a><span id="l17.912" class="difflineminus">-      }</span>
<a href="#l17.913"></a><span id="l17.913" class="difflineminus">-    } else {</span>
<a href="#l17.914"></a><span id="l17.914" class="difflineminus">-      return;</span>
<a href="#l17.915"></a><span id="l17.915" class="difflineminus">-    }</span>
<a href="#l17.916"></a><span id="l17.916" class="difflineminus">-  } else if (event.type == &quot;click&quot;) {</span>
<a href="#l17.917"></a><span id="l17.917" class="difflineminus">-    // Mouse event</span>
<a href="#l17.918"></a><span id="l17.918" class="difflineminus">-    Tree = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.919"></a><span id="l17.919" class="difflineminus">-</span>
<a href="#l17.920"></a><span id="l17.920" class="difflineminus">-    let treeInfo = getCellAt(event.clientX, event.clientY);</span>
<a href="#l17.921"></a><span id="l17.921" class="difflineminus">-    row = treeInfo.row;</span>
<a href="#l17.922"></a><span id="l17.922" class="difflineminus">-    col = treeInfo.col;</span>
<a href="#l17.923"></a><span id="l17.923" class="difflineminus">-</span>
<a href="#l17.924"></a><span id="l17.924" class="difflineminus">-    if (!treeInfo.col) {</span>
<a href="#l17.925"></a><span id="l17.925" class="difflineminus">-      // not clicked on a valid column (e.g. scrollbar)</span>
<a href="#l17.926"></a><span id="l17.926" class="difflineminus">-      return;</span>
<a href="#l17.927"></a><span id="l17.927" class="difflineminus">-    }</span>
<a href="#l17.928"></a><span id="l17.928" class="difflineminus">-</span>
<a href="#l17.929"></a><span id="l17.929" class="difflineminus">-    if (event.detail &gt; 2) {</span>
<a href="#l17.930"></a><span id="l17.930" class="difflineminus">-      return;</span>
<a href="#l17.931"></a><span id="l17.931" class="difflineminus">-    }</span>
<a href="#l17.932"></a><span id="l17.932" class="difflineminus">-</span>
<a href="#l17.933"></a><span id="l17.933" class="difflineminus">-    if (event.detail == 1 &amp;&amp; col.id != &quot;selectionCol&quot;) {</span>
<a href="#l17.934"></a><span id="l17.934" class="difflineminus">-      return;</span>
<a href="#l17.935"></a><span id="l17.935" class="difflineminus">-    } // single clicks are only relevant for the selection column</span>
<a href="#l17.936"></a><span id="l17.936" class="difflineminus">-</span>
<a href="#l17.937"></a><span id="l17.937" class="difflineminus">-    if (</span>
<a href="#l17.938"></a><span id="l17.938" class="difflineminus">-      event.detail == 2 &amp;&amp;</span>
<a href="#l17.939"></a><span id="l17.939" class="difflineminus">-      !&quot;selectionCol,enigUserNameCol,uidValidityCol,expCol,keyCol&quot;.includes(</span>
<a href="#l17.940"></a><span id="l17.940" class="difflineminus">-        col.id</span>
<a href="#l17.941"></a><span id="l17.941" class="difflineminus">-      )</span>
<a href="#l17.942"></a><span id="l17.942" class="difflineminus">-    ) {</span>
<a href="#l17.943"></a><span id="l17.943" class="difflineminus">-      return;</span>
<a href="#l17.944"></a><span id="l17.944" class="difflineminus">-    }</span>
<a href="#l17.945"></a><span id="l17.945" class="difflineminus">-</span>
<a href="#l17.946"></a><span id="l17.946" class="difflineminus">-    event.stopPropagation();</span>
<a href="#l17.947"></a><span id="l17.947" class="difflineminus">-  }</span>
<a href="#l17.948"></a><span id="l17.948" class="difflineminus">-</span>
<a href="#l17.949"></a><span id="l17.949" class="difflineminus">-  if (row == -1) {</span>
<a href="#l17.950"></a><span id="l17.950" class="difflineminus">-    return;</span>
<a href="#l17.951"></a><span id="l17.951" class="difflineminus">-  }</span>
<a href="#l17.952"></a><span id="l17.952" class="difflineminus">-  var treeItem = Tree.view.getItemAtIndex(row);</span>
<a href="#l17.953"></a><span id="l17.953" class="difflineminus">-  Tree.currentItem = treeItem;</span>
<a href="#l17.954"></a><span id="l17.954" class="difflineminus">-  var aRows = treeItem.getElementsByAttribute(&quot;id&quot;, &quot;indicator&quot;);</span>
<a href="#l17.955"></a><span id="l17.955" class="difflineminus">-</span>
<a href="#l17.956"></a><span id="l17.956" class="difflineminus">-  if (event.detail == 2) {</span>
<a href="#l17.957"></a><span id="l17.957" class="difflineminus">-    if (!window.arguments[INPUT].options.includes(&quot;multisel&quot;)) {</span>
<a href="#l17.958"></a><span id="l17.958" class="difflineminus">-      document.getElementById(&quot;enigmailKeySelectionDlg&quot;).acceptDialog();</span>
<a href="#l17.959"></a><span id="l17.959" class="difflineminus">-      return;</span>
<a href="#l17.960"></a><span id="l17.960" class="difflineminus">-    }</span>
<a href="#l17.961"></a><span id="l17.961" class="difflineminus">-  }</span>
<a href="#l17.962"></a><span id="l17.962" class="difflineminus">-</span>
<a href="#l17.963"></a><span id="l17.963" class="difflineminus">-  if (aRows.length) {</span>
<a href="#l17.964"></a><span id="l17.964" class="difflineminus">-    var elem = aRows[0];</span>
<a href="#l17.965"></a><span id="l17.965" class="difflineminus">-    if (elem.getAttribute(&quot;active&quot;) == &quot;1&quot;) {</span>
<a href="#l17.966"></a><span id="l17.966" class="difflineminus">-      EnigSetActive(elem, 0);</span>
<a href="#l17.967"></a><span id="l17.967" class="difflineminus">-    } else if (elem.getAttribute(&quot;active&quot;) == &quot;0&quot;) {</span>
<a href="#l17.968"></a><span id="l17.968" class="difflineminus">-      EnigSetActive(elem, 1);</span>
<a href="#l17.969"></a><span id="l17.969" class="difflineminus">-    }</span>
<a href="#l17.970"></a><span id="l17.970" class="difflineminus">-  }</span>
<a href="#l17.971"></a><span id="l17.971" class="difflineminus">-}</span>
<a href="#l17.972"></a><span id="l17.972" class="difflineminus">-</span>
<a href="#l17.973"></a><span id="l17.973" class="difflineminus">-function switchSendSignedCallback() {</span>
<a href="#l17.974"></a><span id="l17.974" class="difflineminus">-  gSendSigned = document.getElementById(&quot;enigmailUserSelSendSigned&quot;).checked;</span>
<a href="#l17.975"></a><span id="l17.975" class="difflineminus">-}</span>
<a href="#l17.976"></a><span id="l17.976" class="difflineminus">-</span>
<a href="#l17.977"></a><span id="l17.977" class="difflineminus">-function switchSendEncryptedCallback() {</span>
<a href="#l17.978"></a><span id="l17.978" class="difflineminus">-  gSendEncrypted = document.getElementById(&quot;enigmailUserSelSendEncrypted&quot;)</span>
<a href="#l17.979"></a><span id="l17.979" class="difflineminus">-    .checked;</span>
<a href="#l17.980"></a><span id="l17.980" class="difflineminus">-  displayNoLonger();</span>
<a href="#l17.981"></a><span id="l17.981" class="difflineminus">-  disableList();</span>
<a href="#l17.982"></a><span id="l17.982" class="difflineminus">-}</span>
<a href="#l17.983"></a><span id="l17.983" class="difflineminus">-</span>
<a href="#l17.984"></a><span id="l17.984" class="difflineminus">-function displayNoLonger() {</span>
<a href="#l17.985"></a><span id="l17.985" class="difflineminus">-  var dispMsg = document.getElementById(&quot;displayNoLonger&quot;);</span>
<a href="#l17.986"></a><span id="l17.986" class="difflineminus">-  if (gSendEncrypted) {</span>
<a href="#l17.987"></a><span id="l17.987" class="difflineminus">-    dispMsg.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l17.988"></a><span id="l17.988" class="difflineminus">-  } else {</span>
<a href="#l17.989"></a><span id="l17.989" class="difflineminus">-    dispMsg.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l17.990"></a><span id="l17.990" class="difflineminus">-  }</span>
<a href="#l17.991"></a><span id="l17.991" class="difflineminus">-}</span>
<a href="#l17.992"></a><span id="l17.992" class="difflineminus">-</span>
<a href="#l17.993"></a><span id="l17.993" class="difflineminus">-function disableList() {</span>
<a href="#l17.994"></a><span id="l17.994" class="difflineminus">-  var Tree = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.995"></a><span id="l17.995" class="difflineminus">-</span>
<a href="#l17.996"></a><span id="l17.996" class="difflineminus">-  var node = Tree.firstChild.firstChild;</span>
<a href="#l17.997"></a><span id="l17.997" class="difflineminus">-  while (node) {</span>
<a href="#l17.998"></a><span id="l17.998" class="difflineminus">-    // set the background of all colums to gray</span>
<a href="#l17.999"></a><span id="l17.999" class="difflineminus">-    if (node.localName == &quot;treecol&quot;) {</span>
<a href="#l17.1000"></a><span id="l17.1000" class="difflineminus">-      if (gSendEncrypted) {</span>
<a href="#l17.1001"></a><span id="l17.1001" class="difflineminus">-        node.removeAttribute(&quot;properties&quot;);</span>
<a href="#l17.1002"></a><span id="l17.1002" class="difflineminus">-      } else {</span>
<a href="#l17.1003"></a><span id="l17.1003" class="difflineminus">-        node.setAttribute(&quot;properties&quot;, &quot;enigDontEncrypt&quot;);</span>
<a href="#l17.1004"></a><span id="l17.1004" class="difflineminus">-      }</span>
<a href="#l17.1005"></a><span id="l17.1005" class="difflineminus">-    }</span>
<a href="#l17.1006"></a><span id="l17.1006" class="difflineminus">-    node = node.nextSibling;</span>
<a href="#l17.1007"></a><span id="l17.1007" class="difflineminus">-  }</span>
<a href="#l17.1008"></a><span id="l17.1008" class="difflineminus">-}</span>
<a href="#l17.1009"></a><span id="l17.1009" class="difflineminus">-</span>
<a href="#l17.1010"></a><span id="l17.1010" class="difflineminus">-function newRecipientRule() {</span>
<a href="#l17.1011"></a><span id="l17.1011" class="difflineminus">-  // enable rules to ensure that the new rule gets processed</span>
<a href="#l17.1012"></a><span id="l17.1012" class="difflineminus">-  EnigSetPref(&quot;assignKeysByRules&quot;, true);</span>
<a href="#l17.1013"></a><span id="l17.1013" class="difflineminus">-</span>
<a href="#l17.1014"></a><span id="l17.1014" class="difflineminus">-  var resultObj = window.arguments[RESULT];</span>
<a href="#l17.1015"></a><span id="l17.1015" class="difflineminus">-  resultObj.userList = [];</span>
<a href="#l17.1016"></a><span id="l17.1016" class="difflineminus">-  resultObj.repeatEvaluation = true;</span>
<a href="#l17.1017"></a><span id="l17.1017" class="difflineminus">-  resultObj.perRecipientRules = true;</span>
<a href="#l17.1018"></a><span id="l17.1018" class="difflineminus">-  resultObj.cancelled = false;</span>
<a href="#l17.1019"></a><span id="l17.1019" class="difflineminus">-  resultObj.encrypt = &quot;&quot;;</span>
<a href="#l17.1020"></a><span id="l17.1020" class="difflineminus">-  window.close();</span>
<a href="#l17.1021"></a><span id="l17.1021" class="difflineminus">-  return true;</span>
<a href="#l17.1022"></a><span id="l17.1022" class="difflineminus">-}</span>
<a href="#l17.1023"></a><span id="l17.1023" class="difflineminus">-</span>
<a href="#l17.1024"></a><span id="l17.1024" class="difflineminus">-function searchMissingKeys() {</span>
<a href="#l17.1025"></a><span id="l17.1025" class="difflineminus">-  var inputObj = {</span>
<a href="#l17.1026"></a><span id="l17.1026" class="difflineminus">-    searchList: gKeysNotFound,</span>
<a href="#l17.1027"></a><span id="l17.1027" class="difflineminus">-    autoKeyServer: EnigmailPrefs.getPref(&quot;autoKeyServerSelection&quot;)</span>
<a href="#l17.1028"></a><span id="l17.1028" class="difflineminus">-      ? EnigmailPrefs.getPref(&quot;keyserver&quot;).split(/[ ,;]/g)[0]</span>
<a href="#l17.1029"></a><span id="l17.1029" class="difflineminus">-      : null,</span>
<a href="#l17.1030"></a><span id="l17.1030" class="difflineminus">-  };</span>
<a href="#l17.1031"></a><span id="l17.1031" class="difflineminus">-  var resultObj = {};</span>
<a href="#l17.1032"></a><span id="l17.1032" class="difflineminus">-</span>
<a href="#l17.1033"></a><span id="l17.1033" class="difflineminus">-  EnigDownloadKeys(inputObj, resultObj);</span>
<a href="#l17.1034"></a><span id="l17.1034" class="difflineminus">-</span>
<a href="#l17.1035"></a><span id="l17.1035" class="difflineminus">-  if (resultObj.importedKeys &gt; 0) {</span>
<a href="#l17.1036"></a><span id="l17.1036" class="difflineminus">-    resultObj = window.arguments[RESULT];</span>
<a href="#l17.1037"></a><span id="l17.1037" class="difflineminus">-    resultObj.userList = [];</span>
<a href="#l17.1038"></a><span id="l17.1038" class="difflineminus">-    resultObj.repeatEvaluation = true;</span>
<a href="#l17.1039"></a><span id="l17.1039" class="difflineminus">-    resultObj.perRecipientRules = false;</span>
<a href="#l17.1040"></a><span id="l17.1040" class="difflineminus">-    resultObj.cancelled = false;</span>
<a href="#l17.1041"></a><span id="l17.1041" class="difflineminus">-    resultObj.encrypt = &quot;&quot;;</span>
<a href="#l17.1042"></a><span id="l17.1042" class="difflineminus">-    window.close();</span>
<a href="#l17.1043"></a><span id="l17.1043" class="difflineminus">-    return true;</span>
<a href="#l17.1044"></a><span id="l17.1044" class="difflineminus">-  }</span>
<a href="#l17.1045"></a><span id="l17.1045" class="difflineminus">-</span>
<a href="#l17.1046"></a><span id="l17.1046" class="difflineminus">-  return null;</span>
<a href="#l17.1047"></a><span id="l17.1047" class="difflineminus">-}</span>
<a href="#l17.1048"></a><span id="l17.1048" class="difflineminus">-</span>
<a href="#l17.1049"></a><span id="l17.1049" class="difflineminus">-function applyFilter() {</span>
<a href="#l17.1050"></a><span id="l17.1050" class="difflineminus">-  let searchInput = document.getElementById(&quot;filterKey&quot;);</span>
<a href="#l17.1051"></a><span id="l17.1051" class="difflineminus">-  let searchValue = searchInput.value.toLowerCase();</span>
<a href="#l17.1052"></a><span id="l17.1052" class="difflineminus">-  let userTreeList = document.getElementById(&quot;enigmailUserIdSelection&quot;);</span>
<a href="#l17.1053"></a><span id="l17.1053" class="difflineminus">-  let treeChildren = userTreeList.getElementsByAttribute(</span>
<a href="#l17.1054"></a><span id="l17.1054" class="difflineminus">-    &quot;id&quot;,</span>
<a href="#l17.1055"></a><span id="l17.1055" class="difflineminus">-    &quot;enigmailUserIdSelectionChildren&quot;</span>
<a href="#l17.1056"></a><span id="l17.1056" class="difflineminus">-  )[0];</span>
<a href="#l17.1057"></a><span id="l17.1057" class="difflineminus">-</span>
<a href="#l17.1058"></a><span id="l17.1058" class="difflineminus">-  if (searchValue === &quot;&quot;) {</span>
<a href="#l17.1059"></a><span id="l17.1059" class="difflineminus">-    // unhide all items</span>
<a href="#l17.1060"></a><span id="l17.1060" class="difflineminus">-    for (let item = treeChildren.firstChild; item; item = item.nextSibling) {</span>
<a href="#l17.1061"></a><span id="l17.1061" class="difflineminus">-      item.setAttribute(&quot;hidden&quot;, false);</span>
<a href="#l17.1062"></a><span id="l17.1062" class="difflineminus">-    }</span>
<a href="#l17.1063"></a><span id="l17.1063" class="difflineminus">-  } else {</span>
<a href="#l17.1064"></a><span id="l17.1064" class="difflineminus">-    // hide items that are</span>
<a href="#l17.1065"></a><span id="l17.1065" class="difflineminus">-    // - not active</span>
<a href="#l17.1066"></a><span id="l17.1066" class="difflineminus">-    // - and do not match the search string in all names/emails or key</span>
<a href="#l17.1067"></a><span id="l17.1067" class="difflineminus">-    for (let item = treeChildren.firstChild; item; item = item.nextSibling) {</span>
<a href="#l17.1068"></a><span id="l17.1068" class="difflineminus">-      var showItem = false;</span>
<a href="#l17.1069"></a><span id="l17.1069" class="difflineminus">-      // check active</span>
<a href="#l17.1070"></a><span id="l17.1070" class="difflineminus">-      var aRows = item.getElementsByAttribute(&quot;id&quot;, &quot;indicator&quot;);</span>
<a href="#l17.1071"></a><span id="l17.1071" class="difflineminus">-      if (aRows.length) {</span>
<a href="#l17.1072"></a><span id="l17.1072" class="difflineminus">-        var elem = aRows[0];</span>
<a href="#l17.1073"></a><span id="l17.1073" class="difflineminus">-        if (elem.getAttribute(&quot;active&quot;) == &quot;1&quot;) {</span>
<a href="#l17.1074"></a><span id="l17.1074" class="difflineminus">-          showItem = true;</span>
<a href="#l17.1075"></a><span id="l17.1075" class="difflineminus">-        }</span>
<a href="#l17.1076"></a><span id="l17.1076" class="difflineminus">-      }</span>
<a href="#l17.1077"></a><span id="l17.1077" class="difflineminus">-      if (!showItem) {</span>
<a href="#l17.1078"></a><span id="l17.1078" class="difflineminus">-        // check all names/emails</span>
<a href="#l17.1079"></a><span id="l17.1079" class="difflineminus">-        let str = &quot;&quot;;</span>
<a href="#l17.1080"></a><span id="l17.1080" class="difflineminus">-        aRows = item.getElementsByAttribute(&quot;id&quot;, &quot;name&quot;);</span>
<a href="#l17.1081"></a><span id="l17.1081" class="difflineminus">-        for (let r = 0; r &lt; aRows.length; ++r) {</span>
<a href="#l17.1082"></a><span id="l17.1082" class="difflineminus">-          str += aRows[r].getAttribute(&quot;label&quot;);</span>
<a href="#l17.1083"></a><span id="l17.1083" class="difflineminus">-        }</span>
<a href="#l17.1084"></a><span id="l17.1084" class="difflineminus">-        if (str.toLowerCase().includes(searchValue)) {</span>
<a href="#l17.1085"></a><span id="l17.1085" class="difflineminus">-          showItem = true;</span>
<a href="#l17.1086"></a><span id="l17.1086" class="difflineminus">-        }</span>
<a href="#l17.1087"></a><span id="l17.1087" class="difflineminus">-      }</span>
<a href="#l17.1088"></a><span id="l17.1088" class="difflineminus">-      if (!showItem) {</span>
<a href="#l17.1089"></a><span id="l17.1089" class="difflineminus">-        // check all keys</span>
<a href="#l17.1090"></a><span id="l17.1090" class="difflineminus">-        let str = &quot;&quot;;</span>
<a href="#l17.1091"></a><span id="l17.1091" class="difflineminus">-        aRows = item.getElementsByAttribute(&quot;id&quot;, &quot;keyid&quot;);</span>
<a href="#l17.1092"></a><span id="l17.1092" class="difflineminus">-        for (let r = 0; r &lt; aRows.length; ++r) {</span>
<a href="#l17.1093"></a><span id="l17.1093" class="difflineminus">-          str += aRows[r].getAttribute(&quot;label&quot;);</span>
<a href="#l17.1094"></a><span id="l17.1094" class="difflineminus">-        }</span>
<a href="#l17.1095"></a><span id="l17.1095" class="difflineminus">-        if (str.toLowerCase().includes(searchValue)) {</span>
<a href="#l17.1096"></a><span id="l17.1096" class="difflineminus">-          showItem = true;</span>
<a href="#l17.1097"></a><span id="l17.1097" class="difflineminus">-        }</span>
<a href="#l17.1098"></a><span id="l17.1098" class="difflineminus">-      }</span>
<a href="#l17.1099"></a><span id="l17.1099" class="difflineminus">-      item.setAttribute(&quot;hidden&quot;, !showItem);</span>
<a href="#l17.1100"></a><span id="l17.1100" class="difflineminus">-    }</span>
<a href="#l17.1101"></a><span id="l17.1101" class="difflineminus">-  }</span>
<a href="#l17.1102"></a><span id="l17.1102" class="difflineminus">-}</span>
<a href="#l17.1103"></a><span id="l17.1103" class="difflineminus">-</span>
<a href="#l17.1104"></a><span id="l17.1104" class="difflineminus">-function stripEmailFromKey(uid) {</span>
<a href="#l17.1105"></a><span id="l17.1105" class="difflineminus">-  try {</span>
<a href="#l17.1106"></a><span id="l17.1106" class="difflineminus">-    return EnigmailFuncs.stripEmail(uid).toLowerCase();</span>
<a href="#l17.1107"></a><span id="l17.1107" class="difflineminus">-  } catch (ex) {</span>
<a href="#l17.1108"></a><span id="l17.1108" class="difflineminus">-    // remove quotes</span>
<a href="#l17.1109"></a><span id="l17.1109" class="difflineminus">-    return EnigmailFuncs.stripEmail(uid.replace(/&quot;/g, &quot;&quot;)).toLowerCase();</span>
<a href="#l17.1110"></a><span id="l17.1110" class="difflineminus">-  } finally {</span>
<a href="#l17.1111"></a><span id="l17.1111" class="difflineminus">-    // search for last ocurrence of &lt; &gt;</span>
<a href="#l17.1112"></a><span id="l17.1112" class="difflineminus">-    return uid.replace(/(.*)(&lt;)([^&lt;&gt; ]+)(&gt;[^&lt;&gt;]*)$/, &quot;$3&quot;).toLowerCase(); // eslint-disable-line no-unsafe-finally</span>
<a href="#l17.1113"></a><span id="l17.1113" class="difflineminus">-  }</span>
<a href="#l17.1114"></a><span id="l17.1114" class="difflineminus">-}</span>
<a href="#l17.1115"></a><span id="l17.1115" class="difflineminus">-</span>
<a href="#l17.1116"></a><span id="l17.1116" class="difflineminus">-document.addEventListener(&quot;dialogaccept&quot;, function(event) {</span>
<a href="#l17.1117"></a><span id="l17.1117" class="difflineminus">-  if (!onAccept()) {</span>
<a href="#l17.1118"></a><span id="l17.1118" class="difflineminus">-    event.preventDefault();</span>
<a href="#l17.1119"></a><span id="l17.1119" class="difflineminus">-  } // Prevent the dialog closing.</span>
<a href="#l17.1120"></a><span id="l17.1120" class="difflineminus">-});</span>
<a href="#l17.1121"></a><span id="l17.1121" class="difflineminus">-</span>
<a href="#l17.1122"></a><span id="l17.1122" class="difflineminus">-document.addEventListener(&quot;dialogextra1&quot;, function(event) {</span>
<a href="#l17.1123"></a><span id="l17.1123" class="difflineminus">-  newRecipientRule();</span>
<a href="#l17.1124"></a><span id="l17.1124" class="difflineminus">-});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">deleted file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeySelection.xhtml</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ /dev/null</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -1,118 +0,0 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">-&lt;!--</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">- * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">- * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineminus">---&gt;</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineminus">-</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/messenger.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/openpgp/enigmail.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-&lt;!DOCTYPE window [</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-&lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot; &gt;</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-%brandDTD;</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-&lt;!ENTITY % enigMailDTD SYSTEM &quot;chrome://openpgp/content/strings/enigmail.dtd&quot; &gt;</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-%enigMailDTD;</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-]&gt;</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-&lt;dialog id=&quot;enigmailKeySelectionDlg&quot;</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-        title=&quot;&amp;enigmail.userSelectionList.label;&quot;</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-        xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-        xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineminus">-        onload=&quot;onLoad();&quot;</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineminus">-        buttons=&quot;accept,cancel,extra1&quot;</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineminus">-        buttonlabelaccept=&quot;&amp;enigmail.send.label;&quot;</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineminus">-        buttonlabelextra1=&quot;&amp;enigmail.perRecipientsOption.label;&quot;</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineminus">-        style=&quot;min-height:450px;&quot;&gt;</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineminus">-  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://openpgp/content/ui/enigmailCommon.js&quot;/&gt;</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineminus">-  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://openpgp/content/ui/enigmailKeySelection.js&quot;/&gt;</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineminus">-  &lt;vbox class=&quot;enigmailCaptionbox&quot; id=&quot;dialogHeadline&quot; orient=&quot;vertical&quot;&gt;</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineminus">-     &lt;html:h1 id=&quot;usersNotFoundCapt&quot;&gt;&lt;html:span&gt;&amp;enigmail.usersNotFound.label;&lt;/html:span&gt;&lt;/html:h1&gt;</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineminus">-     &lt;description id=&quot;dialogHeaderDesc&quot; width=&quot;700px&quot; collapsed=&quot;true&quot;&gt;...&lt;/description&gt;</span>
<a href="#l18.38"></a><span id="l18.38" class="difflineminus">-  &lt;/vbox&gt;</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineminus">-</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineminus">-  &lt;!-- &lt;separator/&gt; --&gt;</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineminus">-</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineminus">-  &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineminus">-    &lt;vbox class=&quot;enigmailCaptionbox&quot; width=&quot;700px&quot; flex=&quot;1&quot; id=&quot;dialogHeaderBox&quot;&gt;</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineminus">-      &lt;html:h1 &gt;&lt;html:span id=&quot;dialogHeader&quot; style=&quot;visibility: hidden;&quot;&gt;...&lt;/html:span&gt;&lt;/html:h1&gt;</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineminus">-</span>
<a href="#l18.46"></a><span id="l18.46" class="difflineminus">-      &lt;hbox flex=&quot;0&quot; align=&quot;center&quot;&gt;</span>
<a href="#l18.47"></a><span id="l18.47" class="difflineminus">-        &lt;textbox id=&quot;filterKey&quot; size=&quot;35&quot; placeholder=&quot;&amp;enigmail.keyMan.filter.label;&quot;/&gt;</span>
<a href="#l18.48"></a><span id="l18.48" class="difflineminus">-      &lt;/hbox&gt;</span>
<a href="#l18.49"></a><span id="l18.49" class="difflineminus">-</span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-      &lt;tree id=&quot;enigmailUserIdSelection&quot; flex=&quot;1&quot;</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineminus">-        hidecolumnpicker=&quot;false&quot;</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineminus">-        seltype=&quot;single&quot;</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineminus">-        style=&quot;height:300px&quot;</span>
<a href="#l18.54"></a><span id="l18.54" class="difflineminus">-        onkeypress=&quot;userSelCallback(event)&quot;&gt;</span>
<a href="#l18.55"></a><span id="l18.55" class="difflineminus">-        &lt;!-- onclick=&quot;userSelCallback(event);&quot; --&gt;</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineminus">-</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineminus">-        &lt;treecols&gt;</span>
<a href="#l18.58"></a><span id="l18.58" class="difflineminus">-          &lt;treecol id=&quot;selectionCol&quot; style=&quot;width:19px&quot;</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineminus">-                   label=&quot;&amp;enigmail.keySelection.label;&quot;</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineminus">-                   class=&quot;treecol-image&quot;</span>
<a href="#l18.61"></a><span id="l18.61" class="difflineminus">-                   src=&quot;chrome://openpgp/content/ui/check1.png&quot;</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineminus">-                   ignoreincolumnpicker=&quot;true&quot;</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineminus">-                   persist=&quot;width&quot;/&gt;</span>
<a href="#l18.64"></a><span id="l18.64" class="difflineminus">-          &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l18.65"></a><span id="l18.65" class="difflineminus">-          &lt;treecol id=&quot;enigUserNameCol&quot; primary=&quot;true&quot;</span>
<a href="#l18.66"></a><span id="l18.66" class="difflineminus">-                   flex=&quot;1&quot;</span>
<a href="#l18.67"></a><span id="l18.67" class="difflineminus">-                   ignoreincolumnpicker=&quot;true&quot;</span>
<a href="#l18.68"></a><span id="l18.68" class="difflineminus">-                   label=&quot;&amp;enigmail.keyUserId.label;&quot;/&gt;</span>
<a href="#l18.69"></a><span id="l18.69" class="difflineminus">-          &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l18.70"></a><span id="l18.70" class="difflineminus">-          &lt;treecol id=&quot;uidValidityCol&quot; style=&quot;width:85px&quot;</span>
<a href="#l18.71"></a><span id="l18.71" class="difflineminus">-                   label=&quot;&amp;enigmail.uidValidity.label;&quot;</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineminus">-                   persist=&quot;width,hidden&quot;/&gt;</span>
<a href="#l18.73"></a><span id="l18.73" class="difflineminus">-          &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l18.74"></a><span id="l18.74" class="difflineminus">-          &lt;treecol id=&quot;expCol&quot; style=&quot;width:70px&quot;</span>
<a href="#l18.75"></a><span id="l18.75" class="difflineminus">-                   label=&quot;&amp;enigmail.keyExpiry.label;&quot;</span>
<a href="#l18.76"></a><span id="l18.76" class="difflineminus">-                   persist=&quot;width,hidden&quot;/&gt;</span>
<a href="#l18.77"></a><span id="l18.77" class="difflineminus">-          &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l18.78"></a><span id="l18.78" class="difflineminus">-          &lt;treecol id=&quot;keyCol&quot; style=&quot;width:90px&quot;</span>
<a href="#l18.79"></a><span id="l18.79" class="difflineminus">-                   label=&quot;&amp;enigmail.keyId.label;&quot;</span>
<a href="#l18.80"></a><span id="l18.80" class="difflineminus">-                   persist=&quot;width,hidden&quot;/&gt;</span>
<a href="#l18.81"></a><span id="l18.81" class="difflineminus">-        &lt;/treecols&gt;</span>
<a href="#l18.82"></a><span id="l18.82" class="difflineminus">-</span>
<a href="#l18.83"></a><span id="l18.83" class="difflineminus">-        &lt;treechildren id=&quot;enigmailUserIdSelectionChildren&quot;</span>
<a href="#l18.84"></a><span id="l18.84" class="difflineminus">-              properties=&quot;sendUnencrypted&quot;/&gt;</span>
<a href="#l18.85"></a><span id="l18.85" class="difflineminus">-</span>
<a href="#l18.86"></a><span id="l18.86" class="difflineminus">-      &lt;/tree&gt;</span>
<a href="#l18.87"></a><span id="l18.87" class="difflineminus">-    &lt;/vbox&gt;</span>
<a href="#l18.88"></a><span id="l18.88" class="difflineminus">-</span>
<a href="#l18.89"></a><span id="l18.89" class="difflineminus">-    &lt;checkbox id=&quot;enigmailUserSelSendEncrypted&quot;</span>
<a href="#l18.90"></a><span id="l18.90" class="difflineminus">-              label=&quot;&amp;enigmail.userSelSendEncrypted.label;&quot;</span>
<a href="#l18.91"></a><span id="l18.91" class="difflineminus">-              accesskey=&quot;&amp;enigmail.userSelSendEncrypted.accesskey;&quot;</span>
<a href="#l18.92"></a><span id="l18.92" class="difflineminus">-              checked=&quot;true&quot;</span>
<a href="#l18.93"></a><span id="l18.93" class="difflineminus">-              oncommand=&quot;switchSendEncryptedCallback();&quot;/&gt;</span>
<a href="#l18.94"></a><span id="l18.94" class="difflineminus">-    &lt;checkbox id=&quot;enigmailUserSelSendSigned&quot;</span>
<a href="#l18.95"></a><span id="l18.95" class="difflineminus">-              label=&quot;&amp;enigmail.userSelSendSigned.label;&quot;</span>
<a href="#l18.96"></a><span id="l18.96" class="difflineminus">-              accesskey=&quot;&amp;enigmail.userSelSendSigned.accesskey;&quot;</span>
<a href="#l18.97"></a><span id="l18.97" class="difflineminus">-              checked=&quot;true&quot;</span>
<a href="#l18.98"></a><span id="l18.98" class="difflineminus">-              oncommand=&quot;switchSendSignedCallback();&quot;/&gt;</span>
<a href="#l18.99"></a><span id="l18.99" class="difflineminus">-</span>
<a href="#l18.100"></a><span id="l18.100" class="difflineminus">-    &lt;checkbox id=&quot;displayNoLonger&quot;</span>
<a href="#l18.101"></a><span id="l18.101" class="difflineminus">-              label=&quot;&amp;enigmail.displayNoLonger.label;&quot;</span>
<a href="#l18.102"></a><span id="l18.102" class="difflineminus">-              disabled=&quot;true&quot;</span>
<a href="#l18.103"></a><span id="l18.103" class="difflineminus">-              collapsed=&quot;true&quot;/&gt;</span>
<a href="#l18.104"></a><span id="l18.104" class="difflineminus">-  &lt;/vbox&gt;</span>
<a href="#l18.105"></a><span id="l18.105" class="difflineminus">-</span>
<a href="#l18.106"></a><span id="l18.106" class="difflineminus">-  &lt;hbox&gt;</span>
<a href="#l18.107"></a><span id="l18.107" class="difflineminus">-    &lt;button class=&quot;dialog&quot;</span>
<a href="#l18.108"></a><span id="l18.108" class="difflineminus">-            id=&quot;refreshKeys&quot;</span>
<a href="#l18.109"></a><span id="l18.109" class="difflineminus">-            label=&quot;&amp;enigmail.refreshKeys.label;&quot;</span>
<a href="#l18.110"></a><span id="l18.110" class="difflineminus">-            accesskey=&quot;&amp;enigmail.refreshKeys.accesskey;&quot;</span>
<a href="#l18.111"></a><span id="l18.111" class="difflineminus">-            oncommand=&quot;refreshKeys();&quot;/&gt;</span>
<a href="#l18.112"></a><span id="l18.112" class="difflineminus">-</span>
<a href="#l18.113"></a><span id="l18.113" class="difflineminus">-    &lt;button class=&quot;dialog&quot;</span>
<a href="#l18.114"></a><span id="l18.114" class="difflineminus">-            halign=&quot;right&quot;</span>
<a href="#l18.115"></a><span id="l18.115" class="difflineminus">-            id=&quot;importMissingKeys&quot;</span>
<a href="#l18.116"></a><span id="l18.116" class="difflineminus">-            collapsed=&quot;true&quot;</span>
<a href="#l18.117"></a><span id="l18.117" class="difflineminus">-            label=&quot;&amp;enigmail.importMissingKeys.label;&quot;</span>
<a href="#l18.118"></a><span id="l18.118" class="difflineminus">-            accesskey=&quot;&amp;enigmail.importMissingKeys.accesskey;&quot;</span>
<a href="#l18.119"></a><span id="l18.119" class="difflineminus">-            tooltip=&quot;&amp;enigmail.importMissingKeys.tooltip;&quot;</span>
<a href="#l18.120"></a><span id="l18.120" class="difflineminus">-            oncommand=&quot;searchMissingKeys();&quot;/&gt;</span>
<a href="#l18.121"></a><span id="l18.121" class="difflineminus">-  &lt;/hbox&gt;</span>
<a href="#l18.122"></a><span id="l18.122" class="difflineminus">-&lt;/dialog&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeygen.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeygen.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -83,17 +83,17 @@ function enigmailKeygenLoad() {</span>
<a href="#l19.4"></a><span id="l19.4">   // restore safe setting, which you ALWAYS explicitly have to overrule,</span>
<a href="#l19.5"></a><span id="l19.5">   // if you don't want them:</span>
<a href="#l19.6"></a><span id="l19.6">   // - specify expiry date</span>
<a href="#l19.7"></a><span id="l19.7">   var noExpiry = document.getElementById(&quot;noExpiry&quot;);</span>
<a href="#l19.8"></a><span id="l19.8">   noExpiry.checked = false;</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10">   var enigmailSvc = GetEnigmailSvc();</span>
<a href="#l19.11"></a><span id="l19.11">   if (!enigmailSvc) {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-    EnigAlert(EnigGetString(&quot;accessError&quot;));</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+    throw new Error(&quot;GetEnigmailSvc failed&quot;);</span>
<a href="#l19.14"></a><span id="l19.14">   }</span>
<a href="#l19.15"></a><span id="l19.15"> }</span>
<a href="#l19.16"></a><span id="l19.16"> </span>
<a href="#l19.17"></a><span id="l19.17"> function updateKeySizeSel(selectedObj) {</span>
<a href="#l19.18"></a><span id="l19.18">   if (selectedObj.id === &quot;keyType_ecc&quot;) {</span>
<a href="#l19.19"></a><span id="l19.19">     document.getElementById(&quot;keySize&quot;).setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l19.20"></a><span id="l19.20">   } else {</span>
<a href="#l19.21"></a><span id="l19.21">     document.getElementById(&quot;keySize&quot;).removeAttribute(&quot;disabled&quot;);</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -176,18 +176,17 @@ function enigmailKeygenStart() {</span>
<a href="#l19.23"></a><span id="l19.23">     }</span>
<a href="#l19.24"></a><span id="l19.24">   }</span>
<a href="#l19.25"></a><span id="l19.25"> </span>
<a href="#l19.26"></a><span id="l19.26">   gGeneratedKey = null;</span>
<a href="#l19.27"></a><span id="l19.27">   gAllData = &quot;&quot;;</span>
<a href="#l19.28"></a><span id="l19.28"> </span>
<a href="#l19.29"></a><span id="l19.29">   var enigmailSvc = GetEnigmailSvc();</span>
<a href="#l19.30"></a><span id="l19.30">   if (!enigmailSvc) {</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-    EnigAlert(EnigGetString(&quot;accessError&quot;));</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-    return;</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineplus">+    throw new Error(&quot;GetEnigmailSvc failed&quot;);</span>
<a href="#l19.34"></a><span id="l19.34">   }</span>
<a href="#l19.35"></a><span id="l19.35"> </span>
<a href="#l19.36"></a><span id="l19.36">   var noExpiry = document.getElementById(&quot;noExpiry&quot;);</span>
<a href="#l19.37"></a><span id="l19.37">   var expireInput = document.getElementById(&quot;expireInput&quot;);</span>
<a href="#l19.38"></a><span id="l19.38">   var timeScale = document.getElementById(&quot;timeScale&quot;);</span>
<a href="#l19.39"></a><span id="l19.39"> </span>
<a href="#l19.40"></a><span id="l19.40">   var expiryTime = 0;</span>
<a href="#l19.41"></a><span id="l19.41">   if (!noExpiry.checked) {</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineat">@@ -247,17 +246,17 @@ function enigmailKeygenStart() {</span>
<a href="#l19.43"></a><span id="l19.43">   EnigmailWindows.keyManReloadKeys();</span>
<a href="#l19.44"></a><span id="l19.44"> </span>
<a href="#l19.45"></a><span id="l19.45">   gKeygenRequest = null;</span>
<a href="#l19.46"></a><span id="l19.46"> </span>
<a href="#l19.47"></a><span id="l19.47">   var progMeter = document.getElementById(&quot;keygenProgress&quot;);</span>
<a href="#l19.48"></a><span id="l19.48">   progMeter.setAttribute(&quot;value&quot;, 100);</span>
<a href="#l19.49"></a><span id="l19.49"> </span>
<a href="#l19.50"></a><span id="l19.50">   if (!gGeneratedKey || gGeneratedKey == KEYGEN_CANCELLED) {</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineminus">-    EnigAlert(EnigGetString(&quot;keyGenFailed&quot;));</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineplus">+    throw new Error(&quot;key generation failed&quot;);</span>
<a href="#l19.53"></a><span id="l19.53">   } else {</span>
<a href="#l19.54"></a><span id="l19.54">     console.debug(&quot;saving new key id &quot; + gGeneratedKey);</span>
<a href="#l19.55"></a><span id="l19.55">     curId.setCharAttribute(&quot;openpgp_key_id&quot;, gGeneratedKey);</span>
<a href="#l19.56"></a><span id="l19.56">     EnigSavePrefs();</span>
<a href="#l19.57"></a><span id="l19.57">   }</span>
<a href="#l19.58"></a><span id="l19.58"> </span>
<a href="#l19.59"></a><span id="l19.59">   closeAndReset();</span>
<a href="#l19.60"></a><span id="l19.60"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -234,24 +234,16 @@ Enigmail.msg = {</span>
<a href="#l20.4"></a><span id="l20.4">       &quot;Enigmail.msg.msgPrint('&quot;,</span>
<a href="#l20.5"></a><span id="l20.5">       &quot;');&quot;</span>
<a href="#l20.6"></a><span id="l20.6">     );</span>
<a href="#l20.7"></a><span id="l20.7"> </span>
<a href="#l20.8"></a><span id="l20.8">     //Enigmail.msg.overrideLayoutChange();</span>
<a href="#l20.9"></a><span id="l20.9">     //Enigmail.msg.prepareAppMenu();</span>
<a href="#l20.10"></a><span id="l20.10">     //Enigmail.msg.setMainMenuLabel();</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    let statusCol = document.getElementById(&quot;enigmailStatusCol&quot;);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-    if (statusCol) {</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-      statusCol.setAttribute(</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-        &quot;label&quot;,</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-        EnigmailLocale.getString(&quot;enigmail.msgViewColumn.label&quot;)</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-      );</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-    }</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-</span>
<a href="#l20.20"></a><span id="l20.20">     Enigmail.msg.savedHeaders = null;</span>
<a href="#l20.21"></a><span id="l20.21"> </span>
<a href="#l20.22"></a><span id="l20.22">     Enigmail.msg.decryptButton = document.getElementById(</span>
<a href="#l20.23"></a><span id="l20.23">       &quot;button-enigmail-decrypt&quot;</span>
<a href="#l20.24"></a><span id="l20.24">     );</span>
<a href="#l20.25"></a><span id="l20.25"> </span>
<a href="#l20.26"></a><span id="l20.26">     EnigmailTimer.setTimeout(function() {</span>
<a href="#l20.27"></a><span id="l20.27">       // if nothing happened, then load all keys after 1 hour</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineat">@@ -1593,23 +1585,23 @@ Enigmail.msg = {</span>
<a href="#l20.29"></a><span id="l20.29"> </span>
<a href="#l20.30"></a><span id="l20.30">     // TODO: what is blockSeparation ? How to emulate with RNP?</span>
<a href="#l20.31"></a><span id="l20.31">     /*</span>
<a href="#l20.32"></a><span id="l20.32">     if (blockSeparationObj.value.includes(&quot; &quot;)) {</span>
<a href="#l20.33"></a><span id="l20.33">       var blocks = blockSeparationObj.value.split(/ /);</span>
<a href="#l20.34"></a><span id="l20.34">       var blockInfo = blocks[0].split(/:/);</span>
<a href="#l20.35"></a><span id="l20.35">       plainText =</span>
<a href="#l20.36"></a><span id="l20.36">         EnigmailData.convertFromUnicode(</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-          EnigmailLocale.getString(&quot;notePartEncrypted&quot;),</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineplus">+          EnigmailLocale.getString(&quot;notePartEncrypted2&quot;),</span>
<a href="#l20.39"></a><span id="l20.39">           charset</span>
<a href="#l20.40"></a><span id="l20.40">         ) +</span>
<a href="#l20.41"></a><span id="l20.41">         &quot;\n\n&quot; +</span>
<a href="#l20.42"></a><span id="l20.42">         plainText.substr(0, blockInfo[1]) +</span>
<a href="#l20.43"></a><span id="l20.43">         &quot;\n\n&quot; +</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineminus">-        EnigmailLocale.getString(&quot;noteCutMessage&quot;);</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineplus">+        EnigmailLocale.getString(&quot;noteCutMessage2&quot;);</span>
<a href="#l20.46"></a><span id="l20.46">     }</span>
<a href="#l20.47"></a><span id="l20.47">     */</span>
<a href="#l20.48"></a><span id="l20.48"> </span>
<a href="#l20.49"></a><span id="l20.49">     // Save decrypted message status, headers, and content</span>
<a href="#l20.50"></a><span id="l20.50">     var headerList = {</span>
<a href="#l20.51"></a><span id="l20.51">       subject: &quot;&quot;,</span>
<a href="#l20.52"></a><span id="l20.52">       from: &quot;&quot;,</span>
<a href="#l20.53"></a><span id="l20.53">       date: &quot;&quot;,</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineat">@@ -2177,17 +2169,17 @@ Enigmail.msg = {</span>
<a href="#l20.55"></a><span id="l20.55"> </span>
<a href="#l20.56"></a><span id="l20.56">       contentData += &quot;\r\n&quot;;</span>
<a href="#l20.57"></a><span id="l20.57"> </span>
<a href="#l20.58"></a><span id="l20.58">       if (</span>
<a href="#l20.59"></a><span id="l20.59">         Enigmail.msg.decryptedMessage.hasAttachments &amp;&amp;</span>
<a href="#l20.60"></a><span id="l20.60">         !Enigmail.msg.decryptedMessage.attachmentsEncrypted</span>
<a href="#l20.61"></a><span id="l20.61">       ) {</span>
<a href="#l20.62"></a><span id="l20.62">         contentData += EnigmailData.convertFromUnicode(</span>
<a href="#l20.63"></a><span id="l20.63" class="difflineminus">-          EnigmailLocale.getString(&quot;enigContentNote&quot;),</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineplus">+          EnigmailLocale.getString(&quot;enigContentNote2&quot;),</span>
<a href="#l20.65"></a><span id="l20.65">           Enigmail.msg.decryptedMessage.charset</span>
<a href="#l20.66"></a><span id="l20.66">         );</span>
<a href="#l20.67"></a><span id="l20.67">       }</span>
<a href="#l20.68"></a><span id="l20.68"> </span>
<a href="#l20.69"></a><span id="l20.69">       contentData += Enigmail.msg.decryptedMessage.plainText;</span>
<a href="#l20.70"></a><span id="l20.70">     } else {</span>
<a href="#l20.71"></a><span id="l20.71">       // text/html or text/plain</span>
<a href="#l20.72"></a><span id="l20.72"> </span>
<a href="#l20.73"></a><span id="l20.73" class="difflineat">@@ -2197,27 +2189,20 @@ Enigmail.msg = {</span>
<a href="#l20.74"></a><span id="l20.74">           Enigmail.msg.decryptedMessage.charset +</span>
<a href="#l20.75"></a><span id="l20.75">           '&quot;&gt;\r\n';</span>
<a href="#l20.76"></a><span id="l20.76">         contentData += &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;\r\n&quot;;</span>
<a href="#l20.77"></a><span id="l20.77">       }</span>
<a href="#l20.78"></a><span id="l20.78"> </span>
<a href="#l20.79"></a><span id="l20.79">       if (statusLine) {</span>
<a href="#l20.80"></a><span id="l20.80">         if (contentType == &quot;text/html&quot;) {</span>
<a href="#l20.81"></a><span id="l20.81">           contentData +=</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineminus">-            &quot;&lt;b&gt;&quot; +</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineminus">-            EnigmailLocale.getString(&quot;enigHeader&quot;) +</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineminus">-            &quot;&lt;/b&gt; &quot; +</span>
<a href="#l20.85"></a><span id="l20.85">             EnigmailMsgRead.escapeTextForHTML(statusLine, false) +</span>
<a href="#l20.86"></a><span id="l20.86">             &quot;&lt;br&gt;\r\n&lt;hr&gt;\r\n&quot;;</span>
<a href="#l20.87"></a><span id="l20.87">         } else {</span>
<a href="#l20.88"></a><span id="l20.88" class="difflineminus">-          contentData +=</span>
<a href="#l20.89"></a><span id="l20.89" class="difflineminus">-            EnigmailLocale.getString(&quot;enigHeader&quot;) +</span>
<a href="#l20.90"></a><span id="l20.90" class="difflineminus">-            &quot; &quot; +</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineminus">-            statusLine +</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineminus">-            &quot;\r\n\r\n&quot;;</span>
<a href="#l20.93"></a><span id="l20.93" class="difflineplus">+          contentData += statusLine + &quot;\r\n\r\n&quot;;</span>
<a href="#l20.94"></a><span id="l20.94">         }</span>
<a href="#l20.95"></a><span id="l20.95">       }</span>
<a href="#l20.96"></a><span id="l20.96"> </span>
<a href="#l20.97"></a><span id="l20.97">       if (includeHeaders) {</span>
<a href="#l20.98"></a><span id="l20.98">         for (headerName in headerList) {</span>
<a href="#l20.99"></a><span id="l20.99">           let headerValue = headerList[headerName];</span>
<a href="#l20.100"></a><span id="l20.100"> </span>
<a href="#l20.101"></a><span id="l20.101">           if (headerValue) {</span>
<a href="#l20.102"></a><span id="l20.102" class="difflineat">@@ -2785,17 +2770,17 @@ Enigmail.msg = {</span>
<a href="#l20.103"></a><span id="l20.103">       if (origFilename &amp;&amp; origFilename.length &gt; rawFileName.length) {</span>
<a href="#l20.104"></a><span id="l20.104">         rawFileName = origFilename;</span>
<a href="#l20.105"></a><span id="l20.105">       }</span>
<a href="#l20.106"></a><span id="l20.106">     }</span>
<a href="#l20.107"></a><span id="l20.107"> </span>
<a href="#l20.108"></a><span id="l20.108">     if (callbackArg.actionType == &quot;saveAttachment&quot;) {</span>
<a href="#l20.109"></a><span id="l20.109">       outFile = EnigmailDialog.filePicker(</span>
<a href="#l20.110"></a><span id="l20.110">         window,</span>
<a href="#l20.111"></a><span id="l20.111" class="difflineminus">-        EnigmailLocale.getString(&quot;saveAttachmentHeader&quot;),</span>
<a href="#l20.112"></a><span id="l20.112" class="difflineplus">+        EnigmailLocale.getString(&quot;saveAttachmentHeader2&quot;),</span>
<a href="#l20.113"></a><span id="l20.113">         Enigmail.msg.lastSaveDir,</span>
<a href="#l20.114"></a><span id="l20.114">         true,</span>
<a href="#l20.115"></a><span id="l20.115">         &quot;&quot;,</span>
<a href="#l20.116"></a><span id="l20.116">         rawFileName,</span>
<a href="#l20.117"></a><span id="l20.117">         null</span>
<a href="#l20.118"></a><span id="l20.118">       );</span>
<a href="#l20.119"></a><span id="l20.119">       if (!outFile) {</span>
<a href="#l20.120"></a><span id="l20.120">         return;</span>
<a href="#l20.121"></a><span id="l20.121" class="difflineat">@@ -3283,67 +3268,16 @@ Enigmail.msg = {</span>
<a href="#l20.122"></a><span id="l20.122"> </span>
<a href="#l20.123"></a><span id="l20.123">   performAutocryptSetup(passwd = null) {</span>
<a href="#l20.124"></a><span id="l20.124">     EnigmailLog.DEBUG(&quot;enigmailMessengerOverlay.js: performAutocryptSetup()\n&quot;);</span>
<a href="#l20.125"></a><span id="l20.125"> </span>
<a href="#l20.126"></a><span id="l20.126">     EnigmailDialog.alert(</span>
<a href="#l20.127"></a><span id="l20.127">       window,</span>
<a href="#l20.128"></a><span id="l20.128">       &quot;EnigmailAutocrypt.handleBackupMessage not implemented&quot;</span>
<a href="#l20.129"></a><span id="l20.129">     );</span>
<a href="#l20.130"></a><span id="l20.130" class="difflineminus">-</span>
<a href="#l20.131"></a><span id="l20.131" class="difflineminus">-    /*</span>
<a href="#l20.132"></a><span id="l20.132" class="difflineminus">-    if ((&quot;message-id&quot; in currentHeaderData) &amp;&amp; EnigmailAutocrypt.isSelfCreatedSetupMessage(currentHeaderData[&quot;message-id&quot;].headerValue)) {</span>
<a href="#l20.133"></a><span id="l20.133" class="difflineminus">-      EnigmailDialog.info(window, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.selfCreated&quot;));</span>
<a href="#l20.134"></a><span id="l20.134" class="difflineminus">-      return;</span>
<a href="#l20.135"></a><span id="l20.135" class="difflineminus">-    }</span>
<a href="#l20.136"></a><span id="l20.136" class="difflineminus">-</span>
<a href="#l20.137"></a><span id="l20.137" class="difflineminus">-    if (EnigmailAutocrypt.isAccountSetupForPgp(currentHeaderData.from.headerValue)) {</span>
<a href="#l20.138"></a><span id="l20.138" class="difflineminus">-      // Ask user what to do if the account is already correctly configured</span>
<a href="#l20.139"></a><span id="l20.139" class="difflineminus">-</span>
<a href="#l20.140"></a><span id="l20.140" class="difflineminus">-      if (!EnigmailDialog.confirmDlg(window,</span>
<a href="#l20.141"></a><span id="l20.141" class="difflineminus">-          EnigmailLocale.getString(&quot;autocrypt.importSetupKey.accountPreconfigured&quot;),</span>
<a href="#l20.142"></a><span id="l20.142" class="difflineminus">-          EnigmailLocale.getString(&quot;dlg.button.overwrite&quot;),</span>
<a href="#l20.143"></a><span id="l20.143" class="difflineminus">-          EnigmailLocale.getString(&quot;dlg.button.cancel&quot;)</span>
<a href="#l20.144"></a><span id="l20.144" class="difflineminus">-        )) {</span>
<a href="#l20.145"></a><span id="l20.145" class="difflineminus">-        return;</span>
<a href="#l20.146"></a><span id="l20.146" class="difflineminus">-      }</span>
<a href="#l20.147"></a><span id="l20.147" class="difflineminus">-    }</span>
<a href="#l20.148"></a><span id="l20.148" class="difflineminus">-</span>
<a href="#l20.149"></a><span id="l20.149" class="difflineminus">-    if (currentAttachments[0].contentType.search(/^application\/autocrypt-setup$/i) === 0) {</span>
<a href="#l20.150"></a><span id="l20.150" class="difflineminus">-</span>
<a href="#l20.151"></a><span id="l20.151" class="difflineminus">-      EnigmailAutocrypt.getSetupMessageData(currentAttachments[0].url).then(res =&gt; {</span>
<a href="#l20.152"></a><span id="l20.152" class="difflineminus">-        passwd = EnigmailWindows.autocryptSetupPasswd(window, &quot;input&quot;, res.passphraseFormat, passwd || res.passphraseHint);</span>
<a href="#l20.153"></a><span id="l20.153" class="difflineminus">-</span>
<a href="#l20.154"></a><span id="l20.154" class="difflineminus">-        if ((!passwd) || passwd == &quot;&quot;) {</span>
<a href="#l20.155"></a><span id="l20.155" class="difflineminus">-          throw new Error(&quot;noPasswd&quot;);</span>
<a href="#l20.156"></a><span id="l20.156" class="difflineminus">-        }</span>
<a href="#l20.157"></a><span id="l20.157" class="difflineminus">-</span>
<a href="#l20.158"></a><span id="l20.158" class="difflineminus">-        // TODO: return EnigmailAutocrypt.handleBackupMessage(passwd, res.attachmentData, currentHeaderData.from.headerValue);</span>
<a href="#l20.159"></a><span id="l20.159" class="difflineminus">-      }).then(res =&gt; {</span>
<a href="#l20.160"></a><span id="l20.160" class="difflineminus">-        EnigmailDialog.info(window, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.success&quot;, currentHeaderData.from.headerValue));</span>
<a href="#l20.161"></a><span id="l20.161" class="difflineminus">-      }).catch(err =&gt; {</span>
<a href="#l20.162"></a><span id="l20.162" class="difflineminus">-        EnigmailLog.DEBUG(&quot;enigmailMessengerOverlay.js: performAutocryptSetup got cancel status=&quot; + err + &quot;\n&quot;);</span>
<a href="#l20.163"></a><span id="l20.163" class="difflineminus">-</span>
<a href="#l20.164"></a><span id="l20.164" class="difflineminus">-        switch (err) {</span>
<a href="#l20.165"></a><span id="l20.165" class="difflineminus">-          case &quot;getSetupMessageData&quot;:</span>
<a href="#l20.166"></a><span id="l20.166" class="difflineminus">-            EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.invalidMessage&quot;));</span>
<a href="#l20.167"></a><span id="l20.167" class="difflineminus">-            break;</span>
<a href="#l20.168"></a><span id="l20.168" class="difflineminus">-          case &quot;wrongPasswd&quot;:</span>
<a href="#l20.169"></a><span id="l20.169" class="difflineminus">-            if (EnigmailDialog.confirmDlg(window, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.wrongPasswd&quot;), EnigmailLocale.getString(&quot;dlg.button.retry&quot;),</span>
<a href="#l20.170"></a><span id="l20.170" class="difflineminus">-                EnigmailLocale.getString(&quot;dlg.button.cancel&quot;))) {</span>
<a href="#l20.171"></a><span id="l20.171" class="difflineminus">-              Enigmail.msg.performAutocryptSetup(passwd);</span>
<a href="#l20.172"></a><span id="l20.172" class="difflineminus">-            }</span>
<a href="#l20.173"></a><span id="l20.173" class="difflineminus">-            break;</span>
<a href="#l20.174"></a><span id="l20.174" class="difflineminus">-          case &quot;keyImportFailed&quot;:</span>
<a href="#l20.175"></a><span id="l20.175" class="difflineminus">-            EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;autocrypt.importSetupKey.invalidKey&quot;));</span>
<a href="#l20.176"></a><span id="l20.176" class="difflineminus">-            break;</span>
<a href="#l20.177"></a><span id="l20.177" class="difflineminus">-        }</span>
<a href="#l20.178"></a><span id="l20.178" class="difflineminus">-      });</span>
<a href="#l20.179"></a><span id="l20.179" class="difflineminus">-    }</span>
<a href="#l20.180"></a><span id="l20.180" class="difflineminus">-    */</span>
<a href="#l20.181"></a><span id="l20.181">   },</span>
<a href="#l20.182"></a><span id="l20.182"> </span>
<a href="#l20.183"></a><span id="l20.183">   onUnloadEnigmail() {</span>
<a href="#l20.184"></a><span id="l20.184">     //EnigmailLog.DEBUG(&quot;enigmailMessengerOverlay.js: onUnloadEnigmail()\n&quot;);</span>
<a href="#l20.185"></a><span id="l20.185"> </span>
<a href="#l20.186"></a><span id="l20.186">     window.removeEventListener(&quot;unload&quot;, Enigmail.msg.messengerClose);</span>
<a href="#l20.187"></a><span id="l20.187">     window.removeEventListener(</span>
<a href="#l20.188"></a><span id="l20.188">       &quot;unload-enigmail&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgBox.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgBox.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -62,17 +62,17 @@ function onLoad() {</span>
<a href="#l21.4"></a><span id="l21.4">     if (EnigmailOS.isMac) {</span>
<a href="#l21.5"></a><span id="l21.5">       let t = document.getElementById(&quot;macosDialogTitle&quot;);</span>
<a href="#l21.6"></a><span id="l21.6">       t.setAttribute(&quot;value&quot;, args.dialogTitle);</span>
<a href="#l21.7"></a><span id="l21.7">       t.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l21.8"></a><span id="l21.8">     }</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10">     dlg.setAttribute(&quot;title&quot;, args.dialogTitle);</span>
<a href="#l21.11"></a><span id="l21.11">   } else {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    dlg.setAttribute(&quot;title&quot;, EnigmailLocale.getString(&quot;enigAlert&quot;));</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+    dlg.setAttribute(&quot;title&quot;, EnigmailLocale.getString(&quot;enigAlert2&quot;));</span>
<a href="#l21.14"></a><span id="l21.14">   }</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16">   if (button1) {</span>
<a href="#l21.17"></a><span id="l21.17">     setButton(&quot;accept&quot;, button1);</span>
<a href="#l21.18"></a><span id="l21.18">   }</span>
<a href="#l21.19"></a><span id="l21.19">   if (button2) {</span>
<a href="#l21.20"></a><span id="l21.20">     setButton(&quot;extra1&quot;, button2);</span>
<a href="#l21.21"></a><span id="l21.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -223,26 +223,24 @@ Enigmail.msg = {</span>
<a href="#l22.4"></a><span id="l22.4">     // - defaultSigningPolicy</span>
<a href="#l22.5"></a><span id="l22.5">     // possible values to check:</span>
<a href="#l22.6"></a><span id="l22.6">     // - Enigmail.msg.wasEnigmailAddOnInstalled()</span>
<a href="#l22.7"></a><span id="l22.7">     // - Enigmail.msg.wasEnigmailEnabledForIdentity</span>
<a href="#l22.8"></a><span id="l22.8">     // - this.identity.getIntAttribute(&quot;mimePreferOpenPGP&quot;) &gt; 0</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10">     Enigmail.msg.composeOpen();</span>
<a href="#l22.11"></a><span id="l22.11">     //Enigmail.msg.processFinalState();</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    Enigmail.msg.updateStatusBar();</span>
<a href="#l22.13"></a><span id="l22.13">     await Enigmail.msg.initialSendFlags();</span>
<a href="#l22.14"></a><span id="l22.14"> </span>
<a href="#l22.15"></a><span id="l22.15">     //Enigmail.msg.setFinalSendMode('final-pgpmimeYes');</span>
<a href="#l22.16"></a><span id="l22.16">   },</span>
<a href="#l22.17"></a><span id="l22.17"> </span>
<a href="#l22.18"></a><span id="l22.18">   // TODO: call this from global compose when options change</span>
<a href="#l22.19"></a><span id="l22.19">   enigmailComposeProcessFinalState() {</span>
<a href="#l22.20"></a><span id="l22.20">     //Enigmail.msg.processFinalState();</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineminus">-    Enigmail.msg.updateStatusBar();</span>
<a href="#l22.22"></a><span id="l22.22">   },</span>
<a href="#l22.23"></a><span id="l22.23"> </span>
<a href="#l22.24"></a><span id="l22.24">   /*</span>
<a href="#l22.25"></a><span id="l22.25">   handleClick: function(event, modifyType) {</span>
<a href="#l22.26"></a><span id="l22.26">     EnigmailLog.DEBUG(&quot;enigmailMsgComposeOverlay.js: Enigmail.msg.handleClick\n&quot;);</span>
<a href="#l22.27"></a><span id="l22.27">     switch (event.button) {</span>
<a href="#l22.28"></a><span id="l22.28">       case 2:</span>
<a href="#l22.29"></a><span id="l22.29">         // do not process the event any futher</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineat">@@ -410,17 +408,16 @@ Enigmail.msg = {</span>
<a href="#l22.31"></a><span id="l22.31">     // instead of sendModeDirty, use gUserTouched*</span>
<a href="#l22.32"></a><span id="l22.32"> </span>
<a href="#l22.33"></a><span id="l22.33">     /*</span>
<a href="#l22.34"></a><span id="l22.34">     if (!this.sendModeDirty) {</span>
<a href="#l22.35"></a><span id="l22.35">       //this.mimePreferOpenPGP = this.identity.getIntAttribute(&quot;mimePreferOpenPGP&quot;);</span>
<a href="#l22.36"></a><span id="l22.36">       //this.processAccountSpecificDefaultOptions();</span>
<a href="#l22.37"></a><span id="l22.37">       this.determineSendFlags(); // important to use identity specific settings</span>
<a href="#l22.38"></a><span id="l22.38">       //this.processFinalState();</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineminus">-      this.updateStatusBar();</span>
<a href="#l22.40"></a><span id="l22.40">     }</span>
<a href="#l22.41"></a><span id="l22.41">     */</span>
<a href="#l22.42"></a><span id="l22.42">   },</span>
<a href="#l22.43"></a><span id="l22.43"> </span>
<a href="#l22.44"></a><span id="l22.44">   /*</span>
<a href="#l22.45"></a><span id="l22.45">   // set the current default for sending a message</span>
<a href="#l22.46"></a><span id="l22.46">   // depending on the identity</span>
<a href="#l22.47"></a><span id="l22.47">   processAccountSpecificDefaultOptions: function() {</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineat">@@ -818,17 +815,16 @@ Enigmail.msg = {</span>
<a href="#l22.49"></a><span id="l22.49">     }</span>
<a href="#l22.50"></a><span id="l22.50"> </span>
<a href="#l22.51"></a><span id="l22.51">     try {</span>
<a href="#l22.52"></a><span id="l22.52">       // TB only</span>
<a href="#l22.53"></a><span id="l22.53">       UpdateAttachmentBucket(bucketList.hasChildNodes());</span>
<a href="#l22.54"></a><span id="l22.54">     } catch (ex) {}</span>
<a href="#l22.55"></a><span id="l22.55"> </span>
<a href="#l22.56"></a><span id="l22.56">     //this.processFinalState();</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineminus">-    this.updateStatusBar();</span>
<a href="#l22.58"></a><span id="l22.58">     if (selectedElement) {</span>
<a href="#l22.59"></a><span id="l22.59">       selectedElement.focus();</span>
<a href="#l22.60"></a><span id="l22.60">     }</span>
<a href="#l22.61"></a><span id="l22.61">   },</span>
<a href="#l22.62"></a><span id="l22.62"> </span>
<a href="#l22.63"></a><span id="l22.63">   // check if an signature is related to another attachment</span>
<a href="#l22.64"></a><span id="l22.64">   findRelatedAttachment(bucketList, node) {</span>
<a href="#l22.65"></a><span id="l22.65">     // check if filename ends with .sig</span>
<a href="#l22.66"></a><span id="l22.66" class="difflineat">@@ -857,17 +853,16 @@ Enigmail.msg = {</span>
<a href="#l22.67"></a><span id="l22.67">     EnigmailTimer.setTimeout(</span>
<a href="#l22.68"></a><span id="l22.68">       async function() {</span>
<a href="#l22.69"></a><span id="l22.69">         EnigmailLog.DEBUG(</span>
<a href="#l22.70"></a><span id="l22.70">           &quot;enigmailMsgComposeOverlay: re-determine send flags\n&quot;</span>
<a href="#l22.71"></a><span id="l22.71">         );</span>
<a href="#l22.72"></a><span id="l22.72">         try {</span>
<a href="#l22.73"></a><span id="l22.73">           await this.determineSendFlags();</span>
<a href="#l22.74"></a><span id="l22.74">           //this.processFinalState();</span>
<a href="#l22.75"></a><span id="l22.75" class="difflineminus">-          this.updateStatusBar();</span>
<a href="#l22.76"></a><span id="l22.76">         } catch (ex) {</span>
<a href="#l22.77"></a><span id="l22.77">           EnigmailLog.DEBUG(</span>
<a href="#l22.78"></a><span id="l22.78">             &quot;enigmailMsgComposeOverlay: re-determine send flags - ERROR: &quot; +</span>
<a href="#l22.79"></a><span id="l22.79">               ex.toString() +</span>
<a href="#l22.80"></a><span id="l22.80">               &quot;\n&quot;</span>
<a href="#l22.81"></a><span id="l22.81">           );</span>
<a href="#l22.82"></a><span id="l22.82">         }</span>
<a href="#l22.83"></a><span id="l22.83">       }.bind(Enigmail.msg),</span>
<a href="#l22.84"></a><span id="l22.84" class="difflineat">@@ -1336,27 +1331,17 @@ Enigmail.msg = {</span>
<a href="#l22.85"></a><span id="l22.85"> </span>
<a href="#l22.86"></a><span id="l22.86">     if (Enigmail.msg.wasEnigmailEnabledForIdentity()) {</span>
<a href="#l22.87"></a><span id="l22.87">       EnigmailCore.getService(window); // try to access Enigmail to launch the wizard if needed</span>
<a href="#l22.88"></a><span id="l22.88">     }</span>
<a href="#l22.89"></a><span id="l22.89"> </span>
<a href="#l22.90"></a><span id="l22.90">     // ignore settings for this account?</span>
<a href="#l22.91"></a><span id="l22.91">     try {</span>
<a href="#l22.92"></a><span id="l22.92">       if (!this.isAnyEncryptionEnabled() &amp;&amp; !this.getSigningEnabled()) {</span>
<a href="#l22.93"></a><span id="l22.93" class="difflineminus">-        if (EnigmailDialog.confirmDlg(window, EnigmailLocale.getString(&quot;configureNow&quot;),</span>
<a href="#l22.94"></a><span id="l22.94" class="difflineminus">-            EnigmailLocale.getString(&quot;msgCompose.button.configure&quot;))) {</span>
<a href="#l22.95"></a><span id="l22.95" class="difflineminus">-          // configure account settings for the first time</span>
<a href="#l22.96"></a><span id="l22.96" class="difflineminus">-          this.goAccountManager();</span>
<a href="#l22.97"></a><span id="l22.97" class="difflineminus">-          if (!Enigmail.msg.wasEnigmailEnabledForIdentity()) {</span>
<a href="#l22.98"></a><span id="l22.98" class="difflineminus">-            return;</span>
<a href="#l22.99"></a><span id="l22.99" class="difflineminus">-          }</span>
<a href="#l22.100"></a><span id="l22.100" class="difflineminus">-        }</span>
<a href="#l22.101"></a><span id="l22.101" class="difflineminus">-        else {</span>
<a href="#l22.102"></a><span id="l22.102" class="difflineminus">-          return;</span>
<a href="#l22.103"></a><span id="l22.103" class="difflineminus">-        }</span>
<a href="#l22.104"></a><span id="l22.104" class="difflineplus">+        return;</span>
<a href="#l22.105"></a><span id="l22.105">       }</span>
<a href="#l22.106"></a><span id="l22.106">     }</span>
<a href="#l22.107"></a><span id="l22.107">     catch (ex) {}</span>
<a href="#l22.108"></a><span id="l22.108"> </span>
<a href="#l22.109"></a><span id="l22.109">     switch (what) {</span>
<a href="#l22.110"></a><span id="l22.110">       case 'sign':</span>
<a href="#l22.111"></a><span id="l22.111">       case 'encrypt':</span>
<a href="#l22.112"></a><span id="l22.112">         this.setSendMode(what);</span>
<a href="#l22.113"></a><span id="l22.113" class="difflineat">@@ -1400,17 +1385,16 @@ Enigmail.msg = {</span>
<a href="#l22.114"></a><span id="l22.114">         break;</span>
<a href="#l22.115"></a><span id="l22.115">     }</span>
<a href="#l22.116"></a><span id="l22.116">     // sendMode changed ?</span>
<a href="#l22.117"></a><span id="l22.117">     // - sign and send are internal initializations</span>
<a href="#l22.118"></a><span id="l22.118">     if (!this.sendModeDirty &amp;&amp; (this.sendMode != origSendMode) &amp;&amp; sendMode != 'sign' &amp;&amp; sendMode != 'encrypt') {</span>
<a href="#l22.119"></a><span id="l22.119">       this.sendModeDirty = true;</span>
<a href="#l22.120"></a><span id="l22.120">     }</span>
<a href="#l22.121"></a><span id="l22.121">     this.processFinalState();</span>
<a href="#l22.122"></a><span id="l22.122" class="difflineminus">-    this.updateStatusBar();</span>
<a href="#l22.123"></a><span id="l22.123">   },</span>
<a href="#l22.124"></a><span id="l22.124">   */</span>
<a href="#l22.125"></a><span id="l22.125"> </span>
<a href="#l22.126"></a><span id="l22.126">   /**</span>
<a href="#l22.127"></a><span id="l22.127">     key function to process the final encrypt/sign/pgpmime state from all settings</span>
<a href="#l22.128"></a><span id="l22.128">     @param sendFlags: contains the sendFlags if the message is really processed. Optional, can be null</span>
<a href="#l22.129"></a><span id="l22.129">       - uses as INPUT:</span>
<a href="#l22.130"></a><span id="l22.130">          - this.sendMode</span>
<a href="#l22.131"></a><span id="l22.131" class="difflineat">@@ -1471,174 +1455,16 @@ Enigmail.msg = {</span>
<a href="#l22.132"></a><span id="l22.132">       try {</span>
<a href="#l22.133"></a><span id="l22.133">         setSecuritySettings(&quot;2&quot;);</span>
<a href="#l22.134"></a><span id="l22.134">       }</span>
<a href="#l22.135"></a><span id="l22.135">       catch (ex) {}</span>
<a href="#l22.136"></a><span id="l22.136">     }</span>
<a href="#l22.137"></a><span id="l22.137">     */</span>
<a href="#l22.138"></a><span id="l22.138">   },</span>
<a href="#l22.139"></a><span id="l22.139"> </span>
<a href="#l22.140"></a><span id="l22.140" class="difflineminus">-  // process icon/strings of status bar buttons and menu entries according to final encrypt/sign/pgpmime status</span>
<a href="#l22.141"></a><span id="l22.141" class="difflineminus">-  // - uses as INPUT:</span>
<a href="#l22.142"></a><span id="l22.142" class="difflineminus">-  //   - this.statusEncrypt, this.statusSign</span>
<a href="#l22.143"></a><span id="l22.143" class="difflineminus">-  // - uses as OUTPUT:</span>
<a href="#l22.144"></a><span id="l22.144" class="difflineminus">-  //   - resulting icon symbols</span>
<a href="#l22.145"></a><span id="l22.145" class="difflineminus">-  //   - this.statusEncryptStr, this.statusSignStr, this.statusPGPMimeStr, this.statusInlinePGPStr, this.statusAttachOwnKey</span>
<a href="#l22.146"></a><span id="l22.146" class="difflineminus">-  //   - this.statusSMimeStr</span>
<a href="#l22.147"></a><span id="l22.147" class="difflineminus">-  updateStatusBar() {</span>
<a href="#l22.148"></a><span id="l22.148" class="difflineminus">-    /*</span>
<a href="#l22.149"></a><span id="l22.149" class="difflineminus">-    EnigmailLog.DEBUG(&quot;enigmailMsgComposeOverlay.js: Enigmail.msg.updateStatusBar()\n&quot;);</span>
<a href="#l22.150"></a><span id="l22.150" class="difflineminus">-</span>
<a href="#l22.151"></a><span id="l22.151" class="difflineminus">-    if (!this.identity) {</span>
<a href="#l22.152"></a><span id="l22.152" class="difflineminus">-      this.identity = getCurrentIdentity();</span>
<a href="#l22.153"></a><span id="l22.153" class="difflineminus">-    }</span>
<a href="#l22.154"></a><span id="l22.154" class="difflineminus">-</span>
<a href="#l22.155"></a><span id="l22.155" class="difflineminus">-    var toolbarTxt = document.getElementById(&quot;enigmail-toolbar-text&quot;);</span>
<a href="#l22.156"></a><span id="l22.156" class="difflineminus">-    var encBroadcaster = document.getElementById(&quot;enigmail-bc-encrypt&quot;);</span>
<a href="#l22.157"></a><span id="l22.157" class="difflineminus">-    var signBroadcaster = document.getElementById(&quot;enigmail-bc-sign&quot;);</span>
<a href="#l22.158"></a><span id="l22.158" class="difflineminus">-    var attachBroadcaster = document.getElementById(&quot;enigmail-bc-attach&quot;);</span>
<a href="#l22.159"></a><span id="l22.159" class="difflineminus">-</span>
<a href="#l22.160"></a><span id="l22.160" class="difflineminus">-    let enc = this.isAnyEncryptionEnabled();</span>
<a href="#l22.161"></a><span id="l22.161" class="difflineminus">-    let sign = this.getSigningEnabled();</span>
<a href="#l22.162"></a><span id="l22.162" class="difflineminus">-    // enigmail disabled for this identity?:</span>
<a href="#l22.163"></a><span id="l22.163" class="difflineminus">-    if (!enc) {</span>
<a href="#l22.164"></a><span id="l22.164" class="difflineminus">-      // hide icons if enigmail not enabled</span>
<a href="#l22.165"></a><span id="l22.165" class="difflineminus">-      encBroadcaster.removeAttribute(&quot;encrypted&quot;);</span>
<a href="#l22.166"></a><span id="l22.166" class="difflineminus">-      encBroadcaster.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l22.167"></a><span id="l22.167" class="difflineminus">-    }</span>
<a href="#l22.168"></a><span id="l22.168" class="difflineminus">-    else {</span>
<a href="#l22.169"></a><span id="l22.169" class="difflineminus">-      encBroadcaster.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l22.170"></a><span id="l22.170" class="difflineminus">-    }</span>
<a href="#l22.171"></a><span id="l22.171" class="difflineminus">-</span>
<a href="#l22.172"></a><span id="l22.172" class="difflineminus">-    if (!sign) {</span>
<a href="#l22.173"></a><span id="l22.173" class="difflineminus">-      signBroadcaster.removeAttribute(&quot;signed&quot;);</span>
<a href="#l22.174"></a><span id="l22.174" class="difflineminus">-      signBroadcaster.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l22.175"></a><span id="l22.175" class="difflineminus">-      attachBroadcaster.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l22.176"></a><span id="l22.176" class="difflineminus">-    }</span>
<a href="#l22.177"></a><span id="l22.177" class="difflineminus">-    else {</span>
<a href="#l22.178"></a><span id="l22.178" class="difflineminus">-      signBroadcaster.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l22.179"></a><span id="l22.179" class="difflineminus">-      attachBroadcaster.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l22.180"></a><span id="l22.180" class="difflineminus">-    }</span>
<a href="#l22.181"></a><span id="l22.181" class="difflineminus">-</span>
<a href="#l22.182"></a><span id="l22.182" class="difflineminus">-    if (!(enc || sign)) {</span>
<a href="#l22.183"></a><span id="l22.183" class="difflineminus">-      if (toolbarTxt) {</span>
<a href="#l22.184"></a><span id="l22.184" class="difflineminus">-        toolbarTxt.value = EnigmailLocale.getString(&quot;msgCompose.toolbarTxt.disabled&quot;);</span>
<a href="#l22.185"></a><span id="l22.185" class="difflineminus">-        toolbarTxt.removeAttribute(&quot;class&quot;);</span>
<a href="#l22.186"></a><span id="l22.186" class="difflineminus">-      }</span>
<a href="#l22.187"></a><span id="l22.187" class="difflineminus">-      return;</span>
<a href="#l22.188"></a><span id="l22.188" class="difflineminus">-    }</span>
<a href="#l22.189"></a><span id="l22.189" class="difflineminus">-</span>
<a href="#l22.190"></a><span id="l22.190" class="difflineminus">-    // process resulting icon symbol and status strings for encrypt mode</span>
<a href="#l22.191"></a><span id="l22.191" class="difflineminus">-    var encSymbol = null;</span>
<a href="#l22.192"></a><span id="l22.192" class="difflineminus">-    var doEncrypt = false;</span>
<a href="#l22.193"></a><span id="l22.193" class="difflineminus">-    var encReasonStr = null;</span>
<a href="#l22.194"></a><span id="l22.194" class="difflineminus">-</span>
<a href="#l22.195"></a><span id="l22.195" class="difflineminus">-    // update encrypt icon and tooltip/menu-text</span>
<a href="#l22.196"></a><span id="l22.196" class="difflineminus">-    encBroadcaster.setAttribute(&quot;encrypted&quot;, encSymbol);</span>
<a href="#l22.197"></a><span id="l22.197" class="difflineminus">-    var encIcon = document.getElementById(&quot;button-enigmail-encrypt&quot;);</span>
<a href="#l22.198"></a><span id="l22.198" class="difflineminus">-    if (encIcon) {</span>
<a href="#l22.199"></a><span id="l22.199" class="difflineminus">-      encIcon.setAttribute(&quot;tooltiptext&quot;, encReasonStr);</span>
<a href="#l22.200"></a><span id="l22.200" class="difflineminus">-    }</span>
<a href="#l22.201"></a><span id="l22.201" class="difflineminus">-    this.statusEncryptedStr = encStr;</span>
<a href="#l22.202"></a><span id="l22.202" class="difflineminus">-    this.setChecked(&quot;enigmail-bc-encrypt&quot;, doEncrypt);</span>
<a href="#l22.203"></a><span id="l22.203" class="difflineminus">-</span>
<a href="#l22.204"></a><span id="l22.204" class="difflineminus">-    // process resulting icon symbol for sign mode</span>
<a href="#l22.205"></a><span id="l22.205" class="difflineminus">-    var signSymbol = null;</span>
<a href="#l22.206"></a><span id="l22.206" class="difflineminus">-    var doSign = false;</span>
<a href="#l22.207"></a><span id="l22.207" class="difflineminus">-</span>
<a href="#l22.208"></a><span id="l22.208" class="difflineminus">-    // update sign icon and tooltip/menu-text</span>
<a href="#l22.209"></a><span id="l22.209" class="difflineminus">-    signBroadcaster.setAttribute(&quot;signed&quot;, signSymbol);</span>
<a href="#l22.210"></a><span id="l22.210" class="difflineminus">-    var signIcon = document.getElementById(&quot;button-enigmail-sign&quot;);</span>
<a href="#l22.211"></a><span id="l22.211" class="difflineminus">-    if (signIcon) {</span>
<a href="#l22.212"></a><span id="l22.212" class="difflineminus">-      signIcon.setAttribute(&quot;tooltiptext&quot;, signReasonStr);</span>
<a href="#l22.213"></a><span id="l22.213" class="difflineminus">-    }</span>
<a href="#l22.214"></a><span id="l22.214" class="difflineminus">-    this.statusSignedStr = signStr;</span>
<a href="#l22.215"></a><span id="l22.215" class="difflineminus">-    this.setChecked(&quot;enigmail-bc-sign&quot;, doSign);</span>
<a href="#l22.216"></a><span id="l22.216" class="difflineminus">-</span>
<a href="#l22.217"></a><span id="l22.217" class="difflineminus">-    // process resulting toolbar message</span>
<a href="#l22.218"></a><span id="l22.218" class="difflineminus">-    var toolbarMsg = &quot;&quot;;</span>
<a href="#l22.219"></a><span id="l22.219" class="difflineminus">-    if (doSign &amp;&amp; doEncrypt) {</span>
<a href="#l22.220"></a><span id="l22.220" class="difflineminus">-      toolbarMsg = EnigmailLocale.getString(&quot;msgCompose.toolbarTxt.signAndEncrypt&quot;);</span>
<a href="#l22.221"></a><span id="l22.221" class="difflineminus">-    }</span>
<a href="#l22.222"></a><span id="l22.222" class="difflineminus">-    else if (doSign) {</span>
<a href="#l22.223"></a><span id="l22.223" class="difflineminus">-      toolbarMsg = EnigmailLocale.getString(&quot;msgCompose.toolbarTxt.signOnly&quot;);</span>
<a href="#l22.224"></a><span id="l22.224" class="difflineminus">-    }</span>
<a href="#l22.225"></a><span id="l22.225" class="difflineminus">-    else if (doEncrypt) {</span>
<a href="#l22.226"></a><span id="l22.226" class="difflineminus">-      toolbarMsg = EnigmailLocale.getString(&quot;msgCompose.toolbarTxt.encryptOnly&quot;);</span>
<a href="#l22.227"></a><span id="l22.227" class="difflineminus">-    }</span>
<a href="#l22.228"></a><span id="l22.228" class="difflineminus">-    else {</span>
<a href="#l22.229"></a><span id="l22.229" class="difflineminus">-      toolbarMsg = EnigmailLocale.getString(&quot;msgCompose.toolbarTxt.noEncryption&quot;);</span>
<a href="#l22.230"></a><span id="l22.230" class="difflineminus">-    }</span>
<a href="#l22.231"></a><span id="l22.231" class="difflineminus">-</span>
<a href="#l22.232"></a><span id="l22.232" class="difflineminus">-    if (toolbarTxt) {</span>
<a href="#l22.233"></a><span id="l22.233" class="difflineminus">-      toolbarTxt.value = toolbarMsg;</span>
<a href="#l22.234"></a><span id="l22.234" class="difflineminus">-</span>
<a href="#l22.235"></a><span id="l22.235" class="difflineminus">-      if (Enigmail.msg.getSecurityParams()) {</span>
<a href="#l22.236"></a><span id="l22.236" class="difflineminus">-        let si = Enigmail.msg.getSecurityParams(null, true);</span>
<a href="#l22.237"></a><span id="l22.237" class="difflineminus">-        let isSmime = !EnigmailMimeEncrypt.isEnigmailCompField(si);</span>
<a href="#l22.238"></a><span id="l22.238" class="difflineminus">-</span>
<a href="#l22.239"></a><span id="l22.239" class="difflineminus">-        if (!doSign &amp;&amp; !doEncrypt &amp;&amp;</span>
<a href="#l22.240"></a><span id="l22.240" class="difflineminus">-          !(isSmime &amp;&amp;</span>
<a href="#l22.241"></a><span id="l22.241" class="difflineminus">-            (si.signMessage || si.requireEncryptMessage))) {</span>
<a href="#l22.242"></a><span id="l22.242" class="difflineminus">-          toolbarTxt.setAttribute(&quot;class&quot;, &quot;enigmailStrong&quot;);</span>
<a href="#l22.243"></a><span id="l22.243" class="difflineminus">-        }</span>
<a href="#l22.244"></a><span id="l22.244" class="difflineminus">-        else {</span>
<a href="#l22.245"></a><span id="l22.245" class="difflineminus">-          toolbarTxt.removeAttribute(&quot;class&quot;);</span>
<a href="#l22.246"></a><span id="l22.246" class="difflineminus">-        }</span>
<a href="#l22.247"></a><span id="l22.247" class="difflineminus">-      }</span>
<a href="#l22.248"></a><span id="l22.248" class="difflineminus">-      else {</span>
<a href="#l22.249"></a><span id="l22.249" class="difflineminus">-        toolbarTxt.removeAttribute(&quot;class&quot;);</span>
<a href="#l22.250"></a><span id="l22.250" class="difflineminus">-      }</span>
<a href="#l22.251"></a><span id="l22.251" class="difflineminus">-    }</span>
<a href="#l22.252"></a><span id="l22.252" class="difflineminus">-</span>
<a href="#l22.253"></a><span id="l22.253" class="difflineminus">-    // update pgp mime/inline PGP menu-text</span>
<a href="#l22.254"></a><span id="l22.254" class="difflineminus">-    if () {</span>
<a href="#l22.255"></a><span id="l22.255" class="difflineminus">-      this.statusPGPMimeStr = EnigmailLocale.getString(&quot;pgpmimeAuto&quot;);</span>
<a href="#l22.256"></a><span id="l22.256" class="difflineminus">-    }</span>
<a href="#l22.257"></a><span id="l22.257" class="difflineminus">-    else {</span>
<a href="#l22.258"></a><span id="l22.258" class="difflineminus">-      this.statusPGPMimeStr = EnigmailLocale.getString(&quot;pgpmimeNormal&quot;);</span>
<a href="#l22.259"></a><span id="l22.259" class="difflineminus">-    }</span>
<a href="#l22.260"></a><span id="l22.260" class="difflineminus">-</span>
<a href="#l22.261"></a><span id="l22.261" class="difflineminus">-    if () {</span>
<a href="#l22.262"></a><span id="l22.262" class="difflineminus">-      this.statusInlinePGPStr = EnigmailLocale.getString(&quot;inlinePGPAuto&quot;);</span>
<a href="#l22.263"></a><span id="l22.263" class="difflineminus">-    }</span>
<a href="#l22.264"></a><span id="l22.264" class="difflineminus">-    else {</span>
<a href="#l22.265"></a><span id="l22.265" class="difflineminus">-      this.statusInlinePGPStr = EnigmailLocale.getString(&quot;inlinePGPNormal&quot;);</span>
<a href="#l22.266"></a><span id="l22.266" class="difflineminus">-    }</span>
<a href="#l22.267"></a><span id="l22.267" class="difflineminus">-</span>
<a href="#l22.268"></a><span id="l22.268" class="difflineminus">-    if () {</span>
<a href="#l22.269"></a><span id="l22.269" class="difflineminus">-      this.statusSMimeStr = EnigmailLocale.getString(&quot;smimeAuto&quot;);</span>
<a href="#l22.270"></a><span id="l22.270" class="difflineminus">-    }</span>
<a href="#l22.271"></a><span id="l22.271" class="difflineminus">-    else {</span>
<a href="#l22.272"></a><span id="l22.272" class="difflineminus">-      this.statusSMimeStr = EnigmailLocale.getString(&quot;smimeNormal&quot;);</span>
<a href="#l22.273"></a><span id="l22.273" class="difflineminus">-    }</span>
<a href="#l22.274"></a><span id="l22.274" class="difflineminus">-</span>
<a href="#l22.275"></a><span id="l22.275" class="difflineminus">-    this.displaySMimeToolbar();</span>
<a href="#l22.276"></a><span id="l22.276" class="difflineminus">-</span>
<a href="#l22.277"></a><span id="l22.277" class="difflineminus">-    if (this.allowAttachOwnKey() === 1) {</span>
<a href="#l22.278"></a><span id="l22.278" class="difflineminus">-      attachBroadcaster.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l22.279"></a><span id="l22.279" class="difflineminus">-    }</span>
<a href="#l22.280"></a><span id="l22.280" class="difflineminus">-    else {</span>
<a href="#l22.281"></a><span id="l22.281" class="difflineminus">-      attachBroadcaster.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l22.282"></a><span id="l22.282" class="difflineminus">-    }</span>
<a href="#l22.283"></a><span id="l22.283" class="difflineminus">-    */</span>
<a href="#l22.284"></a><span id="l22.284" class="difflineminus">-  },</span>
<a href="#l22.285"></a><span id="l22.285" class="difflineminus">-</span>
<a href="#l22.286"></a><span id="l22.286" class="difflineminus">-  /*</span>
<a href="#l22.287"></a><span id="l22.287" class="difflineminus">-  displaySMimeToolbar: function() {</span>
<a href="#l22.288"></a><span id="l22.288" class="difflineminus">-    let s = document.getElementById(&quot;signing-status&quot;);</span>
<a href="#l22.289"></a><span id="l22.289" class="difflineminus">-    let e = document.getElementById(&quot;encryption-status&quot;);</span>
<a href="#l22.290"></a><span id="l22.290" class="difflineminus">-</span>
<a href="#l22.291"></a><span id="l22.291" class="difflineminus">-        if (s) s.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l22.292"></a><span id="l22.292" class="difflineminus">-        if (e) e.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l22.293"></a><span id="l22.293" class="difflineminus">-        if (s) s.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l22.294"></a><span id="l22.294" class="difflineminus">-        if (e) e.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l22.295"></a><span id="l22.295" class="difflineminus">-  },</span>
<a href="#l22.296"></a><span id="l22.296" class="difflineminus">-  */</span>
<a href="#l22.297"></a><span id="l22.297" class="difflineminus">-</span>
<a href="#l22.298"></a><span id="l22.298">   /* check if encryption is possible (have keys for everyone or not)</span>
<a href="#l22.299"></a><span id="l22.299">    */</span>
<a href="#l22.300"></a><span id="l22.300">   async determineSendFlags() {</span>
<a href="#l22.301"></a><span id="l22.301">     EnigmailLog.DEBUG(</span>
<a href="#l22.302"></a><span id="l22.302">       &quot;enigmailMsgComposeOverlay.js: Enigmail.msg.focusChange: Enigmail.msg.determineSendFlags\n&quot;</span>
<a href="#l22.303"></a><span id="l22.303">     );</span>
<a href="#l22.304"></a><span id="l22.304"> </span>
<a href="#l22.305"></a><span id="l22.305">     let detailsObj = {};</span>
<a href="#l22.306"></a><span id="l22.306" class="difflineat">@@ -1683,17 +1509,16 @@ Enigmail.msg = {</span>
<a href="#l22.307"></a><span id="l22.307">         toAddrList.join(&quot;, &quot;),</span>
<a href="#l22.308"></a><span id="l22.308">         detailsObj</span>
<a href="#l22.309"></a><span id="l22.309">       );</span>
<a href="#l22.310"></a><span id="l22.310">       //this.autoPgpEncryption = (validKeyList !== null);</span>
<a href="#l22.311"></a><span id="l22.311">     }</span>
<a href="#l22.312"></a><span id="l22.312"> </span>
<a href="#l22.313"></a><span id="l22.313">     // process and signal new resulting state</span>
<a href="#l22.314"></a><span id="l22.314">     //this.processFinalState();</span>
<a href="#l22.315"></a><span id="l22.315" class="difflineminus">-    this.updateStatusBar();</span>
<a href="#l22.316"></a><span id="l22.316"> </span>
<a href="#l22.317"></a><span id="l22.317">     return detailsObj;</span>
<a href="#l22.318"></a><span id="l22.318">   },</span>
<a href="#l22.319"></a><span id="l22.319"> </span>
<a href="#l22.320"></a><span id="l22.320">   /*</span>
<a href="#l22.321"></a><span id="l22.321">   displaySecuritySettings: function() {</span>
<a href="#l22.322"></a><span id="l22.322">     EnigmailLog.DEBUG(&quot;enigmailMsgComposeOverlay.js: Enigmail.msg.displaySecuritySettings\n&quot;);</span>
<a href="#l22.323"></a><span id="l22.323"> </span>
<a href="#l22.324"></a><span id="l22.324" class="difflineat">@@ -1719,17 +1544,16 @@ Enigmail.msg = {</span>
<a href="#l22.325"></a><span id="l22.325">       }</span>
<a href="#l22.326"></a><span id="l22.326"> </span>
<a href="#l22.327"></a><span id="l22.327">         this.dirty = 2;</span>
<a href="#l22.328"></a><span id="l22.328"> </span>
<a href="#l22.329"></a><span id="l22.329">       this.encryptForced = inputObj.encrypt;</span>
<a href="#l22.330"></a><span id="l22.330">     }</span>
<a href="#l22.331"></a><span id="l22.331"> </span>
<a href="#l22.332"></a><span id="l22.332">     //this.processFinalState();</span>
<a href="#l22.333"></a><span id="l22.333" class="difflineminus">-    this.updateStatusBar();</span>
<a href="#l22.334"></a><span id="l22.334">   },</span>
<a href="#l22.335"></a><span id="l22.335">   */</span>
<a href="#l22.336"></a><span id="l22.336"> </span>
<a href="#l22.337"></a><span id="l22.337">   addRecipients(toAddrList, recList) {</span>
<a href="#l22.338"></a><span id="l22.338">     for (var i = 0; i &lt; recList.length; i++) {</span>
<a href="#l22.339"></a><span id="l22.339">       try {</span>
<a href="#l22.340"></a><span id="l22.340">         toAddrList.push(</span>
<a href="#l22.341"></a><span id="l22.341">           EnigmailFuncs.stripEmail(recList[i].replace(/[&quot;,]/g, &quot;&quot;))</span>
<a href="#l22.342"></a><span id="l22.342" class="difflineat">@@ -2300,17 +2124,17 @@ Enigmail.msg = {</span>
<a href="#l22.343"></a><span id="l22.343">         // BCC and encryption</span>
<a href="#l22.344"></a><span id="l22.344"> </span>
<a href="#l22.345"></a><span id="l22.345">         var dummy = {</span>
<a href="#l22.346"></a><span id="l22.346">           value: null,</span>
<a href="#l22.347"></a><span id="l22.347">         };</span>
<a href="#l22.348"></a><span id="l22.348"> </span>
<a href="#l22.349"></a><span id="l22.349">         var hideBccUsers = promptSvc.confirmEx(</span>
<a href="#l22.350"></a><span id="l22.350">           window,</span>
<a href="#l22.351"></a><span id="l22.351" class="difflineminus">-          EnigmailLocale.getString(&quot;enigConfirm&quot;),</span>
<a href="#l22.352"></a><span id="l22.352" class="difflineplus">+          EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l22.353"></a><span id="l22.353">           EnigmailLocale.getString(&quot;sendingHiddenRcpt&quot;),</span>
<a href="#l22.354"></a><span id="l22.354">           promptSvc.BUTTON_TITLE_IS_STRING * promptSvc.BUTTON_POS_0 +</span>
<a href="#l22.355"></a><span id="l22.355">             promptSvc.BUTTON_TITLE_CANCEL * promptSvc.BUTTON_POS_1 +</span>
<a href="#l22.356"></a><span id="l22.356">             promptSvc.BUTTON_TITLE_IS_STRING * promptSvc.BUTTON_POS_2,</span>
<a href="#l22.357"></a><span id="l22.357">           EnigmailLocale.getString(&quot;sendWithShownBcc&quot;),</span>
<a href="#l22.358"></a><span id="l22.358">           null,</span>
<a href="#l22.359"></a><span id="l22.359">           EnigmailLocale.getString(&quot;sendWithHiddenBcc&quot;),</span>
<a href="#l22.360"></a><span id="l22.360">           null,</span>
<a href="#l22.361"></a><span id="l22.361" class="difflineat">@@ -3590,17 +3414,16 @@ Enigmail.msg = {</span>
<a href="#l22.362"></a><span id="l22.362">       this.editor.selectionController.scrollSelectionIntoView(</span>
<a href="#l22.363"></a><span id="l22.363">         nsISelectionController.SELECTION_NORMAL,</span>
<a href="#l22.364"></a><span id="l22.364">         nsISelectionController.SELECTION_ANCHOR_REGION,</span>
<a href="#l22.365"></a><span id="l22.365">         true</span>
<a href="#l22.366"></a><span id="l22.366">       );</span>
<a href="#l22.367"></a><span id="l22.367">     }</span>
<a href="#l22.368"></a><span id="l22.368"> </span>
<a href="#l22.369"></a><span id="l22.369">     //this.processFinalState();</span>
<a href="#l22.370"></a><span id="l22.370" class="difflineminus">-    this.updateStatusBar();</span>
<a href="#l22.371"></a><span id="l22.371">   },</span>
<a href="#l22.372"></a><span id="l22.372"> </span>
<a href="#l22.373"></a><span id="l22.373">   checkInlinePgpReply(head, tail) {</span>
<a href="#l22.374"></a><span id="l22.374">     const CT = Ci.nsIMsgCompType;</span>
<a href="#l22.375"></a><span id="l22.375">     if (!this.identity) {</span>
<a href="#l22.376"></a><span id="l22.376">       return;</span>
<a href="#l22.377"></a><span id="l22.377">     }</span>
<a href="#l22.378"></a><span id="l22.378"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgHdrViewOverlay.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -514,36 +514,16 @@ Enigmail.hdrView = {</span>
<a href="#l23.4"></a><span id="l23.4">         if (k) {</span>
<a href="#l23.5"></a><span id="l23.5">           gDBView.reloadMessageWithAllParts();</span>
<a href="#l23.6"></a><span id="l23.6">         }</span>
<a href="#l23.7"></a><span id="l23.7">       }</span>
<a href="#l23.8"></a><span id="l23.8">     });</span>
<a href="#l23.9"></a><span id="l23.9">   },</span>
<a href="#l23.10"></a><span id="l23.10">   */</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  /**</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-   * Display the Enigmail status bar and ask for handling the Setup Message</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineminus">-   */</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineminus">-  /*</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-  displayAutoCryptSetupMsgHeader() {</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineminus">-    Enigmail.hdrView.displayFlexAction(</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineminus">-      EnigmailLocale.getString(&quot;autocryptSetupReq&quot;),</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineminus">-      EnigmailLocale.getString(&quot;autocryptSetupReq.button.label&quot;),</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineminus">-      &quot;autocrypt-setup&quot;</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineminus">-    );</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineminus">-    this.displayAutocryptMessage(true);</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineminus">-  },</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-  displayAutocryptMessage(allowImport) {</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-    EnigmailLog.DEBUG(</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineminus">-      &quot;enigmailMsgHdrViewOverlay.js: displayAutocryptMessage()\n&quot;</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineminus">-    );</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineminus">-  },</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineminus">-  */</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-</span>
<a href="#l23.32"></a><span id="l23.32">   displayStatusBar() {</span>
<a href="#l23.33"></a><span id="l23.33">     let secInfo = Enigmail.msg.securityInfo;</span>
<a href="#l23.34"></a><span id="l23.34">     let statusFlags = secInfo.statusFlags;</span>
<a href="#l23.35"></a><span id="l23.35">     let extStatusFlags =</span>
<a href="#l23.36"></a><span id="l23.36">       &quot;extStatusFlags&quot; in secInfo ? secInfo.extStatusFlags : 0;</span>
<a href="#l23.37"></a><span id="l23.37">     let cryptoContainer, encryptedUINode, signedUINode;</span>
<a href="#l23.38"></a><span id="l23.38"> </span>
<a href="#l23.39"></a><span id="l23.39">     cryptoContainer = gCryptoContainer;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/keyDetailsDlg.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/keyDetailsDlg.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -63,19 +63,17 @@ function setText(elementId, label) {</span>
<a href="#l24.4"></a><span id="l24.4"> function setLabel(elementId, label) {</span>
<a href="#l24.5"></a><span id="l24.5">   let node = document.getElementById(elementId);</span>
<a href="#l24.6"></a><span id="l24.6">   node.setAttribute(&quot;value&quot;, label);</span>
<a href="#l24.7"></a><span id="l24.7"> }</span>
<a href="#l24.8"></a><span id="l24.8"> </span>
<a href="#l24.9"></a><span id="l24.9"> async function reloadData() {</span>
<a href="#l24.10"></a><span id="l24.10">   var enigmailSvc = GetEnigmailSvc();</span>
<a href="#l24.11"></a><span id="l24.11">   if (!enigmailSvc) {</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    EnigAlert(EnigmailLocale.getString(&quot;accessError&quot;));</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-    window.close();</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-    return;</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+    throw new Error(&quot;GetEnigmailSvc failed&quot;);</span>
<a href="#l24.16"></a><span id="l24.16">   }</span>
<a href="#l24.17"></a><span id="l24.17"> </span>
<a href="#l24.18"></a><span id="l24.18">   gUserId = null;</span>
<a href="#l24.19"></a><span id="l24.19"> </span>
<a href="#l24.20"></a><span id="l24.20">   var treeChildren = document.getElementById(&quot;keyListChildren&quot;);</span>
<a href="#l24.21"></a><span id="l24.21">   var uidList = document.getElementById(&quot;additionalUid&quot;);</span>
<a href="#l24.22"></a><span id="l24.22"> </span>
<a href="#l24.23"></a><span id="l24.23">   // clean lists</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

