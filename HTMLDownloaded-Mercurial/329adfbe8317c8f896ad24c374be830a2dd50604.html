<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 10359:329adfbe8317c8f896ad24c374be830a2dd50604</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 329adfbe8317c8f896ad24c374be830a2dd50604" />
<meta property="og:url" content="/comm-central/rev/329adfbe8317c8f896ad24c374be830a2dd50604" />
<meta property="og:description" content="Bug 759328 - Add instant messaging fields to the address book cards, r+ui-r=mconley, sr=bienvenu." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 329adfbe8317c8f896ad24c374be830a2dd50604 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/329adfbe8317c8f896ad24c374be830a2dd50604">shortlog</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/329adfbe8317c8f896ad24c374be830a2dd50604">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604">files</a> |
changeset |
<a href="/comm-central/raw-rev/329adfbe8317c8f896ad24c374be830a2dd50604">raw</a>  | <a href="/comm-central/archive/329adfbe8317c8f896ad24c374be830a2dd50604.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=759328">Bug 759328</a> - Add instant messaging fields to the address book cards, r+ui-r=mconley, sr=bienvenu.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#113;&#117;&#101;&#122;&#101;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 04 Jun 2012 20:06:29 +0200</td></tr>

<tr>
 <td>changeset 10359</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/329adfbe8317c8f896ad24c374be830a2dd50604">329adfbe8317c8f896ad24c374be830a2dd50604</a></td>
</tr>



<tr>
<td>parent 10358</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7cbaee447a201b314bc1df1adeb31a210b5af9a6">7cbaee447a201b314bc1df1adeb31a210b5af9a6</a>
</td>
</tr>

<tr>
<td>child 10360</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/b1b9cdd88b60f1285dbdd35492f087983d49df5a">b1b9cdd88b60f1285dbdd35492f087983d49df5a</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=329adfbe8317c8f896ad24c374be830a2dd50604">7841</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Mon, 04 Jun 2012 18:10:58 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@5d613926d417 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5d613926d4170336588e20454b874a69cf9b15be">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5d613926d4170336588e20454b874a69cf9b15be&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5d613926d4170336588e20454b874a69cf9b15be&newProject=comm-central&newRevision=329adfbe8317c8f896ad24c374be830a2dd50604&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5d613926d4170336588e20454b874a69cf9b15be&newProject=comm-central&newRevision=329adfbe8317c8f896ad24c374be830a2dd50604&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5d613926d4170336588e20454b874a69cf9b15be&newProject=comm-central&newRevision=329adfbe8317c8f896ad24c374be830a2dd50604&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bienvenu%29&revcount=50">bienvenu</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=759328">759328</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=759328">Bug 759328</a> - Add instant messaging fields to the address book cards, r+ui-r=mconley, sr=bienvenu.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/base/content/ABSearchDialog.xul">mail/base/content/ABSearchDialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/base/content/ABSearchDialog.xul">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/base/content/ABSearchDialog.xul">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/base/content/ABSearchDialog.xul">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/base/content/ABSearchDialog.xul">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/base/content/ABSearchDialog.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.js">mail/components/addrbook/content/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.xul">mail/components/addrbook/content/abCardOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.xul">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.xul">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.xul">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.xul">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardViewOverlay.js">mail/components/addrbook/content/abCardViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardViewOverlay.js">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardViewOverlay.js">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/abCardViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/addressbook.xul">mail/components/addrbook/content/addressbook.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/addressbook.xul">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/addressbook.xul">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/addressbook.xul">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/addressbook.xul">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/components/addrbook/content/addressbook.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd">mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd">mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/public/nsIAbCard.idl">mailnews/addrbook/public/nsIAbCard.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/public/nsIAbCard.idl">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/public/nsIAbCard.idl">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/public/nsIAbCard.idl">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/public/nsIAbCard.idl">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/public/nsIAbCard.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbAddressCollector.cpp">mailnews/addrbook/src/nsAbAddressCollector.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbAddressCollector.cpp">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbAddressCollector.cpp">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbAddressCollector.cpp">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbAddressCollector.cpp">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbAddressCollector.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbCardProperty.cpp">mailnews/addrbook/src/nsAbCardProperty.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbCardProperty.cpp">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbCardProperty.cpp">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbCardProperty.cpp">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbCardProperty.cpp">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbCardProperty.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbView.cpp">mailnews/addrbook/src/nsAbView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbView.cpp">file</a> |
<a href="/comm-central/annotate/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbView.cpp">annotate</a> |
<a href="/comm-central/diff/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbView.cpp">diff</a> |
<a href="/comm-central/comparison/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbView.cpp">comparison</a> |
<a href="/comm-central/log/329adfbe8317c8f896ad24c374be830a2dd50604/mailnews/addrbook/src/nsAbView.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/ABSearchDialog.xul</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/ABSearchDialog.xul</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -80,27 +80,27 @@</span>
<a href="#l1.4"></a><span id="l1.4">               context=&quot;mailContext&quot;</span>
<a href="#l1.5"></a><span id="l1.5">               onclick=&quot;AbResultsPaneOnClick(event);&quot;</span>
<a href="#l1.6"></a><span id="l1.6">               onkeypress=&quot;AbResultsPaneKeyPress(event);&quot;</span>
<a href="#l1.7"></a><span id="l1.7">               onselect=&quot;this.view.selectionChanged();&quot;</span>
<a href="#l1.8"></a><span id="l1.8">               sortCol=&quot;GeneratedName&quot;</span>
<a href="#l1.9"></a><span id="l1.9">               persist=&quot;sortCol&quot;&gt;</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">           &lt;treecols id=&quot;abResultsTreeCols&quot;&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-          &lt;!-- these column ids must match up to the mork column names, except for GeneratedName, see nsIAddrDatabase.idl --&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+          &lt;!-- these column ids must match up to the mork column names, except for GeneratedName and ChatName, see nsIAddrDatabase.idl --&gt;</span>
<a href="#l1.14"></a><span id="l1.14">           &lt;treecol id=&quot;GeneratedName&quot;</span>
<a href="#l1.15"></a><span id="l1.15">                    persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot; </span>
<a href="#l1.16"></a><span id="l1.16">                    label=&quot;&amp;GeneratedName.label;&quot; primary=&quot;true&quot;/&gt;</span>
<a href="#l1.17"></a><span id="l1.17">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l1.18"></a><span id="l1.18">           &lt;treecol id=&quot;PrimaryEmail&quot;</span>
<a href="#l1.19"></a><span id="l1.19">                    persist=&quot;hidden ordinal width sortDirection&quot;  flex=&quot;1&quot; label=&quot;&amp;PrimaryEmail.label;&quot;/&gt;</span>
<a href="#l1.20"></a><span id="l1.20">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-          &lt;treecol id=&quot;_AimScreenName&quot;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+          &lt;treecol id=&quot;ChatName&quot;</span>
<a href="#l1.23"></a><span id="l1.23">                    hidden=&quot;true&quot;</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-                   persist=&quot;hidden ordinal width sortDirection&quot;  flex=&quot;1&quot; label=&quot;&amp;ScreenName.label;&quot;/&gt;</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+                   persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot; label=&quot;&amp;ChatName.label;&quot;/&gt;</span>
<a href="#l1.26"></a><span id="l1.26">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l1.27"></a><span id="l1.27">           &lt;treecol id=&quot;Company&quot;</span>
<a href="#l1.28"></a><span id="l1.28">                    persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot; label=&quot;&amp;Company.label;&quot;/&gt;</span>
<a href="#l1.29"></a><span id="l1.29">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l1.30"></a><span id="l1.30">           &lt;treecol id=&quot;NickName&quot;</span>
<a href="#l1.31"></a><span id="l1.31">                    persist=&quot;hidden ordinal width sortDirection&quot; </span>
<a href="#l1.32"></a><span id="l1.32">                    hidden=&quot;true&quot;</span>
<a href="#l1.33"></a><span id="l1.33">                    flex=&quot;1&quot; label=&quot;&amp;NickName.label;&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -19,17 +19,16 @@ const kVcardFields =</span>
<a href="#l2.4"></a><span id="l2.4">         [ // Contact &gt; Name</span>
<a href="#l2.5"></a><span id="l2.5">          [&quot;FirstName&quot;, &quot;FirstName&quot;],</span>
<a href="#l2.6"></a><span id="l2.6">          [&quot;LastName&quot;, &quot;LastName&quot;],</span>
<a href="#l2.7"></a><span id="l2.7">          [&quot;DisplayName&quot;, &quot;DisplayName&quot;],</span>
<a href="#l2.8"></a><span id="l2.8">          [&quot;NickName&quot;, &quot;NickName&quot;],</span>
<a href="#l2.9"></a><span id="l2.9">           // Contact &gt; Internet</span>
<a href="#l2.10"></a><span id="l2.10">          [&quot;PrimaryEmail&quot;, &quot;PrimaryEmail&quot;],</span>
<a href="#l2.11"></a><span id="l2.11">          [&quot;SecondEmail&quot;, &quot;SecondEmail&quot;],</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-         [&quot;ScreenName&quot;, &quot;_AimScreenName&quot;], // NB: AIM.</span>
<a href="#l2.13"></a><span id="l2.13">           // Contact &gt; Phones</span>
<a href="#l2.14"></a><span id="l2.14">          [&quot;WorkPhone&quot;, &quot;WorkPhone&quot;],</span>
<a href="#l2.15"></a><span id="l2.15">          [&quot;HomePhone&quot;, &quot;HomePhone&quot;],</span>
<a href="#l2.16"></a><span id="l2.16">          [&quot;FaxNumber&quot;, &quot;FaxNumber&quot;],</span>
<a href="#l2.17"></a><span id="l2.17">          [&quot;PagerNumber&quot;, &quot;PagerNumber&quot;],</span>
<a href="#l2.18"></a><span id="l2.18">          [&quot;CellularNumber&quot;, &quot;CellularNumber&quot;],</span>
<a href="#l2.19"></a><span id="l2.19">           // Address &gt; Home</span>
<a href="#l2.20"></a><span id="l2.20">          [&quot;HomeAddress&quot;, &quot;HomeAddress&quot;],</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -51,17 +50,27 @@ const kVcardFields =</span>
<a href="#l2.22"></a><span id="l2.22">          [&quot;WorkCountry&quot;, &quot;WorkCountry&quot;],</span>
<a href="#l2.23"></a><span id="l2.23">          [&quot;WebPage1&quot;, &quot;WebPage1&quot;],</span>
<a href="#l2.24"></a><span id="l2.24">           // Other &gt; (custom)</span>
<a href="#l2.25"></a><span id="l2.25">          [&quot;Custom1&quot;, &quot;Custom1&quot;],</span>
<a href="#l2.26"></a><span id="l2.26">          [&quot;Custom2&quot;, &quot;Custom2&quot;],</span>
<a href="#l2.27"></a><span id="l2.27">          [&quot;Custom3&quot;, &quot;Custom3&quot;],</span>
<a href="#l2.28"></a><span id="l2.28">          [&quot;Custom4&quot;, &quot;Custom4&quot;],</span>
<a href="#l2.29"></a><span id="l2.29">           // Other &gt; Notes</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-         [&quot;Notes&quot;, &quot;Notes&quot;]];</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+         [&quot;Notes&quot;, &quot;Notes&quot;],</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+          // Chat</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+         [&quot;Gtalk&quot;, &quot;_GoogleTalk&quot;],</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+         [&quot;AIM&quot;, &quot;_AimScreenName&quot;],</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+         [&quot;Yahoo&quot;, &quot;_Yahoo&quot;],</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+         [&quot;Skype&quot;, &quot;_Skype&quot;],</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+         [&quot;QQ&quot;, &quot;_QQ&quot;],</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+         [&quot;MSN&quot;, &quot;_MSN&quot;],</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+         [&quot;ICQ&quot;, &quot;_ICQ&quot;],</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+         [&quot;XMPP&quot;, &quot;_JabberId&quot;]</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+        ];</span>
<a href="#l2.42"></a><span id="l2.42"> </span>
<a href="#l2.43"></a><span id="l2.43"> const kDefaultYear = 2000;</span>
<a href="#l2.44"></a><span id="l2.44"> var gEditCard;</span>
<a href="#l2.45"></a><span id="l2.45"> var gOnSaveListeners = new Array();</span>
<a href="#l2.46"></a><span id="l2.46"> var gOnLoadListeners = new Array();</span>
<a href="#l2.47"></a><span id="l2.47"> var gOkCallback = null;</span>
<a href="#l2.48"></a><span id="l2.48"> var gHideABPicker = false;</span>
<a href="#l2.49"></a><span id="l2.49"> var gPhotoHandlers = {};</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineat">@@ -509,16 +518,18 @@ function GetCardValues(cardproperty, doc</span>
<a href="#l2.51"></a><span id="l2.51"> </span>
<a href="#l2.52"></a><span id="l2.52">   // Store the original photo URI and update the photo</span>
<a href="#l2.53"></a><span id="l2.53">   // Select the type if there is a valid value stored for that type, otherwise</span>
<a href="#l2.54"></a><span id="l2.54">   // select the generic photo</span>
<a href="#l2.55"></a><span id="l2.55">   var photoType = cardproperty.getProperty(&quot;PhotoType&quot;, &quot;&quot;);</span>
<a href="#l2.56"></a><span id="l2.56">   document.getElementById(&quot;PhotoType&quot;).value = photoType;</span>
<a href="#l2.57"></a><span id="l2.57">   loadPhoto(cardproperty);</span>
<a href="#l2.58"></a><span id="l2.58">   setCardEditorPhoto(photoType, cardproperty);</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+  updateChatName();</span>
<a href="#l2.61"></a><span id="l2.61"> }</span>
<a href="#l2.62"></a><span id="l2.62"> </span>
<a href="#l2.63"></a><span id="l2.63"> // when the ab card dialog is being loaded to show a vCard,</span>
<a href="#l2.64"></a><span id="l2.64"> // hide the fields which aren't supported</span>
<a href="#l2.65"></a><span id="l2.65"> // by vCard so the user does not try to edit them.</span>
<a href="#l2.66"></a><span id="l2.66"> function HideNonVcardFields()</span>
<a href="#l2.67"></a><span id="l2.67"> {</span>
<a href="#l2.68"></a><span id="l2.68">   document.getElementById(&quot;homeTabButton&quot;).hidden = true;</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineat">@@ -865,16 +876,54 @@ function modifyDatepicker(aDatepicker) {</span>
<a href="#l2.70"></a><span id="l2.70">       this.monthField.value = null;</span>
<a href="#l2.71"></a><span id="l2.71">     }</span>
<a href="#l2.72"></a><span id="l2.72">     // make the field's value null if aValue is null and the field's value isn't</span>
<a href="#l2.73"></a><span id="l2.73">     if (aValue == null &amp;&amp; aField.value != null)</span>
<a href="#l2.74"></a><span id="l2.74">       aField.value = null;</span>
<a href="#l2.75"></a><span id="l2.75">   }</span>
<a href="#l2.76"></a><span id="l2.76"> }</span>
<a href="#l2.77"></a><span id="l2.77"> </span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+const chatNameFieldIds =</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+  [&quot;Gtalk&quot;, &quot;AIM&quot;, &quot;Yahoo&quot;, &quot;Skype&quot;, &quot;QQ&quot;, &quot;MSN&quot;, &quot;ICQ&quot;, &quot;XMPP&quot;];</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+/**</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+ * Show the 'Chat' tab and focus the first field that has a value, or</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+ * the first field if none of them has a value.</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+ */</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineplus">+function showChat()</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineplus">+{</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineplus">+  document.getElementById('abTabPanels').parentNode.selectedTab =</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineplus">+    document.getElementById('chatTabButton');</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineplus">+  for each (let id in chatNameFieldIds) {</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineplus">+    let elt = document.getElementById(id);</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineplus">+    if (elt.value) {</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineplus">+      elt.focus();</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineplus">+      return;</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineplus">+    }</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineplus">+  }</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+  document.getElementById(chatNameFieldIds[0]).focus();</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+}</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineplus">+/**</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineplus">+ * Fill in the value of the ChatName readonly field with the first</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineplus">+ * value of the fields in the Chat tab.</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+ */</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineplus">+function updateChatName()</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineplus">+{</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineplus">+  let value = &quot;&quot;;</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+  for each (let id in chatNameFieldIds) {</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+    let val = document.getElementById(id).value;</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+    if (val) {</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+      value = val;</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineplus">+      break;</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineplus">+    }</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineplus">+  }</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+  document.getElementById(&quot;ChatName&quot;).value = value;</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+}</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+</span>
<a href="#l2.116"></a><span id="l2.116"> /**</span>
<a href="#l2.117"></a><span id="l2.117">  * Updates the photo displayed in the contact editor based on the</span>
<a href="#l2.118"></a><span id="l2.118">  * type of photo selected.  If the type is not recognized, the</span>
<a href="#l2.119"></a><span id="l2.119">  * photo will automatically switch to the generic photo.</span>
<a href="#l2.120"></a><span id="l2.120">  *</span>
<a href="#l2.121"></a><span id="l2.121">  * @param aType The type of photo (web, file, or generic available</span>
<a href="#l2.122"></a><span id="l2.122">  *              by default).</span>
<a href="#l2.123"></a><span id="l2.123">  * @param aCard The nsIAbCard being edited</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.xul</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.xul</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -21,16 +21,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> &lt;vbox id=&quot;editcard&quot;&gt;</span>
<a href="#l3.5"></a><span id="l3.5">   &lt;tabbox&gt;</span>
<a href="#l3.6"></a><span id="l3.6">     &lt;tabs id=&quot;abTabs&quot;&gt;</span>
<a href="#l3.7"></a><span id="l3.7">       &lt;tab id=&quot;contactTabButton&quot; label=&quot;&amp;Contact.tab;&quot;</span>
<a href="#l3.8"></a><span id="l3.8">            accesskey=&quot;&amp;Contact.accesskey;&quot;/&gt;</span>
<a href="#l3.9"></a><span id="l3.9">       &lt;tab id=&quot;homeTabButton&quot; label=&quot;&amp;Home.tab;&quot; accesskey=&quot;&amp;Home.accesskey;&quot;/&gt;</span>
<a href="#l3.10"></a><span id="l3.10">       &lt;tab id=&quot;workTabButton&quot; label=&quot;&amp;Work.tab;&quot; accesskey=&quot;&amp;Work.accesskey;&quot;/&gt;</span>
<a href="#l3.11"></a><span id="l3.11">       &lt;tab id=&quot;otherTabButton&quot; label=&quot;&amp;Other.tab;&quot; accesskey=&quot;&amp;Other.accesskey;&quot;/&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+      &lt;tab id=&quot;chatTabButton&quot; label=&quot;&amp;Chat.tab;&quot; accesskey=&quot;&amp;Chat.accesskey;&quot;/&gt;</span>
<a href="#l3.13"></a><span id="l3.13">       &lt;tab id=&quot;photoTabButton&quot; label=&quot;&amp;Photo.tab;&quot; accesskey=&quot;&amp;Photo.accesskey;&quot;/&gt;</span>
<a href="#l3.14"></a><span id="l3.14">     &lt;/tabs&gt;</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16">     &lt;tabpanels id=&quot;abTabPanels&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l3.17"></a><span id="l3.17">       &lt;!-- ** Name Tab ** --&gt;</span>
<a href="#l3.18"></a><span id="l3.18">       &lt;!-- The following vbox contains two hboxes</span>
<a href="#l3.19"></a><span id="l3.19">            top: Name/Email/Phonenumber bottom: Email prefs. --&gt;</span>
<a href="#l3.20"></a><span id="l3.20">       &lt;vbox id=&quot;abNameTab&quot; &gt;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -122,20 +123,21 @@</span>
<a href="#l3.22"></a><span id="l3.22">               &lt;label control=&quot;SecondEmail&quot; value=&quot;&amp;SecondEmail.label;&quot;</span>
<a href="#l3.23"></a><span id="l3.23">                      accesskey=&quot;&amp;SecondEmail.accesskey;&quot;/&gt;</span>
<a href="#l3.24"></a><span id="l3.24">               &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.25"></a><span id="l3.25">                 &lt;textbox id=&quot;SecondEmail&quot; flex=&quot;1&quot; class=&quot;uri-element&quot;/&gt;</span>
<a href="#l3.26"></a><span id="l3.26">               &lt;/hbox&gt;</span>
<a href="#l3.27"></a><span id="l3.27">             &lt;/hbox&gt;</span>
<a href="#l3.28"></a><span id="l3.28">             &lt;hbox id=&quot;ScreenNameContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.29"></a><span id="l3.29">               &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-              &lt;label control=&quot;ScreenName&quot; value=&quot;&amp;ScreenName.label;&quot;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-                     accesskey=&quot;&amp;ScreenName.accesskey;&quot;/&gt;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+              &lt;label class=&quot;text-link&quot; value=&quot;&amp;chatName.label;&quot;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+                     onclick=&quot;showChat();&quot;/&gt;</span>
<a href="#l3.34"></a><span id="l3.34">               &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-                &lt;textbox id=&quot;ScreenName&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+                &lt;textbox id=&quot;ChatName&quot; readonly=&quot;true&quot; flex=&quot;1&quot;</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+                         onclick=&quot;showChat();&quot;/&gt;</span>
<a href="#l3.38"></a><span id="l3.38">               &lt;/hbox&gt;</span>
<a href="#l3.39"></a><span id="l3.39">             &lt;/hbox&gt;</span>
<a href="#l3.40"></a><span id="l3.40">           &lt;/vbox&gt; &lt;!-- End of Name/Email --&gt;</span>
<a href="#l3.41"></a><span id="l3.41">           &lt;!-- Phone Number section --&gt;</span>
<a href="#l3.42"></a><span id="l3.42">           &lt;vbox id=&quot;PhoneNumbers&quot;&gt;</span>
<a href="#l3.43"></a><span id="l3.43">             &lt;hbox id=&quot;WorkPhoneContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.44"></a><span id="l3.44">               &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.45"></a><span id="l3.45">               &lt;label control=&quot;WorkPhone&quot; value=&quot;&amp;WorkPhone.label;&quot;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineat">@@ -362,16 +364,86 @@</span>
<a href="#l3.47"></a><span id="l3.47">             &lt;textbox id=&quot;Custom4&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l3.48"></a><span id="l3.48">           &lt;/hbox&gt;</span>
<a href="#l3.49"></a><span id="l3.49">         &lt;/vbox&gt;</span>
<a href="#l3.50"></a><span id="l3.50">         &lt;label control=&quot;Notes&quot; value=&quot;&amp;Notes.label;&quot;</span>
<a href="#l3.51"></a><span id="l3.51">                accesskey=&quot;&amp;Notes.accesskey;&quot;/&gt;</span>
<a href="#l3.52"></a><span id="l3.52">         &lt;textbox id=&quot;Notes&quot; multiline=&quot;true&quot; wrap=&quot;virtual&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l3.53"></a><span id="l3.53">       &lt;/vbox&gt;</span>
<a href="#l3.54"></a><span id="l3.54"> </span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+      &lt;!-- ** Chat Tab ** --&gt;</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+      &lt;hbox id=&quot;abChatTab&quot;&gt;</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+        &lt;vbox&gt;</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+          &lt;hbox id=&quot;GtalkContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+            &lt;label control=&quot;Gtalk&quot; value=&quot;&amp;Gtalk.label;&quot;</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+                   accesskey=&quot;&amp;Gtalk.accesskey;&quot;/&gt;</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+              &lt;textbox id=&quot;Gtalk&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+          &lt;hbox id=&quot;AIMContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+            &lt;label control=&quot;AIM&quot; value=&quot;&amp;AIM.label;&quot;</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+                   accesskey=&quot;&amp;AIM.accesskey;&quot;/&gt;</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+              &lt;textbox id=&quot;AIM&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+          &lt;hbox id=&quot;YahooContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+            &lt;label control=&quot;Yahoo&quot; value=&quot;&amp;Yahoo.label;&quot;</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+                   accesskey=&quot;&amp;Yahoo.accesskey;&quot;/&gt;</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+              &lt;textbox id=&quot;Yahoo&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+          &lt;hbox id=&quot;SkypeContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+            &lt;label control=&quot;Skype&quot; value=&quot;&amp;Skype.label;&quot;</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+                   accesskey=&quot;&amp;Skype.accesskey;&quot;/&gt;</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+              &lt;textbox id=&quot;Skype&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+          &lt;hbox id=&quot;QQContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+            &lt;label control=&quot;QQ&quot; value=&quot;&amp;QQ.label;&quot;</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+                   accesskey=&quot;&amp;QQ.accesskey;&quot;/&gt;</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+              &lt;textbox id=&quot;QQ&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineplus">+          &lt;hbox id=&quot;MSNContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineplus">+            &lt;label control=&quot;MSN&quot; value=&quot;&amp;MSN.label;&quot;</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineplus">+                   accesskey=&quot;&amp;MSN.accesskey;&quot;/&gt;</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+              &lt;textbox id=&quot;MSN&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+          &lt;hbox id=&quot;ICQContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineplus">+            &lt;label control=&quot;ICQ&quot; value=&quot;&amp;ICQ.label;&quot;</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineplus">+                   accesskey=&quot;&amp;ICQ.accesskey;&quot;/&gt;</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineplus">+              &lt;textbox id=&quot;ICQ&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineplus">+          &lt;hbox id=&quot;XMPPContainer&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+            &lt;label control=&quot;XMPP&quot; value=&quot;&amp;XMPP.label;&quot;</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+                   accesskey=&quot;&amp;XMPP.accesskey;&quot;/&gt;</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineplus">+            &lt;hbox class=&quot;CardEditWidth&quot;&gt;</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineplus">+              &lt;textbox id=&quot;XMPP&quot; flex=&quot;1&quot; onchange=&quot;updateChatName();&quot;/&gt;</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+          &lt;/hbox&gt;</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineplus">+        &lt;/vbox&gt;</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+</span>
<a href="#l3.125"></a><span id="l3.125">       &lt;!-- ** Photo Tab ** --&gt;</span>
<a href="#l3.126"></a><span id="l3.126">       &lt;hbox id=&quot;abPhotoTab&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.127"></a><span id="l3.127">         &lt;description style=&quot;min-width: 25ch; max-width: 25ch; text-align: center&quot;&gt;</span>
<a href="#l3.128"></a><span id="l3.128">           &lt;html:img id=&quot;photo&quot; style=&quot;max-width: 25ch; max-height: 25ch;&quot;/&gt;</span>
<a href="#l3.129"></a><span id="l3.129">         &lt;/description&gt;</span>
<a href="#l3.130"></a><span id="l3.130">         &lt;groupbox flex=&quot;1&quot;&gt;</span>
<a href="#l3.131"></a><span id="l3.131">           &lt;caption label=&quot;&amp;PhotoDesc.label;&quot;/&gt;</span>
<a href="#l3.132"></a><span id="l3.132">           &lt;radiogroup id=&quot;PhotoType&quot; onselect=&quot;onSwitchPhotoType();&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardViewOverlay.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardViewOverlay.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -14,50 +14,64 @@ var gMapItURLFormat = Services.prefs.get</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> var gFileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l4.6"></a><span id="l4.6">   .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l4.7"></a><span id="l4.7"> var gPhotoDisplayHandlers = {};</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9"> var zListName;</span>
<a href="#l4.10"></a><span id="l4.10"> var zPrimaryEmail;</span>
<a href="#l4.11"></a><span id="l4.11"> var zSecondaryEmail;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-var zScreenName;</span>
<a href="#l4.13"></a><span id="l4.13"> var zNickname;</span>
<a href="#l4.14"></a><span id="l4.14"> var zDisplayName;</span>
<a href="#l4.15"></a><span id="l4.15"> var zWork;</span>
<a href="#l4.16"></a><span id="l4.16"> var zHome;</span>
<a href="#l4.17"></a><span id="l4.17"> var zFax;</span>
<a href="#l4.18"></a><span id="l4.18"> var zCellular;</span>
<a href="#l4.19"></a><span id="l4.19"> var zPager;</span>
<a href="#l4.20"></a><span id="l4.20"> var zBirthday;</span>
<a href="#l4.21"></a><span id="l4.21"> var zCustom1;</span>
<a href="#l4.22"></a><span id="l4.22"> var zCustom2;</span>
<a href="#l4.23"></a><span id="l4.23"> var zCustom3;</span>
<a href="#l4.24"></a><span id="l4.24"> var zCustom4;</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+var zGtalk;</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+var zAIM;</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+var zYahoo;</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+var zSkype;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+var zQQ;</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+var zMSN;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+var zICQ;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+var zXMPP;</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34"> var cvData;</span>
<a href="#l4.35"></a><span id="l4.35"> </span>
<a href="#l4.36"></a><span id="l4.36"> function OnLoadCardView()</span>
<a href="#l4.37"></a><span id="l4.37"> {</span>
<a href="#l4.38"></a><span id="l4.38">   zPrimaryEmail = gAddressBookBundle.getString(&quot;propertyPrimaryEmail&quot;);</span>
<a href="#l4.39"></a><span id="l4.39">   zSecondaryEmail = gAddressBookBundle.getString(&quot;propertySecondaryEmail&quot;);</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-  zScreenName = gAddressBookBundle.getString(&quot;propertyScreenName&quot;);</span>
<a href="#l4.41"></a><span id="l4.41">   zNickname = gAddressBookBundle.getString(&quot;propertyNickname&quot;);</span>
<a href="#l4.42"></a><span id="l4.42">   zDisplayName = gAddressBookBundle.getString(&quot;propertyDisplayName&quot;);</span>
<a href="#l4.43"></a><span id="l4.43">   zListName = gAddressBookBundle.getString(&quot;propertyListName&quot;);</span>
<a href="#l4.44"></a><span id="l4.44">   zWork = gAddressBookBundle.getString(&quot;propertyWork&quot;);</span>
<a href="#l4.45"></a><span id="l4.45">   zHome = gAddressBookBundle.getString(&quot;propertyHome&quot;);</span>
<a href="#l4.46"></a><span id="l4.46">   zFax = gAddressBookBundle.getString(&quot;propertyFax&quot;);</span>
<a href="#l4.47"></a><span id="l4.47">   zCellular = gAddressBookBundle.getString(&quot;propertyCellular&quot;);</span>
<a href="#l4.48"></a><span id="l4.48">   zPager = gAddressBookBundle.getString(&quot;propertyPager&quot;);</span>
<a href="#l4.49"></a><span id="l4.49">   zBirthday = gAddressBookBundle.getString(&quot;propertyBirthday&quot;);</span>
<a href="#l4.50"></a><span id="l4.50">   zCustom1 = gAddressBookBundle.getString(&quot;propertyCustom1&quot;);</span>
<a href="#l4.51"></a><span id="l4.51">   zCustom2 = gAddressBookBundle.getString(&quot;propertyCustom2&quot;);</span>
<a href="#l4.52"></a><span id="l4.52">   zCustom3 = gAddressBookBundle.getString(&quot;propertyCustom3&quot;);</span>
<a href="#l4.53"></a><span id="l4.53">   zCustom4 = gAddressBookBundle.getString(&quot;propertyCustom4&quot;);</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+  zGtalk = gAddressBookBundle.getString(&quot;propertyGtalk&quot;);</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+  zAIM = gAddressBookBundle.getString(&quot;propertyAIM&quot;);</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+  zYahoo = gAddressBookBundle.getString(&quot;propertyYahoo&quot;);</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+  zSkype = gAddressBookBundle.getString(&quot;propertySkype&quot;);</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+  zQQ = gAddressBookBundle.getString(&quot;propertyQQ&quot;);</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+  zMSN = gAddressBookBundle.getString(&quot;propertyMSN&quot;);</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+  zICQ = gAddressBookBundle.getString(&quot;propertyICQ&quot;);</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+  zXMPP = gAddressBookBundle.getString(&quot;propertyXMPP&quot;);</span>
<a href="#l4.62"></a><span id="l4.62"> </span>
<a href="#l4.63"></a><span id="l4.63">   var doc = document;</span>
<a href="#l4.64"></a><span id="l4.64"> </span>
<a href="#l4.65"></a><span id="l4.65">   /* data for address book, prefixes: &quot;cvb&quot; = card view box</span>
<a href="#l4.66"></a><span id="l4.66">                     &quot;cvh&quot; = crad view header</span>
<a href="#l4.67"></a><span id="l4.67">                     &quot;cv&quot;  = card view (normal fields) */</span>
<a href="#l4.68"></a><span id="l4.68">   cvData = new Object;</span>
<a href="#l4.69"></a><span id="l4.69"> </span>
<a href="#l4.70"></a><span id="l4.70" class="difflineat">@@ -67,18 +81,16 @@ function OnLoadCardView()</span>
<a href="#l4.71"></a><span id="l4.71">   cvData.CardTitle    = doc.getElementById(&quot;CardTitle&quot;);</span>
<a href="#l4.72"></a><span id="l4.72">   // Name section</span>
<a href="#l4.73"></a><span id="l4.73">   cvData.cvbContact = doc.getElementById(&quot;cvbContact&quot;);</span>
<a href="#l4.74"></a><span id="l4.74">   cvData.cvhContact = doc.getElementById(&quot;cvhContact&quot;);</span>
<a href="#l4.75"></a><span id="l4.75">   cvData.cvNickname    = doc.getElementById(&quot;cvNickname&quot;);</span>
<a href="#l4.76"></a><span id="l4.76">   cvData.cvDisplayName  = doc.getElementById(&quot;cvDisplayName&quot;);</span>
<a href="#l4.77"></a><span id="l4.77">   cvData.cvEmail1Box    = doc.getElementById(&quot;cvEmail1Box&quot;);</span>
<a href="#l4.78"></a><span id="l4.78">   cvData.cvEmail1      = doc.getElementById(&quot;cvEmail1&quot;);</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineminus">-  cvData.cvScreennameBox    = doc.getElementById(&quot;cvScreennameBox&quot;);</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineminus">-  cvData.cvScreenname    = doc.getElementById(&quot;cvScreenname&quot;);</span>
<a href="#l4.81"></a><span id="l4.81">   cvData.cvBuddyIcon              = doc.getElementById(&quot;cvBuddyIcon&quot;);</span>
<a href="#l4.82"></a><span id="l4.82">   cvData.cvListNameBox    = doc.getElementById(&quot;cvListNameBox&quot;);</span>
<a href="#l4.83"></a><span id="l4.83">   cvData.cvListName               = doc.getElementById(&quot;cvListName&quot;);</span>
<a href="#l4.84"></a><span id="l4.84">   cvData.cvEmail2Box    = doc.getElementById(&quot;cvEmail2Box&quot;);</span>
<a href="#l4.85"></a><span id="l4.85">   cvData.cvEmail2      = doc.getElementById(&quot;cvEmail2&quot;);</span>
<a href="#l4.86"></a><span id="l4.86">   // Home section</span>
<a href="#l4.87"></a><span id="l4.87">   cvData.cvbHome      = doc.getElementById(&quot;cvbHome&quot;);</span>
<a href="#l4.88"></a><span id="l4.88">   cvData.cvhHome      = doc.getElementById(&quot;cvhHome&quot;);</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineat">@@ -126,16 +138,27 @@ function OnLoadCardView()</span>
<a href="#l4.90"></a><span id="l4.90">   cvData.cvWorkCityStZip  = doc.getElementById(&quot;cvWorkCityStZip&quot;);</span>
<a href="#l4.91"></a><span id="l4.91">   cvData.cvWorkCountry  = doc.getElementById(&quot;cvWorkCountry&quot;);</span>
<a href="#l4.92"></a><span id="l4.92">   cvData.cvbWorkMapItBox  = doc.getElementById(&quot;cvbWorkMapItBox&quot;);</span>
<a href="#l4.93"></a><span id="l4.93">   cvData.cvWorkMapIt = doc.getElementById(&quot;cvWorkMapIt&quot;);</span>
<a href="#l4.94"></a><span id="l4.94">   cvData.cvWorkWebPageBox = doc.getElementById(&quot;cvWorkWebPageBox&quot;);</span>
<a href="#l4.95"></a><span id="l4.95">   cvData.cvWorkWebPage  = doc.getElementById(&quot;cvWorkWebPage&quot;);</span>
<a href="#l4.96"></a><span id="l4.96">   cvData.cvbPhoto = doc.getElementById(&quot;cvbPhoto&quot;);</span>
<a href="#l4.97"></a><span id="l4.97">   cvData.cvPhoto  = doc.getElementById(&quot;cvPhoto&quot;);</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineplus">+  // Chat section</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineplus">+  cvData.cvbChat      = doc.getElementById(&quot;cvbChat&quot;);</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineplus">+  cvData.cvhChat      = doc.getElementById(&quot;cvhChat&quot;);</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineplus">+  cvData.cvGtalk      = doc.getElementById(&quot;cvGtalk&quot;);</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineplus">+  cvData.cvAIM        = doc.getElementById(&quot;cvAIM&quot;);</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineplus">+  cvData.cvYahoo      = doc.getElementById(&quot;cvYahoo&quot;);</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineplus">+  cvData.cvSkype      = doc.getElementById(&quot;cvSkype&quot;);</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineplus">+  cvData.cvQQ         = doc.getElementById(&quot;cvQQ&quot;);</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineplus">+  cvData.cvMSN        = doc.getElementById(&quot;cvMSN&quot;);</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineplus">+  cvData.cvICQ        = doc.getElementById(&quot;cvICQ&quot;);</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineplus">+  cvData.cvXMPP       = doc.getElementById(&quot;cvXMPP&quot;);</span>
<a href="#l4.109"></a><span id="l4.109"> }</span>
<a href="#l4.110"></a><span id="l4.110"> </span>
<a href="#l4.111"></a><span id="l4.111"> // XXX todo</span>
<a href="#l4.112"></a><span id="l4.112"> // some similar code (in spirit) already exists, see OnLoadEditList()</span>
<a href="#l4.113"></a><span id="l4.113"> // perhaps we could combine and put in abCommon.js?</span>
<a href="#l4.114"></a><span id="l4.114"> function GetAddressesFromURI(uri)</span>
<a href="#l4.115"></a><span id="l4.115"> {</span>
<a href="#l4.116"></a><span id="l4.116">   var addresses = &quot;&quot;;</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineat">@@ -186,38 +209,31 @@ function DisplayCardViewPane(realCard)</span>
<a href="#l4.118"></a><span id="l4.118">     cvSetNode(data.CardTitle, gAddressBookBundle.getFormattedString(&quot;viewListTitle&quot;, [generatedName]));</span>
<a href="#l4.119"></a><span id="l4.119">   else</span>
<a href="#l4.120"></a><span id="l4.120">     cvSetNode(data.CardTitle, titleString);</span>
<a href="#l4.121"></a><span id="l4.121"> </span>
<a href="#l4.122"></a><span id="l4.122">   // Contact section</span>
<a href="#l4.123"></a><span id="l4.123">   cvSetNodeWithLabel(data.cvNickname, zNickname, card.getProperty(&quot;NickName&quot;));</span>
<a href="#l4.124"></a><span id="l4.124"> </span>
<a href="#l4.125"></a><span id="l4.125">   if (card.isMailList) {</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-    // email1, display name and screenname always hidden when a mailing list.</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineplus">+    // email1 and display name always hidden when a mailing list.</span>
<a href="#l4.128"></a><span id="l4.128">     cvSetVisible(data.cvDisplayName, false);</span>
<a href="#l4.129"></a><span id="l4.129">     cvSetVisible(data.cvEmail1Box, false);</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineminus">-    cvSetVisible(data.cvScreennameBox, false);</span>
<a href="#l4.131"></a><span id="l4.131"> </span>
<a href="#l4.132"></a><span id="l4.132">     visible = HandleLink(data.cvListName, zListName, card.displayName, data.cvListNameBox, &quot;mailto:&quot; + encodeURIComponent(GenerateAddressFromCard(card))) || visible;</span>
<a href="#l4.133"></a><span id="l4.133">   }</span>
<a href="#l4.134"></a><span id="l4.134">   else {</span>
<a href="#l4.135"></a><span id="l4.135">     // listname always hidden if not a mailing list</span>
<a href="#l4.136"></a><span id="l4.136">     cvSetVisible(data.cvListNameBox, false);</span>
<a href="#l4.137"></a><span id="l4.137"> </span>
<a href="#l4.138"></a><span id="l4.138">     cvSetNodeWithLabel(data.cvDisplayName, zDisplayName, card.displayName);</span>
<a href="#l4.139"></a><span id="l4.139"> </span>
<a href="#l4.140"></a><span id="l4.140">     visible = HandleLink(data.cvEmail1, zPrimaryEmail, card.primaryEmail, data.cvEmail1Box, &quot;mailto:&quot; + card.primaryEmail) || visible;</span>
<a href="#l4.141"></a><span id="l4.141">   }</span>
<a href="#l4.142"></a><span id="l4.142"> </span>
<a href="#l4.143"></a><span id="l4.143" class="difflineminus">-  var goimURL = &quot;aim:goim?screenname=&quot; + card.getProperty(&quot;_AimScreenName&quot;);</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineminus">-  var hasScreenName = HandleLink(data.cvScreenname, zScreenName,</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineminus">-                                 card.getProperty(&quot;_AimScreenName&quot;),</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineminus">-                                 data.cvScreennameBox, goimURL);</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineminus">-</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineminus">-   visible = hasScreenName || visible;</span>
<a href="#l4.149"></a><span id="l4.149">    visible = HandleLink(data.cvEmail2, zSecondaryEmail,</span>
<a href="#l4.150"></a><span id="l4.150">                         card.getProperty(&quot;SecondEmail&quot;), data.cvEmail2Box,</span>
<a href="#l4.151"></a><span id="l4.151">                         &quot;mailto:&quot; + card.getProperty(&quot;SecondEmail&quot;)) || visible;</span>
<a href="#l4.152"></a><span id="l4.152"> </span>
<a href="#l4.153"></a><span id="l4.153">    // Home section</span>
<a href="#l4.154"></a><span id="l4.154">    visible = cvSetNode(data.cvHomeAddress, card.getProperty(&quot;HomeAddress&quot;));</span>
<a href="#l4.155"></a><span id="l4.155">    visible = cvSetNode(data.cvHomeAddress2, card.getProperty(&quot;HomeAddress2&quot;)) ||</span>
<a href="#l4.156"></a><span id="l4.156">              visible;</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineat">@@ -254,18 +270,19 @@ function DisplayCardViewPane(realCard)</span>
<a href="#l4.158"></a><span id="l4.158">     // Description section</span>
<a href="#l4.159"></a><span id="l4.159">     visible = cvSetNode(data.cvDescription, card.getProperty(&quot;Notes&quot;))</span>
<a href="#l4.160"></a><span id="l4.160">     cvSetVisible(data.cvbDescription, visible);</span>
<a href="#l4.161"></a><span id="l4.161"> </span>
<a href="#l4.162"></a><span id="l4.162">     // Addresses section</span>
<a href="#l4.163"></a><span id="l4.163">     visible = cvAddAddressNodes(data.cvAddresses, card.mailListURI);</span>
<a href="#l4.164"></a><span id="l4.164">     cvSetVisible(data.cvbAddresses, visible);</span>
<a href="#l4.165"></a><span id="l4.165"> </span>
<a href="#l4.166"></a><span id="l4.166" class="difflineminus">-    // Other section, not shown for mailing lists.</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineplus">+    // Other and Chat sections, not shown for mailing lists.</span>
<a href="#l4.168"></a><span id="l4.168">     cvSetVisible(data.cvbOther, false);</span>
<a href="#l4.169"></a><span id="l4.169" class="difflineplus">+    cvSetVisible(data.cvbChat, false);</span>
<a href="#l4.170"></a><span id="l4.170">   }</span>
<a href="#l4.171"></a><span id="l4.171">   else {</span>
<a href="#l4.172"></a><span id="l4.172">     // Other section</span>
<a href="#l4.173"></a><span id="l4.173">     // setup the birthday information</span>
<a href="#l4.174"></a><span id="l4.174">     var day = card.getProperty(&quot;BirthDay&quot;, null);</span>
<a href="#l4.175"></a><span id="l4.175">     var month = card.getProperty(&quot;BirthMonth&quot;, null);</span>
<a href="#l4.176"></a><span id="l4.176">     var year = card.getProperty(&quot;BirthYear&quot;, null);</span>
<a href="#l4.177"></a><span id="l4.177">     var dateStr;</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineat">@@ -293,16 +310,36 @@ function DisplayCardViewPane(realCard)</span>
<a href="#l4.179"></a><span id="l4.179">     visible = cvSetNodeWithLabel(data.cvCustom4, zCustom4,</span>
<a href="#l4.180"></a><span id="l4.180">                                  card.getProperty(&quot;Custom4&quot;)) || visible;</span>
<a href="#l4.181"></a><span id="l4.181">     visible = cvSetNode(data.cvNotes, card.getProperty(&quot;Notes&quot;)) || visible;</span>
<a href="#l4.182"></a><span id="l4.182">     visible = setBuddyIcon(card, data.cvBuddyIcon) || visible;</span>
<a href="#l4.183"></a><span id="l4.183"> </span>
<a href="#l4.184"></a><span id="l4.184">     cvSetVisible(data.cvhOther, visible);</span>
<a href="#l4.185"></a><span id="l4.185">     cvSetVisible(data.cvbOther, visible);</span>
<a href="#l4.186"></a><span id="l4.186"> </span>
<a href="#l4.187"></a><span id="l4.187" class="difflineplus">+    // Chat section</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvGtalk, zGtalk,</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineplus">+                                 card.getProperty(&quot;_GoogleTalk&quot;));</span>
<a href="#l4.190"></a><span id="l4.190" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvAIM, zAIM,</span>
<a href="#l4.191"></a><span id="l4.191" class="difflineplus">+                                 card.getProperty(&quot;_AimScreenName&quot;)) || visible;</span>
<a href="#l4.192"></a><span id="l4.192" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvYahoo, zYahoo,</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineplus">+                                 card.getProperty(&quot;_Yahoo&quot;)) || visible;</span>
<a href="#l4.194"></a><span id="l4.194" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvSkype, zSkype,</span>
<a href="#l4.195"></a><span id="l4.195" class="difflineplus">+                                 card.getProperty(&quot;_Skype&quot;)) || visible;</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvQQ, zQQ,</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineplus">+                                 card.getProperty(&quot;_QQ&quot;)) || visible;</span>
<a href="#l4.198"></a><span id="l4.198" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvMSN, zMSN,</span>
<a href="#l4.199"></a><span id="l4.199" class="difflineplus">+                                 card.getProperty(&quot;_MSN&quot;)) || visible;</span>
<a href="#l4.200"></a><span id="l4.200" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvICQ, zICQ,</span>
<a href="#l4.201"></a><span id="l4.201" class="difflineplus">+                                 card.getProperty(&quot;_ICQ&quot;)) || visible;</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineplus">+    visible = cvSetNodeWithLabel(data.cvXMPP, zXMPP,</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineplus">+                                 card.getProperty(&quot;_JabberId&quot;)) || visible;</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineplus">+    cvSetVisible(data.cvhChat, visible);</span>
<a href="#l4.205"></a><span id="l4.205" class="difflineplus">+    cvSetVisible(data.cvbChat, visible);</span>
<a href="#l4.206"></a><span id="l4.206" class="difflineplus">+</span>
<a href="#l4.207"></a><span id="l4.207">     // hide description section, not show for non-mailing lists</span>
<a href="#l4.208"></a><span id="l4.208">     cvSetVisible(data.cvbDescription, false);</span>
<a href="#l4.209"></a><span id="l4.209"> </span>
<a href="#l4.210"></a><span id="l4.210">     // hide addresses section, not show for non-mailing lists</span>
<a href="#l4.211"></a><span id="l4.211">     cvSetVisible(data.cvbAddresses, false);</span>
<a href="#l4.212"></a><span id="l4.212">   }</span>
<a href="#l4.213"></a><span id="l4.213"> </span>
<a href="#l4.214"></a><span id="l4.214">   // Phone section</span>
<a href="#l4.215"></a><span id="l4.215" class="difflineat">@@ -435,35 +472,22 @@ function cvSetCityStateZip(node, city, s</span>
<a href="#l4.216"></a><span id="l4.216">   if ( zip )</span>
<a href="#l4.217"></a><span id="l4.217">     text += zip;</span>
<a href="#l4.218"></a><span id="l4.218"> </span>
<a href="#l4.219"></a><span id="l4.219">   return cvSetNode(node, text);</span>
<a href="#l4.220"></a><span id="l4.220"> }</span>
<a href="#l4.221"></a><span id="l4.221"> </span>
<a href="#l4.222"></a><span id="l4.222"> function cvSetNode(node, text)</span>
<a href="#l4.223"></a><span id="l4.223"> {</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineminus">-  if ( node )</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineminus">-  {</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineminus">-    if ( !node.hasChildNodes() )</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineminus">-    {</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineminus">-      var textNode = document.createTextNode(text);</span>
<a href="#l4.229"></a><span id="l4.229" class="difflineminus">-      node.appendChild(textNode);</span>
<a href="#l4.230"></a><span id="l4.230" class="difflineminus">-    }</span>
<a href="#l4.231"></a><span id="l4.231" class="difflineminus">-    else if ( node.childNodes.length == 1 )</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineminus">-      node.childNodes[0].nodeValue = text;</span>
<a href="#l4.233"></a><span id="l4.233" class="difflineplus">+  if (!node)</span>
<a href="#l4.234"></a><span id="l4.234" class="difflineplus">+    return false;</span>
<a href="#l4.235"></a><span id="l4.235"> </span>
<a href="#l4.236"></a><span id="l4.236" class="difflineminus">-    var visible;</span>
<a href="#l4.237"></a><span id="l4.237" class="difflineminus">-</span>
<a href="#l4.238"></a><span id="l4.238" class="difflineminus">-    if ( text )</span>
<a href="#l4.239"></a><span id="l4.239" class="difflineminus">-      visible = true;</span>
<a href="#l4.240"></a><span id="l4.240" class="difflineminus">-    else</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineminus">-      visible = false;</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineminus">-</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineminus">-    cvSetVisible(node, visible);</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineminus">-  }</span>
<a href="#l4.245"></a><span id="l4.245" class="difflineplus">+  node.textContent = text;</span>
<a href="#l4.246"></a><span id="l4.246" class="difflineplus">+  let visible = !!text;</span>
<a href="#l4.247"></a><span id="l4.247" class="difflineplus">+  cvSetVisible(node, visible);</span>
<a href="#l4.248"></a><span id="l4.248"> </span>
<a href="#l4.249"></a><span id="l4.249">   return visible;</span>
<a href="#l4.250"></a><span id="l4.250"> }</span>
<a href="#l4.251"></a><span id="l4.251"> </span>
<a href="#l4.252"></a><span id="l4.252"> function cvAddAddressNodes(node, uri)</span>
<a href="#l4.253"></a><span id="l4.253"> {</span>
<a href="#l4.254"></a><span id="l4.254">   var visible = false;</span>
<a href="#l4.255"></a><span id="l4.255"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/components/addrbook/content/addressbook.xul</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/components/addrbook/content/addressbook.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -444,20 +444,20 @@</span>
<a href="#l5.4"></a><span id="l5.4">                         &lt;menuitem label=&quot;&amp;GeneratedName.label;&quot; </span>
<a href="#l5.5"></a><span id="l5.5">                                   id=&quot;cmd_SortByGeneratedName&quot;</span>
<a href="#l5.6"></a><span id="l5.6">                                   accesskey=&quot;&amp;GeneratedName.accesskey;&quot;</span>
<a href="#l5.7"></a><span id="l5.7">                                   oncommand=&quot;SortResultPane('GeneratedName');&quot; name=&quot;sortas&quot; type=&quot;radio&quot; checked=&quot;true&quot;/&gt;</span>
<a href="#l5.8"></a><span id="l5.8">                         &lt;menuitem label=&quot;&amp;PrimaryEmail.label;&quot;</span>
<a href="#l5.9"></a><span id="l5.9">                                   id=&quot;cmd_SortByPrimaryEmail&quot;</span>
<a href="#l5.10"></a><span id="l5.10">                                   accesskey=&quot;&amp;PrimaryEmail.accesskey;&quot;</span>
<a href="#l5.11"></a><span id="l5.11">                                   oncommand=&quot;SortResultPane('PrimaryEmail');&quot; name=&quot;sortas&quot; type=&quot;radio&quot; checked=&quot;true&quot;/&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                        &lt;menuitem label=&quot;&amp;ScreenName.label;&quot;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-                                  id=&quot;cmd_SortBy_AimScreenName&quot;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-                                  accesskey=&quot;&amp;ScreenName.accesskey;&quot;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-                                  oncommand=&quot;SortResultPane('_AimScreenName');&quot; name=&quot;sortas&quot; type=&quot;radio&quot; checked=&quot;true&quot;/&gt;</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+                        &lt;menuitem label=&quot;&amp;ChatName.label;&quot;</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+                                  id=&quot;cmd_SortByChatName&quot;</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+                                  accesskey=&quot;&amp;ChatName.accesskey;&quot;</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+                                  oncommand=&quot;SortResultPane('ChatName');&quot; name=&quot;sortas&quot; type=&quot;radio&quot; checked=&quot;true&quot;/&gt;</span>
<a href="#l5.20"></a><span id="l5.20">                         &lt;menuitem label=&quot;&amp;Company.label;&quot;</span>
<a href="#l5.21"></a><span id="l5.21">                                   id=&quot;cmd_SortByCompany&quot;</span>
<a href="#l5.22"></a><span id="l5.22">                                   accesskey=&quot;&amp;Company.accesskey;&quot;</span>
<a href="#l5.23"></a><span id="l5.23">                                   oncommand=&quot;SortResultPane('Company');&quot; name=&quot;sortas&quot; type=&quot;radio&quot; checked=&quot;true&quot;/&gt;</span>
<a href="#l5.24"></a><span id="l5.24">                         &lt;!-- LOCALIZATION NOTE:</span>
<a href="#l5.25"></a><span id="l5.25">                         Fields for phonetic are disabled as default and can be enabled by </span>
<a href="#l5.26"></a><span id="l5.26">                         editing &quot;mail.addr_book.show_phonetic_fields&quot;    </span>
<a href="#l5.27"></a><span id="l5.27">                         --&gt;</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineat">@@ -624,28 +624,28 @@</span>
<a href="#l5.29"></a><span id="l5.29">             onclick=&quot;AbResultsPaneOnClick(event);&quot;</span>
<a href="#l5.30"></a><span id="l5.30">             onkeypress=&quot;AbResultsPaneKeyPress(event);&quot;</span>
<a href="#l5.31"></a><span id="l5.31">             onselect=&quot;this.view.selectionChanged(); document.commandDispatcher.updateCommands('addrbook-select');&quot;</span>
<a href="#l5.32"></a><span id="l5.32">             sortCol=&quot;GeneratedName&quot;</span>
<a href="#l5.33"></a><span id="l5.33">             minheight=&quot;100&quot; height=&quot;100&quot;</span>
<a href="#l5.34"></a><span id="l5.34">             persist=&quot;height sortCol&quot;&gt;</span>
<a href="#l5.35"></a><span id="l5.35"> </span>
<a href="#l5.36"></a><span id="l5.36">         &lt;treecols id=&quot;abResultsTreeCols&quot;&gt;</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-          &lt;!-- these column ids must match up to the mork column names, except for GeneratedName, see nsIAddrDatabase.idl --&gt;</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+          &lt;!-- these column ids must match up to the mork column names, except for GeneratedName and ChatName, see nsIAddrDatabase.idl --&gt;</span>
<a href="#l5.39"></a><span id="l5.39">           &lt;treecol id=&quot;GeneratedName&quot;</span>
<a href="#l5.40"></a><span id="l5.40">                    persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot; </span>
<a href="#l5.41"></a><span id="l5.41">                    label=&quot;&amp;GeneratedName.label;&quot; primary=&quot;true&quot;/&gt;</span>
<a href="#l5.42"></a><span id="l5.42">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l5.43"></a><span id="l5.43">           &lt;treecol id=&quot;PrimaryEmail&quot;</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineminus">-                   persist=&quot;hidden ordinal width sortDirection&quot;  flex=&quot;1&quot;</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+                   persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot;</span>
<a href="#l5.46"></a><span id="l5.46">                    label=&quot;&amp;PrimaryEmail.label;&quot;/&gt;</span>
<a href="#l5.47"></a><span id="l5.47">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-          &lt;treecol id=&quot;_AimScreenName&quot;</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-                   persist=&quot;hidden ordinal width sortDirection&quot;  flex=&quot;1&quot;</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-                   label=&quot;&amp;ScreenName.label;&quot;/&gt;</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+          &lt;treecol id=&quot;ChatName&quot;</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+                   persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot;</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+                   label=&quot;&amp;ChatName.label;&quot;/&gt;</span>
<a href="#l5.54"></a><span id="l5.54">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l5.55"></a><span id="l5.55">           &lt;treecol id=&quot;Company&quot;</span>
<a href="#l5.56"></a><span id="l5.56">                    persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot;</span>
<a href="#l5.57"></a><span id="l5.57">                    label=&quot;&amp;Company.label;&quot;/&gt;</span>
<a href="#l5.58"></a><span id="l5.58">           &lt;splitter class=&quot;tree-splitter&quot;/&gt;</span>
<a href="#l5.59"></a><span id="l5.59">           &lt;treecol id=&quot;NickName&quot;</span>
<a href="#l5.60"></a><span id="l5.60">                    persist=&quot;hidden ordinal width sortDirection&quot; flex=&quot;1&quot;</span>
<a href="#l5.61"></a><span id="l5.61">                    label=&quot;&amp;NickName.label;&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineat">@@ -717,19 +717,16 @@</span>
<a href="#l5.63"></a><span id="l5.63">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvDisplayName&quot;/&gt;</span>
<a href="#l5.64"></a><span id="l5.64">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvNickname&quot;/&gt;</span>
<a href="#l5.65"></a><span id="l5.65">                   &lt;description class=&quot;CardViewLink&quot; id=&quot;cvEmail1Box&quot;&gt;</span>
<a href="#l5.66"></a><span id="l5.66">                     &lt;html:a href=&quot;&quot; id=&quot;cvEmail1&quot;/&gt;</span>
<a href="#l5.67"></a><span id="l5.67">                   &lt;/description&gt;</span>
<a href="#l5.68"></a><span id="l5.68">                   &lt;description class=&quot;CardViewLink&quot; id=&quot;cvEmail2Box&quot;&gt;</span>
<a href="#l5.69"></a><span id="l5.69">                     &lt;html:a href=&quot;&quot; id=&quot;cvEmail2&quot;/&gt;</span>
<a href="#l5.70"></a><span id="l5.70">                   &lt;/description&gt;</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineminus">-                  &lt;description class=&quot;CardViewLink&quot; id=&quot;cvScreennameBox&quot;&gt;</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineminus">-                    &lt;html:a href=&quot;&quot; id=&quot;cvScreenname&quot;/&gt;</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineminus">-                  &lt;/description&gt;</span>
<a href="#l5.74"></a><span id="l5.74">                 &lt;/vbox&gt;</span>
<a href="#l5.75"></a><span id="l5.75">                 &lt;vbox id=&quot;cvbHome&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l5.76"></a><span id="l5.76">                   &lt;description class=&quot;CardViewHeading&quot; id=&quot;cvhHome&quot;&gt;&amp;home.heading;&lt;/description&gt;          </span>
<a href="#l5.77"></a><span id="l5.77">                   &lt;hbox&gt;</span>
<a href="#l5.78"></a><span id="l5.78">                     &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l5.79"></a><span id="l5.79">                       &lt;description class=&quot;CardViewText&quot; id=&quot;cvHomeAddress&quot;/&gt;</span>
<a href="#l5.80"></a><span id="l5.80">                       &lt;description class=&quot;CardViewText&quot; id=&quot;cvHomeAddress2&quot;/&gt;</span>
<a href="#l5.81"></a><span id="l5.81">                       &lt;description class=&quot;CardViewText&quot; id=&quot;cvHomeCityStZip&quot;/&gt;</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineat">@@ -750,16 +747,28 @@</span>
<a href="#l5.83"></a><span id="l5.83">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvCustom2&quot;/&gt;</span>
<a href="#l5.84"></a><span id="l5.84">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvCustom3&quot;/&gt;</span>
<a href="#l5.85"></a><span id="l5.85">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvCustom4&quot;/&gt;</span>
<a href="#l5.86"></a><span id="l5.86">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvNotes&quot; style=&quot;white-space: pre-wrap;&quot;/&gt;</span>
<a href="#l5.87"></a><span id="l5.87">                   &lt;hbox&gt;</span>
<a href="#l5.88"></a><span id="l5.88">                     &lt;image id=&quot;cvBuddyIcon&quot;/&gt; </span>
<a href="#l5.89"></a><span id="l5.89">                   &lt;/hbox&gt;</span>
<a href="#l5.90"></a><span id="l5.90">                 &lt;/vbox&gt;</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+                &lt;vbox id=&quot;cvbChat&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+                  &lt;description class=&quot;CardViewHeading&quot; id=&quot;cvhChat&quot;&gt;&amp;chat.heading;&lt;/description&gt;</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvGtalk&quot;/&gt;</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvAIM&quot;/&gt;</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvYahoo&quot;/&gt;</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvSkype&quot;/&gt;</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvQQ&quot;/&gt;</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvMSN&quot;/&gt;</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvICQ&quot;/&gt;</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+                  &lt;description class=&quot;CardViewText&quot; id=&quot;cvXMPP&quot;/&gt;</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineplus">+                &lt;/vbox&gt;</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineplus">+                &lt;!-- the description and addresses groups are only for mailing lists --&gt;</span>
<a href="#l5.103"></a><span id="l5.103">                 &lt;vbox id=&quot;cvbDescription&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l5.104"></a><span id="l5.104">                   &lt;description class=&quot;CardViewHeading&quot; id=&quot;cvhDescription&quot;&gt;&amp;description.heading;&lt;/description&gt;</span>
<a href="#l5.105"></a><span id="l5.105">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvDescription&quot;/&gt;</span>
<a href="#l5.106"></a><span id="l5.106">                 &lt;/vbox&gt;</span>
<a href="#l5.107"></a><span id="l5.107">                 &lt;vbox id=&quot;cvbAddresses&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l5.108"></a><span id="l5.108">                   &lt;description class=&quot;CardViewHeading&quot; id=&quot;cvhAddresses&quot;&gt;&amp;addresses.heading;&lt;/description&gt;</span>
<a href="#l5.109"></a><span id="l5.109">                 &lt;/vbox&gt;</span>
<a href="#l5.110"></a><span id="l5.110">               &lt;/vbox&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -40,18 +40,17 @@</span>
<a href="#l6.4"></a><span id="l6.4"> &lt;!ENTITY PrimaryEmail.accesskey         &quot;E&quot;&gt;</span>
<a href="#l6.5"></a><span id="l6.5"> &lt;!ENTITY SecondEmail.label              &quot;Additional Email:&quot;&gt;</span>
<a href="#l6.6"></a><span id="l6.6"> &lt;!ENTITY SecondEmail.accesskey          &quot;i&quot;&gt;</span>
<a href="#l6.7"></a><span id="l6.7"> &lt;!ENTITY PreferMailFormat.label         &quot;Prefers to receive messages formatted as:&quot;&gt;</span>
<a href="#l6.8"></a><span id="l6.8"> &lt;!ENTITY PreferMailFormat.accesskey     &quot;v&quot;&gt;</span>
<a href="#l6.9"></a><span id="l6.9"> &lt;!ENTITY PlainText.label                &quot;Plain Text&quot;&gt;</span>
<a href="#l6.10"></a><span id="l6.10"> &lt;!ENTITY HTML.label                     &quot;HTML&quot;&gt;</span>
<a href="#l6.11"></a><span id="l6.11"> &lt;!ENTITY Unknown.label                  &quot;Unknown&quot;&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-&lt;!ENTITY ScreenName.label               &quot;Screen Name:&quot;&gt;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-&lt;!ENTITY ScreenName.accesskey           &quot;S&quot;&gt;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+&lt;!ENTITY chatName.label                 &quot;Chat Name:&quot;&gt;</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16"> &lt;!ENTITY allowRemoteContent1.label      &quot;Allow remote content.&quot;&gt;</span>
<a href="#l6.17"></a><span id="l6.17"> &lt;!ENTITY allowRemoteContent1.accesskey  &quot;r&quot;&gt;</span>
<a href="#l6.18"></a><span id="l6.18"> &lt;!ENTITY allowRemoteContent1.tooltip    &quot;In HTML messages it is possible to</span>
<a href="#l6.19"></a><span id="l6.19"> embed content from remote sources. Opening such a message will open a</span>
<a href="#l6.20"></a><span id="l6.20"> connection to this external source. This may allow tracking of the</span>
<a href="#l6.21"></a><span id="l6.21"> message being read. Checking this box will allow such external embedded</span>
<a href="#l6.22"></a><span id="l6.22"> content in HTML messages from this contact.&quot;&gt;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineat">@@ -122,16 +121,35 @@ content in HTML messages from this conta</span>
<a href="#l6.24"></a><span id="l6.24"> &lt;!ENTITY Custom2.accesskey              &quot;2&quot;&gt;</span>
<a href="#l6.25"></a><span id="l6.25"> &lt;!ENTITY Custom3.label                  &quot;Custom 3:&quot;&gt;</span>
<a href="#l6.26"></a><span id="l6.26"> &lt;!ENTITY Custom3.accesskey              &quot;3&quot;&gt;</span>
<a href="#l6.27"></a><span id="l6.27"> &lt;!ENTITY Custom4.label                  &quot;Custom 4:&quot;&gt;</span>
<a href="#l6.28"></a><span id="l6.28"> &lt;!ENTITY Custom4.accesskey              &quot;4&quot;&gt;</span>
<a href="#l6.29"></a><span id="l6.29"> &lt;!ENTITY Notes.label                    &quot;Notes:&quot;&gt;</span>
<a href="#l6.30"></a><span id="l6.30"> &lt;!ENTITY Notes.accesskey                &quot;N&quot;&gt;</span>
<a href="#l6.31"></a><span id="l6.31"> </span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+&lt;!ENTITY Chat.tab                       &quot;Chat&quot;&gt;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+&lt;!ENTITY Chat.accesskey                 &quot;a&quot;&gt;</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+&lt;!ENTITY Gtalk.label                    &quot;Google Talk:&quot;&gt;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+&lt;!ENTITY Gtalk.accesskey                &quot;G&quot;&gt;</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+&lt;!ENTITY AIM.label                      &quot;AIM:&quot;&gt;</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+&lt;!ENTITY AIM.accesskey                  &quot;r&quot;&gt;</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+&lt;!ENTITY Yahoo.label                    &quot;Yahoo!:&quot;&gt;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+&lt;!ENTITY Yahoo.accesskey                &quot;Y&quot;&gt;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+&lt;!ENTITY Skype.label                    &quot;Skype:&quot;&gt;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+&lt;!ENTITY Skype.accesskey                &quot;S&quot;&gt;</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+&lt;!ENTITY QQ.label                       &quot;QQ:&quot;&gt;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+&lt;!ENTITY QQ.accesskey                   &quot;Q&quot;&gt;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+&lt;!ENTITY MSN.label                      &quot;MSN:&quot;&gt;</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+&lt;!ENTITY MSN.accesskey                  &quot;M&quot;&gt;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+&lt;!ENTITY ICQ.label                      &quot;ICQ:&quot;&gt;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+&lt;!ENTITY ICQ.accesskey                  &quot;I&quot;&gt;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+&lt;!ENTITY XMPP.label                     &quot;Jabber ID:&quot;&gt;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+&lt;!ENTITY XMPP.accesskey                 &quot;J&quot;&gt;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+</span>
<a href="#l6.51"></a><span id="l6.51"> &lt;!ENTITY Photo.tab                      &quot;Photo&quot;&gt;</span>
<a href="#l6.52"></a><span id="l6.52"> &lt;!ENTITY Photo.accesskey                &quot;o&quot;&gt;</span>
<a href="#l6.53"></a><span id="l6.53"> &lt;!ENTITY PhotoDesc.label                &quot;Pick one of the following:&quot;&gt;</span>
<a href="#l6.54"></a><span id="l6.54"> &lt;!ENTITY GenericPhoto.label             &quot;Generic Photo&quot;&gt;</span>
<a href="#l6.55"></a><span id="l6.55"> &lt;!ENTITY GenericPhoto.accesskey         &quot;G&quot;&gt;</span>
<a href="#l6.56"></a><span id="l6.56"> &lt;!ENTITY DefaultPhoto.label             &quot;Default&quot;&gt;</span>
<a href="#l6.57"></a><span id="l6.57"> &lt;!ENTITY PhotoFile.label                &quot;On this Computer&quot;&gt;</span>
<a href="#l6.58"></a><span id="l6.58"> &lt;!ENTITY PhotoFile.accesskey            &quot;n&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/addressbook/abMainWindow.dtd</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -159,18 +159,18 @@ because displayed names don't have the c</span>
<a href="#l7.4"></a><span id="l7.4"> &lt;!ENTITY quickSearchCmd.key                             &quot;k&quot;&gt;</span>
<a href="#l7.5"></a><span id="l7.5"> &lt;!ENTITY searchItem.title &quot;Quick Search&quot;&gt;</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> &lt;!-- Results Pane --&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> &lt;!ENTITY GeneratedName.label                            &quot;Name&quot;&gt;</span>
<a href="#l7.9"></a><span id="l7.9"> &lt;!ENTITY GeneratedName.accesskey                        &quot;N&quot;&gt;</span>
<a href="#l7.10"></a><span id="l7.10"> &lt;!ENTITY PrimaryEmail.label                             &quot;Email&quot;&gt;</span>
<a href="#l7.11"></a><span id="l7.11"> &lt;!ENTITY PrimaryEmail.accesskey                         &quot;E&quot;&gt;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-&lt;!ENTITY ScreenName.label                               &quot;Screen Name&quot;&gt;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-&lt;!ENTITY ScreenName.accesskey                           &quot;S&quot;&gt;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+&lt;!ENTITY ChatName.label                                 &quot;Chat Name&quot;&gt;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+&lt;!ENTITY ChatName.accesskey                             &quot;C&quot;&gt;</span>
<a href="#l7.16"></a><span id="l7.16"> &lt;!ENTITY Company.label                                  &quot;Organization&quot;&gt;</span>
<a href="#l7.17"></a><span id="l7.17"> &lt;!ENTITY Company.accesskey                              &quot;z&quot;&gt;</span>
<a href="#l7.18"></a><span id="l7.18"> &lt;!ENTITY NickName.label                                 &quot;Nickname&quot;&gt;</span>
<a href="#l7.19"></a><span id="l7.19"> &lt;!ENTITY NickName.accesskey                             &quot;i&quot;&gt;</span>
<a href="#l7.20"></a><span id="l7.20"> &lt;!ENTITY SecondEmail.label                              &quot;Additional Email&quot;&gt;</span>
<a href="#l7.21"></a><span id="l7.21"> &lt;!ENTITY SecondEmail.accesskey                          &quot;l&quot;&gt;</span>
<a href="#l7.22"></a><span id="l7.22"> &lt;!ENTITY Department.label                               &quot;Department&quot;&gt;</span>
<a href="#l7.23"></a><span id="l7.23"> &lt;!ENTITY Department.accesskey                           &quot;r&quot;&gt;</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineat">@@ -193,16 +193,17 @@ because displayed names don't have the c</span>
<a href="#l7.25"></a><span id="l7.25"> &lt;!ENTITY _PhoneticName.label                            &quot;Phonetic Name&quot;&gt;</span>
<a href="#l7.26"></a><span id="l7.26"> &lt;!ENTITY _PhoneticName.accesskey                        &quot;o&quot;&gt;</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28"> &lt;!-- Card Summary Pane --&gt;</span>
<a href="#l7.29"></a><span id="l7.29"> &lt;!-- Box Headings --&gt;</span>
<a href="#l7.30"></a><span id="l7.30"> &lt;!ENTITY contact.heading                                &quot;Contact&quot;&gt;</span>
<a href="#l7.31"></a><span id="l7.31"> &lt;!ENTITY home.heading                                   &quot;Home&quot;&gt;</span>
<a href="#l7.32"></a><span id="l7.32"> &lt;!ENTITY other.heading                                  &quot;Other&quot;&gt;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+&lt;!ENTITY chat.heading                                   &quot;Chat&quot;&gt;</span>
<a href="#l7.34"></a><span id="l7.34"> &lt;!ENTITY phone.heading                                  &quot;Phone&quot;&gt;</span>
<a href="#l7.35"></a><span id="l7.35"> &lt;!ENTITY work.heading                                   &quot;Work&quot;&gt;</span>
<a href="#l7.36"></a><span id="l7.36"> &lt;!-- Special Box Headings, for mailing lists --&gt;</span>
<a href="#l7.37"></a><span id="l7.37"> &lt;!ENTITY description.heading                            &quot;Description&quot;&gt;</span>
<a href="#l7.38"></a><span id="l7.38"> &lt;!ENTITY addresses.heading                              &quot;Addresses&quot;&gt;</span>
<a href="#l7.39"></a><span id="l7.39"> &lt;!-- For Map It! --&gt;</span>
<a href="#l7.40"></a><span id="l7.40"> &lt;!ENTITY mapItButton.label                              &quot;Get Map&quot;&gt;</span>
<a href="#l7.41"></a><span id="l7.41"> &lt;!ENTITY mapIt.tooltip                                  &quot;Display a map of this address from the Web&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/addressbook/abResultsPaneOverlay.dtd</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -23,14 +23,14 @@</span>
<a href="#l8.4"></a><span id="l8.4"> &lt;!ENTITY PagerNumber.label                     &quot;Pager&quot;&gt;</span>
<a href="#l8.5"></a><span id="l8.5"> &lt;!ENTITY PagerNumber.accesskey                 &quot;P&quot;&gt;</span>
<a href="#l8.6"></a><span id="l8.6"> &lt;!ENTITY FaxNumber.label                       &quot;Fax&quot;&gt;</span>
<a href="#l8.7"></a><span id="l8.7"> &lt;!ENTITY FaxNumber.accesskey                   &quot;F&quot;&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> &lt;!ENTITY HomePhone.label                       &quot;Home Phone&quot;&gt;</span>
<a href="#l8.9"></a><span id="l8.9"> &lt;!ENTITY HomePhone.accesskey                   &quot;H&quot;&gt;</span>
<a href="#l8.10"></a><span id="l8.10"> &lt;!ENTITY WorkPhone.label                       &quot;Work Phone&quot;&gt;</span>
<a href="#l8.11"></a><span id="l8.11"> &lt;!ENTITY WorkPhone.accesskey                   &quot;W&quot;&gt;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-&lt;!ENTITY ScreenName.label                      &quot;Screen Name&quot;&gt;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-&lt;!ENTITY ScreenName.accesskey                  &quot;S&quot;&gt;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+&lt;!ENTITY ChatName.label                        &quot;Chat Name&quot;&gt;</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+&lt;!ENTITY ChatName.accesskey                    &quot;C&quot;&gt;</span>
<a href="#l8.16"></a><span id="l8.16"> &lt;!ENTITY sortAscending.label                   &quot;Ascending&quot;&gt;</span>
<a href="#l8.17"></a><span id="l8.17"> &lt;!ENTITY sortAscending.accesskey               &quot;A&quot;&gt;</span>
<a href="#l8.18"></a><span id="l8.18"> &lt;!ENTITY sortDescending.label                  &quot;Descending&quot;&gt;</span>
<a href="#l8.19"></a><span id="l8.19"> &lt;!ENTITY sortDescending.accesskey              &quot;D&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -39,30 +39,38 @@ confirmDeleteAddressbook=Are you sure yo</span>
<a href="#l9.4"></a><span id="l9.4"> confirmDeleteCollectionAddressbook=If this address book is deleted, %S will no longer collect addresses. Are you sure you want to delete the selected address book?</span>
<a href="#l9.5"></a><span id="l9.5"> confirmDeleteMailingList=Are you sure you want to delete the selected mailing list?</span>
<a href="#l9.6"></a><span id="l9.6"> confirmDeleteListsAndContacts=Are you sure you want to delete the selected contacts and mailing lists?</span>
<a href="#l9.7"></a><span id="l9.7"> confirmDeleteMailingLists=Are you sure you want to delete the selected mailing lists?</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9"> propertyPrimaryEmail=Email</span>
<a href="#l9.10"></a><span id="l9.10"> propertyListName=List Name</span>
<a href="#l9.11"></a><span id="l9.11"> propertySecondaryEmail=Additional Email</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-propertyScreenName=Screen Name</span>
<a href="#l9.13"></a><span id="l9.13"> propertyNickname=Nickname</span>
<a href="#l9.14"></a><span id="l9.14"> propertyDisplayName=Display Name</span>
<a href="#l9.15"></a><span id="l9.15"> propertyWork=Work</span>
<a href="#l9.16"></a><span id="l9.16"> propertyHome=Home</span>
<a href="#l9.17"></a><span id="l9.17"> propertyFax=Fax</span>
<a href="#l9.18"></a><span id="l9.18"> propertyCellular=Mobile</span>
<a href="#l9.19"></a><span id="l9.19"> propertyPager=Pager</span>
<a href="#l9.20"></a><span id="l9.20"> propertyBirthday=Birthday</span>
<a href="#l9.21"></a><span id="l9.21"> propertyCustom1=Custom 1</span>
<a href="#l9.22"></a><span id="l9.22"> propertyCustom2=Custom 2</span>
<a href="#l9.23"></a><span id="l9.23"> propertyCustom3=Custom 3</span>
<a href="#l9.24"></a><span id="l9.24"> propertyCustom4=Custom 4</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+propertyGtalk=Google Talk</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+propertyAIM=AIM</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+propertyYahoo=Yahoo!</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+propertySkype=Skype</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+propertyQQ=QQ</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+propertyMSN=MSN</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+propertyICQ=ICQ</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+propertyXMPP=Jabber ID</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+</span>
<a href="#l9.35"></a><span id="l9.35"> ## LOCALIZATION NOTE (dateformat)</span>
<a href="#l9.36"></a><span id="l9.36"> ## Only used if the year isn't present and should be in the format used by Date.toLocaleFormat</span>
<a href="#l9.37"></a><span id="l9.37"> ## see http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date/toLocaleFormat</span>
<a href="#l9.38"></a><span id="l9.38"> ## %B is the month's localized name and %e is the day of the month [1-31]</span>
<a href="#l9.39"></a><span id="l9.39"> ## Separators (a space, dash, etc.) can be used</span>
<a href="#l9.40"></a><span id="l9.40"> dateformat=%B %e</span>
<a href="#l9.41"></a><span id="l9.41"> </span>
<a href="#l9.42"></a><span id="l9.42"> ## LOCALIZATION NOTE (cityAndStateAndZip): </span>
<a href="#l9.43"></a><span id="l9.43" class="difflineat">@@ -134,16 +142,17 @@ AuthDlgDesc=To access the directory serv</span>
<a href="#l9.44"></a><span id="l9.44"> # LOCALIZATION NOTE(joinMeInThisChat)</span>
<a href="#l9.45"></a><span id="l9.45"> # use + for spaces</span>
<a href="#l9.46"></a><span id="l9.46"> joinMeInThisChat=Join+me+in+this+Chat.</span>
<a href="#l9.47"></a><span id="l9.47"> </span>
<a href="#l9.48"></a><span id="l9.48"> # For printing</span>
<a href="#l9.49"></a><span id="l9.49"> headingHome=Home</span>
<a href="#l9.50"></a><span id="l9.50"> headingWork=Work</span>
<a href="#l9.51"></a><span id="l9.51"> headingOther=Other</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+headingChat=Chat</span>
<a href="#l9.53"></a><span id="l9.53"> headingPhone=Phone</span>
<a href="#l9.54"></a><span id="l9.54"> headingDescription=Description</span>
<a href="#l9.55"></a><span id="l9.55"> headingAddresses=Addresses</span>
<a href="#l9.56"></a><span id="l9.56"> </span>
<a href="#l9.57"></a><span id="l9.57"> # For address books</span>
<a href="#l9.58"></a><span id="l9.58"> newAddressBookTitle=New Address Book</span>
<a href="#l9.59"></a><span id="l9.59"> renameAddressBookTitle=Address Book Properties</span>
<a href="#l9.60"></a><span id="l9.60"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/addrbook/public/nsIAbCard.idl</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/addrbook/public/nsIAbCard.idl</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -63,17 +63,17 @@ interface nsIAbPreferMailFormat {</span>
<a href="#l10.4"></a><span id="l10.4">  * - Photo properties:</span>
<a href="#l10.5"></a><span id="l10.5">  *   - PhotoName</span>
<a href="#l10.6"></a><span id="l10.6">  *   - PhotoType</span>
<a href="#l10.7"></a><span id="l10.7">  *   - PhotoURI</span>
<a href="#l10.8"></a><span id="l10.8">  *</span>
<a href="#l10.9"></a><span id="l10.9">  * The contract id for the standard implementation is</span>
<a href="#l10.10"></a><span id="l10.10">  * &lt;tt&gt;\@mozilla.org/addressbook/cardproperty;1&lt;/tt&gt;.</span>
<a href="#l10.11"></a><span id="l10.11">  */</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-[scriptable, uuid(5d6712d1-995c-42f4-91d7-e5539203af80)]</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+[scriptable, uuid(9bddf024-5178-4097-894e-d84b4ddde101)]</span>
<a href="#l10.14"></a><span id="l10.14"> interface nsIAbCard : nsIAbItem {</span>
<a href="#l10.15"></a><span id="l10.15">   /**</span>
<a href="#l10.16"></a><span id="l10.16">    * The UUID for the nsIAbDirectory containing this card.</span>
<a href="#l10.17"></a><span id="l10.17">    *</span>
<a href="#l10.18"></a><span id="l10.18">    * The directory considered to contain this card is the directory which</span>
<a href="#l10.19"></a><span id="l10.19">    * produced this card (e.g., through nsIAbDirectory::getCardForProperty) or</span>
<a href="#l10.20"></a><span id="l10.20">    * the last directory to modify this card, if another directory did so. If the</span>
<a href="#l10.21"></a><span id="l10.21">    * last directory to modify this card deleted it, then this card is considered</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -239,16 +239,24 @@ interface nsIAbCard : nsIAbItem {</span>
<a href="#l10.23"></a><span id="l10.23">    * values.</span>
<a href="#l10.24"></a><span id="l10.24">    *</span>
<a href="#l10.25"></a><span id="l10.25">    * @param  aLastNameFirst  Set to True to put the last name before the first.</span>
<a href="#l10.26"></a><span id="l10.26">    * @return                 A string containing the generated phonetic name.</span>
<a href="#l10.27"></a><span id="l10.27">    */</span>
<a href="#l10.28"></a><span id="l10.28">   AString generatePhoneticName(in boolean aLastNameFirst);</span>
<a href="#l10.29"></a><span id="l10.29"> </span>
<a href="#l10.30"></a><span id="l10.30">   /**</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+   * Generate a chat name from the card, containing the value of the</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+   * first non-empty chat field.</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+   *</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+   * @return                 A string containing the generated chat name.</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+   */</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+  AString generateChatName();</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+  /**</span>
<a href="#l10.39"></a><span id="l10.39">    * This function will copy all values from one card to another.</span>
<a href="#l10.40"></a><span id="l10.40">    *</span>
<a href="#l10.41"></a><span id="l10.41">    * @param  srcCard         The source card to copy values from.</span>
<a href="#l10.42"></a><span id="l10.42">    */</span>
<a href="#l10.43"></a><span id="l10.43">   void copy(in nsIAbCard aSrcCard);</span>
<a href="#l10.44"></a><span id="l10.44"> </span>
<a href="#l10.45"></a><span id="l10.45">   /**</span>
<a href="#l10.46"></a><span id="l10.46">    * Returns true if this card is equal to the other card.</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineat">@@ -330,15 +338,24 @@ interface nsIAbCard : nsIAbItem {</span>
<a href="#l10.48"></a><span id="l10.48"> #define kCompanyProperty            &quot;Company&quot;</span>
<a href="#l10.49"></a><span id="l10.49"> #define kScreenNameProperty         &quot;_AimScreenName&quot;</span>
<a href="#l10.50"></a><span id="l10.50"> #define kCustom1Property            &quot;Custom1&quot;</span>
<a href="#l10.51"></a><span id="l10.51"> #define kCustom2Property            &quot;Custom2&quot;</span>
<a href="#l10.52"></a><span id="l10.52"> #define kCustom3Property            &quot;Custom3&quot;</span>
<a href="#l10.53"></a><span id="l10.53"> #define kCustom4Property            &quot;Custom4&quot;</span>
<a href="#l10.54"></a><span id="l10.54"> #define kNotesProperty              &quot;Notes&quot;</span>
<a href="#l10.55"></a><span id="l10.55"> </span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+#define kGtalkProperty              &quot;_GoogleTalk&quot;</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+#define kAIMProperty                &quot;_AimScreenName&quot;</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+#define kYahooProperty              &quot;_Yahoo&quot;</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+#define kSkypeProperty              &quot;_Skype&quot;</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+#define kQQProperty                 &quot;_QQ&quot;</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+#define kMSNProperty                &quot;_MSN&quot;</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+#define kICQProperty                &quot;_ICQ&quot;</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+#define kXMPPProperty               &quot;_JabberId&quot;</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+</span>
<a href="#l10.65"></a><span id="l10.65"> #define kAnniversaryYearProperty    &quot;AnniversaryYear&quot;</span>
<a href="#l10.66"></a><span id="l10.66"> #define kAnniversaryMonthProperty   &quot;AnniversaryMonth&quot;</span>
<a href="#l10.67"></a><span id="l10.67"> #define kAnniversaryDayProperty     &quot;AnniversaryDay&quot;</span>
<a href="#l10.68"></a><span id="l10.68"> #define kBirthYearProperty          &quot;BirthYear&quot;</span>
<a href="#l10.69"></a><span id="l10.69"> #define kBirthMonthProperty         &quot;BirthMonth&quot;</span>
<a href="#l10.70"></a><span id="l10.70"> #define kBirthDayProperty           &quot;BirthDay&quot;</span>
<a href="#l10.71"></a><span id="l10.71"> %}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbAddressCollector.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbAddressCollector.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -236,25 +236,28 @@ nsAbAddressCollector::AutoCollectScreenN</span>
<a href="#l11.4"></a><span id="l11.4">     return;</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6">   PRInt32 atPos = aEmail.FindChar('@');</span>
<a href="#l11.7"></a><span id="l11.7">   if (atPos == -1)</span>
<a href="#l11.8"></a><span id="l11.8">     return;</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10">   const nsACString&amp; domain = Substring(aEmail, atPos + 1);</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+  if (domain.IsEmpty())</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    return;</span>
<a href="#l11.14"></a><span id="l11.14">   // username in </span>
<a href="#l11.15"></a><span id="l11.15">   // username@aol.com (America Online)</span>
<a href="#l11.16"></a><span id="l11.16">   // username@cs.com (Compuserve)</span>
<a href="#l11.17"></a><span id="l11.17">   // username@netscape.net (Netscape webmail)</span>
<a href="#l11.18"></a><span id="l11.18">   // are all AIM screennames.  autocollect that info.</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-  if (!domain.IsEmpty() &amp;&amp;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-      (domain.Equals(&quot;aol.com&quot;) || domain.Equals(&quot;cs.com&quot;) ||</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-       domain.Equals(&quot;netscape.net&quot;)))</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+  if (domain.Equals(&quot;aol.com&quot;) || domain.Equals(&quot;cs.com&quot;) ||</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+      domain.Equals(&quot;netscape.net&quot;))</span>
<a href="#l11.24"></a><span id="l11.24">     aCard-&gt;SetPropertyAsAUTF8String(kScreenNameProperty, Substring(aEmail, 0, atPos));</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+  else if (domain.Equals(&quot;gmail.com&quot;) || domain.Equals(&quot;googlemail.com&quot;))</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+    aCard-&gt;SetPropertyAsAUTF8String(kGtalkProperty, Substring(aEmail, 0, atPos));</span>
<a href="#l11.27"></a><span id="l11.27"> }</span>
<a href="#l11.28"></a><span id="l11.28"> </span>
<a href="#l11.29"></a><span id="l11.29"> // Returns true if the card was modified successfully.</span>
<a href="#l11.30"></a><span id="l11.30"> bool</span>
<a href="#l11.31"></a><span id="l11.31"> nsAbAddressCollector::SetNamesForCard(nsIAbCard *aSenderCard,</span>
<a href="#l11.32"></a><span id="l11.32">                                       const nsACString &amp;aFullName)</span>
<a href="#l11.33"></a><span id="l11.33"> {</span>
<a href="#l11.34"></a><span id="l11.34">   nsCString firstName;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbCardProperty.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbCardProperty.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -42,18 +42,22 @@ struct AppendItem {</span>
<a href="#l12.4"></a><span id="l12.4">   const char* mLabel;</span>
<a href="#l12.5"></a><span id="l12.5">   EAppendType mAppendType;</span>
<a href="#l12.6"></a><span id="l12.6"> };</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> static const AppendItem NAME_ATTRS_ARRAY[] = {</span>
<a href="#l12.9"></a><span id="l12.9">   {kDisplayNameProperty, &quot;propertyDisplayName&quot;, eAppendLabel},</span>
<a href="#l12.10"></a><span id="l12.10">   {kNicknameProperty, &quot;propertyNickname&quot;, eAppendLabel},</span>
<a href="#l12.11"></a><span id="l12.11">   {kPriEmailProperty, &quot;&quot;, eAppendLine},</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+#ifndef MOZ_THUNDERBIRD</span>
<a href="#l12.13"></a><span id="l12.13">   {k2ndEmailProperty, &quot;&quot;, eAppendLine},</span>
<a href="#l12.14"></a><span id="l12.14">   {kScreenNameProperty, &quot;propertyScreenName&quot;, eAppendLabel}</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+#else</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+  {k2ndEmailProperty, &quot;&quot;, eAppendLine}</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+#endif</span>
<a href="#l12.18"></a><span id="l12.18"> };</span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20"> static const AppendItem PHONE_ATTRS_ARRAY[] = {</span>
<a href="#l12.21"></a><span id="l12.21">   {kWorkPhoneProperty, &quot;propertyWork&quot;, eAppendLabel},</span>
<a href="#l12.22"></a><span id="l12.22">   {kHomePhoneProperty, &quot;propertyHome&quot;, eAppendLabel},</span>
<a href="#l12.23"></a><span id="l12.23">   {kFaxProperty, &quot;propertyFax&quot;, eAppendLabel},</span>
<a href="#l12.24"></a><span id="l12.24">   {kPagerProperty, &quot;propertyPager&quot;, eAppendLabel},</span>
<a href="#l12.25"></a><span id="l12.25">   {kCellularProperty, &quot;propertyCellular&quot;, eAppendLabel}</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineat">@@ -81,16 +85,27 @@ static const AppendItem WORK_ATTRS_ARRAY</span>
<a href="#l12.27"></a><span id="l12.27"> static const AppendItem CUSTOM_ATTRS_ARRAY[] = {</span>
<a href="#l12.28"></a><span id="l12.28">   {kCustom1Property, &quot;propertyCustom1&quot;, eAppendLabel},</span>
<a href="#l12.29"></a><span id="l12.29">   {kCustom2Property, &quot;propertyCustom2&quot;, eAppendLabel},</span>
<a href="#l12.30"></a><span id="l12.30">   {kCustom3Property, &quot;propertyCustom3&quot;, eAppendLabel},</span>
<a href="#l12.31"></a><span id="l12.31">   {kCustom4Property, &quot;propertyCustom4&quot;, eAppendLabel},</span>
<a href="#l12.32"></a><span id="l12.32">   {kNotesProperty, &quot;&quot;, eAppendLine}</span>
<a href="#l12.33"></a><span id="l12.33"> };</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+static const AppendItem CHAT_ATTRS_ARRAY[] = {</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+  {kGtalkProperty, &quot;propertyGtalk&quot;, eAppendLabel},</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineplus">+  {kAIMProperty, &quot;propertyAIM&quot;, eAppendLabel},</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+  {kYahooProperty, &quot;propertyYahoo&quot;, eAppendLabel},</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+  {kSkypeProperty, &quot;propertySkype&quot;, eAppendLabel},</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineplus">+  {kQQProperty, &quot;propertyQQ&quot;, eAppendLabel},</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineplus">+  {kMSNProperty, &quot;propertyMSN&quot;, eAppendLabel},</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+  {kICQProperty, &quot;propertyICQ&quot;, eAppendLabel},</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineplus">+  {kXMPPProperty, &quot;propertyXMPP&quot;, eAppendLabel}</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+};</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineplus">+</span>
<a href="#l12.46"></a><span id="l12.46"> nsAbCardProperty::nsAbCardProperty()</span>
<a href="#l12.47"></a><span id="l12.47">   : m_IsMailList(false)</span>
<a href="#l12.48"></a><span id="l12.48"> {</span>
<a href="#l12.49"></a><span id="l12.49">   m_properties.Init();</span>
<a href="#l12.50"></a><span id="l12.50"> </span>
<a href="#l12.51"></a><span id="l12.51">   // Initialize some default properties</span>
<a href="#l12.52"></a><span id="l12.52">   SetPropertyAsUint32(kPreferMailFormatProperty, nsIAbPreferMailFormat::unknown);</span>
<a href="#l12.53"></a><span id="l12.53">   SetPropertyAsUint32(kPopularityIndexProperty, 0);</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineat">@@ -776,16 +791,19 @@ nsresult nsAbCardProperty::ConvertToXMLP</span>
<a href="#l12.55"></a><span id="l12.55">   rv = AppendSection(NAME_ATTRS_ARRAY, sizeof(NAME_ATTRS_ARRAY)/sizeof(AppendItem), EmptyString(), bundle, conv, xmlStr);</span>
<a href="#l12.56"></a><span id="l12.56"> </span>
<a href="#l12.57"></a><span id="l12.57">   xmlStr.AppendLiteral(&quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;);</span>
<a href="#l12.58"></a><span id="l12.58"> </span>
<a href="#l12.59"></a><span id="l12.59">   rv = AppendSection(PHONE_ATTRS_ARRAY, sizeof(PHONE_ATTRS_ARRAY)/sizeof(AppendItem), NS_LITERAL_STRING(&quot;headingPhone&quot;), bundle, conv, xmlStr);</span>
<a href="#l12.60"></a><span id="l12.60"> </span>
<a href="#l12.61"></a><span id="l12.61">   if (!m_IsMailList) {</span>
<a href="#l12.62"></a><span id="l12.62">     rv = AppendSection(CUSTOM_ATTRS_ARRAY, sizeof(CUSTOM_ATTRS_ARRAY)/sizeof(AppendItem), NS_LITERAL_STRING(&quot;headingOther&quot;), bundle, conv, xmlStr);</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineplus">+#ifdef MOZ_THUNDERBIRD</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineplus">+    rv = AppendSection(CHAT_ATTRS_ARRAY, sizeof(CHAT_ATTRS_ARRAY)/sizeof(AppendItem), NS_LITERAL_STRING(&quot;headingChat&quot;), bundle, conv, xmlStr);</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineplus">+#endif</span>
<a href="#l12.66"></a><span id="l12.66">   }</span>
<a href="#l12.67"></a><span id="l12.67">   else {</span>
<a href="#l12.68"></a><span id="l12.68">     rv = AppendSection(CUSTOM_ATTRS_ARRAY, sizeof(CUSTOM_ATTRS_ARRAY)/sizeof(AppendItem), NS_LITERAL_STRING(&quot;headingDescription&quot;),</span>
<a href="#l12.69"></a><span id="l12.69">          bundle, conv, xmlStr);</span>
<a href="#l12.70"></a><span id="l12.70"> </span>
<a href="#l12.71"></a><span id="l12.71">     xmlStr.AppendLiteral(&quot;&lt;section&gt;&lt;sectiontitle&gt;&quot;);</span>
<a href="#l12.72"></a><span id="l12.72"> </span>
<a href="#l12.73"></a><span id="l12.73">     nsString headingAddresses;</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineat">@@ -1131,8 +1149,27 @@ NS_IMETHODIMP nsAbCardProperty::Generate</span>
<a href="#l12.75"></a><span id="l12.75">   else</span>
<a href="#l12.76"></a><span id="l12.76">   {</span>
<a href="#l12.77"></a><span id="l12.77">     aResult = firstName;</span>
<a href="#l12.78"></a><span id="l12.78">     aResult += lastName;</span>
<a href="#l12.79"></a><span id="l12.79">   }</span>
<a href="#l12.80"></a><span id="l12.80"> </span>
<a href="#l12.81"></a><span id="l12.81">   return NS_OK;</span>
<a href="#l12.82"></a><span id="l12.82"> }</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineplus">+</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineplus">+NS_IMETHODIMP nsAbCardProperty::GenerateChatName(nsAString &amp;aResult)</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineplus">+{</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineplus">+  aResult.Truncate();</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineplus">+</span>
<a href="#l12.88"></a><span id="l12.88" class="difflineplus">+#define CHECK_CHAT_PROPERTY(aProtocol)                                       \</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineplus">+  if (NS_SUCCEEDED(GetPropertyAsAString(k##aProtocol##Property, aResult)) &amp;&amp; \</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineplus">+      !aResult.IsEmpty())                                                    \</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineplus">+    return NS_OK</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineplus">+  CHECK_CHAT_PROPERTY(Gtalk);</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineplus">+  CHECK_CHAT_PROPERTY(AIM);</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineplus">+  CHECK_CHAT_PROPERTY(Yahoo);</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineplus">+  CHECK_CHAT_PROPERTY(Skype);</span>
<a href="#l12.96"></a><span id="l12.96" class="difflineplus">+  CHECK_CHAT_PROPERTY(QQ);</span>
<a href="#l12.97"></a><span id="l12.97" class="difflineplus">+  CHECK_CHAT_PROPERTY(MSN);</span>
<a href="#l12.98"></a><span id="l12.98" class="difflineplus">+  CHECK_CHAT_PROPERTY(ICQ);</span>
<a href="#l12.99"></a><span id="l12.99" class="difflineplus">+  CHECK_CHAT_PROPERTY(XMPP);</span>
<a href="#l12.100"></a><span id="l12.100" class="difflineplus">+  return NS_OK;</span>
<a href="#l12.101"></a><span id="l12.101" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbView.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbView.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -408,16 +408,19 @@ nsresult nsAbView::GetCardValue(nsIAbCar</span>
<a href="#l13.4"></a><span id="l13.4">   // else, standard column (like PrimaryEmail and _AimScreenName)</span>
<a href="#l13.5"></a><span id="l13.5">   if (colID[0] == PRUnichar('G'))</span>
<a href="#l13.6"></a><span id="l13.6">     return card-&gt;GenerateName(mGeneratedNameFormat, mABBundle, _retval);</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8">   if (colID[0] == PRUnichar('_') &amp;&amp; colID[1] == PRUnichar('P'))</span>
<a href="#l13.9"></a><span id="l13.9">     // Use LN/FN order for the phonetic name</span>
<a href="#l13.10"></a><span id="l13.10">     return card-&gt;GeneratePhoneticName(true, _retval);</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+  if (!NS_strcmp(colID, NS_LITERAL_STRING(&quot;ChatName&quot;).get()))</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    return card-&gt;GenerateChatName(_retval);</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+</span>
<a href="#l13.15"></a><span id="l13.15">   nsresult rv = card-&gt;GetPropertyAsAString(NS_ConvertUTF16toUTF8(colID).get(), _retval);</span>
<a href="#l13.16"></a><span id="l13.16">   if (rv == NS_ERROR_NOT_AVAILABLE) {</span>
<a href="#l13.17"></a><span id="l13.17">     rv = NS_OK;</span>
<a href="#l13.18"></a><span id="l13.18">     _retval.Truncate();</span>
<a href="#l13.19"></a><span id="l13.19">   }</span>
<a href="#l13.20"></a><span id="l13.20">   return rv;</span>
<a href="#l13.21"></a><span id="l13.21"> }</span>
<a href="#l13.22"></a><span id="l13.22"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

