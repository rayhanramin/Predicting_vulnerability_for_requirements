<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 29492:3903c14b1b2ff0d47a44d89bb478f9eb8ba899de</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 3903c14b1b2ff0d47a44d89bb478f9eb8ba899de" />
<meta property="og:url" content="/comm-central/rev/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de" />
<meta property="og:description" content="Port bug 1536556 - Replace new Error(Cr.ERROR) with new Component.Exception. rs=linting DONTBUILD" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 3903c14b1b2ff0d47a44d89bb478f9eb8ba899de 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">shortlog</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">files</a> |
changeset |
<a href="/comm-central/raw-rev/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">raw</a>  | <a href="/comm-central/archive/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1536556">bug 1536556</a> - Replace new Error(Cr.ERROR) with new Component.Exception. rs=linting DONTBUILD
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 06 May 2020 11:10:50 +1200</td></tr>

<tr>
 <td>changeset 29492</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">3903c14b1b2ff0d47a44d89bb478f9eb8ba899de</a></td>
</tr>



<tr>
<td>parent 29491</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/01b3a50f3311f7b1d4fdfea8581532c31ab3e67a">01b3a50f3311f7b1d4fdfea8581532c31ab3e67a</a>
</td>
</tr>

<tr>
<td>child 29493</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5a1303612c7232d0dc152f42c5bc71fd00a53b22">5a1303612c7232d0dc152f42c5bc71fd00a53b22</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">17395</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Tue, 05 May 2020 23:11:24 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@3903c14b1b2f [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&newProject=comm-central&newRevision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&newProject=comm-central&newRevision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&newProject=comm-central&newRevision=3903c14b1b2ff0d47a44d89bb478f9eb8ba899de&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28linting%29&revcount=50">linting</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1536556">1536556</a></td></tr>




</table></div>

<div class="page_body description">Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1536556">bug 1536556</a> - Replace new Error(Cr.ERROR) with new Component.Exception. rs=linting DONTBUILD

This was done automatically with `mach eslint --fix`</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/backend/icaljs/calRecurrenceRule.js">calendar/base/backend/icaljs/calRecurrenceRule.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/backend/icaljs/calRecurrenceRule.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/backend/icaljs/calRecurrenceRule.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/backend/icaljs/calRecurrenceRule.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/backend/icaljs/calRecurrenceRule.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/backend/icaljs/calRecurrenceRule.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-base-view.js">calendar/base/content/calendar-base-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-base-view.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-base-view.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-base-view.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-base-view.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-base-view.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-event-column.js">calendar/base/content/calendar-event-column.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-event-column.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-event-column.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-event-column.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-event-column.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-event-column.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-item-editing.js">calendar/base/content/calendar-item-editing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-item-editing.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-item-editing.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-item-editing.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-item-editing.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-item-editing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-management.js">calendar/base/content/calendar-management.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-management.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-management.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-management.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-management.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-management.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-base-view.js">calendar/base/content/calendar-month-base-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-base-view.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-base-view.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-base-view.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-base-view.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-base-view.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-view.js">calendar/base/content/calendar-month-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-view.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-view.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-view.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-view.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-month-view.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-multiday-base-view.js">calendar/base/content/calendar-multiday-base-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-multiday-base-view.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-multiday-base-view.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-multiday-base-view.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-multiday-base-view.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-multiday-base-view.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-tabs.js">calendar/base/content/calendar-tabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-tabs.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-tabs.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-tabs.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-tabs.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/calendar-tabs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/widgets/calendar-alarm-widget.js">calendar/base/content/widgets/calendar-alarm-widget.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/widgets/calendar-alarm-widget.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/widgets/calendar-alarm-widget.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/widgets/calendar-alarm-widget.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/widgets/calendar-alarm-widget.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/content/widgets/calendar-alarm-widget.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/calUtils.jsm">calendar/base/modules/calUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/calUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/calUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/calUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/calUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/calUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calDateTimeUtils.jsm">calendar/base/modules/utils/calDateTimeUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calDateTimeUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calDateTimeUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calDateTimeUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calDateTimeUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calDateTimeUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calItemUtils.jsm">calendar/base/modules/utils/calItemUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calItemUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calItemUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calItemUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calItemUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calItemUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calProviderUtils.jsm">calendar/base/modules/utils/calProviderUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calProviderUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calProviderUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calProviderUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calProviderUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/modules/utils/calProviderUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAlarm.jsm">calendar/base/src/CalAlarm.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAlarm.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAlarm.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAlarm.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAlarm.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAlarm.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttachment.jsm">calendar/base/src/CalAttachment.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttachment.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttachment.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttachment.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttachment.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttachment.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttendee.jsm">calendar/base/src/CalAttendee.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttendee.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttendee.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttendee.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttendee.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalAttendee.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalEvent.jsm">calendar/base/src/CalEvent.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalEvent.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalEvent.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalEvent.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalEvent.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalEvent.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalItipItem.jsm">calendar/base/src/CalItipItem.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalItipItem.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalItipItem.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalItipItem.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalItipItem.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalItipItem.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceDate.jsm">calendar/base/src/CalRecurrenceDate.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceDate.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceDate.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceDate.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceDate.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceDate.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceInfo.jsm">calendar/base/src/CalRecurrenceInfo.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceInfo.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceInfo.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceInfo.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceInfo.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRecurrenceInfo.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRelation.jsm">calendar/base/src/CalRelation.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRelation.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRelation.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRelation.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRelation.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalRelation.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTimezoneService.jsm">calendar/base/src/CalTimezoneService.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTimezoneService.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTimezoneService.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTimezoneService.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTimezoneService.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTimezoneService.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTodo.jsm">calendar/base/src/CalTodo.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTodo.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTodo.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTodo.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTodo.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/CalTodo.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calCachedCalendar.js">calendar/base/src/calCachedCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calCachedCalendar.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calCachedCalendar.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calCachedCalendar.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calCachedCalendar.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calCachedCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calItemBase.js">calendar/base/src/calItemBase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calItemBase.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calItemBase.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calItemBase.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calItemBase.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/base/src/calItemBase.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/itip/CalItipEmailTransport.jsm">calendar/itip/CalItipEmailTransport.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/itip/CalItipEmailTransport.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/itip/CalItipEmailTransport.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/itip/CalItipEmailTransport.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/itip/CalItipEmailTransport.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/itip/CalItipEmailTransport.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/components/CalItipProtocolHandler.jsm">calendar/lightning/components/CalItipProtocolHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/components/CalItipProtocolHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/components/CalItipProtocolHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/components/CalItipProtocolHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/components/CalItipProtocolHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/components/CalItipProtocolHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/CalDavCalendar.jsm">calendar/providers/caldav/CalDavCalendar.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/CalDavCalendar.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/CalDavCalendar.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/CalDavCalendar.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/CalDavCalendar.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/CalDavCalendar.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/modules/CalDavRequest.jsm">calendar/providers/caldav/modules/CalDavRequest.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/modules/CalDavRequest.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/modules/CalDavRequest.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/modules/CalDavRequest.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/modules/CalDavRequest.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/caldav/modules/CalDavRequest.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/composite/CalCompositeCalendar.jsm">calendar/providers/composite/CalCompositeCalendar.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/composite/CalCompositeCalendar.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/composite/CalCompositeCalendar.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/composite/CalCompositeCalendar.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/composite/CalCompositeCalendar.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/composite/CalCompositeCalendar.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/ics/CalICSCalendar.jsm">calendar/providers/ics/CalICSCalendar.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/ics/CalICSCalendar.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/ics/CalICSCalendar.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/ics/CalICSCalendar.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/ics/CalICSCalendar.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/ics/CalICSCalendar.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/memory/CalMemoryCalendar.jsm">calendar/providers/memory/CalMemoryCalendar.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/memory/CalMemoryCalendar.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/memory/CalMemoryCalendar.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/memory/CalMemoryCalendar.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/memory/CalMemoryCalendar.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/memory/CalMemoryCalendar.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/storage/CalStorageCalendar.jsm">calendar/providers/storage/CalStorageCalendar.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/storage/CalStorageCalendar.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/storage/CalStorageCalendar.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/storage/CalStorageCalendar.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/storage/CalStorageCalendar.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/providers/storage/CalStorageCalendar.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/resources/content/publish.js">calendar/resources/content/publish.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/resources/content/publish.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/resources/content/publish.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/resources/content/publish.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/resources/content/publish.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/calendar/resources/content/publish.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imAccounts.jsm">chat/components/src/imAccounts.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imAccounts.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imAccounts.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imAccounts.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imAccounts.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imAccounts.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCommands.jsm">chat/components/src/imCommands.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCommands.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCommands.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCommands.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCommands.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCommands.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imContacts.jsm">chat/components/src/imContacts.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imContacts.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imContacts.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imContacts.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imContacts.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imContacts.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCore.jsm">chat/components/src/imCore.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCore.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCore.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCore.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCore.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/components/src/imCore.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/imXPCOMUtils.jsm">chat/modules/imXPCOMUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/imXPCOMUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/imXPCOMUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/imXPCOMUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/imXPCOMUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/imXPCOMUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/jsProtoHelper.jsm">chat/modules/jsProtoHelper.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/jsProtoHelper.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/jsProtoHelper.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/jsProtoHelper.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/jsProtoHelper.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/jsProtoHelper.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/socket.jsm">chat/modules/socket.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/socket.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/socket.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/socket.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/socket.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/modules/socket.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/irc/irc.jsm">chat/protocols/irc/irc.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/irc/irc.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/irc/irc.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/irc/irc.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/irc/irc.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/irc/irc.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/matrix/matrix.jsm">chat/protocols/matrix/matrix.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/matrix/matrix.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/matrix/matrix.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/matrix/matrix.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/matrix/matrix.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/matrix/matrix.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/twitter/twitter.jsm">chat/protocols/twitter/twitter.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/twitter/twitter.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/twitter/twitter.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/twitter/twitter.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/twitter/twitter.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/chat/protocols/twitter/twitter.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/common/src/viewZoomOverlay.js">common/src/viewZoomOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/common/src/viewZoomOverlay.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/common/src/viewZoomOverlay.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/common/src/viewZoomOverlay.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/common/src/viewZoomOverlay.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/common/src/viewZoomOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/editor/ui/composer/content/ComposerCommands.js">editor/ui/composer/content/ComposerCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/editor/ui/composer/content/ComposerCommands.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/editor/ui/composer/content/ComposerCommands.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/editor/ui/composer/content/ComposerCommands.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/editor/ui/composer/content/ComposerCommands.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/editor/ui/composer/content/ComposerCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/ldap/xpcom/src/LDAPProtocolHandler.jsm">ldap/xpcom/src/LDAPProtocolHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/ldap/xpcom/src/LDAPProtocolHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/ldap/xpcom/src/LDAPProtocolHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/ldap/xpcom/src/LDAPProtocolHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/ldap/xpcom/src/LDAPProtocolHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/ldap/xpcom/src/LDAPProtocolHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/content/mailWindow.js">mail/base/content/mailWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/content/mailWindow.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/content/mailWindow.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/content/mailWindow.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/content/mailWindow.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/content/mailWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/modules/MailMigrator.jsm">mail/base/modules/MailMigrator.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/modules/MailMigrator.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/modules/MailMigrator.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/modules/MailMigrator.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/modules/MailMigrator.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/modules/MailMigrator.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/test/unit/test_alertHook.js">mail/base/test/unit/test_alertHook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/test/unit/test_alertHook.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/test/unit/test_alertHook.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/test/unit/test_alertHook.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/test/unit/test_alertHook.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/base/test/unit/test_alertHook.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/AboutRedirector.jsm">mail/components/AboutRedirector.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/AboutRedirector.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/AboutRedirector.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/AboutRedirector.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/AboutRedirector.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/AboutRedirector.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/MessengerContentHandler.jsm">mail/components/MessengerContentHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/MessengerContentHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/MessengerContentHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/MessengerContentHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/MessengerContentHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/MessengerContentHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/Activity.jsm">mail/components/activity/Activity.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/Activity.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/Activity.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/Activity.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/Activity.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/Activity.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/ActivityManager.jsm">mail/components/activity/ActivityManager.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/ActivityManager.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/ActivityManager.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/ActivityManager.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/ActivityManager.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/activity/ActivityManager.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/ComposerCommands.js">mail/components/compose/content/ComposerCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/ComposerCommands.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/ComposerCommands.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/ComposerCommands.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/ComposerCommands.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/ComposerCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/extensions/parent/ext-cloudFile.js">mail/components/extensions/parent/ext-cloudFile.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/extensions/parent/ext-cloudFile.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/extensions/parent/ext-cloudFile.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/extensions/parent/ext-cloudFile.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/extensions/parent/ext-cloudFile.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/extensions/parent/ext-cloudFile.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/core.jsm">mail/extensions/openpgp/content/modules/core.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/core.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/core.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/core.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/core.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/core.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/files.jsm">mail/extensions/openpgp/content/modules/files.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/files.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/files.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/files.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/files.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/files.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/funcs.jsm">mail/extensions/openpgp/content/modules/funcs.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/funcs.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/funcs.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/funcs.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/funcs.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/funcs.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/keyserver.jsm">mail/extensions/openpgp/content/modules/keyserver.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/keyserver.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/keyserver.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/keyserver.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/keyserver.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/keyserver.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">mail/extensions/openpgp/content/modules/mimeEncrypt.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/protocolHandler.jsm">mail/extensions/openpgp/content/modules/protocolHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/protocolHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/protocolHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/protocolHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/protocolHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/modules/protocolHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailCommon.js">mail/extensions/openpgp/content/ui/enigmailCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailCommon.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailCommon.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailCommon.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailCommon.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailCommon.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/notification/browser_notification.js">mail/test/browser/notification/browser_notification.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/notification/browser_notification.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/notification/browser_notification.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/notification/browser_notification.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/notification/browser_notification.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/notification/browser_notification.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/AttachmentHelpers.jsm">mail/test/browser/shared-modules/AttachmentHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/AttachmentHelpers.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/AttachmentHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/AttachmentHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/AttachmentHelpers.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/AttachmentHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/CloudfileHelpers.jsm">mail/test/browser/shared-modules/CloudfileHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/CloudfileHelpers.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/CloudfileHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/CloudfileHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/CloudfileHelpers.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/CloudfileHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/MockObjectHelpers.jsm">mail/test/browser/shared-modules/MockObjectHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/MockObjectHelpers.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/MockObjectHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/MockObjectHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/MockObjectHelpers.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/MockObjectHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/PromptHelpers.jsm">mail/test/browser/shared-modules/PromptHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/PromptHelpers.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/PromptHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/PromptHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/PromptHelpers.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/PromptHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/httpd.jsm">mail/test/browser/shared-modules/httpd.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/httpd.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/httpd.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/httpd.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/httpd.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mail/test/browser/shared-modules/httpd.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm">mailnews/addrbook/jsaddrbook/AddrBookCard.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm">mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm">mailnews/addrbook/jsaddrbook/AddrBookManager.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm">mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/src/AbLDAPAttributeMap.jsm">mailnews/addrbook/src/AbLDAPAttributeMap.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/src/AbLDAPAttributeMap.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/src/AbLDAPAttributeMap.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/src/AbLDAPAttributeMap.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/src/AbLDAPAttributeMap.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/addrbook/src/AbLDAPAttributeMap.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/FolderLookupService.jsm">mailnews/base/src/FolderLookupService.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/FolderLookupService.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/FolderLookupService.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/FolderLookupService.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/FolderLookupService.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/FolderLookupService.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/MailNewsCommandLineHandler.jsm">mailnews/base/src/MailNewsCommandLineHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/MailNewsCommandLineHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/MailNewsCommandLineHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/MailNewsCommandLineHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/MailNewsCommandLineHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/src/MailNewsCommandLineHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/test/unit/test_compactFailure.js">mailnews/base/test/unit/test_compactFailure.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/test/unit/test_compactFailure.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/test/unit/test_compactFailure.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/test/unit/test_compactFailure.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/test/unit/test_compactFailure.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/base/test/unit/test_compactFailure.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/compose/src/SMTPProtocolHandler.jsm">mailnews/compose/src/SMTPProtocolHandler.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/compose/src/SMTPProtocolHandler.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/compose/src/SMTPProtocolHandler.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/compose/src/SMTPProtocolHandler.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/compose/src/SMTPProtocolHandler.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/compose/src/SMTPProtocolHandler.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/import/test/unit/resources/mock_windows_reg_factory.js">mailnews/import/test/unit/resources/mock_windows_reg_factory.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/import/test/unit/resources/mock_windows_reg_factory.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/import/test/unit/resources/mock_windows_reg_factory.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/import/test/unit/resources/mock_windows_reg_factory.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/import/test/unit/resources/mock_windows_reg_factory.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/import/test/unit/resources/mock_windows_reg_factory.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/jsaccount/modules/JSAccountUtils.jsm">mailnews/jsaccount/modules/JSAccountUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/jsaccount/modules/JSAccountUtils.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/jsaccount/modules/JSAccountUtils.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/jsaccount/modules/JSAccountUtils.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/jsaccount/modules/JSAccountUtils.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/jsaccount/modules/JSAccountUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/mime/src/MimeJSComponents.jsm">mailnews/mime/src/MimeJSComponents.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/mime/src/MimeJSComponents.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/mime/src/MimeJSComponents.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/mime/src/MimeJSComponents.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/mime/src/MimeJSComponents.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/mime/src/MimeJSComponents.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/fakeserver/Maild.jsm">mailnews/test/fakeserver/Maild.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/fakeserver/Maild.jsm">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/fakeserver/Maild.jsm">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/fakeserver/Maild.jsm">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/fakeserver/Maild.jsm">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/fakeserver/Maild.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/resources/alertTestUtils.js">mailnews/test/resources/alertTestUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/resources/alertTestUtils.js">file</a> |
<a href="/comm-central/annotate/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/resources/alertTestUtils.js">annotate</a> |
<a href="/comm-central/diff/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/resources/alertTestUtils.js">diff</a> |
<a href="/comm-central/comparison/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/resources/alertTestUtils.js">comparison</a> |
<a href="/comm-central/log/3903c14b1b2ff0d47a44d89bb478f9eb8ba899de/mailnews/test/resources/alertTestUtils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calRecurrenceRule.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calRecurrenceRule.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -29,17 +29,17 @@ calRecurrenceRule.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">   innerObject: null,</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">   isMutable: true,</span>
<a href="#l1.7"></a><span id="l1.7">   makeImmutable() {</span>
<a href="#l1.8"></a><span id="l1.8">     this.isMutable = false;</span>
<a href="#l1.9"></a><span id="l1.9">   },</span>
<a href="#l1.10"></a><span id="l1.10">   ensureMutable() {</span>
<a href="#l1.11"></a><span id="l1.11">     if (!this.isMutable) {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l1.14"></a><span id="l1.14">     }</span>
<a href="#l1.15"></a><span id="l1.15">   },</span>
<a href="#l1.16"></a><span id="l1.16">   clone() {</span>
<a href="#l1.17"></a><span id="l1.17">     return new calRecurrenceRule(new ICAL.Recur(this.innerObject));</span>
<a href="#l1.18"></a><span id="l1.18">   },</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">   isNegative: false, // We don't support EXRULE anymore</span>
<a href="#l1.21"></a><span id="l1.21">   get isFinite() {</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -53,17 +53,17 @@ calRecurrenceRule.prototype = {</span>
<a href="#l1.23"></a><span id="l1.23">   },</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25">   getOccurrences(aStartTime, aRangeStart, aRangeEnd, aMaxCount) {</span>
<a href="#l1.26"></a><span id="l1.26">     aStartTime = unwrapSingle(ICAL.Time, aStartTime);</span>
<a href="#l1.27"></a><span id="l1.27">     aRangeStart = unwrapSingle(ICAL.Time, aRangeStart);</span>
<a href="#l1.28"></a><span id="l1.28">     aRangeEnd = unwrapSingle(ICAL.Time, aRangeEnd);</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30">     if (!aMaxCount &amp;&amp; !aRangeEnd &amp;&amp; this.count == 0 &amp;&amp; this.until == null) {</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l1.33"></a><span id="l1.33">     }</span>
<a href="#l1.34"></a><span id="l1.34"> </span>
<a href="#l1.35"></a><span id="l1.35">     let occurrences = [];</span>
<a href="#l1.36"></a><span id="l1.36">     let rangeStart = aRangeStart.clone();</span>
<a href="#l1.37"></a><span id="l1.37">     rangeStart.isDate = false;</span>
<a href="#l1.38"></a><span id="l1.38"> </span>
<a href="#l1.39"></a><span id="l1.39">     let dtend = null;</span>
<a href="#l1.40"></a><span id="l1.40"> </span>
<a href="#l1.41"></a><span id="l1.41" class="difflineat">@@ -145,17 +145,17 @@ calRecurrenceRule.prototype = {</span>
<a href="#l1.42"></a><span id="l1.42">   },</span>
<a href="#l1.43"></a><span id="l1.43">   set interval(val) {</span>
<a href="#l1.44"></a><span id="l1.44">     this.ensureMutable();</span>
<a href="#l1.45"></a><span id="l1.45">     this.innerObject.interval = val;</span>
<a href="#l1.46"></a><span id="l1.46">   },</span>
<a href="#l1.47"></a><span id="l1.47"> </span>
<a href="#l1.48"></a><span id="l1.48">   get count() {</span>
<a href="#l1.49"></a><span id="l1.49">     if (!this.isByCount) {</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l1.52"></a><span id="l1.52">     }</span>
<a href="#l1.53"></a><span id="l1.53">     return this.innerObject.count || -1;</span>
<a href="#l1.54"></a><span id="l1.54">   },</span>
<a href="#l1.55"></a><span id="l1.55">   set count(val) {</span>
<a href="#l1.56"></a><span id="l1.56">     this.ensureMutable();</span>
<a href="#l1.57"></a><span id="l1.57">     this.innerObject.count = val &amp;&amp; val &gt; 0 ? val : null;</span>
<a href="#l1.58"></a><span id="l1.58">   },</span>
<a href="#l1.59"></a><span id="l1.59"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -808,17 +808,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">     }</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6">     /**</span>
<a href="#l2.7"></a><span id="l2.7">      * Delete items from a calendar. Must be implemented in subclasses.</span>
<a href="#l2.8"></a><span id="l2.8">      *</span>
<a href="#l2.9"></a><span id="l2.9">      * @param {calICalendar|calICompositeCalendar} calendar    A calendar object.</span>
<a href="#l2.10"></a><span id="l2.10">      */</span>
<a href="#l2.11"></a><span id="l2.11">     deleteItemsFromCalendar(calendar) {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l2.14"></a><span id="l2.14">     }</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">     /**</span>
<a href="#l2.17"></a><span id="l2.17">      * Create and fire an event.</span>
<a href="#l2.18"></a><span id="l2.18">      *</span>
<a href="#l2.19"></a><span id="l2.19">      * @param {string} eventName      Name of the event.</span>
<a href="#l2.20"></a><span id="l2.20">      * @param {Object} eventDetail    The details to add to the event.</span>
<a href="#l2.21"></a><span id="l2.21">      */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-event-column.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-event-column.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1844,17 +1844,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">         }</span>
<a href="#l3.5"></a><span id="l3.5">       }</span>
<a href="#l3.6"></a><span id="l3.6">       firstColumn.fgboxes.startlabel.setAttribute(&quot;value&quot;, startstr);</span>
<a href="#l3.7"></a><span id="l3.7">       lastColumn.fgboxes.endlabel.setAttribute(&quot;value&quot;, endstr);</span>
<a href="#l3.8"></a><span id="l3.8">     }</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">     setDayStartEndMinutes(dayStartMin, dayEndMin) {</span>
<a href="#l3.11"></a><span id="l3.11">       if (dayStartMin &lt; this.mStartMin || dayStartMin &gt; dayEndMin || dayEndMin &gt; this.mEndMin) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l3.14"></a><span id="l3.14">       }</span>
<a href="#l3.15"></a><span id="l3.15">       if (this.mDayStartMin != dayStartMin || this.mDayEndMin != dayEndMin) {</span>
<a href="#l3.16"></a><span id="l3.16">         this.mDayStartMin = dayStartMin;</span>
<a href="#l3.17"></a><span id="l3.17">         this.mDayEndMin = dayEndMin;</span>
<a href="#l3.18"></a><span id="l3.18">       }</span>
<a href="#l3.19"></a><span id="l3.19">     }</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21">     getClickedDateTime(event) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-item-editing.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-item-editing.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -619,17 +619,17 @@ function promptOccurrenceModification(aI</span>
<a href="#l4.4"></a><span id="l4.4">   }</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">   switch (type) {</span>
<a href="#l4.7"></a><span id="l4.7">     case MODIFY_PARENT:</span>
<a href="#l4.8"></a><span id="l4.8">       pastItems = items.map(item =&gt; item.parentItem);</span>
<a href="#l4.9"></a><span id="l4.9">       break;</span>
<a href="#l4.10"></a><span id="l4.10">     case MODIFY_FOLLOWING:</span>
<a href="#l4.11"></a><span id="l4.11">       // TODO tbd in a different bug</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l4.14"></a><span id="l4.14">     case MODIFY_OCCURRENCE:</span>
<a href="#l4.15"></a><span id="l4.15">       pastItems = items;</span>
<a href="#l4.16"></a><span id="l4.16">       break;</span>
<a href="#l4.17"></a><span id="l4.17">     case CANCEL:</span>
<a href="#l4.18"></a><span id="l4.18">       // Since we have not set past or futureItem, the return below will</span>
<a href="#l4.19"></a><span id="l4.19">       // take care.</span>
<a href="#l4.20"></a><span id="l4.20">       break;</span>
<a href="#l4.21"></a><span id="l4.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-management.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-management.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -675,27 +675,27 @@ function openCalendarSubscriptionsDialog</span>
<a href="#l5.4"></a><span id="l5.4"> /**</span>
<a href="#l5.5"></a><span id="l5.5">  * Calendar Offline Manager</span>
<a href="#l5.6"></a><span id="l5.6">  */</span>
<a href="#l5.7"></a><span id="l5.7"> var calendarOfflineManager = {</span>
<a href="#l5.8"></a><span id="l5.8">   QueryInterface: ChromeUtils.generateQI([Ci.nsIObserver]),</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">   init() {</span>
<a href="#l5.11"></a><span id="l5.11">     if (this.initialized) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l5.14"></a><span id="l5.14">     }</span>
<a href="#l5.15"></a><span id="l5.15">     Services.obs.addObserver(this, &quot;network:offline-status-changed&quot;);</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17">     this.updateOfflineUI(!this.isOnline());</span>
<a href="#l5.18"></a><span id="l5.18">     this.initialized = true;</span>
<a href="#l5.19"></a><span id="l5.19">   },</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">   uninit() {</span>
<a href="#l5.22"></a><span id="l5.22">     if (!this.initialized) {</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l5.25"></a><span id="l5.25">     }</span>
<a href="#l5.26"></a><span id="l5.26">     Services.obs.removeObserver(this, &quot;network:offline-status-changed&quot;);</span>
<a href="#l5.27"></a><span id="l5.27">     this.initialized = false;</span>
<a href="#l5.28"></a><span id="l5.28">   },</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30">   isOnline() {</span>
<a href="#l5.31"></a><span id="l5.31">     return !Services.io.offline;</span>
<a href="#l5.32"></a><span id="l5.32">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-month-base-view.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-base-view.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -402,17 +402,17 @@ var { cal } = ChromeUtils.import(&quot;resour</span>
<a href="#l6.4"></a><span id="l6.4">         }</span>
<a href="#l6.5"></a><span id="l6.5">       }</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7">       if (this.mSelectedItems.length) {</span>
<a href="#l6.8"></a><span id="l6.8">         this.mSelectedItems = [];</span>
<a href="#l6.9"></a><span id="l6.9">       }</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">       if (!this.mStartDate || !this.mEndDate) {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-        throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l6.14"></a><span id="l6.14">       }</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16">       // Days that are not in the main month on display are displayed with</span>
<a href="#l6.17"></a><span id="l6.17">       // a gray background.  Unless the month actually starts on a Sunday,</span>
<a href="#l6.18"></a><span id="l6.18">       // this means that mStartDate.month is 1 month less than the main month.</span>
<a href="#l6.19"></a><span id="l6.19">       let mainMonth = this.mStartDate.month;</span>
<a href="#l6.20"></a><span id="l6.20">       if (this.mStartDate.day != 1) {</span>
<a href="#l6.21"></a><span id="l6.21">         mainMonth++;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-month-view.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-view.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -127,17 +127,17 @@</span>
<a href="#l7.4"></a><span id="l7.4">       } else {</span>
<a href="#l7.5"></a><span id="l7.5">         this.setAttribute(&quot;value&quot;, this.mDate.day);</span>
<a href="#l7.6"></a><span id="l7.6">       }</span>
<a href="#l7.7"></a><span id="l7.7">       return val;</span>
<a href="#l7.8"></a><span id="l7.8">     }</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">     setDate(aDate) {</span>
<a href="#l7.11"></a><span id="l7.11">       if (!aDate) {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-        throw Cr.NS_ERROR_NULL_POINTER;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NULL_POINTER);</span>
<a href="#l7.14"></a><span id="l7.14">       }</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16">       // Remove all the old events.</span>
<a href="#l7.17"></a><span id="l7.17">       this.mItemHash = {};</span>
<a href="#l7.18"></a><span id="l7.18">       removeChildren(this.dayItems);</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20">       if (this.mDate &amp;&amp; this.mDate.compare(aDate) == 0) {</span>
<a href="#l7.21"></a><span id="l7.21">         return;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-base-view.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-base-view.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -79,17 +79,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">      * @param {number} dayEndHour      Hour when the day will end.</span>
<a href="#l8.5"></a><span id="l8.5">      */</span>
<a href="#l8.6"></a><span id="l8.6">     setDayStartEndHours(dayStartHour, dayEndHour) {</span>
<a href="#l8.7"></a><span id="l8.7">       if (</span>
<a href="#l8.8"></a><span id="l8.8">         dayStartHour * 60 &lt; this.mStartMin ||</span>
<a href="#l8.9"></a><span id="l8.9">         dayStartHour &gt; dayEndHour ||</span>
<a href="#l8.10"></a><span id="l8.10">         dayEndHour * 60 &gt; this.mEndMin</span>
<a href="#l8.11"></a><span id="l8.11">       ) {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l8.14"></a><span id="l8.14">       }</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16">       if (this.mDayStartHour != dayStartHour || this.mDayEndHour != dayEndHour) {</span>
<a href="#l8.17"></a><span id="l8.17">         this.mDayEndHour = dayEndHour;</span>
<a href="#l8.18"></a><span id="l8.18">         this.mDayStartHour = dayStartHour;</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20">         const topbox = this.querySelector(&quot;.topbox&quot;);</span>
<a href="#l8.21"></a><span id="l8.21">         if (topbox.children.length) {</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -1639,17 +1639,17 @@</span>
<a href="#l8.23"></a><span id="l8.23">         this.timebar.addEventListener(</span>
<a href="#l8.24"></a><span id="l8.24">           &quot;bindingattached&quot;,</span>
<a href="#l8.25"></a><span id="l8.25">           () =&gt; this.setDayStartEndMinutes(dayStartMin, dayEndMin),</span>
<a href="#l8.26"></a><span id="l8.26">           { once: true }</span>
<a href="#l8.27"></a><span id="l8.27">         );</span>
<a href="#l8.28"></a><span id="l8.28">         return;</span>
<a href="#l8.29"></a><span id="l8.29">       }</span>
<a href="#l8.30"></a><span id="l8.30">       if (dayStartMin &lt; this.mStartMin || dayStartMin &gt; dayEndMin || dayEndMin &gt; this.mEndMin) {</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l8.33"></a><span id="l8.33">       }</span>
<a href="#l8.34"></a><span id="l8.34">       if (this.mDayStartMin != dayStartMin || this.mDayEndMin != dayEndMin) {</span>
<a href="#l8.35"></a><span id="l8.35">         this.mDayStartMin = dayStartMin;</span>
<a href="#l8.36"></a><span id="l8.36">         this.mDayEndMin = dayEndMin;</span>
<a href="#l8.37"></a><span id="l8.37"> </span>
<a href="#l8.38"></a><span id="l8.38">         // Also update on the time-bar.</span>
<a href="#l8.39"></a><span id="l8.39">         this.timebar.setDayStartEndHours(this.mDayStartMin / 60, this.mDayEndMin / 60);</span>
<a href="#l8.40"></a><span id="l8.40">       }</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineat">@@ -1658,17 +1658,17 @@</span>
<a href="#l8.42"></a><span id="l8.42">     /**</span>
<a href="#l8.43"></a><span id="l8.43">      * Set how many minutes are visible in the view.</span>
<a href="#l8.44"></a><span id="l8.44">      *</span>
<a href="#l8.45"></a><span id="l8.45">      * @param {number} minutes    A number of visible minutes.</span>
<a href="#l8.46"></a><span id="l8.46">      * @return {number}           A number of visible minutes.</span>
<a href="#l8.47"></a><span id="l8.47">      */</span>
<a href="#l8.48"></a><span id="l8.48">     setVisibleMinutes(minutes) {</span>
<a href="#l8.49"></a><span id="l8.49">       if (minutes &lt;= 0 || minutes &gt; this.mEndMin - this.mStartMin) {</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l8.52"></a><span id="l8.52">       }</span>
<a href="#l8.53"></a><span id="l8.53">       if (this.mVisibleMinutes != minutes) {</span>
<a href="#l8.54"></a><span id="l8.54">         this.mVisibleMinutes = minutes;</span>
<a href="#l8.55"></a><span id="l8.55">       }</span>
<a href="#l8.56"></a><span id="l8.56">       return this.mVisibleMinutes;</span>
<a href="#l8.57"></a><span id="l8.57">     }</span>
<a href="#l8.58"></a><span id="l8.58">   }</span>
<a href="#l8.59"></a><span id="l8.59"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/calendar-tabs.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/calendar-tabs.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -202,17 +202,17 @@ var calendarItemTabType = {</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5">     // Generate and set the tab title.</span>
<a href="#l9.6"></a><span id="l9.6">     let strName;</span>
<a href="#l9.7"></a><span id="l9.7">     if (aTab.mode.type == &quot;calendarEvent&quot;) {</span>
<a href="#l9.8"></a><span id="l9.8">       strName = aArgs.calendarEvent.title ? &quot;editEventDialog&quot; : &quot;newEventDialog&quot;;</span>
<a href="#l9.9"></a><span id="l9.9">     } else if (aTab.mode.type == &quot;calendarTask&quot;) {</span>
<a href="#l9.10"></a><span id="l9.10">       strName = aArgs.calendarEvent.title ? &quot;editTaskDialog&quot; : &quot;newTaskDialog&quot;;</span>
<a href="#l9.11"></a><span id="l9.11">     } else {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l9.14"></a><span id="l9.14">     }</span>
<a href="#l9.15"></a><span id="l9.15">     // name is &quot;New Event&quot;, &quot;Edit Task&quot;, etc.</span>
<a href="#l9.16"></a><span id="l9.16">     let name = cal.l10n.getCalString(strName);</span>
<a href="#l9.17"></a><span id="l9.17">     aTab.title = name + &quot;: &quot; + (aArgs.calendarEvent.title || name);</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">     // allowTabClose prevents the tab from being closed until we ask</span>
<a href="#l9.20"></a><span id="l9.20">     // the user if they want to save any unsaved changes.</span>
<a href="#l9.21"></a><span id="l9.21">     aTab.allowTabClose = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-alarm-widget.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-alarm-widget.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -109,17 +109,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">           dateLabel.value = cal.l10n.getCalString(&quot;alarmStarts&quot;, [</span>
<a href="#l10.5"></a><span id="l10.5">             formatter.formatDateTime(startDate),</span>
<a href="#l10.6"></a><span id="l10.6">           ]);</span>
<a href="#l10.7"></a><span id="l10.7">         } else {</span>
<a href="#l10.8"></a><span id="l10.8">           // If the task has no start date, then format the alarm date.</span>
<a href="#l10.9"></a><span id="l10.9">           dateLabel.value = formatter.formatDateTime(this.mAlarm.alarmDate);</span>
<a href="#l10.10"></a><span id="l10.10">         }</span>
<a href="#l10.11"></a><span id="l10.11">       } else {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-        throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l10.14"></a><span id="l10.14">       }</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16">       // Relative Date</span>
<a href="#l10.17"></a><span id="l10.17">       this.updateRelativeDateLabel();</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">       // Title, Location</span>
<a href="#l10.20"></a><span id="l10.20">       titleLabel.value = this.mItem.title || &quot;&quot;;</span>
<a href="#l10.21"></a><span id="l10.21">       locationDescription.value = this.mItem.getProperty(&quot;LOCATION&quot;) || &quot;&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/modules/calUtils.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/modules/calUtils.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -615,11 +615,11 @@ function makeQI(aInterfaces) {</span>
<a href="#l11.4"></a><span id="l11.4">       return this.classInfo;</span>
<a href="#l11.5"></a><span id="l11.5">     }</span>
<a href="#l11.6"></a><span id="l11.6">     for (let i = 0; i &lt; aInterfaces.length; i++) {</span>
<a href="#l11.7"></a><span id="l11.7">       if (Ci[aInterfaces[i]].equals(iid)) {</span>
<a href="#l11.8"></a><span id="l11.8">         return this;</span>
<a href="#l11.9"></a><span id="l11.9">       }</span>
<a href="#l11.10"></a><span id="l11.10">     }</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l11.14"></a><span id="l11.14">   };</span>
<a href="#l11.15"></a><span id="l11.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/modules/utils/calDateTimeUtils.jsm</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/modules/utils/calDateTimeUtils.jsm</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -112,30 +112,30 @@ var caldtz = {</span>
<a href="#l12.4"></a><span id="l12.4">    * event's start date or a task's entry date.</span>
<a href="#l12.5"></a><span id="l12.5">    */</span>
<a href="#l12.6"></a><span id="l12.6">   startDateProp(aItem) {</span>
<a href="#l12.7"></a><span id="l12.7">     if (cal.item.isEvent(aItem)) {</span>
<a href="#l12.8"></a><span id="l12.8">       return &quot;startDate&quot;;</span>
<a href="#l12.9"></a><span id="l12.9">     } else if (cal.item.isToDo(aItem)) {</span>
<a href="#l12.10"></a><span id="l12.10">       return &quot;entryDate&quot;;</span>
<a href="#l12.11"></a><span id="l12.11">     }</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l12.14"></a><span id="l12.14">   },</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16">   /**</span>
<a href="#l12.17"></a><span id="l12.17">    * Returns the property name used for the end date of an item, ie either an</span>
<a href="#l12.18"></a><span id="l12.18">    * event's end date or a task's due date.</span>
<a href="#l12.19"></a><span id="l12.19">    */</span>
<a href="#l12.20"></a><span id="l12.20">   endDateProp(aItem) {</span>
<a href="#l12.21"></a><span id="l12.21">     if (cal.item.isEvent(aItem)) {</span>
<a href="#l12.22"></a><span id="l12.22">       return &quot;endDate&quot;;</span>
<a href="#l12.23"></a><span id="l12.23">     } else if (cal.item.isToDo(aItem)) {</span>
<a href="#l12.24"></a><span id="l12.24">       return &quot;dueDate&quot;;</span>
<a href="#l12.25"></a><span id="l12.25">     }</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l12.28"></a><span id="l12.28">   },</span>
<a href="#l12.29"></a><span id="l12.29"> </span>
<a href="#l12.30"></a><span id="l12.30">   /**</span>
<a href="#l12.31"></a><span id="l12.31">    * Check if the two dates are on the same day (ignoring time)</span>
<a href="#l12.32"></a><span id="l12.32">    *</span>
<a href="#l12.33"></a><span id="l12.33">    * @param date1     The left date to compare</span>
<a href="#l12.34"></a><span id="l12.34">    * @param date2     The right date to compare</span>
<a href="#l12.35"></a><span id="l12.35">    * @return          True, if dates are on the same day</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/modules/utils/calItemUtils.jsm</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/modules/utils/calItemUtils.jsm</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -608,17 +608,17 @@ var calitem = {</span>
<a href="#l13.4"></a><span id="l13.4">    *</span>
<a href="#l13.5"></a><span id="l13.5">    * @param aIcalComponent        The ical component to set the prodid and</span>
<a href="#l13.6"></a><span id="l13.6">    *                                version on.</span>
<a href="#l13.7"></a><span id="l13.7">    */</span>
<a href="#l13.8"></a><span id="l13.8">   setStaticProps(aIcalComponent) {</span>
<a href="#l13.9"></a><span id="l13.9">     // Throw for an invalid parameter</span>
<a href="#l13.10"></a><span id="l13.10">     aIcalComponent = cal.wrapInstance(aIcalComponent, Ci.calIIcalComponent);</span>
<a href="#l13.11"></a><span id="l13.11">     if (!aIcalComponent) {</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l13.14"></a><span id="l13.14">     }</span>
<a href="#l13.15"></a><span id="l13.15">     // Set the prodid and version</span>
<a href="#l13.16"></a><span id="l13.16">     aIcalComponent.prodid = calitem.productId;</span>
<a href="#l13.17"></a><span id="l13.17">     aIcalComponent.version = calitem.productVersion;</span>
<a href="#l13.18"></a><span id="l13.18">   },</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20">   /**</span>
<a href="#l13.21"></a><span id="l13.21">    * Search for already open item dialog.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/modules/utils/calProviderUtils.jsm</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/modules/utils/calProviderUtils.jsm</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -403,17 +403,17 @@ var calprovider = {</span>
<a href="#l14.4"></a><span id="l14.4">     }</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">     // attribute AUTF8String id;</span>
<a href="#l14.7"></a><span id="l14.7">     get id() {</span>
<a href="#l14.8"></a><span id="l14.8">       return this.mID;</span>
<a href="#l14.9"></a><span id="l14.9">     }</span>
<a href="#l14.10"></a><span id="l14.10">     set id(aValue) {</span>
<a href="#l14.11"></a><span id="l14.11">       if (this.mID) {</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l14.14"></a><span id="l14.14">       }</span>
<a href="#l14.15"></a><span id="l14.15">       this.mID = aValue;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17">       let calMgr = cal.getCalendarManager();</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19">       // make all properties persistent that have been set so far:</span>
<a href="#l14.20"></a><span id="l14.20">       for (let aName in this.mProperties) {</span>
<a href="#l14.21"></a><span id="l14.21">         if (!this.constructor.mTransientProperties[aName]) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/src/CalAlarm.jsm</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/src/CalAlarm.jsm</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -39,17 +39,17 @@ CalAlarm.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">   mRepeat: 0,</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">   /**</span>
<a href="#l15.7"></a><span id="l15.7">    * calIAlarm</span>
<a href="#l15.8"></a><span id="l15.8">    */</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">   ensureMutable() {</span>
<a href="#l15.11"></a><span id="l15.11">     if (this.mImmutable) {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l15.14"></a><span id="l15.14">     }</span>
<a href="#l15.15"></a><span id="l15.15">   },</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17">   get isMutable() {</span>
<a href="#l15.18"></a><span id="l15.18">     return !this.mImmutable;</span>
<a href="#l15.19"></a><span id="l15.19">   },</span>
<a href="#l15.20"></a><span id="l15.20"> </span>
<a href="#l15.21"></a><span id="l15.21">   makeImmutable() {</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -174,34 +174,34 @@ CalAlarm.prototype = {</span>
<a href="#l15.23"></a><span id="l15.23">     return (this.mSummary = aValue);</span>
<a href="#l15.24"></a><span id="l15.24">   },</span>
<a href="#l15.25"></a><span id="l15.25"> </span>
<a href="#l15.26"></a><span id="l15.26">   get offset() {</span>
<a href="#l15.27"></a><span id="l15.27">     return this.mOffset;</span>
<a href="#l15.28"></a><span id="l15.28">   },</span>
<a href="#l15.29"></a><span id="l15.29">   set offset(aValue) {</span>
<a href="#l15.30"></a><span id="l15.30">     if (aValue &amp;&amp; !(aValue instanceof Ci.calIDuration)) {</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.33"></a><span id="l15.33">     }</span>
<a href="#l15.34"></a><span id="l15.34">     if (this.related != ALARM_RELATED_START &amp;&amp; this.related != ALARM_RELATED_END) {</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l15.37"></a><span id="l15.37">     }</span>
<a href="#l15.38"></a><span id="l15.38">     this.ensureMutable();</span>
<a href="#l15.39"></a><span id="l15.39">     return (this.mOffset = aValue);</span>
<a href="#l15.40"></a><span id="l15.40">   },</span>
<a href="#l15.41"></a><span id="l15.41"> </span>
<a href="#l15.42"></a><span id="l15.42">   get alarmDate() {</span>
<a href="#l15.43"></a><span id="l15.43">     return this.mAbsoluteDate;</span>
<a href="#l15.44"></a><span id="l15.44">   },</span>
<a href="#l15.45"></a><span id="l15.45">   set alarmDate(aValue) {</span>
<a href="#l15.46"></a><span id="l15.46">     if (aValue &amp;&amp; !(aValue instanceof Ci.calIDateTime)) {</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.49"></a><span id="l15.49">     }</span>
<a href="#l15.50"></a><span id="l15.50">     if (this.related != ALARM_RELATED_ABSOLUTE) {</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l15.53"></a><span id="l15.53">     }</span>
<a href="#l15.54"></a><span id="l15.54">     this.ensureMutable();</span>
<a href="#l15.55"></a><span id="l15.55">     return (this.mAbsoluteDate = aValue);</span>
<a href="#l15.56"></a><span id="l15.56">   },</span>
<a href="#l15.57"></a><span id="l15.57"> </span>
<a href="#l15.58"></a><span id="l15.58">   get repeat() {</span>
<a href="#l15.59"></a><span id="l15.59">     if ((this.mRepeat != 0) ^ (this.mDuration != null)) {</span>
<a href="#l15.60"></a><span id="l15.60">       return 0;</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineat">@@ -210,32 +210,32 @@ CalAlarm.prototype = {</span>
<a href="#l15.62"></a><span id="l15.62">   },</span>
<a href="#l15.63"></a><span id="l15.63">   set repeat(aValue) {</span>
<a href="#l15.64"></a><span id="l15.64">     this.ensureMutable();</span>
<a href="#l15.65"></a><span id="l15.65">     if (aValue === null) {</span>
<a href="#l15.66"></a><span id="l15.66">       this.mRepeat = null;</span>
<a href="#l15.67"></a><span id="l15.67">     } else {</span>
<a href="#l15.68"></a><span id="l15.68">       this.mRepeat = parseInt(aValue, 10);</span>
<a href="#l15.69"></a><span id="l15.69">       if (isNaN(this.mRepeat)) {</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.71"></a><span id="l15.71" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.72"></a><span id="l15.72">       }</span>
<a href="#l15.73"></a><span id="l15.73">     }</span>
<a href="#l15.74"></a><span id="l15.74">     return aValue;</span>
<a href="#l15.75"></a><span id="l15.75">   },</span>
<a href="#l15.76"></a><span id="l15.76"> </span>
<a href="#l15.77"></a><span id="l15.77">   get repeatOffset() {</span>
<a href="#l15.78"></a><span id="l15.78">     if ((this.mRepeat != 0) ^ (this.mDuration != null)) {</span>
<a href="#l15.79"></a><span id="l15.79">       return null;</span>
<a href="#l15.80"></a><span id="l15.80">     }</span>
<a href="#l15.81"></a><span id="l15.81">     return this.mDuration;</span>
<a href="#l15.82"></a><span id="l15.82">   },</span>
<a href="#l15.83"></a><span id="l15.83">   set repeatOffset(aValue) {</span>
<a href="#l15.84"></a><span id="l15.84">     this.ensureMutable();</span>
<a href="#l15.85"></a><span id="l15.85">     if (aValue !== null &amp;&amp; !(aValue instanceof Ci.calIDuration)) {</span>
<a href="#l15.86"></a><span id="l15.86" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.87"></a><span id="l15.87" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.88"></a><span id="l15.88">     }</span>
<a href="#l15.89"></a><span id="l15.89">     return (this.mDuration = aValue);</span>
<a href="#l15.90"></a><span id="l15.90">   },</span>
<a href="#l15.91"></a><span id="l15.91"> </span>
<a href="#l15.92"></a><span id="l15.92">   get repeatDate() {</span>
<a href="#l15.93"></a><span id="l15.93">     if (</span>
<a href="#l15.94"></a><span id="l15.94">       this.related != ALARM_RELATED_ABSOLUTE ||</span>
<a href="#l15.95"></a><span id="l15.95">       !this.mAbsoluteDate ||</span>
<a href="#l15.96"></a><span id="l15.96" class="difflineat">@@ -372,17 +372,17 @@ CalAlarm.prototype = {</span>
<a href="#l15.97"></a><span id="l15.97">     } else if (this.related != ALARM_RELATED_ABSOLUTE &amp;&amp; this.mOffset) {</span>
<a href="#l15.98"></a><span id="l15.98">       triggerProp.valueAsIcalString = this.mOffset.icalString;</span>
<a href="#l15.99"></a><span id="l15.99">       if (this.related == ALARM_RELATED_END) {</span>
<a href="#l15.100"></a><span id="l15.100">         // An alarm related to the end of the event.</span>
<a href="#l15.101"></a><span id="l15.101">         triggerProp.setParameter(&quot;RELATED&quot;, &quot;END&quot;);</span>
<a href="#l15.102"></a><span id="l15.102">       }</span>
<a href="#l15.103"></a><span id="l15.103">     } else {</span>
<a href="#l15.104"></a><span id="l15.104">       // No offset or absolute date is not valid.</span>
<a href="#l15.105"></a><span id="l15.105" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l15.106"></a><span id="l15.106" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l15.107"></a><span id="l15.107">     }</span>
<a href="#l15.108"></a><span id="l15.108">     comp.addProperty(triggerProp);</span>
<a href="#l15.109"></a><span id="l15.109"> </span>
<a href="#l15.110"></a><span id="l15.110">     // Set up repeat and duration (OPTIONAL, but if one exists, the other</span>
<a href="#l15.111"></a><span id="l15.111">     // MUST also exist)</span>
<a href="#l15.112"></a><span id="l15.112">     if (this.repeat &amp;&amp; this.repeatOffset) {</span>
<a href="#l15.113"></a><span id="l15.113">       let repeatProp = icssvc.createIcalProperty(&quot;REPEAT&quot;);</span>
<a href="#l15.114"></a><span id="l15.114">       let durationProp = icssvc.createIcalProperty(&quot;DURATION&quot;);</span>
<a href="#l15.115"></a><span id="l15.115" class="difflineat">@@ -463,52 +463,52 @@ CalAlarm.prototype = {</span>
<a href="#l15.116"></a><span id="l15.116">       comp.addProperty(icalprop);</span>
<a href="#l15.117"></a><span id="l15.117">     }</span>
<a href="#l15.118"></a><span id="l15.118">     return comp;</span>
<a href="#l15.119"></a><span id="l15.119">   },</span>
<a href="#l15.120"></a><span id="l15.120">   set icalComponent(aComp) {</span>
<a href="#l15.121"></a><span id="l15.121">     this.ensureMutable();</span>
<a href="#l15.122"></a><span id="l15.122">     if (!aComp || aComp.componentType != &quot;VALARM&quot;) {</span>
<a href="#l15.123"></a><span id="l15.123">       // Invalid Component</span>
<a href="#l15.124"></a><span id="l15.124" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.125"></a><span id="l15.125" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.126"></a><span id="l15.126">     }</span>
<a href="#l15.127"></a><span id="l15.127"> </span>
<a href="#l15.128"></a><span id="l15.128">     let actionProp = aComp.getFirstProperty(&quot;ACTION&quot;);</span>
<a href="#l15.129"></a><span id="l15.129">     let triggerProp = aComp.getFirstProperty(&quot;TRIGGER&quot;);</span>
<a href="#l15.130"></a><span id="l15.130">     let repeatProp = aComp.getFirstProperty(&quot;REPEAT&quot;);</span>
<a href="#l15.131"></a><span id="l15.131">     let durationProp = aComp.getFirstProperty(&quot;DURATION&quot;);</span>
<a href="#l15.132"></a><span id="l15.132">     let summaryProp = aComp.getFirstProperty(&quot;SUMMARY&quot;);</span>
<a href="#l15.133"></a><span id="l15.133">     let descriptionProp = aComp.getFirstProperty(&quot;DESCRIPTION&quot;);</span>
<a href="#l15.134"></a><span id="l15.134">     let lastAckProp = aComp.getFirstProperty(&quot;X-MOZ-LASTACK&quot;);</span>
<a href="#l15.135"></a><span id="l15.135"> </span>
<a href="#l15.136"></a><span id="l15.136">     if (actionProp) {</span>
<a href="#l15.137"></a><span id="l15.137">       this.action = actionProp.value;</span>
<a href="#l15.138"></a><span id="l15.138">     } else {</span>
<a href="#l15.139"></a><span id="l15.139" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.140"></a><span id="l15.140" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.141"></a><span id="l15.141">     }</span>
<a href="#l15.142"></a><span id="l15.142"> </span>
<a href="#l15.143"></a><span id="l15.143">     if (triggerProp) {</span>
<a href="#l15.144"></a><span id="l15.144">       if (triggerProp.getParameter(&quot;VALUE&quot;) == &quot;DATE-TIME&quot;) {</span>
<a href="#l15.145"></a><span id="l15.145">         this.mAbsoluteDate = triggerProp.valueAsDatetime;</span>
<a href="#l15.146"></a><span id="l15.146">         this.related = ALARM_RELATED_ABSOLUTE;</span>
<a href="#l15.147"></a><span id="l15.147">       } else {</span>
<a href="#l15.148"></a><span id="l15.148">         this.mOffset = cal.createDuration(triggerProp.valueAsIcalString);</span>
<a href="#l15.149"></a><span id="l15.149"> </span>
<a href="#l15.150"></a><span id="l15.150">         let related = triggerProp.getParameter(&quot;RELATED&quot;);</span>
<a href="#l15.151"></a><span id="l15.151">         this.related = related == &quot;END&quot; ? ALARM_RELATED_END : ALARM_RELATED_START;</span>
<a href="#l15.152"></a><span id="l15.152">       }</span>
<a href="#l15.153"></a><span id="l15.153">     } else {</span>
<a href="#l15.154"></a><span id="l15.154" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.155"></a><span id="l15.155" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.156"></a><span id="l15.156">     }</span>
<a href="#l15.157"></a><span id="l15.157"> </span>
<a href="#l15.158"></a><span id="l15.158">     if (durationProp &amp;&amp; repeatProp) {</span>
<a href="#l15.159"></a><span id="l15.159">       this.repeatOffset = cal.createDuration(durationProp.valueAsIcalString);</span>
<a href="#l15.160"></a><span id="l15.160">       this.repeat = repeatProp.value;</span>
<a href="#l15.161"></a><span id="l15.161">     } else if (durationProp || repeatProp) {</span>
<a href="#l15.162"></a><span id="l15.162" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l15.163"></a><span id="l15.163" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l15.164"></a><span id="l15.164">     } else {</span>
<a href="#l15.165"></a><span id="l15.165">       this.repeatOffset = null;</span>
<a href="#l15.166"></a><span id="l15.166">       this.repeat = 0;</span>
<a href="#l15.167"></a><span id="l15.167">     }</span>
<a href="#l15.168"></a><span id="l15.168"> </span>
<a href="#l15.169"></a><span id="l15.169">     // Set up attendees</span>
<a href="#l15.170"></a><span id="l15.170">     this.clearAttendees();</span>
<a href="#l15.171"></a><span id="l15.171">     for (let attendeeProp of cal.iterate.icalProperty(aComp, &quot;ATTENDEE&quot;)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/src/CalAttachment.jsm</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/src/CalAttachment.jsm</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -123,17 +123,17 @@ CalAttachment.prototype = {</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">   get icalString() {</span>
<a href="#l16.6"></a><span id="l16.6">     let comp = this.icalProperty;</span>
<a href="#l16.7"></a><span id="l16.7">     return comp ? comp.icalString : &quot;&quot;;</span>
<a href="#l16.8"></a><span id="l16.8">   },</span>
<a href="#l16.9"></a><span id="l16.9">   set icalString(val) {</span>
<a href="#l16.10"></a><span id="l16.10">     let prop = cal.getIcsService().createIcalPropertyFromString(val);</span>
<a href="#l16.11"></a><span id="l16.11">     if (prop.propertyName != &quot;ATTACH&quot;) {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l16.14"></a><span id="l16.14">     }</span>
<a href="#l16.15"></a><span id="l16.15">     this.icalProperty = prop;</span>
<a href="#l16.16"></a><span id="l16.16">     return val;</span>
<a href="#l16.17"></a><span id="l16.17">   },</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">   getParameter(aName) {</span>
<a href="#l16.20"></a><span id="l16.20">     return this.mProperties.get(aName);</span>
<a href="#l16.21"></a><span id="l16.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/src/CalAttendee.jsm</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/src/CalAttendee.jsm</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -20,17 +20,17 @@ CalAttendee.prototype = {</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5">   mImmutable: false,</span>
<a href="#l17.6"></a><span id="l17.6">   get isMutable() {</span>
<a href="#l17.7"></a><span id="l17.7">     return !this.mImmutable;</span>
<a href="#l17.8"></a><span id="l17.8">   },</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10">   modify() {</span>
<a href="#l17.11"></a><span id="l17.11">     if (this.mImmutable) {</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l17.14"></a><span id="l17.14">     }</span>
<a href="#l17.15"></a><span id="l17.15">   },</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17">   makeImmutable() {</span>
<a href="#l17.18"></a><span id="l17.18">     this.mImmutable = true;</span>
<a href="#l17.19"></a><span id="l17.19">   },</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">   clone() {</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineat">@@ -98,17 +98,17 @@ CalAttendee.prototype = {</span>
<a href="#l17.23"></a><span id="l17.23">     let icalatt;</span>
<a href="#l17.24"></a><span id="l17.24">     if (this.mIsOrganizer) {</span>
<a href="#l17.25"></a><span id="l17.25">       icalatt = icssvc.createIcalProperty(&quot;ORGANIZER&quot;);</span>
<a href="#l17.26"></a><span id="l17.26">     } else {</span>
<a href="#l17.27"></a><span id="l17.27">       icalatt = icssvc.createIcalProperty(&quot;ATTENDEE&quot;);</span>
<a href="#l17.28"></a><span id="l17.28">     }</span>
<a href="#l17.29"></a><span id="l17.29"> </span>
<a href="#l17.30"></a><span id="l17.30">     if (!this.id) {</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l17.33"></a><span id="l17.33">     }</span>
<a href="#l17.34"></a><span id="l17.34">     icalatt.valueAsIcalString = this.id;</span>
<a href="#l17.35"></a><span id="l17.35">     for (let i = 0; i &lt; this.icalAttendeePropMap.length; i++) {</span>
<a href="#l17.36"></a><span id="l17.36">       let prop = this.icalAttendeePropMap[i];</span>
<a href="#l17.37"></a><span id="l17.37">       if (this[prop.cal]) {</span>
<a href="#l17.38"></a><span id="l17.38">         try {</span>
<a href="#l17.39"></a><span id="l17.39">           icalatt.setParameter(prop.ics, this[prop.cal]);</span>
<a href="#l17.40"></a><span id="l17.40">         } catch (e) {</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineat">@@ -140,17 +140,17 @@ CalAttendee.prototype = {</span>
<a href="#l17.42"></a><span id="l17.42"> </span>
<a href="#l17.43"></a><span id="l17.43">   get icalString() {</span>
<a href="#l17.44"></a><span id="l17.44">     let comp = this.icalProperty;</span>
<a href="#l17.45"></a><span id="l17.45">     return comp ? comp.icalString : &quot;&quot;;</span>
<a href="#l17.46"></a><span id="l17.46">   },</span>
<a href="#l17.47"></a><span id="l17.47">   set icalString(val) {</span>
<a href="#l17.48"></a><span id="l17.48">     let prop = cal.getIcsService().createIcalPropertyFromString(val);</span>
<a href="#l17.49"></a><span id="l17.49">     if (prop.propertyName != &quot;ORGANIZER&quot; &amp;&amp; prop.propertyName != &quot;ATTENDEE&quot;) {</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l17.52"></a><span id="l17.52">     }</span>
<a href="#l17.53"></a><span id="l17.53">     this.icalProperty = prop;</span>
<a href="#l17.54"></a><span id="l17.54">     return val;</span>
<a href="#l17.55"></a><span id="l17.55">   },</span>
<a href="#l17.56"></a><span id="l17.56"> </span>
<a href="#l17.57"></a><span id="l17.57">   get properties() {</span>
<a href="#l17.58"></a><span id="l17.58">     return this.mProperties.entries();</span>
<a href="#l17.59"></a><span id="l17.59">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/base/src/CalEvent.jsm</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/base/src/CalEvent.jsm</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -136,17 +136,17 @@ CalEvent.prototype = {</span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5">   eventPromotedProps: null,</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7">   set icalComponent(event) {</span>
<a href="#l18.8"></a><span id="l18.8">     this.modify();</span>
<a href="#l18.9"></a><span id="l18.9">     if (event.componentType != &quot;VEVENT&quot;) {</span>
<a href="#l18.10"></a><span id="l18.10">       event = event.getFirstSubcomponent(&quot;VEVENT&quot;);</span>
<a href="#l18.11"></a><span id="l18.11">       if (!event) {</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l18.14"></a><span id="l18.14">       }</span>
<a href="#l18.15"></a><span id="l18.15">     }</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17">     this.mEndDate = undefined;</span>
<a href="#l18.18"></a><span id="l18.18">     this.setItemBaseFromICS(event);</span>
<a href="#l18.19"></a><span id="l18.19">     this.mapPropsFromICS(event, this.icsEventPropMap);</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21">     this.importUnpromotedProperties(event, this.eventPromotedProps);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/base/src/CalItipItem.jsm</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/base/src/CalItipItem.jsm</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -38,17 +38,17 @@ CalItipItem.prototype = {</span>
<a href="#l19.4"></a><span id="l19.4">   },</span>
<a href="#l19.5"></a><span id="l19.5">   set receivedMethod(aMethod) {</span>
<a href="#l19.6"></a><span id="l19.6">     return (this.mReceivedMethod = aMethod.toUpperCase());</span>
<a href="#l19.7"></a><span id="l19.7">   },</span>
<a href="#l19.8"></a><span id="l19.8"> </span>
<a href="#l19.9"></a><span id="l19.9">   mResponseMethod: &quot;REPLY&quot;,</span>
<a href="#l19.10"></a><span id="l19.10">   get responseMethod() {</span>
<a href="#l19.11"></a><span id="l19.11">     if (!this.mIsInitialized) {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l19.14"></a><span id="l19.14">     }</span>
<a href="#l19.15"></a><span id="l19.15">     return this.mResponseMethod;</span>
<a href="#l19.16"></a><span id="l19.16">   },</span>
<a href="#l19.17"></a><span id="l19.17">   set responseMethod(aMethod) {</span>
<a href="#l19.18"></a><span id="l19.18">     return (this.mResponseMethod = aMethod.toUpperCase());</span>
<a href="#l19.19"></a><span id="l19.19">   },</span>
<a href="#l19.20"></a><span id="l19.20"> </span>
<a href="#l19.21"></a><span id="l19.21">   mAutoResponse: null,</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -177,17 +177,17 @@ CalItipItem.prototype = {</span>
<a href="#l19.23"></a><span id="l19.23">   },</span>
<a href="#l19.24"></a><span id="l19.24"> </span>
<a href="#l19.25"></a><span id="l19.25">   /**</span>
<a href="#l19.26"></a><span id="l19.26">    * This returns both the array and the number of items. An easy way to</span>
<a href="#l19.27"></a><span id="l19.27">    * call it is: let itemArray = itipItem.getItemList();</span>
<a href="#l19.28"></a><span id="l19.28">    */</span>
<a href="#l19.29"></a><span id="l19.29">   getItemList() {</span>
<a href="#l19.30"></a><span id="l19.30">     if (!this.mIsInitialized) {</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l19.33"></a><span id="l19.33">     }</span>
<a href="#l19.34"></a><span id="l19.34">     return this.mItemList;</span>
<a href="#l19.35"></a><span id="l19.35">   },</span>
<a href="#l19.36"></a><span id="l19.36"> </span>
<a href="#l19.37"></a><span id="l19.37">   /**</span>
<a href="#l19.38"></a><span id="l19.38">    * Note that this code forces the user to respond to all items in the same</span>
<a href="#l19.39"></a><span id="l19.39">    * way, which is a current limitation of the spec.</span>
<a href="#l19.40"></a><span id="l19.40">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/base/src/CalRecurrenceDate.jsm</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/base/src/CalRecurrenceDate.jsm</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -28,17 +28,17 @@ CalRecurrenceDate.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">   }),</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6">   makeImmutable() {</span>
<a href="#l20.7"></a><span id="l20.7">     this.isMutable = false;</span>
<a href="#l20.8"></a><span id="l20.8">   },</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10">   ensureMutable() {</span>
<a href="#l20.11"></a><span id="l20.11">     if (!this.isMutable) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l20.14"></a><span id="l20.14">     }</span>
<a href="#l20.15"></a><span id="l20.15">   },</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17">   clone() {</span>
<a href="#l20.18"></a><span id="l20.18">     let other = new CalRecurrenceDate();</span>
<a href="#l20.19"></a><span id="l20.19">     other.mDate = this.mDate ? this.mDate.clone() : null;</span>
<a href="#l20.20"></a><span id="l20.20">     other.mIsNegative = this.mIsNegative;</span>
<a href="#l20.21"></a><span id="l20.21">     return other;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -85,17 +85,17 @@ CalRecurrenceDate.prototype = {</span>
<a href="#l20.23"></a><span id="l20.23">   get icalString() {</span>
<a href="#l20.24"></a><span id="l20.24">     let comp = this.icalProperty;</span>
<a href="#l20.25"></a><span id="l20.25">     return comp ? comp.icalString : &quot;&quot;;</span>
<a href="#l20.26"></a><span id="l20.26">   },</span>
<a href="#l20.27"></a><span id="l20.27">   set icalString(val) {</span>
<a href="#l20.28"></a><span id="l20.28">     let prop = cal.getIcsService().createIcalPropertyFromString(val);</span>
<a href="#l20.29"></a><span id="l20.29">     let propName = prop.propertyName;</span>
<a href="#l20.30"></a><span id="l20.30">     if (propName != &quot;RDATE&quot; &amp;&amp; propName != &quot;EXDATE&quot;) {</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l20.33"></a><span id="l20.33">     }</span>
<a href="#l20.34"></a><span id="l20.34"> </span>
<a href="#l20.35"></a><span id="l20.35">     this.icalProperty = prop;</span>
<a href="#l20.36"></a><span id="l20.36">     return val;</span>
<a href="#l20.37"></a><span id="l20.37">   },</span>
<a href="#l20.38"></a><span id="l20.38"> </span>
<a href="#l20.39"></a><span id="l20.39">   get icalProperty() {</span>
<a href="#l20.40"></a><span id="l20.40">     let prop = cal.getIcsService().createIcalProperty(this.mIsNegative ? &quot;EXDATE&quot; : &quot;RDATE&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/base/src/CalRecurrenceInfo.jsm</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/base/src/CalRecurrenceInfo.jsm</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -35,22 +35,22 @@ CalRecurrenceInfo.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">   mNegativeRules: null,</span>
<a href="#l21.5"></a><span id="l21.5">   mExceptionMap: null,</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7">   /**</span>
<a href="#l21.8"></a><span id="l21.8">    * Helpers</span>
<a href="#l21.9"></a><span id="l21.9">    */</span>
<a href="#l21.10"></a><span id="l21.10">   ensureBaseItem() {</span>
<a href="#l21.11"></a><span id="l21.11">     if (!this.mBaseItem) {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l21.14"></a><span id="l21.14">     }</span>
<a href="#l21.15"></a><span id="l21.15">   },</span>
<a href="#l21.16"></a><span id="l21.16">   ensureMutable() {</span>
<a href="#l21.17"></a><span id="l21.17">     if (this.mImmutable) {</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l21.20"></a><span id="l21.20">     }</span>
<a href="#l21.21"></a><span id="l21.21">   },</span>
<a href="#l21.22"></a><span id="l21.22">   ensureSortedRecurrenceRules() {</span>
<a href="#l21.23"></a><span id="l21.23">     if (!this.mPositiveRules || !this.mNegativeRules) {</span>
<a href="#l21.24"></a><span id="l21.24">       this.mPositiveRules = [];</span>
<a href="#l21.25"></a><span id="l21.25">       this.mNegativeRules = [];</span>
<a href="#l21.26"></a><span id="l21.26">       for (let ritem of this.mRecurrenceItems) {</span>
<a href="#l21.27"></a><span id="l21.27">         if (ritem.isNegative) {</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineat">@@ -186,17 +186,17 @@ CalRecurrenceInfo.prototype = {</span>
<a href="#l21.29"></a><span id="l21.29"> </span>
<a href="#l21.30"></a><span id="l21.30">     return this.mRecurrenceItems.length;</span>
<a href="#l21.31"></a><span id="l21.31">   },</span>
<a href="#l21.32"></a><span id="l21.32"> </span>
<a href="#l21.33"></a><span id="l21.33">   getRecurrenceItemAt(aIndex) {</span>
<a href="#l21.34"></a><span id="l21.34">     this.ensureBaseItem();</span>
<a href="#l21.35"></a><span id="l21.35"> </span>
<a href="#l21.36"></a><span id="l21.36">     if (aIndex &lt; 0 || aIndex &gt;= this.mRecurrenceItems.length) {</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.39"></a><span id="l21.39">     }</span>
<a href="#l21.40"></a><span id="l21.40"> </span>
<a href="#l21.41"></a><span id="l21.41">     return this.mRecurrenceItems[aIndex];</span>
<a href="#l21.42"></a><span id="l21.42">   },</span>
<a href="#l21.43"></a><span id="l21.43"> </span>
<a href="#l21.44"></a><span id="l21.44">   appendRecurrenceItem(aItem) {</span>
<a href="#l21.45"></a><span id="l21.45">     this.ensureBaseItem();</span>
<a href="#l21.46"></a><span id="l21.46">     this.ensureMutable();</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineat">@@ -210,17 +210,17 @@ CalRecurrenceInfo.prototype = {</span>
<a href="#l21.48"></a><span id="l21.48">     }</span>
<a href="#l21.49"></a><span id="l21.49">   },</span>
<a href="#l21.50"></a><span id="l21.50"> </span>
<a href="#l21.51"></a><span id="l21.51">   deleteRecurrenceItemAt(aIndex) {</span>
<a href="#l21.52"></a><span id="l21.52">     this.ensureBaseItem();</span>
<a href="#l21.53"></a><span id="l21.53">     this.ensureMutable();</span>
<a href="#l21.54"></a><span id="l21.54"> </span>
<a href="#l21.55"></a><span id="l21.55">     if (aIndex &lt; 0 || aIndex &gt;= this.mRecurrenceItems.length) {</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.58"></a><span id="l21.58">     }</span>
<a href="#l21.59"></a><span id="l21.59"> </span>
<a href="#l21.60"></a><span id="l21.60">     if (this.mRecurrenceItems[aIndex].isNegative) {</span>
<a href="#l21.61"></a><span id="l21.61">       this.mNegativeRules = null;</span>
<a href="#l21.62"></a><span id="l21.62">     } else {</span>
<a href="#l21.63"></a><span id="l21.63">       this.mPositiveRules = null;</span>
<a href="#l21.64"></a><span id="l21.64">     }</span>
<a href="#l21.65"></a><span id="l21.65"> </span>
<a href="#l21.66"></a><span id="l21.66" class="difflineat">@@ -236,27 +236,27 @@ CalRecurrenceInfo.prototype = {</span>
<a href="#l21.67"></a><span id="l21.67">     );</span>
<a href="#l21.68"></a><span id="l21.68">     sip1.data = aItem;</span>
<a href="#l21.69"></a><span id="l21.69">     sip1.dataIID = Ci.calIRecurrenceItem;</span>
<a href="#l21.70"></a><span id="l21.70"> </span>
<a href="#l21.71"></a><span id="l21.71">     let pos;</span>
<a href="#l21.72"></a><span id="l21.72">     if ((pos = this.mRecurrenceItems.indexOf(sip1.data)) &gt; -1) {</span>
<a href="#l21.73"></a><span id="l21.73">       this.deleteRecurrenceItemAt(pos);</span>
<a href="#l21.74"></a><span id="l21.74">     } else {</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.77"></a><span id="l21.77">     }</span>
<a href="#l21.78"></a><span id="l21.78">   },</span>
<a href="#l21.79"></a><span id="l21.79"> </span>
<a href="#l21.80"></a><span id="l21.80">   insertRecurrenceItemAt(aItem, aIndex) {</span>
<a href="#l21.81"></a><span id="l21.81">     this.ensureBaseItem();</span>
<a href="#l21.82"></a><span id="l21.82">     this.ensureMutable();</span>
<a href="#l21.83"></a><span id="l21.83">     this.ensureSortedRecurrenceRules();</span>
<a href="#l21.84"></a><span id="l21.84"> </span>
<a href="#l21.85"></a><span id="l21.85">     if (aIndex &lt; 0 || aIndex &gt; this.mRecurrenceItems.length) {</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.88"></a><span id="l21.88">     }</span>
<a href="#l21.89"></a><span id="l21.89"> </span>
<a href="#l21.90"></a><span id="l21.90">     if (aItem.isNegative) {</span>
<a href="#l21.91"></a><span id="l21.91">       this.mNegativeRules.push(aItem);</span>
<a href="#l21.92"></a><span id="l21.92">     } else {</span>
<a href="#l21.93"></a><span id="l21.93">       this.mPositiveRules.push(aItem);</span>
<a href="#l21.94"></a><span id="l21.94">     }</span>
<a href="#l21.95"></a><span id="l21.95"> </span>
<a href="#l21.96"></a><span id="l21.96" class="difflineat">@@ -643,17 +643,17 @@ CalRecurrenceInfo.prototype = {</span>
<a href="#l21.97"></a><span id="l21.97">       let rdate = cal.wrapInstance(this.mRecurrenceItems[i], Ci.calIRecurrenceDate);</span>
<a href="#l21.98"></a><span id="l21.98">       if (rdate) {</span>
<a href="#l21.99"></a><span id="l21.99">         if (rdate.isNegative &amp;&amp; rdate.date.compare(aRecurrenceId) == 0) {</span>
<a href="#l21.100"></a><span id="l21.100">           return this.deleteRecurrenceItemAt(i);</span>
<a href="#l21.101"></a><span id="l21.101">         }</span>
<a href="#l21.102"></a><span id="l21.102">       }</span>
<a href="#l21.103"></a><span id="l21.103">     }</span>
<a href="#l21.104"></a><span id="l21.104"> </span>
<a href="#l21.105"></a><span id="l21.105" class="difflineminus">-    throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.106"></a><span id="l21.106" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.107"></a><span id="l21.107">   },</span>
<a href="#l21.108"></a><span id="l21.108"> </span>
<a href="#l21.109"></a><span id="l21.109">   //</span>
<a href="#l21.110"></a><span id="l21.110">   // exceptions</span>
<a href="#l21.111"></a><span id="l21.111">   //</span>
<a href="#l21.112"></a><span id="l21.112"> </span>
<a href="#l21.113"></a><span id="l21.113">   //</span>
<a href="#l21.114"></a><span id="l21.114">   // Some notes:</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineat">@@ -688,22 +688,22 @@ CalRecurrenceInfo.prototype = {</span>
<a href="#l21.116"></a><span id="l21.116"> </span>
<a href="#l21.117"></a><span id="l21.117">     anItem = cal.unwrapInstance(anItem);</span>
<a href="#l21.118"></a><span id="l21.118"> </span>
<a href="#l21.119"></a><span id="l21.119">     if (</span>
<a href="#l21.120"></a><span id="l21.120">       anItem.parentItem.calendar != this.mBaseItem.calendar &amp;&amp;</span>
<a href="#l21.121"></a><span id="l21.121">       anItem.parentItem.id != this.mBaseItem.id</span>
<a href="#l21.122"></a><span id="l21.122">     ) {</span>
<a href="#l21.123"></a><span id="l21.123">       cal.ERROR(&quot;recurrenceInfo::addException: item parentItem != this.mBaseItem (calendar/id)!&quot;);</span>
<a href="#l21.124"></a><span id="l21.124" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.126"></a><span id="l21.126">     }</span>
<a href="#l21.127"></a><span id="l21.127"> </span>
<a href="#l21.128"></a><span id="l21.128">     if (anItem.recurrenceId == null) {</span>
<a href="#l21.129"></a><span id="l21.129">       cal.ERROR(&quot;recurrenceInfo::addException: item with null recurrenceId!&quot;);</span>
<a href="#l21.130"></a><span id="l21.130" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l21.131"></a><span id="l21.131" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l21.132"></a><span id="l21.132">     }</span>
<a href="#l21.133"></a><span id="l21.133"> </span>
<a href="#l21.134"></a><span id="l21.134">     let itemtoadd;</span>
<a href="#l21.135"></a><span id="l21.135">     if (aTakeOverOwnership &amp;&amp; anItem.isMutable) {</span>
<a href="#l21.136"></a><span id="l21.136">       itemtoadd = anItem;</span>
<a href="#l21.137"></a><span id="l21.137">       itemtoadd.parentItem = this.mBaseItem;</span>
<a href="#l21.138"></a><span id="l21.138">     } else {</span>
<a href="#l21.139"></a><span id="l21.139">       itemtoadd = anItem.cloneShallow(this.mBaseItem);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/base/src/CalRelation.jsm</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/base/src/CalRelation.jsm</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -88,17 +88,17 @@ CalRelation.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">   get icalString() {</span>
<a href="#l22.6"></a><span id="l22.6">     let comp = this.icalProperty;</span>
<a href="#l22.7"></a><span id="l22.7">     return comp ? comp.icalString : &quot;&quot;;</span>
<a href="#l22.8"></a><span id="l22.8">   },</span>
<a href="#l22.9"></a><span id="l22.9">   set icalString(val) {</span>
<a href="#l22.10"></a><span id="l22.10">     let prop = cal.getIcsService().createIcalPropertyFromString(val);</span>
<a href="#l22.11"></a><span id="l22.11">     if (prop.propertyName != &quot;RELATED-TO&quot;) {</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l22.14"></a><span id="l22.14">     }</span>
<a href="#l22.15"></a><span id="l22.15">     this.icalProperty = prop;</span>
<a href="#l22.16"></a><span id="l22.16">     return val;</span>
<a href="#l22.17"></a><span id="l22.17">   },</span>
<a href="#l22.18"></a><span id="l22.18"> </span>
<a href="#l22.19"></a><span id="l22.19">   getParameter(aName) {</span>
<a href="#l22.20"></a><span id="l22.20">     return this.mProperties.get(aName);</span>
<a href="#l22.21"></a><span id="l22.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/base/src/CalTimezoneService.jsm</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/base/src/CalTimezoneService.jsm</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -23,17 +23,17 @@ calStringEnumerator.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4">   [Symbol.iterator]() {</span>
<a href="#l23.5"></a><span id="l23.5">     return this.mStringArray.values();</span>
<a href="#l23.6"></a><span id="l23.6">   },</span>
<a href="#l23.7"></a><span id="l23.7">   hasMore() {</span>
<a href="#l23.8"></a><span id="l23.8">     return this.mIndex &lt; this.mStringArray.length;</span>
<a href="#l23.9"></a><span id="l23.9">   },</span>
<a href="#l23.10"></a><span id="l23.10">   getNext() {</span>
<a href="#l23.11"></a><span id="l23.11">     if (!this.hasMore()) {</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l23.14"></a><span id="l23.14">     }</span>
<a href="#l23.15"></a><span id="l23.15">     return this.mStringArray[this.mIndex++];</span>
<a href="#l23.16"></a><span id="l23.16">   },</span>
<a href="#l23.17"></a><span id="l23.17"> };</span>
<a href="#l23.18"></a><span id="l23.18"> </span>
<a href="#l23.19"></a><span id="l23.19"> function CalTimezoneService() {</span>
<a href="#l23.20"></a><span id="l23.20">   this.wrappedJSObject = this;</span>
<a href="#l23.21"></a><span id="l23.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/base/src/CalTodo.jsm</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/base/src/CalTodo.jsm</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -172,17 +172,17 @@ CalTodo.prototype = {</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">   todoPromotedProps: null,</span>
<a href="#l24.6"></a><span id="l24.6"> </span>
<a href="#l24.7"></a><span id="l24.7">   set icalComponent(todo) {</span>
<a href="#l24.8"></a><span id="l24.8">     this.modify();</span>
<a href="#l24.9"></a><span id="l24.9">     if (todo.componentType != &quot;VTODO&quot;) {</span>
<a href="#l24.10"></a><span id="l24.10">       todo = todo.getFirstSubcomponent(&quot;VTODO&quot;);</span>
<a href="#l24.11"></a><span id="l24.11">       if (!todo) {</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l24.14"></a><span id="l24.14">       }</span>
<a href="#l24.15"></a><span id="l24.15">     }</span>
<a href="#l24.16"></a><span id="l24.16"> </span>
<a href="#l24.17"></a><span id="l24.17">     this.mDueDate = undefined;</span>
<a href="#l24.18"></a><span id="l24.18">     this.setItemBaseFromICS(todo);</span>
<a href="#l24.19"></a><span id="l24.19">     this.mapPropsFromICS(todo, this.icsEventPropMap);</span>
<a href="#l24.20"></a><span id="l24.20"> </span>
<a href="#l24.21"></a><span id="l24.21">     this.importUnpromotedProperties(todo, this.todoPromotedProps);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/base/src/calCachedCalendar.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/base/src/calCachedCalendar.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -132,17 +132,17 @@ calCachedCalendar.prototype = {</span>
<a href="#l25.4"></a><span id="l25.4">   /* eslint-disable mozilla/use-chromeutils-generateqi */</span>
<a href="#l25.5"></a><span id="l25.5">   QueryInterface(aIID) {</span>
<a href="#l25.6"></a><span id="l25.6">     if (aIID.equals(Ci.calISchedulingSupport) &amp;&amp; this.mUncachedCalendar.QueryInterface(aIID)) {</span>
<a href="#l25.7"></a><span id="l25.7">       // check whether uncached calendar supports it:</span>
<a href="#l25.8"></a><span id="l25.8">       return this;</span>
<a href="#l25.9"></a><span id="l25.9">     } else if (aIID.equals(Ci.calICalendar) || aIID.equals(Ci.nsISupports)) {</span>
<a href="#l25.10"></a><span id="l25.10">       return this;</span>
<a href="#l25.11"></a><span id="l25.11">     }</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l25.14"></a><span id="l25.14">   },</span>
<a href="#l25.15"></a><span id="l25.15">   /* eslint-enable mozilla/use-chromeutils-generateqi */</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17">   mCachedCalendar: null,</span>
<a href="#l25.18"></a><span id="l25.18">   mCachedObserver: null,</span>
<a href="#l25.19"></a><span id="l25.19">   mUncachedCalendar: null,</span>
<a href="#l25.20"></a><span id="l25.20">   mObservers: null,</span>
<a href="#l25.21"></a><span id="l25.21">   mSuperCalendar: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/base/src/calItemBase.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/base/src/calItemBase.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -123,17 +123,17 @@ calItemBase.prototype = {</span>
<a href="#l26.4"></a><span id="l26.4">   },</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6">   // attribute calIItemBase parentItem;</span>
<a href="#l26.7"></a><span id="l26.7">   get parentItem() {</span>
<a href="#l26.8"></a><span id="l26.8">     return this.mParentItem || this;</span>
<a href="#l26.9"></a><span id="l26.9">   },</span>
<a href="#l26.10"></a><span id="l26.10">   set parentItem(value) {</span>
<a href="#l26.11"></a><span id="l26.11">     if (this.mImmutable) {</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l26.14"></a><span id="l26.14">     }</span>
<a href="#l26.15"></a><span id="l26.15">     return (this.mParentItem = cal.unwrapInstance(value));</span>
<a href="#l26.16"></a><span id="l26.16">   },</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18">   /**</span>
<a href="#l26.19"></a><span id="l26.19">    * Initializes the base item to be an item proxy. Used by inheriting</span>
<a href="#l26.20"></a><span id="l26.20">    * objects createProxy() method.</span>
<a href="#l26.21"></a><span id="l26.21">    *</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineat">@@ -165,17 +165,17 @@ calItemBase.prototype = {</span>
<a href="#l26.23"></a><span id="l26.23"> </span>
<a href="#l26.24"></a><span id="l26.24">   /**</span>
<a href="#l26.25"></a><span id="l26.25">    * This function should be called by all members that modify the item. It</span>
<a href="#l26.26"></a><span id="l26.26">    * checks if the item is immutable and throws accordingly, and sets the</span>
<a href="#l26.27"></a><span id="l26.27">    * mDirty property.</span>
<a href="#l26.28"></a><span id="l26.28">    */</span>
<a href="#l26.29"></a><span id="l26.29">   modify() {</span>
<a href="#l26.30"></a><span id="l26.30">     if (this.mImmutable) {</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l26.33"></a><span id="l26.33">     }</span>
<a href="#l26.34"></a><span id="l26.34">     this.mDirty = true;</span>
<a href="#l26.35"></a><span id="l26.35">   },</span>
<a href="#l26.36"></a><span id="l26.36"> </span>
<a href="#l26.37"></a><span id="l26.37">   /**</span>
<a href="#l26.38"></a><span id="l26.38">    * Makes sure the item is not dirty. If the item is dirty, properties like</span>
<a href="#l26.39"></a><span id="l26.39">    * LAST-MODIFIED and DTSTAMP are set to now.</span>
<a href="#l26.40"></a><span id="l26.40">    */</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineat">@@ -659,17 +659,17 @@ calItemBase.prototype = {</span>
<a href="#l26.42"></a><span id="l26.42">   get calendar() {</span>
<a href="#l26.43"></a><span id="l26.43">     if (!this.mCalendar &amp;&amp; this.parentItem != this) {</span>
<a href="#l26.44"></a><span id="l26.44">       return this.parentItem.calendar;</span>
<a href="#l26.45"></a><span id="l26.45">     }</span>
<a href="#l26.46"></a><span id="l26.46">     return this.mCalendar;</span>
<a href="#l26.47"></a><span id="l26.47">   },</span>
<a href="#l26.48"></a><span id="l26.48">   set calendar(calendar) {</span>
<a href="#l26.49"></a><span id="l26.49">     if (this.mImmutable) {</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineminus">-      throw Cr.NS_ERROR_OBJECT_IS_IMMUTABLE;</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_OBJECT_IS_IMMUTABLE);</span>
<a href="#l26.52"></a><span id="l26.52">     }</span>
<a href="#l26.53"></a><span id="l26.53">     this.mHashId = null; // recompute hashId</span>
<a href="#l26.54"></a><span id="l26.54">     this.mCalendar = calendar;</span>
<a href="#l26.55"></a><span id="l26.55">   },</span>
<a href="#l26.56"></a><span id="l26.56"> </span>
<a href="#l26.57"></a><span id="l26.57">   // attribute calIAttendee organizer;</span>
<a href="#l26.58"></a><span id="l26.58">   get organizer() {</span>
<a href="#l26.59"></a><span id="l26.59">     if (this.mIsProxy &amp;&amp; this.mOrganizer === undefined) {</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineat">@@ -696,20 +696,20 @@ calItemBase.prototype = {</span>
<a href="#l26.61"></a><span id="l26.61">   // void setCategories(in Array&lt;AString&gt; aCategories);</span>
<a href="#l26.62"></a><span id="l26.62">   setCategories(aCategories) {</span>
<a href="#l26.63"></a><span id="l26.63">     this.modify();</span>
<a href="#l26.64"></a><span id="l26.64">     this.mCategories = aCategories.concat([]);</span>
<a href="#l26.65"></a><span id="l26.65">   },</span>
<a href="#l26.66"></a><span id="l26.66"> </span>
<a href="#l26.67"></a><span id="l26.67">   // attribute AUTF8String icalString;</span>
<a href="#l26.68"></a><span id="l26.68">   get icalString() {</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l26.71"></a><span id="l26.71">   },</span>
<a href="#l26.72"></a><span id="l26.72">   set icalString(str) {</span>
<a href="#l26.73"></a><span id="l26.73" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l26.74"></a><span id="l26.74" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l26.75"></a><span id="l26.75">   },</span>
<a href="#l26.76"></a><span id="l26.76"> </span>
<a href="#l26.77"></a><span id="l26.77">   /**</span>
<a href="#l26.78"></a><span id="l26.78">    * The map of promoted properties is a list of those properties that are</span>
<a href="#l26.79"></a><span id="l26.79">    * represented directly by getters/setters.</span>
<a href="#l26.80"></a><span id="l26.80">    * All of these property names must be in upper case isPropertyPromoted to</span>
<a href="#l26.81"></a><span id="l26.81">    * function correctly. The has/get/set/deleteProperty interfaces</span>
<a href="#l26.82"></a><span id="l26.82">    * are case-insensitive, but these are not.</span>
<a href="#l26.83"></a><span id="l26.83" class="difflineat">@@ -914,20 +914,20 @@ calItemBase.prototype = {</span>
<a href="#l26.84"></a><span id="l26.84"> </span>
<a href="#l26.85"></a><span id="l26.85">   // boolean isPropertyPromoted(in AString name);</span>
<a href="#l26.86"></a><span id="l26.86">   isPropertyPromoted(name) {</span>
<a href="#l26.87"></a><span id="l26.87">     return this.itemBasePromotedProps[name.toUpperCase()];</span>
<a href="#l26.88"></a><span id="l26.88">   },</span>
<a href="#l26.89"></a><span id="l26.89"> </span>
<a href="#l26.90"></a><span id="l26.90">   // attribute calIIcalComponent icalComponent;</span>
<a href="#l26.91"></a><span id="l26.91">   get icalComponent() {</span>
<a href="#l26.92"></a><span id="l26.92" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l26.93"></a><span id="l26.93" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l26.94"></a><span id="l26.94">   },</span>
<a href="#l26.95"></a><span id="l26.95">   set icalComponent(val) {</span>
<a href="#l26.96"></a><span id="l26.96" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l26.97"></a><span id="l26.97" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l26.98"></a><span id="l26.98">   },</span>
<a href="#l26.99"></a><span id="l26.99"> </span>
<a href="#l26.100"></a><span id="l26.100">   // attribute PRUint32 generation;</span>
<a href="#l26.101"></a><span id="l26.101">   get generation() {</span>
<a href="#l26.102"></a><span id="l26.102">     let gen = this.getProperty(&quot;X-MOZ-GENERATION&quot;);</span>
<a href="#l26.103"></a><span id="l26.103">     return gen ? parseInt(gen, 10) : 0;</span>
<a href="#l26.104"></a><span id="l26.104">   },</span>
<a href="#l26.105"></a><span id="l26.105">   set generation(aValue) {</span>
<a href="#l26.106"></a><span id="l26.106" class="difflineat">@@ -1009,17 +1009,17 @@ calItemBase.prototype = {</span>
<a href="#l26.107"></a><span id="l26.107">    *                            errors.</span>
<a href="#l26.108"></a><span id="l26.108">    */</span>
<a href="#l26.109"></a><span id="l26.109">   addAlarm(aAlarm, aDoNotValidate) {</span>
<a href="#l26.110"></a><span id="l26.110">     if (!aDoNotValidate) {</span>
<a href="#l26.111"></a><span id="l26.111">       try {</span>
<a href="#l26.112"></a><span id="l26.112">         // Trigger the icalComponent getter to make sure the alarm is valid.</span>
<a href="#l26.113"></a><span id="l26.113">         aAlarm.icalComponent; // eslint-disable-line no-unused-expressions</span>
<a href="#l26.114"></a><span id="l26.114">       } catch (e) {</span>
<a href="#l26.115"></a><span id="l26.115" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l26.116"></a><span id="l26.116" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l26.117"></a><span id="l26.117">       }</span>
<a href="#l26.118"></a><span id="l26.118">     }</span>
<a href="#l26.119"></a><span id="l26.119"> </span>
<a href="#l26.120"></a><span id="l26.120">     this.modify();</span>
<a href="#l26.121"></a><span id="l26.121">     this.mAlarms = this.getAlarms();</span>
<a href="#l26.122"></a><span id="l26.122">     this.mAlarms.push(aAlarm);</span>
<a href="#l26.123"></a><span id="l26.123">   },</span>
<a href="#l26.124"></a><span id="l26.124"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/itip/CalItipEmailTransport.jsm</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/itip/CalItipEmailTransport.jsm</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -43,17 +43,17 @@ CalItipEmailTransport.prototype = {</span>
<a href="#l27.4"></a><span id="l27.4">       let items = this._prepareItems(aItipItem);</span>
<a href="#l27.5"></a><span id="l27.5">       if (items === false) {</span>
<a href="#l27.6"></a><span id="l27.6">         return false;</span>
<a href="#l27.7"></a><span id="l27.7">       }</span>
<a href="#l27.8"></a><span id="l27.8"> </span>
<a href="#l27.9"></a><span id="l27.9">       return this._sendXpcomMail(aRecipients, items.subject, items.body, aItipItem);</span>
<a href="#l27.10"></a><span id="l27.10">     }</span>
<a href="#l27.11"></a><span id="l27.11">     // sending xpcom mail is not available if no identity has been set</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l27.14"></a><span id="l27.14">   },</span>
<a href="#l27.15"></a><span id="l27.15"> </span>
<a href="#l27.16"></a><span id="l27.16">   _prepareItems(aItipItem) {</span>
<a href="#l27.17"></a><span id="l27.17">     let item = aItipItem.getItemList()[0];</span>
<a href="#l27.18"></a><span id="l27.18"> </span>
<a href="#l27.19"></a><span id="l27.19">     // Get ourselves some default text - when we handle organizer properly</span>
<a href="#l27.20"></a><span id="l27.20">     // We'll need a way to configure the Common Name attribute and we should</span>
<a href="#l27.21"></a><span id="l27.21">     // use it here rather than the email address</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/lightning/components/CalItipProtocolHandler.jsm</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/lightning/components/CalItipProtocolHandler.jsm</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -6,17 +6,17 @@ var EXPORTED_SYMBOLS = [&quot;ItipChannel&quot;, &quot;</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> var { cal } = ChromeUtils.import(&quot;resource:///modules/calendar/calUtils.jsm&quot;);</span>
<a href="#l28.6"></a><span id="l28.6"> </span>
<a href="#l28.7"></a><span id="l28.7"> var ITIP_HANDLER_MIMETYPE = &quot;application/x-itip-internal&quot;;</span>
<a href="#l28.8"></a><span id="l28.8"> var ITIP_HANDLER_PROTOCOL = &quot;moz-cal-handle-itip&quot;;</span>
<a href="#l28.9"></a><span id="l28.9"> var NS_ERROR_WONT_HANDLE_CONTENT = 0x805d0001;</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11"> function NYI() {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l28.14"></a><span id="l28.14"> }</span>
<a href="#l28.15"></a><span id="l28.15"> </span>
<a href="#l28.16"></a><span id="l28.16"> function ItipChannel(URI, aLoadInfo) {</span>
<a href="#l28.17"></a><span id="l28.17">   this.wrappedJSObject = this;</span>
<a href="#l28.18"></a><span id="l28.18">   this.URI = this.originalURI = URI;</span>
<a href="#l28.19"></a><span id="l28.19">   this.loadInfo = aLoadInfo;</span>
<a href="#l28.20"></a><span id="l28.20"> }</span>
<a href="#l28.21"></a><span id="l28.21"> ItipChannel.prototype = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -1742,17 +1742,17 @@ function untilDateCompensation(aItem) {</span>
<a href="#l29.4"></a><span id="l29.4">  */</span>
<a href="#l29.5"></a><span id="l29.5"> function updateTitle() {</span>
<a href="#l29.6"></a><span id="l29.6">   let strName;</span>
<a href="#l29.7"></a><span id="l29.7">   if (cal.item.isEvent(window.calendarItem)) {</span>
<a href="#l29.8"></a><span id="l29.8">     strName = window.mode == &quot;new&quot; ? &quot;newEventDialog&quot; : &quot;editEventDialog&quot;;</span>
<a href="#l29.9"></a><span id="l29.9">   } else if (cal.item.isToDo(window.calendarItem)) {</span>
<a href="#l29.10"></a><span id="l29.10">     strName = window.mode == &quot;new&quot; ? &quot;newTaskDialog&quot; : &quot;editTaskDialog&quot;;</span>
<a href="#l29.11"></a><span id="l29.11">   } else {</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l29.14"></a><span id="l29.14">   }</span>
<a href="#l29.15"></a><span id="l29.15">   let newTitle = cal.l10n.getCalString(strName) + &quot;: &quot; + getElementValue(&quot;item-title&quot;);</span>
<a href="#l29.16"></a><span id="l29.16">   sendMessage({ command: &quot;updateTitle&quot;, argument: newTitle });</span>
<a href="#l29.17"></a><span id="l29.17"> }</span>
<a href="#l29.18"></a><span id="l29.18"> </span>
<a href="#l29.19"></a><span id="l29.19"> /**</span>
<a href="#l29.20"></a><span id="l29.20">  * Update the disabled status of the accept button. The button is enabled if all</span>
<a href="#l29.21"></a><span id="l29.21">  * parts of the dialog have options selected that make sense.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/providers/caldav/CalDavCalendar.jsm</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/providers/caldav/CalDavCalendar.jsm</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -137,21 +137,21 @@ CalDavCalendar.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4">     return null;</span>
<a href="#l30.5"></a><span id="l30.5">   },</span>
<a href="#l30.6"></a><span id="l30.6"> </span>
<a href="#l30.7"></a><span id="l30.7">   get displayName() {</span>
<a href="#l30.8"></a><span id="l30.8">     return cal.l10n.getCalString(&quot;caldavName&quot;);</span>
<a href="#l30.9"></a><span id="l30.9">   },</span>
<a href="#l30.10"></a><span id="l30.10"> </span>
<a href="#l30.11"></a><span id="l30.11">   createCalendar() {</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l30.14"></a><span id="l30.14">   },</span>
<a href="#l30.15"></a><span id="l30.15"> </span>
<a href="#l30.16"></a><span id="l30.16">   deleteCalendar(_cal, listener) {</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l30.19"></a><span id="l30.19">   },</span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21">   // calIChangeLog interface</span>
<a href="#l30.22"></a><span id="l30.22">   get offlineStorage() {</span>
<a href="#l30.23"></a><span id="l30.23">     return this.mOfflineStorage;</span>
<a href="#l30.24"></a><span id="l30.24">   },</span>
<a href="#l30.25"></a><span id="l30.25"> </span>
<a href="#l30.26"></a><span id="l30.26">   set offlineStorage(storage) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/providers/caldav/modules/CalDavRequest.jsm</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/providers/caldav/modules/CalDavRequest.jsm</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -249,17 +249,17 @@ class CalDavResponseBase {</span>
<a href="#l31.4"></a><span id="l31.4">     this.completed = new Promise((resolve, reject) =&gt; {</span>
<a href="#l31.5"></a><span id="l31.5">       this._oncompleted = resolve;</span>
<a href="#l31.6"></a><span id="l31.6">       this._oncompleteerror = reject;</span>
<a href="#l31.7"></a><span id="l31.7">     });</span>
<a href="#l31.8"></a><span id="l31.8">   }</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10">   /** The listener passed to the channel's asyncOpen */</span>
<a href="#l31.11"></a><span id="l31.11">   get listener() {</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l31.14"></a><span id="l31.14">   }</span>
<a href="#l31.15"></a><span id="l31.15"> </span>
<a href="#l31.16"></a><span id="l31.16">   /** @return {nsIURI} The request URI **/</span>
<a href="#l31.17"></a><span id="l31.17">   get uri() {</span>
<a href="#l31.18"></a><span id="l31.18">     return this.nsirequest.URI;</span>
<a href="#l31.19"></a><span id="l31.19">   }</span>
<a href="#l31.20"></a><span id="l31.20"> </span>
<a href="#l31.21"></a><span id="l31.21">   /** @return {Boolean} True, if the request was redirected */</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineat">@@ -324,17 +324,17 @@ class CalDavResponseBase {</span>
<a href="#l31.23"></a><span id="l31.23">       throw new HttpNotFoundError(this);</span>
<a href="#l31.24"></a><span id="l31.24">     } else if (this.serverError) {</span>
<a href="#l31.25"></a><span id="l31.25">       throw new HttpServerError(this);</span>
<a href="#l31.26"></a><span id="l31.26">     }</span>
<a href="#l31.27"></a><span id="l31.27">   }</span>
<a href="#l31.28"></a><span id="l31.28"> </span>
<a href="#l31.29"></a><span id="l31.29">   /** The text response of the request */</span>
<a href="#l31.30"></a><span id="l31.30">   get text() {</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l31.33"></a><span id="l31.33">   }</span>
<a href="#l31.34"></a><span id="l31.34"> </span>
<a href="#l31.35"></a><span id="l31.35">   /** @return {DOMDocument} A DOM document with the response xml */</span>
<a href="#l31.36"></a><span id="l31.36">   get xml() {</span>
<a href="#l31.37"></a><span id="l31.37">     if (this.text &amp;&amp; !this._responseXml) {</span>
<a href="#l31.38"></a><span id="l31.38">       try {</span>
<a href="#l31.39"></a><span id="l31.39">         this._responseXml = cal.xml.parseString(this.text);</span>
<a href="#l31.40"></a><span id="l31.40">       } catch (e) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/providers/composite/CalCompositeCalendar.jsm</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/providers/composite/CalCompositeCalendar.jsm</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -94,22 +94,22 @@ CalCompositeCalendar.prototype = {</span>
<a href="#l32.4"></a><span id="l32.4">   get prefChromeOverlay() {</span>
<a href="#l32.5"></a><span id="l32.5">     return null;</span>
<a href="#l32.6"></a><span id="l32.6">   },</span>
<a href="#l32.7"></a><span id="l32.7">   get displayName() {</span>
<a href="#l32.8"></a><span id="l32.8">     return cal.l10n.getCalString(&quot;compositeName&quot;);</span>
<a href="#l32.9"></a><span id="l32.9">   },</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11">   createCalendar() {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.14"></a><span id="l32.14">   },</span>
<a href="#l32.15"></a><span id="l32.15"> </span>
<a href="#l32.16"></a><span id="l32.16">   deleteCalendar(calendar, listener) {</span>
<a href="#l32.17"></a><span id="l32.17">     // You shouldn't be able to delete from the composite calendar.</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.20"></a><span id="l32.20">   },</span>
<a href="#l32.21"></a><span id="l32.21"> </span>
<a href="#l32.22"></a><span id="l32.22">   //</span>
<a href="#l32.23"></a><span id="l32.23">   // calICompositeCalendar interface</span>
<a href="#l32.24"></a><span id="l32.24">   //</span>
<a href="#l32.25"></a><span id="l32.25"> </span>
<a href="#l32.26"></a><span id="l32.26">   mCalendars: null,</span>
<a href="#l32.27"></a><span id="l32.27">   mDefaultCalendar: null,</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineat">@@ -227,56 +227,56 @@ CalCompositeCalendar.prototype = {</span>
<a href="#l32.29"></a><span id="l32.29">   // calICalendar interface</span>
<a href="#l32.30"></a><span id="l32.30">   //</span>
<a href="#l32.31"></a><span id="l32.31">   // Write operations here are forwarded to either the item's</span>
<a href="#l32.32"></a><span id="l32.32">   // parent calendar, or to the default calendar if one is set.</span>
<a href="#l32.33"></a><span id="l32.33">   // Get operations are sent to each calendar.</span>
<a href="#l32.34"></a><span id="l32.34">   //</span>
<a href="#l32.35"></a><span id="l32.35"> </span>
<a href="#l32.36"></a><span id="l32.36">   get id() {</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.38"></a><span id="l32.38" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.39"></a><span id="l32.39">   },</span>
<a href="#l32.40"></a><span id="l32.40">   set id(id) {</span>
<a href="#l32.41"></a><span id="l32.41" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.42"></a><span id="l32.42" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.43"></a><span id="l32.43">   },</span>
<a href="#l32.44"></a><span id="l32.44"> </span>
<a href="#l32.45"></a><span id="l32.45">   get superCalendar() {</span>
<a href="#l32.46"></a><span id="l32.46">     // There shouldn't be a superCalendar for the composite</span>
<a href="#l32.47"></a><span id="l32.47">     return this;</span>
<a href="#l32.48"></a><span id="l32.48">   },</span>
<a href="#l32.49"></a><span id="l32.49">   set superCalendar(val) {</span>
<a href="#l32.50"></a><span id="l32.50" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.51"></a><span id="l32.51" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.52"></a><span id="l32.52">   },</span>
<a href="#l32.53"></a><span id="l32.53"> </span>
<a href="#l32.54"></a><span id="l32.54">   // this could, at some point, return some kind of URI identifying</span>
<a href="#l32.55"></a><span id="l32.55">   // all the child calendars, thus letting us create nifty calendar</span>
<a href="#l32.56"></a><span id="l32.56">   // trees.</span>
<a href="#l32.57"></a><span id="l32.57">   get uri() {</span>
<a href="#l32.58"></a><span id="l32.58" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.59"></a><span id="l32.59" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.60"></a><span id="l32.60">   },</span>
<a href="#l32.61"></a><span id="l32.61">   set uri(val) {</span>
<a href="#l32.62"></a><span id="l32.62" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.63"></a><span id="l32.63" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.64"></a><span id="l32.64">   },</span>
<a href="#l32.65"></a><span id="l32.65"> </span>
<a href="#l32.66"></a><span id="l32.66">   get readOnly() {</span>
<a href="#l32.67"></a><span id="l32.67" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.68"></a><span id="l32.68" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.69"></a><span id="l32.69">   },</span>
<a href="#l32.70"></a><span id="l32.70">   set readOnly(bool) {</span>
<a href="#l32.71"></a><span id="l32.71" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.72"></a><span id="l32.72" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.73"></a><span id="l32.73">   },</span>
<a href="#l32.74"></a><span id="l32.74"> </span>
<a href="#l32.75"></a><span id="l32.75">   get canRefresh() {</span>
<a href="#l32.76"></a><span id="l32.76">     return true;</span>
<a href="#l32.77"></a><span id="l32.77">   },</span>
<a href="#l32.78"></a><span id="l32.78"> </span>
<a href="#l32.79"></a><span id="l32.79">   get name() {</span>
<a href="#l32.80"></a><span id="l32.80" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.81"></a><span id="l32.81" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.82"></a><span id="l32.82">   },</span>
<a href="#l32.83"></a><span id="l32.83">   set name(val) {</span>
<a href="#l32.84"></a><span id="l32.84" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l32.85"></a><span id="l32.85" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l32.86"></a><span id="l32.86">   },</span>
<a href="#l32.87"></a><span id="l32.87"> </span>
<a href="#l32.88"></a><span id="l32.88">   get type() {</span>
<a href="#l32.89"></a><span id="l32.89">     return &quot;composite&quot;;</span>
<a href="#l32.90"></a><span id="l32.90">   },</span>
<a href="#l32.91"></a><span id="l32.91"> </span>
<a href="#l32.92"></a><span id="l32.92">   getProperty(aName) {</span>
<a href="#l32.93"></a><span id="l32.93">     return this.mDefaultCalendar.getProperty(aName);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/calendar/providers/ics/CalICSCalendar.jsm</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/calendar/providers/ics/CalICSCalendar.jsm</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -76,21 +76,21 @@ CalICSCalendar.prototype = {</span>
<a href="#l33.4"></a><span id="l33.4">     return null;</span>
<a href="#l33.5"></a><span id="l33.5">   },</span>
<a href="#l33.6"></a><span id="l33.6"> </span>
<a href="#l33.7"></a><span id="l33.7">   get displayName() {</span>
<a href="#l33.8"></a><span id="l33.8">     return cal.l10n.getCalString(&quot;icsName&quot;);</span>
<a href="#l33.9"></a><span id="l33.9">   },</span>
<a href="#l33.10"></a><span id="l33.10"> </span>
<a href="#l33.11"></a><span id="l33.11">   createCalendar() {</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l33.14"></a><span id="l33.14">   },</span>
<a href="#l33.15"></a><span id="l33.15"> </span>
<a href="#l33.16"></a><span id="l33.16">   deleteCalendar(_cal, listener) {</span>
<a href="#l33.17"></a><span id="l33.17" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l33.19"></a><span id="l33.19">   },</span>
<a href="#l33.20"></a><span id="l33.20"> </span>
<a href="#l33.21"></a><span id="l33.21">   //</span>
<a href="#l33.22"></a><span id="l33.22">   // calICalendar interface</span>
<a href="#l33.23"></a><span id="l33.23">   //</span>
<a href="#l33.24"></a><span id="l33.24">   get type() {</span>
<a href="#l33.25"></a><span id="l33.25">     return &quot;ics&quot;;</span>
<a href="#l33.26"></a><span id="l33.26">   },</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineat">@@ -287,17 +287,17 @@ CalICSCalendar.prototype = {</span>
<a href="#l33.28"></a><span id="l33.28">     parser.parseString(str, null, listener);</span>
<a href="#l33.29"></a><span id="l33.29">   },</span>
<a href="#l33.30"></a><span id="l33.30"> </span>
<a href="#l33.31"></a><span id="l33.31">   writeICS() {</span>
<a href="#l33.32"></a><span id="l33.32">     cal.LOG(&quot;[calICSCalendar] Commencing write of ICS Calendar &quot; + this.name);</span>
<a href="#l33.33"></a><span id="l33.33">     this.lock();</span>
<a href="#l33.34"></a><span id="l33.34">     try {</span>
<a href="#l33.35"></a><span id="l33.35">       if (!this.mUri) {</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineminus">-        throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l33.38"></a><span id="l33.38">       }</span>
<a href="#l33.39"></a><span id="l33.39">       // makeBackup will call doWriteICS</span>
<a href="#l33.40"></a><span id="l33.40">       this.makeBackup(this.doWriteICS);</span>
<a href="#l33.41"></a><span id="l33.41">     } catch (exc) {</span>
<a href="#l33.42"></a><span id="l33.42">       this.unlock(calIErrors.MODIFICATION_FAILED);</span>
<a href="#l33.43"></a><span id="l33.43">       throw exc;</span>
<a href="#l33.44"></a><span id="l33.44">     }</span>
<a href="#l33.45"></a><span id="l33.45">   },</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineat">@@ -1057,17 +1057,17 @@ httpHooks.prototype = {</span>
<a href="#l33.47"></a><span id="l33.47">   // nsIProgressEventSink</span>
<a href="#l33.48"></a><span id="l33.48">   onProgress(aRequest, aProgress, aProgressMax) {},</span>
<a href="#l33.49"></a><span id="l33.49">   onStatus(aRequest, aStatus, aStatusArg) {},</span>
<a href="#l33.50"></a><span id="l33.50"> </span>
<a href="#l33.51"></a><span id="l33.51">   getInterface(aIid) {</span>
<a href="#l33.52"></a><span id="l33.52">     if (aIid.equals(Ci.nsIProgressEventSink)) {</span>
<a href="#l33.53"></a><span id="l33.53">       return this;</span>
<a href="#l33.54"></a><span id="l33.54">     }</span>
<a href="#l33.55"></a><span id="l33.55" class="difflineminus">-    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l33.56"></a><span id="l33.56" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l33.57"></a><span id="l33.57">   },</span>
<a href="#l33.58"></a><span id="l33.58"> };</span>
<a href="#l33.59"></a><span id="l33.59"> </span>
<a href="#l33.60"></a><span id="l33.60"> function fileHooks(calendar) {</span>
<a href="#l33.61"></a><span id="l33.61">   this.mCalendar = calendar;</span>
<a href="#l33.62"></a><span id="l33.62"> }</span>
<a href="#l33.63"></a><span id="l33.63"> </span>
<a href="#l33.64"></a><span id="l33.64"> fileHooks.prototype = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/calendar/providers/memory/CalMemoryCalendar.jsm</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/calendar/providers/memory/CalMemoryCalendar.jsm</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -50,17 +50,17 @@ CalMemoryCalendar.prototype = {</span>
<a href="#l34.4"></a><span id="l34.4">     return null;</span>
<a href="#l34.5"></a><span id="l34.5">   },</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">   get displayName() {</span>
<a href="#l34.8"></a><span id="l34.8">     return cal.l10n.getCalString(&quot;memoryName&quot;);</span>
<a href="#l34.9"></a><span id="l34.9">   },</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11">   createCalendar() {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l34.14"></a><span id="l34.14">   },</span>
<a href="#l34.15"></a><span id="l34.15"> </span>
<a href="#l34.16"></a><span id="l34.16">   deleteCalendar(calendar, listener) {</span>
<a href="#l34.17"></a><span id="l34.17">     calendar = calendar.wrappedJSObject;</span>
<a href="#l34.18"></a><span id="l34.18">     calendar.mItems = {};</span>
<a href="#l34.19"></a><span id="l34.19">     calendar.mMetaData = new Map();</span>
<a href="#l34.20"></a><span id="l34.20"> </span>
<a href="#l34.21"></a><span id="l34.21">     try {</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineat">@@ -169,17 +169,17 @@ CalMemoryCalendar.prototype = {</span>
<a href="#l34.23"></a><span id="l34.23">   },</span>
<a href="#l34.24"></a><span id="l34.24"> </span>
<a href="#l34.25"></a><span id="l34.25">   // void modifyItem( in calIItemBase aNewItem, in calIItemBase aOldItem, in calIOperationListener aListener );</span>
<a href="#l34.26"></a><span id="l34.26">   modifyItem(aNewItem, aOldItem, aListener) {</span>
<a href="#l34.27"></a><span id="l34.27">     if (this.readOnly) {</span>
<a href="#l34.28"></a><span id="l34.28">       throw Ci.calIErrors.CAL_IS_READONLY;</span>
<a href="#l34.29"></a><span id="l34.29">     }</span>
<a href="#l34.30"></a><span id="l34.30">     if (!aNewItem) {</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l34.33"></a><span id="l34.33">     }</span>
<a href="#l34.34"></a><span id="l34.34"> </span>
<a href="#l34.35"></a><span id="l34.35">     let self = this;</span>
<a href="#l34.36"></a><span id="l34.36">     function reportError(errStr, errId) {</span>
<a href="#l34.37"></a><span id="l34.37">       self.notifyOperationComplete(</span>
<a href="#l34.38"></a><span id="l34.38">         aListener,</span>
<a href="#l34.39"></a><span id="l34.39">         errId ? errId : Cr.NS_ERROR_FAILURE,</span>
<a href="#l34.40"></a><span id="l34.40">         Ci.calIOperationListener.MODIFY,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/calendar/providers/storage/CalStorageCalendar.jsm</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/calendar/providers/storage/CalStorageCalendar.jsm</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -58,17 +58,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.4"></a><span id="l35.4">     return null;</span>
<a href="#l35.5"></a><span id="l35.5">   },</span>
<a href="#l35.6"></a><span id="l35.6"> </span>
<a href="#l35.7"></a><span id="l35.7">   get displayName() {</span>
<a href="#l35.8"></a><span id="l35.8">     return cal.l10n.getCalString(&quot;storageName&quot;);</span>
<a href="#l35.9"></a><span id="l35.9">   },</span>
<a href="#l35.10"></a><span id="l35.10"> </span>
<a href="#l35.11"></a><span id="l35.11">   createCalendar() {</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l35.14"></a><span id="l35.14">   },</span>
<a href="#l35.15"></a><span id="l35.15"> </span>
<a href="#l35.16"></a><span id="l35.16">   async deleteCalendar(aCalendar, listener) {</span>
<a href="#l35.17"></a><span id="l35.17">     let stmts = [];</span>
<a href="#l35.18"></a><span id="l35.18">     aCalendar = aCalendar.wrappedJSObject;</span>
<a href="#l35.19"></a><span id="l35.19"> </span>
<a href="#l35.20"></a><span id="l35.20">     if (this.mDeleteEventExtras) {</span>
<a href="#l35.21"></a><span id="l35.21">       for (let stmt of this.mDeleteEventExtras) {</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -144,17 +144,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.23"></a><span id="l35.23"> </span>
<a href="#l35.24"></a><span id="l35.24">   // attribute nsIURI uri;</span>
<a href="#l35.25"></a><span id="l35.25">   get uri() {</span>
<a href="#l35.26"></a><span id="l35.26">     return this.__proto__.__proto__.__lookupGetter__(&quot;uri&quot;).call(this);</span>
<a href="#l35.27"></a><span id="l35.27">   },</span>
<a href="#l35.28"></a><span id="l35.28">   set uri(aUri) {</span>
<a href="#l35.29"></a><span id="l35.29">     // We can only load once</span>
<a href="#l35.30"></a><span id="l35.30">     if (this.uri) {</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l35.33"></a><span id="l35.33">     }</span>
<a href="#l35.34"></a><span id="l35.34"> </span>
<a href="#l35.35"></a><span id="l35.35">     let uri = this.__proto__.__proto__.__lookupSetter__(&quot;uri&quot;).call(this, aUri);</span>
<a href="#l35.36"></a><span id="l35.36"> </span>
<a href="#l35.37"></a><span id="l35.37">     if (!this.mDB &amp;&amp; this.uri &amp;&amp; this.id) {</span>
<a href="#l35.38"></a><span id="l35.38">       // Prepare the database as soon as we have an id and an uri.</span>
<a href="#l35.39"></a><span id="l35.39">       this.prepareInitDB();</span>
<a href="#l35.40"></a><span id="l35.40">     }</span>
<a href="#l35.41"></a><span id="l35.41" class="difflineat">@@ -393,17 +393,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.42"></a><span id="l35.42">         Ci.calIErrors.CAL_IS_READONLY,</span>
<a href="#l35.43"></a><span id="l35.43">         Ci.calIOperationListener.MODIFY,</span>
<a href="#l35.44"></a><span id="l35.44">         null,</span>
<a href="#l35.45"></a><span id="l35.45">         &quot;Calendar is readonly&quot;</span>
<a href="#l35.46"></a><span id="l35.46">       );</span>
<a href="#l35.47"></a><span id="l35.47">       return null;</span>
<a href="#l35.48"></a><span id="l35.48">     }</span>
<a href="#l35.49"></a><span id="l35.49">     if (!aNewItem) {</span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l35.52"></a><span id="l35.52">     }</span>
<a href="#l35.53"></a><span id="l35.53"> </span>
<a href="#l35.54"></a><span id="l35.54">     let self = this;</span>
<a href="#l35.55"></a><span id="l35.55">     function reportError(errStr, errId) {</span>
<a href="#l35.56"></a><span id="l35.56">       self.notifyOperationComplete(</span>
<a href="#l35.57"></a><span id="l35.57">         aListener,</span>
<a href="#l35.58"></a><span id="l35.58">         errId ? errId : Cr.NS_ERROR_FAILURE,</span>
<a href="#l35.59"></a><span id="l35.59">         Ci.calIOperationListener.MODIFY,</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineat">@@ -1955,17 +1955,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.61"></a><span id="l35.61">           &quot;Error getting extra properties for item '&quot; + item.title + &quot;' (&quot; + item.id + &quot;)!&quot;,</span>
<a href="#l35.62"></a><span id="l35.62">           e</span>
<a href="#l35.63"></a><span id="l35.63">         );</span>
<a href="#l35.64"></a><span id="l35.64">       }</span>
<a href="#l35.65"></a><span id="l35.65">     }</span>
<a href="#l35.66"></a><span id="l35.66"> </span>
<a href="#l35.67"></a><span id="l35.67">     if (flags &amp; CAL_ITEM_FLAG.HAS_RECURRENCE) {</span>
<a href="#l35.68"></a><span id="l35.68">       if (item.recurrenceId) {</span>
<a href="#l35.69"></a><span id="l35.69" class="difflineminus">-        throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l35.70"></a><span id="l35.70" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l35.71"></a><span id="l35.71">       }</span>
<a href="#l35.72"></a><span id="l35.72"> </span>
<a href="#l35.73"></a><span id="l35.73">       let recInfo = cal.createRecurrenceInfo(item);</span>
<a href="#l35.74"></a><span id="l35.74">       item.recurrenceInfo = recInfo;</span>
<a href="#l35.75"></a><span id="l35.75"> </span>
<a href="#l35.76"></a><span id="l35.76">       try {</span>
<a href="#l35.77"></a><span id="l35.77">         this.prepareStatement(this.mSelectRecurrenceForItem);</span>
<a href="#l35.78"></a><span id="l35.78">         this.mSelectRecurrenceForItem.params.item_id = item.id;</span>
<a href="#l35.79"></a><span id="l35.79" class="difflineat">@@ -1981,17 +1981,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.80"></a><span id="l35.80">       }</span>
<a href="#l35.81"></a><span id="l35.81">     }</span>
<a href="#l35.82"></a><span id="l35.82"> </span>
<a href="#l35.83"></a><span id="l35.83">     if (flags &amp; CAL_ITEM_FLAG.HAS_EXCEPTIONS) {</span>
<a href="#l35.84"></a><span id="l35.84">       // it's safe that we don't run into this branch again for exceptions</span>
<a href="#l35.85"></a><span id="l35.85">       // (getAdditionalDataForItem-&gt;get[Event|Todo]FromRow-&gt;getAdditionalDataForItem):</span>
<a href="#l35.86"></a><span id="l35.86">       // every excepton has a recurrenceId and isn't flagged as CAL_ITEM_FLAG.HAS_EXCEPTIONS</span>
<a href="#l35.87"></a><span id="l35.87">       if (item.recurrenceId) {</span>
<a href="#l35.88"></a><span id="l35.88" class="difflineminus">-        throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l35.89"></a><span id="l35.89" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l35.90"></a><span id="l35.90">       }</span>
<a href="#l35.91"></a><span id="l35.91"> </span>
<a href="#l35.92"></a><span id="l35.92">       let rec = item.recurrenceInfo;</span>
<a href="#l35.93"></a><span id="l35.93"> </span>
<a href="#l35.94"></a><span id="l35.94">       if (cal.item.isEvent(item)) {</span>
<a href="#l35.95"></a><span id="l35.95">         this.mSelectEventExceptions.params.id = item.id;</span>
<a href="#l35.96"></a><span id="l35.96">         this.prepareStatement(this.mSelectEventExceptions);</span>
<a href="#l35.97"></a><span id="l35.97">         try {</span>
<a href="#l35.98"></a><span id="l35.98" class="difflineat">@@ -2015,17 +2015,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.99"></a><span id="l35.99">           });</span>
<a href="#l35.100"></a><span id="l35.100">         } catch (e) {</span>
<a href="#l35.101"></a><span id="l35.101">           this.logError(</span>
<a href="#l35.102"></a><span id="l35.102">             &quot;Error getting exceptions for task '&quot; + item.title + &quot;' (&quot; + item.id + &quot;)!&quot;,</span>
<a href="#l35.103"></a><span id="l35.103">             e</span>
<a href="#l35.104"></a><span id="l35.104">           );</span>
<a href="#l35.105"></a><span id="l35.105">         }</span>
<a href="#l35.106"></a><span id="l35.106">       } else {</span>
<a href="#l35.107"></a><span id="l35.107" class="difflineminus">-        throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l35.108"></a><span id="l35.108" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l35.109"></a><span id="l35.109">       }</span>
<a href="#l35.110"></a><span id="l35.110">     }</span>
<a href="#l35.111"></a><span id="l35.111"> </span>
<a href="#l35.112"></a><span id="l35.112">     if (flags &amp; CAL_ITEM_FLAG.HAS_ATTACHMENTS) {</span>
<a href="#l35.113"></a><span id="l35.113">       let selectAttachment = this.mSelectAttachmentsForItem;</span>
<a href="#l35.114"></a><span id="l35.114">       if (item.recurrenceId != null) {</span>
<a href="#l35.115"></a><span id="l35.115">         selectAttachment = this.mSelectAttachmentsForItemWithRecurrenceId;</span>
<a href="#l35.116"></a><span id="l35.116">         this.setDateParamHelper(selectAttachment, &quot;recurrence_id&quot;, item.recurrenceId);</span>
<a href="#l35.117"></a><span id="l35.117" class="difflineat">@@ -2201,17 +2201,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.118"></a><span id="l35.118">     flags |= this.prepareRelations(stmts, item, olditem);</span>
<a href="#l35.119"></a><span id="l35.119">     flags |= this.prepareAlarms(stmts, item, olditem);</span>
<a href="#l35.120"></a><span id="l35.120"> </span>
<a href="#l35.121"></a><span id="l35.121">     if (cal.item.isEvent(item)) {</span>
<a href="#l35.122"></a><span id="l35.122">       this.prepareEvent(stmts, item, olditem, flags);</span>
<a href="#l35.123"></a><span id="l35.123">     } else if (cal.item.isToDo(item)) {</span>
<a href="#l35.124"></a><span id="l35.124">       this.prepareTodo(stmts, item, olditem, flags);</span>
<a href="#l35.125"></a><span id="l35.125">     } else {</span>
<a href="#l35.126"></a><span id="l35.126" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l35.127"></a><span id="l35.127" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l35.128"></a><span id="l35.128">     }</span>
<a href="#l35.129"></a><span id="l35.129">   },</span>
<a href="#l35.130"></a><span id="l35.130"> </span>
<a href="#l35.131"></a><span id="l35.131">   prepareEvent(stmts, item, olditem, flags) {</span>
<a href="#l35.132"></a><span id="l35.132">     let array = this.prepareAsyncStatement(stmts, this.mInsertEvent);</span>
<a href="#l35.133"></a><span id="l35.133">     let params = this.prepareAsyncParams(array);</span>
<a href="#l35.134"></a><span id="l35.134"> </span>
<a href="#l35.135"></a><span id="l35.135">     this.setupItemBaseParams(item, olditem, params);</span>
<a href="#l35.136"></a><span id="l35.136" class="difflineat">@@ -2359,17 +2359,17 @@ CalStorageCalendar.prototype = {</span>
<a href="#l35.137"></a><span id="l35.137">         flags |= CAL_ITEM_FLAG.HAS_EXCEPTIONS;</span>
<a href="#l35.138"></a><span id="l35.138"> </span>
<a href="#l35.139"></a><span id="l35.139">         // we need to serialize each exid as a separate</span>
<a href="#l35.140"></a><span id="l35.140">         // event/todo; setupItemBase will handle</span>
<a href="#l35.141"></a><span id="l35.141">         // writing the recurrenceId for us</span>
<a href="#l35.142"></a><span id="l35.142">         for (let exid of exceptions) {</span>
<a href="#l35.143"></a><span id="l35.143">           let ex = rec.getExceptionFor(exid);</span>
<a href="#l35.144"></a><span id="l35.144">           if (!ex) {</span>
<a href="#l35.145"></a><span id="l35.145" class="difflineminus">-            throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l35.146"></a><span id="l35.146" class="difflineplus">+            throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l35.147"></a><span id="l35.147">           }</span>
<a href="#l35.148"></a><span id="l35.148">           this.prepareItem(stmts, ex, null);</span>
<a href="#l35.149"></a><span id="l35.149">         }</span>
<a href="#l35.150"></a><span id="l35.150">       }</span>
<a href="#l35.151"></a><span id="l35.151">     } else if (item.recurrenceId &amp;&amp; item.recurrenceId.isDate) {</span>
<a href="#l35.152"></a><span id="l35.152">       flags |= CAL_ITEM_FLAG.RECURRENCE_ID_ALLDAY;</span>
<a href="#l35.153"></a><span id="l35.153">     }</span>
<a href="#l35.154"></a><span id="l35.154"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/calendar/resources/content/publish.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/calendar/resources/content/publish.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -201,17 +201,17 @@ function publishItemArray(aItemArray, aP</span>
<a href="#l36.4"></a><span id="l36.4"> var notificationCallbacks = {</span>
<a href="#l36.5"></a><span id="l36.5">   // nsIInterfaceRequestor interface</span>
<a href="#l36.6"></a><span id="l36.6">   getInterface(iid, instance) {</span>
<a href="#l36.7"></a><span id="l36.7">     if (iid.equals(Ci.nsIAuthPrompt)) {</span>
<a href="#l36.8"></a><span id="l36.8">       // use the window watcher service to get a nsIAuthPrompt impl</span>
<a href="#l36.9"></a><span id="l36.9">       return Services.ww.getNewAuthPrompter(null);</span>
<a href="#l36.10"></a><span id="l36.10">     }</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l36.14"></a><span id="l36.14">   },</span>
<a href="#l36.15"></a><span id="l36.15"> };</span>
<a href="#l36.16"></a><span id="l36.16"> </span>
<a href="#l36.17"></a><span id="l36.17"> /**</span>
<a href="#l36.18"></a><span id="l36.18">  * Listener object to pass to `channel.asyncOpen()`. A reference to the current dialog window</span>
<a href="#l36.19"></a><span id="l36.19">  * passed to the constructor provides access to the dialog once the request is done.</span>
<a href="#l36.20"></a><span id="l36.20">  * @implements {nsIStreamListener}</span>
<a href="#l36.21"></a><span id="l36.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/chat/components/src/imAccounts.jsm</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/chat/components/src/imAccounts.jsm</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -114,20 +114,20 @@ UnknownProtocol.prototype = {</span>
<a href="#l37.4"></a><span id="l37.4">   getUsernameSplit() {</span>
<a href="#l37.5"></a><span id="l37.5">     return EmptyEnumerator;</span>
<a href="#l37.6"></a><span id="l37.6">   },</span>
<a href="#l37.7"></a><span id="l37.7">   get usernameEmptyText() {</span>
<a href="#l37.8"></a><span id="l37.8">     return &quot;&quot;;</span>
<a href="#l37.9"></a><span id="l37.9">   },</span>
<a href="#l37.10"></a><span id="l37.10"> </span>
<a href="#l37.11"></a><span id="l37.11">   getAccount(aKey, aName) {</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l37.14"></a><span id="l37.14">   },</span>
<a href="#l37.15"></a><span id="l37.15">   accountExists() {</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l37.17"></a><span id="l37.17" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l37.18"></a><span id="l37.18">   },</span>
<a href="#l37.19"></a><span id="l37.19"> </span>
<a href="#l37.20"></a><span id="l37.20">   // false seems an acceptable default for all options</span>
<a href="#l37.21"></a><span id="l37.21">   // (they should never be called anyway).</span>
<a href="#l37.22"></a><span id="l37.22">   get uniqueChatName() {</span>
<a href="#l37.23"></a><span id="l37.23">     return false;</span>
<a href="#l37.24"></a><span id="l37.24">   },</span>
<a href="#l37.25"></a><span id="l37.25">   get chatHasTopic() {</span>
<a href="#l37.26"></a><span id="l37.26" class="difflineat">@@ -170,17 +170,17 @@ function UnknownAccountBuddy(aAccount, a</span>
<a href="#l37.27"></a><span id="l37.27"> }</span>
<a href="#l37.28"></a><span id="l37.28"> UnknownAccountBuddy.prototype = GenericAccountBuddyPrototype;</span>
<a href="#l37.29"></a><span id="l37.29"> </span>
<a href="#l37.30"></a><span id="l37.30"> // aName and aPrplId are provided as parameter only if this is a new</span>
<a href="#l37.31"></a><span id="l37.31"> // account that doesn't exist in the preferences. In this case, these</span>
<a href="#l37.32"></a><span id="l37.32"> // 2 values should be stored.</span>
<a href="#l37.33"></a><span id="l37.33"> function imAccount(aKey, aName, aPrplId) {</span>
<a href="#l37.34"></a><span id="l37.34">   if (!aKey.startsWith(kAccountKeyPrefix)) {</span>
<a href="#l37.35"></a><span id="l37.35" class="difflineminus">-    throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l37.36"></a><span id="l37.36" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l37.37"></a><span id="l37.37">   }</span>
<a href="#l37.38"></a><span id="l37.38"> </span>
<a href="#l37.39"></a><span id="l37.39">   this.id = aKey;</span>
<a href="#l37.40"></a><span id="l37.40">   this.numericId = parseInt(aKey.substr(kAccountKeyPrefix.length));</span>
<a href="#l37.41"></a><span id="l37.41">   gAccountsService._keepAccount(this);</span>
<a href="#l37.42"></a><span id="l37.42">   this.prefBranch = Services.prefs.getBranch(kPrefAccountPrefix + aKey + &quot;.&quot;);</span>
<a href="#l37.43"></a><span id="l37.43"> </span>
<a href="#l37.44"></a><span id="l37.44">   if (aName) {</span>
<a href="#l37.45"></a><span id="l37.45" class="difflineat">@@ -360,17 +360,17 @@ imAccount.prototype = {</span>
<a href="#l37.46"></a><span id="l37.46">         // disconnecting, it was not reconnected automatically at that point,</span>
<a href="#l37.47"></a><span id="l37.47">         // so we must do it now. (This happens for protocols like IRC where</span>
<a href="#l37.48"></a><span id="l37.48">         // disconnection is not immediate.)</span>
<a href="#l37.49"></a><span id="l37.49">         this._sendNotification(aTopic, aData);</span>
<a href="#l37.50"></a><span id="l37.50">         this.connect();</span>
<a href="#l37.51"></a><span id="l37.51">         return;</span>
<a href="#l37.52"></a><span id="l37.52">       }</span>
<a href="#l37.53"></a><span id="l37.53">     } else {</span>
<a href="#l37.54"></a><span id="l37.54" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l37.55"></a><span id="l37.55" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l37.56"></a><span id="l37.56">     }</span>
<a href="#l37.57"></a><span id="l37.57">     this._sendNotification(aTopic, aData);</span>
<a href="#l37.58"></a><span id="l37.58">   },</span>
<a href="#l37.59"></a><span id="l37.59"> </span>
<a href="#l37.60"></a><span id="l37.60">   _debugMessages: null,</span>
<a href="#l37.61"></a><span id="l37.61">   _omittedDebugMessages: 0,</span>
<a href="#l37.62"></a><span id="l37.62">   _debugMessagesBeforeError: null,</span>
<a href="#l37.63"></a><span id="l37.63">   _omittedDebugMessagesBeforeError: 0,</span>
<a href="#l37.64"></a><span id="l37.64" class="difflineat">@@ -792,21 +792,21 @@ imAccount.prototype = {</span>
<a href="#l37.65"></a><span id="l37.65">     delete this.protocol;</span>
<a href="#l37.66"></a><span id="l37.66">     delete this.prplAccount;</span>
<a href="#l37.67"></a><span id="l37.67">   },</span>
<a href="#l37.68"></a><span id="l37.68"> </span>
<a href="#l37.69"></a><span id="l37.69">   get _ensurePrplAccount() {</span>
<a href="#l37.70"></a><span id="l37.70">     if (this.prplAccount) {</span>
<a href="#l37.71"></a><span id="l37.71">       return this.prplAccount;</span>
<a href="#l37.72"></a><span id="l37.72">     }</span>
<a href="#l37.73"></a><span id="l37.73" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l37.74"></a><span id="l37.74" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l37.75"></a><span id="l37.75">   },</span>
<a href="#l37.76"></a><span id="l37.76">   connect() {</span>
<a href="#l37.77"></a><span id="l37.77">     if (!this.prplAccount) {</span>
<a href="#l37.78"></a><span id="l37.78" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l37.79"></a><span id="l37.79" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l37.80"></a><span id="l37.80">     }</span>
<a href="#l37.81"></a><span id="l37.81"> </span>
<a href="#l37.82"></a><span id="l37.82">     if (this._passwordRequired) {</span>
<a href="#l37.83"></a><span id="l37.83">       // If the previous connection attempt failed because we have a wrong password,</span>
<a href="#l37.84"></a><span id="l37.84">       // clear the passwor cache so that if there's no password in the password</span>
<a href="#l37.85"></a><span id="l37.85">       // manager the user gets prompted again.</span>
<a href="#l37.86"></a><span id="l37.86">       if (</span>
<a href="#l37.87"></a><span id="l37.87">         this.connectionErrorReason ==</span>
<a href="#l37.88"></a><span id="l37.88" class="difflineat">@@ -903,17 +903,17 @@ imAccount.prototype = {</span>
<a href="#l37.89"></a><span id="l37.89">       clearTimeout(this._reconnectTimer);</span>
<a href="#l37.90"></a><span id="l37.90">       delete this._reconnectTimer;</span>
<a href="#l37.91"></a><span id="l37.91">     }</span>
<a href="#l37.92"></a><span id="l37.92">     delete this.reconnectAttempt;</span>
<a href="#l37.93"></a><span id="l37.93">     delete this.timeOfNextReconnect;</span>
<a href="#l37.94"></a><span id="l37.94">   },</span>
<a href="#l37.95"></a><span id="l37.95">   cancelReconnection() {</span>
<a href="#l37.96"></a><span id="l37.96">     if (!this.disconnected) {</span>
<a href="#l37.97"></a><span id="l37.97" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l37.98"></a><span id="l37.98" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l37.99"></a><span id="l37.99">     }</span>
<a href="#l37.100"></a><span id="l37.100"> </span>
<a href="#l37.101"></a><span id="l37.101">     // Ensure we don't keep a status observer that could re-enable the</span>
<a href="#l37.102"></a><span id="l37.102">     // auto-reconnect timers.</span>
<a href="#l37.103"></a><span id="l37.103">     this.disconnect();</span>
<a href="#l37.104"></a><span id="l37.104"> </span>
<a href="#l37.105"></a><span id="l37.105">     this._cancelReconnection();</span>
<a href="#l37.106"></a><span id="l37.106">   },</span>
<a href="#l37.107"></a><span id="l37.107" class="difflineat">@@ -1013,17 +1013,17 @@ AccountsService.prototype = {</span>
<a href="#l37.108"></a><span id="l37.108">     gConvertingOldPasswords = Services.prefs.getBoolPref(</span>
<a href="#l37.109"></a><span id="l37.109">       kPrefConvertOldPasswords</span>
<a href="#l37.110"></a><span id="l37.110">     );</span>
<a href="#l37.111"></a><span id="l37.111">     let accountList = this._accountList;</span>
<a href="#l37.112"></a><span id="l37.112">     for (let account of accountList ? accountList.split(&quot;,&quot;) : []) {</span>
<a href="#l37.113"></a><span id="l37.113">       try {</span>
<a href="#l37.114"></a><span id="l37.114">         account.trim();</span>
<a href="#l37.115"></a><span id="l37.115">         if (!account) {</span>
<a href="#l37.116"></a><span id="l37.116" class="difflineminus">-          throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l37.117"></a><span id="l37.117" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l37.118"></a><span id="l37.118">         }</span>
<a href="#l37.119"></a><span id="l37.119">         new imAccount(account);</span>
<a href="#l37.120"></a><span id="l37.120">       } catch (e) {</span>
<a href="#l37.121"></a><span id="l37.121">         Cu.reportError(e);</span>
<a href="#l37.122"></a><span id="l37.122">         dump(e + &quot; &quot; + e.toSource() + &quot;\n&quot;);</span>
<a href="#l37.123"></a><span id="l37.123">       }</span>
<a href="#l37.124"></a><span id="l37.124">     }</span>
<a href="#l37.125"></a><span id="l37.125">     // If the user has canceled a master password prompt, we haven't</span>
<a href="#l37.126"></a><span id="l37.126" class="difflineat">@@ -1205,17 +1205,17 @@ AccountsService.prototype = {</span>
<a href="#l37.127"></a><span id="l37.127">     for (let account of this._accounts) {</span>
<a href="#l37.128"></a><span id="l37.128">       account._checkIfPasswordStillMissing();</span>
<a href="#l37.129"></a><span id="l37.129">     }</span>
<a href="#l37.130"></a><span id="l37.130">     delete this._checkingIfPasswordStillMissing;</span>
<a href="#l37.131"></a><span id="l37.131">   },</span>
<a href="#l37.132"></a><span id="l37.132"> </span>
<a href="#l37.133"></a><span id="l37.133">   getAccountById(aAccountId) {</span>
<a href="#l37.134"></a><span id="l37.134">     if (!aAccountId.startsWith(kAccountKeyPrefix)) {</span>
<a href="#l37.135"></a><span id="l37.135" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l37.136"></a><span id="l37.136" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l37.137"></a><span id="l37.137">     }</span>
<a href="#l37.138"></a><span id="l37.138"> </span>
<a href="#l37.139"></a><span id="l37.139">     let id = parseInt(aAccountId.substr(kAccountKeyPrefix.length));</span>
<a href="#l37.140"></a><span id="l37.140">     return this.getAccountByNumericId(id);</span>
<a href="#l37.141"></a><span id="l37.141">   },</span>
<a href="#l37.142"></a><span id="l37.142"> </span>
<a href="#l37.143"></a><span id="l37.143">   _keepAccount(aAccount) {</span>
<a href="#l37.144"></a><span id="l37.144">     this._accounts.push(aAccount);</span>
<a href="#l37.145"></a><span id="l37.145" class="difflineat">@@ -1227,21 +1227,21 @@ AccountsService.prototype = {</span>
<a href="#l37.146"></a><span id="l37.146">   getAccounts() {</span>
<a href="#l37.147"></a><span id="l37.147">     return new nsSimpleEnumerator(this._accounts);</span>
<a href="#l37.148"></a><span id="l37.148">   },</span>
<a href="#l37.149"></a><span id="l37.149"> </span>
<a href="#l37.150"></a><span id="l37.150">   createAccount(aName, aPrpl) {</span>
<a href="#l37.151"></a><span id="l37.151">     // Ensure an account with the same name and protocol doesn't already exist.</span>
<a href="#l37.152"></a><span id="l37.152">     let prpl = Services.core.getProtocolById(aPrpl);</span>
<a href="#l37.153"></a><span id="l37.153">     if (!prpl) {</span>
<a href="#l37.154"></a><span id="l37.154" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l37.155"></a><span id="l37.155" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l37.156"></a><span id="l37.156">     }</span>
<a href="#l37.157"></a><span id="l37.157">     if (prpl.accountExists(aName)) {</span>
<a href="#l37.158"></a><span id="l37.158">       Cu.reportError(&quot;Attempted to create a duplicate account!&quot;);</span>
<a href="#l37.159"></a><span id="l37.159" class="difflineminus">-      throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l37.160"></a><span id="l37.160" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l37.161"></a><span id="l37.161">     }</span>
<a href="#l37.162"></a><span id="l37.162"> </span>
<a href="#l37.163"></a><span id="l37.163">     /* First get a unique id for the new account. */</span>
<a href="#l37.164"></a><span id="l37.164">     let id;</span>
<a href="#l37.165"></a><span id="l37.165">     for (id = 1; ; ++id) {</span>
<a href="#l37.166"></a><span id="l37.166">       if (this._accountsById.hasOwnProperty(id)) {</span>
<a href="#l37.167"></a><span id="l37.167">         continue;</span>
<a href="#l37.168"></a><span id="l37.168">       }</span>
<a href="#l37.169"></a><span id="l37.169" class="difflineat">@@ -1269,22 +1269,22 @@ AccountsService.prototype = {</span>
<a href="#l37.170"></a><span id="l37.170"> </span>
<a href="#l37.171"></a><span id="l37.171">     Services.obs.notifyObservers(account, &quot;account-added&quot;);</span>
<a href="#l37.172"></a><span id="l37.172">     return account;</span>
<a href="#l37.173"></a><span id="l37.173">   },</span>
<a href="#l37.174"></a><span id="l37.174"> </span>
<a href="#l37.175"></a><span id="l37.175">   deleteAccount(aAccountId) {</span>
<a href="#l37.176"></a><span id="l37.176">     let account = this.getAccountById(aAccountId);</span>
<a href="#l37.177"></a><span id="l37.177">     if (!account) {</span>
<a href="#l37.178"></a><span id="l37.178" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l37.179"></a><span id="l37.179" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l37.180"></a><span id="l37.180">     }</span>
<a href="#l37.181"></a><span id="l37.181"> </span>
<a href="#l37.182"></a><span id="l37.182">     let index = this._accounts.indexOf(account);</span>
<a href="#l37.183"></a><span id="l37.183">     if (index == -1) {</span>
<a href="#l37.184"></a><span id="l37.184" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l37.185"></a><span id="l37.185" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l37.186"></a><span id="l37.186">     }</span>
<a href="#l37.187"></a><span id="l37.187"> </span>
<a href="#l37.188"></a><span id="l37.188">     let id = account.numericId;</span>
<a href="#l37.189"></a><span id="l37.189">     account.remove();</span>
<a href="#l37.190"></a><span id="l37.190">     this._accounts.splice(index, 1);</span>
<a href="#l37.191"></a><span id="l37.191">     delete this._accountsById[id];</span>
<a href="#l37.192"></a><span id="l37.192">     Services.obs.notifyObservers(account, &quot;account-removed&quot;);</span>
<a href="#l37.193"></a><span id="l37.193"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/chat/components/src/imCommands.jsm</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/chat/components/src/imCommands.jsm</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -23,17 +23,17 @@ CommandsService.prototype = {</span>
<a href="#l38.4"></a><span id="l38.4">     this.registerCommand({</span>
<a href="#l38.5"></a><span id="l38.5">       name: &quot;say&quot;,</span>
<a href="#l38.6"></a><span id="l38.6">       get helpString() {</span>
<a href="#l38.7"></a><span id="l38.7">         return _(&quot;sayHelpString&quot;);</span>
<a href="#l38.8"></a><span id="l38.8">       },</span>
<a href="#l38.9"></a><span id="l38.9">       usageContext: Ci.imICommand.CMD_CONTEXT_ALL,</span>
<a href="#l38.10"></a><span id="l38.10">       priority: Ci.imICommand.CMD_PRIORITY_HIGH,</span>
<a href="#l38.11"></a><span id="l38.11">       run(aMsg, aConv) {</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-        throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l38.14"></a><span id="l38.14">       },</span>
<a href="#l38.15"></a><span id="l38.15">     });</span>
<a href="#l38.16"></a><span id="l38.16"> </span>
<a href="#l38.17"></a><span id="l38.17">     this.registerCommand({</span>
<a href="#l38.18"></a><span id="l38.18">       name: &quot;raw&quot;,</span>
<a href="#l38.19"></a><span id="l38.19">       get helpString() {</span>
<a href="#l38.20"></a><span id="l38.20">         return _(&quot;rawHelpString&quot;);</span>
<a href="#l38.21"></a><span id="l38.21">       },</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -137,17 +137,17 @@ CommandsService.prototype = {</span>
<a href="#l38.23"></a><span id="l38.23">   },</span>
<a href="#l38.24"></a><span id="l38.24">   unInitCommands() {</span>
<a href="#l38.25"></a><span id="l38.25">     delete this._commands;</span>
<a href="#l38.26"></a><span id="l38.26">   },</span>
<a href="#l38.27"></a><span id="l38.27"> </span>
<a href="#l38.28"></a><span id="l38.28">   registerCommand(aCommand, aPrplId) {</span>
<a href="#l38.29"></a><span id="l38.29">     let name = aCommand.name;</span>
<a href="#l38.30"></a><span id="l38.30">     if (!name) {</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l38.33"></a><span id="l38.33">     }</span>
<a href="#l38.34"></a><span id="l38.34"> </span>
<a href="#l38.35"></a><span id="l38.35">     if (!this._commands.hasOwnProperty(name)) {</span>
<a href="#l38.36"></a><span id="l38.36">       this._commands[name] = {};</span>
<a href="#l38.37"></a><span id="l38.37">     }</span>
<a href="#l38.38"></a><span id="l38.38">     this._commands[name][aPrplId || &quot;&quot;] = aCommand;</span>
<a href="#l38.39"></a><span id="l38.39">   },</span>
<a href="#l38.40"></a><span id="l38.40">   unregisterCommand(aCommandName, aPrplId) {</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineat">@@ -253,17 +253,17 @@ CommandsService.prototype = {</span>
<a href="#l38.42"></a><span id="l38.42">       cmdArray = matches;</span>
<a href="#l38.43"></a><span id="l38.43">     }</span>
<a href="#l38.44"></a><span id="l38.44"> </span>
<a href="#l38.45"></a><span id="l38.45">     // Sort the matching commands by priority before returning the array.</span>
<a href="#l38.46"></a><span id="l38.46">     return cmdArray.sort((a, b) =&gt; b.priority - a.priority);</span>
<a href="#l38.47"></a><span id="l38.47">   },</span>
<a href="#l38.48"></a><span id="l38.48">   executeCommand(aMessage, aConversation, aReturnedConv) {</span>
<a href="#l38.49"></a><span id="l38.49">     if (!aMessage) {</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l38.52"></a><span id="l38.52">     }</span>
<a href="#l38.53"></a><span id="l38.53"> </span>
<a href="#l38.54"></a><span id="l38.54">     let matchResult;</span>
<a href="#l38.55"></a><span id="l38.55">     if (</span>
<a href="#l38.56"></a><span id="l38.56">       aMessage[0] != &quot;/&quot; ||</span>
<a href="#l38.57"></a><span id="l38.57">       !(matchResult = /^\/([a-z0-9]+)(?: |$)([\s\S]*)/.exec(aMessage))</span>
<a href="#l38.58"></a><span id="l38.58">     ) {</span>
<a href="#l38.59"></a><span id="l38.59">       return false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/chat/components/src/imContacts.jsm</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/chat/components/src/imContacts.jsm</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -22,17 +22,17 @@ function executeAsyncThenFinalize(statem</span>
<a href="#l39.4"></a><span id="l39.4"> </span>
<a href="#l39.5"></a><span id="l39.5"> function getDBConnection() {</span>
<a href="#l39.6"></a><span id="l39.6">   const NS_APP_USER_PROFILE_50_DIR = &quot;ProfD&quot;;</span>
<a href="#l39.7"></a><span id="l39.7">   let dbFile = Services.dirsvc.get(NS_APP_USER_PROFILE_50_DIR, Ci.nsIFile);</span>
<a href="#l39.8"></a><span id="l39.8">   dbFile.append(&quot;blist.sqlite&quot;);</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10">   let conn = Services.storage.openDatabase(dbFile);</span>
<a href="#l39.11"></a><span id="l39.11">   if (!conn.connectionReady) {</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l39.14"></a><span id="l39.14">   }</span>
<a href="#l39.15"></a><span id="l39.15"> </span>
<a href="#l39.16"></a><span id="l39.16">   // Grow blist db in 512KB increments.</span>
<a href="#l39.17"></a><span id="l39.17">   try {</span>
<a href="#l39.18"></a><span id="l39.18">     conn.setGrowthIncrement(512 * 1024, &quot;&quot;);</span>
<a href="#l39.19"></a><span id="l39.19">   } catch (e) {</span>
<a href="#l39.20"></a><span id="l39.20">     if (e.result == Cr.NS_ERROR_FILE_TOO_BIG) {</span>
<a href="#l39.21"></a><span id="l39.21">       Services.console.logStringMessage(</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineat">@@ -376,17 +376,17 @@ var otherContactsTag = {</span>
<a href="#l39.23"></a><span id="l39.23">   // imITag implementation</span>
<a href="#l39.24"></a><span id="l39.24">   get id() {</span>
<a href="#l39.25"></a><span id="l39.25">     return -1;</span>
<a href="#l39.26"></a><span id="l39.26">   },</span>
<a href="#l39.27"></a><span id="l39.27">   get name() {</span>
<a href="#l39.28"></a><span id="l39.28">     return &quot;__others__&quot;;</span>
<a href="#l39.29"></a><span id="l39.29">   },</span>
<a href="#l39.30"></a><span id="l39.30">   set name(aNewName) {</span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-    throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l39.33"></a><span id="l39.33">   },</span>
<a href="#l39.34"></a><span id="l39.34">   getContacts() {</span>
<a href="#l39.35"></a><span id="l39.35">     return Object.keys(this._contacts).map(id =&gt; this._contacts[id]);</span>
<a href="#l39.36"></a><span id="l39.36">   },</span>
<a href="#l39.37"></a><span id="l39.37">   _addContact(aContact) {</span>
<a href="#l39.38"></a><span id="l39.38">     this._contacts[aContact.id] = aContact;</span>
<a href="#l39.39"></a><span id="l39.39">     this.notifyObservers(aContact, &quot;contact-moved-in&quot;);</span>
<a href="#l39.40"></a><span id="l39.40">     for (let observer of ContactsById[aContact.id]._observers) {</span>
<a href="#l39.41"></a><span id="l39.41" class="difflineat">@@ -663,17 +663,17 @@ Contact.prototype = {</span>
<a href="#l39.42"></a><span id="l39.42">   get _empty() {</span>
<a href="#l39.43"></a><span id="l39.43">     return this._buddies.length == 0 || this._buddies.every(b =&gt; b._empty);</span>
<a href="#l39.44"></a><span id="l39.44">   },</span>
<a href="#l39.45"></a><span id="l39.45"> </span>
<a href="#l39.46"></a><span id="l39.46">   mergeContact(aContact) {</span>
<a href="#l39.47"></a><span id="l39.47">     // Avoid merging the contact with itself or merging into an</span>
<a href="#l39.48"></a><span id="l39.48">     // already removed contact.</span>
<a href="#l39.49"></a><span id="l39.49">     if (aContact.id == this.id || !(this.id in ContactsById)) {</span>
<a href="#l39.50"></a><span id="l39.50" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l39.52"></a><span id="l39.52">     }</span>
<a href="#l39.53"></a><span id="l39.53"> </span>
<a href="#l39.54"></a><span id="l39.54">     this._ensureNotDummy();</span>
<a href="#l39.55"></a><span id="l39.55">     let contact = ContactsById[aContact.id]; // remove XPConnect wrapper</span>
<a href="#l39.56"></a><span id="l39.56"> </span>
<a href="#l39.57"></a><span id="l39.57">     // Copy all the contact-only tags first, otherwise they would be lost.</span>
<a href="#l39.58"></a><span id="l39.58">     for (let tag of contact.getTags()) {</span>
<a href="#l39.59"></a><span id="l39.59">       if (!contact._isTagInherited(tag)) {</span>
<a href="#l39.60"></a><span id="l39.60" class="difflineat">@@ -712,17 +712,17 @@ Contact.prototype = {</span>
<a href="#l39.61"></a><span id="l39.61">       Math.min(oldPosition, newPosition),</span>
<a href="#l39.62"></a><span id="l39.62">       Math.max(oldPosition, newPosition)</span>
<a href="#l39.63"></a><span id="l39.63">     );</span>
<a href="#l39.64"></a><span id="l39.64">     buddy._notifyObservers(&quot;position-changed&quot;, String(newPosition));</span>
<a href="#l39.65"></a><span id="l39.65">     this._updatePreferredBuddy(buddy);</span>
<a href="#l39.66"></a><span id="l39.66">   },</span>
<a href="#l39.67"></a><span id="l39.67">   adoptBuddy(aBuddy) {</span>
<a href="#l39.68"></a><span id="l39.68">     if (aBuddy.contact.id == this.id) {</span>
<a href="#l39.69"></a><span id="l39.69" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l39.70"></a><span id="l39.70" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l39.71"></a><span id="l39.71">     }</span>
<a href="#l39.72"></a><span id="l39.72"> </span>
<a href="#l39.73"></a><span id="l39.73">     let buddy = BuddiesById[aBuddy.id]; // remove XPConnect wrapper</span>
<a href="#l39.74"></a><span id="l39.74">     buddy.contact = this;</span>
<a href="#l39.75"></a><span id="l39.75">     this._updatePreferredBuddy(buddy);</span>
<a href="#l39.76"></a><span id="l39.76">   },</span>
<a href="#l39.77"></a><span id="l39.77">   _massRemove: false,</span>
<a href="#l39.78"></a><span id="l39.78">   _removeBuddy(aBuddy) {</span>
<a href="#l39.79"></a><span id="l39.79" class="difflineat">@@ -791,20 +791,20 @@ Contact.prototype = {</span>
<a href="#l39.80"></a><span id="l39.80">     }</span>
<a href="#l39.81"></a><span id="l39.81">     statement.finalize();</span>
<a href="#l39.82"></a><span id="l39.82">   },</span>
<a href="#l39.83"></a><span id="l39.83"> </span>
<a href="#l39.84"></a><span id="l39.84">   detachBuddy(aBuddy) {</span>
<a href="#l39.85"></a><span id="l39.85">     // Should return a new contact with the same list of tags.</span>
<a href="#l39.86"></a><span id="l39.86">     let buddy = BuddiesById[aBuddy.id];</span>
<a href="#l39.87"></a><span id="l39.87">     if (buddy.contact.id != this.id) {</span>
<a href="#l39.88"></a><span id="l39.88" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l39.89"></a><span id="l39.89" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l39.90"></a><span id="l39.90">     }</span>
<a href="#l39.91"></a><span id="l39.91">     if (buddy.contact._buddies.length == 1) {</span>
<a href="#l39.92"></a><span id="l39.92" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l39.93"></a><span id="l39.93" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l39.94"></a><span id="l39.94">     }</span>
<a href="#l39.95"></a><span id="l39.95"> </span>
<a href="#l39.96"></a><span id="l39.96">     // Save the list of tags, it may be destoyed if the buddy was the last one.</span>
<a href="#l39.97"></a><span id="l39.97">     let tags = buddy.contact.getTags();</span>
<a href="#l39.98"></a><span id="l39.98"> </span>
<a href="#l39.99"></a><span id="l39.99">     // Create a new dummy contact and use it for the detached buddy.</span>
<a href="#l39.100"></a><span id="l39.100">     buddy.contact = new Contact();</span>
<a href="#l39.101"></a><span id="l39.101">     buddy.contact._notifyObservers(&quot;added&quot;);</span>
<a href="#l39.102"></a><span id="l39.102" class="difflineat">@@ -1100,17 +1100,17 @@ Buddy.prototype = {</span>
<a href="#l39.103"></a><span id="l39.103">   },</span>
<a href="#l39.104"></a><span id="l39.104">   _srvAlias: &quot;&quot;,</span>
<a href="#l39.105"></a><span id="l39.105">   _contact: null,</span>
<a href="#l39.106"></a><span id="l39.106">   get contact() {</span>
<a href="#l39.107"></a><span id="l39.107">     return this._contact;</span>
<a href="#l39.108"></a><span id="l39.108">   },</span>
<a href="#l39.109"></a><span id="l39.109">   set contact(aContact) /* not in imIBuddy */ {</span>
<a href="#l39.110"></a><span id="l39.110">     if (aContact.id == this._contact.id) {</span>
<a href="#l39.111"></a><span id="l39.111" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l39.112"></a><span id="l39.112" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l39.113"></a><span id="l39.113">     }</span>
<a href="#l39.114"></a><span id="l39.114"> </span>
<a href="#l39.115"></a><span id="l39.115">     this._notifyObservers(&quot;moved-out-of-contact&quot;);</span>
<a href="#l39.116"></a><span id="l39.116">     this._contact._removeBuddy(this);</span>
<a href="#l39.117"></a><span id="l39.117"> </span>
<a href="#l39.118"></a><span id="l39.118">     this._contact = aContact;</span>
<a href="#l39.119"></a><span id="l39.119">     this._contact._buddies.push(this);</span>
<a href="#l39.120"></a><span id="l39.120"> </span>
<a href="#l39.121"></a><span id="l39.121" class="difflineat">@@ -1738,17 +1738,17 @@ ContactsService.prototype = {</span>
<a href="#l39.122"></a><span id="l39.122">       if (statement.executeStep()) {</span>
<a href="#l39.123"></a><span id="l39.123">         if (</span>
<a href="#l39.124"></a><span id="l39.124">           statement.getUTF8String(0) == aUserName &amp;&amp;</span>
<a href="#l39.125"></a><span id="l39.125">           statement.getUTF8String(1) == aPrplId</span>
<a href="#l39.126"></a><span id="l39.126">         ) {</span>
<a href="#l39.127"></a><span id="l39.127">           // The account is already stored correctly.</span>
<a href="#l39.128"></a><span id="l39.128">           return;</span>
<a href="#l39.129"></a><span id="l39.129">         }</span>
<a href="#l39.130"></a><span id="l39.130" class="difflineminus">-        throw Cr.NS_ERROR_UNEXPECTED; // Corrupted database?!?</span>
<a href="#l39.131"></a><span id="l39.131" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED); // Corrupted database?!?</span>
<a href="#l39.132"></a><span id="l39.132">       }</span>
<a href="#l39.133"></a><span id="l39.133">     } finally {</span>
<a href="#l39.134"></a><span id="l39.134">       statement.finalize();</span>
<a href="#l39.135"></a><span id="l39.135">     }</span>
<a href="#l39.136"></a><span id="l39.136"> </span>
<a href="#l39.137"></a><span id="l39.137">     // Actually store the account.</span>
<a href="#l39.138"></a><span id="l39.138">     statement = DBConn.createStatement(</span>
<a href="#l39.139"></a><span id="l39.139">       &quot;INSERT INTO accounts (id, name, prpl) &quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/chat/components/src/imCore.jsm</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/chat/components/src/imCore.jsm</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -104,17 +104,17 @@ UserStatus.prototype = {</span>
<a href="#l40.4"></a><span id="l40.4">             this._idleService.removeIdleObserver(this, this._timeBeforeIdle);</span>
<a href="#l40.5"></a><span id="l40.5">           }</span>
<a href="#l40.6"></a><span id="l40.6">           this._timeBeforeIdle = timeBeforeIdle;</span>
<a href="#l40.7"></a><span id="l40.7">           if (this._timeBeforeIdle) {</span>
<a href="#l40.8"></a><span id="l40.8">             this._idleService.addIdleObserver(this, this._timeBeforeIdle);</span>
<a href="#l40.9"></a><span id="l40.9">           }</span>
<a href="#l40.10"></a><span id="l40.10">         }</span>
<a href="#l40.11"></a><span id="l40.11">       } else {</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-        throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l40.14"></a><span id="l40.14">       }</span>
<a href="#l40.15"></a><span id="l40.15">     } else if (aTopic == NS_IOSERVICE_GOING_OFFLINE_TOPIC) {</span>
<a href="#l40.16"></a><span id="l40.16">       this.offline = true;</span>
<a href="#l40.17"></a><span id="l40.17">     } else if (</span>
<a href="#l40.18"></a><span id="l40.18">       aTopic == NS_IOSERVICE_OFFLINE_STATUS_TOPIC &amp;&amp;</span>
<a href="#l40.19"></a><span id="l40.19">       aData == &quot;online&quot;</span>
<a href="#l40.20"></a><span id="l40.20">     ) {</span>
<a href="#l40.21"></a><span id="l40.21">       this.offline = false;</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -319,17 +319,17 @@ CoreService.prototype = {</span>
<a href="#l40.23"></a><span id="l40.23">   },</span>
<a href="#l40.24"></a><span id="l40.24">   observe(aObject, aTopic, aData) {</span>
<a href="#l40.25"></a><span id="l40.25">     if (aTopic == kQuitApplicationGranted) {</span>
<a href="#l40.26"></a><span id="l40.26">       this.quit();</span>
<a href="#l40.27"></a><span id="l40.27">     }</span>
<a href="#l40.28"></a><span id="l40.28">   },</span>
<a href="#l40.29"></a><span id="l40.29">   quit() {</span>
<a href="#l40.30"></a><span id="l40.30">     if (!this._initialized) {</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l40.33"></a><span id="l40.33">     }</span>
<a href="#l40.34"></a><span id="l40.34"> </span>
<a href="#l40.35"></a><span id="l40.35">     Services.obs.removeObserver(this, kQuitApplicationGranted);</span>
<a href="#l40.36"></a><span id="l40.36">     Services.obs.notifyObservers(this, &quot;prpl-quit&quot;);</span>
<a href="#l40.37"></a><span id="l40.37"> </span>
<a href="#l40.38"></a><span id="l40.38">     Services.conversations.unInitConversations();</span>
<a href="#l40.39"></a><span id="l40.39">     Services.accounts.unInitAccounts();</span>
<a href="#l40.40"></a><span id="l40.40">     Services.contacts.unInitContacts();</span>
<a href="#l40.41"></a><span id="l40.41" class="difflineat">@@ -338,17 +338,17 @@ CoreService.prototype = {</span>
<a href="#l40.42"></a><span id="l40.42">     this.globalUserStatus.unInit();</span>
<a href="#l40.43"></a><span id="l40.43">     delete this.globalUserStatus;</span>
<a href="#l40.44"></a><span id="l40.44">     delete this._protos;</span>
<a href="#l40.45"></a><span id="l40.45">     delete this._initialized;</span>
<a href="#l40.46"></a><span id="l40.46">   },</span>
<a href="#l40.47"></a><span id="l40.47"> </span>
<a href="#l40.48"></a><span id="l40.48">   getProtocols() {</span>
<a href="#l40.49"></a><span id="l40.49">     if (!this._initialized) {</span>
<a href="#l40.50"></a><span id="l40.50" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l40.51"></a><span id="l40.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l40.52"></a><span id="l40.52">     }</span>
<a href="#l40.53"></a><span id="l40.53"> </span>
<a href="#l40.54"></a><span id="l40.54">     let protocols = [];</span>
<a href="#l40.55"></a><span id="l40.55">     for (let entry of categoryManager.enumerateCategory(</span>
<a href="#l40.56"></a><span id="l40.56">       kProtocolPluginCategory</span>
<a href="#l40.57"></a><span id="l40.57">     )) {</span>
<a href="#l40.58"></a><span id="l40.58">       let id = entry.data;</span>
<a href="#l40.59"></a><span id="l40.59"> </span>
<a href="#l40.60"></a><span id="l40.60" class="difflineat">@@ -368,17 +368,17 @@ CoreService.prototype = {</span>
<a href="#l40.61"></a><span id="l40.61">         protocols.push(proto);</span>
<a href="#l40.62"></a><span id="l40.62">       }</span>
<a href="#l40.63"></a><span id="l40.63">     }</span>
<a href="#l40.64"></a><span id="l40.64">     return new nsSimpleEnumerator(protocols);</span>
<a href="#l40.65"></a><span id="l40.65">   },</span>
<a href="#l40.66"></a><span id="l40.66"> </span>
<a href="#l40.67"></a><span id="l40.67">   getProtocolById(aPrplId) {</span>
<a href="#l40.68"></a><span id="l40.68">     if (!this._initialized) {</span>
<a href="#l40.69"></a><span id="l40.69" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l40.70"></a><span id="l40.70" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l40.71"></a><span id="l40.71">     }</span>
<a href="#l40.72"></a><span id="l40.72"> </span>
<a href="#l40.73"></a><span id="l40.73">     if (this._protos.hasOwnProperty(aPrplId)) {</span>
<a href="#l40.74"></a><span id="l40.74">       return this._protos[aPrplId];</span>
<a href="#l40.75"></a><span id="l40.75">     }</span>
<a href="#l40.76"></a><span id="l40.76"> </span>
<a href="#l40.77"></a><span id="l40.77">     let cid;</span>
<a href="#l40.78"></a><span id="l40.78">     try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/chat/modules/imXPCOMUtils.jsm</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/chat/modules/imXPCOMUtils.jsm</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -210,17 +210,17 @@ ClassInfo.prototype = {</span>
<a href="#l41.4"></a><span id="l41.4">     if (</span>
<a href="#l41.5"></a><span id="l41.5">       iid.equals(Ci.nsISupports) ||</span>
<a href="#l41.6"></a><span id="l41.6">       iid.equals(Ci.nsIClassInfo) ||</span>
<a href="#l41.7"></a><span id="l41.7">       this._interfaces.some(i =&gt; i.equals(iid))</span>
<a href="#l41.8"></a><span id="l41.8">     ) {</span>
<a href="#l41.9"></a><span id="l41.9">       return this;</span>
<a href="#l41.10"></a><span id="l41.10">     }</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l41.14"></a><span id="l41.14">   },</span>
<a href="#l41.15"></a><span id="l41.15">   get interfaces() {</span>
<a href="#l41.16"></a><span id="l41.16">     return [Ci.nsIClassInfo, Ci.nsISupports].concat(this._interfaces);</span>
<a href="#l41.17"></a><span id="l41.17">   },</span>
<a href="#l41.18"></a><span id="l41.18">   getScriptableHelper: () =&gt; null,</span>
<a href="#l41.19"></a><span id="l41.19">   contractID: null,</span>
<a href="#l41.20"></a><span id="l41.20">   classID: null,</span>
<a href="#l41.21"></a><span id="l41.21">   flags: 0,</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineat">@@ -257,27 +257,27 @@ function nsSimpleEnumerator(items) {</span>
<a href="#l41.23"></a><span id="l41.23">   this._nextIndex = 0;</span>
<a href="#l41.24"></a><span id="l41.24"> }</span>
<a href="#l41.25"></a><span id="l41.25"> nsSimpleEnumerator.prototype = {</span>
<a href="#l41.26"></a><span id="l41.26">   hasMoreElements() {</span>
<a href="#l41.27"></a><span id="l41.27">     return this._nextIndex &lt; this._items.length;</span>
<a href="#l41.28"></a><span id="l41.28">   },</span>
<a href="#l41.29"></a><span id="l41.29">   getNext() {</span>
<a href="#l41.30"></a><span id="l41.30">     if (!this.hasMoreElements()) {</span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l41.32"></a><span id="l41.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l41.33"></a><span id="l41.33">     }</span>
<a href="#l41.34"></a><span id="l41.34"> </span>
<a href="#l41.35"></a><span id="l41.35">     return this._items[this._nextIndex++];</span>
<a href="#l41.36"></a><span id="l41.36">   },</span>
<a href="#l41.37"></a><span id="l41.37">   QueryInterface: ChromeUtils.generateQI([Ci.nsISimpleEnumerator]),</span>
<a href="#l41.38"></a><span id="l41.38">   [Symbol.iterator]() {</span>
<a href="#l41.39"></a><span id="l41.39">     return this._items.values();</span>
<a href="#l41.40"></a><span id="l41.40">   },</span>
<a href="#l41.41"></a><span id="l41.41"> };</span>
<a href="#l41.42"></a><span id="l41.42"> </span>
<a href="#l41.43"></a><span id="l41.43"> var EmptyEnumerator = {</span>
<a href="#l41.44"></a><span id="l41.44">   hasMoreElements: () =&gt; false,</span>
<a href="#l41.45"></a><span id="l41.45">   getNext() {</span>
<a href="#l41.46"></a><span id="l41.46" class="difflineminus">-    throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l41.47"></a><span id="l41.47" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l41.48"></a><span id="l41.48">   },</span>
<a href="#l41.49"></a><span id="l41.49">   QueryInterface: ChromeUtils.generateQI([Ci.nsISimpleEnumerator]),</span>
<a href="#l41.50"></a><span id="l41.50">   *[Symbol.iterator]() {},</span>
<a href="#l41.51"></a><span id="l41.51"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/chat/modules/jsProtoHelper.jsm</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/chat/modules/jsProtoHelper.jsm</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -38,32 +38,32 @@ var GenericAccountPrototype = {</span>
<a href="#l42.4"></a><span id="l42.4">   },</span>
<a href="#l42.5"></a><span id="l42.5">   _init(aProtocol, aImAccount) {</span>
<a href="#l42.6"></a><span id="l42.6">     this.protocol = aProtocol;</span>
<a href="#l42.7"></a><span id="l42.7">     this.imAccount = aImAccount;</span>
<a href="#l42.8"></a><span id="l42.8">     initLogModule(aProtocol.id, this);</span>
<a href="#l42.9"></a><span id="l42.9">   },</span>
<a href="#l42.10"></a><span id="l42.10">   observe(aSubject, aTopic, aData) {},</span>
<a href="#l42.11"></a><span id="l42.11">   remove() {</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.14"></a><span id="l42.14">   },</span>
<a href="#l42.15"></a><span id="l42.15">   unInit() {</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.18"></a><span id="l42.18">   },</span>
<a href="#l42.19"></a><span id="l42.19">   connect() {</span>
<a href="#l42.20"></a><span id="l42.20" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.22"></a><span id="l42.22">   },</span>
<a href="#l42.23"></a><span id="l42.23">   disconnect() {</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.25"></a><span id="l42.25" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.26"></a><span id="l42.26">   },</span>
<a href="#l42.27"></a><span id="l42.27">   createConversation(aName) {</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.30"></a><span id="l42.30">   },</span>
<a href="#l42.31"></a><span id="l42.31">   joinChat(aComponents) {</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.34"></a><span id="l42.34">   },</span>
<a href="#l42.35"></a><span id="l42.35">   setBool(aName, aVal) {},</span>
<a href="#l42.36"></a><span id="l42.36">   setInt(aName, aVal) {},</span>
<a href="#l42.37"></a><span id="l42.37">   setString(aName, aVal) {},</span>
<a href="#l42.38"></a><span id="l42.38"> </span>
<a href="#l42.39"></a><span id="l42.39">   get name() {</span>
<a href="#l42.40"></a><span id="l42.40">     return this.imAccount.name;</span>
<a href="#l42.41"></a><span id="l42.41">   },</span>
<a href="#l42.42"></a><span id="l42.42" class="difflineat">@@ -272,20 +272,20 @@ var GenericAccountPrototype = {</span>
<a href="#l42.43"></a><span id="l42.43">       for (let field in parsedDefaultChatName) {</span>
<a href="#l42.44"></a><span id="l42.44">         defaultFieldValues[field] = parsedDefaultChatName[field];</span>
<a href="#l42.45"></a><span id="l42.45">       }</span>
<a href="#l42.46"></a><span id="l42.46">     }</span>
<a href="#l42.47"></a><span id="l42.47"> </span>
<a href="#l42.48"></a><span id="l42.48">     return new ChatRoomFieldValues(defaultFieldValues);</span>
<a href="#l42.49"></a><span id="l42.49">   },</span>
<a href="#l42.50"></a><span id="l42.50">   requestRoomInfo(aCallback) {</span>
<a href="#l42.51"></a><span id="l42.51" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.52"></a><span id="l42.52" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.53"></a><span id="l42.53">   },</span>
<a href="#l42.54"></a><span id="l42.54">   getRoomInfo(aName) {</span>
<a href="#l42.55"></a><span id="l42.55" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.56"></a><span id="l42.56" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.57"></a><span id="l42.57">   },</span>
<a href="#l42.58"></a><span id="l42.58">   get isRoomInfoStale() {</span>
<a href="#l42.59"></a><span id="l42.59">     return false;</span>
<a href="#l42.60"></a><span id="l42.60">   },</span>
<a href="#l42.61"></a><span id="l42.61"> </span>
<a href="#l42.62"></a><span id="l42.62">   getPref(aName, aType) {</span>
<a href="#l42.63"></a><span id="l42.63">     return this.prefs.prefHasUserValue(aName)</span>
<a href="#l42.64"></a><span id="l42.64">       ? this.prefs[&quot;get&quot; + aType + &quot;Pref&quot;](aName)</span>
<a href="#l42.65"></a><span id="l42.65" class="difflineat">@@ -382,17 +382,17 @@ var GenericAccountBuddyPrototype = {</span>
<a href="#l42.66"></a><span id="l42.66">     delete this._buddy;</span>
<a href="#l42.67"></a><span id="l42.67">   },</span>
<a href="#l42.68"></a><span id="l42.68"> </span>
<a href="#l42.69"></a><span id="l42.69">   get account() {</span>
<a href="#l42.70"></a><span id="l42.70">     return this._account.imAccount;</span>
<a href="#l42.71"></a><span id="l42.71">   },</span>
<a href="#l42.72"></a><span id="l42.72">   set buddy(aBuddy) {</span>
<a href="#l42.73"></a><span id="l42.73">     if (this._buddy) {</span>
<a href="#l42.74"></a><span id="l42.74" class="difflineminus">-      throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l42.75"></a><span id="l42.75" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l42.76"></a><span id="l42.76">     }</span>
<a href="#l42.77"></a><span id="l42.77">     this._buddy = aBuddy;</span>
<a href="#l42.78"></a><span id="l42.78">   },</span>
<a href="#l42.79"></a><span id="l42.79">   get buddy() {</span>
<a href="#l42.80"></a><span id="l42.80">     return this._buddy;</span>
<a href="#l42.81"></a><span id="l42.81">   },</span>
<a href="#l42.82"></a><span id="l42.82">   get tag() {</span>
<a href="#l42.83"></a><span id="l42.83">     return this._tag;</span>
<a href="#l42.84"></a><span id="l42.84" class="difflineat">@@ -520,17 +520,17 @@ var GenericAccountBuddyPrototype = {</span>
<a href="#l42.85"></a><span id="l42.85">   },</span>
<a href="#l42.86"></a><span id="l42.86"> </span>
<a href="#l42.87"></a><span id="l42.87">   get canSendMessage() {</span>
<a href="#l42.88"></a><span id="l42.88">     return this.online;</span>
<a href="#l42.89"></a><span id="l42.89">   },</span>
<a href="#l42.90"></a><span id="l42.90"> </span>
<a href="#l42.91"></a><span id="l42.91">   getTooltipInfo: () =&gt; EmptyEnumerator,</span>
<a href="#l42.92"></a><span id="l42.92">   createConversation() {</span>
<a href="#l42.93"></a><span id="l42.93" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.94"></a><span id="l42.94" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.95"></a><span id="l42.95">   },</span>
<a href="#l42.96"></a><span id="l42.96"> };</span>
<a href="#l42.97"></a><span id="l42.97"> </span>
<a href="#l42.98"></a><span id="l42.98"> // aUserName is required only if aBuddy is null, i.e., we are adding a buddy.</span>
<a href="#l42.99"></a><span id="l42.99"> function AccountBuddy(aAccount, aBuddy, aTag, aUserName) {</span>
<a href="#l42.100"></a><span id="l42.100">   this._init(aAccount, aBuddy, aTag, aUserName);</span>
<a href="#l42.101"></a><span id="l42.101"> }</span>
<a href="#l42.102"></a><span id="l42.102"> AccountBuddy.prototype = GenericAccountBuddyPrototype;</span>
<a href="#l42.103"></a><span id="l42.103" class="difflineat">@@ -634,17 +634,17 @@ var GenericConversationPrototype = {</span>
<a href="#l42.104"></a><span id="l42.104">   },</span>
<a href="#l42.105"></a><span id="l42.105"> </span>
<a href="#l42.106"></a><span id="l42.106">   _id: 0,</span>
<a href="#l42.107"></a><span id="l42.107">   get id() {</span>
<a href="#l42.108"></a><span id="l42.108">     return this._id;</span>
<a href="#l42.109"></a><span id="l42.109">   },</span>
<a href="#l42.110"></a><span id="l42.110">   set id(aId) {</span>
<a href="#l42.111"></a><span id="l42.111">     if (this._id) {</span>
<a href="#l42.112"></a><span id="l42.112" class="difflineminus">-      throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l42.113"></a><span id="l42.113" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l42.114"></a><span id="l42.114">     }</span>
<a href="#l42.115"></a><span id="l42.115">     this._id = aId;</span>
<a href="#l42.116"></a><span id="l42.116">   },</span>
<a href="#l42.117"></a><span id="l42.117"> </span>
<a href="#l42.118"></a><span id="l42.118">   addObserver(aObserver) {</span>
<a href="#l42.119"></a><span id="l42.119">     if (!this._observers.includes(aObserver)) {</span>
<a href="#l42.120"></a><span id="l42.120">       this._observers.push(aObserver);</span>
<a href="#l42.121"></a><span id="l42.121">     }</span>
<a href="#l42.122"></a><span id="l42.122" class="difflineat">@@ -669,17 +669,17 @@ var GenericConversationPrototype = {</span>
<a href="#l42.123"></a><span id="l42.123">         &quot;Preparing:\n&quot; +</span>
<a href="#l42.124"></a><span id="l42.124">           aImMessage.message +</span>
<a href="#l42.125"></a><span id="l42.125">           &quot;\nDisplaying:\n&quot; +</span>
<a href="#l42.126"></a><span id="l42.126">           aImMessage.displayMessage</span>
<a href="#l42.127"></a><span id="l42.127">       );</span>
<a href="#l42.128"></a><span id="l42.128">     }</span>
<a href="#l42.129"></a><span id="l42.129">   },</span>
<a href="#l42.130"></a><span id="l42.130">   sendMsg(aMsg) {</span>
<a href="#l42.131"></a><span id="l42.131" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.132"></a><span id="l42.132" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.133"></a><span id="l42.133">   },</span>
<a href="#l42.134"></a><span id="l42.134">   sendTyping: aString =&gt; Ci.prplIConversation.NO_TYPING_LIMIT,</span>
<a href="#l42.135"></a><span id="l42.135"> </span>
<a href="#l42.136"></a><span id="l42.136">   close() {</span>
<a href="#l42.137"></a><span id="l42.137">     Services.obs.notifyObservers(this, &quot;closing-conversation&quot;);</span>
<a href="#l42.138"></a><span id="l42.138">     Services.conversations.removeConversation(this);</span>
<a href="#l42.139"></a><span id="l42.139">   },</span>
<a href="#l42.140"></a><span id="l42.140">   unInit() {</span>
<a href="#l42.141"></a><span id="l42.141" class="difflineat">@@ -1134,17 +1134,17 @@ var GenericProtocolPrototype = {</span>
<a href="#l42.142"></a><span id="l42.142">   get normalizedName() {</span>
<a href="#l42.143"></a><span id="l42.143">     return this.name.replace(/[^a-z0-9]/gi, &quot;&quot;).toLowerCase();</span>
<a href="#l42.144"></a><span id="l42.144">   },</span>
<a href="#l42.145"></a><span id="l42.145">   get iconBaseURI() {</span>
<a href="#l42.146"></a><span id="l42.146">     return &quot;chrome://chat/skin/prpl-generic/&quot;;</span>
<a href="#l42.147"></a><span id="l42.147">   },</span>
<a href="#l42.148"></a><span id="l42.148"> </span>
<a href="#l42.149"></a><span id="l42.149">   getAccount(aImAccount) {</span>
<a href="#l42.150"></a><span id="l42.150" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l42.151"></a><span id="l42.151" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l42.152"></a><span id="l42.152">   },</span>
<a href="#l42.153"></a><span id="l42.153"> </span>
<a href="#l42.154"></a><span id="l42.154">   _getOptionDefault(aName) {</span>
<a href="#l42.155"></a><span id="l42.155">     if (this.options &amp;&amp; this.options.hasOwnProperty(aName)) {</span>
<a href="#l42.156"></a><span id="l42.156">       return this.options[aName].default;</span>
<a href="#l42.157"></a><span id="l42.157">     }</span>
<a href="#l42.158"></a><span id="l42.158">     throw new Error(aName + &quot; has no default value in &quot; + this.id + &quot;.&quot;);</span>
<a href="#l42.159"></a><span id="l42.159">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/chat/modules/socket.jsm</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/chat/modules/socket.jsm</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -151,17 +151,17 @@ var Socket = {</span>
<a href="#l43.4"></a><span id="l43.4">     aOriginHost,</span>
<a href="#l43.5"></a><span id="l43.5">     aOriginPort,</span>
<a href="#l43.6"></a><span id="l43.6">     aSecurity,</span>
<a href="#l43.7"></a><span id="l43.7">     aProxy,</span>
<a href="#l43.8"></a><span id="l43.8">     aHost = aOriginHost,</span>
<a href="#l43.9"></a><span id="l43.9">     aPort = aOriginPort</span>
<a href="#l43.10"></a><span id="l43.10">   ) {</span>
<a href="#l43.11"></a><span id="l43.11">     if (Services.io.offline) {</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l43.14"></a><span id="l43.14">     }</span>
<a href="#l43.15"></a><span id="l43.15"> </span>
<a href="#l43.16"></a><span id="l43.16">     // This won't work for Linux due to bug 758848.</span>
<a href="#l43.17"></a><span id="l43.17">     Services.obs.addObserver(this, &quot;wake_notification&quot;);</span>
<a href="#l43.18"></a><span id="l43.18"> </span>
<a href="#l43.19"></a><span id="l43.19">     this.LOG(&quot;Connecting to: &quot; + aHost + &quot;:&quot; + aPort);</span>
<a href="#l43.20"></a><span id="l43.20">     this.originHost = aOriginHost;</span>
<a href="#l43.21"></a><span id="l43.21">     this.originPort = aOriginPort;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/chat/protocols/irc/irc.jsm</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/chat/protocols/irc/irc.jsm</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -1200,17 +1200,17 @@ ircAccount.prototype = {</span>
<a href="#l44.4"></a><span id="l44.4">   // provided through the callback (prplIRoomInfoCallback instance).</span>
<a href="#l44.5"></a><span id="l44.5">   requestRoomInfo(aCallback, aIsUserRequest) {</span>
<a href="#l44.6"></a><span id="l44.6">     // Ignore the automaticList pref if the user explicitly requests /list.</span>
<a href="#l44.7"></a><span id="l44.7">     if (</span>
<a href="#l44.8"></a><span id="l44.8">       !aIsUserRequest &amp;&amp;</span>
<a href="#l44.9"></a><span id="l44.9">       !Services.prefs.getBoolPref(&quot;chat.irc.automaticList&quot;)</span>
<a href="#l44.10"></a><span id="l44.10">     ) {</span>
<a href="#l44.11"></a><span id="l44.11">       // Pretend we can't return roomInfo.</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l44.14"></a><span id="l44.14">     }</span>
<a href="#l44.15"></a><span id="l44.15">     if (this._roomInfoCallbacks.has(aCallback)) {</span>
<a href="#l44.16"></a><span id="l44.16">       // Callback is not new.</span>
<a href="#l44.17"></a><span id="l44.17">       return;</span>
<a href="#l44.18"></a><span id="l44.18">     }</span>
<a href="#l44.19"></a><span id="l44.19">     // Send a LIST request if the channel list is stale and a current request</span>
<a href="#l44.20"></a><span id="l44.20">     // has not been sent.</span>
<a href="#l44.21"></a><span id="l44.21">     if (this.isRoomInfoStale &amp;&amp; !this._pendingList) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/chat/protocols/matrix/matrix.jsm</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/chat/protocols/matrix/matrix.jsm</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -445,17 +445,17 @@ MatrixAccount.prototype = {</span>
<a href="#l45.4"></a><span id="l45.4">         conv.joining = false;</span>
<a href="#l45.5"></a><span id="l45.5">         conv.left = true;</span>
<a href="#l45.6"></a><span id="l45.6"> </span>
<a href="#l45.7"></a><span id="l45.7">         // TODO Perhaps we should call createRoom if the room doesn't exist.</span>
<a href="#l45.8"></a><span id="l45.8">       });</span>
<a href="#l45.9"></a><span id="l45.9">     return conv;</span>
<a href="#l45.10"></a><span id="l45.10">   },</span>
<a href="#l45.11"></a><span id="l45.11">   createConversation(aName) {</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l45.14"></a><span id="l45.14">   },</span>
<a href="#l45.15"></a><span id="l45.15"> </span>
<a href="#l45.16"></a><span id="l45.16">   requestBuddyInfo(aUserId) {</span>
<a href="#l45.17"></a><span id="l45.17">     let user = this._client.getUser(aUserId);</span>
<a href="#l45.18"></a><span id="l45.18">     if (!user) {</span>
<a href="#l45.19"></a><span id="l45.19">       Services.obs.notifyObservers(</span>
<a href="#l45.20"></a><span id="l45.20">         EmptyEnumerator,</span>
<a href="#l45.21"></a><span id="l45.21">         &quot;user-info-received&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/chat/protocols/twitter/twitter.jsm</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/chat/protocols/twitter/twitter.jsm</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -438,17 +438,17 @@ TimelineConversation.prototype = {</span>
<a href="#l46.4"></a><span id="l46.4">       },</span>
<a href="#l46.5"></a><span id="l46.5">       this</span>
<a href="#l46.6"></a><span id="l46.6">     );</span>
<a href="#l46.7"></a><span id="l46.7">   },</span>
<a href="#l46.8"></a><span id="l46.8">   sendMsg(aMsg) {</span>
<a href="#l46.9"></a><span id="l46.9">     let parsed = twttr.txt.parseTweet(aMsg);</span>
<a href="#l46.10"></a><span id="l46.10">     if (!parsed.valid) {</span>
<a href="#l46.11"></a><span id="l46.11">       this.systemMessage(_(&quot;error.tooLong&quot;), true);</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l46.14"></a><span id="l46.14">     }</span>
<a href="#l46.15"></a><span id="l46.15">     this._account.tweet(</span>
<a href="#l46.16"></a><span id="l46.16">       aMsg,</span>
<a href="#l46.17"></a><span id="l46.17">       this.inReplyToStatusId,</span>
<a href="#l46.18"></a><span id="l46.18">       this.onSentCallback.bind(this, aMsg),</span>
<a href="#l46.19"></a><span id="l46.19">       function(aException, aData) {</span>
<a href="#l46.20"></a><span id="l46.20">         let error = this._parseError(aData);</span>
<a href="#l46.21"></a><span id="l46.21">         this.systemMessage(_(&quot;error.general&quot;, error, aMsg), true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/common/src/viewZoomOverlay.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/common/src/viewZoomOverlay.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -48,17 +48,17 @@ var ZoomManager = {</span>
<a href="#l47.4"></a><span id="l47.4"> </span>
<a href="#l47.5"></a><span id="l47.5">   set zoom(aVal) {</span>
<a href="#l47.6"></a><span id="l47.6">     this.setZoomForBrowser(getBrowser(), aVal);</span>
<a href="#l47.7"></a><span id="l47.7">     return aVal;</span>
<a href="#l47.8"></a><span id="l47.8">   },</span>
<a href="#l47.9"></a><span id="l47.9"> </span>
<a href="#l47.10"></a><span id="l47.10">   setZoomForBrowser(aBrowser, aVal) {</span>
<a href="#l47.11"></a><span id="l47.11">     if (aVal &lt; this.MIN || aVal &gt; this.MAX) {</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l47.14"></a><span id="l47.14">     }</span>
<a href="#l47.15"></a><span id="l47.15"> </span>
<a href="#l47.16"></a><span id="l47.16">     if (this.useFullZoom || aBrowser.isSyntheticDocument) {</span>
<a href="#l47.17"></a><span id="l47.17">       aBrowser.textZoom = 1;</span>
<a href="#l47.18"></a><span id="l47.18">       aBrowser.fullZoom = aVal;</span>
<a href="#l47.19"></a><span id="l47.19">     } else {</span>
<a href="#l47.20"></a><span id="l47.20">       aBrowser.textZoom = aVal;</span>
<a href="#l47.21"></a><span id="l47.21">       aBrowser.fullZoom = 1;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/editor/ui/composer/content/ComposerCommands.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/editor/ui/composer/content/ComposerCommands.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -1795,39 +1795,39 @@ function IsSupportedTextMimeType(aMimeTy</span>
<a href="#l48.4"></a><span id="l48.4">   return false;</span>
<a href="#l48.5"></a><span id="l48.5"> }</span>
<a href="#l48.6"></a><span id="l48.6"> </span>
<a href="#l48.7"></a><span id="l48.7"> /* eslint-disable complexity */</span>
<a href="#l48.8"></a><span id="l48.8"> // throws an error or returns true if user attempted save; false if user canceled save</span>
<a href="#l48.9"></a><span id="l48.9"> async function SaveDocument(aSaveAs, aSaveCopy, aMimeType) {</span>
<a href="#l48.10"></a><span id="l48.10">   var editor = GetCurrentEditor();</span>
<a href="#l48.11"></a><span id="l48.11">   if (!aMimeType || !editor) {</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l48.14"></a><span id="l48.14">   }</span>
<a href="#l48.15"></a><span id="l48.15"> </span>
<a href="#l48.16"></a><span id="l48.16">   var editorDoc = editor.document;</span>
<a href="#l48.17"></a><span id="l48.17">   if (!editorDoc) {</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineminus">-    throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l48.19"></a><span id="l48.19" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l48.20"></a><span id="l48.20">   }</span>
<a href="#l48.21"></a><span id="l48.21"> </span>
<a href="#l48.22"></a><span id="l48.22">   // if we don't have the right editor type bail (we handle text and html)</span>
<a href="#l48.23"></a><span id="l48.23">   var editorType = GetCurrentEditorType();</span>
<a href="#l48.24"></a><span id="l48.24">   if (![&quot;text&quot;, &quot;html&quot;, &quot;htmlmail&quot;, &quot;textmail&quot;].includes(editorType)) {</span>
<a href="#l48.25"></a><span id="l48.25" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l48.26"></a><span id="l48.26" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l48.27"></a><span id="l48.27">   }</span>
<a href="#l48.28"></a><span id="l48.28"> </span>
<a href="#l48.29"></a><span id="l48.29">   var saveAsTextFile = IsSupportedTextMimeType(aMimeType);</span>
<a href="#l48.30"></a><span id="l48.30"> </span>
<a href="#l48.31"></a><span id="l48.31">   // check if the file is to be saved is a format we don't understand; if so, bail</span>
<a href="#l48.32"></a><span id="l48.32">   if (</span>
<a href="#l48.33"></a><span id="l48.33">     aMimeType != kHTMLMimeType &amp;&amp;</span>
<a href="#l48.34"></a><span id="l48.34">     aMimeType != kXHTMLMimeType &amp;&amp;</span>
<a href="#l48.35"></a><span id="l48.35">     !saveAsTextFile</span>
<a href="#l48.36"></a><span id="l48.36">   ) {</span>
<a href="#l48.37"></a><span id="l48.37" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l48.38"></a><span id="l48.38" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l48.39"></a><span id="l48.39">   }</span>
<a href="#l48.40"></a><span id="l48.40"> </span>
<a href="#l48.41"></a><span id="l48.41">   if (saveAsTextFile) {</span>
<a href="#l48.42"></a><span id="l48.42">     aMimeType = &quot;text/plain&quot;;</span>
<a href="#l48.43"></a><span id="l48.43">   }</span>
<a href="#l48.44"></a><span id="l48.44"> </span>
<a href="#l48.45"></a><span id="l48.45">   var urlstring = GetDocumentUrl();</span>
<a href="#l48.46"></a><span id="l48.46">   var mustShowFileDialog =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/ldap/xpcom/src/LDAPProtocolHandler.jsm</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/ldap/xpcom/src/LDAPProtocolHandler.jsm</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -23,17 +23,17 @@ function makeProtocolHandler(aCID, aProt</span>
<a href="#l49.4"></a><span id="l49.4">         var channel = Cc[&quot;@mozilla.org/network/ldap-channel;1&quot;].createInstance(</span>
<a href="#l49.5"></a><span id="l49.5">           Ci.nsIChannel</span>
<a href="#l49.6"></a><span id="l49.6">         );</span>
<a href="#l49.7"></a><span id="l49.7">         channel.init(aURI);</span>
<a href="#l49.8"></a><span id="l49.8">         channel.loadInfo = aLoadInfo;</span>
<a href="#l49.9"></a><span id="l49.9">         return channel;</span>
<a href="#l49.10"></a><span id="l49.10">       }</span>
<a href="#l49.11"></a><span id="l49.11"> </span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l49.14"></a><span id="l49.14">     },</span>
<a href="#l49.15"></a><span id="l49.15"> </span>
<a href="#l49.16"></a><span id="l49.16">     allowPort(port, scheme) {</span>
<a href="#l49.17"></a><span id="l49.17">       return port == aDefaultPort;</span>
<a href="#l49.18"></a><span id="l49.18">     },</span>
<a href="#l49.19"></a><span id="l49.19">   };</span>
<a href="#l49.20"></a><span id="l49.20"> }</span>
<a href="#l49.21"></a><span id="l49.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mail/base/content/mailWindow.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mail/base/content/mailWindow.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -721,17 +721,17 @@ nsBrowserAccess.prototype = {</span>
<a href="#l50.4"></a><span id="l50.4">     aOpener,</span>
<a href="#l50.5"></a><span id="l50.5">     aWhere,</span>
<a href="#l50.6"></a><span id="l50.6">     aFlags,</span>
<a href="#l50.7"></a><span id="l50.7">     aTriggeringPrincipal = null,</span>
<a href="#l50.8"></a><span id="l50.8">     aCsp = null</span>
<a href="#l50.9"></a><span id="l50.9">   ) {</span>
<a href="#l50.10"></a><span id="l50.10">     if (!aURI) {</span>
<a href="#l50.11"></a><span id="l50.11">       Cu.reportError(&quot;openURI should only be called with a valid URI&quot;);</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l50.14"></a><span id="l50.14">     }</span>
<a href="#l50.15"></a><span id="l50.15">     return this.getContentWindowOrOpenURI(</span>
<a href="#l50.16"></a><span id="l50.16">       aURI,</span>
<a href="#l50.17"></a><span id="l50.17">       aOpener,</span>
<a href="#l50.18"></a><span id="l50.18">       aWhere,</span>
<a href="#l50.19"></a><span id="l50.19">       aFlags,</span>
<a href="#l50.20"></a><span id="l50.20">       aTriggeringPrincipal,</span>
<a href="#l50.21"></a><span id="l50.21">       aCsp,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/base/modules/MailMigrator.jsm</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/base/modules/MailMigrator.jsm</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -771,17 +771,17 @@ var MailMigrator = {</span>
<a href="#l51.4"></a><span id="l51.4">    * are renamed with the extension &quot;.mab.bak&quot; to avoid confusion.</span>
<a href="#l51.5"></a><span id="l51.5">    */</span>
<a href="#l51.6"></a><span id="l51.6">   async _migrateAddressBooks() {</span>
<a href="#l51.7"></a><span id="l51.7">     async function migrateBook(fileName, notFoundThrows = true) {</span>
<a href="#l51.8"></a><span id="l51.8">       let oldFile = profileDir.clone();</span>
<a href="#l51.9"></a><span id="l51.9">       oldFile.append(`${fileName}.mab`);</span>
<a href="#l51.10"></a><span id="l51.10">       if (!oldFile.exists()) {</span>
<a href="#l51.11"></a><span id="l51.11">         if (notFoundThrows) {</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-          throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l51.14"></a><span id="l51.14">         }</span>
<a href="#l51.15"></a><span id="l51.15">         return;</span>
<a href="#l51.16"></a><span id="l51.16">       }</span>
<a href="#l51.17"></a><span id="l51.17"> </span>
<a href="#l51.18"></a><span id="l51.18">       console.log(`Creating new ${fileName}.sqlite`);</span>
<a href="#l51.19"></a><span id="l51.19">       let newBook = new AddrBookDirectory();</span>
<a href="#l51.20"></a><span id="l51.20">       newBook.init(`jsaddrbook://${fileName}.sqlite`);</span>
<a href="#l51.21"></a><span id="l51.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mail/base/test/unit/test_alertHook.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mail/base/test/unit/test_alertHook.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -39,17 +39,17 @@ var mockAlertsService = {</span>
<a href="#l52.4"></a><span id="l52.4"> var gMsgWindow = {};</span>
<a href="#l52.5"></a><span id="l52.5"> </span>
<a href="#l52.6"></a><span id="l52.6"> var mailnewsURL = {</span>
<a href="#l52.7"></a><span id="l52.7">   get msgWindow() {</span>
<a href="#l52.8"></a><span id="l52.8">     if (gMsgWindow) {</span>
<a href="#l52.9"></a><span id="l52.9">       return gMsgWindow;</span>
<a href="#l52.10"></a><span id="l52.10">     }</span>
<a href="#l52.11"></a><span id="l52.11"> </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    throw Cr.NS_ERROR_INVALID_POINTER;</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_POINTER);</span>
<a href="#l52.14"></a><span id="l52.14">   },</span>
<a href="#l52.15"></a><span id="l52.15"> };</span>
<a href="#l52.16"></a><span id="l52.16"> </span>
<a href="#l52.17"></a><span id="l52.17"> function run_test() {</span>
<a href="#l52.18"></a><span id="l52.18">   // First register the mock alerts service</span>
<a href="#l52.19"></a><span id="l52.19">   let uuid = MockFactory.register(</span>
<a href="#l52.20"></a><span id="l52.20">     &quot;@mozilla.org/alerts-service;1&quot;,</span>
<a href="#l52.21"></a><span id="l52.21">     mockAlertsService</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mail/components/AboutRedirector.jsm</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mail/components/AboutRedirector.jsm</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -57,25 +57,25 @@ AboutRedirector.prototype = {</span>
<a href="#l53.4"></a><span id="l53.4">     // Strip out the first ? or #, and anything following it</span>
<a href="#l53.5"></a><span id="l53.5">     let name = /[^?#]+/.exec(aURI.pathQueryRef)[0];</span>
<a href="#l53.6"></a><span id="l53.6">     return name.toLowerCase();</span>
<a href="#l53.7"></a><span id="l53.7">   },</span>
<a href="#l53.8"></a><span id="l53.8"> </span>
<a href="#l53.9"></a><span id="l53.9">   getURIFlags(aURI) {</span>
<a href="#l53.10"></a><span id="l53.10">     let name = this._getModuleName(aURI);</span>
<a href="#l53.11"></a><span id="l53.11">     if (!(name in this._redirMap)) {</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l53.14"></a><span id="l53.14">     }</span>
<a href="#l53.15"></a><span id="l53.15">     return this._redirMap[name].flags;</span>
<a href="#l53.16"></a><span id="l53.16">   },</span>
<a href="#l53.17"></a><span id="l53.17"> </span>
<a href="#l53.18"></a><span id="l53.18">   newChannel(aURI, aLoadInfo) {</span>
<a href="#l53.19"></a><span id="l53.19">     let name = this._getModuleName(aURI);</span>
<a href="#l53.20"></a><span id="l53.20">     if (!(name in this._redirMap)) {</span>
<a href="#l53.21"></a><span id="l53.21" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l53.22"></a><span id="l53.22" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l53.23"></a><span id="l53.23">     }</span>
<a href="#l53.24"></a><span id="l53.24"> </span>
<a href="#l53.25"></a><span id="l53.25">     let newURI = Services.io.newURI(this._redirMap[name].url);</span>
<a href="#l53.26"></a><span id="l53.26">     let channel = Services.io.newChannelFromURIWithLoadInfo(newURI, aLoadInfo);</span>
<a href="#l53.27"></a><span id="l53.27">     channel.originalURI = aURI;</span>
<a href="#l53.28"></a><span id="l53.28"> </span>
<a href="#l53.29"></a><span id="l53.29">     if (</span>
<a href="#l53.30"></a><span id="l53.30">       this._redirMap[name].flags &amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mail/components/MessengerContentHandler.jsm</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mail/components/MessengerContentHandler.jsm</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -53,31 +53,31 @@ function handleIndexerResult(aFile) {</span>
<a href="#l54.4"></a><span id="l54.4">     &quot;resource:///modules/SearchIntegration.jsm&quot;</span>
<a href="#l54.5"></a><span id="l54.5">   );</span>
<a href="#l54.6"></a><span id="l54.6">   let msgHdr = SearchIntegration.handleResult(aFile);</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8">   // If we found a message header, open it, otherwise throw an exception</span>
<a href="#l54.9"></a><span id="l54.9">   if (msgHdr) {</span>
<a href="#l54.10"></a><span id="l54.10">     MailUtils.displayMessage(msgHdr);</span>
<a href="#l54.11"></a><span id="l54.11">   } else {</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l54.14"></a><span id="l54.14">   }</span>
<a href="#l54.15"></a><span id="l54.15"> }</span>
<a href="#l54.16"></a><span id="l54.16"> </span>
<a href="#l54.17"></a><span id="l54.17"> function mayOpenURI(uri) {</span>
<a href="#l54.18"></a><span id="l54.18">   var ext = Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;].getService(</span>
<a href="#l54.19"></a><span id="l54.19">     Ci.nsIExternalProtocolService</span>
<a href="#l54.20"></a><span id="l54.20">   );</span>
<a href="#l54.21"></a><span id="l54.21"> </span>
<a href="#l54.22"></a><span id="l54.22">   return ext.isExposedProtocol(uri.scheme);</span>
<a href="#l54.23"></a><span id="l54.23"> }</span>
<a href="#l54.24"></a><span id="l54.24"> </span>
<a href="#l54.25"></a><span id="l54.25"> function openURI(uri) {</span>
<a href="#l54.26"></a><span id="l54.26">   if (!mayOpenURI(uri)) {</span>
<a href="#l54.27"></a><span id="l54.27" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l54.28"></a><span id="l54.28" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l54.29"></a><span id="l54.29">   }</span>
<a href="#l54.30"></a><span id="l54.30"> </span>
<a href="#l54.31"></a><span id="l54.31">   var channel = Services.io.newChannelFromURI(</span>
<a href="#l54.32"></a><span id="l54.32">     uri,</span>
<a href="#l54.33"></a><span id="l54.33">     null,</span>
<a href="#l54.34"></a><span id="l54.34">     Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l54.35"></a><span id="l54.35">     null,</span>
<a href="#l54.36"></a><span id="l54.36">     Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l54.37"></a><span id="l54.37" class="difflineat">@@ -132,17 +132,17 @@ function openURI(uri) {</span>
<a href="#l54.38"></a><span id="l54.38">       if (iid.equals(Ci.nsIURIContentListener)) {</span>
<a href="#l54.39"></a><span id="l54.39">         return this;</span>
<a href="#l54.40"></a><span id="l54.40">       }</span>
<a href="#l54.41"></a><span id="l54.41"> </span>
<a href="#l54.42"></a><span id="l54.42">       if (iid.equals(Ci.nsILoadGroup)) {</span>
<a href="#l54.43"></a><span id="l54.43">         return loadgroup;</span>
<a href="#l54.44"></a><span id="l54.44">       }</span>
<a href="#l54.45"></a><span id="l54.45"> </span>
<a href="#l54.46"></a><span id="l54.46" class="difflineminus">-      throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l54.47"></a><span id="l54.47" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l54.48"></a><span id="l54.48">     },</span>
<a href="#l54.49"></a><span id="l54.49">   };</span>
<a href="#l54.50"></a><span id="l54.50">   loader.openURI(channel, true, listener);</span>
<a href="#l54.51"></a><span id="l54.51"> }</span>
<a href="#l54.52"></a><span id="l54.52"> </span>
<a href="#l54.53"></a><span id="l54.53"> function MailDefaultHandler() {}</span>
<a href="#l54.54"></a><span id="l54.54"> </span>
<a href="#l54.55"></a><span id="l54.55"> MailDefaultHandler.prototype = {</span>
<a href="#l54.56"></a><span id="l54.56" class="difflineat">@@ -156,17 +156,17 @@ MailDefaultHandler.prototype = {</span>
<a href="#l54.57"></a><span id="l54.57"> </span>
<a href="#l54.58"></a><span id="l54.58">   /* eslint-disable complexity */</span>
<a href="#l54.59"></a><span id="l54.59">   handle(cmdLine) {</span>
<a href="#l54.60"></a><span id="l54.60">     var uri;</span>
<a href="#l54.61"></a><span id="l54.61"> </span>
<a href="#l54.62"></a><span id="l54.62">     try {</span>
<a href="#l54.63"></a><span id="l54.63">       var remoteCommand = cmdLine.handleFlagWithParam(&quot;remote&quot;, true);</span>
<a href="#l54.64"></a><span id="l54.64">     } catch (e) {</span>
<a href="#l54.65"></a><span id="l54.65" class="difflineminus">-      throw Cr.NS_ERROR_ABORT;</span>
<a href="#l54.66"></a><span id="l54.66" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l54.67"></a><span id="l54.67">     }</span>
<a href="#l54.68"></a><span id="l54.68"> </span>
<a href="#l54.69"></a><span id="l54.69">     if (remoteCommand != null) {</span>
<a href="#l54.70"></a><span id="l54.70">       try {</span>
<a href="#l54.71"></a><span id="l54.71">         var a = /^\s*(\w+)\(([^\)]*)\)\s*$/.exec(remoteCommand);</span>
<a href="#l54.72"></a><span id="l54.72">         var remoteVerb = a[1].toLowerCase();</span>
<a href="#l54.73"></a><span id="l54.73">         var remoteParams = a[2].split(&quot;,&quot;);</span>
<a href="#l54.74"></a><span id="l54.74"> </span>
<a href="#l54.75"></a><span id="l54.75" class="difflineat">@@ -215,33 +215,33 @@ MailDefaultHandler.prototype = {</span>
<a href="#l54.76"></a><span id="l54.76">                   &quot;chrome://messenger/content/messengercompose/messengercompose.xhtml&quot;,</span>
<a href="#l54.77"></a><span id="l54.77">                   &quot;_blank&quot;,</span>
<a href="#l54.78"></a><span id="l54.78">                   &quot;chrome,dialog=no,all&quot;,</span>
<a href="#l54.79"></a><span id="l54.79">                   argstring</span>
<a href="#l54.80"></a><span id="l54.80">                 );</span>
<a href="#l54.81"></a><span id="l54.81">                 break;</span>
<a href="#l54.82"></a><span id="l54.82">               }</span>
<a href="#l54.83"></a><span id="l54.83">               default:</span>
<a href="#l54.84"></a><span id="l54.84" class="difflineminus">-                throw Cr.NS_ERROR_ABORT;</span>
<a href="#l54.85"></a><span id="l54.85" class="difflineplus">+                throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l54.86"></a><span id="l54.86">             }</span>
<a href="#l54.87"></a><span id="l54.87">             break;</span>
<a href="#l54.88"></a><span id="l54.88"> </span>
<a href="#l54.89"></a><span id="l54.89">           default:</span>
<a href="#l54.90"></a><span id="l54.90">             // Somebody sent us a remote command we don't know how to process:</span>
<a href="#l54.91"></a><span id="l54.91">             // just abort.</span>
<a href="#l54.92"></a><span id="l54.92" class="difflineminus">-            throw Cr.NS_ERROR_ABORT;</span>
<a href="#l54.93"></a><span id="l54.93" class="difflineplus">+            throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l54.94"></a><span id="l54.94">         }</span>
<a href="#l54.95"></a><span id="l54.95"> </span>
<a href="#l54.96"></a><span id="l54.96">         cmdLine.preventDefault = true;</span>
<a href="#l54.97"></a><span id="l54.97">       } catch (e) {</span>
<a href="#l54.98"></a><span id="l54.98">         // If we had a -remote flag but failed to process it, throw</span>
<a href="#l54.99"></a><span id="l54.99">         // NS_ERROR_ABORT so that the xremote code knows to return a failure</span>
<a href="#l54.100"></a><span id="l54.100">         // back to the handling code.</span>
<a href="#l54.101"></a><span id="l54.101">         dump(e);</span>
<a href="#l54.102"></a><span id="l54.102" class="difflineminus">-        throw Cr.NS_ERROR_ABORT;</span>
<a href="#l54.103"></a><span id="l54.103" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l54.104"></a><span id="l54.104">       }</span>
<a href="#l54.105"></a><span id="l54.105">     }</span>
<a href="#l54.106"></a><span id="l54.106"> </span>
<a href="#l54.107"></a><span id="l54.107">     var chromeParam = cmdLine.handleFlagWithParam(&quot;chrome&quot;, false);</span>
<a href="#l54.108"></a><span id="l54.108">     if (chromeParam) {</span>
<a href="#l54.109"></a><span id="l54.109">       try {</span>
<a href="#l54.110"></a><span id="l54.110">         let argstring = Cc[&quot;@mozilla.org/supports-string;1&quot;].createInstance(</span>
<a href="#l54.111"></a><span id="l54.111">           Ci.nsISupportsString</span>
<a href="#l54.112"></a><span id="l54.112" class="difflineat">@@ -513,17 +513,17 @@ MailDefaultHandler.prototype = {</span>
<a href="#l54.113"></a><span id="l54.113">     }</span>
<a href="#l54.114"></a><span id="l54.114"> </span>
<a href="#l54.115"></a><span id="l54.115">     if (actionFlagIdx &amp;&amp; osintFlagIdx &gt; -1) {</span>
<a href="#l54.116"></a><span id="l54.116">       var param = cmdLine.getArgument(actionFlagIdx + 1);</span>
<a href="#l54.117"></a><span id="l54.117">       if (</span>
<a href="#l54.118"></a><span id="l54.118">         cmdLine.length != actionFlagIdx + 2 ||</span>
<a href="#l54.119"></a><span id="l54.119">         /thunderbird.url.(mailto|news):/.test(param)</span>
<a href="#l54.120"></a><span id="l54.120">       ) {</span>
<a href="#l54.121"></a><span id="l54.121" class="difflineminus">-        throw Cr.NS_ERROR_ABORT;</span>
<a href="#l54.122"></a><span id="l54.122" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l54.123"></a><span id="l54.123">       }</span>
<a href="#l54.124"></a><span id="l54.124">       cmdLine.handleFlag(&quot;osint&quot;, false);</span>
<a href="#l54.125"></a><span id="l54.125">     }</span>
<a href="#l54.126"></a><span id="l54.126">   },</span>
<a href="#l54.127"></a><span id="l54.127"> </span>
<a href="#l54.128"></a><span id="l54.128">   openInExternal(uri) {</span>
<a href="#l54.129"></a><span id="l54.129">     Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l54.130"></a><span id="l54.130">       .getService(Ci.nsIExternalProtocolService)</span>
<a href="#l54.131"></a><span id="l54.131" class="difflineat">@@ -532,46 +532,46 @@ MailDefaultHandler.prototype = {</span>
<a href="#l54.132"></a><span id="l54.132"> </span>
<a href="#l54.133"></a><span id="l54.133">   handleContent(aContentType, aWindowContext, aRequest) {</span>
<a href="#l54.134"></a><span id="l54.134">     try {</span>
<a href="#l54.135"></a><span id="l54.135">       if (</span>
<a href="#l54.136"></a><span id="l54.136">         !Cc[&quot;@mozilla.org/webnavigation-info;1&quot;]</span>
<a href="#l54.137"></a><span id="l54.137">           .getService(Ci.nsIWebNavigationInfo)</span>
<a href="#l54.138"></a><span id="l54.138">           .isTypeSupported(aContentType, null)</span>
<a href="#l54.139"></a><span id="l54.139">       ) {</span>
<a href="#l54.140"></a><span id="l54.140" class="difflineminus">-        throw Cr.NS_ERROR_WONT_HANDLE_CONTENT;</span>
<a href="#l54.141"></a><span id="l54.141" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_WONT_HANDLE_CONTENT);</span>
<a href="#l54.142"></a><span id="l54.142">       }</span>
<a href="#l54.143"></a><span id="l54.143">     } catch (e) {</span>
<a href="#l54.144"></a><span id="l54.144" class="difflineminus">-      throw Cr.NS_ERROR_WONT_HANDLE_CONTENT;</span>
<a href="#l54.145"></a><span id="l54.145" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_WONT_HANDLE_CONTENT);</span>
<a href="#l54.146"></a><span id="l54.146">     }</span>
<a href="#l54.147"></a><span id="l54.147"> </span>
<a href="#l54.148"></a><span id="l54.148">     aRequest.QueryInterface(Ci.nsIChannel);</span>
<a href="#l54.149"></a><span id="l54.149"> </span>
<a href="#l54.150"></a><span id="l54.150">     // For internal protocols (e.g. imap, mailbox, mailto), we want to handle</span>
<a href="#l54.151"></a><span id="l54.151">     // them internally as we know what to do. For http and https we don't</span>
<a href="#l54.152"></a><span id="l54.152">     // actually deal with external windows very well, so we redirect them to</span>
<a href="#l54.153"></a><span id="l54.153">     // the external browser.</span>
<a href="#l54.154"></a><span id="l54.154">     if (!aRequest.URI.schemeIs(&quot;http&quot;) &amp;&amp; !aRequest.URI.schemeIs(&quot;https&quot;)) {</span>
<a href="#l54.155"></a><span id="l54.155" class="difflineminus">-      throw Cr.NS_ERROR_WONT_HANDLE_CONTENT;</span>
<a href="#l54.156"></a><span id="l54.156" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_WONT_HANDLE_CONTENT);</span>
<a href="#l54.157"></a><span id="l54.157">     }</span>
<a href="#l54.158"></a><span id="l54.158"> </span>
<a href="#l54.159"></a><span id="l54.159">     this.openInExternal(aRequest.URI);</span>
<a href="#l54.160"></a><span id="l54.160">     aRequest.cancel(Cr.NS_BINDING_ABORTED);</span>
<a href="#l54.161"></a><span id="l54.161">   },</span>
<a href="#l54.162"></a><span id="l54.162"> </span>
<a href="#l54.163"></a><span id="l54.163">   helpInfo:</span>
<a href="#l54.164"></a><span id="l54.164">     &quot;  -options           Open the options dialog.\n&quot; +</span>
<a href="#l54.165"></a><span id="l54.165">     &quot;  -file              Open the specified email file.\n&quot; +</span>
<a href="#l54.166"></a><span id="l54.166">     &quot;  -setDefaultMail    Set this app as the default mail client.\n&quot;,</span>
<a href="#l54.167"></a><span id="l54.167"> </span>
<a href="#l54.168"></a><span id="l54.168">   /* nsIFactory */</span>
<a href="#l54.169"></a><span id="l54.169"> </span>
<a href="#l54.170"></a><span id="l54.170">   createInstance(outer, iid) {</span>
<a href="#l54.171"></a><span id="l54.171">     if (outer != null) {</span>
<a href="#l54.172"></a><span id="l54.172" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l54.173"></a><span id="l54.173" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l54.174"></a><span id="l54.174">     }</span>
<a href="#l54.175"></a><span id="l54.175"> </span>
<a href="#l54.176"></a><span id="l54.176">     return this.QueryInterface(iid);</span>
<a href="#l54.177"></a><span id="l54.177">   },</span>
<a href="#l54.178"></a><span id="l54.178"> </span>
<a href="#l54.179"></a><span id="l54.179">   lockFactory(lock) {</span>
<a href="#l54.180"></a><span id="l54.180">     /* no-op */</span>
<a href="#l54.181"></a><span id="l54.181">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mail/components/activity/Activity.jsm</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mail/components/activity/Activity.jsm</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -92,59 +92,59 @@ ActivityProcess.prototype = {</span>
<a href="#l55.4"></a><span id="l55.4">       !(</span>
<a href="#l55.5"></a><span id="l55.5">         val == Ci.nsIActivityProcess.STATE_COMPLETED ||</span>
<a href="#l55.6"></a><span id="l55.6">         val == Ci.nsIActivityProcess.STATE_CANCELED ||</span>
<a href="#l55.7"></a><span id="l55.7">         val == Ci.nsIActivityProcess.STATE_WAITINGFORRETRY ||</span>
<a href="#l55.8"></a><span id="l55.8">         val == Ci.nsIActivityProcess.STATE_WAITINGFORINPUT ||</span>
<a href="#l55.9"></a><span id="l55.9">         val == Ci.nsIActivityProcess.STATE_PAUSED</span>
<a href="#l55.10"></a><span id="l55.10">       )</span>
<a href="#l55.11"></a><span id="l55.11">     ) {</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l55.14"></a><span id="l55.14">     }</span>
<a href="#l55.15"></a><span id="l55.15"> </span>
<a href="#l55.16"></a><span id="l55.16">     // we cannot change the state after the activity is completed,</span>
<a href="#l55.17"></a><span id="l55.17">     // or it is canceled.</span>
<a href="#l55.18"></a><span id="l55.18">     if (</span>
<a href="#l55.19"></a><span id="l55.19">       this._state == Ci.nsIActivityProcess.STATE_COMPLETED ||</span>
<a href="#l55.20"></a><span id="l55.20">       this._state == Ci.nsIActivityProcess.STATE_CANCELED</span>
<a href="#l55.21"></a><span id="l55.21">     ) {</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l55.23"></a><span id="l55.23" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l55.24"></a><span id="l55.24">     }</span>
<a href="#l55.25"></a><span id="l55.25"> </span>
<a href="#l55.26"></a><span id="l55.26">     if (</span>
<a href="#l55.27"></a><span id="l55.27">       this._state == Ci.nsIActivityProcess.STATE_PAUSED &amp;&amp;</span>
<a href="#l55.28"></a><span id="l55.28">       !(</span>
<a href="#l55.29"></a><span id="l55.29">         val == Ci.nsIActivityProcess.STATE_COMPLETED ||</span>
<a href="#l55.30"></a><span id="l55.30">         val == Ci.nsIActivityProcess.STATE_INPROGRESS ||</span>
<a href="#l55.31"></a><span id="l55.31">         val == Ci.nsIActivityProcess.STATE_WAITINGFORRETRY ||</span>
<a href="#l55.32"></a><span id="l55.32">         val == Ci.nsIActivityProcess.STATE_WAITINGFORINPUT ||</span>
<a href="#l55.33"></a><span id="l55.33">         val == Ci.nsIActivityProcess.STATE_CANCELED</span>
<a href="#l55.34"></a><span id="l55.34">       )</span>
<a href="#l55.35"></a><span id="l55.35">     ) {</span>
<a href="#l55.36"></a><span id="l55.36" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l55.37"></a><span id="l55.37" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l55.38"></a><span id="l55.38">     }</span>
<a href="#l55.39"></a><span id="l55.39"> </span>
<a href="#l55.40"></a><span id="l55.40">     if (</span>
<a href="#l55.41"></a><span id="l55.41">       this._state == Ci.nsIActivityProcess.STATE_WAITINGFORINPUT &amp;&amp;</span>
<a href="#l55.42"></a><span id="l55.42">       !(</span>
<a href="#l55.43"></a><span id="l55.43">         val == Ci.nsIActivityProcess.STATE_INPROGRESS ||</span>
<a href="#l55.44"></a><span id="l55.44">         val == Ci.nsIActivityProcess.STATE_CANCELED</span>
<a href="#l55.45"></a><span id="l55.45">       )</span>
<a href="#l55.46"></a><span id="l55.46">     ) {</span>
<a href="#l55.47"></a><span id="l55.47" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l55.48"></a><span id="l55.48" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l55.49"></a><span id="l55.49">     }</span>
<a href="#l55.50"></a><span id="l55.50"> </span>
<a href="#l55.51"></a><span id="l55.51">     if (</span>
<a href="#l55.52"></a><span id="l55.52">       this._state == Ci.nsIActivityProcess.STATE_WAITINGFORRETRY &amp;&amp;</span>
<a href="#l55.53"></a><span id="l55.53">       !(</span>
<a href="#l55.54"></a><span id="l55.54">         val == Ci.nsIActivityProcess.STATE_INPROGRESS ||</span>
<a href="#l55.55"></a><span id="l55.55">         val == Ci.nsIActivityProcess.STATE_CANCELED</span>
<a href="#l55.56"></a><span id="l55.56">       )</span>
<a href="#l55.57"></a><span id="l55.57">     ) {</span>
<a href="#l55.58"></a><span id="l55.58" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l55.59"></a><span id="l55.59" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l55.60"></a><span id="l55.60">     }</span>
<a href="#l55.61"></a><span id="l55.61"> </span>
<a href="#l55.62"></a><span id="l55.62">     let oldState = this._state;</span>
<a href="#l55.63"></a><span id="l55.63">     this._state = val;</span>
<a href="#l55.64"></a><span id="l55.64"> </span>
<a href="#l55.65"></a><span id="l55.65">     // let the listeners know about the change</span>
<a href="#l55.66"></a><span id="l55.66">     this.log.debug(&quot;Notifying onStateChanged listeners&quot;);</span>
<a href="#l55.67"></a><span id="l55.67">     for (let value of this._listeners) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mail/components/activity/ActivityManager.jsm</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mail/components/activity/ActivityManager.jsm</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -79,17 +79,17 @@ ActivityManager.prototype = {</span>
<a href="#l56.4"></a><span id="l56.4">   removeActivity(aID) {</span>
<a href="#l56.5"></a><span id="l56.5">     let activity = this.getActivity(aID);</span>
<a href="#l56.6"></a><span id="l56.6"> </span>
<a href="#l56.7"></a><span id="l56.7">     // make sure that the activity is not in-progress state</span>
<a href="#l56.8"></a><span id="l56.8">     if (</span>
<a href="#l56.9"></a><span id="l56.9">       activity instanceof Ci.nsIActivityProcess &amp;&amp;</span>
<a href="#l56.10"></a><span id="l56.10">       activity.state == Ci.nsIActivityProcess.STATE_INPROGRESS</span>
<a href="#l56.11"></a><span id="l56.11">     ) {</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l56.14"></a><span id="l56.14">     }</span>
<a href="#l56.15"></a><span id="l56.15"> </span>
<a href="#l56.16"></a><span id="l56.16">     // remove the activity</span>
<a href="#l56.17"></a><span id="l56.17">     this._activities.delete(aID);</span>
<a href="#l56.18"></a><span id="l56.18"> </span>
<a href="#l56.19"></a><span id="l56.19">     // notify all the listeners</span>
<a href="#l56.20"></a><span id="l56.20">     for (let value of this._listeners) {</span>
<a href="#l56.21"></a><span id="l56.21">       try {</span>
<a href="#l56.22"></a><span id="l56.22" class="difflineat">@@ -119,17 +119,17 @@ ActivityManager.prototype = {</span>
<a href="#l56.23"></a><span id="l56.23">       } else {</span>
<a href="#l56.24"></a><span id="l56.24">         this.removeActivity(id);</span>
<a href="#l56.25"></a><span id="l56.25">       }</span>
<a href="#l56.26"></a><span id="l56.26">     }</span>
<a href="#l56.27"></a><span id="l56.27">   },</span>
<a href="#l56.28"></a><span id="l56.28"> </span>
<a href="#l56.29"></a><span id="l56.29">   getActivity(aID) {</span>
<a href="#l56.30"></a><span id="l56.30">     if (!this._activities.has(aID)) {</span>
<a href="#l56.31"></a><span id="l56.31" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l56.32"></a><span id="l56.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l56.33"></a><span id="l56.33">     }</span>
<a href="#l56.34"></a><span id="l56.34">     return this._activities.get(aID);</span>
<a href="#l56.35"></a><span id="l56.35">   },</span>
<a href="#l56.36"></a><span id="l56.36"> </span>
<a href="#l56.37"></a><span id="l56.37">   containsActivity(aID) {</span>
<a href="#l56.38"></a><span id="l56.38">     return this._activities.has(aID);</span>
<a href="#l56.39"></a><span id="l56.39">   },</span>
<a href="#l56.40"></a><span id="l56.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mail/components/compose/content/ComposerCommands.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mail/components/compose/content/ComposerCommands.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -1591,39 +1591,39 @@ function IsSupportedTextMimeType(aMimeTy</span>
<a href="#l57.4"></a><span id="l57.4">   return false;</span>
<a href="#l57.5"></a><span id="l57.5"> }</span>
<a href="#l57.6"></a><span id="l57.6"> </span>
<a href="#l57.7"></a><span id="l57.7"> /* eslint-disable complexity */</span>
<a href="#l57.8"></a><span id="l57.8"> // throws an error or returns true if user attempted save; false if user canceled save</span>
<a href="#l57.9"></a><span id="l57.9"> async function SaveDocument(aSaveAs, aSaveCopy, aMimeType) {</span>
<a href="#l57.10"></a><span id="l57.10">   var editor = GetCurrentEditor();</span>
<a href="#l57.11"></a><span id="l57.11">   if (!aMimeType || !editor) {</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l57.14"></a><span id="l57.14">   }</span>
<a href="#l57.15"></a><span id="l57.15"> </span>
<a href="#l57.16"></a><span id="l57.16">   var editorDoc = editor.document;</span>
<a href="#l57.17"></a><span id="l57.17">   if (!editorDoc) {</span>
<a href="#l57.18"></a><span id="l57.18" class="difflineminus">-    throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l57.19"></a><span id="l57.19" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l57.20"></a><span id="l57.20">   }</span>
<a href="#l57.21"></a><span id="l57.21"> </span>
<a href="#l57.22"></a><span id="l57.22">   // if we don't have the right editor type bail (we handle text and html)</span>
<a href="#l57.23"></a><span id="l57.23">   var editorType = GetCurrentEditorType();</span>
<a href="#l57.24"></a><span id="l57.24">   if (![&quot;text&quot;, &quot;html&quot;, &quot;htmlmail&quot;, &quot;textmail&quot;].includes(editorType)) {</span>
<a href="#l57.25"></a><span id="l57.25" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l57.26"></a><span id="l57.26" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l57.27"></a><span id="l57.27">   }</span>
<a href="#l57.28"></a><span id="l57.28"> </span>
<a href="#l57.29"></a><span id="l57.29">   var saveAsTextFile = IsSupportedTextMimeType(aMimeType);</span>
<a href="#l57.30"></a><span id="l57.30"> </span>
<a href="#l57.31"></a><span id="l57.31">   // check if the file is to be saved is a format we don't understand; if so, bail</span>
<a href="#l57.32"></a><span id="l57.32">   if (</span>
<a href="#l57.33"></a><span id="l57.33">     aMimeType != kHTMLMimeType &amp;&amp;</span>
<a href="#l57.34"></a><span id="l57.34">     aMimeType != kXHTMLMimeType &amp;&amp;</span>
<a href="#l57.35"></a><span id="l57.35">     !saveAsTextFile</span>
<a href="#l57.36"></a><span id="l57.36">   ) {</span>
<a href="#l57.37"></a><span id="l57.37" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l57.38"></a><span id="l57.38" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l57.39"></a><span id="l57.39">   }</span>
<a href="#l57.40"></a><span id="l57.40"> </span>
<a href="#l57.41"></a><span id="l57.41">   if (saveAsTextFile) {</span>
<a href="#l57.42"></a><span id="l57.42">     aMimeType = &quot;text/plain&quot;;</span>
<a href="#l57.43"></a><span id="l57.43">   }</span>
<a href="#l57.44"></a><span id="l57.44"> </span>
<a href="#l57.45"></a><span id="l57.45">   var urlstring = GetDocumentUrl();</span>
<a href="#l57.46"></a><span id="l57.46">   var mustShowFileDialog =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -4112,23 +4112,23 @@ function SetComposeDetails(newValues) {</span>
<a href="#l58.4"></a><span id="l58.4">       &quot;msgSubject&quot;</span>
<a href="#l58.5"></a><span id="l58.5">     ).value = newValues.subject;</span>
<a href="#l58.6"></a><span id="l58.6">     SetComposeWindowTitle();</span>
<a href="#l58.7"></a><span id="l58.7">   }</span>
<a href="#l58.8"></a><span id="l58.8">   if (</span>
<a href="#l58.9"></a><span id="l58.9">     typeof newValues.body == &quot;string&quot; &amp;&amp;</span>
<a href="#l58.10"></a><span id="l58.10">     typeof newValues.plainTextBody == &quot;string&quot;</span>
<a href="#l58.11"></a><span id="l58.11">   ) {</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-    throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l58.14"></a><span id="l58.14">   }</span>
<a href="#l58.15"></a><span id="l58.15"> </span>
<a href="#l58.16"></a><span id="l58.16">   let editor = GetCurrentEditor();</span>
<a href="#l58.17"></a><span id="l58.17">   if (typeof newValues.body == &quot;string&quot;) {</span>
<a href="#l58.18"></a><span id="l58.18">     if (!IsHTMLEditor()) {</span>
<a href="#l58.19"></a><span id="l58.19" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l58.20"></a><span id="l58.20" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l58.21"></a><span id="l58.21">     }</span>
<a href="#l58.22"></a><span id="l58.22">     editor.rebuildDocumentFromSource(newValues.body);</span>
<a href="#l58.23"></a><span id="l58.23">     gMsgCompose.bodyModified = true;</span>
<a href="#l58.24"></a><span id="l58.24">   }</span>
<a href="#l58.25"></a><span id="l58.25">   if (typeof newValues.plainTextBody == &quot;string&quot;) {</span>
<a href="#l58.26"></a><span id="l58.26">     editor.selectAll();</span>
<a href="#l58.27"></a><span id="l58.27">     editor.insertText(newValues.plainTextBody);</span>
<a href="#l58.28"></a><span id="l58.28">     gMsgCompose.bodyModified = true;</span>
<a href="#l58.29"></a><span id="l58.29" class="difflineat">@@ -4415,17 +4415,17 @@ function CompleteGenericSendMessage(msgT</span>
<a href="#l58.30"></a><span id="l58.30">     // compose-send-message event for listeners, so they can do</span>
<a href="#l58.31"></a><span id="l58.31">     // any pre-security work before sending.</span>
<a href="#l58.32"></a><span id="l58.32">     var event = document.createEvent(&quot;UIEvents&quot;);</span>
<a href="#l58.33"></a><span id="l58.33">     event.initEvent(&quot;compose-send-message&quot;, false, true);</span>
<a href="#l58.34"></a><span id="l58.34">     var msgcomposeWindow = document.getElementById(&quot;msgcomposeWindow&quot;);</span>
<a href="#l58.35"></a><span id="l58.35">     msgcomposeWindow.setAttribute(&quot;msgtype&quot;, msgType);</span>
<a href="#l58.36"></a><span id="l58.36">     msgcomposeWindow.dispatchEvent(event);</span>
<a href="#l58.37"></a><span id="l58.37">     if (event.defaultPrevented) {</span>
<a href="#l58.38"></a><span id="l58.38" class="difflineminus">-      throw Cr.NS_ERROR_ABORT;</span>
<a href="#l58.39"></a><span id="l58.39" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l58.40"></a><span id="l58.40">     }</span>
<a href="#l58.41"></a><span id="l58.41"> </span>
<a href="#l58.42"></a><span id="l58.42">     gAutoSaving = msgType == Ci.nsIMsgCompDeliverMode.AutoSaveAsDraft;</span>
<a href="#l58.43"></a><span id="l58.43"> </span>
<a href="#l58.44"></a><span id="l58.44">     // disable the ui if we're not auto-saving</span>
<a href="#l58.45"></a><span id="l58.45">     if (!gAutoSaving) {</span>
<a href="#l58.46"></a><span id="l58.46">       ToggleWindowLock(true);</span>
<a href="#l58.47"></a><span id="l58.47">     } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mail/components/extensions/parent/ext-cloudFile.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mail/components/extensions/parent/ext-cloudFile.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -176,24 +176,24 @@ class CloudFileAccount {</span>
<a href="#l59.4"></a><span id="l59.4">     try {</span>
<a href="#l59.5"></a><span id="l59.5">       if (this._uploads.has(uploadId)) {</span>
<a href="#l59.6"></a><span id="l59.6">         results = await this.extension.emit(&quot;deleteFile&quot;, this, {</span>
<a href="#l59.7"></a><span id="l59.7">           id: uploadId,</span>
<a href="#l59.8"></a><span id="l59.8">         });</span>
<a href="#l59.9"></a><span id="l59.9">       }</span>
<a href="#l59.10"></a><span id="l59.10">       this._uploads.delete(uploadId);</span>
<a href="#l59.11"></a><span id="l59.11">     } catch (ex) {</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l59.14"></a><span id="l59.14">     }</span>
<a href="#l59.15"></a><span id="l59.15"> </span>
<a href="#l59.16"></a><span id="l59.16">     if (!results || results.length == 0) {</span>
<a href="#l59.17"></a><span id="l59.17">       console.error(</span>
<a href="#l59.18"></a><span id="l59.18">         `Missing cloudFile.onFileDeleted listener for ${this.extension.id}`</span>
<a href="#l59.19"></a><span id="l59.19">       );</span>
<a href="#l59.20"></a><span id="l59.20" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l59.21"></a><span id="l59.21" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l59.22"></a><span id="l59.22">     }</span>
<a href="#l59.23"></a><span id="l59.23">   }</span>
<a href="#l59.24"></a><span id="l59.24"> }</span>
<a href="#l59.25"></a><span id="l59.25"> </span>
<a href="#l59.26"></a><span id="l59.26"> function convertCloudFileAccount(nativeAccount) {</span>
<a href="#l59.27"></a><span id="l59.27">   return {</span>
<a href="#l59.28"></a><span id="l59.28">     id: nativeAccount.accountKey,</span>
<a href="#l59.29"></a><span id="l59.29">     name: nativeAccount.displayName,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -2709,17 +2709,17 @@ class InternalHandlerInfoWrapper extends</span>
<a href="#l60.4"></a><span id="l60.4">   // Override store so we so we can notify any code listening for registration</span>
<a href="#l60.5"></a><span id="l60.5">   // or unregistration of this handler.</span>
<a href="#l60.6"></a><span id="l60.6">   store() {</span>
<a href="#l60.7"></a><span id="l60.7">     super.store();</span>
<a href="#l60.8"></a><span id="l60.8">     Services.obs.notifyObservers(null, this._handlerChanged);</span>
<a href="#l60.9"></a><span id="l60.9">   }</span>
<a href="#l60.10"></a><span id="l60.10"> </span>
<a href="#l60.11"></a><span id="l60.11">   get enabled() {</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l60.14"></a><span id="l60.14">   }</span>
<a href="#l60.15"></a><span id="l60.15"> </span>
<a href="#l60.16"></a><span id="l60.16">   get description() {</span>
<a href="#l60.17"></a><span id="l60.17">     return gGeneralPane._prefsBundle.getString(this._appPrefLabel);</span>
<a href="#l60.18"></a><span id="l60.18">   }</span>
<a href="#l60.19"></a><span id="l60.19"> }</span>
<a href="#l60.20"></a><span id="l60.20"> </span>
<a href="#l60.21"></a><span id="l60.21"> function addTagCallback(aName, aColor) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/core.jsm</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/core.jsm</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -296,17 +296,17 @@ function failureOn(ex, status) {</span>
<a href="#l61.4"></a><span id="l61.4">   getEnigmailLog().ERROR(</span>
<a href="#l61.5"></a><span id="l61.5">     &quot;core.jsm: Enigmail.initialize: Error - &quot; +</span>
<a href="#l61.6"></a><span id="l61.6">       status.initializationError +</span>
<a href="#l61.7"></a><span id="l61.7">       &quot;\n&quot;</span>
<a href="#l61.8"></a><span id="l61.8">   );</span>
<a href="#l61.9"></a><span id="l61.9">   getEnigmailLog().DEBUG(</span>
<a href="#l61.10"></a><span id="l61.10">     &quot;core.jsm: Enigmail.initialize: exception=&quot; + ex.toString() + &quot;\n&quot;</span>
<a href="#l61.11"></a><span id="l61.11">   );</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-  throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+  throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l61.14"></a><span id="l61.14"> }</span>
<a href="#l61.15"></a><span id="l61.15"> </span>
<a href="#l61.16"></a><span id="l61.16"> function getEnvironment(status) {</span>
<a href="#l61.17"></a><span id="l61.17">   try {</span>
<a href="#l61.18"></a><span id="l61.18">     return Cc[&quot;@mozilla.org/process/environment;1&quot;].getService(nsIEnvironment);</span>
<a href="#l61.19"></a><span id="l61.19">   } catch (ex) {</span>
<a href="#l61.20"></a><span id="l61.20">     failureOn(ex, status);</span>
<a href="#l61.21"></a><span id="l61.21">   }</span>
<a href="#l61.22"></a><span id="l61.22" class="difflineat">@@ -492,17 +492,17 @@ class Factory {</span>
<a href="#l61.23"></a><span id="l61.23">   constructor(component) {</span>
<a href="#l61.24"></a><span id="l61.24">     this.component = component;</span>
<a href="#l61.25"></a><span id="l61.25">     this.register();</span>
<a href="#l61.26"></a><span id="l61.26">     Object.freeze(this);</span>
<a href="#l61.27"></a><span id="l61.27">   }</span>
<a href="#l61.28"></a><span id="l61.28"> </span>
<a href="#l61.29"></a><span id="l61.29">   createInstance(outer, iid) {</span>
<a href="#l61.30"></a><span id="l61.30">     if (outer) {</span>
<a href="#l61.31"></a><span id="l61.31" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l61.32"></a><span id="l61.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l61.33"></a><span id="l61.33">     }</span>
<a href="#l61.34"></a><span id="l61.34">     return new this.component();</span>
<a href="#l61.35"></a><span id="l61.35">   }</span>
<a href="#l61.36"></a><span id="l61.36"> </span>
<a href="#l61.37"></a><span id="l61.37">   register() {</span>
<a href="#l61.38"></a><span id="l61.38">     Cm.registerFactory(</span>
<a href="#l61.39"></a><span id="l61.39">       this.component.prototype.classID,</span>
<a href="#l61.40"></a><span id="l61.40">       this.component.prototype.classDescription,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/files.jsm</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/files.jsm</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -142,17 +142,17 @@ var EnigmailFiles = {</span>
<a href="#l62.4"></a><span id="l62.4">         localFile = Cc[NS_FILE_CONTRACTID].createInstance(Ci.nsIFile);</span>
<a href="#l62.5"></a><span id="l62.5">         EnigmailFiles.initPath(localFile, filePath);</span>
<a href="#l62.6"></a><span id="l62.6">       } else {</span>
<a href="#l62.7"></a><span id="l62.7">         localFile = filePath.QueryInterface(Ci.nsIFile);</span>
<a href="#l62.8"></a><span id="l62.8">       }</span>
<a href="#l62.9"></a><span id="l62.9"> </span>
<a href="#l62.10"></a><span id="l62.10">       if (localFile.exists()) {</span>
<a href="#l62.11"></a><span id="l62.11">         if (localFile.isDirectory() || !localFile.isWritable()) {</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-          throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l62.14"></a><span id="l62.14">         }</span>
<a href="#l62.15"></a><span id="l62.15"> </span>
<a href="#l62.16"></a><span id="l62.16">         if (!permissions) {</span>
<a href="#l62.17"></a><span id="l62.17">           permissions = localFile.permissions;</span>
<a href="#l62.18"></a><span id="l62.18">         }</span>
<a href="#l62.19"></a><span id="l62.19">       }</span>
<a href="#l62.20"></a><span id="l62.20"> </span>
<a href="#l62.21"></a><span id="l62.21">       if (!permissions) {</span>
<a href="#l62.22"></a><span id="l62.22" class="difflineat">@@ -408,17 +408,17 @@ var EnigmailFiles = {</span>
<a href="#l62.23"></a><span id="l62.23">     try {</span>
<a href="#l62.24"></a><span id="l62.24">       const fileOutStream = EnigmailFiles.createFileStream(</span>
<a href="#l62.25"></a><span id="l62.25">         filePath,</span>
<a href="#l62.26"></a><span id="l62.26">         permissions</span>
<a href="#l62.27"></a><span id="l62.27">       );</span>
<a href="#l62.28"></a><span id="l62.28"> </span>
<a href="#l62.29"></a><span id="l62.29">       if (data.length) {</span>
<a href="#l62.30"></a><span id="l62.30">         if (fileOutStream.write(data, data.length) != data.length) {</span>
<a href="#l62.31"></a><span id="l62.31" class="difflineminus">-          throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l62.32"></a><span id="l62.32" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l62.33"></a><span id="l62.33">         }</span>
<a href="#l62.34"></a><span id="l62.34"> </span>
<a href="#l62.35"></a><span id="l62.35">         fileOutStream.flush();</span>
<a href="#l62.36"></a><span id="l62.36">       }</span>
<a href="#l62.37"></a><span id="l62.37">       fileOutStream.close();</span>
<a href="#l62.38"></a><span id="l62.38">     } catch (ex) {</span>
<a href="#l62.39"></a><span id="l62.39">       lazyLog().ERROR(</span>
<a href="#l62.40"></a><span id="l62.40">         &quot;files.jsm: writeFileContents: Failed to write to &quot; + filePath + &quot;\n&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/funcs.jsm</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/funcs.jsm</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -51,17 +51,17 @@ var EnigmailFuncs = {</span>
<a href="#l63.4"></a><span id="l63.4">     while ((qStart = mailAddrs.indexOf('&quot;')) &gt;= 0) {</span>
<a href="#l63.5"></a><span id="l63.5">       qEnd = mailAddrs.indexOf('&quot;', qStart + 1);</span>
<a href="#l63.6"></a><span id="l63.6">       if (qEnd &lt; 0) {</span>
<a href="#l63.7"></a><span id="l63.7">         EnigmailLog.ERROR(</span>
<a href="#l63.8"></a><span id="l63.8">           &quot;funcs.jsm: stripEmail: Unmatched quote in mail address: '&quot; +</span>
<a href="#l63.9"></a><span id="l63.9">             mailAddresses +</span>
<a href="#l63.10"></a><span id="l63.10">             &quot;'\n&quot;</span>
<a href="#l63.11"></a><span id="l63.11">         );</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-        throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l63.14"></a><span id="l63.14">       }</span>
<a href="#l63.15"></a><span id="l63.15"> </span>
<a href="#l63.16"></a><span id="l63.16">       mailAddrs =</span>
<a href="#l63.17"></a><span id="l63.17">         mailAddrs.substring(0, qStart) + mailAddrs.substring(qEnd + 1);</span>
<a href="#l63.18"></a><span id="l63.18">     }</span>
<a href="#l63.19"></a><span id="l63.19"> </span>
<a href="#l63.20"></a><span id="l63.20">     // replace any &quot;;&quot; by &quot;,&quot;; remove leading/trailing &quot;,&quot;</span>
<a href="#l63.21"></a><span id="l63.21">     mailAddrs = mailAddrs</span>
<a href="#l63.22"></a><span id="l63.22" class="difflineat">@@ -75,17 +75,17 @@ var EnigmailFuncs = {</span>
<a href="#l63.23"></a><span id="l63.23"> </span>
<a href="#l63.24"></a><span id="l63.24">     // having two &lt;..&gt; &lt;..&gt; in one email, or things like &lt;a@b.c,&gt;&lt;d@e.f&gt; is an error</span>
<a href="#l63.25"></a><span id="l63.25">     if (mailAddrs.search(MatchAddr) &lt; 0) {</span>
<a href="#l63.26"></a><span id="l63.26">       EnigmailLog.ERROR(</span>
<a href="#l63.27"></a><span id="l63.27">         &quot;funcs.jsm: stripEmail: Invalid &lt;..&gt; brackets in mail address: '&quot; +</span>
<a href="#l63.28"></a><span id="l63.28">           mailAddresses +</span>
<a href="#l63.29"></a><span id="l63.29">           &quot;'\n&quot;</span>
<a href="#l63.30"></a><span id="l63.30">       );</span>
<a href="#l63.31"></a><span id="l63.31" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l63.32"></a><span id="l63.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l63.33"></a><span id="l63.33">     }</span>
<a href="#l63.34"></a><span id="l63.34"> </span>
<a href="#l63.35"></a><span id="l63.35">     // We know that the &quot;,&quot; and the &lt; &gt; are at the right places, thus we can split by &quot;,&quot;</span>
<a href="#l63.36"></a><span id="l63.36">     let addrList = mailAddrs.split(/,/);</span>
<a href="#l63.37"></a><span id="l63.37"> </span>
<a href="#l63.38"></a><span id="l63.38">     for (let i in addrList) {</span>
<a href="#l63.39"></a><span id="l63.39">       // Extract pure e-mail address list (strip out anything before angle brackets and any whitespace)</span>
<a href="#l63.40"></a><span id="l63.40">       addrList[i] = addrList[i]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyserver.jsm</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyserver.jsm</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -96,17 +96,17 @@ function createError(errId) {</span>
<a href="#l64.4"></a><span id="l64.4">  * @param keyserver: String - name of keyserver with optional protocol and port.</span>
<a href="#l64.5"></a><span id="l64.5">  *                       E.g. keys.gnupg.net, hkps://keys.gnupg.net:443</span>
<a href="#l64.6"></a><span id="l64.6">  *</span>
<a href="#l64.7"></a><span id="l64.7">  * @return Object: {port, host, protocol} (all Strings)</span>
<a href="#l64.8"></a><span id="l64.8">  */</span>
<a href="#l64.9"></a><span id="l64.9"> function parseKeyserverUrl(keyserver) {</span>
<a href="#l64.10"></a><span id="l64.10">   if (keyserver.length &gt; 1024) {</span>
<a href="#l64.11"></a><span id="l64.11">     // insane length of keyserver is forbidden</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l64.14"></a><span id="l64.14">   }</span>
<a href="#l64.15"></a><span id="l64.15"> </span>
<a href="#l64.16"></a><span id="l64.16">   keyserver = keyserver.toLowerCase().trim();</span>
<a href="#l64.17"></a><span id="l64.17">   let protocol = &quot;&quot;;</span>
<a href="#l64.18"></a><span id="l64.18">   if (keyserver.search(/^[a-zA-Z0-9_.-]+:\/\//) === 0) {</span>
<a href="#l64.19"></a><span id="l64.19">     protocol = keyserver.replace(/^([a-zA-Z0-9_.-]+)(:\/\/.*)/, &quot;$1&quot;);</span>
<a href="#l64.20"></a><span id="l64.20">     keyserver = keyserver.replace(/^[a-zA-Z0-9_.-]+:\/\//, &quot;&quot;);</span>
<a href="#l64.21"></a><span id="l64.21">   } else {</span>
<a href="#l64.22"></a><span id="l64.22" class="difflineat">@@ -191,17 +191,17 @@ const accessHkpInternal = {</span>
<a href="#l64.23"></a><span id="l64.23">     let method = &quot;GET&quot;;</span>
<a href="#l64.24"></a><span id="l64.24">     let protocol;</span>
<a href="#l64.25"></a><span id="l64.25"> </span>
<a href="#l64.26"></a><span id="l64.26">     switch (keySrv.protocol) {</span>
<a href="#l64.27"></a><span id="l64.27">       case &quot;hkp&quot;:</span>
<a href="#l64.28"></a><span id="l64.28">         protocol = &quot;http&quot;;</span>
<a href="#l64.29"></a><span id="l64.29">         break;</span>
<a href="#l64.30"></a><span id="l64.30">       case &quot;ldap&quot;:</span>
<a href="#l64.31"></a><span id="l64.31" class="difflineminus">-        throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l64.32"></a><span id="l64.32" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l64.33"></a><span id="l64.33">       default:</span>
<a href="#l64.34"></a><span id="l64.34">         // equals to hkps</span>
<a href="#l64.35"></a><span id="l64.35">         protocol = &quot;https&quot;;</span>
<a href="#l64.36"></a><span id="l64.36">     }</span>
<a href="#l64.37"></a><span id="l64.37"> </span>
<a href="#l64.38"></a><span id="l64.38">     let url = protocol + &quot;://&quot; + keySrv.host + &quot;:&quot; + keySrv.port;</span>
<a href="#l64.39"></a><span id="l64.39"> </span>
<a href="#l64.40"></a><span id="l64.40">     if (actionFlag === EnigmailConstants.UPLOAD_KEY) {</span>
<a href="#l64.41"></a><span id="l64.41" class="difflineat">@@ -652,17 +652,17 @@ const accessKeyBase = {</span>
<a href="#l64.42"></a><span id="l64.42">   /**</span>
<a href="#l64.43"></a><span id="l64.43">    * return the URL and the HTTP access method for a given action</span>
<a href="#l64.44"></a><span id="l64.44">    */</span>
<a href="#l64.45"></a><span id="l64.45">   createRequestUrl(actionFlag, searchTerm) {</span>
<a href="#l64.46"></a><span id="l64.46">     let url = &quot;https://keybase.io/_/api/1.0/user/&quot;;</span>
<a href="#l64.47"></a><span id="l64.47"> </span>
<a href="#l64.48"></a><span id="l64.48">     if (actionFlag === EnigmailConstants.UPLOAD_KEY) {</span>
<a href="#l64.49"></a><span id="l64.49">       // not supported</span>
<a href="#l64.50"></a><span id="l64.50" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l64.51"></a><span id="l64.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l64.52"></a><span id="l64.52">     } else if (</span>
<a href="#l64.53"></a><span id="l64.53">       actionFlag === EnigmailConstants.DOWNLOAD_KEY ||</span>
<a href="#l64.54"></a><span id="l64.54">       actionFlag === EnigmailConstants.DOWNLOAD_KEY_NO_IMPORT</span>
<a href="#l64.55"></a><span id="l64.55">     ) {</span>
<a href="#l64.56"></a><span id="l64.56">       if (searchTerm.indexOf(&quot;0x&quot;) === 0) {</span>
<a href="#l64.57"></a><span id="l64.57">         searchTerm = searchTerm.substr(0, 40);</span>
<a href="#l64.58"></a><span id="l64.58">       }</span>
<a href="#l64.59"></a><span id="l64.59">       url +=</span>
<a href="#l64.60"></a><span id="l64.60" class="difflineat">@@ -915,17 +915,17 @@ const accessKeyBase = {</span>
<a href="#l64.61"></a><span id="l64.61">       retObj.errorDetails = ex.errorDetails;</span>
<a href="#l64.62"></a><span id="l64.62">       throw retObj;</span>
<a href="#l64.63"></a><span id="l64.63">     }</span>
<a href="#l64.64"></a><span id="l64.64"> </span>
<a href="#l64.65"></a><span id="l64.65">     return retObj;</span>
<a href="#l64.66"></a><span id="l64.66">   },</span>
<a href="#l64.67"></a><span id="l64.67"> </span>
<a href="#l64.68"></a><span id="l64.68">   upload() {</span>
<a href="#l64.69"></a><span id="l64.69" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l64.70"></a><span id="l64.70" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l64.71"></a><span id="l64.71">   },</span>
<a href="#l64.72"></a><span id="l64.72"> </span>
<a href="#l64.73"></a><span id="l64.73">   refresh(keyServer, listener = null) {</span>
<a href="#l64.74"></a><span id="l64.74">     EnigmailLog.DEBUG(`keyserver.jsm: accessKeyBase: refresh()\n`);</span>
<a href="#l64.75"></a><span id="l64.75">     let keyList = EnigmailKeyRing.getAllKeys()</span>
<a href="#l64.76"></a><span id="l64.76">       .keyList.map(keyObj =&gt; {</span>
<a href="#l64.77"></a><span id="l64.77">         return &quot;0x&quot; + keyObj.fpr;</span>
<a href="#l64.78"></a><span id="l64.78">       })</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/mimeEncrypt.jsm</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -176,32 +176,32 @@ PgpMimeEncrypt.prototype = {</span>
<a href="#l65.4"></a><span id="l65.4">     isDraft</span>
<a href="#l65.5"></a><span id="l65.5">   ) {</span>
<a href="#l65.6"></a><span id="l65.6">     EnigmailLog.DEBUG(&quot;mimeEncrypt.js: beginCryptoEncapsulation\n&quot;);</span>
<a href="#l65.7"></a><span id="l65.7"> </span>
<a href="#l65.8"></a><span id="l65.8">     if (this.checkSMime &amp;&amp; !this.smimeCompose) {</span>
<a href="#l65.9"></a><span id="l65.9">       LOCAL_DEBUG(</span>
<a href="#l65.10"></a><span id="l65.10">         &quot;mimeEncrypt.js: beginCryptoEncapsulation: ERROR MsgComposeSecure not instantiated\n&quot;</span>
<a href="#l65.11"></a><span id="l65.11">       );</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l65.14"></a><span id="l65.14">     }</span>
<a href="#l65.15"></a><span id="l65.15"> </span>
<a href="#l65.16"></a><span id="l65.16">     if (this.useSmime) {</span>
<a href="#l65.17"></a><span id="l65.17">       return this.smimeCompose.beginCryptoEncapsulation(</span>
<a href="#l65.18"></a><span id="l65.18">         outStream,</span>
<a href="#l65.19"></a><span id="l65.19">         recipientList,</span>
<a href="#l65.20"></a><span id="l65.20">         msgCompFields,</span>
<a href="#l65.21"></a><span id="l65.21">         msgIdentity,</span>
<a href="#l65.22"></a><span id="l65.22">         sendReport,</span>
<a href="#l65.23"></a><span id="l65.23">         isDraft</span>
<a href="#l65.24"></a><span id="l65.24">       );</span>
<a href="#l65.25"></a><span id="l65.25">     }</span>
<a href="#l65.26"></a><span id="l65.26"> </span>
<a href="#l65.27"></a><span id="l65.27">     if (!outStream) {</span>
<a href="#l65.28"></a><span id="l65.28" class="difflineminus">-      throw Cr.NS_ERROR_NULL_POINTER;</span>
<a href="#l65.29"></a><span id="l65.29" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NULL_POINTER);</span>
<a href="#l65.30"></a><span id="l65.30">     }</span>
<a href="#l65.31"></a><span id="l65.31"> </span>
<a href="#l65.32"></a><span id="l65.32">     try {</span>
<a href="#l65.33"></a><span id="l65.33">       this.outStream = outStream;</span>
<a href="#l65.34"></a><span id="l65.34">       this.isDraft = isDraft;</span>
<a href="#l65.35"></a><span id="l65.35"> </span>
<a href="#l65.36"></a><span id="l65.36">       this.msgCompFields = msgCompFields;</span>
<a href="#l65.37"></a><span id="l65.37">       this.outStringStream = Cc[</span>
<a href="#l65.38"></a><span id="l65.38" class="difflineat">@@ -223,17 +223,17 @@ PgpMimeEncrypt.prototype = {</span>
<a href="#l65.39"></a><span id="l65.39">         if (this.sendFlags &amp; EnigmailConstants.SEND_ENCRYPTED) {</span>
<a href="#l65.40"></a><span id="l65.40">           // applies to encrypted and signed &amp; encrypted</span>
<a href="#l65.41"></a><span id="l65.41">           this.cryptoMode = MIME_ENCRYPTED;</span>
<a href="#l65.42"></a><span id="l65.42">         } else if (this.sendFlags &amp; EnigmailConstants.SEND_SIGNED) {</span>
<a href="#l65.43"></a><span id="l65.43">           this.cryptoMode = MIME_SIGNED;</span>
<a href="#l65.44"></a><span id="l65.44">           this.hashAlgorithm = &quot;SHA256&quot;; // TODO: coordinate with RNP.jsm</span>
<a href="#l65.45"></a><span id="l65.45">         }</span>
<a href="#l65.46"></a><span id="l65.46">       } else {</span>
<a href="#l65.47"></a><span id="l65.47" class="difflineminus">-        throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l65.48"></a><span id="l65.48" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l65.49"></a><span id="l65.49">       }</span>
<a href="#l65.50"></a><span id="l65.50"> </span>
<a href="#l65.51"></a><span id="l65.51">       this.cryptoBoundary = EnigmailMime.createBoundary();</span>
<a href="#l65.52"></a><span id="l65.52">       this.startCryptoHeaders();</span>
<a href="#l65.53"></a><span id="l65.53">     } catch (ex) {</span>
<a href="#l65.54"></a><span id="l65.54">       console.debug(ex);</span>
<a href="#l65.55"></a><span id="l65.55">       EnigmailLog.writeException(&quot;mimeEncrypt.js&quot;, ex);</span>
<a href="#l65.56"></a><span id="l65.56">       throw ex;</span>
<a href="#l65.57"></a><span id="l65.57" class="difflineat">@@ -467,17 +467,17 @@ PgpMimeEncrypt.prototype = {</span>
<a href="#l65.58"></a><span id="l65.58"> </span>
<a href="#l65.59"></a><span id="l65.59">     this.writeOut(&quot;\r\n--&quot; + this.cryptoBoundary + &quot;--\r\n&quot;);</span>
<a href="#l65.60"></a><span id="l65.60">   },</span>
<a href="#l65.61"></a><span id="l65.61"> </span>
<a href="#l65.62"></a><span id="l65.62">   finishCryptoEncapsulation(abort, sendReport) {</span>
<a href="#l65.63"></a><span id="l65.63">     EnigmailLog.DEBUG(&quot;mimeEncrypt.js: finishCryptoEncapsulation\n&quot;);</span>
<a href="#l65.64"></a><span id="l65.64"> </span>
<a href="#l65.65"></a><span id="l65.65">     if (this.checkSMime &amp;&amp; !this.smimeCompose) {</span>
<a href="#l65.66"></a><span id="l65.66" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l65.67"></a><span id="l65.67" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l65.68"></a><span id="l65.68">     }</span>
<a href="#l65.69"></a><span id="l65.69"> </span>
<a href="#l65.70"></a><span id="l65.70">     if (this.useSmime) {</span>
<a href="#l65.71"></a><span id="l65.71">       this.smimeCompose.finishCryptoEncapsulation(abort, sendReport);</span>
<a href="#l65.72"></a><span id="l65.72">       return;</span>
<a href="#l65.73"></a><span id="l65.73">     }</span>
<a href="#l65.74"></a><span id="l65.74"> </span>
<a href="#l65.75"></a><span id="l65.75">     if ((this.sendFlags &amp; EnigmailConstants.SEND_VERBATIM) !== 0) {</span>
<a href="#l65.76"></a><span id="l65.76" class="difflineat">@@ -555,17 +555,17 @@ PgpMimeEncrypt.prototype = {</span>
<a href="#l65.77"></a><span id="l65.77">   },</span>
<a href="#l65.78"></a><span id="l65.78"> </span>
<a href="#l65.79"></a><span id="l65.79">   mimeCryptoWriteBlock(buffer, length) {</span>
<a href="#l65.80"></a><span id="l65.80">     if (gDebugLogLevel &gt; 4) {</span>
<a href="#l65.81"></a><span id="l65.81">       LOCAL_DEBUG(&quot;mimeEncrypt.js: mimeCryptoWriteBlock: &quot; + length + &quot;\n&quot;);</span>
<a href="#l65.82"></a><span id="l65.82">     }</span>
<a href="#l65.83"></a><span id="l65.83"> </span>
<a href="#l65.84"></a><span id="l65.84">     if (this.checkSMime &amp;&amp; !this.smimeCompose) {</span>
<a href="#l65.85"></a><span id="l65.85" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l65.86"></a><span id="l65.86" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l65.87"></a><span id="l65.87">     }</span>
<a href="#l65.88"></a><span id="l65.88"> </span>
<a href="#l65.89"></a><span id="l65.89">     if (this.useSmime) {</span>
<a href="#l65.90"></a><span id="l65.90">       return this.smimeCompose.mimeCryptoWriteBlock(buffer, length);</span>
<a href="#l65.91"></a><span id="l65.91">     }</span>
<a href="#l65.92"></a><span id="l65.92"> </span>
<a href="#l65.93"></a><span id="l65.93">     try {</span>
<a href="#l65.94"></a><span id="l65.94">       let line = buffer.substr(0, length);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/pgpmimeHandler.jsm</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -269,17 +269,17 @@ class Factory {</span>
<a href="#l66.4"></a><span id="l66.4">   constructor(component) {</span>
<a href="#l66.5"></a><span id="l66.5">     this.component = component;</span>
<a href="#l66.6"></a><span id="l66.6">     this.register();</span>
<a href="#l66.7"></a><span id="l66.7">     Object.freeze(this);</span>
<a href="#l66.8"></a><span id="l66.8">   }</span>
<a href="#l66.9"></a><span id="l66.9"> </span>
<a href="#l66.10"></a><span id="l66.10">   createInstance(outer, iid) {</span>
<a href="#l66.11"></a><span id="l66.11">     if (outer) {</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l66.14"></a><span id="l66.14">     }</span>
<a href="#l66.15"></a><span id="l66.15">     return new this.component();</span>
<a href="#l66.16"></a><span id="l66.16">   }</span>
<a href="#l66.17"></a><span id="l66.17"> </span>
<a href="#l66.18"></a><span id="l66.18">   register() {</span>
<a href="#l66.19"></a><span id="l66.19">     Cm.registerFactory(</span>
<a href="#l66.20"></a><span id="l66.20">       this.component.prototype.classID,</span>
<a href="#l66.21"></a><span id="l66.21">       this.component.prototype.classDescription,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/protocolHandler.jsm</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/protocolHandler.jsm</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -131,17 +131,17 @@ EnigmailProtocolHandler.prototype = {</span>
<a href="#l67.4"></a><span id="l67.4">     var messageId = EnigmailData.extractMessageId(aURI.spec);</span>
<a href="#l67.5"></a><span id="l67.5">     var mimeMessageId = EnigmailData.extractMimeMessageId(aURI.spec);</span>
<a href="#l67.6"></a><span id="l67.6">     var contentType, contentCharset, contentData;</span>
<a href="#l67.7"></a><span id="l67.7"> </span>
<a href="#l67.8"></a><span id="l67.8">     if (messageId) {</span>
<a href="#l67.9"></a><span id="l67.9">       // Handle enigmail:message/...</span>
<a href="#l67.10"></a><span id="l67.10"> </span>
<a href="#l67.11"></a><span id="l67.11">       if (!EC.getEnigmailService()) {</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-        throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l67.14"></a><span id="l67.14">       }</span>
<a href="#l67.15"></a><span id="l67.15"> </span>
<a href="#l67.16"></a><span id="l67.16">       if (EnigmailURIs.getMessageURI(messageId)) {</span>
<a href="#l67.17"></a><span id="l67.17">         var messageUriObj = EnigmailURIs.getMessageURI(messageId);</span>
<a href="#l67.18"></a><span id="l67.18"> </span>
<a href="#l67.19"></a><span id="l67.19">         contentType = messageUriObj.contentType;</span>
<a href="#l67.20"></a><span id="l67.20">         contentCharset = messageUriObj.contentCharset;</span>
<a href="#l67.21"></a><span id="l67.21">         contentData = messageUriObj.contentData;</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineat">@@ -217,17 +217,17 @@ EnigmailProtocolHandler.prototype = {</span>
<a href="#l67.23"></a><span id="l67.23">       recentWin.focus();</span>
<a href="#l67.24"></a><span id="l67.24">     } else {</span>
<a href="#l67.25"></a><span id="l67.25">       var appShellSvc = Services.appShell;</span>
<a href="#l67.26"></a><span id="l67.26">       var domWin = appShellSvc.hiddenDOMWindow;</span>
<a href="#l67.27"></a><span id="l67.27"> </span>
<a href="#l67.28"></a><span id="l67.28">       domWin.open(spec, &quot;_blank&quot;, &quot;chrome,menubar,toolbar,resizable&quot;);</span>
<a href="#l67.29"></a><span id="l67.29">     }</span>
<a href="#l67.30"></a><span id="l67.30"> </span>
<a href="#l67.31"></a><span id="l67.31" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l67.32"></a><span id="l67.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l67.33"></a><span id="l67.33">   },</span>
<a href="#l67.34"></a><span id="l67.34"> </span>
<a href="#l67.35"></a><span id="l67.35">   handleMimeMessage(messageId) {</span>
<a href="#l67.36"></a><span id="l67.36">     //        EnigmailLog.DEBUG(&quot;protocolHandler.jsm: EnigmailProtocolHandler.handleMimeMessage: messageURL=&quot;+messageUriObj.originalUrl+&quot;, content length=&quot;+contentData.length+&quot;, &quot;+contentType+&quot;, &quot;+contentCharset+&quot;\n&quot;);</span>
<a href="#l67.37"></a><span id="l67.37">     EnigmailLog.DEBUG(</span>
<a href="#l67.38"></a><span id="l67.38">       &quot;protocolHandler.jsm: EnigmailProtocolHandler.handleMimeMessage: messageURL=, content length=, , \n&quot;</span>
<a href="#l67.39"></a><span id="l67.39">     );</span>
<a href="#l67.40"></a><span id="l67.40">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -213,17 +213,17 @@ function EnigReadURLContents(url, maxByt</span>
<a href="#l68.4"></a><span id="l68.4">       url +</span>
<a href="#l68.5"></a><span id="l68.5">       &quot;, &quot; +</span>
<a href="#l68.6"></a><span id="l68.6">       maxBytes +</span>
<a href="#l68.7"></a><span id="l68.7">       &quot;\n&quot;</span>
<a href="#l68.8"></a><span id="l68.8">   );</span>
<a href="#l68.9"></a><span id="l68.9"> </span>
<a href="#l68.10"></a><span id="l68.10">   var ioServ = enigGetService(ENIG_IOSERVICE_CONTRACTID, &quot;nsIIOService&quot;);</span>
<a href="#l68.11"></a><span id="l68.11">   if (!ioServ) {</span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l68.14"></a><span id="l68.14">   }</span>
<a href="#l68.15"></a><span id="l68.15"> </span>
<a href="#l68.16"></a><span id="l68.16">   var fileChannel = EnigmailStreams.createChannel(url);</span>
<a href="#l68.17"></a><span id="l68.17"> </span>
<a href="#l68.18"></a><span id="l68.18">   var rawInStream = fileChannel.open();</span>
<a href="#l68.19"></a><span id="l68.19"> </span>
<a href="#l68.20"></a><span id="l68.20">   var inStream = Cc[ENIG_BINARYINPUTSTREAM_CONTRACTID].createInstance(</span>
<a href="#l68.21"></a><span id="l68.21">     Ci.nsIBinaryInputStream</span>
<a href="#l68.22"></a><span id="l68.22" class="difflineat">@@ -248,22 +248,22 @@ function EnigReadFileContents(localFile,</span>
<a href="#l68.23"></a><span id="l68.23">     &quot;enigmailCommon.js: EnigReadFileContents: file=&quot; +</span>
<a href="#l68.24"></a><span id="l68.24">       localFile.leafName +</span>
<a href="#l68.25"></a><span id="l68.25">       &quot;, &quot; +</span>
<a href="#l68.26"></a><span id="l68.26">       maxBytes +</span>
<a href="#l68.27"></a><span id="l68.27">       &quot;\n&quot;</span>
<a href="#l68.28"></a><span id="l68.28">   );</span>
<a href="#l68.29"></a><span id="l68.29"> </span>
<a href="#l68.30"></a><span id="l68.30">   if (!localFile.exists() || !localFile.isReadable()) {</span>
<a href="#l68.31"></a><span id="l68.31" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l68.32"></a><span id="l68.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l68.33"></a><span id="l68.33">   }</span>
<a href="#l68.34"></a><span id="l68.34"> </span>
<a href="#l68.35"></a><span id="l68.35">   var ioServ = enigGetService(ENIG_IOSERVICE_CONTRACTID, &quot;nsIIOService&quot;);</span>
<a href="#l68.36"></a><span id="l68.36">   if (!ioServ) {</span>
<a href="#l68.37"></a><span id="l68.37" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l68.38"></a><span id="l68.38" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l68.39"></a><span id="l68.39">   }</span>
<a href="#l68.40"></a><span id="l68.40"> </span>
<a href="#l68.41"></a><span id="l68.41">   var fileURI = ioServ.newFileURI(localFile);</span>
<a href="#l68.42"></a><span id="l68.42">   return EnigReadURLContents(fileURI.asciiSpec, maxBytes);</span>
<a href="#l68.43"></a><span id="l68.43"> }</span>
<a href="#l68.44"></a><span id="l68.44"> </span>
<a href="#l68.45"></a><span id="l68.45"> ///////////////////////////////////////////////////////////////////////////////</span>
<a href="#l68.46"></a><span id="l68.46"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -2142,17 +2142,17 @@ Enigmail.msg = {</span>
<a href="#l69.4"></a><span id="l69.4">   },</span>
<a href="#l69.5"></a><span id="l69.5"> </span>
<a href="#l69.6"></a><span id="l69.6">   createEnigmailSecurityFields(oldSecurityInfo) {</span>
<a href="#l69.7"></a><span id="l69.7">     let newSecurityInfo = EnigmailMimeEncrypt.createMimeEncrypt(</span>
<a href="#l69.8"></a><span id="l69.8">       Enigmail.msg.getSecurityParams()</span>
<a href="#l69.9"></a><span id="l69.9">     );</span>
<a href="#l69.10"></a><span id="l69.10"> </span>
<a href="#l69.11"></a><span id="l69.11">     if (!newSecurityInfo) {</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l69.14"></a><span id="l69.14">     }</span>
<a href="#l69.15"></a><span id="l69.15"> </span>
<a href="#l69.16"></a><span id="l69.16">     Enigmail.msg.setSecurityParams(newSecurityInfo);</span>
<a href="#l69.17"></a><span id="l69.17">   },</span>
<a href="#l69.18"></a><span id="l69.18"> </span>
<a href="#l69.19"></a><span id="l69.19">   /*</span>
<a href="#l69.20"></a><span id="l69.20">   sendSmimeEncrypted: function(msgSendType, sendFlags, isOffline) {</span>
<a href="#l69.21"></a><span id="l69.21">     let recList;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mail/test/browser/notification/browser_notification.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mail/test/browser/notification/browser_notification.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -52,17 +52,17 @@ var gMockAlertsService = {</span>
<a href="#l70.4"></a><span id="l70.4">     cookie,</span>
<a href="#l70.5"></a><span id="l70.5">     alertListener,</span>
<a href="#l70.6"></a><span id="l70.6">     name</span>
<a href="#l70.7"></a><span id="l70.7">   ) {</span>
<a href="#l70.8"></a><span id="l70.8">     // Setting the _doFail flag allows us to revert to the newmailalert.xhtml</span>
<a href="#l70.9"></a><span id="l70.9">     // notification</span>
<a href="#l70.10"></a><span id="l70.10">     if (this._doFail) {</span>
<a href="#l70.11"></a><span id="l70.11">       SimpleTest.expectUncaughtException(true);</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l70.14"></a><span id="l70.14">     }</span>
<a href="#l70.15"></a><span id="l70.15">     this._didNotify = true;</span>
<a href="#l70.16"></a><span id="l70.16">     this._imageUrl = imageUrl;</span>
<a href="#l70.17"></a><span id="l70.17">     this._title = title;</span>
<a href="#l70.18"></a><span id="l70.18">     this._text = text;</span>
<a href="#l70.19"></a><span id="l70.19">     this._textClickable = textClickable;</span>
<a href="#l70.20"></a><span id="l70.20">     this._cookie = cookie;</span>
<a href="#l70.21"></a><span id="l70.21">     this._alertListener = alertListener;</span>
<a href="#l70.22"></a><span id="l70.22" class="difflineat">@@ -95,21 +95,21 @@ var gMockAlertsService = {</span>
<a href="#l70.23"></a><span id="l70.23">     this._alertListener = null;</span>
<a href="#l70.24"></a><span id="l70.24">     this._name = null;</span>
<a href="#l70.25"></a><span id="l70.25">   },</span>
<a href="#l70.26"></a><span id="l70.26"> };</span>
<a href="#l70.27"></a><span id="l70.27"> </span>
<a href="#l70.28"></a><span id="l70.28"> var gMockAlertsServiceFactory = {</span>
<a href="#l70.29"></a><span id="l70.29">   createInstance(aOuter, aIID) {</span>
<a href="#l70.30"></a><span id="l70.30">     if (aOuter != null) {</span>
<a href="#l70.31"></a><span id="l70.31" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l70.32"></a><span id="l70.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l70.33"></a><span id="l70.33">     }</span>
<a href="#l70.34"></a><span id="l70.34"> </span>
<a href="#l70.35"></a><span id="l70.35">     if (!aIID.equals(Ci.nsIAlertsService)) {</span>
<a href="#l70.36"></a><span id="l70.36" class="difflineminus">-      throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l70.37"></a><span id="l70.37" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l70.38"></a><span id="l70.38">     }</span>
<a href="#l70.39"></a><span id="l70.39"> </span>
<a href="#l70.40"></a><span id="l70.40">     return gMockAlertsService;</span>
<a href="#l70.41"></a><span id="l70.41">   },</span>
<a href="#l70.42"></a><span id="l70.42"> };</span>
<a href="#l70.43"></a><span id="l70.43"> </span>
<a href="#l70.44"></a><span id="l70.44"> add_task(function setupModule(module) {</span>
<a href="#l70.45"></a><span id="l70.45">   // Register the mock alerts service</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mail/test/browser/shared-modules/AttachmentHelpers.jsm</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mail/test/browser/shared-modules/AttachmentHelpers.jsm</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -33,17 +33,17 @@ var gMockFilePicker = {</span>
<a href="#l71.4"></a><span id="l71.4">   QueryInterface: ChromeUtils.generateQI([Ci.nsIFilePicker]),</span>
<a href="#l71.5"></a><span id="l71.5">   defaultExtension: &quot;&quot;,</span>
<a href="#l71.6"></a><span id="l71.6">   filterIndex: null,</span>
<a href="#l71.7"></a><span id="l71.7">   displayDirectory: null,</span>
<a href="#l71.8"></a><span id="l71.8">   returnFiles: [],</span>
<a href="#l71.9"></a><span id="l71.9">   addToRecentDocs: false,</span>
<a href="#l71.10"></a><span id="l71.10"> </span>
<a href="#l71.11"></a><span id="l71.11">   get defaultString() {</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l71.14"></a><span id="l71.14">   },</span>
<a href="#l71.15"></a><span id="l71.15"> </span>
<a href="#l71.16"></a><span id="l71.16">   get fileURL() {</span>
<a href="#l71.17"></a><span id="l71.17">     return null;</span>
<a href="#l71.18"></a><span id="l71.18">   },</span>
<a href="#l71.19"></a><span id="l71.19"> </span>
<a href="#l71.20"></a><span id="l71.20">   get file() {</span>
<a href="#l71.21"></a><span id="l71.21">     if (this.returnFiles.length &gt;= 1) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mail/test/browser/shared-modules/CloudfileHelpers.jsm</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mail/test/browser/shared-modules/CloudfileHelpers.jsm</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -86,17 +86,17 @@ MockCloudfileAccount.prototype = {</span>
<a href="#l72.4"></a><span id="l72.4">     });</span>
<a href="#l72.5"></a><span id="l72.5">   },</span>
<a href="#l72.6"></a><span id="l72.6"> </span>
<a href="#l72.7"></a><span id="l72.7">   urlForFile(aFile) {</span>
<a href="#l72.8"></a><span id="l72.8">     return `http://www.example.com/${this.accountKey}/${aFile.leafName}`;</span>
<a href="#l72.9"></a><span id="l72.9">   },</span>
<a href="#l72.10"></a><span id="l72.10"> </span>
<a href="#l72.11"></a><span id="l72.11">   cancelFileUpload(aUploadId) {</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l72.14"></a><span id="l72.14">   },</span>
<a href="#l72.15"></a><span id="l72.15"> </span>
<a href="#l72.16"></a><span id="l72.16">   deleteFile(aUploadId) {</span>
<a href="#l72.17"></a><span id="l72.17">     return new Promise(resolve =&gt; fdh.mc.window.setTimeout(resolve));</span>
<a href="#l72.18"></a><span id="l72.18">   },</span>
<a href="#l72.19"></a><span id="l72.19"> </span>
<a href="#l72.20"></a><span id="l72.20">   get displayName() {</span>
<a href="#l72.21"></a><span id="l72.21">     return cloudFileAccounts.getDisplayName(this.accountKey);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mail/test/browser/shared-modules/MockObjectHelpers.jsm</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mail/test/browser/shared-modules/MockObjectHelpers.jsm</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -25,17 +25,17 @@ function MockObjectRegisterer(aContractI</span>
<a href="#l73.4"></a><span id="l73.4"> }</span>
<a href="#l73.5"></a><span id="l73.5"> </span>
<a href="#l73.6"></a><span id="l73.6"> MockObjectRegisterer.prototype = {</span>
<a href="#l73.7"></a><span id="l73.7">   register: function MOR_register() {</span>
<a href="#l73.8"></a><span id="l73.8">     let providedConstructor = this._component;</span>
<a href="#l73.9"></a><span id="l73.9">     this._mockFactory = {</span>
<a href="#l73.10"></a><span id="l73.10">       createInstance: function MF_createInstance(aOuter, aIid) {</span>
<a href="#l73.11"></a><span id="l73.11">         if (aOuter != null) {</span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-          throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l73.14"></a><span id="l73.14">         }</span>
<a href="#l73.15"></a><span id="l73.15">         return new providedConstructor().QueryInterface(aIid);</span>
<a href="#l73.16"></a><span id="l73.16">       },</span>
<a href="#l73.17"></a><span id="l73.17">     };</span>
<a href="#l73.18"></a><span id="l73.18"> </span>
<a href="#l73.19"></a><span id="l73.19">     let componentRegistrar = Cm.QueryInterface(Ci.nsIComponentRegistrar);</span>
<a href="#l73.20"></a><span id="l73.20"> </span>
<a href="#l73.21"></a><span id="l73.21">     componentRegistrar.registerFactory(</span>
<a href="#l73.22"></a><span id="l73.22" class="difflineat">@@ -89,17 +89,17 @@ MockObjectReplacer.prototype = {</span>
<a href="#l73.23"></a><span id="l73.23">       throw Error(&quot;Invalid object state when calling register()&quot;);</span>
<a href="#l73.24"></a><span id="l73.24">     }</span>
<a href="#l73.25"></a><span id="l73.25"> </span>
<a href="#l73.26"></a><span id="l73.26">     // Define a factory that creates a new object using the given constructor.</span>
<a href="#l73.27"></a><span id="l73.27">     var providedConstructor = this._replacementCtor;</span>
<a href="#l73.28"></a><span id="l73.28">     this._mockFactory = {</span>
<a href="#l73.29"></a><span id="l73.29">       createInstance(aOuter, aIid) {</span>
<a href="#l73.30"></a><span id="l73.30">         if (aOuter != null) {</span>
<a href="#l73.31"></a><span id="l73.31" class="difflineminus">-          throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l73.32"></a><span id="l73.32" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l73.33"></a><span id="l73.33">         }</span>
<a href="#l73.34"></a><span id="l73.34">         return new providedConstructor().QueryInterface(aIid);</span>
<a href="#l73.35"></a><span id="l73.35">       },</span>
<a href="#l73.36"></a><span id="l73.36">     };</span>
<a href="#l73.37"></a><span id="l73.37"> </span>
<a href="#l73.38"></a><span id="l73.38">     var retVal = swapFactoryRegistration(</span>
<a href="#l73.39"></a><span id="l73.39">       this._cid,</span>
<a href="#l73.40"></a><span id="l73.40">       this._originalCID,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mail/test/browser/shared-modules/PromptHelpers.jsm</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mail/test/browser/shared-modules/PromptHelpers.jsm</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -40,21 +40,21 @@ var gMockAuthPromptFactory = {</span>
<a href="#l74.4"></a><span id="l74.4"> };</span>
<a href="#l74.5"></a><span id="l74.5"> </span>
<a href="#l74.6"></a><span id="l74.6"> var gMockAuthPrompt = {</span>
<a href="#l74.7"></a><span id="l74.7">   password: &quot;&quot;,</span>
<a href="#l74.8"></a><span id="l74.8"> </span>
<a href="#l74.9"></a><span id="l74.9">   QueryInterface: ChromeUtils.generateQI([Ci.nsIAuthPrompt]),</span>
<a href="#l74.10"></a><span id="l74.10"> </span>
<a href="#l74.11"></a><span id="l74.11">   prompt(aTitle, aText, aRealm, aSave, aDefaultText) {</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l74.14"></a><span id="l74.14">   },</span>
<a href="#l74.15"></a><span id="l74.15"> </span>
<a href="#l74.16"></a><span id="l74.16">   promptUsernameAndPassword(aTitle, aText, aRealm, aSave, aUser, aPwd) {</span>
<a href="#l74.17"></a><span id="l74.17" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l74.18"></a><span id="l74.18" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l74.19"></a><span id="l74.19">   },</span>
<a href="#l74.20"></a><span id="l74.20"> </span>
<a href="#l74.21"></a><span id="l74.21">   promptPassword(aTitle, aText, aRealm, aSave, aPwd) {</span>
<a href="#l74.22"></a><span id="l74.22">     aPwd.value = this.password;</span>
<a href="#l74.23"></a><span id="l74.23">     return true;</span>
<a href="#l74.24"></a><span id="l74.24">   },</span>
<a href="#l74.25"></a><span id="l74.25"> };</span>
<a href="#l74.26"></a><span id="l74.26"> </span>
<a href="#l74.27"></a><span id="l74.27" class="difflineat">@@ -239,18 +239,18 @@ var gMockPromptService = {</span>
<a href="#l74.28"></a><span id="l74.28">       &quot;nsIPromptService&quot;</span>
<a href="#l74.29"></a><span id="l74.29">     );</span>
<a href="#l74.30"></a><span id="l74.30">   },</span>
<a href="#l74.31"></a><span id="l74.31"> };</span>
<a href="#l74.32"></a><span id="l74.32"> </span>
<a href="#l74.33"></a><span id="l74.33"> var gMockPromptServiceFactory = {</span>
<a href="#l74.34"></a><span id="l74.34">   createInstance(aOuter, aIID) {</span>
<a href="#l74.35"></a><span id="l74.35">     if (aOuter != null) {</span>
<a href="#l74.36"></a><span id="l74.36" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l74.37"></a><span id="l74.37" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l74.38"></a><span id="l74.38">     }</span>
<a href="#l74.39"></a><span id="l74.39"> </span>
<a href="#l74.40"></a><span id="l74.40">     if (!aIID.equals(Ci.nsIPromptService)) {</span>
<a href="#l74.41"></a><span id="l74.41" class="difflineminus">-      throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l74.42"></a><span id="l74.42" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l74.43"></a><span id="l74.43">     }</span>
<a href="#l74.44"></a><span id="l74.44"> </span>
<a href="#l74.45"></a><span id="l74.45">     return gMockPromptService;</span>
<a href="#l74.46"></a><span id="l74.46">   },</span>
<a href="#l74.47"></a><span id="l74.47"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mail/test/browser/shared-modules/httpd.jsm</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mail/test/browser/shared-modules/httpd.jsm</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -66,17 +66,17 @@ function NS_ASSERT(cond, msg) {</span>
<a href="#l75.4"></a><span id="l75.4">     dumpn(</span>
<a href="#l75.5"></a><span id="l75.5">       stack</span>
<a href="#l75.6"></a><span id="l75.6">         .map(function(val) {</span>
<a href="#l75.7"></a><span id="l75.7">           return &quot;###!!!   &quot; + val;</span>
<a href="#l75.8"></a><span id="l75.8">         })</span>
<a href="#l75.9"></a><span id="l75.9">         .join(&quot;\n&quot;)</span>
<a href="#l75.10"></a><span id="l75.10">     );</span>
<a href="#l75.11"></a><span id="l75.11"> </span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-    throw Cr.NS_ERROR_ABORT;</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ABORT);</span>
<a href="#l75.14"></a><span id="l75.14">   }</span>
<a href="#l75.15"></a><span id="l75.15"> }</span>
<a href="#l75.16"></a><span id="l75.16"> </span>
<a href="#l75.17"></a><span id="l75.17"> /** Constructs an HTTP error object. */</span>
<a href="#l75.18"></a><span id="l75.18"> function HttpError(code, description) {</span>
<a href="#l75.19"></a><span id="l75.19">   this.code = code;</span>
<a href="#l75.20"></a><span id="l75.20">   this.description = description;</span>
<a href="#l75.21"></a><span id="l75.21"> }</span>
<a href="#l75.22"></a><span id="l75.22" class="difflineat">@@ -467,17 +467,17 @@ nsHttpServer.prototype = {</span>
<a href="#l75.23"></a><span id="l75.23">   // see nsIHttpServer.start</span>
<a href="#l75.24"></a><span id="l75.24">   //</span>
<a href="#l75.25"></a><span id="l75.25">   start(port) {</span>
<a href="#l75.26"></a><span id="l75.26">     this._start(port, &quot;localhost&quot;);</span>
<a href="#l75.27"></a><span id="l75.27">   },</span>
<a href="#l75.28"></a><span id="l75.28"> </span>
<a href="#l75.29"></a><span id="l75.29">   _start(port, host) {</span>
<a href="#l75.30"></a><span id="l75.30">     if (this._socket) {</span>
<a href="#l75.31"></a><span id="l75.31" class="difflineminus">-      throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l75.32"></a><span id="l75.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l75.33"></a><span id="l75.33">     }</span>
<a href="#l75.34"></a><span id="l75.34"> </span>
<a href="#l75.35"></a><span id="l75.35">     this._port = port;</span>
<a href="#l75.36"></a><span id="l75.36">     this._doQuit = this._socketClosed = false;</span>
<a href="#l75.37"></a><span id="l75.37"> </span>
<a href="#l75.38"></a><span id="l75.38">     this._host = host;</span>
<a href="#l75.39"></a><span id="l75.39"> </span>
<a href="#l75.40"></a><span id="l75.40">     // The listen queue needs to be long enough to handle</span>
<a href="#l75.41"></a><span id="l75.41" class="difflineat">@@ -507,29 +507,29 @@ nsHttpServer.prototype = {</span>
<a href="#l75.42"></a><span id="l75.42">           maxConnections +</span>
<a href="#l75.43"></a><span id="l75.43">           &quot; pending connections&quot;</span>
<a href="#l75.44"></a><span id="l75.44">       );</span>
<a href="#l75.45"></a><span id="l75.45">       socket.asyncListen(this);</span>
<a href="#l75.46"></a><span id="l75.46">       this._identity._initialize(port, host, true);</span>
<a href="#l75.47"></a><span id="l75.47">       this._socket = socket;</span>
<a href="#l75.48"></a><span id="l75.48">     } catch (e) {</span>
<a href="#l75.49"></a><span id="l75.49">       dumpn(&quot;!!! could not start server on port &quot; + port + &quot;: &quot; + e);</span>
<a href="#l75.50"></a><span id="l75.50" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.51"></a><span id="l75.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.52"></a><span id="l75.52">     }</span>
<a href="#l75.53"></a><span id="l75.53">   },</span>
<a href="#l75.54"></a><span id="l75.54"> </span>
<a href="#l75.55"></a><span id="l75.55">   //</span>
<a href="#l75.56"></a><span id="l75.56">   // see nsIHttpServer.stop</span>
<a href="#l75.57"></a><span id="l75.57">   //</span>
<a href="#l75.58"></a><span id="l75.58">   stop(callback) {</span>
<a href="#l75.59"></a><span id="l75.59">     if (!callback) {</span>
<a href="#l75.60"></a><span id="l75.60" class="difflineminus">-      throw Cr.NS_ERROR_NULL_POINTER;</span>
<a href="#l75.61"></a><span id="l75.61" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NULL_POINTER);</span>
<a href="#l75.62"></a><span id="l75.62">     }</span>
<a href="#l75.63"></a><span id="l75.63">     if (!this._socket) {</span>
<a href="#l75.64"></a><span id="l75.64" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l75.65"></a><span id="l75.65" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l75.66"></a><span id="l75.66">     }</span>
<a href="#l75.67"></a><span id="l75.67"> </span>
<a href="#l75.68"></a><span id="l75.68">     this._stopCallback =</span>
<a href="#l75.69"></a><span id="l75.69">       typeof callback === &quot;function&quot;</span>
<a href="#l75.70"></a><span id="l75.70">         ? callback</span>
<a href="#l75.71"></a><span id="l75.71">         : function() {</span>
<a href="#l75.72"></a><span id="l75.72">             callback.onStopped();</span>
<a href="#l75.73"></a><span id="l75.73">           };</span>
<a href="#l75.74"></a><span id="l75.74" class="difflineat">@@ -547,33 +547,33 @@ nsHttpServer.prototype = {</span>
<a href="#l75.75"></a><span id="l75.75">     // socket-close notification and pending request completion happen async</span>
<a href="#l75.76"></a><span id="l75.76">   },</span>
<a href="#l75.77"></a><span id="l75.77"> </span>
<a href="#l75.78"></a><span id="l75.78">   //</span>
<a href="#l75.79"></a><span id="l75.79">   // see nsIHttpServer.registerFile</span>
<a href="#l75.80"></a><span id="l75.80">   //</span>
<a href="#l75.81"></a><span id="l75.81">   registerFile(path, file) {</span>
<a href="#l75.82"></a><span id="l75.82">     if (file &amp;&amp; (!file.exists() || file.isDirectory())) {</span>
<a href="#l75.83"></a><span id="l75.83" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.84"></a><span id="l75.84" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.85"></a><span id="l75.85">     }</span>
<a href="#l75.86"></a><span id="l75.86"> </span>
<a href="#l75.87"></a><span id="l75.87">     this._handler.registerFile(path, file);</span>
<a href="#l75.88"></a><span id="l75.88">   },</span>
<a href="#l75.89"></a><span id="l75.89"> </span>
<a href="#l75.90"></a><span id="l75.90">   //</span>
<a href="#l75.91"></a><span id="l75.91">   // see nsIHttpServer.registerDirectory</span>
<a href="#l75.92"></a><span id="l75.92">   //</span>
<a href="#l75.93"></a><span id="l75.93">   registerDirectory(path, directory) {</span>
<a href="#l75.94"></a><span id="l75.94">     // XXX true path validation!</span>
<a href="#l75.95"></a><span id="l75.95">     if (</span>
<a href="#l75.96"></a><span id="l75.96">       path.charAt(0) != &quot;/&quot; ||</span>
<a href="#l75.97"></a><span id="l75.97">       path.charAt(path.length - 1) != &quot;/&quot; ||</span>
<a href="#l75.98"></a><span id="l75.98">       (directory &amp;&amp; (!directory.exists() || !directory.isDirectory()))</span>
<a href="#l75.99"></a><span id="l75.99">     ) {</span>
<a href="#l75.100"></a><span id="l75.100" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.101"></a><span id="l75.101" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.102"></a><span id="l75.102">     }</span>
<a href="#l75.103"></a><span id="l75.103"> </span>
<a href="#l75.104"></a><span id="l75.104">     // XXX determine behavior of nonexistent /foo/bar when a /foo/bar/ mapping</span>
<a href="#l75.105"></a><span id="l75.105">     //     exists!</span>
<a href="#l75.106"></a><span id="l75.106"> </span>
<a href="#l75.107"></a><span id="l75.107">     this._handler.registerDirectory(path, directory);</span>
<a href="#l75.108"></a><span id="l75.108">   },</span>
<a href="#l75.109"></a><span id="l75.109"> </span>
<a href="#l75.110"></a><span id="l75.110" class="difflineat">@@ -835,37 +835,37 @@ function ServerIdentity() {</span>
<a href="#l75.111"></a><span id="l75.111"> ServerIdentity.prototype = {</span>
<a href="#l75.112"></a><span id="l75.112">   // NSIHTTPSERVERIDENTITY</span>
<a href="#l75.113"></a><span id="l75.113"> </span>
<a href="#l75.114"></a><span id="l75.114">   //</span>
<a href="#l75.115"></a><span id="l75.115">   // see nsIHttpServerIdentity.primaryScheme</span>
<a href="#l75.116"></a><span id="l75.116">   //</span>
<a href="#l75.117"></a><span id="l75.117">   get primaryScheme() {</span>
<a href="#l75.118"></a><span id="l75.118">     if (this._primaryPort === -1) {</span>
<a href="#l75.119"></a><span id="l75.119" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l75.120"></a><span id="l75.120" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l75.121"></a><span id="l75.121">     }</span>
<a href="#l75.122"></a><span id="l75.122">     return this._primaryScheme;</span>
<a href="#l75.123"></a><span id="l75.123">   },</span>
<a href="#l75.124"></a><span id="l75.124"> </span>
<a href="#l75.125"></a><span id="l75.125">   //</span>
<a href="#l75.126"></a><span id="l75.126">   // see nsIHttpServerIdentity.primaryHost</span>
<a href="#l75.127"></a><span id="l75.127">   //</span>
<a href="#l75.128"></a><span id="l75.128">   get primaryHost() {</span>
<a href="#l75.129"></a><span id="l75.129">     if (this._primaryPort === -1) {</span>
<a href="#l75.130"></a><span id="l75.130" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l75.131"></a><span id="l75.131" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l75.132"></a><span id="l75.132">     }</span>
<a href="#l75.133"></a><span id="l75.133">     return this._primaryHost;</span>
<a href="#l75.134"></a><span id="l75.134">   },</span>
<a href="#l75.135"></a><span id="l75.135"> </span>
<a href="#l75.136"></a><span id="l75.136">   //</span>
<a href="#l75.137"></a><span id="l75.137">   // see nsIHttpServerIdentity.primaryPort</span>
<a href="#l75.138"></a><span id="l75.138">   //</span>
<a href="#l75.139"></a><span id="l75.139">   get primaryPort() {</span>
<a href="#l75.140"></a><span id="l75.140">     if (this._primaryPort === -1) {</span>
<a href="#l75.141"></a><span id="l75.141" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l75.142"></a><span id="l75.142" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l75.143"></a><span id="l75.143">     }</span>
<a href="#l75.144"></a><span id="l75.144">     return this._primaryPort;</span>
<a href="#l75.145"></a><span id="l75.145">   },</span>
<a href="#l75.146"></a><span id="l75.146"> </span>
<a href="#l75.147"></a><span id="l75.147">   //</span>
<a href="#l75.148"></a><span id="l75.148">   // see nsIHttpServerIdentity.add</span>
<a href="#l75.149"></a><span id="l75.149">   //</span>
<a href="#l75.150"></a><span id="l75.150">   add(scheme, host, port) {</span>
<a href="#l75.151"></a><span id="l75.151" class="difflineat">@@ -1012,25 +1012,25 @@ ServerIdentity.prototype = {</span>
<a href="#l75.152"></a><span id="l75.152">    *</span>
<a href="#l75.153"></a><span id="l75.153">    * @throws NS_ERROR_ILLEGAL_VALUE</span>
<a href="#l75.154"></a><span id="l75.154">    *   if any argument doesn't match the corresponding production</span>
<a href="#l75.155"></a><span id="l75.155">    */</span>
<a href="#l75.156"></a><span id="l75.156">   _validate(scheme, host, port) {</span>
<a href="#l75.157"></a><span id="l75.157">     if (scheme !== &quot;http&quot; &amp;&amp; scheme !== &quot;https&quot;) {</span>
<a href="#l75.158"></a><span id="l75.158">       dumpn(&quot;*** server only supports http/https schemes: '&quot; + scheme + &quot;'&quot;);</span>
<a href="#l75.159"></a><span id="l75.159">       dumpStack();</span>
<a href="#l75.160"></a><span id="l75.160" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l75.161"></a><span id="l75.161" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l75.162"></a><span id="l75.162">     }</span>
<a href="#l75.163"></a><span id="l75.163">     if (!HOST_REGEX.test(host)) {</span>
<a href="#l75.164"></a><span id="l75.164">       dumpn(&quot;*** unexpected host: '&quot; + host + &quot;'&quot;);</span>
<a href="#l75.165"></a><span id="l75.165" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l75.166"></a><span id="l75.166" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l75.167"></a><span id="l75.167">     }</span>
<a href="#l75.168"></a><span id="l75.168">     if (port &lt; 0 || port &gt; 65535) {</span>
<a href="#l75.169"></a><span id="l75.169">       dumpn(&quot;*** unexpected port: '&quot; + port + &quot;'&quot;);</span>
<a href="#l75.170"></a><span id="l75.170" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l75.171"></a><span id="l75.171" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l75.172"></a><span id="l75.172">     }</span>
<a href="#l75.173"></a><span id="l75.173">   },</span>
<a href="#l75.174"></a><span id="l75.174"> };</span>
<a href="#l75.175"></a><span id="l75.175"> </span>
<a href="#l75.176"></a><span id="l75.176"> /**</span>
<a href="#l75.177"></a><span id="l75.177">  * Represents a connection to the server (and possibly in the future the thread</span>
<a href="#l75.178"></a><span id="l75.178">  * on which the connection is processed).</span>
<a href="#l75.179"></a><span id="l75.179">  *</span>
<a href="#l75.180"></a><span id="l75.180" class="difflineat">@@ -2296,29 +2296,29 @@ ServerHandler.prototype = {</span>
<a href="#l75.181"></a><span id="l75.181">   },</span>
<a href="#l75.182"></a><span id="l75.182"> </span>
<a href="#l75.183"></a><span id="l75.183">   //</span>
<a href="#l75.184"></a><span id="l75.184">   // see nsIHttpServer.registerPathHandler</span>
<a href="#l75.185"></a><span id="l75.185">   //</span>
<a href="#l75.186"></a><span id="l75.186">   registerPathHandler(path, handler) {</span>
<a href="#l75.187"></a><span id="l75.187">     // XXX true path validation!</span>
<a href="#l75.188"></a><span id="l75.188">     if (path.charAt(0) != &quot;/&quot;) {</span>
<a href="#l75.189"></a><span id="l75.189" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.190"></a><span id="l75.190" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.191"></a><span id="l75.191">     }</span>
<a href="#l75.192"></a><span id="l75.192"> </span>
<a href="#l75.193"></a><span id="l75.193">     this._handlerToField(handler, this._overridePaths, path);</span>
<a href="#l75.194"></a><span id="l75.194">   },</span>
<a href="#l75.195"></a><span id="l75.195"> </span>
<a href="#l75.196"></a><span id="l75.196">   //</span>
<a href="#l75.197"></a><span id="l75.197">   // see nsIHttpServer.registerPrefixHandler</span>
<a href="#l75.198"></a><span id="l75.198">   //</span>
<a href="#l75.199"></a><span id="l75.199">   registerPrefixHandler(path, handler) {</span>
<a href="#l75.200"></a><span id="l75.200">     // XXX true path validation!</span>
<a href="#l75.201"></a><span id="l75.201">     if (path.charAt(0) != &quot;/&quot; || path.charAt(path.length - 1) != &quot;/&quot;) {</span>
<a href="#l75.202"></a><span id="l75.202" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.203"></a><span id="l75.203" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.204"></a><span id="l75.204">     }</span>
<a href="#l75.205"></a><span id="l75.205"> </span>
<a href="#l75.206"></a><span id="l75.206">     this._handlerToField(handler, this._overridePrefixes, path);</span>
<a href="#l75.207"></a><span id="l75.207">   },</span>
<a href="#l75.208"></a><span id="l75.208"> </span>
<a href="#l75.209"></a><span id="l75.209">   //</span>
<a href="#l75.210"></a><span id="l75.210">   // see nsIHttpServer.registerDirectory</span>
<a href="#l75.211"></a><span id="l75.211">   //</span>
<a href="#l75.212"></a><span id="l75.212" class="difflineat">@@ -2327,17 +2327,17 @@ ServerHandler.prototype = {</span>
<a href="#l75.213"></a><span id="l75.213">     // determining exactly how a path maps onto a mapped directory --</span>
<a href="#l75.214"></a><span id="l75.214">     // conditional is required here to deal with &quot;/&quot;.substring(1, 0) being</span>
<a href="#l75.215"></a><span id="l75.215">     // converted to &quot;/&quot;.substring(0, 1) per the JS specification</span>
<a href="#l75.216"></a><span id="l75.216">     var key = path.length == 1 ? &quot;&quot; : path.substring(1, path.length - 1);</span>
<a href="#l75.217"></a><span id="l75.217"> </span>
<a href="#l75.218"></a><span id="l75.218">     // the path-to-directory mapping code requires that the first character not</span>
<a href="#l75.219"></a><span id="l75.219">     // be &quot;/&quot;, or it will go into an infinite loop</span>
<a href="#l75.220"></a><span id="l75.220">     if (key.charAt(0) == &quot;/&quot;) {</span>
<a href="#l75.221"></a><span id="l75.221" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.222"></a><span id="l75.222" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.223"></a><span id="l75.223">     }</span>
<a href="#l75.224"></a><span id="l75.224"> </span>
<a href="#l75.225"></a><span id="l75.225">     key = toInternalPath(key, false);</span>
<a href="#l75.226"></a><span id="l75.226"> </span>
<a href="#l75.227"></a><span id="l75.227">     if (directory) {</span>
<a href="#l75.228"></a><span id="l75.228">       dumpn(&quot;*** mapping '&quot; + path + &quot;' to the location &quot; + directory.path);</span>
<a href="#l75.229"></a><span id="l75.229">       this._pathDirectoryMap.put(key, directory);</span>
<a href="#l75.230"></a><span id="l75.230">     } else {</span>
<a href="#l75.231"></a><span id="l75.231" class="difflineat">@@ -2985,17 +2985,17 @@ ServerHandler.prototype = {</span>
<a href="#l75.232"></a><span id="l75.232">    * @param response : Response</span>
<a href="#l75.233"></a><span id="l75.233">    *   an uninitialized Response should be initialized when this method</span>
<a href="#l75.234"></a><span id="l75.234">    *   completes with information which represents the desired error code in the</span>
<a href="#l75.235"></a><span id="l75.235">    *   ideal case or a fallback code in abnormal circumstances (i.e., 500 is a</span>
<a href="#l75.236"></a><span id="l75.236">    *   fallback for 505, per HTTP specs)</span>
<a href="#l75.237"></a><span id="l75.237">    */</span>
<a href="#l75.238"></a><span id="l75.238">   _handleError(errorCode, metadata, response) {</span>
<a href="#l75.239"></a><span id="l75.239">     if (!metadata) {</span>
<a href="#l75.240"></a><span id="l75.240" class="difflineminus">-      throw Cr.NS_ERROR_NULL_POINTER;</span>
<a href="#l75.241"></a><span id="l75.241" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NULL_POINTER);</span>
<a href="#l75.242"></a><span id="l75.242">     }</span>
<a href="#l75.243"></a><span id="l75.243"> </span>
<a href="#l75.244"></a><span id="l75.244">     var errorX00 = errorCode - (errorCode % 100);</span>
<a href="#l75.245"></a><span id="l75.245"> </span>
<a href="#l75.246"></a><span id="l75.246">     try {</span>
<a href="#l75.247"></a><span id="l75.247">       if (!(errorCode in HTTP_ERROR_CODES)) {</span>
<a href="#l75.248"></a><span id="l75.248">         dumpn(&quot;*** WARNING: requested invalid error: &quot; + errorCode);</span>
<a href="#l75.249"></a><span id="l75.249">       }</span>
<a href="#l75.250"></a><span id="l75.250" class="difflineat">@@ -3526,17 +3526,17 @@ function Response(connection) {</span>
<a href="#l75.251"></a><span id="l75.251"> Response.prototype = {</span>
<a href="#l75.252"></a><span id="l75.252">   // PUBLIC CONSTRUCTION API</span>
<a href="#l75.253"></a><span id="l75.253"> </span>
<a href="#l75.254"></a><span id="l75.254">   //</span>
<a href="#l75.255"></a><span id="l75.255">   // see nsIHttpResponse.bodyOutputStream</span>
<a href="#l75.256"></a><span id="l75.256">   //</span>
<a href="#l75.257"></a><span id="l75.257">   get bodyOutputStream() {</span>
<a href="#l75.258"></a><span id="l75.258">     if (this._finished) {</span>
<a href="#l75.259"></a><span id="l75.259" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.260"></a><span id="l75.260" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.261"></a><span id="l75.261">     }</span>
<a href="#l75.262"></a><span id="l75.262"> </span>
<a href="#l75.263"></a><span id="l75.263">     if (!this._bodyOutputStream) {</span>
<a href="#l75.264"></a><span id="l75.264">       var pipe = new Pipe(</span>
<a href="#l75.265"></a><span id="l75.265">         true,</span>
<a href="#l75.266"></a><span id="l75.266">         false,</span>
<a href="#l75.267"></a><span id="l75.267">         Response.SEGMENT_SIZE,</span>
<a href="#l75.268"></a><span id="l75.268">         PR_UINT32_MAX,</span>
<a href="#l75.269"></a><span id="l75.269" class="difflineat">@@ -3552,91 +3552,91 @@ Response.prototype = {</span>
<a href="#l75.270"></a><span id="l75.270">     return this._bodyOutputStream;</span>
<a href="#l75.271"></a><span id="l75.271">   },</span>
<a href="#l75.272"></a><span id="l75.272"> </span>
<a href="#l75.273"></a><span id="l75.273">   //</span>
<a href="#l75.274"></a><span id="l75.274">   // see nsIHttpResponse.write</span>
<a href="#l75.275"></a><span id="l75.275">   //</span>
<a href="#l75.276"></a><span id="l75.276">   write(data) {</span>
<a href="#l75.277"></a><span id="l75.277">     if (this._finished) {</span>
<a href="#l75.278"></a><span id="l75.278" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.279"></a><span id="l75.279" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.280"></a><span id="l75.280">     }</span>
<a href="#l75.281"></a><span id="l75.281"> </span>
<a href="#l75.282"></a><span id="l75.282">     var dataAsString = String(data);</span>
<a href="#l75.283"></a><span id="l75.283">     this.bodyOutputStream.write(dataAsString, dataAsString.length);</span>
<a href="#l75.284"></a><span id="l75.284">   },</span>
<a href="#l75.285"></a><span id="l75.285"> </span>
<a href="#l75.286"></a><span id="l75.286">   //</span>
<a href="#l75.287"></a><span id="l75.287">   // see nsIHttpResponse.setStatusLine</span>
<a href="#l75.288"></a><span id="l75.288">   //</span>
<a href="#l75.289"></a><span id="l75.289">   setStatusLine(httpVersion, code, description) {</span>
<a href="#l75.290"></a><span id="l75.290">     if (!this._headers || this._finished || this._powerSeized) {</span>
<a href="#l75.291"></a><span id="l75.291" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.292"></a><span id="l75.292" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.293"></a><span id="l75.293">     }</span>
<a href="#l75.294"></a><span id="l75.294">     this._ensureAlive();</span>
<a href="#l75.295"></a><span id="l75.295"> </span>
<a href="#l75.296"></a><span id="l75.296">     if (!(code &gt;= 0 &amp;&amp; code &lt; 1000)) {</span>
<a href="#l75.297"></a><span id="l75.297" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.298"></a><span id="l75.298" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.299"></a><span id="l75.299">     }</span>
<a href="#l75.300"></a><span id="l75.300"> </span>
<a href="#l75.301"></a><span id="l75.301">     try {</span>
<a href="#l75.302"></a><span id="l75.302">       var httpVer;</span>
<a href="#l75.303"></a><span id="l75.303">       // avoid version construction for the most common cases</span>
<a href="#l75.304"></a><span id="l75.304">       if (!httpVersion || httpVersion == &quot;1.1&quot;) {</span>
<a href="#l75.305"></a><span id="l75.305">         httpVer = nsHttpVersion.HTTP_1_1;</span>
<a href="#l75.306"></a><span id="l75.306">       } else if (httpVersion == &quot;1.0&quot;) {</span>
<a href="#l75.307"></a><span id="l75.307">         httpVer = nsHttpVersion.HTTP_1_0;</span>
<a href="#l75.308"></a><span id="l75.308">       } else {</span>
<a href="#l75.309"></a><span id="l75.309">         httpVer = new nsHttpVersion(httpVersion);</span>
<a href="#l75.310"></a><span id="l75.310">       }</span>
<a href="#l75.311"></a><span id="l75.311">     } catch (e) {</span>
<a href="#l75.312"></a><span id="l75.312" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.313"></a><span id="l75.313" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.314"></a><span id="l75.314">     }</span>
<a href="#l75.315"></a><span id="l75.315"> </span>
<a href="#l75.316"></a><span id="l75.316">     // Reason-Phrase = *&lt;TEXT, excluding CR, LF&gt;</span>
<a href="#l75.317"></a><span id="l75.317">     // TEXT          = &lt;any OCTET except CTLs, but including LWS&gt;</span>
<a href="#l75.318"></a><span id="l75.318">     //</span>
<a href="#l75.319"></a><span id="l75.319">     // XXX this ends up disallowing octets which aren't Unicode, I think -- not</span>
<a href="#l75.320"></a><span id="l75.320">     //     much to do if description is IDL'd as string</span>
<a href="#l75.321"></a><span id="l75.321">     if (!description) {</span>
<a href="#l75.322"></a><span id="l75.322">       description = &quot;&quot;;</span>
<a href="#l75.323"></a><span id="l75.323">     }</span>
<a href="#l75.324"></a><span id="l75.324">     for (var i = 0; i &lt; description.length; i++) {</span>
<a href="#l75.325"></a><span id="l75.325">       if (isCTL(description.charCodeAt(i)) &amp;&amp; description.charAt(i) != &quot;\t&quot;) {</span>
<a href="#l75.326"></a><span id="l75.326" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.327"></a><span id="l75.327" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.328"></a><span id="l75.328">       }</span>
<a href="#l75.329"></a><span id="l75.329">     }</span>
<a href="#l75.330"></a><span id="l75.330"> </span>
<a href="#l75.331"></a><span id="l75.331">     // set the values only after validation to preserve atomicity</span>
<a href="#l75.332"></a><span id="l75.332">     this._httpDescription = description;</span>
<a href="#l75.333"></a><span id="l75.333">     this._httpCode = code;</span>
<a href="#l75.334"></a><span id="l75.334">     this._httpVersion = httpVer;</span>
<a href="#l75.335"></a><span id="l75.335">   },</span>
<a href="#l75.336"></a><span id="l75.336"> </span>
<a href="#l75.337"></a><span id="l75.337">   //</span>
<a href="#l75.338"></a><span id="l75.338">   // see nsIHttpResponse.setHeader</span>
<a href="#l75.339"></a><span id="l75.339">   //</span>
<a href="#l75.340"></a><span id="l75.340">   setHeader(name, value, merge) {</span>
<a href="#l75.341"></a><span id="l75.341">     if (!this._headers || this._finished || this._powerSeized) {</span>
<a href="#l75.342"></a><span id="l75.342" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.343"></a><span id="l75.343" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.344"></a><span id="l75.344">     }</span>
<a href="#l75.345"></a><span id="l75.345">     this._ensureAlive();</span>
<a href="#l75.346"></a><span id="l75.346"> </span>
<a href="#l75.347"></a><span id="l75.347">     this._headers.setHeader(name, value, merge);</span>
<a href="#l75.348"></a><span id="l75.348">   },</span>
<a href="#l75.349"></a><span id="l75.349"> </span>
<a href="#l75.350"></a><span id="l75.350">   //</span>
<a href="#l75.351"></a><span id="l75.351">   // see nsIHttpResponse.processAsync</span>
<a href="#l75.352"></a><span id="l75.352">   //</span>
<a href="#l75.353"></a><span id="l75.353">   processAsync() {</span>
<a href="#l75.354"></a><span id="l75.354">     if (this._finished) {</span>
<a href="#l75.355"></a><span id="l75.355" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l75.356"></a><span id="l75.356" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l75.357"></a><span id="l75.357">     }</span>
<a href="#l75.358"></a><span id="l75.358">     if (this._powerSeized) {</span>
<a href="#l75.359"></a><span id="l75.359" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.360"></a><span id="l75.360" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.361"></a><span id="l75.361">     }</span>
<a href="#l75.362"></a><span id="l75.362">     if (this._processAsync) {</span>
<a href="#l75.363"></a><span id="l75.363">       return;</span>
<a href="#l75.364"></a><span id="l75.364">     }</span>
<a href="#l75.365"></a><span id="l75.365">     this._ensureAlive();</span>
<a href="#l75.366"></a><span id="l75.366"> </span>
<a href="#l75.367"></a><span id="l75.367">     dumpn(&quot;*** processing connection &quot; + this._connection.number + &quot; async&quot;);</span>
<a href="#l75.368"></a><span id="l75.368">     this._processAsync = true;</span>
<a href="#l75.369"></a><span id="l75.369" class="difflineat">@@ -3659,20 +3659,20 @@ Response.prototype = {</span>
<a href="#l75.370"></a><span id="l75.370">     }</span>
<a href="#l75.371"></a><span id="l75.371">   },</span>
<a href="#l75.372"></a><span id="l75.372"> </span>
<a href="#l75.373"></a><span id="l75.373">   //</span>
<a href="#l75.374"></a><span id="l75.374">   // see nsIHttpResponse.seizePower</span>
<a href="#l75.375"></a><span id="l75.375">   //</span>
<a href="#l75.376"></a><span id="l75.376">   seizePower() {</span>
<a href="#l75.377"></a><span id="l75.377">     if (this._processAsync) {</span>
<a href="#l75.378"></a><span id="l75.378" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.379"></a><span id="l75.379" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.380"></a><span id="l75.380">     }</span>
<a href="#l75.381"></a><span id="l75.381">     if (this._finished) {</span>
<a href="#l75.382"></a><span id="l75.382" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l75.383"></a><span id="l75.383" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l75.384"></a><span id="l75.384">     }</span>
<a href="#l75.385"></a><span id="l75.385">     if (this._powerSeized) {</span>
<a href="#l75.386"></a><span id="l75.386">       return;</span>
<a href="#l75.387"></a><span id="l75.387">     }</span>
<a href="#l75.388"></a><span id="l75.388">     this._ensureAlive();</span>
<a href="#l75.389"></a><span id="l75.389"> </span>
<a href="#l75.390"></a><span id="l75.390">     dumpn(</span>
<a href="#l75.391"></a><span id="l75.391">       &quot;*** forcefully seizing power over connection &quot; +</span>
<a href="#l75.392"></a><span id="l75.392" class="difflineat">@@ -3702,17 +3702,17 @@ Response.prototype = {</span>
<a href="#l75.393"></a><span id="l75.393">     }</span>
<a href="#l75.394"></a><span id="l75.394">   },</span>
<a href="#l75.395"></a><span id="l75.395"> </span>
<a href="#l75.396"></a><span id="l75.396">   //</span>
<a href="#l75.397"></a><span id="l75.397">   // see nsIHttpResponse.finish</span>
<a href="#l75.398"></a><span id="l75.398">   //</span>
<a href="#l75.399"></a><span id="l75.399">   finish() {</span>
<a href="#l75.400"></a><span id="l75.400">     if (!this._processAsync &amp;&amp; !this._powerSeized) {</span>
<a href="#l75.401"></a><span id="l75.401" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l75.402"></a><span id="l75.402" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l75.403"></a><span id="l75.403">     }</span>
<a href="#l75.404"></a><span id="l75.404">     if (this._finished) {</span>
<a href="#l75.405"></a><span id="l75.405">       return;</span>
<a href="#l75.406"></a><span id="l75.406">     }</span>
<a href="#l75.407"></a><span id="l75.407"> </span>
<a href="#l75.408"></a><span id="l75.408">     dumpn(&quot;*** finishing connection &quot; + this._connection.number);</span>
<a href="#l75.409"></a><span id="l75.409">     this._startAsyncProcessor(); // in case bodyOutputStream was never accessed</span>
<a href="#l75.410"></a><span id="l75.410">     if (this._bodyOutputStream) {</span>
<a href="#l75.411"></a><span id="l75.411" class="difflineat">@@ -4080,17 +4080,17 @@ Response.prototype = {</span>
<a href="#l75.412"></a><span id="l75.412"> /**</span>
<a href="#l75.413"></a><span id="l75.413">  * Size of the segments in the buffer used in storing response data and writing</span>
<a href="#l75.414"></a><span id="l75.414">  * it to the socket.</span>
<a href="#l75.415"></a><span id="l75.415">  */</span>
<a href="#l75.416"></a><span id="l75.416"> Response.SEGMENT_SIZE = 8192;</span>
<a href="#l75.417"></a><span id="l75.417"> </span>
<a href="#l75.418"></a><span id="l75.418"> /** Serves double duty in WriteThroughCopier implementation. */</span>
<a href="#l75.419"></a><span id="l75.419"> function notImplemented() {</span>
<a href="#l75.420"></a><span id="l75.420" class="difflineminus">-  throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l75.421"></a><span id="l75.421" class="difflineplus">+  throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l75.422"></a><span id="l75.422"> }</span>
<a href="#l75.423"></a><span id="l75.423"> </span>
<a href="#l75.424"></a><span id="l75.424"> /** Returns true iff the given exception represents stream closure. */</span>
<a href="#l75.425"></a><span id="l75.425"> function streamClosed(e) {</span>
<a href="#l75.426"></a><span id="l75.426">   return (</span>
<a href="#l75.427"></a><span id="l75.427">     e === Cr.NS_BASE_STREAM_CLOSED ||</span>
<a href="#l75.428"></a><span id="l75.428">     (typeof e === &quot;object&quot; &amp;&amp; e.result === Cr.NS_BASE_STREAM_CLOSED)</span>
<a href="#l75.429"></a><span id="l75.429">   );</span>
<a href="#l75.430"></a><span id="l75.430" class="difflineat">@@ -4114,17 +4114,17 @@ function wouldBlock(e) {</span>
<a href="#l75.431"></a><span id="l75.431">  *   the stream to which data is to be copied</span>
<a href="#l75.432"></a><span id="l75.432">  * @param observer : nsIRequestObserver</span>
<a href="#l75.433"></a><span id="l75.433">  *   an observer which will be notified when the copy starts and finishes</span>
<a href="#l75.434"></a><span id="l75.434">  * @throws NS_ERROR_NULL_POINTER</span>
<a href="#l75.435"></a><span id="l75.435">  *   if source, sink, or observer are null</span>
<a href="#l75.436"></a><span id="l75.436">  */</span>
<a href="#l75.437"></a><span id="l75.437"> function WriteThroughCopier(source, sink, observer) {</span>
<a href="#l75.438"></a><span id="l75.438">   if (!source || !sink || !observer) {</span>
<a href="#l75.439"></a><span id="l75.439" class="difflineminus">-    throw Cr.NS_ERROR_NULL_POINTER;</span>
<a href="#l75.440"></a><span id="l75.440" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NULL_POINTER);</span>
<a href="#l75.441"></a><span id="l75.441">   }</span>
<a href="#l75.442"></a><span id="l75.442"> </span>
<a href="#l75.443"></a><span id="l75.443">   /** Stream from which data is being read. */</span>
<a href="#l75.444"></a><span id="l75.444">   this._source = source;</span>
<a href="#l75.445"></a><span id="l75.445"> </span>
<a href="#l75.446"></a><span id="l75.446">   /** Stream to which data is being written. */</span>
<a href="#l75.447"></a><span id="l75.447">   this._sink = sink;</span>
<a href="#l75.448"></a><span id="l75.448"> </span>
<a href="#l75.449"></a><span id="l75.449" class="difflineat">@@ -4232,17 +4232,17 @@ WriteThroughCopier.prototype = {</span>
<a href="#l75.450"></a><span id="l75.450">         this._pendingData.push(String.fromCharCode.apply(String, data));</span>
<a href="#l75.451"></a><span id="l75.451">       }</span>
<a href="#l75.452"></a><span id="l75.452"> </span>
<a href="#l75.453"></a><span id="l75.453">       dumpn(&quot;*** &quot; + bytesConsumed + &quot; bytes read&quot;);</span>
<a href="#l75.454"></a><span id="l75.454"> </span>
<a href="#l75.455"></a><span id="l75.455">       // Handle the zero-data edge case in the same place as all other edge</span>
<a href="#l75.456"></a><span id="l75.456">       // cases are handled.</span>
<a href="#l75.457"></a><span id="l75.457">       if (bytesWanted === 0) {</span>
<a href="#l75.458"></a><span id="l75.458" class="difflineminus">-        throw Cr.NS_BASE_STREAM_CLOSED;</span>
<a href="#l75.459"></a><span id="l75.459" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_BASE_STREAM_CLOSED);</span>
<a href="#l75.460"></a><span id="l75.460">       }</span>
<a href="#l75.461"></a><span id="l75.461">     } catch (e) {</span>
<a href="#l75.462"></a><span id="l75.462">       let ex = e;</span>
<a href="#l75.463"></a><span id="l75.463">       if (streamClosed(e)) {</span>
<a href="#l75.464"></a><span id="l75.464">         dumpn(&quot;*** input stream closed&quot;);</span>
<a href="#l75.465"></a><span id="l75.465">         ex = bytesWanted === 0 ? Cr.NS_OK : Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l75.466"></a><span id="l75.466">       } else {</span>
<a href="#l75.467"></a><span id="l75.467">         dumpn(&quot;!!! unexpected error reading from input, canceling: &quot; + e);</span>
<a href="#l75.468"></a><span id="l75.468" class="difflineat">@@ -4636,23 +4636,23 @@ var headerUtils = {</span>
<a href="#l75.469"></a><span id="l75.469">    *   if fieldName does not match the field-name production in RFC 2616</span>
<a href="#l75.470"></a><span id="l75.470">    * @returns string</span>
<a href="#l75.471"></a><span id="l75.471">    *   fieldName converted to lowercase if it is a valid header, for characters</span>
<a href="#l75.472"></a><span id="l75.472">    *   where case conversion is possible</span>
<a href="#l75.473"></a><span id="l75.473">    */</span>
<a href="#l75.474"></a><span id="l75.474">   normalizeFieldName(fieldName) {</span>
<a href="#l75.475"></a><span id="l75.475">     if (fieldName == &quot;&quot;) {</span>
<a href="#l75.476"></a><span id="l75.476">       dumpn(&quot;*** Empty fieldName&quot;);</span>
<a href="#l75.477"></a><span id="l75.477" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.478"></a><span id="l75.478" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.479"></a><span id="l75.479">     }</span>
<a href="#l75.480"></a><span id="l75.480"> </span>
<a href="#l75.481"></a><span id="l75.481">     for (var i = 0, sz = fieldName.length; i &lt; sz; i++) {</span>
<a href="#l75.482"></a><span id="l75.482">       if (!IS_TOKEN_ARRAY[fieldName.charCodeAt(i)]) {</span>
<a href="#l75.483"></a><span id="l75.483">         dumpn(fieldName + &quot; is not a valid header field name!&quot;);</span>
<a href="#l75.484"></a><span id="l75.484" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.485"></a><span id="l75.485" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.486"></a><span id="l75.486">       }</span>
<a href="#l75.487"></a><span id="l75.487">     }</span>
<a href="#l75.488"></a><span id="l75.488"> </span>
<a href="#l75.489"></a><span id="l75.489">     return fieldName.toLowerCase();</span>
<a href="#l75.490"></a><span id="l75.490">   },</span>
<a href="#l75.491"></a><span id="l75.491"> </span>
<a href="#l75.492"></a><span id="l75.492">   /**</span>
<a href="#l75.493"></a><span id="l75.493">    * Ensures that fieldValue is a valid header field value (although not</span>
<a href="#l75.494"></a><span id="l75.494" class="difflineat">@@ -4689,17 +4689,17 @@ var headerUtils = {</span>
<a href="#l75.495"></a><span id="l75.495">     // remove leading/trailing LWS (which has been converted to SP)</span>
<a href="#l75.496"></a><span id="l75.496">     val = val.replace(/^ +/, &quot;&quot;).replace(/ +$/, &quot;&quot;);</span>
<a href="#l75.497"></a><span id="l75.497"> </span>
<a href="#l75.498"></a><span id="l75.498">     // that should have taken care of all CTLs, so val should contain no CTLs</span>
<a href="#l75.499"></a><span id="l75.499">     dumpn(&quot;*** Normalized value: '&quot; + val + &quot;'&quot;);</span>
<a href="#l75.500"></a><span id="l75.500">     for (var i = 0, len = val.length; i &lt; len; i++) {</span>
<a href="#l75.501"></a><span id="l75.501">       if (isCTL(val.charCodeAt(i))) {</span>
<a href="#l75.502"></a><span id="l75.502">         dump(&quot;*** Char &quot; + i + &quot; has charcode &quot; + val.charCodeAt(i));</span>
<a href="#l75.503"></a><span id="l75.503" class="difflineminus">-        throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l75.504"></a><span id="l75.504" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_ARG);</span>
<a href="#l75.505"></a><span id="l75.505">       }</span>
<a href="#l75.506"></a><span id="l75.506">     }</span>
<a href="#l75.507"></a><span id="l75.507"> </span>
<a href="#l75.508"></a><span id="l75.508">     // XXX disallows quoted-pair where CHAR is a CTL -- will not invalidly</span>
<a href="#l75.509"></a><span id="l75.509">     //     normalize, however, so this can be construed as a tightening of the</span>
<a href="#l75.510"></a><span id="l75.510">     //     spec and not entirely as a bug</span>
<a href="#l75.511"></a><span id="l75.511">     return val;</span>
<a href="#l75.512"></a><span id="l75.512">   },</span>
<a href="#l75.513"></a><span id="l75.513" class="difflineat">@@ -4882,17 +4882,17 @@ nsHttpHeaders.prototype = {</span>
<a href="#l75.514"></a><span id="l75.514">    *   that header has been added more than once.</span>
<a href="#l75.515"></a><span id="l75.515">    */</span>
<a href="#l75.516"></a><span id="l75.516">   getHeaderValues(fieldName) {</span>
<a href="#l75.517"></a><span id="l75.517">     var name = headerUtils.normalizeFieldName(fieldName);</span>
<a href="#l75.518"></a><span id="l75.518"> </span>
<a href="#l75.519"></a><span id="l75.519">     if (name in this._headers) {</span>
<a href="#l75.520"></a><span id="l75.520">       return this._headers[name];</span>
<a href="#l75.521"></a><span id="l75.521">     }</span>
<a href="#l75.522"></a><span id="l75.522" class="difflineminus">-    throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.523"></a><span id="l75.523" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.524"></a><span id="l75.524">   },</span>
<a href="#l75.525"></a><span id="l75.525"> </span>
<a href="#l75.526"></a><span id="l75.526">   /**</span>
<a href="#l75.527"></a><span id="l75.527">    * Returns true if a header with the given field name exists in this, false</span>
<a href="#l75.528"></a><span id="l75.528">    * otherwise.</span>
<a href="#l75.529"></a><span id="l75.529">    *</span>
<a href="#l75.530"></a><span id="l75.530">    * @param fieldName : string</span>
<a href="#l75.531"></a><span id="l75.531">    *   the field name whose existence is to be determined in this</span>
<a href="#l75.532"></a><span id="l75.532" class="difflineat">@@ -4935,17 +4935,17 @@ function nsSimpleEnumerator(items) {</span>
<a href="#l75.533"></a><span id="l75.533">   this._nextIndex = 0;</span>
<a href="#l75.534"></a><span id="l75.534"> }</span>
<a href="#l75.535"></a><span id="l75.535"> nsSimpleEnumerator.prototype = {</span>
<a href="#l75.536"></a><span id="l75.536">   hasMoreElements() {</span>
<a href="#l75.537"></a><span id="l75.537">     return this._nextIndex &lt; this._items.length;</span>
<a href="#l75.538"></a><span id="l75.538">   },</span>
<a href="#l75.539"></a><span id="l75.539">   getNext() {</span>
<a href="#l75.540"></a><span id="l75.540">     if (!this.hasMoreElements()) {</span>
<a href="#l75.541"></a><span id="l75.541" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l75.542"></a><span id="l75.542" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l75.543"></a><span id="l75.543">     }</span>
<a href="#l75.544"></a><span id="l75.544"> </span>
<a href="#l75.545"></a><span id="l75.545">     return this._items[this._nextIndex++];</span>
<a href="#l75.546"></a><span id="l75.546">   },</span>
<a href="#l75.547"></a><span id="l75.547">   QueryInterface: ChromeUtils.generateQI([&quot;nsISimpleEnumerator&quot;]),</span>
<a href="#l75.548"></a><span id="l75.548"> };</span>
<a href="#l75.549"></a><span id="l75.549"> </span>
<a href="#l75.550"></a><span id="l75.550"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mailnews/addrbook/jsaddrbook/AddrBookCard.jsm</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -86,29 +86,29 @@ AddrBookCard.prototype = {</span>
<a href="#l76.4"></a><span id="l76.4">   get UID() {</span>
<a href="#l76.5"></a><span id="l76.5">     if (!this._uid) {</span>
<a href="#l76.6"></a><span id="l76.6">       this._uid = newUID();</span>
<a href="#l76.7"></a><span id="l76.7">     }</span>
<a href="#l76.8"></a><span id="l76.8">     return this._uid;</span>
<a href="#l76.9"></a><span id="l76.9">   },</span>
<a href="#l76.10"></a><span id="l76.10">   set UID(value) {</span>
<a href="#l76.11"></a><span id="l76.11">     if (value != this._uid) {</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l76.14"></a><span id="l76.14">     }</span>
<a href="#l76.15"></a><span id="l76.15">     return value;</span>
<a href="#l76.16"></a><span id="l76.16">   },</span>
<a href="#l76.17"></a><span id="l76.17">   get properties() {</span>
<a href="#l76.18"></a><span id="l76.18">     let entries = [...this._properties.entries()];</span>
<a href="#l76.19"></a><span id="l76.19">     let enumerator = {</span>
<a href="#l76.20"></a><span id="l76.20">       hasMoreElements() {</span>
<a href="#l76.21"></a><span id="l76.21">         return entries.length &gt; 0;</span>
<a href="#l76.22"></a><span id="l76.22">       },</span>
<a href="#l76.23"></a><span id="l76.23">       getNext() {</span>
<a href="#l76.24"></a><span id="l76.24">         if (!this.hasMoreElements()) {</span>
<a href="#l76.25"></a><span id="l76.25" class="difflineminus">-          throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l76.26"></a><span id="l76.26" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l76.27"></a><span id="l76.27">         }</span>
<a href="#l76.28"></a><span id="l76.28">         let [name, value] = entries.shift();</span>
<a href="#l76.29"></a><span id="l76.29">         return {</span>
<a href="#l76.30"></a><span id="l76.30">           get name() {</span>
<a href="#l76.31"></a><span id="l76.31">             return name;</span>
<a href="#l76.32"></a><span id="l76.32">           },</span>
<a href="#l76.33"></a><span id="l76.33">           get value() {</span>
<a href="#l76.34"></a><span id="l76.34">             return value;</span>
<a href="#l76.35"></a><span id="l76.35" class="difflineat">@@ -165,46 +165,46 @@ AddrBookCard.prototype = {</span>
<a href="#l76.36"></a><span id="l76.36">   getPropertyAsAString(name) {</span>
<a href="#l76.37"></a><span id="l76.37">     if (!this._properties.has(name)) {</span>
<a href="#l76.38"></a><span id="l76.38">       return &quot;&quot;;</span>
<a href="#l76.39"></a><span id="l76.39">     }</span>
<a href="#l76.40"></a><span id="l76.40">     return this.getProperty(name);</span>
<a href="#l76.41"></a><span id="l76.41">   },</span>
<a href="#l76.42"></a><span id="l76.42">   getPropertyAsAUTF8String(name) {</span>
<a href="#l76.43"></a><span id="l76.43">     if (!this._properties.has(name)) {</span>
<a href="#l76.44"></a><span id="l76.44" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l76.45"></a><span id="l76.45" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l76.46"></a><span id="l76.46">     }</span>
<a href="#l76.47"></a><span id="l76.47">     return this.getProperty(name);</span>
<a href="#l76.48"></a><span id="l76.48">   },</span>
<a href="#l76.49"></a><span id="l76.49">   getPropertyAsUint32(name) {</span>
<a href="#l76.50"></a><span id="l76.50">     let value = this.getProperty(name);</span>
<a href="#l76.51"></a><span id="l76.51">     if (isNaN(parseInt(value, 10))) {</span>
<a href="#l76.52"></a><span id="l76.52" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l76.53"></a><span id="l76.53" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l76.54"></a><span id="l76.54">     }</span>
<a href="#l76.55"></a><span id="l76.55">     return value;</span>
<a href="#l76.56"></a><span id="l76.56">   },</span>
<a href="#l76.57"></a><span id="l76.57">   getPropertyAsBool(name) {</span>
<a href="#l76.58"></a><span id="l76.58">     let value = this.getProperty(name);</span>
<a href="#l76.59"></a><span id="l76.59">     switch (value) {</span>
<a href="#l76.60"></a><span id="l76.60">       case false:</span>
<a href="#l76.61"></a><span id="l76.61">       case 0:</span>
<a href="#l76.62"></a><span id="l76.62">       case &quot;0&quot;:</span>
<a href="#l76.63"></a><span id="l76.63">         return false;</span>
<a href="#l76.64"></a><span id="l76.64">       case true:</span>
<a href="#l76.65"></a><span id="l76.65">       case 1:</span>
<a href="#l76.66"></a><span id="l76.66">       case &quot;1&quot;:</span>
<a href="#l76.67"></a><span id="l76.67">         return true;</span>
<a href="#l76.68"></a><span id="l76.68">     }</span>
<a href="#l76.69"></a><span id="l76.69" class="difflineminus">-    throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l76.70"></a><span id="l76.70" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l76.71"></a><span id="l76.71">   },</span>
<a href="#l76.72"></a><span id="l76.72">   setProperty(name, value) {</span>
<a href="#l76.73"></a><span id="l76.73">     this._properties.set(name, value);</span>
<a href="#l76.74"></a><span id="l76.74">   },</span>
<a href="#l76.75"></a><span id="l76.75">   setPropertyAsAString(name, value) {</span>
<a href="#l76.76"></a><span id="l76.76" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l76.77"></a><span id="l76.77" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l76.78"></a><span id="l76.78">   },</span>
<a href="#l76.79"></a><span id="l76.79">   setPropertyAsAUTF8String(name, value) {</span>
<a href="#l76.80"></a><span id="l76.80">     this.setProperty(name, value);</span>
<a href="#l76.81"></a><span id="l76.81">   },</span>
<a href="#l76.82"></a><span id="l76.82">   setPropertyAsUint32(name, value) {</span>
<a href="#l76.83"></a><span id="l76.83">     this.setProperty(name, value);</span>
<a href="#l76.84"></a><span id="l76.84">   },</span>
<a href="#l76.85"></a><span id="l76.85">   setPropertyAsBool(name, value) {</span>
<a href="#l76.86"></a><span id="l76.86" class="difflineat">@@ -250,14 +250,14 @@ AddrBookCard.prototype = {</span>
<a href="#l76.87"></a><span id="l76.87">     ]) {</span>
<a href="#l76.88"></a><span id="l76.88">       if (this._properties.has(name)) {</span>
<a href="#l76.89"></a><span id="l76.89">         return this._properties.get(name);</span>
<a href="#l76.90"></a><span id="l76.90">       }</span>
<a href="#l76.91"></a><span id="l76.91">     }</span>
<a href="#l76.92"></a><span id="l76.92">     return &quot;&quot;;</span>
<a href="#l76.93"></a><span id="l76.93">   },</span>
<a href="#l76.94"></a><span id="l76.94">   copy(srcCard) {</span>
<a href="#l76.95"></a><span id="l76.95" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l76.96"></a><span id="l76.96" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l76.97"></a><span id="l76.97">   },</span>
<a href="#l76.98"></a><span id="l76.98">   equals(card) {</span>
<a href="#l76.99"></a><span id="l76.99">     return this.UID == card.UID;</span>
<a href="#l76.100"></a><span id="l76.100">   },</span>
<a href="#l76.101"></a><span id="l76.101"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mailnews/addrbook/jsaddrbook/AddrBookDirectory.jsm</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -74,17 +74,17 @@ AddrBookDirectory.prototype = {</span>
<a href="#l77.4"></a><span id="l77.4">       );</span>
<a href="#l77.5"></a><span id="l77.5">       for (let list of parent.childNodes) {</span>
<a href="#l77.6"></a><span id="l77.6">         list.QueryInterface(Ci.nsIAbDirectory);</span>
<a href="#l77.7"></a><span id="l77.7">         if (list.URI == uri) {</span>
<a href="#l77.8"></a><span id="l77.8">           this.__proto__ = list;</span>
<a href="#l77.9"></a><span id="l77.9">           return;</span>
<a href="#l77.10"></a><span id="l77.10">         }</span>
<a href="#l77.11"></a><span id="l77.11">       }</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l77.14"></a><span id="l77.14">     }</span>
<a href="#l77.15"></a><span id="l77.15"> </span>
<a href="#l77.16"></a><span id="l77.16">     let fileName = uri.substring(&quot;jsaddrbook://&quot;.length);</span>
<a href="#l77.17"></a><span id="l77.17">     if (fileName.includes(&quot;/&quot;)) {</span>
<a href="#l77.18"></a><span id="l77.18">       fileName = fileName.substring(0, fileName.indexOf(&quot;/&quot;));</span>
<a href="#l77.19"></a><span id="l77.19">     }</span>
<a href="#l77.20"></a><span id="l77.20">     this.__proto__ =</span>
<a href="#l77.21"></a><span id="l77.21">       directories.get(fileName) || new AddrBookDirectoryInner(fileName);</span>
<a href="#l77.22"></a><span id="l77.22" class="difflineat">@@ -185,17 +185,17 @@ function AddrBookDirectoryInner(fileName</span>
<a href="#l77.23"></a><span id="l77.23">       child.endsWith(&quot;.filename&quot;) &amp;&amp;</span>
<a href="#l77.24"></a><span id="l77.24">       Services.prefs.getStringPref(child) == fileName</span>
<a href="#l77.25"></a><span id="l77.25">     ) {</span>
<a href="#l77.26"></a><span id="l77.26">       this.dirPrefId = child.substring(0, child.length - &quot;.filename&quot;.length);</span>
<a href="#l77.27"></a><span id="l77.27">       break;</span>
<a href="#l77.28"></a><span id="l77.28">     }</span>
<a href="#l77.29"></a><span id="l77.29">   }</span>
<a href="#l77.30"></a><span id="l77.30">   if (!this.dirPrefId) {</span>
<a href="#l77.31"></a><span id="l77.31" class="difflineminus">-    throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l77.32"></a><span id="l77.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l77.33"></a><span id="l77.33">   }</span>
<a href="#l77.34"></a><span id="l77.34"> </span>
<a href="#l77.35"></a><span id="l77.35">   // Make sure we always have a file. If a file is not created, the</span>
<a href="#l77.36"></a><span id="l77.36">   // filename may be accidentally reused.</span>
<a href="#l77.37"></a><span id="l77.37">   let file = FileUtils.getFile(&quot;ProfD&quot;, [fileName]);</span>
<a href="#l77.38"></a><span id="l77.38">   if (!file.exists()) {</span>
<a href="#l77.39"></a><span id="l77.39">     file.create(Ci.nsIFile.NORMAL_FILE_TYPE, 0o644);</span>
<a href="#l77.40"></a><span id="l77.40">   }</span>
<a href="#l77.41"></a><span id="l77.41" class="difflineat">@@ -208,17 +208,17 @@ AddrBookDirectoryInner.prototype = {</span>
<a href="#l77.42"></a><span id="l77.42">   QueryInterface: ChromeUtils.generateQI([Ci.nsIAbDirectory]),</span>
<a href="#l77.43"></a><span id="l77.43">   classID: Components.ID(&quot;{e96ee804-0bd3-472f-81a6-8a9d65277ad3}&quot;),</span>
<a href="#l77.44"></a><span id="l77.44"> </span>
<a href="#l77.45"></a><span id="l77.45">   _uid: null,</span>
<a href="#l77.46"></a><span id="l77.46">   _nextCardId: null,</span>
<a href="#l77.47"></a><span id="l77.47">   _nextListId: null,</span>
<a href="#l77.48"></a><span id="l77.48">   get _prefBranch() {</span>
<a href="#l77.49"></a><span id="l77.49">     if (!this.dirPrefId) {</span>
<a href="#l77.50"></a><span id="l77.50" class="difflineminus">-      throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l77.51"></a><span id="l77.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l77.52"></a><span id="l77.52">     }</span>
<a href="#l77.53"></a><span id="l77.53">     return Services.prefs.getBranch(`${this.dirPrefId}.`);</span>
<a href="#l77.54"></a><span id="l77.54">   },</span>
<a href="#l77.55"></a><span id="l77.55">   get _dbConnection() {</span>
<a href="#l77.56"></a><span id="l77.56">     let file = FileUtils.getFile(&quot;ProfD&quot;, [this.fileName]);</span>
<a href="#l77.57"></a><span id="l77.57">     let connection = openConnectionTo(file);</span>
<a href="#l77.58"></a><span id="l77.58"> </span>
<a href="#l77.59"></a><span id="l77.59">     Object.defineProperty(this._inner, &quot;_dbConnection&quot;, {</span>
<a href="#l77.60"></a><span id="l77.60" class="difflineat">@@ -942,17 +942,17 @@ AddrBookDirectoryInner.prototype = {</span>
<a href="#l77.61"></a><span id="l77.61">           newValue</span>
<a href="#l77.62"></a><span id="l77.62">         );</span>
<a href="#l77.63"></a><span id="l77.63">       }</span>
<a href="#l77.64"></a><span id="l77.64">     }</span>
<a href="#l77.65"></a><span id="l77.65">     Services.obs.notifyObservers(card, &quot;addrbook-contact-updated&quot;, this.UID);</span>
<a href="#l77.66"></a><span id="l77.66">   },</span>
<a href="#l77.67"></a><span id="l77.67">   deleteCards(cards) {</span>
<a href="#l77.68"></a><span id="l77.68">     if (cards === null) {</span>
<a href="#l77.69"></a><span id="l77.69" class="difflineminus">-      throw Cr.NS_ERROR_INVALID_POINTER;</span>
<a href="#l77.70"></a><span id="l77.70" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_INVALID_POINTER);</span>
<a href="#l77.71"></a><span id="l77.71">     }</span>
<a href="#l77.72"></a><span id="l77.72"> </span>
<a href="#l77.73"></a><span id="l77.73">     let deleteCardStatement = this._dbConnection.createStatement(</span>
<a href="#l77.74"></a><span id="l77.74">       &quot;DELETE FROM cards WHERE uid = :uid&quot;</span>
<a href="#l77.75"></a><span id="l77.75">     );</span>
<a href="#l77.76"></a><span id="l77.76">     for (let card of cards.enumerate(Ci.nsIAbCard)) {</span>
<a href="#l77.77"></a><span id="l77.77">       deleteCardStatement.params.uid = card.UID;</span>
<a href="#l77.78"></a><span id="l77.78">       deleteCardStatement.execute();</span>
<a href="#l77.79"></a><span id="l77.79" class="difflineat">@@ -1030,17 +1030,17 @@ AddrBookDirectoryInner.prototype = {</span>
<a href="#l77.80"></a><span id="l77.80">   useForAutocomplete(identityKey) {</span>
<a href="#l77.81"></a><span id="l77.81">     return (</span>
<a href="#l77.82"></a><span id="l77.82">       Services.prefs.getBoolPref(&quot;mail.enable_autocomplete&quot;) &amp;&amp;</span>
<a href="#l77.83"></a><span id="l77.83">       this.getBoolValue(&quot;enable_autocomplete&quot;, true)</span>
<a href="#l77.84"></a><span id="l77.84">     );</span>
<a href="#l77.85"></a><span id="l77.85">   },</span>
<a href="#l77.86"></a><span id="l77.86">   addMailList(list) {</span>
<a href="#l77.87"></a><span id="l77.87">     if (!list.isMailList) {</span>
<a href="#l77.88"></a><span id="l77.88" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l77.89"></a><span id="l77.89" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l77.90"></a><span id="l77.90">     }</span>
<a href="#l77.91"></a><span id="l77.91"> </span>
<a href="#l77.92"></a><span id="l77.92">     let newList = new AddrBookMailingList(</span>
<a href="#l77.93"></a><span id="l77.93">       newUID(),</span>
<a href="#l77.94"></a><span id="l77.94">       this,</span>
<a href="#l77.95"></a><span id="l77.95">       this._getNextListId(),</span>
<a href="#l77.96"></a><span id="l77.96">       list.dirName || &quot;&quot;,</span>
<a href="#l77.97"></a><span id="l77.97">       list.listNickName || &quot;&quot;,</span>
<a href="#l77.98"></a><span id="l77.98" class="difflineat">@@ -1055,20 +1055,20 @@ AddrBookDirectoryInner.prototype = {</span>
<a href="#l77.99"></a><span id="l77.99">       newList.asDirectory,</span>
<a href="#l77.100"></a><span id="l77.100">       &quot;addrbook-list-created&quot;,</span>
<a href="#l77.101"></a><span id="l77.101">       this.UID</span>
<a href="#l77.102"></a><span id="l77.102">     );</span>
<a href="#l77.103"></a><span id="l77.103">     return newListDirectory;</span>
<a href="#l77.104"></a><span id="l77.104">   },</span>
<a href="#l77.105"></a><span id="l77.105">   editMailListToDatabase(listCard) {</span>
<a href="#l77.106"></a><span id="l77.106">     // Deliberately not implemented, this isn't a mailing list.</span>
<a href="#l77.107"></a><span id="l77.107" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l77.108"></a><span id="l77.108" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l77.109"></a><span id="l77.109">   },</span>
<a href="#l77.110"></a><span id="l77.110">   copyMailList(srcList) {</span>
<a href="#l77.111"></a><span id="l77.111" class="difflineminus">-    throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l77.112"></a><span id="l77.112" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l77.113"></a><span id="l77.113">   },</span>
<a href="#l77.114"></a><span id="l77.114">   getIntValue(name, defaultValue) {</span>
<a href="#l77.115"></a><span id="l77.115">     return this._prefBranch.getIntPref(name, defaultValue);</span>
<a href="#l77.116"></a><span id="l77.116">   },</span>
<a href="#l77.117"></a><span id="l77.117">   getBoolValue(name, defaultValue) {</span>
<a href="#l77.118"></a><span id="l77.118">     return this._prefBranch.getBoolPref(name, defaultValue);</span>
<a href="#l77.119"></a><span id="l77.119">   },</span>
<a href="#l77.120"></a><span id="l77.120">   getStringValue(name, defaultValue) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mailnews/addrbook/jsaddrbook/AddrBookManager.jsm</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -69,17 +69,17 @@ if (AppConstants.platform == &quot;macosx&quot;) {</span>
<a href="#l78.4"></a><span id="l78.4">  * @param {string} uri - URI for the directory.</span>
<a href="#l78.5"></a><span id="l78.5">  * @param {boolean} shouldStore - Whether to keep a reference to this address</span>
<a href="#l78.6"></a><span id="l78.6">  *   book in the store.</span>
<a href="#l78.7"></a><span id="l78.7">  * @returns {nsIAbDirectory}</span>
<a href="#l78.8"></a><span id="l78.8">  */</span>
<a href="#l78.9"></a><span id="l78.9"> function createDirectoryObject(uri, shouldStore = false) {</span>
<a href="#l78.10"></a><span id="l78.10">   let uriParts = URI_REGEXP.exec(uri);</span>
<a href="#l78.11"></a><span id="l78.11">   if (!uriParts) {</span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-    throw Cr.NS_ERROR_MALFORMED_URI;</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_MALFORMED_URI);</span>
<a href="#l78.14"></a><span id="l78.14">   }</span>
<a href="#l78.15"></a><span id="l78.15"> </span>
<a href="#l78.16"></a><span id="l78.16">   let [, scheme] = uriParts;</span>
<a href="#l78.17"></a><span id="l78.17">   let dir = Cc[</span>
<a href="#l78.18"></a><span id="l78.18">     `@mozilla.org/addressbook/directory;1?type=${scheme}`</span>
<a href="#l78.19"></a><span id="l78.19">   ].createInstance(Ci.nsIAbDirectory);</span>
<a href="#l78.20"></a><span id="l78.20">   if (shouldStore) {</span>
<a href="#l78.21"></a><span id="l78.21">     store.set(uri, dir);</span>
<a href="#l78.22"></a><span id="l78.22" class="difflineat">@@ -186,25 +186,25 @@ AddrBookManager.prototype = {</span>
<a href="#l78.23"></a><span id="l78.23"> </span>
<a href="#l78.24"></a><span id="l78.24">     ensureInitialized();</span>
<a href="#l78.25"></a><span id="l78.25">     if (store.has(uri)) {</span>
<a href="#l78.26"></a><span id="l78.26">       return store.get(uri);</span>
<a href="#l78.27"></a><span id="l78.27">     }</span>
<a href="#l78.28"></a><span id="l78.28"> </span>
<a href="#l78.29"></a><span id="l78.29">     let uriParts = URI_REGEXP.exec(uri);</span>
<a href="#l78.30"></a><span id="l78.30">     if (!uriParts) {</span>
<a href="#l78.31"></a><span id="l78.31" class="difflineminus">-      throw Cr.NS_ERROR_MALFORMED_URI;</span>
<a href="#l78.32"></a><span id="l78.32" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_MALFORMED_URI);</span>
<a href="#l78.33"></a><span id="l78.33">     }</span>
<a href="#l78.34"></a><span id="l78.34">     let [, scheme, , tail] = uriParts;</span>
<a href="#l78.35"></a><span id="l78.35">     if (tail &amp;&amp; types.includes(scheme)) {</span>
<a href="#l78.36"></a><span id="l78.36">       // `tail` could either point to a mailing list or a query.</span>
<a href="#l78.37"></a><span id="l78.37">       // Both of these will be handled differently in future.</span>
<a href="#l78.38"></a><span id="l78.38">       return createDirectoryObject(uri);</span>
<a href="#l78.39"></a><span id="l78.39">     }</span>
<a href="#l78.40"></a><span id="l78.40" class="difflineminus">-    throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l78.41"></a><span id="l78.41" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l78.42"></a><span id="l78.42">   },</span>
<a href="#l78.43"></a><span id="l78.43">   getDirectoryFromId(dirPrefId) {</span>
<a href="#l78.44"></a><span id="l78.44">     ensureInitialized();</span>
<a href="#l78.45"></a><span id="l78.45">     for (let dir of store.values()) {</span>
<a href="#l78.46"></a><span id="l78.46">       if (dir.dirPrefId == dirPrefId) {</span>
<a href="#l78.47"></a><span id="l78.47">         return dir;</span>
<a href="#l78.48"></a><span id="l78.48">       }</span>
<a href="#l78.49"></a><span id="l78.49">     }</span>
<a href="#l78.50"></a><span id="l78.50" class="difflineat">@@ -259,34 +259,34 @@ AddrBookManager.prototype = {</span>
<a href="#l78.51"></a><span id="l78.51">         this.notifyDirectoryItemAdded(null, dir);</span>
<a href="#l78.52"></a><span id="l78.52">         Services.obs.notifyObservers(dir, &quot;addrbook-directory-created&quot;);</span>
<a href="#l78.53"></a><span id="l78.53">         break;</span>
<a href="#l78.54"></a><span id="l78.54">       }</span>
<a href="#l78.55"></a><span id="l78.55">       case MAPI_DIRECTORY_TYPE: {</span>
<a href="#l78.56"></a><span id="l78.56">         if (AppConstants.platform == &quot;macosx&quot;) {</span>
<a href="#l78.57"></a><span id="l78.57">           uri = &quot;moz-abosxdirectory:///&quot;;</span>
<a href="#l78.58"></a><span id="l78.58">           if (store.has(uri)) {</span>
<a href="#l78.59"></a><span id="l78.59" class="difflineminus">-            throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l78.60"></a><span id="l78.60" class="difflineplus">+            throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l78.61"></a><span id="l78.61">           }</span>
<a href="#l78.62"></a><span id="l78.62">           prefName = &quot;ldap_2.servers.osx&quot;;</span>
<a href="#l78.63"></a><span id="l78.63">         } else if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l78.64"></a><span id="l78.64">           if (</span>
<a href="#l78.65"></a><span id="l78.65">             ![</span>
<a href="#l78.66"></a><span id="l78.66">               &quot;moz-aboutlookdirectory://oe/&quot;,</span>
<a href="#l78.67"></a><span id="l78.67">               &quot;moz-aboutlookdirectory://op/&quot;,</span>
<a href="#l78.68"></a><span id="l78.68">             ].includes(uri)</span>
<a href="#l78.69"></a><span id="l78.69">           ) {</span>
<a href="#l78.70"></a><span id="l78.70" class="difflineminus">-            throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l78.71"></a><span id="l78.71" class="difflineplus">+            throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l78.72"></a><span id="l78.72">           }</span>
<a href="#l78.73"></a><span id="l78.73">           if (store.has(uri)) {</span>
<a href="#l78.74"></a><span id="l78.74" class="difflineminus">-            throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l78.75"></a><span id="l78.75" class="difflineplus">+            throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l78.76"></a><span id="l78.76">           }</span>
<a href="#l78.77"></a><span id="l78.77">           prefName = &quot;ldap_2.servers.oe&quot;;</span>
<a href="#l78.78"></a><span id="l78.78">         } else {</span>
<a href="#l78.79"></a><span id="l78.79" class="difflineminus">-          throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l78.80"></a><span id="l78.80" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l78.81"></a><span id="l78.81">         }</span>
<a href="#l78.82"></a><span id="l78.82"> </span>
<a href="#l78.83"></a><span id="l78.83">         Services.prefs.setIntPref(`${prefName}.dirType`, MAPI_DIRECTORY_TYPE);</span>
<a href="#l78.84"></a><span id="l78.84">         Services.prefs.setStringPref(</span>
<a href="#l78.85"></a><span id="l78.85">           `${prefName}.description`,</span>
<a href="#l78.86"></a><span id="l78.86">           &quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;</span>
<a href="#l78.87"></a><span id="l78.87">         );</span>
<a href="#l78.88"></a><span id="l78.88">         Services.prefs.setStringPref(`${prefName}.uri`, uri);</span>
<a href="#l78.89"></a><span id="l78.89" class="difflineat">@@ -319,25 +319,25 @@ AddrBookManager.prototype = {</span>
<a href="#l78.90"></a><span id="l78.90"> </span>
<a href="#l78.91"></a><span id="l78.91">         uri = `jsaddrbook://${file.leafName}`;</span>
<a href="#l78.92"></a><span id="l78.92">         let dir = createDirectoryObject(uri, true);</span>
<a href="#l78.93"></a><span id="l78.93">         this.notifyDirectoryItemAdded(null, dir);</span>
<a href="#l78.94"></a><span id="l78.94">         Services.obs.notifyObservers(dir, &quot;addrbook-directory-created&quot;);</span>
<a href="#l78.95"></a><span id="l78.95">         break;</span>
<a href="#l78.96"></a><span id="l78.96">       }</span>
<a href="#l78.97"></a><span id="l78.97">       default:</span>
<a href="#l78.98"></a><span id="l78.98" class="difflineminus">-        throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l78.99"></a><span id="l78.99" class="difflineplus">+        throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l78.100"></a><span id="l78.100">     }</span>
<a href="#l78.101"></a><span id="l78.101"> </span>
<a href="#l78.102"></a><span id="l78.102">     return prefName;</span>
<a href="#l78.103"></a><span id="l78.103">   },</span>
<a href="#l78.104"></a><span id="l78.104">   deleteAddressBook(uri) {</span>
<a href="#l78.105"></a><span id="l78.105">     let uriParts = URI_REGEXP.exec(uri);</span>
<a href="#l78.106"></a><span id="l78.106">     if (!uriParts) {</span>
<a href="#l78.107"></a><span id="l78.107" class="difflineminus">-      throw Cr.NS_ERROR_MALFORMED_URI;</span>
<a href="#l78.108"></a><span id="l78.108" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_MALFORMED_URI);</span>
<a href="#l78.109"></a><span id="l78.109">     }</span>
<a href="#l78.110"></a><span id="l78.110"> </span>
<a href="#l78.111"></a><span id="l78.111">     let [, scheme, fileName, tail] = uriParts;</span>
<a href="#l78.112"></a><span id="l78.112">     if (tail) {</span>
<a href="#l78.113"></a><span id="l78.113">       if (tail.startsWith(&quot;/MailList&quot;)) {</span>
<a href="#l78.114"></a><span id="l78.114">         let dir = store.get(`${scheme}://${fileName}`);</span>
<a href="#l78.115"></a><span id="l78.115">         let list = this.getDirectory(uri);</span>
<a href="#l78.116"></a><span id="l78.116">         if (dir &amp;&amp; list) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mailnews/addrbook/jsaddrbook/AddrBookUtils.jsm</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -36,17 +36,17 @@ function SimpleEnumerator(elements) {</span>
<a href="#l79.4"></a><span id="l79.4"> SimpleEnumerator.prototype = {</span>
<a href="#l79.5"></a><span id="l79.5">   hasMoreElements() {</span>
<a href="#l79.6"></a><span id="l79.6">     return this._position &lt; this._elements.length;</span>
<a href="#l79.7"></a><span id="l79.7">   },</span>
<a href="#l79.8"></a><span id="l79.8">   getNext() {</span>
<a href="#l79.9"></a><span id="l79.9">     if (this.hasMoreElements()) {</span>
<a href="#l79.10"></a><span id="l79.10">       return this._elements[this._position++];</span>
<a href="#l79.11"></a><span id="l79.11">     }</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-    throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_AVAILABLE);</span>
<a href="#l79.14"></a><span id="l79.14">   },</span>
<a href="#l79.15"></a><span id="l79.15">   QueryInterface: ChromeUtils.generateQI([Ci.nsISimpleEnumerator]),</span>
<a href="#l79.16"></a><span id="l79.16">   *[Symbol.iterator]() {</span>
<a href="#l79.17"></a><span id="l79.17">     while (this.hasMoreElements()) {</span>
<a href="#l79.18"></a><span id="l79.18">       yield this.getNext();</span>
<a href="#l79.19"></a><span id="l79.19">     }</span>
<a href="#l79.20"></a><span id="l79.20">   },</span>
<a href="#l79.21"></a><span id="l79.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mailnews/addrbook/src/AbLDAPAttributeMap.jsm</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mailnews/addrbook/src/AbLDAPAttributeMap.jsm</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -19,17 +19,17 @@ AbLDAPAttributeMap.prototype = {</span>
<a href="#l80.4"></a><span id="l80.4"> </span>
<a href="#l80.5"></a><span id="l80.5">     // return the joined list</span>
<a href="#l80.6"></a><span id="l80.6">     return this.mPropertyMap[aProperty].join(&quot;,&quot;);</span>
<a href="#l80.7"></a><span id="l80.7">   },</span>
<a href="#l80.8"></a><span id="l80.8"> </span>
<a href="#l80.9"></a><span id="l80.9">   getAttributes(aProperty) {</span>
<a href="#l80.10"></a><span id="l80.10">     // fail if no entry for this</span>
<a href="#l80.11"></a><span id="l80.11">     if (!(aProperty in this.mPropertyMap)) {</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l80.14"></a><span id="l80.14">     }</span>
<a href="#l80.15"></a><span id="l80.15">     return this.mPropertyMap[aProperty];</span>
<a href="#l80.16"></a><span id="l80.16">   },</span>
<a href="#l80.17"></a><span id="l80.17"> </span>
<a href="#l80.18"></a><span id="l80.18">   getFirstAttribute(aProperty) {</span>
<a href="#l80.19"></a><span id="l80.19">     // fail if no entry for this</span>
<a href="#l80.20"></a><span id="l80.20">     if (!(aProperty in this.mPropertyMap)) {</span>
<a href="#l80.21"></a><span id="l80.21">       return null;</span>
<a href="#l80.22"></a><span id="l80.22" class="difflineat">@@ -41,17 +41,17 @@ AbLDAPAttributeMap.prototype = {</span>
<a href="#l80.23"></a><span id="l80.23">   setAttributeList(aProperty, aAttributeList, aAllowInconsistencies) {</span>
<a href="#l80.24"></a><span id="l80.24">     var attrs = aAttributeList.split(&quot;,&quot;);</span>
<a href="#l80.25"></a><span id="l80.25"> </span>
<a href="#l80.26"></a><span id="l80.26">     // check to make sure this call won't allow multiple mappings to be</span>
<a href="#l80.27"></a><span id="l80.27">     // created, if requested</span>
<a href="#l80.28"></a><span id="l80.28">     if (!aAllowInconsistencies) {</span>
<a href="#l80.29"></a><span id="l80.29">       for (var attr of attrs) {</span>
<a href="#l80.30"></a><span id="l80.30">         if (attr in this.mAttrMap &amp;&amp; this.mAttrMap[attr] != aProperty) {</span>
<a href="#l80.31"></a><span id="l80.31" class="difflineminus">-          throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l80.32"></a><span id="l80.32" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l80.33"></a><span id="l80.33">         }</span>
<a href="#l80.34"></a><span id="l80.34">       }</span>
<a href="#l80.35"></a><span id="l80.35">     }</span>
<a href="#l80.36"></a><span id="l80.36"> </span>
<a href="#l80.37"></a><span id="l80.37">     // delete any attr mappings created by the existing property map entry</span>
<a href="#l80.38"></a><span id="l80.38">     if (aProperty in this.mPropertyMap) {</span>
<a href="#l80.39"></a><span id="l80.39">       for (attr of this.mPropertyMap[aProperty]) {</span>
<a href="#l80.40"></a><span id="l80.40">         delete this.mAttrMap[attr];</span>
<a href="#l80.41"></a><span id="l80.41" class="difflineat">@@ -78,17 +78,17 @@ AbLDAPAttributeMap.prototype = {</span>
<a href="#l80.42"></a><span id="l80.42">   getAllCardAttributes() {</span>
<a href="#l80.43"></a><span id="l80.43">     var attrs = [];</span>
<a href="#l80.44"></a><span id="l80.44">     for (var prop in this.mPropertyMap) {</span>
<a href="#l80.45"></a><span id="l80.45">       let attrArray = this.mPropertyMap[prop];</span>
<a href="#l80.46"></a><span id="l80.46">       attrs = attrs.concat(attrArray);</span>
<a href="#l80.47"></a><span id="l80.47">     }</span>
<a href="#l80.48"></a><span id="l80.48"> </span>
<a href="#l80.49"></a><span id="l80.49">     if (!attrs.length) {</span>
<a href="#l80.50"></a><span id="l80.50" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l80.51"></a><span id="l80.51" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l80.52"></a><span id="l80.52">     }</span>
<a href="#l80.53"></a><span id="l80.53"> </span>
<a href="#l80.54"></a><span id="l80.54">     return attrs.join(&quot;,&quot;);</span>
<a href="#l80.55"></a><span id="l80.55">   },</span>
<a href="#l80.56"></a><span id="l80.56"> </span>
<a href="#l80.57"></a><span id="l80.57">   getAllCardProperties() {</span>
<a href="#l80.58"></a><span id="l80.58">     var props = [];</span>
<a href="#l80.59"></a><span id="l80.59">     for (var prop in this.mPropertyMap) {</span>
<a href="#l80.60"></a><span id="l80.60" class="difflineat">@@ -148,34 +148,34 @@ AbLDAPAttributeMap.prototype = {</span>
<a href="#l80.61"></a><span id="l80.61">           } catch (ex) {</span>
<a href="#l80.62"></a><span id="l80.62">             // ignore any errors getting message values or setting card values</span>
<a href="#l80.63"></a><span id="l80.63">           }</span>
<a href="#l80.64"></a><span id="l80.64">         }</span>
<a href="#l80.65"></a><span id="l80.65">       }</span>
<a href="#l80.66"></a><span id="l80.66">     }</span>
<a href="#l80.67"></a><span id="l80.67"> </span>
<a href="#l80.68"></a><span id="l80.68">     if (!cardValueWasSet) {</span>
<a href="#l80.69"></a><span id="l80.69" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l80.70"></a><span id="l80.70" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l80.71"></a><span id="l80.71">     }</span>
<a href="#l80.72"></a><span id="l80.72">   },</span>
<a href="#l80.73"></a><span id="l80.73"> </span>
<a href="#l80.74"></a><span id="l80.74">   checkState() {</span>
<a href="#l80.75"></a><span id="l80.75">     var attrsSeen = [];</span>
<a href="#l80.76"></a><span id="l80.76"> </span>
<a href="#l80.77"></a><span id="l80.77">     for (var prop in this.mPropertyMap) {</span>
<a href="#l80.78"></a><span id="l80.78">       let attrArray = this.mPropertyMap[prop];</span>
<a href="#l80.79"></a><span id="l80.79">       for (var attr of attrArray) {</span>
<a href="#l80.80"></a><span id="l80.80">         // multiple attributes that mapped to the empty string are permitted</span>
<a href="#l80.81"></a><span id="l80.81">         if (!attr.length) {</span>
<a href="#l80.82"></a><span id="l80.82">           continue;</span>
<a href="#l80.83"></a><span id="l80.83">         }</span>
<a href="#l80.84"></a><span id="l80.84"> </span>
<a href="#l80.85"></a><span id="l80.85">         // if we've seen this before, there's a problem</span>
<a href="#l80.86"></a><span id="l80.86">         if (attrsSeen.includes(attr)) {</span>
<a href="#l80.87"></a><span id="l80.87" class="difflineminus">-          throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l80.88"></a><span id="l80.88" class="difflineplus">+          throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l80.89"></a><span id="l80.89">         }</span>
<a href="#l80.90"></a><span id="l80.90"> </span>
<a href="#l80.91"></a><span id="l80.91">         // remember that we've seen it now</span>
<a href="#l80.92"></a><span id="l80.92">         attrsSeen.push(attr);</span>
<a href="#l80.93"></a><span id="l80.93">       }</span>
<a href="#l80.94"></a><span id="l80.94">     }</span>
<a href="#l80.95"></a><span id="l80.95">   },</span>
<a href="#l80.96"></a><span id="l80.96"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/mailnews/base/src/FolderLookupService.jsm</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/mailnews/base/src/FolderLookupService.jsm</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -15,17 +15,17 @@ var gCreated = false;</span>
<a href="#l81.4"></a><span id="l81.4"> </span>
<a href="#l81.5"></a><span id="l81.5"> /**</span>
<a href="#l81.6"></a><span id="l81.6">  * FolderLookupService maintains an index of folders and provides</span>
<a href="#l81.7"></a><span id="l81.7">  * lookup by folder URI.</span>
<a href="#l81.8"></a><span id="l81.8">  * @class</span>
<a href="#l81.9"></a><span id="l81.9">  */</span>
<a href="#l81.10"></a><span id="l81.10"> function FolderLookupService() {</span>
<a href="#l81.11"></a><span id="l81.11">   if (gCreated) {</span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-    throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l81.14"></a><span id="l81.14">   }</span>
<a href="#l81.15"></a><span id="l81.15">   this._map = new Map();</span>
<a href="#l81.16"></a><span id="l81.16">   gCreated = true;</span>
<a href="#l81.17"></a><span id="l81.17"> }</span>
<a href="#l81.18"></a><span id="l81.18"> </span>
<a href="#l81.19"></a><span id="l81.19"> FolderLookupService.prototype = {</span>
<a href="#l81.20"></a><span id="l81.20">   QueryInterface: ChromeUtils.generateQI([Ci.nsIFolderLookupService]),</span>
<a href="#l81.21"></a><span id="l81.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/mailnews/base/src/MailNewsCommandLineHandler.jsm</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/mailnews/base/src/MailNewsCommandLineHandler.jsm</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -143,17 +143,17 @@ MailNewsCommandLineHandler.prototype = {</span>
<a href="#l82.4"></a><span id="l82.4"> </span>
<a href="#l82.5"></a><span id="l82.5">   helpInfo:</span>
<a href="#l82.6"></a><span id="l82.6">     &quot;  -mail              Open the mail folder view.\n&quot; +</span>
<a href="#l82.7"></a><span id="l82.7">     &quot;  -mail &lt;URL&gt;        Open the message specified by this URL.\n&quot;,</span>
<a href="#l82.8"></a><span id="l82.8"> </span>
<a href="#l82.9"></a><span id="l82.9">   /* nsIFactory */</span>
<a href="#l82.10"></a><span id="l82.10">   createInstance(outer, iid) {</span>
<a href="#l82.11"></a><span id="l82.11">     if (outer != null) {</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l82.14"></a><span id="l82.14">     }</span>
<a href="#l82.15"></a><span id="l82.15"> </span>
<a href="#l82.16"></a><span id="l82.16">     return this.QueryInterface(iid);</span>
<a href="#l82.17"></a><span id="l82.17">   },</span>
<a href="#l82.18"></a><span id="l82.18"> </span>
<a href="#l82.19"></a><span id="l82.19">   QueryInterface: ChromeUtils.generateQI([</span>
<a href="#l82.20"></a><span id="l82.20">     Ci.nsICommandLineHandler,</span>
<a href="#l82.21"></a><span id="l82.21">     Ci.nsIFactory,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/mailnews/base/test/unit/test_compactFailure.js</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_compactFailure.js</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -25,26 +25,26 @@ logHelperAllowedErrors.push(Cr.NS_ERROR_</span>
<a href="#l83.4"></a><span id="l83.4"> logHelperAllowedErrors.push(Cr.NS_ERROR_FILE_TARGET_DOES_NOT_EXIST);</span>
<a href="#l83.5"></a><span id="l83.5"> </span>
<a href="#l83.6"></a><span id="l83.6"> function LockedFileOutputStream() {}</span>
<a href="#l83.7"></a><span id="l83.7"> </span>
<a href="#l83.8"></a><span id="l83.8"> LockedFileOutputStream.prototype = {</span>
<a href="#l83.9"></a><span id="l83.9">   QueryInterface: ChromeUtils.generateQI([Ci.nsIFileOutputStream]),</span>
<a href="#l83.10"></a><span id="l83.10"> </span>
<a href="#l83.11"></a><span id="l83.11">   init(file, ioFlags, perm, behaviorFlags) {</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-    throw Cr.NS_ERROR_FILE_IS_LOCKED;</span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FILE_IS_LOCKED);</span>
<a href="#l83.14"></a><span id="l83.14">   },</span>
<a href="#l83.15"></a><span id="l83.15"> };</span>
<a href="#l83.16"></a><span id="l83.16"> </span>
<a href="#l83.17"></a><span id="l83.17"> var MsgDBServiceFailure = {</span>
<a href="#l83.18"></a><span id="l83.18">   QueryInterface: ChromeUtils.generateQI([Ci.nsIMsgDBService]),</span>
<a href="#l83.19"></a><span id="l83.19"> </span>
<a href="#l83.20"></a><span id="l83.20">   openMailDBFromFile(file, folder, create, leaveInvalidDB) {</span>
<a href="#l83.21"></a><span id="l83.21">     if (folder.name == &quot;ShouldFail&quot;) {</span>
<a href="#l83.22"></a><span id="l83.22" class="difflineminus">-      throw Cr.NS_ERROR_FILE_TARGET_DOES_NOT_EXIST;</span>
<a href="#l83.23"></a><span id="l83.23" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FILE_TARGET_DOES_NOT_EXIST);</span>
<a href="#l83.24"></a><span id="l83.24">     }</span>
<a href="#l83.25"></a><span id="l83.25">     return this._genuine.openMailDBFromFile(</span>
<a href="#l83.26"></a><span id="l83.26">       file,</span>
<a href="#l83.27"></a><span id="l83.27">       folder,</span>
<a href="#l83.28"></a><span id="l83.28">       create,</span>
<a href="#l83.29"></a><span id="l83.29">       leaveInvalidDB</span>
<a href="#l83.30"></a><span id="l83.30">     );</span>
<a href="#l83.31"></a><span id="l83.31">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/mailnews/compose/src/SMTPProtocolHandler.jsm</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/mailnews/compose/src/SMTPProtocolHandler.jsm</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -15,17 +15,17 @@ function makeProtocolHandler(aProtocol, </span>
<a href="#l84.4"></a><span id="l84.4">     protocolFlags:</span>
<a href="#l84.5"></a><span id="l84.5">       nsIProtocolHandler.URI_NORELATIVE |</span>
<a href="#l84.6"></a><span id="l84.6">       nsIProtocolHandler.URI_DANGEROUS_TO_LOAD |</span>
<a href="#l84.7"></a><span id="l84.7">       nsIProtocolHandler.URI_NON_PERSISTABLE |</span>
<a href="#l84.8"></a><span id="l84.8">       nsIProtocolHandler.ALLOWS_PROXY |</span>
<a href="#l84.9"></a><span id="l84.9">       nsIProtocolHandler.URI_FORBIDS_AUTOMATIC_DOCUMENT_REPLACEMENT,</span>
<a href="#l84.10"></a><span id="l84.10"> </span>
<a href="#l84.11"></a><span id="l84.11">     newChannel(aURI, aLoadInfo) {</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-      throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_IMPLEMENTED);</span>
<a href="#l84.14"></a><span id="l84.14">     },</span>
<a href="#l84.15"></a><span id="l84.15"> </span>
<a href="#l84.16"></a><span id="l84.16">     allowPort(port, scheme) {</span>
<a href="#l84.17"></a><span id="l84.17">       return port == aDefaultPort;</span>
<a href="#l84.18"></a><span id="l84.18">     },</span>
<a href="#l84.19"></a><span id="l84.19">   };</span>
<a href="#l84.20"></a><span id="l84.20"> }</span>
<a href="#l84.21"></a><span id="l84.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/mailnews/import/test/unit/resources/mock_windows_reg_factory.js</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/mailnews/import/test/unit/resources/mock_windows_reg_factory.js</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -8,29 +8,29 @@ function MockWindowsRegKey(registryData)</span>
<a href="#l85.4"></a><span id="l85.4">   this._registryData = registryData;</span>
<a href="#l85.5"></a><span id="l85.5"> }</span>
<a href="#l85.6"></a><span id="l85.6"> </span>
<a href="#l85.7"></a><span id="l85.7"> MockWindowsRegKey.prototype = {</span>
<a href="#l85.8"></a><span id="l85.8">   QueryInterface: ChromeUtils.generateQI([Ci.nsIWindowsRegKey]),</span>
<a href="#l85.9"></a><span id="l85.9"> </span>
<a href="#l85.10"></a><span id="l85.10">   open(aRootKey, aRelPath, aMode) {</span>
<a href="#l85.11"></a><span id="l85.11">     if (!this._registryData[aRelPath]) {</span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l85.13"></a><span id="l85.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l85.14"></a><span id="l85.14">     }</span>
<a href="#l85.15"></a><span id="l85.15">     this._keyPath = aRelPath;</span>
<a href="#l85.16"></a><span id="l85.16">   },</span>
<a href="#l85.17"></a><span id="l85.17"> </span>
<a href="#l85.18"></a><span id="l85.18">   close() {},</span>
<a href="#l85.19"></a><span id="l85.19"> </span>
<a href="#l85.20"></a><span id="l85.20">   openChild(aRelPath, aMode) {</span>
<a href="#l85.21"></a><span id="l85.21">     if (</span>
<a href="#l85.22"></a><span id="l85.22">       !this._registryData[this._keyPath] ||</span>
<a href="#l85.23"></a><span id="l85.23">       !this._registryData[this._keyPath][aRelPath]</span>
<a href="#l85.24"></a><span id="l85.24">     ) {</span>
<a href="#l85.25"></a><span id="l85.25" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l85.26"></a><span id="l85.26" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l85.27"></a><span id="l85.27">     }</span>
<a href="#l85.28"></a><span id="l85.28"> </span>
<a href="#l85.29"></a><span id="l85.29">     let child = new MockWindowsRegKey({});</span>
<a href="#l85.30"></a><span id="l85.30">     let newKeyPath = this._keyPath + &quot;\\&quot; + aRelPath;</span>
<a href="#l85.31"></a><span id="l85.31">     child._keyPath = newKeyPath;</span>
<a href="#l85.32"></a><span id="l85.32">     child._registryData[newKeyPath] = this._registryData[this._keyPath][</span>
<a href="#l85.33"></a><span id="l85.33">       aRelPath</span>
<a href="#l85.34"></a><span id="l85.34">     ];</span>
<a href="#l85.35"></a><span id="l85.35" class="difflineat">@@ -40,28 +40,28 @@ MockWindowsRegKey.prototype = {</span>
<a href="#l85.36"></a><span id="l85.36">   get childCount() {</span>
<a href="#l85.37"></a><span id="l85.37">     return Object.keys(this._registryData[this._keyPath]).length;</span>
<a href="#l85.38"></a><span id="l85.38">   },</span>
<a href="#l85.39"></a><span id="l85.39"> </span>
<a href="#l85.40"></a><span id="l85.40">   getChildName(aIndex) {</span>
<a href="#l85.41"></a><span id="l85.41">     let keys = Object.keys(this._registryData[this._keyPath]);</span>
<a href="#l85.42"></a><span id="l85.42">     let keyAtIndex = keys[aIndex];</span>
<a href="#l85.43"></a><span id="l85.43">     if (!keyAtIndex) {</span>
<a href="#l85.44"></a><span id="l85.44" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l85.45"></a><span id="l85.45" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l85.46"></a><span id="l85.46">     }</span>
<a href="#l85.47"></a><span id="l85.47"> </span>
<a href="#l85.48"></a><span id="l85.48">     return keyAtIndex;</span>
<a href="#l85.49"></a><span id="l85.49">   },</span>
<a href="#l85.50"></a><span id="l85.50"> </span>
<a href="#l85.51"></a><span id="l85.51">   _readValue(aName) {</span>
<a href="#l85.52"></a><span id="l85.52">     if (</span>
<a href="#l85.53"></a><span id="l85.53">       !this._registryData[this._keyPath] ||</span>
<a href="#l85.54"></a><span id="l85.54">       !this._registryData[this._keyPath][aName]</span>
<a href="#l85.55"></a><span id="l85.55">     ) {</span>
<a href="#l85.56"></a><span id="l85.56" class="difflineminus">-      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l85.57"></a><span id="l85.57" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_FAILURE);</span>
<a href="#l85.58"></a><span id="l85.58">     }</span>
<a href="#l85.59"></a><span id="l85.59"> </span>
<a href="#l85.60"></a><span id="l85.60">     return this._registryData[this._keyPath][aName];</span>
<a href="#l85.61"></a><span id="l85.61">   },</span>
<a href="#l85.62"></a><span id="l85.62"> </span>
<a href="#l85.63"></a><span id="l85.63">   readIntValue(aName) {</span>
<a href="#l85.64"></a><span id="l85.64">     return this._readValue(aName);</span>
<a href="#l85.65"></a><span id="l85.65">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/mailnews/jsaccount/modules/JSAccountUtils.jsm</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/mailnews/jsaccount/modules/JSAccountUtils.jsm</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -82,17 +82,17 @@ var log = configureLogging();</span>
<a href="#l86.4"></a><span id="l86.4"> </span>
<a href="#l86.5"></a><span id="l86.5"> JSAccountUtils.jaFactory = function(aProperties, aJsDelegateConstructor) {</span>
<a href="#l86.6"></a><span id="l86.6">   let factory = {};</span>
<a href="#l86.7"></a><span id="l86.7">   factory.QueryInterface = ChromeUtils.generateQI([Ci.nsIFactory]);</span>
<a href="#l86.8"></a><span id="l86.8">   factory.lockFactory = function() {};</span>
<a href="#l86.9"></a><span id="l86.9"> </span>
<a href="#l86.10"></a><span id="l86.10">   factory.createInstance = function(outer, iid) {</span>
<a href="#l86.11"></a><span id="l86.11">     if (outer != null) {</span>
<a href="#l86.12"></a><span id="l86.12" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l86.13"></a><span id="l86.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l86.14"></a><span id="l86.14">     }</span>
<a href="#l86.15"></a><span id="l86.15"> </span>
<a href="#l86.16"></a><span id="l86.16">     // C++ delegator class.</span>
<a href="#l86.17"></a><span id="l86.17">     let delegator = Cc[aProperties.baseContractID].createInstance(</span>
<a href="#l86.18"></a><span id="l86.18">       Ci.msgIOverride</span>
<a href="#l86.19"></a><span id="l86.19">     );</span>
<a href="#l86.20"></a><span id="l86.20"> </span>
<a href="#l86.21"></a><span id="l86.21">     // Make sure the delegator JS wrapper knows its interfaces.</span>
<a href="#l86.22"></a><span id="l86.22" class="difflineat">@@ -181,17 +181,17 @@ JSAccountUtils.jaFactory = function(aPro</span>
<a href="#l86.23"></a><span id="l86.23">     }</span>
<a href="#l86.24"></a><span id="l86.24"> </span>
<a href="#l86.25"></a><span id="l86.25">     for (let iface of aProperties.baseInterfaces) {</span>
<a href="#l86.26"></a><span id="l86.26">       if (iid.equals(iface)) {</span>
<a href="#l86.27"></a><span id="l86.27">         log.debug(&quot;Successfully returning delegator &quot; + delegator);</span>
<a href="#l86.28"></a><span id="l86.28">         return delegator;</span>
<a href="#l86.29"></a><span id="l86.29">       }</span>
<a href="#l86.30"></a><span id="l86.30">     }</span>
<a href="#l86.31"></a><span id="l86.31" class="difflineminus">-    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l86.32"></a><span id="l86.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_INTERFACE);</span>
<a href="#l86.33"></a><span id="l86.33">   };</span>
<a href="#l86.34"></a><span id="l86.34"> </span>
<a href="#l86.35"></a><span id="l86.35">   return factory;</span>
<a href="#l86.36"></a><span id="l86.36"> };</span>
<a href="#l86.37"></a><span id="l86.37"> </span>
<a href="#l86.38"></a><span id="l86.38"> /**</span>
<a href="#l86.39"></a><span id="l86.39">  * Create a JS object that contains calls to each of the methods in a CPP</span>
<a href="#l86.40"></a><span id="l86.40">  * base class, that will reference the cpp object defined on a particular</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/mailnews/mime/src/MimeJSComponents.jsm</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/mailnews/mime/src/MimeJSComponents.jsm</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -39,17 +39,17 @@ StringEnumerator.prototype = {</span>
<a href="#l87.4"></a><span id="l87.4">     this._setNext();</span>
<a href="#l87.5"></a><span id="l87.5">     return !this._next.done;</span>
<a href="#l87.6"></a><span id="l87.6">   },</span>
<a href="#l87.7"></a><span id="l87.7">   getNext() {</span>
<a href="#l87.8"></a><span id="l87.8">     this._setNext();</span>
<a href="#l87.9"></a><span id="l87.9">     let result = this._next;</span>
<a href="#l87.10"></a><span id="l87.10">     this._next = undefined;</span>
<a href="#l87.11"></a><span id="l87.11">     if (result.done) {</span>
<a href="#l87.12"></a><span id="l87.12" class="difflineminus">-      throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l87.13"></a><span id="l87.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_UNEXPECTED);</span>
<a href="#l87.14"></a><span id="l87.14">     }</span>
<a href="#l87.15"></a><span id="l87.15">     return result.value;</span>
<a href="#l87.16"></a><span id="l87.16">   },</span>
<a href="#l87.17"></a><span id="l87.17"> };</span>
<a href="#l87.18"></a><span id="l87.18"> </span>
<a href="#l87.19"></a><span id="l87.19"> /**</span>
<a href="#l87.20"></a><span id="l87.20">  * If we get XPConnect-wrapped objects for msgIAddressObjects, we will have</span>
<a href="#l87.21"></a><span id="l87.21">  * properties defined for 'group' that throws off jsmime. This function converts</span>
<a href="#l87.22"></a><span id="l87.22" class="difflineat">@@ -87,25 +87,25 @@ MimeStructuredHeaders.prototype = {</span>
<a href="#l87.23"></a><span id="l87.23">     return this._headers.has(aHeaderName.toLowerCase());</span>
<a href="#l87.24"></a><span id="l87.24">   },</span>
<a href="#l87.25"></a><span id="l87.25"> </span>
<a href="#l87.26"></a><span id="l87.26">   getUnstructuredHeader(aHeaderName) {</span>
<a href="#l87.27"></a><span id="l87.27">     let result = this.getHeader(aHeaderName);</span>
<a href="#l87.28"></a><span id="l87.28">     if (result === undefined || typeof result == &quot;string&quot;) {</span>
<a href="#l87.29"></a><span id="l87.29">       return result;</span>
<a href="#l87.30"></a><span id="l87.30">     }</span>
<a href="#l87.31"></a><span id="l87.31" class="difflineminus">-    throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l87.32"></a><span id="l87.32" class="difflineplus">+    throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l87.33"></a><span id="l87.33">   },</span>
<a href="#l87.34"></a><span id="l87.34"> </span>
<a href="#l87.35"></a><span id="l87.35">   getAddressingHeader(aHeaderName, aPreserveGroups) {</span>
<a href="#l87.36"></a><span id="l87.36">     let addrs = this.getHeader(aHeaderName);</span>
<a href="#l87.37"></a><span id="l87.37">     if (addrs === undefined) {</span>
<a href="#l87.38"></a><span id="l87.38">       addrs = [];</span>
<a href="#l87.39"></a><span id="l87.39">     } else if (!Array.isArray(addrs)) {</span>
<a href="#l87.40"></a><span id="l87.40" class="difflineminus">-      throw Cr.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l87.41"></a><span id="l87.41" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l87.42"></a><span id="l87.42">     }</span>
<a href="#l87.43"></a><span id="l87.43">     return fixArray(addrs, aPreserveGroups);</span>
<a href="#l87.44"></a><span id="l87.44">   },</span>
<a href="#l87.45"></a><span id="l87.45"> </span>
<a href="#l87.46"></a><span id="l87.46">   getRawHeader(aHeaderName) {</span>
<a href="#l87.47"></a><span id="l87.47">     let result = this.getHeader(aHeaderName);</span>
<a href="#l87.48"></a><span id="l87.48">     if (result === undefined) {</span>
<a href="#l87.49"></a><span id="l87.49">       return result;</span>
<a href="#l87.50"></a><span id="l87.50" class="difflineat">@@ -154,17 +154,17 @@ MimeHeaders.prototype = {</span>
<a href="#l87.51"></a><span id="l87.51">   ]),</span>
<a href="#l87.52"></a><span id="l87.52"> </span>
<a href="#l87.53"></a><span id="l87.53">   initialize(allHeaders) {</span>
<a href="#l87.54"></a><span id="l87.54">     this._headers = MimeParser.extractHeaders(allHeaders);</span>
<a href="#l87.55"></a><span id="l87.55">   },</span>
<a href="#l87.56"></a><span id="l87.56"> </span>
<a href="#l87.57"></a><span id="l87.57">   extractHeader(header, getAll) {</span>
<a href="#l87.58"></a><span id="l87.58">     if (!this._headers) {</span>
<a href="#l87.59"></a><span id="l87.59" class="difflineminus">-      throw Cr.NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l87.60"></a><span id="l87.60" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NOT_INITIALIZED);</span>
<a href="#l87.61"></a><span id="l87.61">     }</span>
<a href="#l87.62"></a><span id="l87.62">     // Canonicalized to lower-case form</span>
<a href="#l87.63"></a><span id="l87.63">     header = header.toLowerCase();</span>
<a href="#l87.64"></a><span id="l87.64">     if (!this._headers.has(header)) {</span>
<a href="#l87.65"></a><span id="l87.65">       return null;</span>
<a href="#l87.66"></a><span id="l87.66">     }</span>
<a href="#l87.67"></a><span id="l87.67">     var values = this._headers.getRawHeader(header);</span>
<a href="#l87.68"></a><span id="l87.68">     if (getAll) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l88.1"></a><span id="l88.1" class="difflineminus">--- a/mailnews/test/fakeserver/Maild.jsm</span>
<a href="#l88.2"></a><span id="l88.2" class="difflineplus">+++ b/mailnews/test/fakeserver/Maild.jsm</span>
<a href="#l88.3"></a><span id="l88.3" class="difflineat">@@ -174,17 +174,17 @@ nsMailServer.prototype = {</span>
<a href="#l88.4"></a><span id="l88.4">     this._debug = debug;</span>
<a href="#l88.5"></a><span id="l88.5">     for (var i = 0; i &lt; this._readers.length; i++) {</span>
<a href="#l88.6"></a><span id="l88.6">       this._readers[i].setDebugLevel(debug);</span>
<a href="#l88.7"></a><span id="l88.7">     }</span>
<a href="#l88.8"></a><span id="l88.8">   },</span>
<a href="#l88.9"></a><span id="l88.9"> </span>
<a href="#l88.10"></a><span id="l88.10">   start(port = -1) {</span>
<a href="#l88.11"></a><span id="l88.11">     if (this._socket) {</span>
<a href="#l88.12"></a><span id="l88.12" class="difflineminus">-      throw Cr.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l88.13"></a><span id="l88.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_ALREADY_INITIALIZED);</span>
<a href="#l88.14"></a><span id="l88.14">     }</span>
<a href="#l88.15"></a><span id="l88.15"> </span>
<a href="#l88.16"></a><span id="l88.16">     if (port &gt; 0) {</span>
<a href="#l88.17"></a><span id="l88.17">       this._port = port;</span>
<a href="#l88.18"></a><span id="l88.18">     }</span>
<a href="#l88.19"></a><span id="l88.19">     this._socketClosed = false;</span>
<a href="#l88.20"></a><span id="l88.20"> </span>
<a href="#l88.21"></a><span id="l88.21">     var socket = new ServerSocket(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l89.1"></a><span id="l89.1" class="difflineminus">--- a/mailnews/test/resources/alertTestUtils.js</span>
<a href="#l89.2"></a><span id="l89.2" class="difflineplus">+++ b/mailnews/test/resources/alertTestUtils.js</span>
<a href="#l89.3"></a><span id="l89.3" class="difflineat">@@ -332,17 +332,17 @@ var alertUtilsPromptService = {</span>
<a href="#l89.4"></a><span id="l89.4">     }</span>
<a href="#l89.5"></a><span id="l89.5"> </span>
<a href="#l89.6"></a><span id="l89.6">     do_throw(&quot;selectPS unexpectedly called: &quot; + aText + &quot;\n&quot;);</span>
<a href="#l89.7"></a><span id="l89.7">     return false;</span>
<a href="#l89.8"></a><span id="l89.8">   },</span>
<a href="#l89.9"></a><span id="l89.9"> </span>
<a href="#l89.10"></a><span id="l89.10">   createInstance(outer, iid) {</span>
<a href="#l89.11"></a><span id="l89.11">     if (outer != null) {</span>
<a href="#l89.12"></a><span id="l89.12" class="difflineminus">-      throw Cr.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l89.13"></a><span id="l89.13" class="difflineplus">+      throw Components.Exception(&quot;&quot;, Cr.NS_ERROR_NO_AGGREGATION);</span>
<a href="#l89.14"></a><span id="l89.14">     }</span>
<a href="#l89.15"></a><span id="l89.15">     return this.QueryInterface(iid);</span>
<a href="#l89.16"></a><span id="l89.16">   },</span>
<a href="#l89.17"></a><span id="l89.17"> </span>
<a href="#l89.18"></a><span id="l89.18">   QueryInterface: ChromeUtils.generateQI([</span>
<a href="#l89.19"></a><span id="l89.19">     Ci.nsIPromptService,</span>
<a href="#l89.20"></a><span id="l89.20">     Ci.nsIPromptService2,</span>
<a href="#l89.21"></a><span id="l89.21">   ]),</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

