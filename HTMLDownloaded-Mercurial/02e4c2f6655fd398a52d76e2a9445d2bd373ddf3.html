<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23888:02e4c2f6655fd398a52d76e2a9445d2bd373ddf3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 02e4c2f6655fd398a52d76e2a9445d2bd373ddf3" />
<meta property="og:url" content="/comm-central/rev/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3" />
<meta property="og:description" content="Bug 1459184 - Port bug 1456611: Replace use of insertItemAt and removeItemAt methods (mail part). r=jorgk, ui-r=Paenglab" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 02e4c2f6655fd398a52d76e2a9445d2bd373ddf3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">shortlog</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">files</a> |
changeset |
<a href="/comm-central/raw-rev/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">raw</a>  | <a href="/comm-central/archive/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1459184">Bug 1459184</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1456611">bug 1456611</a>: Replace use of insertItemAt and removeItemAt methods (mail part). r=jorgk, ui-r=Paenglab
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 05 May 2018 09:49:00 +0200</td></tr>

<tr>
 <td>changeset 23888</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">02e4c2f6655fd398a52d76e2a9445d2bd373ddf3</a></td>
</tr>



<tr>
<td>parent 23887</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f223187047f5fd9cf256fd929bf71ebcc250fce5">f223187047f5fd9cf256fd929bf71ebcc250fce5</a>
</td>
</tr>

<tr>
<td>child 23889</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c870df0b09fad7662a9426de64762407257ed2d0">c870df0b09fad7662a9426de64762407257ed2d0</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=02e4c2f6655fd398a52d76e2a9445d2bd373ddf3">14396</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Sat, 05 May 2018 17:21:23 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@7a9c437d31e2 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7a9c437d31e29bab71795944830fc4617e818be9">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7a9c437d31e29bab71795944830fc4617e818be9&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7a9c437d31e29bab71795944830fc4617e818be9&newProject=comm-central&newRevision=02e4c2f6655fd398a52d76e2a9445d2bd373ddf3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7a9c437d31e29bab71795944830fc4617e818be9&newProject=comm-central&newRevision=02e4c2f6655fd398a52d76e2a9445d2bd373ddf3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7a9c437d31e29bab71795944830fc4617e818be9&newProject=comm-central&newRevision=02e4c2f6655fd398a52d76e2a9445d2bd373ddf3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a>, <a href="/comm-central/log?rev=reviewer%28Paenglab%29&revcount=50">Paenglab</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1459184">1459184</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1456611">1456611</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1459184">Bug 1459184</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1456611">bug 1456611</a>: Replace use of insertItemAt and removeItemAt methods (mail part). r=jorgk, ui-r=Paenglab</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdDictionary.js">editor/ui/dialogs/content/EdDictionary.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdDictionary.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdDictionary.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdDictionary.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdDictionary.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdDictionary.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdSpellCheck.js">editor/ui/dialogs/content/EdSpellCheck.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdSpellCheck.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdSpellCheck.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdSpellCheck.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdSpellCheck.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EdSpellCheck.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EditorPublishSettings.js">editor/ui/dialogs/content/EditorPublishSettings.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EditorPublishSettings.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EditorPublishSettings.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EditorPublishSettings.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EditorPublishSettings.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/editor/ui/dialogs/content/EditorPublishSettings.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.js">mail/base/content/ABSearchDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.xul">mail/base/content/ABSearchDialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.xul">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.xul">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.xul">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.xul">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/ABSearchDialog.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/FilterListDialog.js">mail/base/content/FilterListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/FilterListDialog.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/FilterListDialog.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/FilterListDialog.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/FilterListDialog.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/base/content/FilterListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/accountcreation/content/emailWizard.js">mail/components/accountcreation/content/emailWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/accountcreation/content/emailWizard.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/accountcreation/content/emailWizard.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/accountcreation/content/emailWizard.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/accountcreation/content/emailWizard.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/accountcreation/content/emailWizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abCommon.js">mail/components/addrbook/content/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abCommon.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abCommon.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abCommon.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abCommon.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abContactsPanel.xul">mail/components/addrbook/content/abContactsPanel.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abContactsPanel.xul">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abContactsPanel.xul">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abContactsPanel.xul">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abContactsPanel.xul">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/addrbook/content/abContactsPanel.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/cloudfile/content/addAccountDialog.js">mail/components/cloudfile/content/addAccountDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/cloudfile/content/addAccountDialog.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/cloudfile/content/addAccountDialog.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/cloudfile/content/addAccountDialog.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/cloudfile/content/addAccountDialog.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/cloudfile/content/addAccountDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applicationManager.js">mail/components/preferences/applicationManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applicationManager.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applicationManager.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applicationManager.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applicationManager.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applicationManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/attachmentReminder.js">mail/components/preferences/attachmentReminder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/attachmentReminder.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/attachmentReminder.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/attachmentReminder.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/attachmentReminder.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/attachmentReminder.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.inc.xul">mail/components/preferences/display.inc.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.inc.xul">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.inc.xul">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.inc.xul">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.inc.xul">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.inc.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.js">mail/components/preferences/display.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mail/components/preferences/display.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/addrbook/content/addrbookWidgets.xml">mailnews/addrbook/content/addrbookWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/addrbook/content/addrbookWidgets.xml">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/addrbook/content/addrbookWidgets.xml">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/addrbook/content/addrbookWidgets.xml">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/addrbook/content/addrbookWidgets.xml">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/addrbook/content/addrbookWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/base/prefs/content/am-junk.js">mailnews/base/prefs/content/am-junk.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/base/prefs/content/am-junk.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/base/prefs/content/am-junk.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/base/prefs/content/am-junk.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/base/prefs/content/am-junk.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/mailnews/base/prefs/content/am-junk.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/suite/common/pref/pref-spelling.js">suite/common/pref/pref-spelling.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/suite/common/pref/pref-spelling.js">file</a> |
<a href="/comm-central/annotate/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/suite/common/pref/pref-spelling.js">annotate</a> |
<a href="/comm-central/diff/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/suite/common/pref/pref-spelling.js">diff</a> |
<a href="/comm-central/comparison/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/suite/common/pref/pref-spelling.js">comparison</a> |
<a href="/comm-central/log/02e4c2f6655fd398a52d76e2a9445d2bd373ddf3/suite/common/pref/pref-spelling.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/editor/ui/dialogs/content/EdDictionary.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/editor/ui/dialogs/content/EdDictionary.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -112,17 +112,17 @@ function ReplaceWord()</span>
<a href="#l1.4"></a><span id="l1.4"> function RemoveWord()</span>
<a href="#l1.5"></a><span id="l1.5"> {</span>
<a href="#l1.6"></a><span id="l1.6">   var selIndex = gDialog.DictionaryList.selectedIndex;</span>
<a href="#l1.7"></a><span id="l1.7">   if (selIndex &gt;= 0)</span>
<a href="#l1.8"></a><span id="l1.8">   {</span>
<a href="#l1.9"></a><span id="l1.9">     var word = gDialog.DictionaryList.selectedItem.label;</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">     // Remove word from list</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    gDialog.DictionaryList.removeItemAt(selIndex);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    gDialog.DictionaryList.selectedItem.remove();</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15">     // Remove from dictionary</span>
<a href="#l1.16"></a><span id="l1.16">     try {</span>
<a href="#l1.17"></a><span id="l1.17">       //Not working: BUG 43348</span>
<a href="#l1.18"></a><span id="l1.18">       gSpellChecker.RemoveWordFromDictionary(word);</span>
<a href="#l1.19"></a><span id="l1.19">     }</span>
<a href="#l1.20"></a><span id="l1.20">     catch (e)</span>
<a href="#l1.21"></a><span id="l1.21">     {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/editor/ui/dialogs/content/EdSpellCheck.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/editor/ui/dialogs/content/EdSpellCheck.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -142,25 +142,30 @@ function InitLanguageMenu(aCurLang)</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5">   // Store current dictionary count.</span>
<a href="#l2.6"></a><span id="l2.6">   gDictCount = count;</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">   var inlineSpellChecker = new InlineSpellChecker();</span>
<a href="#l2.9"></a><span id="l2.9">   var sortedList = inlineSpellChecker.sortDictionaryList(dictList);</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">   // Remove any languages from the list.</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  var languageMenuPopup = gDialog.LanguageMenulist.firstChild;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  var languageMenuPopup = gDialog.LanguageMenulist.menupopup;</span>
<a href="#l2.14"></a><span id="l2.14">   while (languageMenuPopup.firstChild.localName != &quot;menuseparator&quot;)</span>
<a href="#l2.15"></a><span id="l2.15">     languageMenuPopup.firstChild.remove();</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">   var defaultItem = null;</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">   for (var i = 0; i &lt; count; i++)</span>
<a href="#l2.20"></a><span id="l2.20">   {</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">-    var item = gDialog.LanguageMenulist.insertItemAt(i, sortedList[i].label, sortedList[i].id);</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+    let item = document.createElementNS(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;, &quot;menuitem&quot;);</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+    item.setAttribute(&quot;label&quot;, sortedList[i].label);</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+    item.setAttribute(&quot;value&quot;, sortedList[i].id);</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+    let beforeItem = gDialog.LanguageMenulist.getItemAtIndex(i);</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+    languageMenuPopup.insertBefore(item, beforeItem);</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+</span>
<a href="#l2.28"></a><span id="l2.28">     if (aCurLang &amp;&amp; sortedList[i].id == aCurLang)</span>
<a href="#l2.29"></a><span id="l2.29">       defaultItem = item;</span>
<a href="#l2.30"></a><span id="l2.30">   }</span>
<a href="#l2.31"></a><span id="l2.31"> </span>
<a href="#l2.32"></a><span id="l2.32">   // Now make sure the correct item in the menu list is selected.</span>
<a href="#l2.33"></a><span id="l2.33">   if (defaultItem)</span>
<a href="#l2.34"></a><span id="l2.34">   {</span>
<a href="#l2.35"></a><span id="l2.35">     gDialog.LanguageMenulist.selectedItem = defaultItem;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/editor/ui/dialogs/content/EditorPublishSettings.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/editor/ui/dialogs/content/EditorPublishSettings.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -111,27 +111,26 @@ function AddNewSite()</span>
<a href="#l3.4"></a><span id="l3.4"> }</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6"> function RemoveSite()</span>
<a href="#l3.7"></a><span id="l3.7"> {</span>
<a href="#l3.8"></a><span id="l3.8">   if (!gPublishSiteData)</span>
<a href="#l3.9"></a><span id="l3.9">     return;</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">   var index = gDialog.SiteList.selectedIndex;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  var item;</span>
<a href="#l3.13"></a><span id="l3.13">   if (index != -1)</span>
<a href="#l3.14"></a><span id="l3.14">   {</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-    item = gDialog.SiteList.selectedItems[0];</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+    let item = gDialog.SiteList.selectedItem;</span>
<a href="#l3.17"></a><span id="l3.17">     var nameToRemove = item.getAttribute(&quot;label&quot;);</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">     // Remove one item from site data array</span>
<a href="#l3.20"></a><span id="l3.20">     gPublishSiteData.splice(index, 1);</span>
<a href="#l3.21"></a><span id="l3.21">     // Remove item from site list</span>
<a href="#l3.22"></a><span id="l3.22">     gDialog.SiteList.clearSelection();</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-    gDialog.SiteList.removeItemAt(index);</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+    item.remove();</span>
<a href="#l3.25"></a><span id="l3.25"> </span>
<a href="#l3.26"></a><span id="l3.26">     // Adjust if we removed last item and reselect a site</span>
<a href="#l3.27"></a><span id="l3.27">     if (index &gt;= gPublishSiteData.length)</span>
<a href="#l3.28"></a><span id="l3.28">       index--;</span>
<a href="#l3.29"></a><span id="l3.29">     InitSiteSettings(index);</span>
<a href="#l3.30"></a><span id="l3.30"> </span>
<a href="#l3.31"></a><span id="l3.31">     if (nameToRemove == gDefaultSiteName)</span>
<a href="#l3.32"></a><span id="l3.32">     {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/ABSearchDialog.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/ABSearchDialog.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -57,35 +57,28 @@ function searchOnLoad()</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5">   // initialize a flag for phonetic name search</span>
<a href="#l4.6"></a><span id="l4.6">   gSearchPhoneticName =</span>
<a href="#l4.7"></a><span id="l4.7">         Services.prefs.getComplexValue(&quot;mail.addr_book.show_phonetic_fields&quot;,</span>
<a href="#l4.8"></a><span id="l4.8">                                        Ci.nsIPrefLocalizedString).data;</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10">   // Initialize globals, see abCommon.js , InitCommonJS()</span>
<a href="#l4.11"></a><span id="l4.11">   abList = document.getElementById(&quot;abPopup&quot;);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  if (abList.getItemAtIndex(0) != (kAllDirectoryRoot + &quot;?&quot;))</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-    abList.insertItemAt(0, gAddressBookBundle.getString(&quot;allAddressBooks&quot;),</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-                        kAllDirectoryRoot + &quot;?&quot;);</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">   if (window.arguments &amp;&amp; window.arguments[0])</span>
<a href="#l4.17"></a><span id="l4.17">     SelectDirectory(window.arguments[0].directory);</span>
<a href="#l4.18"></a><span id="l4.18">   else</span>
<a href="#l4.19"></a><span id="l4.19">     SelectDirectory(document.getElementById(&quot;abPopup-menupopup&quot;)</span>
<a href="#l4.20"></a><span id="l4.20">                             .firstChild.value);</span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22">   onMore(null);</span>
<a href="#l4.23"></a><span id="l4.23"> }</span>
<a href="#l4.24"></a><span id="l4.24"> </span>
<a href="#l4.25"></a><span id="l4.25"> function searchOnUnload()</span>
<a href="#l4.26"></a><span id="l4.26"> {</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-  let abPopup = document.getElementById('abPopup');</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-  if (abPopup.getItemAtIndex(0) == (kAllDirectoryRoot + &quot;?&quot;))</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-    document.getElementById('abPopup').removeItemAt(0);</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-</span>
<a href="#l4.31"></a><span id="l4.31">   CloseAbView();</span>
<a href="#l4.32"></a><span id="l4.32"> }</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34"> function disableCommands()</span>
<a href="#l4.35"></a><span id="l4.35"> {</span>
<a href="#l4.36"></a><span id="l4.36">   gPropertiesCmd.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l4.37"></a><span id="l4.37">   gComposeCmd.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l4.38"></a><span id="l4.38">   gDeleteCmd.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/ABSearchDialog.xul</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/ABSearchDialog.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -58,17 +58,17 @@</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">   &lt;dummy class=&quot;usesMailWidgets&quot;/&gt;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">     &lt;vbox id=&quot;searchTerms&quot; flex=&quot;3&quot; persist=&quot;height&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8">       &lt;vbox&gt;</span>
<a href="#l5.9"></a><span id="l5.9">         &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l5.10"></a><span id="l5.10">           &lt;label value=&quot;&amp;abSearchHeading.label;&quot; accesskey=&quot;&amp;abSearchHeading.accesskey;&quot; control=&quot;abPopup&quot;/&gt;</span>
<a href="#l5.11"></a><span id="l5.11">           &lt;menulist id=&quot;abPopup&quot; oncommand=&quot;SelectDirectory(this.value);&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-            &lt;menupopup id=&quot;abPopup-menupopup&quot; class=&quot;addrbooksPopup&quot;/&gt;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+            &lt;menupopup id=&quot;abPopup-menupopup&quot; class=&quot;addrbooksPopup&quot; alladdressbooks=&quot;true&quot;/&gt;</span>
<a href="#l5.14"></a><span id="l5.14">           &lt;/menulist&gt;</span>
<a href="#l5.15"></a><span id="l5.15">           &lt;spacer flex=&quot;10&quot;/&gt;</span>
<a href="#l5.16"></a><span id="l5.16">           &lt;button id=&quot;search-button&quot; oncommand=&quot;onSearchButton(event);&quot; default=&quot;true&quot;/&gt;</span>
<a href="#l5.17"></a><span id="l5.17">         &lt;/hbox&gt;</span>
<a href="#l5.18"></a><span id="l5.18">         &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l5.19"></a><span id="l5.19">           &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l5.20"></a><span id="l5.20">           &lt;button label=&quot;&amp;resetButton.label;&quot; oncommand=&quot;onAbSearchReset(event);&quot; accesskey=&quot;&amp;resetButton.accesskey;&quot;/&gt;</span>
<a href="#l5.21"></a><span id="l5.21">         &lt;/hbox&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/FilterListDialog.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/FilterListDialog.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -438,17 +438,17 @@ function onDeleteFilter()</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">   // Save filter position before the first selected one.</span>
<a href="#l6.6"></a><span id="l6.6">   let newSelectionIndex = gFilterListbox.selectedIndex - 1;</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8">   // Must reverse the loop, as the items list shrinks when we delete.</span>
<a href="#l6.9"></a><span id="l6.9">   for (let index = items.length - 1; index &gt;= 0; --index) {</span>
<a href="#l6.10"></a><span id="l6.10">     let item = items[index];</span>
<a href="#l6.11"></a><span id="l6.11">     gCurrentFilterList.removeFilter(item._filter);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    gFilterListbox.removeItemAt(gFilterListbox.getIndexOfItem(item));</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    item.remove();</span>
<a href="#l6.14"></a><span id="l6.14">   }</span>
<a href="#l6.15"></a><span id="l6.15">   updateCountBox();</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">   // Select filter above previously selected if one existed, otherwise the first one.</span>
<a href="#l6.18"></a><span id="l6.18">   if (newSelectionIndex == -1 &amp;&amp; gFilterListbox.itemCount &gt; 0)</span>
<a href="#l6.19"></a><span id="l6.19">     newSelectionIndex = 0;</span>
<a href="#l6.20"></a><span id="l6.20">   if (newSelectionIndex &gt; -1) {</span>
<a href="#l6.21"></a><span id="l6.21">     gFilterListbox.selectedIndex = newSelectionIndex;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/components/accountcreation/content/emailWizard.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/components/accountcreation/content/emailWizard.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -197,34 +197,35 @@ EmailConfigWizard.prototype =</span>
<a href="#l7.4"></a><span id="l7.4">     e(&quot;incoming_port&quot;).value = gStringsBundle.getString(&quot;port_auto&quot;);</span>
<a href="#l7.5"></a><span id="l7.5">     this.fillPortDropdown(&quot;smtp&quot;);</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">     // If the account provisioner is preffed off, don't display</span>
<a href="#l7.8"></a><span id="l7.8">     // the account provisioner button.</span>
<a href="#l7.9"></a><span id="l7.9">     if (!Services.prefs.getBoolPref(&quot;mail.provider.enabled&quot;))</span>
<a href="#l7.10"></a><span id="l7.10">       _hide(&quot;provisioner_button&quot;);</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+    let menulist = e(&quot;outgoing_hostname&quot;);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    // Add the entry for the new host to the menulist</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+    let menuitem = menulist.appendItem(&quot;&quot;, &quot;-new-&quot;); // label,value</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+    menuitem.serverKey = null;</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+</span>
<a href="#l7.17"></a><span id="l7.17">     // Populate SMTP server dropdown with already configured SMTP servers from</span>
<a href="#l7.18"></a><span id="l7.18">     // other accounts.</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-    var menulist = e(&quot;outgoing_hostname&quot;);</span>
<a href="#l7.20"></a><span id="l7.20">     let smtpServers = MailServices.smtp.servers;</span>
<a href="#l7.21"></a><span id="l7.21">     while (smtpServers.hasMoreElements()) {</span>
<a href="#l7.22"></a><span id="l7.22">       let server = smtpServers.getNext().QueryInterface(Ci.nsISmtpServer);</span>
<a href="#l7.23"></a><span id="l7.23">       let label = server.displayname;</span>
<a href="#l7.24"></a><span id="l7.24">       let key = server.key;</span>
<a href="#l7.25"></a><span id="l7.25">       if (MailServices.smtp.defaultServer &amp;&amp;</span>
<a href="#l7.26"></a><span id="l7.26">           MailServices.smtp.defaultServer.key == key) {</span>
<a href="#l7.27"></a><span id="l7.27">         label += &quot; &quot; + gStringsBundle.getString(&quot;default_server_tag&quot;);</span>
<a href="#l7.28"></a><span id="l7.28">       }</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">-      let menuitem = menulist.appendItem(label, key, &quot;&quot;); // label,value,descr</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+      menuitem = menulist.appendItem(label, key, &quot;&quot;); // label,value,descr</span>
<a href="#l7.31"></a><span id="l7.31">       menuitem.serverKey = key;</span>
<a href="#l7.32"></a><span id="l7.32">     }</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-    // Add the entry for the new host to the menulist</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-    let menuitem = menulist.insertItemAt(0, &quot;&quot;, &quot;-new-&quot;); // pos,label,value</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-    menuitem.serverKey = null;</span>
<a href="#l7.36"></a><span id="l7.36"> </span>
<a href="#l7.37"></a><span id="l7.37">     // admin-locked prefs hurray</span>
<a href="#l7.38"></a><span id="l7.38">     if (!Services.prefs.getBoolPref(&quot;signon.rememberSignons&quot;)) {</span>
<a href="#l7.39"></a><span id="l7.39">       let rememberPasswordE = e(&quot;remember_password&quot;);</span>
<a href="#l7.40"></a><span id="l7.40">       rememberPasswordE.checked = false;</span>
<a href="#l7.41"></a><span id="l7.41">       rememberPasswordE.disabled = true;</span>
<a href="#l7.42"></a><span id="l7.42">     }</span>
<a href="#l7.43"></a><span id="l7.43"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/addrbook/content/abCommon.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCommon.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -351,22 +351,16 @@ function GetParentRow(aTree, aRow)</span>
<a href="#l8.4"></a><span id="l8.4">   return row;</span>
<a href="#l8.5"></a><span id="l8.5"> }</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> function InitCommonJS()</span>
<a href="#l8.8"></a><span id="l8.8"> {</span>
<a href="#l8.9"></a><span id="l8.9">   gDirTree = document.getElementById(&quot;dirTree&quot;);</span>
<a href="#l8.10"></a><span id="l8.10">   abList = document.getElementById(&quot;addressbookList&quot;);</span>
<a href="#l8.11"></a><span id="l8.11">   gAddressBookBundle = document.getElementById(&quot;bundle_addressBook&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-  // Make an entry for &quot;All Address Books&quot;.</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-  if (abList) {</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-    abList.insertItemAt(0, gAddressBookBundle.getString(&quot;allAddressBooks&quot;),</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-                        kAllDirectoryRoot + &quot;?&quot;);</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-  }</span>
<a href="#l8.18"></a><span id="l8.18"> }</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20"> function AbDelete()</span>
<a href="#l8.21"></a><span id="l8.21"> {</span>
<a href="#l8.22"></a><span id="l8.22">   let types = GetSelectedCardTypes();</span>
<a href="#l8.23"></a><span id="l8.23">   if (types == kNothingSelected)</span>
<a href="#l8.24"></a><span id="l8.24">     return;</span>
<a href="#l8.25"></a><span id="l8.25"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/addrbook/content/abContactsPanel.xul</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/addrbook/content/abContactsPanel.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -116,17 +116,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">       &lt;toolbarbutton id=&quot;abContextMenuButton&quot;</span>
<a href="#l9.5"></a><span id="l9.5">                      tooltiptext=&quot;&amp;abContextMenuButton.tooltip;&quot;</span>
<a href="#l9.6"></a><span id="l9.6">                      onclick=&quot;showContextMenu('sidebarAbContextMenu', event, [this, 'after_end', 0, 0, true]);&quot;/&gt;</span>
<a href="#l9.7"></a><span id="l9.7">     &lt;/hbox&gt;</span>
<a href="#l9.8"></a><span id="l9.8">     &lt;hbox id=&quot;panel-bar&quot; class=&quot;toolbar&quot; align=&quot;center&quot;&gt;</span>
<a href="#l9.9"></a><span id="l9.9">       &lt;menulist id=&quot;addressbookList&quot;</span>
<a href="#l9.10"></a><span id="l9.10">                 oncommand=&quot;AddressBookMenuListChange();&quot; flex=&quot;1&quot;</span>
<a href="#l9.11"></a><span id="l9.11">                 persist=&quot;value&quot;&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        &lt;menupopup id=&quot;addressbookList-menupopup&quot; class=&quot;addrbooksPopup&quot;/&gt;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+        &lt;menupopup id=&quot;addressbookList-menupopup&quot; class=&quot;addrbooksPopup&quot; alladdressbooks=&quot;true&quot;/&gt;</span>
<a href="#l9.14"></a><span id="l9.14">       &lt;/menulist&gt;</span>
<a href="#l9.15"></a><span id="l9.15">     &lt;/hbox&gt;</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17">     &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">     &lt;vbox&gt;</span>
<a href="#l9.20"></a><span id="l9.20">       &lt;label value=&quot;&amp;searchContacts.label;&quot;</span>
<a href="#l9.21"></a><span id="l9.21">              accesskey=&quot;&amp;searchContacts.accesskey;&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/components/cloudfile/content/addAccountDialog.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/components/cloudfile/content/addAccountDialog.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -159,20 +159,18 @@ var addAccountDialog = {</span>
<a href="#l10.4"></a><span id="l10.4">     }</span>
<a href="#l10.5"></a><span id="l10.5">     let newHeight = this._settings.contentDocument.body.offsetHeight;</span>
<a href="#l10.6"></a><span id="l10.6">     this._settings.style.height = this._settings.style.minHeight = newHeight + &quot;px&quot;;</span>
<a href="#l10.7"></a><span id="l10.7">     window.sizeToContent();</span>
<a href="#l10.8"></a><span id="l10.8">   },</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">   removeTitleMenuItem: function AAD_removeTitleMenuItem() {</span>
<a href="#l10.11"></a><span id="l10.11">     let menuitem = this._accountType.querySelector('menuitem[value=&quot;&quot;]');</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    if (menuitem) {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-      let index = this._accountType.getIndexOfItem(menuitem);</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-      this._accountType.removeItemAt(index);</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-    }</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+    if (menuitem)</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+      menuitem.remove();</span>
<a href="#l10.18"></a><span id="l10.18">   },</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">   // Return number of additions to the menulist, zero if none happened.</span>
<a href="#l10.21"></a><span id="l10.21">   addAccountTypes: function AAD_addAccountTypes() {</span>
<a href="#l10.22"></a><span id="l10.22">     let accountTypeTotal = 0;</span>
<a href="#l10.23"></a><span id="l10.23">     for (let [key, provider] of cloudFileAccounts.enumerateProviders()) {</span>
<a href="#l10.24"></a><span id="l10.24">       // If we already have an account for this type, don't add it to the list.</span>
<a href="#l10.25"></a><span id="l10.25">       // This limitation will hopefully be removed in the future.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -4772,17 +4772,17 @@ function RemoveAllAttachments()</span>
<a href="#l11.4"></a><span id="l11.4">     return;</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6">   let fileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l11.7"></a><span id="l11.7">                             .QueryInterface(Ci.nsIFileProtocolHandler);</span>
<a href="#l11.8"></a><span id="l11.8">   let removedAttachments = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l11.9"></a><span id="l11.9">                              .createInstance(Ci.nsIMutableArray);</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">   while (bucket.itemCount &gt; 0) {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    let item = bucket.removeItemAt(bucket.itemCount - 1);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    let item = bucket.getItemAtIndex(bucket.itemCount - 1);</span>
<a href="#l11.14"></a><span id="l11.14">     if (item.attachment.size != -1) {</span>
<a href="#l11.15"></a><span id="l11.15">       gAttachmentsSize -= item.attachment.size;</span>
<a href="#l11.16"></a><span id="l11.16">     }</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18">     if (item.attachment.sendViaCloud &amp;&amp; item.cloudProvider) {</span>
<a href="#l11.19"></a><span id="l11.19">       let originalUrl = item.originalUrl;</span>
<a href="#l11.20"></a><span id="l11.20">       if (!originalUrl)</span>
<a href="#l11.21"></a><span id="l11.21">         originalUrl = item.attachment.url;</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -4793,16 +4793,17 @@ function RemoveAllAttachments()</span>
<a href="#l11.23"></a><span id="l11.23">         item.cloudProvider.deleteFile(file,</span>
<a href="#l11.24"></a><span id="l11.24">           new deletionListener(item.attachment, item.cloudProvider));</span>
<a href="#l11.25"></a><span id="l11.25">     }</span>
<a href="#l11.26"></a><span id="l11.26"> </span>
<a href="#l11.27"></a><span id="l11.27">     removedAttachments.appendElement(item.attachment);</span>
<a href="#l11.28"></a><span id="l11.28">     // Let's release the attachment object hold by the node else it won't go</span>
<a href="#l11.29"></a><span id="l11.29">     // away until the window is destroyed.</span>
<a href="#l11.30"></a><span id="l11.30">     item.attachment = null;</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+    item.remove();</span>
<a href="#l11.32"></a><span id="l11.32">   }</span>
<a href="#l11.33"></a><span id="l11.33"> </span>
<a href="#l11.34"></a><span id="l11.34">   if (removedAttachments.length &gt; 0) {</span>
<a href="#l11.35"></a><span id="l11.35">     // Bug workaround: Force update of selectedCount and selectedItem.</span>
<a href="#l11.36"></a><span id="l11.36">     bucket.clearSelection();</span>
<a href="#l11.37"></a><span id="l11.37">     updateAttachmentPane(&quot;show&quot;);</span>
<a href="#l11.38"></a><span id="l11.38">     gContentChanged = true;</span>
<a href="#l11.39"></a><span id="l11.39">     dispatchAttachmentBucketEvent(&quot;attachments-removed&quot;, removedAttachments);</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineat">@@ -4865,17 +4866,17 @@ function RemoveSelectedAttachment()</span>
<a href="#l11.41"></a><span id="l11.41">   let focusIndex = bucket.currentIndex;</span>
<a href="#l11.42"></a><span id="l11.42"> </span>
<a href="#l11.43"></a><span id="l11.43">   let fileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l11.44"></a><span id="l11.44">                             .QueryInterface(Ci.nsIFileProtocolHandler);</span>
<a href="#l11.45"></a><span id="l11.45">   let removedAttachments = Cc[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l11.46"></a><span id="l11.46">                              .createInstance(Ci.nsIMutableArray);</span>
<a href="#l11.47"></a><span id="l11.47"> </span>
<a href="#l11.48"></a><span id="l11.48">   for (let i = bucket.selectedCount - 1; i &gt;= 0; i--) {</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-    let item = bucket.removeItemAt(bucket.getIndexOfItem(bucket.getSelectedItem(i)));</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineplus">+    let item = bucket.getSelectedItem(i);</span>
<a href="#l11.51"></a><span id="l11.51">     if (item.attachment.size != -1) {</span>
<a href="#l11.52"></a><span id="l11.52">       gAttachmentsSize -= item.attachment.size;</span>
<a href="#l11.53"></a><span id="l11.53">     }</span>
<a href="#l11.54"></a><span id="l11.54"> </span>
<a href="#l11.55"></a><span id="l11.55">     if (item.attachment.sendViaCloud &amp;&amp; item.cloudProvider) {</span>
<a href="#l11.56"></a><span id="l11.56">       let originalUrl = item.originalUrl;</span>
<a href="#l11.57"></a><span id="l11.57">       if (!originalUrl)</span>
<a href="#l11.58"></a><span id="l11.58">         originalUrl = item.attachment.url;</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineat">@@ -4886,16 +4887,17 @@ function RemoveSelectedAttachment()</span>
<a href="#l11.60"></a><span id="l11.60">         item.cloudProvider.deleteFile(file,</span>
<a href="#l11.61"></a><span id="l11.61">           new deletionListener(item.attachment, item.cloudProvider));</span>
<a href="#l11.62"></a><span id="l11.62">     }</span>
<a href="#l11.63"></a><span id="l11.63"> </span>
<a href="#l11.64"></a><span id="l11.64">     removedAttachments.appendElement(item.attachment);</span>
<a href="#l11.65"></a><span id="l11.65">     // Let's release the attachment object held by the node else it won't go</span>
<a href="#l11.66"></a><span id="l11.66">     // away until the window is destroyed</span>
<a href="#l11.67"></a><span id="l11.67">     item.attachment = null;</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineplus">+    item.remove();</span>
<a href="#l11.69"></a><span id="l11.69">   }</span>
<a href="#l11.70"></a><span id="l11.70"> </span>
<a href="#l11.71"></a><span id="l11.71">   updateAttachmentPane();</span>
<a href="#l11.72"></a><span id="l11.72"> </span>
<a href="#l11.73"></a><span id="l11.73">   // Bug workaround: Force update of selectedCount and selectedItem, both wrong</span>
<a href="#l11.74"></a><span id="l11.74">   // after item removal, to avoid confusion for listening command controllers.</span>
<a href="#l11.75"></a><span id="l11.75">   bucket.clearSelection();</span>
<a href="#l11.76"></a><span id="l11.76"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/components/preferences/applicationManager.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/components/preferences/applicationManager.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -49,17 +49,17 @@ var gAppManagerDialog = {</span>
<a href="#l12.4"></a><span id="l12.4">   onCancel: function appManager_onCancel() {</span>
<a href="#l12.5"></a><span id="l12.5">     // do nothing</span>
<a href="#l12.6"></a><span id="l12.6">   },</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8">   remove: function appManager_remove() {</span>
<a href="#l12.9"></a><span id="l12.9">     var list = document.getElementById(&quot;appList&quot;);</span>
<a href="#l12.10"></a><span id="l12.10">     this._removed.push(list.selectedItem.app);</span>
<a href="#l12.11"></a><span id="l12.11">     var index = list.selectedIndex;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    list.removeItemAt(index);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    list.selectedItem.remove();</span>
<a href="#l12.14"></a><span id="l12.14">     if (list.getRowCount() == 0) {</span>
<a href="#l12.15"></a><span id="l12.15">       // The list is now empty, make the bottom part disappear</span>
<a href="#l12.16"></a><span id="l12.16">       document.getElementById(&quot;appDetails&quot;).hidden = true;</span>
<a href="#l12.17"></a><span id="l12.17">     }</span>
<a href="#l12.18"></a><span id="l12.18">     else {</span>
<a href="#l12.19"></a><span id="l12.19">       // Select the item at the same index, if we removed the last</span>
<a href="#l12.20"></a><span id="l12.20">       // item of the list, select the previous item</span>
<a href="#l12.21"></a><span id="l12.21">       if (index == list.getRowCount())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1710,22 +1710,22 @@ var gApplicationsPane = {</span>
<a href="#l13.4"></a><span id="l13.4">   onDelete: function(aEvent) {</span>
<a href="#l13.5"></a><span id="l13.5">     // We want to delete if either the request came from the confirmDelete</span>
<a href="#l13.6"></a><span id="l13.6">     // method (which is the only thing that populates the aEvent parameter),</span>
<a href="#l13.7"></a><span id="l13.7">     // or we've hit the delete/backspace key while the list has focus.</span>
<a href="#l13.8"></a><span id="l13.8">     if ((aEvent || document.commandDispatcher.focusedElement == this._list) &amp;&amp;</span>
<a href="#l13.9"></a><span id="l13.9">         this._list.selectedIndex != -1) {</span>
<a href="#l13.10"></a><span id="l13.10">       let typeItem = this._list.getItemAtIndex(this._list.selectedIndex);</span>
<a href="#l13.11"></a><span id="l13.11">       let handlerInfo = this._handledTypes[typeItem.type];</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      this._list.removeItemAt(this._list.selectedIndex);</span>
<a href="#l13.13"></a><span id="l13.13">       let index = this._visibleTypes.indexOf(handlerInfo);</span>
<a href="#l13.14"></a><span id="l13.14">       if (index != -1)</span>
<a href="#l13.15"></a><span id="l13.15">         this._visibleTypes.splice(index, 1);</span>
<a href="#l13.16"></a><span id="l13.16">       handlerInfo.remove();</span>
<a href="#l13.17"></a><span id="l13.17">       delete this._handledTypes[typeItem.type];</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+      typeItem.remove();</span>
<a href="#l13.19"></a><span id="l13.19">     }</span>
<a href="#l13.20"></a><span id="l13.20">   },</span>
<a href="#l13.21"></a><span id="l13.21"> </span>
<a href="#l13.22"></a><span id="l13.22">   _setIconClassForPreferredAction: function(aHandlerInfo, aElement) {</span>
<a href="#l13.23"></a><span id="l13.23">     // If this returns true, the attribute that CSS sniffs for was set to something</span>
<a href="#l13.24"></a><span id="l13.24">     // so you shouldn't manually set an icon URI.</span>
<a href="#l13.25"></a><span id="l13.25">     // This removes the existing actionIcon attribute if any, even if returning false.</span>
<a href="#l13.26"></a><span id="l13.26">     aElement.removeAttribute(&quot;actionIcon&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/components/preferences/attachmentReminder.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/components/preferences/attachmentReminder.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -36,41 +36,44 @@ var gAttachmentReminderOptionsDialog = {</span>
<a href="#l14.4"></a><span id="l14.4"> </span>
<a href="#l14.5"></a><span id="l14.5">   addKeyword: function()</span>
<a href="#l14.6"></a><span id="l14.6">   {</span>
<a href="#l14.7"></a><span id="l14.7">     var input = {value: &quot;&quot;}; // Default to empty.</span>
<a href="#l14.8"></a><span id="l14.8">     var ok = Services.prompt.prompt(window,</span>
<a href="#l14.9"></a><span id="l14.9">                                     this.bundle.getString(&quot;attachmentReminderNewDialogTitle&quot;),</span>
<a href="#l14.10"></a><span id="l14.10">                                     this.bundle.getString(&quot;attachmentReminderNewText&quot;),</span>
<a href="#l14.11"></a><span id="l14.11">                                     input, null, {value:0});</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    if (ok &amp;&amp; input.value)</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-      this.keywordListBox.appendItem(input.value, input.value);</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+    if (ok &amp;&amp; input.value) {</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+      let newKey = this.keywordListBox.appendItem(input.value, input.value);</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+      this.keywordListBox.ensureElementIsVisible(newKey);</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+      this.keywordListBox.selectItem(newKey);</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+    }</span>
<a href="#l14.19"></a><span id="l14.19">   },</span>
<a href="#l14.20"></a><span id="l14.20"> </span>
<a href="#l14.21"></a><span id="l14.21">   editKeyword: function()</span>
<a href="#l14.22"></a><span id="l14.22">   {</span>
<a href="#l14.23"></a><span id="l14.23">     if (this.keywordListBox.selectedIndex &lt; 0)</span>
<a href="#l14.24"></a><span id="l14.24">       return;</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-    var keywordToEdit = this.keywordListBox.getItemAtIndex(this.keywordListBox.selectedIndex);</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineplus">+    var keywordToEdit = this.keywordListBox.selectedItem;</span>
<a href="#l14.27"></a><span id="l14.27">     var input = {value: keywordToEdit.getAttribute(&quot;value&quot;)};</span>
<a href="#l14.28"></a><span id="l14.28">     var ok = Services.prompt.prompt(window,</span>
<a href="#l14.29"></a><span id="l14.29">                                     this.bundle.getString(&quot;attachmentReminderEditDialogTitle&quot;),</span>
<a href="#l14.30"></a><span id="l14.30">                                     this.bundle.getString(&quot;attachmentReminderEditText&quot;),</span>
<a href="#l14.31"></a><span id="l14.31">                                     input, null, {value:0});</span>
<a href="#l14.32"></a><span id="l14.32">     if (ok &amp;&amp; input.value) {</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">-      this.keywordListBox.removeItemAt(this.keywordListBox.selectedIndex);</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineminus">-      this.keywordListBox.appendItem(input.value, input.value);</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+      this.keywordListBox.selectedItem.value = input.value;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+      this.keywordListBox.selectedItem.label = input.value;</span>
<a href="#l14.37"></a><span id="l14.37">     }</span>
<a href="#l14.38"></a><span id="l14.38">   },</span>
<a href="#l14.39"></a><span id="l14.39"> </span>
<a href="#l14.40"></a><span id="l14.40">   removeKeyword: function()</span>
<a href="#l14.41"></a><span id="l14.41">   {</span>
<a href="#l14.42"></a><span id="l14.42">     if (this.keywordListBox.selectedIndex &lt; 0)</span>
<a href="#l14.43"></a><span id="l14.43">       return;</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-    this.keywordListBox.removeItemAt(this.keywordListBox.selectedIndex);</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+    this.keywordListBox.selectedItem.remove();</span>
<a href="#l14.46"></a><span id="l14.46">   },</span>
<a href="#l14.47"></a><span id="l14.47"> </span>
<a href="#l14.48"></a><span id="l14.48">   saveKeywords: function()</span>
<a href="#l14.49"></a><span id="l14.49">   {</span>
<a href="#l14.50"></a><span id="l14.50">     var keywordList = &quot;&quot;;</span>
<a href="#l14.51"></a><span id="l14.51">     for (var i = 0; i &lt; this.keywordListBox.getRowCount(); i++) {</span>
<a href="#l14.52"></a><span id="l14.52">       keywordList += this.keywordListBox.getItemAtIndex(i).getAttribute(&quot;value&quot;);</span>
<a href="#l14.53"></a><span id="l14.53">       if (i != this.keywordListBox.getRowCount() - 1)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/components/preferences/display.inc.xul</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/components/preferences/display.inc.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -63,17 +63,19 @@</span>
<a href="#l15.4"></a><span id="l15.4">                 &lt;column/&gt;</span>
<a href="#l15.5"></a><span id="l15.5">               &lt;/columns&gt;</span>
<a href="#l15.6"></a><span id="l15.6">               &lt;rows id=&quot;fontsRows&quot;&gt;</span>
<a href="#l15.7"></a><span id="l15.7">                 &lt;row id=&quot;fontRow&quot;&gt;</span>
<a href="#l15.8"></a><span id="l15.8">                   &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l15.9"></a><span id="l15.9">                     &lt;label accesskey=&quot;&amp;defaultFont.accesskey;&quot;</span>
<a href="#l15.10"></a><span id="l15.10">                            control=&quot;defaultFont&quot;&gt;&amp;defaultFont.label;&lt;/label&gt;</span>
<a href="#l15.11"></a><span id="l15.11">                     &lt;menulist id=&quot;defaultFont&quot; flex=&quot;1&quot; sizetopopup=&quot;pref&quot; crop=&quot;center&quot;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-                              onsyncfrompreference=&quot;return gDisplayPane.readFontSelection()&quot;/&gt;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+                              onsyncfrompreference=&quot;return gDisplayPane.readFontSelection()&quot;&gt;</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+                      &lt;menupopup/&gt;</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+                    &lt;/menulist&gt;</span>
<a href="#l15.16"></a><span id="l15.16">                     &lt;label accesskey=&quot;&amp;defaultSize.accesskey;&quot;</span>
<a href="#l15.17"></a><span id="l15.17">                            control=&quot;defaultFontSize&quot;&gt;&amp;defaultSize.label;&lt;/label&gt;</span>
<a href="#l15.18"></a><span id="l15.18">                     &lt;menulist id=&quot;defaultFontSize&quot;&gt;</span>
<a href="#l15.19"></a><span id="l15.19">                       &lt;menupopup&gt;</span>
<a href="#l15.20"></a><span id="l15.20">                         &lt;menuitem value=&quot;9&quot; label=&quot;9&quot;/&gt;</span>
<a href="#l15.21"></a><span id="l15.21">                         &lt;menuitem value=&quot;10&quot; label=&quot;10&quot;/&gt;</span>
<a href="#l15.22"></a><span id="l15.22">                         &lt;menuitem value=&quot;11&quot; label=&quot;11&quot;/&gt;</span>
<a href="#l15.23"></a><span id="l15.23">                         &lt;menuitem value=&quot;12&quot; label=&quot;12&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/components/preferences/display.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/components/preferences/display.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -16,17 +16,21 @@ var gDisplayPane = {</span>
<a href="#l16.4"></a><span id="l16.4">       let preference = document.getElementById(&quot;mail.preferences.display.selectedTabIndex&quot;);</span>
<a href="#l16.5"></a><span id="l16.5">       if (preference.value)</span>
<a href="#l16.6"></a><span id="l16.6">         document.getElementById(&quot;displayPrefs&quot;).selectedIndex = preference.value;</span>
<a href="#l16.7"></a><span id="l16.7">     }</span>
<a href="#l16.8"></a><span id="l16.8">     this._rebuildFonts();</span>
<a href="#l16.9"></a><span id="l16.9">     this.updateMarkAsReadOptions(document.getElementById(&quot;automaticallyMarkAsRead&quot;).checked);</span>
<a href="#l16.10"></a><span id="l16.10">     var menulist = document.getElementById(&quot;defaultFont&quot;);</span>
<a href="#l16.11"></a><span id="l16.11">     if (menulist.selectedIndex == -1) {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-      menulist.insertItemAt(0, &quot;&quot;, &quot;&quot;, &quot;&quot;);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+      // Prepend menuitem with empty name and value.</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+      let item = document.createElementNS(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;, &quot;menuitem&quot;);</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+      item.setAttribute(&quot;label&quot;, &quot;&quot;);</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+      item.setAttribute(&quot;value&quot;, &quot;&quot;);</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+      menulist.menupopup.insertBefore(item, menulist.menupopup.firstChild);</span>
<a href="#l16.18"></a><span id="l16.18">       menulist.selectedIndex = 0;</span>
<a href="#l16.19"></a><span id="l16.19">     }</span>
<a href="#l16.20"></a><span id="l16.20"> </span>
<a href="#l16.21"></a><span id="l16.21">     this.mInitialized = true;</span>
<a href="#l16.22"></a><span id="l16.22"> </span>
<a href="#l16.23"></a><span id="l16.23">     this.mTagListBox = document.getElementById(&quot;tagList&quot;);</span>
<a href="#l16.24"></a><span id="l16.24">     this.buildTagList();</span>
<a href="#l16.25"></a><span id="l16.25">   },</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineat">@@ -233,17 +237,17 @@ var gDisplayPane = {</span>
<a href="#l16.27"></a><span id="l16.27"> </span>
<a href="#l16.28"></a><span id="l16.28">   removeTag: function()</span>
<a href="#l16.29"></a><span id="l16.29">   {</span>
<a href="#l16.30"></a><span id="l16.30">     var index = this.mTagListBox.selectedIndex;</span>
<a href="#l16.31"></a><span id="l16.31">     if (index &gt;= 0)</span>
<a href="#l16.32"></a><span id="l16.32">     {</span>
<a href="#l16.33"></a><span id="l16.33">       var itemToRemove = this.mTagListBox.getItemAtIndex(index);</span>
<a href="#l16.34"></a><span id="l16.34">       MailServices.tags.deleteKey(itemToRemove.getAttribute(&quot;value&quot;));</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-      this.mTagListBox.removeItemAt(index);</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+      itemToRemove.remove();</span>
<a href="#l16.37"></a><span id="l16.37">       var numItemsInListBox = this.mTagListBox.getRowCount();</span>
<a href="#l16.38"></a><span id="l16.38">       this.mTagListBox.selectedIndex = index &lt; numItemsInListBox ? index : numItemsInListBox - 1;</span>
<a href="#l16.39"></a><span id="l16.39">     }</span>
<a href="#l16.40"></a><span id="l16.40">   },</span>
<a href="#l16.41"></a><span id="l16.41"> </span>
<a href="#l16.42"></a><span id="l16.42">   /**</span>
<a href="#l16.43"></a><span id="l16.43">    * Open the edit tag dialog</span>
<a href="#l16.44"></a><span id="l16.44">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/addrbook/content/addrbookWidgets.xml</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/addrbook/content/addrbookWidgets.xml</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -68,56 +68,60 @@</span>
<a href="#l17.4"></a><span id="l17.4">               }</span>
<a href="#l17.5"></a><span id="l17.5">             }</span>
<a href="#l17.6"></a><span id="l17.6">           }</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8">           this._sort();</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10">           this._teardown();</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+          let menulist = this.parentNode;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineplus">+          if (this.hasAttribute(&quot;none&quot;)) {</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineplus">+            // Create a dummy menuitem representing no selection.</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+            this._directories.unshift(null);</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineplus">+            let listItem = menulist.appendItem(this.getAttribute(&quot;none&quot;), &quot;&quot;);</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineplus">+            listItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic abMenuItem&quot;);</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineplus">+            listItem.setAttribute(&quot;IsNone&quot;, &quot;true&quot;);</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineplus">+          }</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineplus">+</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+          if (this.hasAttribute(&quot;alladdressbooks&quot;)) {</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineplus">+            // Insert a menuitem representing All Addressbooks.</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineplus">+            let allABLabel = this.getAttribute(&quot;alladdressbooks&quot;);</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineplus">+            if (allABLabel == &quot;true&quot;)</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineplus">+              allABLabel = this._stringBundle.getString(&quot;allAddressBooks&quot;);</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineplus">+            const allABURI = &quot;moz-abdirectory://?&quot;;</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineplus">+            this._directories.unshift(null);</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineplus">+            let listItem = menulist.appendItem(allABLabel, allABURI);</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineplus">+            listItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic abMenuItem&quot;);</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineplus">+            listItem.setAttribute(&quot;AddrBook&quot;, &quot;true&quot;);</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+            listItem.setAttribute(&quot;IsAllAB&quot;, &quot;true&quot;);</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineplus">+          }</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineplus">+</span>
<a href="#l17.35"></a><span id="l17.35">           // Now create menuitems for all displayed directories.</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-          let menulist = this.parentNode;</span>
<a href="#l17.37"></a><span id="l17.37">           let value = this._value;</span>
<a href="#l17.38"></a><span id="l17.38">           for (let ab of this._directories) {</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineplus">+            if (!ab) // Skip the empty members added above.</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineplus">+              continue;</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineplus">+</span>
<a href="#l17.42"></a><span id="l17.42">             let listItem = menulist.appendItem(ab.dirName, ab[value]);</span>
<a href="#l17.43"></a><span id="l17.43">             listItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic abMenuItem&quot;);</span>
<a href="#l17.44"></a><span id="l17.44"> </span>
<a href="#l17.45"></a><span id="l17.45">             // Style the items by type.</span>
<a href="#l17.46"></a><span id="l17.46">             if (ab.isMailList)</span>
<a href="#l17.47"></a><span id="l17.47">               listItem.setAttribute(&quot;MailList&quot;, &quot;true&quot;);</span>
<a href="#l17.48"></a><span id="l17.48">             else</span>
<a href="#l17.49"></a><span id="l17.49">               listItem.setAttribute(&quot;AddrBook&quot;, &quot;true&quot;);</span>
<a href="#l17.50"></a><span id="l17.50"> </span>
<a href="#l17.51"></a><span id="l17.51">             if (ab.isRemote)</span>
<a href="#l17.52"></a><span id="l17.52">               listItem.setAttribute(&quot;IsRemote&quot;, &quot;true&quot;);</span>
<a href="#l17.53"></a><span id="l17.53">             if (ab.isSecure)</span>
<a href="#l17.54"></a><span id="l17.54">               listItem.setAttribute(&quot;IsSecure&quot;, &quot;true&quot;);</span>
<a href="#l17.55"></a><span id="l17.55">           }</span>
<a href="#l17.56"></a><span id="l17.56"> </span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-          if (this.hasAttribute(&quot;alladdressbooks&quot;)) {</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-            // Insert a menuitem representing All addressbooks.</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineminus">-            let allABLabel = this.getAttribute(&quot;alladdressbooks&quot;);</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-            if (allABLabel == &quot;true&quot;)</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-              allABLabel = this._stringBundle.getString(&quot;allAddressBooks&quot;);</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-            const allABURI = &quot;moz-abdirectory://?&quot;;</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-            this._directories.unshift(null);</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-            let listItem = menulist.insertItemAt(0, allABLabel, allABURI);</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-            listItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic abMenuItem&quot;);</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-            listItem.setAttribute(&quot;AddrBook&quot;, &quot;true&quot;);</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineminus">-            listItem.setAttribute(&quot;IsAllAB&quot;, &quot;true&quot;);</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineminus">-          }</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineminus">-</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-          if (this.hasAttribute(&quot;none&quot;)) {</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-            // Create a dummy menuitem representing no selection.</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineminus">-            this._directories.unshift(null);</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineminus">-            let listItem = menulist.insertItemAt(0, this.getAttribute(&quot;none&quot;), &quot;&quot;);</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-            listItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic abMenuItem&quot;);</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-            listItem.setAttribute(&quot;IsNone&quot;, &quot;true&quot;);</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-          }</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-</span>
<a href="#l17.78"></a><span id="l17.78">           // Attempt to select the persisted or otherwise first directory.</span>
<a href="#l17.79"></a><span id="l17.79">           menulist.value = aSelectValue || this.parentNode.value;</span>
<a href="#l17.80"></a><span id="l17.80">           if (!menulist.selectedItem &amp;&amp; this.hasChildNodes())</span>
<a href="#l17.81"></a><span id="l17.81">             menulist.selectedIndex = 0;</span>
<a href="#l17.82"></a><span id="l17.82">         ]]&gt;&lt;/body&gt;</span>
<a href="#l17.83"></a><span id="l17.83">       &lt;/method&gt;</span>
<a href="#l17.84"></a><span id="l17.84"> </span>
<a href="#l17.85"></a><span id="l17.85">       &lt;method name=&quot;_teardown&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-junk.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-junk.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -53,18 +53,18 @@ function onInit(aPageId, aServerId)</span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5">   var currentArray = [];</span>
<a href="#l18.6"></a><span id="l18.6">   if (document.getElementById(&quot;server.useWhiteList&quot;).checked)</span>
<a href="#l18.7"></a><span id="l18.7">     currentArray = document.getElementById(&quot;server.whiteListAbURI&quot;).value.split(&quot; &quot;);</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">   // set up the whitelist UI</span>
<a href="#l18.10"></a><span id="l18.10">   var wList = document.getElementById(&quot;whiteListAbURI&quot;);</span>
<a href="#l18.11"></a><span id="l18.11">   // Ensure the whitelist is empty</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  for (let i = wList.itemCount - 1; i &gt;= 0; i--) {</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-    wList.removeItemAt(i);</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  while (wList.hasChildNodes()) {</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+    wList.lastChild.remove();</span>
<a href="#l18.16"></a><span id="l18.16">   }</span>
<a href="#l18.17"></a><span id="l18.17"> </span>
<a href="#l18.18"></a><span id="l18.18">   // Populate the listbox with address books</span>
<a href="#l18.19"></a><span id="l18.19">   let abItems = [];</span>
<a href="#l18.20"></a><span id="l18.20">   for (let ab of fixIterator(MailServices.ab.directories,</span>
<a href="#l18.21"></a><span id="l18.21">                              Ci.nsIAbDirectory)) {</span>
<a href="#l18.22"></a><span id="l18.22">     // We skip mailing lists and remote address books.</span>
<a href="#l18.23"></a><span id="l18.23">     if (ab.isMailList || ab.isRemote)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/suite/common/pref/pref-spelling.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/suite/common/pref/pref-spelling.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -83,25 +83,30 @@ function InitLanguageMenu() {</span>
<a href="#l19.4"></a><span id="l19.4">   dictList.sort(</span>
<a href="#l19.5"></a><span id="l19.5">     function compareFn(a, b) {</span>
<a href="#l19.6"></a><span id="l19.6">       return a[0].localeCompare(b[0]);</span>
<a href="#l19.7"></a><span id="l19.7">     }</span>
<a href="#l19.8"></a><span id="l19.8">   );</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10">   var languageMenuList = document.getElementById(&quot;languageMenuList&quot;);</span>
<a href="#l19.11"></a><span id="l19.11">   // Remove any languages from the list.</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  var languageMenuPopup = languageMenuList.firstChild;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  var languageMenuPopup = languageMenuList.menupopup;</span>
<a href="#l19.14"></a><span id="l19.14">   while (languageMenuPopup.firstChild.localName != &quot;menuseparator&quot;)</span>
<a href="#l19.15"></a><span id="l19.15">     languageMenuPopup.firstChild.remove();</span>
<a href="#l19.16"></a><span id="l19.16"> </span>
<a href="#l19.17"></a><span id="l19.17">   var curLang  = languageMenuList.value;</span>
<a href="#l19.18"></a><span id="l19.18">   var defaultItem = null;</span>
<a href="#l19.19"></a><span id="l19.19"> </span>
<a href="#l19.20"></a><span id="l19.20">   for (let i = 0; i &lt; count; i++) {</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-    let item = languageMenuList.insertItemAt(i, dictList[i][0], dictList[i][1]);</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+    let item = document.createElementNS(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;, &quot;menuitem&quot;);</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+    item.setAttribute(&quot;label&quot;, dictList[i][0]);</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineplus">+    item.setAttribute(&quot;value&quot;, dictList[i][1]);</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineplus">+    let beforeItem = gDialog.LanguageMenulist.getItemAtIndex(i);</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+    languageMenuPopup.insertBefore(item, beforeItem);</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+</span>
<a href="#l19.28"></a><span id="l19.28">     if (curLang &amp;&amp; dictList[i][1] == curLang)</span>
<a href="#l19.29"></a><span id="l19.29">       defaultItem = item;</span>
<a href="#l19.30"></a><span id="l19.30">   }</span>
<a href="#l19.31"></a><span id="l19.31"> </span>
<a href="#l19.32"></a><span id="l19.32">   // Now make sure the correct item in the menu list is selected.</span>
<a href="#l19.33"></a><span id="l19.33">   if (defaultItem) {</span>
<a href="#l19.34"></a><span id="l19.34">     languageMenuList.selectedItem = defaultItem;</span>
<a href="#l19.35"></a><span id="l19.35">     gLastSelectedLang = defaultItem;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

