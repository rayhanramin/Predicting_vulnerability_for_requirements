<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 24256:dbb76057d5faba6fabbf1b15a006c01623d3d0c0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ dbb76057d5faba6fabbf1b15a006c01623d3d0c0" />
<meta property="og:url" content="/comm-central/rev/dbb76057d5faba6fabbf1b15a006c01623d3d0c0" />
<meta property="og:description" content="Bug 1475060 - remove most files under build/ since they are no longer used. r=tomprince" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / dbb76057d5faba6fabbf1b15a006c01623d3d0c0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/dbb76057d5faba6fabbf1b15a006c01623d3d0c0">shortlog</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/dbb76057d5faba6fabbf1b15a006c01623d3d0c0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/dbb76057d5faba6fabbf1b15a006c01623d3d0c0">files</a> |
changeset |
<a href="/comm-central/raw-rev/dbb76057d5faba6fabbf1b15a006c01623d3d0c0">raw</a>  | <a href="/comm-central/archive/dbb76057d5faba6fabbf1b15a006c01623d3d0c0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1475060">Bug 1475060</a> - remove most files under build/ since they are no longer used. r=tomprince
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 14 Jul 2018 00:06:58 +0200</td></tr>

<tr>
 <td>changeset 24256</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/dbb76057d5faba6fabbf1b15a006c01623d3d0c0">dbb76057d5faba6fabbf1b15a006c01623d3d0c0</a></td>
</tr>



<tr>
<td>parent 24255</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/2c6eadfca726fb0fd0f57b4cfa194bce9ef4dce8">2c6eadfca726fb0fd0f57b4cfa194bce9ef4dce8</a>
</td>
</tr>

<tr>
<td>child 24257</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3ed9a8933c64f142ab83b626690dead70b30c9a3">3ed9a8933c64f142ab83b626690dead70b30c9a3</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=dbb76057d5faba6fabbf1b15a006c01623d3d0c0">14614</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 13 Jul 2018 22:07:42 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@3ed9a8933c64 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3ed9a8933c64f142ab83b626690dead70b30c9a3">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3ed9a8933c64f142ab83b626690dead70b30c9a3&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3ed9a8933c64f142ab83b626690dead70b30c9a3&newProject=comm-central&newRevision=2c6eadfca726fb0fd0f57b4cfa194bce9ef4dce8&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3ed9a8933c64f142ab83b626690dead70b30c9a3&newProject=comm-central&newRevision=2c6eadfca726fb0fd0f57b4cfa194bce9ef4dce8&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3ed9a8933c64f142ab83b626690dead70b30c9a3&newProject=comm-central&newRevision=2c6eadfca726fb0fd0f57b4cfa194bce9ef4dce8&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28tomprince%29&revcount=50">tomprince</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1475060">1475060</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1475060">Bug 1475060</a> - remove most files under build/ since they are no longer used. r=tomprince</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/config.guess">build/autoconf/config.guess</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/config.guess">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/config.guess">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/config.guess">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig-find">build/autoconf/mozconfig-find</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig-find">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig-find">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig-find">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig2client-mk">build/autoconf/mozconfig2client-mk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig2client-mk">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig2client-mk">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/autoconf/mozconfig2client-mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-args">build/client.py-args</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-args">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-args">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-args">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-l10n-args">build/client.py-l10n-args</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-l10n-args">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-l10n-args">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/client.py-l10n-args">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/dumbmake-dependencies">build/dumbmake-dependencies</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/dumbmake-dependencies">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/dumbmake-dependencies">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/dumbmake-dependencies">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mach_bootstrap.py">build/mach_bootstrap.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mach_bootstrap.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mach_bootstrap.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mach_bootstrap.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/cross-mozconfig.common">build/macosx/cross-mozconfig.common</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/cross-mozconfig.common">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/cross-mozconfig.common">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/cross-mozconfig.common">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/local-mozconfig.common">build/macosx/local-mozconfig.common</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/local-mozconfig.common">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/local-mozconfig.common">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/local-mozconfig.common">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/mozconfig.common">build/macosx/mozconfig.common</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/mozconfig.common">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/mozconfig.common">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/macosx/mozconfig.common">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/merge-installrdf.py">build/merge-installrdf.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/merge-installrdf.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/merge-installrdf.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/merge-installrdf.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.automation">build/mozconfig.automation</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.automation">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.automation">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.automation">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.cache">build/mozconfig.cache</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.cache">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.cache">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.cache">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.comm-support">build/mozconfig.comm-support</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.comm-support">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.comm-support">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.comm-support">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.common">build/mozconfig.common</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.common">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.common">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.common">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.no-compile">build/mozconfig.no-compile</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.no-compile">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.no-compile">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.no-compile">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.rust">build/mozconfig.rust</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.rust">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.rust">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.rust">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.sccache">build/mozconfig.sccache</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.sccache">file</a> |
<a href="/comm-central/annotate/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.sccache">annotate</a> |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.sccache">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.sccache">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.sccache">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.stylo">build/mozconfig.stylo</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.stylo">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.stylo">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.stylo">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.vs-common">build/mozconfig.vs-common</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.vs-common">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.vs-common">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.vs-common">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.win-common">build/mozconfig.win-common</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.win-common">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.win-common">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/mozconfig.win-common">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pymake/make.py">build/pymake/make.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pymake/make.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pymake/make.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pymake/make.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/exnumpy.py">build/pypng/exnumpy.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/exnumpy.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/exnumpy.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/exnumpy.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/iccp.py">build/pypng/iccp.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/iccp.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/iccp.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/iccp.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/mkiccp.py">build/pypng/mkiccp.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/mkiccp.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/mkiccp.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/mkiccp.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pdsimgtopng">build/pypng/pdsimgtopng</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pdsimgtopng">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pdsimgtopng">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pdsimgtopng">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipasgrey">build/pypng/pipasgrey</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipasgrey">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipasgrey">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipasgrey">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcat">build/pypng/pipcat</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcat">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcat">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcat">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcolours">build/pypng/pipcolours</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcolours">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcolours">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcolours">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcomposite">build/pypng/pipcomposite</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcomposite">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcomposite">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipcomposite">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipdither">build/pypng/pipdither</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipdither">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipdither">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipdither">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/piprgb">build/pypng/piprgb</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/piprgb">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/piprgb">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/piprgb">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipscalez">build/pypng/pipscalez</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipscalez">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipscalez">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipscalez">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipstack">build/pypng/pipstack</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipstack">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipstack">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipstack">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipwindow">build/pypng/pipwindow</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipwindow">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipwindow">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pipwindow">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/plan9topng.py">build/pypng/plan9topng.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/plan9topng.py">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/plan9topng.py">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/plan9topng.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pngchunk">build/pypng/pngchunk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pngchunk">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pngchunk">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pngchunk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnghist">build/pypng/pnghist</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnghist">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnghist">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnghist">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnglsch">build/pypng/pnglsch</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnglsch">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnglsch">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/pnglsch">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/texttopng">build/pypng/texttopng</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/texttopng">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/texttopng">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/pypng/texttopng">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.gtk">build/unix/mozconfig.gtk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.gtk">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.gtk">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.gtk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux">build/unix/mozconfig.linux</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux32">build/unix/mozconfig.linux32</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux32">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux32">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.linux32">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.stdcxx">build/unix/mozconfig.stdcxx</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.stdcxx">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.stdcxx">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/unix/mozconfig.stdcxx">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs-latest">build/win32/mozconfig.vs-latest</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs-latest">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs-latest">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs-latest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs2017">build/win32/mozconfig.vs2017</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs2017">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs2017">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win32/mozconfig.vs2017">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs-latest">build/win64/mozconfig.vs-latest</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs-latest">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs-latest">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs-latest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs2017">build/win64/mozconfig.vs2017</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs2017">diff</a> |
<a href="/comm-central/comparison/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs2017">comparison</a> |
<a href="/comm-central/log/dbb76057d5faba6fabbf1b15a006c01623d3d0c0/build/win64/mozconfig.vs2017">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1">deleted file mode 100755</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineminus">--- a/build/autoconf/config.guess</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineplus">+++ /dev/null</span>
<a href="#l1.4"></a><span id="l1.4" class="difflineat">@@ -1,1454 +0,0 @@</span>
<a href="#l1.5"></a><span id="l1.5" class="difflineminus">-#! /bin/sh</span>
<a href="#l1.6"></a><span id="l1.6" class="difflineminus">-# Attempt to guess a canonical system name.</span>
<a href="#l1.7"></a><span id="l1.7" class="difflineminus">-#   Copyright 1992-2016 Free Software Foundation, Inc.</span>
<a href="#l1.8"></a><span id="l1.8" class="difflineminus">-</span>
<a href="#l1.9"></a><span id="l1.9" class="difflineminus">-timestamp='2016-03-24'</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineminus">-</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineminus">-# This file is free software; you can redistribute it and/or modify it</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-# under the terms of the GNU General Public License as published by</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-# the Free Software Foundation; either version 3 of the License, or</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-# (at your option) any later version.</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-#</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-# This program is distributed in the hope that it will be useful, but</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-# WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">-# General Public License for more details.</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-#</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-# You should have received a copy of the GNU General Public License</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-# along with this program; if not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineminus">-#</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-# As a special exception to the GNU General Public License, if you</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-# distribute this file as part of a program that contains a</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineminus">-# configuration script generated by Autoconf, you may include it under</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineminus">-# the same distribution terms that you use for the rest of that</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-# program.  This Exception is an additional permission under section 7</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-# of the GNU General Public License, version 3 (&quot;GPLv3&quot;).</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-#</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-# Originally written by Per Bothner; maintained since 2000 by Ben Elliston.</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-#</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-# You can get the latest version of this script from:</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-#</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-# Please send patches to &lt;config-patches@gnu.org&gt;.</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineminus">-</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineminus">-</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineminus">-me=`echo &quot;$0&quot; | sed -e 's,.*/,,'`</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineminus">-usage=&quot;\</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineminus">-Usage: $0 [OPTION]</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineminus">-</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-Output the configuration name of the system \`$me' is run on.</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">-</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-Operation modes:</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">-  -h, --help         print this help, then exit</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-  -t, --time-stamp   print date of last modification, then exit</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-  -v, --version      print version number, then exit</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-Report bugs and patches to &lt;config-patches@gnu.org&gt;.&quot;</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-version=&quot;\</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-GNU config.guess ($timestamp)</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-Originally written by Per Bothner.</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineminus">-Copyright 1992-2016 Free Software Foundation, Inc.</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineminus">-</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-This is free software; see the source for copying conditions.  There is NO</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&quot;</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-help=&quot;</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-Try \`$me --help' for more information.&quot;</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineminus">-</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineminus">-# Parse command line</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-while test $# -gt 0 ; do</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineminus">-  case $1 in</span>
<a href="#l1.68"></a><span id="l1.68" class="difflineminus">-    --time-stamp | --time* | -t )</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-       echo &quot;$timestamp&quot; ; exit ;;</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineminus">-    --version | -v )</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineminus">-       echo &quot;$version&quot; ; exit ;;</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineminus">-    --help | --h* | -h )</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineminus">-       echo &quot;$usage&quot;; exit ;;</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-    -- )     # Stop option processing</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineminus">-       shift; break ;;</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineminus">-    - )	# Use stdin as input.</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineminus">-       break ;;</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineminus">-    -* )</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineminus">-       echo &quot;$me: invalid option $1$help&quot; &gt;&amp;2</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineminus">-       exit 1 ;;</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineminus">-    * )</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineminus">-       break ;;</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineminus">-  esac</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineminus">-done</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineminus">-</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineminus">-if test $# != 0; then</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineminus">-  echo &quot;$me: too many arguments$help&quot; &gt;&amp;2</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineminus">-  exit 1</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineminus">-fi</span>
<a href="#l1.90"></a><span id="l1.90" class="difflineminus">-</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineminus">-trap 'exit 1' 1 2 15</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineminus">-</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineminus">-# CC_FOR_BUILD -- compiler used by this script. Note that the use of a</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineminus">-# compiler to aid in system detection is discouraged as it requires</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineminus">-# temporary files to be created and, as you can see below, it is a</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineminus">-# headache to deal with in a portable fashion.</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineminus">-</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineminus">-# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineminus">-# use `HOST_CC' if defined, but it is deprecated.</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineminus">-</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineminus">-# Portable tmp directory creation inspired by the Autoconf team.</span>
<a href="#l1.102"></a><span id="l1.102" class="difflineminus">-</span>
<a href="#l1.103"></a><span id="l1.103" class="difflineminus">-set_cc_for_build='</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">-trap &quot;exitcode=\$?; (rm -f \$tmpfiles 2&gt;/dev/null; rmdir \$tmp 2&gt;/dev/null) &amp;&amp; exit \$exitcode&quot; 0 ;</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineminus">-trap &quot;rm -f \$tmpfiles 2&gt;/dev/null; rmdir \$tmp 2&gt;/dev/null; exit 1&quot; 1 2 13 15 ;</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineminus">-: ${TMPDIR=/tmp} ;</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineminus">- { tmp=`(umask 077 &amp;&amp; mktemp -d &quot;$TMPDIR/cgXXXXXX&quot;) 2&gt;/dev/null` &amp;&amp; test -n &quot;$tmp&quot; &amp;&amp; test -d &quot;$tmp&quot; ; } ||</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineminus">- { test -n &quot;$RANDOM&quot; &amp;&amp; tmp=$TMPDIR/cg$$-$RANDOM &amp;&amp; (umask 077 &amp;&amp; mkdir $tmp) ; } ||</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineminus">- { tmp=$TMPDIR/cg-$$ &amp;&amp; (umask 077 &amp;&amp; mkdir $tmp) &amp;&amp; echo &quot;Warning: creating insecure temp directory&quot; &gt;&amp;2 ; } ||</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineminus">- { echo &quot;$me: cannot create a temporary directory in $TMPDIR&quot; &gt;&amp;2 ; exit 1 ; } ;</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineminus">-dummy=$tmp/dummy ;</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineminus">-tmpfiles=&quot;$dummy.c $dummy.o $dummy.rel $dummy&quot; ;</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineminus">-case $CC_FOR_BUILD,$HOST_CC,$CC in</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineminus">- ,,)    echo &quot;int x;&quot; &gt; $dummy.c ;</span>
<a href="#l1.115"></a><span id="l1.115" class="difflineminus">-	for c in cc gcc c89 c99 ; do</span>
<a href="#l1.116"></a><span id="l1.116" class="difflineminus">-	  if ($c -c -o $dummy.o $dummy.c) &gt;/dev/null 2&gt;&amp;1 ; then</span>
<a href="#l1.117"></a><span id="l1.117" class="difflineminus">-	     CC_FOR_BUILD=&quot;$c&quot;; break ;</span>
<a href="#l1.118"></a><span id="l1.118" class="difflineminus">-	  fi ;</span>
<a href="#l1.119"></a><span id="l1.119" class="difflineminus">-	done ;</span>
<a href="#l1.120"></a><span id="l1.120" class="difflineminus">-	if test x&quot;$CC_FOR_BUILD&quot; = x ; then</span>
<a href="#l1.121"></a><span id="l1.121" class="difflineminus">-	  CC_FOR_BUILD=no_compiler_found ;</span>
<a href="#l1.122"></a><span id="l1.122" class="difflineminus">-	fi</span>
<a href="#l1.123"></a><span id="l1.123" class="difflineminus">-	;;</span>
<a href="#l1.124"></a><span id="l1.124" class="difflineminus">- ,,*)   CC_FOR_BUILD=$CC ;;</span>
<a href="#l1.125"></a><span id="l1.125" class="difflineminus">- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;</span>
<a href="#l1.126"></a><span id="l1.126" class="difflineminus">-esac ; set_cc_for_build= ;'</span>
<a href="#l1.127"></a><span id="l1.127" class="difflineminus">-</span>
<a href="#l1.128"></a><span id="l1.128" class="difflineminus">-# This is needed to find uname on a Pyramid OSx when run in the BSD universe.</span>
<a href="#l1.129"></a><span id="l1.129" class="difflineminus">-# (ghazi@noc.rutgers.edu 1994-08-24)</span>
<a href="#l1.130"></a><span id="l1.130" class="difflineminus">-if (test -f /.attbin/uname) &gt;/dev/null 2&gt;&amp;1 ; then</span>
<a href="#l1.131"></a><span id="l1.131" class="difflineminus">-	PATH=$PATH:/.attbin ; export PATH</span>
<a href="#l1.132"></a><span id="l1.132" class="difflineminus">-fi</span>
<a href="#l1.133"></a><span id="l1.133" class="difflineminus">-</span>
<a href="#l1.134"></a><span id="l1.134" class="difflineminus">-UNAME_MACHINE=`(uname -m) 2&gt;/dev/null` || UNAME_MACHINE=unknown</span>
<a href="#l1.135"></a><span id="l1.135" class="difflineminus">-UNAME_RELEASE=`(uname -r) 2&gt;/dev/null` || UNAME_RELEASE=unknown</span>
<a href="#l1.136"></a><span id="l1.136" class="difflineminus">-UNAME_SYSTEM=`(uname -s) 2&gt;/dev/null`  || UNAME_SYSTEM=unknown</span>
<a href="#l1.137"></a><span id="l1.137" class="difflineminus">-UNAME_VERSION=`(uname -v) 2&gt;/dev/null` || UNAME_VERSION=unknown</span>
<a href="#l1.138"></a><span id="l1.138" class="difflineminus">-</span>
<a href="#l1.139"></a><span id="l1.139" class="difflineminus">-case &quot;${UNAME_SYSTEM}&quot; in</span>
<a href="#l1.140"></a><span id="l1.140" class="difflineminus">-Linux|GNU|GNU/*)</span>
<a href="#l1.141"></a><span id="l1.141" class="difflineminus">-	# If the system lacks a compiler, then just pick glibc.</span>
<a href="#l1.142"></a><span id="l1.142" class="difflineminus">-	# We could probably try harder.</span>
<a href="#l1.143"></a><span id="l1.143" class="difflineminus">-	LIBC=gnu</span>
<a href="#l1.144"></a><span id="l1.144" class="difflineminus">-</span>
<a href="#l1.145"></a><span id="l1.145" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.146"></a><span id="l1.146" class="difflineminus">-	cat &lt;&lt;-EOF &gt; $dummy.c</span>
<a href="#l1.147"></a><span id="l1.147" class="difflineminus">-	#include &lt;features.h&gt;</span>
<a href="#l1.148"></a><span id="l1.148" class="difflineminus">-	#if defined(__UCLIBC__)</span>
<a href="#l1.149"></a><span id="l1.149" class="difflineminus">-	LIBC=uclibc</span>
<a href="#l1.150"></a><span id="l1.150" class="difflineminus">-	#elif defined(__dietlibc__)</span>
<a href="#l1.151"></a><span id="l1.151" class="difflineminus">-	LIBC=dietlibc</span>
<a href="#l1.152"></a><span id="l1.152" class="difflineminus">-	#else</span>
<a href="#l1.153"></a><span id="l1.153" class="difflineminus">-	LIBC=gnu</span>
<a href="#l1.154"></a><span id="l1.154" class="difflineminus">-	#endif</span>
<a href="#l1.155"></a><span id="l1.155" class="difflineminus">-	EOF</span>
<a href="#l1.156"></a><span id="l1.156" class="difflineminus">-	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep '^LIBC' | sed 's, ,,g'`</span>
<a href="#l1.157"></a><span id="l1.157" class="difflineminus">-	;;</span>
<a href="#l1.158"></a><span id="l1.158" class="difflineminus">-esac</span>
<a href="#l1.159"></a><span id="l1.159" class="difflineminus">-</span>
<a href="#l1.160"></a><span id="l1.160" class="difflineminus">-# Note: order is significant - the case branches are not exclusive.</span>
<a href="#l1.161"></a><span id="l1.161" class="difflineminus">-</span>
<a href="#l1.162"></a><span id="l1.162" class="difflineminus">-case &quot;${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}&quot; in</span>
<a href="#l1.163"></a><span id="l1.163" class="difflineminus">-    *:NetBSD:*:*)</span>
<a href="#l1.164"></a><span id="l1.164" class="difflineminus">-	# NetBSD (nbsd) targets should (where applicable) match one or</span>
<a href="#l1.165"></a><span id="l1.165" class="difflineminus">-	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,</span>
<a href="#l1.166"></a><span id="l1.166" class="difflineminus">-	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently</span>
<a href="#l1.167"></a><span id="l1.167" class="difflineminus">-	# switched to ELF, *-*-netbsd* would select the old</span>
<a href="#l1.168"></a><span id="l1.168" class="difflineminus">-	# object file format.  This provides both forward</span>
<a href="#l1.169"></a><span id="l1.169" class="difflineminus">-	# compatibility and a consistent mechanism for selecting the</span>
<a href="#l1.170"></a><span id="l1.170" class="difflineminus">-	# object file format.</span>
<a href="#l1.171"></a><span id="l1.171" class="difflineminus">-	#</span>
<a href="#l1.172"></a><span id="l1.172" class="difflineminus">-	# Note: NetBSD doesn't particularly care about the vendor</span>
<a href="#l1.173"></a><span id="l1.173" class="difflineminus">-	# portion of the name.  We always set it to &quot;unknown&quot;.</span>
<a href="#l1.174"></a><span id="l1.174" class="difflineminus">-	sysctl=&quot;sysctl -n hw.machine_arch&quot;</span>
<a href="#l1.175"></a><span id="l1.175" class="difflineminus">-	UNAME_MACHINE_ARCH=`(uname -p 2&gt;/dev/null || \</span>
<a href="#l1.176"></a><span id="l1.176" class="difflineminus">-	    /sbin/$sysctl 2&gt;/dev/null || \</span>
<a href="#l1.177"></a><span id="l1.177" class="difflineminus">-	    /usr/sbin/$sysctl 2&gt;/dev/null || \</span>
<a href="#l1.178"></a><span id="l1.178" class="difflineminus">-	    echo unknown)`</span>
<a href="#l1.179"></a><span id="l1.179" class="difflineminus">-	case &quot;${UNAME_MACHINE_ARCH}&quot; in</span>
<a href="#l1.180"></a><span id="l1.180" class="difflineminus">-	    armeb) machine=armeb-unknown ;;</span>
<a href="#l1.181"></a><span id="l1.181" class="difflineminus">-	    arm*) machine=arm-unknown ;;</span>
<a href="#l1.182"></a><span id="l1.182" class="difflineminus">-	    sh3el) machine=shl-unknown ;;</span>
<a href="#l1.183"></a><span id="l1.183" class="difflineminus">-	    sh3eb) machine=sh-unknown ;;</span>
<a href="#l1.184"></a><span id="l1.184" class="difflineminus">-	    sh5el) machine=sh5le-unknown ;;</span>
<a href="#l1.185"></a><span id="l1.185" class="difflineminus">-	    earmv*)</span>
<a href="#l1.186"></a><span id="l1.186" class="difflineminus">-		arch=`echo ${UNAME_MACHINE_ARCH} | sed -e 's,^e\(armv[0-9]\).*$,\1,'`</span>
<a href="#l1.187"></a><span id="l1.187" class="difflineminus">-		endian=`echo ${UNAME_MACHINE_ARCH} | sed -ne 's,^.*\(eb\)$,\1,p'`</span>
<a href="#l1.188"></a><span id="l1.188" class="difflineminus">-		machine=${arch}${endian}-unknown</span>
<a href="#l1.189"></a><span id="l1.189" class="difflineminus">-		;;</span>
<a href="#l1.190"></a><span id="l1.190" class="difflineminus">-	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;</span>
<a href="#l1.191"></a><span id="l1.191" class="difflineminus">-	esac</span>
<a href="#l1.192"></a><span id="l1.192" class="difflineminus">-	# The Operating System including object format, if it has switched</span>
<a href="#l1.193"></a><span id="l1.193" class="difflineminus">-	# to ELF recently, or will in the future.</span>
<a href="#l1.194"></a><span id="l1.194" class="difflineminus">-	case &quot;${UNAME_MACHINE_ARCH}&quot; in</span>
<a href="#l1.195"></a><span id="l1.195" class="difflineminus">-	    arm*|earm*|i386|m68k|ns32k|sh3*|sparc|vax)</span>
<a href="#l1.196"></a><span id="l1.196" class="difflineminus">-		eval $set_cc_for_build</span>
<a href="#l1.197"></a><span id="l1.197" class="difflineminus">-		if echo __ELF__ | $CC_FOR_BUILD -E - 2&gt;/dev/null \</span>
<a href="#l1.198"></a><span id="l1.198" class="difflineminus">-			| grep -q __ELF__</span>
<a href="#l1.199"></a><span id="l1.199" class="difflineminus">-		then</span>
<a href="#l1.200"></a><span id="l1.200" class="difflineminus">-		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).</span>
<a href="#l1.201"></a><span id="l1.201" class="difflineminus">-		    # Return netbsd for either.  FIX?</span>
<a href="#l1.202"></a><span id="l1.202" class="difflineminus">-		    os=netbsd</span>
<a href="#l1.203"></a><span id="l1.203" class="difflineminus">-		else</span>
<a href="#l1.204"></a><span id="l1.204" class="difflineminus">-		    os=netbsdelf</span>
<a href="#l1.205"></a><span id="l1.205" class="difflineminus">-		fi</span>
<a href="#l1.206"></a><span id="l1.206" class="difflineminus">-		;;</span>
<a href="#l1.207"></a><span id="l1.207" class="difflineminus">-	    *)</span>
<a href="#l1.208"></a><span id="l1.208" class="difflineminus">-		os=netbsd</span>
<a href="#l1.209"></a><span id="l1.209" class="difflineminus">-		;;</span>
<a href="#l1.210"></a><span id="l1.210" class="difflineminus">-	esac</span>
<a href="#l1.211"></a><span id="l1.211" class="difflineminus">-	# Determine ABI tags.</span>
<a href="#l1.212"></a><span id="l1.212" class="difflineminus">-	case &quot;${UNAME_MACHINE_ARCH}&quot; in</span>
<a href="#l1.213"></a><span id="l1.213" class="difflineminus">-	    earm*)</span>
<a href="#l1.214"></a><span id="l1.214" class="difflineminus">-		expr='s/^earmv[0-9]/-eabi/;s/eb$//'</span>
<a href="#l1.215"></a><span id="l1.215" class="difflineminus">-		abi=`echo ${UNAME_MACHINE_ARCH} | sed -e &quot;$expr&quot;`</span>
<a href="#l1.216"></a><span id="l1.216" class="difflineminus">-		;;</span>
<a href="#l1.217"></a><span id="l1.217" class="difflineminus">-	esac</span>
<a href="#l1.218"></a><span id="l1.218" class="difflineminus">-	# The OS release</span>
<a href="#l1.219"></a><span id="l1.219" class="difflineminus">-	# Debian GNU/NetBSD machines have a different userland, and</span>
<a href="#l1.220"></a><span id="l1.220" class="difflineminus">-	# thus, need a distinct triplet. However, they do not need</span>
<a href="#l1.221"></a><span id="l1.221" class="difflineminus">-	# kernel version information, so it can be replaced with a</span>
<a href="#l1.222"></a><span id="l1.222" class="difflineminus">-	# suitable tag, in the style of linux-gnu.</span>
<a href="#l1.223"></a><span id="l1.223" class="difflineminus">-	case &quot;${UNAME_VERSION}&quot; in</span>
<a href="#l1.224"></a><span id="l1.224" class="difflineminus">-	    Debian*)</span>
<a href="#l1.225"></a><span id="l1.225" class="difflineminus">-		release='-gnu'</span>
<a href="#l1.226"></a><span id="l1.226" class="difflineminus">-		;;</span>
<a href="#l1.227"></a><span id="l1.227" class="difflineminus">-	    *)</span>
<a href="#l1.228"></a><span id="l1.228" class="difflineminus">-		release=`echo ${UNAME_RELEASE} | sed -e 's/[-_].*//' | cut -d. -f1,2`</span>
<a href="#l1.229"></a><span id="l1.229" class="difflineminus">-		;;</span>
<a href="#l1.230"></a><span id="l1.230" class="difflineminus">-	esac</span>
<a href="#l1.231"></a><span id="l1.231" class="difflineminus">-	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:</span>
<a href="#l1.232"></a><span id="l1.232" class="difflineminus">-	# contains redundant information, the shorter form:</span>
<a href="#l1.233"></a><span id="l1.233" class="difflineminus">-	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.</span>
<a href="#l1.234"></a><span id="l1.234" class="difflineminus">-	echo &quot;${machine}-${os}${release}${abi}&quot;</span>
<a href="#l1.235"></a><span id="l1.235" class="difflineminus">-	exit ;;</span>
<a href="#l1.236"></a><span id="l1.236" class="difflineminus">-    *:Bitrig:*:*)</span>
<a href="#l1.237"></a><span id="l1.237" class="difflineminus">-	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`</span>
<a href="#l1.238"></a><span id="l1.238" class="difflineminus">-	echo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}</span>
<a href="#l1.239"></a><span id="l1.239" class="difflineminus">-	exit ;;</span>
<a href="#l1.240"></a><span id="l1.240" class="difflineminus">-    *:OpenBSD:*:*)</span>
<a href="#l1.241"></a><span id="l1.241" class="difflineminus">-	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`</span>
<a href="#l1.242"></a><span id="l1.242" class="difflineminus">-	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}</span>
<a href="#l1.243"></a><span id="l1.243" class="difflineminus">-	exit ;;</span>
<a href="#l1.244"></a><span id="l1.244" class="difflineminus">-    *:LibertyBSD:*:*)</span>
<a href="#l1.245"></a><span id="l1.245" class="difflineminus">-	UNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\.//'`</span>
<a href="#l1.246"></a><span id="l1.246" class="difflineminus">-	echo ${UNAME_MACHINE_ARCH}-unknown-libertybsd${UNAME_RELEASE}</span>
<a href="#l1.247"></a><span id="l1.247" class="difflineminus">-	exit ;;</span>
<a href="#l1.248"></a><span id="l1.248" class="difflineminus">-    *:ekkoBSD:*:*)</span>
<a href="#l1.249"></a><span id="l1.249" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}</span>
<a href="#l1.250"></a><span id="l1.250" class="difflineminus">-	exit ;;</span>
<a href="#l1.251"></a><span id="l1.251" class="difflineminus">-    *:SolidBSD:*:*)</span>
<a href="#l1.252"></a><span id="l1.252" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}</span>
<a href="#l1.253"></a><span id="l1.253" class="difflineminus">-	exit ;;</span>
<a href="#l1.254"></a><span id="l1.254" class="difflineminus">-    macppc:MirBSD:*:*)</span>
<a href="#l1.255"></a><span id="l1.255" class="difflineminus">-	echo powerpc-unknown-mirbsd${UNAME_RELEASE}</span>
<a href="#l1.256"></a><span id="l1.256" class="difflineminus">-	exit ;;</span>
<a href="#l1.257"></a><span id="l1.257" class="difflineminus">-    *:MirBSD:*:*)</span>
<a href="#l1.258"></a><span id="l1.258" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}</span>
<a href="#l1.259"></a><span id="l1.259" class="difflineminus">-	exit ;;</span>
<a href="#l1.260"></a><span id="l1.260" class="difflineminus">-    *:Sortix:*:*)</span>
<a href="#l1.261"></a><span id="l1.261" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-sortix</span>
<a href="#l1.262"></a><span id="l1.262" class="difflineminus">-	exit ;;</span>
<a href="#l1.263"></a><span id="l1.263" class="difflineminus">-    alpha:OSF1:*:*)</span>
<a href="#l1.264"></a><span id="l1.264" class="difflineminus">-	case $UNAME_RELEASE in</span>
<a href="#l1.265"></a><span id="l1.265" class="difflineminus">-	*4.0)</span>
<a href="#l1.266"></a><span id="l1.266" class="difflineminus">-		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`</span>
<a href="#l1.267"></a><span id="l1.267" class="difflineminus">-		;;</span>
<a href="#l1.268"></a><span id="l1.268" class="difflineminus">-	*5.*)</span>
<a href="#l1.269"></a><span id="l1.269" class="difflineminus">-		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`</span>
<a href="#l1.270"></a><span id="l1.270" class="difflineminus">-		;;</span>
<a href="#l1.271"></a><span id="l1.271" class="difflineminus">-	esac</span>
<a href="#l1.272"></a><span id="l1.272" class="difflineminus">-	# According to Compaq, /usr/sbin/psrinfo has been available on</span>
<a href="#l1.273"></a><span id="l1.273" class="difflineminus">-	# OSF/1 and Tru64 systems produced since 1995.  I hope that</span>
<a href="#l1.274"></a><span id="l1.274" class="difflineminus">-	# covers most systems running today.  This code pipes the CPU</span>
<a href="#l1.275"></a><span id="l1.275" class="difflineminus">-	# types through head -n 1, so we only detect the type of CPU 0.</span>
<a href="#l1.276"></a><span id="l1.276" class="difflineminus">-	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`</span>
<a href="#l1.277"></a><span id="l1.277" class="difflineminus">-	case &quot;$ALPHA_CPU_TYPE&quot; in</span>
<a href="#l1.278"></a><span id="l1.278" class="difflineminus">-	    &quot;EV4 (21064)&quot;)</span>
<a href="#l1.279"></a><span id="l1.279" class="difflineminus">-		UNAME_MACHINE=alpha ;;</span>
<a href="#l1.280"></a><span id="l1.280" class="difflineminus">-	    &quot;EV4.5 (21064)&quot;)</span>
<a href="#l1.281"></a><span id="l1.281" class="difflineminus">-		UNAME_MACHINE=alpha ;;</span>
<a href="#l1.282"></a><span id="l1.282" class="difflineminus">-	    &quot;LCA4 (21066/21068)&quot;)</span>
<a href="#l1.283"></a><span id="l1.283" class="difflineminus">-		UNAME_MACHINE=alpha ;;</span>
<a href="#l1.284"></a><span id="l1.284" class="difflineminus">-	    &quot;EV5 (21164)&quot;)</span>
<a href="#l1.285"></a><span id="l1.285" class="difflineminus">-		UNAME_MACHINE=alphaev5 ;;</span>
<a href="#l1.286"></a><span id="l1.286" class="difflineminus">-	    &quot;EV5.6 (21164A)&quot;)</span>
<a href="#l1.287"></a><span id="l1.287" class="difflineminus">-		UNAME_MACHINE=alphaev56 ;;</span>
<a href="#l1.288"></a><span id="l1.288" class="difflineminus">-	    &quot;EV5.6 (21164PC)&quot;)</span>
<a href="#l1.289"></a><span id="l1.289" class="difflineminus">-		UNAME_MACHINE=alphapca56 ;;</span>
<a href="#l1.290"></a><span id="l1.290" class="difflineminus">-	    &quot;EV5.7 (21164PC)&quot;)</span>
<a href="#l1.291"></a><span id="l1.291" class="difflineminus">-		UNAME_MACHINE=alphapca57 ;;</span>
<a href="#l1.292"></a><span id="l1.292" class="difflineminus">-	    &quot;EV6 (21264)&quot;)</span>
<a href="#l1.293"></a><span id="l1.293" class="difflineminus">-		UNAME_MACHINE=alphaev6 ;;</span>
<a href="#l1.294"></a><span id="l1.294" class="difflineminus">-	    &quot;EV6.7 (21264A)&quot;)</span>
<a href="#l1.295"></a><span id="l1.295" class="difflineminus">-		UNAME_MACHINE=alphaev67 ;;</span>
<a href="#l1.296"></a><span id="l1.296" class="difflineminus">-	    &quot;EV6.8CB (21264C)&quot;)</span>
<a href="#l1.297"></a><span id="l1.297" class="difflineminus">-		UNAME_MACHINE=alphaev68 ;;</span>
<a href="#l1.298"></a><span id="l1.298" class="difflineminus">-	    &quot;EV6.8AL (21264B)&quot;)</span>
<a href="#l1.299"></a><span id="l1.299" class="difflineminus">-		UNAME_MACHINE=alphaev68 ;;</span>
<a href="#l1.300"></a><span id="l1.300" class="difflineminus">-	    &quot;EV6.8CX (21264D)&quot;)</span>
<a href="#l1.301"></a><span id="l1.301" class="difflineminus">-		UNAME_MACHINE=alphaev68 ;;</span>
<a href="#l1.302"></a><span id="l1.302" class="difflineminus">-	    &quot;EV6.9A (21264/EV69A)&quot;)</span>
<a href="#l1.303"></a><span id="l1.303" class="difflineminus">-		UNAME_MACHINE=alphaev69 ;;</span>
<a href="#l1.304"></a><span id="l1.304" class="difflineminus">-	    &quot;EV7 (21364)&quot;)</span>
<a href="#l1.305"></a><span id="l1.305" class="difflineminus">-		UNAME_MACHINE=alphaev7 ;;</span>
<a href="#l1.306"></a><span id="l1.306" class="difflineminus">-	    &quot;EV7.9 (21364A)&quot;)</span>
<a href="#l1.307"></a><span id="l1.307" class="difflineminus">-		UNAME_MACHINE=alphaev79 ;;</span>
<a href="#l1.308"></a><span id="l1.308" class="difflineminus">-	esac</span>
<a href="#l1.309"></a><span id="l1.309" class="difflineminus">-	# A Pn.n version is a patched version.</span>
<a href="#l1.310"></a><span id="l1.310" class="difflineminus">-	# A Vn.n version is a released version.</span>
<a href="#l1.311"></a><span id="l1.311" class="difflineminus">-	# A Tn.n version is a released field test version.</span>
<a href="#l1.312"></a><span id="l1.312" class="difflineminus">-	# A Xn.n version is an unreleased experimental baselevel.</span>
<a href="#l1.313"></a><span id="l1.313" class="difflineminus">-	# 1.2 uses &quot;1.2&quot; for uname -r.</span>
<a href="#l1.314"></a><span id="l1.314" class="difflineminus">-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`</span>
<a href="#l1.315"></a><span id="l1.315" class="difflineminus">-	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.</span>
<a href="#l1.316"></a><span id="l1.316" class="difflineminus">-	exitcode=$?</span>
<a href="#l1.317"></a><span id="l1.317" class="difflineminus">-	trap '' 0</span>
<a href="#l1.318"></a><span id="l1.318" class="difflineminus">-	exit $exitcode ;;</span>
<a href="#l1.319"></a><span id="l1.319" class="difflineminus">-    Alpha\ *:Windows_NT*:*)</span>
<a href="#l1.320"></a><span id="l1.320" class="difflineminus">-	# How do we know it's Interix rather than the generic POSIX subsystem?</span>
<a href="#l1.321"></a><span id="l1.321" class="difflineminus">-	# Should we change UNAME_MACHINE based on the output of uname instead</span>
<a href="#l1.322"></a><span id="l1.322" class="difflineminus">-	# of the specific Alpha model?</span>
<a href="#l1.323"></a><span id="l1.323" class="difflineminus">-	echo alpha-pc-interix</span>
<a href="#l1.324"></a><span id="l1.324" class="difflineminus">-	exit ;;</span>
<a href="#l1.325"></a><span id="l1.325" class="difflineminus">-    21064:Windows_NT:50:3)</span>
<a href="#l1.326"></a><span id="l1.326" class="difflineminus">-	echo alpha-dec-winnt3.5</span>
<a href="#l1.327"></a><span id="l1.327" class="difflineminus">-	exit ;;</span>
<a href="#l1.328"></a><span id="l1.328" class="difflineminus">-    Amiga*:UNIX_System_V:4.0:*)</span>
<a href="#l1.329"></a><span id="l1.329" class="difflineminus">-	echo m68k-unknown-sysv4</span>
<a href="#l1.330"></a><span id="l1.330" class="difflineminus">-	exit ;;</span>
<a href="#l1.331"></a><span id="l1.331" class="difflineminus">-    *:[Aa]miga[Oo][Ss]:*:*)</span>
<a href="#l1.332"></a><span id="l1.332" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-amigaos</span>
<a href="#l1.333"></a><span id="l1.333" class="difflineminus">-	exit ;;</span>
<a href="#l1.334"></a><span id="l1.334" class="difflineminus">-    *:[Mm]orph[Oo][Ss]:*:*)</span>
<a href="#l1.335"></a><span id="l1.335" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-morphos</span>
<a href="#l1.336"></a><span id="l1.336" class="difflineminus">-	exit ;;</span>
<a href="#l1.337"></a><span id="l1.337" class="difflineminus">-    *:OS/390:*:*)</span>
<a href="#l1.338"></a><span id="l1.338" class="difflineminus">-	echo i370-ibm-openedition</span>
<a href="#l1.339"></a><span id="l1.339" class="difflineminus">-	exit ;;</span>
<a href="#l1.340"></a><span id="l1.340" class="difflineminus">-    *:z/VM:*:*)</span>
<a href="#l1.341"></a><span id="l1.341" class="difflineminus">-	echo s390-ibm-zvmoe</span>
<a href="#l1.342"></a><span id="l1.342" class="difflineminus">-	exit ;;</span>
<a href="#l1.343"></a><span id="l1.343" class="difflineminus">-    *:OS400:*:*)</span>
<a href="#l1.344"></a><span id="l1.344" class="difflineminus">-	echo powerpc-ibm-os400</span>
<a href="#l1.345"></a><span id="l1.345" class="difflineminus">-	exit ;;</span>
<a href="#l1.346"></a><span id="l1.346" class="difflineminus">-    arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)</span>
<a href="#l1.347"></a><span id="l1.347" class="difflineminus">-	echo arm-acorn-riscix${UNAME_RELEASE}</span>
<a href="#l1.348"></a><span id="l1.348" class="difflineminus">-	exit ;;</span>
<a href="#l1.349"></a><span id="l1.349" class="difflineminus">-    arm*:riscos:*:*|arm*:RISCOS:*:*)</span>
<a href="#l1.350"></a><span id="l1.350" class="difflineminus">-	echo arm-unknown-riscos</span>
<a href="#l1.351"></a><span id="l1.351" class="difflineminus">-	exit ;;</span>
<a href="#l1.352"></a><span id="l1.352" class="difflineminus">-    SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)</span>
<a href="#l1.353"></a><span id="l1.353" class="difflineminus">-	echo hppa1.1-hitachi-hiuxmpp</span>
<a href="#l1.354"></a><span id="l1.354" class="difflineminus">-	exit ;;</span>
<a href="#l1.355"></a><span id="l1.355" class="difflineminus">-    Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)</span>
<a href="#l1.356"></a><span id="l1.356" class="difflineminus">-	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.</span>
<a href="#l1.357"></a><span id="l1.357" class="difflineminus">-	if test &quot;`(/bin/universe) 2&gt;/dev/null`&quot; = att ; then</span>
<a href="#l1.358"></a><span id="l1.358" class="difflineminus">-		echo pyramid-pyramid-sysv3</span>
<a href="#l1.359"></a><span id="l1.359" class="difflineminus">-	else</span>
<a href="#l1.360"></a><span id="l1.360" class="difflineminus">-		echo pyramid-pyramid-bsd</span>
<a href="#l1.361"></a><span id="l1.361" class="difflineminus">-	fi</span>
<a href="#l1.362"></a><span id="l1.362" class="difflineminus">-	exit ;;</span>
<a href="#l1.363"></a><span id="l1.363" class="difflineminus">-    NILE*:*:*:dcosx)</span>
<a href="#l1.364"></a><span id="l1.364" class="difflineminus">-	echo pyramid-pyramid-svr4</span>
<a href="#l1.365"></a><span id="l1.365" class="difflineminus">-	exit ;;</span>
<a href="#l1.366"></a><span id="l1.366" class="difflineminus">-    DRS?6000:unix:4.0:6*)</span>
<a href="#l1.367"></a><span id="l1.367" class="difflineminus">-	echo sparc-icl-nx6</span>
<a href="#l1.368"></a><span id="l1.368" class="difflineminus">-	exit ;;</span>
<a href="#l1.369"></a><span id="l1.369" class="difflineminus">-    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)</span>
<a href="#l1.370"></a><span id="l1.370" class="difflineminus">-	case `/usr/bin/uname -p` in</span>
<a href="#l1.371"></a><span id="l1.371" class="difflineminus">-	    sparc) echo sparc-icl-nx7; exit ;;</span>
<a href="#l1.372"></a><span id="l1.372" class="difflineminus">-	esac ;;</span>
<a href="#l1.373"></a><span id="l1.373" class="difflineminus">-    s390x:SunOS:*:*)</span>
<a href="#l1.374"></a><span id="l1.374" class="difflineminus">-	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`</span>
<a href="#l1.375"></a><span id="l1.375" class="difflineminus">-	exit ;;</span>
<a href="#l1.376"></a><span id="l1.376" class="difflineminus">-    sun4H:SunOS:5.*:*)</span>
<a href="#l1.377"></a><span id="l1.377" class="difflineminus">-	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`</span>
<a href="#l1.378"></a><span id="l1.378" class="difflineminus">-	exit ;;</span>
<a href="#l1.379"></a><span id="l1.379" class="difflineminus">-    sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)</span>
<a href="#l1.380"></a><span id="l1.380" class="difflineminus">-	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`</span>
<a href="#l1.381"></a><span id="l1.381" class="difflineminus">-	exit ;;</span>
<a href="#l1.382"></a><span id="l1.382" class="difflineminus">-    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)</span>
<a href="#l1.383"></a><span id="l1.383" class="difflineminus">-	echo i386-pc-auroraux${UNAME_RELEASE}</span>
<a href="#l1.384"></a><span id="l1.384" class="difflineminus">-	exit ;;</span>
<a href="#l1.385"></a><span id="l1.385" class="difflineminus">-    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)</span>
<a href="#l1.386"></a><span id="l1.386" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.387"></a><span id="l1.387" class="difflineminus">-	SUN_ARCH=i386</span>
<a href="#l1.388"></a><span id="l1.388" class="difflineminus">-	# If there is a compiler, see if it is configured for 64-bit objects.</span>
<a href="#l1.389"></a><span id="l1.389" class="difflineminus">-	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.</span>
<a href="#l1.390"></a><span id="l1.390" class="difflineminus">-	# This test works for both compilers.</span>
<a href="#l1.391"></a><span id="l1.391" class="difflineminus">-	if [ &quot;$CC_FOR_BUILD&quot; != no_compiler_found ]; then</span>
<a href="#l1.392"></a><span id="l1.392" class="difflineminus">-	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \</span>
<a href="#l1.393"></a><span id="l1.393" class="difflineminus">-		(CCOPTS= $CC_FOR_BUILD -E - 2&gt;/dev/null) | \</span>
<a href="#l1.394"></a><span id="l1.394" class="difflineminus">-		grep IS_64BIT_ARCH &gt;/dev/null</span>
<a href="#l1.395"></a><span id="l1.395" class="difflineminus">-	    then</span>
<a href="#l1.396"></a><span id="l1.396" class="difflineminus">-		SUN_ARCH=x86_64</span>
<a href="#l1.397"></a><span id="l1.397" class="difflineminus">-	    fi</span>
<a href="#l1.398"></a><span id="l1.398" class="difflineminus">-	fi</span>
<a href="#l1.399"></a><span id="l1.399" class="difflineminus">-	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`</span>
<a href="#l1.400"></a><span id="l1.400" class="difflineminus">-	exit ;;</span>
<a href="#l1.401"></a><span id="l1.401" class="difflineminus">-    sun4*:SunOS:6*:*)</span>
<a href="#l1.402"></a><span id="l1.402" class="difflineminus">-	# According to config.sub, this is the proper way to canonicalize</span>
<a href="#l1.403"></a><span id="l1.403" class="difflineminus">-	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but</span>
<a href="#l1.404"></a><span id="l1.404" class="difflineminus">-	# it's likely to be more like Solaris than SunOS4.</span>
<a href="#l1.405"></a><span id="l1.405" class="difflineminus">-	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`</span>
<a href="#l1.406"></a><span id="l1.406" class="difflineminus">-	exit ;;</span>
<a href="#l1.407"></a><span id="l1.407" class="difflineminus">-    sun4*:SunOS:*:*)</span>
<a href="#l1.408"></a><span id="l1.408" class="difflineminus">-	case &quot;`/usr/bin/arch -k`&quot; in</span>
<a href="#l1.409"></a><span id="l1.409" class="difflineminus">-	    Series*|S4*)</span>
<a href="#l1.410"></a><span id="l1.410" class="difflineminus">-		UNAME_RELEASE=`uname -v`</span>
<a href="#l1.411"></a><span id="l1.411" class="difflineminus">-		;;</span>
<a href="#l1.412"></a><span id="l1.412" class="difflineminus">-	esac</span>
<a href="#l1.413"></a><span id="l1.413" class="difflineminus">-	# Japanese Language versions have a version number like `4.1.3-JL'.</span>
<a href="#l1.414"></a><span id="l1.414" class="difflineminus">-	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`</span>
<a href="#l1.415"></a><span id="l1.415" class="difflineminus">-	exit ;;</span>
<a href="#l1.416"></a><span id="l1.416" class="difflineminus">-    sun3*:SunOS:*:*)</span>
<a href="#l1.417"></a><span id="l1.417" class="difflineminus">-	echo m68k-sun-sunos${UNAME_RELEASE}</span>
<a href="#l1.418"></a><span id="l1.418" class="difflineminus">-	exit ;;</span>
<a href="#l1.419"></a><span id="l1.419" class="difflineminus">-    sun*:*:4.2BSD:*)</span>
<a href="#l1.420"></a><span id="l1.420" class="difflineminus">-	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2&gt;/dev/null`</span>
<a href="#l1.421"></a><span id="l1.421" class="difflineminus">-	test &quot;x${UNAME_RELEASE}&quot; = x &amp;&amp; UNAME_RELEASE=3</span>
<a href="#l1.422"></a><span id="l1.422" class="difflineminus">-	case &quot;`/bin/arch`&quot; in</span>
<a href="#l1.423"></a><span id="l1.423" class="difflineminus">-	    sun3)</span>
<a href="#l1.424"></a><span id="l1.424" class="difflineminus">-		echo m68k-sun-sunos${UNAME_RELEASE}</span>
<a href="#l1.425"></a><span id="l1.425" class="difflineminus">-		;;</span>
<a href="#l1.426"></a><span id="l1.426" class="difflineminus">-	    sun4)</span>
<a href="#l1.427"></a><span id="l1.427" class="difflineminus">-		echo sparc-sun-sunos${UNAME_RELEASE}</span>
<a href="#l1.428"></a><span id="l1.428" class="difflineminus">-		;;</span>
<a href="#l1.429"></a><span id="l1.429" class="difflineminus">-	esac</span>
<a href="#l1.430"></a><span id="l1.430" class="difflineminus">-	exit ;;</span>
<a href="#l1.431"></a><span id="l1.431" class="difflineminus">-    aushp:SunOS:*:*)</span>
<a href="#l1.432"></a><span id="l1.432" class="difflineminus">-	echo sparc-auspex-sunos${UNAME_RELEASE}</span>
<a href="#l1.433"></a><span id="l1.433" class="difflineminus">-	exit ;;</span>
<a href="#l1.434"></a><span id="l1.434" class="difflineminus">-    # The situation for MiNT is a little confusing.  The machine name</span>
<a href="#l1.435"></a><span id="l1.435" class="difflineminus">-    # can be virtually everything (everything which is not</span>
<a href="#l1.436"></a><span id="l1.436" class="difflineminus">-    # &quot;atarist&quot; or &quot;atariste&quot; at least should have a processor</span>
<a href="#l1.437"></a><span id="l1.437" class="difflineminus">-    # &gt; m68000).  The system name ranges from &quot;MiNT&quot; over &quot;FreeMiNT&quot;</span>
<a href="#l1.438"></a><span id="l1.438" class="difflineminus">-    # to the lowercase version &quot;mint&quot; (or &quot;freemint&quot;).  Finally</span>
<a href="#l1.439"></a><span id="l1.439" class="difflineminus">-    # the system name &quot;TOS&quot; denotes a system which is actually not</span>
<a href="#l1.440"></a><span id="l1.440" class="difflineminus">-    # MiNT.  But MiNT is downward compatible to TOS, so this should</span>
<a href="#l1.441"></a><span id="l1.441" class="difflineminus">-    # be no problem.</span>
<a href="#l1.442"></a><span id="l1.442" class="difflineminus">-    atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)</span>
<a href="#l1.443"></a><span id="l1.443" class="difflineminus">-	echo m68k-atari-mint${UNAME_RELEASE}</span>
<a href="#l1.444"></a><span id="l1.444" class="difflineminus">-	exit ;;</span>
<a href="#l1.445"></a><span id="l1.445" class="difflineminus">-    atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)</span>
<a href="#l1.446"></a><span id="l1.446" class="difflineminus">-	echo m68k-atari-mint${UNAME_RELEASE}</span>
<a href="#l1.447"></a><span id="l1.447" class="difflineminus">-	exit ;;</span>
<a href="#l1.448"></a><span id="l1.448" class="difflineminus">-    *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)</span>
<a href="#l1.449"></a><span id="l1.449" class="difflineminus">-	echo m68k-atari-mint${UNAME_RELEASE}</span>
<a href="#l1.450"></a><span id="l1.450" class="difflineminus">-	exit ;;</span>
<a href="#l1.451"></a><span id="l1.451" class="difflineminus">-    milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)</span>
<a href="#l1.452"></a><span id="l1.452" class="difflineminus">-	echo m68k-milan-mint${UNAME_RELEASE}</span>
<a href="#l1.453"></a><span id="l1.453" class="difflineminus">-	exit ;;</span>
<a href="#l1.454"></a><span id="l1.454" class="difflineminus">-    hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)</span>
<a href="#l1.455"></a><span id="l1.455" class="difflineminus">-	echo m68k-hades-mint${UNAME_RELEASE}</span>
<a href="#l1.456"></a><span id="l1.456" class="difflineminus">-	exit ;;</span>
<a href="#l1.457"></a><span id="l1.457" class="difflineminus">-    *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)</span>
<a href="#l1.458"></a><span id="l1.458" class="difflineminus">-	echo m68k-unknown-mint${UNAME_RELEASE}</span>
<a href="#l1.459"></a><span id="l1.459" class="difflineminus">-	exit ;;</span>
<a href="#l1.460"></a><span id="l1.460" class="difflineminus">-    m68k:machten:*:*)</span>
<a href="#l1.461"></a><span id="l1.461" class="difflineminus">-	echo m68k-apple-machten${UNAME_RELEASE}</span>
<a href="#l1.462"></a><span id="l1.462" class="difflineminus">-	exit ;;</span>
<a href="#l1.463"></a><span id="l1.463" class="difflineminus">-    powerpc:machten:*:*)</span>
<a href="#l1.464"></a><span id="l1.464" class="difflineminus">-	echo powerpc-apple-machten${UNAME_RELEASE}</span>
<a href="#l1.465"></a><span id="l1.465" class="difflineminus">-	exit ;;</span>
<a href="#l1.466"></a><span id="l1.466" class="difflineminus">-    RISC*:Mach:*:*)</span>
<a href="#l1.467"></a><span id="l1.467" class="difflineminus">-	echo mips-dec-mach_bsd4.3</span>
<a href="#l1.468"></a><span id="l1.468" class="difflineminus">-	exit ;;</span>
<a href="#l1.469"></a><span id="l1.469" class="difflineminus">-    RISC*:ULTRIX:*:*)</span>
<a href="#l1.470"></a><span id="l1.470" class="difflineminus">-	echo mips-dec-ultrix${UNAME_RELEASE}</span>
<a href="#l1.471"></a><span id="l1.471" class="difflineminus">-	exit ;;</span>
<a href="#l1.472"></a><span id="l1.472" class="difflineminus">-    VAX*:ULTRIX*:*:*)</span>
<a href="#l1.473"></a><span id="l1.473" class="difflineminus">-	echo vax-dec-ultrix${UNAME_RELEASE}</span>
<a href="#l1.474"></a><span id="l1.474" class="difflineminus">-	exit ;;</span>
<a href="#l1.475"></a><span id="l1.475" class="difflineminus">-    2020:CLIX:*:* | 2430:CLIX:*:*)</span>
<a href="#l1.476"></a><span id="l1.476" class="difflineminus">-	echo clipper-intergraph-clix${UNAME_RELEASE}</span>
<a href="#l1.477"></a><span id="l1.477" class="difflineminus">-	exit ;;</span>
<a href="#l1.478"></a><span id="l1.478" class="difflineminus">-    mips:*:*:UMIPS | mips:*:*:RISCos)</span>
<a href="#l1.479"></a><span id="l1.479" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.480"></a><span id="l1.480" class="difflineminus">-	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c</span>
<a href="#l1.481"></a><span id="l1.481" class="difflineminus">-#ifdef __cplusplus</span>
<a href="#l1.482"></a><span id="l1.482" class="difflineminus">-#include &lt;stdio.h&gt;  /* for printf() prototype */</span>
<a href="#l1.483"></a><span id="l1.483" class="difflineminus">-	int main (int argc, char *argv[]) {</span>
<a href="#l1.484"></a><span id="l1.484" class="difflineminus">-#else</span>
<a href="#l1.485"></a><span id="l1.485" class="difflineminus">-	int main (argc, argv) int argc; char *argv[]; {</span>
<a href="#l1.486"></a><span id="l1.486" class="difflineminus">-#endif</span>
<a href="#l1.487"></a><span id="l1.487" class="difflineminus">-	#if defined (host_mips) &amp;&amp; defined (MIPSEB)</span>
<a href="#l1.488"></a><span id="l1.488" class="difflineminus">-	#if defined (SYSTYPE_SYSV)</span>
<a href="#l1.489"></a><span id="l1.489" class="difflineminus">-	  printf (&quot;mips-mips-riscos%ssysv\n&quot;, argv[1]); exit (0);</span>
<a href="#l1.490"></a><span id="l1.490" class="difflineminus">-	#endif</span>
<a href="#l1.491"></a><span id="l1.491" class="difflineminus">-	#if defined (SYSTYPE_SVR4)</span>
<a href="#l1.492"></a><span id="l1.492" class="difflineminus">-	  printf (&quot;mips-mips-riscos%ssvr4\n&quot;, argv[1]); exit (0);</span>
<a href="#l1.493"></a><span id="l1.493" class="difflineminus">-	#endif</span>
<a href="#l1.494"></a><span id="l1.494" class="difflineminus">-	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)</span>
<a href="#l1.495"></a><span id="l1.495" class="difflineminus">-	  printf (&quot;mips-mips-riscos%sbsd\n&quot;, argv[1]); exit (0);</span>
<a href="#l1.496"></a><span id="l1.496" class="difflineminus">-	#endif</span>
<a href="#l1.497"></a><span id="l1.497" class="difflineminus">-	#endif</span>
<a href="#l1.498"></a><span id="l1.498" class="difflineminus">-	  exit (-1);</span>
<a href="#l1.499"></a><span id="l1.499" class="difflineminus">-	}</span>
<a href="#l1.500"></a><span id="l1.500" class="difflineminus">-EOF</span>
<a href="#l1.501"></a><span id="l1.501" class="difflineminus">-	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp;</span>
<a href="#l1.502"></a><span id="l1.502" class="difflineminus">-	  dummyarg=`echo &quot;${UNAME_RELEASE}&quot; | sed -n 's/\([0-9]*\).*/\1/p'` &amp;&amp;</span>
<a href="#l1.503"></a><span id="l1.503" class="difflineminus">-	  SYSTEM_NAME=`$dummy $dummyarg` &amp;&amp;</span>
<a href="#l1.504"></a><span id="l1.504" class="difflineminus">-	    { echo &quot;$SYSTEM_NAME&quot;; exit; }</span>
<a href="#l1.505"></a><span id="l1.505" class="difflineminus">-	echo mips-mips-riscos${UNAME_RELEASE}</span>
<a href="#l1.506"></a><span id="l1.506" class="difflineminus">-	exit ;;</span>
<a href="#l1.507"></a><span id="l1.507" class="difflineminus">-    Motorola:PowerMAX_OS:*:*)</span>
<a href="#l1.508"></a><span id="l1.508" class="difflineminus">-	echo powerpc-motorola-powermax</span>
<a href="#l1.509"></a><span id="l1.509" class="difflineminus">-	exit ;;</span>
<a href="#l1.510"></a><span id="l1.510" class="difflineminus">-    Motorola:*:4.3:PL8-*)</span>
<a href="#l1.511"></a><span id="l1.511" class="difflineminus">-	echo powerpc-harris-powermax</span>
<a href="#l1.512"></a><span id="l1.512" class="difflineminus">-	exit ;;</span>
<a href="#l1.513"></a><span id="l1.513" class="difflineminus">-    Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)</span>
<a href="#l1.514"></a><span id="l1.514" class="difflineminus">-	echo powerpc-harris-powermax</span>
<a href="#l1.515"></a><span id="l1.515" class="difflineminus">-	exit ;;</span>
<a href="#l1.516"></a><span id="l1.516" class="difflineminus">-    Night_Hawk:Power_UNIX:*:*)</span>
<a href="#l1.517"></a><span id="l1.517" class="difflineminus">-	echo powerpc-harris-powerunix</span>
<a href="#l1.518"></a><span id="l1.518" class="difflineminus">-	exit ;;</span>
<a href="#l1.519"></a><span id="l1.519" class="difflineminus">-    m88k:CX/UX:7*:*)</span>
<a href="#l1.520"></a><span id="l1.520" class="difflineminus">-	echo m88k-harris-cxux7</span>
<a href="#l1.521"></a><span id="l1.521" class="difflineminus">-	exit ;;</span>
<a href="#l1.522"></a><span id="l1.522" class="difflineminus">-    m88k:*:4*:R4*)</span>
<a href="#l1.523"></a><span id="l1.523" class="difflineminus">-	echo m88k-motorola-sysv4</span>
<a href="#l1.524"></a><span id="l1.524" class="difflineminus">-	exit ;;</span>
<a href="#l1.525"></a><span id="l1.525" class="difflineminus">-    m88k:*:3*:R3*)</span>
<a href="#l1.526"></a><span id="l1.526" class="difflineminus">-	echo m88k-motorola-sysv3</span>
<a href="#l1.527"></a><span id="l1.527" class="difflineminus">-	exit ;;</span>
<a href="#l1.528"></a><span id="l1.528" class="difflineminus">-    AViiON:dgux:*:*)</span>
<a href="#l1.529"></a><span id="l1.529" class="difflineminus">-	# DG/UX returns AViiON for all architectures</span>
<a href="#l1.530"></a><span id="l1.530" class="difflineminus">-	UNAME_PROCESSOR=`/usr/bin/uname -p`</span>
<a href="#l1.531"></a><span id="l1.531" class="difflineminus">-	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]</span>
<a href="#l1.532"></a><span id="l1.532" class="difflineminus">-	then</span>
<a href="#l1.533"></a><span id="l1.533" class="difflineminus">-	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \</span>
<a href="#l1.534"></a><span id="l1.534" class="difflineminus">-	       [ ${TARGET_BINARY_INTERFACE}x = x ]</span>
<a href="#l1.535"></a><span id="l1.535" class="difflineminus">-	    then</span>
<a href="#l1.536"></a><span id="l1.536" class="difflineminus">-		echo m88k-dg-dgux${UNAME_RELEASE}</span>
<a href="#l1.537"></a><span id="l1.537" class="difflineminus">-	    else</span>
<a href="#l1.538"></a><span id="l1.538" class="difflineminus">-		echo m88k-dg-dguxbcs${UNAME_RELEASE}</span>
<a href="#l1.539"></a><span id="l1.539" class="difflineminus">-	    fi</span>
<a href="#l1.540"></a><span id="l1.540" class="difflineminus">-	else</span>
<a href="#l1.541"></a><span id="l1.541" class="difflineminus">-	    echo i586-dg-dgux${UNAME_RELEASE}</span>
<a href="#l1.542"></a><span id="l1.542" class="difflineminus">-	fi</span>
<a href="#l1.543"></a><span id="l1.543" class="difflineminus">-	exit ;;</span>
<a href="#l1.544"></a><span id="l1.544" class="difflineminus">-    M88*:DolphinOS:*:*)	# DolphinOS (SVR3)</span>
<a href="#l1.545"></a><span id="l1.545" class="difflineminus">-	echo m88k-dolphin-sysv3</span>
<a href="#l1.546"></a><span id="l1.546" class="difflineminus">-	exit ;;</span>
<a href="#l1.547"></a><span id="l1.547" class="difflineminus">-    M88*:*:R3*:*)</span>
<a href="#l1.548"></a><span id="l1.548" class="difflineminus">-	# Delta 88k system running SVR3</span>
<a href="#l1.549"></a><span id="l1.549" class="difflineminus">-	echo m88k-motorola-sysv3</span>
<a href="#l1.550"></a><span id="l1.550" class="difflineminus">-	exit ;;</span>
<a href="#l1.551"></a><span id="l1.551" class="difflineminus">-    XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)</span>
<a href="#l1.552"></a><span id="l1.552" class="difflineminus">-	echo m88k-tektronix-sysv3</span>
<a href="#l1.553"></a><span id="l1.553" class="difflineminus">-	exit ;;</span>
<a href="#l1.554"></a><span id="l1.554" class="difflineminus">-    Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)</span>
<a href="#l1.555"></a><span id="l1.555" class="difflineminus">-	echo m68k-tektronix-bsd</span>
<a href="#l1.556"></a><span id="l1.556" class="difflineminus">-	exit ;;</span>
<a href="#l1.557"></a><span id="l1.557" class="difflineminus">-    *:IRIX*:*:*)</span>
<a href="#l1.558"></a><span id="l1.558" class="difflineminus">-	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`</span>
<a href="#l1.559"></a><span id="l1.559" class="difflineminus">-	exit ;;</span>
<a href="#l1.560"></a><span id="l1.560" class="difflineminus">-    ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.</span>
<a href="#l1.561"></a><span id="l1.561" class="difflineminus">-	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id</span>
<a href="#l1.562"></a><span id="l1.562" class="difflineminus">-	exit ;;               # Note that: echo &quot;'`uname -s`'&quot; gives 'AIX '</span>
<a href="#l1.563"></a><span id="l1.563" class="difflineminus">-    i*86:AIX:*:*)</span>
<a href="#l1.564"></a><span id="l1.564" class="difflineminus">-	echo i386-ibm-aix</span>
<a href="#l1.565"></a><span id="l1.565" class="difflineminus">-	exit ;;</span>
<a href="#l1.566"></a><span id="l1.566" class="difflineminus">-    ia64:AIX:*:*)</span>
<a href="#l1.567"></a><span id="l1.567" class="difflineminus">-	if [ -x /usr/bin/oslevel ] ; then</span>
<a href="#l1.568"></a><span id="l1.568" class="difflineminus">-		IBM_REV=`/usr/bin/oslevel`</span>
<a href="#l1.569"></a><span id="l1.569" class="difflineminus">-	else</span>
<a href="#l1.570"></a><span id="l1.570" class="difflineminus">-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}</span>
<a href="#l1.571"></a><span id="l1.571" class="difflineminus">-	fi</span>
<a href="#l1.572"></a><span id="l1.572" class="difflineminus">-	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}</span>
<a href="#l1.573"></a><span id="l1.573" class="difflineminus">-	exit ;;</span>
<a href="#l1.574"></a><span id="l1.574" class="difflineminus">-    *:AIX:2:3)</span>
<a href="#l1.575"></a><span id="l1.575" class="difflineminus">-	if grep bos325 /usr/include/stdio.h &gt;/dev/null 2&gt;&amp;1; then</span>
<a href="#l1.576"></a><span id="l1.576" class="difflineminus">-		eval $set_cc_for_build</span>
<a href="#l1.577"></a><span id="l1.577" class="difflineminus">-		sed 's/^		//' &lt;&lt; EOF &gt;$dummy.c</span>
<a href="#l1.578"></a><span id="l1.578" class="difflineminus">-		#include &lt;sys/systemcfg.h&gt;</span>
<a href="#l1.579"></a><span id="l1.579" class="difflineminus">-</span>
<a href="#l1.580"></a><span id="l1.580" class="difflineminus">-		main()</span>
<a href="#l1.581"></a><span id="l1.581" class="difflineminus">-			{</span>
<a href="#l1.582"></a><span id="l1.582" class="difflineminus">-			if (!__power_pc())</span>
<a href="#l1.583"></a><span id="l1.583" class="difflineminus">-				exit(1);</span>
<a href="#l1.584"></a><span id="l1.584" class="difflineminus">-			puts(&quot;powerpc-ibm-aix3.2.5&quot;);</span>
<a href="#l1.585"></a><span id="l1.585" class="difflineminus">-			exit(0);</span>
<a href="#l1.586"></a><span id="l1.586" class="difflineminus">-			}</span>
<a href="#l1.587"></a><span id="l1.587" class="difflineminus">-EOF</span>
<a href="#l1.588"></a><span id="l1.588" class="difflineminus">-		if $CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; SYSTEM_NAME=`$dummy`</span>
<a href="#l1.589"></a><span id="l1.589" class="difflineminus">-		then</span>
<a href="#l1.590"></a><span id="l1.590" class="difflineminus">-			echo &quot;$SYSTEM_NAME&quot;</span>
<a href="#l1.591"></a><span id="l1.591" class="difflineminus">-		else</span>
<a href="#l1.592"></a><span id="l1.592" class="difflineminus">-			echo rs6000-ibm-aix3.2.5</span>
<a href="#l1.593"></a><span id="l1.593" class="difflineminus">-		fi</span>
<a href="#l1.594"></a><span id="l1.594" class="difflineminus">-	elif grep bos324 /usr/include/stdio.h &gt;/dev/null 2&gt;&amp;1; then</span>
<a href="#l1.595"></a><span id="l1.595" class="difflineminus">-		echo rs6000-ibm-aix3.2.4</span>
<a href="#l1.596"></a><span id="l1.596" class="difflineminus">-	else</span>
<a href="#l1.597"></a><span id="l1.597" class="difflineminus">-		echo rs6000-ibm-aix3.2</span>
<a href="#l1.598"></a><span id="l1.598" class="difflineminus">-	fi</span>
<a href="#l1.599"></a><span id="l1.599" class="difflineminus">-	exit ;;</span>
<a href="#l1.600"></a><span id="l1.600" class="difflineminus">-    *:AIX:*:[4567])</span>
<a href="#l1.601"></a><span id="l1.601" class="difflineminus">-	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`</span>
<a href="#l1.602"></a><span id="l1.602" class="difflineminus">-	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' &gt;/dev/null 2&gt;&amp;1; then</span>
<a href="#l1.603"></a><span id="l1.603" class="difflineminus">-		IBM_ARCH=rs6000</span>
<a href="#l1.604"></a><span id="l1.604" class="difflineminus">-	else</span>
<a href="#l1.605"></a><span id="l1.605" class="difflineminus">-		IBM_ARCH=powerpc</span>
<a href="#l1.606"></a><span id="l1.606" class="difflineminus">-	fi</span>
<a href="#l1.607"></a><span id="l1.607" class="difflineminus">-	if [ -x /usr/bin/lslpp ] ; then</span>
<a href="#l1.608"></a><span id="l1.608" class="difflineminus">-		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |</span>
<a href="#l1.609"></a><span id="l1.609" class="difflineminus">-			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`</span>
<a href="#l1.610"></a><span id="l1.610" class="difflineminus">-	else</span>
<a href="#l1.611"></a><span id="l1.611" class="difflineminus">-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}</span>
<a href="#l1.612"></a><span id="l1.612" class="difflineminus">-	fi</span>
<a href="#l1.613"></a><span id="l1.613" class="difflineminus">-	echo ${IBM_ARCH}-ibm-aix${IBM_REV}</span>
<a href="#l1.614"></a><span id="l1.614" class="difflineminus">-	exit ;;</span>
<a href="#l1.615"></a><span id="l1.615" class="difflineminus">-    *:AIX:*:*)</span>
<a href="#l1.616"></a><span id="l1.616" class="difflineminus">-	echo rs6000-ibm-aix</span>
<a href="#l1.617"></a><span id="l1.617" class="difflineminus">-	exit ;;</span>
<a href="#l1.618"></a><span id="l1.618" class="difflineminus">-    ibmrt:4.4BSD:*|romp-ibm:BSD:*)</span>
<a href="#l1.619"></a><span id="l1.619" class="difflineminus">-	echo romp-ibm-bsd4.4</span>
<a href="#l1.620"></a><span id="l1.620" class="difflineminus">-	exit ;;</span>
<a href="#l1.621"></a><span id="l1.621" class="difflineminus">-    ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and</span>
<a href="#l1.622"></a><span id="l1.622" class="difflineminus">-	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to</span>
<a href="#l1.623"></a><span id="l1.623" class="difflineminus">-	exit ;;                             # report: romp-ibm BSD 4.3</span>
<a href="#l1.624"></a><span id="l1.624" class="difflineminus">-    *:BOSX:*:*)</span>
<a href="#l1.625"></a><span id="l1.625" class="difflineminus">-	echo rs6000-bull-bosx</span>
<a href="#l1.626"></a><span id="l1.626" class="difflineminus">-	exit ;;</span>
<a href="#l1.627"></a><span id="l1.627" class="difflineminus">-    DPX/2?00:B.O.S.:*:*)</span>
<a href="#l1.628"></a><span id="l1.628" class="difflineminus">-	echo m68k-bull-sysv3</span>
<a href="#l1.629"></a><span id="l1.629" class="difflineminus">-	exit ;;</span>
<a href="#l1.630"></a><span id="l1.630" class="difflineminus">-    9000/[34]??:4.3bsd:1.*:*)</span>
<a href="#l1.631"></a><span id="l1.631" class="difflineminus">-	echo m68k-hp-bsd</span>
<a href="#l1.632"></a><span id="l1.632" class="difflineminus">-	exit ;;</span>
<a href="#l1.633"></a><span id="l1.633" class="difflineminus">-    hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)</span>
<a href="#l1.634"></a><span id="l1.634" class="difflineminus">-	echo m68k-hp-bsd4.4</span>
<a href="#l1.635"></a><span id="l1.635" class="difflineminus">-	exit ;;</span>
<a href="#l1.636"></a><span id="l1.636" class="difflineminus">-    9000/[34678]??:HP-UX:*:*)</span>
<a href="#l1.637"></a><span id="l1.637" class="difflineminus">-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`</span>
<a href="#l1.638"></a><span id="l1.638" class="difflineminus">-	case &quot;${UNAME_MACHINE}&quot; in</span>
<a href="#l1.639"></a><span id="l1.639" class="difflineminus">-	    9000/31? )            HP_ARCH=m68000 ;;</span>
<a href="#l1.640"></a><span id="l1.640" class="difflineminus">-	    9000/[34]?? )         HP_ARCH=m68k ;;</span>
<a href="#l1.641"></a><span id="l1.641" class="difflineminus">-	    9000/[678][0-9][0-9])</span>
<a href="#l1.642"></a><span id="l1.642" class="difflineminus">-		if [ -x /usr/bin/getconf ]; then</span>
<a href="#l1.643"></a><span id="l1.643" class="difflineminus">-		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2&gt;/dev/null`</span>
<a href="#l1.644"></a><span id="l1.644" class="difflineminus">-		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2&gt;/dev/null`</span>
<a href="#l1.645"></a><span id="l1.645" class="difflineminus">-		    case &quot;${sc_cpu_version}&quot; in</span>
<a href="#l1.646"></a><span id="l1.646" class="difflineminus">-		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0</span>
<a href="#l1.647"></a><span id="l1.647" class="difflineminus">-		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1</span>
<a href="#l1.648"></a><span id="l1.648" class="difflineminus">-		      532)                      # CPU_PA_RISC2_0</span>
<a href="#l1.649"></a><span id="l1.649" class="difflineminus">-			case &quot;${sc_kernel_bits}&quot; in</span>
<a href="#l1.650"></a><span id="l1.650" class="difflineminus">-			  32) HP_ARCH=hppa2.0n ;;</span>
<a href="#l1.651"></a><span id="l1.651" class="difflineminus">-			  64) HP_ARCH=hppa2.0w ;;</span>
<a href="#l1.652"></a><span id="l1.652" class="difflineminus">-			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20</span>
<a href="#l1.653"></a><span id="l1.653" class="difflineminus">-			esac ;;</span>
<a href="#l1.654"></a><span id="l1.654" class="difflineminus">-		    esac</span>
<a href="#l1.655"></a><span id="l1.655" class="difflineminus">-		fi</span>
<a href="#l1.656"></a><span id="l1.656" class="difflineminus">-		if [ &quot;${HP_ARCH}&quot; = &quot;&quot; ]; then</span>
<a href="#l1.657"></a><span id="l1.657" class="difflineminus">-		    eval $set_cc_for_build</span>
<a href="#l1.658"></a><span id="l1.658" class="difflineminus">-		    sed 's/^		//' &lt;&lt; EOF &gt;$dummy.c</span>
<a href="#l1.659"></a><span id="l1.659" class="difflineminus">-</span>
<a href="#l1.660"></a><span id="l1.660" class="difflineminus">-		#define _HPUX_SOURCE</span>
<a href="#l1.661"></a><span id="l1.661" class="difflineminus">-		#include &lt;stdlib.h&gt;</span>
<a href="#l1.662"></a><span id="l1.662" class="difflineminus">-		#include &lt;unistd.h&gt;</span>
<a href="#l1.663"></a><span id="l1.663" class="difflineminus">-</span>
<a href="#l1.664"></a><span id="l1.664" class="difflineminus">-		int main ()</span>
<a href="#l1.665"></a><span id="l1.665" class="difflineminus">-		{</span>
<a href="#l1.666"></a><span id="l1.666" class="difflineminus">-		#if defined(_SC_KERNEL_BITS)</span>
<a href="#l1.667"></a><span id="l1.667" class="difflineminus">-		    long bits = sysconf(_SC_KERNEL_BITS);</span>
<a href="#l1.668"></a><span id="l1.668" class="difflineminus">-		#endif</span>
<a href="#l1.669"></a><span id="l1.669" class="difflineminus">-		    long cpu  = sysconf (_SC_CPU_VERSION);</span>
<a href="#l1.670"></a><span id="l1.670" class="difflineminus">-</span>
<a href="#l1.671"></a><span id="l1.671" class="difflineminus">-		    switch (cpu)</span>
<a href="#l1.672"></a><span id="l1.672" class="difflineminus">-			{</span>
<a href="#l1.673"></a><span id="l1.673" class="difflineminus">-			case CPU_PA_RISC1_0: puts (&quot;hppa1.0&quot;); break;</span>
<a href="#l1.674"></a><span id="l1.674" class="difflineminus">-			case CPU_PA_RISC1_1: puts (&quot;hppa1.1&quot;); break;</span>
<a href="#l1.675"></a><span id="l1.675" class="difflineminus">-			case CPU_PA_RISC2_0:</span>
<a href="#l1.676"></a><span id="l1.676" class="difflineminus">-		#if defined(_SC_KERNEL_BITS)</span>
<a href="#l1.677"></a><span id="l1.677" class="difflineminus">-			    switch (bits)</span>
<a href="#l1.678"></a><span id="l1.678" class="difflineminus">-				{</span>
<a href="#l1.679"></a><span id="l1.679" class="difflineminus">-				case 64: puts (&quot;hppa2.0w&quot;); break;</span>
<a href="#l1.680"></a><span id="l1.680" class="difflineminus">-				case 32: puts (&quot;hppa2.0n&quot;); break;</span>
<a href="#l1.681"></a><span id="l1.681" class="difflineminus">-				default: puts (&quot;hppa2.0&quot;); break;</span>
<a href="#l1.682"></a><span id="l1.682" class="difflineminus">-				} break;</span>
<a href="#l1.683"></a><span id="l1.683" class="difflineminus">-		#else  /* !defined(_SC_KERNEL_BITS) */</span>
<a href="#l1.684"></a><span id="l1.684" class="difflineminus">-			    puts (&quot;hppa2.0&quot;); break;</span>
<a href="#l1.685"></a><span id="l1.685" class="difflineminus">-		#endif</span>
<a href="#l1.686"></a><span id="l1.686" class="difflineminus">-			default: puts (&quot;hppa1.0&quot;); break;</span>
<a href="#l1.687"></a><span id="l1.687" class="difflineminus">-			}</span>
<a href="#l1.688"></a><span id="l1.688" class="difflineminus">-		    exit (0);</span>
<a href="#l1.689"></a><span id="l1.689" class="difflineminus">-		}</span>
<a href="#l1.690"></a><span id="l1.690" class="difflineminus">-EOF</span>
<a href="#l1.691"></a><span id="l1.691" class="difflineminus">-		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2&gt;/dev/null) &amp;&amp; HP_ARCH=`$dummy`</span>
<a href="#l1.692"></a><span id="l1.692" class="difflineminus">-		    test -z &quot;$HP_ARCH&quot; &amp;&amp; HP_ARCH=hppa</span>
<a href="#l1.693"></a><span id="l1.693" class="difflineminus">-		fi ;;</span>
<a href="#l1.694"></a><span id="l1.694" class="difflineminus">-	esac</span>
<a href="#l1.695"></a><span id="l1.695" class="difflineminus">-	if [ ${HP_ARCH} = hppa2.0w ]</span>
<a href="#l1.696"></a><span id="l1.696" class="difflineminus">-	then</span>
<a href="#l1.697"></a><span id="l1.697" class="difflineminus">-	    eval $set_cc_for_build</span>
<a href="#l1.698"></a><span id="l1.698" class="difflineminus">-</span>
<a href="#l1.699"></a><span id="l1.699" class="difflineminus">-	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating</span>
<a href="#l1.700"></a><span id="l1.700" class="difflineminus">-	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler</span>
<a href="#l1.701"></a><span id="l1.701" class="difflineminus">-	    # generating 64-bit code.  GNU and HP use different nomenclature:</span>
<a href="#l1.702"></a><span id="l1.702" class="difflineminus">-	    #</span>
<a href="#l1.703"></a><span id="l1.703" class="difflineminus">-	    # $ CC_FOR_BUILD=cc ./config.guess</span>
<a href="#l1.704"></a><span id="l1.704" class="difflineminus">-	    # =&gt; hppa2.0w-hp-hpux11.23</span>
<a href="#l1.705"></a><span id="l1.705" class="difflineminus">-	    # $ CC_FOR_BUILD=&quot;cc +DA2.0w&quot; ./config.guess</span>
<a href="#l1.706"></a><span id="l1.706" class="difflineminus">-	    # =&gt; hppa64-hp-hpux11.23</span>
<a href="#l1.707"></a><span id="l1.707" class="difflineminus">-</span>
<a href="#l1.708"></a><span id="l1.708" class="difflineminus">-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2&gt;/dev/null) |</span>
<a href="#l1.709"></a><span id="l1.709" class="difflineminus">-		grep -q __LP64__</span>
<a href="#l1.710"></a><span id="l1.710" class="difflineminus">-	    then</span>
<a href="#l1.711"></a><span id="l1.711" class="difflineminus">-		HP_ARCH=hppa2.0w</span>
<a href="#l1.712"></a><span id="l1.712" class="difflineminus">-	    else</span>
<a href="#l1.713"></a><span id="l1.713" class="difflineminus">-		HP_ARCH=hppa64</span>
<a href="#l1.714"></a><span id="l1.714" class="difflineminus">-	    fi</span>
<a href="#l1.715"></a><span id="l1.715" class="difflineminus">-	fi</span>
<a href="#l1.716"></a><span id="l1.716" class="difflineminus">-	echo ${HP_ARCH}-hp-hpux${HPUX_REV}</span>
<a href="#l1.717"></a><span id="l1.717" class="difflineminus">-	exit ;;</span>
<a href="#l1.718"></a><span id="l1.718" class="difflineminus">-    ia64:HP-UX:*:*)</span>
<a href="#l1.719"></a><span id="l1.719" class="difflineminus">-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`</span>
<a href="#l1.720"></a><span id="l1.720" class="difflineminus">-	echo ia64-hp-hpux${HPUX_REV}</span>
<a href="#l1.721"></a><span id="l1.721" class="difflineminus">-	exit ;;</span>
<a href="#l1.722"></a><span id="l1.722" class="difflineminus">-    3050*:HI-UX:*:*)</span>
<a href="#l1.723"></a><span id="l1.723" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.724"></a><span id="l1.724" class="difflineminus">-	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c</span>
<a href="#l1.725"></a><span id="l1.725" class="difflineminus">-	#include &lt;unistd.h&gt;</span>
<a href="#l1.726"></a><span id="l1.726" class="difflineminus">-	int</span>
<a href="#l1.727"></a><span id="l1.727" class="difflineminus">-	main ()</span>
<a href="#l1.728"></a><span id="l1.728" class="difflineminus">-	{</span>
<a href="#l1.729"></a><span id="l1.729" class="difflineminus">-	  long cpu = sysconf (_SC_CPU_VERSION);</span>
<a href="#l1.730"></a><span id="l1.730" class="difflineminus">-	  /* The order matters, because CPU_IS_HP_MC68K erroneously returns</span>
<a href="#l1.731"></a><span id="l1.731" class="difflineminus">-	     true for CPU_PA_RISC1_0.  CPU_IS_PA_RISC returns correct</span>
<a href="#l1.732"></a><span id="l1.732" class="difflineminus">-	     results, however.  */</span>
<a href="#l1.733"></a><span id="l1.733" class="difflineminus">-	  if (CPU_IS_PA_RISC (cpu))</span>
<a href="#l1.734"></a><span id="l1.734" class="difflineminus">-	    {</span>
<a href="#l1.735"></a><span id="l1.735" class="difflineminus">-	      switch (cpu)</span>
<a href="#l1.736"></a><span id="l1.736" class="difflineminus">-		{</span>
<a href="#l1.737"></a><span id="l1.737" class="difflineminus">-		  case CPU_PA_RISC1_0: puts (&quot;hppa1.0-hitachi-hiuxwe2&quot;); break;</span>
<a href="#l1.738"></a><span id="l1.738" class="difflineminus">-		  case CPU_PA_RISC1_1: puts (&quot;hppa1.1-hitachi-hiuxwe2&quot;); break;</span>
<a href="#l1.739"></a><span id="l1.739" class="difflineminus">-		  case CPU_PA_RISC2_0: puts (&quot;hppa2.0-hitachi-hiuxwe2&quot;); break;</span>
<a href="#l1.740"></a><span id="l1.740" class="difflineminus">-		  default: puts (&quot;hppa-hitachi-hiuxwe2&quot;); break;</span>
<a href="#l1.741"></a><span id="l1.741" class="difflineminus">-		}</span>
<a href="#l1.742"></a><span id="l1.742" class="difflineminus">-	    }</span>
<a href="#l1.743"></a><span id="l1.743" class="difflineminus">-	  else if (CPU_IS_HP_MC68K (cpu))</span>
<a href="#l1.744"></a><span id="l1.744" class="difflineminus">-	    puts (&quot;m68k-hitachi-hiuxwe2&quot;);</span>
<a href="#l1.745"></a><span id="l1.745" class="difflineminus">-	  else puts (&quot;unknown-hitachi-hiuxwe2&quot;);</span>
<a href="#l1.746"></a><span id="l1.746" class="difflineminus">-	  exit (0);</span>
<a href="#l1.747"></a><span id="l1.747" class="difflineminus">-	}</span>
<a href="#l1.748"></a><span id="l1.748" class="difflineminus">-EOF</span>
<a href="#l1.749"></a><span id="l1.749" class="difflineminus">-	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; SYSTEM_NAME=`$dummy` &amp;&amp;</span>
<a href="#l1.750"></a><span id="l1.750" class="difflineminus">-		{ echo &quot;$SYSTEM_NAME&quot;; exit; }</span>
<a href="#l1.751"></a><span id="l1.751" class="difflineminus">-	echo unknown-hitachi-hiuxwe2</span>
<a href="#l1.752"></a><span id="l1.752" class="difflineminus">-	exit ;;</span>
<a href="#l1.753"></a><span id="l1.753" class="difflineminus">-    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )</span>
<a href="#l1.754"></a><span id="l1.754" class="difflineminus">-	echo hppa1.1-hp-bsd</span>
<a href="#l1.755"></a><span id="l1.755" class="difflineminus">-	exit ;;</span>
<a href="#l1.756"></a><span id="l1.756" class="difflineminus">-    9000/8??:4.3bsd:*:*)</span>
<a href="#l1.757"></a><span id="l1.757" class="difflineminus">-	echo hppa1.0-hp-bsd</span>
<a href="#l1.758"></a><span id="l1.758" class="difflineminus">-	exit ;;</span>
<a href="#l1.759"></a><span id="l1.759" class="difflineminus">-    *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)</span>
<a href="#l1.760"></a><span id="l1.760" class="difflineminus">-	echo hppa1.0-hp-mpeix</span>
<a href="#l1.761"></a><span id="l1.761" class="difflineminus">-	exit ;;</span>
<a href="#l1.762"></a><span id="l1.762" class="difflineminus">-    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )</span>
<a href="#l1.763"></a><span id="l1.763" class="difflineminus">-	echo hppa1.1-hp-osf</span>
<a href="#l1.764"></a><span id="l1.764" class="difflineminus">-	exit ;;</span>
<a href="#l1.765"></a><span id="l1.765" class="difflineminus">-    hp8??:OSF1:*:*)</span>
<a href="#l1.766"></a><span id="l1.766" class="difflineminus">-	echo hppa1.0-hp-osf</span>
<a href="#l1.767"></a><span id="l1.767" class="difflineminus">-	exit ;;</span>
<a href="#l1.768"></a><span id="l1.768" class="difflineminus">-    i*86:OSF1:*:*)</span>
<a href="#l1.769"></a><span id="l1.769" class="difflineminus">-	if [ -x /usr/sbin/sysversion ] ; then</span>
<a href="#l1.770"></a><span id="l1.770" class="difflineminus">-	    echo ${UNAME_MACHINE}-unknown-osf1mk</span>
<a href="#l1.771"></a><span id="l1.771" class="difflineminus">-	else</span>
<a href="#l1.772"></a><span id="l1.772" class="difflineminus">-	    echo ${UNAME_MACHINE}-unknown-osf1</span>
<a href="#l1.773"></a><span id="l1.773" class="difflineminus">-	fi</span>
<a href="#l1.774"></a><span id="l1.774" class="difflineminus">-	exit ;;</span>
<a href="#l1.775"></a><span id="l1.775" class="difflineminus">-    parisc*:Lites*:*:*)</span>
<a href="#l1.776"></a><span id="l1.776" class="difflineminus">-	echo hppa1.1-hp-lites</span>
<a href="#l1.777"></a><span id="l1.777" class="difflineminus">-	exit ;;</span>
<a href="#l1.778"></a><span id="l1.778" class="difflineminus">-    C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)</span>
<a href="#l1.779"></a><span id="l1.779" class="difflineminus">-	echo c1-convex-bsd</span>
<a href="#l1.780"></a><span id="l1.780" class="difflineminus">-	exit ;;</span>
<a href="#l1.781"></a><span id="l1.781" class="difflineminus">-    C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)</span>
<a href="#l1.782"></a><span id="l1.782" class="difflineminus">-	if getsysinfo -f scalar_acc</span>
<a href="#l1.783"></a><span id="l1.783" class="difflineminus">-	then echo c32-convex-bsd</span>
<a href="#l1.784"></a><span id="l1.784" class="difflineminus">-	else echo c2-convex-bsd</span>
<a href="#l1.785"></a><span id="l1.785" class="difflineminus">-	fi</span>
<a href="#l1.786"></a><span id="l1.786" class="difflineminus">-	exit ;;</span>
<a href="#l1.787"></a><span id="l1.787" class="difflineminus">-    C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)</span>
<a href="#l1.788"></a><span id="l1.788" class="difflineminus">-	echo c34-convex-bsd</span>
<a href="#l1.789"></a><span id="l1.789" class="difflineminus">-	exit ;;</span>
<a href="#l1.790"></a><span id="l1.790" class="difflineminus">-    C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)</span>
<a href="#l1.791"></a><span id="l1.791" class="difflineminus">-	echo c38-convex-bsd</span>
<a href="#l1.792"></a><span id="l1.792" class="difflineminus">-	exit ;;</span>
<a href="#l1.793"></a><span id="l1.793" class="difflineminus">-    C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)</span>
<a href="#l1.794"></a><span id="l1.794" class="difflineminus">-	echo c4-convex-bsd</span>
<a href="#l1.795"></a><span id="l1.795" class="difflineminus">-	exit ;;</span>
<a href="#l1.796"></a><span id="l1.796" class="difflineminus">-    CRAY*Y-MP:*:*:*)</span>
<a href="#l1.797"></a><span id="l1.797" class="difflineminus">-	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'</span>
<a href="#l1.798"></a><span id="l1.798" class="difflineminus">-	exit ;;</span>
<a href="#l1.799"></a><span id="l1.799" class="difflineminus">-    CRAY*[A-Z]90:*:*:*)</span>
<a href="#l1.800"></a><span id="l1.800" class="difflineminus">-	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \</span>
<a href="#l1.801"></a><span id="l1.801" class="difflineminus">-	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \</span>
<a href="#l1.802"></a><span id="l1.802" class="difflineminus">-	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \</span>
<a href="#l1.803"></a><span id="l1.803" class="difflineminus">-	      -e 's/\.[^.]*$/.X/'</span>
<a href="#l1.804"></a><span id="l1.804" class="difflineminus">-	exit ;;</span>
<a href="#l1.805"></a><span id="l1.805" class="difflineminus">-    CRAY*TS:*:*:*)</span>
<a href="#l1.806"></a><span id="l1.806" class="difflineminus">-	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'</span>
<a href="#l1.807"></a><span id="l1.807" class="difflineminus">-	exit ;;</span>
<a href="#l1.808"></a><span id="l1.808" class="difflineminus">-    CRAY*T3E:*:*:*)</span>
<a href="#l1.809"></a><span id="l1.809" class="difflineminus">-	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'</span>
<a href="#l1.810"></a><span id="l1.810" class="difflineminus">-	exit ;;</span>
<a href="#l1.811"></a><span id="l1.811" class="difflineminus">-    CRAY*SV1:*:*:*)</span>
<a href="#l1.812"></a><span id="l1.812" class="difflineminus">-	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'</span>
<a href="#l1.813"></a><span id="l1.813" class="difflineminus">-	exit ;;</span>
<a href="#l1.814"></a><span id="l1.814" class="difflineminus">-    *:UNICOS/mp:*:*)</span>
<a href="#l1.815"></a><span id="l1.815" class="difflineminus">-	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'</span>
<a href="#l1.816"></a><span id="l1.816" class="difflineminus">-	exit ;;</span>
<a href="#l1.817"></a><span id="l1.817" class="difflineminus">-    F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)</span>
<a href="#l1.818"></a><span id="l1.818" class="difflineminus">-	FUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`</span>
<a href="#l1.819"></a><span id="l1.819" class="difflineminus">-	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`</span>
<a href="#l1.820"></a><span id="l1.820" class="difflineminus">-	FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`</span>
<a href="#l1.821"></a><span id="l1.821" class="difflineminus">-	echo &quot;${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}&quot;</span>
<a href="#l1.822"></a><span id="l1.822" class="difflineminus">-	exit ;;</span>
<a href="#l1.823"></a><span id="l1.823" class="difflineminus">-    5000:UNIX_System_V:4.*:*)</span>
<a href="#l1.824"></a><span id="l1.824" class="difflineminus">-	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`</span>
<a href="#l1.825"></a><span id="l1.825" class="difflineminus">-	FUJITSU_REL=`echo ${UNAME_RELEASE} | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`</span>
<a href="#l1.826"></a><span id="l1.826" class="difflineminus">-	echo &quot;sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}&quot;</span>
<a href="#l1.827"></a><span id="l1.827" class="difflineminus">-	exit ;;</span>
<a href="#l1.828"></a><span id="l1.828" class="difflineminus">-    i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)</span>
<a href="#l1.829"></a><span id="l1.829" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}</span>
<a href="#l1.830"></a><span id="l1.830" class="difflineminus">-	exit ;;</span>
<a href="#l1.831"></a><span id="l1.831" class="difflineminus">-    sparc*:BSD/OS:*:*)</span>
<a href="#l1.832"></a><span id="l1.832" class="difflineminus">-	echo sparc-unknown-bsdi${UNAME_RELEASE}</span>
<a href="#l1.833"></a><span id="l1.833" class="difflineminus">-	exit ;;</span>
<a href="#l1.834"></a><span id="l1.834" class="difflineminus">-    *:BSD/OS:*:*)</span>
<a href="#l1.835"></a><span id="l1.835" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}</span>
<a href="#l1.836"></a><span id="l1.836" class="difflineminus">-	exit ;;</span>
<a href="#l1.837"></a><span id="l1.837" class="difflineminus">-    *:FreeBSD:*:*)</span>
<a href="#l1.838"></a><span id="l1.838" class="difflineminus">-	UNAME_PROCESSOR=`/usr/bin/uname -p`</span>
<a href="#l1.839"></a><span id="l1.839" class="difflineminus">-	case ${UNAME_PROCESSOR} in</span>
<a href="#l1.840"></a><span id="l1.840" class="difflineminus">-	    amd64)</span>
<a href="#l1.841"></a><span id="l1.841" class="difflineminus">-		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;</span>
<a href="#l1.842"></a><span id="l1.842" class="difflineminus">-	    *)</span>
<a href="#l1.843"></a><span id="l1.843" class="difflineminus">-		echo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;</span>
<a href="#l1.844"></a><span id="l1.844" class="difflineminus">-	esac</span>
<a href="#l1.845"></a><span id="l1.845" class="difflineminus">-	exit ;;</span>
<a href="#l1.846"></a><span id="l1.846" class="difflineminus">-    i*:CYGWIN*:*)</span>
<a href="#l1.847"></a><span id="l1.847" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-cygwin</span>
<a href="#l1.848"></a><span id="l1.848" class="difflineminus">-	exit ;;</span>
<a href="#l1.849"></a><span id="l1.849" class="difflineminus">-    *:MINGW64*:*)</span>
<a href="#l1.850"></a><span id="l1.850" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-mingw64</span>
<a href="#l1.851"></a><span id="l1.851" class="difflineminus">-	exit ;;</span>
<a href="#l1.852"></a><span id="l1.852" class="difflineminus">-    *:MINGW*:*)</span>
<a href="#l1.853"></a><span id="l1.853" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-mingw32</span>
<a href="#l1.854"></a><span id="l1.854" class="difflineminus">-	exit ;;</span>
<a href="#l1.855"></a><span id="l1.855" class="difflineminus">-    *:MSYS*:*)</span>
<a href="#l1.856"></a><span id="l1.856" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-msys</span>
<a href="#l1.857"></a><span id="l1.857" class="difflineminus">-	exit ;;</span>
<a href="#l1.858"></a><span id="l1.858" class="difflineminus">-    i*:windows32*:*)</span>
<a href="#l1.859"></a><span id="l1.859" class="difflineminus">-	# uname -m includes &quot;-pc&quot; on this system.</span>
<a href="#l1.860"></a><span id="l1.860" class="difflineminus">-	echo ${UNAME_MACHINE}-mingw32</span>
<a href="#l1.861"></a><span id="l1.861" class="difflineminus">-	exit ;;</span>
<a href="#l1.862"></a><span id="l1.862" class="difflineminus">-    i*:PW*:*)</span>
<a href="#l1.863"></a><span id="l1.863" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-pw32</span>
<a href="#l1.864"></a><span id="l1.864" class="difflineminus">-	exit ;;</span>
<a href="#l1.865"></a><span id="l1.865" class="difflineminus">-    *:Interix*:*)</span>
<a href="#l1.866"></a><span id="l1.866" class="difflineminus">-	case ${UNAME_MACHINE} in</span>
<a href="#l1.867"></a><span id="l1.867" class="difflineminus">-	    x86)</span>
<a href="#l1.868"></a><span id="l1.868" class="difflineminus">-		echo i586-pc-interix${UNAME_RELEASE}</span>
<a href="#l1.869"></a><span id="l1.869" class="difflineminus">-		exit ;;</span>
<a href="#l1.870"></a><span id="l1.870" class="difflineminus">-	    authenticamd | genuineintel | EM64T)</span>
<a href="#l1.871"></a><span id="l1.871" class="difflineminus">-		echo x86_64-unknown-interix${UNAME_RELEASE}</span>
<a href="#l1.872"></a><span id="l1.872" class="difflineminus">-		exit ;;</span>
<a href="#l1.873"></a><span id="l1.873" class="difflineminus">-	    IA64)</span>
<a href="#l1.874"></a><span id="l1.874" class="difflineminus">-		echo ia64-unknown-interix${UNAME_RELEASE}</span>
<a href="#l1.875"></a><span id="l1.875" class="difflineminus">-		exit ;;</span>
<a href="#l1.876"></a><span id="l1.876" class="difflineminus">-	esac ;;</span>
<a href="#l1.877"></a><span id="l1.877" class="difflineminus">-    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)</span>
<a href="#l1.878"></a><span id="l1.878" class="difflineminus">-	echo i${UNAME_MACHINE}-pc-mks</span>
<a href="#l1.879"></a><span id="l1.879" class="difflineminus">-	exit ;;</span>
<a href="#l1.880"></a><span id="l1.880" class="difflineminus">-    8664:Windows_NT:*)</span>
<a href="#l1.881"></a><span id="l1.881" class="difflineminus">-	echo x86_64-pc-mks</span>
<a href="#l1.882"></a><span id="l1.882" class="difflineminus">-	exit ;;</span>
<a href="#l1.883"></a><span id="l1.883" class="difflineminus">-    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)</span>
<a href="#l1.884"></a><span id="l1.884" class="difflineminus">-	# How do we know it's Interix rather than the generic POSIX subsystem?</span>
<a href="#l1.885"></a><span id="l1.885" class="difflineminus">-	# It also conflicts with pre-2.0 versions of AT&amp;T UWIN. Should we</span>
<a href="#l1.886"></a><span id="l1.886" class="difflineminus">-	# UNAME_MACHINE based on the output of uname instead of i386?</span>
<a href="#l1.887"></a><span id="l1.887" class="difflineminus">-	echo i586-pc-interix</span>
<a href="#l1.888"></a><span id="l1.888" class="difflineminus">-	exit ;;</span>
<a href="#l1.889"></a><span id="l1.889" class="difflineminus">-    i*:UWIN*:*)</span>
<a href="#l1.890"></a><span id="l1.890" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-uwin</span>
<a href="#l1.891"></a><span id="l1.891" class="difflineminus">-	exit ;;</span>
<a href="#l1.892"></a><span id="l1.892" class="difflineminus">-    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)</span>
<a href="#l1.893"></a><span id="l1.893" class="difflineminus">-	echo x86_64-unknown-cygwin</span>
<a href="#l1.894"></a><span id="l1.894" class="difflineminus">-	exit ;;</span>
<a href="#l1.895"></a><span id="l1.895" class="difflineminus">-    p*:CYGWIN*:*)</span>
<a href="#l1.896"></a><span id="l1.896" class="difflineminus">-	echo powerpcle-unknown-cygwin</span>
<a href="#l1.897"></a><span id="l1.897" class="difflineminus">-	exit ;;</span>
<a href="#l1.898"></a><span id="l1.898" class="difflineminus">-    prep*:SunOS:5.*:*)</span>
<a href="#l1.899"></a><span id="l1.899" class="difflineminus">-	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`</span>
<a href="#l1.900"></a><span id="l1.900" class="difflineminus">-	exit ;;</span>
<a href="#l1.901"></a><span id="l1.901" class="difflineminus">-    *:GNU:*:*)</span>
<a href="#l1.902"></a><span id="l1.902" class="difflineminus">-	# the GNU system</span>
<a href="#l1.903"></a><span id="l1.903" class="difflineminus">-	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`</span>
<a href="#l1.904"></a><span id="l1.904" class="difflineminus">-	exit ;;</span>
<a href="#l1.905"></a><span id="l1.905" class="difflineminus">-    *:GNU/*:*:*)</span>
<a href="#l1.906"></a><span id="l1.906" class="difflineminus">-	# other systems with GNU libc and userland</span>
<a href="#l1.907"></a><span id="l1.907" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}</span>
<a href="#l1.908"></a><span id="l1.908" class="difflineminus">-	exit ;;</span>
<a href="#l1.909"></a><span id="l1.909" class="difflineminus">-    i*86:Minix:*:*)</span>
<a href="#l1.910"></a><span id="l1.910" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-minix</span>
<a href="#l1.911"></a><span id="l1.911" class="difflineminus">-	exit ;;</span>
<a href="#l1.912"></a><span id="l1.912" class="difflineminus">-    aarch64:Linux:*:*)</span>
<a href="#l1.913"></a><span id="l1.913" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.914"></a><span id="l1.914" class="difflineminus">-	exit ;;</span>
<a href="#l1.915"></a><span id="l1.915" class="difflineminus">-    aarch64_be:Linux:*:*)</span>
<a href="#l1.916"></a><span id="l1.916" class="difflineminus">-	UNAME_MACHINE=aarch64_be</span>
<a href="#l1.917"></a><span id="l1.917" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.918"></a><span id="l1.918" class="difflineminus">-	exit ;;</span>
<a href="#l1.919"></a><span id="l1.919" class="difflineminus">-    alpha:Linux:*:*)</span>
<a href="#l1.920"></a><span id="l1.920" class="difflineminus">-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' &lt; /proc/cpuinfo` in</span>
<a href="#l1.921"></a><span id="l1.921" class="difflineminus">-	  EV5)   UNAME_MACHINE=alphaev5 ;;</span>
<a href="#l1.922"></a><span id="l1.922" class="difflineminus">-	  EV56)  UNAME_MACHINE=alphaev56 ;;</span>
<a href="#l1.923"></a><span id="l1.923" class="difflineminus">-	  PCA56) UNAME_MACHINE=alphapca56 ;;</span>
<a href="#l1.924"></a><span id="l1.924" class="difflineminus">-	  PCA57) UNAME_MACHINE=alphapca56 ;;</span>
<a href="#l1.925"></a><span id="l1.925" class="difflineminus">-	  EV6)   UNAME_MACHINE=alphaev6 ;;</span>
<a href="#l1.926"></a><span id="l1.926" class="difflineminus">-	  EV67)  UNAME_MACHINE=alphaev67 ;;</span>
<a href="#l1.927"></a><span id="l1.927" class="difflineminus">-	  EV68*) UNAME_MACHINE=alphaev68 ;;</span>
<a href="#l1.928"></a><span id="l1.928" class="difflineminus">-	esac</span>
<a href="#l1.929"></a><span id="l1.929" class="difflineminus">-	objdump --private-headers /bin/sh | grep -q ld.so.1</span>
<a href="#l1.930"></a><span id="l1.930" class="difflineminus">-	if test &quot;$?&quot; = 0 ; then LIBC=gnulibc1 ; fi</span>
<a href="#l1.931"></a><span id="l1.931" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.932"></a><span id="l1.932" class="difflineminus">-	exit ;;</span>
<a href="#l1.933"></a><span id="l1.933" class="difflineminus">-    arc:Linux:*:* | arceb:Linux:*:*)</span>
<a href="#l1.934"></a><span id="l1.934" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.935"></a><span id="l1.935" class="difflineminus">-	exit ;;</span>
<a href="#l1.936"></a><span id="l1.936" class="difflineminus">-    arm*:Linux:*:*)</span>
<a href="#l1.937"></a><span id="l1.937" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.938"></a><span id="l1.938" class="difflineminus">-	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2&gt;/dev/null \</span>
<a href="#l1.939"></a><span id="l1.939" class="difflineminus">-	    | grep -q __ARM_EABI__</span>
<a href="#l1.940"></a><span id="l1.940" class="difflineminus">-	then</span>
<a href="#l1.941"></a><span id="l1.941" class="difflineminus">-	    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.942"></a><span id="l1.942" class="difflineminus">-	else</span>
<a href="#l1.943"></a><span id="l1.943" class="difflineminus">-	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2&gt;/dev/null \</span>
<a href="#l1.944"></a><span id="l1.944" class="difflineminus">-		| grep -q __ARM_PCS_VFP</span>
<a href="#l1.945"></a><span id="l1.945" class="difflineminus">-	    then</span>
<a href="#l1.946"></a><span id="l1.946" class="difflineminus">-		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi</span>
<a href="#l1.947"></a><span id="l1.947" class="difflineminus">-	    else</span>
<a href="#l1.948"></a><span id="l1.948" class="difflineminus">-		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf</span>
<a href="#l1.949"></a><span id="l1.949" class="difflineminus">-	    fi</span>
<a href="#l1.950"></a><span id="l1.950" class="difflineminus">-	fi</span>
<a href="#l1.951"></a><span id="l1.951" class="difflineminus">-	exit ;;</span>
<a href="#l1.952"></a><span id="l1.952" class="difflineminus">-    avr32*:Linux:*:*)</span>
<a href="#l1.953"></a><span id="l1.953" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.954"></a><span id="l1.954" class="difflineminus">-	exit ;;</span>
<a href="#l1.955"></a><span id="l1.955" class="difflineminus">-    cris:Linux:*:*)</span>
<a href="#l1.956"></a><span id="l1.956" class="difflineminus">-	echo ${UNAME_MACHINE}-axis-linux-${LIBC}</span>
<a href="#l1.957"></a><span id="l1.957" class="difflineminus">-	exit ;;</span>
<a href="#l1.958"></a><span id="l1.958" class="difflineminus">-    crisv32:Linux:*:*)</span>
<a href="#l1.959"></a><span id="l1.959" class="difflineminus">-	echo ${UNAME_MACHINE}-axis-linux-${LIBC}</span>
<a href="#l1.960"></a><span id="l1.960" class="difflineminus">-	exit ;;</span>
<a href="#l1.961"></a><span id="l1.961" class="difflineminus">-    e2k:Linux:*:*)</span>
<a href="#l1.962"></a><span id="l1.962" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.963"></a><span id="l1.963" class="difflineminus">-	exit ;;</span>
<a href="#l1.964"></a><span id="l1.964" class="difflineminus">-    frv:Linux:*:*)</span>
<a href="#l1.965"></a><span id="l1.965" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.966"></a><span id="l1.966" class="difflineminus">-	exit ;;</span>
<a href="#l1.967"></a><span id="l1.967" class="difflineminus">-    hexagon:Linux:*:*)</span>
<a href="#l1.968"></a><span id="l1.968" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.969"></a><span id="l1.969" class="difflineminus">-	exit ;;</span>
<a href="#l1.970"></a><span id="l1.970" class="difflineminus">-    i*86:Linux:*:*)</span>
<a href="#l1.971"></a><span id="l1.971" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-linux-${LIBC}</span>
<a href="#l1.972"></a><span id="l1.972" class="difflineminus">-	exit ;;</span>
<a href="#l1.973"></a><span id="l1.973" class="difflineminus">-    ia64:Linux:*:*)</span>
<a href="#l1.974"></a><span id="l1.974" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.975"></a><span id="l1.975" class="difflineminus">-	exit ;;</span>
<a href="#l1.976"></a><span id="l1.976" class="difflineminus">-    k1om:Linux:*:*)</span>
<a href="#l1.977"></a><span id="l1.977" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.978"></a><span id="l1.978" class="difflineminus">-	exit ;;</span>
<a href="#l1.979"></a><span id="l1.979" class="difflineminus">-    m32r*:Linux:*:*)</span>
<a href="#l1.980"></a><span id="l1.980" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.981"></a><span id="l1.981" class="difflineminus">-	exit ;;</span>
<a href="#l1.982"></a><span id="l1.982" class="difflineminus">-    m68*:Linux:*:*)</span>
<a href="#l1.983"></a><span id="l1.983" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.984"></a><span id="l1.984" class="difflineminus">-	exit ;;</span>
<a href="#l1.985"></a><span id="l1.985" class="difflineminus">-    mips:Linux:*:* | mips64:Linux:*:*)</span>
<a href="#l1.986"></a><span id="l1.986" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.987"></a><span id="l1.987" class="difflineminus">-	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c</span>
<a href="#l1.988"></a><span id="l1.988" class="difflineminus">-	#undef CPU</span>
<a href="#l1.989"></a><span id="l1.989" class="difflineminus">-	#undef ${UNAME_MACHINE}</span>
<a href="#l1.990"></a><span id="l1.990" class="difflineminus">-	#undef ${UNAME_MACHINE}el</span>
<a href="#l1.991"></a><span id="l1.991" class="difflineminus">-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)</span>
<a href="#l1.992"></a><span id="l1.992" class="difflineminus">-	CPU=${UNAME_MACHINE}el</span>
<a href="#l1.993"></a><span id="l1.993" class="difflineminus">-	#else</span>
<a href="#l1.994"></a><span id="l1.994" class="difflineminus">-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)</span>
<a href="#l1.995"></a><span id="l1.995" class="difflineminus">-	CPU=${UNAME_MACHINE}</span>
<a href="#l1.996"></a><span id="l1.996" class="difflineminus">-	#else</span>
<a href="#l1.997"></a><span id="l1.997" class="difflineminus">-	CPU=</span>
<a href="#l1.998"></a><span id="l1.998" class="difflineminus">-	#endif</span>
<a href="#l1.999"></a><span id="l1.999" class="difflineminus">-	#endif</span>
<a href="#l1.1000"></a><span id="l1.1000" class="difflineminus">-EOF</span>
<a href="#l1.1001"></a><span id="l1.1001" class="difflineminus">-	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep '^CPU'`</span>
<a href="#l1.1002"></a><span id="l1.1002" class="difflineminus">-	test x&quot;${CPU}&quot; != x &amp;&amp; { echo &quot;${CPU}-unknown-linux-${LIBC}&quot;; exit; }</span>
<a href="#l1.1003"></a><span id="l1.1003" class="difflineminus">-	;;</span>
<a href="#l1.1004"></a><span id="l1.1004" class="difflineminus">-    openrisc*:Linux:*:*)</span>
<a href="#l1.1005"></a><span id="l1.1005" class="difflineminus">-	echo or1k-unknown-linux-${LIBC}</span>
<a href="#l1.1006"></a><span id="l1.1006" class="difflineminus">-	exit ;;</span>
<a href="#l1.1007"></a><span id="l1.1007" class="difflineminus">-    or32:Linux:*:* | or1k*:Linux:*:*)</span>
<a href="#l1.1008"></a><span id="l1.1008" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.1009"></a><span id="l1.1009" class="difflineminus">-	exit ;;</span>
<a href="#l1.1010"></a><span id="l1.1010" class="difflineminus">-    padre:Linux:*:*)</span>
<a href="#l1.1011"></a><span id="l1.1011" class="difflineminus">-	echo sparc-unknown-linux-${LIBC}</span>
<a href="#l1.1012"></a><span id="l1.1012" class="difflineminus">-	exit ;;</span>
<a href="#l1.1013"></a><span id="l1.1013" class="difflineminus">-    parisc64:Linux:*:* | hppa64:Linux:*:*)</span>
<a href="#l1.1014"></a><span id="l1.1014" class="difflineminus">-	echo hppa64-unknown-linux-${LIBC}</span>
<a href="#l1.1015"></a><span id="l1.1015" class="difflineminus">-	exit ;;</span>
<a href="#l1.1016"></a><span id="l1.1016" class="difflineminus">-    parisc:Linux:*:* | hppa:Linux:*:*)</span>
<a href="#l1.1017"></a><span id="l1.1017" class="difflineminus">-	# Look for CPU level</span>
<a href="#l1.1018"></a><span id="l1.1018" class="difflineminus">-	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2&gt;/dev/null | cut -d' ' -f2` in</span>
<a href="#l1.1019"></a><span id="l1.1019" class="difflineminus">-	  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;</span>
<a href="#l1.1020"></a><span id="l1.1020" class="difflineminus">-	  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;</span>
<a href="#l1.1021"></a><span id="l1.1021" class="difflineminus">-	  *)    echo hppa-unknown-linux-${LIBC} ;;</span>
<a href="#l1.1022"></a><span id="l1.1022" class="difflineminus">-	esac</span>
<a href="#l1.1023"></a><span id="l1.1023" class="difflineminus">-	exit ;;</span>
<a href="#l1.1024"></a><span id="l1.1024" class="difflineminus">-    ppc64:Linux:*:*)</span>
<a href="#l1.1025"></a><span id="l1.1025" class="difflineminus">-	echo powerpc64-unknown-linux-${LIBC}</span>
<a href="#l1.1026"></a><span id="l1.1026" class="difflineminus">-	exit ;;</span>
<a href="#l1.1027"></a><span id="l1.1027" class="difflineminus">-    ppc:Linux:*:*)</span>
<a href="#l1.1028"></a><span id="l1.1028" class="difflineminus">-	echo powerpc-unknown-linux-${LIBC}</span>
<a href="#l1.1029"></a><span id="l1.1029" class="difflineminus">-	exit ;;</span>
<a href="#l1.1030"></a><span id="l1.1030" class="difflineminus">-    ppc64le:Linux:*:*)</span>
<a href="#l1.1031"></a><span id="l1.1031" class="difflineminus">-	echo powerpc64le-unknown-linux-${LIBC}</span>
<a href="#l1.1032"></a><span id="l1.1032" class="difflineminus">-	exit ;;</span>
<a href="#l1.1033"></a><span id="l1.1033" class="difflineminus">-    ppcle:Linux:*:*)</span>
<a href="#l1.1034"></a><span id="l1.1034" class="difflineminus">-	echo powerpcle-unknown-linux-${LIBC}</span>
<a href="#l1.1035"></a><span id="l1.1035" class="difflineminus">-	exit ;;</span>
<a href="#l1.1036"></a><span id="l1.1036" class="difflineminus">-    s390:Linux:*:* | s390x:Linux:*:*)</span>
<a href="#l1.1037"></a><span id="l1.1037" class="difflineminus">-	echo ${UNAME_MACHINE}-ibm-linux-${LIBC}</span>
<a href="#l1.1038"></a><span id="l1.1038" class="difflineminus">-	exit ;;</span>
<a href="#l1.1039"></a><span id="l1.1039" class="difflineminus">-    sh64*:Linux:*:*)</span>
<a href="#l1.1040"></a><span id="l1.1040" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.1041"></a><span id="l1.1041" class="difflineminus">-	exit ;;</span>
<a href="#l1.1042"></a><span id="l1.1042" class="difflineminus">-    sh*:Linux:*:*)</span>
<a href="#l1.1043"></a><span id="l1.1043" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.1044"></a><span id="l1.1044" class="difflineminus">-	exit ;;</span>
<a href="#l1.1045"></a><span id="l1.1045" class="difflineminus">-    sparc:Linux:*:* | sparc64:Linux:*:*)</span>
<a href="#l1.1046"></a><span id="l1.1046" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.1047"></a><span id="l1.1047" class="difflineminus">-	exit ;;</span>
<a href="#l1.1048"></a><span id="l1.1048" class="difflineminus">-    tile*:Linux:*:*)</span>
<a href="#l1.1049"></a><span id="l1.1049" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.1050"></a><span id="l1.1050" class="difflineminus">-	exit ;;</span>
<a href="#l1.1051"></a><span id="l1.1051" class="difflineminus">-    vax:Linux:*:*)</span>
<a href="#l1.1052"></a><span id="l1.1052" class="difflineminus">-	echo ${UNAME_MACHINE}-dec-linux-${LIBC}</span>
<a href="#l1.1053"></a><span id="l1.1053" class="difflineminus">-	exit ;;</span>
<a href="#l1.1054"></a><span id="l1.1054" class="difflineminus">-    x86_64:Linux:*:*)</span>
<a href="#l1.1055"></a><span id="l1.1055" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-linux-${LIBC}</span>
<a href="#l1.1056"></a><span id="l1.1056" class="difflineminus">-	exit ;;</span>
<a href="#l1.1057"></a><span id="l1.1057" class="difflineminus">-    xtensa*:Linux:*:*)</span>
<a href="#l1.1058"></a><span id="l1.1058" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}</span>
<a href="#l1.1059"></a><span id="l1.1059" class="difflineminus">-	exit ;;</span>
<a href="#l1.1060"></a><span id="l1.1060" class="difflineminus">-    i*86:DYNIX/ptx:4*:*)</span>
<a href="#l1.1061"></a><span id="l1.1061" class="difflineminus">-	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.</span>
<a href="#l1.1062"></a><span id="l1.1062" class="difflineminus">-	# earlier versions are messed up and put the nodename in both</span>
<a href="#l1.1063"></a><span id="l1.1063" class="difflineminus">-	# sysname and nodename.</span>
<a href="#l1.1064"></a><span id="l1.1064" class="difflineminus">-	echo i386-sequent-sysv4</span>
<a href="#l1.1065"></a><span id="l1.1065" class="difflineminus">-	exit ;;</span>
<a href="#l1.1066"></a><span id="l1.1066" class="difflineminus">-    i*86:UNIX_SV:4.2MP:2.*)</span>
<a href="#l1.1067"></a><span id="l1.1067" class="difflineminus">-	# Unixware is an offshoot of SVR4, but it has its own version</span>
<a href="#l1.1068"></a><span id="l1.1068" class="difflineminus">-	# number series starting with 2...</span>
<a href="#l1.1069"></a><span id="l1.1069" class="difflineminus">-	# I am not positive that other SVR4 systems won't match this,</span>
<a href="#l1.1070"></a><span id="l1.1070" class="difflineminus">-	# I just have to hope.  -- rms.</span>
<a href="#l1.1071"></a><span id="l1.1071" class="difflineminus">-	# Use sysv4.2uw... so that sysv4* matches it.</span>
<a href="#l1.1072"></a><span id="l1.1072" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}</span>
<a href="#l1.1073"></a><span id="l1.1073" class="difflineminus">-	exit ;;</span>
<a href="#l1.1074"></a><span id="l1.1074" class="difflineminus">-    i*86:OS/2:*:*)</span>
<a href="#l1.1075"></a><span id="l1.1075" class="difflineminus">-	# If we were able to find `uname', then EMX Unix compatibility</span>
<a href="#l1.1076"></a><span id="l1.1076" class="difflineminus">-	# is probably installed.</span>
<a href="#l1.1077"></a><span id="l1.1077" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-os2-emx</span>
<a href="#l1.1078"></a><span id="l1.1078" class="difflineminus">-	exit ;;</span>
<a href="#l1.1079"></a><span id="l1.1079" class="difflineminus">-    i*86:XTS-300:*:STOP)</span>
<a href="#l1.1080"></a><span id="l1.1080" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-stop</span>
<a href="#l1.1081"></a><span id="l1.1081" class="difflineminus">-	exit ;;</span>
<a href="#l1.1082"></a><span id="l1.1082" class="difflineminus">-    i*86:atheos:*:*)</span>
<a href="#l1.1083"></a><span id="l1.1083" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-atheos</span>
<a href="#l1.1084"></a><span id="l1.1084" class="difflineminus">-	exit ;;</span>
<a href="#l1.1085"></a><span id="l1.1085" class="difflineminus">-    i*86:syllable:*:*)</span>
<a href="#l1.1086"></a><span id="l1.1086" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-syllable</span>
<a href="#l1.1087"></a><span id="l1.1087" class="difflineminus">-	exit ;;</span>
<a href="#l1.1088"></a><span id="l1.1088" class="difflineminus">-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)</span>
<a href="#l1.1089"></a><span id="l1.1089" class="difflineminus">-	echo i386-unknown-lynxos${UNAME_RELEASE}</span>
<a href="#l1.1090"></a><span id="l1.1090" class="difflineminus">-	exit ;;</span>
<a href="#l1.1091"></a><span id="l1.1091" class="difflineminus">-    i*86:*DOS:*:*)</span>
<a href="#l1.1092"></a><span id="l1.1092" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-msdosdjgpp</span>
<a href="#l1.1093"></a><span id="l1.1093" class="difflineminus">-	exit ;;</span>
<a href="#l1.1094"></a><span id="l1.1094" class="difflineminus">-    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)</span>
<a href="#l1.1095"></a><span id="l1.1095" class="difflineminus">-	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`</span>
<a href="#l1.1096"></a><span id="l1.1096" class="difflineminus">-	if grep Novell /usr/include/link.h &gt;/dev/null 2&gt;/dev/null; then</span>
<a href="#l1.1097"></a><span id="l1.1097" class="difflineminus">-		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}</span>
<a href="#l1.1098"></a><span id="l1.1098" class="difflineminus">-	else</span>
<a href="#l1.1099"></a><span id="l1.1099" class="difflineminus">-		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}</span>
<a href="#l1.1100"></a><span id="l1.1100" class="difflineminus">-	fi</span>
<a href="#l1.1101"></a><span id="l1.1101" class="difflineminus">-	exit ;;</span>
<a href="#l1.1102"></a><span id="l1.1102" class="difflineminus">-    i*86:*:5:[678]*)</span>
<a href="#l1.1103"></a><span id="l1.1103" class="difflineminus">-	# UnixWare 7.x, OpenUNIX and OpenServer 6.</span>
<a href="#l1.1104"></a><span id="l1.1104" class="difflineminus">-	case `/bin/uname -X | grep &quot;^Machine&quot;` in</span>
<a href="#l1.1105"></a><span id="l1.1105" class="difflineminus">-	    *486*)	     UNAME_MACHINE=i486 ;;</span>
<a href="#l1.1106"></a><span id="l1.1106" class="difflineminus">-	    *Pentium)	     UNAME_MACHINE=i586 ;;</span>
<a href="#l1.1107"></a><span id="l1.1107" class="difflineminus">-	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;</span>
<a href="#l1.1108"></a><span id="l1.1108" class="difflineminus">-	esac</span>
<a href="#l1.1109"></a><span id="l1.1109" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}</span>
<a href="#l1.1110"></a><span id="l1.1110" class="difflineminus">-	exit ;;</span>
<a href="#l1.1111"></a><span id="l1.1111" class="difflineminus">-    i*86:*:3.2:*)</span>
<a href="#l1.1112"></a><span id="l1.1112" class="difflineminus">-	if test -f /usr/options/cb.name; then</span>
<a href="#l1.1113"></a><span id="l1.1113" class="difflineminus">-		UNAME_REL=`sed -n 's/.*Version //p' &lt;/usr/options/cb.name`</span>
<a href="#l1.1114"></a><span id="l1.1114" class="difflineminus">-		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL</span>
<a href="#l1.1115"></a><span id="l1.1115" class="difflineminus">-	elif /bin/uname -X 2&gt;/dev/null &gt;/dev/null ; then</span>
<a href="#l1.1116"></a><span id="l1.1116" class="difflineminus">-		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`</span>
<a href="#l1.1117"></a><span id="l1.1117" class="difflineminus">-		(/bin/uname -X|grep i80486 &gt;/dev/null) &amp;&amp; UNAME_MACHINE=i486</span>
<a href="#l1.1118"></a><span id="l1.1118" class="difflineminus">-		(/bin/uname -X|grep '^Machine.*Pentium' &gt;/dev/null) \</span>
<a href="#l1.1119"></a><span id="l1.1119" class="difflineminus">-			&amp;&amp; UNAME_MACHINE=i586</span>
<a href="#l1.1120"></a><span id="l1.1120" class="difflineminus">-		(/bin/uname -X|grep '^Machine.*Pent *II' &gt;/dev/null) \</span>
<a href="#l1.1121"></a><span id="l1.1121" class="difflineminus">-			&amp;&amp; UNAME_MACHINE=i686</span>
<a href="#l1.1122"></a><span id="l1.1122" class="difflineminus">-		(/bin/uname -X|grep '^Machine.*Pentium Pro' &gt;/dev/null) \</span>
<a href="#l1.1123"></a><span id="l1.1123" class="difflineminus">-			&amp;&amp; UNAME_MACHINE=i686</span>
<a href="#l1.1124"></a><span id="l1.1124" class="difflineminus">-		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL</span>
<a href="#l1.1125"></a><span id="l1.1125" class="difflineminus">-	else</span>
<a href="#l1.1126"></a><span id="l1.1126" class="difflineminus">-		echo ${UNAME_MACHINE}-pc-sysv32</span>
<a href="#l1.1127"></a><span id="l1.1127" class="difflineminus">-	fi</span>
<a href="#l1.1128"></a><span id="l1.1128" class="difflineminus">-	exit ;;</span>
<a href="#l1.1129"></a><span id="l1.1129" class="difflineminus">-    pc:*:*:*)</span>
<a href="#l1.1130"></a><span id="l1.1130" class="difflineminus">-	# Left here for compatibility:</span>
<a href="#l1.1131"></a><span id="l1.1131" class="difflineminus">-	# uname -m prints for DJGPP always 'pc', but it prints nothing about</span>
<a href="#l1.1132"></a><span id="l1.1132" class="difflineminus">-	# the processor, so we play safe by assuming i586.</span>
<a href="#l1.1133"></a><span id="l1.1133" class="difflineminus">-	# Note: whatever this is, it MUST be the same as what config.sub</span>
<a href="#l1.1134"></a><span id="l1.1134" class="difflineminus">-	# prints for the &quot;djgpp&quot; host, or else GDB configure will decide that</span>
<a href="#l1.1135"></a><span id="l1.1135" class="difflineminus">-	# this is a cross-build.</span>
<a href="#l1.1136"></a><span id="l1.1136" class="difflineminus">-	echo i586-pc-msdosdjgpp</span>
<a href="#l1.1137"></a><span id="l1.1137" class="difflineminus">-	exit ;;</span>
<a href="#l1.1138"></a><span id="l1.1138" class="difflineminus">-    Intel:Mach:3*:*)</span>
<a href="#l1.1139"></a><span id="l1.1139" class="difflineminus">-	echo i386-pc-mach3</span>
<a href="#l1.1140"></a><span id="l1.1140" class="difflineminus">-	exit ;;</span>
<a href="#l1.1141"></a><span id="l1.1141" class="difflineminus">-    paragon:*:*:*)</span>
<a href="#l1.1142"></a><span id="l1.1142" class="difflineminus">-	echo i860-intel-osf1</span>
<a href="#l1.1143"></a><span id="l1.1143" class="difflineminus">-	exit ;;</span>
<a href="#l1.1144"></a><span id="l1.1144" class="difflineminus">-    i860:*:4.*:*) # i860-SVR4</span>
<a href="#l1.1145"></a><span id="l1.1145" class="difflineminus">-	if grep Stardent /usr/include/sys/uadmin.h &gt;/dev/null 2&gt;&amp;1 ; then</span>
<a href="#l1.1146"></a><span id="l1.1146" class="difflineminus">-	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4</span>
<a href="#l1.1147"></a><span id="l1.1147" class="difflineminus">-	else # Add other i860-SVR4 vendors below as they are discovered.</span>
<a href="#l1.1148"></a><span id="l1.1148" class="difflineminus">-	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4</span>
<a href="#l1.1149"></a><span id="l1.1149" class="difflineminus">-	fi</span>
<a href="#l1.1150"></a><span id="l1.1150" class="difflineminus">-	exit ;;</span>
<a href="#l1.1151"></a><span id="l1.1151" class="difflineminus">-    mini*:CTIX:SYS*5:*)</span>
<a href="#l1.1152"></a><span id="l1.1152" class="difflineminus">-	# &quot;miniframe&quot;</span>
<a href="#l1.1153"></a><span id="l1.1153" class="difflineminus">-	echo m68010-convergent-sysv</span>
<a href="#l1.1154"></a><span id="l1.1154" class="difflineminus">-	exit ;;</span>
<a href="#l1.1155"></a><span id="l1.1155" class="difflineminus">-    mc68k:UNIX:SYSTEM5:3.51m)</span>
<a href="#l1.1156"></a><span id="l1.1156" class="difflineminus">-	echo m68k-convergent-sysv</span>
<a href="#l1.1157"></a><span id="l1.1157" class="difflineminus">-	exit ;;</span>
<a href="#l1.1158"></a><span id="l1.1158" class="difflineminus">-    M680?0:D-NIX:5.3:*)</span>
<a href="#l1.1159"></a><span id="l1.1159" class="difflineminus">-	echo m68k-diab-dnix</span>
<a href="#l1.1160"></a><span id="l1.1160" class="difflineminus">-	exit ;;</span>
<a href="#l1.1161"></a><span id="l1.1161" class="difflineminus">-    M68*:*:R3V[5678]*:*)</span>
<a href="#l1.1162"></a><span id="l1.1162" class="difflineminus">-	test -r /sysV68 &amp;&amp; { echo 'm68k-motorola-sysv'; exit; } ;;</span>
<a href="#l1.1163"></a><span id="l1.1163" class="difflineminus">-    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)</span>
<a href="#l1.1164"></a><span id="l1.1164" class="difflineminus">-	OS_REL=''</span>
<a href="#l1.1165"></a><span id="l1.1165" class="difflineminus">-	test -r /etc/.relid \</span>
<a href="#l1.1166"></a><span id="l1.1166" class="difflineminus">-	&amp;&amp; OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' &lt; /etc/.relid`</span>
<a href="#l1.1167"></a><span id="l1.1167" class="difflineminus">-	/bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \</span>
<a href="#l1.1168"></a><span id="l1.1168" class="difflineminus">-	  &amp;&amp; { echo i486-ncr-sysv4.3${OS_REL}; exit; }</span>
<a href="#l1.1169"></a><span id="l1.1169" class="difflineminus">-	/bin/uname -p 2&gt;/dev/null | /bin/grep entium &gt;/dev/null \</span>
<a href="#l1.1170"></a><span id="l1.1170" class="difflineminus">-	  &amp;&amp; { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;</span>
<a href="#l1.1171"></a><span id="l1.1171" class="difflineminus">-    3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)</span>
<a href="#l1.1172"></a><span id="l1.1172" class="difflineminus">-	/bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \</span>
<a href="#l1.1173"></a><span id="l1.1173" class="difflineminus">-	  &amp;&amp; { echo i486-ncr-sysv4; exit; } ;;</span>
<a href="#l1.1174"></a><span id="l1.1174" class="difflineminus">-    NCR*:*:4.2:* | MPRAS*:*:4.2:*)</span>
<a href="#l1.1175"></a><span id="l1.1175" class="difflineminus">-	OS_REL='.3'</span>
<a href="#l1.1176"></a><span id="l1.1176" class="difflineminus">-	test -r /etc/.relid \</span>
<a href="#l1.1177"></a><span id="l1.1177" class="difflineminus">-	    &amp;&amp; OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' &lt; /etc/.relid`</span>
<a href="#l1.1178"></a><span id="l1.1178" class="difflineminus">-	/bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \</span>
<a href="#l1.1179"></a><span id="l1.1179" class="difflineminus">-	    &amp;&amp; { echo i486-ncr-sysv4.3${OS_REL}; exit; }</span>
<a href="#l1.1180"></a><span id="l1.1180" class="difflineminus">-	/bin/uname -p 2&gt;/dev/null | /bin/grep entium &gt;/dev/null \</span>
<a href="#l1.1181"></a><span id="l1.1181" class="difflineminus">-	    &amp;&amp; { echo i586-ncr-sysv4.3${OS_REL}; exit; }</span>
<a href="#l1.1182"></a><span id="l1.1182" class="difflineminus">-	/bin/uname -p 2&gt;/dev/null | /bin/grep pteron &gt;/dev/null \</span>
<a href="#l1.1183"></a><span id="l1.1183" class="difflineminus">-	    &amp;&amp; { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;</span>
<a href="#l1.1184"></a><span id="l1.1184" class="difflineminus">-    m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)</span>
<a href="#l1.1185"></a><span id="l1.1185" class="difflineminus">-	echo m68k-unknown-lynxos${UNAME_RELEASE}</span>
<a href="#l1.1186"></a><span id="l1.1186" class="difflineminus">-	exit ;;</span>
<a href="#l1.1187"></a><span id="l1.1187" class="difflineminus">-    mc68030:UNIX_System_V:4.*:*)</span>
<a href="#l1.1188"></a><span id="l1.1188" class="difflineminus">-	echo m68k-atari-sysv4</span>
<a href="#l1.1189"></a><span id="l1.1189" class="difflineminus">-	exit ;;</span>
<a href="#l1.1190"></a><span id="l1.1190" class="difflineminus">-    TSUNAMI:LynxOS:2.*:*)</span>
<a href="#l1.1191"></a><span id="l1.1191" class="difflineminus">-	echo sparc-unknown-lynxos${UNAME_RELEASE}</span>
<a href="#l1.1192"></a><span id="l1.1192" class="difflineminus">-	exit ;;</span>
<a href="#l1.1193"></a><span id="l1.1193" class="difflineminus">-    rs6000:LynxOS:2.*:*)</span>
<a href="#l1.1194"></a><span id="l1.1194" class="difflineminus">-	echo rs6000-unknown-lynxos${UNAME_RELEASE}</span>
<a href="#l1.1195"></a><span id="l1.1195" class="difflineminus">-	exit ;;</span>
<a href="#l1.1196"></a><span id="l1.1196" class="difflineminus">-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)</span>
<a href="#l1.1197"></a><span id="l1.1197" class="difflineminus">-	echo powerpc-unknown-lynxos${UNAME_RELEASE}</span>
<a href="#l1.1198"></a><span id="l1.1198" class="difflineminus">-	exit ;;</span>
<a href="#l1.1199"></a><span id="l1.1199" class="difflineminus">-    SM[BE]S:UNIX_SV:*:*)</span>
<a href="#l1.1200"></a><span id="l1.1200" class="difflineminus">-	echo mips-dde-sysv${UNAME_RELEASE}</span>
<a href="#l1.1201"></a><span id="l1.1201" class="difflineminus">-	exit ;;</span>
<a href="#l1.1202"></a><span id="l1.1202" class="difflineminus">-    RM*:ReliantUNIX-*:*:*)</span>
<a href="#l1.1203"></a><span id="l1.1203" class="difflineminus">-	echo mips-sni-sysv4</span>
<a href="#l1.1204"></a><span id="l1.1204" class="difflineminus">-	exit ;;</span>
<a href="#l1.1205"></a><span id="l1.1205" class="difflineminus">-    RM*:SINIX-*:*:*)</span>
<a href="#l1.1206"></a><span id="l1.1206" class="difflineminus">-	echo mips-sni-sysv4</span>
<a href="#l1.1207"></a><span id="l1.1207" class="difflineminus">-	exit ;;</span>
<a href="#l1.1208"></a><span id="l1.1208" class="difflineminus">-    *:SINIX-*:*:*)</span>
<a href="#l1.1209"></a><span id="l1.1209" class="difflineminus">-	if uname -p 2&gt;/dev/null &gt;/dev/null ; then</span>
<a href="#l1.1210"></a><span id="l1.1210" class="difflineminus">-		UNAME_MACHINE=`(uname -p) 2&gt;/dev/null`</span>
<a href="#l1.1211"></a><span id="l1.1211" class="difflineminus">-		echo ${UNAME_MACHINE}-sni-sysv4</span>
<a href="#l1.1212"></a><span id="l1.1212" class="difflineminus">-	else</span>
<a href="#l1.1213"></a><span id="l1.1213" class="difflineminus">-		echo ns32k-sni-sysv</span>
<a href="#l1.1214"></a><span id="l1.1214" class="difflineminus">-	fi</span>
<a href="#l1.1215"></a><span id="l1.1215" class="difflineminus">-	exit ;;</span>
<a href="#l1.1216"></a><span id="l1.1216" class="difflineminus">-    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort</span>
<a href="#l1.1217"></a><span id="l1.1217" class="difflineminus">-			# says &lt;Richard.M.Bartel@ccMail.Census.GOV&gt;</span>
<a href="#l1.1218"></a><span id="l1.1218" class="difflineminus">-	echo i586-unisys-sysv4</span>
<a href="#l1.1219"></a><span id="l1.1219" class="difflineminus">-	exit ;;</span>
<a href="#l1.1220"></a><span id="l1.1220" class="difflineminus">-    *:UNIX_System_V:4*:FTX*)</span>
<a href="#l1.1221"></a><span id="l1.1221" class="difflineminus">-	# From Gerald Hewes &lt;hewes@openmarket.com&gt;.</span>
<a href="#l1.1222"></a><span id="l1.1222" class="difflineminus">-	# How about differentiating between stratus architectures? -djm</span>
<a href="#l1.1223"></a><span id="l1.1223" class="difflineminus">-	echo hppa1.1-stratus-sysv4</span>
<a href="#l1.1224"></a><span id="l1.1224" class="difflineminus">-	exit ;;</span>
<a href="#l1.1225"></a><span id="l1.1225" class="difflineminus">-    *:*:*:FTX*)</span>
<a href="#l1.1226"></a><span id="l1.1226" class="difflineminus">-	# From seanf@swdc.stratus.com.</span>
<a href="#l1.1227"></a><span id="l1.1227" class="difflineminus">-	echo i860-stratus-sysv4</span>
<a href="#l1.1228"></a><span id="l1.1228" class="difflineminus">-	exit ;;</span>
<a href="#l1.1229"></a><span id="l1.1229" class="difflineminus">-    i*86:VOS:*:*)</span>
<a href="#l1.1230"></a><span id="l1.1230" class="difflineminus">-	# From Paul.Green@stratus.com.</span>
<a href="#l1.1231"></a><span id="l1.1231" class="difflineminus">-	echo ${UNAME_MACHINE}-stratus-vos</span>
<a href="#l1.1232"></a><span id="l1.1232" class="difflineminus">-	exit ;;</span>
<a href="#l1.1233"></a><span id="l1.1233" class="difflineminus">-    *:VOS:*:*)</span>
<a href="#l1.1234"></a><span id="l1.1234" class="difflineminus">-	# From Paul.Green@stratus.com.</span>
<a href="#l1.1235"></a><span id="l1.1235" class="difflineminus">-	echo hppa1.1-stratus-vos</span>
<a href="#l1.1236"></a><span id="l1.1236" class="difflineminus">-	exit ;;</span>
<a href="#l1.1237"></a><span id="l1.1237" class="difflineminus">-    mc68*:A/UX:*:*)</span>
<a href="#l1.1238"></a><span id="l1.1238" class="difflineminus">-	echo m68k-apple-aux${UNAME_RELEASE}</span>
<a href="#l1.1239"></a><span id="l1.1239" class="difflineminus">-	exit ;;</span>
<a href="#l1.1240"></a><span id="l1.1240" class="difflineminus">-    news*:NEWS-OS:6*:*)</span>
<a href="#l1.1241"></a><span id="l1.1241" class="difflineminus">-	echo mips-sony-newsos6</span>
<a href="#l1.1242"></a><span id="l1.1242" class="difflineminus">-	exit ;;</span>
<a href="#l1.1243"></a><span id="l1.1243" class="difflineminus">-    R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)</span>
<a href="#l1.1244"></a><span id="l1.1244" class="difflineminus">-	if [ -d /usr/nec ]; then</span>
<a href="#l1.1245"></a><span id="l1.1245" class="difflineminus">-		echo mips-nec-sysv${UNAME_RELEASE}</span>
<a href="#l1.1246"></a><span id="l1.1246" class="difflineminus">-	else</span>
<a href="#l1.1247"></a><span id="l1.1247" class="difflineminus">-		echo mips-unknown-sysv${UNAME_RELEASE}</span>
<a href="#l1.1248"></a><span id="l1.1248" class="difflineminus">-	fi</span>
<a href="#l1.1249"></a><span id="l1.1249" class="difflineminus">-	exit ;;</span>
<a href="#l1.1250"></a><span id="l1.1250" class="difflineminus">-    BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.</span>
<a href="#l1.1251"></a><span id="l1.1251" class="difflineminus">-	echo powerpc-be-beos</span>
<a href="#l1.1252"></a><span id="l1.1252" class="difflineminus">-	exit ;;</span>
<a href="#l1.1253"></a><span id="l1.1253" class="difflineminus">-    BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.</span>
<a href="#l1.1254"></a><span id="l1.1254" class="difflineminus">-	echo powerpc-apple-beos</span>
<a href="#l1.1255"></a><span id="l1.1255" class="difflineminus">-	exit ;;</span>
<a href="#l1.1256"></a><span id="l1.1256" class="difflineminus">-    BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.</span>
<a href="#l1.1257"></a><span id="l1.1257" class="difflineminus">-	echo i586-pc-beos</span>
<a href="#l1.1258"></a><span id="l1.1258" class="difflineminus">-	exit ;;</span>
<a href="#l1.1259"></a><span id="l1.1259" class="difflineminus">-    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.</span>
<a href="#l1.1260"></a><span id="l1.1260" class="difflineminus">-	echo i586-pc-haiku</span>
<a href="#l1.1261"></a><span id="l1.1261" class="difflineminus">-	exit ;;</span>
<a href="#l1.1262"></a><span id="l1.1262" class="difflineminus">-    x86_64:Haiku:*:*)</span>
<a href="#l1.1263"></a><span id="l1.1263" class="difflineminus">-	echo x86_64-unknown-haiku</span>
<a href="#l1.1264"></a><span id="l1.1264" class="difflineminus">-	exit ;;</span>
<a href="#l1.1265"></a><span id="l1.1265" class="difflineminus">-    SX-4:SUPER-UX:*:*)</span>
<a href="#l1.1266"></a><span id="l1.1266" class="difflineminus">-	echo sx4-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1267"></a><span id="l1.1267" class="difflineminus">-	exit ;;</span>
<a href="#l1.1268"></a><span id="l1.1268" class="difflineminus">-    SX-5:SUPER-UX:*:*)</span>
<a href="#l1.1269"></a><span id="l1.1269" class="difflineminus">-	echo sx5-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1270"></a><span id="l1.1270" class="difflineminus">-	exit ;;</span>
<a href="#l1.1271"></a><span id="l1.1271" class="difflineminus">-    SX-6:SUPER-UX:*:*)</span>
<a href="#l1.1272"></a><span id="l1.1272" class="difflineminus">-	echo sx6-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1273"></a><span id="l1.1273" class="difflineminus">-	exit ;;</span>
<a href="#l1.1274"></a><span id="l1.1274" class="difflineminus">-    SX-7:SUPER-UX:*:*)</span>
<a href="#l1.1275"></a><span id="l1.1275" class="difflineminus">-	echo sx7-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1276"></a><span id="l1.1276" class="difflineminus">-	exit ;;</span>
<a href="#l1.1277"></a><span id="l1.1277" class="difflineminus">-    SX-8:SUPER-UX:*:*)</span>
<a href="#l1.1278"></a><span id="l1.1278" class="difflineminus">-	echo sx8-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1279"></a><span id="l1.1279" class="difflineminus">-	exit ;;</span>
<a href="#l1.1280"></a><span id="l1.1280" class="difflineminus">-    SX-8R:SUPER-UX:*:*)</span>
<a href="#l1.1281"></a><span id="l1.1281" class="difflineminus">-	echo sx8r-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1282"></a><span id="l1.1282" class="difflineminus">-	exit ;;</span>
<a href="#l1.1283"></a><span id="l1.1283" class="difflineminus">-    SX-ACE:SUPER-UX:*:*)</span>
<a href="#l1.1284"></a><span id="l1.1284" class="difflineminus">-	echo sxace-nec-superux${UNAME_RELEASE}</span>
<a href="#l1.1285"></a><span id="l1.1285" class="difflineminus">-	exit ;;</span>
<a href="#l1.1286"></a><span id="l1.1286" class="difflineminus">-    Power*:Rhapsody:*:*)</span>
<a href="#l1.1287"></a><span id="l1.1287" class="difflineminus">-	echo powerpc-apple-rhapsody${UNAME_RELEASE}</span>
<a href="#l1.1288"></a><span id="l1.1288" class="difflineminus">-	exit ;;</span>
<a href="#l1.1289"></a><span id="l1.1289" class="difflineminus">-    *:Rhapsody:*:*)</span>
<a href="#l1.1290"></a><span id="l1.1290" class="difflineminus">-	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}</span>
<a href="#l1.1291"></a><span id="l1.1291" class="difflineminus">-	exit ;;</span>
<a href="#l1.1292"></a><span id="l1.1292" class="difflineminus">-    *:Darwin:*:*)</span>
<a href="#l1.1293"></a><span id="l1.1293" class="difflineminus">-	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown</span>
<a href="#l1.1294"></a><span id="l1.1294" class="difflineminus">-	eval $set_cc_for_build</span>
<a href="#l1.1295"></a><span id="l1.1295" class="difflineminus">-	if test &quot;$UNAME_PROCESSOR&quot; = unknown ; then</span>
<a href="#l1.1296"></a><span id="l1.1296" class="difflineminus">-	    UNAME_PROCESSOR=powerpc</span>
<a href="#l1.1297"></a><span id="l1.1297" class="difflineminus">-	fi</span>
<a href="#l1.1298"></a><span id="l1.1298" class="difflineminus">-	if test `echo &quot;$UNAME_RELEASE&quot; | sed -e 's/\..*//'` -le 10 ; then</span>
<a href="#l1.1299"></a><span id="l1.1299" class="difflineminus">-	    if [ &quot;$CC_FOR_BUILD&quot; != no_compiler_found ]; then</span>
<a href="#l1.1300"></a><span id="l1.1300" class="difflineminus">-		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \</span>
<a href="#l1.1301"></a><span id="l1.1301" class="difflineminus">-		    (CCOPTS= $CC_FOR_BUILD -E - 2&gt;/dev/null) | \</span>
<a href="#l1.1302"></a><span id="l1.1302" class="difflineminus">-		    grep IS_64BIT_ARCH &gt;/dev/null</span>
<a href="#l1.1303"></a><span id="l1.1303" class="difflineminus">-		then</span>
<a href="#l1.1304"></a><span id="l1.1304" class="difflineminus">-		    case $UNAME_PROCESSOR in</span>
<a href="#l1.1305"></a><span id="l1.1305" class="difflineminus">-			i386) UNAME_PROCESSOR=x86_64 ;;</span>
<a href="#l1.1306"></a><span id="l1.1306" class="difflineminus">-			powerpc) UNAME_PROCESSOR=powerpc64 ;;</span>
<a href="#l1.1307"></a><span id="l1.1307" class="difflineminus">-		    esac</span>
<a href="#l1.1308"></a><span id="l1.1308" class="difflineminus">-		fi</span>
<a href="#l1.1309"></a><span id="l1.1309" class="difflineminus">-	    fi</span>
<a href="#l1.1310"></a><span id="l1.1310" class="difflineminus">-	elif test &quot;$UNAME_PROCESSOR&quot; = i386 ; then</span>
<a href="#l1.1311"></a><span id="l1.1311" class="difflineminus">-	    # Avoid executing cc on OS X 10.9, as it ships with a stub</span>
<a href="#l1.1312"></a><span id="l1.1312" class="difflineminus">-	    # that puts up a graphical alert prompting to install</span>
<a href="#l1.1313"></a><span id="l1.1313" class="difflineminus">-	    # developer tools.  Any system running Mac OS X 10.7 or</span>
<a href="#l1.1314"></a><span id="l1.1314" class="difflineminus">-	    # later (Darwin 11 and later) is required to have a 64-bit</span>
<a href="#l1.1315"></a><span id="l1.1315" class="difflineminus">-	    # processor. This is not true of the ARM version of Darwin</span>
<a href="#l1.1316"></a><span id="l1.1316" class="difflineminus">-	    # that Apple uses in portable devices.</span>
<a href="#l1.1317"></a><span id="l1.1317" class="difflineminus">-	    UNAME_PROCESSOR=x86_64</span>
<a href="#l1.1318"></a><span id="l1.1318" class="difflineminus">-	fi</span>
<a href="#l1.1319"></a><span id="l1.1319" class="difflineminus">-	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}</span>
<a href="#l1.1320"></a><span id="l1.1320" class="difflineminus">-	exit ;;</span>
<a href="#l1.1321"></a><span id="l1.1321" class="difflineminus">-    *:procnto*:*:* | *:QNX:[0123456789]*:*)</span>
<a href="#l1.1322"></a><span id="l1.1322" class="difflineminus">-	UNAME_PROCESSOR=`uname -p`</span>
<a href="#l1.1323"></a><span id="l1.1323" class="difflineminus">-	if test &quot;$UNAME_PROCESSOR&quot; = x86; then</span>
<a href="#l1.1324"></a><span id="l1.1324" class="difflineminus">-		UNAME_PROCESSOR=i386</span>
<a href="#l1.1325"></a><span id="l1.1325" class="difflineminus">-		UNAME_MACHINE=pc</span>
<a href="#l1.1326"></a><span id="l1.1326" class="difflineminus">-	fi</span>
<a href="#l1.1327"></a><span id="l1.1327" class="difflineminus">-	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}</span>
<a href="#l1.1328"></a><span id="l1.1328" class="difflineminus">-	exit ;;</span>
<a href="#l1.1329"></a><span id="l1.1329" class="difflineminus">-    *:QNX:*:4*)</span>
<a href="#l1.1330"></a><span id="l1.1330" class="difflineminus">-	echo i386-pc-qnx</span>
<a href="#l1.1331"></a><span id="l1.1331" class="difflineminus">-	exit ;;</span>
<a href="#l1.1332"></a><span id="l1.1332" class="difflineminus">-    NEO-?:NONSTOP_KERNEL:*:*)</span>
<a href="#l1.1333"></a><span id="l1.1333" class="difflineminus">-	echo neo-tandem-nsk${UNAME_RELEASE}</span>
<a href="#l1.1334"></a><span id="l1.1334" class="difflineminus">-	exit ;;</span>
<a href="#l1.1335"></a><span id="l1.1335" class="difflineminus">-    NSE-*:NONSTOP_KERNEL:*:*)</span>
<a href="#l1.1336"></a><span id="l1.1336" class="difflineminus">-	echo nse-tandem-nsk${UNAME_RELEASE}</span>
<a href="#l1.1337"></a><span id="l1.1337" class="difflineminus">-	exit ;;</span>
<a href="#l1.1338"></a><span id="l1.1338" class="difflineminus">-    NSR-?:NONSTOP_KERNEL:*:*)</span>
<a href="#l1.1339"></a><span id="l1.1339" class="difflineminus">-	echo nsr-tandem-nsk${UNAME_RELEASE}</span>
<a href="#l1.1340"></a><span id="l1.1340" class="difflineminus">-	exit ;;</span>
<a href="#l1.1341"></a><span id="l1.1341" class="difflineminus">-    *:NonStop-UX:*:*)</span>
<a href="#l1.1342"></a><span id="l1.1342" class="difflineminus">-	echo mips-compaq-nonstopux</span>
<a href="#l1.1343"></a><span id="l1.1343" class="difflineminus">-	exit ;;</span>
<a href="#l1.1344"></a><span id="l1.1344" class="difflineminus">-    BS2000:POSIX*:*:*)</span>
<a href="#l1.1345"></a><span id="l1.1345" class="difflineminus">-	echo bs2000-siemens-sysv</span>
<a href="#l1.1346"></a><span id="l1.1346" class="difflineminus">-	exit ;;</span>
<a href="#l1.1347"></a><span id="l1.1347" class="difflineminus">-    DS/*:UNIX_System_V:*:*)</span>
<a href="#l1.1348"></a><span id="l1.1348" class="difflineminus">-	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}</span>
<a href="#l1.1349"></a><span id="l1.1349" class="difflineminus">-	exit ;;</span>
<a href="#l1.1350"></a><span id="l1.1350" class="difflineminus">-    *:Plan9:*:*)</span>
<a href="#l1.1351"></a><span id="l1.1351" class="difflineminus">-	# &quot;uname -m&quot; is not consistent, so use $cputype instead. 386</span>
<a href="#l1.1352"></a><span id="l1.1352" class="difflineminus">-	# is converted to i386 for consistency with other x86</span>
<a href="#l1.1353"></a><span id="l1.1353" class="difflineminus">-	# operating systems.</span>
<a href="#l1.1354"></a><span id="l1.1354" class="difflineminus">-	if test &quot;$cputype&quot; = 386; then</span>
<a href="#l1.1355"></a><span id="l1.1355" class="difflineminus">-	    UNAME_MACHINE=i386</span>
<a href="#l1.1356"></a><span id="l1.1356" class="difflineminus">-	else</span>
<a href="#l1.1357"></a><span id="l1.1357" class="difflineminus">-	    UNAME_MACHINE=&quot;$cputype&quot;</span>
<a href="#l1.1358"></a><span id="l1.1358" class="difflineminus">-	fi</span>
<a href="#l1.1359"></a><span id="l1.1359" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-plan9</span>
<a href="#l1.1360"></a><span id="l1.1360" class="difflineminus">-	exit ;;</span>
<a href="#l1.1361"></a><span id="l1.1361" class="difflineminus">-    *:TOPS-10:*:*)</span>
<a href="#l1.1362"></a><span id="l1.1362" class="difflineminus">-	echo pdp10-unknown-tops10</span>
<a href="#l1.1363"></a><span id="l1.1363" class="difflineminus">-	exit ;;</span>
<a href="#l1.1364"></a><span id="l1.1364" class="difflineminus">-    *:TENEX:*:*)</span>
<a href="#l1.1365"></a><span id="l1.1365" class="difflineminus">-	echo pdp10-unknown-tenex</span>
<a href="#l1.1366"></a><span id="l1.1366" class="difflineminus">-	exit ;;</span>
<a href="#l1.1367"></a><span id="l1.1367" class="difflineminus">-    KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)</span>
<a href="#l1.1368"></a><span id="l1.1368" class="difflineminus">-	echo pdp10-dec-tops20</span>
<a href="#l1.1369"></a><span id="l1.1369" class="difflineminus">-	exit ;;</span>
<a href="#l1.1370"></a><span id="l1.1370" class="difflineminus">-    XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)</span>
<a href="#l1.1371"></a><span id="l1.1371" class="difflineminus">-	echo pdp10-xkl-tops20</span>
<a href="#l1.1372"></a><span id="l1.1372" class="difflineminus">-	exit ;;</span>
<a href="#l1.1373"></a><span id="l1.1373" class="difflineminus">-    *:TOPS-20:*:*)</span>
<a href="#l1.1374"></a><span id="l1.1374" class="difflineminus">-	echo pdp10-unknown-tops20</span>
<a href="#l1.1375"></a><span id="l1.1375" class="difflineminus">-	exit ;;</span>
<a href="#l1.1376"></a><span id="l1.1376" class="difflineminus">-    *:ITS:*:*)</span>
<a href="#l1.1377"></a><span id="l1.1377" class="difflineminus">-	echo pdp10-unknown-its</span>
<a href="#l1.1378"></a><span id="l1.1378" class="difflineminus">-	exit ;;</span>
<a href="#l1.1379"></a><span id="l1.1379" class="difflineminus">-    SEI:*:*:SEIUX)</span>
<a href="#l1.1380"></a><span id="l1.1380" class="difflineminus">-	echo mips-sei-seiux${UNAME_RELEASE}</span>
<a href="#l1.1381"></a><span id="l1.1381" class="difflineminus">-	exit ;;</span>
<a href="#l1.1382"></a><span id="l1.1382" class="difflineminus">-    *:DragonFly:*:*)</span>
<a href="#l1.1383"></a><span id="l1.1383" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`</span>
<a href="#l1.1384"></a><span id="l1.1384" class="difflineminus">-	exit ;;</span>
<a href="#l1.1385"></a><span id="l1.1385" class="difflineminus">-    *:*VMS:*:*)</span>
<a href="#l1.1386"></a><span id="l1.1386" class="difflineminus">-	UNAME_MACHINE=`(uname -p) 2&gt;/dev/null`</span>
<a href="#l1.1387"></a><span id="l1.1387" class="difflineminus">-	case &quot;${UNAME_MACHINE}&quot; in</span>
<a href="#l1.1388"></a><span id="l1.1388" class="difflineminus">-	    A*) echo alpha-dec-vms ; exit ;;</span>
<a href="#l1.1389"></a><span id="l1.1389" class="difflineminus">-	    I*) echo ia64-dec-vms ; exit ;;</span>
<a href="#l1.1390"></a><span id="l1.1390" class="difflineminus">-	    V*) echo vax-dec-vms ; exit ;;</span>
<a href="#l1.1391"></a><span id="l1.1391" class="difflineminus">-	esac ;;</span>
<a href="#l1.1392"></a><span id="l1.1392" class="difflineminus">-    *:XENIX:*:SysV)</span>
<a href="#l1.1393"></a><span id="l1.1393" class="difflineminus">-	echo i386-pc-xenix</span>
<a href="#l1.1394"></a><span id="l1.1394" class="difflineminus">-	exit ;;</span>
<a href="#l1.1395"></a><span id="l1.1395" class="difflineminus">-    i*86:skyos:*:*)</span>
<a href="#l1.1396"></a><span id="l1.1396" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'</span>
<a href="#l1.1397"></a><span id="l1.1397" class="difflineminus">-	exit ;;</span>
<a href="#l1.1398"></a><span id="l1.1398" class="difflineminus">-    i*86:rdos:*:*)</span>
<a href="#l1.1399"></a><span id="l1.1399" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-rdos</span>
<a href="#l1.1400"></a><span id="l1.1400" class="difflineminus">-	exit ;;</span>
<a href="#l1.1401"></a><span id="l1.1401" class="difflineminus">-    i*86:AROS:*:*)</span>
<a href="#l1.1402"></a><span id="l1.1402" class="difflineminus">-	echo ${UNAME_MACHINE}-pc-aros</span>
<a href="#l1.1403"></a><span id="l1.1403" class="difflineminus">-	exit ;;</span>
<a href="#l1.1404"></a><span id="l1.1404" class="difflineminus">-    x86_64:VMkernel:*:*)</span>
<a href="#l1.1405"></a><span id="l1.1405" class="difflineminus">-	echo ${UNAME_MACHINE}-unknown-esx</span>
<a href="#l1.1406"></a><span id="l1.1406" class="difflineminus">-	exit ;;</span>
<a href="#l1.1407"></a><span id="l1.1407" class="difflineminus">-    amd64:Isilon\ OneFS:*:*)</span>
<a href="#l1.1408"></a><span id="l1.1408" class="difflineminus">-	echo x86_64-unknown-onefs</span>
<a href="#l1.1409"></a><span id="l1.1409" class="difflineminus">-	exit ;;</span>
<a href="#l1.1410"></a><span id="l1.1410" class="difflineminus">-esac</span>
<a href="#l1.1411"></a><span id="l1.1411" class="difflineminus">-</span>
<a href="#l1.1412"></a><span id="l1.1412" class="difflineminus">-cat &gt;&amp;2 &lt;&lt;EOF</span>
<a href="#l1.1413"></a><span id="l1.1413" class="difflineminus">-$0: unable to guess system type</span>
<a href="#l1.1414"></a><span id="l1.1414" class="difflineminus">-</span>
<a href="#l1.1415"></a><span id="l1.1415" class="difflineminus">-This script, last modified $timestamp, has failed to recognize</span>
<a href="#l1.1416"></a><span id="l1.1416" class="difflineminus">-the operating system you are using. It is advised that you</span>
<a href="#l1.1417"></a><span id="l1.1417" class="difflineminus">-download the most up to date version of the config scripts from</span>
<a href="#l1.1418"></a><span id="l1.1418" class="difflineminus">-</span>
<a href="#l1.1419"></a><span id="l1.1419" class="difflineminus">-  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess</span>
<a href="#l1.1420"></a><span id="l1.1420" class="difflineminus">-and</span>
<a href="#l1.1421"></a><span id="l1.1421" class="difflineminus">-  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub</span>
<a href="#l1.1422"></a><span id="l1.1422" class="difflineminus">-</span>
<a href="#l1.1423"></a><span id="l1.1423" class="difflineminus">-If the version you run ($0) is already up to date, please</span>
<a href="#l1.1424"></a><span id="l1.1424" class="difflineminus">-send the following data and any information you think might be</span>
<a href="#l1.1425"></a><span id="l1.1425" class="difflineminus">-pertinent to &lt;config-patches@gnu.org&gt; in order to provide the needed</span>
<a href="#l1.1426"></a><span id="l1.1426" class="difflineminus">-information to handle your system.</span>
<a href="#l1.1427"></a><span id="l1.1427" class="difflineminus">-</span>
<a href="#l1.1428"></a><span id="l1.1428" class="difflineminus">-config.guess timestamp = $timestamp</span>
<a href="#l1.1429"></a><span id="l1.1429" class="difflineminus">-</span>
<a href="#l1.1430"></a><span id="l1.1430" class="difflineminus">-uname -m = `(uname -m) 2&gt;/dev/null || echo unknown`</span>
<a href="#l1.1431"></a><span id="l1.1431" class="difflineminus">-uname -r = `(uname -r) 2&gt;/dev/null || echo unknown`</span>
<a href="#l1.1432"></a><span id="l1.1432" class="difflineminus">-uname -s = `(uname -s) 2&gt;/dev/null || echo unknown`</span>
<a href="#l1.1433"></a><span id="l1.1433" class="difflineminus">-uname -v = `(uname -v) 2&gt;/dev/null || echo unknown`</span>
<a href="#l1.1434"></a><span id="l1.1434" class="difflineminus">-</span>
<a href="#l1.1435"></a><span id="l1.1435" class="difflineminus">-/usr/bin/uname -p = `(/usr/bin/uname -p) 2&gt;/dev/null`</span>
<a href="#l1.1436"></a><span id="l1.1436" class="difflineminus">-/bin/uname -X     = `(/bin/uname -X) 2&gt;/dev/null`</span>
<a href="#l1.1437"></a><span id="l1.1437" class="difflineminus">-</span>
<a href="#l1.1438"></a><span id="l1.1438" class="difflineminus">-hostinfo               = `(hostinfo) 2&gt;/dev/null`</span>
<a href="#l1.1439"></a><span id="l1.1439" class="difflineminus">-/bin/universe          = `(/bin/universe) 2&gt;/dev/null`</span>
<a href="#l1.1440"></a><span id="l1.1440" class="difflineminus">-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2&gt;/dev/null`</span>
<a href="#l1.1441"></a><span id="l1.1441" class="difflineminus">-/bin/arch              = `(/bin/arch) 2&gt;/dev/null`</span>
<a href="#l1.1442"></a><span id="l1.1442" class="difflineminus">-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2&gt;/dev/null`</span>
<a href="#l1.1443"></a><span id="l1.1443" class="difflineminus">-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2&gt;/dev/null`</span>
<a href="#l1.1444"></a><span id="l1.1444" class="difflineminus">-</span>
<a href="#l1.1445"></a><span id="l1.1445" class="difflineminus">-UNAME_MACHINE = ${UNAME_MACHINE}</span>
<a href="#l1.1446"></a><span id="l1.1446" class="difflineminus">-UNAME_RELEASE = ${UNAME_RELEASE}</span>
<a href="#l1.1447"></a><span id="l1.1447" class="difflineminus">-UNAME_SYSTEM  = ${UNAME_SYSTEM}</span>
<a href="#l1.1448"></a><span id="l1.1448" class="difflineminus">-UNAME_VERSION = ${UNAME_VERSION}</span>
<a href="#l1.1449"></a><span id="l1.1449" class="difflineminus">-EOF</span>
<a href="#l1.1450"></a><span id="l1.1450" class="difflineminus">-</span>
<a href="#l1.1451"></a><span id="l1.1451" class="difflineminus">-exit 1</span>
<a href="#l1.1452"></a><span id="l1.1452" class="difflineminus">-</span>
<a href="#l1.1453"></a><span id="l1.1453" class="difflineminus">-# Local variables:</span>
<a href="#l1.1454"></a><span id="l1.1454" class="difflineminus">-# eval: (add-hook 'write-file-hooks 'time-stamp)</span>
<a href="#l1.1455"></a><span id="l1.1455" class="difflineminus">-# time-stamp-start: &quot;timestamp='&quot;</span>
<a href="#l1.1456"></a><span id="l1.1456" class="difflineminus">-# time-stamp-format: &quot;%:y-%02m-%02d&quot;</span>
<a href="#l1.1457"></a><span id="l1.1457" class="difflineminus">-# time-stamp-end: &quot;'&quot;</span>
<a href="#l1.1458"></a><span id="l1.1458" class="difflineminus">-# End:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">deleted file mode 100755</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- a/build/autoconf/mozconfig-find</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ /dev/null</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -1,76 +0,0 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineminus">-#! /bin/sh</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineminus">-#</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineminus">-</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-# mozconfigfind - Loads options from .mozconfig onto configure's</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-#    command-line. The .mozconfig file is searched for in the </span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-#    order:</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-#       If $MOZCONFIG is set, use that.</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-#       If one of $TOPSRCDIR/.mozconfig or $TOPSRCDIR/mozconfig exists, use it.</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-#       If both exist, or if various legacy locations contain a mozconfig, error.</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-#       Otherwise, use the default build options.</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-#</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-topsrcdir=$1</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">-abspath() {</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-  if uname -s | grep -q MINGW; then</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-    # We have no way to figure out whether we're in gmake or pymake right</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineminus">-    # now. gmake gives us Unix-style paths while pymake gives us Windows-style</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineminus">-    # paths, so attempt to handle both.</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-    regexes='^\([A-Za-z]:\|\\\\\|\/\) ^\/'</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-  else</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-    regexes='^\/'</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-  fi</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-  for regex in $regexes; do</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-    if echo $1 | grep -q $regex; then</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-      echo $1</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-      return</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-    fi</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-  done</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-  # If we're at this point, we have a relative path</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-  echo `pwd`/$1</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-}</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineminus">-if [ -n &quot;$MOZCONFIG&quot; ] &amp;&amp; ! [ -f &quot;$MOZCONFIG&quot; ]; then</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineminus">-  echo &quot;Specified MOZCONFIG \&quot;$MOZCONFIG\&quot; does not exist!&quot; 1&gt;&amp;2</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineminus">-  exit 1</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineminus">-fi</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-if [ -n &quot;$MOZ_MYCONFIG&quot; ]; then</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-  echo &quot;Your environment currently has the MOZ_MYCONFIG variable set to \&quot;$MOZ_MYCONFIG\&quot;. MOZ_MYCONFIG is no longer supported. Please use MOZCONFIG instead.&quot; 1&gt;&amp;2</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-  exit 1</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-fi</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-if [ -z &quot;$MOZCONFIG&quot; ] &amp;&amp; [ -f &quot;$topsrcdir/.mozconfig&quot; ] &amp;&amp; [ -f &quot;$topsrcdir/mozconfig&quot; ]; then</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-  echo &quot;Both \$topsrcdir/.mozconfig and \$topsrcdir/mozconfig are supported, but you must choose only one. Please remove the other.&quot; 1&gt;&amp;2</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineminus">-  exit 1</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineminus">-fi</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineminus">-</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineminus">-for _config in &quot;$MOZCONFIG&quot; \</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineminus">-               &quot;$topsrcdir/.mozconfig&quot; \</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineminus">-               &quot;$topsrcdir/mozconfig&quot;</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-do</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-  if test -f &quot;$_config&quot;; then</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-    abspath $_config</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-    exit 0</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-  fi</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-done</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineminus">-# We used to support a number of other implicit .mozconfig locations. We now</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-# detect if we were about to use any of these locations and issue an error if we</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-# find any.</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-for _config in &quot;$topsrcdir/mozconfig.sh&quot; \</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-               &quot;$topsrcdir/myconfig.sh&quot; \</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineminus">-               &quot;$HOME/.mozconfig&quot; \</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineminus">-               &quot;$HOME/.mozconfig.sh&quot; \</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineminus">-               &quot;$HOME/.mozmyconfig.sh&quot;</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineminus">-do</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-  if test -f &quot;$_config&quot;; then</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-    echo &quot;You currently have a mozconfig at \&quot;$_config\&quot;. This implicit location is no longer supported. Please move it to $topsrcdir/.mozconfig or specify it explicitly via \$MOZCONFIG.&quot; 1&gt;&amp;2</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineminus">-    exit 1</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineminus">-  fi</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineminus">-done</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">deleted file mode 100755</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- a/build/autoconf/mozconfig2client-mk</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ /dev/null</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -1,76 +0,0 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineminus">-#! /bin/sh</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineminus">-#</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineminus">-</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineminus">-# mozconfig2client-mk - Translates .mozconfig into options for client.mk.</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-#    Prints defines to stdout.</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-#</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-# See mozconfig2configure for more details</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-print_header() {</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-  cat &lt;&lt;EOF</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-# gmake</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-# This file is automatically generated for client.mk.</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-# Do not edit. Edit $FOUND_MOZCONFIG instead.</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-EOF</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-}</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-ac_add_options() {</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-  for _opt</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineminus">-  do</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineminus">-    case &quot;$_opt&quot; in</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineminus">-    --target=*)</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-      echo $_opt | sed s/--target/CONFIG_GUESS/</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-      ;;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-    *)</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-      echo &quot;# $_opt is used by configure (not client.mk)&quot;</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-      ;;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-    esac</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-  done</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-}</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-ac_add_app_options() {</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-  echo &quot;# $* is used by configure (not client.mk)&quot;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-}</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-mk_add_options() {</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-  for _opt</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-  do</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-    # Escape shell characters, space, tab, dollar, quote, backslash,</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-    # and substitute '@&lt;word&gt;@' with '$(&lt;word&gt;)'.</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-    _opt=`echo &quot;$_opt&quot; | sed -e 's/\([\&quot;\\]\)/\\\\\1/g; s/@\([^@]*\)@/\$(\1)/g;'`</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-    echo $_opt;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-  done</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-}</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-# Main</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-#--------------------------------------------------</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineminus">-</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineminus">-scriptdir=`dirname $0`</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineminus">-topsrcdir=$1</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineminus">-# If the path changes, configure should be rerun</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineminus">-echo &quot;# PATH=$PATH&quot;</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineminus">-</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-# If FOUND_MOZCONFIG isn't set, look for it and make sure the script doesn't error out</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-isfoundset=${FOUND_MOZCONFIG+yes}</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-if [ -z $isfoundset ]; then</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineminus">-  FOUND_MOZCONFIG=`$scriptdir/mozconfig-find $topsrcdir`</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-  if [ $? -ne 0 ]; then</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-    echo '$(error Fix above errors before continuing.)'</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-  else</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-    isfoundset=yes</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineminus">-  fi</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-fi</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineminus">-</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineminus">-if [ -n $isfoundset ]; then</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineminus">-  if [ &quot;$FOUND_MOZCONFIG&quot; ]</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineminus">-  then</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-    print_header</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineminus">-    . &quot;$FOUND_MOZCONFIG&quot;</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineminus">-    echo &quot;FOUND_MOZCONFIG := $FOUND_MOZCONFIG&quot;</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-  fi</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineminus">-fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/build/client.py-args</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,1 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">---hg-options='--time' --hgtool=../tools/buildfarm/utils/hgtool.py --hgtool1=../scripts/buildfarm/utils/hgtool.py --skip-chatzilla --skip-comm --skip-inspector --tinderbox-print</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/build/client.py-l10n-args</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,1 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">---hg-options='--time' --hgtool=../tools/buildfarm/utils/hgtool.py --hgtool1=../scripts/buildfarm/utils/hgtool.py --skip-chatzilla --skip-comm --skip-inspector --tinderbox-print</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/build/dumbmake-dependencies</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,6 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-im/app</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">-    chat</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">-    im</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-    mozilla/extensions/purple</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-chat</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-    im</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/build/mach_bootstrap.py</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,25 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-from __future__ import unicode_literals</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-import os, sys</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-def bootstrap(topsrcdir, mozilla_dir=None):</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-    if mozilla_dir is None:</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-        mozilla_dir = os.path.join(topsrcdir, 'mozilla')</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-    if not os.path.exists(mozilla_dir):</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-        # If we can't find `mozilla` as a subdirectory of the `comm` checkout,</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-        # assume that we are a subdirectory of a mozilla checkout. If we return</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-        # `None` here, the `mach` entrypoint will keep searching for a build</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">-        # directory.  Since the entry point imports this into `sys.modules`,</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-        # clean it up, since we aren't the `mach_bootstrap` that `mach` is</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-        # looking for.</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-        del sys.modules[__name__]</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">-        return None</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineminus">-</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">-    sys.path[0:0] = [mozilla_dir]</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">-    import build.mach_bootstrap</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">-    return build.mach_bootstrap.bootstrap(topsrcdir, mozilla_dir)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/build/macosx/cross-mozconfig.common</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,2 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-echo &quot;cross-building with comm-central as top dir not supported&quot;</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-exit 1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/build/macosx/local-mozconfig.common</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,61 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-if [ &quot;x$IS_NIGHTLY&quot; = &quot;xyes&quot; ]; then</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">-  # Some nightlies (eg: Mulet) don't want these set.</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">-  MOZ_AUTOMATION_UPDATE_PACKAGING=${MOZ_AUTOMATION_UPDATE_PACKAGING-1}</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-fi</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-. &quot;$topsrcdir/build/mozconfig.common&quot;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-if [ -d $TOOLTOOL_DIR/clang ]; then</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-    true</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-elif [ -d &quot;$topsrcdir/clang&quot; ]; then</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-    # mozilla-central based build</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-    TOOLTOOL_DIR=$topsrcdir</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">-elif [ -d &quot;$topsrcdir/../clang&quot; ]; then</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-    TOOLTOOL_DIR=$topsrcdir/..</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-else</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-    echo &quot;Don't know where we are; can't find clang. topsrcdir: $topsrcdir&quot;</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-fi</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-if [ -d $TOOLTOOL_DIR/MacOSX10.10.sdk ]; then</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineminus">-    export CROSS_SYSROOT=$TOOLTOOL_DIR/MacOSX10.10.sdk</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">-    CROSS_PRIVATE_FRAMEWORKS=$CROSS_SYSROOT/System/Library/PrivateFrameworks</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineminus">-    FLAGS=&quot;-isysroot $CROSS_SYSROOT&quot;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-    ldflags=&quot;-Wl,-syslibroot,$CROSS_SYSROOT &quot;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-    export BINDGEN_CFLAGS=&quot;$FLAGS&quot;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-    ac_add_options --with-macos-private-frameworks=$CROSS_PRIVATE_FRAMEWORKS</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-    # Since we are manually providing an SDK, don't check for xcode being installed.</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">-    # See https://bugzilla.mozilla.org/show_bug.cgi?id=1366564</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineminus">-    ac_add_options --disable-xcode-checks</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">-else</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-    FLAGS=&quot;&quot;</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">-fi</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">-</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineminus">-if [ -d $TOOLTOOL_DIR ]; then</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-    export CC=&quot;$TOOLTOOL_DIR/clang/bin/clang $FLAGS&quot;</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-    export CXX=&quot;$TOOLTOOL_DIR/clang/bin/clang++ $FLAGS&quot;</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-    export CPP=&quot;$TOOLTOOL_DIR/clang/bin/clang $FLAGS -E&quot;</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-    export LLVMCONFIG=$TOOLTOOL_DIR/clang/bin/llvm-config</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-    export DSYMUTIL=$TOOLTOOL_DIR/clang/bin/llvm-dsymutil</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">-    # Use an updated linker.</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">-    ldflags=&quot;$ldflags -B$TOOLTOOL_DIR/cctools/bin &quot;</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">-    export AR=$TOOLTOOL_DIR/cctools/bin/ar</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">-    export RANLIB=$TOOLTOOL_DIR/cctools/bin/ranlib</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-fi</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineminus">-</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-# Ensure the updated linker doesn't generate things our older build tools</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-# don't understand.</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-ldflags=&quot;$ldflags -Wl,-no_data_in_code_info&quot;</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-export LDFLAGS=&quot;$ldflags&quot;</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-# If not set use the system default clang</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-if [ -z &quot;$CC&quot; ]; then</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-    export CC=clang</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-fi</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-# If not set use the system default clang++</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-if [ -z &quot;$CXX&quot; ]; then</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-    export CXX=clang++</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">deleted file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- a/build/macosx/mozconfig.common</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ /dev/null</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -1,7 +0,0 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineminus">-if test `uname -s` = Linux; then</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">-  . $topsrcdir/build/macosx/cross-mozconfig.common</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">-else</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-  . $topsrcdir/build/macosx/local-mozconfig.common</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-fi</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineminus">-. $topsrcdir/build/mozconfig.stylo</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/build/merge-installrdf.py</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,24 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-#!/usr/bin/python</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-# Get the target platform from a set of install.rdf files, and</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-# return the first install.rdf with the platform replaced by the list of </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-# platforms as parsed from all the files</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-# Allows to create a install.rdf for multiple platforms</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-import sys</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-from xml.dom.minidom import parse</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-elems = []</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-for arg in sys.argv[2:]:</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-	doc = parse(arg + &quot;/install.rdf&quot;)</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-	elem = doc.getElementsByTagName(&quot;em:targetPlatform&quot;)[0]</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-	elems.append(elem.cloneNode(True))</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineminus">-</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-doc = parse(sys.argv[1] + &quot;/install.rdf&quot;)</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-elem = doc.getElementsByTagName(&quot;em:targetPlatform&quot;)[0]</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-for newelem in elems:</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineminus">-	elem.parentNode.insertBefore(newelem, elem)</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-print doc.toxml()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">deleted file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- a/build/mozconfig.automation</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ /dev/null</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -1,21 +0,0 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineminus">-</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineminus">-# Common mozconfig for automation builds.</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-#</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-# We export MOZ_AUTOMATION_* variables here to trigger various steps in</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-# automation builds.  For example, if MOZ_AUTOMATION_PACKAGE is set, then the</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-# package step will run.  This file contains the default settings, which can be</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-# overridden by setting them earlier in the appropriate mozconfig.</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_BUILD_SYMBOLS=${MOZ_AUTOMATION_BUILD_SYMBOLS-1}&quot;</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_L10N_CHECK=${MOZ_AUTOMATION_L10N_CHECK-1}&quot;</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_PACKAGE=${MOZ_AUTOMATION_PACKAGE-1}&quot;</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_PACKAGE_TESTS=${MOZ_AUTOMATION_PACKAGE_TESTS-1}&quot;</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_INSTALLER=${MOZ_AUTOMATION_INSTALLER-0}&quot;</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_UPDATE_PACKAGING=${MOZ_AUTOMATION_UPDATE_PACKAGING-0}&quot;</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_PACKAGE_GENERATED_SOURCES=${MOZ_AUTOMATION_PACKAGE_GENERATED_SOURCES-1}&quot;</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-mk_add_options &quot;export MOZ_AUTOMATION_UPLOAD=${MOZ_AUTOMATION_UPLOAD-1}&quot;</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-export MOZ_AUTOMATION_MOZCONFIG=1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/build/mozconfig.cache</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,18 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-# Setup for build cache</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-#</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-# If we're here, we are on buildbot, so just use ccache locally.</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-if test -z &quot;$NO_CACHE&quot;; then</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-    # if we're on windows, disable ccache</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-    case &quot;${SYSTEMROOT}&quot; in</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-    *Windows)</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-        ;;</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-    *)</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-        export CCACHE=ccache</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-        ;;</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">-    esac</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">deleted file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- a/build/mozconfig.comm-support</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ /dev/null</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -1,22 +0,0 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">-# This file exists to support comm-central from building with mozilla-central</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">-# as a subdirectory to building as a subdirectory of mozilla-central.</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">-</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">-# In order to have mozconfig files that support building in either</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-# configuration during the transition, without duplicating the logic</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineminus">-# in every mozconfig file, there needs to exist a file that exists at the</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineminus">-# same path in mozilla-central and comm-central.</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-# This file sets some variables that can be used by the rest of the mozconfig</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-# to find other include files.</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-if [ -d &quot;$topsrcdir/mail&quot; ]; then</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineminus">-  # Building with comm-central as top-level directory.</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-  commtopsrcdir=$topsrcdir</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineminus">-  MOZ_IS_COMM_TOPDIR=1</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-elif [ -d &quot;$topsrcdir/comm/mail&quot; ]; then</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-  # Building with mozila-central as top-level directory.</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-  commtopsrcdir=$topsrcdir/comm</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineminus">-else</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-  echo &quot;ERROR: Unknown build directory layout.&quot;</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-  exit 1</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineminus">-fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/build/mozconfig.common</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,24 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-# Common mozconfig for official builds.</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-#</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">-# Add options to this file that will be inherited by all in-tree mozconfigs.</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-# This is useful for eg try builds with nondefault options that apply to all</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-# architectures, though note that if you want to override options set in</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-# another mozconfig file, you'll need to use mozconfig.common.override instead</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-# of this file.</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-mk_add_options AUTOCLOBBER=1</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-ac_add_options --enable-crashreporter</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-# Disable enforcing that add-ons are signed by the trusted root</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-MOZ_REQUIRE_SIGNING=${MOZ_REQUIRE_SIGNING-0}</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">-ac_add_options --enable-js-shell</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineminus">-. &quot;$topsrcdir/build/mozconfig.automation&quot;</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineminus">-. &quot;$topsrcdir/build/mozconfig.rust&quot;</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineminus">-. &quot;$topsrcdir/build/mozconfig.cache&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/build/mozconfig.no-compile</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,23 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-ac_add_options --disable-compile-environment</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">-# In case mozconfig.cache was already included</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-unset CCACHE</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-unset SCCACHE_VERBOSE_STATS</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-# In case it wasn't</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-NO_CACHE=1</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-# Override any toolchain defines we've inherited from other mozconfigs.</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-unset CC</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-unset CXX</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-unset HOST_CC</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-unset HOST_CXX</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-unset RUSTC</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-unset CARGO</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-unset MAKECAB</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-unset TOOLCHAIN_PREFIX</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-unset BINDGEN_CFLAGS</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-unset LLVM_CONFIG</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-unset WIN64_LINK</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-unset WIN64_LIB</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-unset MOZ_STDCXX_COMPAT</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/build/mozconfig.rust</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,9 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-# Options to enable rust in automation builds.</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">-</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">-TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">-</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">-# Tell configure to use the tooltool rustc.</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-RUSTC=&quot;$TOOLTOOL_DIR/rustc/bin/rustc&quot;</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-CARGO=&quot;$TOOLTOOL_DIR/rustc/bin/cargo&quot;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-ac_add_options --enable-rust-simd</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/build/mozconfig.sccache</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/build/mozconfig.sccache</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -1,12 +1,14 @@</span>
<a href="#l18.4"></a><span id="l18.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.5"></a><span id="l18.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.6"></a><span id="l18.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+# Used in mail/config/mozconfigs by various mozconfigs.</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineplus">+</span>
<a href="#l18.10"></a><span id="l18.10"> # Setup for build cache</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12"> # Avoid duplication if the file happens to be included twice.</span>
<a href="#l18.13"></a><span id="l18.13"> if test -z &quot;$NO_CACHE&quot; -a -z &quot;$SCCACHE_DISABLE&quot;; then</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15"> # ${region} is set by m-c's build/mozconfig.cache</span>
<a href="#l18.16"></a><span id="l18.16"> if test -n &quot;$region&quot;; then</span>
<a href="#l18.17"></a><span id="l18.17">     # set S3 bucket according to tree (level)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">deleted file mode 100644</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineminus">--- a/build/mozconfig.stylo</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineplus">+++ /dev/null</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineat">@@ -1,2 +0,0 @@</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">-# Tell the build system where to find llvm-config for builds on automation.</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">-export LLVM_CONFIG=&quot;${TOOLTOOL_DIR:-$topsrcdir}/clang/bin/llvm-config&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/build/mozconfig.vs-common</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,4 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-# Pymake needs Windows-style paths. Use cmd.exe to hack around this.</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">-mk_export_correct_style() {</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">-  mk_add_options &quot;export $1=$(cmd.exe //c echo %$1%)&quot;</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">deleted file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- a/build/mozconfig.win-common</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ /dev/null</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -1,15 +0,0 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineminus">-</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">-if [ &quot;x$IS_NIGHTLY&quot; = &quot;xyes&quot; ]; then</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineminus">-  # Some nightlies (eg: Mulet) don't want these set.</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">-  MOZ_AUTOMATION_UPDATE_PACKAGING=${MOZ_AUTOMATION_UPDATE_PACKAGING-1}</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-fi</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-# Some builds (eg: Mulet) don't want the installer, so only set this if it</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-# hasn't already been set.</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-MOZ_AUTOMATION_INSTALLER=${MOZ_AUTOMATION_INSTALLER-1}</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-export MAKECAB=$TOOLTOOL_DIR/makecab.exe</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">deleted file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineminus">--- a/build/pymake/make.py</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineplus">+++ /dev/null</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineat">@@ -1,48 +0,0 @@</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l22.9"></a><span id="l22.9" class="difflineminus">-</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineminus">-# This is a wrapper around mozilla-central's pymake. If that isn't found then</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineminus">-# this uses client.py to pull it in.</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-import os</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-import sys</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-import subprocess</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-import shlex</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineminus">-</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineminus">-def getpath(relpath):</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineminus">-    thisdir = os.path.dirname(__file__)</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineminus">-    return os.path.abspath(os.path.join(thisdir, *relpath))</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineminus">-</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineminus">-PYMAKE = getpath([&quot;..&quot;, &quot;..&quot;, &quot;mozilla&quot;, &quot;build&quot;, &quot;pymake&quot;, &quot;make.py&quot;])</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineminus">-CLIENT_PY = getpath([&quot;..&quot;, &quot;..&quot;, &quot;client.py&quot;])</span>
<a href="#l22.24"></a><span id="l22.24" class="difflineminus">-CLIENT_PY_ARGS = getpath([&quot;..&quot;, &quot;client.py-args&quot;])</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineminus">-</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineminus">-def main(args):</span>
<a href="#l22.27"></a><span id="l22.27" class="difflineminus">-    if 'TINDERBOX_OUTPUT' in os.environ:</span>
<a href="#l22.28"></a><span id="l22.28" class="difflineminus">-        # When building on mozilla build slaves, execute mozmake instead. Until bug</span>
<a href="#l22.29"></a><span id="l22.29" class="difflineminus">-        # 978211, this is the easiest, albeit hackish, way to do this.</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineminus">-        mozmake = os.path.join(os.path.dirname(__file__), '..', '..',</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-            'mozmake.exe')</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineminus">-        if os.path.exists(mozmake):</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineminus">-            cmd = [mozmake]</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">-            cmd.extend(sys.argv[1:])</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineminus">-            shell = os.environ.get('SHELL')</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineminus">-            if shell and not shell.lower().endswith('.exe'):</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineminus">-                cmd += ['SHELL=%s.exe' % shell]</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineminus">-            sys.exit(subprocess.call(cmd))</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineminus">-</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineminus">-    if not os.path.exists(PYMAKE):</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineminus">-        clientpyargs = open(CLIENT_PY_ARGS, &quot;r&quot;).read().strip()</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineminus">-        clientpyargs = shlex.split(clientpyargs)</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineminus">-        subprocess.check_call([sys.executable, CLIENT_PY, &quot;checkout&quot;] +</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineminus">-                              clientpyargs)</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineminus">-</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineminus">-        if not os.path.exists(PYMAKE):</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineminus">-            raise Exception(&quot;Pymake not found even after client.py was run&quot;)</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineminus">-</span>
<a href="#l22.49"></a><span id="l22.49" class="difflineminus">-    subprocess.check_call([sys.executable, PYMAKE] + args)</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineminus">-</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineminus">-if __name__ == &quot;__main__&quot;:</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineminus">-    main(sys.argv[1:])</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">deleted file mode 100644</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineminus">--- a/build/pypng/exnumpy.py</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineplus">+++ /dev/null</span>
<a href="#l23.4"></a><span id="l23.4" class="difflineat">@@ -1,128 +0,0 @@</span>
<a href="#l23.5"></a><span id="l23.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l23.6"></a><span id="l23.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/exnumpy.py $</span>
<a href="#l23.7"></a><span id="l23.7" class="difflineminus">-# $Rev: 126 $</span>
<a href="#l23.8"></a><span id="l23.8" class="difflineminus">-</span>
<a href="#l23.9"></a><span id="l23.9" class="difflineminus">-# Numpy example.</span>
<a href="#l23.10"></a><span id="l23.10" class="difflineminus">-# Original code created by Mel Raab, modified by David Jones.</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineminus">-</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-'''</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-  Example code integrating RGB PNG files, PyPNG and NumPy</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineminus">-  (abstracted from Mel Raab's functioning code)</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineminus">-'''</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineminus">-# http://www.python.org/doc/2.4.4/lib/module-itertools.html</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineminus">-import itertools</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineminus">-</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineminus">-import numpy</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineminus">-import png</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineminus">-</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineminus">-</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-''' If you have a PNG file for an RGB image,</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-    and want to create a numpy array of data from it.</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-'''</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineminus">-# Read the file &quot;picture.png&quot; from the current directory.  The `Reader`</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineminus">-# class can take a filename, a file-like object, or the byte data</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineminus">-# directly; this suggests alternatives such as using urllib to read</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineminus">-# an image from the internet:</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-# png.Reader(file=urllib.urlopen('http://www.libpng.org/pub/png/PngSuite/basn2c16.png'))</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineminus">-pngReader=png.Reader(filename='picture.png')</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineminus">-# Tuple unpacking, using multiple assignment, is very useful for the</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineminus">-# result of asDirect (and other methods).</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineminus">-# See</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineminus">-# http://docs.python.org/tutorial/introduction.html#first-steps-towards-programming</span>
<a href="#l23.37"></a><span id="l23.37" class="difflineminus">-row_count, column_count, pngdata, meta = pngReader.asDirect()</span>
<a href="#l23.38"></a><span id="l23.38" class="difflineminus">-bitdepth=meta['bitdepth']</span>
<a href="#l23.39"></a><span id="l23.39" class="difflineminus">-plane_count=meta['planes']</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineminus">-</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineminus">-# Make sure we're dealing with RGB files</span>
<a href="#l23.42"></a><span id="l23.42" class="difflineminus">-assert plane_count == 3</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineminus">-</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineminus">-''' Boxed row flat pixel:</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineminus">-      list([R,G,B, R,G,B, R,G,B],</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineminus">-           [R,G,B, R,G,B, R,G,B])</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineminus">-    Array dimensions for this example:  (2,9)</span>
<a href="#l23.48"></a><span id="l23.48" class="difflineminus">-</span>
<a href="#l23.49"></a><span id="l23.49" class="difflineminus">-    Create `image_2d` as a two-dimensional NumPy array by stacking a</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineminus">-    sequence of 1-dimensional arrays (rows).</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineminus">-    The NumPy array mimics PyPNG's (boxed row flat pixel) representation;</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineminus">-    it will have dimensions ``(row_count,column_count*plane_count)``.</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineminus">-'''</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineminus">-# The use of ``numpy.uint16``, below, is to convert each row to a NumPy</span>
<a href="#l23.55"></a><span id="l23.55" class="difflineminus">-# array with data type ``numpy.uint16``.  This is a feature of NumPy,</span>
<a href="#l23.56"></a><span id="l23.56" class="difflineminus">-# discussed further in </span>
<a href="#l23.57"></a><span id="l23.57" class="difflineminus">-# http://docs.scipy.org/doc/numpy/user/basics.types.html .</span>
<a href="#l23.58"></a><span id="l23.58" class="difflineminus">-# You can use avoid the explicit conversion with</span>
<a href="#l23.59"></a><span id="l23.59" class="difflineminus">-# ``numpy.vstack(pngdata)``, but then NumPy will pick the array's data</span>
<a href="#l23.60"></a><span id="l23.60" class="difflineminus">-# type; in practice it seems to pick ``numpy.int32``, which is large enough</span>
<a href="#l23.61"></a><span id="l23.61" class="difflineminus">-# to hold any pixel value for any PNG image but uses 4 bytes per value when</span>
<a href="#l23.62"></a><span id="l23.62" class="difflineminus">-# 1 or 2 would be enough.</span>
<a href="#l23.63"></a><span id="l23.63" class="difflineminus">-# --- extract 001 start</span>
<a href="#l23.64"></a><span id="l23.64" class="difflineminus">-image_2d = numpy.vstack(itertools.imap(numpy.uint16, pngdata))</span>
<a href="#l23.65"></a><span id="l23.65" class="difflineminus">-# --- extract 001 end</span>
<a href="#l23.66"></a><span id="l23.66" class="difflineminus">-# Do not be tempted to use ``numpy.asarray``; when passed an iterator</span>
<a href="#l23.67"></a><span id="l23.67" class="difflineminus">-# (`pngdata` is often an iterator) it will attempt to create a size 1</span>
<a href="#l23.68"></a><span id="l23.68" class="difflineminus">-# array with the iterator as its only element.</span>
<a href="#l23.69"></a><span id="l23.69" class="difflineminus">-# An alternative to the above is to create the target array of the right</span>
<a href="#l23.70"></a><span id="l23.70" class="difflineminus">-# shape, then populate it row by row:</span>
<a href="#l23.71"></a><span id="l23.71" class="difflineminus">-if 0:</span>
<a href="#l23.72"></a><span id="l23.72" class="difflineminus">-    image_2d = numpy.zeros((row_count,plane_count*column_count),</span>
<a href="#l23.73"></a><span id="l23.73" class="difflineminus">-                           dtype=numpy.uint16)</span>
<a href="#l23.74"></a><span id="l23.74" class="difflineminus">-    for row_index, one_boxed_row_flat_pixels in enumerate(pngdata):</span>
<a href="#l23.75"></a><span id="l23.75" class="difflineminus">-        image_2d[row_index,:]=one_boxed_row_flat_pixels</span>
<a href="#l23.76"></a><span id="l23.76" class="difflineminus">-</span>
<a href="#l23.77"></a><span id="l23.77" class="difflineminus">-del pngReader</span>
<a href="#l23.78"></a><span id="l23.78" class="difflineminus">-del pngdata</span>
<a href="#l23.79"></a><span id="l23.79" class="difflineminus">-</span>
<a href="#l23.80"></a><span id="l23.80" class="difflineminus">-</span>
<a href="#l23.81"></a><span id="l23.81" class="difflineminus">-''' Reconfigure for easier referencing, similar to</span>
<a href="#l23.82"></a><span id="l23.82" class="difflineminus">-        Boxed row boxed pixel:</span>
<a href="#l23.83"></a><span id="l23.83" class="difflineminus">-            list([ (R,G,B), (R,G,B), (R,G,B) ],</span>
<a href="#l23.84"></a><span id="l23.84" class="difflineminus">-                 [ (R,G,B), (R,G,B), (R,G,B) ])</span>
<a href="#l23.85"></a><span id="l23.85" class="difflineminus">-    Array dimensions for this example:  (2,3,3)</span>
<a href="#l23.86"></a><span id="l23.86" class="difflineminus">-</span>
<a href="#l23.87"></a><span id="l23.87" class="difflineminus">-    ``image_3d`` will contain the image as a three-dimensional numpy</span>
<a href="#l23.88"></a><span id="l23.88" class="difflineminus">-    array, having dimensions ``(row_count,column_count,plane_count)``.</span>
<a href="#l23.89"></a><span id="l23.89" class="difflineminus">-'''</span>
<a href="#l23.90"></a><span id="l23.90" class="difflineminus">-# --- extract 002 start</span>
<a href="#l23.91"></a><span id="l23.91" class="difflineminus">-image_3d = numpy.reshape(image_2d,</span>
<a href="#l23.92"></a><span id="l23.92" class="difflineminus">-                         (row_count,column_count,plane_count))</span>
<a href="#l23.93"></a><span id="l23.93" class="difflineminus">-# --- extract 002 end</span>
<a href="#l23.94"></a><span id="l23.94" class="difflineminus">-</span>
<a href="#l23.95"></a><span id="l23.95" class="difflineminus">-</span>
<a href="#l23.96"></a><span id="l23.96" class="difflineminus">-''' ============= '''</span>
<a href="#l23.97"></a><span id="l23.97" class="difflineminus">-</span>
<a href="#l23.98"></a><span id="l23.98" class="difflineminus">-''' Convert NumPy image_3d array to PNG image file.</span>
<a href="#l23.99"></a><span id="l23.99" class="difflineminus">-</span>
<a href="#l23.100"></a><span id="l23.100" class="difflineminus">-    If the data is three-dimensional, as it is above, the best thing</span>
<a href="#l23.101"></a><span id="l23.101" class="difflineminus">-    to do is reshape it into a two-dimensional array with a shape of</span>
<a href="#l23.102"></a><span id="l23.102" class="difflineminus">-    ``(row_count, column_count*plane_count)``.  Because a</span>
<a href="#l23.103"></a><span id="l23.103" class="difflineminus">-    two-dimensional numpy array is an iterator, it can be passed</span>
<a href="#l23.104"></a><span id="l23.104" class="difflineminus">-    directly to the ``png.Writer.write`` method.</span>
<a href="#l23.105"></a><span id="l23.105" class="difflineminus">-'''</span>
<a href="#l23.106"></a><span id="l23.106" class="difflineminus">-</span>
<a href="#l23.107"></a><span id="l23.107" class="difflineminus">-row_count, column_count, plane_count = image_3d.shape</span>
<a href="#l23.108"></a><span id="l23.108" class="difflineminus">-assert plane_count==3</span>
<a href="#l23.109"></a><span id="l23.109" class="difflineminus">-</span>
<a href="#l23.110"></a><span id="l23.110" class="difflineminus">-pngfile = open('picture_out.png', 'wb')</span>
<a href="#l23.111"></a><span id="l23.111" class="difflineminus">-try:</span>
<a href="#l23.112"></a><span id="l23.112" class="difflineminus">-    # This example assumes that you have 16-bit pixel values in the data</span>
<a href="#l23.113"></a><span id="l23.113" class="difflineminus">-    # array (that's what the ``bitdepth=16`` argument is for).</span>
<a href="#l23.114"></a><span id="l23.114" class="difflineminus">-    # If you don't, then the resulting PNG file will likely be</span>
<a href="#l23.115"></a><span id="l23.115" class="difflineminus">-    # very dark.  Hey, it's only an example.</span>
<a href="#l23.116"></a><span id="l23.116" class="difflineminus">-    pngWriter = png.Writer(column_count, row_count,</span>
<a href="#l23.117"></a><span id="l23.117" class="difflineminus">-                           greyscale=False,</span>
<a href="#l23.118"></a><span id="l23.118" class="difflineminus">-                           alpha=False,</span>
<a href="#l23.119"></a><span id="l23.119" class="difflineminus">-                           bitdepth=16)</span>
<a href="#l23.120"></a><span id="l23.120" class="difflineminus">-    # As of 2009-04-13 passing a numpy array that has an element type</span>
<a href="#l23.121"></a><span id="l23.121" class="difflineminus">-    # that is a numpy integer type (for example, the `image_3d` array has an</span>
<a href="#l23.122"></a><span id="l23.122" class="difflineminus">-    # element type of ``numpy.uint16``) generates a deprecation warning.</span>
<a href="#l23.123"></a><span id="l23.123" class="difflineminus">-    # This is probably a bug in numpy; it may go away in the future.</span>
<a href="#l23.124"></a><span id="l23.124" class="difflineminus">-    # The code still works despite the warning.</span>
<a href="#l23.125"></a><span id="l23.125" class="difflineminus">-    # See http://code.google.com/p/pypng/issues/detail?id=44</span>
<a href="#l23.126"></a><span id="l23.126" class="difflineminus">-# --- extract 003 start</span>
<a href="#l23.127"></a><span id="l23.127" class="difflineminus">-    pngWriter.write(pngfile,</span>
<a href="#l23.128"></a><span id="l23.128" class="difflineminus">-                    numpy.reshape(image_3d, (-1, column_count*plane_count)))</span>
<a href="#l23.129"></a><span id="l23.129" class="difflineminus">-# --- extract 003 end</span>
<a href="#l23.130"></a><span id="l23.130" class="difflineminus">-finally:</span>
<a href="#l23.131"></a><span id="l23.131" class="difflineminus">-    pngfile.close()</span>
<a href="#l23.132"></a><span id="l23.132" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">deleted file mode 100644</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineminus">--- a/build/pypng/iccp.py</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineplus">+++ /dev/null</span>
<a href="#l24.4"></a><span id="l24.4" class="difflineat">@@ -1,537 +0,0 @@</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l24.6"></a><span id="l24.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/iccp.py $</span>
<a href="#l24.7"></a><span id="l24.7" class="difflineminus">-# $Rev: 182 $</span>
<a href="#l24.8"></a><span id="l24.8" class="difflineminus">-</span>
<a href="#l24.9"></a><span id="l24.9" class="difflineminus">-# iccp</span>
<a href="#l24.10"></a><span id="l24.10" class="difflineminus">-#</span>
<a href="#l24.11"></a><span id="l24.11" class="difflineminus">-# International Color Consortium Profile</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-#</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-# Tools for manipulating ICC profiles.</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-#</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineminus">-# An ICC profile can be extracted from a PNG image (iCCP chunk).</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineminus">-#</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineminus">-#</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineminus">-# Non-standard ICCP tags.</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineminus">-#</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineminus">-# Apple use some (widespread but) non-standard tags.  These can be</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineminus">-# displayed in Apple's ColorSync Utility.</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineminus">-# - 'vcgt' (Video Card Gamma Tag).  Table to load into video</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineminus">-#    card LUT to apply gamma.</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineminus">-# - 'ndin' Apple display native information.</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineminus">-# - 'dscm' Apple multi-localized description strings.</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineminus">-# - 'mmod' Apple display make and model information.</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineminus">-# </span>
<a href="#l24.28"></a><span id="l24.28" class="difflineminus">-</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineminus">-# References</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineminus">-#</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-# [ICC 2001] ICC Specification ICC.1:2001-04 (Profile version 2.4.0)</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineminus">-# [ICC 2004] ICC Specification ICC.1:2004-10 (Profile version 4.2.0.0)</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineminus">-</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineminus">-import struct</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineminus">-</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineminus">-import png</span>
<a href="#l24.37"></a><span id="l24.37" class="difflineminus">-</span>
<a href="#l24.38"></a><span id="l24.38" class="difflineminus">-class FormatError(Exception):</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineminus">-    pass</span>
<a href="#l24.40"></a><span id="l24.40" class="difflineminus">-</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-class Profile:</span>
<a href="#l24.42"></a><span id="l24.42" class="difflineminus">-    &quot;&quot;&quot;An International Color Consortium Profile (ICC Profile).&quot;&quot;&quot;</span>
<a href="#l24.43"></a><span id="l24.43" class="difflineminus">-</span>
<a href="#l24.44"></a><span id="l24.44" class="difflineminus">-    def __init__(self):</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineminus">-        self.rawtagtable = None</span>
<a href="#l24.46"></a><span id="l24.46" class="difflineminus">-        self.rawtagdict = {}</span>
<a href="#l24.47"></a><span id="l24.47" class="difflineminus">-        self.d = dict()</span>
<a href="#l24.48"></a><span id="l24.48" class="difflineminus">-</span>
<a href="#l24.49"></a><span id="l24.49" class="difflineminus">-    def fromFile(self, inp, name='&lt;unknown&gt;'):</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineminus">-        # See [ICC 2004]</span>
<a href="#l24.52"></a><span id="l24.52" class="difflineminus">-        profile = inp.read(128)</span>
<a href="#l24.53"></a><span id="l24.53" class="difflineminus">-        if len(profile) &lt; 128:</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineminus">-            raise FormatError(&quot;ICC Profile is too short.&quot;)</span>
<a href="#l24.55"></a><span id="l24.55" class="difflineminus">-        size, = struct.unpack('&gt;L', profile[:4])</span>
<a href="#l24.56"></a><span id="l24.56" class="difflineminus">-        profile += inp.read(d['size'] - len(profile))</span>
<a href="#l24.57"></a><span id="l24.57" class="difflineminus">-        return self.fromString(profile, name)</span>
<a href="#l24.58"></a><span id="l24.58" class="difflineminus">-</span>
<a href="#l24.59"></a><span id="l24.59" class="difflineminus">-    def fromString(self, profile, name='&lt;unknown&gt;'):</span>
<a href="#l24.60"></a><span id="l24.60" class="difflineminus">-        self.d = dict()</span>
<a href="#l24.61"></a><span id="l24.61" class="difflineminus">-        d = self.d</span>
<a href="#l24.62"></a><span id="l24.62" class="difflineminus">-        if len(profile) &lt; 128:</span>
<a href="#l24.63"></a><span id="l24.63" class="difflineminus">-            raise FormatError(&quot;ICC Profile is too short.&quot;)</span>
<a href="#l24.64"></a><span id="l24.64" class="difflineminus">-        d.update(</span>
<a href="#l24.65"></a><span id="l24.65" class="difflineminus">-          zip(['size', 'preferredCMM', 'version',</span>
<a href="#l24.66"></a><span id="l24.66" class="difflineminus">-               'profileclass', 'colourspace', 'pcs'],</span>
<a href="#l24.67"></a><span id="l24.67" class="difflineminus">-              struct.unpack('&gt;L4sL4s4s4s', profile[:24])))</span>
<a href="#l24.68"></a><span id="l24.68" class="difflineminus">-        if len(profile) &lt; d['size']:</span>
<a href="#l24.69"></a><span id="l24.69" class="difflineminus">-            warnings.warn(</span>
<a href="#l24.70"></a><span id="l24.70" class="difflineminus">-              'Profile size declared to be %d, but only got %d bytes' %</span>
<a href="#l24.71"></a><span id="l24.71" class="difflineminus">-                (d['size'], len(profile)))</span>
<a href="#l24.72"></a><span id="l24.72" class="difflineminus">-        d['version'] = '%08x' % d['version']</span>
<a href="#l24.73"></a><span id="l24.73" class="difflineminus">-        d['created'] = readICCdatetime(profile[24:36])</span>
<a href="#l24.74"></a><span id="l24.74" class="difflineminus">-        d.update(</span>
<a href="#l24.75"></a><span id="l24.75" class="difflineminus">-          zip(['acsp', 'platform', 'flag', 'manufacturer', 'model'],</span>
<a href="#l24.76"></a><span id="l24.76" class="difflineminus">-              struct.unpack('&gt;4s4s3L', profile[36:56])))</span>
<a href="#l24.77"></a><span id="l24.77" class="difflineminus">-        if d['acsp'] != 'acsp':</span>
<a href="#l24.78"></a><span id="l24.78" class="difflineminus">-            warnings.warn('acsp field not present (not an ICC Profile?).')</span>
<a href="#l24.79"></a><span id="l24.79" class="difflineminus">-        d['deviceattributes'] = profile[56:64]</span>
<a href="#l24.80"></a><span id="l24.80" class="difflineminus">-        d['intent'], = struct.unpack('&gt;L', profile[64:68])</span>
<a href="#l24.81"></a><span id="l24.81" class="difflineminus">-        d['pcsilluminant'] = readICCXYZNumber(profile[68:80])</span>
<a href="#l24.82"></a><span id="l24.82" class="difflineminus">-        d['creator'] = profile[80:84]</span>
<a href="#l24.83"></a><span id="l24.83" class="difflineminus">-        d['id'] = profile[84:100]</span>
<a href="#l24.84"></a><span id="l24.84" class="difflineminus">-        ntags, = struct.unpack('&gt;L', profile[128:132])</span>
<a href="#l24.85"></a><span id="l24.85" class="difflineminus">-        d['ntags'] = ntags</span>
<a href="#l24.86"></a><span id="l24.86" class="difflineminus">-        fmt = '4s2L' * ntags</span>
<a href="#l24.87"></a><span id="l24.87" class="difflineminus">-        # tag table</span>
<a href="#l24.88"></a><span id="l24.88" class="difflineminus">-        tt = struct.unpack('&gt;' + fmt, profile[132:132+12*ntags])</span>
<a href="#l24.89"></a><span id="l24.89" class="difflineminus">-        tt = group(tt, 3)</span>
<a href="#l24.90"></a><span id="l24.90" class="difflineminus">-</span>
<a href="#l24.91"></a><span id="l24.91" class="difflineminus">-        # Could (should) detect 2 or more tags having the same sig.  But</span>
<a href="#l24.92"></a><span id="l24.92" class="difflineminus">-        # we don't.  Two or more tags with the same sig is illegal per</span>
<a href="#l24.93"></a><span id="l24.93" class="difflineminus">-        # the ICC spec.</span>
<a href="#l24.94"></a><span id="l24.94" class="difflineminus">-        </span>
<a href="#l24.95"></a><span id="l24.95" class="difflineminus">-        # Convert (sig,offset,size) triples into (sig,value) pairs.</span>
<a href="#l24.96"></a><span id="l24.96" class="difflineminus">-        rawtag = map(lambda x: (x[0], profile[x[1]:x[1]+x[2]]), tt)</span>
<a href="#l24.97"></a><span id="l24.97" class="difflineminus">-        self.rawtagtable = rawtag</span>
<a href="#l24.98"></a><span id="l24.98" class="difflineminus">-        self.rawtagdict = dict(rawtag)</span>
<a href="#l24.99"></a><span id="l24.99" class="difflineminus">-        tag = dict()</span>
<a href="#l24.100"></a><span id="l24.100" class="difflineminus">-        # Interpret the tags whose types we know about</span>
<a href="#l24.101"></a><span id="l24.101" class="difflineminus">-        for sig, v in rawtag:</span>
<a href="#l24.102"></a><span id="l24.102" class="difflineminus">-            if sig in tag:</span>
<a href="#l24.103"></a><span id="l24.103" class="difflineminus">-                warnings.warn(&quot;Duplicate tag %r found.  Ignoring.&quot; % sig)</span>
<a href="#l24.104"></a><span id="l24.104" class="difflineminus">-                continue</span>
<a href="#l24.105"></a><span id="l24.105" class="difflineminus">-            v = ICCdecode(v)</span>
<a href="#l24.106"></a><span id="l24.106" class="difflineminus">-            if v is not None:</span>
<a href="#l24.107"></a><span id="l24.107" class="difflineminus">-                tag[sig] = v</span>
<a href="#l24.108"></a><span id="l24.108" class="difflineminus">-        self.tag = tag</span>
<a href="#l24.109"></a><span id="l24.109" class="difflineminus">-        return self</span>
<a href="#l24.110"></a><span id="l24.110" class="difflineminus">-</span>
<a href="#l24.111"></a><span id="l24.111" class="difflineminus">-    def greyInput(self):</span>
<a href="#l24.112"></a><span id="l24.112" class="difflineminus">-        &quot;&quot;&quot;Adjust ``self.d`` dictionary for greyscale input device.</span>
<a href="#l24.113"></a><span id="l24.113" class="difflineminus">-        ``profileclass`` is 'scnr', ``colourspace`` is 'GRAY', ``pcs``</span>
<a href="#l24.114"></a><span id="l24.114" class="difflineminus">-        is 'XYZ '.</span>
<a href="#l24.115"></a><span id="l24.115" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l24.116"></a><span id="l24.116" class="difflineminus">-</span>
<a href="#l24.117"></a><span id="l24.117" class="difflineminus">-        self.d.update(dict(profileclass='scnr',</span>
<a href="#l24.118"></a><span id="l24.118" class="difflineminus">-          colourspace='GRAY', pcs='XYZ '))</span>
<a href="#l24.119"></a><span id="l24.119" class="difflineminus">-        return self</span>
<a href="#l24.120"></a><span id="l24.120" class="difflineminus">-</span>
<a href="#l24.121"></a><span id="l24.121" class="difflineminus">-    def maybeAddDefaults(self):</span>
<a href="#l24.122"></a><span id="l24.122" class="difflineminus">-        if self.rawtagdict:</span>
<a href="#l24.123"></a><span id="l24.123" class="difflineminus">-            return</span>
<a href="#l24.124"></a><span id="l24.124" class="difflineminus">-        self._addTags(</span>
<a href="#l24.125"></a><span id="l24.125" class="difflineminus">-          cprt='Copyright unknown.',</span>
<a href="#l24.126"></a><span id="l24.126" class="difflineminus">-          desc='created by $URL: http://pypng.googlecode.com/svn/trunk/code/iccp.py $ $Rev: 182 $',</span>
<a href="#l24.127"></a><span id="l24.127" class="difflineminus">-          wtpt=D50(),</span>
<a href="#l24.128"></a><span id="l24.128" class="difflineminus">-          )</span>
<a href="#l24.129"></a><span id="l24.129" class="difflineminus">-</span>
<a href="#l24.130"></a><span id="l24.130" class="difflineminus">-    def addTags(self, **k):</span>
<a href="#l24.131"></a><span id="l24.131" class="difflineminus">-        self.maybeAddDefaults()</span>
<a href="#l24.132"></a><span id="l24.132" class="difflineminus">-        self._addTags(**k)</span>
<a href="#l24.133"></a><span id="l24.133" class="difflineminus">-</span>
<a href="#l24.134"></a><span id="l24.134" class="difflineminus">-    def _addTags(self, **k):</span>
<a href="#l24.135"></a><span id="l24.135" class="difflineminus">-        &quot;&quot;&quot;Helper for :meth:`addTags`.&quot;&quot;&quot;</span>
<a href="#l24.136"></a><span id="l24.136" class="difflineminus">-</span>
<a href="#l24.137"></a><span id="l24.137" class="difflineminus">-        for tag, thing in k.items():</span>
<a href="#l24.138"></a><span id="l24.138" class="difflineminus">-            if not isinstance(thing, (tuple, list)):</span>
<a href="#l24.139"></a><span id="l24.139" class="difflineminus">-                thing = (thing,)</span>
<a href="#l24.140"></a><span id="l24.140" class="difflineminus">-            typetag = defaulttagtype[tag]</span>
<a href="#l24.141"></a><span id="l24.141" class="difflineminus">-            self.rawtagdict[tag] = encode(typetag, *thing)</span>
<a href="#l24.142"></a><span id="l24.142" class="difflineminus">-        return self</span>
<a href="#l24.143"></a><span id="l24.143" class="difflineminus">-</span>
<a href="#l24.144"></a><span id="l24.144" class="difflineminus">-    def write(self, out):</span>
<a href="#l24.145"></a><span id="l24.145" class="difflineminus">-        &quot;&quot;&quot;Write ICC Profile to the file.&quot;&quot;&quot;</span>
<a href="#l24.146"></a><span id="l24.146" class="difflineminus">-</span>
<a href="#l24.147"></a><span id="l24.147" class="difflineminus">-        if not self.rawtagtable:</span>
<a href="#l24.148"></a><span id="l24.148" class="difflineminus">-            self.rawtagtable = self.rawtagdict.items()</span>
<a href="#l24.149"></a><span id="l24.149" class="difflineminus">-        tags = tagblock(self.rawtagtable)</span>
<a href="#l24.150"></a><span id="l24.150" class="difflineminus">-        self.writeHeader(out, 128 + len(tags))</span>
<a href="#l24.151"></a><span id="l24.151" class="difflineminus">-        out.write(tags)</span>
<a href="#l24.152"></a><span id="l24.152" class="difflineminus">-        out.flush()</span>
<a href="#l24.153"></a><span id="l24.153" class="difflineminus">-</span>
<a href="#l24.154"></a><span id="l24.154" class="difflineminus">-        return self</span>
<a href="#l24.155"></a><span id="l24.155" class="difflineminus">-</span>
<a href="#l24.156"></a><span id="l24.156" class="difflineminus">-    def writeHeader(self, out, size=999):</span>
<a href="#l24.157"></a><span id="l24.157" class="difflineminus">-        &quot;&quot;&quot;Add default values to the instance's `d` dictionary, then</span>
<a href="#l24.158"></a><span id="l24.158" class="difflineminus">-        write a header out onto the file stream.  The size of the</span>
<a href="#l24.159"></a><span id="l24.159" class="difflineminus">-        profile must be specified using the `size` argument.</span>
<a href="#l24.160"></a><span id="l24.160" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l24.161"></a><span id="l24.161" class="difflineminus">-</span>
<a href="#l24.162"></a><span id="l24.162" class="difflineminus">-        def defaultkey(d, key, value):</span>
<a href="#l24.163"></a><span id="l24.163" class="difflineminus">-            &quot;&quot;&quot;Add ``[key]==value`` to the dictionary `d`, but only if</span>
<a href="#l24.164"></a><span id="l24.164" class="difflineminus">-            it does not have that key already.</span>
<a href="#l24.165"></a><span id="l24.165" class="difflineminus">-            &quot;&quot;&quot;</span>
<a href="#l24.166"></a><span id="l24.166" class="difflineminus">-</span>
<a href="#l24.167"></a><span id="l24.167" class="difflineminus">-            if key in d:</span>
<a href="#l24.168"></a><span id="l24.168" class="difflineminus">-                return</span>
<a href="#l24.169"></a><span id="l24.169" class="difflineminus">-            d[key] = value</span>
<a href="#l24.170"></a><span id="l24.170" class="difflineminus">-</span>
<a href="#l24.171"></a><span id="l24.171" class="difflineminus">-        z = '\x00' * 4</span>
<a href="#l24.172"></a><span id="l24.172" class="difflineminus">-        defaults = dict(preferredCMM=z,</span>
<a href="#l24.173"></a><span id="l24.173" class="difflineminus">-                        version='02000000',</span>
<a href="#l24.174"></a><span id="l24.174" class="difflineminus">-                        profileclass=z,</span>
<a href="#l24.175"></a><span id="l24.175" class="difflineminus">-                        colourspace=z,</span>
<a href="#l24.176"></a><span id="l24.176" class="difflineminus">-                        pcs='XYZ ',</span>
<a href="#l24.177"></a><span id="l24.177" class="difflineminus">-                        created=writeICCdatetime(),</span>
<a href="#l24.178"></a><span id="l24.178" class="difflineminus">-                        acsp='acsp',</span>
<a href="#l24.179"></a><span id="l24.179" class="difflineminus">-                        platform=z,</span>
<a href="#l24.180"></a><span id="l24.180" class="difflineminus">-                        flag=0,</span>
<a href="#l24.181"></a><span id="l24.181" class="difflineminus">-                        manufacturer=z,</span>
<a href="#l24.182"></a><span id="l24.182" class="difflineminus">-                        model=0,</span>
<a href="#l24.183"></a><span id="l24.183" class="difflineminus">-                        deviceattributes=0,</span>
<a href="#l24.184"></a><span id="l24.184" class="difflineminus">-                        intent=0,</span>
<a href="#l24.185"></a><span id="l24.185" class="difflineminus">-                        pcsilluminant=encodefuns()['XYZ'](*D50()),</span>
<a href="#l24.186"></a><span id="l24.186" class="difflineminus">-                        creator=z,</span>
<a href="#l24.187"></a><span id="l24.187" class="difflineminus">-                        )</span>
<a href="#l24.188"></a><span id="l24.188" class="difflineminus">-        for k,v in defaults.items():</span>
<a href="#l24.189"></a><span id="l24.189" class="difflineminus">-            defaultkey(self.d, k, v)</span>
<a href="#l24.190"></a><span id="l24.190" class="difflineminus">-</span>
<a href="#l24.191"></a><span id="l24.191" class="difflineminus">-        hl = map(self.d.__getitem__,</span>
<a href="#l24.192"></a><span id="l24.192" class="difflineminus">-                 ['preferredCMM', 'version', 'profileclass', 'colourspace',</span>
<a href="#l24.193"></a><span id="l24.193" class="difflineminus">-                  'pcs', 'created', 'acsp', 'platform', 'flag',</span>
<a href="#l24.194"></a><span id="l24.194" class="difflineminus">-                  'manufacturer', 'model', 'deviceattributes', 'intent',</span>
<a href="#l24.195"></a><span id="l24.195" class="difflineminus">-                  'pcsilluminant', 'creator'])</span>
<a href="#l24.196"></a><span id="l24.196" class="difflineminus">-        # Convert to struct.pack input</span>
<a href="#l24.197"></a><span id="l24.197" class="difflineminus">-        hl[1] = int(hl[1], 16)</span>
<a href="#l24.198"></a><span id="l24.198" class="difflineminus">-</span>
<a href="#l24.199"></a><span id="l24.199" class="difflineminus">-        out.write(struct.pack('&gt;L4sL4s4s4s12s4s4sL4sLQL12s4s', size, *hl))</span>
<a href="#l24.200"></a><span id="l24.200" class="difflineminus">-        out.write('\x00' * 44)</span>
<a href="#l24.201"></a><span id="l24.201" class="difflineminus">-        return self</span>
<a href="#l24.202"></a><span id="l24.202" class="difflineminus">-</span>
<a href="#l24.203"></a><span id="l24.203" class="difflineminus">-def encodefuns():</span>
<a href="#l24.204"></a><span id="l24.204" class="difflineminus">-    &quot;&quot;&quot;Returns a dictionary mapping ICC type signature sig to encoding</span>
<a href="#l24.205"></a><span id="l24.205" class="difflineminus">-    function.  Each function returns a string comprising the content of</span>
<a href="#l24.206"></a><span id="l24.206" class="difflineminus">-    the encoded value.  To form the full value, the type sig and the 4</span>
<a href="#l24.207"></a><span id="l24.207" class="difflineminus">-    zero bytes should be prefixed (8 bytes).</span>
<a href="#l24.208"></a><span id="l24.208" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l24.209"></a><span id="l24.209" class="difflineminus">-</span>
<a href="#l24.210"></a><span id="l24.210" class="difflineminus">-    def desc(ascii):</span>
<a href="#l24.211"></a><span id="l24.211" class="difflineminus">-        &quot;&quot;&quot;Return textDescription type [ICC 2001] 6.5.17.  The ASCII part is</span>
<a href="#l24.212"></a><span id="l24.212" class="difflineminus">-        filled in with the string `ascii`, the Unicode and ScriptCode parts</span>
<a href="#l24.213"></a><span id="l24.213" class="difflineminus">-        are empty.&quot;&quot;&quot;</span>
<a href="#l24.214"></a><span id="l24.214" class="difflineminus">-</span>
<a href="#l24.215"></a><span id="l24.215" class="difflineminus">-        ascii += '\x00'</span>
<a href="#l24.216"></a><span id="l24.216" class="difflineminus">-        l = len(ascii)</span>
<a href="#l24.217"></a><span id="l24.217" class="difflineminus">-</span>
<a href="#l24.218"></a><span id="l24.218" class="difflineminus">-        return struct.pack('&gt;L%ds2LHB67s' % l,</span>
<a href="#l24.219"></a><span id="l24.219" class="difflineminus">-                           l, ascii, 0, 0, 0, 0, '')</span>
<a href="#l24.220"></a><span id="l24.220" class="difflineminus">-</span>
<a href="#l24.221"></a><span id="l24.221" class="difflineminus">-    def text(ascii):</span>
<a href="#l24.222"></a><span id="l24.222" class="difflineminus">-        &quot;&quot;&quot;Return textType [ICC 2001] 6.5.18.&quot;&quot;&quot;</span>
<a href="#l24.223"></a><span id="l24.223" class="difflineminus">-</span>
<a href="#l24.224"></a><span id="l24.224" class="difflineminus">-        return ascii + '\x00'</span>
<a href="#l24.225"></a><span id="l24.225" class="difflineminus">-</span>
<a href="#l24.226"></a><span id="l24.226" class="difflineminus">-    def curv(f=None, n=256):</span>
<a href="#l24.227"></a><span id="l24.227" class="difflineminus">-        &quot;&quot;&quot;Return a curveType, [ICC 2001] 6.5.3.  If no arguments are</span>
<a href="#l24.228"></a><span id="l24.228" class="difflineminus">-        supplied then a TRC for a linear response is generated (no entries).</span>
<a href="#l24.229"></a><span id="l24.229" class="difflineminus">-        If an argument is supplied and it is a number (for *f* to be a</span>
<a href="#l24.230"></a><span id="l24.230" class="difflineminus">-        number it  means that ``float(f)==f``) then a TRC for that</span>
<a href="#l24.231"></a><span id="l24.231" class="difflineminus">-        gamma value is generated.</span>
<a href="#l24.232"></a><span id="l24.232" class="difflineminus">-        Otherwise `f` is assumed to be a function that maps [0.0, 1.0] to</span>
<a href="#l24.233"></a><span id="l24.233" class="difflineminus">-        [0.0, 1.0]; an `n` element table is generated for it.</span>
<a href="#l24.234"></a><span id="l24.234" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l24.235"></a><span id="l24.235" class="difflineminus">-</span>
<a href="#l24.236"></a><span id="l24.236" class="difflineminus">-        if f is None:</span>
<a href="#l24.237"></a><span id="l24.237" class="difflineminus">-            return struct.pack('&gt;L',  0)</span>
<a href="#l24.238"></a><span id="l24.238" class="difflineminus">-        try:</span>
<a href="#l24.239"></a><span id="l24.239" class="difflineminus">-            if float(f) == f:</span>
<a href="#l24.240"></a><span id="l24.240" class="difflineminus">-                return struct.pack('&gt;LH', 1, int(round(f*2**8)))</span>
<a href="#l24.241"></a><span id="l24.241" class="difflineminus">-        except (TypeError, ValueError):</span>
<a href="#l24.242"></a><span id="l24.242" class="difflineminus">-            pass</span>
<a href="#l24.243"></a><span id="l24.243" class="difflineminus">-        assert n &gt;= 2</span>
<a href="#l24.244"></a><span id="l24.244" class="difflineminus">-        table = []</span>
<a href="#l24.245"></a><span id="l24.245" class="difflineminus">-        M = float(n-1)</span>
<a href="#l24.246"></a><span id="l24.246" class="difflineminus">-        for i in range(n):</span>
<a href="#l24.247"></a><span id="l24.247" class="difflineminus">-            x = i/M</span>
<a href="#l24.248"></a><span id="l24.248" class="difflineminus">-            table.append(int(round(f(x) * 65535)))</span>
<a href="#l24.249"></a><span id="l24.249" class="difflineminus">-        return struct.pack('&gt;L%dH' % n, n, *table)</span>
<a href="#l24.250"></a><span id="l24.250" class="difflineminus">-</span>
<a href="#l24.251"></a><span id="l24.251" class="difflineminus">-    def XYZ(*l):</span>
<a href="#l24.252"></a><span id="l24.252" class="difflineminus">-        return struct.pack('&gt;3l', *map(fs15f16, l))</span>
<a href="#l24.253"></a><span id="l24.253" class="difflineminus">-</span>
<a href="#l24.254"></a><span id="l24.254" class="difflineminus">-    return locals()</span>
<a href="#l24.255"></a><span id="l24.255" class="difflineminus">-</span>
<a href="#l24.256"></a><span id="l24.256" class="difflineminus">-# Tag type defaults.</span>
<a href="#l24.257"></a><span id="l24.257" class="difflineminus">-# Most tags can only have one or a few tag types.</span>
<a href="#l24.258"></a><span id="l24.258" class="difflineminus">-# When encoding, we associate a default tag type with each tag so that</span>
<a href="#l24.259"></a><span id="l24.259" class="difflineminus">-# the encoding is implicit.</span>
<a href="#l24.260"></a><span id="l24.260" class="difflineminus">-defaulttagtype=dict(</span>
<a href="#l24.261"></a><span id="l24.261" class="difflineminus">-  A2B0='mft1',</span>
<a href="#l24.262"></a><span id="l24.262" class="difflineminus">-  A2B1='mft1',</span>
<a href="#l24.263"></a><span id="l24.263" class="difflineminus">-  A2B2='mft1',</span>
<a href="#l24.264"></a><span id="l24.264" class="difflineminus">-  bXYZ='XYZ',</span>
<a href="#l24.265"></a><span id="l24.265" class="difflineminus">-  bTRC='curv',</span>
<a href="#l24.266"></a><span id="l24.266" class="difflineminus">-  B2A0='mft1',</span>
<a href="#l24.267"></a><span id="l24.267" class="difflineminus">-  B2A1='mft1',</span>
<a href="#l24.268"></a><span id="l24.268" class="difflineminus">-  B2A2='mft1',</span>
<a href="#l24.269"></a><span id="l24.269" class="difflineminus">-  calt='dtim',</span>
<a href="#l24.270"></a><span id="l24.270" class="difflineminus">-  targ='text',</span>
<a href="#l24.271"></a><span id="l24.271" class="difflineminus">-  chad='sf32',</span>
<a href="#l24.272"></a><span id="l24.272" class="difflineminus">-  chrm='chrm',</span>
<a href="#l24.273"></a><span id="l24.273" class="difflineminus">-  cprt='desc',</span>
<a href="#l24.274"></a><span id="l24.274" class="difflineminus">-  crdi='crdi',</span>
<a href="#l24.275"></a><span id="l24.275" class="difflineminus">-  dmnd='desc',</span>
<a href="#l24.276"></a><span id="l24.276" class="difflineminus">-  dmdd='desc',</span>
<a href="#l24.277"></a><span id="l24.277" class="difflineminus">-  devs='',</span>
<a href="#l24.278"></a><span id="l24.278" class="difflineminus">-  gamt='mft1',</span>
<a href="#l24.279"></a><span id="l24.279" class="difflineminus">-  kTRC='curv',</span>
<a href="#l24.280"></a><span id="l24.280" class="difflineminus">-  gXYZ='XYZ',</span>
<a href="#l24.281"></a><span id="l24.281" class="difflineminus">-  gTRC='curv',</span>
<a href="#l24.282"></a><span id="l24.282" class="difflineminus">-  lumi='XYZ',</span>
<a href="#l24.283"></a><span id="l24.283" class="difflineminus">-  meas='',</span>
<a href="#l24.284"></a><span id="l24.284" class="difflineminus">-  bkpt='XYZ',</span>
<a href="#l24.285"></a><span id="l24.285" class="difflineminus">-  wtpt='XYZ',</span>
<a href="#l24.286"></a><span id="l24.286" class="difflineminus">-  ncol='',</span>
<a href="#l24.287"></a><span id="l24.287" class="difflineminus">-  ncl2='',</span>
<a href="#l24.288"></a><span id="l24.288" class="difflineminus">-  resp='',</span>
<a href="#l24.289"></a><span id="l24.289" class="difflineminus">-  pre0='mft1',</span>
<a href="#l24.290"></a><span id="l24.290" class="difflineminus">-  pre1='mft1',</span>
<a href="#l24.291"></a><span id="l24.291" class="difflineminus">-  pre2='mft1',</span>
<a href="#l24.292"></a><span id="l24.292" class="difflineminus">-  desc='desc',</span>
<a href="#l24.293"></a><span id="l24.293" class="difflineminus">-  pseq='',</span>
<a href="#l24.294"></a><span id="l24.294" class="difflineminus">-  psd0='data',</span>
<a href="#l24.295"></a><span id="l24.295" class="difflineminus">-  psd1='data',</span>
<a href="#l24.296"></a><span id="l24.296" class="difflineminus">-  psd2='data',</span>
<a href="#l24.297"></a><span id="l24.297" class="difflineminus">-  psd3='data',</span>
<a href="#l24.298"></a><span id="l24.298" class="difflineminus">-  ps2s='data',</span>
<a href="#l24.299"></a><span id="l24.299" class="difflineminus">-  ps2i='data',</span>
<a href="#l24.300"></a><span id="l24.300" class="difflineminus">-  rXYZ='XYZ',</span>
<a href="#l24.301"></a><span id="l24.301" class="difflineminus">-  rTRC='curv',</span>
<a href="#l24.302"></a><span id="l24.302" class="difflineminus">-  scrd='desc',</span>
<a href="#l24.303"></a><span id="l24.303" class="difflineminus">-  scrn='',</span>
<a href="#l24.304"></a><span id="l24.304" class="difflineminus">-  tech='sig',</span>
<a href="#l24.305"></a><span id="l24.305" class="difflineminus">-  bfd='',</span>
<a href="#l24.306"></a><span id="l24.306" class="difflineminus">-  vued='desc',</span>
<a href="#l24.307"></a><span id="l24.307" class="difflineminus">-  view='view',</span>
<a href="#l24.308"></a><span id="l24.308" class="difflineminus">-)</span>
<a href="#l24.309"></a><span id="l24.309" class="difflineminus">-</span>
<a href="#l24.310"></a><span id="l24.310" class="difflineminus">-def encode(tsig, *l):</span>
<a href="#l24.311"></a><span id="l24.311" class="difflineminus">-    &quot;&quot;&quot;Encode a Python value as an ICC type.  `tsig` is the type</span>
<a href="#l24.312"></a><span id="l24.312" class="difflineminus">-    signature to (the first 4 bytes of the encoded value, see [ICC 2004]</span>
<a href="#l24.313"></a><span id="l24.313" class="difflineminus">-    section 10.</span>
<a href="#l24.314"></a><span id="l24.314" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l24.315"></a><span id="l24.315" class="difflineminus">-</span>
<a href="#l24.316"></a><span id="l24.316" class="difflineminus">-    fun = encodefuns()</span>
<a href="#l24.317"></a><span id="l24.317" class="difflineminus">-    if tsig not in fun:</span>
<a href="#l24.318"></a><span id="l24.318" class="difflineminus">-        raise &quot;No encoder for type %r.&quot; % tsig</span>
<a href="#l24.319"></a><span id="l24.319" class="difflineminus">-    v = fun[tsig](*l)</span>
<a href="#l24.320"></a><span id="l24.320" class="difflineminus">-    # Padd tsig out with spaces.</span>
<a href="#l24.321"></a><span id="l24.321" class="difflineminus">-    tsig = (tsig + '   ')[:4]</span>
<a href="#l24.322"></a><span id="l24.322" class="difflineminus">-    return tsig + '\x00'*4 + v</span>
<a href="#l24.323"></a><span id="l24.323" class="difflineminus">-</span>
<a href="#l24.324"></a><span id="l24.324" class="difflineminus">-def tagblock(tag):</span>
<a href="#l24.325"></a><span id="l24.325" class="difflineminus">-    &quot;&quot;&quot;`tag` should be a list of (*signature*, *element*) pairs, where</span>
<a href="#l24.326"></a><span id="l24.326" class="difflineminus">-    *signature* (the key) is a length 4 string, and *element* is the</span>
<a href="#l24.327"></a><span id="l24.327" class="difflineminus">-    content of the tag element (another string).</span>
<a href="#l24.328"></a><span id="l24.328" class="difflineminus">-    </span>
<a href="#l24.329"></a><span id="l24.329" class="difflineminus">-    The entire tag block (consisting of first a table and then the</span>
<a href="#l24.330"></a><span id="l24.330" class="difflineminus">-    element data) is constructed and returned as a string.</span>
<a href="#l24.331"></a><span id="l24.331" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l24.332"></a><span id="l24.332" class="difflineminus">-</span>
<a href="#l24.333"></a><span id="l24.333" class="difflineminus">-    n = len(tag)</span>
<a href="#l24.334"></a><span id="l24.334" class="difflineminus">-    tablelen = 12*n</span>
<a href="#l24.335"></a><span id="l24.335" class="difflineminus">-</span>
<a href="#l24.336"></a><span id="l24.336" class="difflineminus">-    # Build the tag table in two parts.  A list of 12-byte tags, and a</span>
<a href="#l24.337"></a><span id="l24.337" class="difflineminus">-    # string of element data.  Offset is the offset from the start of</span>
<a href="#l24.338"></a><span id="l24.338" class="difflineminus">-    # the profile to the start of the element data (so the offset for</span>
<a href="#l24.339"></a><span id="l24.339" class="difflineminus">-    # the next element is this offset plus the length of the element</span>
<a href="#l24.340"></a><span id="l24.340" class="difflineminus">-    # string so far).</span>
<a href="#l24.341"></a><span id="l24.341" class="difflineminus">-    offset = 128 + tablelen + 4</span>
<a href="#l24.342"></a><span id="l24.342" class="difflineminus">-    # The table.  As a string.</span>
<a href="#l24.343"></a><span id="l24.343" class="difflineminus">-    table = ''</span>
<a href="#l24.344"></a><span id="l24.344" class="difflineminus">-    # The element data</span>
<a href="#l24.345"></a><span id="l24.345" class="difflineminus">-    element = ''</span>
<a href="#l24.346"></a><span id="l24.346" class="difflineminus">-    for k,v in tag:</span>
<a href="#l24.347"></a><span id="l24.347" class="difflineminus">-        table += struct.pack('&gt;4s2L', k, offset + len(element), len(v))</span>
<a href="#l24.348"></a><span id="l24.348" class="difflineminus">-        element += v</span>
<a href="#l24.349"></a><span id="l24.349" class="difflineminus">-    return struct.pack('&gt;L', n) + table + element</span>
<a href="#l24.350"></a><span id="l24.350" class="difflineminus">-</span>
<a href="#l24.351"></a><span id="l24.351" class="difflineminus">-def iccp(out, inp):</span>
<a href="#l24.352"></a><span id="l24.352" class="difflineminus">-    profile = Profile().fromString(*profileFromPNG(inp))</span>
<a href="#l24.353"></a><span id="l24.353" class="difflineminus">-    print &gt;&gt;out, profile.d</span>
<a href="#l24.354"></a><span id="l24.354" class="difflineminus">-    print &gt;&gt;out, map(lambda x: x[0], profile.rawtagtable)</span>
<a href="#l24.355"></a><span id="l24.355" class="difflineminus">-    print &gt;&gt;out, profile.tag</span>
<a href="#l24.356"></a><span id="l24.356" class="difflineminus">-</span>
<a href="#l24.357"></a><span id="l24.357" class="difflineminus">-def profileFromPNG(inp):</span>
<a href="#l24.358"></a><span id="l24.358" class="difflineminus">-    &quot;&quot;&quot;Extract profile from PNG file.  Return (*profile*, *name*)</span>
<a href="#l24.359"></a><span id="l24.359" class="difflineminus">-    pair.&quot;&quot;&quot;</span>
<a href="#l24.360"></a><span id="l24.360" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l24.361"></a><span id="l24.361" class="difflineminus">-    _,chunk = r.chunk('iCCP')</span>
<a href="#l24.362"></a><span id="l24.362" class="difflineminus">-    i = chunk.index('\x00')</span>
<a href="#l24.363"></a><span id="l24.363" class="difflineminus">-    name = chunk[:i]</span>
<a href="#l24.364"></a><span id="l24.364" class="difflineminus">-    compression = chunk[i+1]</span>
<a href="#l24.365"></a><span id="l24.365" class="difflineminus">-    assert compression == chr(0)</span>
<a href="#l24.366"></a><span id="l24.366" class="difflineminus">-    profile = chunk[i+2:].decode('zlib')</span>
<a href="#l24.367"></a><span id="l24.367" class="difflineminus">-    return profile, name</span>
<a href="#l24.368"></a><span id="l24.368" class="difflineminus">-</span>
<a href="#l24.369"></a><span id="l24.369" class="difflineminus">-def iccpout(out, inp):</span>
<a href="#l24.370"></a><span id="l24.370" class="difflineminus">-    &quot;&quot;&quot;Extract ICC Profile from PNG file `inp` and write it to</span>
<a href="#l24.371"></a><span id="l24.371" class="difflineminus">-    the file `out`.&quot;&quot;&quot;</span>
<a href="#l24.372"></a><span id="l24.372" class="difflineminus">-</span>
<a href="#l24.373"></a><span id="l24.373" class="difflineminus">-    out.write(profileFromPNG(inp)[0])</span>
<a href="#l24.374"></a><span id="l24.374" class="difflineminus">-</span>
<a href="#l24.375"></a><span id="l24.375" class="difflineminus">-def fs15f16(x):</span>
<a href="#l24.376"></a><span id="l24.376" class="difflineminus">-    &quot;&quot;&quot;Convert float to ICC s15Fixed16Number (as a Python ``int``).&quot;&quot;&quot;</span>
<a href="#l24.377"></a><span id="l24.377" class="difflineminus">-</span>
<a href="#l24.378"></a><span id="l24.378" class="difflineminus">-    return int(round(x * 2**16))</span>
<a href="#l24.379"></a><span id="l24.379" class="difflineminus">-</span>
<a href="#l24.380"></a><span id="l24.380" class="difflineminus">-def D50():</span>
<a href="#l24.381"></a><span id="l24.381" class="difflineminus">-    &quot;&quot;&quot;Return D50 illuminant as an (X,Y,Z) triple.&quot;&quot;&quot;</span>
<a href="#l24.382"></a><span id="l24.382" class="difflineminus">-</span>
<a href="#l24.383"></a><span id="l24.383" class="difflineminus">-    # See [ICC 2001] A.1</span>
<a href="#l24.384"></a><span id="l24.384" class="difflineminus">-    return (0.9642, 1.0000, 0.8249)</span>
<a href="#l24.385"></a><span id="l24.385" class="difflineminus">-</span>
<a href="#l24.386"></a><span id="l24.386" class="difflineminus">-</span>
<a href="#l24.387"></a><span id="l24.387" class="difflineminus">-def writeICCdatetime(t=None):</span>
<a href="#l24.388"></a><span id="l24.388" class="difflineminus">-    &quot;&quot;&quot;`t` should be a gmtime tuple (as returned from</span>
<a href="#l24.389"></a><span id="l24.389" class="difflineminus">-    ``time.gmtime()``).  If not supplied, the current time will be used.</span>
<a href="#l24.390"></a><span id="l24.390" class="difflineminus">-    Return an ICC dateTimeNumber in a 12 byte string.</span>
<a href="#l24.391"></a><span id="l24.391" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l24.392"></a><span id="l24.392" class="difflineminus">-</span>
<a href="#l24.393"></a><span id="l24.393" class="difflineminus">-    import time</span>
<a href="#l24.394"></a><span id="l24.394" class="difflineminus">-    if t is None:</span>
<a href="#l24.395"></a><span id="l24.395" class="difflineminus">-        t = time.gmtime()</span>
<a href="#l24.396"></a><span id="l24.396" class="difflineminus">-    return struct.pack('&gt;6H', *t[:6])</span>
<a href="#l24.397"></a><span id="l24.397" class="difflineminus">-</span>
<a href="#l24.398"></a><span id="l24.398" class="difflineminus">-def readICCdatetime(s):</span>
<a href="#l24.399"></a><span id="l24.399" class="difflineminus">-    &quot;&quot;&quot;Convert from 12 byte ICC representation of dateTimeNumber to</span>
<a href="#l24.400"></a><span id="l24.400" class="difflineminus">-    ISO8601 string. See [ICC 2004] 5.1.1&quot;&quot;&quot;</span>
<a href="#l24.401"></a><span id="l24.401" class="difflineminus">-</span>
<a href="#l24.402"></a><span id="l24.402" class="difflineminus">-    return '%04d-%02d-%02dT%02d:%02d:%02dZ' % struct.unpack('&gt;6H', s)</span>
<a href="#l24.403"></a><span id="l24.403" class="difflineminus">-</span>
<a href="#l24.404"></a><span id="l24.404" class="difflineminus">-def readICCXYZNumber(s):</span>
<a href="#l24.405"></a><span id="l24.405" class="difflineminus">-    &quot;&quot;&quot;Convert from 12 byte ICC representation of XYZNumber to (x,y,z)</span>
<a href="#l24.406"></a><span id="l24.406" class="difflineminus">-    triple of floats.  See [ICC 2004] 5.1.11&quot;&quot;&quot;</span>
<a href="#l24.407"></a><span id="l24.407" class="difflineminus">-</span>
<a href="#l24.408"></a><span id="l24.408" class="difflineminus">-    return s15f16l(s)</span>
<a href="#l24.409"></a><span id="l24.409" class="difflineminus">-</span>
<a href="#l24.410"></a><span id="l24.410" class="difflineminus">-def s15f16l(s):</span>
<a href="#l24.411"></a><span id="l24.411" class="difflineminus">-    &quot;&quot;&quot;Convert sequence of ICC s15Fixed16 to list of float.&quot;&quot;&quot;</span>
<a href="#l24.412"></a><span id="l24.412" class="difflineminus">-    # Note: As long as float has at least 32 bits of mantissa, all</span>
<a href="#l24.413"></a><span id="l24.413" class="difflineminus">-    # values are preserved.</span>
<a href="#l24.414"></a><span id="l24.414" class="difflineminus">-    n = len(s)//4</span>
<a href="#l24.415"></a><span id="l24.415" class="difflineminus">-    t = struct.unpack('&gt;%dl' % n, s)</span>
<a href="#l24.416"></a><span id="l24.416" class="difflineminus">-    return map((2**-16).__mul__, t)</span>
<a href="#l24.417"></a><span id="l24.417" class="difflineminus">-</span>
<a href="#l24.418"></a><span id="l24.418" class="difflineminus">-# Several types and their byte encodings are defined by [ICC 2004]</span>
<a href="#l24.419"></a><span id="l24.419" class="difflineminus">-# section 10.  When encoded, a value begins with a 4 byte type</span>
<a href="#l24.420"></a><span id="l24.420" class="difflineminus">-# signature.  We use the same 4 byte type signature in the names of the</span>
<a href="#l24.421"></a><span id="l24.421" class="difflineminus">-# Python functions that decode the type into a Pythonic representation.</span>
<a href="#l24.422"></a><span id="l24.422" class="difflineminus">-</span>
<a href="#l24.423"></a><span id="l24.423" class="difflineminus">-def ICCdecode(s):</span>
<a href="#l24.424"></a><span id="l24.424" class="difflineminus">-    &quot;&quot;&quot;Take an ICC encoded tag, and dispatch on its type signature</span>
<a href="#l24.425"></a><span id="l24.425" class="difflineminus">-    (first 4 bytes) to decode it into a Python value.  Pair (*sig*,</span>
<a href="#l24.426"></a><span id="l24.426" class="difflineminus">-    *value*) is returned, where *sig* is a 4 byte string, and *value* is</span>
<a href="#l24.427"></a><span id="l24.427" class="difflineminus">-    some Python value determined by the content and type.</span>
<a href="#l24.428"></a><span id="l24.428" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l24.429"></a><span id="l24.429" class="difflineminus">-</span>
<a href="#l24.430"></a><span id="l24.430" class="difflineminus">-    sig = s[0:4].strip()</span>
<a href="#l24.431"></a><span id="l24.431" class="difflineminus">-    f=dict(text=RDtext,</span>
<a href="#l24.432"></a><span id="l24.432" class="difflineminus">-           XYZ=RDXYZ,</span>
<a href="#l24.433"></a><span id="l24.433" class="difflineminus">-           curv=RDcurv,</span>
<a href="#l24.434"></a><span id="l24.434" class="difflineminus">-           vcgt=RDvcgt,</span>
<a href="#l24.435"></a><span id="l24.435" class="difflineminus">-           sf32=RDsf32,</span>
<a href="#l24.436"></a><span id="l24.436" class="difflineminus">-           )</span>
<a href="#l24.437"></a><span id="l24.437" class="difflineminus">-    if sig not in f:</span>
<a href="#l24.438"></a><span id="l24.438" class="difflineminus">-        return None</span>
<a href="#l24.439"></a><span id="l24.439" class="difflineminus">-    return (sig, f[sig](s))</span>
<a href="#l24.440"></a><span id="l24.440" class="difflineminus">-</span>
<a href="#l24.441"></a><span id="l24.441" class="difflineminus">-def RDXYZ(s):</span>
<a href="#l24.442"></a><span id="l24.442" class="difflineminus">-    &quot;&quot;&quot;Convert ICC XYZType to rank 1 array of trimulus values.&quot;&quot;&quot;</span>
<a href="#l24.443"></a><span id="l24.443" class="difflineminus">-</span>
<a href="#l24.444"></a><span id="l24.444" class="difflineminus">-    # See [ICC 2001] 6.5.26</span>
<a href="#l24.445"></a><span id="l24.445" class="difflineminus">-    assert s[0:4] == 'XYZ '</span>
<a href="#l24.446"></a><span id="l24.446" class="difflineminus">-    return readICCXYZNumber(s[8:])</span>
<a href="#l24.447"></a><span id="l24.447" class="difflineminus">-</span>
<a href="#l24.448"></a><span id="l24.448" class="difflineminus">-def RDsf32(s):</span>
<a href="#l24.449"></a><span id="l24.449" class="difflineminus">-    &quot;&quot;&quot;Convert ICC s15Fixed16ArrayType to list of float.&quot;&quot;&quot;</span>
<a href="#l24.450"></a><span id="l24.450" class="difflineminus">-    # See [ICC 2004] 10.18</span>
<a href="#l24.451"></a><span id="l24.451" class="difflineminus">-    assert s[0:4] == 'sf32'</span>
<a href="#l24.452"></a><span id="l24.452" class="difflineminus">-    return s15f16l(s[8:])</span>
<a href="#l24.453"></a><span id="l24.453" class="difflineminus">-</span>
<a href="#l24.454"></a><span id="l24.454" class="difflineminus">-def RDmluc(s):</span>
<a href="#l24.455"></a><span id="l24.455" class="difflineminus">-    &quot;&quot;&quot;Convert ICC multiLocalizedUnicodeType.  This types encodes</span>
<a href="#l24.456"></a><span id="l24.456" class="difflineminus">-    several strings together with a language/country code for each</span>
<a href="#l24.457"></a><span id="l24.457" class="difflineminus">-    string.  A list of (*lc*, *string*) pairs is returned where *lc* is</span>
<a href="#l24.458"></a><span id="l24.458" class="difflineminus">-    the 4 byte language/country code, and *string* is the string</span>
<a href="#l24.459"></a><span id="l24.459" class="difflineminus">-    corresponding to that code.  It seems unlikely that the same</span>
<a href="#l24.460"></a><span id="l24.460" class="difflineminus">-    language/country code will appear more than once with different</span>
<a href="#l24.461"></a><span id="l24.461" class="difflineminus">-    strings, but the ICC standard does not prohibit it.&quot;&quot;&quot;</span>
<a href="#l24.462"></a><span id="l24.462" class="difflineminus">-    # See [ICC 2004] 10.13</span>
<a href="#l24.463"></a><span id="l24.463" class="difflineminus">-    assert s[0:4] == 'mluc'</span>
<a href="#l24.464"></a><span id="l24.464" class="difflineminus">-    n,sz = struct.unpack('&gt;2L', s[8:16])</span>
<a href="#l24.465"></a><span id="l24.465" class="difflineminus">-    assert sz == 12</span>
<a href="#l24.466"></a><span id="l24.466" class="difflineminus">-    record = []</span>
<a href="#l24.467"></a><span id="l24.467" class="difflineminus">-    for i in range(n):</span>
<a href="#l24.468"></a><span id="l24.468" class="difflineminus">-        lc,l,o = struct.unpack('4s2L', s[16+12*n:28+12*n])</span>
<a href="#l24.469"></a><span id="l24.469" class="difflineminus">-        record.append(lc, s[o:o+l])</span>
<a href="#l24.470"></a><span id="l24.470" class="difflineminus">-    # How are strings encoded?</span>
<a href="#l24.471"></a><span id="l24.471" class="difflineminus">-    return record</span>
<a href="#l24.472"></a><span id="l24.472" class="difflineminus">-</span>
<a href="#l24.473"></a><span id="l24.473" class="difflineminus">-def RDtext(s):</span>
<a href="#l24.474"></a><span id="l24.474" class="difflineminus">-    &quot;&quot;&quot;Convert ICC textType to Python string.&quot;&quot;&quot;</span>
<a href="#l24.475"></a><span id="l24.475" class="difflineminus">-    # Note: type not specified or used in [ICC 2004], only in older</span>
<a href="#l24.476"></a><span id="l24.476" class="difflineminus">-    # [ICC 2001].</span>
<a href="#l24.477"></a><span id="l24.477" class="difflineminus">-    # See [ICC 2001] 6.5.18</span>
<a href="#l24.478"></a><span id="l24.478" class="difflineminus">-    assert s[0:4] == 'text'</span>
<a href="#l24.479"></a><span id="l24.479" class="difflineminus">-    return s[8:-1]</span>
<a href="#l24.480"></a><span id="l24.480" class="difflineminus">-</span>
<a href="#l24.481"></a><span id="l24.481" class="difflineminus">-def RDcurv(s):</span>
<a href="#l24.482"></a><span id="l24.482" class="difflineminus">-    &quot;&quot;&quot;Convert ICC curveType.&quot;&quot;&quot;</span>
<a href="#l24.483"></a><span id="l24.483" class="difflineminus">-    # See [ICC 2001] 6.5.3</span>
<a href="#l24.484"></a><span id="l24.484" class="difflineminus">-    assert s[0:4] == 'curv'</span>
<a href="#l24.485"></a><span id="l24.485" class="difflineminus">-    count, = struct.unpack('&gt;L', s[8:12])</span>
<a href="#l24.486"></a><span id="l24.486" class="difflineminus">-    if count == 0:</span>
<a href="#l24.487"></a><span id="l24.487" class="difflineminus">-        return dict(gamma=1)</span>
<a href="#l24.488"></a><span id="l24.488" class="difflineminus">-    table = struct.unpack('&gt;%dH' % count, s[12:])</span>
<a href="#l24.489"></a><span id="l24.489" class="difflineminus">-    if count == 1:</span>
<a href="#l24.490"></a><span id="l24.490" class="difflineminus">-        return dict(gamma=table[0]*2**-8)</span>
<a href="#l24.491"></a><span id="l24.491" class="difflineminus">-    return table</span>
<a href="#l24.492"></a><span id="l24.492" class="difflineminus">-</span>
<a href="#l24.493"></a><span id="l24.493" class="difflineminus">-def RDvcgt(s):</span>
<a href="#l24.494"></a><span id="l24.494" class="difflineminus">-    &quot;&quot;&quot;Convert Apple CMVideoCardGammaType.&quot;&quot;&quot;</span>
<a href="#l24.495"></a><span id="l24.495" class="difflineminus">-    # See</span>
<a href="#l24.496"></a><span id="l24.496" class="difflineminus">-    # http://developer.apple.com/documentation/GraphicsImaging/Reference/ColorSync_Manager/Reference/reference.html#//apple_ref/c/tdef/CMVideoCardGammaType</span>
<a href="#l24.497"></a><span id="l24.497" class="difflineminus">-    assert s[0:4] == 'vcgt'</span>
<a href="#l24.498"></a><span id="l24.498" class="difflineminus">-    tagtype, = struct.unpack('&gt;L', s[8:12])</span>
<a href="#l24.499"></a><span id="l24.499" class="difflineminus">-    if tagtype != 0:</span>
<a href="#l24.500"></a><span id="l24.500" class="difflineminus">-        return s[8:]</span>
<a href="#l24.501"></a><span id="l24.501" class="difflineminus">-    if tagtype == 0:</span>
<a href="#l24.502"></a><span id="l24.502" class="difflineminus">-        # Table.</span>
<a href="#l24.503"></a><span id="l24.503" class="difflineminus">-        channels,count,size = struct.unpack('&gt;3H', s[12:18])</span>
<a href="#l24.504"></a><span id="l24.504" class="difflineminus">-        if size == 1:</span>
<a href="#l24.505"></a><span id="l24.505" class="difflineminus">-            fmt = 'B'</span>
<a href="#l24.506"></a><span id="l24.506" class="difflineminus">-        elif size == 2:</span>
<a href="#l24.507"></a><span id="l24.507" class="difflineminus">-            fmt = 'H'</span>
<a href="#l24.508"></a><span id="l24.508" class="difflineminus">-        else:</span>
<a href="#l24.509"></a><span id="l24.509" class="difflineminus">-            return s[8:]</span>
<a href="#l24.510"></a><span id="l24.510" class="difflineminus">-        l = len(s[18:])//size</span>
<a href="#l24.511"></a><span id="l24.511" class="difflineminus">-        t = struct.unpack('&gt;%d%s' % (l, fmt), s[18:])</span>
<a href="#l24.512"></a><span id="l24.512" class="difflineminus">-        t = group(t, count)</span>
<a href="#l24.513"></a><span id="l24.513" class="difflineminus">-        return size, t</span>
<a href="#l24.514"></a><span id="l24.514" class="difflineminus">-    return s[8:]</span>
<a href="#l24.515"></a><span id="l24.515" class="difflineminus">-</span>
<a href="#l24.516"></a><span id="l24.516" class="difflineminus">-</span>
<a href="#l24.517"></a><span id="l24.517" class="difflineminus">-def group(s, n):</span>
<a href="#l24.518"></a><span id="l24.518" class="difflineminus">-    # See</span>
<a href="#l24.519"></a><span id="l24.519" class="difflineminus">-    # http://www.python.org/doc/2.6/library/functions.html#zip</span>
<a href="#l24.520"></a><span id="l24.520" class="difflineminus">-    return zip(*[iter(s)]*n)</span>
<a href="#l24.521"></a><span id="l24.521" class="difflineminus">-</span>
<a href="#l24.522"></a><span id="l24.522" class="difflineminus">-</span>
<a href="#l24.523"></a><span id="l24.523" class="difflineminus">-def main(argv=None):</span>
<a href="#l24.524"></a><span id="l24.524" class="difflineminus">-    import sys</span>
<a href="#l24.525"></a><span id="l24.525" class="difflineminus">-    from getopt import getopt</span>
<a href="#l24.526"></a><span id="l24.526" class="difflineminus">-    if argv is None:</span>
<a href="#l24.527"></a><span id="l24.527" class="difflineminus">-        argv = sys.argv</span>
<a href="#l24.528"></a><span id="l24.528" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l24.529"></a><span id="l24.529" class="difflineminus">-    opt,arg = getopt(argv, 'o:')</span>
<a href="#l24.530"></a><span id="l24.530" class="difflineminus">-    if len(arg) &gt; 0:</span>
<a href="#l24.531"></a><span id="l24.531" class="difflineminus">-        inp = open(arg[0], 'rb')</span>
<a href="#l24.532"></a><span id="l24.532" class="difflineminus">-    else:</span>
<a href="#l24.533"></a><span id="l24.533" class="difflineminus">-        inp = sys.stdin</span>
<a href="#l24.534"></a><span id="l24.534" class="difflineminus">-    for o,v in opt:</span>
<a href="#l24.535"></a><span id="l24.535" class="difflineminus">-        if o == '-o':</span>
<a href="#l24.536"></a><span id="l24.536" class="difflineminus">-            f = open(v, 'wb')</span>
<a href="#l24.537"></a><span id="l24.537" class="difflineminus">-            return iccpout(f, inp)</span>
<a href="#l24.538"></a><span id="l24.538" class="difflineminus">-    return iccp(sys.stdout, inp)</span>
<a href="#l24.539"></a><span id="l24.539" class="difflineminus">-</span>
<a href="#l24.540"></a><span id="l24.540" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l24.541"></a><span id="l24.541" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">deleted file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineminus">--- a/build/pypng/mkiccp.py</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineplus">+++ /dev/null</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineat">@@ -1,45 +0,0 @@</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/mkiccp.py $</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineminus">-# $Rev: 182 $</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineminus">-# Make ICC Profile</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineminus">-</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineminus">-# References</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineminus">-#</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-# [ICC 2001] ICC Specification ICC.1:2001-04 (Profile version 2.4.0)</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-# [ICC 2004] ICC Specification ICC.1:2004-10 (Profile version 4.2.0.0)</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineminus">-</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineminus">-import struct</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineminus">-</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineminus">-# Local module.</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineminus">-import iccp</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineminus">-</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineminus">-def black(m):</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineminus">-    &quot;&quot;&quot;Return a function that maps all values from [0.0,m] to 0, and maps</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineminus">-    the range [m,1.0] into [0.0, 1.0] linearly.</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineminus">-</span>
<a href="#l25.25"></a><span id="l25.25" class="difflineminus">-    m = float(m)</span>
<a href="#l25.26"></a><span id="l25.26" class="difflineminus">-</span>
<a href="#l25.27"></a><span id="l25.27" class="difflineminus">-    def f(x):</span>
<a href="#l25.28"></a><span id="l25.28" class="difflineminus">-        if x &lt;= m:</span>
<a href="#l25.29"></a><span id="l25.29" class="difflineminus">-            return 0.0</span>
<a href="#l25.30"></a><span id="l25.30" class="difflineminus">-        return (x-m)/(1.0-m)</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">-    return f</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineminus">-</span>
<a href="#l25.33"></a><span id="l25.33" class="difflineminus">-# For monochrome input the required tags are (See [ICC 2001] 6.3.1.1):</span>
<a href="#l25.34"></a><span id="l25.34" class="difflineminus">-# profileDescription [ICC 2001] 6.4.32</span>
<a href="#l25.35"></a><span id="l25.35" class="difflineminus">-# grayTRC [ICC 2001] 6.4.19</span>
<a href="#l25.36"></a><span id="l25.36" class="difflineminus">-# mediaWhitePoint [ICC 2001] 6.4.25</span>
<a href="#l25.37"></a><span id="l25.37" class="difflineminus">-# copyright [ICC 2001] 6.4.13</span>
<a href="#l25.38"></a><span id="l25.38" class="difflineminus">-</span>
<a href="#l25.39"></a><span id="l25.39" class="difflineminus">-def agreyprofile(out):</span>
<a href="#l25.40"></a><span id="l25.40" class="difflineminus">-    it = iccp.Profile().greyInput()</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineminus">-    it.addTags(kTRC=black(0.07))</span>
<a href="#l25.42"></a><span id="l25.42" class="difflineminus">-    it.write(out)</span>
<a href="#l25.43"></a><span id="l25.43" class="difflineminus">-</span>
<a href="#l25.44"></a><span id="l25.44" class="difflineminus">-def main():</span>
<a href="#l25.45"></a><span id="l25.45" class="difflineminus">-    import sys</span>
<a href="#l25.46"></a><span id="l25.46" class="difflineminus">-    agreyprofile(sys.stdout)</span>
<a href="#l25.47"></a><span id="l25.47" class="difflineminus">-</span>
<a href="#l25.48"></a><span id="l25.48" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l25.49"></a><span id="l25.49" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">deleted file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineminus">--- a/build/pypng/pdsimgtopng</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineplus">+++ /dev/null</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineat">@@ -1,99 +0,0 @@</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l26.6"></a><span id="l26.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pdsimgtopng $</span>
<a href="#l26.7"></a><span id="l26.7" class="difflineminus">-# $Rev: 154 $</span>
<a href="#l26.8"></a><span id="l26.8" class="difflineminus">-# PDS Image to PNG</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineminus">-</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineminus">-import re</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineminus">-import struct</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-import png</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineminus">-</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineminus">-class FormatError(Exception):</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineminus">-    pass</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineminus">-</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineminus">-def pdskey(s, k):</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineminus">-    &quot;&quot;&quot;Lookup key `k` in string `s`.  Returns value (as a string), or</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineminus">-    raises exception if not found.</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineminus">-</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineminus">-    assert re.match(r' *\^?[:\w]+$', k)</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineminus">-    safere = '^' + re.escape(k) +r' *= *(\w+)'</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineminus">-    m = re.search(safere, s, re.MULTILINE)</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineminus">-    if not m:</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineminus">-        raise FormatError(&quot;Can't find %s.&quot; % k)</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineminus">-    return m.group(1)</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineminus">-</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineminus">-def img(inp):</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-    &quot;&quot;&quot;Open the PDS IMG file `inp` and return (*pixels*, *info*).</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineminus">-    *pixels* is an iterator over the rows, *info* is the information</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineminus">-    dictionary.</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineminus">-</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineminus">-    err = __import__('sys').stderr</span>
<a href="#l26.37"></a><span id="l26.37" class="difflineminus">-</span>
<a href="#l26.38"></a><span id="l26.38" class="difflineminus">-    consumed = 1024</span>
<a href="#l26.39"></a><span id="l26.39" class="difflineminus">-</span>
<a href="#l26.40"></a><span id="l26.40" class="difflineminus">-    s = inp.read(consumed)</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineminus">-    record_type = pdskey(s, 'RECORD_TYPE')</span>
<a href="#l26.42"></a><span id="l26.42" class="difflineminus">-    if record_type != 'FIXED_LENGTH':</span>
<a href="#l26.43"></a><span id="l26.43" class="difflineminus">-        raise FormatError(</span>
<a href="#l26.44"></a><span id="l26.44" class="difflineminus">-          &quot;Can only deal with FIXED_LENGTH record type (found %s)&quot; %</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineminus">-            record_type)</span>
<a href="#l26.46"></a><span id="l26.46" class="difflineminus">-    record_bytes = int(pdskey(s,'RECORD_BYTES'))</span>
<a href="#l26.47"></a><span id="l26.47" class="difflineminus">-    file_records = int(pdskey(s, 'FILE_RECORDS'))</span>
<a href="#l26.48"></a><span id="l26.48" class="difflineminus">-    label_records = int(pdskey(s, 'LABEL_RECORDS'))</span>
<a href="#l26.49"></a><span id="l26.49" class="difflineminus">-    remaining = label_records * record_bytes - consumed</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineminus">-    s += inp.read(remaining)</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineminus">-    consumed += remaining</span>
<a href="#l26.52"></a><span id="l26.52" class="difflineminus">-</span>
<a href="#l26.53"></a><span id="l26.53" class="difflineminus">-    image_pointer = int(pdskey(s, '^IMAGE'))</span>
<a href="#l26.54"></a><span id="l26.54" class="difflineminus">-    # &quot;^IMAGE&quot; locates a record.  Records are numbered starting from 1.</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineminus">-    image_index = image_pointer - 1</span>
<a href="#l26.56"></a><span id="l26.56" class="difflineminus">-    image_offset = image_index * record_bytes</span>
<a href="#l26.57"></a><span id="l26.57" class="difflineminus">-    gap = image_offset - consumed</span>
<a href="#l26.58"></a><span id="l26.58" class="difflineminus">-    assert gap &gt;= 0</span>
<a href="#l26.59"></a><span id="l26.59" class="difflineminus">-    if gap:</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineminus">-        inp.read(gap)</span>
<a href="#l26.61"></a><span id="l26.61" class="difflineminus">-    # This assumes there is only one OBJECT in the file, and it is the</span>
<a href="#l26.62"></a><span id="l26.62" class="difflineminus">-    # IMAGE.</span>
<a href="#l26.63"></a><span id="l26.63" class="difflineminus">-    height = int(pdskey(s, '  LINES'))</span>
<a href="#l26.64"></a><span id="l26.64" class="difflineminus">-    width = int(pdskey(s, '  LINE_SAMPLES'))</span>
<a href="#l26.65"></a><span id="l26.65" class="difflineminus">-    sample_type = pdskey(s, '  SAMPLE_TYPE')</span>
<a href="#l26.66"></a><span id="l26.66" class="difflineminus">-    sample_bits = int(pdskey(s, '  SAMPLE_BITS'))</span>
<a href="#l26.67"></a><span id="l26.67" class="difflineminus">-    # For Messenger MDIS, SAMPLE_BITS is reported as 16, but only values</span>
<a href="#l26.68"></a><span id="l26.68" class="difflineminus">-    # from 0 ot 4095 are used.</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineminus">-    bitdepth = 12</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineminus">-    if sample_type == 'MSB_UNSIGNED_INTEGER':</span>
<a href="#l26.71"></a><span id="l26.71" class="difflineminus">-        fmt = '&gt;H'</span>
<a href="#l26.72"></a><span id="l26.72" class="difflineminus">-    else:</span>
<a href="#l26.73"></a><span id="l26.73" class="difflineminus">-        raise 'Unknown sample type: %s.' % sample_type</span>
<a href="#l26.74"></a><span id="l26.74" class="difflineminus">-    sample_bytes = (1,2)[bitdepth &gt; 8]</span>
<a href="#l26.75"></a><span id="l26.75" class="difflineminus">-    row_bytes = sample_bytes * width</span>
<a href="#l26.76"></a><span id="l26.76" class="difflineminus">-    fmt = fmt[:1] + str(width) + fmt[1:]</span>
<a href="#l26.77"></a><span id="l26.77" class="difflineminus">-    def rowiter():</span>
<a href="#l26.78"></a><span id="l26.78" class="difflineminus">-        for y in range(height):</span>
<a href="#l26.79"></a><span id="l26.79" class="difflineminus">-            yield struct.unpack(fmt, inp.read(row_bytes))</span>
<a href="#l26.80"></a><span id="l26.80" class="difflineminus">-    info = dict(greyscale=True, alpha=False, bitdepth=bitdepth,</span>
<a href="#l26.81"></a><span id="l26.81" class="difflineminus">-      size=(width,height), gamma=1.0)</span>
<a href="#l26.82"></a><span id="l26.82" class="difflineminus">-    return rowiter(), info</span>
<a href="#l26.83"></a><span id="l26.83" class="difflineminus">-</span>
<a href="#l26.84"></a><span id="l26.84" class="difflineminus">-</span>
<a href="#l26.85"></a><span id="l26.85" class="difflineminus">-def main(argv=None):</span>
<a href="#l26.86"></a><span id="l26.86" class="difflineminus">-    import sys</span>
<a href="#l26.87"></a><span id="l26.87" class="difflineminus">-</span>
<a href="#l26.88"></a><span id="l26.88" class="difflineminus">-    if argv is None:</span>
<a href="#l26.89"></a><span id="l26.89" class="difflineminus">-        argv = sys.argv</span>
<a href="#l26.90"></a><span id="l26.90" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l26.91"></a><span id="l26.91" class="difflineminus">-    arg = argv</span>
<a href="#l26.92"></a><span id="l26.92" class="difflineminus">-    if len(arg) &gt;= 1:</span>
<a href="#l26.93"></a><span id="l26.93" class="difflineminus">-        f = open(arg[0], 'rb')</span>
<a href="#l26.94"></a><span id="l26.94" class="difflineminus">-    else:</span>
<a href="#l26.95"></a><span id="l26.95" class="difflineminus">-        f = sys.stdin</span>
<a href="#l26.96"></a><span id="l26.96" class="difflineminus">-    pixels,info = img(f)</span>
<a href="#l26.97"></a><span id="l26.97" class="difflineminus">-    w = png.Writer(**info)</span>
<a href="#l26.98"></a><span id="l26.98" class="difflineminus">-    w.write(sys.stdout, pixels)</span>
<a href="#l26.99"></a><span id="l26.99" class="difflineminus">-</span>
<a href="#l26.100"></a><span id="l26.100" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l26.101"></a><span id="l26.101" class="difflineminus">-    main()</span>
<a href="#l26.102"></a><span id="l26.102" class="difflineminus">-</span>
<a href="#l26.103"></a><span id="l26.103" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">deleted file mode 100644</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineminus">--- a/build/pypng/pipasgrey</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineplus">+++ /dev/null</span>
<a href="#l27.4"></a><span id="l27.4" class="difflineat">@@ -1,73 +0,0 @@</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l27.6"></a><span id="l27.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipasgrey $</span>
<a href="#l27.7"></a><span id="l27.7" class="difflineminus">-# $Rev: 187 $</span>
<a href="#l27.8"></a><span id="l27.8" class="difflineminus">-</span>
<a href="#l27.9"></a><span id="l27.9" class="difflineminus">-# pipasgrey</span>
<a href="#l27.10"></a><span id="l27.10" class="difflineminus">-</span>
<a href="#l27.11"></a><span id="l27.11" class="difflineminus">-# Convert image to grey (L, or LA), but only if that involves no colour</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-# change.</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineminus">-def asgrey(out, inp, quiet=False):</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineminus">-    &quot;&quot;&quot;Convert image to greyscale, but only when no colour change.  This</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-    works by using the input G channel (green) as the output L channel</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineminus">-    (luminance) and checking that every pixel is grey as we go.  A non-grey</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineminus">-    pixel will raise an error, but if `quiet` is true then the grey pixel</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineminus">-    check is suppressed.</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineminus">-</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineminus">-    from array import array</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineminus">-</span>
<a href="#l27.24"></a><span id="l27.24" class="difflineminus">-    import png</span>
<a href="#l27.25"></a><span id="l27.25" class="difflineminus">-</span>
<a href="#l27.26"></a><span id="l27.26" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineminus">-    _,_,pixels,info = r.asDirect()</span>
<a href="#l27.28"></a><span id="l27.28" class="difflineminus">-    if info['greyscale']:</span>
<a href="#l27.29"></a><span id="l27.29" class="difflineminus">-        w = png.Writer(**info)</span>
<a href="#l27.30"></a><span id="l27.30" class="difflineminus">-        return w.write(out, pixels)</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-    planes = info['planes']</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineminus">-    targetplanes = planes - 2</span>
<a href="#l27.33"></a><span id="l27.33" class="difflineminus">-    alpha = info['alpha']</span>
<a href="#l27.34"></a><span id="l27.34" class="difflineminus">-    width = info['size'][0]</span>
<a href="#l27.35"></a><span id="l27.35" class="difflineminus">-    typecode = 'BH'[info['bitdepth'] &gt; 8]</span>
<a href="#l27.36"></a><span id="l27.36" class="difflineminus">-    # Values per target row</span>
<a href="#l27.37"></a><span id="l27.37" class="difflineminus">-    vpr = width * (targetplanes)</span>
<a href="#l27.38"></a><span id="l27.38" class="difflineminus">-    def iterasgrey():</span>
<a href="#l27.39"></a><span id="l27.39" class="difflineminus">-        for i,row in enumerate(pixels):</span>
<a href="#l27.40"></a><span id="l27.40" class="difflineminus">-            row = array(typecode, row)</span>
<a href="#l27.41"></a><span id="l27.41" class="difflineminus">-            targetrow = array(typecode, [0]*vpr)</span>
<a href="#l27.42"></a><span id="l27.42" class="difflineminus">-            # Copy G (and possibly A) channel.</span>
<a href="#l27.43"></a><span id="l27.43" class="difflineminus">-            green = row[0::planes]</span>
<a href="#l27.44"></a><span id="l27.44" class="difflineminus">-            if alpha:</span>
<a href="#l27.45"></a><span id="l27.45" class="difflineminus">-                targetrow[0::2] = green</span>
<a href="#l27.46"></a><span id="l27.46" class="difflineminus">-                targetrow[1::2] = row[3::4]</span>
<a href="#l27.47"></a><span id="l27.47" class="difflineminus">-            else:</span>
<a href="#l27.48"></a><span id="l27.48" class="difflineminus">-                targetrow = green</span>
<a href="#l27.49"></a><span id="l27.49" class="difflineminus">-            # Check R and B channel match.</span>
<a href="#l27.50"></a><span id="l27.50" class="difflineminus">-            if not quiet and (</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineminus">-              green != row[0::planes] or green != row[2::planes]):</span>
<a href="#l27.52"></a><span id="l27.52" class="difflineminus">-                raise ValueError('Row %i contains non-grey pixel.' % i)</span>
<a href="#l27.53"></a><span id="l27.53" class="difflineminus">-            yield targetrow</span>
<a href="#l27.54"></a><span id="l27.54" class="difflineminus">-    info['greyscale'] = True</span>
<a href="#l27.55"></a><span id="l27.55" class="difflineminus">-    del info['planes']</span>
<a href="#l27.56"></a><span id="l27.56" class="difflineminus">-    w = png.Writer(**info)</span>
<a href="#l27.57"></a><span id="l27.57" class="difflineminus">-    w.write(out, iterasgrey())</span>
<a href="#l27.58"></a><span id="l27.58" class="difflineminus">-</span>
<a href="#l27.59"></a><span id="l27.59" class="difflineminus">-def main(argv=None):</span>
<a href="#l27.60"></a><span id="l27.60" class="difflineminus">-    from getopt import getopt</span>
<a href="#l27.61"></a><span id="l27.61" class="difflineminus">-    import sys</span>
<a href="#l27.62"></a><span id="l27.62" class="difflineminus">-    if argv is None:</span>
<a href="#l27.63"></a><span id="l27.63" class="difflineminus">-        argv = sys.argv</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l27.65"></a><span id="l27.65" class="difflineminus">-    opt,argv = getopt(argv, 'q')</span>
<a href="#l27.66"></a><span id="l27.66" class="difflineminus">-    quiet = False</span>
<a href="#l27.67"></a><span id="l27.67" class="difflineminus">-    for o,v in opt:</span>
<a href="#l27.68"></a><span id="l27.68" class="difflineminus">-        if o == '-q':</span>
<a href="#l27.69"></a><span id="l27.69" class="difflineminus">-            quiet = True</span>
<a href="#l27.70"></a><span id="l27.70" class="difflineminus">-    if len(argv) &gt; 0:</span>
<a href="#l27.71"></a><span id="l27.71" class="difflineminus">-        f = open(argv[0], 'rb')</span>
<a href="#l27.72"></a><span id="l27.72" class="difflineminus">-    else:</span>
<a href="#l27.73"></a><span id="l27.73" class="difflineminus">-        f = sys.stdin</span>
<a href="#l27.74"></a><span id="l27.74" class="difflineminus">-    return asgrey(sys.stdout, f, quiet)</span>
<a href="#l27.75"></a><span id="l27.75" class="difflineminus">-</span>
<a href="#l27.76"></a><span id="l27.76" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l27.77"></a><span id="l27.77" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">deleted file mode 100644</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineminus">--- a/build/pypng/pipcat</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineplus">+++ /dev/null</span>
<a href="#l28.4"></a><span id="l28.4" class="difflineat">@@ -1,44 +0,0 @@</span>
<a href="#l28.5"></a><span id="l28.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l28.6"></a><span id="l28.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipcat $</span>
<a href="#l28.7"></a><span id="l28.7" class="difflineminus">-# $Rev: 77 $</span>
<a href="#l28.8"></a><span id="l28.8" class="difflineminus">-</span>
<a href="#l28.9"></a><span id="l28.9" class="difflineminus">-# http://www.python.org/doc/2.4.4/lib/module-itertools.html</span>
<a href="#l28.10"></a><span id="l28.10" class="difflineminus">-import itertools</span>
<a href="#l28.11"></a><span id="l28.11" class="difflineminus">-import sys</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineminus">-import png</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineminus">-</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineminus">-def cat(out, l):</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineminus">-    &quot;&quot;&quot;Concatenate the list of images.  All input images must be same</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineminus">-    height and have the same number of channels.  They are concatenated</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineminus">-    left-to-right.  `out` is the (open file) destination for the</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineminus">-    output image.  `l` should be a list of open files (the input</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineminus">-    image files).</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineminus">-</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineminus">-    l = map(lambda f: png.Reader(file=f), l)</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineminus">-    # Ewgh, side effects.</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineminus">-    map(lambda r: r.preamble(), l)</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineminus">-    # The reference height; from the first image.</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineminus">-    height = l[0].height</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineminus">-    # The total target width</span>
<a href="#l28.29"></a><span id="l28.29" class="difflineminus">-    width = 0</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineminus">-    for i,r in enumerate(l):</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-        if r.height != height:</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineminus">-            raise Error('Image %d, height %d, does not match %d.' %</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineminus">-              (i, r.height, height))</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineminus">-        width += r.width</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineminus">-    pixel,info = zip(*map(lambda r: r.asDirect()[2:4], l))</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineminus">-    tinfo = dict(info[0])</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineminus">-    del tinfo['size']</span>
<a href="#l28.38"></a><span id="l28.38" class="difflineminus">-    w = png.Writer(width, height, **tinfo)</span>
<a href="#l28.39"></a><span id="l28.39" class="difflineminus">-    def itercat():</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineminus">-        for row in itertools.izip(*pixel):</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineminus">-            yield itertools.chain(*row)</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineminus">-    w.write(out, itercat())</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineminus">-</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineminus">-def main(argv):</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineminus">-    return cat(sys.stdout, map(lambda n: open(n, 'rb'), argv[1:]))</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineminus">-</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineminus">-    main(sys.argv)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">deleted file mode 100644</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineminus">--- a/build/pypng/pipcolours</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineplus">+++ /dev/null</span>
<a href="#l29.4"></a><span id="l29.4" class="difflineat">@@ -1,56 +0,0 @@</span>
<a href="#l29.5"></a><span id="l29.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l29.6"></a><span id="l29.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipcolours $</span>
<a href="#l29.7"></a><span id="l29.7" class="difflineminus">-# $Rev: 96 $</span>
<a href="#l29.8"></a><span id="l29.8" class="difflineminus">-</span>
<a href="#l29.9"></a><span id="l29.9" class="difflineminus">-# pipcolours - extract all colours present in source image.</span>
<a href="#l29.10"></a><span id="l29.10" class="difflineminus">-</span>
<a href="#l29.11"></a><span id="l29.11" class="difflineminus">-def colours(out, inp):</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-    import itertools</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-    import png</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineminus">-</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l29.16"></a><span id="l29.16" class="difflineminus">-    _,_,pixels,info = r.asDirect()</span>
<a href="#l29.17"></a><span id="l29.17" class="difflineminus">-    planes = info['planes']</span>
<a href="#l29.18"></a><span id="l29.18" class="difflineminus">-    col = set()</span>
<a href="#l29.19"></a><span id="l29.19" class="difflineminus">-    for row in pixels:</span>
<a href="#l29.20"></a><span id="l29.20" class="difflineminus">-        # Ewgh, side effects on col</span>
<a href="#l29.21"></a><span id="l29.21" class="difflineminus">-        map(col.add, png.group(row, planes))</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineminus">-    col,planes = channel_reduce(col, planes)</span>
<a href="#l29.23"></a><span id="l29.23" class="difflineminus">-    col = list(col)</span>
<a href="#l29.24"></a><span id="l29.24" class="difflineminus">-    col.sort()</span>
<a href="#l29.25"></a><span id="l29.25" class="difflineminus">-    col = list(itertools.chain(*col))</span>
<a href="#l29.26"></a><span id="l29.26" class="difflineminus">-    width = len(col)//planes</span>
<a href="#l29.27"></a><span id="l29.27" class="difflineminus">-    greyscale = planes in (1,2)</span>
<a href="#l29.28"></a><span id="l29.28" class="difflineminus">-    alpha = planes in (2,4)</span>
<a href="#l29.29"></a><span id="l29.29" class="difflineminus">-    bitdepth = info['bitdepth']</span>
<a href="#l29.30"></a><span id="l29.30" class="difflineminus">-    w = png.Writer(width, 1,</span>
<a href="#l29.31"></a><span id="l29.31" class="difflineminus">-        bitdepth=bitdepth, greyscale=greyscale, alpha=alpha)</span>
<a href="#l29.32"></a><span id="l29.32" class="difflineminus">-    w.write(out, [col])</span>
<a href="#l29.33"></a><span id="l29.33" class="difflineminus">-</span>
<a href="#l29.34"></a><span id="l29.34" class="difflineminus">-def channel_reduce(col, planes):</span>
<a href="#l29.35"></a><span id="l29.35" class="difflineminus">-    &quot;&quot;&quot;Attempt to reduce the number of channels in the set of</span>
<a href="#l29.36"></a><span id="l29.36" class="difflineminus">-    colours.&quot;&quot;&quot;</span>
<a href="#l29.37"></a><span id="l29.37" class="difflineminus">-    if planes &gt;= 3:</span>
<a href="#l29.38"></a><span id="l29.38" class="difflineminus">-        def isgrey(c):</span>
<a href="#l29.39"></a><span id="l29.39" class="difflineminus">-            return c[0] == c[1] == c[2]</span>
<a href="#l29.40"></a><span id="l29.40" class="difflineminus">-        if min(map(isgrey, col)) == True:</span>
<a href="#l29.41"></a><span id="l29.41" class="difflineminus">-            # Every colour is grey.</span>
<a href="#l29.42"></a><span id="l29.42" class="difflineminus">-            col = set(map(lambda x: x[0::3], col))</span>
<a href="#l29.43"></a><span id="l29.43" class="difflineminus">-            planes -= 2</span>
<a href="#l29.44"></a><span id="l29.44" class="difflineminus">-    return col,planes</span>
<a href="#l29.45"></a><span id="l29.45" class="difflineminus">-</span>
<a href="#l29.46"></a><span id="l29.46" class="difflineminus">-def main(argv=None):</span>
<a href="#l29.47"></a><span id="l29.47" class="difflineminus">-    import sys</span>
<a href="#l29.48"></a><span id="l29.48" class="difflineminus">-</span>
<a href="#l29.49"></a><span id="l29.49" class="difflineminus">-    if argv is None:</span>
<a href="#l29.50"></a><span id="l29.50" class="difflineminus">-        argv = sys.argv</span>
<a href="#l29.51"></a><span id="l29.51" class="difflineminus">-</span>
<a href="#l29.52"></a><span id="l29.52" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l29.53"></a><span id="l29.53" class="difflineminus">-    if len(argv) &gt; 0:</span>
<a href="#l29.54"></a><span id="l29.54" class="difflineminus">-        f = open(argv[0], 'rb')</span>
<a href="#l29.55"></a><span id="l29.55" class="difflineminus">-    else:</span>
<a href="#l29.56"></a><span id="l29.56" class="difflineminus">-        f = sys.stdin</span>
<a href="#l29.57"></a><span id="l29.57" class="difflineminus">-    return colours(sys.stdout, f)</span>
<a href="#l29.58"></a><span id="l29.58" class="difflineminus">-</span>
<a href="#l29.59"></a><span id="l29.59" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l29.60"></a><span id="l29.60" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">deleted file mode 100644</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineminus">--- a/build/pypng/pipcomposite</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineplus">+++ /dev/null</span>
<a href="#l30.4"></a><span id="l30.4" class="difflineat">@@ -1,121 +0,0 @@</span>
<a href="#l30.5"></a><span id="l30.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l30.6"></a><span id="l30.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipcomposite $</span>
<a href="#l30.7"></a><span id="l30.7" class="difflineminus">-# $Rev: 208 $</span>
<a href="#l30.8"></a><span id="l30.8" class="difflineminus">-# pipcomposite</span>
<a href="#l30.9"></a><span id="l30.9" class="difflineminus">-# Image alpha compositing.</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineminus">-</span>
<a href="#l30.11"></a><span id="l30.11" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-pipcomposite [--background #rrggbb] file.png</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineminus">-</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineminus">-Composite an image onto a background and output the result.  The</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineminus">-background colour is specified with an HTML-style triple (3, 6, or 12</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineminus">-hex digits), and defaults to black (#000).</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineminus">-</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineminus">-The output PNG has no alpha channel.</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineminus">-</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineminus">-It is valid for the input to have no alpha channel, but it doesn't</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineminus">-make much sense: the output will equal the input.</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineminus">-</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineminus">-import sys</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineminus">-</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineminus">-def composite(out, inp, background):</span>
<a href="#l30.27"></a><span id="l30.27" class="difflineminus">-    import png</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineminus">-</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineminus">-    p = png.Reader(file=inp)</span>
<a href="#l30.30"></a><span id="l30.30" class="difflineminus">-    w,h,pixel,info = p.asRGBA()</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineminus">-    outinfo = dict(info)</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineminus">-    outinfo['alpha'] = False</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineminus">-    outinfo['planes'] -= 1</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineminus">-    outinfo['interlace'] = 0</span>
<a href="#l30.36"></a><span id="l30.36" class="difflineminus">-</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineminus">-    # Convert to tuple and normalise to same range as source.</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineminus">-    background = rgbhex(background)</span>
<a href="#l30.39"></a><span id="l30.39" class="difflineminus">-    maxval = float(2**info['bitdepth'] - 1)</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineminus">-    background = map(lambda x: int(0.5 + x*maxval/65535.0),</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineminus">-                     background)</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineminus">-    # Repeat background so that it's a whole row of sample values.</span>
<a href="#l30.43"></a><span id="l30.43" class="difflineminus">-    background *= w</span>
<a href="#l30.44"></a><span id="l30.44" class="difflineminus">-</span>
<a href="#l30.45"></a><span id="l30.45" class="difflineminus">-    def iterrow():</span>
<a href="#l30.46"></a><span id="l30.46" class="difflineminus">-        for row in pixel:</span>
<a href="#l30.47"></a><span id="l30.47" class="difflineminus">-            # Remove alpha from row, then create a list with one alpha</span>
<a href="#l30.48"></a><span id="l30.48" class="difflineminus">-            # entry _per channel value_.</span>
<a href="#l30.49"></a><span id="l30.49" class="difflineminus">-            # Squirrel the alpha channel away (and normalise it).</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineminus">-            t = map(lambda x: x/maxval, row[3::4])</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineminus">-            row = list(row)</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineminus">-            del row[3::4]</span>
<a href="#l30.53"></a><span id="l30.53" class="difflineminus">-            alpha = row[:]</span>
<a href="#l30.54"></a><span id="l30.54" class="difflineminus">-            for i in range(3):</span>
<a href="#l30.55"></a><span id="l30.55" class="difflineminus">-                alpha[i::3] = t</span>
<a href="#l30.56"></a><span id="l30.56" class="difflineminus">-            assert len(alpha) == len(row) == len(background)</span>
<a href="#l30.57"></a><span id="l30.57" class="difflineminus">-            yield map(lambda a,v,b: int(0.5 + a*v + (1.0-a)*b),</span>
<a href="#l30.58"></a><span id="l30.58" class="difflineminus">-                      alpha, row, background)</span>
<a href="#l30.59"></a><span id="l30.59" class="difflineminus">-</span>
<a href="#l30.60"></a><span id="l30.60" class="difflineminus">-    w = png.Writer(**outinfo)</span>
<a href="#l30.61"></a><span id="l30.61" class="difflineminus">-    w.write(out, iterrow())</span>
<a href="#l30.62"></a><span id="l30.62" class="difflineminus">-</span>
<a href="#l30.63"></a><span id="l30.63" class="difflineminus">-def rgbhex(s):</span>
<a href="#l30.64"></a><span id="l30.64" class="difflineminus">-    &quot;&quot;&quot;Take an HTML style string of the form &quot;#rrggbb&quot; and return a</span>
<a href="#l30.65"></a><span id="l30.65" class="difflineminus">-    colour (R,G,B) triple.  Following the initial '#' there can be 3, 6,</span>
<a href="#l30.66"></a><span id="l30.66" class="difflineminus">-    or 12 digits (for 4-, 8- or 16- bits per channel).  In all cases the</span>
<a href="#l30.67"></a><span id="l30.67" class="difflineminus">-    values are expanded to a full 16-bit range, so the returned values</span>
<a href="#l30.68"></a><span id="l30.68" class="difflineminus">-    are all in range(65536).</span>
<a href="#l30.69"></a><span id="l30.69" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l30.70"></a><span id="l30.70" class="difflineminus">-</span>
<a href="#l30.71"></a><span id="l30.71" class="difflineminus">-    assert s[0] == '#'</span>
<a href="#l30.72"></a><span id="l30.72" class="difflineminus">-    s = s[1:]</span>
<a href="#l30.73"></a><span id="l30.73" class="difflineminus">-    assert len(s) in (3,6,12)</span>
<a href="#l30.74"></a><span id="l30.74" class="difflineminus">-</span>
<a href="#l30.75"></a><span id="l30.75" class="difflineminus">-    # Create a target list of length 12, and expand the string s to make</span>
<a href="#l30.76"></a><span id="l30.76" class="difflineminus">-    # it length 12.</span>
<a href="#l30.77"></a><span id="l30.77" class="difflineminus">-    l = ['z']*12</span>
<a href="#l30.78"></a><span id="l30.78" class="difflineminus">-    if len(s) == 3:</span>
<a href="#l30.79"></a><span id="l30.79" class="difflineminus">-        for i in range(4):</span>
<a href="#l30.80"></a><span id="l30.80" class="difflineminus">-            l[i::4] = s</span>
<a href="#l30.81"></a><span id="l30.81" class="difflineminus">-    if len(s) == 6:</span>
<a href="#l30.82"></a><span id="l30.82" class="difflineminus">-        for i in range(2):</span>
<a href="#l30.83"></a><span id="l30.83" class="difflineminus">-            l[i::4] = s[i::2]</span>
<a href="#l30.84"></a><span id="l30.84" class="difflineminus">-            l[i+2::4] = s[i::2]</span>
<a href="#l30.85"></a><span id="l30.85" class="difflineminus">-    if len(s) == 12:</span>
<a href="#l30.86"></a><span id="l30.86" class="difflineminus">-        l[:] = s</span>
<a href="#l30.87"></a><span id="l30.87" class="difflineminus">-    s = ''.join(l)</span>
<a href="#l30.88"></a><span id="l30.88" class="difflineminus">-    return map(lambda x: int(x, 16), (s[:4], s[4:8], s[8:]))</span>
<a href="#l30.89"></a><span id="l30.89" class="difflineminus">-</span>
<a href="#l30.90"></a><span id="l30.90" class="difflineminus">-class Usage(Exception):</span>
<a href="#l30.91"></a><span id="l30.91" class="difflineminus">-    pass</span>
<a href="#l30.92"></a><span id="l30.92" class="difflineminus">-</span>
<a href="#l30.93"></a><span id="l30.93" class="difflineminus">-def main(argv=None):</span>
<a href="#l30.94"></a><span id="l30.94" class="difflineminus">-    import getopt</span>
<a href="#l30.95"></a><span id="l30.95" class="difflineminus">-    import sys</span>
<a href="#l30.96"></a><span id="l30.96" class="difflineminus">-</span>
<a href="#l30.97"></a><span id="l30.97" class="difflineminus">-    if argv is None:</span>
<a href="#l30.98"></a><span id="l30.98" class="difflineminus">-        argv = sys.argv</span>
<a href="#l30.99"></a><span id="l30.99" class="difflineminus">-</span>
<a href="#l30.100"></a><span id="l30.100" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l30.101"></a><span id="l30.101" class="difflineminus">-</span>
<a href="#l30.102"></a><span id="l30.102" class="difflineminus">-    try:</span>
<a href="#l30.103"></a><span id="l30.103" class="difflineminus">-        try:</span>
<a href="#l30.104"></a><span id="l30.104" class="difflineminus">-            opt,arg = getopt.getopt(argv, '',</span>
<a href="#l30.105"></a><span id="l30.105" class="difflineminus">-                                    ['background='])</span>
<a href="#l30.106"></a><span id="l30.106" class="difflineminus">-        except getopt.error, msg:</span>
<a href="#l30.107"></a><span id="l30.107" class="difflineminus">-            raise Usage(msg)</span>
<a href="#l30.108"></a><span id="l30.108" class="difflineminus">-        background = '#000'</span>
<a href="#l30.109"></a><span id="l30.109" class="difflineminus">-        for o,v in opt:</span>
<a href="#l30.110"></a><span id="l30.110" class="difflineminus">-            if o in ['--background']:</span>
<a href="#l30.111"></a><span id="l30.111" class="difflineminus">-                background = v</span>
<a href="#l30.112"></a><span id="l30.112" class="difflineminus">-    except Usage, err:</span>
<a href="#l30.113"></a><span id="l30.113" class="difflineminus">-        print &gt;&gt;sys.stderr, __doc__</span>
<a href="#l30.114"></a><span id="l30.114" class="difflineminus">-        print &gt;&gt;sys.stderr, str(err)</span>
<a href="#l30.115"></a><span id="l30.115" class="difflineminus">-        return 2</span>
<a href="#l30.116"></a><span id="l30.116" class="difflineminus">-</span>
<a href="#l30.117"></a><span id="l30.117" class="difflineminus">-    if len(arg) &gt; 0:</span>
<a href="#l30.118"></a><span id="l30.118" class="difflineminus">-        f = open(arg[0], 'rb')</span>
<a href="#l30.119"></a><span id="l30.119" class="difflineminus">-    else:</span>
<a href="#l30.120"></a><span id="l30.120" class="difflineminus">-        f = sys.stdin</span>
<a href="#l30.121"></a><span id="l30.121" class="difflineminus">-    return composite(sys.stdout, f, background)</span>
<a href="#l30.122"></a><span id="l30.122" class="difflineminus">-</span>
<a href="#l30.123"></a><span id="l30.123" class="difflineminus">-</span>
<a href="#l30.124"></a><span id="l30.124" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l30.125"></a><span id="l30.125" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">deleted file mode 100644</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineminus">--- a/build/pypng/pipdither</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineplus">+++ /dev/null</span>
<a href="#l31.4"></a><span id="l31.4" class="difflineat">@@ -1,181 +0,0 @@</span>
<a href="#l31.5"></a><span id="l31.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l31.6"></a><span id="l31.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipdither $</span>
<a href="#l31.7"></a><span id="l31.7" class="difflineminus">-# $Rev: 150 $</span>
<a href="#l31.8"></a><span id="l31.8" class="difflineminus">-</span>
<a href="#l31.9"></a><span id="l31.9" class="difflineminus">-# pipdither</span>
<a href="#l31.10"></a><span id="l31.10" class="difflineminus">-# Error Diffusing image dithering.</span>
<a href="#l31.11"></a><span id="l31.11" class="difflineminus">-# Now with serpentine scanning.</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-# See http://www.efg2.com/Lab/Library/ImageProcessing/DHALF.TXT</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-# http://www.python.org/doc/2.4.4/lib/module-bisect.html</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineminus">-from bisect import bisect_left</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineminus">-</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineminus">-import png</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-def dither(out, inp,</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineminus">-  bitdepth=1, linear=False, defaultgamma=1.0, targetgamma=None,</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineminus">-  cutoff=0.75):</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineminus">-    &quot;&quot;&quot;Dither the input PNG `inp` into an image with a smaller bit depth</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineminus">-    and write the result image onto `out`.  `bitdepth` specifies the bit</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineminus">-    depth of the new image.</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineminus">-    </span>
<a href="#l31.27"></a><span id="l31.27" class="difflineminus">-    Normally the source image gamma is honoured (the image is</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineminus">-    converted into a linear light space before being dithered), but</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineminus">-    if the `linear` argument is true then the image is treated as</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineminus">-    being linear already: no gamma conversion is done (this is</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-    quicker, and if you don't care much about accuracy, it won't</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineminus">-    matter much).</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineminus">-    </span>
<a href="#l31.34"></a><span id="l31.34" class="difflineminus">-    Images with no gamma indication (no ``gAMA`` chunk) are normally</span>
<a href="#l31.35"></a><span id="l31.35" class="difflineminus">-    treated as linear (gamma = 1.0), but often it can be better</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineminus">-    to assume a different gamma value: For example continuous tone</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineminus">-    photographs intended for presentation on the web often carry</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineminus">-    an implicit assumption of being encoded with a gamma of about</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineminus">-    0.45 (because that's what you get if you just &quot;blat the pixels&quot;</span>
<a href="#l31.40"></a><span id="l31.40" class="difflineminus">-    onto a PC framebuffer), so ``defaultgamma=0.45`` might be a</span>
<a href="#l31.41"></a><span id="l31.41" class="difflineminus">-    good idea.  `defaultgamma` does not override a gamma value</span>
<a href="#l31.42"></a><span id="l31.42" class="difflineminus">-    specified in the file itself: It is only used when the file</span>
<a href="#l31.43"></a><span id="l31.43" class="difflineminus">-    does not specify a gamma.</span>
<a href="#l31.44"></a><span id="l31.44" class="difflineminus">-</span>
<a href="#l31.45"></a><span id="l31.45" class="difflineminus">-    If you (pointlessly) specify both `linear` and `defaultgamma`,</span>
<a href="#l31.46"></a><span id="l31.46" class="difflineminus">-    `linear` wins.</span>
<a href="#l31.47"></a><span id="l31.47" class="difflineminus">-</span>
<a href="#l31.48"></a><span id="l31.48" class="difflineminus">-    The gamma of the output image is, by default, the same as the input</span>
<a href="#l31.49"></a><span id="l31.49" class="difflineminus">-    image.  The `targetgamma` argument can be used to specify a</span>
<a href="#l31.50"></a><span id="l31.50" class="difflineminus">-    different gamma for the output image.  This effectively recodes the</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineminus">-    image to a different gamma, dithering as we go.  The gamma specified</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineminus">-    is the exponent used to encode the output file (and appears in the</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineminus">-    output PNG's ``gAMA`` chunk); it is usually less than 1.</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineminus">-</span>
<a href="#l31.55"></a><span id="l31.55" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineminus">-</span>
<a href="#l31.57"></a><span id="l31.57" class="difflineminus">-    # Encoding is what happened when the PNG was made (and also what</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineminus">-    # happens when we output the PNG).  Decoding is what we do to the</span>
<a href="#l31.59"></a><span id="l31.59" class="difflineminus">-    # source PNG in order to process it.</span>
<a href="#l31.60"></a><span id="l31.60" class="difflineminus">-</span>
<a href="#l31.61"></a><span id="l31.61" class="difflineminus">-    # The dithering algorithm is not completely general; it</span>
<a href="#l31.62"></a><span id="l31.62" class="difflineminus">-    # can only do bit depth reduction, not arbitrary palette changes.</span>
<a href="#l31.63"></a><span id="l31.63" class="difflineminus">-    import operator</span>
<a href="#l31.64"></a><span id="l31.64" class="difflineminus">-    maxval = 2**bitdepth - 1</span>
<a href="#l31.65"></a><span id="l31.65" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l31.66"></a><span id="l31.66" class="difflineminus">-    # If image gamma is 1 or gamma is not present and we are assuming a</span>
<a href="#l31.67"></a><span id="l31.67" class="difflineminus">-    # value of 1, then it is faster to pass a maxval parameter to</span>
<a href="#l31.68"></a><span id="l31.68" class="difflineminus">-    # asFloat (the multiplications get combined).  With gamma, we have</span>
<a href="#l31.69"></a><span id="l31.69" class="difflineminus">-    # to have the pixel values from 0.0 to 1.0 (as long as we are doing</span>
<a href="#l31.70"></a><span id="l31.70" class="difflineminus">-    # gamma correction here).</span>
<a href="#l31.71"></a><span id="l31.71" class="difflineminus">-    # Slightly annoyingly, we don't know the image gamma until we've</span>
<a href="#l31.72"></a><span id="l31.72" class="difflineminus">-    # called asFloat().</span>
<a href="#l31.73"></a><span id="l31.73" class="difflineminus">-    _,_,pixels,info = r.asDirect()</span>
<a href="#l31.74"></a><span id="l31.74" class="difflineminus">-    planes = info['planes']</span>
<a href="#l31.75"></a><span id="l31.75" class="difflineminus">-    assert planes == 1</span>
<a href="#l31.76"></a><span id="l31.76" class="difflineminus">-    width = info['size'][0]</span>
<a href="#l31.77"></a><span id="l31.77" class="difflineminus">-    sourcemaxval = 2**info['bitdepth'] - 1</span>
<a href="#l31.78"></a><span id="l31.78" class="difflineminus">-    if linear:</span>
<a href="#l31.79"></a><span id="l31.79" class="difflineminus">-        gamma = 1</span>
<a href="#l31.80"></a><span id="l31.80" class="difflineminus">-    else:</span>
<a href="#l31.81"></a><span id="l31.81" class="difflineminus">-        gamma = info.get('gamma') or defaultgamma</span>
<a href="#l31.82"></a><span id="l31.82" class="difflineminus">-    # Convert gamma from encoding gamma to the required power for</span>
<a href="#l31.83"></a><span id="l31.83" class="difflineminus">-    # decoding.</span>
<a href="#l31.84"></a><span id="l31.84" class="difflineminus">-    decode = 1.0/gamma</span>
<a href="#l31.85"></a><span id="l31.85" class="difflineminus">-    # Build a lookup table for decoding; convert from pixel values to linear</span>
<a href="#l31.86"></a><span id="l31.86" class="difflineminus">-    # space:</span>
<a href="#l31.87"></a><span id="l31.87" class="difflineminus">-    sourcef = 1.0/sourcemaxval</span>
<a href="#l31.88"></a><span id="l31.88" class="difflineminus">-    incode = map(sourcef.__mul__, range(sourcemaxval+1))</span>
<a href="#l31.89"></a><span id="l31.89" class="difflineminus">-    if decode != 1.0:</span>
<a href="#l31.90"></a><span id="l31.90" class="difflineminus">-        incode = map(decode.__rpow__, incode)</span>
<a href="#l31.91"></a><span id="l31.91" class="difflineminus">-    # Could be different, later on.  targetdecode is the assumed gamma</span>
<a href="#l31.92"></a><span id="l31.92" class="difflineminus">-    # that is going to be used to decoding the target PNG.  It is the</span>
<a href="#l31.93"></a><span id="l31.93" class="difflineminus">-    # reciprocal of the exponent that we use to encode the target PNG.</span>
<a href="#l31.94"></a><span id="l31.94" class="difflineminus">-    # This is the value that we need to build our table that we use for</span>
<a href="#l31.95"></a><span id="l31.95" class="difflineminus">-    # converting from linear to target colour space.</span>
<a href="#l31.96"></a><span id="l31.96" class="difflineminus">-    if targetgamma is None:</span>
<a href="#l31.97"></a><span id="l31.97" class="difflineminus">-        targetdecode = decode</span>
<a href="#l31.98"></a><span id="l31.98" class="difflineminus">-    else:</span>
<a href="#l31.99"></a><span id="l31.99" class="difflineminus">-        targetdecode = 1.0/targetgamma</span>
<a href="#l31.100"></a><span id="l31.100" class="difflineminus">-    # The table we use for encoding (creating the target PNG), still</span>
<a href="#l31.101"></a><span id="l31.101" class="difflineminus">-    # maps from pixel value to linear space, but we use it inverted, by</span>
<a href="#l31.102"></a><span id="l31.102" class="difflineminus">-    # searching through it with bisect.</span>
<a href="#l31.103"></a><span id="l31.103" class="difflineminus">-    targetf = 1.0/maxval</span>
<a href="#l31.104"></a><span id="l31.104" class="difflineminus">-    outcode = map(targetf.__mul__, range(maxval+1))</span>
<a href="#l31.105"></a><span id="l31.105" class="difflineminus">-    if targetdecode != 1.0:</span>
<a href="#l31.106"></a><span id="l31.106" class="difflineminus">-        outcode = map(targetdecode.__rpow__, outcode)</span>
<a href="#l31.107"></a><span id="l31.107" class="difflineminus">-    # The table used for choosing output codes.  These values represent</span>
<a href="#l31.108"></a><span id="l31.108" class="difflineminus">-    # the cutoff points between two adjacent output codes.</span>
<a href="#l31.109"></a><span id="l31.109" class="difflineminus">-    choosecode = zip(outcode[1:], outcode)</span>
<a href="#l31.110"></a><span id="l31.110" class="difflineminus">-    p = cutoff</span>
<a href="#l31.111"></a><span id="l31.111" class="difflineminus">-    choosecode = map(lambda x: x[0]*p+x[1]*(1.0-p), choosecode)</span>
<a href="#l31.112"></a><span id="l31.112" class="difflineminus">-    def iterdither():</span>
<a href="#l31.113"></a><span id="l31.113" class="difflineminus">-        # Errors diffused downwards (into next row)</span>
<a href="#l31.114"></a><span id="l31.114" class="difflineminus">-        ed = [0.0]*width</span>
<a href="#l31.115"></a><span id="l31.115" class="difflineminus">-        flipped = False</span>
<a href="#l31.116"></a><span id="l31.116" class="difflineminus">-        for row in pixels:</span>
<a href="#l31.117"></a><span id="l31.117" class="difflineminus">-            row = map(incode.__getitem__, row)</span>
<a href="#l31.118"></a><span id="l31.118" class="difflineminus">-            row = map(operator.add, ed, row)</span>
<a href="#l31.119"></a><span id="l31.119" class="difflineminus">-            if flipped:</span>
<a href="#l31.120"></a><span id="l31.120" class="difflineminus">-                row = row[::-1]</span>
<a href="#l31.121"></a><span id="l31.121" class="difflineminus">-            targetrow = [0] * width</span>
<a href="#l31.122"></a><span id="l31.122" class="difflineminus">-            for i,v in enumerate(row):</span>
<a href="#l31.123"></a><span id="l31.123" class="difflineminus">-                # Clamp.  Necessary because previously added errors may take</span>
<a href="#l31.124"></a><span id="l31.124" class="difflineminus">-                # v out of range.</span>
<a href="#l31.125"></a><span id="l31.125" class="difflineminus">-                v = max(0.0, min(v, 1.0))</span>
<a href="#l31.126"></a><span id="l31.126" class="difflineminus">-                # `it` will be the index of the chosen target colour;</span>
<a href="#l31.127"></a><span id="l31.127" class="difflineminus">-                it = bisect_left(choosecode, v)</span>
<a href="#l31.128"></a><span id="l31.128" class="difflineminus">-                t = outcode[it]</span>
<a href="#l31.129"></a><span id="l31.129" class="difflineminus">-                targetrow[i] = it</span>
<a href="#l31.130"></a><span id="l31.130" class="difflineminus">-                # err is the error that needs distributing.</span>
<a href="#l31.131"></a><span id="l31.131" class="difflineminus">-                err = v - t</span>
<a href="#l31.132"></a><span id="l31.132" class="difflineminus">-                # Sierra &quot;Filter Lite&quot; distributes          * 2</span>
<a href="#l31.133"></a><span id="l31.133" class="difflineminus">-                # as per this diagram.                    1 1</span>
<a href="#l31.134"></a><span id="l31.134" class="difflineminus">-                ef = err/2.0</span>
<a href="#l31.135"></a><span id="l31.135" class="difflineminus">-                # :todo: consider making rows one wider at each end and</span>
<a href="#l31.136"></a><span id="l31.136" class="difflineminus">-                # removing &quot;if&quot;s</span>
<a href="#l31.137"></a><span id="l31.137" class="difflineminus">-                if i+1 &lt; width:</span>
<a href="#l31.138"></a><span id="l31.138" class="difflineminus">-                    row[i+1] += ef</span>
<a href="#l31.139"></a><span id="l31.139" class="difflineminus">-                ef /= 2.0</span>
<a href="#l31.140"></a><span id="l31.140" class="difflineminus">-                ed[i] = ef</span>
<a href="#l31.141"></a><span id="l31.141" class="difflineminus">-                if i:</span>
<a href="#l31.142"></a><span id="l31.142" class="difflineminus">-                    ed[i-1] += ef</span>
<a href="#l31.143"></a><span id="l31.143" class="difflineminus">-            if flipped:</span>
<a href="#l31.144"></a><span id="l31.144" class="difflineminus">-                ed = ed[::-1]</span>
<a href="#l31.145"></a><span id="l31.145" class="difflineminus">-                targetrow = targetrow[::-1]</span>
<a href="#l31.146"></a><span id="l31.146" class="difflineminus">-            yield targetrow</span>
<a href="#l31.147"></a><span id="l31.147" class="difflineminus">-            flipped = not flipped</span>
<a href="#l31.148"></a><span id="l31.148" class="difflineminus">-    info['bitdepth'] = bitdepth</span>
<a href="#l31.149"></a><span id="l31.149" class="difflineminus">-    info['gamma'] = 1.0/targetdecode</span>
<a href="#l31.150"></a><span id="l31.150" class="difflineminus">-    w = png.Writer(**info)</span>
<a href="#l31.151"></a><span id="l31.151" class="difflineminus">-    w.write(out, iterdither())</span>
<a href="#l31.152"></a><span id="l31.152" class="difflineminus">-</span>
<a href="#l31.153"></a><span id="l31.153" class="difflineminus">-</span>
<a href="#l31.154"></a><span id="l31.154" class="difflineminus">-def main(argv=None):</span>
<a href="#l31.155"></a><span id="l31.155" class="difflineminus">-    # http://www.python.org/doc/2.4.4/lib/module-getopt.html</span>
<a href="#l31.156"></a><span id="l31.156" class="difflineminus">-    from getopt import getopt</span>
<a href="#l31.157"></a><span id="l31.157" class="difflineminus">-    import sys</span>
<a href="#l31.158"></a><span id="l31.158" class="difflineminus">-    if argv is None:</span>
<a href="#l31.159"></a><span id="l31.159" class="difflineminus">-        argv = sys.argv</span>
<a href="#l31.160"></a><span id="l31.160" class="difflineminus">-    opt,argv = getopt(argv[1:], 'b:c:g:lo:')</span>
<a href="#l31.161"></a><span id="l31.161" class="difflineminus">-    k = {}</span>
<a href="#l31.162"></a><span id="l31.162" class="difflineminus">-    for o,v in opt:</span>
<a href="#l31.163"></a><span id="l31.163" class="difflineminus">-        if o == '-b':</span>
<a href="#l31.164"></a><span id="l31.164" class="difflineminus">-            k['bitdepth'] = int(v)</span>
<a href="#l31.165"></a><span id="l31.165" class="difflineminus">-        if o == '-c':</span>
<a href="#l31.166"></a><span id="l31.166" class="difflineminus">-            k['cutoff'] = float(v)</span>
<a href="#l31.167"></a><span id="l31.167" class="difflineminus">-        if o == '-g':</span>
<a href="#l31.168"></a><span id="l31.168" class="difflineminus">-            k['defaultgamma'] = float(v)</span>
<a href="#l31.169"></a><span id="l31.169" class="difflineminus">-        if o == '-l':</span>
<a href="#l31.170"></a><span id="l31.170" class="difflineminus">-            k['linear'] = True</span>
<a href="#l31.171"></a><span id="l31.171" class="difflineminus">-        if o == '-o':</span>
<a href="#l31.172"></a><span id="l31.172" class="difflineminus">-            k['targetgamma'] = float(v)</span>
<a href="#l31.173"></a><span id="l31.173" class="difflineminus">-        if o == '-?':</span>
<a href="#l31.174"></a><span id="l31.174" class="difflineminus">-            print &gt;&gt;sys.stderr, &quot;pipdither [-b bits] [-c cutoff] [-g assumed-gamma] [-l] [in.png]&quot;</span>
<a href="#l31.175"></a><span id="l31.175" class="difflineminus">-</span>
<a href="#l31.176"></a><span id="l31.176" class="difflineminus">-    if len(argv) &gt; 0:</span>
<a href="#l31.177"></a><span id="l31.177" class="difflineminus">-        f = open(argv[0], 'rb')</span>
<a href="#l31.178"></a><span id="l31.178" class="difflineminus">-    else:</span>
<a href="#l31.179"></a><span id="l31.179" class="difflineminus">-        f = sys.stdin</span>
<a href="#l31.180"></a><span id="l31.180" class="difflineminus">-</span>
<a href="#l31.181"></a><span id="l31.181" class="difflineminus">-    return dither(sys.stdout, f, **k)</span>
<a href="#l31.182"></a><span id="l31.182" class="difflineminus">-</span>
<a href="#l31.183"></a><span id="l31.183" class="difflineminus">-</span>
<a href="#l31.184"></a><span id="l31.184" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l31.185"></a><span id="l31.185" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">deleted file mode 100644</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineminus">--- a/build/pypng/piprgb</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineplus">+++ /dev/null</span>
<a href="#l32.4"></a><span id="l32.4" class="difflineat">@@ -1,36 +0,0 @@</span>
<a href="#l32.5"></a><span id="l32.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l32.6"></a><span id="l32.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/piprgb $</span>
<a href="#l32.7"></a><span id="l32.7" class="difflineminus">-# $Rev: 131 $</span>
<a href="#l32.8"></a><span id="l32.8" class="difflineminus">-# piprgb</span>
<a href="#l32.9"></a><span id="l32.9" class="difflineminus">-#</span>
<a href="#l32.10"></a><span id="l32.10" class="difflineminus">-# Convert input image to RGB or RGBA format.  Output will be colour type</span>
<a href="#l32.11"></a><span id="l32.11" class="difflineminus">-# 2 or 6, and will not have a tRNS chunk.</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineminus">-import png</span>
<a href="#l32.14"></a><span id="l32.14" class="difflineminus">-</span>
<a href="#l32.15"></a><span id="l32.15" class="difflineminus">-def rgb(out, inp):</span>
<a href="#l32.16"></a><span id="l32.16" class="difflineminus">-    &quot;&quot;&quot;Convert to RGB/RGBA.&quot;&quot;&quot;</span>
<a href="#l32.17"></a><span id="l32.17" class="difflineminus">-</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineminus">-    r.preamble()</span>
<a href="#l32.20"></a><span id="l32.20" class="difflineminus">-    if r.alpha or r.trns:</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineminus">-        get = r.asRGBA</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineminus">-    else:</span>
<a href="#l32.23"></a><span id="l32.23" class="difflineminus">-        get = r.asRGB</span>
<a href="#l32.24"></a><span id="l32.24" class="difflineminus">-    pixels,info = get()[2:4]</span>
<a href="#l32.25"></a><span id="l32.25" class="difflineminus">-    w = png.Writer(**info)</span>
<a href="#l32.26"></a><span id="l32.26" class="difflineminus">-    w.write(out, pixels)</span>
<a href="#l32.27"></a><span id="l32.27" class="difflineminus">-</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineminus">-def main(argv=None):</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineminus">-    import sys</span>
<a href="#l32.30"></a><span id="l32.30" class="difflineminus">-</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-    if argv is None:</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineminus">-        argv = sys.argv</span>
<a href="#l32.33"></a><span id="l32.33" class="difflineminus">-    if len(argv) &gt; 1:</span>
<a href="#l32.34"></a><span id="l32.34" class="difflineminus">-        f = open(argv[1], 'rb')</span>
<a href="#l32.35"></a><span id="l32.35" class="difflineminus">-    else:</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineminus">-        f = sys.stdin</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineminus">-    return rgb(sys.stdout, f)</span>
<a href="#l32.38"></a><span id="l32.38" class="difflineminus">-</span>
<a href="#l32.39"></a><span id="l32.39" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l32.40"></a><span id="l32.40" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1">deleted file mode 100644</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineminus">--- a/build/pypng/pipscalez</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineplus">+++ /dev/null</span>
<a href="#l33.4"></a><span id="l33.4" class="difflineat">@@ -1,53 +0,0 @@</span>
<a href="#l33.5"></a><span id="l33.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l33.6"></a><span id="l33.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipscalez $</span>
<a href="#l33.7"></a><span id="l33.7" class="difflineminus">-# $Rev: 131 $</span>
<a href="#l33.8"></a><span id="l33.8" class="difflineminus">-</span>
<a href="#l33.9"></a><span id="l33.9" class="difflineminus">-# pipscalez</span>
<a href="#l33.10"></a><span id="l33.10" class="difflineminus">-# Enlarge an image by an integer factor horizontally and vertically.</span>
<a href="#l33.11"></a><span id="l33.11" class="difflineminus">-</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-def rescale(inp, out, xf, yf):</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineminus">-    from array import array</span>
<a href="#l33.14"></a><span id="l33.14" class="difflineminus">-    import png</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineminus">-</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l33.17"></a><span id="l33.17" class="difflineminus">-    _,_,pixels,meta = r.asDirect()</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineminus">-    typecode = 'BH'[meta['bitdepth'] &gt; 8]</span>
<a href="#l33.19"></a><span id="l33.19" class="difflineminus">-    planes = meta['planes']</span>
<a href="#l33.20"></a><span id="l33.20" class="difflineminus">-    # We are going to use meta in the call to Writer, so expand the</span>
<a href="#l33.21"></a><span id="l33.21" class="difflineminus">-    # size.</span>
<a href="#l33.22"></a><span id="l33.22" class="difflineminus">-    x,y = meta['size']</span>
<a href="#l33.23"></a><span id="l33.23" class="difflineminus">-    x *= xf</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineminus">-    y *= yf</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineminus">-    meta['size'] = (x,y)</span>
<a href="#l33.26"></a><span id="l33.26" class="difflineminus">-    del x</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineminus">-    del y</span>
<a href="#l33.28"></a><span id="l33.28" class="difflineminus">-    # Values per row, target row.</span>
<a href="#l33.29"></a><span id="l33.29" class="difflineminus">-    vpr = meta['size'][0] * planes</span>
<a href="#l33.30"></a><span id="l33.30" class="difflineminus">-    def iterscale():</span>
<a href="#l33.31"></a><span id="l33.31" class="difflineminus">-        for row in pixels:</span>
<a href="#l33.32"></a><span id="l33.32" class="difflineminus">-            bigrow = array(typecode, [0]*vpr)</span>
<a href="#l33.33"></a><span id="l33.33" class="difflineminus">-            row = array(typecode, row)</span>
<a href="#l33.34"></a><span id="l33.34" class="difflineminus">-            for c in range(planes):</span>
<a href="#l33.35"></a><span id="l33.35" class="difflineminus">-                channel = row[c::planes]</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineminus">-                for i in range(xf):</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineminus">-                    bigrow[i*planes+c::xf*planes] = channel</span>
<a href="#l33.38"></a><span id="l33.38" class="difflineminus">-            for _ in range(yf):</span>
<a href="#l33.39"></a><span id="l33.39" class="difflineminus">-                yield bigrow</span>
<a href="#l33.40"></a><span id="l33.40" class="difflineminus">-    w = png.Writer(**meta)</span>
<a href="#l33.41"></a><span id="l33.41" class="difflineminus">-    w.write(out, iterscale())</span>
<a href="#l33.42"></a><span id="l33.42" class="difflineminus">-</span>
<a href="#l33.43"></a><span id="l33.43" class="difflineminus">-</span>
<a href="#l33.44"></a><span id="l33.44" class="difflineminus">-def main(argv=None):</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-    import sys</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineminus">-</span>
<a href="#l33.47"></a><span id="l33.47" class="difflineminus">-    if argv is None:</span>
<a href="#l33.48"></a><span id="l33.48" class="difflineminus">-        argv = sys.argv</span>
<a href="#l33.49"></a><span id="l33.49" class="difflineminus">-    xf = int(argv[1])</span>
<a href="#l33.50"></a><span id="l33.50" class="difflineminus">-    if len(argv) &gt; 2:</span>
<a href="#l33.51"></a><span id="l33.51" class="difflineminus">-        yf = int(argv[2])</span>
<a href="#l33.52"></a><span id="l33.52" class="difflineminus">-    else:</span>
<a href="#l33.53"></a><span id="l33.53" class="difflineminus">-        yf = xf</span>
<a href="#l33.54"></a><span id="l33.54" class="difflineminus">-    return rescale(sys.stdin, sys.stdout, xf, yf)</span>
<a href="#l33.55"></a><span id="l33.55" class="difflineminus">-</span>
<a href="#l33.56"></a><span id="l33.56" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l33.57"></a><span id="l33.57" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1">deleted file mode 100644</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineminus">--- a/build/pypng/pipstack</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineplus">+++ /dev/null</span>
<a href="#l34.4"></a><span id="l34.4" class="difflineat">@@ -1,127 +0,0 @@</span>
<a href="#l34.5"></a><span id="l34.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l34.6"></a><span id="l34.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipstack $</span>
<a href="#l34.7"></a><span id="l34.7" class="difflineminus">-# $Rev: 190 $</span>
<a href="#l34.8"></a><span id="l34.8" class="difflineminus">-</span>
<a href="#l34.9"></a><span id="l34.9" class="difflineminus">-# pipstack</span>
<a href="#l34.10"></a><span id="l34.10" class="difflineminus">-# Combine input PNG files into a multi-channel output PNG.</span>
<a href="#l34.11"></a><span id="l34.11" class="difflineminus">-</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineminus">-pipstack file1.png [file2.png ...]</span>
<a href="#l34.14"></a><span id="l34.14" class="difflineminus">-</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineminus">-pipstack can be used to combine 3 greyscale PNG files into a colour, RGB,</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-PNG file.  In fact it is slightly more general than that.  The number of</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineminus">-channels in the output PNG is equal to the sum of the numbers of</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineminus">-channels in the input images.  It is an error if this sum exceeds 4 (the</span>
<a href="#l34.19"></a><span id="l34.19" class="difflineminus">-maximum number of channels in a PNG image is 4, for an RGBA image).  The</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineminus">-output colour model corresponds to the number of channels: 1 -</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineminus">-greyscale; 2 - greyscale+alpha; 3 - RGB; 4 - RGB+alpha.</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineminus">-</span>
<a href="#l34.23"></a><span id="l34.23" class="difflineminus">-In this way it is possible to combine 3 greyscale PNG files into an RGB</span>
<a href="#l34.24"></a><span id="l34.24" class="difflineminus">-PNG (a common expected use) as well as more esoteric options: rgb.png +</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineminus">-grey.png = rgba.png; grey.png + grey.png = greyalpha.png.</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineminus">-</span>
<a href="#l34.27"></a><span id="l34.27" class="difflineminus">-Color Profile, Gamma, and so on.</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineminus">-</span>
<a href="#l34.29"></a><span id="l34.29" class="difflineminus">-[This is not implemented yet]</span>
<a href="#l34.30"></a><span id="l34.30" class="difflineminus">-</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-If an input has an ICC Profile (``iCCP`` chunk) then the output will</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineminus">-have an ICC Profile, but only if it is possible to combine all the input</span>
<a href="#l34.33"></a><span id="l34.33" class="difflineminus">-ICC Profiles.  It is possible to combine all the input ICC Profiles</span>
<a href="#l34.34"></a><span id="l34.34" class="difflineminus">-only when: they all use the same Profile Connection Space; the PCS white</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-point is the same (specified in the header; should always be D50);</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineminus">-possibly some other things I haven't thought of yet.</span>
<a href="#l34.37"></a><span id="l34.37" class="difflineminus">-</span>
<a href="#l34.38"></a><span id="l34.38" class="difflineminus">-If some of the inputs have a ``gAMA`` chunk (specifying gamma) and</span>
<a href="#l34.39"></a><span id="l34.39" class="difflineminus">-an output ICC Profile is being generated, then the gamma information</span>
<a href="#l34.40"></a><span id="l34.40" class="difflineminus">-will be incorporated into the ICC Profile.</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineminus">-</span>
<a href="#l34.42"></a><span id="l34.42" class="difflineminus">-When the output is an RGB colour type and the output ICC Profile is</span>
<a href="#l34.43"></a><span id="l34.43" class="difflineminus">-synthesized, it is necessary to supply colorant tags (``rXYZ`` and so</span>
<a href="#l34.44"></a><span id="l34.44" class="difflineminus">-on).  These are taken from ``sRGB``.</span>
<a href="#l34.45"></a><span id="l34.45" class="difflineminus">-</span>
<a href="#l34.46"></a><span id="l34.46" class="difflineminus">-If the input images have ``gAMA`` chunks and no input image has an ICC</span>
<a href="#l34.47"></a><span id="l34.47" class="difflineminus">-Profile then the output image will have a ``gAMA`` chunk, but only if</span>
<a href="#l34.48"></a><span id="l34.48" class="difflineminus">-all the ``gAMA`` chunks specify the same value.  Otherwise a warning</span>
<a href="#l34.49"></a><span id="l34.49" class="difflineminus">-will be emitted and no ``gAMA`` chunk.  It is possible to add or replace</span>
<a href="#l34.50"></a><span id="l34.50" class="difflineminus">-a ``gAMA`` chunk using the ``pipchunk`` tool.</span>
<a href="#l34.51"></a><span id="l34.51" class="difflineminus">-</span>
<a href="#l34.52"></a><span id="l34.52" class="difflineminus">-gAMA, pHYs, iCCP, sRGB, tIME, any other chunks.</span>
<a href="#l34.53"></a><span id="l34.53" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l34.54"></a><span id="l34.54" class="difflineminus">-</span>
<a href="#l34.55"></a><span id="l34.55" class="difflineminus">-class Error(Exception):</span>
<a href="#l34.56"></a><span id="l34.56" class="difflineminus">-    pass</span>
<a href="#l34.57"></a><span id="l34.57" class="difflineminus">-</span>
<a href="#l34.58"></a><span id="l34.58" class="difflineminus">-def stack(out, inp):</span>
<a href="#l34.59"></a><span id="l34.59" class="difflineminus">-    &quot;&quot;&quot;Stack the input PNG files into a single output PNG.&quot;&quot;&quot;</span>
<a href="#l34.60"></a><span id="l34.60" class="difflineminus">-</span>
<a href="#l34.61"></a><span id="l34.61" class="difflineminus">-    from array import array</span>
<a href="#l34.62"></a><span id="l34.62" class="difflineminus">-    import itertools</span>
<a href="#l34.63"></a><span id="l34.63" class="difflineminus">-    # Local module</span>
<a href="#l34.64"></a><span id="l34.64" class="difflineminus">-    import png</span>
<a href="#l34.65"></a><span id="l34.65" class="difflineminus">-</span>
<a href="#l34.66"></a><span id="l34.66" class="difflineminus">-    if len(inp) &lt; 1:</span>
<a href="#l34.67"></a><span id="l34.67" class="difflineminus">-        raise Error(&quot;Required input is missing.&quot;)</span>
<a href="#l34.68"></a><span id="l34.68" class="difflineminus">-</span>
<a href="#l34.69"></a><span id="l34.69" class="difflineminus">-    l = map(png.Reader, inp)</span>
<a href="#l34.70"></a><span id="l34.70" class="difflineminus">-    # Let data be a list of (pixel,info) pairs.</span>
<a href="#l34.71"></a><span id="l34.71" class="difflineminus">-    data = map(lambda p: p.asDirect()[2:], l)</span>
<a href="#l34.72"></a><span id="l34.72" class="difflineminus">-    totalchannels = sum(map(lambda x: x[1]['planes'], data))</span>
<a href="#l34.73"></a><span id="l34.73" class="difflineminus">-</span>
<a href="#l34.74"></a><span id="l34.74" class="difflineminus">-    if not (0 &lt; totalchannels &lt;= 4):</span>
<a href="#l34.75"></a><span id="l34.75" class="difflineminus">-        raise Error(&quot;Too many channels in input.&quot;)</span>
<a href="#l34.76"></a><span id="l34.76" class="difflineminus">-    alpha = totalchannels in (2,4)</span>
<a href="#l34.77"></a><span id="l34.77" class="difflineminus">-    greyscale = totalchannels in (1,2)</span>
<a href="#l34.78"></a><span id="l34.78" class="difflineminus">-    bitdepth = []</span>
<a href="#l34.79"></a><span id="l34.79" class="difflineminus">-    for b in map(lambda x: x[1]['bitdepth'], data):</span>
<a href="#l34.80"></a><span id="l34.80" class="difflineminus">-        try:</span>
<a href="#l34.81"></a><span id="l34.81" class="difflineminus">-            if b == int(b):</span>
<a href="#l34.82"></a><span id="l34.82" class="difflineminus">-                bitdepth.append(b)</span>
<a href="#l34.83"></a><span id="l34.83" class="difflineminus">-                continue</span>
<a href="#l34.84"></a><span id="l34.84" class="difflineminus">-        except (TypeError, ValueError):</span>
<a href="#l34.85"></a><span id="l34.85" class="difflineminus">-            pass</span>
<a href="#l34.86"></a><span id="l34.86" class="difflineminus">-        # Assume a tuple.</span>
<a href="#l34.87"></a><span id="l34.87" class="difflineminus">-        bitdepth += b</span>
<a href="#l34.88"></a><span id="l34.88" class="difflineminus">-    # Currently, fail unless all bitdepths equal.</span>
<a href="#l34.89"></a><span id="l34.89" class="difflineminus">-    if len(set(bitdepth)) &gt; 1:</span>
<a href="#l34.90"></a><span id="l34.90" class="difflineminus">-        raise NotImplemented(&quot;Cannot cope when bitdepths differ - sorry!&quot;)</span>
<a href="#l34.91"></a><span id="l34.91" class="difflineminus">-    bitdepth = bitdepth[0]</span>
<a href="#l34.92"></a><span id="l34.92" class="difflineminus">-    arraytype = 'BH'[bitdepth &gt; 8]</span>
<a href="#l34.93"></a><span id="l34.93" class="difflineminus">-    size = map(lambda x: x[1]['size'], data)</span>
<a href="#l34.94"></a><span id="l34.94" class="difflineminus">-    # Currently, fail unless all images same size.</span>
<a href="#l34.95"></a><span id="l34.95" class="difflineminus">-    if len(set(size)) &gt; 1:</span>
<a href="#l34.96"></a><span id="l34.96" class="difflineminus">-        raise NotImplemented(&quot;Cannot cope when sizes differ - sorry!&quot;)</span>
<a href="#l34.97"></a><span id="l34.97" class="difflineminus">-    size = size[0]</span>
<a href="#l34.98"></a><span id="l34.98" class="difflineminus">-    # Values per row</span>
<a href="#l34.99"></a><span id="l34.99" class="difflineminus">-    vpr = totalchannels * size[0]</span>
<a href="#l34.100"></a><span id="l34.100" class="difflineminus">-    def iterstack():</span>
<a href="#l34.101"></a><span id="l34.101" class="difflineminus">-        # the izip call creates an iterator that yields the next row</span>
<a href="#l34.102"></a><span id="l34.102" class="difflineminus">-        # from all the input images combined into a tuple.</span>
<a href="#l34.103"></a><span id="l34.103" class="difflineminus">-        for irow in itertools.izip(*map(lambda x: x[0], data)):</span>
<a href="#l34.104"></a><span id="l34.104" class="difflineminus">-            row = array(arraytype, [0]*vpr)</span>
<a href="#l34.105"></a><span id="l34.105" class="difflineminus">-            # output channel</span>
<a href="#l34.106"></a><span id="l34.106" class="difflineminus">-            och = 0</span>
<a href="#l34.107"></a><span id="l34.107" class="difflineminus">-            for i,arow in enumerate(irow):</span>
<a href="#l34.108"></a><span id="l34.108" class="difflineminus">-                # ensure incoming row is an array</span>
<a href="#l34.109"></a><span id="l34.109" class="difflineminus">-                arow = array(arraytype, arow)</span>
<a href="#l34.110"></a><span id="l34.110" class="difflineminus">-                n = data[i][1]['planes']</span>
<a href="#l34.111"></a><span id="l34.111" class="difflineminus">-                for j in range(n):</span>
<a href="#l34.112"></a><span id="l34.112" class="difflineminus">-                    row[och::totalchannels] = arow[j::n]</span>
<a href="#l34.113"></a><span id="l34.113" class="difflineminus">-                    och += 1</span>
<a href="#l34.114"></a><span id="l34.114" class="difflineminus">-            yield row</span>
<a href="#l34.115"></a><span id="l34.115" class="difflineminus">-    w = png.Writer(size[0], size[1],</span>
<a href="#l34.116"></a><span id="l34.116" class="difflineminus">-      greyscale=greyscale, alpha=alpha, bitdepth=bitdepth)</span>
<a href="#l34.117"></a><span id="l34.117" class="difflineminus">-    w.write(out, iterstack())</span>
<a href="#l34.118"></a><span id="l34.118" class="difflineminus">-</span>
<a href="#l34.119"></a><span id="l34.119" class="difflineminus">-</span>
<a href="#l34.120"></a><span id="l34.120" class="difflineminus">-def main(argv=None):</span>
<a href="#l34.121"></a><span id="l34.121" class="difflineminus">-    import sys</span>
<a href="#l34.122"></a><span id="l34.122" class="difflineminus">-</span>
<a href="#l34.123"></a><span id="l34.123" class="difflineminus">-    if argv is None:</span>
<a href="#l34.124"></a><span id="l34.124" class="difflineminus">-        argv = sys.argv</span>
<a href="#l34.125"></a><span id="l34.125" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l34.126"></a><span id="l34.126" class="difflineminus">-    arg = argv[:]</span>
<a href="#l34.127"></a><span id="l34.127" class="difflineminus">-    return stack(sys.stdout, arg)</span>
<a href="#l34.128"></a><span id="l34.128" class="difflineminus">-</span>
<a href="#l34.129"></a><span id="l34.129" class="difflineminus">-</span>
<a href="#l34.130"></a><span id="l34.130" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l34.131"></a><span id="l34.131" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">deleted file mode 100644</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineminus">--- a/build/pypng/pipwindow</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineplus">+++ /dev/null</span>
<a href="#l35.4"></a><span id="l35.4" class="difflineat">@@ -1,67 +0,0 @@</span>
<a href="#l35.5"></a><span id="l35.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l35.6"></a><span id="l35.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pipwindow $</span>
<a href="#l35.7"></a><span id="l35.7" class="difflineminus">-# $Rev: 173 $</span>
<a href="#l35.8"></a><span id="l35.8" class="difflineminus">-</span>
<a href="#l35.9"></a><span id="l35.9" class="difflineminus">-# pipwindow</span>
<a href="#l35.10"></a><span id="l35.10" class="difflineminus">-# Tool to crop/expand an image to a rectangular window.  Come the</span>
<a href="#l35.11"></a><span id="l35.11" class="difflineminus">-# revolution this tool will allow the image and the window to be placed</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-# arbitrarily (in particular the window can be bigger than the picture</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineminus">-# and/or overlap it only partially) and the image can be OpenGL style</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineminus">-# border/repeat effects (repeat, mirrored repeat, clamp, fixed</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineminus">-# background colour, background colour from source file).  For now it</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineminus">-# only acts as crop.  The window must be no greater than the image in</span>
<a href="#l35.17"></a><span id="l35.17" class="difflineminus">-# both x and y.</span>
<a href="#l35.18"></a><span id="l35.18" class="difflineminus">-</span>
<a href="#l35.19"></a><span id="l35.19" class="difflineminus">-def window(tl, br, inp, out):</span>
<a href="#l35.20"></a><span id="l35.20" class="difflineminus">-    &quot;&quot;&quot;Place a window onto the image and cut-out the resulting</span>
<a href="#l35.21"></a><span id="l35.21" class="difflineminus">-    rectangle.  The window is an axis aligned rectangle opposite corners</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineminus">-    at *tl* and *br* (each being an (x,y) pair). *inp* specifies the</span>
<a href="#l35.23"></a><span id="l35.23" class="difflineminus">-    input file which should be a PNG image.</span>
<a href="#l35.24"></a><span id="l35.24" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l35.25"></a><span id="l35.25" class="difflineminus">-</span>
<a href="#l35.26"></a><span id="l35.26" class="difflineminus">-    import png</span>
<a href="#l35.27"></a><span id="l35.27" class="difflineminus">-</span>
<a href="#l35.28"></a><span id="l35.28" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l35.29"></a><span id="l35.29" class="difflineminus">-    x,y,pixels,meta = r.asDirect()</span>
<a href="#l35.30"></a><span id="l35.30" class="difflineminus">-    if not (0 &lt;= tl[0] &lt; br[0] &lt;= x):</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-        raise NotImplementedError()</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineminus">-    if not (0 &lt;= tl[1] &lt; br[1] &lt;= y):</span>
<a href="#l35.33"></a><span id="l35.33" class="difflineminus">-        raise NotImplementedError()</span>
<a href="#l35.34"></a><span id="l35.34" class="difflineminus">-    # Compute left and right bounds for each row</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">-    l = tl[0] * meta['planes']</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineminus">-    r = br[0] * meta['planes']</span>
<a href="#l35.37"></a><span id="l35.37" class="difflineminus">-    def itercrop():</span>
<a href="#l35.38"></a><span id="l35.38" class="difflineminus">-        &quot;&quot;&quot;An iterator to perform the crop.&quot;&quot;&quot;</span>
<a href="#l35.39"></a><span id="l35.39" class="difflineminus">-</span>
<a href="#l35.40"></a><span id="l35.40" class="difflineminus">-        for i,row in enumerate(pixels):</span>
<a href="#l35.41"></a><span id="l35.41" class="difflineminus">-            if i &lt; tl[1]:</span>
<a href="#l35.42"></a><span id="l35.42" class="difflineminus">-                continue</span>
<a href="#l35.43"></a><span id="l35.43" class="difflineminus">-            if i &gt;= br[1]:</span>
<a href="#l35.44"></a><span id="l35.44" class="difflineminus">-                # Same as &quot;raise StopIteration&quot;</span>
<a href="#l35.45"></a><span id="l35.45" class="difflineminus">-                return</span>
<a href="#l35.46"></a><span id="l35.46" class="difflineminus">-            yield row[l:r]</span>
<a href="#l35.47"></a><span id="l35.47" class="difflineminus">-    meta['size'] = (br[0]-tl[0], br[1]-tl[1])</span>
<a href="#l35.48"></a><span id="l35.48" class="difflineminus">-    w = png.Writer(**meta)</span>
<a href="#l35.49"></a><span id="l35.49" class="difflineminus">-    w.write(out, itercrop())</span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineminus">-def main(argv=None):</span>
<a href="#l35.52"></a><span id="l35.52" class="difflineminus">-    import sys</span>
<a href="#l35.53"></a><span id="l35.53" class="difflineminus">-</span>
<a href="#l35.54"></a><span id="l35.54" class="difflineminus">-    if argv is None:</span>
<a href="#l35.55"></a><span id="l35.55" class="difflineminus">-        argv = sys.argv</span>
<a href="#l35.56"></a><span id="l35.56" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l35.57"></a><span id="l35.57" class="difflineminus">-</span>
<a href="#l35.58"></a><span id="l35.58" class="difflineminus">-    tl = (0,0)</span>
<a href="#l35.59"></a><span id="l35.59" class="difflineminus">-    br = tuple(map(int, argv[:2]))</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineminus">-    if len(argv) &gt;= 4:</span>
<a href="#l35.61"></a><span id="l35.61" class="difflineminus">-        tl = br</span>
<a href="#l35.62"></a><span id="l35.62" class="difflineminus">-        br = tuple(map(int, argv[2:4]))</span>
<a href="#l35.63"></a><span id="l35.63" class="difflineminus">-    if len(argv) in (2, 4):</span>
<a href="#l35.64"></a><span id="l35.64" class="difflineminus">-        f = sys.stdin</span>
<a href="#l35.65"></a><span id="l35.65" class="difflineminus">-    else:</span>
<a href="#l35.66"></a><span id="l35.66" class="difflineminus">-        f = open(argv[-1], 'rb')</span>
<a href="#l35.67"></a><span id="l35.67" class="difflineminus">-</span>
<a href="#l35.68"></a><span id="l35.68" class="difflineminus">-    return window(tl, br, f, sys.stdout)</span>
<a href="#l35.69"></a><span id="l35.69" class="difflineminus">-</span>
<a href="#l35.70"></a><span id="l35.70" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l35.71"></a><span id="l35.71" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">deleted file mode 100644</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineminus">--- a/build/pypng/plan9topng.py</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineplus">+++ /dev/null</span>
<a href="#l36.4"></a><span id="l36.4" class="difflineat">@@ -1,293 +0,0 @@</span>
<a href="#l36.5"></a><span id="l36.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l36.6"></a><span id="l36.6" class="difflineminus">-# $Rev: 184 $</span>
<a href="#l36.7"></a><span id="l36.7" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/plan9topng.py $</span>
<a href="#l36.8"></a><span id="l36.8" class="difflineminus">-</span>
<a href="#l36.9"></a><span id="l36.9" class="difflineminus">-# Imported from //depot/prj/plan9topam/master/code/plan9topam.py#4 on</span>
<a href="#l36.10"></a><span id="l36.10" class="difflineminus">-# 2009-06-15.</span>
<a href="#l36.11"></a><span id="l36.11" class="difflineminus">-</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-&quot;&quot;&quot;Command line tool to convert from Plan 9 image format to PNG format.</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineminus">-</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineminus">-Plan 9 image format description:</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineminus">-http://plan9.bell-labs.com/magic/man2html/6/image</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineminus">-</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineminus">-# http://www.python.org/doc/2.3.5/lib/module-itertools.html</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineminus">-import itertools</span>
<a href="#l36.20"></a><span id="l36.20" class="difflineminus">-# http://www.python.org/doc/2.3.5/lib/module-re.html</span>
<a href="#l36.21"></a><span id="l36.21" class="difflineminus">-import re</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineminus">-# http://www.python.org/doc/2.3.5/lib/module-sys.html</span>
<a href="#l36.23"></a><span id="l36.23" class="difflineminus">-import sys</span>
<a href="#l36.24"></a><span id="l36.24" class="difflineminus">-</span>
<a href="#l36.25"></a><span id="l36.25" class="difflineminus">-def block(s, n):</span>
<a href="#l36.26"></a><span id="l36.26" class="difflineminus">-    # See http://www.python.org/doc/2.6.2/library/functions.html#zip</span>
<a href="#l36.27"></a><span id="l36.27" class="difflineminus">-    return zip(*[iter(s)]*n)</span>
<a href="#l36.28"></a><span id="l36.28" class="difflineminus">-</span>
<a href="#l36.29"></a><span id="l36.29" class="difflineminus">-def convert(f, output=sys.stdout) :</span>
<a href="#l36.30"></a><span id="l36.30" class="difflineminus">-  &quot;&quot;&quot;Convert Plan 9 file to PNG format.  Works with either uncompressed</span>
<a href="#l36.31"></a><span id="l36.31" class="difflineminus">-  or compressed files.</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineminus">-  &quot;&quot;&quot;</span>
<a href="#l36.33"></a><span id="l36.33" class="difflineminus">-</span>
<a href="#l36.34"></a><span id="l36.34" class="difflineminus">-  r = f.read(11)</span>
<a href="#l36.35"></a><span id="l36.35" class="difflineminus">-  if r == 'compressed\n' :</span>
<a href="#l36.36"></a><span id="l36.36" class="difflineminus">-    png(output, *decompress(f))</span>
<a href="#l36.37"></a><span id="l36.37" class="difflineminus">-  else :</span>
<a href="#l36.38"></a><span id="l36.38" class="difflineminus">-    png(output, *glue(f, r))</span>
<a href="#l36.39"></a><span id="l36.39" class="difflineminus">-</span>
<a href="#l36.40"></a><span id="l36.40" class="difflineminus">-</span>
<a href="#l36.41"></a><span id="l36.41" class="difflineminus">-def glue(f, r) :</span>
<a href="#l36.42"></a><span id="l36.42" class="difflineminus">-  &quot;&quot;&quot;Return (metadata, stream) pair where `r` is the initial portion of</span>
<a href="#l36.43"></a><span id="l36.43" class="difflineminus">-  the metadata that has already been read from the stream `f`.</span>
<a href="#l36.44"></a><span id="l36.44" class="difflineminus">-  &quot;&quot;&quot;</span>
<a href="#l36.45"></a><span id="l36.45" class="difflineminus">-</span>
<a href="#l36.46"></a><span id="l36.46" class="difflineminus">-  r = r + f.read(60-len(r))</span>
<a href="#l36.47"></a><span id="l36.47" class="difflineminus">-  return (r, f)</span>
<a href="#l36.48"></a><span id="l36.48" class="difflineminus">-</span>
<a href="#l36.49"></a><span id="l36.49" class="difflineminus">-def meta(r) :</span>
<a href="#l36.50"></a><span id="l36.50" class="difflineminus">-  &quot;&quot;&quot;Convert 60 character string `r`, the metadata from an image file.</span>
<a href="#l36.51"></a><span id="l36.51" class="difflineminus">-  Returns a 5-tuple (*chan*,*minx*,*miny*,*limx*,*limy*).  5-tuples may</span>
<a href="#l36.52"></a><span id="l36.52" class="difflineminus">-  settle into lists in transit.</span>
<a href="#l36.53"></a><span id="l36.53" class="difflineminus">-  </span>
<a href="#l36.54"></a><span id="l36.54" class="difflineminus">-  As per http://plan9.bell-labs.com/magic/man2html/6/image the metadata</span>
<a href="#l36.55"></a><span id="l36.55" class="difflineminus">-  comprises 5 words separated by blanks.  As it happens each word starts</span>
<a href="#l36.56"></a><span id="l36.56" class="difflineminus">-  at an index that is a multiple of 12, but this routine does not care</span>
<a href="#l36.57"></a><span id="l36.57" class="difflineminus">-  about that.&quot;&quot;&quot;</span>
<a href="#l36.58"></a><span id="l36.58" class="difflineminus">-</span>
<a href="#l36.59"></a><span id="l36.59" class="difflineminus">-  r = r.split()</span>
<a href="#l36.60"></a><span id="l36.60" class="difflineminus">-  # :todo: raise FormatError</span>
<a href="#l36.61"></a><span id="l36.61" class="difflineminus">-  assert len(r) == 5</span>
<a href="#l36.62"></a><span id="l36.62" class="difflineminus">-  r = [r[0]] + map(int, r[1:])</span>
<a href="#l36.63"></a><span id="l36.63" class="difflineminus">-  return r</span>
<a href="#l36.64"></a><span id="l36.64" class="difflineminus">-</span>
<a href="#l36.65"></a><span id="l36.65" class="difflineminus">-def bitdepthof(pixel) :</span>
<a href="#l36.66"></a><span id="l36.66" class="difflineminus">-    &quot;&quot;&quot;Return the bitdepth for a Plan9 pixel format string.&quot;&quot;&quot;</span>
<a href="#l36.67"></a><span id="l36.67" class="difflineminus">-</span>
<a href="#l36.68"></a><span id="l36.68" class="difflineminus">-    maxd = 0</span>
<a href="#l36.69"></a><span id="l36.69" class="difflineminus">-    for c in re.findall(r'[a-z]\d*', pixel) :</span>
<a href="#l36.70"></a><span id="l36.70" class="difflineminus">-        if c[0] != 'x':</span>
<a href="#l36.71"></a><span id="l36.71" class="difflineminus">-            maxd = max(maxd, int(c[1:]))</span>
<a href="#l36.72"></a><span id="l36.72" class="difflineminus">-    return maxd</span>
<a href="#l36.73"></a><span id="l36.73" class="difflineminus">-</span>
<a href="#l36.74"></a><span id="l36.74" class="difflineminus">-def maxvalof(pixel):</span>
<a href="#l36.75"></a><span id="l36.75" class="difflineminus">-  &quot;&quot;&quot;Return the netpbm MAXVAL for a Plan9 pixel format string.&quot;&quot;&quot;</span>
<a href="#l36.76"></a><span id="l36.76" class="difflineminus">-</span>
<a href="#l36.77"></a><span id="l36.77" class="difflineminus">-  bitdepth = bitdepthof(pixel)</span>
<a href="#l36.78"></a><span id="l36.78" class="difflineminus">-  return (2**bitdepth)-1</span>
<a href="#l36.79"></a><span id="l36.79" class="difflineminus">-</span>
<a href="#l36.80"></a><span id="l36.80" class="difflineminus">-def pixmeta(metadata, f) :</span>
<a href="#l36.81"></a><span id="l36.81" class="difflineminus">-    &quot;&quot;&quot;Convert (uncompressed) Plan 9 image file to pair of (*metadata*,</span>
<a href="#l36.82"></a><span id="l36.82" class="difflineminus">-    *pixels*).  This is intended to be used by PyPNG format.  *metadata*</span>
<a href="#l36.83"></a><span id="l36.83" class="difflineminus">-    is the metadata returned in a dictionary, *pixels* is an iterator that</span>
<a href="#l36.84"></a><span id="l36.84" class="difflineminus">-    yields each row in boxed row flat pixel format.</span>
<a href="#l36.85"></a><span id="l36.85" class="difflineminus">-</span>
<a href="#l36.86"></a><span id="l36.86" class="difflineminus">-    `f`, the input file, should be cued up to the start of the image data.</span>
<a href="#l36.87"></a><span id="l36.87" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l36.88"></a><span id="l36.88" class="difflineminus">-</span>
<a href="#l36.89"></a><span id="l36.89" class="difflineminus">-    chan,minx,miny,limx,limy = metadata</span>
<a href="#l36.90"></a><span id="l36.90" class="difflineminus">-    rows = limy - miny</span>
<a href="#l36.91"></a><span id="l36.91" class="difflineminus">-    width = limx - minx</span>
<a href="#l36.92"></a><span id="l36.92" class="difflineminus">-    nchans = len(re.findall('[a-wyz]', chan))</span>
<a href="#l36.93"></a><span id="l36.93" class="difflineminus">-    alpha = 'a' in chan</span>
<a href="#l36.94"></a><span id="l36.94" class="difflineminus">-    # Iverson's convention for the win!</span>
<a href="#l36.95"></a><span id="l36.95" class="difflineminus">-    ncolour = nchans - alpha</span>
<a href="#l36.96"></a><span id="l36.96" class="difflineminus">-    greyscale = ncolour == 1</span>
<a href="#l36.97"></a><span id="l36.97" class="difflineminus">-    bitdepth = bitdepthof(chan)</span>
<a href="#l36.98"></a><span id="l36.98" class="difflineminus">-    maxval = 2**bitdepth - 1</span>
<a href="#l36.99"></a><span id="l36.99" class="difflineminus">-    # PNG style metadata</span>
<a href="#l36.100"></a><span id="l36.100" class="difflineminus">-    meta=dict(size=(width,rows), bitdepth=bitdepthof(chan),</span>
<a href="#l36.101"></a><span id="l36.101" class="difflineminus">-      greyscale=greyscale, alpha=alpha, planes=nchans)</span>
<a href="#l36.102"></a><span id="l36.102" class="difflineminus">-</span>
<a href="#l36.103"></a><span id="l36.103" class="difflineminus">-    return itertools.imap(lambda x: itertools.chain(*x),</span>
<a href="#l36.104"></a><span id="l36.104" class="difflineminus">-      block(unpack(f, rows, width, chan, maxval), width)), meta</span>
<a href="#l36.105"></a><span id="l36.105" class="difflineminus">-</span>
<a href="#l36.106"></a><span id="l36.106" class="difflineminus">-def png(out, metadata, f):</span>
<a href="#l36.107"></a><span id="l36.107" class="difflineminus">-    &quot;&quot;&quot;Convert to PNG format.  `metadata` should be a Plan9 5-tuple; `f`</span>
<a href="#l36.108"></a><span id="l36.108" class="difflineminus">-    the input file (see :meth:`pixmeta`).</span>
<a href="#l36.109"></a><span id="l36.109" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l36.110"></a><span id="l36.110" class="difflineminus">-</span>
<a href="#l36.111"></a><span id="l36.111" class="difflineminus">-    import png</span>
<a href="#l36.112"></a><span id="l36.112" class="difflineminus">-</span>
<a href="#l36.113"></a><span id="l36.113" class="difflineminus">-    pixels,meta = pixmeta(metadata, f)</span>
<a href="#l36.114"></a><span id="l36.114" class="difflineminus">-    p = png.Writer(**meta)</span>
<a href="#l36.115"></a><span id="l36.115" class="difflineminus">-    p.write(out, pixels)</span>
<a href="#l36.116"></a><span id="l36.116" class="difflineminus">-</span>
<a href="#l36.117"></a><span id="l36.117" class="difflineminus">-def spam():</span>
<a href="#l36.118"></a><span id="l36.118" class="difflineminus">-  &quot;&quot;&quot;Not really spam, but old PAM code, which is in limbo.&quot;&quot;&quot;</span>
<a href="#l36.119"></a><span id="l36.119" class="difflineminus">-</span>
<a href="#l36.120"></a><span id="l36.120" class="difflineminus">-  if nchans == 3 or nchans == 1 :</span>
<a href="#l36.121"></a><span id="l36.121" class="difflineminus">-    # PGM (P5) or PPM (P6) format.</span>
<a href="#l36.122"></a><span id="l36.122" class="difflineminus">-    output.write('P%d\n%d %d %d\n' % (5+(nchans==3), width, rows, maxval))</span>
<a href="#l36.123"></a><span id="l36.123" class="difflineminus">-  else :</span>
<a href="#l36.124"></a><span id="l36.124" class="difflineminus">-    # PAM format.</span>
<a href="#l36.125"></a><span id="l36.125" class="difflineminus">-    output.write(&quot;&quot;&quot;P7</span>
<a href="#l36.126"></a><span id="l36.126" class="difflineminus">-WIDTH %d</span>
<a href="#l36.127"></a><span id="l36.127" class="difflineminus">-HEIGHT %d</span>
<a href="#l36.128"></a><span id="l36.128" class="difflineminus">-DEPTH %d</span>
<a href="#l36.129"></a><span id="l36.129" class="difflineminus">-MAXVAL %d</span>
<a href="#l36.130"></a><span id="l36.130" class="difflineminus">-&quot;&quot;&quot; % (width, rows, nchans, maxval))</span>
<a href="#l36.131"></a><span id="l36.131" class="difflineminus">-</span>
<a href="#l36.132"></a><span id="l36.132" class="difflineminus">-def unpack(f, rows, width, pixel, maxval) :</span>
<a href="#l36.133"></a><span id="l36.133" class="difflineminus">-  &quot;&quot;&quot;Unpack `f` into pixels.  Assumes the pixel format is such that the depth</span>
<a href="#l36.134"></a><span id="l36.134" class="difflineminus">-  is either a multiple or a divisor of 8.</span>
<a href="#l36.135"></a><span id="l36.135" class="difflineminus">-  `f` is assumed to be an iterator that returns blocks of input such</span>
<a href="#l36.136"></a><span id="l36.136" class="difflineminus">-  that each block contains a whole number of pixels.  An iterator is</span>
<a href="#l36.137"></a><span id="l36.137" class="difflineminus">-  returned that yields each pixel as an n-tuple.  `pixel` describes the</span>
<a href="#l36.138"></a><span id="l36.138" class="difflineminus">-  pixel format using the Plan9 syntax (&quot;k8&quot;, &quot;r8g8b8&quot;, and so on).</span>
<a href="#l36.139"></a><span id="l36.139" class="difflineminus">-  &quot;&quot;&quot;</span>
<a href="#l36.140"></a><span id="l36.140" class="difflineminus">-</span>
<a href="#l36.141"></a><span id="l36.141" class="difflineminus">-  def mask(w) :</span>
<a href="#l36.142"></a><span id="l36.142" class="difflineminus">-    &quot;&quot;&quot;An integer, to be used as a mask, with bottom `w` bits set to 1.&quot;&quot;&quot;</span>
<a href="#l36.143"></a><span id="l36.143" class="difflineminus">-</span>
<a href="#l36.144"></a><span id="l36.144" class="difflineminus">-    return (1 &lt;&lt; w)-1</span>
<a href="#l36.145"></a><span id="l36.145" class="difflineminus">-</span>
<a href="#l36.146"></a><span id="l36.146" class="difflineminus">-  def deblock(f, depth, width) :</span>
<a href="#l36.147"></a><span id="l36.147" class="difflineminus">-    &quot;&quot;&quot;A &quot;packer&quot; used to convert multiple bytes into single pixels.</span>
<a href="#l36.148"></a><span id="l36.148" class="difflineminus">-    `depth` is the pixel depth in bits (&gt;= 8), `width` is the row width in</span>
<a href="#l36.149"></a><span id="l36.149" class="difflineminus">-    pixels.</span>
<a href="#l36.150"></a><span id="l36.150" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l36.151"></a><span id="l36.151" class="difflineminus">-</span>
<a href="#l36.152"></a><span id="l36.152" class="difflineminus">-    w = depth // 8</span>
<a href="#l36.153"></a><span id="l36.153" class="difflineminus">-    i = 0</span>
<a href="#l36.154"></a><span id="l36.154" class="difflineminus">-    for block in f :</span>
<a href="#l36.155"></a><span id="l36.155" class="difflineminus">-      for i in range(len(block)//w) :</span>
<a href="#l36.156"></a><span id="l36.156" class="difflineminus">-        p = block[w*i:w*(i+1)]</span>
<a href="#l36.157"></a><span id="l36.157" class="difflineminus">-        i += w</span>
<a href="#l36.158"></a><span id="l36.158" class="difflineminus">-        # Convert p to little-endian integer, x</span>
<a href="#l36.159"></a><span id="l36.159" class="difflineminus">-        x = 0</span>
<a href="#l36.160"></a><span id="l36.160" class="difflineminus">-        s = 1 # scale</span>
<a href="#l36.161"></a><span id="l36.161" class="difflineminus">-        for j in p :</span>
<a href="#l36.162"></a><span id="l36.162" class="difflineminus">-          x += s * ord(j)</span>
<a href="#l36.163"></a><span id="l36.163" class="difflineminus">-          s &lt;&lt;= 8</span>
<a href="#l36.164"></a><span id="l36.164" class="difflineminus">-        yield x</span>
<a href="#l36.165"></a><span id="l36.165" class="difflineminus">-</span>
<a href="#l36.166"></a><span id="l36.166" class="difflineminus">-  def bitfunge(f, depth, width) :</span>
<a href="#l36.167"></a><span id="l36.167" class="difflineminus">-    &quot;&quot;&quot;A &quot;packer&quot; used to convert single bytes into multiple pixels.</span>
<a href="#l36.168"></a><span id="l36.168" class="difflineminus">-    Depth is the pixel depth (&lt; 8), width is the row width in pixels.</span>
<a href="#l36.169"></a><span id="l36.169" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l36.170"></a><span id="l36.170" class="difflineminus">-</span>
<a href="#l36.171"></a><span id="l36.171" class="difflineminus">-    for block in f :</span>
<a href="#l36.172"></a><span id="l36.172" class="difflineminus">-      col = 0</span>
<a href="#l36.173"></a><span id="l36.173" class="difflineminus">-      for i in block :</span>
<a href="#l36.174"></a><span id="l36.174" class="difflineminus">-        x = ord(i)</span>
<a href="#l36.175"></a><span id="l36.175" class="difflineminus">-        for j in range(8/depth) :</span>
<a href="#l36.176"></a><span id="l36.176" class="difflineminus">-          yield x &gt;&gt; (8 - depth)</span>
<a href="#l36.177"></a><span id="l36.177" class="difflineminus">-          col += 1</span>
<a href="#l36.178"></a><span id="l36.178" class="difflineminus">-          if col == width :</span>
<a href="#l36.179"></a><span id="l36.179" class="difflineminus">-            # A row-end forces a new byte even if we haven't consumed</span>
<a href="#l36.180"></a><span id="l36.180" class="difflineminus">-            # all of the current byte.  Effectively rows are bit-padded</span>
<a href="#l36.181"></a><span id="l36.181" class="difflineminus">-            # to make a whole number of bytes.</span>
<a href="#l36.182"></a><span id="l36.182" class="difflineminus">-            col = 0</span>
<a href="#l36.183"></a><span id="l36.183" class="difflineminus">-            break</span>
<a href="#l36.184"></a><span id="l36.184" class="difflineminus">-          x &lt;&lt;= depth</span>
<a href="#l36.185"></a><span id="l36.185" class="difflineminus">-</span>
<a href="#l36.186"></a><span id="l36.186" class="difflineminus">-  # number of bits in each channel</span>
<a href="#l36.187"></a><span id="l36.187" class="difflineminus">-  chan = map(int, re.findall(r'\d+', pixel))</span>
<a href="#l36.188"></a><span id="l36.188" class="difflineminus">-  # type of each channel</span>
<a href="#l36.189"></a><span id="l36.189" class="difflineminus">-  type = re.findall('[a-z]', pixel)</span>
<a href="#l36.190"></a><span id="l36.190" class="difflineminus">-</span>
<a href="#l36.191"></a><span id="l36.191" class="difflineminus">-  depth = sum(chan)</span>
<a href="#l36.192"></a><span id="l36.192" class="difflineminus">-</span>
<a href="#l36.193"></a><span id="l36.193" class="difflineminus">-  # According to the value of depth pick a &quot;packer&quot; that either gathers</span>
<a href="#l36.194"></a><span id="l36.194" class="difflineminus">-  # multiple bytes into a single pixel (for depth &gt;= 8) or split bytes</span>
<a href="#l36.195"></a><span id="l36.195" class="difflineminus">-  # into several pixels (for depth &lt; 8)</span>
<a href="#l36.196"></a><span id="l36.196" class="difflineminus">-  if depth &gt;= 8 :</span>
<a href="#l36.197"></a><span id="l36.197" class="difflineminus">-    # </span>
<a href="#l36.198"></a><span id="l36.198" class="difflineminus">-    assert depth % 8 == 0</span>
<a href="#l36.199"></a><span id="l36.199" class="difflineminus">-    packer = deblock</span>
<a href="#l36.200"></a><span id="l36.200" class="difflineminus">-  else :</span>
<a href="#l36.201"></a><span id="l36.201" class="difflineminus">-    assert 8 % depth == 0</span>
<a href="#l36.202"></a><span id="l36.202" class="difflineminus">-    packer = bitfunge</span>
<a href="#l36.203"></a><span id="l36.203" class="difflineminus">-</span>
<a href="#l36.204"></a><span id="l36.204" class="difflineminus">-  for x in packer(f, depth, width) :</span>
<a href="#l36.205"></a><span id="l36.205" class="difflineminus">-    # x is the pixel as an unsigned integer</span>
<a href="#l36.206"></a><span id="l36.206" class="difflineminus">-    o = []</span>
<a href="#l36.207"></a><span id="l36.207" class="difflineminus">-    # This is a bit yucky.  Extract each channel from the _most_</span>
<a href="#l36.208"></a><span id="l36.208" class="difflineminus">-    # significant part of x.</span>
<a href="#l36.209"></a><span id="l36.209" class="difflineminus">-    for j in range(len(chan)) :</span>
<a href="#l36.210"></a><span id="l36.210" class="difflineminus">-      v = (x &gt;&gt; (depth - chan[j])) &amp; mask(chan[j])</span>
<a href="#l36.211"></a><span id="l36.211" class="difflineminus">-      x &lt;&lt;= chan[j]</span>
<a href="#l36.212"></a><span id="l36.212" class="difflineminus">-      if type[j] != 'x' :</span>
<a href="#l36.213"></a><span id="l36.213" class="difflineminus">-        # scale to maxval</span>
<a href="#l36.214"></a><span id="l36.214" class="difflineminus">-        v = v * float(maxval) / mask(chan[j])</span>
<a href="#l36.215"></a><span id="l36.215" class="difflineminus">-        v = int(v+0.5)</span>
<a href="#l36.216"></a><span id="l36.216" class="difflineminus">-        o.append(v)</span>
<a href="#l36.217"></a><span id="l36.217" class="difflineminus">-    yield o</span>
<a href="#l36.218"></a><span id="l36.218" class="difflineminus">-</span>
<a href="#l36.219"></a><span id="l36.219" class="difflineminus">-</span>
<a href="#l36.220"></a><span id="l36.220" class="difflineminus">-def decompress(f) :</span>
<a href="#l36.221"></a><span id="l36.221" class="difflineminus">-  &quot;&quot;&quot;Decompress a Plan 9 image file.  Assumes f is already cued past the</span>
<a href="#l36.222"></a><span id="l36.222" class="difflineminus">-  initial 'compressed\n' string.</span>
<a href="#l36.223"></a><span id="l36.223" class="difflineminus">-  &quot;&quot;&quot;</span>
<a href="#l36.224"></a><span id="l36.224" class="difflineminus">-</span>
<a href="#l36.225"></a><span id="l36.225" class="difflineminus">-  r = meta(f.read(60))</span>
<a href="#l36.226"></a><span id="l36.226" class="difflineminus">-  return r, decomprest(f, r[4])</span>
<a href="#l36.227"></a><span id="l36.227" class="difflineminus">-</span>
<a href="#l36.228"></a><span id="l36.228" class="difflineminus">-</span>
<a href="#l36.229"></a><span id="l36.229" class="difflineminus">-def decomprest(f, rows) :</span>
<a href="#l36.230"></a><span id="l36.230" class="difflineminus">-  &quot;&quot;&quot;Iterator that decompresses the rest of a file once the metadata</span>
<a href="#l36.231"></a><span id="l36.231" class="difflineminus">-  have been consumed.&quot;&quot;&quot;</span>
<a href="#l36.232"></a><span id="l36.232" class="difflineminus">-</span>
<a href="#l36.233"></a><span id="l36.233" class="difflineminus">-  row = 0</span>
<a href="#l36.234"></a><span id="l36.234" class="difflineminus">-  while row &lt; rows :</span>
<a href="#l36.235"></a><span id="l36.235" class="difflineminus">-    row,o = deblock(f)</span>
<a href="#l36.236"></a><span id="l36.236" class="difflineminus">-    yield o</span>
<a href="#l36.237"></a><span id="l36.237" class="difflineminus">-</span>
<a href="#l36.238"></a><span id="l36.238" class="difflineminus">-</span>
<a href="#l36.239"></a><span id="l36.239" class="difflineminus">-def deblock(f) :</span>
<a href="#l36.240"></a><span id="l36.240" class="difflineminus">-  &quot;&quot;&quot;Decompress a single block from a compressed Plan 9 image file.</span>
<a href="#l36.241"></a><span id="l36.241" class="difflineminus">-  Each block starts with 2 decimal strings of 12 bytes each.  Yields a</span>
<a href="#l36.242"></a><span id="l36.242" class="difflineminus">-  sequence of (row, data) pairs where row is the total number of rows</span>
<a href="#l36.243"></a><span id="l36.243" class="difflineminus">-  processed according to the file format and data is the decompressed</span>
<a href="#l36.244"></a><span id="l36.244" class="difflineminus">-  data for a set of rows.&quot;&quot;&quot;</span>
<a href="#l36.245"></a><span id="l36.245" class="difflineminus">-</span>
<a href="#l36.246"></a><span id="l36.246" class="difflineminus">-  row = int(f.read(12))</span>
<a href="#l36.247"></a><span id="l36.247" class="difflineminus">-  size = int(f.read(12))</span>
<a href="#l36.248"></a><span id="l36.248" class="difflineminus">-  if not (0 &lt;= size &lt;= 6000) :</span>
<a href="#l36.249"></a><span id="l36.249" class="difflineminus">-    raise 'block has invalid size; not a Plan 9 image file?'</span>
<a href="#l36.250"></a><span id="l36.250" class="difflineminus">-</span>
<a href="#l36.251"></a><span id="l36.251" class="difflineminus">-  # Since each block is at most 6000 bytes we may as well read it all in</span>
<a href="#l36.252"></a><span id="l36.252" class="difflineminus">-  # one go.</span>
<a href="#l36.253"></a><span id="l36.253" class="difflineminus">-  d = f.read(size)</span>
<a href="#l36.254"></a><span id="l36.254" class="difflineminus">-  i = 0</span>
<a href="#l36.255"></a><span id="l36.255" class="difflineminus">-  o = []</span>
<a href="#l36.256"></a><span id="l36.256" class="difflineminus">-</span>
<a href="#l36.257"></a><span id="l36.257" class="difflineminus">-  while i &lt; size :</span>
<a href="#l36.258"></a><span id="l36.258" class="difflineminus">-    x = ord(d[i])</span>
<a href="#l36.259"></a><span id="l36.259" class="difflineminus">-    i += 1</span>
<a href="#l36.260"></a><span id="l36.260" class="difflineminus">-    if x &amp; 0x80 :</span>
<a href="#l36.261"></a><span id="l36.261" class="difflineminus">-      x = (x &amp; 0x7f) + 1</span>
<a href="#l36.262"></a><span id="l36.262" class="difflineminus">-      lit = d[i:i+x]</span>
<a href="#l36.263"></a><span id="l36.263" class="difflineminus">-      i += x</span>
<a href="#l36.264"></a><span id="l36.264" class="difflineminus">-      o.extend(lit)</span>
<a href="#l36.265"></a><span id="l36.265" class="difflineminus">-      continue</span>
<a href="#l36.266"></a><span id="l36.266" class="difflineminus">-    # x's high-order bit is 0</span>
<a href="#l36.267"></a><span id="l36.267" class="difflineminus">-    l = (x &gt;&gt; 2) + 3</span>
<a href="#l36.268"></a><span id="l36.268" class="difflineminus">-    # Offset is made from bottom 2 bits of x and all 8 bits of next</span>
<a href="#l36.269"></a><span id="l36.269" class="difflineminus">-    # byte.  http://plan9.bell-labs.com/magic/man2html/6/image doesn't</span>
<a href="#l36.270"></a><span id="l36.270" class="difflineminus">-    # say whether x's 2 bits are most signiificant or least significant.</span>
<a href="#l36.271"></a><span id="l36.271" class="difflineminus">-    # But it is clear from inspecting a random file,</span>
<a href="#l36.272"></a><span id="l36.272" class="difflineminus">-    # http://plan9.bell-labs.com/sources/plan9/sys/games/lib/sokoban/images/cargo.bit</span>
<a href="#l36.273"></a><span id="l36.273" class="difflineminus">-    # that x's 2 bit are most significant.</span>
<a href="#l36.274"></a><span id="l36.274" class="difflineminus">-    # </span>
<a href="#l36.275"></a><span id="l36.275" class="difflineminus">-    offset = (x &amp; 3) &lt;&lt; 8</span>
<a href="#l36.276"></a><span id="l36.276" class="difflineminus">-    offset |= ord(d[i])</span>
<a href="#l36.277"></a><span id="l36.277" class="difflineminus">-    i += 1</span>
<a href="#l36.278"></a><span id="l36.278" class="difflineminus">-    # Note: complement operator neatly maps (0 to 1023) to (-1 to</span>
<a href="#l36.279"></a><span id="l36.279" class="difflineminus">-    # -1024).  Adding len(o) gives a (non-negative) offset into o from</span>
<a href="#l36.280"></a><span id="l36.280" class="difflineminus">-    # which to start indexing.</span>
<a href="#l36.281"></a><span id="l36.281" class="difflineminus">-    offset = ~offset + len(o)</span>
<a href="#l36.282"></a><span id="l36.282" class="difflineminus">-    if offset &lt; 0 :</span>
<a href="#l36.283"></a><span id="l36.283" class="difflineminus">-      raise 'byte offset indexes off the begininning of the output buffer; not a Plan 9 image file?'</span>
<a href="#l36.284"></a><span id="l36.284" class="difflineminus">-    for j in range(l) :</span>
<a href="#l36.285"></a><span id="l36.285" class="difflineminus">-      o.append(o[offset+j])</span>
<a href="#l36.286"></a><span id="l36.286" class="difflineminus">-  return row,''.join(o)</span>
<a href="#l36.287"></a><span id="l36.287" class="difflineminus">-</span>
<a href="#l36.288"></a><span id="l36.288" class="difflineminus">-def main(argv=None) :</span>
<a href="#l36.289"></a><span id="l36.289" class="difflineminus">-  if argv is None :</span>
<a href="#l36.290"></a><span id="l36.290" class="difflineminus">-    argv = sys.argv</span>
<a href="#l36.291"></a><span id="l36.291" class="difflineminus">-  if len(sys.argv) &lt;= 1 :</span>
<a href="#l36.292"></a><span id="l36.292" class="difflineminus">-    return convert(sys.stdin)</span>
<a href="#l36.293"></a><span id="l36.293" class="difflineminus">-  else :</span>
<a href="#l36.294"></a><span id="l36.294" class="difflineminus">-    return convert(open(argv[1], 'rb'))</span>
<a href="#l36.295"></a><span id="l36.295" class="difflineminus">-</span>
<a href="#l36.296"></a><span id="l36.296" class="difflineminus">-if __name__ == '__main__' :</span>
<a href="#l36.297"></a><span id="l36.297" class="difflineminus">-  sys.exit(main())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">deleted file mode 100644</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineminus">--- a/build/pypng/pngchunk</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineplus">+++ /dev/null</span>
<a href="#l37.4"></a><span id="l37.4" class="difflineat">@@ -1,172 +0,0 @@</span>
<a href="#l37.5"></a><span id="l37.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l37.6"></a><span id="l37.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pngchunk $</span>
<a href="#l37.7"></a><span id="l37.7" class="difflineminus">-# $Rev: 156 $</span>
<a href="#l37.8"></a><span id="l37.8" class="difflineminus">-# pngchunk</span>
<a href="#l37.9"></a><span id="l37.9" class="difflineminus">-# Chunk editing/extraction tool.</span>
<a href="#l37.10"></a><span id="l37.10" class="difflineminus">-</span>
<a href="#l37.11"></a><span id="l37.11" class="difflineminus">-import struct</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-import warnings</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineminus">-</span>
<a href="#l37.14"></a><span id="l37.14" class="difflineminus">-# Local module.</span>
<a href="#l37.15"></a><span id="l37.15" class="difflineminus">-import png</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineminus">-</span>
<a href="#l37.17"></a><span id="l37.17" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l37.18"></a><span id="l37.18" class="difflineminus">-pngchunk [--gamma g] [--iccprofile file] [--sigbit b] [-c cHNK!] [-c cHNK:foo] [-c cHNK&lt;file]</span>
<a href="#l37.19"></a><span id="l37.19" class="difflineminus">-</span>
<a href="#l37.20"></a><span id="l37.20" class="difflineminus">-The ``-c`` option is used to add or remove chunks.  A chunk is specified</span>
<a href="#l37.21"></a><span id="l37.21" class="difflineminus">-by its 4 byte chunk type.  If this is followed by a ``!`` then that</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineminus">-chunk is removed from the PNG file.  If the chunk type is followed by a</span>
<a href="#l37.23"></a><span id="l37.23" class="difflineminus">-``:`` then the chunk is replaced with the contents of the rest of the</span>
<a href="#l37.24"></a><span id="l37.24" class="difflineminus">-argument (this is probably only useful if the content is mostly ASCII,</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineminus">-otherwise it's a pain to quote the contents, otherwise see...).  A ``&lt;``</span>
<a href="#l37.26"></a><span id="l37.26" class="difflineminus">-can be used to take the contents of the chunk from the named file.</span>
<a href="#l37.27"></a><span id="l37.27" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l37.28"></a><span id="l37.28" class="difflineminus">-</span>
<a href="#l37.29"></a><span id="l37.29" class="difflineminus">-</span>
<a href="#l37.30"></a><span id="l37.30" class="difflineminus">-def chunk(out, inp, l):</span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">-    &quot;&quot;&quot;Process the input PNG file to the output, chunk by chunk.  Chunks</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineminus">-    can be inserted, removed, replaced, or sometimes edited.  Generally, </span>
<a href="#l37.33"></a><span id="l37.33" class="difflineminus">-    chunks are not inspected, so pixel data (in the ``IDAT`` chunks)</span>
<a href="#l37.34"></a><span id="l37.34" class="difflineminus">-    cannot be modified.  `l` should be a list of (*chunktype*,</span>
<a href="#l37.35"></a><span id="l37.35" class="difflineminus">-    *content*) pairs.  *chunktype* is usually the type of the PNG chunk,</span>
<a href="#l37.36"></a><span id="l37.36" class="difflineminus">-    specified as a 4-byte Python string, and *content* is the chunk's</span>
<a href="#l37.37"></a><span id="l37.37" class="difflineminus">-    content, also as a string; if *content* is ``None`` then *all*</span>
<a href="#l37.38"></a><span id="l37.38" class="difflineminus">-    chunks of that type will be removed.</span>
<a href="#l37.39"></a><span id="l37.39" class="difflineminus">-</span>
<a href="#l37.40"></a><span id="l37.40" class="difflineminus">-    This function *knows* about certain chunk types and will</span>
<a href="#l37.41"></a><span id="l37.41" class="difflineminus">-    automatically convert from Python friendly representations to</span>
<a href="#l37.42"></a><span id="l37.42" class="difflineminus">-    string-of-bytes.</span>
<a href="#l37.43"></a><span id="l37.43" class="difflineminus">-</span>
<a href="#l37.44"></a><span id="l37.44" class="difflineminus">-    chunktype</span>
<a href="#l37.45"></a><span id="l37.45" class="difflineminus">-    'gamma'     'gAMA'  float</span>
<a href="#l37.46"></a><span id="l37.46" class="difflineminus">-    'sigbit'    'sBIT'  int, or tuple of length 1,2 or 3</span>
<a href="#l37.47"></a><span id="l37.47" class="difflineminus">-</span>
<a href="#l37.48"></a><span id="l37.48" class="difflineminus">-    Note that the length of the strings used to identify *friendly*</span>
<a href="#l37.49"></a><span id="l37.49" class="difflineminus">-    chunk types is greater than 4, hence they cannot be confused with</span>
<a href="#l37.50"></a><span id="l37.50" class="difflineminus">-    canonical chunk types.</span>
<a href="#l37.51"></a><span id="l37.51" class="difflineminus">-</span>
<a href="#l37.52"></a><span id="l37.52" class="difflineminus">-    Chunk types, if specified using the 4-byte syntax, need not be</span>
<a href="#l37.53"></a><span id="l37.53" class="difflineminus">-    official PNG chunks at all.  Non-standard chunks can be created.</span>
<a href="#l37.54"></a><span id="l37.54" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l37.55"></a><span id="l37.55" class="difflineminus">-</span>
<a href="#l37.56"></a><span id="l37.56" class="difflineminus">-    def canonical(p):</span>
<a href="#l37.57"></a><span id="l37.57" class="difflineminus">-        &quot;&quot;&quot;Take a pair (*chunktype*, *content*), and return canonical</span>
<a href="#l37.58"></a><span id="l37.58" class="difflineminus">-        representation (*chunktype*, *content*) where `chunktype` is the</span>
<a href="#l37.59"></a><span id="l37.59" class="difflineminus">-        4-byte PNG chunk type and `content` is a string.</span>
<a href="#l37.60"></a><span id="l37.60" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l37.61"></a><span id="l37.61" class="difflineminus">-</span>
<a href="#l37.62"></a><span id="l37.62" class="difflineminus">-        t,v = p</span>
<a href="#l37.63"></a><span id="l37.63" class="difflineminus">-        if len(t) == 4:</span>
<a href="#l37.64"></a><span id="l37.64" class="difflineminus">-            return t,v</span>
<a href="#l37.65"></a><span id="l37.65" class="difflineminus">-        if t == 'gamma':</span>
<a href="#l37.66"></a><span id="l37.66" class="difflineminus">-            t = 'gAMA'</span>
<a href="#l37.67"></a><span id="l37.67" class="difflineminus">-            v = int(round(1e5*v))</span>
<a href="#l37.68"></a><span id="l37.68" class="difflineminus">-            v = struct.pack('&gt;I', v)</span>
<a href="#l37.69"></a><span id="l37.69" class="difflineminus">-        elif t == 'sigbit':</span>
<a href="#l37.70"></a><span id="l37.70" class="difflineminus">-            t = 'sBIT'</span>
<a href="#l37.71"></a><span id="l37.71" class="difflineminus">-            try:</span>
<a href="#l37.72"></a><span id="l37.72" class="difflineminus">-                v[0]</span>
<a href="#l37.73"></a><span id="l37.73" class="difflineminus">-            except TypeError:</span>
<a href="#l37.74"></a><span id="l37.74" class="difflineminus">-                v = (v,)</span>
<a href="#l37.75"></a><span id="l37.75" class="difflineminus">-            v = struct.pack('%dB' % len(v), *v)</span>
<a href="#l37.76"></a><span id="l37.76" class="difflineminus">-        elif t == 'iccprofile':</span>
<a href="#l37.77"></a><span id="l37.77" class="difflineminus">-            t = 'iCCP'</span>
<a href="#l37.78"></a><span id="l37.78" class="difflineminus">-            # http://www.w3.org/TR/PNG/#11iCCP</span>
<a href="#l37.79"></a><span id="l37.79" class="difflineminus">-            v = 'a color profile\x00\x00' + v.encode('zip')</span>
<a href="#l37.80"></a><span id="l37.80" class="difflineminus">-        else:</span>
<a href="#l37.81"></a><span id="l37.81" class="difflineminus">-            warnings.warn('Unknown chunk type %r' % t)</span>
<a href="#l37.82"></a><span id="l37.82" class="difflineminus">-        return t[:4],v</span>
<a href="#l37.83"></a><span id="l37.83" class="difflineminus">-</span>
<a href="#l37.84"></a><span id="l37.84" class="difflineminus">-    l = map(canonical, l)</span>
<a href="#l37.85"></a><span id="l37.85" class="difflineminus">-    # Some chunks automagically replace ones that are present in the</span>
<a href="#l37.86"></a><span id="l37.86" class="difflineminus">-    # source PNG.  There can only be one of each of these chunk types.</span>
<a href="#l37.87"></a><span id="l37.87" class="difflineminus">-    # Create a 'replace' dictionary to record these chunks.</span>
<a href="#l37.88"></a><span id="l37.88" class="difflineminus">-    add = []</span>
<a href="#l37.89"></a><span id="l37.89" class="difflineminus">-    delete = set()</span>
<a href="#l37.90"></a><span id="l37.90" class="difflineminus">-    replacing = set(['gAMA', 'sBIT', 'PLTE', 'tRNS', 'sPLT', 'IHDR'])</span>
<a href="#l37.91"></a><span id="l37.91" class="difflineminus">-    replace = dict()</span>
<a href="#l37.92"></a><span id="l37.92" class="difflineminus">-    for t,v in l:</span>
<a href="#l37.93"></a><span id="l37.93" class="difflineminus">-        if v is None:</span>
<a href="#l37.94"></a><span id="l37.94" class="difflineminus">-            delete.add(t)</span>
<a href="#l37.95"></a><span id="l37.95" class="difflineminus">-        elif t in replacing:</span>
<a href="#l37.96"></a><span id="l37.96" class="difflineminus">-            replace[t] = v</span>
<a href="#l37.97"></a><span id="l37.97" class="difflineminus">-        else:</span>
<a href="#l37.98"></a><span id="l37.98" class="difflineminus">-            add.append((t,v))</span>
<a href="#l37.99"></a><span id="l37.99" class="difflineminus">-    del l</span>
<a href="#l37.100"></a><span id="l37.100" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l37.101"></a><span id="l37.101" class="difflineminus">-    chunks = r.chunks()</span>
<a href="#l37.102"></a><span id="l37.102" class="difflineminus">-    def iterchunks():</span>
<a href="#l37.103"></a><span id="l37.103" class="difflineminus">-        for t,v in chunks:</span>
<a href="#l37.104"></a><span id="l37.104" class="difflineminus">-            if t in delete:</span>
<a href="#l37.105"></a><span id="l37.105" class="difflineminus">-                continue</span>
<a href="#l37.106"></a><span id="l37.106" class="difflineminus">-            if t in replace:</span>
<a href="#l37.107"></a><span id="l37.107" class="difflineminus">-                yield t,replace[t]</span>
<a href="#l37.108"></a><span id="l37.108" class="difflineminus">-                del replace[t]</span>
<a href="#l37.109"></a><span id="l37.109" class="difflineminus">-                continue</span>
<a href="#l37.110"></a><span id="l37.110" class="difflineminus">-            if t == 'IDAT' and replace:</span>
<a href="#l37.111"></a><span id="l37.111" class="difflineminus">-                # Insert into the output any chunks that are on the</span>
<a href="#l37.112"></a><span id="l37.112" class="difflineminus">-                # replace list.  We haven't output them yet, because we</span>
<a href="#l37.113"></a><span id="l37.113" class="difflineminus">-                # didn't see an original chunk of the same type to</span>
<a href="#l37.114"></a><span id="l37.114" class="difflineminus">-                # replace.  Thus the &quot;replace&quot; is actually an &quot;insert&quot;.</span>
<a href="#l37.115"></a><span id="l37.115" class="difflineminus">-                for u,w in replace.items():</span>
<a href="#l37.116"></a><span id="l37.116" class="difflineminus">-                    yield u,w</span>
<a href="#l37.117"></a><span id="l37.117" class="difflineminus">-                    del replace[u]</span>
<a href="#l37.118"></a><span id="l37.118" class="difflineminus">-            if t == 'IDAT' and add:</span>
<a href="#l37.119"></a><span id="l37.119" class="difflineminus">-                for item in add:</span>
<a href="#l37.120"></a><span id="l37.120" class="difflineminus">-                    yield item</span>
<a href="#l37.121"></a><span id="l37.121" class="difflineminus">-                del add[:]</span>
<a href="#l37.122"></a><span id="l37.122" class="difflineminus">-            yield t,v</span>
<a href="#l37.123"></a><span id="l37.123" class="difflineminus">-    return png.write_chunks(out, iterchunks())</span>
<a href="#l37.124"></a><span id="l37.124" class="difflineminus">-</span>
<a href="#l37.125"></a><span id="l37.125" class="difflineminus">-class Usage(Exception):</span>
<a href="#l37.126"></a><span id="l37.126" class="difflineminus">-    pass</span>
<a href="#l37.127"></a><span id="l37.127" class="difflineminus">-</span>
<a href="#l37.128"></a><span id="l37.128" class="difflineminus">-def main(argv=None):</span>
<a href="#l37.129"></a><span id="l37.129" class="difflineminus">-    import getopt</span>
<a href="#l37.130"></a><span id="l37.130" class="difflineminus">-    import re</span>
<a href="#l37.131"></a><span id="l37.131" class="difflineminus">-    import sys</span>
<a href="#l37.132"></a><span id="l37.132" class="difflineminus">-</span>
<a href="#l37.133"></a><span id="l37.133" class="difflineminus">-    if argv is None:</span>
<a href="#l37.134"></a><span id="l37.134" class="difflineminus">-        argv = sys.argv</span>
<a href="#l37.135"></a><span id="l37.135" class="difflineminus">-</span>
<a href="#l37.136"></a><span id="l37.136" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l37.137"></a><span id="l37.137" class="difflineminus">-</span>
<a href="#l37.138"></a><span id="l37.138" class="difflineminus">-    try:</span>
<a href="#l37.139"></a><span id="l37.139" class="difflineminus">-        try:</span>
<a href="#l37.140"></a><span id="l37.140" class="difflineminus">-            opt,arg = getopt.getopt(argv, 'c:',</span>
<a href="#l37.141"></a><span id="l37.141" class="difflineminus">-                                    ['gamma=', 'iccprofile=', 'sigbit='])</span>
<a href="#l37.142"></a><span id="l37.142" class="difflineminus">-        except getopt.error, msg:</span>
<a href="#l37.143"></a><span id="l37.143" class="difflineminus">-            raise Usage(msg)</span>
<a href="#l37.144"></a><span id="l37.144" class="difflineminus">-        k = []</span>
<a href="#l37.145"></a><span id="l37.145" class="difflineminus">-        for o,v in opt:</span>
<a href="#l37.146"></a><span id="l37.146" class="difflineminus">-            if o in ['--gamma']:</span>
<a href="#l37.147"></a><span id="l37.147" class="difflineminus">-                k.append(('gamma', float(v)))</span>
<a href="#l37.148"></a><span id="l37.148" class="difflineminus">-            if o in ['--sigbit']:</span>
<a href="#l37.149"></a><span id="l37.149" class="difflineminus">-                k.append(('sigbit', int(v)))</span>
<a href="#l37.150"></a><span id="l37.150" class="difflineminus">-            if o in ['--iccprofile']:</span>
<a href="#l37.151"></a><span id="l37.151" class="difflineminus">-                k.append(('iccprofile', open(v, 'rb').read()))</span>
<a href="#l37.152"></a><span id="l37.152" class="difflineminus">-            if o in ['-c']:</span>
<a href="#l37.153"></a><span id="l37.153" class="difflineminus">-                type = v[:4]</span>
<a href="#l37.154"></a><span id="l37.154" class="difflineminus">-                if not re.match('[a-zA-Z]{4}', type):</span>
<a href="#l37.155"></a><span id="l37.155" class="difflineminus">-                    raise Usage('Chunk type must consist of 4 letters.')</span>
<a href="#l37.156"></a><span id="l37.156" class="difflineminus">-                if v[4] == '!':</span>
<a href="#l37.157"></a><span id="l37.157" class="difflineminus">-                    k.append((type, None))</span>
<a href="#l37.158"></a><span id="l37.158" class="difflineminus">-                if v[4] == ':':</span>
<a href="#l37.159"></a><span id="l37.159" class="difflineminus">-                    k.append((type, v[5:]))</span>
<a href="#l37.160"></a><span id="l37.160" class="difflineminus">-                if v[4] == '&lt;':</span>
<a href="#l37.161"></a><span id="l37.161" class="difflineminus">-                    k.append((type, open(v[5:], 'rb').read()))</span>
<a href="#l37.162"></a><span id="l37.162" class="difflineminus">-    except Usage, err:</span>
<a href="#l37.163"></a><span id="l37.163" class="difflineminus">-        print &gt;&gt;sys.stderr, (</span>
<a href="#l37.164"></a><span id="l37.164" class="difflineminus">-          &quot;usage: pngchunk [--gamma d.dd] [--sigbit b] [-c cHNK! | -c cHNK:text-string]&quot;)</span>
<a href="#l37.165"></a><span id="l37.165" class="difflineminus">-        print &gt;&gt;sys.stderr, err.message</span>
<a href="#l37.166"></a><span id="l37.166" class="difflineminus">-        return 2</span>
<a href="#l37.167"></a><span id="l37.167" class="difflineminus">-</span>
<a href="#l37.168"></a><span id="l37.168" class="difflineminus">-    if len(arg) &gt; 0:</span>
<a href="#l37.169"></a><span id="l37.169" class="difflineminus">-        f = open(arg[0], 'rb')</span>
<a href="#l37.170"></a><span id="l37.170" class="difflineminus">-    else:</span>
<a href="#l37.171"></a><span id="l37.171" class="difflineminus">-        f = sys.stdin</span>
<a href="#l37.172"></a><span id="l37.172" class="difflineminus">-    return chunk(sys.stdout, f, k)</span>
<a href="#l37.173"></a><span id="l37.173" class="difflineminus">-</span>
<a href="#l37.174"></a><span id="l37.174" class="difflineminus">-</span>
<a href="#l37.175"></a><span id="l37.175" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l37.176"></a><span id="l37.176" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1">deleted file mode 100644</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineminus">--- a/build/pypng/pnghist</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineplus">+++ /dev/null</span>
<a href="#l38.4"></a><span id="l38.4" class="difflineat">@@ -1,79 +0,0 @@</span>
<a href="#l38.5"></a><span id="l38.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l38.6"></a><span id="l38.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pnghist $</span>
<a href="#l38.7"></a><span id="l38.7" class="difflineminus">-# $Rev: 153 $</span>
<a href="#l38.8"></a><span id="l38.8" class="difflineminus">-# PNG Histogram</span>
<a href="#l38.9"></a><span id="l38.9" class="difflineminus">-# Only really works on grayscale images.</span>
<a href="#l38.10"></a><span id="l38.10" class="difflineminus">-</span>
<a href="#l38.11"></a><span id="l38.11" class="difflineminus">-from array import array</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-import getopt</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineminus">-import png</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineminus">-</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineminus">-def decidemax(level):</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineminus">-    &quot;&quot;&quot;Given an array of levels, decide the maximum value to use for the</span>
<a href="#l38.18"></a><span id="l38.18" class="difflineminus">-    histogram.  This is normally chosen to be a bit bigger than the 99th</span>
<a href="#l38.19"></a><span id="l38.19" class="difflineminus">-    percentile, but if the 100th percentile is not much more (within a</span>
<a href="#l38.20"></a><span id="l38.20" class="difflineminus">-    factor of 2) then the 100th percentile is chosen.</span>
<a href="#l38.21"></a><span id="l38.21" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineminus">-</span>
<a href="#l38.23"></a><span id="l38.23" class="difflineminus">-    truemax = max(level)</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineminus">-    sl = level[:]</span>
<a href="#l38.25"></a><span id="l38.25" class="difflineminus">-    sl.sort(reverse=True)</span>
<a href="#l38.26"></a><span id="l38.26" class="difflineminus">-    i99 = int(round(len(level)*0.01))</span>
<a href="#l38.27"></a><span id="l38.27" class="difflineminus">-    if truemax &lt;= 2*sl[i99]:</span>
<a href="#l38.28"></a><span id="l38.28" class="difflineminus">-        return truemax</span>
<a href="#l38.29"></a><span id="l38.29" class="difflineminus">-    return 1.05*sl[i99]</span>
<a href="#l38.30"></a><span id="l38.30" class="difflineminus">-</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-def hist(out, inp, verbose=None):</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineminus">-    &quot;&quot;&quot;Open the PNG file `inp` and generate a histogram.&quot;&quot;&quot;</span>
<a href="#l38.33"></a><span id="l38.33" class="difflineminus">-</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l38.35"></a><span id="l38.35" class="difflineminus">-    x,y,pixels,info = r.asDirect()</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineminus">-    bitdepth = info['bitdepth']</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineminus">-    level = [0]*2**bitdepth</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineminus">-    for row in pixels:</span>
<a href="#l38.39"></a><span id="l38.39" class="difflineminus">-        for v in row:</span>
<a href="#l38.40"></a><span id="l38.40" class="difflineminus">-            level[v] += 1</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineminus">-    maxlevel = decidemax(level)</span>
<a href="#l38.42"></a><span id="l38.42" class="difflineminus">-</span>
<a href="#l38.43"></a><span id="l38.43" class="difflineminus">-    h = 100</span>
<a href="#l38.44"></a><span id="l38.44" class="difflineminus">-    outbitdepth = 8</span>
<a href="#l38.45"></a><span id="l38.45" class="difflineminus">-    outmaxval = 2**outbitdepth - 1</span>
<a href="#l38.46"></a><span id="l38.46" class="difflineminus">-    def genrow():</span>
<a href="#l38.47"></a><span id="l38.47" class="difflineminus">-        for y in range(h):</span>
<a href="#l38.48"></a><span id="l38.48" class="difflineminus">-            y = h-y-1</span>
<a href="#l38.49"></a><span id="l38.49" class="difflineminus">-            # :todo: vary typecode according to outbitdepth</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-            row = array('B', [0]*len(level))</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineminus">-            fl = y*maxlevel/float(h)</span>
<a href="#l38.52"></a><span id="l38.52" class="difflineminus">-            ce = (y+1)*maxlevel/float(h)</span>
<a href="#l38.53"></a><span id="l38.53" class="difflineminus">-            for x in range(len(row)):</span>
<a href="#l38.54"></a><span id="l38.54" class="difflineminus">-                if level[x] &lt;= fl:</span>
<a href="#l38.55"></a><span id="l38.55" class="difflineminus">-                    # Relies on row being initialised to all 0</span>
<a href="#l38.56"></a><span id="l38.56" class="difflineminus">-                    continue</span>
<a href="#l38.57"></a><span id="l38.57" class="difflineminus">-                if level[x] &gt;= ce:</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineminus">-                    row[x] = outmaxval</span>
<a href="#l38.59"></a><span id="l38.59" class="difflineminus">-                    continue</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineminus">-                frac = (level[x] - fl)/(ce - fl)</span>
<a href="#l38.61"></a><span id="l38.61" class="difflineminus">-                row[x] = int(round(outmaxval*frac))</span>
<a href="#l38.62"></a><span id="l38.62" class="difflineminus">-            yield row</span>
<a href="#l38.63"></a><span id="l38.63" class="difflineminus">-    w = png.Writer(len(level), h, gamma=1.0,</span>
<a href="#l38.64"></a><span id="l38.64" class="difflineminus">-      greyscale=True, alpha=False, bitdepth=outbitdepth)</span>
<a href="#l38.65"></a><span id="l38.65" class="difflineminus">-    w.write(out, genrow())</span>
<a href="#l38.66"></a><span id="l38.66" class="difflineminus">-    if verbose: print &gt;&gt;verbose, level</span>
<a href="#l38.67"></a><span id="l38.67" class="difflineminus">-</span>
<a href="#l38.68"></a><span id="l38.68" class="difflineminus">-def main(argv=None):</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineminus">-    import sys</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineminus">-</span>
<a href="#l38.71"></a><span id="l38.71" class="difflineminus">-    if argv is None:</span>
<a href="#l38.72"></a><span id="l38.72" class="difflineminus">-        argv = sys.argv</span>
<a href="#l38.73"></a><span id="l38.73" class="difflineminus">-    argv = argv[1:]</span>
<a href="#l38.74"></a><span id="l38.74" class="difflineminus">-    opt,arg = getopt.getopt(argv, '')</span>
<a href="#l38.75"></a><span id="l38.75" class="difflineminus">-</span>
<a href="#l38.76"></a><span id="l38.76" class="difflineminus">-    if len(arg) &lt; 1:</span>
<a href="#l38.77"></a><span id="l38.77" class="difflineminus">-        f = sys.stdin</span>
<a href="#l38.78"></a><span id="l38.78" class="difflineminus">-    else:</span>
<a href="#l38.79"></a><span id="l38.79" class="difflineminus">-        f = open(arg[0])</span>
<a href="#l38.80"></a><span id="l38.80" class="difflineminus">-    hist(sys.stdout, f)</span>
<a href="#l38.81"></a><span id="l38.81" class="difflineminus">-</span>
<a href="#l38.82"></a><span id="l38.82" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l38.83"></a><span id="l38.83" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1">deleted file mode 100644</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineminus">--- a/build/pypng/pnglsch</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineplus">+++ /dev/null</span>
<a href="#l39.4"></a><span id="l39.4" class="difflineat">@@ -1,31 +0,0 @@</span>
<a href="#l39.5"></a><span id="l39.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l39.6"></a><span id="l39.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/pnglsch $</span>
<a href="#l39.7"></a><span id="l39.7" class="difflineminus">-# $Rev: 107 $</span>
<a href="#l39.8"></a><span id="l39.8" class="difflineminus">-# pnglsch</span>
<a href="#l39.9"></a><span id="l39.9" class="difflineminus">-# PNG List Chunks</span>
<a href="#l39.10"></a><span id="l39.10" class="difflineminus">-</span>
<a href="#l39.11"></a><span id="l39.11" class="difflineminus">-import png</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineminus">-def list(out, inp):</span>
<a href="#l39.14"></a><span id="l39.14" class="difflineminus">-    r = png.Reader(file=inp)</span>
<a href="#l39.15"></a><span id="l39.15" class="difflineminus">-    for t,v in r.chunks():</span>
<a href="#l39.16"></a><span id="l39.16" class="difflineminus">-        add = ''</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineminus">-        if len(v) &lt;= 28:</span>
<a href="#l39.18"></a><span id="l39.18" class="difflineminus">-            add = ' ' + v.encode('hex')</span>
<a href="#l39.19"></a><span id="l39.19" class="difflineminus">-        print &gt;&gt;out, &quot;%s %10d%s&quot; % (t, len(v), add)</span>
<a href="#l39.20"></a><span id="l39.20" class="difflineminus">-</span>
<a href="#l39.21"></a><span id="l39.21" class="difflineminus">-def main(argv=None):</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineminus">-    import sys</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineminus">-</span>
<a href="#l39.24"></a><span id="l39.24" class="difflineminus">-    if argv is None:</span>
<a href="#l39.25"></a><span id="l39.25" class="difflineminus">-        argv = sys.argv</span>
<a href="#l39.26"></a><span id="l39.26" class="difflineminus">-    arg = argv[1:]</span>
<a href="#l39.27"></a><span id="l39.27" class="difflineminus">-</span>
<a href="#l39.28"></a><span id="l39.28" class="difflineminus">-    if len(arg) &gt; 0:</span>
<a href="#l39.29"></a><span id="l39.29" class="difflineminus">-        f = open(arg[0], 'rb')</span>
<a href="#l39.30"></a><span id="l39.30" class="difflineminus">-    else:</span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-        f = sys.stdin</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineminus">-    return list(sys.stdout, f)</span>
<a href="#l39.33"></a><span id="l39.33" class="difflineminus">-</span>
<a href="#l39.34"></a><span id="l39.34" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l39.35"></a><span id="l39.35" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1">deleted file mode 100644</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineminus">--- a/build/pypng/texttopng</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineplus">+++ /dev/null</span>
<a href="#l40.4"></a><span id="l40.4" class="difflineat">@@ -1,151 +0,0 @@</span>
<a href="#l40.5"></a><span id="l40.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l40.6"></a><span id="l40.6" class="difflineminus">-# $URL: http://pypng.googlecode.com/svn/trunk/code/texttopng $</span>
<a href="#l40.7"></a><span id="l40.7" class="difflineminus">-# $Rev: 132 $</span>
<a href="#l40.8"></a><span id="l40.8" class="difflineminus">-# Script to renders text as a PNG image.</span>
<a href="#l40.9"></a><span id="l40.9" class="difflineminus">-</span>
<a href="#l40.10"></a><span id="l40.10" class="difflineminus">-from array import array</span>
<a href="#l40.11"></a><span id="l40.11" class="difflineminus">-import itertools</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineminus">-font = {</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineminus">-  32: '0000000000000000',</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineminus">-  33: '0010101010001000',</span>
<a href="#l40.16"></a><span id="l40.16" class="difflineminus">-  34: '0028280000000000',</span>
<a href="#l40.17"></a><span id="l40.17" class="difflineminus">-  35: '0000287c287c2800',</span>
<a href="#l40.18"></a><span id="l40.18" class="difflineminus">-  36: '00103c5038147810',</span>
<a href="#l40.19"></a><span id="l40.19" class="difflineminus">-  37: '0000644810244c00',</span>
<a href="#l40.20"></a><span id="l40.20" class="difflineminus">-  38: '0020502054483400',</span>
<a href="#l40.21"></a><span id="l40.21" class="difflineminus">-  39: '0010100000000000',</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineminus">-  40: '0008101010101008',</span>
<a href="#l40.23"></a><span id="l40.23" class="difflineminus">-  41: '0020101010101020',</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineminus">-  42: '0010543838541000',</span>
<a href="#l40.25"></a><span id="l40.25" class="difflineminus">-  43: '000010107c101000',</span>
<a href="#l40.26"></a><span id="l40.26" class="difflineminus">-  44: '0000000000301020',</span>
<a href="#l40.27"></a><span id="l40.27" class="difflineminus">-  45: '000000007c000000',</span>
<a href="#l40.28"></a><span id="l40.28" class="difflineminus">-  46: '0000000000303000',</span>
<a href="#l40.29"></a><span id="l40.29" class="difflineminus">-  47: '0000040810204000',</span>
<a href="#l40.30"></a><span id="l40.30" class="difflineminus">-  48: '0038445454443800',</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-  49: '0008180808080800',</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineminus">-  50: '0038043840407c00',</span>
<a href="#l40.33"></a><span id="l40.33" class="difflineminus">-  51: '003c041804043800',</span>
<a href="#l40.34"></a><span id="l40.34" class="difflineminus">-  52: '00081828487c0800',</span>
<a href="#l40.35"></a><span id="l40.35" class="difflineminus">-  53: '0078407804047800',</span>
<a href="#l40.36"></a><span id="l40.36" class="difflineminus">-  54: '0038407844443800',</span>
<a href="#l40.37"></a><span id="l40.37" class="difflineminus">-  55: '007c040810101000',</span>
<a href="#l40.38"></a><span id="l40.38" class="difflineminus">-  56: '0038443844443800',</span>
<a href="#l40.39"></a><span id="l40.39" class="difflineminus">-  57: '0038443c04040400',</span>
<a href="#l40.40"></a><span id="l40.40" class="difflineminus">-  58: '0000303000303000',</span>
<a href="#l40.41"></a><span id="l40.41" class="difflineminus">-  59: '0000303000301020',</span>
<a href="#l40.42"></a><span id="l40.42" class="difflineminus">-  60: '0004081020100804',</span>
<a href="#l40.43"></a><span id="l40.43" class="difflineminus">-  61: '0000007c007c0000',</span>
<a href="#l40.44"></a><span id="l40.44" class="difflineminus">-  62: '0040201008102040',</span>
<a href="#l40.45"></a><span id="l40.45" class="difflineminus">-  63: '0038440810001000',</span>
<a href="#l40.46"></a><span id="l40.46" class="difflineminus">-  64: '00384c545c403800',</span>
<a href="#l40.47"></a><span id="l40.47" class="difflineminus">-  65: '0038447c44444400',</span>
<a href="#l40.48"></a><span id="l40.48" class="difflineminus">-  66: '0078447844447800',</span>
<a href="#l40.49"></a><span id="l40.49" class="difflineminus">-  67: '0038444040443800',</span>
<a href="#l40.50"></a><span id="l40.50" class="difflineminus">-  68: '0070484444487000',</span>
<a href="#l40.51"></a><span id="l40.51" class="difflineminus">-  69: '007c407840407c00',</span>
<a href="#l40.52"></a><span id="l40.52" class="difflineminus">-  70: '007c407840404000',</span>
<a href="#l40.53"></a><span id="l40.53" class="difflineminus">-  71: '003844405c443c00',</span>
<a href="#l40.54"></a><span id="l40.54" class="difflineminus">-  72: '0044447c44444400',</span>
<a href="#l40.55"></a><span id="l40.55" class="difflineminus">-  73: '0038101010103800',</span>
<a href="#l40.56"></a><span id="l40.56" class="difflineminus">-  74: '003c040404443800',</span>
<a href="#l40.57"></a><span id="l40.57" class="difflineminus">-  75: '0044487048444400',</span>
<a href="#l40.58"></a><span id="l40.58" class="difflineminus">-  76: '0040404040407c00',</span>
<a href="#l40.59"></a><span id="l40.59" class="difflineminus">-  77: '006c545444444400',</span>
<a href="#l40.60"></a><span id="l40.60" class="difflineminus">-  78: '004464544c444400',</span>
<a href="#l40.61"></a><span id="l40.61" class="difflineminus">-  79: '0038444444443800',</span>
<a href="#l40.62"></a><span id="l40.62" class="difflineminus">-  80: '0078447840404000',</span>
<a href="#l40.63"></a><span id="l40.63" class="difflineminus">-  81: '0038444444443c02',</span>
<a href="#l40.64"></a><span id="l40.64" class="difflineminus">-  82: '0078447844444400',</span>
<a href="#l40.65"></a><span id="l40.65" class="difflineminus">-  83: '0038403804047800',</span>
<a href="#l40.66"></a><span id="l40.66" class="difflineminus">-  84: '007c101010101000',</span>
<a href="#l40.67"></a><span id="l40.67" class="difflineminus">-  85: '0044444444443c00',</span>
<a href="#l40.68"></a><span id="l40.68" class="difflineminus">-  86: '0044444444281000',</span>
<a href="#l40.69"></a><span id="l40.69" class="difflineminus">-  87: '0044445454543800',</span>
<a href="#l40.70"></a><span id="l40.70" class="difflineminus">-  88: '0042241818244200',</span>
<a href="#l40.71"></a><span id="l40.71" class="difflineminus">-  89: '0044443810101000',</span>
<a href="#l40.72"></a><span id="l40.72" class="difflineminus">-  90: '007c081020407c00',</span>
<a href="#l40.73"></a><span id="l40.73" class="difflineminus">-  91: '0038202020202038',</span>
<a href="#l40.74"></a><span id="l40.74" class="difflineminus">-  92: '0000402010080400',</span>
<a href="#l40.75"></a><span id="l40.75" class="difflineminus">-  93: '0038080808080838',</span>
<a href="#l40.76"></a><span id="l40.76" class="difflineminus">-  94: '0010284400000000',</span>
<a href="#l40.77"></a><span id="l40.77" class="difflineminus">-  95: '000000000000fe00',</span>
<a href="#l40.78"></a><span id="l40.78" class="difflineminus">-  96: '0040200000000000',</span>
<a href="#l40.79"></a><span id="l40.79" class="difflineminus">-  97: '000038043c443c00',</span>
<a href="#l40.80"></a><span id="l40.80" class="difflineminus">-  98: '0040784444447800',</span>
<a href="#l40.81"></a><span id="l40.81" class="difflineminus">-  99: '0000384040403800',</span>
<a href="#l40.82"></a><span id="l40.82" class="difflineminus">-  100: '00043c4444443c00',</span>
<a href="#l40.83"></a><span id="l40.83" class="difflineminus">-  101: '000038447c403c00',</span>
<a href="#l40.84"></a><span id="l40.84" class="difflineminus">-  102: '0018203820202000',</span>
<a href="#l40.85"></a><span id="l40.85" class="difflineminus">-  103: '00003c44443c0438',</span>
<a href="#l40.86"></a><span id="l40.86" class="difflineminus">-  104: '0040784444444400',</span>
<a href="#l40.87"></a><span id="l40.87" class="difflineminus">-  105: '0010003010101000',</span>
<a href="#l40.88"></a><span id="l40.88" class="difflineminus">-  106: '0010003010101020',</span>
<a href="#l40.89"></a><span id="l40.89" class="difflineminus">-  107: '0040404870484400',</span>
<a href="#l40.90"></a><span id="l40.90" class="difflineminus">-  108: '0030101010101000',</span>
<a href="#l40.91"></a><span id="l40.91" class="difflineminus">-  109: '0000385454444400',</span>
<a href="#l40.92"></a><span id="l40.92" class="difflineminus">-  110: '0000784444444400',</span>
<a href="#l40.93"></a><span id="l40.93" class="difflineminus">-  111: '0000384444443800',</span>
<a href="#l40.94"></a><span id="l40.94" class="difflineminus">-  112: '0000784444784040',</span>
<a href="#l40.95"></a><span id="l40.95" class="difflineminus">-  113: '00003c44443c0406',</span>
<a href="#l40.96"></a><span id="l40.96" class="difflineminus">-  114: '00001c2020202000',</span>
<a href="#l40.97"></a><span id="l40.97" class="difflineminus">-  115: '00003c4038047800',</span>
<a href="#l40.98"></a><span id="l40.98" class="difflineminus">-  116: '0020203820201800',</span>
<a href="#l40.99"></a><span id="l40.99" class="difflineminus">-  117: '0000444444443c00',</span>
<a href="#l40.100"></a><span id="l40.100" class="difflineminus">-  118: '0000444444281000',</span>
<a href="#l40.101"></a><span id="l40.101" class="difflineminus">-  119: '0000444454543800',</span>
<a href="#l40.102"></a><span id="l40.102" class="difflineminus">-  120: '0000442810284400',</span>
<a href="#l40.103"></a><span id="l40.103" class="difflineminus">-  121: '00004444443c0438',</span>
<a href="#l40.104"></a><span id="l40.104" class="difflineminus">-  122: '00007c0810207c00',</span>
<a href="#l40.105"></a><span id="l40.105" class="difflineminus">-  123: '0018202060202018',</span>
<a href="#l40.106"></a><span id="l40.106" class="difflineminus">-  124: '0010101000101010',</span>
<a href="#l40.107"></a><span id="l40.107" class="difflineminus">-  125: '003008080c080830',</span>
<a href="#l40.108"></a><span id="l40.108" class="difflineminus">-  126: '0020540800000000',</span>
<a href="#l40.109"></a><span id="l40.109" class="difflineminus">-}</span>
<a href="#l40.110"></a><span id="l40.110" class="difflineminus">-</span>
<a href="#l40.111"></a><span id="l40.111" class="difflineminus">-def char(i):</span>
<a href="#l40.112"></a><span id="l40.112" class="difflineminus">-    &quot;&quot;&quot;Get image data for the character `i` (a one character string).</span>
<a href="#l40.113"></a><span id="l40.113" class="difflineminus">-    Returned as a list of rows.  Each row is a tuple containing the</span>
<a href="#l40.114"></a><span id="l40.114" class="difflineminus">-    packed pixels.</span>
<a href="#l40.115"></a><span id="l40.115" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l40.116"></a><span id="l40.116" class="difflineminus">-</span>
<a href="#l40.117"></a><span id="l40.117" class="difflineminus">-    i = ord(i)</span>
<a href="#l40.118"></a><span id="l40.118" class="difflineminus">-    if i not in font:</span>
<a href="#l40.119"></a><span id="l40.119" class="difflineminus">-        return [(0,)]*8</span>
<a href="#l40.120"></a><span id="l40.120" class="difflineminus">-    return map(lambda row: (ord(row),), font[i].decode('hex'))</span>
<a href="#l40.121"></a><span id="l40.121" class="difflineminus">-</span>
<a href="#l40.122"></a><span id="l40.122" class="difflineminus">-def texttoraster(m):</span>
<a href="#l40.123"></a><span id="l40.123" class="difflineminus">-    &quot;&quot;&quot;Convert string *m* to a raster image (by rendering it using the</span>
<a href="#l40.124"></a><span id="l40.124" class="difflineminus">-    font in *font*).  A triple of (*width*, *height*, *pixels*) is</span>
<a href="#l40.125"></a><span id="l40.125" class="difflineminus">-    returned; *pixels* is in boxed row packed pixel format.</span>
<a href="#l40.126"></a><span id="l40.126" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l40.127"></a><span id="l40.127" class="difflineminus">-</span>
<a href="#l40.128"></a><span id="l40.128" class="difflineminus">-    # Assumes monospaced font.</span>
<a href="#l40.129"></a><span id="l40.129" class="difflineminus">-    x = 8*len(m)</span>
<a href="#l40.130"></a><span id="l40.130" class="difflineminus">-    y = 8</span>
<a href="#l40.131"></a><span id="l40.131" class="difflineminus">-    return x,y,itertools.imap(lambda row: itertools.chain(*row),</span>
<a href="#l40.132"></a><span id="l40.132" class="difflineminus">-                              zip(*map(char, m)))</span>
<a href="#l40.133"></a><span id="l40.133" class="difflineminus">-</span>
<a href="#l40.134"></a><span id="l40.134" class="difflineminus">-</span>
<a href="#l40.135"></a><span id="l40.135" class="difflineminus">-def render(message, out):</span>
<a href="#l40.136"></a><span id="l40.136" class="difflineminus">-    import png</span>
<a href="#l40.137"></a><span id="l40.137" class="difflineminus">-</span>
<a href="#l40.138"></a><span id="l40.138" class="difflineminus">-    x,y,pixels = texttoraster(message)</span>
<a href="#l40.139"></a><span id="l40.139" class="difflineminus">-    w = png.Writer(x, y, greyscale=True, bitdepth=1)</span>
<a href="#l40.140"></a><span id="l40.140" class="difflineminus">-    w.write_packed(out, pixels)</span>
<a href="#l40.141"></a><span id="l40.141" class="difflineminus">-    out.flush()</span>
<a href="#l40.142"></a><span id="l40.142" class="difflineminus">-</span>
<a href="#l40.143"></a><span id="l40.143" class="difflineminus">-def main(argv=None):</span>
<a href="#l40.144"></a><span id="l40.144" class="difflineminus">-    import sys</span>
<a href="#l40.145"></a><span id="l40.145" class="difflineminus">-</span>
<a href="#l40.146"></a><span id="l40.146" class="difflineminus">-    if argv is None:</span>
<a href="#l40.147"></a><span id="l40.147" class="difflineminus">-        argv = sys.argv</span>
<a href="#l40.148"></a><span id="l40.148" class="difflineminus">-    if len(argv) &gt; 1:</span>
<a href="#l40.149"></a><span id="l40.149" class="difflineminus">-        message = argv[1]</span>
<a href="#l40.150"></a><span id="l40.150" class="difflineminus">-    else:</span>
<a href="#l40.151"></a><span id="l40.151" class="difflineminus">-        message = sys.stdin.read()</span>
<a href="#l40.152"></a><span id="l40.152" class="difflineminus">-    render(message, sys.stdout)</span>
<a href="#l40.153"></a><span id="l40.153" class="difflineminus">-</span>
<a href="#l40.154"></a><span id="l40.154" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l40.155"></a><span id="l40.155" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1">deleted file mode 100644</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineminus">--- a/build/unix/mozconfig.gtk</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineplus">+++ /dev/null</span>
<a href="#l41.4"></a><span id="l41.4" class="difflineat">@@ -1,24 +0,0 @@</span>
<a href="#l41.5"></a><span id="l41.5" class="difflineminus">-TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l41.6"></a><span id="l41.6" class="difflineminus">-</span>
<a href="#l41.7"></a><span id="l41.7" class="difflineminus">-# $TOOLTOOL_DIR/gtk3 comes from tooltool, and must be included in the tooltool manifest.</span>
<a href="#l41.8"></a><span id="l41.8" class="difflineminus">-if [ -z &quot;$PKG_CONFIG_LIBDIR&quot; ]; then</span>
<a href="#l41.9"></a><span id="l41.9" class="difflineminus">-  echo PKG_CONFIG_LIBDIR must be set &gt;&amp;2</span>
<a href="#l41.10"></a><span id="l41.10" class="difflineminus">-  exit 1</span>
<a href="#l41.11"></a><span id="l41.11" class="difflineminus">-fi</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-export PKG_CONFIG_SYSROOT_DIR=&quot;$TOOLTOOL_DIR/gtk3&quot;</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineminus">-export PKG_CONFIG_PATH=&quot;$TOOLTOOL_DIR/gtk3/usr/local/lib/pkgconfig&quot;</span>
<a href="#l41.14"></a><span id="l41.14" class="difflineminus">-PKG_CONFIG=&quot;$TOOLTOOL_DIR/gtk3/usr/local/bin/pkg-config&quot;</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineminus">-export PATH=&quot;$TOOLTOOL_DIR/gtk3/usr/local/bin:${PATH}&quot;</span>
<a href="#l41.16"></a><span id="l41.16" class="difflineminus">-# Ensure cairo, gdk-pixbuf, etc. are not taken from the system installed packages.</span>
<a href="#l41.17"></a><span id="l41.17" class="difflineminus">-LDFLAGS=&quot;-L$TOOLTOOL_DIR/gtk3/usr/local/lib ${LDFLAGS}&quot;</span>
<a href="#l41.18"></a><span id="l41.18" class="difflineminus">-ac_add_options --enable-default-toolkit=cairo-gtk3</span>
<a href="#l41.19"></a><span id="l41.19" class="difflineminus">-</span>
<a href="#l41.20"></a><span id="l41.20" class="difflineminus">-# Set things up to use Gtk+3 from the tooltool package</span>
<a href="#l41.21"></a><span id="l41.21" class="difflineminus">-mk_add_options &quot;export FONTCONFIG_PATH=$TOOLTOOL_DIR/gtk3/usr/local/etc/fonts&quot;</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineminus">-mk_add_options &quot;export PANGO_SYSCONFDIR=$TOOLTOOL_DIR/gtk3/usr/local/etc&quot;</span>
<a href="#l41.23"></a><span id="l41.23" class="difflineminus">-mk_add_options &quot;export PANGO_LIBDIR=$TOOLTOOL_DIR/gtk3/usr/local/lib&quot;</span>
<a href="#l41.24"></a><span id="l41.24" class="difflineminus">-mk_add_options &quot;export GDK_PIXBUF_MODULE_FILE=$TOOLTOOL_DIR/gtk3/usr/local/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache&quot;</span>
<a href="#l41.25"></a><span id="l41.25" class="difflineminus">-mk_add_options &quot;export GDK_PIXBUF_MODULEDIR=$TOOLTOOL_DIR/gtk3/usr/local/lib/gdk-pixbuf-2.0/2.10.0/loaders&quot;</span>
<a href="#l41.26"></a><span id="l41.26" class="difflineminus">-</span>
<a href="#l41.27"></a><span id="l41.27" class="difflineminus">-LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOOLTOOL_DIR/gtk3/usr/local/lib</span>
<a href="#l41.28"></a><span id="l41.28" class="difflineminus">-mk_add_options &quot;export LD_LIBRARY_PATH=$LD_LIBRARY_PATH&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1">deleted file mode 100644</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineminus">--- a/build/unix/mozconfig.linux</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineplus">+++ /dev/null</span>
<a href="#l42.4"></a><span id="l42.4" class="difflineat">@@ -1,32 +0,0 @@</span>
<a href="#l42.5"></a><span id="l42.5" class="difflineminus">-if [ &quot;x$IS_NIGHTLY&quot; = &quot;xyes&quot; ]; then</span>
<a href="#l42.6"></a><span id="l42.6" class="difflineminus">-  # Some nightlies (eg: Mulet) don't want these set.</span>
<a href="#l42.7"></a><span id="l42.7" class="difflineminus">-  MOZ_AUTOMATION_UPDATE_PACKAGING=${MOZ_AUTOMATION_UPDATE_PACKAGING-1}</span>
<a href="#l42.8"></a><span id="l42.8" class="difflineminus">-fi</span>
<a href="#l42.9"></a><span id="l42.9" class="difflineminus">-</span>
<a href="#l42.10"></a><span id="l42.10" class="difflineminus">-. &quot;$topsrcdir/build/mozconfig.common&quot;</span>
<a href="#l42.11"></a><span id="l42.11" class="difflineminus">-</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineminus">-</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineminus">-# some b2g desktop builds still happen on i686 machines, and the tooltool</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineminus">-# toolchain is x86_64 only.</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineminus">-# We also deal with valgrind builds here, they don't use tooltool manifests at</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineminus">-# all yet.</span>
<a href="#l42.18"></a><span id="l42.18" class="difflineminus">-if [ -z &quot;$no_tooltool&quot; ]</span>
<a href="#l42.19"></a><span id="l42.19" class="difflineminus">-then</span>
<a href="#l42.20"></a><span id="l42.20" class="difflineminus">-  CC=&quot;$TOOLTOOL_DIR/gcc/bin/gcc&quot;</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineminus">-  CXX=&quot;$TOOLTOOL_DIR/gcc/bin/g++&quot;</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineminus">-</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineminus">-  # We want to make sure we use binutils and other binaries in the tooltool</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineminus">-  # package.</span>
<a href="#l42.25"></a><span id="l42.25" class="difflineminus">-  mk_add_options &quot;export PATH=$TOOLTOOL_DIR/gcc/bin:$PATH&quot;</span>
<a href="#l42.26"></a><span id="l42.26" class="difflineminus">-else</span>
<a href="#l42.27"></a><span id="l42.27" class="difflineminus">-  CC=&quot;/tools/gcc-4.7.3-0moz1/bin/gcc&quot;</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineminus">-  CXX=&quot;/tools/gcc-4.7.3-0moz1/bin/g++&quot;</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineminus">-fi</span>
<a href="#l42.30"></a><span id="l42.30" class="difflineminus">-</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-. &quot;$topsrcdir/build/unix/mozconfig.stdcxx&quot;</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineminus">-</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineminus">-if [ -f /etc/redhat-release ]; then</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineminus">-# PKG_CONFIG_LIBDIR is appropriately overridden in mozconfig.linux32</span>
<a href="#l42.35"></a><span id="l42.35" class="difflineminus">-export PKG_CONFIG_LIBDIR=/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/share/pkgconfig</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineminus">-fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1">deleted file mode 100644</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineminus">--- a/build/unix/mozconfig.linux32</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineplus">+++ /dev/null</span>
<a href="#l43.4"></a><span id="l43.4" class="difflineat">@@ -1,17 +0,0 @@</span>
<a href="#l43.5"></a><span id="l43.5" class="difflineminus">-. &quot;$topsrcdir/build/unix/mozconfig.linux&quot;</span>
<a href="#l43.6"></a><span id="l43.6" class="difflineminus">-</span>
<a href="#l43.7"></a><span id="l43.7" class="difflineminus">-if [ -f /etc/redhat-release ]; then</span>
<a href="#l43.8"></a><span id="l43.8" class="difflineminus">-export PKG_CONFIG_LIBDIR=/usr/local/lib/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig</span>
<a href="#l43.9"></a><span id="l43.9" class="difflineminus">-fi</span>
<a href="#l43.10"></a><span id="l43.10" class="difflineminus">-</span>
<a href="#l43.11"></a><span id="l43.11" class="difflineminus">-export MOZ_LINUX_32_SSE2_STARTUP_ERROR=1</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineminus">-CFLAGS=&quot;$CFLAGS -msse -msse2 -mfpmath=sse&quot;</span>
<a href="#l43.14"></a><span id="l43.14" class="difflineminus">-CXXFLAGS=&quot;$CXXFLAGS -msse -msse2 -mfpmath=sse&quot;</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineminus">-</span>
<a href="#l43.16"></a><span id="l43.16" class="difflineminus">-if test `uname -m` = &quot;x86_64&quot;; then</span>
<a href="#l43.17"></a><span id="l43.17" class="difflineminus">-  CC=&quot;$CC -m32 -march=pentium-m&quot;</span>
<a href="#l43.18"></a><span id="l43.18" class="difflineminus">-  CXX=&quot;$CXX -m32 -march=pentium-m&quot;</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineminus">-  ac_add_options --target=i686-pc-linux</span>
<a href="#l43.20"></a><span id="l43.20" class="difflineminus">-  ac_add_options --host=i686-pc-linux</span>
<a href="#l43.21"></a><span id="l43.21" class="difflineminus">-fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1">deleted file mode 100644</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineminus">--- a/build/unix/mozconfig.stdcxx</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineplus">+++ /dev/null</span>
<a href="#l44.4"></a><span id="l44.4" class="difflineat">@@ -1,19 +0,0 @@</span>
<a href="#l44.5"></a><span id="l44.5" class="difflineminus">-# Avoid dependency on libstdc++ 4.7</span>
<a href="#l44.6"></a><span id="l44.6" class="difflineminus">-export MOZ_STDCXX_COMPAT=1</span>
<a href="#l44.7"></a><span id="l44.7" class="difflineminus">-</span>
<a href="#l44.8"></a><span id="l44.8" class="difflineminus">-TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l44.9"></a><span id="l44.9" class="difflineminus">-</span>
<a href="#l44.10"></a><span id="l44.10" class="difflineminus">-# Depending whether GCC was built on a RedHat-based or a Debian-based system,</span>
<a href="#l44.11"></a><span id="l44.11" class="difflineminus">-# the directory containing 32-bits libraries can be either (respectively)</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-# lib or lib32. The directory for 64-bits libraries is always lib64.</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineminus">-if [ -f &quot;$TOOLTOOL_DIR/gcc/lib64/libstdc++.so&quot; ]; then</span>
<a href="#l44.14"></a><span id="l44.14" class="difflineminus">-  # We put both 32-bits and 64-bits library path in LD_LIBRARY_PATH: ld.so</span>
<a href="#l44.15"></a><span id="l44.15" class="difflineminus">-  # will prefer the files in the 32-bits path when loading 32-bits executables,</span>
<a href="#l44.16"></a><span id="l44.16" class="difflineminus">-  # and the files in the 64-bits path when loading 64-bits executables.</span>
<a href="#l44.17"></a><span id="l44.17" class="difflineminus">-  # We also put both possible 32-bits library paths.</span>
<a href="#l44.18"></a><span id="l44.18" class="difflineminus">-  LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOOLTOOL_DIR/gcc/lib64:$TOOLTOOL_DIR/gcc/lib32:$TOOLTOOL_DIR/gcc/lib</span>
<a href="#l44.19"></a><span id="l44.19" class="difflineminus">-elif [ -f &quot;$TOOLTOOL_DIR/clang/lib/libstdc++.so&quot; ]; then</span>
<a href="#l44.20"></a><span id="l44.20" class="difflineminus">-  LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$TOOLTOOL_DIR/clang/lib</span>
<a href="#l44.21"></a><span id="l44.21" class="difflineminus">-fi</span>
<a href="#l44.22"></a><span id="l44.22" class="difflineminus">-</span>
<a href="#l44.23"></a><span id="l44.23" class="difflineminus">-mk_add_options &quot;export LD_LIBRARY_PATH=$LD_LIBRARY_PATH&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1">deleted file mode 100644</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineminus">--- a/build/win32/mozconfig.vs-latest</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineplus">+++ /dev/null</span>
<a href="#l45.4"></a><span id="l45.4" class="difflineat">@@ -1,1 +0,0 @@</span>
<a href="#l45.5"></a><span id="l45.5" class="difflineminus">-. $topsrcdir/build/win32/mozconfig.vs2017</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1">deleted file mode 100644</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineminus">--- a/build/win32/mozconfig.vs2017</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineplus">+++ /dev/null</span>
<a href="#l46.4"></a><span id="l46.4" class="difflineat">@@ -1,30 +0,0 @@</span>
<a href="#l46.5"></a><span id="l46.5" class="difflineminus">-if [ -z &quot;${VSPATH}&quot; ]; then</span>
<a href="#l46.6"></a><span id="l46.6" class="difflineminus">-    TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l46.7"></a><span id="l46.7" class="difflineminus">-    VSPATH=&quot;$(cd ${TOOLTOOL_DIR} &amp;&amp; pwd)/vs2017_15.6.6&quot;</span>
<a href="#l46.8"></a><span id="l46.8" class="difflineminus">-fi</span>
<a href="#l46.9"></a><span id="l46.9" class="difflineminus">-</span>
<a href="#l46.10"></a><span id="l46.10" class="difflineminus">-if [ -d &quot;${VSPATH}&quot; ]; then</span>
<a href="#l46.11"></a><span id="l46.11" class="difflineminus">-    VSWINPATH=&quot;$(cd ${VSPATH} &amp;&amp; pwd -W)&quot;</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineminus">-    export WINDOWSSDKDIR=&quot;${VSWINPATH}/SDK&quot;</span>
<a href="#l46.14"></a><span id="l46.14" class="difflineminus">-    export WIN32_REDIST_DIR=&quot;${VSPATH}/VC/redist/x86/Microsoft.VC141.CRT&quot;</span>
<a href="#l46.15"></a><span id="l46.15" class="difflineminus">-    export WIN_UCRT_REDIST_DIR=&quot;${VSPATH}/SDK/Redist/ucrt/DLLs/x86&quot;</span>
<a href="#l46.16"></a><span id="l46.16" class="difflineminus">-</span>
<a href="#l46.17"></a><span id="l46.17" class="difflineminus">-    export PATH=&quot;${VSPATH}/VC/bin/Hostx86/x86:${VSPATH}/VC/bin/Hostx64/x86:${VSPATH}/VC/bin/Hostx64/x64:${VSPATH}/SDK/bin/10.0.15063.0/x64:${VSPATH}/DIA SDK/bin:${PATH}&quot;</span>
<a href="#l46.18"></a><span id="l46.18" class="difflineminus">-    export PATH=&quot;${VSPATH}/VC/redist/x86/Microsoft.VC141.CRT:${VSPATH}/SDK/Redist/ucrt/DLLs/x86:${PATH}&quot;</span>
<a href="#l46.19"></a><span id="l46.19" class="difflineminus">-</span>
<a href="#l46.20"></a><span id="l46.20" class="difflineminus">-    export INCLUDE=&quot;${VSPATH}/VC/include:${VSPATH}/VC/atlmfc/include:${VSPATH}/SDK/Include/10.0.15063.0/ucrt:${VSPATH}/SDK/Include/10.0.15063.0/shared:${VSPATH}/SDK/Include/10.0.15063.0/um:${VSPATH}/SDK/Include/10.0.15063.0/winrt:${VSPATH}/DIA SDK/include&quot;</span>
<a href="#l46.21"></a><span id="l46.21" class="difflineminus">-    export LIB=&quot;${VSPATH}/VC/lib/x86:${VSPATH}/VC/atlmfc/lib/x86:${VSPATH}/SDK/Lib/10.0.15063.0/ucrt/x86:${VSPATH}/SDK/Lib/10.0.15063.0/um/x86:${VSPATH}/DIA SDK/lib&quot;</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineminus">-</span>
<a href="#l46.23"></a><span id="l46.23" class="difflineminus">-    export WIN64_LINK=&quot;${VSPATH}/VC/bin/Hostx64/x64/link.exe&quot;</span>
<a href="#l46.24"></a><span id="l46.24" class="difflineminus">-    export WIN64_LIB=&quot;${VSPATH}/VC/lib/x64:${VSPATH}/VC/atlmfc/lib/x64:${VSPATH}/SDK/Lib/10.0.15063.0/ucrt/x64:${VSPATH}/SDK/Lib/10.0.15063.0/um/x64:${VSPATH}/DIA SDK/lib/amd64&quot;</span>
<a href="#l46.25"></a><span id="l46.25" class="difflineminus">-fi</span>
<a href="#l46.26"></a><span id="l46.26" class="difflineminus">-</span>
<a href="#l46.27"></a><span id="l46.27" class="difflineminus">-. $topsrcdir/build/mozconfig.vs-common</span>
<a href="#l46.28"></a><span id="l46.28" class="difflineminus">-</span>
<a href="#l46.29"></a><span id="l46.29" class="difflineminus">-mk_export_correct_style WINDOWSSDKDIR</span>
<a href="#l46.30"></a><span id="l46.30" class="difflineminus">-mk_export_correct_style WIN32_REDIST_DIR</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-mk_export_correct_style WIN_UCRT_REDIST_DIR</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineminus">-mk_export_correct_style PATH</span>
<a href="#l46.33"></a><span id="l46.33" class="difflineminus">-mk_export_correct_style INCLUDE</span>
<a href="#l46.34"></a><span id="l46.34" class="difflineminus">-mk_export_correct_style LIB</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1">deleted file mode 100644</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineminus">--- a/build/win64/mozconfig.vs-latest</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineplus">+++ /dev/null</span>
<a href="#l47.4"></a><span id="l47.4" class="difflineat">@@ -1,1 +0,0 @@</span>
<a href="#l47.5"></a><span id="l47.5" class="difflineminus">-. $topsrcdir/build/win64/mozconfig.vs2017</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1">deleted file mode 100644</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineminus">--- a/build/win64/mozconfig.vs2017</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineplus">+++ /dev/null</span>
<a href="#l48.4"></a><span id="l48.4" class="difflineat">@@ -1,26 +0,0 @@</span>
<a href="#l48.5"></a><span id="l48.5" class="difflineminus">-if [ -z &quot;${VSPATH}&quot; ]; then</span>
<a href="#l48.6"></a><span id="l48.6" class="difflineminus">-    TOOLTOOL_DIR=${TOOLTOOL_DIR:-$topsrcdir}</span>
<a href="#l48.7"></a><span id="l48.7" class="difflineminus">-    VSPATH=&quot;$(cd ${TOOLTOOL_DIR} &amp;&amp; pwd)/vs2017_15.6.6&quot;</span>
<a href="#l48.8"></a><span id="l48.8" class="difflineminus">-fi</span>
<a href="#l48.9"></a><span id="l48.9" class="difflineminus">-</span>
<a href="#l48.10"></a><span id="l48.10" class="difflineminus">-if [ -d &quot;${VSPATH}&quot; ]; then</span>
<a href="#l48.11"></a><span id="l48.11" class="difflineminus">-    VSWINPATH=&quot;$(cd ${VSPATH} &amp;&amp; pwd -W)&quot;</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineminus">-    export WINDOWSSDKDIR=&quot;${VSWINPATH}/SDK&quot;</span>
<a href="#l48.14"></a><span id="l48.14" class="difflineminus">-    export WIN32_REDIST_DIR=${VSPATH}/VC/redist/x64/Microsoft.VC141.CRT</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineminus">-    export WIN_UCRT_REDIST_DIR=&quot;${VSPATH}/SDK/Redist/ucrt/DLLs/x64&quot;</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineminus">-</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineminus">-    export PATH=&quot;${VSPATH}/VC/bin/Hostx64/x64:${VSPATH}/SDK/bin/10.0.15063.0/x64:${VSPATH}/VC/redist/x64/Microsoft.VC141.CRT:${VSPATH}/SDK/Redist/ucrt/DLLs/x64:${VSPATH}/DIA SDK/bin/amd64:${PATH}&quot;</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineminus">-</span>
<a href="#l48.19"></a><span id="l48.19" class="difflineminus">-    export INCLUDE=&quot;${VSPATH}/VC/include:${VSPATH}/VC/atlmfc/include:${VSPATH}/SDK/Include/10.0.15063.0/ucrt:${VSPATH}/SDK/Include/10.0.15063.0/shared:${VSPATH}/SDK/Include/10.0.15063.0/um:${VSPATH}/SDK/Include/10.0.15063.0/winrt:${VSPATH}/DIA SDK/include&quot;</span>
<a href="#l48.20"></a><span id="l48.20" class="difflineminus">-    export LIB=&quot;${VSPATH}/VC/lib/x64:${VSPATH}/VC/atlmfc/lib/x64:${VSPATH}/SDK/Lib/10.0.15063.0/ucrt/x64:${VSPATH}/SDK/Lib/10.0.15063.0/um/x64:${VSPATH}/DIA SDK/lib/amd64&quot;</span>
<a href="#l48.21"></a><span id="l48.21" class="difflineminus">-fi</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineminus">-</span>
<a href="#l48.23"></a><span id="l48.23" class="difflineminus">-. $topsrcdir/build/mozconfig.vs-common</span>
<a href="#l48.24"></a><span id="l48.24" class="difflineminus">-</span>
<a href="#l48.25"></a><span id="l48.25" class="difflineminus">-mk_export_correct_style WINDOWSSDKDIR</span>
<a href="#l48.26"></a><span id="l48.26" class="difflineminus">-mk_export_correct_style WIN32_REDIST_DIR</span>
<a href="#l48.27"></a><span id="l48.27" class="difflineminus">-mk_export_correct_style WIN_UCRT_REDIST_DIR</span>
<a href="#l48.28"></a><span id="l48.28" class="difflineminus">-mk_export_correct_style PATH</span>
<a href="#l48.29"></a><span id="l48.29" class="difflineminus">-mk_export_correct_style INCLUDE</span>
<a href="#l48.30"></a><span id="l48.30" class="difflineminus">-mk_export_correct_style LIB</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

