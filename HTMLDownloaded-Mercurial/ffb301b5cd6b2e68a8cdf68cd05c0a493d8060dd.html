<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 2898:ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd" />
<meta property="og:url" content="/comm-central/rev/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd" />
<meta property="og:description" content="Fix bug 456385 - Thunderbird3: Integrate Calendar and Task mode menu items into new menu. r=mschroeder" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">shortlog</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">files</a> |
changeset |
<a href="/comm-central/raw-rev/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">raw</a>  | <a href="/comm-central/archive/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
Fix <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=456385">bug 456385</a> - Thunderbird3: Integrate Calendar and Task mode menu items into new menu. r=mschroeder
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#104;&#105;&#108;&#105;&#112;&#112;&#32;&#75;&#101;&#119;&#105;&#115;&#99;&#104;&#32;&#60;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 20 Jun 2009 18:26:22 +0200</td></tr>

<tr>
 <td>changeset 2898</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd</a></td>
</tr>



<tr>
<td>parent 2897</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7a767870e14eb6db047fdb0e5dbcce81fdbab2db">7a767870e14eb6db047fdb0e5dbcce81fdbab2db</a>
</td>
</tr>

<tr>
<td>child 2899</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d285993e5dab24dc136a32d8429a226f510672a0">d285993e5dab24dc136a32d8429a226f510672a0</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">2348</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Sat, 20 Jun 2009 16:26:43 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@ffb301b5cd6b [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&newProject=comm-central&newRevision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&newProject=comm-central&newRevision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&newProject=comm-central&newRevision=ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mschroeder%29&revcount=50">mschroeder</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=456385">456385</a></td></tr>




</table></div>

<div class="page_body description">Fix <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=456385">bug 456385</a> - Thunderbird3: Integrate Calendar and Task mode menu items into new menu. r=mschroeder</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.js">calendar/base/content/calendar-common-sets.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.js">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.js">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.xul">calendar/base/content/calendar-common-sets.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.xul">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.xul">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.xul">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.xul">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-common-sets.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-menus.xml">calendar/base/content/calendar-menus.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-menus.xml">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-menus.xml">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-menus.xml">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-menus.xml">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-menus.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-tree.js">calendar/base/content/calendar-task-tree.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-tree.js">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-tree.js">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-tree.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-tree.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-tree.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-view.xul">calendar/base/content/calendar-task-view.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-view.xul">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-view.xul">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-view.xul">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-view.xul">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-task-view.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.js">calendar/base/content/calendar-views.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.js">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.js">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.xml">calendar/base/content/calendar-views.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.xml">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.xml">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.xml">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.xml">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/calendar-views.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.js">calendar/base/content/today-pane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.js">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.js">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.xul">calendar/base/content/today-pane.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.xul">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.xul">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.xul">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.xul">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/today-pane.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/widgets/calendar-widgets.xml">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/widgets/calendar-widgets.xml">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/public/calICalendarView.idl">calendar/base/public/calICalendarView.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/public/calICalendarView.idl">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/public/calICalendarView.idl">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/public/calICalendarView.idl">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/public/calICalendarView.idl">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/base/public/calICalendarView.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/lightning-scripts.inc">calendar/lightning/content/lightning-scripts.inc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/lightning-scripts.inc">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/lightning-scripts.inc">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/lightning-scripts.inc">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/lightning-scripts.inc">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/lightning-scripts.inc">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.xul">calendar/lightning/content/messenger-overlay-sidebar.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.xul">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.xul">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.xul">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.xul">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-sidebar.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-toolbar.js">calendar/lightning/content/messenger-overlay-toolbar.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-toolbar.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-toolbar.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/content/messenger-overlay-toolbar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/jar.mn">calendar/lightning/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/jar.mn">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/jar.mn">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/jar.mn">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/jar.mn">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/lightning/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd">calendar/locales/en-US/chrome/calendar/menuOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/lightning/lightning.dtd">calendar/locales/en-US/chrome/lightning/lightning.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/lightning/lightning.dtd">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/lightning/lightning.dtd">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/lightning/lightning.dtd">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/lightning/lightning.dtd">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/lightning/lightning.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd">calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/resources/content/calendar.js">calendar/resources/content/calendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/resources/content/calendar.js">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/resources/content/calendar.js">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/resources/content/calendar.js">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/resources/content/calendar.js">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/resources/content/calendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-menubar.inc">calendar/sunbird/base/content/calendar-menubar.inc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-menubar.inc">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-menubar.inc">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-menubar.inc">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-menubar.inc">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-menubar.inc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-sets.inc">calendar/sunbird/base/content/calendar-sets.inc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-sets.inc">file</a> |
<a href="/comm-central/annotate/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-sets.inc">annotate</a> |
<a href="/comm-central/diff/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-sets.inc">diff</a> |
<a href="/comm-central/comparison/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-sets.inc">comparison</a> |
<a href="/comm-central/log/ffb301b5cd6b2e68a8cdf68cd05c0a493d8060dd/calendar/sunbird/base/content/calendar-sets.inc">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -349,16 +349,18 @@</span>
<a href="#l1.4"></a><span id="l1.4">                 onget=&quot;return document.getElementById('calendarviewBroadcaster')&quot;/&gt;</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">       &lt;property name=&quot;labeldaybox&quot; readonly=&quot;true&quot;</span>
<a href="#l1.7"></a><span id="l1.7">                 onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'labeldaybox')&quot;/&gt;</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">       &lt;property name=&quot;rotated&quot;</span>
<a href="#l1.10"></a><span id="l1.10">                 onget=&quot;return (this.orient == 'horizontal')&quot;</span>
<a href="#l1.11"></a><span id="l1.11">                 onset=&quot;return (this.orient = (val ? 'horizontal' : 'vertical'))&quot;/&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+      &lt;property name=&quot;supportsRotation&quot; readonly=&quot;true&quot;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+                onget=&quot;return false&quot;/&gt;</span>
<a href="#l1.14"></a><span id="l1.14">       &lt;property name=&quot;displayDaysOff&quot;</span>
<a href="#l1.15"></a><span id="l1.15">                 onget=&quot;return this.mDisplayDaysOff;&quot;</span>
<a href="#l1.16"></a><span id="l1.16">                 onset=&quot;return (this.mDisplayDaysOff = val);&quot;/&gt;</span>
<a href="#l1.17"></a><span id="l1.17">       &lt;property name=&quot;controller&quot;</span>
<a href="#l1.18"></a><span id="l1.18">                 onget=&quot;return this.mController;&quot;</span>
<a href="#l1.19"></a><span id="l1.19">                 onset=&quot;return (this.mController = val);&quot;/&gt;</span>
<a href="#l1.20"></a><span id="l1.20">       &lt;property name=&quot;daysOffArray&quot;</span>
<a href="#l1.21"></a><span id="l1.21">                 onget=&quot;return this.mDaysOffArray;&quot;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -370,16 +372,18 @@</span>
<a href="#l1.23"></a><span id="l1.23">                 onget=&quot;return this.mShowCompleted;&quot;</span>
<a href="#l1.24"></a><span id="l1.24">                 onset=&quot;return (this.mShowCompleted = val);&quot;/&gt;</span>
<a href="#l1.25"></a><span id="l1.25">       &lt;property name=&quot;timezone&quot;</span>
<a href="#l1.26"></a><span id="l1.26">                 onget=&quot;return this.mTimezone;&quot;</span>
<a href="#l1.27"></a><span id="l1.27">                 onset=&quot;return (this.mTimezone = val);&quot;/&gt;</span>
<a href="#l1.28"></a><span id="l1.28">       &lt;property name=&quot;workdaysOnly&quot;</span>
<a href="#l1.29"></a><span id="l1.29">                 onget=&quot;return this.mWorkdaysOnly;&quot;</span>
<a href="#l1.30"></a><span id="l1.30">                 onset=&quot;return (this.mWorkdaysOnly = val);&quot;/&gt;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+      &lt;property name=&quot;supportsWorkdaysOnly&quot; readonly=&quot;true&quot;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+                onget=&quot;return true;&quot;/&gt;</span>
<a href="#l1.33"></a><span id="l1.33">       &lt;property name=&quot;selectionObserver&quot; readonly=&quot;true&quot;</span>
<a href="#l1.34"></a><span id="l1.34">                 onget=&quot;return this.mSelectionObserver;&quot;/&gt;</span>
<a href="#l1.35"></a><span id="l1.35">       &lt;property name=&quot;startDay&quot; readonly=&quot;true&quot;</span>
<a href="#l1.36"></a><span id="l1.36">                 onget=&quot;return this.startDate;&quot;/&gt;</span>
<a href="#l1.37"></a><span id="l1.37">       &lt;property name=&quot;endDay&quot; readonly=&quot;true&quot;</span>
<a href="#l1.38"></a><span id="l1.38">                 onget=&quot;return this.endDate;&quot;/&gt;</span>
<a href="#l1.39"></a><span id="l1.39">       &lt;property name=&quot;supportDisjointDates&quot; readonly=&quot;true&quot;</span>
<a href="#l1.40"></a><span id="l1.40">                 onget=&quot;return false;&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/calendar-common-sets.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/calendar-common-sets.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -61,44 +61,65 @@ var calendarController = {</span>
<a href="#l2.4"></a><span id="l2.4">         &quot;calendar_import_command&quot;: true,</span>
<a href="#l2.5"></a><span id="l2.5">         &quot;calendar_export_command&quot;: true,</span>
<a href="#l2.6"></a><span id="l2.6">         &quot;calendar_export_selection_command&quot;: true,</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">         &quot;calendar_publish_selected_calendar_command&quot;: true,</span>
<a href="#l2.9"></a><span id="l2.9">         &quot;calendar_publish_calendar_command&quot;: true,</span>
<a href="#l2.10"></a><span id="l2.10">         &quot;calendar_publish_selected_events_command&quot;: true,</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+        &quot;calendar_view_next_command&quot;: true,</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+        &quot;calendar_view_prev_command&quot;: true,</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+        &quot;calendar_toggle_orientation_command&quot;: true,</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+        &quot;calendar_toggle_workdays_only_command&quot;: true,</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+</span>
<a href="#l2.18"></a><span id="l2.18">         &quot;calendar_task_filter_command&quot;: true,</span>
<a href="#l2.19"></a><span id="l2.19">         &quot;calendar_reload_remote_calendars&quot;: true,</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+        &quot;calendar_show_unifinder_command&quot;: true,</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+        &quot;calendar_toggle_completed_command&quot;: true,</span>
<a href="#l2.22"></a><span id="l2.22">         &quot;calendar_percentComplete-0_command&quot;: true,</span>
<a href="#l2.23"></a><span id="l2.23">         &quot;calendar_percentComplete-25_command&quot;: true,</span>
<a href="#l2.24"></a><span id="l2.24">         &quot;calendar_percentComplete-50_command&quot;: true,</span>
<a href="#l2.25"></a><span id="l2.25">         &quot;calendar_percentComplete-75_command&quot;: true,</span>
<a href="#l2.26"></a><span id="l2.26">         &quot;calendar_percentComplete-100_command&quot;: true,</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-        &quot;calendar_percentComplete-100_command2&quot;: true,</span>
<a href="#l2.28"></a><span id="l2.28">         &quot;calendar_priority-0_command&quot;: true,</span>
<a href="#l2.29"></a><span id="l2.29">         &quot;calendar_priority-9_command&quot;: true,</span>
<a href="#l2.30"></a><span id="l2.30">         &quot;calendar_priority-5_command&quot;: true,</span>
<a href="#l2.31"></a><span id="l2.31">         &quot;calendar_priority-1_command&quot;: true,</span>
<a href="#l2.32"></a><span id="l2.32">         &quot;calendar_general-priority_command&quot;: true,</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+        &quot;calendar_general-progress_command&quot;: true,</span>
<a href="#l2.34"></a><span id="l2.34">         &quot;calendar_task_category_command&quot;: true,</span>
<a href="#l2.35"></a><span id="l2.35">         &quot;cmd_cut&quot;: true,</span>
<a href="#l2.36"></a><span id="l2.36">         &quot;cmd_copy&quot;: true,</span>
<a href="#l2.37"></a><span id="l2.37">         &quot;cmd_paste&quot;: true,</span>
<a href="#l2.38"></a><span id="l2.38">         &quot;cmd_undo&quot;: true,</span>
<a href="#l2.39"></a><span id="l2.39">         &quot;cmd_redo&quot;: true,</span>
<a href="#l2.40"></a><span id="l2.40">         &quot;cmd_print&quot;: true,</span>
<a href="#l2.41"></a><span id="l2.41">         &quot;cmd_selectAll&quot;: true,</span>
<a href="#l2.42"></a><span id="l2.42">         &quot;cmd_pageSetup&quot;: true,</span>
<a href="#l2.43"></a><span id="l2.43"> </span>
<a href="#l2.44"></a><span id="l2.44">         // Thunderbird commands</span>
<a href="#l2.45"></a><span id="l2.45">         &quot;cmd_printpreview&quot;: true,</span>
<a href="#l2.46"></a><span id="l2.46">         &quot;button_print&quot;: true,</span>
<a href="#l2.47"></a><span id="l2.47">         &quot;button_delete&quot;: true,</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-        &quot;cmd_delete&quot;: true</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+        &quot;cmd_delete&quot;: true,</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+        &quot;cmd_properties&quot;: true,</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+        &quot;cmd_runJunkControls&quot;: true,</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+        &quot;cmd_deleteJunk&quot;: true,</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+        &quot;cmd_applyFilters&quot;: true,</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+        &quot;cmd_applyFiltersToSelection&quot;: true,</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+        &quot;cmd_goForward&quot;: true,</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+        &quot;cmd_goBack&quot;: true,</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+        // Pseudo commands</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+        &quot;calendar_in_foreground&quot;: true,</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+        &quot;calendar_in_background&quot;: true,</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineplus">+        &quot;calendar_mode_calendar&quot;: true,</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+        &quot;calendar_mode_task&quot;: true</span>
<a href="#l2.63"></a><span id="l2.63">     },</span>
<a href="#l2.64"></a><span id="l2.64"> </span>
<a href="#l2.65"></a><span id="l2.65">     updateCommands: function cC_updateCommands() {</span>
<a href="#l2.66"></a><span id="l2.66">         for (var command in this.commands) {</span>
<a href="#l2.67"></a><span id="l2.67">             goUpdateCommand(command);</span>
<a href="#l2.68"></a><span id="l2.68">         }</span>
<a href="#l2.69"></a><span id="l2.69">     },</span>
<a href="#l2.70"></a><span id="l2.70"> </span>
<a href="#l2.71"></a><span id="l2.71" class="difflineat">@@ -126,47 +147,81 @@ var calendarController = {</span>
<a href="#l2.72"></a><span id="l2.72">                 return this.selected_items_writable;</span>
<a href="#l2.73"></a><span id="l2.73">             case &quot;calendar_new_todo_command&quot;:</span>
<a href="#l2.74"></a><span id="l2.74">                 return this.writable &amp;&amp; this.calendars_support_tasks;</span>
<a href="#l2.75"></a><span id="l2.75">             case &quot;calendar_modify_todo_command&quot;:</span>
<a href="#l2.76"></a><span id="l2.76">                  return this.todo_items_selected;</span>
<a href="#l2.77"></a><span id="l2.77">                  // This code is temporarily commented out due to</span>
<a href="#l2.78"></a><span id="l2.78">                  // bug 469684 Unifinder-todo: raising of the context menu fires blur-event</span>
<a href="#l2.79"></a><span id="l2.79">                  // this.todo_tasktree_focused;</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+            case &quot;calendar_edit_calendar_command&quot;:</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+                return this.isCalendarInForeground();</span>
<a href="#l2.82"></a><span id="l2.82">             case &quot;calendar_task_filter_command&quot;:</span>
<a href="#l2.83"></a><span id="l2.83">                 return true;</span>
<a href="#l2.84"></a><span id="l2.84">             case &quot;calendar_delete_todo_command&quot;:</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineplus">+            case &quot;calendar_toggle_completed_command&quot;:</span>
<a href="#l2.86"></a><span id="l2.86">             case &quot;calendar_percentComplete-0_command&quot;:</span>
<a href="#l2.87"></a><span id="l2.87">             case &quot;calendar_percentComplete-25_command&quot;:</span>
<a href="#l2.88"></a><span id="l2.88">             case &quot;calendar_percentComplete-50_command&quot;:</span>
<a href="#l2.89"></a><span id="l2.89">             case &quot;calendar_percentComplete-75_command&quot;:</span>
<a href="#l2.90"></a><span id="l2.90">             case &quot;calendar_percentComplete-100_command&quot;:</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-            case &quot;calendar_percentComplete-100_command2&quot;:</span>
<a href="#l2.92"></a><span id="l2.92">             case &quot;calendar_priority-0_command&quot;:</span>
<a href="#l2.93"></a><span id="l2.93">             case &quot;calendar_priority-9_command&quot;:</span>
<a href="#l2.94"></a><span id="l2.94">             case &quot;calendar_priority-5_command&quot;:</span>
<a href="#l2.95"></a><span id="l2.95">             case &quot;calendar_priority-1_command&quot;:</span>
<a href="#l2.96"></a><span id="l2.96">             case &quot;calendar_task_category_command&quot;:</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+            case &quot;calendar_general-progress_command&quot;:</span>
<a href="#l2.98"></a><span id="l2.98">             case &quot;calendar_general-priority_command&quot;:</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineminus">-                return this.writable &amp;&amp;</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineplus">+                return this.isCalendarInForeground() &amp;&amp;</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineplus">+                       this.writable &amp;&amp;</span>
<a href="#l2.102"></a><span id="l2.102">                        this.todo_items_selected &amp;&amp;</span>
<a href="#l2.103"></a><span id="l2.103">                        this.todo_items_writable;</span>
<a href="#l2.104"></a><span id="l2.104">             case &quot;calendar_delete_calendar_command&quot;:</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineminus">-                return !this.last_calendar;</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineminus">-</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+                return this.isCalendarInForeground() &amp;&amp; !this.last_calendar;</span>
<a href="#l2.108"></a><span id="l2.108">             case &quot;calendar_import_command&quot;:</span>
<a href="#l2.109"></a><span id="l2.109">                 return this.writable;</span>
<a href="#l2.110"></a><span id="l2.110">             case &quot;calendar_export_selection_command&quot;:</span>
<a href="#l2.111"></a><span id="l2.111">                 return this.item_selected;</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineminus">-</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+            case &quot;calendar_toggle_orientation_command&quot;:</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+                return this.isCalendarInForeground() &amp;&amp;</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+                       gCurrentMode &amp;&amp;</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+                       gCurrentMode == &quot;calendar&quot; &amp;&amp;</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineplus">+                       currentView().supportsRotation;</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineplus">+            case &quot;calendar_toggle_workdays_only_command&quot;:</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineplus">+                return this.isCalendarInForeground() &amp;&amp;</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineplus">+                       gCurrentMode &amp;&amp;</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineplus">+                       gCurrentMode == &quot;calendar&quot; &amp;&amp;</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineplus">+                       currentView().supportsWorkdaysOnly;</span>
<a href="#l2.123"></a><span id="l2.123">             case &quot;calendar_publish_selected_events_command&quot;:</span>
<a href="#l2.124"></a><span id="l2.124">                 return this.item_selected;</span>
<a href="#l2.125"></a><span id="l2.125"> </span>
<a href="#l2.126"></a><span id="l2.126">             case &quot;calendar_reload_remote_calendar&quot;:</span>
<a href="#l2.127"></a><span id="l2.127">                 return !this.no_network_calendars &amp;&amp; !this.offline;</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineplus">+</span>
<a href="#l2.129"></a><span id="l2.129" class="difflineplus">+            // The following commands all just need the calendar in foreground,</span>
<a href="#l2.130"></a><span id="l2.130" class="difflineplus">+            // make sure you take care when changing things here.</span>
<a href="#l2.131"></a><span id="l2.131" class="difflineplus">+            case &quot;calendar_view_next_command&quot;:</span>
<a href="#l2.132"></a><span id="l2.132" class="difflineplus">+            case &quot;calendar_view_prev_command&quot;:</span>
<a href="#l2.133"></a><span id="l2.133" class="difflineplus">+            case &quot;calendar_in_foreground&quot;:</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineplus">+                return this.isCalendarInForeground();</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineplus">+            case &quot;calendar_in_background&quot;:</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineplus">+                return !this.isCalendarInForeground();</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineplus">+</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineplus">+            // The following commands need calendar mode, be careful when</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineplus">+            // changing things.</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineplus">+            case &quot;calendar_show_unifinder_command&quot;:</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineplus">+            case &quot;calendar_mode_calendar&quot;:</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineplus">+                return this.isCalendarInForeground() &amp;&amp;</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineplus">+                       gCurrentMode &amp;&amp;</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineplus">+                       gCurrentMode == &quot;calendar&quot;;</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineplus">+</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineplus">+            case &quot;calendar_mode_task&quot;:</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineplus">+                return this.isCalendarInForeground() &amp;&amp;</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineplus">+                       gCurrentMode &amp;&amp;</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineplus">+                       gCurrentMode == &quot;task&quot;;</span>
<a href="#l2.150"></a><span id="l2.150">             default:</span>
<a href="#l2.151"></a><span id="l2.151">                 if (this.defaultController &amp;&amp; !this.isCalendarInForeground()) {</span>
<a href="#l2.152"></a><span id="l2.152">                     // The delete-button demands a special handling in mail-mode</span>
<a href="#l2.153"></a><span id="l2.153">                     // as it is supposed to delete an element of the focused pane</span>
<a href="#l2.154"></a><span id="l2.154">                     if (aCommand == &quot;cmd_delete&quot; || aCommand == &quot;button_delete&quot;) {</span>
<a href="#l2.155"></a><span id="l2.155">                         var focusedElement = document.commandDispatcher.focusedElement;</span>
<a href="#l2.156"></a><span id="l2.156">                         if (focusedElement) {</span>
<a href="#l2.157"></a><span id="l2.157">                             if (focusedElement.getAttribute(&quot;id&quot;) == &quot;agenda-listbox&quot;) {</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineat">@@ -200,16 +255,22 @@ var calendarController = {</span>
<a href="#l2.159"></a><span id="l2.159">                     case &quot;cmd_redo&quot;:</span>
<a href="#l2.160"></a><span id="l2.160">                         goSetMenuValue(aCommand, 'valueDefault');</span>
<a href="#l2.161"></a><span id="l2.161">                         return canRedo();</span>
<a href="#l2.162"></a><span id="l2.162">                     case &quot;cmd_printpreview&quot;:</span>
<a href="#l2.163"></a><span id="l2.163">                         return false;</span>
<a href="#l2.164"></a><span id="l2.164">                     case &quot;button_delete&quot;:</span>
<a href="#l2.165"></a><span id="l2.165">                     case &quot;cmd_delete&quot;:</span>
<a href="#l2.166"></a><span id="l2.166">                         return this.item_selected;</span>
<a href="#l2.167"></a><span id="l2.167" class="difflineplus">+                    case &quot;cmd_properties&quot;:</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineplus">+                    case &quot;cmd_runJunkControls&quot;:</span>
<a href="#l2.169"></a><span id="l2.169" class="difflineplus">+                    case &quot;cmd_deleteJunk&quot;:</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineplus">+                    case &quot;cmd_applyFilters&quot;:</span>
<a href="#l2.171"></a><span id="l2.171" class="difflineplus">+                    case &quot;cmd_applyFiltersToSelection&quot;:</span>
<a href="#l2.172"></a><span id="l2.172" class="difflineplus">+                        return false;</span>
<a href="#l2.173"></a><span id="l2.173">                 }</span>
<a href="#l2.174"></a><span id="l2.174">                 if (aCommand in this.commands) {</span>
<a href="#l2.175"></a><span id="l2.175">                     // All other commands we support should be enabled by default</span>
<a href="#l2.176"></a><span id="l2.176">                     return true;</span>
<a href="#l2.177"></a><span id="l2.177">                 }</span>
<a href="#l2.178"></a><span id="l2.178">         }</span>
<a href="#l2.179"></a><span id="l2.179">         return false;</span>
<a href="#l2.180"></a><span id="l2.180">     },</span>
<a href="#l2.181"></a><span id="l2.181" class="difflineat">@@ -300,16 +361,31 @@ var calendarController = {</span>
<a href="#l2.182"></a><span id="l2.182">                 break;</span>
<a href="#l2.183"></a><span id="l2.183">             case &quot;calendar_publish_selected_events_command&quot;:</span>
<a href="#l2.184"></a><span id="l2.184">                 publishCalendarData();</span>
<a href="#l2.185"></a><span id="l2.185">                 break;</span>
<a href="#l2.186"></a><span id="l2.186"> </span>
<a href="#l2.187"></a><span id="l2.187">             case &quot;calendar_reload_remote_calendars&quot;:</span>
<a href="#l2.188"></a><span id="l2.188">                 getCompositeCalendar().refresh();</span>
<a href="#l2.189"></a><span id="l2.189">                 break;</span>
<a href="#l2.190"></a><span id="l2.190" class="difflineplus">+            case &quot;calendar_show_unifinder_command&quot;:</span>
<a href="#l2.191"></a><span id="l2.191" class="difflineplus">+                toggleUnifinder();</span>
<a href="#l2.192"></a><span id="l2.192" class="difflineplus">+                break;</span>
<a href="#l2.193"></a><span id="l2.193" class="difflineplus">+            case &quot;calendar_view_next_command&quot;:</span>
<a href="#l2.194"></a><span id="l2.194" class="difflineplus">+                currentView().moveView(1);</span>
<a href="#l2.195"></a><span id="l2.195" class="difflineplus">+                break;</span>
<a href="#l2.196"></a><span id="l2.196" class="difflineplus">+            case &quot;calendar_view_prev_command&quot;:</span>
<a href="#l2.197"></a><span id="l2.197" class="difflineplus">+                currentView().moveView(-1);</span>
<a href="#l2.198"></a><span id="l2.198" class="difflineplus">+                break;</span>
<a href="#l2.199"></a><span id="l2.199" class="difflineplus">+            case &quot;calendar_toggle_orientation_command&quot;:</span>
<a href="#l2.200"></a><span id="l2.200" class="difflineplus">+                toggleOrientation();</span>
<a href="#l2.201"></a><span id="l2.201" class="difflineplus">+                break;</span>
<a href="#l2.202"></a><span id="l2.202" class="difflineplus">+            case &quot;calendar_toggle_workdays_only_command&quot;:</span>
<a href="#l2.203"></a><span id="l2.203" class="difflineplus">+                toggleWorkdaysOnly();</span>
<a href="#l2.204"></a><span id="l2.204" class="difflineplus">+                break;</span>
<a href="#l2.205"></a><span id="l2.205">             default:</span>
<a href="#l2.206"></a><span id="l2.206">                 if (this.defaultController &amp;&amp; !this.isCalendarInForeground()) {</span>
<a href="#l2.207"></a><span id="l2.207">                     // If calendar is not in foreground, let the default controller take</span>
<a href="#l2.208"></a><span id="l2.208">                     // care. If we don't have a default controller (i.e sunbird), just</span>
<a href="#l2.209"></a><span id="l2.209">                     // continue.</span>
<a href="#l2.210"></a><span id="l2.210">                     this.defaultController.doCommand(aCommand);</span>
<a href="#l2.211"></a><span id="l2.211">                     return;</span>
<a href="#l2.212"></a><span id="l2.212">                 }</span>
<a href="#l2.213"></a><span id="l2.213" class="difflineat">@@ -337,16 +413,23 @@ var calendarController = {</span>
<a href="#l2.214"></a><span id="l2.214">                         PrintUtils.showPageSetup();</span>
<a href="#l2.215"></a><span id="l2.215">                         break;</span>
<a href="#l2.216"></a><span id="l2.216">                     case &quot;button_print&quot;:</span>
<a href="#l2.217"></a><span id="l2.217">                     case &quot;cmd_print&quot;:</span>
<a href="#l2.218"></a><span id="l2.218">                         calPrint();</span>
<a href="#l2.219"></a><span id="l2.219">                         break;</span>
<a href="#l2.220"></a><span id="l2.220"> </span>
<a href="#l2.221"></a><span id="l2.221">                     // Thunderbird commands</span>
<a href="#l2.222"></a><span id="l2.222" class="difflineplus">+                    case &quot;cmd_goForward&quot;:</span>
<a href="#l2.223"></a><span id="l2.223" class="difflineplus">+                        currentView().moveView(1);</span>
<a href="#l2.224"></a><span id="l2.224" class="difflineplus">+                        break;</span>
<a href="#l2.225"></a><span id="l2.225" class="difflineplus">+                    case &quot;cmd_goBack&quot;:</span>
<a href="#l2.226"></a><span id="l2.226" class="difflineplus">+                        currentView().moveView(-1);</span>
<a href="#l2.227"></a><span id="l2.227" class="difflineplus">+                        break;</span>
<a href="#l2.228"></a><span id="l2.228" class="difflineplus">+</span>
<a href="#l2.229"></a><span id="l2.229">                     // For these commands, nothing should happen in calendar mode.</span>
<a href="#l2.230"></a><span id="l2.230">                     case &quot;cmd_printpreview&quot;:</span>
<a href="#l2.231"></a><span id="l2.231">                     case &quot;button_delete&quot;:</span>
<a href="#l2.232"></a><span id="l2.232">                     case &quot;cmd_delete&quot;:</span>
<a href="#l2.233"></a><span id="l2.233">                     default:</span>
<a href="#l2.234"></a><span id="l2.234">                     return;</span>
<a href="#l2.235"></a><span id="l2.235">                 }</span>
<a href="#l2.236"></a><span id="l2.236">         }</span>
<a href="#l2.237"></a><span id="l2.237" class="difflineat">@@ -549,17 +632,16 @@ function injectCalendarCommandController</span>
<a href="#l2.238"></a><span id="l2.238">         // we leave the current thread in order to re-enter the message loop.</span>
<a href="#l2.239"></a><span id="l2.239"> </span>
<a href="#l2.240"></a><span id="l2.240">         var tbController = top.controllers.getControllerForCommand(&quot;cmd_undo&quot;);</span>
<a href="#l2.241"></a><span id="l2.241">         if (!tbController) {</span>
<a href="#l2.242"></a><span id="l2.242">             setTimeout(injectCalendarCommandController, 0);</span>
<a href="#l2.243"></a><span id="l2.243">             return;</span>
<a href="#l2.244"></a><span id="l2.244">         } else {</span>
<a href="#l2.245"></a><span id="l2.245">             calendarController.defaultController = tbController;</span>
<a href="#l2.246"></a><span id="l2.246" class="difflineminus">-            ltnInitializeMenus();</span>
<a href="#l2.247"></a><span id="l2.247">         }</span>
<a href="#l2.248"></a><span id="l2.248">     }</span>
<a href="#l2.249"></a><span id="l2.249">     top.controllers.insertControllerAt(0, calendarController);</span>
<a href="#l2.250"></a><span id="l2.250">     document.commandDispatcher.updateCommands(&quot;calendar_commands&quot;);</span>
<a href="#l2.251"></a><span id="l2.251"> }</span>
<a href="#l2.252"></a><span id="l2.252"> </span>
<a href="#l2.253"></a><span id="l2.253"> /**</span>
<a href="#l2.254"></a><span id="l2.254">  * Remove the calendar command controller from the document.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-common-sets.xul</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-common-sets.xul</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -79,52 +79,61 @@</span>
<a href="#l3.4"></a><span id="l3.4">     &lt;command id=&quot;calendar_export_selection_command&quot; oncommand=&quot;goDoCommand('calendar_export_selection_command')&quot;/&gt;</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">     &lt;command id=&quot;calendar_publish_selected_calendar_command&quot; oncommand=&quot;goDoCommand('calendar_publish_selected_calendar_command')&quot;/&gt;</span>
<a href="#l3.7"></a><span id="l3.7">     &lt;command id=&quot;calendar_publish_calendar_command&quot; oncommand=&quot;goDoCommand('calendar_publish_calendar_command')&quot;/&gt;</span>
<a href="#l3.8"></a><span id="l3.8">     &lt;command id=&quot;calendar_publish_selected_events_command&quot; oncommand=&quot;goDoCommand('calendar_publish_selected_events_command')&quot;/&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">     &lt;command id=&quot;calendar_reload_remote_calendars&quot; oncommand=&quot;goDoCommand('calendar_reload_remote_calendars')&quot;/&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    &lt;command id=&quot;calendar_show_unifinder_command&quot; oncommand=&quot;toggleUnifinder()&quot;/&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    &lt;command id=&quot;calendar_show_unifinder_command&quot; oncommand=&quot;goDoCommand('calendar_show_unifinder_command')&quot;/&gt;</span>
<a href="#l3.14"></a><span id="l3.14">     &lt;!-- The dash instead of the underscore is intended. the 'xxx-view' part should be the id of the view in the deck --&gt;</span>
<a href="#l3.15"></a><span id="l3.15">     &lt;command id=&quot;calendar_day-view_command&quot; oncommand=&quot;showCalendarView('day')&quot;/&gt;</span>
<a href="#l3.16"></a><span id="l3.16">     &lt;command id=&quot;calendar_week-view_command&quot; oncommand=&quot;showCalendarView('week')&quot;/&gt;</span>
<a href="#l3.17"></a><span id="l3.17">     &lt;command id=&quot;calendar_multiweek-view_command&quot; oncommand=&quot;showCalendarView('multiweek')&quot;/&gt;</span>
<a href="#l3.18"></a><span id="l3.18">     &lt;command id=&quot;calendar_month-view_command&quot; oncommand=&quot;showCalendarView('month')&quot;/&gt;</span>
<a href="#l3.19"></a><span id="l3.19">     &lt;command id=&quot;calendar_task_category_command&quot; oncommand=&quot;contextChangeTaskCategory(event);&quot;/&gt;</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+    &lt;command id=&quot;calendar_toggle_completed_command&quot; oncommand=&quot;toggleCompleted(event)&quot;/&gt;</span>
<a href="#l3.21"></a><span id="l3.21">     &lt;command id=&quot;calendar_percentComplete-0_command&quot; oncommand=&quot;contextChangeTaskProgress(event, 0)&quot;/&gt;</span>
<a href="#l3.22"></a><span id="l3.22">     &lt;command id=&quot;calendar_percentComplete-25_command&quot; oncommand=&quot;contextChangeTaskProgress(event, 25)&quot;/&gt;</span>
<a href="#l3.23"></a><span id="l3.23">     &lt;command id=&quot;calendar_percentComplete-50_command&quot; oncommand=&quot;contextChangeTaskProgress(event, 50)&quot;/&gt;</span>
<a href="#l3.24"></a><span id="l3.24">     &lt;command id=&quot;calendar_percentComplete-75_command&quot; oncommand=&quot;contextChangeTaskProgress(event, 75)&quot;/&gt;</span>
<a href="#l3.25"></a><span id="l3.25">     &lt;command id=&quot;calendar_percentComplete-100_command&quot; oncommand=&quot;contextChangeTaskProgress(event, 100)&quot;/&gt;</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-    &lt;command id=&quot;calendar_percentComplete-100_command2&quot; oncommand=&quot;contextChangeTaskProgress2(event, 100)&quot;/&gt;</span>
<a href="#l3.27"></a><span id="l3.27">     &lt;command id=&quot;calendar_priority-0_command&quot; oncommand=&quot;contextChangeTaskPriority(event, 0)&quot;/&gt;</span>
<a href="#l3.28"></a><span id="l3.28">     &lt;command id=&quot;calendar_priority-9_command&quot; oncommand=&quot;contextChangeTaskPriority(event, 9)&quot;/&gt;</span>
<a href="#l3.29"></a><span id="l3.29">     &lt;command id=&quot;calendar_priority-5_command&quot; oncommand=&quot;contextChangeTaskPriority(event, 5)&quot;/&gt;</span>
<a href="#l3.30"></a><span id="l3.30">     &lt;command id=&quot;calendar_priority-1_command&quot; oncommand=&quot;contextChangeTaskPriority(event, 1)&quot;/&gt;</span>
<a href="#l3.31"></a><span id="l3.31">     &lt;command id=&quot;calendar_general-priority_command&quot; oncommand=&quot;goDoCommand('calendar_general-priority_command')&quot;/&gt;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-    &lt;command id=&quot;calendar_toggle_orientation_command&quot; persist=&quot;checked&quot; oncommand=&quot;toggleOrientation()&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-    &lt;command id=&quot;calendar_toggle_workdays_only_command&quot; persist=&quot;checked&quot; oncommand=&quot;toggleWorkdaysOnly()&quot;/&gt;</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+    &lt;command id=&quot;calendar_general-progress_command&quot; oncommand=&quot;goDoCommand('calendar_general-priority_command')&quot;/&gt;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+    &lt;command id=&quot;calendar_toggle_orientation_command&quot; persist=&quot;checked&quot; oncommand=&quot;goDoCommand('calendar_toggle_orientation_command')&quot;/&gt;</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+    &lt;command id=&quot;calendar_toggle_workdays_only_command&quot; persist=&quot;checked&quot; oncommand=&quot;goDoCommand('calendar_toggle_workdays_only_command')&quot;/&gt;</span>
<a href="#l3.37"></a><span id="l3.37">     &lt;command id=&quot;calendar_toggle_tasks_in_view_command&quot; persist=&quot;checked&quot; oncommand=&quot;toggleTasksInView()&quot;/&gt;</span>
<a href="#l3.38"></a><span id="l3.38">     &lt;command id=&quot;calendar_toggle_show_completed_in_view_command&quot; persist=&quot;checked&quot; oncommand=&quot;toggleShowCompletedInView()&quot;/&gt;</span>
<a href="#l3.39"></a><span id="l3.39">     &lt;command id=&quot;calendar_toggle_minimonthpane_command&quot; oncommand=&quot;document.getElementById('minimonth-pane').togglePane(event)&quot;/&gt;</span>
<a href="#l3.40"></a><span id="l3.40">     &lt;command id=&quot;calendar_toggle_calendarlist_command&quot; oncommand=&quot;document.getElementById('calendar-list-pane').togglePane(event)&quot;/&gt;</span>
<a href="#l3.41"></a><span id="l3.41">     &lt;command id=&quot;calendar_task_filter_command&quot; oncommand=&quot;taskViewUpdate(event.explicitOriginalTarget.getAttribute('value'))&quot;/&gt;</span>
<a href="#l3.42"></a><span id="l3.42">     &lt;command id=&quot;calendar_toggle_filter_command&quot; oncommand=&quot;document.getElementById('task-filter-pane').togglePane(event)&quot;/&gt;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-    &lt;command id=&quot;calendar_view_next_command&quot; oncommand=&quot;currentView().moveView(1)&quot;/&gt;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+    &lt;command id=&quot;calendar_view_next_command&quot; oncommand=&quot;goDoCommand('calendar_view_next_command')&quot;/&gt;</span>
<a href="#l3.45"></a><span id="l3.45">     &lt;command id=&quot;calendar_view_today_command&quot; oncommand=&quot;currentView().moveView()&quot;/&gt;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-    &lt;command id=&quot;calendar_view_prev_command&quot; oncommand=&quot;currentView().moveView(-1)&quot;/&gt;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-    &lt;command id=&quot;calendar_go_to_today_command&quot; oncommand=&quot;goToDate(now())&quot;/&gt;</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+    &lt;command id=&quot;calendar_view_prev_command&quot; oncommand=&quot;goDoCommand('calendar_view_prev_command')&quot;/&gt;</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+    &lt;!-- this is a pseudo-command that is disabled when in calendar mode --&gt;</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+    &lt;command id=&quot;calendar_in_foreground&quot;/&gt;</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+    &lt;!-- this is a pseudo-command that is disabled when not in calendar mode --&gt;</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+    &lt;command id=&quot;calendar_in_background&quot;/&gt;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+    &lt;!-- These commands are enabled when in calendar or task mode, respectively --&gt;</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+    &lt;command id=&quot;calendar_mode_calendar&quot;/&gt;</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+    &lt;command id=&quot;calendar_mode_task&quot;/&gt;</span>
<a href="#l3.58"></a><span id="l3.58">   &lt;/commandset&gt;</span>
<a href="#l3.59"></a><span id="l3.59"> </span>
<a href="#l3.60"></a><span id="l3.60">   &lt;keyset id=&quot;calendar-keys&quot;&gt;</span>
<a href="#l3.61"></a><span id="l3.61"> #ifdef XP_MACOSX</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-    // The following Mac specific code-lines are necessary, because you can't </span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-    // just use the OPTION key on Mac OSX. So we will use SHIFT+OPTION on the </span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+    // The following Mac specific code-lines are necessary, because you can't</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+    // just use the OPTION key on Mac OSX. So we will use SHIFT+OPTION on the</span>
<a href="#l3.66"></a><span id="l3.66">     // Mac, but just ALT on all other platforms. See bug 448946.</span>
<a href="#l3.67"></a><span id="l3.67">     &lt;key id=&quot;calendar-day-view-key&quot; key=&quot;&amp;calendar.dayView.key;&quot; observes=&quot;calendar_day-view_command&quot; modifiers=&quot;shift alt&quot;/&gt;</span>
<a href="#l3.68"></a><span id="l3.68">     &lt;key id=&quot;calendar-week-view-key&quot; key=&quot;&amp;calendar.weekView.key;&quot; observes=&quot;calendar_week-view_command&quot; modifiers=&quot;shift alt&quot;/&gt;</span>
<a href="#l3.69"></a><span id="l3.69">     &lt;key id=&quot;calendar-multiweek-view-key&quot; key=&quot;&amp;calendar.multiweekView.key;&quot; observes=&quot;calendar_multiweek-view_command&quot; modifiers=&quot;shift alt&quot;/&gt;</span>
<a href="#l3.70"></a><span id="l3.70">     &lt;key id=&quot;calendar-month-view-key&quot; key=&quot;&amp;calendar.monthView.key;&quot; observes=&quot;calendar_month-view_command&quot; modifiers=&quot;shift alt&quot;/&gt;</span>
<a href="#l3.71"></a><span id="l3.71"> #else</span>
<a href="#l3.72"></a><span id="l3.72">     &lt;key id=&quot;calendar-day-view-key&quot; key=&quot;&amp;calendar.dayView.key;&quot; observes=&quot;calendar_day-view_command&quot; modifiers=&quot;alt&quot;/&gt;</span>
<a href="#l3.73"></a><span id="l3.73">     &lt;key id=&quot;calendar-week-view-key&quot; key=&quot;&amp;calendar.weekView.key;&quot; observes=&quot;calendar_week-view_command&quot; modifiers=&quot;alt&quot;/&gt;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineat">@@ -276,17 +285,18 @@</span>
<a href="#l3.75"></a><span id="l3.75">                 key=&quot;calendar-new-todo-key&quot;</span>
<a href="#l3.76"></a><span id="l3.76">                 command=&quot;calendar_new_todo_command&quot;</span>
<a href="#l3.77"></a><span id="l3.77">                 observes=&quot;calendar_new_todo_command&quot;/&gt;</span>
<a href="#l3.78"></a><span id="l3.78">       &lt;menuseparator id=&quot;calendar-menuseparator-beforemarkcompleted&quot;/&gt;</span>
<a href="#l3.79"></a><span id="l3.79">       &lt;menuitem id=&quot;calendar-context-markcompleted&quot;</span>
<a href="#l3.80"></a><span id="l3.80">                 type=&quot;checkbox&quot;</span>
<a href="#l3.81"></a><span id="l3.81">                 label=&quot;&amp;calendar.context.markcompleted.label;&quot;</span>
<a href="#l3.82"></a><span id="l3.82">                 accesskey=&quot;&amp;calendar.context.markcompleted.accesskey;&quot;</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-                oncommand=&quot;toggleCompleted(event)&quot;/&gt;</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+                observes=&quot;calendar_toggle_completed_command&quot;</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+                command=&quot;calendar_toggle_completed_command&quot;/&gt;</span>
<a href="#l3.86"></a><span id="l3.86">       &lt;menu id=&quot;task-context-menu-progress&quot;</span>
<a href="#l3.87"></a><span id="l3.87">             label=&quot;&amp;calendar.context.progress.label;&quot;</span>
<a href="#l3.88"></a><span id="l3.88">             accesskey=&quot;&amp;calendar.context.progress.accesskey;&quot;&gt;</span>
<a href="#l3.89"></a><span id="l3.89">         &lt;menupopup id=&quot;progress-menupopup&quot; type=&quot;task-progress&quot;/&gt;</span>
<a href="#l3.90"></a><span id="l3.90">       &lt;/menu&gt;</span>
<a href="#l3.91"></a><span id="l3.91">       &lt;menu id=&quot;task-context-menu-priority&quot;</span>
<a href="#l3.92"></a><span id="l3.92">             label=&quot;&amp;calendar.context.priority.label;&quot;</span>
<a href="#l3.93"></a><span id="l3.93">             accesskey=&quot;&amp;calendar.context.priority.accesskey;&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-menus.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-menus.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -163,9 +163,9 @@</span>
<a href="#l4.4"></a><span id="l4.4">       &lt;children/&gt;                    </span>
<a href="#l4.5"></a><span id="l4.5">      &lt;/content&gt;</span>
<a href="#l4.6"></a><span id="l4.6">     &lt;implementation&gt;</span>
<a href="#l4.7"></a><span id="l4.7">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l4.8"></a><span id="l4.8">           this.mType = &quot;priority&quot;;</span>
<a href="#l4.9"></a><span id="l4.9">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l4.10"></a><span id="l4.10">     &lt;/implementation&gt;</span>
<a href="#l4.11"></a><span id="l4.11">    &lt;/binding&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-&lt;/bindings&gt;</span>
<a href="#l4.13"></a><span id="l4.13">\ No newline at end of file</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+&lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -2187,16 +2187,19 @@</span>
<a href="#l5.4"></a><span id="l5.4">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6">       &lt;property name=&quot;daysInView&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l5.7"></a><span id="l5.7">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l5.8"></a><span id="l5.8">           return this.labeldaybox.childNodes &amp;&amp; this.labeldaybox.childNodes.length;</span>
<a href="#l5.9"></a><span id="l5.9">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l5.10"></a><span id="l5.10">       &lt;/property&gt;</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+      &lt;property name=&quot;supportsRotation&quot; readonly=&quot;true&quot;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                onget=&quot;return true&quot;/&gt;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+</span>
<a href="#l5.15"></a><span id="l5.15">       &lt;method name=&quot;handlePreference&quot;&gt;</span>
<a href="#l5.16"></a><span id="l5.16">         &lt;parameter name=&quot;aSubject&quot;/&gt;</span>
<a href="#l5.17"></a><span id="l5.17">         &lt;parameter name=&quot;aTopic&quot;/&gt;</span>
<a href="#l5.18"></a><span id="l5.18">         &lt;parameter name=&quot;aPreference&quot;/&gt;</span>
<a href="#l5.19"></a><span id="l5.19">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l5.20"></a><span id="l5.20">             aSubject.QueryInterface(Components.interfaces.nsIPrefBranch2);</span>
<a href="#l5.21"></a><span id="l5.21">             switch (aPreference) {</span>
<a href="#l5.22"></a><span id="l5.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -91,41 +91,38 @@ function addCategoryNames(aEvent) {</span>
<a href="#l6.4"></a><span id="l6.4"> }</span>
<a href="#l6.5"></a><span id="l6.5"> </span>
<a href="#l6.6"></a><span id="l6.6"> /**</span>
<a href="#l6.7"></a><span id="l6.7">  * Change the opening context menu for the selected tasks.</span>
<a href="#l6.8"></a><span id="l6.8">  *</span>
<a href="#l6.9"></a><span id="l6.9">  * @param aEvent    The popupshowing event of the opening menu.</span>
<a href="#l6.10"></a><span id="l6.10">  */</span>
<a href="#l6.11"></a><span id="l6.11"> function changeContextMenuForTask(aEvent) {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    var tasks = getSelectedTasks(aEvent);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-    var task = null;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-    var tasksSelected = (tasks.length &gt; 0);</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+    let tasksSelected = (getSelectedTasks(aEvent).length &gt; 0);</span>
<a href="#l6.16"></a><span id="l6.16">     applyAttributeToMenuChildren(aEvent.target, &quot;disabled&quot;, (!tasksSelected));</span>
<a href="#l6.17"></a><span id="l6.17">     document.getElementById(&quot;calendar_new_todo_command&quot;).removeAttribute(&quot;disabled&quot;);</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-    if (tasksSelected) {</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-        if (isPropertyValueSame(tasks, &quot;isCompleted&quot;)) {</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-            setBooleanAttribute(document.getElementById(&quot;calendar-context-markcompleted&quot;), &quot;checked&quot;, tasks[0].isCompleted);</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-        } else {</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-            document.getElementById(&quot;calendar-context-markcompleted&quot;).setAttribute(&quot;checked&quot;, false);</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-        }</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-    }</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+    changeMenuForTask(aEvent);</span>
<a href="#l6.26"></a><span id="l6.26"> }</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28"> /**</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">- * Handler function to mark selected tasks as completed.</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">- *</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">- * XXXberend Please explain more and rename to something easier to understand.</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+ * Change the opening menu for the selected tasks.</span>
<a href="#l6.33"></a><span id="l6.33">  *</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">- * @param aEvent      The DOM event that triggered this command.</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">- * @param aProgress   The progress percentage to set.</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+ * @param aEvent    The popupshowing event of the opening menu.</span>
<a href="#l6.37"></a><span id="l6.37">  */</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-function contextChangeTaskProgress2(aEvent, aProgress) {</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">-    contextChangeTaskProgress(aEvent, aProgress);</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-    document.getElementById(&quot;calendar_percentComplete-100_command2&quot;).checked = false;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+function changeMenuForTask(aEvent) {</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+    let tasks = getSelectedTasks(aEvent);</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+    let tasksSelected = (tasks.length &gt; 0);</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+    if (tasksSelected) {</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+        let cmd = document.getElementById(&quot;calendar_toggle_completed_command&quot;);</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+        if (isPropertyValueSame(tasks, &quot;isCompleted&quot;)) {</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+            setBooleanAttribute(cmd, &quot;checked&quot;, tasks[0].isCompleted);</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+        } else {</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+            setBooleanAttribute(cmd, &quot;checked&quot;, false);</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+        }</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+    }</span>
<a href="#l6.52"></a><span id="l6.52"> }</span>
<a href="#l6.53"></a><span id="l6.53"> </span>
<a href="#l6.54"></a><span id="l6.54"> /**</span>
<a href="#l6.55"></a><span id="l6.55">  * Handler function to change the progress of all selected tasks.</span>
<a href="#l6.56"></a><span id="l6.56">  *</span>
<a href="#l6.57"></a><span id="l6.57">  * @param aEvent      The DOM event that triggered this command.</span>
<a href="#l6.58"></a><span id="l6.58">  * @param aProgress   The progress percentage to set.</span>
<a href="#l6.59"></a><span id="l6.59">  */</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineat">@@ -281,21 +278,19 @@ function tasksToMail(aEvent) {</span>
<a href="#l6.61"></a><span id="l6.61">  * Convert selected tasks to events.</span>
<a href="#l6.62"></a><span id="l6.62">  */</span>
<a href="#l6.63"></a><span id="l6.63"> function tasksToEvents(aEvent) {</span>
<a href="#l6.64"></a><span id="l6.64">     var tasks = getSelectedTasks(aEvent);</span>
<a href="#l6.65"></a><span id="l6.65">     calendarCalendarButtonDNDObserver.onDropItems(tasks);</span>
<a href="#l6.66"></a><span id="l6.66"> }</span>
<a href="#l6.67"></a><span id="l6.67"> </span>
<a href="#l6.68"></a><span id="l6.68"> /**</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineminus">- * Toggle the completed state on tasks retrieved from the given event.</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+ * Toggle the completed state on selected tasks.</span>
<a href="#l6.71"></a><span id="l6.71">  *</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineminus">- * XXXberend Please clarify if this is correct and describe more clearly.</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">- *</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineminus">- * @param aEvent    The command event that holds information about the tasks.</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+ * @param aEvent    The originating event, can be null.</span>
<a href="#l6.76"></a><span id="l6.76">  */</span>
<a href="#l6.77"></a><span id="l6.77"> function toggleCompleted(aEvent) {</span>
<a href="#l6.78"></a><span id="l6.78">     if (aEvent.target.getAttribute(&quot;checked&quot;) == &quot;true&quot;) {</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-        contextChangeTaskProgress(aEvent, 100);</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+        contextChangeTaskProgress(aEvent, 0);</span>
<a href="#l6.81"></a><span id="l6.81">     } else {</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-        contextChangeTaskProgress(aEvent, 0);</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+        contextChangeTaskProgress(aEvent, 100);</span>
<a href="#l6.84"></a><span id="l6.84">     }</span>
<a href="#l6.85"></a><span id="l6.85"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-task-view.xul</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-view.xul</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -158,18 +158,18 @@</span>
<a href="#l7.4"></a><span id="l7.4">                       class=&quot;msgHeaderView-button&quot;&gt;</span>
<a href="#l7.5"></a><span id="l7.5">                 &lt;menupopup id=&quot;task-actions-category-menupopup&quot;</span>
<a href="#l7.6"></a><span id="l7.6">                            onpopupshowing=&quot;addCategoryNames(event)&quot;/&gt;</span>
<a href="#l7.7"></a><span id="l7.7">               &lt;/button&gt;</span>
<a href="#l7.8"></a><span id="l7.8">               &lt;button id=&quot;task-actions-markcompleted&quot;</span>
<a href="#l7.9"></a><span id="l7.9">                       type=&quot;menu-button&quot;</span>
<a href="#l7.10"></a><span id="l7.10">                       label=&quot;&amp;calendar.context.markcompleted.label;&quot;</span>
<a href="#l7.11"></a><span id="l7.11">                       tooltiptext=&quot;&amp;calendar.task.complete.button.tooltip;&quot;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-                      command=&quot;calendar_percentComplete-100_command2&quot;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-                      observes=&quot;calendar_percentComplete-100_command2&quot;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+                      command=&quot;calendar_toggle_completed_command&quot;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+                      observes=&quot;calendar_toggle_completed_command&quot;</span>
<a href="#l7.16"></a><span id="l7.16">                       class=&quot;msgHeaderView-button&quot;&gt;</span>
<a href="#l7.17"></a><span id="l7.17">                 &lt;menupopup id=&quot;task-actions-markcompleted-menupopup&quot; type=&quot;task-progress&quot;/&gt;</span>
<a href="#l7.18"></a><span id="l7.18">               &lt;/button&gt;</span>
<a href="#l7.19"></a><span id="l7.19">               &lt;button id=&quot;task-actions-priority&quot;</span>
<a href="#l7.20"></a><span id="l7.20">                       type=&quot;menu&quot;</span>
<a href="#l7.21"></a><span id="l7.21">                       label=&quot;&amp;calendar.context.priority.label;&quot;</span>
<a href="#l7.22"></a><span id="l7.22">                       tooltiptext=&quot;&amp;calendar.task.priority.button.tooltip;&quot;</span>
<a href="#l7.23"></a><span id="l7.23">                       command=&quot;calendar_general-priority_command&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-views.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -341,33 +341,28 @@ function switchToView(aViewType) {</span>
<a href="#l8.4"></a><span id="l8.4">             node.setAttribute(attr, node.getAttribute(attr + &quot;-&quot; + aViewType));</span>
<a href="#l8.5"></a><span id="l8.5">         } else {</span>
<a href="#l8.6"></a><span id="l8.6">             node.setAttribute(attr, node.getAttribute(attr + &quot;-all&quot;));</span>
<a href="#l8.7"></a><span id="l8.7">         }</span>
<a href="#l8.8"></a><span id="l8.8">     }</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">     // Set up the labels for the context menu</span>
<a href="#l8.11"></a><span id="l8.11">     [&quot;calendar-view-context-menu-next&quot;,</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-     &quot;calendar-view-context-menu-previous&quot;].forEach(function(x) setupViewNode(x, &quot;label&quot;));</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+     &quot;calendar-view-context-menu-previous&quot;,</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+     &quot;calendar-go-menu-next&quot;,</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+     &quot;calendar-go-menu-previous&quot;].forEach(function(x) setupViewNode(x, &quot;label&quot;));</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+    [&quot;calendar-go-menu-next&quot;,</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+     &quot;calendar-go-menu-previous&quot;].forEach(function(x) setupViewNode(x, &quot;accesskey&quot;));</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20">     // Set up the labels for the view navigation</span>
<a href="#l8.21"></a><span id="l8.21">     [&quot;previous-view-button&quot;,</span>
<a href="#l8.22"></a><span id="l8.22">      &quot;today-view-button&quot;,</span>
<a href="#l8.23"></a><span id="l8.23">      &quot;next-view-button&quot;].forEach(function(x) setupViewNode(x, &quot;tooltiptext&quot;));</span>
<a href="#l8.24"></a><span id="l8.24">     </span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-        </span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-    // Disable the menuitem when not in day or week view.</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-    var rotated = document.getElementById(&quot;calendar_toggle_orientation_command&quot;);</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-    if (aViewType == &quot;day&quot; || aViewType == &quot;week&quot;) {</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-        rotated.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-    } else {</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-        rotated.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-    }</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-</span>
<a href="#l8.35"></a><span id="l8.35">     try {</span>
<a href="#l8.36"></a><span id="l8.36">         selectedDay = viewDeck.selectedPanel.selectedDay;</span>
<a href="#l8.37"></a><span id="l8.37">         currentSelection = viewDeck.selectedPanel.getSelectedItems({});</span>
<a href="#l8.38"></a><span id="l8.38">     } catch (ex) {</span>
<a href="#l8.39"></a><span id="l8.39">         // This dies if no view has even been chosen this session, but that's</span>
<a href="#l8.40"></a><span id="l8.40">         // ok because we'll just use now() below.</span>
<a href="#l8.41"></a><span id="l8.41">     }</span>
<a href="#l8.42"></a><span id="l8.42"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/calendar-views.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -51,16 +51,19 @@</span>
<a href="#l9.4"></a><span id="l9.4">     &lt;binding id=&quot;calendar-day-view&quot;</span>
<a href="#l9.5"></a><span id="l9.5">              extends=&quot;chrome://calendar/content/calendar-multiday-view.xml#calendar-multiday-view&quot;&gt;</span>
<a href="#l9.6"></a><span id="l9.6">         &lt;implementation implements=&quot;calICalendarView&quot;&gt;</span>
<a href="#l9.7"></a><span id="l9.7">             &lt;property name=&quot;observerID&quot;&gt;</span>
<a href="#l9.8"></a><span id="l9.8">                 &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l9.9"></a><span id="l9.9">                     return &quot;day-view-observer&quot;;</span>
<a href="#l9.10"></a><span id="l9.10">                 ]]&gt;&lt;/getter&gt;</span>
<a href="#l9.11"></a><span id="l9.11">             &lt;/property&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+            &lt;property name=&quot;supportsWorkdaysOnly&quot;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                      readonly=&quot;true&quot;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+                      onget=&quot;return false;&quot;/&gt;</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16">             &lt;!--Public methods--&gt;</span>
<a href="#l9.17"></a><span id="l9.17">             &lt;method name=&quot;goToDay&quot;&gt;</span>
<a href="#l9.18"></a><span id="l9.18">                 &lt;parameter name=&quot;aDate&quot;/&gt;</span>
<a href="#l9.19"></a><span id="l9.19">                 &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.20"></a><span id="l9.20">                     aDate = aDate.getInTimezone(this.timezone);</span>
<a href="#l9.21"></a><span id="l9.21">                     this.setDateRange(aDate, aDate);</span>
<a href="#l9.22"></a><span id="l9.22">                     this.selectedDay = aDate;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/today-pane.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/today-pane.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -263,38 +263,35 @@ var TodayPane = {</span>
<a href="#l10.4"></a><span id="l10.4">   updatePeriod: function updatePeriod() {</span>
<a href="#l10.5"></a><span id="l10.5">       var date = this.start.clone();</span>
<a href="#l10.6"></a><span id="l10.6">       return agendaListbox.refreshPeriodDates(date);</span>
<a href="#l10.7"></a><span id="l10.7">   },</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">   /**</span>
<a href="#l10.10"></a><span id="l10.10">    * Display a certain section in the minday/minimonth part of the todaypane.</span>
<a href="#l10.11"></a><span id="l10.11">    *</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-   * @param aIndex      A numeric value:</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-   *                     - 1: Show the miniday</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-   *                     - 2: show the minimonth</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-   *                     - 3: show none of both</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+   * @param aSection      The section to display</span>
<a href="#l10.17"></a><span id="l10.17">    */</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-  displayMiniSection: function displayMiniSection(aIndex) {</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-      document.getElementById(&quot;today-minimonth-box&quot;).setVisible(aIndex == 2);</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-      document.getElementById(&quot;mini-day-box&quot;).setVisible(aIndex == 1);</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-      document.getElementById(&quot;today-none-box&quot;).setVisible(aIndex == 3);</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineminus">-      setBooleanAttribute(document.getElementById(&quot;today-Minimonth&quot;), &quot;freebusy&quot;, aIndex == 2);</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+  displayMiniSection: function displayMiniSection(aSection) {</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+      document.getElementById(&quot;today-minimonth-box&quot;).setVisible(aSection == 'minimonth');</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+      document.getElementById(&quot;mini-day-box&quot;).setVisible(aSection == 'miniday');</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+      document.getElementById(&quot;today-none-box&quot;).setVisible(aSection == 'none');</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+      setBooleanAttribute(document.getElementById(&quot;today-Minimonth&quot;), &quot;freebusy&quot;, aSection == 'minimonth');</span>
<a href="#l10.28"></a><span id="l10.28">   },</span>
<a href="#l10.29"></a><span id="l10.29"> </span>
<a href="#l10.30"></a><span id="l10.30">   /**</span>
<a href="#l10.31"></a><span id="l10.31">    * Disable or enable the today pane menuitems that have an attribute</span>
<a href="#l10.32"></a><span id="l10.32">    * name=&quot;minidisplay&quot;</span>
<a href="#l10.33"></a><span id="l10.33">    *</span>
<a href="#l10.34"></a><span id="l10.34">    * @param disable         If true, items will be disabled, otherwise enabled.</span>
<a href="#l10.35"></a><span id="l10.35">    */</span>
<a href="#l10.36"></a><span id="l10.36">   disableMenuItems: function disableMenuItems(disable) {</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-       var menu = document.getElementById(&quot;today-pane-menu&quot;);</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+       let menu = document.getElementById(&quot;ltnTodayPaneMenuPopup&quot;);</span>
<a href="#l10.39"></a><span id="l10.39">        if (menu) {</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineminus">-           setAttributeToChildren(menu.firstChild, &quot;disabled&quot;, disable, &quot;name&quot;, &quot;minidisplay&quot;);</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+           setAttributeToChildren(menu, &quot;disabled&quot;, disable, &quot;name&quot;, &quot;minidisplay&quot;);</span>
<a href="#l10.42"></a><span id="l10.42">        }</span>
<a href="#l10.43"></a><span id="l10.43">   },</span>
<a href="#l10.44"></a><span id="l10.44"> </span>
<a href="#l10.45"></a><span id="l10.45">   /**</span>
<a href="#l10.46"></a><span id="l10.46">    * Handler function for the DOMAttrModified event used to observe the</span>
<a href="#l10.47"></a><span id="l10.47">    * todaypane-splitter.</span>
<a href="#l10.48"></a><span id="l10.48">    *</span>
<a href="#l10.49"></a><span id="l10.49">    * @param aEvent      The DOM event occurring on attribute modification.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/content/today-pane.xul</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/content/today-pane.xul</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -91,32 +91,32 @@</span>
<a href="#l11.4"></a><span id="l11.4">                   mode=&quot;mail,calendar,task&quot;</span>
<a href="#l11.5"></a><span id="l11.5">                   collapsedinmodes=&quot;calendar&quot;</span>
<a href="#l11.6"></a><span id="l11.6">                   persist=&quot;collapsed height collapsedinmodes&quot;</span>
<a href="#l11.7"></a><span id="l11.7">                   broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l11.8"></a><span id="l11.8">               &lt;modebox id=&quot;today-none-box&quot;</span>
<a href="#l11.9"></a><span id="l11.9">                        mode=&quot;mail,calendar,task&quot;</span>
<a href="#l11.10"></a><span id="l11.10">                        collapsedinmodes=&quot;mail,calendar,task&quot;</span>
<a href="#l11.11"></a><span id="l11.11">                        broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-                       refcontrol=&quot;today-pane-displaynone&quot;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+                       refcontrol=&quot;ltnTodayPaneDisplayNone&quot;</span>
<a href="#l11.14"></a><span id="l11.14">                        persist=&quot;collapsedinmodes&quot;/&gt;</span>
<a href="#l11.15"></a><span id="l11.15">               &lt;modehbox id=&quot;today-minimonth-box&quot;</span>
<a href="#l11.16"></a><span id="l11.16">                         pack=&quot;center&quot;</span>
<a href="#l11.17"></a><span id="l11.17">                         class=&quot;today-subpane&quot;</span>
<a href="#l11.18"></a><span id="l11.18">                         mode=&quot;mail,calendar,task&quot;</span>
<a href="#l11.19"></a><span id="l11.19">                         broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l11.20"></a><span id="l11.20">                         collapsedinmodes=&quot;mail,calendar,task&quot;</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-                        refcontrol=&quot;today-pane-displayminimonth&quot;</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+                        refcontrol=&quot;ltnTodayPaneDisplayMinimonth&quot;</span>
<a href="#l11.23"></a><span id="l11.23">                         persist=&quot;collapsedinmodes&quot;&gt;</span>
<a href="#l11.24"></a><span id="l11.24">                 &lt;minimonth id=&quot;today-Minimonth&quot; freebusy=&quot;true&quot; onchange=&quot;TodayPane.setDaywithjsDate(this.value);&quot;/&gt;</span>
<a href="#l11.25"></a><span id="l11.25">               &lt;/modehbox&gt;</span>
<a href="#l11.26"></a><span id="l11.26">               &lt;modebox id=&quot;mini-day-box&quot;</span>
<a href="#l11.27"></a><span id="l11.27">                        mode=&quot;mail,calendar,task&quot;</span>
<a href="#l11.28"></a><span id="l11.28">                        class=&quot;today-subpane&quot;</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-                       refcontrol=&quot;today-pane-displayminiday&quot;</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+                       refcontrol=&quot;ltnTodayPaneDisplayMiniday&quot;</span>
<a href="#l11.31"></a><span id="l11.31">                        broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l11.32"></a><span id="l11.32">                        collapsedinmodes=&quot;&quot;</span>
<a href="#l11.33"></a><span id="l11.33">                        persist=&quot;collapsedinmodes&quot;&gt;</span>
<a href="#l11.34"></a><span id="l11.34">                 &lt;stack flex=&quot;1&quot;&gt;</span>
<a href="#l11.35"></a><span id="l11.35">                   &lt;image id=&quot;mini-day-image&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l11.36"></a><span id="l11.36">                   &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l11.37"></a><span id="l11.37">                     &lt;deck id=&quot;dateContainer&quot; selectedIndex=&quot;0&quot;&gt;</span>
<a href="#l11.38"></a><span id="l11.38">                       &lt;hbox pack=&quot;center&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -180,17 +180,18 @@</span>
<a href="#l12.4"></a><span id="l12.4">             if (this.hasAttribute(&quot;collapsedinmodes&quot;)) {</span>
<a href="#l12.5"></a><span id="l12.5">                 var collapsedModes = this.getAttribute(&quot;collapsedinmodes&quot;).split(&quot;,&quot;);</span>
<a href="#l12.6"></a><span id="l12.6">                 var modeIndex = collapsedModes.indexOf(this.currentMode);</span>
<a href="#l12.7"></a><span id="l12.7">                 collapsedInMode = (modeIndex &gt; -1);</span>
<a href="#l12.8"></a><span id="l12.8">             }</span>
<a href="#l12.9"></a><span id="l12.9">             if ((aVisible === true) &amp;&amp; (pushModeCollapsedAttribute == false)){</span>
<a href="#l12.10"></a><span id="l12.10">                 display = (aVisible === true) &amp;&amp; (!collapsedInMode);</span>
<a href="#l12.11"></a><span id="l12.11">             }</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-            setBooleanAttribute(this, &quot;collapsed&quot;, (!display));</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+            setBooleanAttribute(this, &quot;collapsed&quot;, (!display || !this.isVisibleInMode()));</span>
<a href="#l12.15"></a><span id="l12.15">             if (pushModeCollapsedAttribute) {</span>
<a href="#l12.16"></a><span id="l12.16">                 if (!display) {</span>
<a href="#l12.17"></a><span id="l12.17">                     if (modeIndex == -1) {</span>
<a href="#l12.18"></a><span id="l12.18">                         collapsedModes.push(this.currentMode);</span>
<a href="#l12.19"></a><span id="l12.19">                         if (this.getAttribute(&quot;collapsedinmodes&quot;) == &quot;,&quot;) {</span>
<a href="#l12.20"></a><span id="l12.20">                             collapsedModes.splice(0,2);</span>
<a href="#l12.21"></a><span id="l12.21">                         }</span>
<a href="#l12.22"></a><span id="l12.22">                     }</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineat">@@ -208,16 +209,17 @@</span>
<a href="#l12.24"></a><span id="l12.24">                     document.persist(id, &quot;collapsedinmodes&quot;);</span>
<a href="#l12.25"></a><span id="l12.25">                 }</span>
<a href="#l12.26"></a><span id="l12.26">             }</span>
<a href="#l12.27"></a><span id="l12.27">             if (notifyRefControl === true) {</span>
<a href="#l12.28"></a><span id="l12.28">                 if (this.hasAttribute(&quot;refcontrol&quot;)) {</span>
<a href="#l12.29"></a><span id="l12.29">                     var command =  document.getElementById(this.getAttribute(&quot;refcontrol&quot;))</span>
<a href="#l12.30"></a><span id="l12.30">                     if (command) {</span>
<a href="#l12.31"></a><span id="l12.31">                         command.setAttribute(&quot;checked&quot;, display);</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+                        setBooleanAttribute(command, &quot;disabled&quot;, !this.isVisibleInMode());</span>
<a href="#l12.33"></a><span id="l12.33">                     }</span>
<a href="#l12.34"></a><span id="l12.34">                 }</span>
<a href="#l12.35"></a><span id="l12.35">             }</span>
<a href="#l12.36"></a><span id="l12.36">         ]]&gt;&lt;/body&gt;</span>
<a href="#l12.37"></a><span id="l12.37">       &lt;/method&gt;</span>
<a href="#l12.38"></a><span id="l12.38"> </span>
<a href="#l12.39"></a><span id="l12.39">       &lt;method name=&quot;isVisibleInMode&quot;&gt;</span>
<a href="#l12.40"></a><span id="l12.40">         &lt;parameter name=&quot;aMode&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/public/calICalendarView.idl</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/public/calICalendarView.idl</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -76,17 +76,22 @@ interface calICalendarView : nsISupports</span>
<a href="#l13.4"></a><span id="l13.4">    */</span>
<a href="#l13.5"></a><span id="l13.5">   attribute calICalendar displayCalendar;</span>
<a href="#l13.6"></a><span id="l13.6"> </span>
<a href="#l13.7"></a><span id="l13.7">   /**</span>
<a href="#l13.8"></a><span id="l13.8">    * the controller for this view</span>
<a href="#l13.9"></a><span id="l13.9">    */</span>
<a href="#l13.10"></a><span id="l13.10">   attribute calICalendarViewController controller;</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-/**</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  /**</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+   * If true, the view supports workdays only</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+   */</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+  readonly attribute boolean supportsWorkdaysOnly;</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+  /**</span>
<a href="#l13.19"></a><span id="l13.19">    * If this is set to 'true', the view should not display days specified to be</span>
<a href="#l13.20"></a><span id="l13.20">    * non-workdays.  The implementor is responsible for obtaining what those</span>
<a href="#l13.21"></a><span id="l13.21">    * days are on its own.</span>
<a href="#l13.22"></a><span id="l13.22">    */</span>
<a href="#l13.23"></a><span id="l13.23">   attribute boolean workdaysOnly;</span>
<a href="#l13.24"></a><span id="l13.24"> </span>
<a href="#l13.25"></a><span id="l13.25">   /**</span>
<a href="#l13.26"></a><span id="l13.26">    * Whether or not tasks are to be displayed in the calICalendarView</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineat">@@ -94,16 +99,21 @@ interface calICalendarView : nsISupports</span>
<a href="#l13.28"></a><span id="l13.28">   attribute boolean tasksInView;</span>
<a href="#l13.29"></a><span id="l13.29"> </span>
<a href="#l13.30"></a><span id="l13.30">   /**</span>
<a href="#l13.31"></a><span id="l13.31">    * If set, the view will be rotated (i.e time on top, date at left)</span>
<a href="#l13.32"></a><span id="l13.32">    */</span>
<a href="#l13.33"></a><span id="l13.33">   attribute boolean rotated;</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35">   /**</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+   * If true, the view is rotatable</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineplus">+   */</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+  readonly attribute boolean supportsRotation;</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineplus">+  /**</span>
<a href="#l13.41"></a><span id="l13.41">    * Whether or not completed tasks are shown in the calICalendarView</span>
<a href="#l13.42"></a><span id="l13.42">    */</span>
<a href="#l13.43"></a><span id="l13.43">   attribute boolean showCompleted;</span>
<a href="#l13.44"></a><span id="l13.44"> </span>
<a href="#l13.45"></a><span id="l13.45">   /**</span>
<a href="#l13.46"></a><span id="l13.46">    * Ensure that the given date is visible; the view is free</span>
<a href="#l13.47"></a><span id="l13.47">    * to show more dates than the given date (e.g. week view</span>
<a href="#l13.48"></a><span id="l13.48">    * would show the entire week).</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/lightning/content/lightning-scripts.inc</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-scripts.inc</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -39,18 +39,9 @@</span>
<a href="#l14.4"></a><span id="l14.4"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l14.5"></a><span id="l14.5"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l14.6"></a><span id="l14.6"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l14.7"></a><span id="l14.7"> #</span>
<a href="#l14.8"></a><span id="l14.8"> # ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10"> &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://lightning/content/lightning-utils.js&quot;/&gt;</span>
<a href="#l14.11"></a><span id="l14.11"> &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://lightning/content/messenger-overlay-sidebar.js&quot;/&gt;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-&lt;script type=&quot;application/javascript&quot; src=&quot;chrome://lightning/content/messenger-overlay-toolbar.js&quot;/&gt;</span>
<a href="#l14.13"></a><span id="l14.13"> &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://calendar/content/calendar-invitations-manager.js&quot;/&gt;</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-&lt;script type=&quot;application/javascript&quot;&gt;</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-    var calendarmenulabel = &quot;&amp;lightning.calendar.label;&quot;;</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-    var calendarmenuaccesskey = &quot;&amp;lightning.calendar.accesskey;&quot;;</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineminus">-    var messagemenulabel = &quot;&amp;msgMenu.label;&quot;;</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-    var messagemenuaccesskey = &quot;&amp;msgMenu.accesskey;&quot;;</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineminus">-    var tasksmenulabel = &quot;&amp;lightning.tasks.label;&quot;;</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-    var tasksmenuaccesskey = &quot;&amp;lightning.tasks.accesskey;&quot;;</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-&lt;/script&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -125,19 +125,20 @@ function ltnOnLoad(event) {</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5">     // Add an unload function to the window so we don't leak any listeners</span>
<a href="#l15.6"></a><span id="l15.6">     window.addEventListener(&quot;unload&quot;, ltnFinish, false);</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8">     // Set up invitations manager</span>
<a href="#l15.9"></a><span id="l15.9">     scheduleInvitationsUpdate(FIRST_DELAY_STARTUP);</span>
<a href="#l15.10"></a><span id="l15.10">     getCalendarManager().addObserver(gInvitationsCalendarManagerObserver);</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    var filter = document.getElementById(&quot;task-tree-filtergroup&quot;);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+    let filter = document.getElementById(&quot;task-tree-filtergroup&quot;);</span>
<a href="#l15.14"></a><span id="l15.14">     filter.value = filter.value || &quot;all&quot;;</span>
<a href="#l15.15"></a><span id="l15.15">     document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18">     let mailContextPopup = document.getElementById(&quot;mailContext&quot;);</span>
<a href="#l15.19"></a><span id="l15.19">     if (mailContextPopup)</span>
<a href="#l15.20"></a><span id="l15.20">       mailContextPopup.addEventListener(&quot;popupshowing&quot;,</span>
<a href="#l15.21"></a><span id="l15.21">                                         gCalSetupMailContext.popup, false);</span>
<a href="#l15.22"></a><span id="l15.22"> </span>
<a href="#l15.23"></a><span id="l15.23"> }</span>
<a href="#l15.24"></a><span id="l15.24"> </span>
<a href="#l15.25"></a><span id="l15.25" class="difflineat">@@ -259,290 +260,16 @@ function findMailSearchBox() {</span>
<a href="#l15.26"></a><span id="l15.26">         return tb2Box;</span>
<a href="#l15.27"></a><span id="l15.27">     }</span>
<a href="#l15.28"></a><span id="l15.28"> </span>
<a href="#l15.29"></a><span id="l15.29">     // In later versions, it's possible that a user removed the search box from</span>
<a href="#l15.30"></a><span id="l15.30">     // the toolbar.</span>
<a href="#l15.31"></a><span id="l15.31">     return null;</span>
<a href="#l15.32"></a><span id="l15.32"> }</span>
<a href="#l15.33"></a><span id="l15.33"> </span>
<a href="#l15.34"></a><span id="l15.34" class="difflineminus">-var calendarpopuplist = new Array();</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineminus">-var taskpopuplist = new Array();</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineminus">-var mailpopuplist = new Array();</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineminus">-var menulist = new Array();</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineminus">-    var quitMenu = null;</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineminus">-    var prefMenu = null;</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineminus">-#endif</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineminus">-</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineminus">-function ltnInitializeMenus(){</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineminus">-    // The following Mac specific code-lines became necessary due to bug 409845</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineminus">-    prefMenu = document.getElementById(&quot;menu_preferences&quot;);</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">-    prefMenu.setAttribute(&quot;mode&quot;, &quot;system&quot;);</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineminus">-    quitMenu = document.getElementById(&quot;menu_FileQuitItem&quot;);</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineminus">-    quitMenu.setAttribute(&quot;mode&quot;, &quot;system&quot;);</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineminus">-#endif</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineminus">-    copyPopupMenus();</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineminus">-    ltnRemoveMailOnlyItems(calendarpopuplist, &quot;calendar&quot;);</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineminus">-    ltnRemoveMailOnlyItems(taskpopuplist, &quot;task&quot;);</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineminus">-    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;checked&quot;, true);</span>
<a href="#l15.55"></a><span id="l15.55" class="difflineminus">-}</span>
<a href="#l15.56"></a><span id="l15.56" class="difflineminus">-</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineminus">-function getMenuElementById(aElementId, aMenuPopup) {</span>
<a href="#l15.58"></a><span id="l15.58" class="difflineminus">-        var element = null;</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineminus">-        var elements = aMenuPopup.getElementsByAttribute(&quot;id&quot;, aElementId);</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineminus">-        if (elements.length &gt; 0) {</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineminus">-            element = elements[0];</span>
<a href="#l15.62"></a><span id="l15.62" class="difflineminus">-        }</span>
<a href="#l15.63"></a><span id="l15.63" class="difflineminus">-        return element;</span>
<a href="#l15.64"></a><span id="l15.64" class="difflineminus">-    }</span>
<a href="#l15.65"></a><span id="l15.65" class="difflineminus">-</span>
<a href="#l15.66"></a><span id="l15.66" class="difflineminus">-/**  removes all succeedingmenu elements of a container up to the next</span>
<a href="#l15.67"></a><span id="l15.67" class="difflineminus">-*    menuseparator that thus denotes the end of the section. Elements with the</span>
<a href="#l15.68"></a><span id="l15.68" class="difflineminus">-*    attribute mode == 'calendar' are ignored</span>
<a href="#l15.69"></a><span id="l15.69" class="difflineminus">-*/</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineminus">-function removeMenuElementsInSection(aElement, aExcludeMode) {</span>
<a href="#l15.71"></a><span id="l15.71" class="difflineminus">-    var element = aElement;</span>
<a href="#l15.72"></a><span id="l15.72" class="difflineminus">-    if (element) {</span>
<a href="#l15.73"></a><span id="l15.73" class="difflineminus">-        var bleaveloop = false;</span>
<a href="#l15.74"></a><span id="l15.74" class="difflineminus">-        while (!bleaveloop) {</span>
<a href="#l15.75"></a><span id="l15.75" class="difflineminus">-            var ignore = false;</span>
<a href="#l15.76"></a><span id="l15.76" class="difflineminus">-            bleaveloop = element.localName == &quot;menuseparator&quot;;</span>
<a href="#l15.77"></a><span id="l15.77" class="difflineminus">-            if (bleaveloop) {</span>
<a href="#l15.78"></a><span id="l15.78" class="difflineminus">-                // we delete the menuseparator only if it's the last element</span>
<a href="#l15.79"></a><span id="l15.79" class="difflineminus">-                // within its container</span>
<a href="#l15.80"></a><span id="l15.80" class="difflineminus">-                bleaveloop = (element.nextSibling != null);</span>
<a href="#l15.81"></a><span id="l15.81" class="difflineminus">-            }</span>
<a href="#l15.82"></a><span id="l15.82" class="difflineminus">-            if (element.hasAttribute(&quot;mode&quot;)) {</span>
<a href="#l15.83"></a><span id="l15.83" class="difflineminus">-            ignore = element.getAttribute(&quot;mode&quot;) == aExcludeMode ||</span>
<a href="#l15.84"></a><span id="l15.84" class="difflineminus">-                     element.getAttribute(&quot;mode&quot;) == &quot;calendar,task&quot;;</span>
<a href="#l15.85"></a><span id="l15.85" class="difflineminus">-            }</span>
<a href="#l15.86"></a><span id="l15.86" class="difflineminus">-            var nextMenuElement = element.nextSibling;</span>
<a href="#l15.87"></a><span id="l15.87" class="difflineminus">-            if (!ignore) {</span>
<a href="#l15.88"></a><span id="l15.88" class="difflineminus">-                try {</span>
<a href="#l15.89"></a><span id="l15.89" class="difflineminus">-                    element.parentNode.removeChild(element);</span>
<a href="#l15.90"></a><span id="l15.90" class="difflineminus">-                } catch (e) {</span>
<a href="#l15.91"></a><span id="l15.91" class="difflineminus">-                    dump(&quot;Element '&quot; + element.getAttribute(&quot;id&quot;) + &quot;' could not be removed\n&quot;);</span>
<a href="#l15.92"></a><span id="l15.92" class="difflineminus">-                }</span>
<a href="#l15.93"></a><span id="l15.93" class="difflineminus">-            }</span>
<a href="#l15.94"></a><span id="l15.94" class="difflineminus">-            if (!bleaveloop) {</span>
<a href="#l15.95"></a><span id="l15.95" class="difflineminus">-                element = nextMenuElement;</span>
<a href="#l15.96"></a><span id="l15.96" class="difflineminus">-                bleaveloop = (element == null);</span>
<a href="#l15.97"></a><span id="l15.97" class="difflineminus">-            }</span>
<a href="#l15.98"></a><span id="l15.98" class="difflineminus">-        }</span>
<a href="#l15.99"></a><span id="l15.99" class="difflineminus">-    }</span>
<a href="#l15.100"></a><span id="l15.100" class="difflineminus">-}</span>
<a href="#l15.101"></a><span id="l15.101" class="difflineminus">-</span>
<a href="#l15.102"></a><span id="l15.102" class="difflineminus">-function removeElements(aElementList) {</span>
<a href="#l15.103"></a><span id="l15.103" class="difflineminus">-    aElementList.forEach(function(element) {</span>
<a href="#l15.104"></a><span id="l15.104" class="difflineminus">-        try {</span>
<a href="#l15.105"></a><span id="l15.105" class="difflineminus">-            if (element) {</span>
<a href="#l15.106"></a><span id="l15.106" class="difflineminus">-                element.parentNode.removeChild(element);</span>
<a href="#l15.107"></a><span id="l15.107" class="difflineminus">-            }</span>
<a href="#l15.108"></a><span id="l15.108" class="difflineminus">-        } catch (e) {</span>
<a href="#l15.109"></a><span id="l15.109" class="difflineminus">-            dump(&quot;Element '&quot; + element.getAttribute(&quot;id&quot;) + &quot;' could not be removed\n&quot;);</span>
<a href="#l15.110"></a><span id="l15.110" class="difflineminus">-        }</span>
<a href="#l15.111"></a><span id="l15.111" class="difflineminus">-    });</span>
<a href="#l15.112"></a><span id="l15.112" class="difflineminus">-}</span>
<a href="#l15.113"></a><span id="l15.113" class="difflineminus">-</span>
<a href="#l15.114"></a><span id="l15.114" class="difflineminus">-function addToPopupList(aMenuElement, aNewPopupMenu, aPopupList, aExcludedModes, aClone, aRemovePopupShowing) {</span>
<a href="#l15.115"></a><span id="l15.115" class="difflineminus">-    var child = aMenuElement.firstChild;</span>
<a href="#l15.116"></a><span id="l15.116" class="difflineminus">-    if (child) {</span>
<a href="#l15.117"></a><span id="l15.117" class="difflineminus">-        if (child.localName == &quot;menupopup&quot;) {</span>
<a href="#l15.118"></a><span id="l15.118" class="difflineminus">-            if (aNewPopupMenu) {</span>
<a href="#l15.119"></a><span id="l15.119" class="difflineminus">-                var newPopupMenu = aNewPopupMenu;</span>
<a href="#l15.120"></a><span id="l15.120" class="difflineminus">-            } else {</span>
<a href="#l15.121"></a><span id="l15.121" class="difflineminus">-                var newPopupMenu = child;</span>
<a href="#l15.122"></a><span id="l15.122" class="difflineminus">-            }</span>
<a href="#l15.123"></a><span id="l15.123" class="difflineminus">-            if (aClone) {</span>
<a href="#l15.124"></a><span id="l15.124" class="difflineminus">-                newPopupMenu = newPopupMenu.cloneNode(true);</span>
<a href="#l15.125"></a><span id="l15.125" class="difflineminus">-                if (aRemovePopupShowing) {</span>
<a href="#l15.126"></a><span id="l15.126" class="difflineminus">-                    newPopupMenu.removeAttribute(&quot;onpopupshowing&quot;);</span>
<a href="#l15.127"></a><span id="l15.127" class="difflineminus">-                }</span>
<a href="#l15.128"></a><span id="l15.128" class="difflineminus">-            }</span>
<a href="#l15.129"></a><span id="l15.129" class="difflineminus">-            removeMenuElements(newPopupMenu, aExcludedModes);</span>
<a href="#l15.130"></a><span id="l15.130" class="difflineminus">-            aPopupList.push(newPopupMenu);</span>
<a href="#l15.131"></a><span id="l15.131" class="difflineminus">-        }</span>
<a href="#l15.132"></a><span id="l15.132" class="difflineminus">-    }</span>
<a href="#l15.133"></a><span id="l15.133" class="difflineminus">-}</span>
<a href="#l15.134"></a><span id="l15.134" class="difflineminus">-</span>
<a href="#l15.135"></a><span id="l15.135" class="difflineminus">-function copyPopupMenus() {</span>
<a href="#l15.136"></a><span id="l15.136" class="difflineminus">-    // define menuList...</span>
<a href="#l15.137"></a><span id="l15.137" class="difflineminus">-    menulist.push(document.getElementById(&quot;menu_File&quot;));</span>
<a href="#l15.138"></a><span id="l15.138" class="difflineminus">-    menulist.push(document.getElementById(&quot;menu_Edit&quot;));</span>
<a href="#l15.139"></a><span id="l15.139" class="difflineminus">-    var menuView = document.getElementById(&quot;menu_View&quot;);</span>
<a href="#l15.140"></a><span id="l15.140" class="difflineminus">-    menulist.push(menuView);</span>
<a href="#l15.141"></a><span id="l15.141" class="difflineminus">-    menulist.push(menuView.nextSibling); // id-less menu_Go</span>
<a href="#l15.142"></a><span id="l15.142" class="difflineminus">-    menulist.push(document.getElementById(&quot;messageMenu&quot;));</span>
<a href="#l15.143"></a><span id="l15.143" class="difflineminus">-    menulist.push(document.getElementById(&quot;tasksMenu&quot;));</span>
<a href="#l15.144"></a><span id="l15.144" class="difflineminus">-</span>
<a href="#l15.145"></a><span id="l15.145" class="difflineminus">-    // define PopupMenus for calendar mode...</span>
<a href="#l15.146"></a><span id="l15.146" class="difflineminus">-    var excludeList = new Array(&quot;mail&quot;, &quot;task&quot;, &quot;system&quot;);</span>
<a href="#l15.147"></a><span id="l15.147" class="difflineminus">-    addToPopupList(menulist[0], null, calendarpopuplist, excludeList, true, true);</span>
<a href="#l15.148"></a><span id="l15.148" class="difflineminus">-    addToPopupList(menulist[1], null, calendarpopuplist, excludeList, true, false);</span>
<a href="#l15.149"></a><span id="l15.149" class="difflineminus">-    addToPopupList(menulist[2], null, calendarpopuplist, excludeList, true, true);</span>
<a href="#l15.150"></a><span id="l15.150" class="difflineminus">-    addToPopupList(menulist[3], document.getElementById(&quot;calendar-GoPopupMenu&quot;), calendarpopuplist, excludeList, true, false);</span>
<a href="#l15.151"></a><span id="l15.151" class="difflineminus">-    addToPopupList(menulist[4], document.getElementById(&quot;calendarCalendarPopupMenu&quot;), calendarpopuplist, excludeList, true, false);</span>
<a href="#l15.152"></a><span id="l15.152" class="difflineminus">-    addToPopupList(menulist[5], null, calendarpopuplist, excludeList, true, false);</span>
<a href="#l15.153"></a><span id="l15.153" class="difflineminus">-</span>
<a href="#l15.154"></a><span id="l15.154" class="difflineminus">-    // define PopupMenus for task mode...</span>
<a href="#l15.155"></a><span id="l15.155" class="difflineminus">-    var excludeList = new Array(&quot;mail&quot;, &quot;calendar&quot;, &quot;system&quot;);</span>
<a href="#l15.156"></a><span id="l15.156" class="difflineminus">-    addToPopupList(menulist[0], null, taskpopuplist, excludeList, true, true);</span>
<a href="#l15.157"></a><span id="l15.157" class="difflineminus">-    addToPopupList(menulist[1], null, taskpopuplist, excludeList, true, false);</span>
<a href="#l15.158"></a><span id="l15.158" class="difflineminus">-    addToPopupList(menulist[2], null, taskpopuplist, excludeList, true, true);</span>
<a href="#l15.159"></a><span id="l15.159" class="difflineminus">-    addToPopupList(menulist[3], document.getElementById(&quot;calendar-GoPopupMenu&quot;), taskpopuplist, excludeList, true, false);</span>
<a href="#l15.160"></a><span id="l15.160" class="difflineminus">-    var tasksViewMenuPopup = clonePopupMenu(&quot;taskitem-context-menu&quot;, &quot;taskitem-menu&quot;, &quot;menu-&quot;);</span>
<a href="#l15.161"></a><span id="l15.161" class="difflineminus">-    tasksViewMenuPopup.removeChild(getMenuElementById(&quot;menu-&quot; + &quot;task-context-menu-modify&quot;, tasksViewMenuPopup));</span>
<a href="#l15.162"></a><span id="l15.162" class="difflineminus">-    tasksViewMenuPopup.removeChild(getMenuElementById(&quot;menu-&quot; + &quot;task-context-menu-delete&quot;, tasksViewMenuPopup));</span>
<a href="#l15.163"></a><span id="l15.163" class="difflineminus">-    addToPopupList(menulist[4], tasksViewMenuPopup, taskpopuplist, excludeList, false, false);</span>
<a href="#l15.164"></a><span id="l15.164" class="difflineminus">-    addToPopupList(menulist[5], null, taskpopuplist, excludeList, true, true);</span>
<a href="#l15.165"></a><span id="l15.165" class="difflineminus">-</span>
<a href="#l15.166"></a><span id="l15.166" class="difflineminus">-    // define PopupMenus for mail mode...</span>
<a href="#l15.167"></a><span id="l15.167" class="difflineminus">-    var excludeList = new Array(&quot;calendar&quot;, &quot;task&quot;, &quot;calendar,task&quot;);</span>
<a href="#l15.168"></a><span id="l15.168" class="difflineminus">-    addToPopupList(menulist[0], null, mailpopuplist, excludeList, false, false);</span>
<a href="#l15.169"></a><span id="l15.169" class="difflineminus">-    addToPopupList(menulist[1], null, mailpopuplist, excludeList, false, false);</span>
<a href="#l15.170"></a><span id="l15.170" class="difflineminus">-    addToPopupList(menulist[2], null, mailpopuplist, excludeList, false, false);</span>
<a href="#l15.171"></a><span id="l15.171" class="difflineminus">-    // copy calendar-GoPopupMenu into Thunderbird's GoPopupMenu to switch modes</span>
<a href="#l15.172"></a><span id="l15.172" class="difflineminus">-    var tbGoPopupMenu = menulist[3].lastChild;</span>
<a href="#l15.173"></a><span id="l15.173" class="difflineminus">-    var calGoPopupMenu = document.getElementById(&quot;calendar-GoPopupMenu&quot;).cloneNode(true);</span>
<a href="#l15.174"></a><span id="l15.174" class="difflineminus">-    var calGoItem;</span>
<a href="#l15.175"></a><span id="l15.175" class="difflineminus">-    while ((calGoItem = calGoPopupMenu.firstChild)) {</span>
<a href="#l15.176"></a><span id="l15.176" class="difflineminus">-        tbGoPopupMenu.appendChild(calGoPopupMenu.removeChild(calGoItem));</span>
<a href="#l15.177"></a><span id="l15.177" class="difflineminus">-    }</span>
<a href="#l15.178"></a><span id="l15.178" class="difflineminus">-    addToPopupList(menulist[3], null, mailpopuplist, excludeList, false, false);</span>
<a href="#l15.179"></a><span id="l15.179" class="difflineminus">-    addToPopupList(menulist[4], null, mailpopuplist, excludeList, false, false);</span>
<a href="#l15.180"></a><span id="l15.180" class="difflineminus">-    addToPopupList(menulist[5], null, mailpopuplist, excludeList, false, false);</span>
<a href="#l15.181"></a><span id="l15.181" class="difflineminus">-}</span>
<a href="#l15.182"></a><span id="l15.182" class="difflineminus">-</span>
<a href="#l15.183"></a><span id="l15.183" class="difflineminus">-function removeNeedlessSeparators(aMenuPopupList) {</span>
<a href="#l15.184"></a><span id="l15.184" class="difflineminus">-    aMenuPopupList.forEach(function(aMenuPopup) {</span>
<a href="#l15.185"></a><span id="l15.185" class="difflineminus">-        var child = aMenuPopup.firstChild;</span>
<a href="#l15.186"></a><span id="l15.186" class="difflineminus">-        if (child) {</span>
<a href="#l15.187"></a><span id="l15.187" class="difflineminus">-            if (child.localName == &quot;menuseparator&quot;) {</span>
<a href="#l15.188"></a><span id="l15.188" class="difflineminus">-                try {</span>
<a href="#l15.189"></a><span id="l15.189" class="difflineminus">-                    aMenuPopup.removeChild(child)</span>
<a href="#l15.190"></a><span id="l15.190" class="difflineminus">-                } catch (e) {</span>
<a href="#l15.191"></a><span id="l15.191" class="difflineminus">-                    dump(&quot;Element '&quot; + child.getAttribute(&quot;id&quot;) + &quot;' could not be removed\n&quot;);</span>
<a href="#l15.192"></a><span id="l15.192" class="difflineminus">-                }</span>
<a href="#l15.193"></a><span id="l15.193" class="difflineminus">-            }</span>
<a href="#l15.194"></a><span id="l15.194" class="difflineminus">-        }</span>
<a href="#l15.195"></a><span id="l15.195" class="difflineminus">-        child = aMenuPopup.lastChild;</span>
<a href="#l15.196"></a><span id="l15.196" class="difflineminus">-        if (child) {</span>
<a href="#l15.197"></a><span id="l15.197" class="difflineminus">-            if (child.localName == &quot;menuseparator&quot;) {</span>
<a href="#l15.198"></a><span id="l15.198" class="difflineminus">-                try {</span>
<a href="#l15.199"></a><span id="l15.199" class="difflineminus">-                    aMenuPopup.removeChild(child)</span>
<a href="#l15.200"></a><span id="l15.200" class="difflineminus">-                } catch (e) {</span>
<a href="#l15.201"></a><span id="l15.201" class="difflineminus">-                    dump(&quot;Element '&quot; + child.getAttribute(&quot;id&quot;) + &quot;' could not be removed\n&quot;);</span>
<a href="#l15.202"></a><span id="l15.202" class="difflineminus">-                }</span>
<a href="#l15.203"></a><span id="l15.203" class="difflineminus">-            }</span>
<a href="#l15.204"></a><span id="l15.204" class="difflineminus">-        }</span>
<a href="#l15.205"></a><span id="l15.205" class="difflineminus">-    });</span>
<a href="#l15.206"></a><span id="l15.206" class="difflineminus">-}</span>
<a href="#l15.207"></a><span id="l15.207" class="difflineminus">-</span>
<a href="#l15.208"></a><span id="l15.208" class="difflineminus">-function ltnRemoveMailOnlyItems(aMenuPopupList, aExcludeMode) {</span>
<a href="#l15.209"></a><span id="l15.209" class="difflineminus">-    removeElements(</span>
<a href="#l15.210"></a><span id="l15.210" class="difflineminus">-// &quot;File&quot; - menu</span>
<a href="#l15.211"></a><span id="l15.211" class="difflineminus">-    [getMenuElementById(&quot;openMessageFileMenuitem&quot;, aMenuPopupList[0]),</span>
<a href="#l15.212"></a><span id="l15.212" class="difflineminus">-     getMenuElementById(&quot;newAccountMenuItem&quot;, aMenuPopupList[0]),</span>
<a href="#l15.213"></a><span id="l15.213" class="difflineminus">-     getMenuElementById(&quot;fileAttachmentMenu&quot;, aMenuPopupList[0]),</span>
<a href="#l15.214"></a><span id="l15.214" class="difflineminus">-     getAdjacentSibling(getMenuElementById(&quot;menu_saveAs&quot;, aMenuPopupList[0]), 2),</span>
<a href="#l15.215"></a><span id="l15.215" class="difflineminus">-</span>
<a href="#l15.216"></a><span id="l15.216" class="difflineminus">-// &quot;Edit&quot; - menu</span>
<a href="#l15.217"></a><span id="l15.217" class="difflineminus">-     getMenuElementById(&quot;menu_find&quot;, aMenuPopupList[1]),</span>
<a href="#l15.218"></a><span id="l15.218" class="difflineminus">-     getMenuElementById(&quot;menu_favoriteFolder&quot;, aMenuPopupList[1]),</span>
<a href="#l15.219"></a><span id="l15.219" class="difflineminus">-     getMenuElementById(&quot;menu_properties&quot;, aMenuPopupList[1]),</span>
<a href="#l15.220"></a><span id="l15.220" class="difflineminus">-     getMenuElementById(&quot;menu_accountmgr&quot;, aMenuPopupList[1]),</span>
<a href="#l15.221"></a><span id="l15.221" class="difflineminus">-</span>
<a href="#l15.222"></a><span id="l15.222" class="difflineminus">-// &quot;View&quot;-menu</span>
<a href="#l15.223"></a><span id="l15.223" class="difflineminus">-     getMenuElementById(&quot;menu_showMessengerToolbar&quot;, aMenuPopupList[2]),</span>
<a href="#l15.224"></a><span id="l15.224" class="difflineminus">-</span>
<a href="#l15.225"></a><span id="l15.225" class="difflineminus">-// &quot;Tools&quot;-menu</span>
<a href="#l15.226"></a><span id="l15.226" class="difflineminus">-     getMenuElementById(&quot;tasksMenuMail&quot;, aMenuPopupList[5]),</span>
<a href="#l15.227"></a><span id="l15.227" class="difflineminus">-     getMenuElementById(&quot;menu_import&quot;, aMenuPopupList[5])]);</span>
<a href="#l15.228"></a><span id="l15.228" class="difflineminus">-</span>
<a href="#l15.229"></a><span id="l15.229" class="difflineminus">-     removeNeedlessSeparators(aMenuPopupList);</span>
<a href="#l15.230"></a><span id="l15.230" class="difflineminus">-</span>
<a href="#l15.231"></a><span id="l15.231" class="difflineminus">-// &quot;File&quot; - menu</span>
<a href="#l15.232"></a><span id="l15.232" class="difflineminus">-    [getMenuElementById(&quot;menu_newFolder&quot;, aMenuPopupList[0]),</span>
<a href="#l15.233"></a><span id="l15.233" class="difflineminus">-     getMenuElementById(&quot;menu_saveAs&quot;, aMenuPopupList[0]),</span>
<a href="#l15.234"></a><span id="l15.234" class="difflineminus">-     getMenuElementById(&quot;menu_getnextnmsg&quot;, aMenuPopupList[0]),</span>
<a href="#l15.235"></a><span id="l15.235" class="difflineminus">-     getMenuElementById(&quot;menu_renameFolder&quot;, aMenuPopupList[0]),</span>
<a href="#l15.236"></a><span id="l15.236" class="difflineminus">-//     getMenuElementById(&quot;offlineMenuItem&quot;, aMenuPopupList[0]),</span>
<a href="#l15.237"></a><span id="l15.237" class="difflineminus">-</span>
<a href="#l15.238"></a><span id="l15.238" class="difflineminus">-// &quot;Edit&quot; - menu</span>
<a href="#l15.239"></a><span id="l15.239" class="difflineminus">-     getMenuElementById(&quot;menu_delete&quot;, aMenuPopupList[1]),</span>
<a href="#l15.240"></a><span id="l15.240" class="difflineminus">-     getMenuElementById(&quot;menu_select&quot;, aMenuPopupList[1]),</span>
<a href="#l15.241"></a><span id="l15.241" class="difflineminus">-</span>
<a href="#l15.242"></a><span id="l15.242" class="difflineminus">-// &quot;View&quot;-menu</span>
<a href="#l15.243"></a><span id="l15.243" class="difflineminus">-     getMenuElementById(&quot;menu_MessagePaneLayout&quot;, aMenuPopupList[2]),</span>
<a href="#l15.244"></a><span id="l15.244" class="difflineminus">-     getMenuElementById(&quot;viewSortMenu&quot;, aMenuPopupList[2]),</span>
<a href="#l15.245"></a><span id="l15.245" class="difflineminus">-     getMenuElementById(&quot;viewheadersmenu&quot;, aMenuPopupList[2]),</span>
<a href="#l15.246"></a><span id="l15.246" class="difflineminus">-     getMenuElementById(&quot;viewTextSizeMenu&quot;, aMenuPopupList[2]),</span>
<a href="#l15.247"></a><span id="l15.247" class="difflineminus">-     getMenuElementById(&quot;pageSourceMenuItem&quot;, aMenuPopupList[2]),</span>
<a href="#l15.248"></a><span id="l15.248" class="difflineminus">-</span>
<a href="#l15.249"></a><span id="l15.249" class="difflineminus">-// &quot;Tools&quot;-menu</span>
<a href="#l15.250"></a><span id="l15.250" class="difflineminus">-     getMenuElementById(&quot;filtersCmd&quot;, aMenuPopupList[5]),</span>
<a href="#l15.251"></a><span id="l15.251" class="difflineminus">-     getMenuElementById(&quot;runJunkControls&quot;, aMenuPopupList[5])].forEach(function(element){</span>
<a href="#l15.252"></a><span id="l15.252" class="difflineminus">-        removeMenuElementsInSection(element, aExcludeMode);</span>
<a href="#l15.253"></a><span id="l15.253" class="difflineminus">-    });</span>
<a href="#l15.254"></a><span id="l15.254" class="difflineminus">-}</span>
<a href="#l15.255"></a><span id="l15.255" class="difflineminus">-</span>
<a href="#l15.256"></a><span id="l15.256" class="difflineminus">-function swapPopupMenus() {</span>
<a href="#l15.257"></a><span id="l15.257" class="difflineminus">-    var showStatusbar = document.getElementById(&quot;menu_showTaskbar&quot;).getAttribute(&quot;checked&quot;);</span>
<a href="#l15.258"></a><span id="l15.258" class="difflineminus">-    var newmenupopuplist = null;</span>
<a href="#l15.259"></a><span id="l15.259" class="difflineminus">-    if (gCurrentMode == &quot;mail&quot;) {</span>
<a href="#l15.260"></a><span id="l15.260" class="difflineminus">-        newmenupopuplist = mailpopuplist;</span>
<a href="#l15.261"></a><span id="l15.261" class="difflineminus">-    } else if (gCurrentMode == &quot;calendar&quot;) {</span>
<a href="#l15.262"></a><span id="l15.262" class="difflineminus">-        newmenupopuplist = calendarpopuplist;</span>
<a href="#l15.263"></a><span id="l15.263" class="difflineminus">-    } else if (gCurrentMode == &quot;task&quot;) {</span>
<a href="#l15.264"></a><span id="l15.264" class="difflineminus">-        newmenupopuplist = taskpopuplist;</span>
<a href="#l15.265"></a><span id="l15.265" class="difflineminus">-    }</span>
<a href="#l15.266"></a><span id="l15.266" class="difflineminus">-    for (var i = 0; i &lt; menulist.length; i++) {</span>
<a href="#l15.267"></a><span id="l15.267" class="difflineminus">-        var menu = menulist[i];</span>
<a href="#l15.268"></a><span id="l15.268" class="difflineminus">-        var oldmenupopup = menu.firstChild;</span>
<a href="#l15.269"></a><span id="l15.269" class="difflineminus">-        if (oldmenupopup) {</span>
<a href="#l15.270"></a><span id="l15.270" class="difflineminus">-            menu.replaceChild(newmenupopuplist[i], oldmenupopup);</span>
<a href="#l15.271"></a><span id="l15.271" class="difflineminus">-        }</span>
<a href="#l15.272"></a><span id="l15.272" class="difflineminus">-    }</span>
<a href="#l15.273"></a><span id="l15.273" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l15.274"></a><span id="l15.274" class="difflineminus">-    document.getElementById(&quot;menu_File&quot;).firstChild.appendChild(quitMenu);</span>
<a href="#l15.275"></a><span id="l15.275" class="difflineminus">-    document.getElementById(&quot;tasksMenu&quot;).firstChild.appendChild(prefMenu);</span>
<a href="#l15.276"></a><span id="l15.276" class="difflineminus">-#endif</span>
<a href="#l15.277"></a><span id="l15.277" class="difflineminus">-    document.getElementById(&quot;menu_showTaskbar&quot;).setAttribute(&quot;checked&quot;, showStatusbar);</span>
<a href="#l15.278"></a><span id="l15.278" class="difflineminus">-    var messageMenu = document.getElementById(&quot;messageMenu&quot;);</span>
<a href="#l15.279"></a><span id="l15.279" class="difflineminus">-    if (gCurrentMode == &quot;mail&quot;) {</span>
<a href="#l15.280"></a><span id="l15.280" class="difflineminus">-        messageMenu.setAttribute(&quot;label&quot;, messagemenulabel);</span>
<a href="#l15.281"></a><span id="l15.281" class="difflineminus">-        messageMenu.setAttribute(&quot;accesskey&quot;, messagemenuaccesskey);</span>
<a href="#l15.282"></a><span id="l15.282" class="difflineminus">-    } else if (gCurrentMode == &quot;calendar&quot;){</span>
<a href="#l15.283"></a><span id="l15.283" class="difflineminus">-        messageMenu.setAttribute(&quot;label&quot;, calendarmenulabel);</span>
<a href="#l15.284"></a><span id="l15.284" class="difflineminus">-        messageMenu.setAttribute(&quot;accesskey&quot;, calendarmenuaccesskey);</span>
<a href="#l15.285"></a><span id="l15.285" class="difflineminus">-    } else if (gCurrentMode == &quot;task&quot;){</span>
<a href="#l15.286"></a><span id="l15.286" class="difflineminus">-        messageMenu.setAttribute(&quot;label&quot;, tasksmenulabel);</span>
<a href="#l15.287"></a><span id="l15.287" class="difflineminus">-        messageMenu.setAttribute(&quot;accesskey&quot;, tasksmenuaccesskey);</span>
<a href="#l15.288"></a><span id="l15.288" class="difflineminus">-    }</span>
<a href="#l15.289"></a><span id="l15.289" class="difflineminus">-}</span>
<a href="#l15.290"></a><span id="l15.290" class="difflineminus">-</span>
<a href="#l15.291"></a><span id="l15.291" class="difflineminus">-function removeMenuElements(aRoot, aModeValue) {</span>
<a href="#l15.292"></a><span id="l15.292" class="difflineminus">-    for (var n = 0; n &lt; aModeValue.length; n++) {</span>
<a href="#l15.293"></a><span id="l15.293" class="difflineminus">-        var modeElements = aRoot.getElementsByAttribute(&quot;mode&quot;, aModeValue[n]);</span>
<a href="#l15.294"></a><span id="l15.294" class="difflineminus">-        if (modeElements.length &gt; 0) {</span>
<a href="#l15.295"></a><span id="l15.295" class="difflineminus">-            for (var i = modeElements.length-1; i &gt;=0; i--) {</span>
<a href="#l15.296"></a><span id="l15.296" class="difflineminus">-                var element = modeElements[i];</span>
<a href="#l15.297"></a><span id="l15.297" class="difflineminus">-                if (element) {</span>
<a href="#l15.298"></a><span id="l15.298" class="difflineminus">-                    var localName = element.localName;</span>
<a href="#l15.299"></a><span id="l15.299" class="difflineminus">-                    if (localName ==&quot;menuitem&quot; || localName == &quot;menuseparator&quot; || localName == &quot;menu&quot;){</span>
<a href="#l15.300"></a><span id="l15.300" class="difflineminus">-                        element.parentNode.removeChild(element);</span>
<a href="#l15.301"></a><span id="l15.301" class="difflineminus">-                    }</span>
<a href="#l15.302"></a><span id="l15.302" class="difflineminus">-                }</span>
<a href="#l15.303"></a><span id="l15.303" class="difflineminus">-            }</span>
<a href="#l15.304"></a><span id="l15.304" class="difflineminus">-        }</span>
<a href="#l15.305"></a><span id="l15.305" class="difflineminus">-    }</span>
<a href="#l15.306"></a><span id="l15.306" class="difflineminus">-}</span>
<a href="#l15.307"></a><span id="l15.307" class="difflineminus">-</span>
<a href="#l15.308"></a><span id="l15.308"> // == invitations link</span>
<a href="#l15.309"></a><span id="l15.309"> const FIRST_DELAY_STARTUP = 100;</span>
<a href="#l15.310"></a><span id="l15.310"> const FIRST_DELAY_RESCHEDULE = 100;</span>
<a href="#l15.311"></a><span id="l15.311"> const FIRST_DELAY_REGISTER = 10000;</span>
<a href="#l15.312"></a><span id="l15.312"> const FIRST_DELAY_UNREGISTER = 0;</span>
<a href="#l15.313"></a><span id="l15.313"> </span>
<a href="#l15.314"></a><span id="l15.314"> var gInvitationsOperationListener = {</span>
<a href="#l15.315"></a><span id="l15.315">     mCount: 0,</span>
<a href="#l15.316"></a><span id="l15.316" class="difflineat">@@ -606,9 +333,117 @@ function openInvitationsDialog() {</span>
<a href="#l15.317"></a><span id="l15.317">     gInvitationsCalendarManagerObserver.mCount = 0;</span>
<a href="#l15.318"></a><span id="l15.318">     getInvitationsManager().openInvitationsDialog(</span>
<a href="#l15.319"></a><span id="l15.319">         gInvitationsOperationListener,</span>
<a href="#l15.320"></a><span id="l15.320">         function oiD_callback() {</span>
<a href="#l15.321"></a><span id="l15.321">             scheduleInvitationsUpdate(FIRST_DELAY_RESCHEDULE);</span>
<a href="#l15.322"></a><span id="l15.322">         });</span>
<a href="#l15.323"></a><span id="l15.323"> }</span>
<a href="#l15.324"></a><span id="l15.324"> </span>
<a href="#l15.325"></a><span id="l15.325" class="difflineplus">+/**</span>
<a href="#l15.326"></a><span id="l15.326" class="difflineplus">+ * the current mode is set to a string defining the current</span>
<a href="#l15.327"></a><span id="l15.327" class="difflineplus">+ * mode we're in. allowed values are:</span>
<a href="#l15.328"></a><span id="l15.328" class="difflineplus">+ *  - 'mode'</span>
<a href="#l15.329"></a><span id="l15.329" class="difflineplus">+ *  - 'mail'</span>
<a href="#l15.330"></a><span id="l15.330" class="difflineplus">+ *  - 'calendar'</span>
<a href="#l15.331"></a><span id="l15.331" class="difflineplus">+ *  - 'task'</span>
<a href="#l15.332"></a><span id="l15.332" class="difflineplus">+ */</span>
<a href="#l15.333"></a><span id="l15.333" class="difflineplus">+var gCurrentMode = 'mail';</span>
<a href="#l15.334"></a><span id="l15.334" class="difflineplus">+</span>
<a href="#l15.335"></a><span id="l15.335" class="difflineplus">+/**</span>
<a href="#l15.336"></a><span id="l15.336" class="difflineplus">+ * ltnSwitch2Mail() switches to the mail mode</span>
<a href="#l15.337"></a><span id="l15.337" class="difflineplus">+ */</span>
<a href="#l15.338"></a><span id="l15.338" class="difflineplus">+</span>
<a href="#l15.339"></a><span id="l15.339" class="difflineplus">+function ltnSwitch2Mail() {</span>
<a href="#l15.340"></a><span id="l15.340" class="difflineplus">+  if (gCurrentMode != 'mail') {</span>
<a href="#l15.341"></a><span id="l15.341" class="difflineplus">+    var switch2mail = document.getElementById(&quot;switch2mail&quot;);</span>
<a href="#l15.342"></a><span id="l15.342" class="difflineplus">+    var switch2calendar = document.getElementById(&quot;switch2calendar&quot;);</span>
<a href="#l15.343"></a><span id="l15.343" class="difflineplus">+    var switch2task = document.getElementById(&quot;switch2task&quot;);</span>
<a href="#l15.344"></a><span id="l15.344" class="difflineplus">+    switch2mail.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l15.345"></a><span id="l15.345" class="difflineplus">+    switch2calendar.removeAttribute(&quot;checked&quot;);</span>
<a href="#l15.346"></a><span id="l15.346" class="difflineplus">+    switch2task.removeAttribute(&quot;checked&quot;);</span>
<a href="#l15.347"></a><span id="l15.347" class="difflineplus">+</span>
<a href="#l15.348"></a><span id="l15.348" class="difflineplus">+    gCurrentMode = 'mail';</span>
<a href="#l15.349"></a><span id="l15.349" class="difflineplus">+    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);</span>
<a href="#l15.350"></a><span id="l15.350" class="difflineplus">+</span>
<a href="#l15.351"></a><span id="l15.351" class="difflineplus">+    document.commandDispatcher.updateCommands('calendar_commands');</span>
<a href="#l15.352"></a><span id="l15.352" class="difflineplus">+    window.setCursor(&quot;auto&quot;);</span>
<a href="#l15.353"></a><span id="l15.353" class="difflineplus">+  }</span>
<a href="#l15.354"></a><span id="l15.354" class="difflineplus">+}</span>
<a href="#l15.355"></a><span id="l15.355" class="difflineplus">+</span>
<a href="#l15.356"></a><span id="l15.356" class="difflineplus">+/**</span>
<a href="#l15.357"></a><span id="l15.357" class="difflineplus">+ * ltnSwitch2Calendar() switches to the calendar mode</span>
<a href="#l15.358"></a><span id="l15.358" class="difflineplus">+ */</span>
<a href="#l15.359"></a><span id="l15.359" class="difflineplus">+</span>
<a href="#l15.360"></a><span id="l15.360" class="difflineplus">+function ltnSwitch2Calendar() {</span>
<a href="#l15.361"></a><span id="l15.361" class="difflineplus">+  if (gCurrentMode != 'calendar') {</span>
<a href="#l15.362"></a><span id="l15.362" class="difflineplus">+    var switch2mail = document.getElementById(&quot;switch2mail&quot;);</span>
<a href="#l15.363"></a><span id="l15.363" class="difflineplus">+    var switch2calendar = document.getElementById(&quot;switch2calendar&quot;);</span>
<a href="#l15.364"></a><span id="l15.364" class="difflineplus">+    var switch2task = document.getElementById(&quot;switch2task&quot;);</span>
<a href="#l15.365"></a><span id="l15.365" class="difflineplus">+    switch2mail.removeAttribute(&quot;checked&quot;);</span>
<a href="#l15.366"></a><span id="l15.366" class="difflineplus">+    switch2calendar.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l15.367"></a><span id="l15.367" class="difflineplus">+    switch2task.removeAttribute(&quot;checked&quot;);</span>
<a href="#l15.368"></a><span id="l15.368" class="difflineplus">+</span>
<a href="#l15.369"></a><span id="l15.369" class="difflineplus">+    gCurrentMode = 'calendar';    </span>
<a href="#l15.370"></a><span id="l15.370" class="difflineplus">+    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);    </span>
<a href="#l15.371"></a><span id="l15.371" class="difflineplus">+</span>
<a href="#l15.372"></a><span id="l15.372" class="difflineplus">+    // display the calendar panel on the display deck</span>
<a href="#l15.373"></a><span id="l15.373" class="difflineplus">+    var viewBox = document.getElementById(&quot;calendar-view-box&quot;);</span>
<a href="#l15.374"></a><span id="l15.374" class="difflineplus">+    uncollapseElement(viewBox);</span>
<a href="#l15.375"></a><span id="l15.375" class="difflineplus">+    var deck = document.getElementById(&quot;calendarDisplayDeck&quot;);</span>
<a href="#l15.376"></a><span id="l15.376" class="difflineplus">+    deck.selectedPanel = viewBox;</span>
<a href="#l15.377"></a><span id="l15.377" class="difflineplus">+</span>
<a href="#l15.378"></a><span id="l15.378" class="difflineplus">+    // show the last displayed type of calendar view</span>
<a href="#l15.379"></a><span id="l15.379" class="difflineplus">+    showCalendarView(gLastShownCalendarView);</span>
<a href="#l15.380"></a><span id="l15.380" class="difflineplus">+</span>
<a href="#l15.381"></a><span id="l15.381" class="difflineplus">+    document.commandDispatcher.updateCommands('calendar_commands');</span>
<a href="#l15.382"></a><span id="l15.382" class="difflineplus">+    window.setCursor(&quot;auto&quot;);</span>
<a href="#l15.383"></a><span id="l15.383" class="difflineplus">+  }</span>
<a href="#l15.384"></a><span id="l15.384" class="difflineplus">+}</span>
<a href="#l15.385"></a><span id="l15.385" class="difflineplus">+</span>
<a href="#l15.386"></a><span id="l15.386" class="difflineplus">+/**</span>
<a href="#l15.387"></a><span id="l15.387" class="difflineplus">+ * ltnSwitch2Task() switches to the task mode</span>
<a href="#l15.388"></a><span id="l15.388" class="difflineplus">+ */</span>
<a href="#l15.389"></a><span id="l15.389" class="difflineplus">+</span>
<a href="#l15.390"></a><span id="l15.390" class="difflineplus">+function ltnSwitch2Task() {</span>
<a href="#l15.391"></a><span id="l15.391" class="difflineplus">+  if (gCurrentMode != 'task') {</span>
<a href="#l15.392"></a><span id="l15.392" class="difflineplus">+    var switch2mail = document.getElementById(&quot;switch2mail&quot;);</span>
<a href="#l15.393"></a><span id="l15.393" class="difflineplus">+    var switch2calendar = document.getElementById(&quot;switch2calendar&quot;);</span>
<a href="#l15.394"></a><span id="l15.394" class="difflineplus">+    var switch2task = document.getElementById(&quot;switch2task&quot;);</span>
<a href="#l15.395"></a><span id="l15.395" class="difflineplus">+    switch2mail.removeAttribute(&quot;checked&quot;);</span>
<a href="#l15.396"></a><span id="l15.396" class="difflineplus">+    switch2calendar.removeAttribute(&quot;checked&quot;);</span>
<a href="#l15.397"></a><span id="l15.397" class="difflineplus">+    switch2task.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l15.398"></a><span id="l15.398" class="difflineplus">+</span>
<a href="#l15.399"></a><span id="l15.399" class="difflineplus">+    gCurrentMode = 'task';</span>
<a href="#l15.400"></a><span id="l15.400" class="difflineplus">+    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);    </span>
<a href="#l15.401"></a><span id="l15.401" class="difflineplus">+</span>
<a href="#l15.402"></a><span id="l15.402" class="difflineplus">+    // display the task panel on the display deck</span>
<a href="#l15.403"></a><span id="l15.403" class="difflineplus">+    var taskBox = document.getElementById(&quot;calendar-task-box&quot;);</span>
<a href="#l15.404"></a><span id="l15.404" class="difflineplus">+    uncollapseElement(taskBox);</span>
<a href="#l15.405"></a><span id="l15.405" class="difflineplus">+    var deck = document.getElementById(&quot;calendarDisplayDeck&quot;);</span>
<a href="#l15.406"></a><span id="l15.406" class="difflineplus">+    deck.selectedPanel = taskBox;</span>
<a href="#l15.407"></a><span id="l15.407" class="difflineplus">+</span>
<a href="#l15.408"></a><span id="l15.408" class="difflineplus">+    document.commandDispatcher.updateCommands('calendar_commands');</span>
<a href="#l15.409"></a><span id="l15.409" class="difflineplus">+    window.setCursor(&quot;auto&quot;);</span>
<a href="#l15.410"></a><span id="l15.410" class="difflineplus">+  }</span>
<a href="#l15.411"></a><span id="l15.411" class="difflineplus">+}</span>
<a href="#l15.412"></a><span id="l15.412" class="difflineplus">+</span>
<a href="#l15.413"></a><span id="l15.413" class="difflineplus">+const gCalSetupMailContext = {</span>
<a href="#l15.414"></a><span id="l15.414" class="difflineplus">+    popup: function gCalSetupMailContext_popup() {</span>
<a href="#l15.415"></a><span id="l15.415" class="difflineplus">+        var hasSelection = (GetFirstSelectedMessage() != null);</span>
<a href="#l15.416"></a><span id="l15.416" class="difflineplus">+        // Disable the convert menu altogether.</span>
<a href="#l15.417"></a><span id="l15.417" class="difflineplus">+        setElementValue(&quot;mailContext-calendar-convert-menu&quot;,</span>
<a href="#l15.418"></a><span id="l15.418" class="difflineplus">+                        !hasSelection &amp;&amp; &quot;true&quot;, &quot;hidden&quot;);</span>
<a href="#l15.419"></a><span id="l15.419" class="difflineplus">+    }</span>
<a href="#l15.420"></a><span id="l15.420" class="difflineplus">+};</span>
<a href="#l15.421"></a><span id="l15.421" class="difflineplus">+</span>
<a href="#l15.422"></a><span id="l15.422" class="difflineplus">+// Overwrite the InitMessageMenu function, since we never know in which order</span>
<a href="#l15.423"></a><span id="l15.423" class="difflineplus">+// the popupshowing event will be processed. This function takes care of</span>
<a href="#l15.424"></a><span id="l15.424" class="difflineplus">+// disabling the message menu when in calendar or task mode.</span>
<a href="#l15.425"></a><span id="l15.425" class="difflineplus">+function calInitMessageMenu() {</span>
<a href="#l15.426"></a><span id="l15.426" class="difflineplus">+    calInitMessageMenu.origFunc();</span>
<a href="#l15.427"></a><span id="l15.427" class="difflineplus">+</span>
<a href="#l15.428"></a><span id="l15.428" class="difflineplus">+    document.getElementById(&quot;markMenu&quot;).disabled = (gCurrentMode != 'mail');</span>
<a href="#l15.429"></a><span id="l15.429" class="difflineplus">+}</span>
<a href="#l15.430"></a><span id="l15.430" class="difflineplus">+calInitMessageMenu.origFunc = InitMessageMenu;</span>
<a href="#l15.431"></a><span id="l15.431" class="difflineplus">+InitMessageMenu = calInitMessageMenu;</span>
<a href="#l15.432"></a><span id="l15.432" class="difflineplus">+</span>
<a href="#l15.433"></a><span id="l15.433"> document.addEventListener(&quot;load&quot;, ltnOnLoad, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -71,384 +71,425 @@</span>
<a href="#l16.4"></a><span id="l16.4"> &lt;overlay id=&quot;ltnSidebarOverlay&quot;</span>
<a href="#l16.5"></a><span id="l16.5">          xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l16.6"></a><span id="l16.6"> &lt;!-- All JS files that messenger-overlay-sidebar.xul wishes to include *must* go into the</span>
<a href="#l16.7"></a><span id="l16.7">      calendar-scripts.inc file (all scripts shared with Sunbird) or lightning-scripts.inc</span>
<a href="#l16.8"></a><span id="l16.8">      file (scripts relevant for Lightning-only). --&gt;</span>
<a href="#l16.9"></a><span id="l16.9"> #include ../../base/content/calendar-scripts.inc</span>
<a href="#l16.10"></a><span id="l16.10"> #include lightning-scripts.inc</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-&lt;menupopup id=&quot;menu_FilePopup&quot;&gt;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-  &lt;menu id=&quot;menu_Open&quot;</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-        mode=&quot;calendar&quot;</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-        label=&quot;&amp;lightning.menupopup.open.label;&quot;</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-        accesskey=&quot;&amp;lightning.menupopup.open.accesskey;&quot;</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-        insertafter=&quot;menu_New&quot;&gt;</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-    &lt;menupopup id=&quot;menu_OpenPopup&quot;&gt;</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-      &lt;menuitem id=&quot;ltnOpenMessageFileMenuitem&quot;</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-                mode=&quot;calendar&quot;</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-                label=&quot;&amp;lightning.menupopup.open.message.label;&quot;</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-                accesskey=&quot;&amp;lightning.menupopup.open.message.accesskey;&quot;</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-                oncommand=&quot;MsgOpenFromFile();&quot;/&gt;</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-      &lt;menuitem id=&quot;ltnOpenCalendarFileMenuitem&quot;</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-                mode=&quot;calendar&quot;</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-                label=&quot;&amp;lightning.menupopup.open.calendar.label;&quot;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-                accesskey=&quot;&amp;lightning.menupopup.open.calendar.accesskey;&quot;</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-                oncommand=&quot;openLocalCalendar();&quot;/&gt;</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-    &lt;/menupopup&gt;</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-  &lt;/menu&gt;</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-  &lt;menuitem id=&quot;calendar-export-selection-menu&quot;</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-             mode=&quot;calendar&quot;</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-             label=&quot;&amp;calendar.export.selection.label;&quot;</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-             accesskey=&quot;&amp;calendar.export.selection.accesskey;&quot;</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-             command=&quot;calendar_export_selection_command&quot;</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineminus">-             observes=&quot;calendar_export_selection_command&quot;</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">-             insertafter=&quot;menu_close&quot;/&gt;</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-  &lt;menuitem id=&quot;calendar-export-menu&quot;</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-             mode=&quot;calendar&quot;</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineminus">-             label=&quot;&amp;calendar.export.calendar;&quot;</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-             accesskey=&quot;&amp;calendar.export.calendar.accesskey;&quot;</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineminus">-             command=&quot;calendar_export_command&quot;</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineminus">-             observes=&quot;calendar_export_command&quot;</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-             insertafter=&quot;menu_close&quot;/&gt;</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineminus">-  &lt;menuitem id=&quot;calendar-import-menu&quot;</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineminus">-             label=&quot;&amp;calendar.importcalendar.label;&quot;</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">-             accesskey=&quot;&amp;calendar.import.accesskey;&quot;</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineminus">-             command=&quot;calendar_import_command&quot;</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-             observes=&quot;calendar_import_command&quot;</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-             mode=&quot;calendar&quot;</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineminus">-             insertafter=&quot;menu_close&quot;/&gt;</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-  &lt;menuseparator id=&quot;afterMenu_close&quot;</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineminus">-             mode=&quot;calendar&quot;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-             insertafter=&quot;menu_close&quot;/&gt;</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineminus">-&lt;/menupopup&gt;</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineplus">+  &lt;menupopup id=&quot;menu_FilePopup&quot;&gt;</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+    &lt;menu id=&quot;menu_Open&quot;</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+          mode=&quot;calendar&quot;</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+          label=&quot;&amp;lightning.menupopup.open.label;&quot;</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+          accesskey=&quot;&amp;lightning.menupopup.open.accesskey;&quot;</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineplus">+          insertafter=&quot;menu_New&quot;&gt;</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+      &lt;menupopup id=&quot;menu_OpenPopup&quot;&gt;</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+        &lt;menuitem id=&quot;ltnOpenMessageFileMenuitem&quot;</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+                  label=&quot;&amp;lightning.menupopup.open.message.label;&quot;</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+                  accesskey=&quot;&amp;lightning.menupopup.open.message.accesskey;&quot;</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineplus">+                  oncommand=&quot;MsgOpenFromFile();&quot;/&gt;</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+        &lt;menuitem id=&quot;ltnOpenCalendarFileMenuitem&quot;</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineplus">+                  label=&quot;&amp;lightning.menupopup.open.calendar.label;&quot;</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineplus">+                  accesskey=&quot;&amp;lightning.menupopup.open.calendar.accesskey;&quot;</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+                  oncommand=&quot;openLocalCalendar();&quot;/&gt;</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+    &lt;/menu&gt;</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineplus">+  &lt;/menupopup&gt;</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+  &lt;menuitem id=&quot;openMessageFileMenuitem&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l16.75"></a><span id="l16.75"> </span>
<a href="#l16.76"></a><span id="l16.76">   &lt;menupopup id=&quot;menu_NewPopup&quot;&gt;</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineminus">-    &lt;menuitem id=&quot;ltnNewEvent&quot; label=&quot;&amp;lightning.menupopup.new.event.label;&quot;</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineminus">-               accesskey=&quot;&amp;event.new.event.accesskey;&quot;</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineminus">-               key=&quot;calendar-new-event-key&quot;</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineminus">-               command=&quot;calendar_new_event_command&quot;</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineminus">-               observes=&quot;calendar_new_event_command&quot;</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineminus">-               position=&quot;2&quot;/&gt;</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineminus">-    &lt;menuitem id=&quot;ltnNewTask&quot; label=&quot;&amp;lightning.menupopup.new.task.label;&quot;</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineminus">-               accesskey=&quot;&amp;event.new.todo.accesskey;&quot;</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineminus">-               key=&quot;calendar-new-todo-key&quot;</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineminus">-               command=&quot;calendar_new_todo_command&quot;</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineminus">-               observes=&quot;calendar_new_todo_command&quot;</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineminus">-               position=&quot;3&quot;/&gt;</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineminus">-    &lt;menuseparator id=&quot;afterltnNewTask&quot; position=&quot;4&quot;/&gt;</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineplus">+    &lt;menuitem id=&quot;ltnNewEvent&quot;</span>
<a href="#l16.91"></a><span id="l16.91" class="difflineplus">+              label=&quot;&amp;lightning.menupopup.new.event.label;&quot;</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineplus">+              insertbefore=&quot;menu_newFolder&quot;</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineplus">+              accesskey=&quot;&amp;event.new.event.accesskey;&quot;</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+              key=&quot;calendar-new-event-key&quot;</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineplus">+              command=&quot;calendar_new_event_command&quot;</span>
<a href="#l16.96"></a><span id="l16.96" class="difflineplus">+              observes=&quot;calendar_new_event_command&quot;/&gt;</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineplus">+    &lt;menuitem id=&quot;ltnNewTask&quot;</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineplus">+              label=&quot;&amp;lightning.menupopup.new.task.label;&quot;</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineplus">+              insertbefore=&quot;menu_newFolder&quot;</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+              accesskey=&quot;&amp;event.new.todo.accesskey;&quot;</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineplus">+              key=&quot;calendar-new-todo-key&quot;</span>
<a href="#l16.102"></a><span id="l16.102" class="difflineplus">+              command=&quot;calendar_new_todo_command&quot;</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineplus">+              observes=&quot;calendar_new_todo_command&quot;/&gt;</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineplus">+    &lt;menuseparator id=&quot;afterltnNewTask&quot;</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineplus">+                   insertbefore=&quot;menu_newFolder&quot;/&gt;</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineplus">+</span>
<a href="#l16.107"></a><span id="l16.107">     &lt;menuseparator id=&quot;beforenewAccountMenuItem&quot;</span>
<a href="#l16.108"></a><span id="l16.108" class="difflineminus">-                   mode=&quot;mail&quot;</span>
<a href="#l16.109"></a><span id="l16.109">                    insertbefore=&quot;newAccountMenuItem&quot;/&gt;</span>
<a href="#l16.110"></a><span id="l16.110">     &lt;menuitem id=&quot;ltnNewCalendar&quot; label=&quot;&amp;lightning.menupopup.new.calendar.label;&quot;</span>
<a href="#l16.111"></a><span id="l16.111">                command=&quot;calendar_new_calendar_command&quot;</span>
<a href="#l16.112"></a><span id="l16.112">                observes=&quot;calendar_new_calendar_command&quot;</span>
<a href="#l16.113"></a><span id="l16.113">                accesskey=&quot;&amp;calendar.new.server.accesskey;&quot;</span>
<a href="#l16.114"></a><span id="l16.114">                insertafter=&quot;newAccountMenuItem&quot;/&gt;</span>
<a href="#l16.115"></a><span id="l16.115">   &lt;/menupopup&gt;</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineplus">+</span>
<a href="#l16.117"></a><span id="l16.117" class="difflineplus">+  &lt;menupopup id=&quot;menu_EditPopup&quot;&gt;</span>
<a href="#l16.118"></a><span id="l16.118" class="difflineplus">+    &lt;menuitem id=&quot;ltnCalendarProperties&quot;</span>
<a href="#l16.119"></a><span id="l16.119" class="difflineplus">+              insertafter=&quot;menu_properties&quot;</span>
<a href="#l16.120"></a><span id="l16.120" class="difflineplus">+              label=&quot;&amp;calendar.properties.label;&quot;</span>
<a href="#l16.121"></a><span id="l16.121" class="difflineplus">+              accesskey=&quot;&amp;calendar.properties.accesskey;&quot;</span>
<a href="#l16.122"></a><span id="l16.122" class="difflineplus">+              command=&quot;calendar_edit_calendar_command&quot;</span>
<a href="#l16.123"></a><span id="l16.123" class="difflineplus">+              observes=&quot;calendar_edit_calendar_command&quot;/&gt;</span>
<a href="#l16.124"></a><span id="l16.124" class="difflineplus">+  &lt;/menupopup&gt;</span>
<a href="#l16.125"></a><span id="l16.125" class="difflineplus">+</span>
<a href="#l16.126"></a><span id="l16.126">   &lt;menupopup id=&quot;menu_View_Popup&quot;&gt;</span>
<a href="#l16.127"></a><span id="l16.127" class="difflineminus">-    &lt;menu label=&quot;&amp;showCurrentView.label;&quot;</span>
<a href="#l16.128"></a><span id="l16.128" class="difflineminus">-          mode=&quot;calendar,task&quot;</span>
<a href="#l16.129"></a><span id="l16.129" class="difflineminus">-          accesskey=&quot;&amp;showCurrentView.accesskey;&quot;&gt;</span>
<a href="#l16.130"></a><span id="l16.130" class="difflineminus">-      &lt;menupopup&gt;</span>
<a href="#l16.131"></a><span id="l16.131" class="difflineminus">-        &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.132"></a><span id="l16.132" class="difflineminus">-                  id=&quot;ltn-workdays-only-menuitem&quot;</span>
<a href="#l16.133"></a><span id="l16.133" class="difflineminus">-                  label=&quot;&amp;calendar.onlyworkday.checkbox.label;&quot;</span>
<a href="#l16.134"></a><span id="l16.134" class="difflineminus">-                  accesskey=&quot;&amp;calendar.onlyworkday.checkbox.accesskey;&quot;</span>
<a href="#l16.135"></a><span id="l16.135" class="difflineminus">-                  mode=&quot;calendar&quot;</span>
<a href="#l16.136"></a><span id="l16.136" class="difflineminus">-                  observes=&quot;calendar_toggle_workdays_only_command&quot;/&gt;</span>
<a href="#l16.137"></a><span id="l16.137" class="difflineminus">-        &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.138"></a><span id="l16.138" class="difflineminus">-                  id=&quot;ltn-tasks-in-view-menuitem&quot;</span>
<a href="#l16.139"></a><span id="l16.139" class="difflineminus">-                  label=&quot;&amp;calendar.displaytodos.checkbox.label;&quot;</span>
<a href="#l16.140"></a><span id="l16.140" class="difflineminus">-                  accesskey=&quot;&amp;calendar.displaytodos.checkbox.accesskey;&quot;</span>
<a href="#l16.141"></a><span id="l16.141" class="difflineminus">-                  mode=&quot;calendar&quot;</span>
<a href="#l16.142"></a><span id="l16.142" class="difflineminus">-                  observes=&quot;calendar_toggle_tasks_in_view_command&quot;/&gt;</span>
<a href="#l16.143"></a><span id="l16.143" class="difflineminus">-        &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.144"></a><span id="l16.144" class="difflineminus">-                  id=&quot;ltn-show-completed-in-view&quot;</span>
<a href="#l16.145"></a><span id="l16.145" class="difflineminus">-                  persist=&quot;checked&quot;</span>
<a href="#l16.146"></a><span id="l16.146" class="difflineminus">-                  label=&quot;&amp;calendar.completedtasks.checkbox.label;&quot;</span>
<a href="#l16.147"></a><span id="l16.147" class="difflineminus">-                  accesskey=&quot;&amp;calendar.completedtasks.checkbox.accesskey;&quot;</span>
<a href="#l16.148"></a><span id="l16.148" class="difflineminus">-                  mode=&quot;calendar&quot;</span>
<a href="#l16.149"></a><span id="l16.149" class="difflineminus">-                  observes=&quot;calendar_toggle_show_completed_in_view_command&quot;/&gt;</span>
<a href="#l16.150"></a><span id="l16.150" class="difflineminus">-        &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.151"></a><span id="l16.151" class="difflineminus">-                  id=&quot;ltn-multiday-rotated&quot;</span>
<a href="#l16.152"></a><span id="l16.152" class="difflineminus">-                  label=&quot;&amp;calendar.orientation.label;&quot;</span>
<a href="#l16.153"></a><span id="l16.153" class="difflineminus">-                  accesskey=&quot;&amp;calendar.orientation.accesskey;&quot;</span>
<a href="#l16.154"></a><span id="l16.154" class="difflineminus">-                  mode=&quot;calendar&quot;</span>
<a href="#l16.155"></a><span id="l16.155" class="difflineminus">-                  command=&quot;calendar_toggle_orientation_command&quot;</span>
<a href="#l16.156"></a><span id="l16.156" class="difflineminus">-                  observes=&quot;calendar_toggle_orientation_command&quot;/&gt;</span>
<a href="#l16.157"></a><span id="l16.157" class="difflineminus">-        &lt;observes element=&quot;filterBroadcaster&quot; attribute=&quot;value&quot; onbroadcast=&quot;checkRadioControl(this.parentNode, document.getElementById(this.getAttribute('element')).getAttribute('value'));&quot;/&gt;</span>
<a href="#l16.158"></a><span id="l16.158" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-all&quot;</span>
<a href="#l16.159"></a><span id="l16.159" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.160"></a><span id="l16.160" class="difflineminus">-                  value=&quot;all&quot;</span>
<a href="#l16.161"></a><span id="l16.161" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.162"></a><span id="l16.162" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.163"></a><span id="l16.163" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.164"></a><span id="l16.164" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.all.label;&quot;</span>
<a href="#l16.165"></a><span id="l16.165" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.all.accesskey;&quot;/&gt;</span>
<a href="#l16.166"></a><span id="l16.166" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-today&quot;</span>
<a href="#l16.167"></a><span id="l16.167" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.168"></a><span id="l16.168" class="difflineminus">-                  value=&quot;today&quot;</span>
<a href="#l16.169"></a><span id="l16.169" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.170"></a><span id="l16.170" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.171"></a><span id="l16.171" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.172"></a><span id="l16.172" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.today.label;&quot;</span>
<a href="#l16.173"></a><span id="l16.173" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.today.accesskey;&quot;/&gt;</span>
<a href="#l16.174"></a><span id="l16.174" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-next7days&quot;</span>
<a href="#l16.175"></a><span id="l16.175" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.176"></a><span id="l16.176" class="difflineminus">-                  value=&quot;next7days&quot;</span>
<a href="#l16.177"></a><span id="l16.177" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.178"></a><span id="l16.178" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.179"></a><span id="l16.179" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.180"></a><span id="l16.180" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.next7days.label;&quot;</span>
<a href="#l16.181"></a><span id="l16.181" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.next7days.accesskey;&quot;/&gt;</span>
<a href="#l16.182"></a><span id="l16.182" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-notstartedtasks&quot;</span>
<a href="#l16.183"></a><span id="l16.183" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.184"></a><span id="l16.184" class="difflineminus">-                  value=&quot;notstarted&quot;</span>
<a href="#l16.185"></a><span id="l16.185" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.186"></a><span id="l16.186" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.187"></a><span id="l16.187" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.188"></a><span id="l16.188" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.notstarted.label;&quot;</span>
<a href="#l16.189"></a><span id="l16.189" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.notstarted.accesskey;&quot;/&gt;</span>
<a href="#l16.190"></a><span id="l16.190" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-overdue&quot;</span>
<a href="#l16.191"></a><span id="l16.191" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.192"></a><span id="l16.192" class="difflineminus">-                  value=&quot;overdue&quot;</span>
<a href="#l16.193"></a><span id="l16.193" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.194"></a><span id="l16.194" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.195"></a><span id="l16.195" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.196"></a><span id="l16.196" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.overdue.label;&quot;</span>
<a href="#l16.197"></a><span id="l16.197" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.overdue.accesskey;&quot;/&gt;</span>
<a href="#l16.198"></a><span id="l16.198" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-completed&quot;</span>
<a href="#l16.199"></a><span id="l16.199" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.200"></a><span id="l16.200" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.201"></a><span id="l16.201" class="difflineminus">-                  value=&quot;completed&quot;</span>
<a href="#l16.202"></a><span id="l16.202" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.203"></a><span id="l16.203" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.204"></a><span id="l16.204" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.completed.label;&quot;</span>
<a href="#l16.205"></a><span id="l16.205" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.completed.accesskey;&quot;/&gt;</span>
<a href="#l16.206"></a><span id="l16.206" class="difflineminus">-        &lt;menuitem id=&quot;tasks-view-filter-open&quot;</span>
<a href="#l16.207"></a><span id="l16.207" class="difflineminus">-                  name=&quot;filtergroup&quot;</span>
<a href="#l16.208"></a><span id="l16.208" class="difflineminus">-                  type=&quot;radio&quot;</span>
<a href="#l16.209"></a><span id="l16.209" class="difflineminus">-                  value=&quot;open&quot;</span>
<a href="#l16.210"></a><span id="l16.210" class="difflineminus">-                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.211"></a><span id="l16.211" class="difflineminus">-                  mode=&quot;task&quot;</span>
<a href="#l16.212"></a><span id="l16.212" class="difflineminus">-                  label=&quot;&amp;calendar.task.filter.open.label;&quot;</span>
<a href="#l16.213"></a><span id="l16.213" class="difflineminus">-                  accesskey=&quot;&amp;calendar.task.filter.open.accesskey;&quot;/&gt;</span>
<a href="#l16.214"></a><span id="l16.214" class="difflineminus">-      &lt;/menupopup&gt;</span>
<a href="#l16.215"></a><span id="l16.215" class="difflineminus">-    &lt;/menu&gt;</span>
<a href="#l16.216"></a><span id="l16.216" class="difflineminus">-    &lt;menuseparator id=&quot;before-Unifinder-Section&quot; mode=&quot;calendar&quot;/&gt;</span>
<a href="#l16.217"></a><span id="l16.217" class="difflineminus">-    &lt;menuitem id=&quot;calendar-show-unifinder-menu&quot;</span>
<a href="#l16.218"></a><span id="l16.218" class="difflineminus">-              type=&quot;checkbox&quot;</span>
<a href="#l16.219"></a><span id="l16.219" class="difflineminus">-              checked=&quot;true&quot;</span>
<a href="#l16.220"></a><span id="l16.220" class="difflineminus">-              label=&quot;&amp;showUnifinderCmd.label;&quot;</span>
<a href="#l16.221"></a><span id="l16.221" class="difflineminus">-              accesskey=&quot;&amp;showUnifinderCmd.accesskey;&quot;</span>
<a href="#l16.222"></a><span id="l16.222" class="difflineminus">-              mode=&quot;calendar&quot;</span>
<a href="#l16.223"></a><span id="l16.223" class="difflineminus">-              command=&quot;calendar_show_unifinder_command&quot;/&gt;</span>
<a href="#l16.224"></a><span id="l16.224" class="difflineminus">-    &lt;menuseparator id=&quot;before-Calendar-View-Section&quot; mode=&quot;calendar&quot;/&gt;</span>
<a href="#l16.225"></a><span id="l16.225" class="difflineminus">-    &lt;menuitem id=&quot;ltnChangeViewDay&quot;</span>
<a href="#l16.226"></a><span id="l16.226" class="difflineminus">-              label=&quot;&amp;lightning.toolbar.day.label;&quot;</span>
<a href="#l16.227"></a><span id="l16.227" class="difflineminus">-              accesskey=&quot;&amp;lightning.toolbar.day.accesskey;&quot;</span>
<a href="#l16.228"></a><span id="l16.228" class="difflineminus">-              type=&quot;radio&quot;</span>
<a href="#l16.229"></a><span id="l16.229" class="difflineminus">-              name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.230"></a><span id="l16.230" class="difflineminus">-              mode=&quot;calendar&quot;</span>
<a href="#l16.231"></a><span id="l16.231" class="difflineminus">-              key=&quot;calendar-day-view-key&quot;</span>
<a href="#l16.232"></a><span id="l16.232" class="difflineminus">-              observes=&quot;calendar_day-view_command&quot;/&gt;</span>
<a href="#l16.233"></a><span id="l16.233" class="difflineminus">-    &lt;menuitem id=&quot;ltnChangeViewWeek&quot;</span>
<a href="#l16.234"></a><span id="l16.234" class="difflineminus">-              label=&quot;&amp;lightning.toolbar.week.label;&quot;</span>
<a href="#l16.235"></a><span id="l16.235" class="difflineminus">-              accesskey=&quot;&amp;lightning.toolbar.week.accesskey;&quot;</span>
<a href="#l16.236"></a><span id="l16.236" class="difflineminus">-              type=&quot;radio&quot;</span>
<a href="#l16.237"></a><span id="l16.237" class="difflineminus">-              name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.238"></a><span id="l16.238" class="difflineminus">-              mode=&quot;calendar&quot;</span>
<a href="#l16.239"></a><span id="l16.239" class="difflineminus">-              key=&quot;calendar-week-view-key&quot;</span>
<a href="#l16.240"></a><span id="l16.240" class="difflineminus">-              observes=&quot;calendar_week-view_command&quot;/&gt;</span>
<a href="#l16.241"></a><span id="l16.241" class="difflineminus">-    &lt;menuitem id=&quot;ltnChangeViewMultiweek&quot;</span>
<a href="#l16.242"></a><span id="l16.242" class="difflineminus">-              label=&quot;&amp;lightning.toolbar.multiweek.label;&quot;</span>
<a href="#l16.243"></a><span id="l16.243" class="difflineminus">-              accesskey=&quot;&amp;lightning.toolbar.multiweek.accesskey;&quot;</span>
<a href="#l16.244"></a><span id="l16.244" class="difflineminus">-              type=&quot;radio&quot;</span>
<a href="#l16.245"></a><span id="l16.245" class="difflineminus">-              name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.246"></a><span id="l16.246" class="difflineminus">-              mode=&quot;calendar&quot;</span>
<a href="#l16.247"></a><span id="l16.247" class="difflineminus">-              key=&quot;calendar-multiweek-view-key&quot;</span>
<a href="#l16.248"></a><span id="l16.248" class="difflineminus">-              observes=&quot;calendar_multiweek-view_command&quot;/&gt;</span>
<a href="#l16.249"></a><span id="l16.249" class="difflineminus">-    &lt;menuitem id=&quot;ltnChangeViewMonth&quot;</span>
<a href="#l16.250"></a><span id="l16.250" class="difflineminus">-              label=&quot;&amp;lightning.toolbar.month.label;&quot;</span>
<a href="#l16.251"></a><span id="l16.251" class="difflineminus">-              accesskey=&quot;&amp;lightning.toolbar.month.accesskey;&quot;</span>
<a href="#l16.252"></a><span id="l16.252" class="difflineminus">-              type=&quot;radio&quot;</span>
<a href="#l16.253"></a><span id="l16.253" class="difflineminus">-              name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.254"></a><span id="l16.254" class="difflineminus">-              mode=&quot;calendar&quot;</span>
<a href="#l16.255"></a><span id="l16.255" class="difflineminus">-              key=&quot;calendar-month-view-key&quot;</span>
<a href="#l16.256"></a><span id="l16.256" class="difflineminus">-              observes=&quot;calendar_month-view_command&quot;/&gt;</span>
<a href="#l16.257"></a><span id="l16.257" class="difflineminus">-    &lt;menuseparator id=&quot;before-task-View-Section&quot; mode=&quot;mail,calendar,task&quot;/&gt;</span>
<a href="#l16.258"></a><span id="l16.258" class="difflineminus">-    &lt;menuitem id=&quot;tasks-view-minimonth&quot;</span>
<a href="#l16.259"></a><span id="l16.259" class="difflineminus">-              type=&quot;checkbox&quot;</span>
<a href="#l16.260"></a><span id="l16.260" class="difflineminus">-              mode=&quot;calendar,task&quot;</span>
<a href="#l16.261"></a><span id="l16.261" class="difflineminus">-              label=&quot;&amp;calendar.tasks.view.minimonth.label;&quot;</span>
<a href="#l16.262"></a><span id="l16.262" class="difflineminus">-              accesskey=&quot;&amp;calendar.tasks.view.minimonth.accesskey;&quot;</span>
<a href="#l16.263"></a><span id="l16.263" class="difflineminus">-              command=&quot;calendar_toggle_minimonthpane_command&quot;/&gt;</span>
<a href="#l16.264"></a><span id="l16.264" class="difflineminus">-    &lt;menuitem id=&quot;tasks-view-filtertasks&quot;</span>
<a href="#l16.265"></a><span id="l16.265" class="difflineminus">-              type=&quot;checkbox&quot;</span>
<a href="#l16.266"></a><span id="l16.266" class="difflineminus">-              mode=&quot;task&quot;</span>
<a href="#l16.267"></a><span id="l16.267" class="difflineminus">-              label=&quot;&amp;calendar.tasks.view.filtertasks.label;&quot;</span>
<a href="#l16.268"></a><span id="l16.268" class="difflineminus">-              accesskey=&quot;&amp;calendar.tasks.view.filtertasks.accesskey;&quot;</span>
<a href="#l16.269"></a><span id="l16.269" class="difflineminus">-              command=&quot;calendar_toggle_filter_command&quot;/&gt;</span>
<a href="#l16.270"></a><span id="l16.270" class="difflineminus">-    &lt;menuitem id=&quot;tasks-view-calendarlist&quot;</span>
<a href="#l16.271"></a><span id="l16.271" class="difflineminus">-              type=&quot;checkbox&quot;</span>
<a href="#l16.272"></a><span id="l16.272" class="difflineminus">-              mode=&quot;calendar,task&quot;</span>
<a href="#l16.273"></a><span id="l16.273" class="difflineminus">-              label=&quot;&amp;calendar.tasks.view.calendarlist.label;&quot;</span>
<a href="#l16.274"></a><span id="l16.274" class="difflineminus">-              accesskey=&quot;&amp;calendar.tasks.view.calendarlist.accesskey;&quot;</span>
<a href="#l16.275"></a><span id="l16.275" class="difflineminus">-              command=&quot;calendar_toggle_calendarlist_command&quot;/&gt;</span>
<a href="#l16.276"></a><span id="l16.276" class="difflineminus">-    &lt;menuseparator id=&quot;before-today-pane&quot;/&gt;</span>
<a href="#l16.277"></a><span id="l16.277" class="difflineminus">-    &lt;menu id=&quot;today-pane-menu&quot;</span>
<a href="#l16.278"></a><span id="l16.278" class="difflineplus">+    &lt;menuseparator id=&quot;ltnViewMenuSeparator&quot;</span>
<a href="#l16.279"></a><span id="l16.279" class="difflineplus">+                   insertbefore=&quot;viewSortMenuSeparator&quot;/&gt;</span>
<a href="#l16.280"></a><span id="l16.280" class="difflineplus">+    &lt;menu id=&quot;ltnTodayPaneMenu&quot;</span>
<a href="#l16.281"></a><span id="l16.281" class="difflineplus">+          observes=&quot;calendar_in_foreground&quot;</span>
<a href="#l16.282"></a><span id="l16.282" class="difflineplus">+          insertbefore=&quot;viewSortMenuSeparator&quot;</span>
<a href="#l16.283"></a><span id="l16.283">           label=&quot;&amp;calendar.context.button.label;&quot;</span>
<a href="#l16.284"></a><span id="l16.284">           accesskey=&quot;&amp;calendar.context.button.accesskey;&quot;&gt;</span>
<a href="#l16.285"></a><span id="l16.285" class="difflineminus">-      &lt;menupopup&gt;</span>
<a href="#l16.286"></a><span id="l16.286" class="difflineplus">+      &lt;menupopup id=&quot;ltnTodayPaneMenuPopup&quot;&gt;</span>
<a href="#l16.287"></a><span id="l16.287">         &lt;menuitem id=&quot;ltnShowTodayPane-2&quot;</span>
<a href="#l16.288"></a><span id="l16.288">                   label=&quot;&amp;todaypane.showTodayPane.label;&quot;</span>
<a href="#l16.289"></a><span id="l16.289">                   accesskey=&quot;&amp;todaypane.showTodayPane.accesskey;&quot;</span>
<a href="#l16.290"></a><span id="l16.290">                   type=&quot;checkbox&quot;</span>
<a href="#l16.291"></a><span id="l16.291">                   key=&quot;todaypanekey&quot;</span>
<a href="#l16.292"></a><span id="l16.292">                   command=&quot;calendar_toggle_todaypane_command&quot;/&gt;</span>
<a href="#l16.293"></a><span id="l16.293" class="difflineminus">-        &lt;menuseparator id=&quot;before-displayminiday&quot;/&gt;</span>
<a href="#l16.294"></a><span id="l16.294" class="difflineminus">-        &lt;menuitem id=&quot;today-pane-displayminiday&quot;</span>
<a href="#l16.295"></a><span id="l16.295" class="difflineplus">+        &lt;menuseparator id=&quot;ltnSeparatorBeforeDisplayMiniday&quot;/&gt;</span>
<a href="#l16.296"></a><span id="l16.296" class="difflineplus">+        &lt;menuitem id=&quot;ltnTodayPaneDisplayMiniday&quot;</span>
<a href="#l16.297"></a><span id="l16.297">                   name=&quot;minidisplay&quot;</span>
<a href="#l16.298"></a><span id="l16.298">                   value=&quot;miniday&quot;</span>
<a href="#l16.299"></a><span id="l16.299">                   type=&quot;radio&quot;</span>
<a href="#l16.300"></a><span id="l16.300" class="difflineminus">-                  oncommand=&quot;TodayPane.displayMiniSection(1)&quot;</span>
<a href="#l16.301"></a><span id="l16.301" class="difflineplus">+                  oncommand=&quot;TodayPane.displayMiniSection('miniday')&quot;</span>
<a href="#l16.302"></a><span id="l16.302">                   label=&quot;&amp;todaypane.showMiniday.label;&quot;</span>
<a href="#l16.303"></a><span id="l16.303">                   accesskey=&quot;&amp;todaypane.showMiniday.accesskey;&quot;/&gt;</span>
<a href="#l16.304"></a><span id="l16.304" class="difflineminus">-        &lt;menuitem id=&quot;today-pane-displayminimonth&quot;</span>
<a href="#l16.305"></a><span id="l16.305" class="difflineplus">+        &lt;menuitem id=&quot;ltnTodayPaneDisplayMinimonth&quot;</span>
<a href="#l16.306"></a><span id="l16.306">                   name=&quot;minidisplay&quot;</span>
<a href="#l16.307"></a><span id="l16.307">                   value=&quot;minimonth&quot;</span>
<a href="#l16.308"></a><span id="l16.308">                   type=&quot;radio&quot;</span>
<a href="#l16.309"></a><span id="l16.309" class="difflineminus">-                  oncommand=&quot;TodayPane.displayMiniSection(2)&quot;</span>
<a href="#l16.310"></a><span id="l16.310" class="difflineplus">+                  oncommand=&quot;TodayPane.displayMiniSection('minimonth')&quot;</span>
<a href="#l16.311"></a><span id="l16.311">                   label=&quot;&amp;todaypane.showMinimonth.label;&quot;</span>
<a href="#l16.312"></a><span id="l16.312">                   accesskey=&quot;&amp;todaypane.showMinimonth.accesskey;&quot;/&gt;</span>
<a href="#l16.313"></a><span id="l16.313" class="difflineminus">-        &lt;menuitem id=&quot;today-pane-displaynone&quot;</span>
<a href="#l16.314"></a><span id="l16.314" class="difflineplus">+        &lt;menuitem id=&quot;ltnTodayPaneDisplayNone&quot;</span>
<a href="#l16.315"></a><span id="l16.315">                   name=&quot;minidisplay&quot;</span>
<a href="#l16.316"></a><span id="l16.316">                   value=&quot;none&quot;</span>
<a href="#l16.317"></a><span id="l16.317">                   type=&quot;radio&quot;</span>
<a href="#l16.318"></a><span id="l16.318" class="difflineminus">-                  oncommand=&quot;TodayPane.displayMiniSection(3)&quot;</span>
<a href="#l16.319"></a><span id="l16.319" class="difflineplus">+                  oncommand=&quot;TodayPane.displayMiniSection('none')&quot;</span>
<a href="#l16.320"></a><span id="l16.320">                   label=&quot;&amp;todaypane.showNone.label;&quot;</span>
<a href="#l16.321"></a><span id="l16.321">                   accesskey=&quot;&amp;todaypane.showNone.accesskey;&quot;/&gt;</span>
<a href="#l16.322"></a><span id="l16.322">       &lt;/menupopup&gt;</span>
<a href="#l16.323"></a><span id="l16.323">     &lt;/menu&gt;</span>
<a href="#l16.324"></a><span id="l16.324" class="difflineplus">+    &lt;menu id=&quot;ltnCalendarMenu&quot;</span>
<a href="#l16.325"></a><span id="l16.325" class="difflineplus">+          insertbefore=&quot;viewSortMenuSeparator&quot;</span>
<a href="#l16.326"></a><span id="l16.326" class="difflineplus">+          label=&quot;&amp;lightning.menu.view.calendar.label;&quot;</span>
<a href="#l16.327"></a><span id="l16.327" class="difflineplus">+          accesskey=&quot;&amp;lightning.menu.view.calendar.accesskey;&quot;&gt;</span>
<a href="#l16.328"></a><span id="l16.328" class="difflineplus">+      &lt;menupopup id=&quot;ltnTasksMenuPopup&quot;&gt;</span>
<a href="#l16.329"></a><span id="l16.329" class="difflineplus">+        &lt;menuitem id=&quot;ltnChangeViewDay&quot;</span>
<a href="#l16.330"></a><span id="l16.330" class="difflineplus">+                  label=&quot;&amp;lightning.toolbar.day.label;&quot;</span>
<a href="#l16.331"></a><span id="l16.331" class="difflineplus">+                  accesskey=&quot;&amp;lightning.toolbar.day.accesskey;&quot;</span>
<a href="#l16.332"></a><span id="l16.332" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.333"></a><span id="l16.333" class="difflineplus">+                  name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.334"></a><span id="l16.334" class="difflineplus">+                  key=&quot;calendar-day-view-key&quot;</span>
<a href="#l16.335"></a><span id="l16.335" class="difflineplus">+                  observes=&quot;calendar_day-view_command&quot;/&gt;</span>
<a href="#l16.336"></a><span id="l16.336" class="difflineplus">+        &lt;menuitem id=&quot;ltnChangeViewWeek&quot;</span>
<a href="#l16.337"></a><span id="l16.337" class="difflineplus">+                  label=&quot;&amp;lightning.toolbar.week.label;&quot;</span>
<a href="#l16.338"></a><span id="l16.338" class="difflineplus">+                  accesskey=&quot;&amp;lightning.toolbar.week.accesskey;&quot;</span>
<a href="#l16.339"></a><span id="l16.339" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.340"></a><span id="l16.340" class="difflineplus">+                  name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.341"></a><span id="l16.341" class="difflineplus">+                  key=&quot;calendar-week-view-key&quot;</span>
<a href="#l16.342"></a><span id="l16.342" class="difflineplus">+                  observes=&quot;calendar_week-view_command&quot;/&gt;</span>
<a href="#l16.343"></a><span id="l16.343" class="difflineplus">+        &lt;menuitem id=&quot;ltnChangeViewMultiweek&quot;</span>
<a href="#l16.344"></a><span id="l16.344" class="difflineplus">+                  label=&quot;&amp;lightning.toolbar.multiweek.label;&quot;</span>
<a href="#l16.345"></a><span id="l16.345" class="difflineplus">+                  accesskey=&quot;&amp;lightning.toolbar.multiweek.accesskey;&quot;</span>
<a href="#l16.346"></a><span id="l16.346" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.347"></a><span id="l16.347" class="difflineplus">+                  name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.348"></a><span id="l16.348" class="difflineplus">+                  key=&quot;calendar-multiweek-view-key&quot;</span>
<a href="#l16.349"></a><span id="l16.349" class="difflineplus">+                  observes=&quot;calendar_multiweek-view_command&quot;/&gt;</span>
<a href="#l16.350"></a><span id="l16.350" class="difflineplus">+        &lt;menuitem id=&quot;ltnChangeViewMonth&quot;</span>
<a href="#l16.351"></a><span id="l16.351" class="difflineplus">+                  label=&quot;&amp;lightning.toolbar.month.label;&quot;</span>
<a href="#l16.352"></a><span id="l16.352" class="difflineplus">+                  accesskey=&quot;&amp;lightning.toolbar.month.accesskey;&quot;</span>
<a href="#l16.353"></a><span id="l16.353" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.354"></a><span id="l16.354" class="difflineplus">+                  name=&quot;calendarMenuViews&quot;</span>
<a href="#l16.355"></a><span id="l16.355" class="difflineplus">+                  key=&quot;calendar-month-view-key&quot;</span>
<a href="#l16.356"></a><span id="l16.356" class="difflineplus">+                  observes=&quot;calendar_month-view_command&quot;/&gt;</span>
<a href="#l16.357"></a><span id="l16.357" class="difflineplus">+        &lt;menuseparator id=&quot;ltnBeforeCalendarViewSection&quot;/&gt;</span>
<a href="#l16.358"></a><span id="l16.358" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewMinimonth&quot;</span>
<a href="#l16.359"></a><span id="l16.359" class="difflineplus">+                  type=&quot;checkbox&quot;</span>
<a href="#l16.360"></a><span id="l16.360" class="difflineplus">+                  label=&quot;&amp;calendar.tasks.view.minimonth.label;&quot;</span>
<a href="#l16.361"></a><span id="l16.361" class="difflineplus">+                  accesskey=&quot;&amp;calendar.tasks.view.minimonth.accesskey;&quot;</span>
<a href="#l16.362"></a><span id="l16.362" class="difflineplus">+                  command=&quot;calendar_toggle_minimonthpane_command&quot;/&gt;</span>
<a href="#l16.363"></a><span id="l16.363" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewCalendarlist&quot;</span>
<a href="#l16.364"></a><span id="l16.364" class="difflineplus">+                  type=&quot;checkbox&quot;</span>
<a href="#l16.365"></a><span id="l16.365" class="difflineplus">+                  label=&quot;&amp;calendar.tasks.view.calendarlist.label;&quot;</span>
<a href="#l16.366"></a><span id="l16.366" class="difflineplus">+                  accesskey=&quot;&amp;calendar.tasks.view.calendarlist.accesskey;&quot;</span>
<a href="#l16.367"></a><span id="l16.367" class="difflineplus">+                  command=&quot;calendar_toggle_calendarlist_command&quot;/&gt;</span>
<a href="#l16.368"></a><span id="l16.368" class="difflineplus">+        &lt;menuseparator id=&quot;ltnBeforeCurrentViewMenu&quot;/&gt;</span>
<a href="#l16.369"></a><span id="l16.369" class="difflineplus">+        &lt;menu id=&quot;ltnCalendarCurrentViewMenu&quot;</span>
<a href="#l16.370"></a><span id="l16.370" class="difflineplus">+              observes=&quot;calendar_mode_calendar&quot;</span>
<a href="#l16.371"></a><span id="l16.371" class="difflineplus">+              label=&quot;&amp;showCurrentView.label;&quot;</span>
<a href="#l16.372"></a><span id="l16.372" class="difflineplus">+              accesskey=&quot;&amp;showCurrentView.accesskey;&quot;&gt;</span>
<a href="#l16.373"></a><span id="l16.373" class="difflineplus">+          &lt;menupopup id=&quot;ltnCalendarCurrentViewMenuPopup&quot;&gt;</span>
<a href="#l16.374"></a><span id="l16.374" class="difflineplus">+            &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.375"></a><span id="l16.375" class="difflineplus">+                      id=&quot;ltnWorkdaysOnlyMenuitem&quot;</span>
<a href="#l16.376"></a><span id="l16.376" class="difflineplus">+                      label=&quot;&amp;calendar.onlyworkday.checkbox.label;&quot;</span>
<a href="#l16.377"></a><span id="l16.377" class="difflineplus">+                      accesskey=&quot;&amp;calendar.onlyworkday.checkbox.accesskey;&quot;</span>
<a href="#l16.378"></a><span id="l16.378" class="difflineplus">+                      observes=&quot;calendar_toggle_workdays_only_command&quot;/&gt;</span>
<a href="#l16.379"></a><span id="l16.379" class="difflineplus">+            &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.380"></a><span id="l16.380" class="difflineplus">+                      id=&quot;ltnTasksInViewMenuitem&quot;</span>
<a href="#l16.381"></a><span id="l16.381" class="difflineplus">+                      label=&quot;&amp;calendar.displaytodos.checkbox.label;&quot;</span>
<a href="#l16.382"></a><span id="l16.382" class="difflineplus">+                      accesskey=&quot;&amp;calendar.displaytodos.checkbox.accesskey;&quot;</span>
<a href="#l16.383"></a><span id="l16.383" class="difflineplus">+                      observes=&quot;calendar_toggle_tasks_in_view_command&quot;/&gt;</span>
<a href="#l16.384"></a><span id="l16.384" class="difflineplus">+            &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.385"></a><span id="l16.385" class="difflineplus">+                      id=&quot;ltnShowCompletedInViewMenuItem&quot;</span>
<a href="#l16.386"></a><span id="l16.386" class="difflineplus">+                      label=&quot;&amp;calendar.completedtasks.checkbox.label;&quot;</span>
<a href="#l16.387"></a><span id="l16.387" class="difflineplus">+                      accesskey=&quot;&amp;calendar.completedtasks.checkbox.accesskey;&quot;</span>
<a href="#l16.388"></a><span id="l16.388" class="difflineplus">+                      observes=&quot;calendar_toggle_show_completed_in_view_command&quot;/&gt;</span>
<a href="#l16.389"></a><span id="l16.389" class="difflineplus">+            &lt;menuitem type=&quot;checkbox&quot;</span>
<a href="#l16.390"></a><span id="l16.390" class="difflineplus">+                      id=&quot;ltnViewRotated&quot;</span>
<a href="#l16.391"></a><span id="l16.391" class="difflineplus">+                      label=&quot;&amp;calendar.orientation.label;&quot;</span>
<a href="#l16.392"></a><span id="l16.392" class="difflineplus">+                      accesskey=&quot;&amp;calendar.orientation.accesskey;&quot;</span>
<a href="#l16.393"></a><span id="l16.393" class="difflineplus">+                      command=&quot;calendar_toggle_orientation_command&quot;</span>
<a href="#l16.394"></a><span id="l16.394" class="difflineplus">+                      observes=&quot;calendar_toggle_orientation_command&quot;/&gt;</span>
<a href="#l16.395"></a><span id="l16.395" class="difflineplus">+          &lt;/menupopup&gt;</span>
<a href="#l16.396"></a><span id="l16.396" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l16.397"></a><span id="l16.397" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l16.398"></a><span id="l16.398" class="difflineplus">+    &lt;/menu&gt;</span>
<a href="#l16.399"></a><span id="l16.399" class="difflineplus">+    &lt;menu id=&quot;ltnTasksMenu&quot;</span>
<a href="#l16.400"></a><span id="l16.400" class="difflineplus">+          observes=&quot;calendar_mode_task&quot;</span>
<a href="#l16.401"></a><span id="l16.401" class="difflineplus">+          insertbefore=&quot;viewSortMenuSeparator&quot;</span>
<a href="#l16.402"></a><span id="l16.402" class="difflineplus">+          label=&quot;&amp;lightning.menu.view.tasks.label;&quot;</span>
<a href="#l16.403"></a><span id="l16.403" class="difflineplus">+          accesskey=&quot;&amp;lightning.menu.view.tasks.accesskey;&quot;&gt;</span>
<a href="#l16.404"></a><span id="l16.404" class="difflineplus">+      &lt;menupopup id=&quot;ltnTasksMenuPopup&quot;&gt;</span>
<a href="#l16.405"></a><span id="l16.405" class="difflineplus">+        &lt;observes element=&quot;filterBroadcaster&quot;</span>
<a href="#l16.406"></a><span id="l16.406" class="difflineplus">+                  attribute=&quot;value&quot;</span>
<a href="#l16.407"></a><span id="l16.407" class="difflineplus">+                  onbroadcast=&quot;checkRadioControl(this.parentNode, document.getElementById(this.getAttribute('element')).getAttribute('value'));&quot;/&gt;</span>
<a href="#l16.408"></a><span id="l16.408" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterTasks&quot;</span>
<a href="#l16.409"></a><span id="l16.409" class="difflineplus">+                  type=&quot;checkbox&quot;</span>
<a href="#l16.410"></a><span id="l16.410" class="difflineplus">+                  label=&quot;&amp;calendar.tasks.view.filtertasks.label;&quot;</span>
<a href="#l16.411"></a><span id="l16.411" class="difflineplus">+                  accesskey=&quot;&amp;calendar.tasks.view.filtertasks.accesskey;&quot;</span>
<a href="#l16.412"></a><span id="l16.412" class="difflineplus">+                  command=&quot;calendar_toggle_filter_command&quot;/&gt;</span>
<a href="#l16.413"></a><span id="l16.413" class="difflineplus">+        &lt;menuseparator id=&quot;ltnTasksViewSeparator&quot;/&gt;</span>
<a href="#l16.414"></a><span id="l16.414" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterAll&quot;</span>
<a href="#l16.415"></a><span id="l16.415" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.416"></a><span id="l16.416" class="difflineplus">+                  value=&quot;all&quot;</span>
<a href="#l16.417"></a><span id="l16.417" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.418"></a><span id="l16.418" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.419"></a><span id="l16.419" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.all.label;&quot;</span>
<a href="#l16.420"></a><span id="l16.420" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.all.accesskey;&quot;/&gt;</span>
<a href="#l16.421"></a><span id="l16.421" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterToday&quot;</span>
<a href="#l16.422"></a><span id="l16.422" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.423"></a><span id="l16.423" class="difflineplus">+                  value=&quot;today&quot;</span>
<a href="#l16.424"></a><span id="l16.424" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.425"></a><span id="l16.425" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.426"></a><span id="l16.426" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.today.label;&quot;</span>
<a href="#l16.427"></a><span id="l16.427" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.today.accesskey;&quot;/&gt;</span>
<a href="#l16.428"></a><span id="l16.428" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterNext7days&quot;</span>
<a href="#l16.429"></a><span id="l16.429" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.430"></a><span id="l16.430" class="difflineplus">+                  value=&quot;next7days&quot;</span>
<a href="#l16.431"></a><span id="l16.431" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.432"></a><span id="l16.432" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.433"></a><span id="l16.433" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.next7days.label;&quot;</span>
<a href="#l16.434"></a><span id="l16.434" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.next7days.accesskey;&quot;/&gt;</span>
<a href="#l16.435"></a><span id="l16.435" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterNotstartedtasks&quot;</span>
<a href="#l16.436"></a><span id="l16.436" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.437"></a><span id="l16.437" class="difflineplus">+                  value=&quot;notstarted&quot;</span>
<a href="#l16.438"></a><span id="l16.438" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.439"></a><span id="l16.439" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.440"></a><span id="l16.440" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.notstarted.label;&quot;</span>
<a href="#l16.441"></a><span id="l16.441" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.notstarted.accesskey;&quot;/&gt;</span>
<a href="#l16.442"></a><span id="l16.442" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterOverdue&quot;</span>
<a href="#l16.443"></a><span id="l16.443" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.444"></a><span id="l16.444" class="difflineplus">+                  value=&quot;overdue&quot;</span>
<a href="#l16.445"></a><span id="l16.445" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.446"></a><span id="l16.446" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.447"></a><span id="l16.447" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.overdue.label;&quot;</span>
<a href="#l16.448"></a><span id="l16.448" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.overdue.accesskey;&quot;/&gt;</span>
<a href="#l16.449"></a><span id="l16.449" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterCompleted&quot;</span>
<a href="#l16.450"></a><span id="l16.450" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.451"></a><span id="l16.451" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.452"></a><span id="l16.452" class="difflineplus">+                  value=&quot;completed&quot;</span>
<a href="#l16.453"></a><span id="l16.453" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.454"></a><span id="l16.454" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.completed.label;&quot;</span>
<a href="#l16.455"></a><span id="l16.455" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.completed.accesskey;&quot;/&gt;</span>
<a href="#l16.456"></a><span id="l16.456" class="difflineplus">+        &lt;menuitem id=&quot;ltnTasksViewFilterOpen&quot;</span>
<a href="#l16.457"></a><span id="l16.457" class="difflineplus">+                  name=&quot;filtergroup&quot;</span>
<a href="#l16.458"></a><span id="l16.458" class="difflineplus">+                  type=&quot;radio&quot;</span>
<a href="#l16.459"></a><span id="l16.459" class="difflineplus">+                  value=&quot;open&quot;</span>
<a href="#l16.460"></a><span id="l16.460" class="difflineplus">+                  command=&quot;calendar_task_filter_command&quot;</span>
<a href="#l16.461"></a><span id="l16.461" class="difflineplus">+                  label=&quot;&amp;calendar.task.filter.open.label;&quot;</span>
<a href="#l16.462"></a><span id="l16.462" class="difflineplus">+                  accesskey=&quot;&amp;calendar.task.filter.open.accesskey;&quot;/&gt;</span>
<a href="#l16.463"></a><span id="l16.463" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l16.464"></a><span id="l16.464" class="difflineplus">+    &lt;/menu&gt;</span>
<a href="#l16.465"></a><span id="l16.465">   &lt;/menupopup&gt;</span>
<a href="#l16.466"></a><span id="l16.466"> </span>
<a href="#l16.467"></a><span id="l16.467" class="difflineplus">+  &lt;menupopup id=&quot;menu_GoPopup&quot;&gt;</span>
<a href="#l16.468"></a><span id="l16.468" class="difflineplus">+    &lt;menuitem id=&quot;ltnGoToToday&quot;</span>
<a href="#l16.469"></a><span id="l16.469" class="difflineplus">+              insertafter=&quot;goNextSeparator&quot;</span>
<a href="#l16.470"></a><span id="l16.470" class="difflineplus">+              label=&quot;&amp;goTodayCmd.label;&quot;</span>
<a href="#l16.471"></a><span id="l16.471" class="difflineplus">+              accesskey=&quot;&amp;goTodayCmd.accesskey;&quot;</span>
<a href="#l16.472"></a><span id="l16.472" class="difflineplus">+              observes=&quot;calendar_go_to_today_command&quot;</span>
<a href="#l16.473"></a><span id="l16.473" class="difflineplus">+              key=&quot;calendar-go-to-today-key&quot;/&gt;</span>
<a href="#l16.474"></a><span id="l16.474" class="difflineplus">+  &lt;/menupopup&gt;</span>
<a href="#l16.475"></a><span id="l16.475" class="difflineplus">+</span>
<a href="#l16.476"></a><span id="l16.476" class="difflineplus">+  &lt;menupopup id=&quot;menu_GoNextPopup&quot;&gt;</span>
<a href="#l16.477"></a><span id="l16.477" class="difflineplus">+    &lt;menuseparator id=&quot;ltnGoNextSeparator&quot;/&gt;</span>
<a href="#l16.478"></a><span id="l16.478" class="difflineplus">+    &lt;!-- Label is set up automatically using the view id. When writing a</span>
<a href="#l16.479"></a><span id="l16.479" class="difflineplus">+         view extension, overlay this menuitem and add a label-&lt;myviewtype&gt;</span>
<a href="#l16.480"></a><span id="l16.480" class="difflineplus">+         attribute with the correct label --&gt;</span>
<a href="#l16.481"></a><span id="l16.481" class="difflineplus">+    &lt;menuitem id=&quot;calendar-go-menu-next&quot;</span>
<a href="#l16.482"></a><span id="l16.482" class="difflineplus">+              label=&quot;&quot;</span>
<a href="#l16.483"></a><span id="l16.483" class="difflineplus">+              label-day=&quot;&amp;lightning.toolbar.day.label;&quot;</span>
<a href="#l16.484"></a><span id="l16.484" class="difflineplus">+              label-week=&quot;&amp;lightning.toolbar.week.label;&quot;</span>
<a href="#l16.485"></a><span id="l16.485" class="difflineplus">+              label-multiweek=&quot;&amp;lightning.toolbar.week.label;&quot;</span>
<a href="#l16.486"></a><span id="l16.486" class="difflineplus">+              label-month=&quot;&amp;lightning.toolbar.month.label;&quot;</span>
<a href="#l16.487"></a><span id="l16.487" class="difflineplus">+              accesskey-day=&quot;&amp;lightning.toolbar.day.accesskey;&quot;</span>
<a href="#l16.488"></a><span id="l16.488" class="difflineplus">+              accesskey-week=&quot;&amp;lightning.toolbar.week.accesskey;&quot;</span>
<a href="#l16.489"></a><span id="l16.489" class="difflineplus">+              accesskey-multiweek=&quot;&amp;lightning.toolbar.week.accesskey;&quot;</span>
<a href="#l16.490"></a><span id="l16.490" class="difflineplus">+              accesskey-month=&quot;&amp;lightning.toolbar.month.accesskey;&quot;</span>
<a href="#l16.491"></a><span id="l16.491" class="difflineplus">+              observes=&quot;calendar_view_next_command&quot;/&gt;</span>
<a href="#l16.492"></a><span id="l16.492" class="difflineplus">+  &lt;/menupopup&gt;</span>
<a href="#l16.493"></a><span id="l16.493" class="difflineplus">+  &lt;menupopup id=&quot;menu_GoPreviousPopup&quot;&gt;</span>
<a href="#l16.494"></a><span id="l16.494" class="difflineplus">+    &lt;menuseparator id=&quot;ltnGoPreviousSeparator&quot;/&gt;</span>
<a href="#l16.495"></a><span id="l16.495" class="difflineplus">+    &lt;!-- Label is set up automatically using the view id. When writing a</span>
<a href="#l16.496"></a><span id="l16.496" class="difflineplus">+         view extension, overlay this menuitem and add a label-&lt;myviewtype&gt;</span>
<a href="#l16.497"></a><span id="l16.497" class="difflineplus">+         attribute with the correct label --&gt;</span>
<a href="#l16.498"></a><span id="l16.498" class="difflineplus">+    &lt;menuitem id=&quot;calendar-go-menu-previous&quot;</span>
<a href="#l16.499"></a><span id="l16.499" class="difflineplus">+              label=&quot;&quot;</span>
<a href="#l16.500"></a><span id="l16.500" class="difflineplus">+              label-day=&quot;&amp;lightning.toolbar.day.label;&quot;</span>
<a href="#l16.501"></a><span id="l16.501" class="difflineplus">+              label-week=&quot;&amp;lightning.toolbar.week.label;&quot;</span>
<a href="#l16.502"></a><span id="l16.502" class="difflineplus">+              label-multiweek=&quot;&amp;lightning.toolbar.week.label;&quot;</span>
<a href="#l16.503"></a><span id="l16.503" class="difflineplus">+              label-month=&quot;&amp;lightning.toolbar.month.label;&quot;</span>
<a href="#l16.504"></a><span id="l16.504" class="difflineplus">+              accesskey-day=&quot;&amp;lightning.toolbar.day.accesskey;&quot;</span>
<a href="#l16.505"></a><span id="l16.505" class="difflineplus">+              accesskey-week=&quot;&amp;lightning.toolbar.week.accesskey;&quot;</span>
<a href="#l16.506"></a><span id="l16.506" class="difflineplus">+              accesskey-multiweek=&quot;&amp;lightning.toolbar.week.accesskey;&quot;</span>
<a href="#l16.507"></a><span id="l16.507" class="difflineplus">+              accesskey-month=&quot;&amp;lightning.toolbar.month.accesskey;&quot;</span>
<a href="#l16.508"></a><span id="l16.508" class="difflineplus">+              observes=&quot;calendar_view_prev_command&quot;/&gt;</span>
<a href="#l16.509"></a><span id="l16.509" class="difflineplus">+  &lt;/menupopup&gt;</span>
<a href="#l16.510"></a><span id="l16.510" class="difflineplus">+</span>
<a href="#l16.511"></a><span id="l16.511" class="difflineplus">+  &lt;menubar id=&quot;mail-menubar&quot;&gt;</span>
<a href="#l16.512"></a><span id="l16.512" class="difflineplus">+    &lt;menu id=&quot;menu_Event_Task&quot;</span>
<a href="#l16.513"></a><span id="l16.513" class="difflineplus">+          label=&quot;&amp;lightning.menu.eventtask.label;&quot;</span>
<a href="#l16.514"></a><span id="l16.514" class="difflineplus">+          accesskey=&quot;&amp;lightning.menu.eventtask.accesskey;&quot;</span>
<a href="#l16.515"></a><span id="l16.515" class="difflineplus">+          insertafter=&quot;messageMenu&quot;&gt;</span>
<a href="#l16.516"></a><span id="l16.516" class="difflineplus">+      &lt;menupopup id=&quot;menu_Event_Task_Popup&quot; onpopupshowing=&quot;changeMenuForTask(event)&quot;&gt;</span>
<a href="#l16.517"></a><span id="l16.517" class="difflineplus">+        &lt;menuitem id=&quot;ltnNewEvent2&quot;</span>
<a href="#l16.518"></a><span id="l16.518" class="difflineplus">+                  label=&quot;&amp;event.new.event;&quot;</span>
<a href="#l16.519"></a><span id="l16.519" class="difflineplus">+                  accesskey=&quot;&amp;event.new.event.accesskey;&quot;</span>
<a href="#l16.520"></a><span id="l16.520" class="difflineplus">+                  key=&quot;calendar-new-event-key&quot;</span>
<a href="#l16.521"></a><span id="l16.521" class="difflineplus">+                  command=&quot;calendar_new_event_command&quot;</span>
<a href="#l16.522"></a><span id="l16.522" class="difflineplus">+                  observes=&quot;calendar_new_event_command&quot;/&gt;</span>
<a href="#l16.523"></a><span id="l16.523" class="difflineplus">+        &lt;menuitem id=&quot;ltnNewTask2&quot;</span>
<a href="#l16.524"></a><span id="l16.524" class="difflineplus">+                  label=&quot;&amp;event.new.todo;&quot;</span>
<a href="#l16.525"></a><span id="l16.525" class="difflineplus">+                  accesskey=&quot;&amp;event.new.todo.accesskey;&quot;</span>
<a href="#l16.526"></a><span id="l16.526" class="difflineplus">+                  key=&quot;calendar-new-todo-key&quot;</span>
<a href="#l16.527"></a><span id="l16.527" class="difflineplus">+                  command=&quot;calendar_new_todo_command&quot;</span>
<a href="#l16.528"></a><span id="l16.528" class="difflineplus">+                  observes=&quot;calendar_new_todo_command&quot;/&gt;</span>
<a href="#l16.529"></a><span id="l16.529" class="difflineplus">+        &lt;menuseparator id=&quot;before-Calendar-Mode-Section&quot;/&gt;</span>
<a href="#l16.530"></a><span id="l16.530" class="difflineplus">+        &lt;menuitem id=&quot;ltnMenuSwitchToCalendar&quot;</span>
<a href="#l16.531"></a><span id="l16.531" class="difflineplus">+                  label=&quot;&amp;lightning.toolbar.calendar.label;&quot;</span>
<a href="#l16.532"></a><span id="l16.532" class="difflineplus">+                  accesskey=&quot;&amp;lightning.toolbar.calendar.accesskey;&quot;</span>
<a href="#l16.533"></a><span id="l16.533" class="difflineplus">+                  command=&quot;switch2calendar&quot;</span>
<a href="#l16.534"></a><span id="l16.534" class="difflineplus">+                  key=&quot;openLightningKey&quot;/&gt;</span>
<a href="#l16.535"></a><span id="l16.535" class="difflineplus">+        &lt;menuitem id=&quot;ltnMenuSwitchToTask&quot;</span>
<a href="#l16.536"></a><span id="l16.536" class="difflineplus">+                  label=&quot;&amp;lightning.toolbar.task.label;&quot;</span>
<a href="#l16.537"></a><span id="l16.537" class="difflineplus">+                  accesskey=&quot;&amp;lightning.toolbar.task.accesskey;&quot;</span>
<a href="#l16.538"></a><span id="l16.538" class="difflineplus">+                  command=&quot;switch2task&quot;</span>
<a href="#l16.539"></a><span id="l16.539" class="difflineplus">+                  key=&quot;openTasksKey&quot;/&gt;</span>
<a href="#l16.540"></a><span id="l16.540" class="difflineplus">+        &lt;menuseparator id=&quot;ltnBeforeCalendarSection&quot;/&gt;</span>
<a href="#l16.541"></a><span id="l16.541" class="difflineplus">+        &lt;!-- Menuitems have different schema just to match sunbird --&gt;</span>
<a href="#l16.542"></a><span id="l16.542" class="difflineplus">+        &lt;menuitem id=&quot;calendar-export-menu&quot;</span>
<a href="#l16.543"></a><span id="l16.543" class="difflineplus">+                  label=&quot;&amp;calendar.export.label;&quot;</span>
<a href="#l16.544"></a><span id="l16.544" class="difflineplus">+                  accesskey=&quot;&amp;calendar.export.accesskey;&quot;</span>
<a href="#l16.545"></a><span id="l16.545" class="difflineplus">+                  command=&quot;calendar_export_command&quot;</span>
<a href="#l16.546"></a><span id="l16.546" class="difflineplus">+                  observes=&quot;calendar_export_command&quot;/&gt;</span>
<a href="#l16.547"></a><span id="l16.547" class="difflineplus">+        &lt;menuitem id=&quot;calendar-import-menu&quot;</span>
<a href="#l16.548"></a><span id="l16.548" class="difflineplus">+                  label=&quot;&amp;calendar.import.label;&quot;</span>
<a href="#l16.549"></a><span id="l16.549" class="difflineplus">+                  accesskey=&quot;&amp;calendar.import.accesskey;&quot;</span>
<a href="#l16.550"></a><span id="l16.550" class="difflineplus">+                  command=&quot;calendar_import_command&quot;</span>
<a href="#l16.551"></a><span id="l16.551" class="difflineplus">+                  observes=&quot;calendar_import_command&quot;/&gt;</span>
<a href="#l16.552"></a><span id="l16.552" class="difflineplus">+        &lt;menuitem id=&quot;ltnPublishCalendar&quot;</span>
<a href="#l16.553"></a><span id="l16.553" class="difflineplus">+                  label=&quot;&amp;calendar.publish.label;&quot;</span>
<a href="#l16.554"></a><span id="l16.554" class="difflineplus">+                  accesskey=&quot;&amp;calendar.publish.accesskey;&quot;</span>
<a href="#l16.555"></a><span id="l16.555" class="difflineplus">+                  commmand=&quot;calendar_publish_calendar_command&quot;</span>
<a href="#l16.556"></a><span id="l16.556" class="difflineplus">+                  observes=&quot;calendar_publish_calendar_command&quot;/&gt;</span>
<a href="#l16.557"></a><span id="l16.557" class="difflineplus">+        &lt;menuitem id=&quot;ltnDeleteSelectedCalendar&quot;</span>
<a href="#l16.558"></a><span id="l16.558" class="difflineplus">+                  label=&quot;&amp;calendar.deletecalendar.label;&quot;</span>
<a href="#l16.559"></a><span id="l16.559" class="difflineplus">+                  accesskey=&quot;&amp;calendar.deletecalendar.accesskey;&quot;</span>
<a href="#l16.560"></a><span id="l16.560" class="difflineplus">+                  command=&quot;calendar_delete_calendar_command&quot;</span>
<a href="#l16.561"></a><span id="l16.561" class="difflineplus">+                  observes=&quot;calendar_delete_calendar_command&quot;/&gt;</span>
<a href="#l16.562"></a><span id="l16.562" class="difflineplus">+        &lt;menuseparator id=&quot;ltnBeforeTaskActions&quot;/&gt;</span>
<a href="#l16.563"></a><span id="l16.563" class="difflineplus">+        &lt;menuitem id=&quot;ltnTaskActionsMarkCompletedMenuitem&quot;</span>
<a href="#l16.564"></a><span id="l16.564" class="difflineplus">+                  type=&quot;checkbox&quot;</span>
<a href="#l16.565"></a><span id="l16.565" class="difflineplus">+                  label=&quot;&amp;calendar.context.markcompleted.label;&quot;</span>
<a href="#l16.566"></a><span id="l16.566" class="difflineplus">+                  accesskey=&quot;&amp;calendar.context.markcompleted.accesskey;&quot;</span>
<a href="#l16.567"></a><span id="l16.567" class="difflineplus">+                  command=&quot;calendar_toggle_completed_command&quot;</span>
<a href="#l16.568"></a><span id="l16.568" class="difflineplus">+                  observes=&quot;calendar_toggle_completed_command&quot;/&gt;</span>
<a href="#l16.569"></a><span id="l16.569" class="difflineplus">+        &lt;menu id=&quot;ltnTaskActionsPriorityMenuitem&quot;</span>
<a href="#l16.570"></a><span id="l16.570" class="difflineplus">+              label=&quot;&amp;calendar.context.priority.label;&quot;</span>
<a href="#l16.571"></a><span id="l16.571" class="difflineplus">+              accesskey=&quot;&amp;calendar.context.priority.accesskey;&quot;</span>
<a href="#l16.572"></a><span id="l16.572" class="difflineplus">+              command=&quot;calendar_general-priority_command&quot;</span>
<a href="#l16.573"></a><span id="l16.573" class="difflineplus">+              observes=&quot;calendar_general-priority_command&quot;&gt;</span>
<a href="#l16.574"></a><span id="l16.574" class="difflineplus">+          &lt;menupopup type=&quot;task-priority&quot;/&gt;</span>
<a href="#l16.575"></a><span id="l16.575" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l16.576"></a><span id="l16.576" class="difflineplus">+        &lt;menu id=&quot;ltnTaskActionsProgressMenuitem&quot;</span>
<a href="#l16.577"></a><span id="l16.577" class="difflineplus">+              label=&quot;&amp;calendar.context.progress.label;&quot;</span>
<a href="#l16.578"></a><span id="l16.578" class="difflineplus">+              accesskey=&quot;&amp;calendar.context.progress.accesskey;&quot;</span>
<a href="#l16.579"></a><span id="l16.579" class="difflineplus">+              command=&quot;calendar_general-progress_command&quot;</span>
<a href="#l16.580"></a><span id="l16.580" class="difflineplus">+              observes=&quot;calendar_general-progress_command&quot;&gt;</span>
<a href="#l16.581"></a><span id="l16.581" class="difflineplus">+          &lt;menupopup type=&quot;task-progress&quot;/&gt;</span>
<a href="#l16.582"></a><span id="l16.582" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l16.583"></a><span id="l16.583" class="difflineplus">+        &lt;menuseparator id=&quot;ltnBeforeUnifinderSection&quot; /&gt;</span>
<a href="#l16.584"></a><span id="l16.584" class="difflineplus">+        &lt;!-- menuitem has different schema just to match sunbird --&gt;</span>
<a href="#l16.585"></a><span id="l16.585" class="difflineplus">+        &lt;menuitem id=&quot;calendar-show-unifinder-menu&quot;</span>
<a href="#l16.586"></a><span id="l16.586" class="difflineplus">+                  type=&quot;checkbox&quot;</span>
<a href="#l16.587"></a><span id="l16.587" class="difflineplus">+                  checked=&quot;true&quot;</span>
<a href="#l16.588"></a><span id="l16.588" class="difflineplus">+                  label=&quot;&amp;showUnifinderCmd.label;&quot;</span>
<a href="#l16.589"></a><span id="l16.589" class="difflineplus">+                  accesskey=&quot;&amp;showUnifinderCmd.accesskey;&quot;</span>
<a href="#l16.590"></a><span id="l16.590" class="difflineplus">+                  command=&quot;calendar_show_unifinder_command&quot;/&gt;</span>
<a href="#l16.591"></a><span id="l16.591" class="difflineplus">+      &lt;/menupopup&gt;</span>
<a href="#l16.592"></a><span id="l16.592" class="difflineplus">+    &lt;/menu&gt;</span>
<a href="#l16.593"></a><span id="l16.593" class="difflineplus">+  &lt;/menubar&gt;</span>
<a href="#l16.594"></a><span id="l16.594" class="difflineplus">+</span>
<a href="#l16.595"></a><span id="l16.595">   &lt;window id=&quot;messengerWindow&quot;&gt;</span>
<a href="#l16.596"></a><span id="l16.596"> </span>
<a href="#l16.597"></a><span id="l16.597" class="difflineminus">-    &lt;broadcasterset id=&quot;calendar_broadcasters&quot;&gt;</span>
<a href="#l16.598"></a><span id="l16.598" class="difflineminus">-      &lt;broadcaster id=&quot;filterBroadcaster&quot; value=&quot;all&quot;/&gt;</span>
<a href="#l16.599"></a><span id="l16.599" class="difflineminus">-    &lt;/broadcasterset&gt;</span>
<a href="#l16.600"></a><span id="l16.600" class="difflineminus">-</span>
<a href="#l16.601"></a><span id="l16.601">     &lt;!-- Be sure to keep these sets, since they will be overlayed by</span>
<a href="#l16.602"></a><span id="l16.602">          calendar/base/content/calendar-common-sets.xul --&gt;</span>
<a href="#l16.603"></a><span id="l16.603">     &lt;commandset id=&quot;calendar_commands&quot;&gt;</span>
<a href="#l16.604"></a><span id="l16.604">       &lt;command id=&quot;agenda_delete_event_command&quot; oncommand=&quot;agendaListbox.deleteSelectedItem(false);&quot;/&gt;</span>
<a href="#l16.605"></a><span id="l16.605">       &lt;command id=&quot;agenda_edit_event_command&quot; oncommand=&quot;agendaListbox.editSelectedItem(event);&quot;/&gt;</span>
<a href="#l16.606"></a><span id="l16.606">       &lt;command id=&quot;switch2mail&quot; checked=&quot;true&quot;</span>
<a href="#l16.607"></a><span id="l16.607">         oncommand=&quot;document.getElementById('tabmail').selectTabByMode('folder')&quot;/&gt;</span>
<a href="#l16.608"></a><span id="l16.608">       &lt;command id=&quot;switch2calendar&quot;</span>
<a href="#l16.609"></a><span id="l16.609">         oncommand=&quot;document.getElementById('tabmail').openTab('calendar', document.getElementById('calendar-tab-button').getAttribute('tooltiptext'))&quot;/&gt;</span>
<a href="#l16.610"></a><span id="l16.610">       &lt;command id=&quot;switch2task&quot;</span>
<a href="#l16.611"></a><span id="l16.611">         oncommand=&quot;document.getElementById('tabmail').openTab('tasks', document.getElementById('task-tab-button').getAttribute('tooltiptext'))&quot;/&gt;</span>
<a href="#l16.612"></a><span id="l16.612">       &lt;command id=&quot;new_calendar_tab&quot;</span>
<a href="#l16.613"></a><span id="l16.613">         oncommand=&quot;document.getElementById('tabmail').openTab('calendar', document.getElementById('calendar-tab-button').getAttribute('tooltiptext'))&quot;/&gt;</span>
<a href="#l16.614"></a><span id="l16.614">       &lt;command id=&quot;new_task_tab&quot;</span>
<a href="#l16.615"></a><span id="l16.615">         oncommand=&quot;document.getElementById('tabmail').openTab('tasks', document.getElementById('task-tab-button').getAttribute('tooltiptext'))&quot;/&gt;</span>
<a href="#l16.616"></a><span id="l16.616" class="difflineplus">+      &lt;command id=&quot;calendar_go_to_today_command&quot;</span>
<a href="#l16.617"></a><span id="l16.617" class="difflineplus">+               oncommand=&quot;document.getElementById('tabmail').openTab('calendar', document.getElementById('calendar-tab-button').getAttribute('tooltiptext')); goToDate(now())&quot;/&gt;</span>
<a href="#l16.618"></a><span id="l16.618">     &lt;/commandset&gt;</span>
<a href="#l16.619"></a><span id="l16.619"> </span>
<a href="#l16.620"></a><span id="l16.620">     &lt;keyset id=&quot;calendar-keys&quot;&gt;</span>
<a href="#l16.621"></a><span id="l16.621">       &lt;key id=&quot;openLightningKey&quot; modifiers=&quot;accel&quot; key=&quot;3&quot; observes=&quot;new_calendar_tab&quot;/&gt;</span>
<a href="#l16.622"></a><span id="l16.622">       &lt;key id=&quot;openTasksKey&quot; modifiers=&quot;accel&quot; key=&quot;4&quot; command=&quot;new_task_tab&quot;/&gt;</span>
<a href="#l16.623"></a><span id="l16.623">       &lt;key id=&quot;todaypanekey&quot; command=&quot;calendar_toggle_todaypane_command&quot; keycode=&quot;VK_F11&quot;/&gt;</span>
<a href="#l16.624"></a><span id="l16.624">       &lt;key id=&quot;calendar-new-event-key&quot; key=&quot;&amp;lightning.keys.event.new;&quot; modifiers=&quot;accel&quot; command=&quot;calendar_new_event_command&quot;/&gt;</span>
<a href="#l16.625"></a><span id="l16.625">       &lt;key id=&quot;calendar-new-todo-key&quot; key=&quot;&amp;lightning.keys.todo.new;&quot; modifiers=&quot;accel&quot; command=&quot;calendar_new_todo_command&quot;/&gt;</span>
<a href="#l16.626"></a><span id="l16.626">     &lt;/keyset&gt;</span>
<a href="#l16.627"></a><span id="l16.627"> </span>
<a href="#l16.628"></a><span id="l16.628" class="difflineminus">-    &lt;popupset id=&quot;calendar-popupset&quot;&gt;</span>
<a href="#l16.629"></a><span id="l16.629" class="difflineminus">-      &lt;menupopup id=&quot;calendar-GoPopupMenu&quot;&gt;</span>
<a href="#l16.630"></a><span id="l16.630" class="difflineminus">-         &lt;menuitem id=&quot;ltnGoToToday&quot;</span>
<a href="#l16.631"></a><span id="l16.631" class="difflineminus">-                   label=&quot;&amp;goTodayCmd.label;&quot;</span>
<a href="#l16.632"></a><span id="l16.632" class="difflineminus">-                   accesskey=&quot;&amp;goTodayCmd.accesskey;&quot;</span>
<a href="#l16.633"></a><span id="l16.633" class="difflineminus">-                   mode=&quot;calendar&quot;</span>
<a href="#l16.634"></a><span id="l16.634" class="difflineminus">-                   observes=&quot;calendar_go_to_today_command&quot;</span>
<a href="#l16.635"></a><span id="l16.635" class="difflineminus">-                   key=&quot;calendar-go-to-today-key&quot;/&gt;</span>
<a href="#l16.636"></a><span id="l16.636" class="difflineminus">-         &lt;menuseparator id=&quot;before-ModeMenuItems&quot;/&gt;</span>
<a href="#l16.637"></a><span id="l16.637" class="difflineminus">-         &lt;menuitem id=&quot;ltnMenu_mail&quot;</span>
<a href="#l16.638"></a><span id="l16.638" class="difflineminus">-                   type=&quot;radio&quot;</span>
<a href="#l16.639"></a><span id="l16.639" class="difflineminus">-                   name=&quot;modemenu&quot;</span>
<a href="#l16.640"></a><span id="l16.640" class="difflineminus">-                   label=&quot;&amp;lightning.toolbar.mail.label;&quot;</span>
<a href="#l16.641"></a><span id="l16.641" class="difflineminus">-                   accesskey=&quot;&amp;lightning.toolbar.mail.accesskey;&quot;</span>
<a href="#l16.642"></a><span id="l16.642" class="difflineminus">-                   command=&quot;switch2mail&quot;</span>
<a href="#l16.643"></a><span id="l16.643" class="difflineminus">-                   key=&quot;key_mail&quot; modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l16.644"></a><span id="l16.644" class="difflineminus">-         &lt;menuitem id=&quot;ltnMenu_calendar&quot;</span>
<a href="#l16.645"></a><span id="l16.645" class="difflineminus">-                   type=&quot;radio&quot;</span>
<a href="#l16.646"></a><span id="l16.646" class="difflineminus">-                   name=&quot;modemenu&quot;</span>
<a href="#l16.647"></a><span id="l16.647" class="difflineminus">-                   label=&quot;&amp;lightning.toolbar.calendar.label;&quot;</span>
<a href="#l16.648"></a><span id="l16.648" class="difflineminus">-                   accesskey=&quot;&amp;lightning.toolbar.calendar.accesskey;&quot;</span>
<a href="#l16.649"></a><span id="l16.649" class="difflineminus">-                   command=&quot;switch2calendar&quot;</span>
<a href="#l16.650"></a><span id="l16.650" class="difflineminus">-                   key=&quot;openLightningKey&quot;/&gt;</span>
<a href="#l16.651"></a><span id="l16.651" class="difflineminus">-         &lt;menuitem id=&quot;ltnMenu_tasks&quot;</span>
<a href="#l16.652"></a><span id="l16.652" class="difflineminus">-                   type=&quot;radio&quot;</span>
<a href="#l16.653"></a><span id="l16.653" class="difflineminus">-                   name=&quot;modemenu&quot;</span>
<a href="#l16.654"></a><span id="l16.654" class="difflineminus">-                   label=&quot;&amp;lightning.toolbar.task.label;&quot;</span>
<a href="#l16.655"></a><span id="l16.655" class="difflineminus">-                   accesskey=&quot;&amp;lightning.toolbar.task.accesskey;&quot;</span>
<a href="#l16.656"></a><span id="l16.656" class="difflineminus">-                   command=&quot;switch2task&quot;</span>
<a href="#l16.657"></a><span id="l16.657" class="difflineminus">-                   key=&quot;openTasksKey&quot;/&gt;</span>
<a href="#l16.658"></a><span id="l16.658" class="difflineminus">-         &lt;menuseparator id=&quot;before-AddressBook&quot;/&gt;</span>
<a href="#l16.659"></a><span id="l16.659" class="difflineminus">-         &lt;menuitem id=&quot;addressBook-calendar&quot; label=&quot;&amp;addressBookCmd.label;&quot;</span>
<a href="#l16.660"></a><span id="l16.660" class="difflineminus">-                   accesskey=&quot;&amp;addressBookCmd.accesskey;&quot;</span>
<a href="#l16.661"></a><span id="l16.661" class="difflineminus">-                   key=&quot;key_addressbook&quot;</span>
<a href="#l16.662"></a><span id="l16.662" class="difflineminus">-                   oncommand=&quot;toAddressBook();&quot;/&gt;</span>
<a href="#l16.663"></a><span id="l16.663" class="difflineminus">-      &lt;/menupopup&gt;</span>
<a href="#l16.664"></a><span id="l16.664" class="difflineminus">-      &lt;menupopup id=&quot;calendarCalendarPopupMenu&quot;&gt;</span>
<a href="#l16.665"></a><span id="l16.665" class="difflineminus">-          &lt;menuitem id=&quot;ltnNewEvent2&quot; label=&quot;&amp;event.new.event;&quot;</span>
<a href="#l16.666"></a><span id="l16.666" class="difflineminus">-               accesskey=&quot;&amp;event.new.event.accesskey;&quot;</span>
<a href="#l16.667"></a><span id="l16.667" class="difflineminus">-               key=&quot;calendar-new-event-key&quot;</span>
<a href="#l16.668"></a><span id="l16.668" class="difflineminus">-               observes=&quot;calendar_new_event_command&quot;</span>
<a href="#l16.669"></a><span id="l16.669" class="difflineminus">-               command=&quot;calendar_new_event_command&quot;</span>
<a href="#l16.670"></a><span id="l16.670" class="difflineminus">-               position=&quot;2&quot;/&gt;</span>
<a href="#l16.671"></a><span id="l16.671" class="difflineminus">-          &lt;menuitem id=&quot;ltnNewTask2&quot; label=&quot;&amp;event.new.todo;&quot;</span>
<a href="#l16.672"></a><span id="l16.672" class="difflineminus">-               accesskey=&quot;&amp;event.new.todo.accesskey;&quot;</span>
<a href="#l16.673"></a><span id="l16.673" class="difflineminus">-               key=&quot;calendar-new-todo-key&quot;</span>
<a href="#l16.674"></a><span id="l16.674" class="difflineminus">-               observes=&quot;calendar_new_todo_command&quot;</span>
<a href="#l16.675"></a><span id="l16.675" class="difflineminus">-               command=&quot;calendar_new_todo_command&quot;</span>
<a href="#l16.676"></a><span id="l16.676" class="difflineminus">-               position=&quot;3&quot;/&gt;</span>
<a href="#l16.677"></a><span id="l16.677" class="difflineminus">-         &lt;menuseparator id=&quot;firstCalendarSeparator&quot; mode=&quot;calendar&quot;/&gt;</span>
<a href="#l16.678"></a><span id="l16.678" class="difflineminus">-         &lt;menuitem id=&quot;publishCalendar&quot;</span>
<a href="#l16.679"></a><span id="l16.679" class="difflineminus">-                   label=&quot;&amp;calendar.publish.label;&quot;</span>
<a href="#l16.680"></a><span id="l16.680" class="difflineminus">-                   accesskey=&quot;&amp;calendar.publish.accesskey;&quot;</span>
<a href="#l16.681"></a><span id="l16.681" class="difflineminus">-                   commmand=&quot;calendar_publish_calendar_command&quot;</span>
<a href="#l16.682"></a><span id="l16.682" class="difflineminus">-                   observes=&quot;calendar_publish_calendar_command&quot;/&gt;</span>
<a href="#l16.683"></a><span id="l16.683" class="difflineminus">-         &lt;menuseparator id=&quot;afterSubscription&quot;/&gt;</span>
<a href="#l16.684"></a><span id="l16.684" class="difflineminus">-         &lt;menuitem label=&quot;&amp;calendar.context.newserver.label;&quot;</span>
<a href="#l16.685"></a><span id="l16.685" class="difflineminus">-                   id=&quot;calpopup-new&quot;</span>
<a href="#l16.686"></a><span id="l16.686" class="difflineminus">-                   accesskey=&quot;&amp;calendar.context.newserver.accesskey;&quot;</span>
<a href="#l16.687"></a><span id="l16.687" class="difflineminus">-                   command=&quot;calendar_new_calendar_command&quot;</span>
<a href="#l16.688"></a><span id="l16.688" class="difflineminus">-                   observes=&quot;calendar_new_calendar_command&quot;/&gt;</span>
<a href="#l16.689"></a><span id="l16.689" class="difflineminus">-        &lt;menuitem id=&quot;ltnDeleteSelectedCalendar&quot;</span>
<a href="#l16.690"></a><span id="l16.690" class="difflineminus">-                  label=&quot;&amp;calendar.context.deleteserver.label;&quot;</span>
<a href="#l16.691"></a><span id="l16.691" class="difflineminus">-                  accesskey=&quot;&amp;calendar.context.deleteserver.accesskey;&quot;</span>
<a href="#l16.692"></a><span id="l16.692" class="difflineminus">-                  command=&quot;calendar_delete_calendar_command&quot;</span>
<a href="#l16.693"></a><span id="l16.693" class="difflineminus">-                  observes=&quot;calendar_delete_calendar_command&quot;/&gt;</span>
<a href="#l16.694"></a><span id="l16.694" class="difflineminus">-        &lt;menuseparator id=&quot;beforeProperties&quot;/&gt;</span>
<a href="#l16.695"></a><span id="l16.695" class="difflineminus">-         &lt;menuitem label=&quot;&amp;calendar.properties.label;&quot;</span>
<a href="#l16.696"></a><span id="l16.696" class="difflineminus">-                   id=&quot;calendarproperties&quot;</span>
<a href="#l16.697"></a><span id="l16.697" class="difflineminus">-                   accesskey=&quot;&amp;calendar.properties.accesskey;&quot;</span>
<a href="#l16.698"></a><span id="l16.698" class="difflineminus">-                   command=&quot;calendar_edit_calendar_command&quot;</span>
<a href="#l16.699"></a><span id="l16.699" class="difflineminus">-                   observes=&quot;calendar_edit_calendar_command&quot;/&gt;</span>
<a href="#l16.700"></a><span id="l16.700" class="difflineminus">-      &lt;/menupopup&gt;</span>
<a href="#l16.701"></a><span id="l16.701" class="difflineminus">-    &lt;/popupset&gt;</span>
<a href="#l16.702"></a><span id="l16.702" class="difflineplus">+    &lt;broadcasterset id=&quot;calendar_broadcasters&quot;&gt;</span>
<a href="#l16.703"></a><span id="l16.703" class="difflineplus">+      &lt;broadcaster id=&quot;filterBroadcaster&quot; value=&quot;all&quot;/&gt;</span>
<a href="#l16.704"></a><span id="l16.704" class="difflineplus">+    &lt;/broadcasterset&gt;</span>
<a href="#l16.705"></a><span id="l16.705" class="difflineplus">+</span>
<a href="#l16.706"></a><span id="l16.706" class="difflineplus">+    &lt;popupset id=&quot;calendar-popupset&quot;/&gt;</span>
<a href="#l16.707"></a><span id="l16.707">   &lt;/window&gt;</span>
<a href="#l16.708"></a><span id="l16.708"> </span>
<a href="#l16.709"></a><span id="l16.709">   &lt;hbox id=&quot;tabmail-buttons&quot;&gt;</span>
<a href="#l16.710"></a><span id="l16.710">     &lt;toolbarbutton id=&quot;calendar-tab-button&quot; command=&quot;new_calendar_tab&quot;</span>
<a href="#l16.711"></a><span id="l16.711">       tooltiptext=&quot;&amp;lightning.toolbar.calendar.label;&quot;/&gt;</span>
<a href="#l16.712"></a><span id="l16.712">     &lt;toolbarbutton id=&quot;task-tab-button&quot; command=&quot;new_task_tab&quot;</span>
<a href="#l16.713"></a><span id="l16.713">       tooltiptext=&quot;&amp;lightning.toolbar.task.label;&quot;/&gt;</span>
<a href="#l16.714"></a><span id="l16.714">   &lt;/hbox&gt;</span>
<a href="#l16.715"></a><span id="l16.715" class="difflineplus">+</span>
<a href="#l16.716"></a><span id="l16.716">   &lt;tabpanels id=&quot;tabpanelcontainer&quot;&gt;</span>
<a href="#l16.717"></a><span id="l16.717">     &lt;vbox id=&quot;calendarTabPanel&quot;&gt;</span>
<a href="#l16.718"></a><span id="l16.718">       &lt;hbox id=&quot;calendarContent&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l16.719"></a><span id="l16.719">         &lt;vbox id=&quot;ltnSidebar&quot;</span>
<a href="#l16.720"></a><span id="l16.720">               minwidth=&quot;100&quot;</span>
<a href="#l16.721"></a><span id="l16.721">               width=&quot;200&quot;</span>
<a href="#l16.722"></a><span id="l16.722">               persist=&quot;collapsed width&quot;&gt;</span>
<a href="#l16.723"></a><span id="l16.723">           &lt;modevbox id=&quot;minimonth-pane&quot; mode=&quot;calendar,task&quot; broadcaster=&quot;modeBroadcaster&quot; refcontrol=&quot;calendar_toggle_minimonthpane_command&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-toolbar.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,150 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">- *</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">- *</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">- * License.</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">- *</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineminus">- * The Original Code is Sun Microsystems code.</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineminus">- *</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineminus">- * The Initial Developer of the Original Code is Sun Microsystems.</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2007</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">- *</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineminus">- * Contributor(s):</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">- *   Michael Buettner &lt;michael.buettner@sun.com&gt;</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">- *   Philipp Kewisch &lt;mozilla@kewis.ch&gt;</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">- *</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">- *</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-/**</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">- * Global variables</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineminus">- */</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-var gCustomizeId;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-/**</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">- * the current mode is set to a string defining the current</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">- * mode we're in. allowed values are:</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">- *  - 'mode'</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">- *  - 'mail'</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">- *  - 'calendar'</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">- *  - 'task'</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">- */</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-var gCurrentMode = 'mail';</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineminus">-</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-/**</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">- * ltnSwitch2Mail() switches to the mail mode</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineminus">- */</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-function ltnSwitch2Mail() {</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-  if (gCurrentMode != 'mail') {</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-    var switch2mail = document.getElementById(&quot;switch2mail&quot;);</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-    var switch2calendar = document.getElementById(&quot;switch2calendar&quot;);</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-    var switch2task = document.getElementById(&quot;switch2task&quot;);</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-    switch2mail.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineminus">-    switch2calendar.removeAttribute(&quot;checked&quot;);</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineminus">-    switch2task.removeAttribute(&quot;checked&quot;);</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineminus">-</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-    gCurrentMode = 'mail';</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-    swapPopupMenus();</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineminus">-    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineminus">-</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-    document.commandDispatcher.updateCommands('calendar_commands');</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-    // Disable the rotate view menuitem</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-    document.getElementById(&quot;calendar_toggle_orientation_command&quot;)</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-            .setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineminus">-    window.setCursor(&quot;auto&quot;);</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-  }</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineminus">-}</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineminus">-</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-/**</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineminus">- * ltnSwitch2Calendar() switches to the calendar mode</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">- */</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineminus">-</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineminus">-function ltnSwitch2Calendar() {</span>
<a href="#l17.88"></a><span id="l17.88" class="difflineminus">-  if (gCurrentMode != 'calendar') {</span>
<a href="#l17.89"></a><span id="l17.89" class="difflineminus">-    var switch2mail = document.getElementById(&quot;switch2mail&quot;);</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineminus">-    var switch2calendar = document.getElementById(&quot;switch2calendar&quot;);</span>
<a href="#l17.91"></a><span id="l17.91" class="difflineminus">-    var switch2task = document.getElementById(&quot;switch2task&quot;);</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineminus">-    switch2mail.removeAttribute(&quot;checked&quot;);</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineminus">-    switch2calendar.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineminus">-    switch2task.removeAttribute(&quot;checked&quot;);</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineminus">-</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineminus">-    gCurrentMode = 'calendar';    </span>
<a href="#l17.97"></a><span id="l17.97" class="difflineminus">-    swapPopupMenus();</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineminus">-    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);    </span>
<a href="#l17.99"></a><span id="l17.99" class="difflineminus">-</span>
<a href="#l17.100"></a><span id="l17.100" class="difflineminus">-    // display the calendar panel on the display deck</span>
<a href="#l17.101"></a><span id="l17.101" class="difflineminus">-    var viewBox = document.getElementById(&quot;calendar-view-box&quot;);</span>
<a href="#l17.102"></a><span id="l17.102" class="difflineminus">-    uncollapseElement(viewBox);</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineminus">-    var deck = document.getElementById(&quot;calendarDisplayDeck&quot;);</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-    deck.selectedPanel = viewBox;</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineminus">-</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineminus">-    // show the last displayed type of calendar view</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">-    showCalendarView(gLastShownCalendarView);</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineminus">-</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineminus">-    document.commandDispatcher.updateCommands('calendar_commands');</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineminus">-</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineminus">-    window.setCursor(&quot;auto&quot;);</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineminus">-  }</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineminus">-}</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineminus">-</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineminus">-/**</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineminus">- * ltnSwitch2Task() switches to the task mode</span>
<a href="#l17.117"></a><span id="l17.117" class="difflineminus">- */</span>
<a href="#l17.118"></a><span id="l17.118" class="difflineminus">-</span>
<a href="#l17.119"></a><span id="l17.119" class="difflineminus">-function ltnSwitch2Task() {</span>
<a href="#l17.120"></a><span id="l17.120" class="difflineminus">-  if (gCurrentMode != 'task') {</span>
<a href="#l17.121"></a><span id="l17.121" class="difflineminus">-    var switch2mail = document.getElementById(&quot;switch2mail&quot;);</span>
<a href="#l17.122"></a><span id="l17.122" class="difflineminus">-    var switch2calendar = document.getElementById(&quot;switch2calendar&quot;);</span>
<a href="#l17.123"></a><span id="l17.123" class="difflineminus">-    var switch2task = document.getElementById(&quot;switch2task&quot;);</span>
<a href="#l17.124"></a><span id="l17.124" class="difflineminus">-    switch2mail.removeAttribute(&quot;checked&quot;);</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineminus">-    switch2calendar.removeAttribute(&quot;checked&quot;);</span>
<a href="#l17.126"></a><span id="l17.126" class="difflineminus">-    switch2task.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l17.127"></a><span id="l17.127" class="difflineminus">-</span>
<a href="#l17.128"></a><span id="l17.128" class="difflineminus">-    gCurrentMode = 'task';</span>
<a href="#l17.129"></a><span id="l17.129" class="difflineminus">-    swapPopupMenus();</span>
<a href="#l17.130"></a><span id="l17.130" class="difflineminus">-    document.getElementById(&quot;modeBroadcaster&quot;).setAttribute(&quot;mode&quot;, gCurrentMode);    </span>
<a href="#l17.131"></a><span id="l17.131" class="difflineminus">-</span>
<a href="#l17.132"></a><span id="l17.132" class="difflineminus">-    // display the task panel on the display deck</span>
<a href="#l17.133"></a><span id="l17.133" class="difflineminus">-    var taskBox = document.getElementById(&quot;calendar-task-box&quot;);</span>
<a href="#l17.134"></a><span id="l17.134" class="difflineminus">-    uncollapseElement(taskBox);</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineminus">-    var deck = document.getElementById(&quot;calendarDisplayDeck&quot;);</span>
<a href="#l17.136"></a><span id="l17.136" class="difflineminus">-    deck.selectedPanel = taskBox;</span>
<a href="#l17.137"></a><span id="l17.137" class="difflineminus">-</span>
<a href="#l17.138"></a><span id="l17.138" class="difflineminus">-    document.commandDispatcher.updateCommands('calendar_commands');</span>
<a href="#l17.139"></a><span id="l17.139" class="difflineminus">-</span>
<a href="#l17.140"></a><span id="l17.140" class="difflineminus">-    window.setCursor(&quot;auto&quot;);</span>
<a href="#l17.141"></a><span id="l17.141" class="difflineminus">-  }</span>
<a href="#l17.142"></a><span id="l17.142" class="difflineminus">-}</span>
<a href="#l17.143"></a><span id="l17.143" class="difflineminus">-</span>
<a href="#l17.144"></a><span id="l17.144" class="difflineminus">-const gCalSetupMailContext = {</span>
<a href="#l17.145"></a><span id="l17.145" class="difflineminus">-    popup: function gCalSetupMailContext_popup() {</span>
<a href="#l17.146"></a><span id="l17.146" class="difflineminus">-        var hasSelection = (GetFirstSelectedMessage() != null);</span>
<a href="#l17.147"></a><span id="l17.147" class="difflineminus">-        // Disable the convert menu altogether.</span>
<a href="#l17.148"></a><span id="l17.148" class="difflineminus">-        setElementValue(&quot;mailContext-calendar-convert-menu&quot;,</span>
<a href="#l17.149"></a><span id="l17.149" class="difflineminus">-                        !hasSelection &amp;&amp; &quot;true&quot;, &quot;hidden&quot;);</span>
<a href="#l17.150"></a><span id="l17.150" class="difflineminus">-    }</span>
<a href="#l17.151"></a><span id="l17.151" class="difflineminus">-};</span>
<a href="#l17.152"></a><span id="l17.152" class="difflineminus">-</span>
<a href="#l17.153"></a><span id="l17.153" class="difflineminus">-</span>
<a href="#l17.154"></a><span id="l17.154" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/lightning/jar.mn</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/lightning/jar.mn</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -35,17 +35,16 @@ lightning.jar:</span>
<a href="#l18.4"></a><span id="l18.4">     content/lightning/lightning-widgets.xml                (content/lightning-widgets.xml)</span>
<a href="#l18.5"></a><span id="l18.5">     content/lightning/messenger-overlay-sidebar.css        (content/messenger-overlay-sidebar.css)</span>
<a href="#l18.6"></a><span id="l18.6">     content/lightning/messenger-overlay-accountCentral.xul (content/messenger-overlay-accountCentral.xul)</span>
<a href="#l18.7"></a><span id="l18.7">     content/lightning/messenger-overlay-messageWindow.xul  (content/messenger-overlay-messageWindow.xul)</span>
<a href="#l18.8"></a><span id="l18.8"> *   content/lightning/messenger-overlay-sidebar.js         (content/messenger-overlay-sidebar.js)</span>
<a href="#l18.9"></a><span id="l18.9"> *   content/lightning/messenger-overlay-sidebar.xul        (content/messenger-overlay-sidebar.xul)</span>
<a href="#l18.10"></a><span id="l18.10">     content/lightning/messenger-overlay-preferences.js     (content/messenger-overlay-preferences.js)</span>
<a href="#l18.11"></a><span id="l18.11">     content/lightning/messenger-overlay-preferences.xul    (content/messenger-overlay-preferences.xul)</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    content/lightning/messenger-overlay-toolbar.js         (content/messenger-overlay-toolbar.js)</span>
<a href="#l18.13"></a><span id="l18.13"> *   content/lightning/messenger-overlay-toolbar.xul        (content/messenger-overlay-toolbar.xul)</span>
<a href="#l18.14"></a><span id="l18.14"> % skin lightning classic/1.0 %skin/lightning/</span>
<a href="#l18.15"></a><span id="l18.15">     skin/lightning/imip.css                                (themes/@THEME@/imip.css)</span>
<a href="#l18.16"></a><span id="l18.16">     skin/lightning/lightning.css                           (themes/@THEME@/lightning.css)</span>
<a href="#l18.17"></a><span id="l18.17">     skin/lightning/accountCentral.css                      (themes/@THEME@/accountCentral.css)</span>
<a href="#l18.18"></a><span id="l18.18">     skin/lightning/lightning-widgets.css                   (themes/@THEME@/lightning-widgets.css)</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20"> calendar.jar:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/locales/en-US/chrome/calendar/menuOverlay.dtd</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -57,24 +57,27 @@</span>
<a href="#l19.4"></a><span id="l19.4"> &lt;!ENTITY calendar.print.label                   &quot;Print…&quot;&gt;</span>
<a href="#l19.5"></a><span id="l19.5"> &lt;!ENTITY calendar.print.key                     &quot;P&quot;&gt;</span>
<a href="#l19.6"></a><span id="l19.6"> &lt;!ENTITY calendar.print.accesskey               &quot;P&quot;&gt;</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> &lt;!ENTITY calendar.import.label                  &quot;Import…&quot;&gt;</span>
<a href="#l19.9"></a><span id="l19.9"> &lt;!ENTITY calendar.import.key                    &quot;I&quot;&gt;</span>
<a href="#l19.10"></a><span id="l19.10"> &lt;!ENTITY calendar.import.accesskey              &quot;I&quot;&gt;</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-&lt;!ENTITY calendar.export.calendar.label         &quot;Export Calendar…&quot;&gt;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-&lt;!ENTITY calendar.export.calendar.accesskey     &quot;E&quot;&gt;</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+&lt;!ENTITY calendar.export.label                  &quot;Export…&quot;&gt;</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+&lt;!ENTITY calendar.export.accesskey              &quot;E&quot;&gt;</span>
<a href="#l19.16"></a><span id="l19.16"> &lt;!ENTITY calendar.export.selection.label        &quot;Export Selection…&quot;&gt;</span>
<a href="#l19.17"></a><span id="l19.17"> &lt;!ENTITY calendar.export.selection.accesskey    &quot;S&quot;&gt;</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19"> &lt;!ENTITY calendar.publish.label                 &quot;Publish…&quot;&gt;</span>
<a href="#l19.20"></a><span id="l19.20"> &lt;!ENTITY calendar.publish.accesskey             &quot;b&quot;&gt;</span>
<a href="#l19.21"></a><span id="l19.21"> </span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+&lt;!ENTITY calendar.deletecalendar.label          &quot;Delete Selected Calendar…&quot;&gt;</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+&lt;!ENTITY calendar.deletecalendar.accesskey      &quot;D&quot;&gt;</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineplus">+</span>
<a href="#l19.25"></a><span id="l19.25"> &lt;!ENTITY calendar.menu.customize.label          &quot;Customize…&quot;&gt;</span>
<a href="#l19.26"></a><span id="l19.26"> &lt;!ENTITY calendar.menu.customize.accesskey      &quot;C&quot;&gt;</span>
<a href="#l19.27"></a><span id="l19.27"> </span>
<a href="#l19.28"></a><span id="l19.28"> &lt;!ENTITY showUnifinderCmd.label                 &quot;Find Events&quot;&gt;</span>
<a href="#l19.29"></a><span id="l19.29"> &lt;!ENTITY showUnifinderCmd.accesskey             &quot;F&quot;&gt;</span>
<a href="#l19.30"></a><span id="l19.30"> </span>
<a href="#l19.31"></a><span id="l19.31"> &lt;!ENTITY calendar.displaytodos.checkbox.label       &quot;Show Tasks in Calendar&quot;&gt;</span>
<a href="#l19.32"></a><span id="l19.32"> &lt;!ENTITY calendar.displaytodos.checkbox.accesskey   &quot;T&quot;&gt;</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineat">@@ -94,18 +97,13 @@</span>
<a href="#l19.34"></a><span id="l19.34"> &lt;!ENTITY goPreviousCmd.month.label              &quot;Previous Month&quot;&gt;</span>
<a href="#l19.35"></a><span id="l19.35"> &lt;!ENTITY goPreviousCmd.accesskey                &quot;P&quot;&gt;</span>
<a href="#l19.36"></a><span id="l19.36"> </span>
<a href="#l19.37"></a><span id="l19.37"> &lt;!ENTITY goNextCmd.day.label                    &quot;Next Day&quot;&gt;</span>
<a href="#l19.38"></a><span id="l19.38"> &lt;!ENTITY goNextCmd.week.label                   &quot;Next Week&quot;&gt;</span>
<a href="#l19.39"></a><span id="l19.39"> &lt;!ENTITY goNextCmd.month.label                  &quot;Next Month&quot;&gt;</span>
<a href="#l19.40"></a><span id="l19.40"> &lt;!ENTITY goNextCmd.all.accesskey                &quot;e&quot;&gt;</span>
<a href="#l19.41"></a><span id="l19.41"> </span>
<a href="#l19.42"></a><span id="l19.42" class="difflineminus">-&lt;!ENTITY addressBookCmd.label                   &quot;Address Book&quot;&gt;</span>
<a href="#l19.43"></a><span id="l19.43" class="difflineminus">-&lt;!ENTITY addressBookCmd.accesskey               &quot;A&quot;&gt;</span>
<a href="#l19.44"></a><span id="l19.44" class="difflineminus">-</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineminus">-&lt;!ENTITY calendar.importcalendar.label          &quot;Import Calendar…&quot;&gt;</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineminus">-</span>
<a href="#l19.47"></a><span id="l19.47"> &lt;!ENTITY showCurrentView.label                  &quot;Current View&quot;&gt;</span>
<a href="#l19.48"></a><span id="l19.48"> &lt;!ENTITY showCurrentView.accesskey              &quot;V&quot;&gt;</span>
<a href="#l19.49"></a><span id="l19.49"> </span>
<a href="#l19.50"></a><span id="l19.50"> &lt;!ENTITY calendar.properties.label              &quot;Calendar Properties…&quot;&gt;</span>
<a href="#l19.51"></a><span id="l19.51"> &lt;!ENTITY calendar.properties.accesskey          &quot;C&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/locales/en-US/chrome/lightning/lightning.dtd</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/locales/en-US/chrome/lightning/lightning.dtd</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -56,21 +56,25 @@</span>
<a href="#l20.4"></a><span id="l20.4"> &lt;!-- Open menu popup in File menu --&gt;</span>
<a href="#l20.5"></a><span id="l20.5"> &lt;!ENTITY lightning.menupopup.open.label               &quot;Open&quot;&gt;</span>
<a href="#l20.6"></a><span id="l20.6"> &lt;!ENTITY lightning.menupopup.open.accesskey           &quot;O&quot;&gt;</span>
<a href="#l20.7"></a><span id="l20.7"> &lt;!ENTITY lightning.menupopup.open.message.label       &quot;Saved Message…&quot;&gt;</span>
<a href="#l20.8"></a><span id="l20.8"> &lt;!ENTITY lightning.menupopup.open.message.accesskey   &quot;M&quot;&gt;</span>
<a href="#l20.9"></a><span id="l20.9"> &lt;!ENTITY lightning.menupopup.open.calendar.label      &quot;Calendar File…&quot;&gt;</span>
<a href="#l20.10"></a><span id="l20.10"> &lt;!ENTITY lightning.menupopup.open.calendar.accesskey  &quot;C&quot;&gt;</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-&lt;!-- Messenger Sidebar --&gt;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-&lt;!ENTITY lightning.calendar.label            &quot;Calendar&quot;&gt;</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-&lt;!ENTITY lightning.calendar.accesskey        &quot;C&quot;&gt;</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-&lt;!ENTITY lightning.tasks.label               &quot;Tasks&quot;&gt;</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-&lt;!ENTITY lightning.tasks.accesskey           &quot;T&quot;&gt;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+&lt;!-- View Menu --&gt;</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+&lt;!ENTITY lightning.menu.view.calendar.label            &quot;Calendar&quot;&gt;</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineplus">+&lt;!ENTITY lightning.menu.view.calendar.accesskey        &quot;n&quot;&gt;</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+&lt;!ENTITY lightning.menu.view.tasks.label               &quot;Tasks&quot;&gt;</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineplus">+&lt;!ENTITY lightning.menu.view.tasks.accesskey           &quot;k&quot;&gt;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+&lt;!-- Events and Tasks menu --&gt;</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineplus">+&lt;!ENTITY lightning.menu.eventtask.label                &quot;Events and Tasks&quot;&gt;</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineplus">+&lt;!ENTITY lightning.menu.eventtask.accesskey            &quot;n&quot;&gt;</span>
<a href="#l20.26"></a><span id="l20.26"> </span>
<a href="#l20.27"></a><span id="l20.27"> &lt;!-- Mode Toolbar --&gt;</span>
<a href="#l20.28"></a><span id="l20.28"> &lt;!ENTITY lightning.toolbar.mail.label         &quot;Mail&quot;&gt;</span>
<a href="#l20.29"></a><span id="l20.29"> &lt;!ENTITY lightning.toolbar.mail.accesskey     &quot;M&quot;&gt;</span>
<a href="#l20.30"></a><span id="l20.30"> &lt;!ENTITY lightning.toolbar.calendar.label     &quot;Calendar&quot;&gt;</span>
<a href="#l20.31"></a><span id="l20.31"> &lt;!ENTITY lightning.toolbar.calendar.accesskey &quot;C&quot;&gt;</span>
<a href="#l20.32"></a><span id="l20.32"> &lt;!ENTITY lightning.toolbar.task.label         &quot;Tasks&quot;&gt;</span>
<a href="#l20.33"></a><span id="l20.33"> &lt;!ENTITY lightning.toolbar.task.accesskey     &quot;T&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/locales/en-US/chrome/sunbird/menuOverlay.dtd</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -159,16 +159,19 @@</span>
<a href="#l21.4"></a><span id="l21.4"> &lt;!ENTITY releaseCmd.accesskey                              &quot;R&quot;&gt;</span>
<a href="#l21.5"></a><span id="l21.5"> </span>
<a href="#l21.6"></a><span id="l21.6"> &lt;!ENTITY aboutCmd.label                                    &quot;About &amp;brandFullName;&quot;&gt;</span>
<a href="#l21.7"></a><span id="l21.7"> &lt;!ENTITY aboutCmd.accesskey                                &quot;A&quot;&gt;</span>
<a href="#l21.8"></a><span id="l21.8"> </span>
<a href="#l21.9"></a><span id="l21.9"> &lt;!ENTITY updateCmd.label                                   &quot;Check for Updates…&quot;&gt;</span>
<a href="#l21.10"></a><span id="l21.10"> &lt;!ENTITY updateCmd.accesskey                               &quot;o&quot;&gt;</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+&lt;!ENTITY sunbird.export.calendar.label                     &quot;Export Calendar…&quot;&gt;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+&lt;!ENTITY sunbird.export.calendar.accesskey                 &quot;E&quot;&gt;</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+</span>
<a href="#l21.15"></a><span id="l21.15"> &lt;!-- Mac OS X &quot;Window&quot; menu items --&gt;</span>
<a href="#l21.16"></a><span id="l21.16"> &lt;!ENTITY windowMenu.label                                  &quot;Window&quot;&gt;</span>
<a href="#l21.17"></a><span id="l21.17"> &lt;!ENTITY minimizeWindow.label                              &quot;Minimize&quot;&gt;</span>
<a href="#l21.18"></a><span id="l21.18"> &lt;!ENTITY zoomWindow.label                                  &quot;Zoom&quot;&gt;</span>
<a href="#l21.19"></a><span id="l21.19"> &lt;!ENTITY minimizeWindow.key                                &quot;M&quot;&gt;</span>
<a href="#l21.20"></a><span id="l21.20"> &lt;!ENTITY bringAllToFront.label                             &quot;Bring All to Front&quot;&gt;</span>
<a href="#l21.21"></a><span id="l21.21"> </span>
<a href="#l21.22"></a><span id="l21.22"> &lt;!-- Mac OS X Application menu items --&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/resources/content/calendar.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/resources/content/calendar.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -240,15 +240,9 @@ function sbSwitchToView(newView) {</span>
<a href="#l22.4"></a><span id="l22.4">   if (newView == &quot;multiweek&quot;) {</span>
<a href="#l22.5"></a><span id="l22.5">       mwWeeksCommand.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l22.6"></a><span id="l22.6">   } else {</span>
<a href="#l22.7"></a><span id="l22.7">       mwWeeksCommand.setAttribute(&quot;disabled&quot;, true);</span>
<a href="#l22.8"></a><span id="l22.8">   }</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10">   // Call the common view switching code in calendar-views.js</span>
<a href="#l22.11"></a><span id="l22.11">   switchToView(newView);</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-  var labelAttribute = &quot;label-&quot; + newView + &quot;-view&quot;;</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-  var prevCommand = document.getElementById(&quot;calendar-go-menu-previous&quot;);</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-  prevCommand.setAttribute(&quot;label&quot;, prevCommand.getAttribute(labelAttribute));</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-  var nextCommand = document.getElementById(&quot;calendar-go-menu-next&quot;);</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineminus">-  nextCommand.setAttribute(&quot;label&quot;, nextCommand.getAttribute(labelAttribute));</span>
<a href="#l22.18"></a><span id="l22.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/sunbird/base/content/calendar-menubar.inc</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/sunbird/base/content/calendar-menubar.inc</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -85,18 +85,18 @@</span>
<a href="#l23.4"></a><span id="l23.4">                      accesskey=&quot;&amp;calendar.import.accesskey;&quot;</span>
<a href="#l23.5"></a><span id="l23.5">                      observes=&quot;calendar_import_command&quot;/&gt;</span>
<a href="#l23.6"></a><span id="l23.6">            &lt;!-- export: getting data out of existing files --&gt;</span>
<a href="#l23.7"></a><span id="l23.7">            &lt;menuitem id=&quot;calendar-export-menu&quot;</span>
<a href="#l23.8"></a><span id="l23.8">                      label=&quot;&amp;calendar.export.selection.label;&quot;</span>
<a href="#l23.9"></a><span id="l23.9">                      accesskey=&quot;&amp;calendar.export.selection.accesskey;&quot;</span>
<a href="#l23.10"></a><span id="l23.10">                      observes=&quot;calendar_export_selection_command&quot;/&gt;</span>
<a href="#l23.11"></a><span id="l23.11">            &lt;menuitem id=&quot;calendar-export-calendar-menu&quot;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-                     label=&quot;&amp;calendar.export.calendar.label;&quot;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-                     accesskey=&quot;&amp;calendar.export.calendar.accesskey;&quot;</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+                     label=&quot;&amp;sunbird.export.calendar.label;&quot;</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+                     accesskey=&quot;&amp;sunbird.export.calendar.accesskey;&quot;</span>
<a href="#l23.16"></a><span id="l23.16">                      observes=&quot;calendar_export_command&quot;/&gt;</span>
<a href="#l23.17"></a><span id="l23.17">            &lt;menuseparator id=&quot;calendar-importexport-sep&quot;/&gt;</span>
<a href="#l23.18"></a><span id="l23.18">            &lt;menuitem id=&quot;calendar-publish-menu&quot;</span>
<a href="#l23.19"></a><span id="l23.19">                      label=&quot;&amp;calendar.publish.selection.label;&quot;</span>
<a href="#l23.20"></a><span id="l23.20">                      accesskey=&quot;&amp;calendar.publish.selection.accesskey;&quot;</span>
<a href="#l23.21"></a><span id="l23.21">                      observes=&quot;calendar_publish_selected_events_command&quot;/&gt;</span>
<a href="#l23.22"></a><span id="l23.22">            &lt;menuitem id=&quot;calendar-publish-calendar-menu&quot;</span>
<a href="#l23.23"></a><span id="l23.23">                      label=&quot;&amp;calendar.publish.calendar.label;&quot;</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineat">@@ -345,32 +345,33 @@</span>
<a href="#l23.25"></a><span id="l23.25">                      accesskey=&quot;&amp;goTodayCmd.accesskey;&quot;</span>
<a href="#l23.26"></a><span id="l23.26">                      observes=&quot;calendar_go_to_today_command&quot;/&gt;</span>
<a href="#l23.27"></a><span id="l23.27">            &lt;menuitem id=&quot;calendar-go-menu-date&quot;</span>
<a href="#l23.28"></a><span id="l23.28">                      key=&quot;go_to_date_key&quot;</span>
<a href="#l23.29"></a><span id="l23.29">                      label=&quot;&amp;goDateCmd.label;&quot;</span>
<a href="#l23.30"></a><span id="l23.30">                      accesskey=&quot;&amp;goDateCmd.accesskey;&quot;</span>
<a href="#l23.31"></a><span id="l23.31">                      observes=&quot;go_date_command&quot;/&gt;</span>
<a href="#l23.32"></a><span id="l23.32">            &lt;menuseparator/&gt;</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineminus">-           &lt;!-- Label is set appropriate to the variable newView in </span>
<a href="#l23.34"></a><span id="l23.34" class="difflineminus">-                sbSwitchToView(newView) of calendar.js --&gt;</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineplus">+           &lt;!-- Label is set up automatically using the view id. When writing a</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineplus">+                view extension, overlay this menuitem and add a label-&lt;myviewtype&gt;</span>
<a href="#l23.37"></a><span id="l23.37" class="difflineplus">+                attribute with the correct label --&gt;</span>
<a href="#l23.38"></a><span id="l23.38">            &lt;menuitem id=&quot;calendar-go-menu-previous&quot;</span>
<a href="#l23.39"></a><span id="l23.39">                      label=&quot;&quot;</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineminus">-                     label-day-view=&quot;&amp;goPreviousCmd.day.label;&quot;</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineminus">-                     label-week-view=&quot;&amp;goPreviousCmd.week.label;&quot;</span>
<a href="#l23.42"></a><span id="l23.42" class="difflineminus">-                     label-multiweek-view=&quot;&amp;goPreviousCmd.week.label;&quot;</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineminus">-                     label-month-view=&quot;&amp;goPreviousCmd.month.label;&quot;</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineplus">+                     label-day=&quot;&amp;goPreviousCmd.day.label;&quot;</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineplus">+                     label-week=&quot;&amp;goPreviousCmd.week.label;&quot;</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineplus">+                     label-multiweek=&quot;&amp;goPreviousCmd.week.label;&quot;</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineplus">+                     label-month=&quot;&amp;goPreviousCmd.month.label;&quot;</span>
<a href="#l23.48"></a><span id="l23.48">                      accesskey=&quot;&amp;goPreviousCmd.accesskey;&quot;</span>
<a href="#l23.49"></a><span id="l23.49">                      observes=&quot;calendar_view_prev_command&quot;/&gt;</span>
<a href="#l23.50"></a><span id="l23.50">            &lt;menuitem id=&quot;calendar-go-menu-next&quot;</span>
<a href="#l23.51"></a><span id="l23.51">                      label=&quot;&quot;</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineminus">-                     label-day-view=&quot;&amp;goNextCmd.day.label;&quot;</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineminus">-                     label-week-view=&quot;&amp;goNextCmd.week.label;&quot;</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineminus">-                     label-multiweek-view=&quot;&amp;goNextCmd.week.label;&quot;</span>
<a href="#l23.55"></a><span id="l23.55" class="difflineminus">-                     label-month-view=&quot;&amp;goNextCmd.month.label;&quot;</span>
<a href="#l23.56"></a><span id="l23.56" class="difflineplus">+                     label-day=&quot;&amp;goNextCmd.day.label;&quot;</span>
<a href="#l23.57"></a><span id="l23.57" class="difflineplus">+                     label-week=&quot;&amp;goNextCmd.week.label;&quot;</span>
<a href="#l23.58"></a><span id="l23.58" class="difflineplus">+                     label-multiweek=&quot;&amp;goNextCmd.week.label;&quot;</span>
<a href="#l23.59"></a><span id="l23.59" class="difflineplus">+                     label-month=&quot;&amp;goNextCmd.month.label;&quot;</span>
<a href="#l23.60"></a><span id="l23.60">                      accesskey=&quot;&amp;goNextCmd.all.accesskey;&quot;</span>
<a href="#l23.61"></a><span id="l23.61">                      observes=&quot;calendar_view_next_command&quot;/&gt;</span>
<a href="#l23.62"></a><span id="l23.62">          &lt;/menupopup&gt;</span>
<a href="#l23.63"></a><span id="l23.63">        &lt;/menu&gt;</span>
<a href="#l23.64"></a><span id="l23.64"> </span>
<a href="#l23.65"></a><span id="l23.65">        &lt;menu id=&quot;menu_Tools&quot;</span>
<a href="#l23.66"></a><span id="l23.66">              label=&quot;&amp;toolsMenu.label;&quot;</span>
<a href="#l23.67"></a><span id="l23.67">              accesskey=&quot;&amp;toolsMenu.accesskey;&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/sunbird/base/content/calendar-sets.inc</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/sunbird/base/content/calendar-sets.inc</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -66,16 +66,17 @@</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">   &lt;!-- Sunbird specific commands --&gt;</span>
<a href="#l24.6"></a><span id="l24.6">   &lt;command id=&quot;open_local_calendar_command&quot; oncommand=&quot;openLocalCalendar()&quot;/&gt;</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8">   &lt;command id=&quot;go_date_command&quot; oncommand=&quot;pickAndGoToDate()&quot;/&gt;</span>
<a href="#l24.9"></a><span id="l24.9">   &lt;command id=&quot;cmd_quitApplication&quot;     oncommand=&quot;goQuitApplication()&quot;/&gt;</span>
<a href="#l24.10"></a><span id="l24.10"> 	</span>
<a href="#l24.11"></a><span id="l24.11">   &lt;command id=&quot;close_calendar_command&quot; oncommand=&quot;closeCalendar()&quot;/&gt;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+  &lt;command id=&quot;calendar_go_to_today_command&quot; oncommand=&quot;goToDate(now())&quot;/&gt;</span>
<a href="#l24.13"></a><span id="l24.13"> </span>
<a href="#l24.14"></a><span id="l24.14"> #ifdef XP_MACOSX</span>
<a href="#l24.15"></a><span id="l24.15">   &lt;command id=&quot;minimizeWindowCmd&quot; oncommand=&quot;window.minimize();&quot;/&gt;</span>
<a href="#l24.16"></a><span id="l24.16">   &lt;command id=&quot;zoomWindowCmd&quot; oncommand=&quot;zoomWindow();&quot;/&gt;</span>
<a href="#l24.17"></a><span id="l24.17"> #endif</span>
<a href="#l24.18"></a><span id="l24.18"> &lt;/commandset&gt;</span>
<a href="#l24.19"></a><span id="l24.19"> </span>
<a href="#l24.20"></a><span id="l24.20"> &lt;keyset id=&quot;calendar-keys&quot;&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

